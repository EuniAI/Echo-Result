2025-12-21 16:24:17,865 - thread-130694728648384.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: ModelForm RadioSelect widget for foreign keys should not present a blank option if blank=False on the model

Description: Description
	
Unlike the select widget, where a blank option is idiomatic even for required fields, radioselect has an inherent unfilled state that makes the "-------" option look suspiciously like a valid choice.
class TestRun(models.Model):
	data_file = models.ForeignKey(BatchData, on_delete=models.SET_NULL, null=True, blank=False)
class TestRunForm(ModelForm):
	class Meta:
		model = TestRun
		fields = ['data_file']
		widgets = {'data_file': RadioSelect()}
renders {{test_run_form.data_file}} as
<ul id="id_data_file">
 <li><label for="id_data_file_0">
	<input checked="checked" id="id_data_file_0" name="data_file" type="radio" value=""> ---------
 </label></li>
 <li><label for="id_data_file_1">
	<input id="id_data_file_1" name="data_file" type="radio" value="1"> First Data File
 </label></li>
</ul>
Instead, there should be no checked option for RadioSelect's <input> tags when rendering a new form from a model if blank is not a valid selection.

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index dafc11f995..23d2f29c97 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1185,7 +1185,16 @@ class ModelChoiceField(ChoiceField):
                  required=True, widget=None, label=None, initial=None,
                  help_text='', to_field_name=None, limit_choices_to=None,
                  **kwargs):
-        if required and (initial is not None):
+        # Determine empty_label considering widget type. For required fields rendered
+        # with radios and no initial/default, don't include an empty choice.
+        is_radio = False
+        if widget is not None:
+            w = widget
+            if isinstance(w, type):
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+            else:
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+        if required and ((initial is not None) or (initial is None and is_radio)):
             self.empty_label = None
         else:
             self.empty_label = empty_label
diff --git a/docs/ref/forms/fields.txt b/docs/ref/forms/fields.txt
index d2a0550a47..f6210b08f5 100644
--- a/docs/ref/forms/fields.txt
+++ b/docs/ref/forms/fields.txt
@@ -1178,7 +1178,9 @@ generating choices. See :ref:`iterating-relationship-choices` for details.
         empty choice at the top of the list. You can change the text of this
         label (which is ``"---------"`` by default) with the ``empty_label``
         attribute, or you can disable the empty label entirely by setting
-        ``empty_label`` to ``None``::
+        ``empty_label`` to ``None``. When using a ``RadioSelect`` widget on a
+        required field without an initial value, the empty choice is not rendered
+        and no option is pre-selected::
 
             # A custom empty label
             field1 = forms.ModelChoiceField(queryset=..., empty_label="(Nothing)")
diff --git a/docs/topics/forms/modelforms.txt b/docs/topics/forms/modelforms.txt
index c3e6e5c99e..bc2b0213ff 100644
--- a/docs/topics/forms/modelforms.txt
+++ b/docs/topics/forms/modelforms.txt
@@ -154,10 +154,12 @@ In addition, each generated form field has attributes set as follows:
 * If the model field has ``choices`` set, then the form field's ``widget``
   will be set to ``Select``, with choices coming from the model field's
   ``choices``. The choices will normally include the blank choice which is
-  selected by default. If the field is required, this forces the user to
-  make a selection. The blank choice will not be included if the model
-  field has ``blank=False`` and an explicit ``default`` value (the
-  ``default`` value will be initially selected instead).
+  selected by default when using a ``Select`` widget. If the field is
+  required, this forces the user to make a selection. The blank choice will
+  not be included if the model field has ``blank=False`` and an explicit
+  ``default`` value (the ``default`` value will be initially selected instead).
+  When using a ``RadioSelect`` widget on a required field without an initial
+  value, no blank radio option is rendered and no option is pre-selected.
 
 Finally, note that you can override the form field used for a given model
 field. See `Overriding the default fields`_ below.


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-21 16:24:18,037 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   └── test_sqlite.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: ModelForm RadioSelect widget for foreign keys should not present a blank option if blank=False on the model

Description: Description
	
Unlike the select widget, where a blank option is idiomatic even for required fields, radioselect has an inherent unfilled state that makes the "-------" option look suspiciously like a valid choice.
class TestRun(models.Model):
	data_file = models.ForeignKey(BatchData, on_delete=models.SET_NULL, null=True, blank=False)
class TestRunForm(ModelForm):
	class Meta:
		model = TestRun
		fields = ['data_file']
		widgets = {'data_file': RadioSelect()}
renders {{test_run_form.data_file}} as
<ul id="id_data_file">
 <li><label for="id_data_file_0">
	<input checked="checked" id="id_data_file_0" name="data_file" type="radio" value=""> ---------
 </label></li>
 <li><label for="id_data_file_1">
	<input id="id_data_file_1" name="data_file" type="radio" value="1"> First Data File
 </label></li>
</ul>
Instead, there should be no checked option for RadioSelect's <input> tags when rendering a new form from a model if blank is not a valid selection.

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index dafc11f995..23d2f29c97 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1185,7 +1185,16 @@ class ModelChoiceField(ChoiceField):
                  required=True, widget=None, label=None, initial=None,
                  help_text='', to_field_name=None, limit_choices_to=None,
                  **kwargs):
-        if required and (initial is not None):
+        # Determine empty_label considering widget type. For required fields rendered
+        # with radios and no initial/default, don't include an empty choice.
+        is_radio = False
+        if widget is not None:
+            w = widget
+            if isinstance(w, type):
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+            else:
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+        if required and ((initial is not None) or (initial is None and is_radio)):
             self.empty_label = None
         else:
             self.empty_label = empty_label
diff --git a/docs/ref/forms/fields.txt b/docs/ref/forms/fields.txt
index d2a0550a47..f6210b08f5 100644
--- a/docs/ref/forms/fields.txt
+++ b/docs/ref/forms/fields.txt
@@ -1178,7 +1178,9 @@ generating choices. See :ref:`iterating-relationship-choices` for details.
         empty choice at the top of the list. You can change the text of this
         label (which is ``"---------"`` by default) with the ``empty_label``
         attribute, or you can disable the empty label entirely by setting
-        ``empty_label`` to ``None``::
+        ``empty_label`` to ``None``. When using a ``RadioSelect`` widget on a
+        required field without an initial value, the empty choice is not rendered
+        and no option is pre-selected::
 
             # A custom empty label
             field1 = forms.ModelChoiceField(queryset=..., empty_label="(Nothing)")
diff --git a/docs/topics/forms/modelforms.txt b/docs/topics/forms/modelforms.txt
index c3e6e5c99e..bc2b0213ff 100644
--- a/docs/topics/forms/modelforms.txt
+++ b/docs/topics/forms/modelforms.txt
@@ -154,10 +154,12 @@ In addition, each generated form field has attributes set as follows:
 * If the model field has ``choices`` set, then the form field's ``widget``
   will be set to ``Select``, with choices coming from the model field's
   ``choices``. The choices will normally include the blank choice which is
-  selected by default. If the field is required, this forces the user to
-  make a selection. The blank choice will not be included if the model
-  field has ``blank=False`` and an explicit ``default`` value (the
-  ``default`` value will be initially selected instead).
+  selected by default when using a ``Select`` widget. If the field is
+  required, this forces the user to make a selection. The blank choice will
+  not be included if the model field has ``blank=False`` and an explicit
+  ``default`` value (the ``default`` value will be initially selected instead).
+  When using a ``RadioSelect`` widget on a required field without an initial
+  value, no blank radio option is rendered and no option is pre-selected.
 
 Finally, note that you can override the form field used for a given model
 field. See `Overriding the default fields`_ below.


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 16:24:52,013 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find relevant test cases for a bug concerning `ModelForm`'s `RadioSelect` widget with `ForeignKey`. The patch modifies `django/forms/models.py` within the `ModelChoiceField` class. To find similar existing tests, I need to examine the tests for `ModelChoiceField` and the models used in those tests. The most relevant files for this purpose are `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`." query='Please provide the full content of `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`.' extra_requirements='' purpose='I need to analyze these files to identify at least three existing test cases that demonstrate how `ModelChoiceField` is tested with various configurations, which will help in finding tests analogous to the bug report.'
2025-12-21 16:24:52,014 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`.
2025-12-21 16:24:52,014 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 16:24:52,015 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 16:24:52,015 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 16:24:52,015 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`.
Purpose: I need to analyze these files to identify at least three existing test cases that demonstrate how `ModelChoiceField` is tested with various configurations, which will help in finding tests analogous to the bug report.
2025-12-21 16:24:55,041 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of the two requested files to help you analyze how `ModelChoiceField` is tested. You can now examine these files to find test cases relevant to the bug report.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/model_forms/models.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2129, 'candidates_token_count': 89, 'total_token_count': 2372, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2129}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 89}], 'thoughts_token_count': 154, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.059260759460792116, 'model_name': 'gemini-2.5-pro'} id='run--5e62eded-c234-4419-91bf-bba2ed95b1bf-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/model_forms/test_modelchoicefield.py'}, 'id': 'c4e2913f-8401-4ad5-8172-d032d2b022bc', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/model_forms/models.py'}, 'id': '1aecc591-9f89-43de-bf2f-80889df0e67e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2129, 'output_tokens': 89, 'total_tokens': 2372, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 154}}
2025-12-21 16:25:03,819 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have analyzed the two files you requested. In `tests/model_forms/test_modelchoicefield.py`, I found several test cases that demonstrate various configurations of `ModelChoiceField`. For example, the `test_basics` method covers the default behavior, `test_clean_to_field_name` shows how to use a field other than the primary key for the choice values, and `test_disabled_modelchoicefield` tests the behavior of a disabled field. These examples should provide a good starting point for understanding how `ModelChoiceField` is tested and for finding tests analogous to the bug report you are investigating.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 14242, 'candidates_token_count': 131, 'total_token_count': 15001, 'cached_content_token_count': 1878, 'prompt_tokens_details': [{'modality': 1, 'token_count': 14242}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1878}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 131}], 'thoughts_token_count': 628}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5181929027761212, 'model_name': 'gemini-2.5-pro'} id='run--92f598a9-41a8-43af-8419-7f5151f957a5-0' usage_metadata={'input_tokens': 14242, 'output_tokens': 131, 'total_tokens': 15001, 'input_token_details': {'cache_read': 1878}, 'output_token_details': {'reasoning': 628}}
2025-12-21 16:25:03,821 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to analyze these files to identify at least three existing test cases that demonstrate how `ModelChoiceField` is tested with various configurations, which will help in finding tests analogous to the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/model_forms/models.py
Line number range: 1 - 462
Content:
1. import datetime
2. import os
3. import tempfile
4. import uuid
5. 
6. from django.core import validators
7. from django.core.exceptions import ValidationError
8. from django.core.files.storage import FileSystemStorage
9. from django.db import models
10. 
11. temp_storage_dir = tempfile.mkdtemp()
12. temp_storage = FileSystemStorage(temp_storage_dir)
13. 
14. 
15. class Person(models.Model):
16.     name = models.CharField(max_length=100)
17. 
18. 
19. class Category(models.Model):
20.     name = models.CharField(max_length=20)
21.     slug = models.SlugField(max_length=20)
22.     url = models.CharField('The URL', max_length=40)
23. 
24.     def __str__(self):
25.         return self.name
26. 
27.     def __repr__(self):
28.         return self.__str__()
29. 
30. 
31. class Writer(models.Model):
32.     name = models.CharField(max_length=50, help_text='Use both first and last names.')
33. 
34.     class Meta:
35.         ordering = ('name',)
36. 
37.     def __str__(self):
38.         return self.name
39. 
40. 
41. class Article(models.Model):
42.     ARTICLE_STATUS = (
43.         (1, 'Draft'),
44.         (2, 'Pending'),
45.         (3, 'Live'),
46.     )
47.     headline = models.CharField(max_length=50)
48.     slug = models.SlugField()
49.     pub_date = models.DateField()
50.     created = models.DateField(editable=False)
51.     writer = models.ForeignKey(Writer, models.CASCADE)
52.     article = models.TextField()
53.     categories = models.ManyToManyField(Category, blank=True)
54.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)
55. 
56.     def save(self, *args, **kwargs):
57.         if not self.id:
58.             self.created = datetime.date.today()
59.         return super().save(*args, **kwargs)
60. 
61.     def __str__(self):
62.         return self.headline
63. 
64. 
65. class ImprovedArticle(models.Model):
66.     article = models.OneToOneField(Article, models.CASCADE)
67. 
68. 
69. class ImprovedArticleWithParentLink(models.Model):
70.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)
71. 
72. 
73. class BetterWriter(Writer):
74.     score = models.IntegerField()
75. 
76. 
77. class Publication(models.Model):
78.     title = models.CharField(max_length=30)
79.     date_published = models.DateField()
80. 
81.     def __str__(self):
82.         return self.title
83. 
84. 
85. def default_mode():
86.     return 'di'
87. 
88. 
89. def default_category():
90.     return 3
91. 
92. 
93. class PublicationDefaults(models.Model):
94.     MODE_CHOICES = (('di', 'direct'), ('de', 'delayed'))
95.     CATEGORY_CHOICES = ((1, 'Games'), (2, 'Comics'), (3, 'Novel'))
96.     title = models.CharField(max_length=30)
97.     date_published = models.DateField(default=datetime.date.today)
98.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))
99.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)
100.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)
101.     active = models.BooleanField(default=True)
102.     file = models.FileField(default='default.txt')
103. 
104. 
105. class Author(models.Model):
106.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)
107.     full_name = models.CharField(max_length=255)
108. 
109. 
110. class Author1(models.Model):
111.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)
112.     full_name = models.CharField(max_length=255)
113. 
114. 
115. class WriterProfile(models.Model):
116.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)
117.     age = models.PositiveIntegerField()
118. 
119.     def __str__(self):
120.         return "%s is %s" % (self.writer, self.age)
121. 
122. 
123. class Document(models.Model):
124.     myfile = models.FileField(upload_to='unused', blank=True)
125. 
126. 
127. class TextFile(models.Model):
128.     description = models.CharField(max_length=20)
129.     file = models.FileField(storage=temp_storage, upload_to='tests', max_length=15)
130. 
131.     def __str__(self):
132.         return self.description
133. 
134. 
135. class CustomFileField(models.FileField):
136.     def save_form_data(self, instance, data):
137.         been_here = getattr(self, 'been_saved', False)
138.         assert not been_here, "save_form_data called more than once"
139.         setattr(self, 'been_saved', True)
140. 
141. 
142. class CustomFF(models.Model):
143.     f = CustomFileField(upload_to='unused', blank=True)
144. 
145. 
146. class FilePathModel(models.Model):
147.     path = models.FilePathField(path=os.path.dirname(__file__), match='models.py', blank=True)
148. 
149. 
150. try:
151.     from PIL import Image  # NOQA: detect if Pillow is installed
152. 
153.     test_images = True
154. 
155.     class ImageFile(models.Model):
156.         def custom_upload_path(self, filename):
157.             path = self.path or 'tests'
158.             return '%s/%s' % (path, filename)
159. 
160.         description = models.CharField(max_length=20)
161. 
162.         # Deliberately put the image field *after* the width/height fields to
163.         # trigger the bug in #10404 with width/height not getting assigned.
164.         width = models.IntegerField(editable=False)
165.         height = models.IntegerField(editable=False)
166.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
167.                                   width_field='width', height_field='height')
168.         path = models.CharField(max_length=16, blank=True, default='')
169. 
170.         def __str__(self):
171.             return self.description
172. 
173.     class OptionalImageFile(models.Model):
174.         def custom_upload_path(self, filename):
175.             path = self.path or 'tests'
176.             return '%s/%s' % (path, filename)
177. 
178.         description = models.CharField(max_length=20)
179.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
180.                                   width_field='width', height_field='height',
181.                                   blank=True, null=True)
182.         width = models.IntegerField(editable=False, null=True)
183.         height = models.IntegerField(editable=False, null=True)
184.         path = models.CharField(max_length=16, blank=True, default='')
185. 
186.         def __str__(self):
187.             return self.description
188. 
189.     class NoExtensionImageFile(models.Model):
190.         def upload_to(self, filename):
191.             return 'tests/no_extension'
192. 
193.         description = models.CharField(max_length=20)
194.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)
195. 
196.         def __str__(self):
197.             return self.description
198. 
199. except ImportError:
200.     test_images = False
201. 
202. 
203. class Homepage(models.Model):
204.     url = models.URLField()
205. 
206. 
207. class Product(models.Model):
208.     slug = models.SlugField(unique=True)
209. 
210.     def __str__(self):
211.         return self.slug
212. 
213. 
214. class Price(models.Model):
215.     price = models.DecimalField(max_digits=10, decimal_places=2)
216.     quantity = models.PositiveIntegerField()
217. 
218.     class Meta:
219.         unique_together = (('price', 'quantity'),)
220. 
221.     def __str__(self):
222.         return "%s for %s" % (self.quantity, self.price)
223. 
224. 
225. class Triple(models.Model):
226.     left = models.IntegerField()
227.     middle = models.IntegerField()
228.     right = models.IntegerField()
229. 
230.     class Meta:
231.         unique_together = (('left', 'middle'), ('middle', 'right'))
232. 
233. 
234. class ArticleStatus(models.Model):
235.     ARTICLE_STATUS_CHAR = (
236.         ('d', 'Draft'),
237.         ('p', 'Pending'),
238.         ('l', 'Live'),
239.     )
240.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)
241. 
242. 
243. class Inventory(models.Model):
244.     barcode = models.PositiveIntegerField(unique=True)
245.     parent = models.ForeignKey('self', models.SET_NULL, to_field='barcode', blank=True, null=True)
246.     name = models.CharField(blank=False, max_length=20)
247. 
248.     class Meta:
249.         ordering = ('name',)
250. 
251.     def __str__(self):
252.         return self.name
253. 
254.     def __repr__(self):
255.         return self.__str__()
256. 
257. 
258. class Book(models.Model):
259.     title = models.CharField(max_length=40)
260.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)
261.     special_id = models.IntegerField(blank=True, null=True, unique=True)
262. 
263.     class Meta:
264.         unique_together = ('title', 'author')
265. 
266. 
267. class BookXtra(models.Model):
268.     isbn = models.CharField(max_length=16, unique=True)
269.     suffix1 = models.IntegerField(blank=True, default=0)
270.     suffix2 = models.IntegerField(blank=True, default=0)
271. 
272.     class Meta:
273.         unique_together = (('suffix1', 'suffix2'))
274.         abstract = True
275. 
276. 
277. class DerivedBook(Book, BookXtra):
278.     pass
279. 
280. 
281. class ExplicitPK(models.Model):
282.     key = models.CharField(max_length=20, primary_key=True)
283.     desc = models.CharField(max_length=20, blank=True, unique=True)
284. 
285.     class Meta:
286.         unique_together = ('key', 'desc')
287. 
288.     def __str__(self):
289.         return self.key
290. 
291. 
292. class Post(models.Model):
293.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
294.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
295.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
296.     posted = models.DateField()
297. 
298.     def __str__(self):
299.         return self.title
300. 
301. 
302. class DateTimePost(models.Model):
303.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
304.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
305.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
306.     posted = models.DateTimeField(editable=False)
307. 
308.     def __str__(self):
309.         return self.title
310. 
311. 
312. class DerivedPost(Post):
313.     pass
314. 
315. 
316. class BigInt(models.Model):
317.     biggie = models.BigIntegerField()
318. 
319.     def __str__(self):
320.         return str(self.biggie)
321. 
322. 
323. class MarkupField(models.CharField):
324.     def __init__(self, *args, **kwargs):
325.         kwargs["max_length"] = 20
326.         super().__init__(*args, **kwargs)
327. 
328.     def formfield(self, **kwargs):
329.         # don't allow this field to be used in form (real use-case might be
330.         # that you know the markup will always be X, but it is among an app
331.         # that allows the user to say it could be something else)
332.         # regressed at r10062
333.         return None
334. 
335. 
336. class CustomFieldForExclusionModel(models.Model):
337.     name = models.CharField(max_length=10)
338.     markup = MarkupField()
339. 
340. 
341. class FlexibleDatePost(models.Model):
342.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
343.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
344.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
345.     posted = models.DateField(blank=True, null=True)
346. 
347. 
348. class Colour(models.Model):
349.     name = models.CharField(max_length=50)
350. 
351.     def __iter__(self):
352.         yield from range(5)
353. 
354.     def __str__(self):
355.         return self.name
356. 
357. 
358. class ColourfulItem(models.Model):
359.     name = models.CharField(max_length=50)
360.     colours = models.ManyToManyField(Colour)
361. 
362. 
363. class CustomErrorMessage(models.Model):
364.     name1 = models.CharField(
365.         max_length=50,
366.         validators=[validators.validate_slug],
367.         error_messages={'invalid': 'Model custom error message.'},
368.     )
369.     name2 = models.CharField(
370.         max_length=50,
371.         validators=[validators.validate_slug],
372.         error_messages={'invalid': 'Model custom error message.'},
373.     )
374. 
375.     def clean(self):
376.         if self.name1 == 'FORBIDDEN_VALUE':
377.             raise ValidationError({'name1': [ValidationError('Model.clean() error messages.')]})
378.         elif self.name1 == 'FORBIDDEN_VALUE2':
379.             raise ValidationError({'name1': 'Model.clean() error messages (simpler syntax).'})
380.         elif self.name1 == 'GLOBAL_ERROR':
381.             raise ValidationError("Global error message.")
382. 
383. 
384. def today_callable_dict():
385.     return {"last_action__gte": datetime.datetime.today()}
386. 
387. 
388. def today_callable_q():
389.     return models.Q(last_action__gte=datetime.datetime.today())
390. 
391. 
392. class Character(models.Model):
393.     username = models.CharField(max_length=100)
394.     last_action = models.DateTimeField()
395. 
396. 
397. class StumpJoke(models.Model):
398.     most_recently_fooled = models.ForeignKey(
399.         Character,
400.         models.CASCADE,
401.         limit_choices_to=today_callable_dict,
402.         related_name="+",
403.     )
404.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")
405. 
406. 
407. # Model for #13776
408. class Student(models.Model):
409.     character = models.ForeignKey(Character, models.CASCADE)
410.     study = models.CharField(max_length=30)
411. 
412. 
413. # Model for #639
414. class Photo(models.Model):
415.     title = models.CharField(max_length=30)
416.     image = models.FileField(storage=temp_storage, upload_to='tests')
417. 
418.     # Support code for the tests; this keeps track of how many times save()
419.     # gets called on each instance.
420.     def __init__(self, *args, **kwargs):
421.         super().__init__(*args, **kwargs)
422.         self._savecount = 0
423. 
424.     def save(self, force_insert=False, force_update=False):
425.         super().save(force_insert, force_update)
426.         self._savecount += 1
427. 
428. 
429. class UUIDPK(models.Model):
430.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
431.     name = models.CharField(max_length=30)
432. 
433. 
434. # Models for #24706
435. class StrictAssignmentFieldSpecific(models.Model):
436.     title = models.CharField(max_length=30)
437.     _should_error = False
438. 
439.     def __setattr__(self, key, value):
440.         if self._should_error is True:
441.             raise ValidationError(message={key: "Cannot set attribute"}, code='invalid')
442.         super().__setattr__(key, value)
443. 
444. 
445. class StrictAssignmentAll(models.Model):
446.     title = models.CharField(max_length=30)
447.     _should_error = False
448. 
449.     def __setattr__(self, key, value):
450.         if self._should_error is True:
451.             raise ValidationError(message="Cannot set attribute", code='invalid')
452.         super().__setattr__(key, value)
453. 
454. 
455. # A model with ForeignKey(blank=False, null=True)
456. class Award(models.Model):
457.     name = models.CharField(max_length=30)
458.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)
459. 
460. 
461. class NullableUniqueCharFieldModel(models.Model):
462.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)


File: tests/model_forms/test_modelchoicefield.py
Line number range: 1 - 355
Content:
1. import datetime
2. 
3. from django import forms
4. from django.core.validators import ValidationError
5. from django.forms.models import ModelChoiceIterator
6. from django.forms.widgets import CheckboxSelectMultiple
7. from django.template import Context, Template
8. from django.test import TestCase
9. 
10. from .models import Article, Author, Book, Category, Writer
11. 
12. 
13. class ModelChoiceFieldTests(TestCase):
14.     @classmethod
15.     def setUpTestData(cls):
16.         cls.c1 = Category.objects.create(name='Entertainment', slug='entertainment', url='entertainment')
17.         cls.c2 = Category.objects.create(name='A test', slug='test', url='test')
18.         cls.c3 = Category.objects.create(name='Third', slug='third-test', url='third')
19. 
20.     def test_basics(self):
21.         f = forms.ModelChoiceField(Category.objects.all())
22.         self.assertEqual(list(f.choices), [
23.             ('', '---------'),
24.             (self.c1.pk, 'Entertainment'),
25.             (self.c2.pk, 'A test'),
26.             (self.c3.pk, 'Third'),
27.         ])
28.         with self.assertRaises(ValidationError):
29.             f.clean('')
30.         with self.assertRaises(ValidationError):
31.             f.clean(None)
32.         with self.assertRaises(ValidationError):
33.             f.clean(0)
34. 
35.         # Invalid types that require TypeError to be caught.
36.         with self.assertRaises(ValidationError):
37.             f.clean([['fail']])
38.         with self.assertRaises(ValidationError):
39.             f.clean([{'foo': 'bar'}])
40. 
41.         self.assertEqual(f.clean(self.c2.id).name, 'A test')
42.         self.assertEqual(f.clean(self.c3.id).name, 'Third')
43. 
44.         # Add a Category object *after* the ModelChoiceField has already been
45.         # instantiated. This proves clean() checks the database during clean()
46.         # rather than caching it at  instantiation time.
47.         c4 = Category.objects.create(name='Fourth', url='4th')
48.         self.assertEqual(f.clean(c4.id).name, 'Fourth')
49. 
50.         # Delete a Category object *after* the ModelChoiceField has already been
51.         # instantiated. This proves clean() checks the database during clean()
52.         # rather than caching it at instantiation time.
53.         Category.objects.get(url='4th').delete()
54.         msg = "['Select a valid choice. That choice is not one of the available choices.']"
55.         with self.assertRaisesMessage(ValidationError, msg):
56.             f.clean(c4.id)
57. 
58.     def test_clean_model_instance(self):
59.         f = forms.ModelChoiceField(Category.objects.all())
60.         self.assertEqual(f.clean(self.c1), self.c1)
61.         # An instance of incorrect model.
62.         msg = "['Select a valid choice. That choice is not one of the available choices.']"
63.         with self.assertRaisesMessage(ValidationError, msg):
64.             f.clean(Book.objects.create())
65. 
66.     def test_clean_to_field_name(self):
67.         f = forms.ModelChoiceField(Category.objects.all(), to_field_name='slug')
68.         self.assertEqual(f.clean(self.c1.slug), self.c1)
69.         self.assertEqual(f.clean(self.c1), self.c1)
70. 
71.     def test_choices(self):
72.         f = forms.ModelChoiceField(Category.objects.filter(pk=self.c1.id), required=False)
73.         self.assertIsNone(f.clean(''))
74.         self.assertEqual(f.clean(str(self.c1.id)).name, 'Entertainment')
75.         with self.assertRaises(ValidationError):
76.             f.clean('100')
77. 
78.         # len() can be called on choices.
79.         self.assertEqual(len(f.choices), 2)
80. 
81.         # queryset can be changed after the field is created.
82.         f.queryset = Category.objects.exclude(name='Third')
83.         self.assertEqual(list(f.choices), [
84.             ('', '---------'),
85.             (self.c1.pk, 'Entertainment'),
86.             (self.c2.pk, 'A test'),
87.         ])
88.         self.assertEqual(f.clean(self.c2.id).name, 'A test')
89.         with self.assertRaises(ValidationError):
90.             f.clean(self.c3.id)
91. 
92.         # Choices can be iterated repeatedly.
93.         gen_one = list(f.choices)
94.         gen_two = f.choices
95.         self.assertEqual(gen_one[2], (self.c2.pk, 'A test'))
96.         self.assertEqual(list(gen_two), [
97.             ('', '---------'),
98.             (self.c1.pk, 'Entertainment'),
99.             (self.c2.pk, 'A test'),
100.         ])
101. 
102.         # Overriding label_from_instance() to print custom labels.
103.         f.queryset = Category.objects.all()
104.         f.label_from_instance = lambda obj: 'category ' + str(obj)
105.         self.assertEqual(list(f.choices), [
106.             ('', '---------'),
107.             (self.c1.pk, 'category Entertainment'),
108.             (self.c2.pk, 'category A test'),
109.             (self.c3.pk, 'category Third'),
110.         ])
111. 
112.     def test_choices_freshness(self):
113.         f = forms.ModelChoiceField(Category.objects.all())
114.         self.assertEqual(len(f.choices), 4)
115.         self.assertEqual(list(f.choices), [
116.             ('', '---------'),
117.             (self.c1.pk, 'Entertainment'),
118.             (self.c2.pk, 'A test'),
119.             (self.c3.pk, 'Third'),
120.         ])
121.         c4 = Category.objects.create(name='Fourth', slug='4th', url='4th')
122.         self.assertEqual(len(f.choices), 5)
123.         self.assertEqual(list(f.choices), [
124.             ('', '---------'),
125.             (self.c1.pk, 'Entertainment'),
126.             (self.c2.pk, 'A test'),
127.             (self.c3.pk, 'Third'),
128.             (c4.pk, 'Fourth'),
129.         ])
130. 
131.     def test_choices_bool(self):
132.         f = forms.ModelChoiceField(Category.objects.all(), empty_label=None)
133.         self.assertIs(bool(f.choices), True)
134.         Category.objects.all().delete()
135.         self.assertIs(bool(f.choices), False)
136. 
137.     def test_choices_bool_empty_label(self):
138.         f = forms.ModelChoiceField(Category.objects.all(), empty_label='--------')
139.         Category.objects.all().delete()
140.         self.assertIs(bool(f.choices), True)
141. 
142.     def test_deepcopies_widget(self):
143.         class ModelChoiceForm(forms.Form):
144.             category = forms.ModelChoiceField(Category.objects.all())
145. 
146.         form1 = ModelChoiceForm()
147.         field1 = form1.fields['category']
148.         # To allow the widget to change the queryset of field1.widget.choices
149.         # without affecting other forms, the following must hold (#11183):
150.         self.assertIsNot(field1, ModelChoiceForm.base_fields['category'])
151.         self.assertIs(field1.widget.choices.field, field1)
152. 
153.     def test_result_cache_not_shared(self):
154.         class ModelChoiceForm(forms.Form):
155.             category = forms.ModelChoiceField(Category.objects.all())
156. 
157.         form1 = ModelChoiceForm()
158.         self.assertCountEqual(form1.fields['category'].queryset, [self.c1, self.c2, self.c3])
159.         form2 = ModelChoiceForm()
160.         self.assertIsNone(form2.fields['category'].queryset._result_cache)
161. 
162.     def test_queryset_none(self):
163.         class ModelChoiceForm(forms.Form):
164.             category = forms.ModelChoiceField(queryset=None)
165. 
166.             def __init__(self, *args, **kwargs):
167.                 super().__init__(*args, **kwargs)
168.                 self.fields['category'].queryset = Category.objects.filter(slug__contains='test')
169. 
170.         form = ModelChoiceForm()
171.         self.assertCountEqual(form.fields['category'].queryset, [self.c2, self.c3])
172. 
173.     def test_no_extra_query_when_accessing_attrs(self):
174.         """
175.         ModelChoiceField with RadioSelect widget doesn't produce unnecessary
176.         db queries when accessing its BoundField's attrs.
177.         """
178.         class ModelChoiceForm(forms.Form):
179.             category = forms.ModelChoiceField(Category.objects.all(), widget=forms.RadioSelect)
180. 
181.         form = ModelChoiceForm()
182.         field = form['category']  # BoundField
183.         template = Template('{{ field.name }}{{ field }}{{ field.help_text }}')
184.         with self.assertNumQueries(1):
185.             template.render(Context({'field': field}))
186. 
187.     def test_disabled_modelchoicefield(self):
188.         class ModelChoiceForm(forms.ModelForm):
189.             author = forms.ModelChoiceField(Author.objects.all(), disabled=True)
190. 
191.             class Meta:
192.                 model = Book
193.                 fields = ['author']
194. 
195.         book = Book.objects.create(author=Writer.objects.create(name='Test writer'))
196.         form = ModelChoiceForm({}, instance=book)
197.         self.assertEqual(
198.             form.errors['author'],
199.             ['Select a valid choice. That choice is not one of the available choices.']
200.         )
201. 
202.     def test_disabled_modelchoicefield_has_changed(self):
203.         field = forms.ModelChoiceField(Author.objects.all(), disabled=True)
204.         self.assertIs(field.has_changed('x', 'y'), False)
205. 
206.     def test_disabled_modelchoicefield_initial_model_instance(self):
207.         class ModelChoiceForm(forms.Form):
208.             categories = forms.ModelChoiceField(
209.                 Category.objects.all(),
210.                 disabled=True,
211.                 initial=self.c1,
212.             )
213. 
214.         self.assertTrue(ModelChoiceForm(data={'categories': self.c1.pk}).is_valid())
215. 
216.     def test_disabled_multiplemodelchoicefield(self):
217.         class ArticleForm(forms.ModelForm):
218.             categories = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
219. 
220.             class Meta:
221.                 model = Article
222.                 fields = ['categories']
223. 
224.         category1 = Category.objects.create(name='cat1')
225.         category2 = Category.objects.create(name='cat2')
226.         article = Article.objects.create(
227.             pub_date=datetime.date(1988, 1, 4),
228.             writer=Writer.objects.create(name='Test writer'),
229.         )
230.         article.categories.set([category1.pk])
231. 
232.         form = ArticleForm(data={'categories': [category2.pk]}, instance=article)
233.         self.assertEqual(form.errors, {})
234.         self.assertEqual([x.pk for x in form.cleaned_data['categories']], [category2.pk])
235.         # Disabled fields use the value from `instance` rather than `data`.
236.         form = ArticleForm(data={'categories': [category2.pk]}, instance=article)
237.         form.fields['categories'].disabled = True
238.         self.assertEqual(form.errors, {})
239.         self.assertEqual([x.pk for x in form.cleaned_data['categories']], [category1.pk])
240. 
241.     def test_disabled_modelmultiplechoicefield_has_changed(self):
242.         field = forms.ModelMultipleChoiceField(Author.objects.all(), disabled=True)
243.         self.assertIs(field.has_changed('x', 'y'), False)
244. 
245.     def test_overridable_choice_iterator(self):
246.         """
247.         Iterator defaults to ModelChoiceIterator and can be overridden with
248.         the iterator attribute on a ModelChoiceField subclass.
249.         """
250.         field = forms.ModelChoiceField(Category.objects.all())
251.         self.assertIsInstance(field.choices, ModelChoiceIterator)
252. 
253.         class CustomModelChoiceIterator(ModelChoiceIterator):
254.             pass
255. 
256.         class CustomModelChoiceField(forms.ModelChoiceField):
257.             iterator = CustomModelChoiceIterator
258. 
259.         field = CustomModelChoiceField(Category.objects.all())
260.         self.assertIsInstance(field.choices, CustomModelChoiceIterator)
261. 
262.     def test_choice_iterator_passes_model_to_widget(self):
263.         class CustomCheckboxSelectMultiple(CheckboxSelectMultiple):
264.             def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
265.                 option = super().create_option(name, value, label, selected, index, subindex, attrs)
266.                 # Modify the HTML based on the object being rendered.
267.                 c = value.instance
268.                 option['attrs']['data-slug'] = c.slug
269.                 return option
270. 
271.         class CustomModelMultipleChoiceField(forms.ModelMultipleChoiceField):
272.             widget = CustomCheckboxSelectMultiple
273. 
274.         field = CustomModelMultipleChoiceField(Category.objects.all())
275.         self.assertHTMLEqual(
276.             field.widget.render('name', []), (
277.                 '<ul>'
278.                 '<li><label><input type="checkbox" name="name" value="%d" '
279.                 'data-slug="entertainment">Entertainment</label></li>'
280.                 '<li><label><input type="checkbox" name="name" value="%d" '
281.                 'data-slug="test">A test</label></li>'
282.                 '<li><label><input type="checkbox" name="name" value="%d" '
283.                 'data-slug="third-test">Third</label></li>'
284.                 '</ul>'
285.             ) % (self.c1.pk, self.c2.pk, self.c3.pk),
286.         )
287. 
288.     def test_custom_choice_iterator_passes_model_to_widget(self):
289.         class CustomModelChoiceValue:
290.             def __init__(self, value, obj):
291.                 self.value = value
292.                 self.obj = obj
293. 
294.             def __str__(self):
295.                 return str(self.value)
296. 
297.         class CustomModelChoiceIterator(ModelChoiceIterator):
298.             def choice(self, obj):
299.                 value, label = super().choice(obj)
300.                 return CustomModelChoiceValue(value, obj), label
301. 
302.         class CustomCheckboxSelectMultiple(CheckboxSelectMultiple):
303.             def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
304.                 option = super().create_option(name, value, label, selected, index, subindex, attrs)
305.                 # Modify the HTML based on the object being rendered.
306.                 c = value.obj
307.                 option['attrs']['data-slug'] = c.slug
308.                 return option
309. 
310.         class CustomModelMultipleChoiceField(forms.ModelMultipleChoiceField):
311.             iterator = CustomModelChoiceIterator
312.             widget = CustomCheckboxSelectMultiple
313. 
314.         field = CustomModelMultipleChoiceField(Category.objects.all())
315.         self.assertHTMLEqual(
316.             field.widget.render('name', []),
317.             '''<ul>
318. <li><label><input type="checkbox" name="name" value="%d" data-slug="entertainment">Entertainment</label></li>
319. <li><label><input type="checkbox" name="name" value="%d" data-slug="test">A test</label></li>
320. <li><label><input type="checkbox" name="name" value="%d" data-slug="third-test">Third</label></li>
321. </ul>''' % (self.c1.pk, self.c2.pk, self.c3.pk),
322.         )
323. 
324.     def test_choices_not_fetched_when_not_rendering(self):
325.         with self.assertNumQueries(1):
326.             field = forms.ModelChoiceField(Category.objects.order_by('-name'))
327.             self.assertEqual('Entertainment', field.clean(self.c1.pk).name)
328. 
329.     def test_queryset_manager(self):
330.         f = forms.ModelChoiceField(Category.objects)
331.         self.assertEqual(len(f.choices), 4)
332.         self.assertEqual(list(f.choices), [
333.             ('', '---------'),
334.             (self.c1.pk, 'Entertainment'),
335.             (self.c2.pk, 'A test'),
336.             (self.c3.pk, 'Third'),
337.         ])
338. 
339.     def test_num_queries(self):
340.         """
341.         Widgets that render multiple subwidgets shouldn't make more than one
342.         database query.
343.         """
344.         categories = Category.objects.all()
345. 
346.         class CategoriesForm(forms.Form):
347.             radio = forms.ModelChoiceField(queryset=categories, widget=forms.RadioSelect)
348.             checkbox = forms.ModelMultipleChoiceField(queryset=categories, widget=forms.CheckboxSelectMultiple)
349. 
350.         template = Template(
351.             '{% for widget in form.checkbox %}{{ widget }}{% endfor %}'
352.             '{% for widget in form.radio %}{{ widget }}{% endfor %}'
353.         )
354.         with self.assertNumQueries(2):
355.             template.render(Context({'form': CategoriesForm()}))

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 16:25:09,382 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly requested the full content of the file `tests/model_forms/test_modelchoicefield.py`.', relative_path='tests/model_forms/test_modelchoicefield.py', start_line=1, end_line=355), ContextOutput(reasoning='The user explicitly requested the full content of the file `tests/model_forms/models.py`.', relative_path='tests/model_forms/models.py', start_line=1, end_line=462)]
2025-12-21 16:25:09,384 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`.
2025-12-21 16:25:09,384 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 16:25:09,384 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 16:25:09,385 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-21 16:25:09,385 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-21 16:25:09,386 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   └── test_sqlite.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: ModelForm RadioSelect widget for foreign keys should not present a blank option if blank=False on the model

Description: Description
	
Unlike the select widget, where a blank option is idiomatic even for required fields, radioselect has an inherent unfilled state that makes the "-------" option look suspiciously like a valid choice.
class TestRun(models.Model):
	data_file = models.ForeignKey(BatchData, on_delete=models.SET_NULL, null=True, blank=False)
class TestRunForm(ModelForm):
	class Meta:
		model = TestRun
		fields = ['data_file']
		widgets = {'data_file': RadioSelect()}
renders {{test_run_form.data_file}} as
<ul id="id_data_file">
 <li><label for="id_data_file_0">
	<input checked="checked" id="id_data_file_0" name="data_file" type="radio" value=""> ---------
 </label></li>
 <li><label for="id_data_file_1">
	<input id="id_data_file_1" name="data_file" type="radio" value="1"> First Data File
 </label></li>
</ul>
Instead, there should be no checked option for RadioSelect's <input> tags when rendering a new form from a model if blank is not a valid selection.

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index dafc11f995..23d2f29c97 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1185,7 +1185,16 @@ class ModelChoiceField(ChoiceField):
                  required=True, widget=None, label=None, initial=None,
                  help_text='', to_field_name=None, limit_choices_to=None,
                  **kwargs):
-        if required and (initial is not None):
+        # Determine empty_label considering widget type. For required fields rendered
+        # with radios and no initial/default, don't include an empty choice.
+        is_radio = False
+        if widget is not None:
+            w = widget
+            if isinstance(w, type):
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+            else:
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+        if required and ((initial is not None) or (initial is None and is_radio)):
             self.empty_label = None
         else:
             self.empty_label = empty_label
diff --git a/docs/ref/forms/fields.txt b/docs/ref/forms/fields.txt
index d2a0550a47..f6210b08f5 100644
--- a/docs/ref/forms/fields.txt
+++ b/docs/ref/forms/fields.txt
@@ -1178,7 +1178,9 @@ generating choices. See :ref:`iterating-relationship-choices` for details.
         empty choice at the top of the list. You can change the text of this
         label (which is ``"---------"`` by default) with the ``empty_label``
         attribute, or you can disable the empty label entirely by setting
-        ``empty_label`` to ``None``::
+        ``empty_label`` to ``None``. When using a ``RadioSelect`` widget on a
+        required field without an initial value, the empty choice is not rendered
+        and no option is pre-selected::
 
             # A custom empty label
             field1 = forms.ModelChoiceField(queryset=..., empty_label="(Nothing)")
diff --git a/docs/topics/forms/modelforms.txt b/docs/topics/forms/modelforms.txt
index c3e6e5c99e..bc2b0213ff 100644
--- a/docs/topics/forms/modelforms.txt
+++ b/docs/topics/forms/modelforms.txt
@@ -154,10 +154,12 @@ In addition, each generated form field has attributes set as follows:
 * If the model field has ``choices`` set, then the form field's ``widget``
   will be set to ``Select``, with choices coming from the model field's
   ``choices``. The choices will normally include the blank choice which is
-  selected by default. If the field is required, this forces the user to
-  make a selection. The blank choice will not be included if the model
-  field has ``blank=False`` and an explicit ``default`` value (the
-  ``default`` value will be initially selected instead).
+  selected by default when using a ``Select`` widget. If the field is
+  required, this forces the user to make a selection. The blank choice will
+  not be included if the model field has ``blank=False`` and an explicit
+  ``default`` value (the ``default`` value will be initially selected instead).
+  When using a ``RadioSelect`` widget on a required field without an initial
+  value, no blank radio option is rendered and no option is pre-selected.
 
 Finally, note that you can override the form field used for a given model
 field. See `Overriding the default fields`_ below.


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`.
Extra Requirements: 
Purpose: I need to analyze these files to identify at least three existing test cases that demonstrate how `ModelChoiceField` is tested with various configurations, which will help in finding tests analogous to the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/model_forms/models.py
Line number range: 1 - 462
Content:
1. import datetime
2. import os
3. import tempfile
4. import uuid
5. 
6. from django.core import validators
7. from django.core.exceptions import ValidationError
8. from django.core.files.storage import FileSystemStorage
9. from django.db import models
10. 
11. temp_storage_dir = tempfile.mkdtemp()
12. temp_storage = FileSystemStorage(temp_storage_dir)
13. 
14. 
15. class Person(models.Model):
16.     name = models.CharField(max_length=100)
17. 
18. 
19. class Category(models.Model):
20.     name = models.CharField(max_length=20)
21.     slug = models.SlugField(max_length=20)
22.     url = models.CharField('The URL', max_length=40)
23. 
24.     def __str__(self):
25.         return self.name
26. 
27.     def __repr__(self):
28.         return self.__str__()
29. 
30. 
31. class Writer(models.Model):
32.     name = models.CharField(max_length=50, help_text='Use both first and last names.')
33. 
34.     class Meta:
35.         ordering = ('name',)
36. 
37.     def __str__(self):
38.         return self.name
39. 
40. 
41. class Article(models.Model):
42.     ARTICLE_STATUS = (
43.         (1, 'Draft'),
44.         (2, 'Pending'),
45.         (3, 'Live'),
46.     )
47.     headline = models.CharField(max_length=50)
48.     slug = models.SlugField()
49.     pub_date = models.DateField()
50.     created = models.DateField(editable=False)
51.     writer = models.ForeignKey(Writer, models.CASCADE)
52.     article = models.TextField()
53.     categories = models.ManyToManyField(Category, blank=True)
54.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)
55. 
56.     def save(self, *args, **kwargs):
57.         if not self.id:
58.             self.created = datetime.date.today()
59.         return super().save(*args, **kwargs)
60. 
61.     def __str__(self):
62.         return self.headline
63. 
64. 
65. class ImprovedArticle(models.Model):
66.     article = models.OneToOneField(Article, models.CASCADE)
67. 
68. 
69. class ImprovedArticleWithParentLink(models.Model):
70.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)
71. 
72. 
73. class BetterWriter(Writer):
74.     score = models.IntegerField()
75. 
76. 
77. class Publication(models.Model):
78.     title = models.CharField(max_length=30)
79.     date_published = models.DateField()
80. 
81.     def __str__(self):
82.         return self.title
83. 
84. 
85. def default_mode():
86.     return 'di'
87. 
88. 
89. def default_category():
90.     return 3
91. 
92. 
93. class PublicationDefaults(models.Model):
94.     MODE_CHOICES = (('di', 'direct'), ('de', 'delayed'))
95.     CATEGORY_CHOICES = ((1, 'Games'), (2, 'Comics'), (3, 'Novel'))
96.     title = models.CharField(max_length=30)
97.     date_published = models.DateField(default=datetime.date.today)
98.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))
99.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)
100.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)
101.     active = models.BooleanField(default=True)
102.     file = models.FileField(default='default.txt')
103. 
104. 
105. class Author(models.Model):
106.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)
107.     full_name = models.CharField(max_length=255)
108. 
109. 
110. class Author1(models.Model):
111.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)
112.     full_name = models.CharField(max_length=255)
113. 
114. 
115. class WriterProfile(models.Model):
116.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)
117.     age = models.PositiveIntegerField()
118. 
119.     def __str__(self):
120.         return "%s is %s" % (self.writer, self.age)
121. 
122. 
123. class Document(models.Model):
124.     myfile = models.FileField(upload_to='unused', blank=True)
125. 
126. 
127. class TextFile(models.Model):
128.     description = models.CharField(max_length=20)
129.     file = models.FileField(storage=temp_storage, upload_to='tests', max_length=15)
130. 
131.     def __str__(self):
132.         return self.description
133. 
134. 
135. class CustomFileField(models.FileField):
136.     def save_form_data(self, instance, data):
137.         been_here = getattr(self, 'been_saved', False)
138.         assert not been_here, "save_form_data called more than once"
139.         setattr(self, 'been_saved', True)
140. 
141. 
142. class CustomFF(models.Model):
143.     f = CustomFileField(upload_to='unused', blank=True)
144. 
145. 
146. class FilePathModel(models.Model):
147.     path = models.FilePathField(path=os.path.dirname(__file__), match='models.py', blank=True)
148. 
149. 
150. try:
151.     from PIL import Image  # NOQA: detect if Pillow is installed
152. 
153.     test_images = True
154. 
155.     class ImageFile(models.Model):
156.         def custom_upload_path(self, filename):
157.             path = self.path or 'tests'
158.             return '%s/%s' % (path, filename)
159. 
160.         description = models.CharField(max_length=20)
161. 
162.         # Deliberately put the image field *after* the width/height fields to
163.         # trigger the bug in #10404 with width/height not getting assigned.
164.         width = models.IntegerField(editable=False)
165.         height = models.IntegerField(editable=False)
166.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
167.                                   width_field='width', height_field='height')
168.         path = models.CharField(max_length=16, blank=True, default='')
169. 
170.         def __str__(self):
171.             return self.description
172. 
173.     class OptionalImageFile(models.Model):
174.         def custom_upload_path(self, filename):
175.             path = self.path or 'tests'
176.             return '%s/%s' % (path, filename)
177. 
178.         description = models.CharField(max_length=20)
179.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
180.                                   width_field='width', height_field='height',
181.                                   blank=True, null=True)
182.         width = models.IntegerField(editable=False, null=True)
183.         height = models.IntegerField(editable=False, null=True)
184.         path = models.CharField(max_length=16, blank=True, default='')
185. 
186.         def __str__(self):
187.             return self.description
188. 
189.     class NoExtensionImageFile(models.Model):
190.         def upload_to(self, filename):
191.             return 'tests/no_extension'
192. 
193.         description = models.CharField(max_length=20)
194.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)
195. 
196.         def __str__(self):
197.             return self.description
198. 
199. except ImportError:
200.     test_images = False
201. 
202. 
203. class Homepage(models.Model):
204.     url = models.URLField()
205. 
206. 
207. class Product(models.Model):
208.     slug = models.SlugField(unique=True)
209. 
210.     def __str__(self):
211.         return self.slug
212. 
213. 
214. class Price(models.Model):
215.     price = models.DecimalField(max_digits=10, decimal_places=2)
216.     quantity = models.PositiveIntegerField()
217. 
218.     class Meta:
219.         unique_together = (('price', 'quantity'),)
220. 
221.     def __str__(self):
222.         return "%s for %s" % (self.quantity, self.price)
223. 
224. 
225. class Triple(models.Model):
226.     left = models.IntegerField()
227.     middle = models.IntegerField()
228.     right = models.IntegerField()
229. 
230.     class Meta:
231.         unique_together = (('left', 'middle'), ('middle', 'right'))
232. 
233. 
234. class ArticleStatus(models.Model):
235.     ARTICLE_STATUS_CHAR = (
236.         ('d', 'Draft'),
237.         ('p', 'Pending'),
238.         ('l', 'Live'),
239.     )
240.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)
241. 
242. 
243. class Inventory(models.Model):
244.     barcode = models.PositiveIntegerField(unique=True)
245.     parent = models.ForeignKey('self', models.SET_NULL, to_field='barcode', blank=True, null=True)
246.     name = models.CharField(blank=False, max_length=20)
247. 
248.     class Meta:
249.         ordering = ('name',)
250. 
251.     def __str__(self):
252.         return self.name
253. 
254.     def __repr__(self):
255.         return self.__str__()
256. 
257. 
258. class Book(models.Model):
259.     title = models.CharField(max_length=40)
260.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)
261.     special_id = models.IntegerField(blank=True, null=True, unique=True)
262. 
263.     class Meta:
264.         unique_together = ('title', 'author')
265. 
266. 
267. class BookXtra(models.Model):
268.     isbn = models.CharField(max_length=16, unique=True)
269.     suffix1 = models.IntegerField(blank=True, default=0)
270.     suffix2 = models.IntegerField(blank=True, default=0)
271. 
272.     class Meta:
273.         unique_together = (('suffix1', 'suffix2'))
274.         abstract = True
275. 
276. 
277. class DerivedBook(Book, BookXtra):
278.     pass
279. 
280. 
281. class ExplicitPK(models.Model):
282.     key = models.CharField(max_length=20, primary_key=True)
283.     desc = models.CharField(max_length=20, blank=True, unique=True)
284. 
285.     class Meta:
286.         unique_together = ('key', 'desc')
287. 
288.     def __str__(self):
289.         return self.key
290. 
291. 
292. class Post(models.Model):
293.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
294.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
295.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
296.     posted = models.DateField()
297. 
298.     def __str__(self):
299.         return self.title
300. 
301. 
302. class DateTimePost(models.Model):
303.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
304.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
305.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
306.     posted = models.DateTimeField(editable=False)
307. 
308.     def __str__(self):
309.         return self.title
310. 
311. 
312. class DerivedPost(Post):
313.     pass
314. 
315. 
316. class BigInt(models.Model):
317.     biggie = models.BigIntegerField()
318. 
319.     def __str__(self):
320.         return str(self.biggie)
321. 
322. 
323. class MarkupField(models.CharField):
324.     def __init__(self, *args, **kwargs):
325.         kwargs["max_length"] = 20
326.         super().__init__(*args, **kwargs)
327. 
328.     def formfield(self, **kwargs):
329.         # don't allow this field to be used in form (real use-case might be
330.         # that you know the markup will always be X, but it is among an app
331.         # that allows the user to say it could be something else)
332.         # regressed at r10062
333.         return None
334. 
335. 
336. class CustomFieldForExclusionModel(models.Model):
337.     name = models.CharField(max_length=10)
338.     markup = MarkupField()
339. 
340. 
341. class FlexibleDatePost(models.Model):
342.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
343.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
344.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
345.     posted = models.DateField(blank=True, null=True)
346. 
347. 
348. class Colour(models.Model):
349.     name = models.CharField(max_length=50)
350. 
351.     def __iter__(self):
352.         yield from range(5)
353. 
354.     def __str__(self):
355.         return self.name
356. 
357. 
358. class ColourfulItem(models.Model):
359.     name = models.CharField(max_length=50)
360.     colours = models.ManyToManyField(Colour)
361. 
362. 
363. class CustomErrorMessage(models.Model):
364.     name1 = models.CharField(
365.         max_length=50,
366.         validators=[validators.validate_slug],
367.         error_messages={'invalid': 'Model custom error message.'},
368.     )
369.     name2 = models.CharField(
370.         max_length=50,
371.         validators=[validators.validate_slug],
372.         error_messages={'invalid': 'Model custom error message.'},
373.     )
374. 
375.     def clean(self):
376.         if self.name1 == 'FORBIDDEN_VALUE':
377.             raise ValidationError({'name1': [ValidationError('Model.clean() error messages.')]})
378.         elif self.name1 == 'FORBIDDEN_VALUE2':
379.             raise ValidationError({'name1': 'Model.clean() error messages (simpler syntax).'})
380.         elif self.name1 == 'GLOBAL_ERROR':
381.             raise ValidationError("Global error message.")
382. 
383. 
384. def today_callable_dict():
385.     return {"last_action__gte": datetime.datetime.today()}
386. 
387. 
388. def today_callable_q():
389.     return models.Q(last_action__gte=datetime.datetime.today())
390. 
391. 
392. class Character(models.Model):
393.     username = models.CharField(max_length=100)
394.     last_action = models.DateTimeField()
395. 
396. 
397. class StumpJoke(models.Model):
398.     most_recently_fooled = models.ForeignKey(
399.         Character,
400.         models.CASCADE,
401.         limit_choices_to=today_callable_dict,
402.         related_name="+",
403.     )
404.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")
405. 
406. 
407. # Model for #13776
408. class Student(models.Model):
409.     character = models.ForeignKey(Character, models.CASCADE)
410.     study = models.CharField(max_length=30)
411. 
412. 
413. # Model for #639
414. class Photo(models.Model):
415.     title = models.CharField(max_length=30)
416.     image = models.FileField(storage=temp_storage, upload_to='tests')
417. 
418.     # Support code for the tests; this keeps track of how many times save()
419.     # gets called on each instance.
420.     def __init__(self, *args, **kwargs):
421.         super().__init__(*args, **kwargs)
422.         self._savecount = 0
423. 
424.     def save(self, force_insert=False, force_update=False):
425.         super().save(force_insert, force_update)
426.         self._savecount += 1
427. 
428. 
429. class UUIDPK(models.Model):
430.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
431.     name = models.CharField(max_length=30)
432. 
433. 
434. # Models for #24706
435. class StrictAssignmentFieldSpecific(models.Model):
436.     title = models.CharField(max_length=30)
437.     _should_error = False
438. 
439.     def __setattr__(self, key, value):
440.         if self._should_error is True:
441.             raise ValidationError(message={key: "Cannot set attribute"}, code='invalid')
442.         super().__setattr__(key, value)
443. 
444. 
445. class StrictAssignmentAll(models.Model):
446.     title = models.CharField(max_length=30)
447.     _should_error = False
448. 
449.     def __setattr__(self, key, value):
450.         if self._should_error is True:
451.             raise ValidationError(message="Cannot set attribute", code='invalid')
452.         super().__setattr__(key, value)
453. 
454. 
455. # A model with ForeignKey(blank=False, null=True)
456. class Award(models.Model):
457.     name = models.CharField(max_length=30)
458.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)
459. 
460. 
461. class NullableUniqueCharFieldModel(models.Model):
462.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)


File: tests/model_forms/test_modelchoicefield.py
Line number range: 1 - 355
Content:
1. import datetime
2. 
3. from django import forms
4. from django.core.validators import ValidationError
5. from django.forms.models import ModelChoiceIterator
6. from django.forms.widgets import CheckboxSelectMultiple
7. from django.template import Context, Template
8. from django.test import TestCase
9. 
10. from .models import Article, Author, Book, Category, Writer
11. 
12. 
13. class ModelChoiceFieldTests(TestCase):
14.     @classmethod
15.     def setUpTestData(cls):
16.         cls.c1 = Category.objects.create(name='Entertainment', slug='entertainment', url='entertainment')
17.         cls.c2 = Category.objects.create(name='A test', slug='test', url='test')
18.         cls.c3 = Category.objects.create(name='Third', slug='third-test', url='third')
19. 
20.     def test_basics(self):
21.         f = forms.ModelChoiceField(Category.objects.all())
22.         self.assertEqual(list(f.choices), [
23.             ('', '---------'),
24.             (self.c1.pk, 'Entertainment'),
25.             (self.c2.pk, 'A test'),
26.             (self.c3.pk, 'Third'),
27.         ])
28.         with self.assertRaises(ValidationError):
29.             f.clean('')
30.         with self.assertRaises(ValidationError):
31.             f.clean(None)
32.         with self.assertRaises(ValidationError):
33.             f.clean(0)
34. 
35.         # Invalid types that require TypeError to be caught.
36.         with self.assertRaises(ValidationError):
37.             f.clean([['fail']])
38.         with self.assertRaises(ValidationError):
39.             f.clean([{'foo': 'bar'}])
40. 
41.         self.assertEqual(f.clean(self.c2.id).name, 'A test')
42.         self.assertEqual(f.clean(self.c3.id).name, 'Third')
43. 
44.         # Add a Category object *after* the ModelChoiceField has already been
45.         # instantiated. This proves clean() checks the database during clean()
46.         # rather than caching it at  instantiation time.
47.         c4 = Category.objects.create(name='Fourth', url='4th')
48.         self.assertEqual(f.clean(c4.id).name, 'Fourth')
49. 
50.         # Delete a Category object *after* the ModelChoiceField has already been
51.         # instantiated. This proves clean() checks the database during clean()
52.         # rather than caching it at instantiation time.
53.         Category.objects.get(url='4th').delete()
54.         msg = "['Select a valid choice. That choice is not one of the available choices.']"
55.         with self.assertRaisesMessage(ValidationError, msg):
56.             f.clean(c4.id)
57. 
58.     def test_clean_model_instance(self):
59.         f = forms.ModelChoiceField(Category.objects.all())
60.         self.assertEqual(f.clean(self.c1), self.c1)
61.         # An instance of incorrect model.
62.         msg = "['Select a valid choice. That choice is not one of the available choices.']"
63.         with self.assertRaisesMessage(ValidationError, msg):
64.             f.clean(Book.objects.create())
65. 
66.     def test_clean_to_field_name(self):
67.         f = forms.ModelChoiceField(Category.objects.all(), to_field_name='slug')
68.         self.assertEqual(f.clean(self.c1.slug), self.c1)
69.         self.assertEqual(f.clean(self.c1), self.c1)
70. 
71.     def test_choices(self):
72.         f = forms.ModelChoiceField(Category.objects.filter(pk=self.c1.id), required=False)
73.         self.assertIsNone(f.clean(''))
74.         self.assertEqual(f.clean(str(self.c1.id)).name, 'Entertainment')
75.         with self.assertRaises(ValidationError):
76.             f.clean('100')
77. 
78.         # len() can be called on choices.
79.         self.assertEqual(len(f.choices), 2)
80. 
81.         # queryset can be changed after the field is created.
82.         f.queryset = Category.objects.exclude(name='Third')
83.         self.assertEqual(list(f.choices), [
84.             ('', '---------'),
85.             (self.c1.pk, 'Entertainment'),
86.             (self.c2.pk, 'A test'),
87.         ])
88.         self.assertEqual(f.clean(self.c2.id).name, 'A test')
89.         with self.assertRaises(ValidationError):
90.             f.clean(self.c3.id)
91. 
92.         # Choices can be iterated repeatedly.
93.         gen_one = list(f.choices)
94.         gen_two = f.choices
95.         self.assertEqual(gen_one[2], (self.c2.pk, 'A test'))
96.         self.assertEqual(list(gen_two), [
97.             ('', '---------'),
98.             (self.c1.pk, 'Entertainment'),
99.             (self.c2.pk, 'A test'),
100.         ])
101. 
102.         # Overriding label_from_instance() to print custom labels.
103.         f.queryset = Category.objects.all()
104.         f.label_from_instance = lambda obj: 'category ' + str(obj)
105.         self.assertEqual(list(f.choices), [
106.             ('', '---------'),
107.             (self.c1.pk, 'category Entertainment'),
108.             (self.c2.pk, 'category A test'),
109.             (self.c3.pk, 'category Third'),
110.         ])
111. 
112.     def test_choices_freshness(self):
113.         f = forms.ModelChoiceField(Category.objects.all())
114.         self.assertEqual(len(f.choices), 4)
115.         self.assertEqual(list(f.choices), [
116.             ('', '---------'),
117.             (self.c1.pk, 'Entertainment'),
118.             (self.c2.pk, 'A test'),
119.             (self.c3.pk, 'Third'),
120.         ])
121.         c4 = Category.objects.create(name='Fourth', slug='4th', url='4th')
122.         self.assertEqual(len(f.choices), 5)
123.         self.assertEqual(list(f.choices), [
124.             ('', '---------'),
125.             (self.c1.pk, 'Entertainment'),
126.             (self.c2.pk, 'A test'),
127.             (self.c3.pk, 'Third'),
128.             (c4.pk, 'Fourth'),
129.         ])
130. 
131.     def test_choices_bool(self):
132.         f = forms.ModelChoiceField(Category.objects.all(), empty_label=None)
133.         self.assertIs(bool(f.choices), True)
134.         Category.objects.all().delete()
135.         self.assertIs(bool(f.choices), False)
136. 
137.     def test_choices_bool_empty_label(self):
138.         f = forms.ModelChoiceField(Category.objects.all(), empty_label='--------')
139.         Category.objects.all().delete()
140.         self.assertIs(bool(f.choices), True)
141. 
142.     def test_deepcopies_widget(self):
143.         class ModelChoiceForm(forms.Form):
144.             category = forms.ModelChoiceField(Category.objects.all())
145. 
146.         form1 = ModelChoiceForm()
147.         field1 = form1.fields['category']
148.         # To allow the widget to change the queryset of field1.widget.choices
149.         # without affecting other forms, the following must hold (#11183):
150.         self.assertIsNot(field1, ModelChoiceForm.base_fields['category'])
151.         self.assertIs(field1.widget.choices.field, field1)
152. 
153.     def test_result_cache_not_shared(self):
154.         class ModelChoiceForm(forms.Form):
155.             category = forms.ModelChoiceField(Category.objects.all())
156. 
157.         form1 = ModelChoiceForm()
158.         self.assertCountEqual(form1.fields['category'].queryset, [self.c1, self.c2, self.c3])
159.         form2 = ModelChoiceForm()
160.         self.assertIsNone(form2.fields['category'].queryset._result_cache)
161. 
162.     def test_queryset_none(self):
163.         class ModelChoiceForm(forms.Form):
164.             category = forms.ModelChoiceField(queryset=None)
165. 
166.             def __init__(self, *args, **kwargs):
167.                 super().__init__(*args, **kwargs)
168.                 self.fields['category'].queryset = Category.objects.filter(slug__contains='test')
169. 
170.         form = ModelChoiceForm()
171.         self.assertCountEqual(form.fields['category'].queryset, [self.c2, self.c3])
172. 
173.     def test_no_extra_query_when_accessing_attrs(self):
174.         """
175.         ModelChoiceField with RadioSelect widget doesn't produce unnecessary
176.         db queries when accessing its BoundField's attrs.
177.         """
178.         class ModelChoiceForm(forms.Form):
179.             category = forms.ModelChoiceField(Category.objects.all(), widget=forms.RadioSelect)
180. 
181.         form = ModelChoiceForm()
182.         field = form['category']  # BoundField
183.         template = Template('{{ field.name }}{{ field }}{{ field.help_text }}')
184.         with self.assertNumQueries(1):
185.             template.render(Context({'field': field}))
186. 
187.     def test_disabled_modelchoicefield(self):
188.         class ModelChoiceForm(forms.ModelForm):
189.             author = forms.ModelChoiceField(Author.objects.all(), disabled=True)
190. 
191.             class Meta:
192.                 model = Book
193.                 fields = ['author']
194. 
195.         book = Book.objects.create(author=Writer.objects.create(name='Test writer'))
196.         form = ModelChoiceForm({}, instance=book)
197.         self.assertEqual(
198.             form.errors['author'],
199.             ['Select a valid choice. That choice is not one of the available choices.']
200.         )
201. 
202.     def test_disabled_modelchoicefield_has_changed(self):
203.         field = forms.ModelChoiceField(Author.objects.all(), disabled=True)
204.         self.assertIs(field.has_changed('x', 'y'), False)
205. 
206.     def test_disabled_modelchoicefield_initial_model_instance(self):
207.         class ModelChoiceForm(forms.Form):
208.             categories = forms.ModelChoiceField(
209.                 Category.objects.all(),
210.                 disabled=True,
211.                 initial=self.c1,
212.             )
213. 
214.         self.assertTrue(ModelChoiceForm(data={'categories': self.c1.pk}).is_valid())
215. 
216.     def test_disabled_multiplemodelchoicefield(self):
217.         class ArticleForm(forms.ModelForm):
218.             categories = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
219. 
220.             class Meta:
221.                 model = Article
222.                 fields = ['categories']
223. 
224.         category1 = Category.objects.create(name='cat1')
225.         category2 = Category.objects.create(name='cat2')
226.         article = Article.objects.create(
227.             pub_date=datetime.date(1988, 1, 4),
228.             writer=Writer.objects.create(name='Test writer'),
229.         )
230.         article.categories.set([category1.pk])
231. 
232.         form = ArticleForm(data={'categories': [category2.pk]}, instance=article)
233.         self.assertEqual(form.errors, {})
234.         self.assertEqual([x.pk for x in form.cleaned_data['categories']], [category2.pk])
235.         # Disabled fields use the value from `instance` rather than `data`.
236.         form = ArticleForm(data={'categories': [category2.pk]}, instance=article)
237.         form.fields['categories'].disabled = True
238.         self.assertEqual(form.errors, {})
239.         self.assertEqual([x.pk for x in form.cleaned_data['categories']], [category1.pk])
240. 
241.     def test_disabled_modelmultiplechoicefield_has_changed(self):
242.         field = forms.ModelMultipleChoiceField(Author.objects.all(), disabled=True)
243.         self.assertIs(field.has_changed('x', 'y'), False)
244. 
245.     def test_overridable_choice_iterator(self):
246.         """
247.         Iterator defaults to ModelChoiceIterator and can be overridden with
248.         the iterator attribute on a ModelChoiceField subclass.
249.         """
250.         field = forms.ModelChoiceField(Category.objects.all())
251.         self.assertIsInstance(field.choices, ModelChoiceIterator)
252. 
253.         class CustomModelChoiceIterator(ModelChoiceIterator):
254.             pass
255. 
256.         class CustomModelChoiceField(forms.ModelChoiceField):
257.             iterator = CustomModelChoiceIterator
258. 
259.         field = CustomModelChoiceField(Category.objects.all())
260.         self.assertIsInstance(field.choices, CustomModelChoiceIterator)
261. 
262.     def test_choice_iterator_passes_model_to_widget(self):
263.         class CustomCheckboxSelectMultiple(CheckboxSelectMultiple):
264.             def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
265.                 option = super().create_option(name, value, label, selected, index, subindex, attrs)
266.                 # Modify the HTML based on the object being rendered.
267.                 c = value.instance
268.                 option['attrs']['data-slug'] = c.slug
269.                 return option
270. 
271.         class CustomModelMultipleChoiceField(forms.ModelMultipleChoiceField):
272.             widget = CustomCheckboxSelectMultiple
273. 
274.         field = CustomModelMultipleChoiceField(Category.objects.all())
275.         self.assertHTMLEqual(
276.             field.widget.render('name', []), (
277.                 '<ul>'
278.                 '<li><label><input type="checkbox" name="name" value="%d" '
279.                 'data-slug="entertainment">Entertainment</label></li>'
280.                 '<li><label><input type="checkbox" name="name" value="%d" '
281.                 'data-slug="test">A test</label></li>'
282.                 '<li><label><input type="checkbox" name="name" value="%d" '
283.                 'data-slug="third-test">Third</label></li>'
284.                 '</ul>'
285.             ) % (self.c1.pk, self.c2.pk, self.c3.pk),
286.         )
287. 
288.     def test_custom_choice_iterator_passes_model_to_widget(self):
289.         class CustomModelChoiceValue:
290.             def __init__(self, value, obj):
291.                 self.value = value
292.                 self.obj = obj
293. 
294.             def __str__(self):
295.                 return str(self.value)
296. 
297.         class CustomModelChoiceIterator(ModelChoiceIterator):
298.             def choice(self, obj):
299.                 value, label = super().choice(obj)
300.                 return CustomModelChoiceValue(value, obj), label
301. 
302.         class CustomCheckboxSelectMultiple(CheckboxSelectMultiple):
303.             def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
304.                 option = super().create_option(name, value, label, selected, index, subindex, attrs)
305.                 # Modify the HTML based on the object being rendered.
306.                 c = value.obj
307.                 option['attrs']['data-slug'] = c.slug
308.                 return option
309. 
310.         class CustomModelMultipleChoiceField(forms.ModelMultipleChoiceField):
311.             iterator = CustomModelChoiceIterator
312.             widget = CustomCheckboxSelectMultiple
313. 
314.         field = CustomModelMultipleChoiceField(Category.objects.all())
315.         self.assertHTMLEqual(
316.             field.widget.render('name', []),
317.             '''<ul>
318. <li><label><input type="checkbox" name="name" value="%d" data-slug="entertainment">Entertainment</label></li>
319. <li><label><input type="checkbox" name="name" value="%d" data-slug="test">A test</label></li>
320. <li><label><input type="checkbox" name="name" value="%d" data-slug="third-test">Third</label></li>
321. </ul>''' % (self.c1.pk, self.c2.pk, self.c3.pk),
322.         )
323. 
324.     def test_choices_not_fetched_when_not_rendering(self):
325.         with self.assertNumQueries(1):
326.             field = forms.ModelChoiceField(Category.objects.order_by('-name'))
327.             self.assertEqual('Entertainment', field.clean(self.c1.pk).name)
328. 
329.     def test_queryset_manager(self):
330.         f = forms.ModelChoiceField(Category.objects)
331.         self.assertEqual(len(f.choices), 4)
332.         self.assertEqual(list(f.choices), [
333.             ('', '---------'),
334.             (self.c1.pk, 'Entertainment'),
335.             (self.c2.pk, 'A test'),
336.             (self.c3.pk, 'Third'),
337.         ])
338. 
339.     def test_num_queries(self):
340.         """
341.         Widgets that render multiple subwidgets shouldn't make more than one
342.         database query.
343.         """
344.         categories = Category.objects.all()
345. 
346.         class CategoriesForm(forms.Form):
347.             radio = forms.ModelChoiceField(queryset=categories, widget=forms.RadioSelect)
348.             checkbox = forms.ModelMultipleChoiceField(queryset=categories, widget=forms.CheckboxSelectMultiple)
349. 
350.         template = Template(
351.             '{% for widget in form.checkbox %}{{ widget }}{% endfor %}'
352.             '{% for widget in form.radio %}{{ widget }}{% endfor %}'
353.         )
354.         with self.assertNumQueries(2):
355.             template.render(Context({'form': CategoriesForm()}))

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 16:25:46,850 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user is reporting a bug in how `ModelForm` handles a `ForeignKey` with `blank=False` when a `RadioSelect` widget is used. The current context provides `tests/model_forms/test_modelchoicefield.py`, which tests `ModelChoiceField` in isolation, but not its generation and configuration within a `ModelForm`. To find relevant test cases, I need to inspect tests that specifically cover `ModelForm` field generation, especially for foreign keys and widget overrides. The most likely place to find such tests is `tests/model_forms/tests.py`.' query='Please provide the full content of tests/model_forms/tests.py' extra_requirements='' purpose='This file is needed to find test cases that cover the auto-generation of form fields within a `ModelForm`, which is central to the bug report.'
2025-12-21 16:25:46,851 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of tests/model_forms/tests.py
2025-12-21 16:25:46,851 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 16:25:46,852 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 16:25:46,853 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 16:25:46,853 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of tests/model_forms/tests.py
Purpose: This file is needed to find test cases that cover the auto-generation of form fields within a `ModelForm`, which is central to the bug report.
2025-12-21 16:25:49,043 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/model_forms/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'41017138-37c9-4590-94f9-55fb5559c903': 'CtEDAY89a19V82GjpZe+6Cb4MF7huRNBjgQx7Z2IAx86LWfm75BZjfwGOJ9trIDrfLhkYv4ztfU2fV11SR47Y+t0f4JxYL8XPcIoAUn/j5P3M/Cv5004JoT2QeSrVtSjmnjHHNGTidK73xAjm65bcINAsAxFpNHoge/XU+U6YC2Yt3PbLjOEA0BQldyWG86pu1jboDrilAB4By3Td2E0EZCvA3F2Sj0rcnuwjvkUMztlJuTQmpeQOFSqlOj2ox87Ht4vqoWMigcACYbCXDvauNY541PkArMUuT4spxquqZ6ADGCB7JW3+NRxpNx3KdPVB/GgNKbMl9HHi2tMy8F3NF/lV9hidAbMznbdwm+a8BxfM6l9m1o/SSpd2J5LyxMfmFo7BUy/1+41+E+quhiGvKogJA9IUZyxVkGKKDU8IfnWWopeso2n09UwjidBm5bkp4lbeTnl8/THpJVMyydKlDGoACNZ+CGxAJpd7yxoXpVNob6HYPLywWamCj2oY1ojH0bcZ8bAtMNw607i6wY/3KJuCAk62C99YIRLhmA3EycJIjtZ/6IVen7eTAU5b/ueW1URdsTUgNRi0rgHMRlIQ3wfPlCtLp5ywBg6Bt78Vei2f6PQ'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2102, 'candidates_token_count': 23, 'total_token_count': 2248, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2102}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 23}], 'thoughts_token_count': 123, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22799645299496857, 'model_name': 'gemini-2.5-pro'} id='run--9d772a0c-c633-4ed1-b9f1-8de89db790c0-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/model_forms/tests.py'}, 'id': '41017138-37c9-4590-94f9-55fb5559c903', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2102, 'output_tokens': 23, 'total_tokens': 2248, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 123}}
2025-12-21 16:25:51,821 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/model_forms/tests.py", "end_line": 2000.0}'}, '__gemini_function_call_thought_signatures__': {'ab4dae5a-6ad6-4f9c-bfb5-b3dfc43525b2': 'CqMEAY89a1/JvNwHb/KA5qpBzB18ydJpyS1+UrpeE64jaV0oy6/RlbonkWWFGjvNCsoTqR3RxfjmLRuAeEq88CvHSs8WJLbKMMrapkLmzo0jFyx2xUM305yKmycGn2xILBPbQPnTRChx9C5+PCWaGANmSThpF+O+N+Zqt1SYfdmHCJ/afxjRwnChWgU5diVi2FVg3hyouAmSQlaFa/2Uc283o97bFaORTWsgYnadrk259uogI7zn/VhpOT4fHsIaNOoY2h9oN01MZx5wkAtwcvNDIDA/z+7M5kokjlwJBxYVS4I0A9OwW4vPzWh1b1xXnFR9F6duw7gDAU1cGA3KDIqWBJKgLD5s/j9ycxAf65KL9pnZCNbqHO2EMQRq3KRy4gJk/ksTZU5ZpcArr0q9y+9NWD7WsLFhx0MQ09KnHzEjue9FnUSKW0LBxOyuMzXccFQ8xkXnkRIQnFFArVlrSrJlwf6Yq7pyN28SnrJFiC5cUdYUDK1fIhKZPgbESvUTsiqj9EUdh4LhaupuwCXBfVtrcM4i//VIG3zAC/GPdJXTGaZSFh+LmNSijONSAKLtSgwLhUaU6D9JQBVhlupoHhM74mvFNiz7tPClL1dhF6L5IsAz4rHTpcvfJNa2evIElst3K3LWxIvprnOoEznNx3pItYKvFyjGCyA7jg8x5o7uddFTWm9HAZQQRuQT/7JlmTDB1SUZX43sIrmap4wCiIZpr/oSzA=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8886, 'candidates_token_count': 29, 'total_token_count': 9074, 'cached_content_token_count': 1803, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9009}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1803}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 159}, 'finish_reason': 'STOP', 'avg_logprobs': -0.44802008004024113, 'model_name': 'gemini-2.5-pro'} id='run--c390b947-1f1b-4832-a79d-a9a0e5c322c2-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/model_forms/tests.py', 'end_line': 2000.0}, 'id': 'ab4dae5a-6ad6-4f9c-bfb5-b3dfc43525b2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8886, 'output_tokens': 29, 'total_tokens': 9074, 'input_token_details': {'cache_read': 1803}, 'output_token_details': {'reasoning': 159}}
2025-12-21 16:25:55,239 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2001.0, "relative_path": "tests/model_forms/tests.py", "end_line": 4000.0}'}, '__gemini_function_call_thought_signatures__': {'a11819ad-eb73-4604-ae26-e5ac27d7f4f1': 'Cs4CAY89a1/Vu6jv81LTCy1csoRL2VcS3GghWbwhiDFQ+vUFICd9pJoBwXGhGzO7CjXjlHVfEO9DwLB3lZMRynj2kdzkERBgwTgc6zF/WF7GIYqmdpPyUjPNOD7FqfCumEj+ZAPGvsKigaBn79LKPhJsidML9cjDNGgYpWubNypjYVOGr5N9koECY7k8EwO60BYd7KzrC/Ft7pGdRFmxjlnzq3t5KrRgo4a0GfqMqZYQ4pOt24oeK/c4WJnyj2bLN5aLZlneJnI6voRCEXEQ29oeHrAeRISz+e1mQhIO8H2r5lVig0YTVsKzqYkk2ylXuv7SrT2+n0EpNuk6wkBKvmRQnoEbMfX5TtGbU4m5CR6TAWj3wRkZ+vlAFXPbu3askee2zFt3qMZOSW8iNw5twbAuz+URx84FGDofTDeoGh13QQAdfT8LyNyPYjaVP8t1UA=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 35867, 'candidates_token_count': 29, 'total_token_count': 35992, 'cached_content_token_count': 7647, 'prompt_tokens_details': [{'modality': 1, 'token_count': 36149}], 'cache_tokens_details': [{'modality': 1, 'token_count': 7647}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 96}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2573246955871582, 'model_name': 'gemini-2.5-pro'} id='run--20185e37-bb2f-4fb7-9038-47f1528cbbcf-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2001.0, 'relative_path': 'tests/model_forms/tests.py', 'end_line': 4000.0}, 'id': 'a11819ad-eb73-4604-ae26-e5ac27d7f4f1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 35867, 'output_tokens': 29, 'total_tokens': 35992, 'input_token_details': {'cache_read': 7647}, 'output_token_details': {'reasoning': 96}}
2025-12-21 16:26:00,650 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the complete content of the requested file, `tests/model_forms/tests.py`. The file was read in several parts to ensure the entire content was captured. This file contains a comprehensive suite of tests for Django's `ModelForm` functionality, which will be instrumental in understanding and debugging the auto-generation of form fields." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 52186, 'candidates_token_count': 72, 'total_token_count': 52572, 'cached_content_token_count': 34656, 'prompt_tokens_details': [{'modality': 1, 'token_count': 52564}], 'cache_tokens_details': [{'modality': 1, 'token_count': 34656}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 72}], 'thoughts_token_count': 314}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6476858986748589, 'model_name': 'gemini-2.5-pro'} id='run--31481b92-d660-40e7-9c1a-30c48b7c4430-0' usage_metadata={'input_tokens': 52186, 'output_tokens': 72, 'total_tokens': 52572, 'input_token_details': {'cache_read': 34656}, 'output_token_details': {'reasoning': 314}}
2025-12-21 16:26:00,653 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of tests/model_forms/tests.py
--- END QUERY ---



--- BEGIN PURPOSE ---
This file is needed to find test cases that cover the auto-generation of form fields within a `ModelForm`, which is central to the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/model_forms/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import os
3. from decimal import Decimal
4. from unittest import mock, skipUnless
5. 
6. from django import forms
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured,
9. )
10. from django.core.files.uploadedfile import SimpleUploadedFile
11. from django.core.validators import ValidationError
12. from django.db import connection, models
13. from django.db.models.query import EmptyQuerySet
14. from django.forms.models import (
15.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,
16.     modelform_factory,
17. )
18. from django.template import Context, Template
19. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
20. 
21. from .models import (
22.     Article, ArticleStatus, Author, Author1, Award, BetterWriter, BigInt, Book,
23.     Category, Character, Colour, ColourfulItem, CustomErrorMessage, CustomFF,
24.     CustomFieldForExclusionModel, DateTimePost, DerivedBook, DerivedPost,
25.     Document, ExplicitPK, FilePathModel, FlexibleDatePost, Homepage,
26.     ImprovedArticle, ImprovedArticleWithParentLink, Inventory,
27.     NullableUniqueCharFieldModel, Person, Photo, Post, Price, Product,
28.     Publication, PublicationDefaults, StrictAssignmentAll,
29.     StrictAssignmentFieldSpecific, Student, StumpJoke, TextFile, Triple,
30.     Writer, WriterProfile, test_images,
31. )
32. 
33. if test_images:
34.     from .models import ImageFile, OptionalImageFile, NoExtensionImageFile
35. 
36.     class ImageFileForm(forms.ModelForm):
37.         class Meta:
38.             model = ImageFile
39.             fields = '__all__'
40. 
41.     class OptionalImageFileForm(forms.ModelForm):
42.         class Meta:
43.             model = OptionalImageFile
44.             fields = '__all__'
45. 
46.     class NoExtensionImageFileForm(forms.ModelForm):
47.         class Meta:
48.             model = NoExtensionImageFile
49.             fields = '__all__'
50. 
51. 
52. class ProductForm(forms.ModelForm):
53.     class Meta:
54.         model = Product
55.         fields = '__all__'
56. 
57. 
58. class PriceForm(forms.ModelForm):
59.     class Meta:
60.         model = Price
61.         fields = '__all__'
62. 
63. 
64. class BookForm(forms.ModelForm):
65.     class Meta:
66.         model = Book
67.         fields = '__all__'
68. 
69. 
70. class DerivedBookForm(forms.ModelForm):
71.     class Meta:
72.         model = DerivedBook
73.         fields = '__all__'
74. 
75. 
76. class ExplicitPKForm(forms.ModelForm):
77.     class Meta:
78.         model = ExplicitPK
79.         fields = ('key', 'desc',)
80. 
81. 
82. class PostForm(forms.ModelForm):
83.     class Meta:
84.         model = Post
85.         fields = '__all__'
86. 
87. 
88. class DerivedPostForm(forms.ModelForm):
89.     class Meta:
90.         model = DerivedPost
91.         fields = '__all__'
92. 
93. 
94. class CustomWriterForm(forms.ModelForm):
95.     name = forms.CharField(required=False)
96. 
97.     class Meta:
98.         model = Writer
99.         fields = '__all__'
100. 
101. 
102. class BaseCategoryForm(forms.ModelForm):
103.     class Meta:
104.         model = Category
105.         fields = '__all__'
106. 
107. 
108. class ArticleForm(forms.ModelForm):
109.     class Meta:
110.         model = Article
111.         fields = '__all__'
112. 
113. 
114. class RoykoForm(forms.ModelForm):
115.     class Meta:
116.         model = Writer
117.         fields = '__all__'
118. 
119. 
120. class ArticleStatusForm(forms.ModelForm):
121.     class Meta:
122.         model = ArticleStatus
123.         fields = '__all__'
124. 
125. 
126. class InventoryForm(forms.ModelForm):
127.     class Meta:
128.         model = Inventory
129.         fields = '__all__'
130. 
131. 
132. class SelectInventoryForm(forms.Form):
133.     items = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name='barcode')
134. 
135. 
136. class CustomFieldForExclusionForm(forms.ModelForm):
137.     class Meta:
138.         model = CustomFieldForExclusionModel
139.         fields = ['name', 'markup']
140. 
141. 
142. class TextFileForm(forms.ModelForm):
143.     class Meta:
144.         model = TextFile
145.         fields = '__all__'
146. 
147. 
148. class BigIntForm(forms.ModelForm):
149.     class Meta:
150.         model = BigInt
151.         fields = '__all__'
152. 
153. 
154. class ModelFormWithMedia(forms.ModelForm):
155.     class Media:
156.         js = ('/some/form/javascript',)
157.         css = {
158.             'all': ('/some/form/css',)
159.         }
160. 
161.     class Meta:
162.         model = TextFile
163.         fields = '__all__'
164. 
165. 
166. class CustomErrorMessageForm(forms.ModelForm):
167.     name1 = forms.CharField(error_messages={'invalid': 'Form custom error message.'})
168. 
169.     class Meta:
170.         fields = '__all__'
171.         model = CustomErrorMessage
172. 
173. 
174. class ModelFormBaseTest(TestCase):
175.     def test_base_form(self):
176.         self.assertEqual(list(BaseCategoryForm.base_fields), ['name', 'slug', 'url'])
177. 
178.     def test_no_model_class(self):
179.         class NoModelModelForm(forms.ModelForm):
180.             pass
181.         with self.assertRaisesMessage(ValueError, 'ModelForm has no model class specified.'):
182.             NoModelModelForm()
183. 
184.     def test_empty_fields_to_fields_for_model(self):
185.         """
186.         An argument of fields=() to fields_for_model should return an empty dictionary
187.         """
188.         field_dict = fields_for_model(Person, fields=())
189.         self.assertEqual(len(field_dict), 0)
190. 
191.     def test_empty_fields_on_modelform(self):
192.         """
193.         No fields on a ModelForm should actually result in no fields.
194.         """
195.         class EmptyPersonForm(forms.ModelForm):
196.             class Meta:
197.                 model = Person
198.                 fields = ()
199. 
200.         form = EmptyPersonForm()
201.         self.assertEqual(len(form.fields), 0)
202. 
203.     def test_empty_fields_to_construct_instance(self):
204.         """
205.         No fields should be set on a model instance if construct_instance receives fields=().
206.         """
207.         form = modelform_factory(Person, fields="__all__")({'name': 'John Doe'})
208.         self.assertTrue(form.is_valid())
209.         instance = construct_instance(form, Person(), fields=())
210.         self.assertEqual(instance.name, '')
211. 
212.     def test_blank_with_null_foreign_key_field(self):
213.         """
214.         #13776 -- ModelForm's with models having a FK set to null=False and
215.         required=False should be valid.
216.         """
217.         class FormForTestingIsValid(forms.ModelForm):
218.             class Meta:
219.                 model = Student
220.                 fields = '__all__'
221. 
222.             def __init__(self, *args, **kwargs):
223.                 super().__init__(*args, **kwargs)
224.                 self.fields['character'].required = False
225. 
226.         char = Character.objects.create(username='user', last_action=datetime.datetime.today())
227.         data = {'study': 'Engineering'}
228.         data2 = {'study': 'Engineering', 'character': char.pk}
229. 
230.         # form is valid because required=False for field 'character'
231.         f1 = FormForTestingIsValid(data)
232.         self.assertTrue(f1.is_valid())
233. 
234.         f2 = FormForTestingIsValid(data2)
235.         self.assertTrue(f2.is_valid())
236.         obj = f2.save()
237.         self.assertEqual(obj.character, char)
238. 
239.     def test_blank_false_with_null_true_foreign_key_field(self):
240.         """
241.         A ModelForm with a model having ForeignKey(blank=False, null=True)
242.         and the form field set to required=False should allow the field to be
243.         unset.
244.         """
245.         class AwardForm(forms.ModelForm):
246.             class Meta:
247.                 model = Award
248.                 fields = '__all__'
249. 
250.             def __init__(self, *args, **kwargs):
251.                 super().__init__(*args, **kwargs)
252.                 self.fields['character'].required = False
253. 
254.         character = Character.objects.create(username='user', last_action=datetime.datetime.today())
255.         award = Award.objects.create(name='Best sprinter', character=character)
256.         data = {'name': 'Best tester', 'character': ''}  # remove character
257.         form = AwardForm(data=data, instance=award)
258.         self.assertTrue(form.is_valid())
259.         award = form.save()
260.         self.assertIsNone(award.character)
261. 
262.     def test_save_blank_false_with_required_false(self):
263.         """
264.         A ModelForm with a model with a field set to blank=False and the form
265.         field set to required=False should allow the field to be unset.
266.         """
267.         obj = Writer.objects.create(name='test')
268.         form = CustomWriterForm(data={'name': ''}, instance=obj)
269.         self.assertTrue(form.is_valid())
270.         obj = form.save()
271.         self.assertEqual(obj.name, '')
272. 
273.     def test_save_blank_null_unique_charfield_saves_null(self):
274.         form_class = modelform_factory(model=NullableUniqueCharFieldModel, fields=['codename'])
275.         empty_value = '' if connection.features.interprets_empty_strings_as_nulls else None
276. 
277.         form = form_class(data={'codename': ''})
278.         self.assertTrue(form.is_valid())
279.         form.save()
280.         self.assertEqual(form.instance.codename, empty_value)
281. 
282.         # Save a second form to verify there isn't a unique constraint violation.
283.         form = form_class(data={'codename': ''})
284.         self.assertTrue(form.is_valid())
285.         form.save()
286.         self.assertEqual(form.instance.codename, empty_value)
287. 
288.     def test_missing_fields_attribute(self):
289.         message = (
290.             "Creating a ModelForm without either the 'fields' attribute "
291.             "or the 'exclude' attribute is prohibited; form "
292.             "MissingFieldsForm needs updating."
293.         )
294.         with self.assertRaisesMessage(ImproperlyConfigured, message):
295.             class MissingFieldsForm(forms.ModelForm):
296.                 class Meta:
297.                     model = Category
298. 
299.     def test_extra_fields(self):
300.         class ExtraFields(BaseCategoryForm):
301.             some_extra_field = forms.BooleanField()
302. 
303.         self.assertEqual(list(ExtraFields.base_fields),
304.                          ['name', 'slug', 'url', 'some_extra_field'])
305. 
306.     def test_extra_field_model_form(self):
307.         with self.assertRaisesMessage(FieldError, 'no-field'):
308.             class ExtraPersonForm(forms.ModelForm):
309.                 """ ModelForm with an extra field """
310.                 age = forms.IntegerField()
311. 
312.                 class Meta:
313.                     model = Person
314.                     fields = ('name', 'no-field')
315. 
316.     def test_extra_declared_field_model_form(self):
317.         class ExtraPersonForm(forms.ModelForm):
318.             """ ModelForm with an extra field """
319.             age = forms.IntegerField()
320. 
321.             class Meta:
322.                 model = Person
323.                 fields = ('name', 'age')
324. 
325.     def test_extra_field_modelform_factory(self):
326.         with self.assertRaisesMessage(FieldError, 'Unknown field(s) (no-field) specified for Person'):
327.             modelform_factory(Person, fields=['no-field', 'name'])
328. 
329.     def test_replace_field(self):
330.         class ReplaceField(forms.ModelForm):
331.             url = forms.BooleanField()
332. 
333.             class Meta:
334.                 model = Category
335.                 fields = '__all__'
336. 
337.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
338. 
339.     def test_replace_field_variant_2(self):
340.         # Should have the same result as before,
341.         # but 'fields' attribute specified differently
342.         class ReplaceField(forms.ModelForm):
343.             url = forms.BooleanField()
344. 
345.             class Meta:
346.                 model = Category
347.                 fields = ['url']
348. 
349.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
350. 
351.     def test_replace_field_variant_3(self):
352.         # Should have the same result as before,
353.         # but 'fields' attribute specified differently
354.         class ReplaceField(forms.ModelForm):
355.             url = forms.BooleanField()
356. 
357.             class Meta:
358.                 model = Category
359.                 fields = []  # url will still appear, since it is explicit above
360. 
361.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
362. 
363.     def test_override_field(self):
364.         class WriterForm(forms.ModelForm):
365.             book = forms.CharField(required=False)
366. 
367.             class Meta:
368.                 model = Writer
369.                 fields = '__all__'
370. 
371.         wf = WriterForm({'name': 'Richard Lockridge'})
372.         self.assertTrue(wf.is_valid())
373. 
374.     def test_limit_nonexistent_field(self):
375.         expected_msg = 'Unknown field(s) (nonexistent) specified for Category'
376.         with self.assertRaisesMessage(FieldError, expected_msg):
377.             class InvalidCategoryForm(forms.ModelForm):
378.                 class Meta:
379.                     model = Category
380.                     fields = ['nonexistent']
381. 
382.     def test_limit_fields_with_string(self):
383.         expected_msg = "CategoryForm.Meta.fields cannot be a string. Did you mean to type: ('url',)?"
384.         with self.assertRaisesMessage(TypeError, expected_msg):
385.             class CategoryForm(forms.ModelForm):
386.                 class Meta:
387.                     model = Category
388.                     fields = ('url')  # note the missing comma
389. 
390.     def test_exclude_fields(self):
391.         class ExcludeFields(forms.ModelForm):
392.             class Meta:
393.                 model = Category
394.                 exclude = ['url']
395. 
396.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug'])
397. 
398.     def test_exclude_nonexistent_field(self):
399.         class ExcludeFields(forms.ModelForm):
400.             class Meta:
401.                 model = Category
402.                 exclude = ['nonexistent']
403. 
404.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug', 'url'])
405. 
406.     def test_exclude_fields_with_string(self):
407.         expected_msg = "CategoryForm.Meta.exclude cannot be a string. Did you mean to type: ('url',)?"
408.         with self.assertRaisesMessage(TypeError, expected_msg):
409.             class CategoryForm(forms.ModelForm):
410.                 class Meta:
411.                     model = Category
412.                     exclude = ('url')  # note the missing comma
413. 
414.     def test_exclude_and_validation(self):
415.         # This Price instance generated by this form is not valid because the quantity
416.         # field is required, but the form is valid because the field is excluded from
417.         # the form. This is for backwards compatibility.
418.         class PriceFormWithoutQuantity(forms.ModelForm):
419.             class Meta:
420.                 model = Price
421.                 exclude = ('quantity',)
422. 
423.         form = PriceFormWithoutQuantity({'price': '6.00'})
424.         self.assertTrue(form.is_valid())
425.         price = form.save(commit=False)
426.         msg = "{'quantity': ['This field cannot be null.']}"
427.         with self.assertRaisesMessage(ValidationError, msg):
428.             price.full_clean()
429. 
430.         # The form should not validate fields that it doesn't contain even if they are
431.         # specified using 'fields', not 'exclude'.
432.         class PriceFormWithoutQuantity(forms.ModelForm):
433.             class Meta:
434.                 model = Price
435.                 fields = ('price',)
436.         form = PriceFormWithoutQuantity({'price': '6.00'})
437.         self.assertTrue(form.is_valid())
438. 
439.         # The form should still have an instance of a model that is not complete and
440.         # not saved into a DB yet.
441.         self.assertEqual(form.instance.price, Decimal('6.00'))
442.         self.assertIsNone(form.instance.quantity)
443.         self.assertIsNone(form.instance.pk)
444. 
445.     def test_confused_form(self):
446.         class ConfusedForm(forms.ModelForm):
447.             """ Using 'fields' *and* 'exclude'. Not sure why you'd want to do
448.             this, but uh, "be liberal in what you accept" and all.
449.             """
450.             class Meta:
451.                 model = Category
452.                 fields = ['name', 'url']
453.                 exclude = ['url']
454. 
455.         self.assertEqual(list(ConfusedForm.base_fields),
456.                          ['name'])
457. 
458.     def test_mixmodel_form(self):
459.         class MixModelForm(BaseCategoryForm):
460.             """ Don't allow more than one 'model' definition in the
461.             inheritance hierarchy.  Technically, it would generate a valid
462.             form, but the fact that the resulting save method won't deal with
463.             multiple objects is likely to trip up people not familiar with the
464.             mechanics.
465.             """
466.             class Meta:
467.                 model = Article
468.                 fields = '__all__'
469.             # MixModelForm is now an Article-related thing, because MixModelForm.Meta
470.             # overrides BaseCategoryForm.Meta.
471. 
472.         self.assertEqual(
473.             list(MixModelForm.base_fields),
474.             ['headline', 'slug', 'pub_date', 'writer', 'article', 'categories', 'status']
475.         )
476. 
477.     def test_article_form(self):
478.         self.assertEqual(
479.             list(ArticleForm.base_fields),
480.             ['headline', 'slug', 'pub_date', 'writer', 'article', 'categories', 'status']
481.         )
482. 
483.     def test_bad_form(self):
484.         # First class with a Meta class wins...
485.         class BadForm(ArticleForm, BaseCategoryForm):
486.             pass
487. 
488.         self.assertEqual(
489.             list(BadForm.base_fields),
490.             ['headline', 'slug', 'pub_date', 'writer', 'article', 'categories', 'status']
491.         )
492. 
493.     def test_invalid_meta_model(self):
494.         class InvalidModelForm(forms.ModelForm):
495.             class Meta:
496.                 pass  # no model
497. 
498.         # Can't create new form
499.         msg = 'ModelForm has no model class specified.'
500.         with self.assertRaisesMessage(ValueError, msg):


File: tests/model_forms/tests.py
Line number range: 501 - 2000
Content:
501.             InvalidModelForm()
502. 
503.         # Even if you provide a model instance
504.         with self.assertRaisesMessage(ValueError, msg):
505.             InvalidModelForm(instance=Category)
506. 
507.     def test_subcategory_form(self):
508.         class SubCategoryForm(BaseCategoryForm):
509.             """ Subclassing without specifying a Meta on the class will use
510.             the parent's Meta (or the first parent in the MRO if there are
511.             multiple parent classes).
512.             """
513.             pass
514. 
515.         self.assertEqual(list(SubCategoryForm.base_fields), ['name', 'slug', 'url'])
516. 
517.     def test_subclassmeta_form(self):
518.         class SomeCategoryForm(forms.ModelForm):
519.             checkbox = forms.BooleanField()
520. 
521.             class Meta:
522.                 model = Category
523.                 fields = '__all__'
524. 
525.         class SubclassMeta(SomeCategoryForm):
526.             """ We can also subclass the Meta inner class to change the fields
527.             list.
528.             """
529.             class Meta(SomeCategoryForm.Meta):
530.                 exclude = ['url']
531. 
532.         self.assertHTMLEqual(
533.             str(SubclassMeta()),
534.             """<tr><th><label for="id_name">Name:</label></th>
535. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>
536. <tr><th><label for="id_slug">Slug:</label></th>
537. <td><input id="id_slug" type="text" name="slug" maxlength="20" required></td></tr>
538. <tr><th><label for="id_checkbox">Checkbox:</label></th>
539. <td><input type="checkbox" name="checkbox" id="id_checkbox" required></td></tr>"""
540.         )
541. 
542.     def test_orderfields_form(self):
543.         class OrderFields(forms.ModelForm):
544.             class Meta:
545.                 model = Category
546.                 fields = ['url', 'name']
547. 
548.         self.assertEqual(list(OrderFields.base_fields),
549.                          ['url', 'name'])
550.         self.assertHTMLEqual(
551.             str(OrderFields()),
552.             """<tr><th><label for="id_url">The URL:</label></th>
553. <td><input id="id_url" type="text" name="url" maxlength="40" required></td></tr>
554. <tr><th><label for="id_name">Name:</label></th>
555. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>"""
556.         )
557. 
558.     def test_orderfields2_form(self):
559.         class OrderFields2(forms.ModelForm):
560.             class Meta:
561.                 model = Category
562.                 fields = ['slug', 'url', 'name']
563.                 exclude = ['url']
564. 
565.         self.assertEqual(list(OrderFields2.base_fields), ['slug', 'name'])
566. 
567.     def test_default_populated_on_optional_field(self):
568.         class PubForm(forms.ModelForm):
569.             mode = forms.CharField(max_length=255, required=False)
570. 
571.             class Meta:
572.                 model = PublicationDefaults
573.                 fields = ('mode',)
574. 
575.         # Empty data uses the model field default.
576.         mf1 = PubForm({})
577.         self.assertEqual(mf1.errors, {})
578.         m1 = mf1.save(commit=False)
579.         self.assertEqual(m1.mode, 'di')
580.         self.assertEqual(m1._meta.get_field('mode').get_default(), 'di')
581. 
582.         # Blank data doesn't use the model field default.
583.         mf2 = PubForm({'mode': ''})
584.         self.assertEqual(mf2.errors, {})
585.         m2 = mf2.save(commit=False)
586.         self.assertEqual(m2.mode, '')
587. 
588.     def test_default_not_populated_on_non_empty_value_in_cleaned_data(self):
589.         class PubForm(forms.ModelForm):
590.             mode = forms.CharField(max_length=255, required=False)
591.             mocked_mode = None
592. 
593.             def clean(self):
594.                 self.cleaned_data['mode'] = self.mocked_mode
595.                 return self.cleaned_data
596. 
597.             class Meta:
598.                 model = PublicationDefaults
599.                 fields = ('mode',)
600. 
601.         pub_form = PubForm({})
602.         pub_form.mocked_mode = 'de'
603.         pub = pub_form.save(commit=False)
604.         self.assertEqual(pub.mode, 'de')
605.         # Default should be populated on an empty value in cleaned_data.
606.         default_mode = 'di'
607.         for empty_value in pub_form.fields['mode'].empty_values:
608.             with self.subTest(empty_value=empty_value):
609.                 pub_form = PubForm({})
610.                 pub_form.mocked_mode = empty_value
611.                 pub = pub_form.save(commit=False)
612.                 self.assertEqual(pub.mode, default_mode)
613. 
614.     def test_default_not_populated_on_optional_checkbox_input(self):
615.         class PubForm(forms.ModelForm):
616.             class Meta:
617.                 model = PublicationDefaults
618.                 fields = ('active',)
619. 
620.         # Empty data doesn't use the model default because CheckboxInput
621.         # doesn't have a value in HTML form submission.
622.         mf1 = PubForm({})
623.         self.assertEqual(mf1.errors, {})
624.         m1 = mf1.save(commit=False)
625.         self.assertIs(m1.active, False)
626.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)
627.         self.assertIs(m1._meta.get_field('active').get_default(), True)
628. 
629.     def test_default_not_populated_on_checkboxselectmultiple(self):
630.         class PubForm(forms.ModelForm):
631.             mode = forms.CharField(required=False, widget=forms.CheckboxSelectMultiple)
632. 
633.             class Meta:
634.                 model = PublicationDefaults
635.                 fields = ('mode',)
636. 
637.         # Empty data doesn't use the model default because an unchecked
638.         # CheckboxSelectMultiple doesn't have a value in HTML form submission.
639.         mf1 = PubForm({})
640.         self.assertEqual(mf1.errors, {})
641.         m1 = mf1.save(commit=False)
642.         self.assertEqual(m1.mode, '')
643.         self.assertEqual(m1._meta.get_field('mode').get_default(), 'di')
644. 
645.     def test_default_not_populated_on_selectmultiple(self):
646.         class PubForm(forms.ModelForm):
647.             mode = forms.CharField(required=False, widget=forms.SelectMultiple)
648. 
649.             class Meta:
650.                 model = PublicationDefaults
651.                 fields = ('mode',)
652. 
653.         # Empty data doesn't use the model default because an unselected
654.         # SelectMultiple doesn't have a value in HTML form submission.
655.         mf1 = PubForm({})
656.         self.assertEqual(mf1.errors, {})
657.         m1 = mf1.save(commit=False)
658.         self.assertEqual(m1.mode, '')
659.         self.assertEqual(m1._meta.get_field('mode').get_default(), 'di')
660. 
661.     def test_prefixed_form_with_default_field(self):
662.         class PubForm(forms.ModelForm):
663.             prefix = 'form-prefix'
664. 
665.             class Meta:
666.                 model = PublicationDefaults
667.                 fields = ('mode',)
668. 
669.         mode = 'de'
670.         self.assertNotEqual(mode, PublicationDefaults._meta.get_field('mode').get_default())
671. 
672.         mf1 = PubForm({'form-prefix-mode': mode})
673.         self.assertEqual(mf1.errors, {})
674.         m1 = mf1.save(commit=False)
675.         self.assertEqual(m1.mode, mode)
676. 
677.     def test_renderer_kwarg(self):
678.         custom = object()
679.         self.assertIs(ProductForm(renderer=custom).renderer, custom)
680. 
681.     def test_default_splitdatetime_field(self):
682.         class PubForm(forms.ModelForm):
683.             datetime_published = forms.SplitDateTimeField(required=False)
684. 
685.             class Meta:
686.                 model = PublicationDefaults
687.                 fields = ('datetime_published',)
688. 
689.         mf1 = PubForm({})
690.         self.assertEqual(mf1.errors, {})
691.         m1 = mf1.save(commit=False)
692.         self.assertEqual(m1.datetime_published, datetime.datetime(2000, 1, 1))
693. 
694.         mf2 = PubForm({'datetime_published_0': '2010-01-01', 'datetime_published_1': '0:00:00'})
695.         self.assertEqual(mf2.errors, {})
696.         m2 = mf2.save(commit=False)
697.         self.assertEqual(m2.datetime_published, datetime.datetime(2010, 1, 1))
698. 
699.     def test_default_filefield(self):
700.         class PubForm(forms.ModelForm):
701.             class Meta:
702.                 model = PublicationDefaults
703.                 fields = ('file',)
704. 
705.         mf1 = PubForm({})
706.         self.assertEqual(mf1.errors, {})
707.         m1 = mf1.save(commit=False)
708.         self.assertEqual(m1.file.name, 'default.txt')
709. 
710.         mf2 = PubForm({}, {'file': SimpleUploadedFile('name', b'foo')})
711.         self.assertEqual(mf2.errors, {})
712.         m2 = mf2.save(commit=False)
713.         self.assertEqual(m2.file.name, 'name')
714. 
715.     def test_default_selectdatewidget(self):
716.         class PubForm(forms.ModelForm):
717.             date_published = forms.DateField(required=False, widget=forms.SelectDateWidget)
718. 
719.             class Meta:
720.                 model = PublicationDefaults
721.                 fields = ('date_published',)
722. 
723.         mf1 = PubForm({})
724.         self.assertEqual(mf1.errors, {})
725.         m1 = mf1.save(commit=False)
726.         self.assertEqual(m1.date_published, datetime.date.today())
727. 
728.         mf2 = PubForm({'date_published_year': '2010', 'date_published_month': '1', 'date_published_day': '1'})
729.         self.assertEqual(mf2.errors, {})
730.         m2 = mf2.save(commit=False)
731.         self.assertEqual(m2.date_published, datetime.date(2010, 1, 1))
732. 
733. 
734. class FieldOverridesByFormMetaForm(forms.ModelForm):
735.     class Meta:
736.         model = Category
737.         fields = ['name', 'url', 'slug']
738.         widgets = {
739.             'name': forms.Textarea,
740.             'url': forms.TextInput(attrs={'class': 'url'})
741.         }
742.         labels = {
743.             'name': 'Title',
744.         }
745.         help_texts = {
746.             'slug': 'Watch out! Letters, numbers, underscores and hyphens only.',
747.         }
748.         error_messages = {
749.             'slug': {
750.                 'invalid': (
751.                     "Didn't you read the help text? "
752.                     "We said letters, numbers, underscores and hyphens only!"
753.                 )
754.             }
755.         }
756.         field_classes = {
757.             'url': forms.URLField,
758.         }
759. 
760. 
761. class TestFieldOverridesByFormMeta(SimpleTestCase):
762.     def test_widget_overrides(self):
763.         form = FieldOverridesByFormMetaForm()
764.         self.assertHTMLEqual(
765.             str(form['name']),
766.             '<textarea id="id_name" rows="10" cols="40" name="name" maxlength="20" required></textarea>',
767.         )
768.         self.assertHTMLEqual(
769.             str(form['url']),
770.             '<input id="id_url" type="text" class="url" name="url" maxlength="40" required>',
771.         )
772.         self.assertHTMLEqual(
773.             str(form['slug']),
774.             '<input id="id_slug" type="text" name="slug" maxlength="20" required>',
775.         )
776. 
777.     def test_label_overrides(self):
778.         form = FieldOverridesByFormMetaForm()
779.         self.assertHTMLEqual(
780.             str(form['name'].label_tag()),
781.             '<label for="id_name">Title:</label>',
782.         )
783.         self.assertHTMLEqual(
784.             str(form['url'].label_tag()),
785.             '<label for="id_url">The URL:</label>',
786.         )
787.         self.assertHTMLEqual(
788.             str(form['slug'].label_tag()),
789.             '<label for="id_slug">Slug:</label>',
790.         )
791. 
792.     def test_help_text_overrides(self):
793.         form = FieldOverridesByFormMetaForm()
794.         self.assertEqual(
795.             form['slug'].help_text,
796.             'Watch out! Letters, numbers, underscores and hyphens only.',
797.         )
798. 
799.     def test_error_messages_overrides(self):
800.         form = FieldOverridesByFormMetaForm(data={
801.             'name': 'Category',
802.             'url': 'http://www.example.com/category/',
803.             'slug': '!%#*@',
804.         })
805.         form.full_clean()
806. 
807.         error = [
808.             "Didn't you read the help text? "
809.             "We said letters, numbers, underscores and hyphens only!",
810.         ]
811.         self.assertEqual(form.errors, {'slug': error})
812. 
813.     def test_field_type_overrides(self):
814.         form = FieldOverridesByFormMetaForm()
815.         self.assertIs(Category._meta.get_field('url').__class__, models.CharField)
816.         self.assertIsInstance(form.fields['url'], forms.URLField)
817. 
818. 
819. class IncompleteCategoryFormWithFields(forms.ModelForm):
820.     """
821.     A form that replaces the model's url field with a custom one. This should
822.     prevent the model field's validation from being called.
823.     """
824.     url = forms.CharField(required=False)
825. 
826.     class Meta:
827.         fields = ('name', 'slug')
828.         model = Category
829. 
830. 
831. class IncompleteCategoryFormWithExclude(forms.ModelForm):
832.     """
833.     A form that replaces the model's url field with a custom one. This should
834.     prevent the model field's validation from being called.
835.     """
836.     url = forms.CharField(required=False)
837. 
838.     class Meta:
839.         exclude = ['url']
840.         model = Category
841. 
842. 
843. class ValidationTest(SimpleTestCase):
844.     def test_validates_with_replaced_field_not_specified(self):
845.         form = IncompleteCategoryFormWithFields(data={'name': 'some name', 'slug': 'some-slug'})
846.         assert form.is_valid()
847. 
848.     def test_validates_with_replaced_field_excluded(self):
849.         form = IncompleteCategoryFormWithExclude(data={'name': 'some name', 'slug': 'some-slug'})
850.         assert form.is_valid()
851. 
852.     def test_notrequired_overrides_notblank(self):
853.         form = CustomWriterForm({})
854.         assert form.is_valid()
855. 
856. 
857. class UniqueTest(TestCase):
858.     """
859.     unique/unique_together validation.
860.     """
861.     @classmethod
862.     def setUpTestData(cls):
863.         cls.writer = Writer.objects.create(name='Mike Royko')
864. 
865.     def test_simple_unique(self):
866.         form = ProductForm({'slug': 'teddy-bear-blue'})
867.         self.assertTrue(form.is_valid())
868.         obj = form.save()
869.         form = ProductForm({'slug': 'teddy-bear-blue'})
870.         self.assertEqual(len(form.errors), 1)
871.         self.assertEqual(form.errors['slug'], ['Product with this Slug already exists.'])
872.         form = ProductForm({'slug': 'teddy-bear-blue'}, instance=obj)
873.         self.assertTrue(form.is_valid())
874. 
875.     def test_unique_together(self):
876.         """ModelForm test of unique_together constraint"""
877.         form = PriceForm({'price': '6.00', 'quantity': '1'})
878.         self.assertTrue(form.is_valid())
879.         form.save()
880.         form = PriceForm({'price': '6.00', 'quantity': '1'})
881.         self.assertFalse(form.is_valid())
882.         self.assertEqual(len(form.errors), 1)
883.         self.assertEqual(form.errors['__all__'], ['Price with this Price and Quantity already exists.'])
884. 
885.     def test_unique_together_exclusion(self):
886.         """
887.         Forms don't validate unique_together constraints when only part of the
888.         constraint is included in the form's fields. This allows using
889.         form.save(commit=False) and then assigning the missing field(s) to the
890.         model instance.
891.         """
892.         class BookForm(forms.ModelForm):
893.             class Meta:
894.                 model = DerivedBook
895.                 fields = ('isbn', 'suffix1')
896. 
897.         # The unique_together is on suffix1/suffix2 but only suffix1 is part
898.         # of the form. The fields must have defaults, otherwise they'll be
899.         # skipped by other logic.
900.         self.assertEqual(DerivedBook._meta.unique_together, (('suffix1', 'suffix2'),))
901.         for name in ('suffix1', 'suffix2'):
902.             with self.subTest(name=name):
903.                 field = DerivedBook._meta.get_field(name)
904.                 self.assertEqual(field.default, 0)
905. 
906.         # The form fails validation with "Derived book with this Suffix1 and
907.         # Suffix2 already exists." if the unique_together validation isn't
908.         # skipped.
909.         DerivedBook.objects.create(isbn='12345')
910.         form = BookForm({'isbn': '56789', 'suffix1': '0'})
911.         self.assertTrue(form.is_valid(), form.errors)
912. 
913.     def test_multiple_field_unique_together(self):
914.         """
915.         When the same field is involved in multiple unique_together
916.         constraints, we need to make sure we don't remove the data for it
917.         before doing all the validation checking (not just failing after
918.         the first one).
919.         """
920.         class TripleForm(forms.ModelForm):
921.             class Meta:
922.                 model = Triple
923.                 fields = '__all__'
924. 
925.         Triple.objects.create(left=1, middle=2, right=3)
926. 
927.         form = TripleForm({'left': '1', 'middle': '2', 'right': '3'})
928.         self.assertFalse(form.is_valid())
929. 
930.         form = TripleForm({'left': '1', 'middle': '3', 'right': '1'})
931.         self.assertTrue(form.is_valid())
932. 
933.     @skipUnlessDBFeature('supports_nullable_unique_constraints')
934.     def test_unique_null(self):
935.         title = 'I May Be Wrong But I Doubt It'
936.         form = BookForm({'title': title, 'author': self.writer.pk})
937.         self.assertTrue(form.is_valid())
938.         form.save()
939.         form = BookForm({'title': title, 'author': self.writer.pk})
940.         self.assertFalse(form.is_valid())
941.         self.assertEqual(len(form.errors), 1)
942.         self.assertEqual(form.errors['__all__'], ['Book with this Title and Author already exists.'])
943.         form = BookForm({'title': title})
944.         self.assertTrue(form.is_valid())
945.         form.save()
946.         form = BookForm({'title': title})
947.         self.assertTrue(form.is_valid())
948. 
949.     def test_inherited_unique(self):
950.         title = 'Boss'
951.         Book.objects.create(title=title, author=self.writer, special_id=1)
952.         form = DerivedBookForm({'title': 'Other', 'author': self.writer.pk, 'special_id': '1', 'isbn': '12345'})
953.         self.assertFalse(form.is_valid())
954.         self.assertEqual(len(form.errors), 1)
955.         self.assertEqual(form.errors['special_id'], ['Book with this Special id already exists.'])
956. 
957.     def test_inherited_unique_together(self):
958.         title = 'Boss'
959.         form = BookForm({'title': title, 'author': self.writer.pk})
960.         self.assertTrue(form.is_valid())
961.         form.save()
962.         form = DerivedBookForm({'title': title, 'author': self.writer.pk, 'isbn': '12345'})
963.         self.assertFalse(form.is_valid())
964.         self.assertEqual(len(form.errors), 1)
965.         self.assertEqual(form.errors['__all__'], ['Book with this Title and Author already exists.'])
966. 
967.     def test_abstract_inherited_unique(self):
968.         title = 'Boss'
969.         isbn = '12345'
970.         DerivedBook.objects.create(title=title, author=self.writer, isbn=isbn)
971.         form = DerivedBookForm({
972.             'title': 'Other', 'author': self.writer.pk, 'isbn': isbn,
973.             'suffix1': '1', 'suffix2': '2',
974.         })
975.         self.assertFalse(form.is_valid())
976.         self.assertEqual(len(form.errors), 1)
977.         self.assertEqual(form.errors['isbn'], ['Derived book with this Isbn already exists.'])
978. 
979.     def test_abstract_inherited_unique_together(self):
980.         title = 'Boss'
981.         isbn = '12345'
982.         DerivedBook.objects.create(title=title, author=self.writer, isbn=isbn)
983.         form = DerivedBookForm({
984.             'title': 'Other',
985.             'author': self.writer.pk,
986.             'isbn': '9876',
987.             'suffix1': '0',
988.             'suffix2': '0'
989.         })
990.         self.assertFalse(form.is_valid())
991.         self.assertEqual(len(form.errors), 1)
992.         self.assertEqual(
993.             form.errors['__all__'],
994.             ['Derived book with this Suffix1 and Suffix2 already exists.'],
995.         )
996. 
997.     def test_explicitpk_unspecified(self):
998.         """Test for primary_key being in the form and failing validation."""
999.         form = ExplicitPKForm({'key': '', 'desc': ''})
1000.         self.assertFalse(form.is_valid())
1001. 
1002.     def test_explicitpk_unique(self):
1003.         """Ensure keys and blank character strings are tested for uniqueness."""
1004.         form = ExplicitPKForm({'key': 'key1', 'desc': ''})
1005.         self.assertTrue(form.is_valid())
1006.         form.save()
1007.         form = ExplicitPKForm({'key': 'key1', 'desc': ''})
1008.         self.assertFalse(form.is_valid())
1009.         if connection.features.interprets_empty_strings_as_nulls:
1010.             self.assertEqual(len(form.errors), 1)
1011.             self.assertEqual(form.errors['key'], ['Explicit pk with this Key already exists.'])
1012.         else:
1013.             self.assertEqual(len(form.errors), 3)
1014.             self.assertEqual(form.errors['__all__'], ['Explicit pk with this Key and Desc already exists.'])
1015.             self.assertEqual(form.errors['desc'], ['Explicit pk with this Desc already exists.'])
1016.             self.assertEqual(form.errors['key'], ['Explicit pk with this Key already exists.'])
1017. 
1018.     def test_unique_for_date(self):
1019.         p = Post.objects.create(
1020.             title="Django 1.0 is released", slug="Django 1.0",
1021.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1022.         )
1023.         form = PostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1024.         self.assertFalse(form.is_valid())
1025.         self.assertEqual(len(form.errors), 1)
1026.         self.assertEqual(form.errors['title'], ['Title must be unique for Posted date.'])
1027.         form = PostForm({'title': "Work on Django 1.1 begins", 'posted': '2008-09-03'})
1028.         self.assertTrue(form.is_valid())
1029.         form = PostForm({'title': "Django 1.0 is released", 'posted': '2008-09-04'})
1030.         self.assertTrue(form.is_valid())
1031.         form = PostForm({'slug': "Django 1.0", 'posted': '2008-01-01'})
1032.         self.assertFalse(form.is_valid())
1033.         self.assertEqual(len(form.errors), 1)
1034.         self.assertEqual(form.errors['slug'], ['Slug must be unique for Posted year.'])
1035.         form = PostForm({'subtitle': "Finally", 'posted': '2008-09-30'})
1036.         self.assertFalse(form.is_valid())
1037.         self.assertEqual(form.errors['subtitle'], ['Subtitle must be unique for Posted month.'])
1038.         data = {'subtitle': "Finally", "title": "Django 1.0 is released", "slug": "Django 1.0", 'posted': '2008-09-03'}
1039.         form = PostForm(data, instance=p)
1040.         self.assertTrue(form.is_valid())
1041.         form = PostForm({'title': "Django 1.0 is released"})
1042.         self.assertFalse(form.is_valid())
1043.         self.assertEqual(len(form.errors), 1)
1044.         self.assertEqual(form.errors['posted'], ['This field is required.'])
1045. 
1046.     def test_unique_for_date_in_exclude(self):
1047.         """
1048.         If the date for unique_for_* constraints is excluded from the
1049.         ModelForm (in this case 'posted' has editable=False, then the
1050.         constraint should be ignored.
1051.         """
1052.         class DateTimePostForm(forms.ModelForm):
1053.             class Meta:
1054.                 model = DateTimePost
1055.                 fields = '__all__'
1056. 
1057.         DateTimePost.objects.create(
1058.             title="Django 1.0 is released", slug="Django 1.0",
1059.             subtitle="Finally", posted=datetime.datetime(2008, 9, 3, 10, 10, 1),
1060.         )
1061.         # 'title' has unique_for_date='posted'
1062.         form = DateTimePostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1063.         self.assertTrue(form.is_valid())
1064.         # 'slug' has unique_for_year='posted'
1065.         form = DateTimePostForm({'slug': "Django 1.0", 'posted': '2008-01-01'})
1066.         self.assertTrue(form.is_valid())
1067.         # 'subtitle' has unique_for_month='posted'
1068.         form = DateTimePostForm({'subtitle': "Finally", 'posted': '2008-09-30'})
1069.         self.assertTrue(form.is_valid())
1070. 
1071.     def test_inherited_unique_for_date(self):
1072.         p = Post.objects.create(
1073.             title="Django 1.0 is released", slug="Django 1.0",
1074.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1075.         )
1076.         form = DerivedPostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1077.         self.assertFalse(form.is_valid())
1078.         self.assertEqual(len(form.errors), 1)
1079.         self.assertEqual(form.errors['title'], ['Title must be unique for Posted date.'])
1080.         form = DerivedPostForm({'title': "Work on Django 1.1 begins", 'posted': '2008-09-03'})
1081.         self.assertTrue(form.is_valid())
1082.         form = DerivedPostForm({'title': "Django 1.0 is released", 'posted': '2008-09-04'})
1083.         self.assertTrue(form.is_valid())
1084.         form = DerivedPostForm({'slug': "Django 1.0", 'posted': '2008-01-01'})
1085.         self.assertFalse(form.is_valid())
1086.         self.assertEqual(len(form.errors), 1)
1087.         self.assertEqual(form.errors['slug'], ['Slug must be unique for Posted year.'])
1088.         form = DerivedPostForm({'subtitle': "Finally", 'posted': '2008-09-30'})
1089.         self.assertFalse(form.is_valid())
1090.         self.assertEqual(form.errors['subtitle'], ['Subtitle must be unique for Posted month.'])
1091.         data = {'subtitle': "Finally", "title": "Django 1.0 is released", "slug": "Django 1.0", 'posted': '2008-09-03'}
1092.         form = DerivedPostForm(data, instance=p)
1093.         self.assertTrue(form.is_valid())
1094. 
1095.     def test_unique_for_date_with_nullable_date(self):
1096.         class FlexDatePostForm(forms.ModelForm):
1097.             class Meta:
1098.                 model = FlexibleDatePost
1099.                 fields = '__all__'
1100. 
1101.         p = FlexibleDatePost.objects.create(
1102.             title="Django 1.0 is released", slug="Django 1.0",
1103.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1104.         )
1105. 
1106.         form = FlexDatePostForm({'title': "Django 1.0 is released"})
1107.         self.assertTrue(form.is_valid())
1108.         form = FlexDatePostForm({'slug': "Django 1.0"})
1109.         self.assertTrue(form.is_valid())
1110.         form = FlexDatePostForm({'subtitle': "Finally"})
1111.         self.assertTrue(form.is_valid())
1112.         data = {'subtitle': "Finally", "title": "Django 1.0 is released", "slug": "Django 1.0"}
1113.         form = FlexDatePostForm(data, instance=p)
1114.         self.assertTrue(form.is_valid())
1115. 
1116.     def test_override_unique_message(self):
1117.         class CustomProductForm(ProductForm):
1118.             class Meta(ProductForm.Meta):
1119.                 error_messages = {
1120.                     'slug': {
1121.                         'unique': "%(model_name)s's %(field_label)s not unique.",
1122.                     }
1123.                 }
1124. 
1125.         Product.objects.create(slug='teddy-bear-blue')
1126.         form = CustomProductForm({'slug': 'teddy-bear-blue'})
1127.         self.assertEqual(len(form.errors), 1)
1128.         self.assertEqual(form.errors['slug'], ["Product's Slug not unique."])
1129. 
1130.     def test_override_unique_together_message(self):
1131.         class CustomPriceForm(PriceForm):
1132.             class Meta(PriceForm.Meta):
1133.                 error_messages = {
1134.                     NON_FIELD_ERRORS: {
1135.                         'unique_together': "%(model_name)s's %(field_labels)s not unique.",
1136.                     }
1137.                 }
1138. 
1139.         Price.objects.create(price=6.00, quantity=1)
1140.         form = CustomPriceForm({'price': '6.00', 'quantity': '1'})
1141.         self.assertEqual(len(form.errors), 1)
1142.         self.assertEqual(form.errors[NON_FIELD_ERRORS], ["Price's Price and Quantity not unique."])
1143. 
1144.     def test_override_unique_for_date_message(self):
1145.         class CustomPostForm(PostForm):
1146.             class Meta(PostForm.Meta):
1147.                 error_messages = {
1148.                     'title': {
1149.                         'unique_for_date': (
1150.                             "%(model_name)s's %(field_label)s not unique "
1151.                             "for %(date_field_label)s date."
1152.                         ),
1153.                     }
1154.                 }
1155. 
1156.         Post.objects.create(
1157.             title="Django 1.0 is released", slug="Django 1.0",
1158.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1159.         )
1160.         form = CustomPostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1161.         self.assertEqual(len(form.errors), 1)
1162.         self.assertEqual(form.errors['title'], ["Post's Title not unique for Posted date."])
1163. 
1164. 
1165. class ModelFormBasicTests(TestCase):
1166.     def create_basic_data(self):
1167.         self.c1 = Category.objects.create(name='Entertainment', slug='entertainment', url='entertainment')
1168.         self.c2 = Category.objects.create(name="It's a test", slug='its-test', url='test')
1169.         self.c3 = Category.objects.create(name='Third test', slug='third-test', url='third')
1170.         self.w_royko = Writer.objects.create(name='Mike Royko')
1171.         self.w_woodward = Writer.objects.create(name='Bob Woodward')
1172. 
1173.     def test_base_form(self):
1174.         self.assertEqual(Category.objects.count(), 0)
1175.         f = BaseCategoryForm()
1176.         self.assertHTMLEqual(
1177.             str(f),
1178.             """<tr><th><label for="id_name">Name:</label></th>
1179. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>
1180. <tr><th><label for="id_slug">Slug:</label></th>
1181. <td><input id="id_slug" type="text" name="slug" maxlength="20" required></td></tr>
1182. <tr><th><label for="id_url">The URL:</label></th>
1183. <td><input id="id_url" type="text" name="url" maxlength="40" required></td></tr>"""
1184.         )
1185.         self.assertHTMLEqual(
1186.             str(f.as_ul()),
1187.             """<li><label for="id_name">Name:</label> <input id="id_name" type="text" name="name" maxlength="20" required></li>
1188. <li><label for="id_slug">Slug:</label> <input id="id_slug" type="text" name="slug" maxlength="20" required></li>
1189. <li><label for="id_url">The URL:</label> <input id="id_url" type="text" name="url" maxlength="40" required></li>"""
1190.         )
1191.         self.assertHTMLEqual(
1192.             str(f["name"]),
1193.             """<input id="id_name" type="text" name="name" maxlength="20" required>""")
1194. 
1195.     def test_auto_id(self):
1196.         f = BaseCategoryForm(auto_id=False)
1197.         self.assertHTMLEqual(
1198.             str(f.as_ul()),
1199.             """<li>Name: <input type="text" name="name" maxlength="20" required></li>
1200. <li>Slug: <input type="text" name="slug" maxlength="20" required></li>
1201. <li>The URL: <input type="text" name="url" maxlength="40" required></li>"""
1202.         )
1203. 
1204.     def test_initial_values(self):
1205.         self.create_basic_data()
1206.         # Initial values can be provided for model forms
1207.         f = ArticleForm(
1208.             auto_id=False,
1209.             initial={
1210.                 'headline': 'Your headline here',
1211.                 'categories': [str(self.c1.id), str(self.c2.id)]
1212.             })
1213.         self.assertHTMLEqual(
1214.             f.as_ul(),
1215.             '''<li>Headline: <input type="text" name="headline" value="Your headline here" maxlength="50" required></li>
1216. <li>Slug: <input type="text" name="slug" maxlength="50" required></li>
1217. <li>Pub date: <input type="text" name="pub_date" required></li>
1218. <li>Writer: <select name="writer" required>
1219. <option value="" selected>---------</option>
1220. <option value="%s">Bob Woodward</option>
1221. <option value="%s">Mike Royko</option>
1222. </select></li>
1223. <li>Article: <textarea rows="10" cols="40" name="article" required></textarea></li>
1224. <li>Categories: <select multiple name="categories">
1225. <option value="%s" selected>Entertainment</option>
1226. <option value="%s" selected>It&#x27;s a test</option>
1227. <option value="%s">Third test</option>
1228. </select></li>
1229. <li>Status: <select name="status">
1230. <option value="" selected>---------</option>
1231. <option value="1">Draft</option>
1232. <option value="2">Pending</option>
1233. <option value="3">Live</option>
1234. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1235. 
1236.         # When the ModelForm is passed an instance, that instance's current values are
1237.         # inserted as 'initial' data in each Field.
1238.         f = RoykoForm(auto_id=False, instance=self.w_royko)
1239.         self.assertHTMLEqual(
1240.             str(f),
1241.             '''<tr><th>Name:</th><td><input type="text" name="name" value="Mike Royko" maxlength="50" required><br>
1242.             <span class="helptext">Use both first and last names.</span></td></tr>'''
1243.         )
1244. 
1245.         art = Article.objects.create(
1246.             headline='Test article',
1247.             slug='test-article',
1248.             pub_date=datetime.date(1988, 1, 4),
1249.             writer=self.w_royko,
1250.             article='Hello.'
1251.         )
1252.         art_id_1 = art.id
1253. 
1254.         f = ArticleForm(auto_id=False, instance=art)
1255.         self.assertHTMLEqual(
1256.             f.as_ul(),
1257.             '''<li>Headline: <input type="text" name="headline" value="Test article" maxlength="50" required></li>
1258. <li>Slug: <input type="text" name="slug" value="test-article" maxlength="50" required></li>
1259. <li>Pub date: <input type="text" name="pub_date" value="1988-01-04" required></li>
1260. <li>Writer: <select name="writer" required>
1261. <option value="">---------</option>
1262. <option value="%s">Bob Woodward</option>
1263. <option value="%s" selected>Mike Royko</option>
1264. </select></li>
1265. <li>Article: <textarea rows="10" cols="40" name="article" required>Hello.</textarea></li>
1266. <li>Categories: <select multiple name="categories">
1267. <option value="%s">Entertainment</option>
1268. <option value="%s">It&#x27;s a test</option>
1269. <option value="%s">Third test</option>
1270. </select></li>
1271. <li>Status: <select name="status">
1272. <option value="" selected>---------</option>
1273. <option value="1">Draft</option>
1274. <option value="2">Pending</option>
1275. <option value="3">Live</option>
1276. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1277. 
1278.         f = ArticleForm({
1279.             'headline': 'Test headline',
1280.             'slug': 'test-headline',
1281.             'pub_date': '1984-02-06',
1282.             'writer': str(self.w_royko.pk),
1283.             'article': 'Hello.'
1284.         }, instance=art)
1285.         self.assertEqual(f.errors, {})
1286.         self.assertTrue(f.is_valid())
1287.         test_art = f.save()
1288.         self.assertEqual(test_art.id, art_id_1)
1289.         test_art = Article.objects.get(id=art_id_1)
1290.         self.assertEqual(test_art.headline, 'Test headline')
1291. 
1292.     def test_m2m_initial_callable(self):
1293.         """
1294.         Regression for #10349: A callable can be provided as the initial value for an m2m field
1295.         """
1296.         self.maxDiff = 1200
1297.         self.create_basic_data()
1298. 
1299.         # Set up a callable initial value
1300.         def formfield_for_dbfield(db_field, **kwargs):
1301.             if db_field.name == 'categories':
1302.                 kwargs['initial'] = lambda: Category.objects.all().order_by('name')[:2]
1303.             return db_field.formfield(**kwargs)
1304. 
1305.         # Create a ModelForm, instantiate it, and check that the output is as expected
1306.         ModelForm = modelform_factory(
1307.             Article,
1308.             fields=['headline', 'categories'],
1309.             formfield_callback=formfield_for_dbfield,
1310.         )
1311.         form = ModelForm()
1312.         self.assertHTMLEqual(
1313.             form.as_ul(),
1314.             """<li><label for="id_headline">Headline:</label>
1315. <input id="id_headline" type="text" name="headline" maxlength="50" required></li>
1316. <li><label for="id_categories">Categories:</label>
1317. <select multiple name="categories" id="id_categories">
1318. <option value="%d" selected>Entertainment</option>
1319. <option value="%d" selected>It&#x27;s a test</option>
1320. <option value="%d">Third test</option>
1321. </select></li>"""
1322.             % (self.c1.pk, self.c2.pk, self.c3.pk))
1323. 
1324.     def test_basic_creation(self):
1325.         self.assertEqual(Category.objects.count(), 0)
1326.         f = BaseCategoryForm({
1327.             'name': 'Entertainment',
1328.             'slug': 'entertainment',
1329.             'url': 'entertainment',
1330.         })
1331.         self.assertTrue(f.is_valid())
1332.         self.assertEqual(f.cleaned_data['name'], 'Entertainment')
1333.         self.assertEqual(f.cleaned_data['slug'], 'entertainment')
1334.         self.assertEqual(f.cleaned_data['url'], 'entertainment')
1335.         c1 = f.save()
1336.         # Testing whether the same object is returned from the
1337.         # ORM... not the fastest way...
1338. 
1339.         self.assertEqual(Category.objects.count(), 1)
1340.         self.assertEqual(c1, Category.objects.all()[0])
1341.         self.assertEqual(c1.name, "Entertainment")
1342. 
1343.     def test_save_commit_false(self):
1344.         # If you call save() with commit=False, then it will return an object that
1345.         # hasn't yet been saved to the database. In this case, it's up to you to call
1346.         # save() on the resulting model instance.
1347.         f = BaseCategoryForm({'name': 'Third test', 'slug': 'third-test', 'url': 'third'})
1348.         self.assertTrue(f.is_valid())
1349.         c1 = f.save(commit=False)
1350.         self.assertEqual(c1.name, "Third test")
1351.         self.assertEqual(Category.objects.count(), 0)
1352.         c1.save()
1353.         self.assertEqual(Category.objects.count(), 1)
1354. 
1355.     def test_save_with_data_errors(self):
1356.         # If you call save() with invalid data, you'll get a ValueError.
1357.         f = BaseCategoryForm({'name': '', 'slug': 'not a slug!', 'url': 'foo'})
1358.         self.assertEqual(f.errors['name'], ['This field is required.'])
1359.         self.assertEqual(
1360.             f.errors['slug'],
1361.             ['Enter a valid “slug” consisting of letters, numbers, underscores or hyphens.']
1362.         )
1363.         self.assertEqual(f.cleaned_data, {'url': 'foo'})
1364.         msg = "The Category could not be created because the data didn't validate."
1365.         with self.assertRaisesMessage(ValueError, msg):
1366.             f.save()
1367.         f = BaseCategoryForm({'name': '', 'slug': '', 'url': 'foo'})
1368.         with self.assertRaisesMessage(ValueError, msg):
1369.             f.save()
1370. 
1371.     def test_multi_fields(self):
1372.         self.create_basic_data()
1373.         self.maxDiff = None
1374.         # ManyToManyFields are represented by a MultipleChoiceField, ForeignKeys and any
1375.         # fields with the 'choices' attribute are represented by a ChoiceField.
1376.         f = ArticleForm(auto_id=False)
1377.         self.assertHTMLEqual(
1378.             str(f),
1379.             '''<tr><th>Headline:</th><td><input type="text" name="headline" maxlength="50" required></td></tr>
1380. <tr><th>Slug:</th><td><input type="text" name="slug" maxlength="50" required></td></tr>
1381. <tr><th>Pub date:</th><td><input type="text" name="pub_date" required></td></tr>
1382. <tr><th>Writer:</th><td><select name="writer" required>
1383. <option value="" selected>---------</option>
1384. <option value="%s">Bob Woodward</option>
1385. <option value="%s">Mike Royko</option>
1386. </select></td></tr>
1387. <tr><th>Article:</th><td><textarea rows="10" cols="40" name="article" required></textarea></td></tr>
1388. <tr><th>Categories:</th><td><select multiple name="categories">
1389. <option value="%s">Entertainment</option>
1390. <option value="%s">It&#x27;s a test</option>
1391. <option value="%s">Third test</option>
1392. </select></td></tr>
1393. <tr><th>Status:</th><td><select name="status">
1394. <option value="" selected>---------</option>
1395. <option value="1">Draft</option>
1396. <option value="2">Pending</option>
1397. <option value="3">Live</option>
1398. </select></td></tr>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1399. 
1400.         # Add some categories and test the many-to-many form output.
1401.         new_art = Article.objects.create(
1402.             article="Hello.", headline="New headline", slug="new-headline",
1403.             pub_date=datetime.date(1988, 1, 4), writer=self.w_royko)
1404.         new_art.categories.add(Category.objects.get(name='Entertainment'))
1405.         self.assertQuerysetEqual(new_art.categories.all(), ["Entertainment"])
1406.         f = ArticleForm(auto_id=False, instance=new_art)
1407.         self.assertHTMLEqual(
1408.             f.as_ul(),
1409.             '''<li>Headline: <input type="text" name="headline" value="New headline" maxlength="50" required></li>
1410. <li>Slug: <input type="text" name="slug" value="new-headline" maxlength="50" required></li>
1411. <li>Pub date: <input type="text" name="pub_date" value="1988-01-04" required></li>
1412. <li>Writer: <select name="writer" required>
1413. <option value="">---------</option>
1414. <option value="%s">Bob Woodward</option>
1415. <option value="%s" selected>Mike Royko</option>
1416. </select></li>
1417. <li>Article: <textarea rows="10" cols="40" name="article" required>Hello.</textarea></li>
1418. <li>Categories: <select multiple name="categories">
1419. <option value="%s" selected>Entertainment</option>
1420. <option value="%s">It&#x27;s a test</option>
1421. <option value="%s">Third test</option>
1422. </select></li>
1423. <li>Status: <select name="status">
1424. <option value="" selected>---------</option>
1425. <option value="1">Draft</option>
1426. <option value="2">Pending</option>
1427. <option value="3">Live</option>
1428. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1429. 
1430.     def test_subset_fields(self):
1431.         # You can restrict a form to a subset of the complete list of fields
1432.         # by providing a 'fields' argument. If you try to save a
1433.         # model created with such a form, you need to ensure that the fields
1434.         # that are _not_ on the form have default values, or are allowed to have
1435.         # a value of None. If a field isn't specified on a form, the object created
1436.         # from the form can't provide a value for that field!
1437.         class PartialArticleForm(forms.ModelForm):
1438.             class Meta:
1439.                 model = Article
1440.                 fields = ('headline', 'pub_date')
1441. 
1442.         f = PartialArticleForm(auto_id=False)
1443.         self.assertHTMLEqual(
1444.             str(f),
1445.             '''<tr><th>Headline:</th><td><input type="text" name="headline" maxlength="50" required></td></tr>
1446. <tr><th>Pub date:</th><td><input type="text" name="pub_date" required></td></tr>''')
1447. 
1448.         class PartialArticleFormWithSlug(forms.ModelForm):
1449.             class Meta:
1450.                 model = Article
1451.                 fields = ('headline', 'slug', 'pub_date')
1452. 
1453.         w_royko = Writer.objects.create(name='Mike Royko')
1454.         art = Article.objects.create(
1455.             article="Hello.", headline="New headline", slug="new-headline",
1456.             pub_date=datetime.date(1988, 1, 4), writer=w_royko)
1457.         f = PartialArticleFormWithSlug({
1458.             'headline': 'New headline',
1459.             'slug': 'new-headline',
1460.             'pub_date': '1988-01-04'
1461.         }, auto_id=False, instance=art)
1462.         self.assertHTMLEqual(
1463.             f.as_ul(),
1464.             '''<li>Headline: <input type="text" name="headline" value="New headline" maxlength="50" required></li>
1465. <li>Slug: <input type="text" name="slug" value="new-headline" maxlength="50" required></li>
1466. <li>Pub date: <input type="text" name="pub_date" value="1988-01-04" required></li>'''
1467.         )
1468.         self.assertTrue(f.is_valid())
1469.         new_art = f.save()
1470.         self.assertEqual(new_art.id, art.id)
1471.         new_art = Article.objects.get(id=art.id)
1472.         self.assertEqual(new_art.headline, 'New headline')
1473. 
1474.     def test_m2m_editing(self):
1475.         self.create_basic_data()
1476.         form_data = {
1477.             'headline': 'New headline',
1478.             'slug': 'new-headline',
1479.             'pub_date': '1988-01-04',
1480.             'writer': str(self.w_royko.pk),
1481.             'article': 'Hello.',
1482.             'categories': [str(self.c1.id), str(self.c2.id)]
1483.         }
1484.         # Create a new article, with categories, via the form.
1485.         f = ArticleForm(form_data)
1486.         new_art = f.save()
1487.         new_art = Article.objects.get(id=new_art.id)
1488.         art_id_1 = new_art.id
1489.         self.assertQuerysetEqual(new_art.categories.order_by('name'), ["Entertainment", "It's a test"])
1490. 
1491.         # Now, submit form data with no categories. This deletes the existing categories.
1492.         form_data['categories'] = []
1493.         f = ArticleForm(form_data, instance=new_art)
1494.         new_art = f.save()
1495.         self.assertEqual(new_art.id, art_id_1)
1496.         new_art = Article.objects.get(id=art_id_1)
1497.         self.assertQuerysetEqual(new_art.categories.all(), [])
1498. 
1499.         # Create a new article, with no categories, via the form.
1500.         f = ArticleForm(form_data)
1501.         new_art = f.save()
1502.         art_id_2 = new_art.id
1503.         self.assertNotIn(art_id_2, (None, art_id_1))
1504.         new_art = Article.objects.get(id=art_id_2)
1505.         self.assertQuerysetEqual(new_art.categories.all(), [])
1506. 
1507.         # Create a new article, with categories, via the form, but use commit=False.
1508.         # The m2m data won't be saved until save_m2m() is invoked on the form.
1509.         form_data['categories'] = [str(self.c1.id), str(self.c2.id)]
1510.         f = ArticleForm(form_data)
1511.         new_art = f.save(commit=False)
1512. 
1513.         # Manually save the instance
1514.         new_art.save()
1515.         art_id_3 = new_art.id
1516.         self.assertNotIn(art_id_3, (None, art_id_1, art_id_2))
1517. 
1518.         # The instance doesn't have m2m data yet
1519.         new_art = Article.objects.get(id=art_id_3)
1520.         self.assertQuerysetEqual(new_art.categories.all(), [])
1521. 
1522.         # Save the m2m data on the form
1523.         f.save_m2m()
1524.         self.assertQuerysetEqual(new_art.categories.order_by('name'), ["Entertainment", "It's a test"])
1525. 
1526.     def test_custom_form_fields(self):
1527.         # Here, we define a custom ModelForm. Because it happens to have the same fields as
1528.         # the Category model, we can just call the form's save() to apply its changes to an
1529.         # existing Category instance.
1530.         class ShortCategory(forms.ModelForm):
1531.             name = forms.CharField(max_length=5)
1532.             slug = forms.CharField(max_length=5)
1533.             url = forms.CharField(max_length=3)
1534. 
1535.             class Meta:
1536.                 model = Category
1537.                 fields = '__all__'
1538. 
1539.         cat = Category.objects.create(name='Third test')
1540.         form = ShortCategory({'name': 'Third', 'slug': 'third', 'url': '3rd'}, instance=cat)
1541.         self.assertEqual(form.save().name, 'Third')
1542.         self.assertEqual(Category.objects.get(id=cat.id).name, 'Third')
1543. 
1544.     def test_runtime_choicefield_populated(self):
1545.         self.maxDiff = None
1546.         # Here, we demonstrate that choices for a ForeignKey ChoiceField are determined
1547.         # at runtime, based on the data in the database when the form is displayed, not
1548.         # the data in the database when the form is instantiated.
1549.         self.create_basic_data()
1550.         f = ArticleForm(auto_id=False)
1551.         self.assertHTMLEqual(
1552.             f.as_ul(),
1553.             '''<li>Headline: <input type="text" name="headline" maxlength="50" required></li>
1554. <li>Slug: <input type="text" name="slug" maxlength="50" required></li>
1555. <li>Pub date: <input type="text" name="pub_date" required></li>
1556. <li>Writer: <select name="writer" required>
1557. <option value="" selected>---------</option>
1558. <option value="%s">Bob Woodward</option>
1559. <option value="%s">Mike Royko</option>
1560. </select></li>
1561. <li>Article: <textarea rows="10" cols="40" name="article" required></textarea></li>
1562. <li>Categories: <select multiple name="categories">
1563. <option value="%s">Entertainment</option>
1564. <option value="%s">It&#x27;s a test</option>
1565. <option value="%s">Third test</option>
1566. </select> </li>
1567. <li>Status: <select name="status">
1568. <option value="" selected>---------</option>
1569. <option value="1">Draft</option>
1570. <option value="2">Pending</option>
1571. <option value="3">Live</option>
1572. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1573. 
1574.         c4 = Category.objects.create(name='Fourth', url='4th')
1575.         w_bernstein = Writer.objects.create(name='Carl Bernstein')
1576.         self.assertHTMLEqual(
1577.             f.as_ul(),
1578.             '''<li>Headline: <input type="text" name="headline" maxlength="50" required></li>
1579. <li>Slug: <input type="text" name="slug" maxlength="50" required></li>
1580. <li>Pub date: <input type="text" name="pub_date" required></li>
1581. <li>Writer: <select name="writer" required>
1582. <option value="" selected>---------</option>
1583. <option value="%s">Bob Woodward</option>
1584. <option value="%s">Carl Bernstein</option>
1585. <option value="%s">Mike Royko</option>
1586. </select></li>
1587. <li>Article: <textarea rows="10" cols="40" name="article" required></textarea></li>
1588. <li>Categories: <select multiple name="categories">
1589. <option value="%s">Entertainment</option>
1590. <option value="%s">It&#x27;s a test</option>
1591. <option value="%s">Third test</option>
1592. <option value="%s">Fourth</option>
1593. </select></li>
1594. <li>Status: <select name="status">
1595. <option value="" selected>---------</option>
1596. <option value="1">Draft</option>
1597. <option value="2">Pending</option>
1598. <option value="3">Live</option>
1599. </select></li>''' % (self.w_woodward.pk, w_bernstein.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk, c4.pk))
1600. 
1601.     def test_recleaning_model_form_instance(self):
1602.         """
1603.         Re-cleaning an instance that was added via a ModelForm shouldn't raise
1604.         a pk uniqueness error.
1605.         """
1606.         class AuthorForm(forms.ModelForm):
1607.             class Meta:
1608.                 model = Author
1609.                 fields = '__all__'
1610. 
1611.         form = AuthorForm({'full_name': 'Bob'})
1612.         self.assertTrue(form.is_valid())
1613.         obj = form.save()
1614.         obj.name = 'Alice'
1615.         obj.full_clean()
1616. 
1617. 
1618. class ModelMultipleChoiceFieldTests(TestCase):
1619.     @classmethod
1620.     def setUpTestData(cls):
1621.         cls.c1 = Category.objects.create(name='Entertainment', slug='entertainment', url='entertainment')
1622.         cls.c2 = Category.objects.create(name="It's a test", slug='its-test', url='test')
1623.         cls.c3 = Category.objects.create(name='Third', slug='third-test', url='third')
1624. 
1625.     def test_model_multiple_choice_field(self):
1626.         f = forms.ModelMultipleChoiceField(Category.objects.all())
1627.         self.assertEqual(list(f.choices), [
1628.             (self.c1.pk, 'Entertainment'),
1629.             (self.c2.pk, "It's a test"),
1630.             (self.c3.pk, 'Third')])
1631.         with self.assertRaises(ValidationError):
1632.             f.clean(None)
1633.         with self.assertRaises(ValidationError):
1634.             f.clean([])
1635.         self.assertQuerysetEqual(f.clean([self.c1.id]), ["Entertainment"])
1636.         self.assertQuerysetEqual(f.clean([self.c2.id]), ["It's a test"])
1637.         self.assertQuerysetEqual(f.clean([str(self.c1.id)]), ["Entertainment"])
1638.         self.assertQuerysetEqual(
1639.             f.clean([str(self.c1.id), str(self.c2.id)]),
1640.             ["Entertainment", "It's a test"], ordered=False
1641.         )
1642.         self.assertQuerysetEqual(
1643.             f.clean([self.c1.id, str(self.c2.id)]),
1644.             ["Entertainment", "It's a test"], ordered=False
1645.         )
1646.         self.assertQuerysetEqual(
1647.             f.clean((self.c1.id, str(self.c2.id))),
1648.             ["Entertainment", "It's a test"], ordered=False
1649.         )
1650.         with self.assertRaises(ValidationError):
1651.             f.clean(['100'])
1652.         with self.assertRaises(ValidationError):
1653.             f.clean('hello')
1654.         with self.assertRaises(ValidationError):
1655.             f.clean(['fail'])
1656. 
1657.         # Invalid types that require TypeError to be caught (#22808).
1658.         with self.assertRaises(ValidationError):
1659.             f.clean([['fail']])
1660.         with self.assertRaises(ValidationError):
1661.             f.clean([{'foo': 'bar'}])
1662. 
1663.         # Add a Category object *after* the ModelMultipleChoiceField has already been
1664.         # instantiated. This proves clean() checks the database during clean() rather
1665.         # than caching it at time of instantiation.
1666.         # Note, we are using an id of 1006 here since tests that run before
1667.         # this may create categories with primary keys up to 6. Use
1668.         # a number that will not conflict.
1669.         c6 = Category.objects.create(id=1006, name='Sixth', url='6th')
1670.         self.assertQuerysetEqual(f.clean([c6.id]), ["Sixth"])
1671. 
1672.         # Delete a Category object *after* the ModelMultipleChoiceField has already been
1673.         # instantiated. This proves clean() checks the database during clean() rather
1674.         # than caching it at time of instantiation.
1675.         Category.objects.get(url='6th').delete()
1676.         with self.assertRaises(ValidationError):
1677.             f.clean([c6.id])
1678. 
1679.     def test_model_multiple_choice_required_false(self):
1680.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
1681.         self.assertIsInstance(f.clean([]), EmptyQuerySet)
1682.         self.assertIsInstance(f.clean(()), EmptyQuerySet)
1683.         with self.assertRaises(ValidationError):
1684.             f.clean(['0'])
1685.         with self.assertRaises(ValidationError):
1686.             f.clean([str(self.c3.id), '0'])
1687.         with self.assertRaises(ValidationError):
1688.             f.clean([str(self.c1.id), '0'])
1689. 
1690.         # queryset can be changed after the field is created.
1691.         f.queryset = Category.objects.exclude(name='Third')
1692.         self.assertEqual(list(f.choices), [
1693.             (self.c1.pk, 'Entertainment'),
1694.             (self.c2.pk, "It's a test")])
1695.         self.assertQuerysetEqual(f.clean([self.c2.id]), ["It's a test"])
1696.         with self.assertRaises(ValidationError):
1697.             f.clean([self.c3.id])
1698.         with self.assertRaises(ValidationError):
1699.             f.clean([str(self.c2.id), str(self.c3.id)])
1700. 
1701.         f.queryset = Category.objects.all()
1702.         f.label_from_instance = lambda obj: "multicategory " + str(obj)
1703.         self.assertEqual(list(f.choices), [
1704.             (self.c1.pk, 'multicategory Entertainment'),
1705.             (self.c2.pk, "multicategory It's a test"),
1706.             (self.c3.pk, 'multicategory Third')])
1707. 
1708.     def test_model_multiple_choice_number_of_queries(self):
1709.         """
1710.         ModelMultipleChoiceField does O(1) queries instead of O(n) (#10156).
1711.         """
1712.         persons = [Writer.objects.create(name="Person %s" % i) for i in range(30)]
1713. 
1714.         f = forms.ModelMultipleChoiceField(queryset=Writer.objects.all())
1715.         self.assertNumQueries(1, f.clean, [p.pk for p in persons[1:11:2]])
1716. 
1717.     def test_model_multiple_choice_run_validators(self):
1718.         """
1719.         ModelMultipleChoiceField run given validators (#14144).
1720.         """
1721.         for i in range(30):
1722.             Writer.objects.create(name="Person %s" % i)
1723. 
1724.         self._validator_run = False
1725. 
1726.         def my_validator(value):
1727.             self._validator_run = True
1728. 
1729.         f = forms.ModelMultipleChoiceField(queryset=Writer.objects.all(), validators=[my_validator])
1730.         f.clean([p.pk for p in Writer.objects.all()[8:9]])
1731.         self.assertTrue(self._validator_run)
1732. 
1733.     def test_model_multiple_choice_show_hidden_initial(self):
1734.         """
1735.         Test support of show_hidden_initial by ModelMultipleChoiceField.
1736.         """
1737.         class WriterForm(forms.Form):
1738.             persons = forms.ModelMultipleChoiceField(show_hidden_initial=True, queryset=Writer.objects.all())
1739. 
1740.         person1 = Writer.objects.create(name="Person 1")
1741.         person2 = Writer.objects.create(name="Person 2")
1742. 
1743.         form = WriterForm(
1744.             initial={'persons': [person1, person2]},
1745.             data={
1746.                 'initial-persons': [str(person1.pk), str(person2.pk)],
1747.                 'persons': [str(person1.pk), str(person2.pk)],
1748.             },
1749.         )
1750.         self.assertTrue(form.is_valid())
1751.         self.assertFalse(form.has_changed())
1752. 
1753.         form = WriterForm(
1754.             initial={'persons': [person1, person2]},
1755.             data={
1756.                 'initial-persons': [str(person1.pk), str(person2.pk)],
1757.                 'persons': [str(person2.pk)],
1758.             },
1759.         )
1760.         self.assertTrue(form.is_valid())
1761.         self.assertTrue(form.has_changed())
1762. 
1763.     def test_model_multiple_choice_field_22745(self):
1764.         """
1765.         #22745 -- Make sure that ModelMultipleChoiceField with
1766.         CheckboxSelectMultiple widget doesn't produce unnecessary db queries
1767.         when accessing its BoundField's attrs.
1768.         """
1769.         class ModelMultipleChoiceForm(forms.Form):
1770.             categories = forms.ModelMultipleChoiceField(Category.objects.all(), widget=forms.CheckboxSelectMultiple)
1771. 
1772.         form = ModelMultipleChoiceForm()
1773.         field = form['categories']  # BoundField
1774.         template = Template('{{ field.name }}{{ field }}{{ field.help_text }}')
1775.         with self.assertNumQueries(1):
1776.             template.render(Context({'field': field}))
1777. 
1778.     def test_show_hidden_initial_changed_queries_efficiently(self):
1779.         class WriterForm(forms.Form):
1780.             persons = forms.ModelMultipleChoiceField(
1781.                 show_hidden_initial=True, queryset=Writer.objects.all())
1782. 
1783.         writers = (Writer.objects.create(name=str(x)) for x in range(0, 50))
1784.         writer_pks = tuple(x.pk for x in writers)
1785.         form = WriterForm(data={'initial-persons': writer_pks})
1786.         with self.assertNumQueries(1):
1787.             self.assertTrue(form.has_changed())
1788. 
1789.     def test_clean_does_deduplicate_values(self):
1790.         class WriterForm(forms.Form):
1791.             persons = forms.ModelMultipleChoiceField(queryset=Writer.objects.all())
1792. 
1793.         person1 = Writer.objects.create(name="Person 1")
1794.         form = WriterForm(data={})
1795.         queryset = form.fields['persons'].clean([str(person1.pk)] * 50)
1796.         sql, params = queryset.query.sql_with_params()
1797.         self.assertEqual(len(params), 1)
1798. 
1799.     def test_to_field_name_with_initial_data(self):
1800.         class ArticleCategoriesForm(forms.ModelForm):
1801.             categories = forms.ModelMultipleChoiceField(Category.objects.all(), to_field_name='slug')
1802. 
1803.             class Meta:
1804.                 model = Article
1805.                 fields = ['categories']
1806. 
1807.         article = Article.objects.create(
1808.             headline='Test article',
1809.             slug='test-article',
1810.             pub_date=datetime.date(1988, 1, 4),
1811.             writer=Writer.objects.create(name='Test writer'),
1812.             article='Hello.',
1813.         )
1814.         article.categories.add(self.c2, self.c3)
1815.         form = ArticleCategoriesForm(instance=article)
1816.         self.assertCountEqual(form['categories'].value(), [self.c2.slug, self.c3.slug])
1817. 
1818. 
1819. class ModelOneToOneFieldTests(TestCase):
1820.     def test_modelform_onetoonefield(self):
1821.         class ImprovedArticleForm(forms.ModelForm):
1822.             class Meta:
1823.                 model = ImprovedArticle
1824.                 fields = '__all__'
1825. 
1826.         class ImprovedArticleWithParentLinkForm(forms.ModelForm):
1827.             class Meta:
1828.                 model = ImprovedArticleWithParentLink
1829.                 fields = '__all__'
1830. 
1831.         self.assertEqual(list(ImprovedArticleForm.base_fields), ['article'])
1832.         self.assertEqual(list(ImprovedArticleWithParentLinkForm.base_fields), [])
1833. 
1834.     def test_modelform_subclassed_model(self):
1835.         class BetterWriterForm(forms.ModelForm):
1836.             class Meta:
1837.                 # BetterWriter model is a subclass of Writer with an additional `score` field
1838.                 model = BetterWriter
1839.                 fields = '__all__'
1840. 
1841.         bw = BetterWriter.objects.create(name='Joe Better', score=10)
1842.         self.assertEqual(sorted(model_to_dict(bw)), ['id', 'name', 'score', 'writer_ptr'])
1843.         self.assertEqual(sorted(model_to_dict(bw, fields=[])), [])
1844.         self.assertEqual(sorted(model_to_dict(bw, fields=['id', 'name'])), ['id', 'name'])
1845.         self.assertEqual(sorted(model_to_dict(bw, exclude=[])), ['id', 'name', 'score', 'writer_ptr'])
1846.         self.assertEqual(sorted(model_to_dict(bw, exclude=['id', 'name'])), ['score', 'writer_ptr'])
1847. 
1848.         form = BetterWriterForm({'name': 'Some Name', 'score': 12})
1849.         self.assertTrue(form.is_valid())
1850.         bw2 = form.save()
1851.         self.assertEqual(bw2.score, 12)
1852. 
1853.     def test_onetoonefield(self):
1854.         class WriterProfileForm(forms.ModelForm):
1855.             class Meta:
1856.                 # WriterProfile has a OneToOneField to Writer
1857.                 model = WriterProfile
1858.                 fields = '__all__'
1859. 
1860.         self.w_royko = Writer.objects.create(name='Mike Royko')
1861.         self.w_woodward = Writer.objects.create(name='Bob Woodward')
1862. 
1863.         form = WriterProfileForm()
1864.         self.assertHTMLEqual(
1865.             form.as_p(),
1866.             '''<p><label for="id_writer">Writer:</label> <select name="writer" id="id_writer" required>
1867. <option value="" selected>---------</option>
1868. <option value="%s">Bob Woodward</option>
1869. <option value="%s">Mike Royko</option>
1870. </select></p>
1871. <p><label for="id_age">Age:</label> <input type="number" name="age" id="id_age" min="0" required></p>''' % (
1872.                 self.w_woodward.pk, self.w_royko.pk,
1873.             )
1874.         )
1875. 
1876.         data = {
1877.             'writer': str(self.w_woodward.pk),
1878.             'age': '65',
1879.         }
1880.         form = WriterProfileForm(data)
1881.         instance = form.save()
1882.         self.assertEqual(str(instance), 'Bob Woodward is 65')
1883. 
1884.         form = WriterProfileForm(instance=instance)
1885.         self.assertHTMLEqual(
1886.             form.as_p(),
1887.             '''<p><label for="id_writer">Writer:</label> <select name="writer" id="id_writer" required>
1888. <option value="">---------</option>
1889. <option value="%s" selected>Bob Woodward</option>
1890. <option value="%s">Mike Royko</option>
1891. </select></p>
1892. <p><label for="id_age">Age:</label>
1893. <input type="number" name="age" value="65" id="id_age" min="0" required></p>''' % (
1894.                 self.w_woodward.pk, self.w_royko.pk,
1895.             )
1896.         )
1897. 
1898.     def test_assignment_of_none(self):
1899.         class AuthorForm(forms.ModelForm):
1900.             class Meta:
1901.                 model = Author
1902.                 fields = ['publication', 'full_name']
1903. 
1904.         publication = Publication.objects.create(title="Pravda", date_published=datetime.date(1991, 8, 22))
1905.         author = Author.objects.create(publication=publication, full_name='John Doe')
1906.         form = AuthorForm({'publication': '', 'full_name': 'John Doe'}, instance=author)
1907.         self.assertTrue(form.is_valid())
1908.         self.assertIsNone(form.cleaned_data['publication'])
1909.         author = form.save()
1910.         # author object returned from form still retains original publication object
1911.         # that's why we need to retrieve it from database again
1912.         new_author = Author.objects.get(pk=author.pk)
1913.         self.assertIsNone(new_author.publication)
1914. 
1915.     def test_assignment_of_none_null_false(self):
1916.         class AuthorForm(forms.ModelForm):
1917.             class Meta:
1918.                 model = Author1
1919.                 fields = ['publication', 'full_name']
1920. 
1921.         publication = Publication.objects.create(title="Pravda", date_published=datetime.date(1991, 8, 22))
1922.         author = Author1.objects.create(publication=publication, full_name='John Doe')
1923.         form = AuthorForm({'publication': '', 'full_name': 'John Doe'}, instance=author)
1924.         self.assertFalse(form.is_valid())
1925. 
1926. 
1927. class FileAndImageFieldTests(TestCase):
1928.     def test_clean_false(self):
1929.         """
1930.         If the ``clean`` method on a non-required FileField receives False as
1931.         the data (meaning clear the field value), it returns False, regardless
1932.         of the value of ``initial``.
1933.         """
1934.         f = forms.FileField(required=False)
1935.         self.assertIs(f.clean(False), False)
1936.         self.assertIs(f.clean(False, 'initial'), False)
1937. 
1938.     def test_clean_false_required(self):
1939.         """
1940.         If the ``clean`` method on a required FileField receives False as the
1941.         data, it has the same effect as None: initial is returned if non-empty,
1942.         otherwise the validation catches the lack of a required value.
1943.         """
1944.         f = forms.FileField(required=True)
1945.         self.assertEqual(f.clean(False, 'initial'), 'initial')
1946.         with self.assertRaises(ValidationError):
1947.             f.clean(False)
1948. 
1949.     def test_full_clear(self):
1950.         """
1951.         Integration happy-path test that a model FileField can actually be set
1952.         and cleared via a ModelForm.
1953.         """
1954.         class DocumentForm(forms.ModelForm):
1955.             class Meta:
1956.                 model = Document
1957.                 fields = '__all__'
1958. 
1959.         form = DocumentForm()
1960.         self.assertIn('name="myfile"', str(form))
1961.         self.assertNotIn('myfile-clear', str(form))
1962.         form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', b'content')})
1963.         self.assertTrue(form.is_valid())
1964.         doc = form.save(commit=False)
1965.         self.assertEqual(doc.myfile.name, 'something.txt')
1966.         form = DocumentForm(instance=doc)
1967.         self.assertIn('myfile-clear', str(form))
1968.         form = DocumentForm(instance=doc, data={'myfile-clear': 'true'})
1969.         doc = form.save(commit=False)
1970.         self.assertFalse(doc.myfile)
1971. 
1972.     def test_clear_and_file_contradiction(self):
1973.         """
1974.         If the user submits a new file upload AND checks the clear checkbox,
1975.         they get a validation error, and the bound redisplay of the form still
1976.         includes the current file and the clear checkbox.
1977.         """
1978.         class DocumentForm(forms.ModelForm):
1979.             class Meta:
1980.                 model = Document
1981.                 fields = '__all__'
1982. 
1983.         form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', b'content')})
1984.         self.assertTrue(form.is_valid())
1985.         doc = form.save(commit=False)
1986.         form = DocumentForm(
1987.             instance=doc,
1988.             files={'myfile': SimpleUploadedFile('something.txt', b'content')},
1989.             data={'myfile-clear': 'true'},
1990.         )
1991.         self.assertTrue(not form.is_valid())
1992.         self.assertEqual(form.errors['myfile'],
1993.                          ['Please either submit a file or check the clear checkbox, not both.'])
1994.         rendered = str(form)
1995.         self.assertIn('something.txt', rendered)
1996.         self.assertIn('myfile-clear', rendered)
1997. 
1998.     def test_render_empty_file_field(self):
1999.         class DocumentForm(forms.ModelForm):
2000.             class Meta:


File: tests/model_forms/tests.py
Line number range: 2001 - 4000
Content:
2001.                 model = Document
2002.                 fields = '__all__'
2003. 
2004.         doc = Document.objects.create()
2005.         form = DocumentForm(instance=doc)
2006.         self.assertHTMLEqual(
2007.             str(form['myfile']),
2008.             '<input id="id_myfile" name="myfile" type="file">'
2009.         )
2010. 
2011.     def test_file_field_data(self):
2012.         # Test conditions when files is either not given or empty.
2013.         f = TextFileForm(data={'description': 'Assistance'})
2014.         self.assertFalse(f.is_valid())
2015.         f = TextFileForm(data={'description': 'Assistance'}, files={})
2016.         self.assertFalse(f.is_valid())
2017. 
2018.         # Upload a file and ensure it all works as expected.
2019.         f = TextFileForm(
2020.             data={'description': 'Assistance'},
2021.             files={'file': SimpleUploadedFile('test1.txt', b'hello world')},
2022.         )
2023.         self.assertTrue(f.is_valid())
2024.         self.assertEqual(type(f.cleaned_data['file']), SimpleUploadedFile)
2025.         instance = f.save()
2026.         self.assertEqual(instance.file.name, 'tests/test1.txt')
2027.         instance.file.delete()
2028. 
2029.         # If the previous file has been deleted, the file name can be reused
2030.         f = TextFileForm(
2031.             data={'description': 'Assistance'},
2032.             files={'file': SimpleUploadedFile('test1.txt', b'hello world')},
2033.         )
2034.         self.assertTrue(f.is_valid())
2035.         self.assertEqual(type(f.cleaned_data['file']), SimpleUploadedFile)
2036.         instance = f.save()
2037.         self.assertEqual(instance.file.name, 'tests/test1.txt')
2038. 
2039.         # Check if the max_length attribute has been inherited from the model.
2040.         f = TextFileForm(
2041.             data={'description': 'Assistance'},
2042.             files={'file': SimpleUploadedFile('test-maxlength.txt', b'hello world')},
2043.         )
2044.         self.assertFalse(f.is_valid())
2045. 
2046.         # Edit an instance that already has the file defined in the model. This will not
2047.         # save the file again, but leave it exactly as it is.
2048.         f = TextFileForm({'description': 'Assistance'}, instance=instance)
2049.         self.assertTrue(f.is_valid())
2050.         self.assertEqual(f.cleaned_data['file'].name, 'tests/test1.txt')
2051.         instance = f.save()
2052.         self.assertEqual(instance.file.name, 'tests/test1.txt')
2053. 
2054.         # Delete the current file since this is not done by Django.
2055.         instance.file.delete()
2056. 
2057.         # Override the file by uploading a new one.
2058.         f = TextFileForm(
2059.             data={'description': 'Assistance'},
2060.             files={'file': SimpleUploadedFile('test2.txt', b'hello world')},
2061.             instance=instance,
2062.         )
2063.         self.assertTrue(f.is_valid())
2064.         instance = f.save()
2065.         self.assertEqual(instance.file.name, 'tests/test2.txt')
2066. 
2067.         # Delete the current file since this is not done by Django.
2068.         instance.file.delete()
2069.         instance.delete()
2070. 
2071.     def test_filefield_required_false(self):
2072.         # Test the non-required FileField
2073.         f = TextFileForm(data={'description': 'Assistance'})
2074.         f.fields['file'].required = False
2075.         self.assertTrue(f.is_valid())
2076.         instance = f.save()
2077.         self.assertEqual(instance.file.name, '')
2078. 
2079.         f = TextFileForm(
2080.             data={'description': 'Assistance'},
2081.             files={'file': SimpleUploadedFile('test3.txt', b'hello world')},
2082.             instance=instance,
2083.         )
2084.         self.assertTrue(f.is_valid())
2085.         instance = f.save()
2086.         self.assertEqual(instance.file.name, 'tests/test3.txt')
2087. 
2088.         # Instance can be edited w/out re-uploading the file and existing file should be preserved.
2089.         f = TextFileForm({'description': 'New Description'}, instance=instance)
2090.         f.fields['file'].required = False
2091.         self.assertTrue(f.is_valid())
2092.         instance = f.save()
2093.         self.assertEqual(instance.description, 'New Description')
2094.         self.assertEqual(instance.file.name, 'tests/test3.txt')
2095. 
2096.         # Delete the current file since this is not done by Django.
2097.         instance.file.delete()
2098.         instance.delete()
2099. 
2100.     def test_custom_file_field_save(self):
2101.         """
2102.         Regression for #11149: save_form_data should be called only once
2103.         """
2104.         class CFFForm(forms.ModelForm):
2105.             class Meta:
2106.                 model = CustomFF
2107.                 fields = '__all__'
2108. 
2109.         # It's enough that the form saves without error -- the custom save routine will
2110.         # generate an AssertionError if it is called more than once during save.
2111.         form = CFFForm(data={'f': None})
2112.         form.save()
2113. 
2114.     def test_file_field_multiple_save(self):
2115.         """
2116.         Simulate a file upload and check how many times Model.save() gets
2117.         called. Test for bug #639.
2118.         """
2119.         class PhotoForm(forms.ModelForm):
2120.             class Meta:
2121.                 model = Photo
2122.                 fields = '__all__'
2123. 
2124.         # Grab an image for testing.
2125.         filename = os.path.join(os.path.dirname(__file__), 'test.png')
2126.         with open(filename, "rb") as fp:
2127.             img = fp.read()
2128. 
2129.         # Fake a POST QueryDict and FILES MultiValueDict.
2130.         data = {'title': 'Testing'}
2131.         files = {"image": SimpleUploadedFile('test.png', img, 'image/png')}
2132. 
2133.         form = PhotoForm(data=data, files=files)
2134.         p = form.save()
2135. 
2136.         try:
2137.             # Check the savecount stored on the object (see the model).
2138.             self.assertEqual(p._savecount, 1)
2139.         finally:
2140.             # Delete the "uploaded" file to avoid clogging /tmp.
2141.             p = Photo.objects.get()
2142.             p.image.delete(save=False)
2143. 
2144.     def test_file_path_field_blank(self):
2145.         """FilePathField(blank=True) includes the empty option."""
2146.         class FPForm(forms.ModelForm):
2147.             class Meta:
2148.                 model = FilePathModel
2149.                 fields = '__all__'
2150. 
2151.         form = FPForm()
2152.         self.assertEqual([name for _, name in form['path'].field.choices], ['---------', 'models.py'])
2153. 
2154.     @skipUnless(test_images, "Pillow not installed")
2155.     def test_image_field(self):
2156.         # ImageField and FileField are nearly identical, but they differ slightly when
2157.         # it comes to validation. This specifically tests that #6302 is fixed for
2158.         # both file fields and image fields.
2159. 
2160.         with open(os.path.join(os.path.dirname(__file__), 'test.png'), 'rb') as fp:
2161.             image_data = fp.read()
2162.         with open(os.path.join(os.path.dirname(__file__), 'test2.png'), 'rb') as fp:
2163.             image_data2 = fp.read()
2164. 
2165.         f = ImageFileForm(
2166.             data={'description': 'An image'},
2167.             files={'image': SimpleUploadedFile('test.png', image_data)},
2168.         )
2169.         self.assertTrue(f.is_valid())
2170.         self.assertEqual(type(f.cleaned_data['image']), SimpleUploadedFile)
2171.         instance = f.save()
2172.         self.assertEqual(instance.image.name, 'tests/test.png')
2173.         self.assertEqual(instance.width, 16)
2174.         self.assertEqual(instance.height, 16)
2175. 
2176.         # Delete the current file since this is not done by Django, but don't save
2177.         # because the dimension fields are not null=True.
2178.         instance.image.delete(save=False)
2179.         f = ImageFileForm(
2180.             data={'description': 'An image'},
2181.             files={'image': SimpleUploadedFile('test.png', image_data)},
2182.         )
2183.         self.assertTrue(f.is_valid())
2184.         self.assertEqual(type(f.cleaned_data['image']), SimpleUploadedFile)
2185.         instance = f.save()
2186.         self.assertEqual(instance.image.name, 'tests/test.png')
2187.         self.assertEqual(instance.width, 16)
2188.         self.assertEqual(instance.height, 16)
2189. 
2190.         # Edit an instance that already has the (required) image defined in the model. This will not
2191.         # save the image again, but leave it exactly as it is.
2192. 
2193.         f = ImageFileForm(data={'description': 'Look, it changed'}, instance=instance)
2194.         self.assertTrue(f.is_valid())
2195.         self.assertEqual(f.cleaned_data['image'].name, 'tests/test.png')
2196.         instance = f.save()
2197.         self.assertEqual(instance.image.name, 'tests/test.png')
2198.         self.assertEqual(instance.height, 16)
2199.         self.assertEqual(instance.width, 16)
2200. 
2201.         # Delete the current file since this is not done by Django, but don't save
2202.         # because the dimension fields are not null=True.
2203.         instance.image.delete(save=False)
2204.         # Override the file by uploading a new one.
2205. 
2206.         f = ImageFileForm(
2207.             data={'description': 'Changed it'},
2208.             files={'image': SimpleUploadedFile('test2.png', image_data2)},
2209.             instance=instance,
2210.         )
2211.         self.assertTrue(f.is_valid())
2212.         instance = f.save()
2213.         self.assertEqual(instance.image.name, 'tests/test2.png')
2214.         self.assertEqual(instance.height, 32)
2215.         self.assertEqual(instance.width, 48)
2216. 
2217.         # Delete the current file since this is not done by Django, but don't save
2218.         # because the dimension fields are not null=True.
2219.         instance.image.delete(save=False)
2220.         instance.delete()
2221. 
2222.         f = ImageFileForm(
2223.             data={'description': 'Changed it'},
2224.             files={'image': SimpleUploadedFile('test2.png', image_data2)},
2225.         )
2226.         self.assertTrue(f.is_valid())
2227.         instance = f.save()
2228.         self.assertEqual(instance.image.name, 'tests/test2.png')
2229.         self.assertEqual(instance.height, 32)
2230.         self.assertEqual(instance.width, 48)
2231. 
2232.         # Delete the current file since this is not done by Django, but don't save
2233.         # because the dimension fields are not null=True.
2234.         instance.image.delete(save=False)
2235.         instance.delete()
2236. 
2237.         # Test the non-required ImageField
2238.         # Note: In Oracle, we expect a null ImageField to return '' instead of
2239.         # None.
2240.         if connection.features.interprets_empty_strings_as_nulls:
2241.             expected_null_imagefield_repr = ''
2242.         else:
2243.             expected_null_imagefield_repr = None
2244. 
2245.         f = OptionalImageFileForm(data={'description': 'Test'})
2246.         self.assertTrue(f.is_valid())
2247.         instance = f.save()
2248.         self.assertEqual(instance.image.name, expected_null_imagefield_repr)
2249.         self.assertIsNone(instance.width)
2250.         self.assertIsNone(instance.height)
2251. 
2252.         f = OptionalImageFileForm(
2253.             data={'description': 'And a final one'},
2254.             files={'image': SimpleUploadedFile('test3.png', image_data)},
2255.             instance=instance,
2256.         )
2257.         self.assertTrue(f.is_valid())
2258.         instance = f.save()
2259.         self.assertEqual(instance.image.name, 'tests/test3.png')
2260.         self.assertEqual(instance.width, 16)
2261.         self.assertEqual(instance.height, 16)
2262. 
2263.         # Editing the instance without re-uploading the image should not affect
2264.         # the image or its width/height properties.
2265.         f = OptionalImageFileForm({'description': 'New Description'}, instance=instance)
2266.         self.assertTrue(f.is_valid())
2267.         instance = f.save()
2268.         self.assertEqual(instance.description, 'New Description')
2269.         self.assertEqual(instance.image.name, 'tests/test3.png')
2270.         self.assertEqual(instance.width, 16)
2271.         self.assertEqual(instance.height, 16)
2272. 
2273.         # Delete the current file since this is not done by Django.
2274.         instance.image.delete()
2275.         instance.delete()
2276. 
2277.         f = OptionalImageFileForm(
2278.             data={'description': 'And a final one'},
2279.             files={'image': SimpleUploadedFile('test4.png', image_data2)}
2280.         )
2281.         self.assertTrue(f.is_valid())
2282.         instance = f.save()
2283.         self.assertEqual(instance.image.name, 'tests/test4.png')
2284.         self.assertEqual(instance.width, 48)
2285.         self.assertEqual(instance.height, 32)
2286.         instance.delete()
2287.         # Test callable upload_to behavior that's dependent on the value of another field in the model
2288.         f = ImageFileForm(
2289.             data={'description': 'And a final one', 'path': 'foo'},
2290.             files={'image': SimpleUploadedFile('test4.png', image_data)},
2291.         )
2292.         self.assertTrue(f.is_valid())
2293.         instance = f.save()
2294.         self.assertEqual(instance.image.name, 'foo/test4.png')
2295.         instance.delete()
2296. 
2297.         # Editing an instance that has an image without an extension shouldn't
2298.         # fail validation. First create:
2299.         f = NoExtensionImageFileForm(
2300.             data={'description': 'An image'},
2301.             files={'image': SimpleUploadedFile('test.png', image_data)},
2302.         )
2303.         self.assertTrue(f.is_valid())
2304.         instance = f.save()
2305.         self.assertEqual(instance.image.name, 'tests/no_extension')
2306.         # Then edit:
2307.         f = NoExtensionImageFileForm(data={'description': 'Edited image'}, instance=instance)
2308.         self.assertTrue(f.is_valid())
2309. 
2310. 
2311. class ModelOtherFieldTests(SimpleTestCase):
2312.     def test_big_integer_field(self):
2313.         bif = BigIntForm({'biggie': '-9223372036854775808'})
2314.         self.assertTrue(bif.is_valid())
2315.         bif = BigIntForm({'biggie': '-9223372036854775809'})
2316.         self.assertFalse(bif.is_valid())
2317.         self.assertEqual(
2318.             bif.errors,
2319.             {'biggie': ['Ensure this value is greater than or equal to -9223372036854775808.']}
2320.         )
2321.         bif = BigIntForm({'biggie': '9223372036854775807'})
2322.         self.assertTrue(bif.is_valid())
2323.         bif = BigIntForm({'biggie': '9223372036854775808'})
2324.         self.assertFalse(bif.is_valid())
2325.         self.assertEqual(bif.errors, {'biggie': ['Ensure this value is less than or equal to 9223372036854775807.']})
2326. 
2327.     def test_url_on_modelform(self):
2328.         "Check basic URL field validation on model forms"
2329.         class HomepageForm(forms.ModelForm):
2330.             class Meta:
2331.                 model = Homepage
2332.                 fields = '__all__'
2333. 
2334.         self.assertFalse(HomepageForm({'url': 'foo'}).is_valid())
2335.         self.assertFalse(HomepageForm({'url': 'http://'}).is_valid())
2336.         self.assertFalse(HomepageForm({'url': 'http://example'}).is_valid())
2337.         self.assertFalse(HomepageForm({'url': 'http://example.'}).is_valid())
2338.         self.assertFalse(HomepageForm({'url': 'http://com.'}).is_valid())
2339. 
2340.         self.assertTrue(HomepageForm({'url': 'http://localhost'}).is_valid())
2341.         self.assertTrue(HomepageForm({'url': 'http://example.com'}).is_valid())
2342.         self.assertTrue(HomepageForm({'url': 'http://www.example.com'}).is_valid())
2343.         self.assertTrue(HomepageForm({'url': 'http://www.example.com:8000'}).is_valid())
2344.         self.assertTrue(HomepageForm({'url': 'http://www.example.com/test'}).is_valid())
2345.         self.assertTrue(HomepageForm({'url': 'http://www.example.com:8000/test'}).is_valid())
2346.         self.assertTrue(HomepageForm({'url': 'http://example.com/foo/bar'}).is_valid())
2347. 
2348.     def test_modelform_non_editable_field(self):
2349.         """
2350.         When explicitly including a non-editable field in a ModelForm, the
2351.         error message should be explicit.
2352.         """
2353.         # 'created', non-editable, is excluded by default
2354.         self.assertNotIn('created', ArticleForm().fields)
2355. 
2356.         msg = "'created' cannot be specified for Article model form as it is a non-editable field"
2357.         with self.assertRaisesMessage(FieldError, msg):
2358.             class InvalidArticleForm(forms.ModelForm):
2359.                 class Meta:
2360.                     model = Article
2361.                     fields = ('headline', 'created')
2362. 
2363.     def test_http_prefixing(self):
2364.         """
2365.         If the http:// prefix is omitted on form input, the field adds it again. (Refs #13613)
2366.         """
2367.         class HomepageForm(forms.ModelForm):
2368.             class Meta:
2369.                 model = Homepage
2370.                 fields = '__all__'
2371. 
2372.         form = HomepageForm({'url': 'example.com'})
2373.         self.assertTrue(form.is_valid())
2374.         self.assertEqual(form.cleaned_data['url'], 'http://example.com')
2375. 
2376.         form = HomepageForm({'url': 'example.com/test'})
2377.         self.assertTrue(form.is_valid())
2378.         self.assertEqual(form.cleaned_data['url'], 'http://example.com/test')
2379. 
2380. 
2381. class OtherModelFormTests(TestCase):
2382.     def test_media_on_modelform(self):
2383.         # Similar to a regular Form class you can define custom media to be used on
2384.         # the ModelForm.
2385.         f = ModelFormWithMedia()
2386.         self.assertHTMLEqual(
2387.             str(f.media),
2388.             '''<link href="/some/form/css" type="text/css" media="all" rel="stylesheet">
2389. <script src="/some/form/javascript"></script>'''
2390.         )
2391. 
2392.     def test_choices_type(self):
2393.         # Choices on CharField and IntegerField
2394.         f = ArticleForm()
2395.         with self.assertRaises(ValidationError):
2396.             f.fields['status'].clean('42')
2397. 
2398.         f = ArticleStatusForm()
2399.         with self.assertRaises(ValidationError):
2400.             f.fields['status'].clean('z')
2401. 
2402.     def test_prefetch_related_queryset(self):
2403.         """
2404.         ModelChoiceField should respect a prefetch_related() on its queryset.
2405.         """
2406.         blue = Colour.objects.create(name='blue')
2407.         red = Colour.objects.create(name='red')
2408.         multicolor_item = ColourfulItem.objects.create()
2409.         multicolor_item.colours.add(blue, red)
2410.         red_item = ColourfulItem.objects.create()
2411.         red_item.colours.add(red)
2412. 
2413.         class ColorModelChoiceField(forms.ModelChoiceField):
2414.             def label_from_instance(self, obj):
2415.                 return ', '.join(c.name for c in obj.colours.all())
2416. 
2417.         field = ColorModelChoiceField(ColourfulItem.objects.prefetch_related('colours'))
2418.         with self.assertNumQueries(3):  # would be 4 if prefetch is ignored
2419.             self.assertEqual(tuple(field.choices), (
2420.                 ('', '---------'),
2421.                 (multicolor_item.pk, 'blue, red'),
2422.                 (red_item.pk, 'red'),
2423.             ))
2424. 
2425.     def test_foreignkeys_which_use_to_field(self):
2426.         apple = Inventory.objects.create(barcode=86, name='Apple')
2427.         Inventory.objects.create(barcode=22, name='Pear')
2428.         core = Inventory.objects.create(barcode=87, name='Core', parent=apple)
2429. 
2430.         field = forms.ModelChoiceField(Inventory.objects.all(), to_field_name='barcode')
2431.         self.assertEqual(tuple(field.choices), (
2432.             ('', '---------'),
2433.             (86, 'Apple'),
2434.             (87, 'Core'),
2435.             (22, 'Pear')))
2436. 
2437.         form = InventoryForm(instance=core)
2438.         self.assertHTMLEqual(str(form['parent']), '''<select name="parent" id="id_parent">
2439. <option value="">---------</option>
2440. <option value="86" selected>Apple</option>
2441. <option value="87">Core</option>
2442. <option value="22">Pear</option>
2443. </select>''')
2444.         data = model_to_dict(core)
2445.         data['parent'] = '22'
2446.         form = InventoryForm(data=data, instance=core)
2447.         core = form.save()
2448.         self.assertEqual(core.parent.name, 'Pear')
2449. 
2450.         class CategoryForm(forms.ModelForm):
2451.             description = forms.CharField()
2452. 
2453.             class Meta:
2454.                 model = Category
2455.                 fields = ['description', 'url']
2456. 
2457.         self.assertEqual(list(CategoryForm.base_fields), ['description', 'url'])
2458. 
2459.         self.assertHTMLEqual(
2460.             str(CategoryForm()),
2461.             '''<tr><th><label for="id_description">Description:</label></th>
2462. <td><input type="text" name="description" id="id_description" required></td></tr>
2463. <tr><th><label for="id_url">The URL:</label></th>
2464. <td><input id="id_url" type="text" name="url" maxlength="40" required></td></tr>'''
2465.         )
2466.         # to_field_name should also work on ModelMultipleChoiceField ##################
2467. 
2468.         field = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name='barcode')
2469.         self.assertEqual(tuple(field.choices), ((86, 'Apple'), (87, 'Core'), (22, 'Pear')))
2470.         self.assertQuerysetEqual(field.clean([86]), ['Apple'])
2471. 
2472.         form = SelectInventoryForm({'items': [87, 22]})
2473.         self.assertTrue(form.is_valid())
2474.         self.assertEqual(len(form.cleaned_data), 1)
2475.         self.assertQuerysetEqual(form.cleaned_data['items'], ['Core', 'Pear'])
2476. 
2477.     def test_model_field_that_returns_none_to_exclude_itself_with_explicit_fields(self):
2478.         self.assertEqual(list(CustomFieldForExclusionForm.base_fields), ['name'])
2479.         self.assertHTMLEqual(
2480.             str(CustomFieldForExclusionForm()),
2481.             '''<tr><th><label for="id_name">Name:</label></th>
2482. <td><input id="id_name" type="text" name="name" maxlength="10" required></td></tr>'''
2483.         )
2484. 
2485.     def test_iterable_model_m2m(self):
2486.         class ColourfulItemForm(forms.ModelForm):
2487.             class Meta:
2488.                 model = ColourfulItem
2489.                 fields = '__all__'
2490. 
2491.         colour = Colour.objects.create(name='Blue')
2492.         form = ColourfulItemForm()
2493.         self.maxDiff = 1024
2494.         self.assertHTMLEqual(
2495.             form.as_p(),
2496.             """<p><label for="id_name">Name:</label> <input id="id_name" type="text" name="name" maxlength="50" required></p>
2497.         <p><label for="id_colours">Colours:</label>
2498.         <select multiple name="colours" id="id_colours" required>
2499.         <option value="%(blue_pk)s">Blue</option>
2500.         </select></p>"""
2501.             % {'blue_pk': colour.pk})
2502. 
2503.     def test_callable_field_default(self):
2504.         class PublicationDefaultsForm(forms.ModelForm):
2505.             class Meta:
2506.                 model = PublicationDefaults
2507.                 fields = ('title', 'date_published', 'mode', 'category')
2508. 
2509.         self.maxDiff = 2000
2510.         form = PublicationDefaultsForm()
2511.         today_str = str(datetime.date.today())
2512.         self.assertHTMLEqual(
2513.             form.as_p(),
2514.             """
2515.             <p><label for="id_title">Title:</label>
2516.                 <input id="id_title" maxlength="30" name="title" type="text" required></p>
2517.             <p><label for="id_date_published">Date published:</label>
2518.                 <input id="id_date_published" name="date_published" type="text" value="{0}" required>
2519.                 <input id="initial-id_date_published" name="initial-date_published" type="hidden" value="{0}"></p>
2520.             <p><label for="id_mode">Mode:</label> <select id="id_mode" name="mode">
2521.                 <option value="di" selected>direct</option>
2522.                 <option value="de">delayed</option></select>
2523.                 <input id="initial-id_mode" name="initial-mode" type="hidden" value="di"></p>
2524.            <p><label for="id_category">Category:</label> <select id="id_category" name="category">
2525.                 <option value="1">Games</option>
2526.                 <option value="2">Comics</option>
2527.                 <option value="3" selected>Novel</option></select>
2528.                 <input id="initial-id_category" name="initial-category" type="hidden" value="3">
2529.             """.format(today_str)
2530.         )
2531.         empty_data = {
2532.             'title': '',
2533.             'date_published': today_str,
2534.             'initial-date_published': today_str,
2535.             'mode': 'di',
2536.             'initial-mode': 'di',
2537.             'category': '3',
2538.             'initial-category': '3',
2539.         }
2540.         bound_form = PublicationDefaultsForm(empty_data)
2541.         self.assertFalse(bound_form.has_changed())
2542. 
2543. 
2544. class ModelFormCustomErrorTests(SimpleTestCase):
2545.     def test_custom_error_messages(self):
2546.         data = {'name1': '@#$!!**@#$', 'name2': '@#$!!**@#$'}
2547.         errors = CustomErrorMessageForm(data).errors
2548.         self.assertHTMLEqual(
2549.             str(errors['name1']),
2550.             '<ul class="errorlist"><li>Form custom error message.</li></ul>'
2551.         )
2552.         self.assertHTMLEqual(
2553.             str(errors['name2']),
2554.             '<ul class="errorlist"><li>Model custom error message.</li></ul>'
2555.         )
2556. 
2557.     def test_model_clean_error_messages(self):
2558.         data = {'name1': 'FORBIDDEN_VALUE', 'name2': 'ABC'}
2559.         form = CustomErrorMessageForm(data)
2560.         self.assertFalse(form.is_valid())
2561.         self.assertHTMLEqual(
2562.             str(form.errors['name1']),
2563.             '<ul class="errorlist"><li>Model.clean() error messages.</li></ul>'
2564.         )
2565.         data = {'name1': 'FORBIDDEN_VALUE2', 'name2': 'ABC'}
2566.         form = CustomErrorMessageForm(data)
2567.         self.assertFalse(form.is_valid())
2568.         self.assertHTMLEqual(
2569.             str(form.errors['name1']),
2570.             '<ul class="errorlist"><li>Model.clean() error messages (simpler syntax).</li></ul>'
2571.         )
2572.         data = {'name1': 'GLOBAL_ERROR', 'name2': 'ABC'}
2573.         form = CustomErrorMessageForm(data)
2574.         self.assertFalse(form.is_valid())
2575.         self.assertEqual(form.errors['__all__'], ['Global error message.'])
2576. 
2577. 
2578. class CustomCleanTests(TestCase):
2579.     def test_override_clean(self):
2580.         """
2581.         Regression for #12596: Calling super from ModelForm.clean() should be
2582.         optional.
2583.         """
2584.         class TripleFormWithCleanOverride(forms.ModelForm):
2585.             class Meta:
2586.                 model = Triple
2587.                 fields = '__all__'
2588. 
2589.             def clean(self):
2590.                 if not self.cleaned_data['left'] == self.cleaned_data['right']:
2591.                     raise forms.ValidationError('Left and right should be equal')
2592.                 return self.cleaned_data
2593. 
2594.         form = TripleFormWithCleanOverride({'left': 1, 'middle': 2, 'right': 1})
2595.         self.assertTrue(form.is_valid())
2596.         # form.instance.left will be None if the instance was not constructed
2597.         # by form.full_clean().
2598.         self.assertEqual(form.instance.left, 1)
2599. 
2600.     def test_model_form_clean_applies_to_model(self):
2601.         """
2602.         Regression test for #12960. Make sure the cleaned_data returned from
2603.         ModelForm.clean() is applied to the model instance.
2604.         """
2605.         class CategoryForm(forms.ModelForm):
2606.             class Meta:
2607.                 model = Category
2608.                 fields = '__all__'
2609. 
2610.             def clean(self):
2611.                 self.cleaned_data['name'] = self.cleaned_data['name'].upper()
2612.                 return self.cleaned_data
2613. 
2614.         data = {'name': 'Test', 'slug': 'test', 'url': '/test'}
2615.         form = CategoryForm(data)
2616.         category = form.save()
2617.         self.assertEqual(category.name, 'TEST')
2618. 
2619. 
2620. class ModelFormInheritanceTests(SimpleTestCase):
2621.     def test_form_subclass_inheritance(self):
2622.         class Form(forms.Form):
2623.             age = forms.IntegerField()
2624. 
2625.         class ModelForm(forms.ModelForm, Form):
2626.             class Meta:
2627.                 model = Writer
2628.                 fields = '__all__'
2629. 
2630.         self.assertEqual(list(ModelForm().fields), ['name', 'age'])
2631. 
2632.     def test_field_removal(self):
2633.         class ModelForm(forms.ModelForm):
2634.             class Meta:
2635.                 model = Writer
2636.                 fields = '__all__'
2637. 
2638.         class Mixin:
2639.             age = None
2640. 
2641.         class Form(forms.Form):
2642.             age = forms.IntegerField()
2643. 
2644.         class Form2(forms.Form):
2645.             foo = forms.IntegerField()
2646. 
2647.         self.assertEqual(list(ModelForm().fields), ['name'])
2648.         self.assertEqual(list(type('NewForm', (Mixin, Form), {})().fields), [])
2649.         self.assertEqual(list(type('NewForm', (Form2, Mixin, Form), {})().fields), ['foo'])
2650.         self.assertEqual(list(type('NewForm', (Mixin, ModelForm, Form), {})().fields), ['name'])
2651.         self.assertEqual(list(type('NewForm', (ModelForm, Mixin, Form), {})().fields), ['name'])
2652.         self.assertEqual(list(type('NewForm', (ModelForm, Form, Mixin), {})().fields), ['name', 'age'])
2653.         self.assertEqual(list(type('NewForm', (ModelForm, Form), {'age': None})().fields), ['name'])
2654. 
2655.     def test_field_removal_name_clashes(self):
2656.         """
2657.         Form fields can be removed in subclasses by setting them to None
2658.         (#22510).
2659.         """
2660.         class MyForm(forms.ModelForm):
2661.             media = forms.CharField()
2662. 
2663.             class Meta:
2664.                 model = Writer
2665.                 fields = '__all__'
2666. 
2667.         class SubForm(MyForm):
2668.             media = None
2669. 
2670.         self.assertIn('media', MyForm().fields)
2671.         self.assertNotIn('media', SubForm().fields)
2672.         self.assertTrue(hasattr(MyForm, 'media'))
2673.         self.assertTrue(hasattr(SubForm, 'media'))
2674. 
2675. 
2676. class StumpJokeForm(forms.ModelForm):
2677.     class Meta:
2678.         model = StumpJoke
2679.         fields = '__all__'
2680. 
2681. 
2682. class CustomFieldWithQuerysetButNoLimitChoicesTo(forms.Field):
2683.     queryset = 42
2684. 
2685. 
2686. class StumpJokeWithCustomFieldForm(forms.ModelForm):
2687.     custom = CustomFieldWithQuerysetButNoLimitChoicesTo()
2688. 
2689.     class Meta:
2690.         model = StumpJoke
2691.         fields = ()
2692. 
2693. 
2694. class LimitChoicesToTests(TestCase):
2695.     """
2696.     Tests the functionality of ``limit_choices_to``.
2697.     """
2698.     @classmethod
2699.     def setUpTestData(cls):
2700.         cls.threepwood = Character.objects.create(
2701.             username='threepwood',
2702.             last_action=datetime.datetime.today() + datetime.timedelta(days=1),
2703.         )
2704.         cls.marley = Character.objects.create(
2705.             username='marley',
2706.             last_action=datetime.datetime.today() - datetime.timedelta(days=1),
2707.         )
2708. 
2709.     def test_limit_choices_to_callable_for_fk_rel(self):
2710.         """
2711.         A ForeignKey can use limit_choices_to as a callable (#2554).
2712.         """
2713.         stumpjokeform = StumpJokeForm()
2714.         self.assertSequenceEqual(stumpjokeform.fields['most_recently_fooled'].queryset, [self.threepwood])
2715. 
2716.     def test_limit_choices_to_callable_for_m2m_rel(self):
2717.         """
2718.         A ManyToManyField can use limit_choices_to as a callable (#2554).
2719.         """
2720.         stumpjokeform = StumpJokeForm()
2721.         self.assertSequenceEqual(stumpjokeform.fields['most_recently_fooled'].queryset, [self.threepwood])
2722. 
2723.     def test_custom_field_with_queryset_but_no_limit_choices_to(self):
2724.         """
2725.         A custom field with a `queryset` attribute but no `limit_choices_to`
2726.         works (#23795).
2727.         """
2728.         f = StumpJokeWithCustomFieldForm()
2729.         self.assertEqual(f.fields['custom'].queryset, 42)
2730. 
2731.     def test_fields_for_model_applies_limit_choices_to(self):
2732.         fields = fields_for_model(StumpJoke, ['has_fooled_today'])
2733.         self.assertSequenceEqual(fields['has_fooled_today'].queryset, [self.threepwood])
2734. 
2735.     def test_callable_called_each_time_form_is_instantiated(self):
2736.         field = StumpJokeForm.base_fields['most_recently_fooled']
2737.         with mock.patch.object(field, 'limit_choices_to') as today_callable_dict:
2738.             StumpJokeForm()
2739.             self.assertEqual(today_callable_dict.call_count, 1)
2740.             StumpJokeForm()
2741.             self.assertEqual(today_callable_dict.call_count, 2)
2742.             StumpJokeForm()
2743.             self.assertEqual(today_callable_dict.call_count, 3)
2744. 
2745. 
2746. class FormFieldCallbackTests(SimpleTestCase):
2747. 
2748.     def test_baseform_with_widgets_in_meta(self):
2749.         """Regression for #13095: Using base forms with widgets defined in Meta should not raise errors."""
2750.         widget = forms.Textarea()
2751. 
2752.         class BaseForm(forms.ModelForm):
2753.             class Meta:
2754.                 model = Person
2755.                 widgets = {'name': widget}
2756.                 fields = "__all__"
2757. 
2758.         Form = modelform_factory(Person, form=BaseForm)
2759.         self.assertIsInstance(Form.base_fields['name'].widget, forms.Textarea)
2760. 
2761.     def test_factory_with_widget_argument(self):
2762.         """ Regression for #15315: modelform_factory should accept widgets
2763.             argument
2764.         """
2765.         widget = forms.Textarea()
2766. 
2767.         # Without a widget should not set the widget to textarea
2768.         Form = modelform_factory(Person, fields="__all__")
2769.         self.assertNotEqual(Form.base_fields['name'].widget.__class__, forms.Textarea)
2770. 
2771.         # With a widget should not set the widget to textarea
2772.         Form = modelform_factory(Person, fields="__all__", widgets={'name': widget})
2773.         self.assertEqual(Form.base_fields['name'].widget.__class__, forms.Textarea)
2774. 
2775.     def test_modelform_factory_without_fields(self):
2776.         """ Regression for #19733 """
2777.         message = (
2778.             "Calling modelform_factory without defining 'fields' or 'exclude' "
2779.             "explicitly is prohibited."
2780.         )
2781.         with self.assertRaisesMessage(ImproperlyConfigured, message):
2782.             modelform_factory(Person)
2783. 
2784.     def test_modelform_factory_with_all_fields(self):
2785.         """ Regression for #19733 """
2786.         form = modelform_factory(Person, fields="__all__")
2787.         self.assertEqual(list(form.base_fields), ["name"])
2788. 
2789.     def test_custom_callback(self):
2790.         """A custom formfield_callback is used if provided"""
2791.         callback_args = []
2792. 
2793.         def callback(db_field, **kwargs):
2794.             callback_args.append((db_field, kwargs))
2795.             return db_field.formfield(**kwargs)
2796. 
2797.         widget = forms.Textarea()
2798. 
2799.         class BaseForm(forms.ModelForm):
2800.             class Meta:
2801.                 model = Person
2802.                 widgets = {'name': widget}
2803.                 fields = "__all__"
2804. 
2805.         modelform_factory(Person, form=BaseForm, formfield_callback=callback)
2806.         id_field, name_field = Person._meta.fields
2807. 
2808.         self.assertEqual(callback_args, [(id_field, {}), (name_field, {'widget': widget})])
2809. 
2810.     def test_bad_callback(self):
2811.         # A bad callback provided by user still gives an error
2812.         with self.assertRaises(TypeError):
2813.             modelform_factory(Person, fields="__all__", formfield_callback='not a function or callable')
2814. 
2815.     def test_inherit_after_custom_callback(self):
2816.         def callback(db_field, **kwargs):
2817.             if isinstance(db_field, models.CharField):
2818.                 return forms.CharField(widget=forms.Textarea)
2819.             return db_field.formfield(**kwargs)
2820. 
2821.         class BaseForm(forms.ModelForm):
2822.             class Meta:
2823.                 model = Person
2824.                 fields = '__all__'
2825. 
2826.         NewForm = modelform_factory(Person, form=BaseForm, formfield_callback=callback)
2827. 
2828.         class InheritedForm(NewForm):
2829.             pass
2830. 
2831.         for name in NewForm.base_fields:
2832.             self.assertEqual(
2833.                 type(InheritedForm.base_fields[name].widget),
2834.                 type(NewForm.base_fields[name].widget)
2835.             )
2836. 
2837. 
2838. class LocalizedModelFormTest(TestCase):
2839.     def test_model_form_applies_localize_to_some_fields(self):
2840.         class PartiallyLocalizedTripleForm(forms.ModelForm):
2841.             class Meta:
2842.                 model = Triple
2843.                 localized_fields = ('left', 'right',)
2844.                 fields = '__all__'
2845. 
2846.         f = PartiallyLocalizedTripleForm({'left': 10, 'middle': 10, 'right': 10})
2847.         self.assertTrue(f.is_valid())
2848.         self.assertTrue(f.fields['left'].localize)
2849.         self.assertFalse(f.fields['middle'].localize)
2850.         self.assertTrue(f.fields['right'].localize)
2851. 
2852.     def test_model_form_applies_localize_to_all_fields(self):
2853.         class FullyLocalizedTripleForm(forms.ModelForm):
2854.             class Meta:
2855.                 model = Triple
2856.                 localized_fields = '__all__'
2857.                 fields = '__all__'
2858. 
2859.         f = FullyLocalizedTripleForm({'left': 10, 'middle': 10, 'right': 10})
2860.         self.assertTrue(f.is_valid())
2861.         self.assertTrue(f.fields['left'].localize)
2862.         self.assertTrue(f.fields['middle'].localize)
2863.         self.assertTrue(f.fields['right'].localize)
2864. 
2865.     def test_model_form_refuses_arbitrary_string(self):
2866.         msg = (
2867.             "BrokenLocalizedTripleForm.Meta.localized_fields "
2868.             "cannot be a string. Did you mean to type: ('foo',)?"
2869.         )
2870.         with self.assertRaisesMessage(TypeError, msg):
2871.             class BrokenLocalizedTripleForm(forms.ModelForm):
2872.                 class Meta:
2873.                     model = Triple
2874.                     localized_fields = "foo"
2875. 
2876. 
2877. class CustomMetaclass(ModelFormMetaclass):
2878.     def __new__(cls, name, bases, attrs):
2879.         new = super().__new__(cls, name, bases, attrs)
2880.         new.base_fields = {}
2881.         return new
2882. 
2883. 
2884. class CustomMetaclassForm(forms.ModelForm, metaclass=CustomMetaclass):
2885.     pass
2886. 
2887. 
2888. class CustomMetaclassTestCase(SimpleTestCase):
2889.     def test_modelform_factory_metaclass(self):
2890.         new_cls = modelform_factory(Person, fields="__all__", form=CustomMetaclassForm)
2891.         self.assertEqual(new_cls.base_fields, {})
2892. 
2893. 
2894. class StrictAssignmentTests(SimpleTestCase):
2895.     """
2896.     Should a model do anything special with __setattr__() or descriptors which
2897.     raise a ValidationError, a model form should catch the error (#24706).
2898.     """
2899. 
2900.     def test_setattr_raises_validation_error_field_specific(self):
2901.         """
2902.         A model ValidationError using the dict form should put the error
2903.         message into the correct key of form.errors.
2904.         """
2905.         form_class = modelform_factory(model=StrictAssignmentFieldSpecific, fields=['title'])
2906.         form = form_class(data={'title': 'testing setattr'}, files=None)
2907.         # This line turns on the ValidationError; it avoids the model erroring
2908.         # when its own __init__() is called when creating form.instance.
2909.         form.instance._should_error = True
2910.         self.assertFalse(form.is_valid())
2911.         self.assertEqual(form.errors, {
2912.             'title': ['Cannot set attribute', 'This field cannot be blank.']
2913.         })
2914. 
2915.     def test_setattr_raises_validation_error_non_field(self):
2916.         """
2917.         A model ValidationError not using the dict form should put the error
2918.         message into __all__ (i.e. non-field errors) on the form.
2919.         """
2920.         form_class = modelform_factory(model=StrictAssignmentAll, fields=['title'])
2921.         form = form_class(data={'title': 'testing setattr'}, files=None)
2922.         # This line turns on the ValidationError; it avoids the model erroring
2923.         # when its own __init__() is called when creating form.instance.
2924.         form.instance._should_error = True
2925.         self.assertFalse(form.is_valid())
2926.         self.assertEqual(form.errors, {
2927.             '__all__': ['Cannot set attribute'],
2928.             'title': ['This field cannot be blank.']
2929.         })
2930. 
2931. 
2932. class ModelToDictTests(TestCase):
2933.     def test_many_to_many(self):
2934.         """Data for a ManyToManyField is a list rather than a lazy QuerySet."""
2935.         blue = Colour.objects.create(name='blue')
2936.         red = Colour.objects.create(name='red')
2937.         item = ColourfulItem.objects.create()
2938.         item.colours.set([blue])
2939.         data = model_to_dict(item)['colours']
2940.         self.assertEqual(data, [blue])
2941.         item.colours.set([red])
2942.         # If data were a QuerySet, it would be reevaluated here and give "red"
2943.         # instead of the original value.
2944.         self.assertEqual(data, [blue])

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 16:26:09,131 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user explicitly requested the full content of 'tests/model_forms/tests.py'. This context block encompasses the entire file content provided in the history, from line 1 to line 2944, which directly fulfills the user's query.", relative_path='tests/model_forms/tests.py', start_line=1, end_line=2944)]
2025-12-21 16:26:09,137 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of tests/model_forms/tests.py
2025-12-21 16:26:09,137 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 16:26:09,137 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 16:26:09,137 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 2 existing contexts
2025-12-21 16:26:09,137 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-21 16:26:09,138 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   └── test_sqlite.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: ModelForm RadioSelect widget for foreign keys should not present a blank option if blank=False on the model

Description: Description
	
Unlike the select widget, where a blank option is idiomatic even for required fields, radioselect has an inherent unfilled state that makes the "-------" option look suspiciously like a valid choice.
class TestRun(models.Model):
	data_file = models.ForeignKey(BatchData, on_delete=models.SET_NULL, null=True, blank=False)
class TestRunForm(ModelForm):
	class Meta:
		model = TestRun
		fields = ['data_file']
		widgets = {'data_file': RadioSelect()}
renders {{test_run_form.data_file}} as
<ul id="id_data_file">
 <li><label for="id_data_file_0">
	<input checked="checked" id="id_data_file_0" name="data_file" type="radio" value=""> ---------
 </label></li>
 <li><label for="id_data_file_1">
	<input id="id_data_file_1" name="data_file" type="radio" value="1"> First Data File
 </label></li>
</ul>
Instead, there should be no checked option for RadioSelect's <input> tags when rendering a new form from a model if blank is not a valid selection.

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index dafc11f995..23d2f29c97 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1185,7 +1185,16 @@ class ModelChoiceField(ChoiceField):
                  required=True, widget=None, label=None, initial=None,
                  help_text='', to_field_name=None, limit_choices_to=None,
                  **kwargs):
-        if required and (initial is not None):
+        # Determine empty_label considering widget type. For required fields rendered
+        # with radios and no initial/default, don't include an empty choice.
+        is_radio = False
+        if widget is not None:
+            w = widget
+            if isinstance(w, type):
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+            else:
+                is_radio = getattr(w, 'input_type', None) == 'radio'
+        if required and ((initial is not None) or (initial is None and is_radio)):
             self.empty_label = None
         else:
             self.empty_label = empty_label
diff --git a/docs/ref/forms/fields.txt b/docs/ref/forms/fields.txt
index d2a0550a47..f6210b08f5 100644
--- a/docs/ref/forms/fields.txt
+++ b/docs/ref/forms/fields.txt
@@ -1178,7 +1178,9 @@ generating choices. See :ref:`iterating-relationship-choices` for details.
         empty choice at the top of the list. You can change the text of this
         label (which is ``"---------"`` by default) with the ``empty_label``
         attribute, or you can disable the empty label entirely by setting
-        ``empty_label`` to ``None``::
+        ``empty_label`` to ``None``. When using a ``RadioSelect`` widget on a
+        required field without an initial value, the empty choice is not rendered
+        and no option is pre-selected::
 
             # A custom empty label
             field1 = forms.ModelChoiceField(queryset=..., empty_label="(Nothing)")
diff --git a/docs/topics/forms/modelforms.txt b/docs/topics/forms/modelforms.txt
index c3e6e5c99e..bc2b0213ff 100644
--- a/docs/topics/forms/modelforms.txt
+++ b/docs/topics/forms/modelforms.txt
@@ -154,10 +154,12 @@ In addition, each generated form field has attributes set as follows:
 * If the model field has ``choices`` set, then the form field's ``widget``
   will be set to ``Select``, with choices coming from the model field's
   ``choices``. The choices will normally include the blank choice which is
-  selected by default. If the field is required, this forces the user to
-  make a selection. The blank choice will not be included if the model
-  field has ``blank=False`` and an explicit ``default`` value (the
-  ``default`` value will be initially selected instead).
+  selected by default when using a ``Select`` widget. If the field is
+  required, this forces the user to make a selection. The blank choice will
+  not be included if the model field has ``blank=False`` and an explicit
+  ``default`` value (the ``default`` value will be initially selected instead).
+  When using a ``RadioSelect`` widget on a required field without an initial
+  value, no blank radio option is rendered and no option is pre-selected.
 
 Finally, note that you can override the form field used for a given model
 field. See `Overriding the default fields`_ below.


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/models.py`.
Extra Requirements: 
Purpose: I need to analyze these files to identify at least three existing test cases that demonstrate how `ModelChoiceField` is tested with various configurations, which will help in finding tests analogous to the bug report.

Previous refined query 2:
Essential Query: Please provide the full content of tests/model_forms/tests.py
Extra Requirements: 
Purpose: This file is needed to find test cases that cover the auto-generation of form fields within a `ModelForm`, which is central to the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/model_forms/models.py
Line number range: 1 - 462
Content:
1. import datetime
2. import os
3. import tempfile
4. import uuid
5. 
6. from django.core import validators
7. from django.core.exceptions import ValidationError
8. from django.core.files.storage import FileSystemStorage
9. from django.db import models
10. 
11. temp_storage_dir = tempfile.mkdtemp()
12. temp_storage = FileSystemStorage(temp_storage_dir)
13. 
14. 
15. class Person(models.Model):
16.     name = models.CharField(max_length=100)
17. 
18. 
19. class Category(models.Model):
20.     name = models.CharField(max_length=20)
21.     slug = models.SlugField(max_length=20)
22.     url = models.CharField('The URL', max_length=40)
23. 
24.     def __str__(self):
25.         return self.name
26. 
27.     def __repr__(self):
28.         return self.__str__()
29. 
30. 
31. class Writer(models.Model):
32.     name = models.CharField(max_length=50, help_text='Use both first and last names.')
33. 
34.     class Meta:
35.         ordering = ('name',)
36. 
37.     def __str__(self):
38.         return self.name
39. 
40. 
41. class Article(models.Model):
42.     ARTICLE_STATUS = (
43.         (1, 'Draft'),
44.         (2, 'Pending'),
45.         (3, 'Live'),
46.     )
47.     headline = models.CharField(max_length=50)
48.     slug = models.SlugField()
49.     pub_date = models.DateField()
50.     created = models.DateField(editable=False)
51.     writer = models.ForeignKey(Writer, models.CASCADE)
52.     article = models.TextField()
53.     categories = models.ManyToManyField(Category, blank=True)
54.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)
55. 
56.     def save(self, *args, **kwargs):
57.         if not self.id:
58.             self.created = datetime.date.today()
59.         return super().save(*args, **kwargs)
60. 
61.     def __str__(self):
62.         return self.headline
63. 
64. 
65. class ImprovedArticle(models.Model):
66.     article = models.OneToOneField(Article, models.CASCADE)
67. 
68. 
69. class ImprovedArticleWithParentLink(models.Model):
70.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)
71. 
72. 
73. class BetterWriter(Writer):
74.     score = models.IntegerField()
75. 
76. 
77. class Publication(models.Model):
78.     title = models.CharField(max_length=30)
79.     date_published = models.DateField()
80. 
81.     def __str__(self):
82.         return self.title
83. 
84. 
85. def default_mode():
86.     return 'di'
87. 
88. 
89. def default_category():
90.     return 3
91. 
92. 
93. class PublicationDefaults(models.Model):
94.     MODE_CHOICES = (('di', 'direct'), ('de', 'delayed'))
95.     CATEGORY_CHOICES = ((1, 'Games'), (2, 'Comics'), (3, 'Novel'))
96.     title = models.CharField(max_length=30)
97.     date_published = models.DateField(default=datetime.date.today)
98.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))
99.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)
100.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)
101.     active = models.BooleanField(default=True)
102.     file = models.FileField(default='default.txt')
103. 
104. 
105. class Author(models.Model):
106.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)
107.     full_name = models.CharField(max_length=255)
108. 
109. 
110. class Author1(models.Model):
111.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)
112.     full_name = models.CharField(max_length=255)
113. 
114. 
115. class WriterProfile(models.Model):
116.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)
117.     age = models.PositiveIntegerField()
118. 
119.     def __str__(self):
120.         return "%s is %s" % (self.writer, self.age)
121. 
122. 
123. class Document(models.Model):
124.     myfile = models.FileField(upload_to='unused', blank=True)
125. 
126. 
127. class TextFile(models.Model):
128.     description = models.CharField(max_length=20)
129.     file = models.FileField(storage=temp_storage, upload_to='tests', max_length=15)
130. 
131.     def __str__(self):
132.         return self.description
133. 
134. 
135. class CustomFileField(models.FileField):
136.     def save_form_data(self, instance, data):
137.         been_here = getattr(self, 'been_saved', False)
138.         assert not been_here, "save_form_data called more than once"
139.         setattr(self, 'been_saved', True)
140. 
141. 
142. class CustomFF(models.Model):
143.     f = CustomFileField(upload_to='unused', blank=True)
144. 
145. 
146. class FilePathModel(models.Model):
147.     path = models.FilePathField(path=os.path.dirname(__file__), match='models.py', blank=True)
148. 
149. 
150. try:
151.     from PIL import Image  # NOQA: detect if Pillow is installed
152. 
153.     test_images = True
154. 
155.     class ImageFile(models.Model):
156.         def custom_upload_path(self, filename):
157.             path = self.path or 'tests'
158.             return '%s/%s' % (path, filename)
159. 
160.         description = models.CharField(max_length=20)
161. 
162.         # Deliberately put the image field *after* the width/height fields to
163.         # trigger the bug in #10404 with width/height not getting assigned.
164.         width = models.IntegerField(editable=False)
165.         height = models.IntegerField(editable=False)
166.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
167.                                   width_field='width', height_field='height')
168.         path = models.CharField(max_length=16, blank=True, default='')
169. 
170.         def __str__(self):
171.             return self.description
172. 
173.     class OptionalImageFile(models.Model):
174.         def custom_upload_path(self, filename):
175.             path = self.path or 'tests'
176.             return '%s/%s' % (path, filename)
177. 
178.         description = models.CharField(max_length=20)
179.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
180.                                   width_field='width', height_field='height',
181.                                   blank=True, null=True)
182.         width = models.IntegerField(editable=False, null=True)
183.         height = models.IntegerField(editable=False, null=True)
184.         path = models.CharField(max_length=16, blank=True, default='')
185. 
186.         def __str__(self):
187.             return self.description
188. 
189.     class NoExtensionImageFile(models.Model):
190.         def upload_to(self, filename):
191.             return 'tests/no_extension'
192. 
193.         description = models.CharField(max_length=20)
194.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)
195. 
196.         def __str__(self):
197.             return self.description
198. 
199. except ImportError:
200.     test_images = False
201. 
202. 
203. class Homepage(models.Model):
204.     url = models.URLField()
205. 
206. 
207. class Product(models.Model):
208.     slug = models.SlugField(unique=True)
209. 
210.     def __str__(self):
211.         return self.slug
212. 
213. 
214. class Price(models.Model):
215.     price = models.DecimalField(max_digits=10, decimal_places=2)
216.     quantity = models.PositiveIntegerField()
217. 
218.     class Meta:
219.         unique_together = (('price', 'quantity'),)
220. 
221.     def __str__(self):
222.         return "%s for %s" % (self.quantity, self.price)
223. 
224. 
225. class Triple(models.Model):
226.     left = models.IntegerField()
227.     middle = models.IntegerField()
228.     right = models.IntegerField()
229. 
230.     class Meta:
231.         unique_together = (('left', 'middle'), ('middle', 'right'))
232. 
233. 
234. class ArticleStatus(models.Model):
235.     ARTICLE_STATUS_CHAR = (
236.         ('d', 'Draft'),
237.         ('p', 'Pending'),
238.         ('l', 'Live'),
239.     )
240.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)
241. 
242. 
243. class Inventory(models.Model):
244.     barcode = models.PositiveIntegerField(unique=True)
245.     parent = models.ForeignKey('self', models.SET_NULL, to_field='barcode', blank=True, null=True)
246.     name = models.CharField(blank=False, max_length=20)
247. 
248.     class Meta:
249.         ordering = ('name',)
250. 
251.     def __str__(self):
252.         return self.name
253. 
254.     def __repr__(self):
255.         return self.__str__()
256. 
257. 
258. class Book(models.Model):
259.     title = models.CharField(max_length=40)
260.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)
261.     special_id = models.IntegerField(blank=True, null=True, unique=True)
262. 
263.     class Meta:
264.         unique_together = ('title', 'author')
265. 
266. 
267. class BookXtra(models.Model):
268.     isbn = models.CharField(max_length=16, unique=True)
269.     suffix1 = models.IntegerField(blank=True, default=0)
270.     suffix2 = models.IntegerField(blank=True, default=0)
271. 
272.     class Meta:
273.         unique_together = (('suffix1', 'suffix2'))
274.         abstract = True
275. 
276. 
277. class DerivedBook(Book, BookXtra):
278.     pass
279. 
280. 
281. class ExplicitPK(models.Model):
282.     key = models.CharField(max_length=20, primary_key=True)
283.     desc = models.CharField(max_length=20, blank=True, unique=True)
284. 
285.     class Meta:
286.         unique_together = ('key', 'desc')
287. 
288.     def __str__(self):
289.         return self.key
290. 
291. 
292. class Post(models.Model):
293.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
294.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
295.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
296.     posted = models.DateField()
297. 
298.     def __str__(self):
299.         return self.title
300. 
301. 
302. class DateTimePost(models.Model):
303.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
304.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
305.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
306.     posted = models.DateTimeField(editable=False)
307. 
308.     def __str__(self):
309.         return self.title
310. 
311. 
312. class DerivedPost(Post):
313.     pass
314. 
315. 
316. class BigInt(models.Model):
317.     biggie = models.BigIntegerField()
318. 
319.     def __str__(self):
320.         return str(self.biggie)
321. 
322. 
323. class MarkupField(models.CharField):
324.     def __init__(self, *args, **kwargs):
325.         kwargs["max_length"] = 20
326.         super().__init__(*args, **kwargs)
327. 
328.     def formfield(self, **kwargs):
329.         # don't allow this field to be used in form (real use-case might be
330.         # that you know the markup will always be X, but it is among an app
331.         # that allows the user to say it could be something else)
332.         # regressed at r10062
333.         return None
334. 
335. 
336. class CustomFieldForExclusionModel(models.Model):
337.     name = models.CharField(max_length=10)
338.     markup = MarkupField()
339. 
340. 
341. class FlexibleDatePost(models.Model):
342.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
343.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
344.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
345.     posted = models.DateField(blank=True, null=True)
346. 
347. 
348. class Colour(models.Model):
349.     name = models.CharField(max_length=50)
350. 
351.     def __iter__(self):
352.         yield from range(5)
353. 
354.     def __str__(self):
355.         return self.name
356. 
357. 
358. class ColourfulItem(models.Model):
359.     name = models.CharField(max_length=50)
360.     colours = models.ManyToManyField(Colour)
361. 
362. 
363. class CustomErrorMessage(models.Model):
364.     name1 = models.CharField(
365.         max_length=50,
366.         validators=[validators.validate_slug],
367.         error_messages={'invalid': 'Model custom error message.'},
368.     )
369.     name2 = models.CharField(
370.         max_length=50,
371.         validators=[validators.validate_slug],
372.         error_messages={'invalid': 'Model custom error message.'},
373.     )
374. 
375.     def clean(self):
376.         if self.name1 == 'FORBIDDEN_VALUE':
377.             raise ValidationError({'name1': [ValidationError('Model.clean() error messages.')]})
378.         elif self.name1 == 'FORBIDDEN_VALUE2':
379.             raise ValidationError({'name1': 'Model.clean() error messages (simpler syntax).'})
380.         elif self.name1 == 'GLOBAL_ERROR':
381.             raise ValidationError("Global error message.")
382. 
383. 
384. def today_callable_dict():
385.     return {"last_action__gte": datetime.datetime.today()}
386. 
387. 
388. def today_callable_q():
389.     return models.Q(last_action__gte=datetime.datetime.today())
390. 
391. 
392. class Character(models.Model):
393.     username = models.CharField(max_length=100)
394.     last_action = models.DateTimeField()
395. 
396. 
397. class StumpJoke(models.Model):
398.     most_recently_fooled = models.ForeignKey(
399.         Character,
400.         models.CASCADE,
401.         limit_choices_to=today_callable_dict,
402.         related_name="+",
403.     )
404.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")
405. 
406. 
407. # Model for #13776
408. class Student(models.Model):
409.     character = models.ForeignKey(Character, models.CASCADE)
410.     study = models.CharField(max_length=30)
411. 
412. 
413. # Model for #639
414. class Photo(models.Model):
415.     title = models.CharField(max_length=30)
416.     image = models.FileField(storage=temp_storage, upload_to='tests')
417. 
418.     # Support code for the tests; this keeps track of how many times save()
419.     # gets called on each instance.
420.     def __init__(self, *args, **kwargs):
421.         super().__init__(*args, **kwargs)
422.         self._savecount = 0
423. 
424.     def save(self, force_insert=False, force_update=False):
425.         super().save(force_insert, force_update)
426.         self._savecount += 1
427. 
428. 
429. class UUIDPK(models.Model):
430.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
431.     name = models.CharField(max_length=30)
432. 
433. 
434. # Models for #24706
435. class StrictAssignmentFieldSpecific(models.Model):
436.     title = models.CharField(max_length=30)
437.     _should_error = False
438. 
439.     def __setattr__(self, key, value):
440.         if self._should_error is True:
441.             raise ValidationError(message={key: "Cannot set attribute"}, code='invalid')
442.         super().__setattr__(key, value)
443. 
444. 
445. class StrictAssignmentAll(models.Model):
446.     title = models.CharField(max_length=30)
447.     _should_error = False
448. 
449.     def __setattr__(self, key, value):
450.         if self._should_error is True:
451.             raise ValidationError(message="Cannot set attribute", code='invalid')
452.         super().__setattr__(key, value)
453. 
454. 
455. # A model with ForeignKey(blank=False, null=True)
456. class Award(models.Model):
457.     name = models.CharField(max_length=30)
458.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)
459. 
460. 
461. class NullableUniqueCharFieldModel(models.Model):
462.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)


File: tests/model_forms/test_modelchoicefield.py
Line number range: 1 - 355
Content:
1. import datetime
2. 
3. from django import forms
4. from django.core.validators import ValidationError
5. from django.forms.models import ModelChoiceIterator
6. from django.forms.widgets import CheckboxSelectMultiple
7. from django.template import Context, Template
8. from django.test import TestCase
9. 
10. from .models import Article, Author, Book, Category, Writer
11. 
12. 
13. class ModelChoiceFieldTests(TestCase):
14.     @classmethod
15.     def setUpTestData(cls):
16.         cls.c1 = Category.objects.create(name='Entertainment', slug='entertainment', url='entertainment')
17.         cls.c2 = Category.objects.create(name='A test', slug='test', url='test')
18.         cls.c3 = Category.objects.create(name='Third', slug='third-test', url='third')
19. 
20.     def test_basics(self):
21.         f = forms.ModelChoiceField(Category.objects.all())
22.         self.assertEqual(list(f.choices), [
23.             ('', '---------'),
24.             (self.c1.pk, 'Entertainment'),
25.             (self.c2.pk, 'A test'),
26.             (self.c3.pk, 'Third'),
27.         ])
28.         with self.assertRaises(ValidationError):
29.             f.clean('')
30.         with self.assertRaises(ValidationError):
31.             f.clean(None)
32.         with self.assertRaises(ValidationError):
33.             f.clean(0)
34. 
35.         # Invalid types that require TypeError to be caught.
36.         with self.assertRaises(ValidationError):
37.             f.clean([['fail']])
38.         with self.assertRaises(ValidationError):
39.             f.clean([{'foo': 'bar'}])
40. 
41.         self.assertEqual(f.clean(self.c2.id).name, 'A test')
42.         self.assertEqual(f.clean(self.c3.id).name, 'Third')
43. 
44.         # Add a Category object *after* the ModelChoiceField has already been
45.         # instantiated. This proves clean() checks the database during clean()
46.         # rather than caching it at  instantiation time.
47.         c4 = Category.objects.create(name='Fourth', url='4th')
48.         self.assertEqual(f.clean(c4.id).name, 'Fourth')
49. 
50.         # Delete a Category object *after* the ModelChoiceField has already been
51.         # instantiated. This proves clean() checks the database during clean()
52.         # rather than caching it at instantiation time.
53.         Category.objects.get(url='4th').delete()
54.         msg = "['Select a valid choice. That choice is not one of the available choices.']"
55.         with self.assertRaisesMessage(ValidationError, msg):
56.             f.clean(c4.id)
57. 
58.     def test_clean_model_instance(self):
59.         f = forms.ModelChoiceField(Category.objects.all())
60.         self.assertEqual(f.clean(self.c1), self.c1)
61.         # An instance of incorrect model.
62.         msg = "['Select a valid choice. That choice is not one of the available choices.']"
63.         with self.assertRaisesMessage(ValidationError, msg):
64.             f.clean(Book.objects.create())
65. 
66.     def test_clean_to_field_name(self):
67.         f = forms.ModelChoiceField(Category.objects.all(), to_field_name='slug')
68.         self.assertEqual(f.clean(self.c1.slug), self.c1)
69.         self.assertEqual(f.clean(self.c1), self.c1)
70. 
71.     def test_choices(self):
72.         f = forms.ModelChoiceField(Category.objects.filter(pk=self.c1.id), required=False)
73.         self.assertIsNone(f.clean(''))
74.         self.assertEqual(f.clean(str(self.c1.id)).name, 'Entertainment')
75.         with self.assertRaises(ValidationError):
76.             f.clean('100')
77. 
78.         # len() can be called on choices.
79.         self.assertEqual(len(f.choices), 2)
80. 
81.         # queryset can be changed after the field is created.
82.         f.queryset = Category.objects.exclude(name='Third')
83.         self.assertEqual(list(f.choices), [
84.             ('', '---------'),
85.             (self.c1.pk, 'Entertainment'),
86.             (self.c2.pk, 'A test'),
87.         ])
88.         self.assertEqual(f.clean(self.c2.id).name, 'A test')
89.         with self.assertRaises(ValidationError):
90.             f.clean(self.c3.id)
91. 
92.         # Choices can be iterated repeatedly.
93.         gen_one = list(f.choices)
94.         gen_two = f.choices
95.         self.assertEqual(gen_one[2], (self.c2.pk, 'A test'))
96.         self.assertEqual(list(gen_two), [
97.             ('', '---------'),
98.             (self.c1.pk, 'Entertainment'),
99.             (self.c2.pk, 'A test'),
100.         ])
101. 
102.         # Overriding label_from_instance() to print custom labels.
103.         f.queryset = Category.objects.all()
104.         f.label_from_instance = lambda obj: 'category ' + str(obj)
105.         self.assertEqual(list(f.choices), [
106.             ('', '---------'),
107.             (self.c1.pk, 'category Entertainment'),
108.             (self.c2.pk, 'category A test'),
109.             (self.c3.pk, 'category Third'),
110.         ])
111. 
112.     def test_choices_freshness(self):
113.         f = forms.ModelChoiceField(Category.objects.all())
114.         self.assertEqual(len(f.choices), 4)
115.         self.assertEqual(list(f.choices), [
116.             ('', '---------'),
117.             (self.c1.pk, 'Entertainment'),
118.             (self.c2.pk, 'A test'),
119.             (self.c3.pk, 'Third'),
120.         ])
121.         c4 = Category.objects.create(name='Fourth', slug='4th', url='4th')
122.         self.assertEqual(len(f.choices), 5)
123.         self.assertEqual(list(f.choices), [
124.             ('', '---------'),
125.             (self.c1.pk, 'Entertainment'),
126.             (self.c2.pk, 'A test'),
127.             (self.c3.pk, 'Third'),
128.             (c4.pk, 'Fourth'),
129.         ])
130. 
131.     def test_choices_bool(self):
132.         f = forms.ModelChoiceField(Category.objects.all(), empty_label=None)
133.         self.assertIs(bool(f.choices), True)
134.         Category.objects.all().delete()
135.         self.assertIs(bool(f.choices), False)
136. 
137.     def test_choices_bool_empty_label(self):
138.         f = forms.ModelChoiceField(Category.objects.all(), empty_label='--------')
139.         Category.objects.all().delete()
140.         self.assertIs(bool(f.choices), True)
141. 
142.     def test_deepcopies_widget(self):
143.         class ModelChoiceForm(forms.Form):
144.             category = forms.ModelChoiceField(Category.objects.all())
145. 
146.         form1 = ModelChoiceForm()
147.         field1 = form1.fields['category']
148.         # To allow the widget to change the queryset of field1.widget.choices
149.         # without affecting other forms, the following must hold (#11183):
150.         self.assertIsNot(field1, ModelChoiceForm.base_fields['category'])
151.         self.assertIs(field1.widget.choices.field, field1)
152. 
153.     def test_result_cache_not_shared(self):
154.         class ModelChoiceForm(forms.Form):
155.             category = forms.ModelChoiceField(Category.objects.all())
156. 
157.         form1 = ModelChoiceForm()
158.         self.assertCountEqual(form1.fields['category'].queryset, [self.c1, self.c2, self.c3])
159.         form2 = ModelChoiceForm()
160.         self.assertIsNone(form2.fields['category'].queryset._result_cache)
161. 
162.     def test_queryset_none(self):
163.         class ModelChoiceForm(forms.Form):
164.             category = forms.ModelChoiceField(queryset=None)
165. 
166.             def __init__(self, *args, **kwargs):
167.                 super().__init__(*args, **kwargs)
168.                 self.fields['category'].queryset = Category.objects.filter(slug__contains='test')
169. 
170.         form = ModelChoiceForm()
171.         self.assertCountEqual(form.fields['category'].queryset, [self.c2, self.c3])
172. 
173.     def test_no_extra_query_when_accessing_attrs(self):
174.         """
175.         ModelChoiceField with RadioSelect widget doesn't produce unnecessary
176.         db queries when accessing its BoundField's attrs.
177.         """
178.         class ModelChoiceForm(forms.Form):
179.             category = forms.ModelChoiceField(Category.objects.all(), widget=forms.RadioSelect)
180. 
181.         form = ModelChoiceForm()
182.         field = form['category']  # BoundField
183.         template = Template('{{ field.name }}{{ field }}{{ field.help_text }}')
184.         with self.assertNumQueries(1):
185.             template.render(Context({'field': field}))
186. 
187.     def test_disabled_modelchoicefield(self):
188.         class ModelChoiceForm(forms.ModelForm):
189.             author = forms.ModelChoiceField(Author.objects.all(), disabled=True)
190. 
191.             class Meta:
192.                 model = Book
193.                 fields = ['author']
194. 
195.         book = Book.objects.create(author=Writer.objects.create(name='Test writer'))
196.         form = ModelChoiceForm({}, instance=book)
197.         self.assertEqual(
198.             form.errors['author'],
199.             ['Select a valid choice. That choice is not one of the available choices.']
200.         )
201. 
202.     def test_disabled_modelchoicefield_has_changed(self):
203.         field = forms.ModelChoiceField(Author.objects.all(), disabled=True)
204.         self.assertIs(field.has_changed('x', 'y'), False)
205. 
206.     def test_disabled_modelchoicefield_initial_model_instance(self):
207.         class ModelChoiceForm(forms.Form):
208.             categories = forms.ModelChoiceField(
209.                 Category.objects.all(),
210.                 disabled=True,
211.                 initial=self.c1,
212.             )
213. 
214.         self.assertTrue(ModelChoiceForm(data={'categories': self.c1.pk}).is_valid())
215. 
216.     def test_disabled_multiplemodelchoicefield(self):
217.         class ArticleForm(forms.ModelForm):
218.             categories = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
219. 
220.             class Meta:
221.                 model = Article
222.                 fields = ['categories']
223. 
224.         category1 = Category.objects.create(name='cat1')
225.         category2 = Category.objects.create(name='cat2')
226.         article = Article.objects.create(
227.             pub_date=datetime.date(1988, 1, 4),
228.             writer=Writer.objects.create(name='Test writer'),
229.         )
230.         article.categories.set([category1.pk])
231. 
232.         form = ArticleForm(data={'categories': [category2.pk]}, instance=article)
233.         self.assertEqual(form.errors, {})
234.         self.assertEqual([x.pk for x in form.cleaned_data['categories']], [category2.pk])
235.         # Disabled fields use the value from `instance` rather than `data`.
236.         form = ArticleForm(data={'categories': [category2.pk]}, instance=article)
237.         form.fields['categories'].disabled = True
238.         self.assertEqual(form.errors, {})
239.         self.assertEqual([x.pk for x in form.cleaned_data['categories']], [category1.pk])
240. 
241.     def test_disabled_modelmultiplechoicefield_has_changed(self):
242.         field = forms.ModelMultipleChoiceField(Author.objects.all(), disabled=True)
243.         self.assertIs(field.has_changed('x', 'y'), False)
244. 
245.     def test_overridable_choice_iterator(self):
246.         """
247.         Iterator defaults to ModelChoiceIterator and can be overridden with
248.         the iterator attribute on a ModelChoiceField subclass.
249.         """
250.         field = forms.ModelChoiceField(Category.objects.all())
251.         self.assertIsInstance(field.choices, ModelChoiceIterator)
252. 
253.         class CustomModelChoiceIterator(ModelChoiceIterator):
254.             pass
255. 
256.         class CustomModelChoiceField(forms.ModelChoiceField):
257.             iterator = CustomModelChoiceIterator
258. 
259.         field = CustomModelChoiceField(Category.objects.all())
260.         self.assertIsInstance(field.choices, CustomModelChoiceIterator)
261. 
262.     def test_choice_iterator_passes_model_to_widget(self):
263.         class CustomCheckboxSelectMultiple(CheckboxSelectMultiple):
264.             def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
265.                 option = super().create_option(name, value, label, selected, index, subindex, attrs)
266.                 # Modify the HTML based on the object being rendered.
267.                 c = value.instance
268.                 option['attrs']['data-slug'] = c.slug
269.                 return option
270. 
271.         class CustomModelMultipleChoiceField(forms.ModelMultipleChoiceField):
272.             widget = CustomCheckboxSelectMultiple
273. 
274.         field = CustomModelMultipleChoiceField(Category.objects.all())
275.         self.assertHTMLEqual(
276.             field.widget.render('name', []), (
277.                 '<ul>'
278.                 '<li><label><input type="checkbox" name="name" value="%d" '
279.                 'data-slug="entertainment">Entertainment</label></li>'
280.                 '<li><label><input type="checkbox" name="name" value="%d" '
281.                 'data-slug="test">A test</label></li>'
282.                 '<li><label><input type="checkbox" name="name" value="%d" '
283.                 'data-slug="third-test">Third</label></li>'
284.                 '</ul>'
285.             ) % (self.c1.pk, self.c2.pk, self.c3.pk),
286.         )
287. 
288.     def test_custom_choice_iterator_passes_model_to_widget(self):
289.         class CustomModelChoiceValue:
290.             def __init__(self, value, obj):
291.                 self.value = value
292.                 self.obj = obj
293. 
294.             def __str__(self):
295.                 return str(self.value)
296. 
297.         class CustomModelChoiceIterator(ModelChoiceIterator):
298.             def choice(self, obj):
299.                 value, label = super().choice(obj)
300.                 return CustomModelChoiceValue(value, obj), label
301. 
302.         class CustomCheckboxSelectMultiple(CheckboxSelectMultiple):
303.             def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
304.                 option = super().create_option(name, value, label, selected, index, subindex, attrs)
305.                 # Modify the HTML based on the object being rendered.
306.                 c = value.obj
307.                 option['attrs']['data-slug'] = c.slug
308.                 return option
309. 
310.         class CustomModelMultipleChoiceField(forms.ModelMultipleChoiceField):
311.             iterator = CustomModelChoiceIterator
312.             widget = CustomCheckboxSelectMultiple
313. 
314.         field = CustomModelMultipleChoiceField(Category.objects.all())
315.         self.assertHTMLEqual(
316.             field.widget.render('name', []),
317.             '''<ul>
318. <li><label><input type="checkbox" name="name" value="%d" data-slug="entertainment">Entertainment</label></li>
319. <li><label><input type="checkbox" name="name" value="%d" data-slug="test">A test</label></li>
320. <li><label><input type="checkbox" name="name" value="%d" data-slug="third-test">Third</label></li>
321. </ul>''' % (self.c1.pk, self.c2.pk, self.c3.pk),
322.         )
323. 
324.     def test_choices_not_fetched_when_not_rendering(self):
325.         with self.assertNumQueries(1):
326.             field = forms.ModelChoiceField(Category.objects.order_by('-name'))
327.             self.assertEqual('Entertainment', field.clean(self.c1.pk).name)
328. 
329.     def test_queryset_manager(self):
330.         f = forms.ModelChoiceField(Category.objects)
331.         self.assertEqual(len(f.choices), 4)
332.         self.assertEqual(list(f.choices), [
333.             ('', '---------'),
334.             (self.c1.pk, 'Entertainment'),
335.             (self.c2.pk, 'A test'),
336.             (self.c3.pk, 'Third'),
337.         ])
338. 
339.     def test_num_queries(self):
340.         """
341.         Widgets that render multiple subwidgets shouldn't make more than one
342.         database query.
343.         """
344.         categories = Category.objects.all()
345. 
346.         class CategoriesForm(forms.Form):
347.             radio = forms.ModelChoiceField(queryset=categories, widget=forms.RadioSelect)
348.             checkbox = forms.ModelMultipleChoiceField(queryset=categories, widget=forms.CheckboxSelectMultiple)
349. 
350.         template = Template(
351.             '{% for widget in form.checkbox %}{{ widget }}{% endfor %}'
352.             '{% for widget in form.radio %}{{ widget }}{% endfor %}'
353.         )
354.         with self.assertNumQueries(2):
355.             template.render(Context({'form': CategoriesForm()}))


File: tests/model_forms/tests.py
Line number range: 1 - 2944
Content:
1. import datetime
2. import os
3. from decimal import Decimal
4. from unittest import mock, skipUnless
5. 
6. from django import forms
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured,
9. )
10. from django.core.files.uploadedfile import SimpleUploadedFile
11. from django.core.validators import ValidationError
12. from django.db import connection, models
13. from django.db.models.query import EmptyQuerySet
14. from django.forms.models import (
15.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,
16.     modelform_factory,
17. )
18. from django.template import Context, Template
19. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
20. 
21. from .models import (
22.     Article, ArticleStatus, Author, Author1, Award, BetterWriter, BigInt, Book,
23.     Category, Character, Colour, ColourfulItem, CustomErrorMessage, CustomFF,
24.     CustomFieldForExclusionModel, DateTimePost, DerivedBook, DerivedPost,
25.     Document, ExplicitPK, FilePathModel, FlexibleDatePost, Homepage,
26.     ImprovedArticle, ImprovedArticleWithParentLink, Inventory,
27.     NullableUniqueCharFieldModel, Person, Photo, Post, Price, Product,
28.     Publication, PublicationDefaults, StrictAssignmentAll,
29.     StrictAssignmentFieldSpecific, Student, StumpJoke, TextFile, Triple,
30.     Writer, WriterProfile, test_images,
31. )
32. 
33. if test_images:
34.     from .models import ImageFile, OptionalImageFile, NoExtensionImageFile
35. 
36.     class ImageFileForm(forms.ModelForm):
37.         class Meta:
38.             model = ImageFile
39.             fields = '__all__'
40. 
41.     class OptionalImageFileForm(forms.ModelForm):
42.         class Meta:
43.             model = OptionalImageFile
44.             fields = '__all__'
45. 
46.     class NoExtensionImageFileForm(forms.ModelForm):
47.         class Meta:
48.             model = NoExtensionImageFile
49.             fields = '__all__'
50. 
51. 
52. class ProductForm(forms.ModelForm):
53.     class Meta:
54.         model = Product
55.         fields = '__all__'
56. 
57. 
58. class PriceForm(forms.ModelForm):
59.     class Meta:
60.         model = Price
61.         fields = '__all__'
62. 
63. 
64. class BookForm(forms.ModelForm):
65.     class Meta:
66.         model = Book
67.         fields = '__all__'
68. 
69. 
70. class DerivedBookForm(forms.ModelForm):
71.     class Meta:
72.         model = DerivedBook
73.         fields = '__all__'
74. 
75. 
76. class ExplicitPKForm(forms.ModelForm):
77.     class Meta:
78.         model = ExplicitPK
79.         fields = ('key', 'desc',)
80. 
81. 
82. class PostForm(forms.ModelForm):
83.     class Meta:
84.         model = Post
85.         fields = '__all__'
86. 
87. 
88. class DerivedPostForm(forms.ModelForm):
89.     class Meta:
90.         model = DerivedPost
91.         fields = '__all__'
92. 
93. 
94. class CustomWriterForm(forms.ModelForm):
95.     name = forms.CharField(required=False)
96. 
97.     class Meta:
98.         model = Writer
99.         fields = '__all__'
100. 
101. 
102. class BaseCategoryForm(forms.ModelForm):
103.     class Meta:
104.         model = Category
105.         fields = '__all__'
106. 
107. 
108. class ArticleForm(forms.ModelForm):
109.     class Meta:
110.         model = Article
111.         fields = '__all__'
112. 
113. 
114. class RoykoForm(forms.ModelForm):
115.     class Meta:
116.         model = Writer
117.         fields = '__all__'
118. 
119. 
120. class ArticleStatusForm(forms.ModelForm):
121.     class Meta:
122.         model = ArticleStatus
123.         fields = '__all__'
124. 
125. 
126. class InventoryForm(forms.ModelForm):
127.     class Meta:
128.         model = Inventory
129.         fields = '__all__'
130. 
131. 
132. class SelectInventoryForm(forms.Form):
133.     items = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name='barcode')
134. 
135. 
136. class CustomFieldForExclusionForm(forms.ModelForm):
137.     class Meta:
138.         model = CustomFieldForExclusionModel
139.         fields = ['name', 'markup']
140. 
141. 
142. class TextFileForm(forms.ModelForm):
143.     class Meta:
144.         model = TextFile
145.         fields = '__all__'
146. 
147. 
148. class BigIntForm(forms.ModelForm):
149.     class Meta:
150.         model = BigInt
151.         fields = '__all__'
152. 
153. 
154. class ModelFormWithMedia(forms.ModelForm):
155.     class Media:
156.         js = ('/some/form/javascript',)
157.         css = {
158.             'all': ('/some/form/css',)
159.         }
160. 
161.     class Meta:
162.         model = TextFile
163.         fields = '__all__'
164. 
165. 
166. class CustomErrorMessageForm(forms.ModelForm):
167.     name1 = forms.CharField(error_messages={'invalid': 'Form custom error message.'})
168. 
169.     class Meta:
170.         fields = '__all__'
171.         model = CustomErrorMessage
172. 
173. 
174. class ModelFormBaseTest(TestCase):
175.     def test_base_form(self):
176.         self.assertEqual(list(BaseCategoryForm.base_fields), ['name', 'slug', 'url'])
177. 
178.     def test_no_model_class(self):
179.         class NoModelModelForm(forms.ModelForm):
180.             pass
181.         with self.assertRaisesMessage(ValueError, 'ModelForm has no model class specified.'):
182.             NoModelModelForm()
183. 
184.     def test_empty_fields_to_fields_for_model(self):
185.         """
186.         An argument of fields=() to fields_for_model should return an empty dictionary
187.         """
188.         field_dict = fields_for_model(Person, fields=())
189.         self.assertEqual(len(field_dict), 0)
190. 
191.     def test_empty_fields_on_modelform(self):
192.         """
193.         No fields on a ModelForm should actually result in no fields.
194.         """
195.         class EmptyPersonForm(forms.ModelForm):
196.             class Meta:
197.                 model = Person
198.                 fields = ()
199. 
200.         form = EmptyPersonForm()
201.         self.assertEqual(len(form.fields), 0)
202. 
203.     def test_empty_fields_to_construct_instance(self):
204.         """
205.         No fields should be set on a model instance if construct_instance receives fields=().
206.         """
207.         form = modelform_factory(Person, fields="__all__")({'name': 'John Doe'})
208.         self.assertTrue(form.is_valid())
209.         instance = construct_instance(form, Person(), fields=())
210.         self.assertEqual(instance.name, '')
211. 
212.     def test_blank_with_null_foreign_key_field(self):
213.         """
214.         #13776 -- ModelForm's with models having a FK set to null=False and
215.         required=False should be valid.
216.         """
217.         class FormForTestingIsValid(forms.ModelForm):
218.             class Meta:
219.                 model = Student
220.                 fields = '__all__'
221. 
222.             def __init__(self, *args, **kwargs):
223.                 super().__init__(*args, **kwargs)
224.                 self.fields['character'].required = False
225. 
226.         char = Character.objects.create(username='user', last_action=datetime.datetime.today())
227.         data = {'study': 'Engineering'}
228.         data2 = {'study': 'Engineering', 'character': char.pk}
229. 
230.         # form is valid because required=False for field 'character'
231.         f1 = FormForTestingIsValid(data)
232.         self.assertTrue(f1.is_valid())
233. 
234.         f2 = FormForTestingIsValid(data2)
235.         self.assertTrue(f2.is_valid())
236.         obj = f2.save()
237.         self.assertEqual(obj.character, char)
238. 
239.     def test_blank_false_with_null_true_foreign_key_field(self):
240.         """
241.         A ModelForm with a model having ForeignKey(blank=False, null=True)
242.         and the form field set to required=False should allow the field to be
243.         unset.
244.         """
245.         class AwardForm(forms.ModelForm):
246.             class Meta:
247.                 model = Award
248.                 fields = '__all__'
249. 
250.             def __init__(self, *args, **kwargs):
251.                 super().__init__(*args, **kwargs)
252.                 self.fields['character'].required = False
253. 
254.         character = Character.objects.create(username='user', last_action=datetime.datetime.today())
255.         award = Award.objects.create(name='Best sprinter', character=character)
256.         data = {'name': 'Best tester', 'character': ''}  # remove character
257.         form = AwardForm(data=data, instance=award)
258.         self.assertTrue(form.is_valid())
259.         award = form.save()
260.         self.assertIsNone(award.character)
261. 
262.     def test_save_blank_false_with_required_false(self):
263.         """
264.         A ModelForm with a model with a field set to blank=False and the form
265.         field set to required=False should allow the field to be unset.
266.         """
267.         obj = Writer.objects.create(name='test')
268.         form = CustomWriterForm(data={'name': ''}, instance=obj)
269.         self.assertTrue(form.is_valid())
270.         obj = form.save()
271.         self.assertEqual(obj.name, '')
272. 
273.     def test_save_blank_null_unique_charfield_saves_null(self):
274.         form_class = modelform_factory(model=NullableUniqueCharFieldModel, fields=['codename'])
275.         empty_value = '' if connection.features.interprets_empty_strings_as_nulls else None
276. 
277.         form = form_class(data={'codename': ''})
278.         self.assertTrue(form.is_valid())
279.         form.save()
280.         self.assertEqual(form.instance.codename, empty_value)
281. 
282.         # Save a second form to verify there isn't a unique constraint violation.
283.         form = form_class(data={'codename': ''})
284.         self.assertTrue(form.is_valid())
285.         form.save()
286.         self.assertEqual(form.instance.codename, empty_value)
287. 
288.     def test_missing_fields_attribute(self):
289.         message = (
290.             "Creating a ModelForm without either the 'fields' attribute "
291.             "or the 'exclude' attribute is prohibited; form "
292.             "MissingFieldsForm needs updating."
293.         )
294.         with self.assertRaisesMessage(ImproperlyConfigured, message):
295.             class MissingFieldsForm(forms.ModelForm):
296.                 class Meta:
297.                     model = Category
298. 
299.     def test_extra_fields(self):
300.         class ExtraFields(BaseCategoryForm):
301.             some_extra_field = forms.BooleanField()
302. 
303.         self.assertEqual(list(ExtraFields.base_fields),
304.                          ['name', 'slug', 'url', 'some_extra_field'])
305. 
306.     def test_extra_field_model_form(self):
307.         with self.assertRaisesMessage(FieldError, 'no-field'):
308.             class ExtraPersonForm(forms.ModelForm):
309.                 """ ModelForm with an extra field """
310.                 age = forms.IntegerField()
311. 
312.                 class Meta:
313.                     model = Person
314.                     fields = ('name', 'no-field')
315. 
316.     def test_extra_declared_field_model_form(self):
317.         class ExtraPersonForm(forms.ModelForm):
318.             """ ModelForm with an extra field """
319.             age = forms.IntegerField()
320. 
321.             class Meta:
322.                 model = Person
323.                 fields = ('name', 'age')
324. 
325.     def test_extra_field_modelform_factory(self):
326.         with self.assertRaisesMessage(FieldError, 'Unknown field(s) (no-field) specified for Person'):
327.             modelform_factory(Person, fields=['no-field', 'name'])
328. 
329.     def test_replace_field(self):
330.         class ReplaceField(forms.ModelForm):
331.             url = forms.BooleanField()
332. 
333.             class Meta:
334.                 model = Category
335.                 fields = '__all__'
336. 
337.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
338. 
339.     def test_replace_field_variant_2(self):
340.         # Should have the same result as before,
341.         # but 'fields' attribute specified differently
342.         class ReplaceField(forms.ModelForm):
343.             url = forms.BooleanField()
344. 
345.             class Meta:
346.                 model = Category
347.                 fields = ['url']
348. 
349.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
350. 
351.     def test_replace_field_variant_3(self):
352.         # Should have the same result as before,
353.         # but 'fields' attribute specified differently
354.         class ReplaceField(forms.ModelForm):
355.             url = forms.BooleanField()
356. 
357.             class Meta:
358.                 model = Category
359.                 fields = []  # url will still appear, since it is explicit above
360. 
361.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
362. 
363.     def test_override_field(self):
364.         class WriterForm(forms.ModelForm):
365.             book = forms.CharField(required=False)
366. 
367.             class Meta:
368.                 model = Writer
369.                 fields = '__all__'
370. 
371.         wf = WriterForm({'name': 'Richard Lockridge'})
372.         self.assertTrue(wf.is_valid())
373. 
374.     def test_limit_nonexistent_field(self):
375.         expected_msg = 'Unknown field(s) (nonexistent) specified for Category'
376.         with self.assertRaisesMessage(FieldError, expected_msg):
377.             class InvalidCategoryForm(forms.ModelForm):
378.                 class Meta:
379.                     model = Category
380.                     fields = ['nonexistent']
381. 
382.     def test_limit_fields_with_string(self):
383.         expected_msg = "CategoryForm.Meta.fields cannot be a string. Did you mean to type: ('url',)?"
384.         with self.assertRaisesMessage(TypeError, expected_msg):
385.             class CategoryForm(forms.ModelForm):
386.                 class Meta:
387.                     model = Category
388.                     fields = ('url')  # note the missing comma
389. 
390.     def test_exclude_fields(self):
391.         class ExcludeFields(forms.ModelForm):
392.             class Meta:
393.                 model = Category
394.                 exclude = ['url']
395. 
396.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug'])
397. 
398.     def test_exclude_nonexistent_field(self):
399.         class ExcludeFields(forms.ModelForm):
400.             class Meta:
401.                 model = Category
402.                 exclude = ['nonexistent']
403. 
404.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug', 'url'])
405. 
406.     def test_exclude_fields_with_string(self):
407.         expected_msg = "CategoryForm.Meta.exclude cannot be a string. Did you mean to type: ('url',)?"
408.         with self.assertRaisesMessage(TypeError, expected_msg):
409.             class CategoryForm(forms.ModelForm):
410.                 class Meta:
411.                     model = Category
412.                     exclude = ('url')  # note the missing comma
413. 
414.     def test_exclude_and_validation(self):
415.         # This Price instance generated by this form is not valid because the quantity
416.         # field is required, but the form is valid because the field is excluded from
417.         # the form. This is for backwards compatibility.
418.         class PriceFormWithoutQuantity(forms.ModelForm):
419.             class Meta:
420.                 model = Price
421.                 exclude = ('quantity',)
422. 
423.         form = PriceFormWithoutQuantity({'price': '6.00'})
424.         self.assertTrue(form.is_valid())
425.         price = form.save(commit=False)
426.         msg = "{'quantity': ['This field cannot be null.']}"
427.         with self.assertRaisesMessage(ValidationError, msg):
428.             price.full_clean()
429. 
430.         # The form should not validate fields that it doesn't contain even if they are
431.         # specified using 'fields', not 'exclude'.
432.         class PriceFormWithoutQuantity(forms.ModelForm):
433.             class Meta:
434.                 model = Price
435.                 fields = ('price',)
436.         form = PriceFormWithoutQuantity({'price': '6.00'})
437.         self.assertTrue(form.is_valid())
438. 
439.         # The form should still have an instance of a model that is not complete and
440.         # not saved into a DB yet.
441.         self.assertEqual(form.instance.price, Decimal('6.00'))
442.         self.assertIsNone(form.instance.quantity)
443.         self.assertIsNone(form.instance.pk)
444. 
445.     def test_confused_form(self):
446.         class ConfusedForm(forms.ModelForm):
447.             """ Using 'fields' *and* 'exclude'. Not sure why you'd want to do
448.             this, but uh, "be liberal in what you accept" and all.
449.             """
450.             class Meta:
451.                 model = Category
452.                 fields = ['name', 'url']
453.                 exclude = ['url']
454. 
455.         self.assertEqual(list(ConfusedForm.base_fields),
456.                          ['name'])
457. 
458.     def test_mixmodel_form(self):
459.         class MixModelForm(BaseCategoryForm):
460.             """ Don't allow more than one 'model' definition in the
461.             inheritance hierarchy.  Technically, it would generate a valid
462.             form, but the fact that the resulting save method won't deal with
463.             multiple objects is likely to trip up people not familiar with the
464.             mechanics.
465.             """
466.             class Meta:
467.                 model = Article
468.                 fields = '__all__'
469.             # MixModelForm is now an Article-related thing, because MixModelForm.Meta
470.             # overrides BaseCategoryForm.Meta.
471. 
472.         self.assertEqual(
473.             list(MixModelForm.base_fields),
474.             ['headline', 'slug', 'pub_date', 'writer', 'article', 'categories', 'status']
475.         )
476. 
477.     def test_article_form(self):
478.         self.assertEqual(
479.             list(ArticleForm.base_fields),
480.             ['headline', 'slug', 'pub_date', 'writer', 'article', 'categories', 'status']
481.         )
482. 
483.     def test_bad_form(self):
484.         # First class with a Meta class wins...
485.         class BadForm(ArticleForm, BaseCategoryForm):
486.             pass
487. 
488.         self.assertEqual(
489.             list(BadForm.base_fields),
490.             ['headline', 'slug', 'pub_date', 'writer', 'article', 'categories', 'status']
491.         )
492. 
493.     def test_invalid_meta_model(self):
494.         class InvalidModelForm(forms.ModelForm):
495.             class Meta:
496.                 pass  # no model
497. 
498.         # Can't create new form
499.         msg = 'ModelForm has no model class specified.'
500.         with self.assertRaisesMessage(ValueError, msg):
501.             InvalidModelForm()
502. 
503.         # Even if you provide a model instance
504.         with self.assertRaisesMessage(ValueError, msg):
505.             InvalidModelForm(instance=Category)
506. 
507.     def test_subcategory_form(self):
508.         class SubCategoryForm(BaseCategoryForm):
509.             """ Subclassing without specifying a Meta on the class will use
510.             the parent's Meta (or the first parent in the MRO if there are
511.             multiple parent classes).
512.             """
513.             pass
514. 
515.         self.assertEqual(list(SubCategoryForm.base_fields), ['name', 'slug', 'url'])
516. 
517.     def test_subclassmeta_form(self):
518.         class SomeCategoryForm(forms.ModelForm):
519.             checkbox = forms.BooleanField()
520. 
521.             class Meta:
522.                 model = Category
523.                 fields = '__all__'
524. 
525.         class SubclassMeta(SomeCategoryForm):
526.             """ We can also subclass the Meta inner class to change the fields
527.             list.
528.             """
529.             class Meta(SomeCategoryForm.Meta):
530.                 exclude = ['url']
531. 
532.         self.assertHTMLEqual(
533.             str(SubclassMeta()),
534.             """<tr><th><label for="id_name">Name:</label></th>
535. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>
536. <tr><th><label for="id_slug">Slug:</label></th>
537. <td><input id="id_slug" type="text" name="slug" maxlength="20" required></td></tr>
538. <tr><th><label for="id_checkbox">Checkbox:</label></th>
539. <td><input type="checkbox" name="checkbox" id="id_checkbox" required></td></tr>"""
540.         )
541. 
542.     def test_orderfields_form(self):
543.         class OrderFields(forms.ModelForm):
544.             class Meta:
545.                 model = Category
546.                 fields = ['url', 'name']
547. 
548.         self.assertEqual(list(OrderFields.base_fields),
549.                          ['url', 'name'])
550.         self.assertHTMLEqual(
551.             str(OrderFields()),
552.             """<tr><th><label for="id_url">The URL:</label></th>
553. <td><input id="id_url" type="text" name="url" maxlength="40" required></td></tr>
554. <tr><th><label for="id_name">Name:</label></th>
555. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>"""
556.         )
557. 
558.     def test_orderfields2_form(self):
559.         class OrderFields2(forms.ModelForm):
560.             class Meta:
561.                 model = Category
562.                 fields = ['slug', 'url', 'name']
563.                 exclude = ['url']
564. 
565.         self.assertEqual(list(OrderFields2.base_fields), ['slug', 'name'])
566. 
567.     def test_default_populated_on_optional_field(self):
568.         class PubForm(forms.ModelForm):
569.             mode = forms.CharField(max_length=255, required=False)
570. 
571.             class Meta:
572.                 model = PublicationDefaults
573.                 fields = ('mode',)
574. 
575.         # Empty data uses the model field default.
576.         mf1 = PubForm({})
577.         self.assertEqual(mf1.errors, {})
578.         m1 = mf1.save(commit=False)
579.         self.assertEqual(m1.mode, 'di')
580.         self.assertEqual(m1._meta.get_field('mode').get_default(), 'di')
581. 
582.         # Blank data doesn't use the model field default.
583.         mf2 = PubForm({'mode': ''})
584.         self.assertEqual(mf2.errors, {})
585.         m2 = mf2.save(commit=False)
586.         self.assertEqual(m2.mode, '')
587. 
588.     def test_default_not_populated_on_non_empty_value_in_cleaned_data(self):
589.         class PubForm(forms.ModelForm):
590.             mode = forms.CharField(max_length=255, required=False)
591.             mocked_mode = None
592. 
593.             def clean(self):
594.                 self.cleaned_data['mode'] = self.mocked_mode
595.                 return self.cleaned_data
596. 
597.             class Meta:
598.                 model = PublicationDefaults
599.                 fields = ('mode',)
600. 
601.         pub_form = PubForm({})
602.         pub_form.mocked_mode = 'de'
603.         pub = pub_form.save(commit=False)
604.         self.assertEqual(pub.mode, 'de')
605.         # Default should be populated on an empty value in cleaned_data.
606.         default_mode = 'di'
607.         for empty_value in pub_form.fields['mode'].empty_values:
608.             with self.subTest(empty_value=empty_value):
609.                 pub_form = PubForm({})
610.                 pub_form.mocked_mode = empty_value
611.                 pub = pub_form.save(commit=False)
612.                 self.assertEqual(pub.mode, default_mode)
613. 
614.     def test_default_not_populated_on_optional_checkbox_input(self):
615.         class PubForm(forms.ModelForm):
616.             class Meta:
617.                 model = PublicationDefaults
618.                 fields = ('active',)
619. 
620.         # Empty data doesn't use the model default because CheckboxInput
621.         # doesn't have a value in HTML form submission.
622.         mf1 = PubForm({})
623.         self.assertEqual(mf1.errors, {})
624.         m1 = mf1.save(commit=False)
625.         self.assertIs(m1.active, False)
626.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)
627.         self.assertIs(m1._meta.get_field('active').get_default(), True)
628. 
629.     def test_default_not_populated_on_checkboxselectmultiple(self):
630.         class PubForm(forms.ModelForm):
631.             mode = forms.CharField(required=False, widget=forms.CheckboxSelectMultiple)
632. 
633.             class Meta:
634.                 model = PublicationDefaults
635.                 fields = ('mode',)
636. 
637.         # Empty data doesn't use the model default because an unchecked
638.         # CheckboxSelectMultiple doesn't have a value in HTML form submission.
639.         mf1 = PubForm({})
640.         self.assertEqual(mf1.errors, {})
641.         m1 = mf1.save(commit=False)
642.         self.assertEqual(m1.mode, '')
643.         self.assertEqual(m1._meta.get_field('mode').get_default(), 'di')
644. 
645.     def test_default_not_populated_on_selectmultiple(self):
646.         class PubForm(forms.ModelForm):
647.             mode = forms.CharField(required=False, widget=forms.SelectMultiple)
648. 
649.             class Meta:
650.                 model = PublicationDefaults
651.                 fields = ('mode',)
652. 
653.         # Empty data doesn't use the model default because an unselected
654.         # SelectMultiple doesn't have a value in HTML form submission.
655.         mf1 = PubForm({})
656.         self.assertEqual(mf1.errors, {})
657.         m1 = mf1.save(commit=False)
658.         self.assertEqual(m1.mode, '')
659.         self.assertEqual(m1._meta.get_field('mode').get_default(), 'di')
660. 
661.     def test_prefixed_form_with_default_field(self):
662.         class PubForm(forms.ModelForm):
663.             prefix = 'form-prefix'
664. 
665.             class Meta:
666.                 model = PublicationDefaults
667.                 fields = ('mode',)
668. 
669.         mode = 'de'
670.         self.assertNotEqual(mode, PublicationDefaults._meta.get_field('mode').get_default())
671. 
672.         mf1 = PubForm({'form-prefix-mode': mode})
673.         self.assertEqual(mf1.errors, {})
674.         m1 = mf1.save(commit=False)
675.         self.assertEqual(m1.mode, mode)
676. 
677.     def test_renderer_kwarg(self):
678.         custom = object()
679.         self.assertIs(ProductForm(renderer=custom).renderer, custom)
680. 
681.     def test_default_splitdatetime_field(self):
682.         class PubForm(forms.ModelForm):
683.             datetime_published = forms.SplitDateTimeField(required=False)
684. 
685.             class Meta:
686.                 model = PublicationDefaults
687.                 fields = ('datetime_published',)
688. 
689.         mf1 = PubForm({})
690.         self.assertEqual(mf1.errors, {})
691.         m1 = mf1.save(commit=False)
692.         self.assertEqual(m1.datetime_published, datetime.datetime(2000, 1, 1))
693. 
694.         mf2 = PubForm({'datetime_published_0': '2010-01-01', 'datetime_published_1': '0:00:00'})
695.         self.assertEqual(mf2.errors, {})
696.         m2 = mf2.save(commit=False)
697.         self.assertEqual(m2.datetime_published, datetime.datetime(2010, 1, 1))
698. 
699.     def test_default_filefield(self):
700.         class PubForm(forms.ModelForm):
701.             class Meta:
702.                 model = PublicationDefaults
703.                 fields = ('file',)
704. 
705.         mf1 = PubForm({})
706.         self.assertEqual(mf1.errors, {})
707.         m1 = mf1.save(commit=False)
708.         self.assertEqual(m1.file.name, 'default.txt')
709. 
710.         mf2 = PubForm({}, {'file': SimpleUploadedFile('name', b'foo')})
711.         self.assertEqual(mf2.errors, {})
712.         m2 = mf2.save(commit=False)
713.         self.assertEqual(m2.file.name, 'name')
714. 
715.     def test_default_selectdatewidget(self):
716.         class PubForm(forms.ModelForm):
717.             date_published = forms.DateField(required=False, widget=forms.SelectDateWidget)
718. 
719.             class Meta:
720.                 model = PublicationDefaults
721.                 fields = ('date_published',)
722. 
723.         mf1 = PubForm({})
724.         self.assertEqual(mf1.errors, {})
725.         m1 = mf1.save(commit=False)
726.         self.assertEqual(m1.date_published, datetime.date.today())
727. 
728.         mf2 = PubForm({'date_published_year': '2010', 'date_published_month': '1', 'date_published_day': '1'})
729.         self.assertEqual(mf2.errors, {})
730.         m2 = mf2.save(commit=False)
731.         self.assertEqual(m2.date_published, datetime.date(2010, 1, 1))
732. 
733. 
734. class FieldOverridesByFormMetaForm(forms.ModelForm):
735.     class Meta:
736.         model = Category
737.         fields = ['name', 'url', 'slug']
738.         widgets = {
739.             'name': forms.Textarea,
740.             'url': forms.TextInput(attrs={'class': 'url'})
741.         }
742.         labels = {
743.             'name': 'Title',
744.         }
745.         help_texts = {
746.             'slug': 'Watch out! Letters, numbers, underscores and hyphens only.',
747.         }
748.         error_messages = {
749.             'slug': {
750.                 'invalid': (
751.                     "Didn't you read the help text? "
752.                     "We said letters, numbers, underscores and hyphens only!"
753.                 )
754.             }
755.         }
756.         field_classes = {
757.             'url': forms.URLField,
758.         }
759. 
760. 
761. class TestFieldOverridesByFormMeta(SimpleTestCase):
762.     def test_widget_overrides(self):
763.         form = FieldOverridesByFormMetaForm()
764.         self.assertHTMLEqual(
765.             str(form['name']),
766.             '<textarea id="id_name" rows="10" cols="40" name="name" maxlength="20" required></textarea>',
767.         )
768.         self.assertHTMLEqual(
769.             str(form['url']),
770.             '<input id="id_url" type="text" class="url" name="url" maxlength="40" required>',
771.         )
772.         self.assertHTMLEqual(
773.             str(form['slug']),
774.             '<input id="id_slug" type="text" name="slug" maxlength="20" required>',
775.         )
776. 
777.     def test_label_overrides(self):
778.         form = FieldOverridesByFormMetaForm()
779.         self.assertHTMLEqual(
780.             str(form['name'].label_tag()),
781.             '<label for="id_name">Title:</label>',
782.         )
783.         self.assertHTMLEqual(
784.             str(form['url'].label_tag()),
785.             '<label for="id_url">The URL:</label>',
786.         )
787.         self.assertHTMLEqual(
788.             str(form['slug'].label_tag()),
789.             '<label for="id_slug">Slug:</label>',
790.         )
791. 
792.     def test_help_text_overrides(self):
793.         form = FieldOverridesByFormMetaForm()
794.         self.assertEqual(
795.             form['slug'].help_text,
796.             'Watch out! Letters, numbers, underscores and hyphens only.',
797.         )
798. 
799.     def test_error_messages_overrides(self):
800.         form = FieldOverridesByFormMetaForm(data={
801.             'name': 'Category',
802.             'url': 'http://www.example.com/category/',
803.             'slug': '!%#*@',
804.         })
805.         form.full_clean()
806. 
807.         error = [
808.             "Didn't you read the help text? "
809.             "We said letters, numbers, underscores and hyphens only!",
810.         ]
811.         self.assertEqual(form.errors, {'slug': error})
812. 
813.     def test_field_type_overrides(self):
814.         form = FieldOverridesByFormMetaForm()
815.         self.assertIs(Category._meta.get_field('url').__class__, models.CharField)
816.         self.assertIsInstance(form.fields['url'], forms.URLField)
817. 
818. 
819. class IncompleteCategoryFormWithFields(forms.ModelForm):
820.     """
821.     A form that replaces the model's url field with a custom one. This should
822.     prevent the model field's validation from being called.
823.     """
824.     url = forms.CharField(required=False)
825. 
826.     class Meta:
827.         fields = ('name', 'slug')
828.         model = Category
829. 
830. 
831. class IncompleteCategoryFormWithExclude(forms.ModelForm):
832.     """
833.     A form that replaces the model's url field with a custom one. This should
834.     prevent the model field's validation from being called.
835.     """
836.     url = forms.CharField(required=False)
837. 
838.     class Meta:
839.         exclude = ['url']
840.         model = Category
841. 
842. 
843. class ValidationTest(SimpleTestCase):
844.     def test_validates_with_replaced_field_not_specified(self):
845.         form = IncompleteCategoryFormWithFields(data={'name': 'some name', 'slug': 'some-slug'})
846.         assert form.is_valid()
847. 
848.     def test_validates_with_replaced_field_excluded(self):
849.         form = IncompleteCategoryFormWithExclude(data={'name': 'some name', 'slug': 'some-slug'})
850.         assert form.is_valid()
851. 
852.     def test_notrequired_overrides_notblank(self):
853.         form = CustomWriterForm({})
854.         assert form.is_valid()
855. 
856. 
857. class UniqueTest(TestCase):
858.     """
859.     unique/unique_together validation.
860.     """
861.     @classmethod
862.     def setUpTestData(cls):
863.         cls.writer = Writer.objects.create(name='Mike Royko')
864. 
865.     def test_simple_unique(self):
866.         form = ProductForm({'slug': 'teddy-bear-blue'})
867.         self.assertTrue(form.is_valid())
868.         obj = form.save()
869.         form = ProductForm({'slug': 'teddy-bear-blue'})
870.         self.assertEqual(len(form.errors), 1)
871.         self.assertEqual(form.errors['slug'], ['Product with this Slug already exists.'])
872.         form = ProductForm({'slug': 'teddy-bear-blue'}, instance=obj)
873.         self.assertTrue(form.is_valid())
874. 
875.     def test_unique_together(self):
876.         """ModelForm test of unique_together constraint"""
877.         form = PriceForm({'price': '6.00', 'quantity': '1'})
878.         self.assertTrue(form.is_valid())
879.         form.save()
880.         form = PriceForm({'price': '6.00', 'quantity': '1'})
881.         self.assertFalse(form.is_valid())
882.         self.assertEqual(len(form.errors), 1)
883.         self.assertEqual(form.errors['__all__'], ['Price with this Price and Quantity already exists.'])
884. 
885.     def test_unique_together_exclusion(self):
886.         """
887.         Forms don't validate unique_together constraints when only part of the
888.         constraint is included in the form's fields. This allows using
889.         form.save(commit=False) and then assigning the missing field(s) to the
890.         model instance.
891.         """
892.         class BookForm(forms.ModelForm):
893.             class Meta:
894.                 model = DerivedBook
895.                 fields = ('isbn', 'suffix1')
896. 
897.         # The unique_together is on suffix1/suffix2 but only suffix1 is part
898.         # of the form. The fields must have defaults, otherwise they'll be
899.         # skipped by other logic.
900.         self.assertEqual(DerivedBook._meta.unique_together, (('suffix1', 'suffix2'),))
901.         for name in ('suffix1', 'suffix2'):
902.             with self.subTest(name=name):
903.                 field = DerivedBook._meta.get_field(name)
904.                 self.assertEqual(field.default, 0)
905. 
906.         # The form fails validation with "Derived book with this Suffix1 and
907.         # Suffix2 already exists." if the unique_together validation isn't
908.         # skipped.
909.         DerivedBook.objects.create(isbn='12345')
910.         form = BookForm({'isbn': '56789', 'suffix1': '0'})
911.         self.assertTrue(form.is_valid(), form.errors)
912. 
913.     def test_multiple_field_unique_together(self):
914.         """
915.         When the same field is involved in multiple unique_together
916.         constraints, we need to make sure we don't remove the data for it
917.         before doing all the validation checking (not just failing after
918.         the first one).
919.         """
920.         class TripleForm(forms.ModelForm):
921.             class Meta:
922.                 model = Triple
923.                 fields = '__all__'
924. 
925.         Triple.objects.create(left=1, middle=2, right=3)
926. 
927.         form = TripleForm({'left': '1', 'middle': '2', 'right': '3'})
928.         self.assertFalse(form.is_valid())
929. 
930.         form = TripleForm({'left': '1', 'middle': '3', 'right': '1'})
931.         self.assertTrue(form.is_valid())
932. 
933.     @skipUnlessDBFeature('supports_nullable_unique_constraints')
934.     def test_unique_null(self):
935.         title = 'I May Be Wrong But I Doubt It'
936.         form = BookForm({'title': title, 'author': self.writer.pk})
937.         self.assertTrue(form.is_valid())
938.         form.save()
939.         form = BookForm({'title': title, 'author': self.writer.pk})
940.         self.assertFalse(form.is_valid())
941.         self.assertEqual(len(form.errors), 1)
942.         self.assertEqual(form.errors['__all__'], ['Book with this Title and Author already exists.'])
943.         form = BookForm({'title': title})
944.         self.assertTrue(form.is_valid())
945.         form.save()
946.         form = BookForm({'title': title})
947.         self.assertTrue(form.is_valid())
948. 
949.     def test_inherited_unique(self):
950.         title = 'Boss'
951.         Book.objects.create(title=title, author=self.writer, special_id=1)
952.         form = DerivedBookForm({'title': 'Other', 'author': self.writer.pk, 'special_id': '1', 'isbn': '12345'})
953.         self.assertFalse(form.is_valid())
954.         self.assertEqual(len(form.errors), 1)
955.         self.assertEqual(form.errors['special_id'], ['Book with this Special id already exists.'])
956. 
957.     def test_inherited_unique_together(self):
958.         title = 'Boss'
959.         form = BookForm({'title': title, 'author': self.writer.pk})
960.         self.assertTrue(form.is_valid())
961.         form.save()
962.         form = DerivedBookForm({'title': title, 'author': self.writer.pk, 'isbn': '12345'})
963.         self.assertFalse(form.is_valid())
964.         self.assertEqual(len(form.errors), 1)
965.         self.assertEqual(form.errors['__all__'], ['Book with this Title and Author already exists.'])
966. 
967.     def test_abstract_inherited_unique(self):
968.         title = 'Boss'
969.         isbn = '12345'
970.         DerivedBook.objects.create(title=title, author=self.writer, isbn=isbn)
971.         form = DerivedBookForm({
972.             'title': 'Other', 'author': self.writer.pk, 'isbn': isbn,
973.             'suffix1': '1', 'suffix2': '2',
974.         })
975.         self.assertFalse(form.is_valid())
976.         self.assertEqual(len(form.errors), 1)
977.         self.assertEqual(form.errors['isbn'], ['Derived book with this Isbn already exists.'])
978. 
979.     def test_abstract_inherited_unique_together(self):
980.         title = 'Boss'
981.         isbn = '12345'
982.         DerivedBook.objects.create(title=title, author=self.writer, isbn=isbn)
983.         form = DerivedBookForm({
984.             'title': 'Other',
985.             'author': self.writer.pk,
986.             'isbn': '9876',
987.             'suffix1': '0',
988.             'suffix2': '0'
989.         })
990.         self.assertFalse(form.is_valid())
991.         self.assertEqual(len(form.errors), 1)
992.         self.assertEqual(
993.             form.errors['__all__'],
994.             ['Derived book with this Suffix1 and Suffix2 already exists.'],
995.         )
996. 
997.     def test_explicitpk_unspecified(self):
998.         """Test for primary_key being in the form and failing validation."""
999.         form = ExplicitPKForm({'key': '', 'desc': ''})
1000.         self.assertFalse(form.is_valid())
1001. 
1002.     def test_explicitpk_unique(self):
1003.         """Ensure keys and blank character strings are tested for uniqueness."""
1004.         form = ExplicitPKForm({'key': 'key1', 'desc': ''})
1005.         self.assertTrue(form.is_valid())
1006.         form.save()
1007.         form = ExplicitPKForm({'key': 'key1', 'desc': ''})
1008.         self.assertFalse(form.is_valid())
1009.         if connection.features.interprets_empty_strings_as_nulls:
1010.             self.assertEqual(len(form.errors), 1)
1011.             self.assertEqual(form.errors['key'], ['Explicit pk with this Key already exists.'])
1012.         else:
1013.             self.assertEqual(len(form.errors), 3)
1014.             self.assertEqual(form.errors['__all__'], ['Explicit pk with this Key and Desc already exists.'])
1015.             self.assertEqual(form.errors['desc'], ['Explicit pk with this Desc already exists.'])
1016.             self.assertEqual(form.errors['key'], ['Explicit pk with this Key already exists.'])
1017. 
1018.     def test_unique_for_date(self):
1019.         p = Post.objects.create(
1020.             title="Django 1.0 is released", slug="Django 1.0",
1021.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1022.         )
1023.         form = PostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1024.         self.assertFalse(form.is_valid())
1025.         self.assertEqual(len(form.errors), 1)
1026.         self.assertEqual(form.errors['title'], ['Title must be unique for Posted date.'])
1027.         form = PostForm({'title': "Work on Django 1.1 begins", 'posted': '2008-09-03'})
1028.         self.assertTrue(form.is_valid())
1029.         form = PostForm({'title': "Django 1.0 is released", 'posted': '2008-09-04'})
1030.         self.assertTrue(form.is_valid())
1031.         form = PostForm({'slug': "Django 1.0", 'posted': '2008-01-01'})
1032.         self.assertFalse(form.is_valid())
1033.         self.assertEqual(len(form.errors), 1)
1034.         self.assertEqual(form.errors['slug'], ['Slug must be unique for Posted year.'])
1035.         form = PostForm({'subtitle': "Finally", 'posted': '2008-09-30'})
1036.         self.assertFalse(form.is_valid())
1037.         self.assertEqual(form.errors['subtitle'], ['Subtitle must be unique for Posted month.'])
1038.         data = {'subtitle': "Finally", "title": "Django 1.0 is released", "slug": "Django 1.0", 'posted': '2008-09-03'}
1039.         form = PostForm(data, instance=p)
1040.         self.assertTrue(form.is_valid())
1041.         form = PostForm({'title': "Django 1.0 is released"})
1042.         self.assertFalse(form.is_valid())
1043.         self.assertEqual(len(form.errors), 1)
1044.         self.assertEqual(form.errors['posted'], ['This field is required.'])
1045. 
1046.     def test_unique_for_date_in_exclude(self):
1047.         """
1048.         If the date for unique_for_* constraints is excluded from the
1049.         ModelForm (in this case 'posted' has editable=False, then the
1050.         constraint should be ignored.
1051.         """
1052.         class DateTimePostForm(forms.ModelForm):
1053.             class Meta:
1054.                 model = DateTimePost
1055.                 fields = '__all__'
1056. 
1057.         DateTimePost.objects.create(
1058.             title="Django 1.0 is released", slug="Django 1.0",
1059.             subtitle="Finally", posted=datetime.datetime(2008, 9, 3, 10, 10, 1),
1060.         )
1061.         # 'title' has unique_for_date='posted'
1062.         form = DateTimePostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1063.         self.assertTrue(form.is_valid())
1064.         # 'slug' has unique_for_year='posted'
1065.         form = DateTimePostForm({'slug': "Django 1.0", 'posted': '2008-01-01'})
1066.         self.assertTrue(form.is_valid())
1067.         # 'subtitle' has unique_for_month='posted'
1068.         form = DateTimePostForm({'subtitle': "Finally", 'posted': '2008-09-30'})
1069.         self.assertTrue(form.is_valid())
1070. 
1071.     def test_inherited_unique_for_date(self):
1072.         p = Post.objects.create(
1073.             title="Django 1.0 is released", slug="Django 1.0",
1074.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1075.         )
1076.         form = DerivedPostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1077.         self.assertFalse(form.is_valid())
1078.         self.assertEqual(len(form.errors), 1)
1079.         self.assertEqual(form.errors['title'], ['Title must be unique for Posted date.'])
1080.         form = DerivedPostForm({'title': "Work on Django 1.1 begins", 'posted': '2008-09-03'})
1081.         self.assertTrue(form.is_valid())
1082.         form = DerivedPostForm({'title': "Django 1.0 is released", 'posted': '2008-09-04'})
1083.         self.assertTrue(form.is_valid())
1084.         form = DerivedPostForm({'slug': "Django 1.0", 'posted': '2008-01-01'})
1085.         self.assertFalse(form.is_valid())
1086.         self.assertEqual(len(form.errors), 1)
1087.         self.assertEqual(form.errors['slug'], ['Slug must be unique for Posted year.'])
1088.         form = DerivedPostForm({'subtitle': "Finally", 'posted': '2008-09-30'})
1089.         self.assertFalse(form.is_valid())
1090.         self.assertEqual(form.errors['subtitle'], ['Subtitle must be unique for Posted month.'])
1091.         data = {'subtitle': "Finally", "title": "Django 1.0 is released", "slug": "Django 1.0", 'posted': '2008-09-03'}
1092.         form = DerivedPostForm(data, instance=p)
1093.         self.assertTrue(form.is_valid())
1094. 
1095.     def test_unique_for_date_with_nullable_date(self):
1096.         class FlexDatePostForm(forms.ModelForm):
1097.             class Meta:
1098.                 model = FlexibleDatePost
1099.                 fields = '__all__'
1100. 
1101.         p = FlexibleDatePost.objects.create(
1102.             title="Django 1.0 is released", slug="Django 1.0",
1103.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1104.         )
1105. 
1106.         form = FlexDatePostForm({'title': "Django 1.0 is released"})
1107.         self.assertTrue(form.is_valid())
1108.         form = FlexDatePostForm({'slug': "Django 1.0"})
1109.         self.assertTrue(form.is_valid())
1110.         form = FlexDatePostForm({'subtitle': "Finally"})
1111.         self.assertTrue(form.is_valid())
1112.         data = {'subtitle': "Finally", "title": "Django 1.0 is released", "slug": "Django 1.0"}
1113.         form = FlexDatePostForm(data, instance=p)
1114.         self.assertTrue(form.is_valid())
1115. 
1116.     def test_override_unique_message(self):
1117.         class CustomProductForm(ProductForm):
1118.             class Meta(ProductForm.Meta):
1119.                 error_messages = {
1120.                     'slug': {
1121.                         'unique': "%(model_name)s's %(field_label)s not unique.",
1122.                     }
1123.                 }
1124. 
1125.         Product.objects.create(slug='teddy-bear-blue')
1126.         form = CustomProductForm({'slug': 'teddy-bear-blue'})
1127.         self.assertEqual(len(form.errors), 1)
1128.         self.assertEqual(form.errors['slug'], ["Product's Slug not unique."])
1129. 
1130.     def test_override_unique_together_message(self):
1131.         class CustomPriceForm(PriceForm):
1132.             class Meta(PriceForm.Meta):
1133.                 error_messages = {
1134.                     NON_FIELD_ERRORS: {
1135.                         'unique_together': "%(model_name)s's %(field_labels)s not unique.",
1136.                     }
1137.                 }
1138. 
1139.         Price.objects.create(price=6.00, quantity=1)
1140.         form = CustomPriceForm({'price': '6.00', 'quantity': '1'})
1141.         self.assertEqual(len(form.errors), 1)
1142.         self.assertEqual(form.errors[NON_FIELD_ERRORS], ["Price's Price and Quantity not unique."])
1143. 
1144.     def test_override_unique_for_date_message(self):
1145.         class CustomPostForm(PostForm):
1146.             class Meta(PostForm.Meta):
1147.                 error_messages = {
1148.                     'title': {
1149.                         'unique_for_date': (
1150.                             "%(model_name)s's %(field_label)s not unique "
1151.                             "for %(date_field_label)s date."
1152.                         ),
1153.                     }
1154.                 }
1155. 
1156.         Post.objects.create(
1157.             title="Django 1.0 is released", slug="Django 1.0",
1158.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
1159.         )
1160.         form = CustomPostForm({'title': "Django 1.0 is released", 'posted': '2008-09-03'})
1161.         self.assertEqual(len(form.errors), 1)
1162.         self.assertEqual(form.errors['title'], ["Post's Title not unique for Posted date."])
1163. 
1164. 
1165. class ModelFormBasicTests(TestCase):
1166.     def create_basic_data(self):
1167.         self.c1 = Category.objects.create(name='Entertainment', slug='entertainment', url='entertainment')
1168.         self.c2 = Category.objects.create(name="It's a test", slug='its-test', url='test')
1169.         self.c3 = Category.objects.create(name='Third test', slug='third-test', url='third')
1170.         self.w_royko = Writer.objects.create(name='Mike Royko')
1171.         self.w_woodward = Writer.objects.create(name='Bob Woodward')
1172. 
1173.     def test_base_form(self):
1174.         self.assertEqual(Category.objects.count(), 0)
1175.         f = BaseCategoryForm()
1176.         self.assertHTMLEqual(
1177.             str(f),
1178.             """<tr><th><label for="id_name">Name:</label></th>
1179. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>
1180. <tr><th><label for="id_slug">Slug:</label></th>
1181. <td><input id="id_slug" type="text" name="slug" maxlength="20" required></td></tr>
1182. <tr><th><label for="id_url">The URL:</label></th>
1183. <td><input id="id_url" type="text" name="url" maxlength="40" required></td></tr>"""
1184.         )
1185.         self.assertHTMLEqual(
1186.             str(f.as_ul()),
1187.             """<li><label for="id_name">Name:</label> <input id="id_name" type="text" name="name" maxlength="20" required></li>
1188. <li><label for="id_slug">Slug:</label> <input id="id_slug" type="text" name="slug" maxlength="20" required></li>
1189. <li><label for="id_url">The URL:</label> <input id="id_url" type="text" name="url" maxlength="40" required></li>"""
1190.         )
1191.         self.assertHTMLEqual(
1192.             str(f["name"]),
1193.             """<input id="id_name" type="text" name="name" maxlength="20" required>""")
1194. 
1195.     def test_auto_id(self):
1196.         f = BaseCategoryForm(auto_id=False)
1197.         self.assertHTMLEqual(
1198.             str(f.as_ul()),
1199.             """<li>Name: <input type="text" name="name" maxlength="20" required></li>
1200. <li>Slug: <input type="text" name="slug" maxlength="20" required></li>
1201. <li>The URL: <input type="text" name="url" maxlength="40" required></li>"""
1202.         )
1203. 
1204.     def test_initial_values(self):
1205.         self.create_basic_data()
1206.         # Initial values can be provided for model forms
1207.         f = ArticleForm(
1208.             auto_id=False,
1209.             initial={
1210.                 'headline': 'Your headline here',
1211.                 'categories': [str(self.c1.id), str(self.c2.id)]
1212.             })
1213.         self.assertHTMLEqual(
1214.             f.as_ul(),
1215.             '''<li>Headline: <input type="text" name="headline" value="Your headline here" maxlength="50" required></li>
1216. <li>Slug: <input type="text" name="slug" maxlength="50" required></li>
1217. <li>Pub date: <input type="text" name="pub_date" required></li>
1218. <li>Writer: <select name="writer" required>
1219. <option value="" selected>---------</option>
1220. <option value="%s">Bob Woodward</option>
1221. <option value="%s">Mike Royko</option>
1222. </select></li>
1223. <li>Article: <textarea rows="10" cols="40" name="article" required></textarea></li>
1224. <li>Categories: <select multiple name="categories">
1225. <option value="%s" selected>Entertainment</option>
1226. <option value="%s" selected>It&#x27;s a test</option>
1227. <option value="%s">Third test</option>
1228. </select></li>
1229. <li>Status: <select name="status">
1230. <option value="" selected>---------</option>
1231. <option value="1">Draft</option>
1232. <option value="2">Pending</option>
1233. <option value="3">Live</option>
1234. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1235. 
1236.         # When the ModelForm is passed an instance, that instance's current values are
1237.         # inserted as 'initial' data in each Field.
1238.         f = RoykoForm(auto_id=False, instance=self.w_royko)
1239.         self.assertHTMLEqual(
1240.             str(f),
1241.             '''<tr><th>Name:</th><td><input type="text" name="name" value="Mike Royko" maxlength="50" required><br>
1242.             <span class="helptext">Use both first and last names.</span></td></tr>'''
1243.         )
1244. 
1245.         art = Article.objects.create(
1246.             headline='Test article',
1247.             slug='test-article',
1248.             pub_date=datetime.date(1988, 1, 4),
1249.             writer=self.w_royko,
1250.             article='Hello.'
1251.         )
1252.         art_id_1 = art.id
1253. 
1254.         f = ArticleForm(auto_id=False, instance=art)
1255.         self.assertHTMLEqual(
1256.             f.as_ul(),
1257.             '''<li>Headline: <input type="text" name="headline" value="Test article" maxlength="50" required></li>
1258. <li>Slug: <input type="text" name="slug" value="test-article" maxlength="50" required></li>
1259. <li>Pub date: <input type="text" name="pub_date" value="1988-01-04" required></li>
1260. <li>Writer: <select name="writer" required>
1261. <option value="">---------</option>
1262. <option value="%s">Bob Woodward</option>
1263. <option value="%s" selected>Mike Royko</option>
1264. </select></li>
1265. <li>Article: <textarea rows="10" cols="40" name="article" required>Hello.</textarea></li>
1266. <li>Categories: <select multiple name="categories">
1267. <option value="%s">Entertainment</option>
1268. <option value="%s">It&#x27;s a test</option>
1269. <option value="%s">Third test</option>
1270. </select></li>
1271. <li>Status: <select name="status">
1272. <option value="" selected>---------</option>
1273. <option value="1">Draft</option>
1274. <option value="2">Pending</option>
1275. <option value="3">Live</option>
1276. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1277. 
1278.         f = ArticleForm({
1279.             'headline': 'Test headline',
1280.             'slug': 'test-headline',
1281.             'pub_date': '1984-02-06',
1282.             'writer': str(self.w_royko.pk),
1283.             'article': 'Hello.'
1284.         }, instance=art)
1285.         self.assertEqual(f.errors, {})
1286.         self.assertTrue(f.is_valid())
1287.         test_art = f.save()
1288.         self.assertEqual(test_art.id, art_id_1)
1289.         test_art = Article.objects.get(id=art_id_1)
1290.         self.assertEqual(test_art.headline, 'Test headline')
1291. 
1292.     def test_m2m_initial_callable(self):
1293.         """
1294.         Regression for #10349: A callable can be provided as the initial value for an m2m field
1295.         """
1296.         self.maxDiff = 1200
1297.         self.create_basic_data()
1298. 
1299.         # Set up a callable initial value
1300.         def formfield_for_dbfield(db_field, **kwargs):
1301.             if db_field.name == 'categories':
1302.                 kwargs['initial'] = lambda: Category.objects.all().order_by('name')[:2]
1303.             return db_field.formfield(**kwargs)
1304. 
1305.         # Create a ModelForm, instantiate it, and check that the output is as expected
1306.         ModelForm = modelform_factory(
1307.             Article,
1308.             fields=['headline', 'categories'],
1309.             formfield_callback=formfield_for_dbfield,
1310.         )
1311.         form = ModelForm()
1312.         self.assertHTMLEqual(
1313.             form.as_ul(),
1314.             """<li><label for="id_headline">Headline:</label>
1315. <input id="id_headline" type="text" name="headline" maxlength="50" required></li>
1316. <li><label for="id_categories">Categories:</label>
1317. <select multiple name="categories" id="id_categories">
1318. <option value="%d" selected>Entertainment</option>
1319. <option value="%d" selected>It&#x27;s a test</option>
1320. <option value="%d">Third test</option>
1321. </select></li>"""
1322.             % (self.c1.pk, self.c2.pk, self.c3.pk))
1323. 
1324.     def test_basic_creation(self):
1325.         self.assertEqual(Category.objects.count(), 0)
1326.         f = BaseCategoryForm({
1327.             'name': 'Entertainment',
1328.             'slug': 'entertainment',
1329.             'url': 'entertainment',
1330.         })
1331.         self.assertTrue(f.is_valid())
1332.         self.assertEqual(f.cleaned_data['name'], 'Entertainment')
1333.         self.assertEqual(f.cleaned_data['slug'], 'entertainment')
1334.         self.assertEqual(f.cleaned_data['url'], 'entertainment')
1335.         c1 = f.save()
1336.         # Testing whether the same object is returned from the
1337.         # ORM... not the fastest way...
1338. 
1339.         self.assertEqual(Category.objects.count(), 1)
1340.         self.assertEqual(c1, Category.objects.all()[0])
1341.         self.assertEqual(c1.name, "Entertainment")
1342. 
1343.     def test_save_commit_false(self):
1344.         # If you call save() with commit=False, then it will return an object that
1345.         # hasn't yet been saved to the database. In this case, it's up to you to call
1346.         # save() on the resulting model instance.
1347.         f = BaseCategoryForm({'name': 'Third test', 'slug': 'third-test', 'url': 'third'})
1348.         self.assertTrue(f.is_valid())
1349.         c1 = f.save(commit=False)
1350.         self.assertEqual(c1.name, "Third test")
1351.         self.assertEqual(Category.objects.count(), 0)
1352.         c1.save()
1353.         self.assertEqual(Category.objects.count(), 1)
1354. 
1355.     def test_save_with_data_errors(self):
1356.         # If you call save() with invalid data, you'll get a ValueError.
1357.         f = BaseCategoryForm({'name': '', 'slug': 'not a slug!', 'url': 'foo'})
1358.         self.assertEqual(f.errors['name'], ['This field is required.'])
1359.         self.assertEqual(
1360.             f.errors['slug'],
1361.             ['Enter a valid “slug” consisting of letters, numbers, underscores or hyphens.']
1362.         )
1363.         self.assertEqual(f.cleaned_data, {'url': 'foo'})
1364.         msg = "The Category could not be created because the data didn't validate."
1365.         with self.assertRaisesMessage(ValueError, msg):
1366.             f.save()
1367.         f = BaseCategoryForm({'name': '', 'slug': '', 'url': 'foo'})
1368.         with self.assertRaisesMessage(ValueError, msg):
1369.             f.save()
1370. 
1371.     def test_multi_fields(self):
1372.         self.create_basic_data()
1373.         self.maxDiff = None
1374.         # ManyToManyFields are represented by a MultipleChoiceField, ForeignKeys and any
1375.         # fields with the 'choices' attribute are represented by a ChoiceField.
1376.         f = ArticleForm(auto_id=False)
1377.         self.assertHTMLEqual(
1378.             str(f),
1379.             '''<tr><th>Headline:</th><td><input type="text" name="headline" maxlength="50" required></td></tr>
1380. <tr><th>Slug:</th><td><input type="text" name="slug" maxlength="50" required></td></tr>
1381. <tr><th>Pub date:</th><td><input type="text" name="pub_date" required></td></tr>
1382. <tr><th>Writer:</th><td><select name="writer" required>
1383. <option value="" selected>---------</option>
1384. <option value="%s">Bob Woodward</option>
1385. <option value="%s">Mike Royko</option>
1386. </select></td></tr>
1387. <tr><th>Article:</th><td><textarea rows="10" cols="40" name="article" required></textarea></td></tr>
1388. <tr><th>Categories:</th><td><select multiple name="categories">
1389. <option value="%s">Entertainment</option>
1390. <option value="%s">It&#x27;s a test</option>
1391. <option value="%s">Third test</option>
1392. </select></td></tr>
1393. <tr><th>Status:</th><td><select name="status">
1394. <option value="" selected>---------</option>
1395. <option value="1">Draft</option>
1396. <option value="2">Pending</option>
1397. <option value="3">Live</option>
1398. </select></td></tr>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1399. 
1400.         # Add some categories and test the many-to-many form output.
1401.         new_art = Article.objects.create(
1402.             article="Hello.", headline="New headline", slug="new-headline",
1403.             pub_date=datetime.date(1988, 1, 4), writer=self.w_royko)
1404.         new_art.categories.add(Category.objects.get(name='Entertainment'))
1405.         self.assertQuerysetEqual(new_art.categories.all(), ["Entertainment"])
1406.         f = ArticleForm(auto_id=False, instance=new_art)
1407.         self.assertHTMLEqual(
1408.             f.as_ul(),
1409.             '''<li>Headline: <input type="text" name="headline" value="New headline" maxlength="50" required></li>
1410. <li>Slug: <input type="text" name="slug" value="new-headline" maxlength="50" required></li>
1411. <li>Pub date: <input type="text" name="pub_date" value="1988-01-04" required></li>
1412. <li>Writer: <select name="writer" required>
1413. <option value="">---------</option>
1414. <option value="%s">Bob Woodward</option>
1415. <option value="%s" selected>Mike Royko</option>
1416. </select></li>
1417. <li>Article: <textarea rows="10" cols="40" name="article" required>Hello.</textarea></li>
1418. <li>Categories: <select multiple name="categories">
1419. <option value="%s" selected>Entertainment</option>
1420. <option value="%s">It&#x27;s a test</option>
1421. <option value="%s">Third test</option>
1422. </select></li>
1423. <li>Status: <select name="status">
1424. <option value="" selected>---------</option>
1425. <option value="1">Draft</option>
1426. <option value="2">Pending</option>
1427. <option value="3">Live</option>
1428. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1429. 
1430.     def test_subset_fields(self):
1431.         # You can restrict a form to a subset of the complete list of fields
1432.         # by providing a 'fields' argument. If you try to save a
1433.         # model created with such a form, you need to ensure that the fields
1434.         # that are _not_ on the form have default values, or are allowed to have
1435.         # a value of None. If a field isn't specified on a form, the object created
1436.         # from the form can't provide a value for that field!
1437.         class PartialArticleForm(forms.ModelForm):
1438.             class Meta:
1439.                 model = Article
1440.                 fields = ('headline', 'pub_date')
1441. 
1442.         f = PartialArticleForm(auto_id=False)
1443.         self.assertHTMLEqual(
1444.             str(f),
1445.             '''<tr><th>Headline:</th><td><input type="text" name="headline" maxlength="50" required></td></tr>
1446. <tr><th>Pub date:</th><td><input type="text" name="pub_date" required></td></tr>''')
1447. 
1448.         class PartialArticleFormWithSlug(forms.ModelForm):
1449.             class Meta:
1450.                 model = Article
1451.                 fields = ('headline', 'slug', 'pub_date')
1452. 
1453.         w_royko = Writer.objects.create(name='Mike Royko')
1454.         art = Article.objects.create(
1455.             article="Hello.", headline="New headline", slug="new-headline",
1456.             pub_date=datetime.date(1988, 1, 4), writer=w_royko)
1457.         f = PartialArticleFormWithSlug({
1458.             'headline': 'New headline',
1459.             'slug': 'new-headline',
1460.             'pub_date': '1988-01-04'
1461.         }, auto_id=False, instance=art)
1462.         self.assertHTMLEqual(
1463.             f.as_ul(),
1464.             '''<li>Headline: <input type="text" name="headline" value="New headline" maxlength="50" required></li>
1465. <li>Slug: <input type="text" name="slug" value="new-headline" maxlength="50" required></li>
1466. <li>Pub date: <input type="text" name="pub_date" value="1988-01-04" required></li>'''
1467.         )
1468.         self.assertTrue(f.is_valid())
1469.         new_art = f.save()
1470.         self.assertEqual(new_art.id, art.id)
1471.         new_art = Article.objects.get(id=art.id)
1472.         self.assertEqual(new_art.headline, 'New headline')
1473. 
1474.     def test_m2m_editing(self):
1475.         self.create_basic_data()
1476.         form_data = {
1477.             'headline': 'New headline',
1478.             'slug': 'new-headline',
1479.             'pub_date': '1988-01-04',
1480.             'writer': str(self.w_royko.pk),
1481.             'article': 'Hello.',
1482.             'categories': [str(self.c1.id), str(self.c2.id)]
1483.         }
1484.         # Create a new article, with categories, via the form.
1485.         f = ArticleForm(form_data)
1486.         new_art = f.save()
1487.         new_art = Article.objects.get(id=new_art.id)
1488.         art_id_1 = new_art.id
1489.         self.assertQuerysetEqual(new_art.categories.order_by('name'), ["Entertainment", "It's a test"])
1490. 
1491.         # Now, submit form data with no categories. This deletes the existing categories.
1492.         form_data['categories'] = []
1493.         f = ArticleForm(form_data, instance=new_art)
1494.         new_art = f.save()
1495.         self.assertEqual(new_art.id, art_id_1)
1496.         new_art = Article.objects.get(id=art_id_1)
1497.         self.assertQuerysetEqual(new_art.categories.all(), [])
1498. 
1499.         # Create a new article, with no categories, via the form.
1500.         f = ArticleForm(form_data)
1501.         new_art = f.save()
1502.         art_id_2 = new_art.id
1503.         self.assertNotIn(art_id_2, (None, art_id_1))
1504.         new_art = Article.objects.get(id=art_id_2)
1505.         self.assertQuerysetEqual(new_art.categories.all(), [])
1506. 
1507.         # Create a new article, with categories, via the form, but use commit=False.
1508.         # The m2m data won't be saved until save_m2m() is invoked on the form.
1509.         form_data['categories'] = [str(self.c1.id), str(self.c2.id)]
1510.         f = ArticleForm(form_data)
1511.         new_art = f.save(commit=False)
1512. 
1513.         # Manually save the instance
1514.         new_art.save()
1515.         art_id_3 = new_art.id
1516.         self.assertNotIn(art_id_3, (None, art_id_1, art_id_2))
1517. 
1518.         # The instance doesn't have m2m data yet
1519.         new_art = Article.objects.get(id=art_id_3)
1520.         self.assertQuerysetEqual(new_art.categories.all(), [])
1521. 
1522.         # Save the m2m data on the form
1523.         f.save_m2m()
1524.         self.assertQuerysetEqual(new_art.categories.order_by('name'), ["Entertainment", "It's a test"])
1525. 
1526.     def test_custom_form_fields(self):
1527.         # Here, we define a custom ModelForm. Because it happens to have the same fields as
1528.         # the Category model, we can just call the form's save() to apply its changes to an
1529.         # existing Category instance.
1530.         class ShortCategory(forms.ModelForm):
1531.             name = forms.CharField(max_length=5)
1532.             slug = forms.CharField(max_length=5)
1533.             url = forms.CharField(max_length=3)
1534. 
1535.             class Meta:
1536.                 model = Category
1537.                 fields = '__all__'
1538. 
1539.         cat = Category.objects.create(name='Third test')
1540.         form = ShortCategory({'name': 'Third', 'slug': 'third', 'url': '3rd'}, instance=cat)
1541.         self.assertEqual(form.save().name, 'Third')
1542.         self.assertEqual(Category.objects.get(id=cat.id).name, 'Third')
1543. 
1544.     def test_runtime_choicefield_populated(self):
1545.         self.maxDiff = None
1546.         # Here, we demonstrate that choices for a ForeignKey ChoiceField are determined
1547.         # at runtime, based on the data in the database when the form is displayed, not
1548.         # the data in the database when the form is instantiated.
1549.         self.create_basic_data()
1550.         f = ArticleForm(auto_id=False)
1551.         self.assertHTMLEqual(
1552.             f.as_ul(),
1553.             '''<li>Headline: <input type="text" name="headline" maxlength="50" required></li>
1554. <li>Slug: <input type="text" name="slug" maxlength="50" required></li>
1555. <li>Pub date: <input type="text" name="pub_date" required></li>
1556. <li>Writer: <select name="writer" required>
1557. <option value="" selected>---------</option>
1558. <option value="%s">Bob Woodward</option>
1559. <option value="%s">Mike Royko</option>
1560. </select></li>
1561. <li>Article: <textarea rows="10" cols="40" name="article" required></textarea></li>
1562. <li>Categories: <select multiple name="categories">
1563. <option value="%s">Entertainment</option>
1564. <option value="%s">It&#x27;s a test</option>
1565. <option value="%s">Third test</option>
1566. </select> </li>
1567. <li>Status: <select name="status">
1568. <option value="" selected>---------</option>
1569. <option value="1">Draft</option>
1570. <option value="2">Pending</option>
1571. <option value="3">Live</option>
1572. </select></li>''' % (self.w_woodward.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk))
1573. 
1574.         c4 = Category.objects.create(name='Fourth', url='4th')
1575.         w_bernstein = Writer.objects.create(name='Carl Bernstein')
1576.         self.assertHTMLEqual(
1577.             f.as_ul(),
1578.             '''<li>Headline: <input type="text" name="headline" maxlength="50" required></li>
1579. <li>Slug: <input type="text" name="slug" maxlength="50" required></li>
1580. <li>Pub date: <input type="text" name="pub_date" required></li>
1581. <li>Writer: <select name="writer" required>
1582. <option value="" selected>---------</option>
1583. <option value="%s">Bob Woodward</option>
1584. <option value="%s">Carl Bernstein</option>
1585. <option value="%s">Mike Royko</option>
1586. </select></li>
1587. <li>Article: <textarea rows="10" cols="40" name="article" required></textarea></li>
1588. <li>Categories: <select multiple name="categories">
1589. <option value="%s">Entertainment</option>
1590. <option value="%s">It&#x27;s a test</option>
1591. <option value="%s">Third test</option>
1592. <option value="%s">Fourth</option>
1593. </select></li>
1594. <li>Status: <select name="status">
1595. <option value="" selected>---------</option>
1596. <option value="1">Draft</option>
1597. <option value="2">Pending</option>
1598. <option value="3">Live</option>
1599. </select></li>''' % (self.w_woodward.pk, w_bernstein.pk, self.w_royko.pk, self.c1.pk, self.c2.pk, self.c3.pk, c4.pk))
1600. 
1601.     def test_recleaning_model_form_instance(self):
1602.         """
1603.         Re-cleaning an instance that was added via a ModelForm shouldn't raise
1604.         a pk uniqueness error.
1605.         """
1606.         class AuthorForm(forms.ModelForm):
1607.             class Meta:
1608.                 model = Author
1609.                 fields = '__all__'
1610. 
1611.         form = AuthorForm({'full_name': 'Bob'})
1612.         self.assertTrue(form.is_valid())
1613.         obj = form.save()
1614.         obj.name = 'Alice'
1615.         obj.full_clean()
1616. 
1617. 
1618. class ModelMultipleChoiceFieldTests(TestCase):
1619.     @classmethod
1620.     def setUpTestData(cls):
1621.         cls.c1 = Category.objects.create(name='Entertainment', slug='entertainment', url='entertainment')
1622.         cls.c2 = Category.objects.create(name="It's a test", slug='its-test', url='test')
1623.         cls.c3 = Category.objects.create(name='Third', slug='third-test', url='third')
1624. 
1625.     def test_model_multiple_choice_field(self):
1626.         f = forms.ModelMultipleChoiceField(Category.objects.all())
1627.         self.assertEqual(list(f.choices), [
1628.             (self.c1.pk, 'Entertainment'),
1629.             (self.c2.pk, "It's a test"),
1630.             (self.c3.pk, 'Third')])
1631.         with self.assertRaises(ValidationError):
1632.             f.clean(None)
1633.         with self.assertRaises(ValidationError):
1634.             f.clean([])
1635.         self.assertQuerysetEqual(f.clean([self.c1.id]), ["Entertainment"])
1636.         self.assertQuerysetEqual(f.clean([self.c2.id]), ["It's a test"])
1637.         self.assertQuerysetEqual(f.clean([str(self.c1.id)]), ["Entertainment"])
1638.         self.assertQuerysetEqual(
1639.             f.clean([str(self.c1.id), str(self.c2.id)]),
1640.             ["Entertainment", "It's a test"], ordered=False
1641.         )
1642.         self.assertQuerysetEqual(
1643.             f.clean([self.c1.id, str(self.c2.id)]),
1644.             ["Entertainment", "It's a test"], ordered=False
1645.         )
1646.         self.assertQuerysetEqual(
1647.             f.clean((self.c1.id, str(self.c2.id))),
1648.             ["Entertainment", "It's a test"], ordered=False
1649.         )
1650.         with self.assertRaises(ValidationError):
1651.             f.clean(['100'])
1652.         with self.assertRaises(ValidationError):
1653.             f.clean('hello')
1654.         with self.assertRaises(ValidationError):
1655.             f.clean(['fail'])
1656. 
1657.         # Invalid types that require TypeError to be caught (#22808).
1658.         with self.assertRaises(ValidationError):
1659.             f.clean([['fail']])
1660.         with self.assertRaises(ValidationError):
1661.             f.clean([{'foo': 'bar'}])
1662. 
1663.         # Add a Category object *after* the ModelMultipleChoiceField has already been
1664.         # instantiated. This proves clean() checks the database during clean() rather
1665.         # than caching it at time of instantiation.
1666.         # Note, we are using an id of 1006 here since tests that run before
1667.         # this may create categories with primary keys up to 6. Use
1668.         # a number that will not conflict.
1669.         c6 = Category.objects.create(id=1006, name='Sixth', url='6th')
1670.         self.assertQuerysetEqual(f.clean([c6.id]), ["Sixth"])
1671. 
1672.         # Delete a Category object *after* the ModelMultipleChoiceField has already been
1673.         # instantiated. This proves clean() checks the database during clean() rather
1674.         # than caching it at time of instantiation.
1675.         Category.objects.get(url='6th').delete()
1676.         with self.assertRaises(ValidationError):
1677.             f.clean([c6.id])
1678. 
1679.     def test_model_multiple_choice_required_false(self):
1680.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
1681.         self.assertIsInstance(f.clean([]), EmptyQuerySet)
1682.         self.assertIsInstance(f.clean(()), EmptyQuerySet)
1683.         with self.assertRaises(ValidationError):
1684.             f.clean(['0'])
1685.         with self.assertRaises(ValidationError):
1686.             f.clean([str(self.c3.id), '0'])
1687.         with self.assertRaises(ValidationError):
1688.             f.clean([str(self.c1.id), '0'])
1689. 
1690.         # queryset can be changed after the field is created.
1691.         f.queryset = Category.objects.exclude(name='Third')
1692.         self.assertEqual(list(f.choices), [
1693.             (self.c1.pk, 'Entertainment'),
1694.             (self.c2.pk, "It's a test")])
1695.         self.assertQuerysetEqual(f.clean([self.c2.id]), ["It's a test"])
1696.         with self.assertRaises(ValidationError):
1697.             f.clean([self.c3.id])
1698.         with self.assertRaises(ValidationError):
1699.             f.clean([str(self.c2.id), str(self.c3.id)])
1700. 
1701.         f.queryset = Category.objects.all()
1702.         f.label_from_instance = lambda obj: "multicategory " + str(obj)
1703.         self.assertEqual(list(f.choices), [
1704.             (self.c1.pk, 'multicategory Entertainment'),
1705.             (self.c2.pk, "multicategory It's a test"),
1706.             (self.c3.pk, 'multicategory Third')])
1707. 
1708.     def test_model_multiple_choice_number_of_queries(self):
1709.         """
1710.         ModelMultipleChoiceField does O(1) queries instead of O(n) (#10156).
1711.         """
1712.         persons = [Writer.objects.create(name="Person %s" % i) for i in range(30)]
1713. 
1714.         f = forms.ModelMultipleChoiceField(queryset=Writer.objects.all())
1715.         self.assertNumQueries(1, f.clean, [p.pk for p in persons[1:11:2]])
1716. 
1717.     def test_model_multiple_choice_run_validators(self):
1718.         """
1719.         ModelMultipleChoiceField run given validators (#14144).
1720.         """
1721.         for i in range(30):
1722.             Writer.objects.create(name="Person %s" % i)
1723. 
1724.         self._validator_run = False
1725. 
1726.         def my_validator(value):
1727.             self._validator_run = True
1728. 
1729.         f = forms.ModelMultipleChoiceField(queryset=Writer.objects.all(), validators=[my_validator])
1730.         f.clean([p.pk for p in Writer.objects.all()[8:9]])
1731.         self.assertTrue(self._validator_run)
1732. 
1733.     def test_model_multiple_choice_show_hidden_initial(self):
1734.         """
1735.         Test support of show_hidden_initial by ModelMultipleChoiceField.
1736.         """
1737.         class WriterForm(forms.Form):
1738.             persons = forms.ModelMultipleChoiceField(show_hidden_initial=True, queryset=Writer.objects.all())
1739. 
1740.         person1 = Writer.objects.create(name="Person 1")
1741.         person2 = Writer.objects.create(name="Person 2")
1742. 
1743.         form = WriterForm(
1744.             initial={'persons': [person1, person2]},
1745.             data={
1746.                 'initial-persons': [str(person1.pk), str(person2.pk)],
1747.                 'persons': [str(person1.pk), str(person2.pk)],
1748.             },
1749.         )
1750.         self.assertTrue(form.is_valid())
1751.         self.assertFalse(form.has_changed())
1752. 
1753.         form = WriterForm(
1754.             initial={'persons': [person1, person2]},
1755.             data={
1756.                 'initial-persons': [str(person1.pk), str(person2.pk)],
1757.                 'persons': [str(person2.pk)],
1758.             },
1759.         )
1760.         self.assertTrue(form.is_valid())
1761.         self.assertTrue(form.has_changed())
1762. 
1763.     def test_model_multiple_choice_field_22745(self):
1764.         """
1765.         #22745 -- Make sure that ModelMultipleChoiceField with
1766.         CheckboxSelectMultiple widget doesn't produce unnecessary db queries
1767.         when accessing its BoundField's attrs.
1768.         """
1769.         class ModelMultipleChoiceForm(forms.Form):
1770.             categories = forms.ModelMultipleChoiceField(Category.objects.all(), widget=forms.CheckboxSelectMultiple)
1771. 
1772.         form = ModelMultipleChoiceForm()
1773.         field = form['categories']  # BoundField
1774.         template = Template('{{ field.name }}{{ field }}{{ field.help_text }}')
1775.         with self.assertNumQueries(1):
1776.             template.render(Context({'field': field}))
1777. 
1778.     def test_show_hidden_initial_changed_queries_efficiently(self):
1779.         class WriterForm(forms.Form):
1780.             persons = forms.ModelMultipleChoiceField(
1781.                 show_hidden_initial=True, queryset=Writer.objects.all())
1782. 
1783.         writers = (Writer.objects.create(name=str(x)) for x in range(0, 50))
1784.         writer_pks = tuple(x.pk for x in writers)
1785.         form = WriterForm(data={'initial-persons': writer_pks})
1786.         with self.assertNumQueries(1):
1787.             self.assertTrue(form.has_changed())
1788. 
1789.     def test_clean_does_deduplicate_values(self):
1790.         class WriterForm(forms.Form):
1791.             persons = forms.ModelMultipleChoiceField(queryset=Writer.objects.all())
1792. 
1793.         person1 = Writer.objects.create(name="Person 1")
1794.         form = WriterForm(data={})
1795.         queryset = form.fields['persons'].clean([str(person1.pk)] * 50)
1796.         sql, params = queryset.query.sql_with_params()
1797.         self.assertEqual(len(params), 1)
1798. 
1799.     def test_to_field_name_with_initial_data(self):
1800.         class ArticleCategoriesForm(forms.ModelForm):
1801.             categories = forms.ModelMultipleChoiceField(Category.objects.all(), to_field_name='slug')
1802. 
1803.             class Meta:
1804.                 model = Article
1805.                 fields = ['categories']
1806. 
1807.         article = Article.objects.create(
1808.             headline='Test article',
1809.             slug='test-article',
1810.             pub_date=datetime.date(1988, 1, 4),
1811.             writer=Writer.objects.create(name='Test writer'),
1812.             article='Hello.',
1813.         )
1814.         article.categories.add(self.c2, self.c3)
1815.         form = ArticleCategoriesForm(instance=article)
1816.         self.assertCountEqual(form['categories'].value(), [self.c2.slug, self.c3.slug])
1817. 
1818. 
1819. class ModelOneToOneFieldTests(TestCase):
1820.     def test_modelform_onetoonefield(self):
1821.         class ImprovedArticleForm(forms.ModelForm):
1822.             class Meta:
1823.                 model = ImprovedArticle
1824.                 fields = '__all__'
1825. 
1826.         class ImprovedArticleWithParentLinkForm(forms.ModelForm):
1827.             class Meta:
1828.                 model = ImprovedArticleWithParentLink
1829.                 fields = '__all__'
1830. 
1831.         self.assertEqual(list(ImprovedArticleForm.base_fields), ['article'])
1832.         self.assertEqual(list(ImprovedArticleWithParentLinkForm.base_fields), [])
1833. 
1834.     def test_modelform_subclassed_model(self):
1835.         class BetterWriterForm(forms.ModelForm):
1836.             class Meta:
1837.                 # BetterWriter model is a subclass of Writer with an additional `score` field
1838.                 model = BetterWriter
1839.                 fields = '__all__'
1840. 
1841.         bw = BetterWriter.objects.create(name='Joe Better', score=10)
1842.         self.assertEqual(sorted(model_to_dict(bw)), ['id', 'name', 'score', 'writer_ptr'])
1843.         self.assertEqual(sorted(model_to_dict(bw, fields=[])), [])
1844.         self.assertEqual(sorted(model_to_dict(bw, fields=['id', 'name'])), ['id', 'name'])
1845.         self.assertEqual(sorted(model_to_dict(bw, exclude=[])), ['id', 'name', 'score', 'writer_ptr'])
1846.         self.assertEqual(sorted(model_to_dict(bw, exclude=['id', 'name'])), ['score', 'writer_ptr'])
1847. 
1848.         form = BetterWriterForm({'name': 'Some Name', 'score': 12})
1849.         self.assertTrue(form.is_valid())
1850.         bw2 = form.save()
1851.         self.assertEqual(bw2.score, 12)
1852. 
1853.     def test_onetoonefield(self):
1854.         class WriterProfileForm(forms.ModelForm):
1855.             class Meta:
1856.                 # WriterProfile has a OneToOneField to Writer
1857.                 model = WriterProfile
1858.                 fields = '__all__'
1859. 
1860.         self.w_royko = Writer.objects.create(name='Mike Royko')
1861.         self.w_woodward = Writer.objects.create(name='Bob Woodward')
1862. 
1863.         form = WriterProfileForm()
1864.         self.assertHTMLEqual(
1865.             form.as_p(),
1866.             '''<p><label for="id_writer">Writer:</label> <select name="writer" id="id_writer" required>
1867. <option value="" selected>---------</option>
1868. <option value="%s">Bob Woodward</option>
1869. <option value="%s">Mike Royko</option>
1870. </select></p>
1871. <p><label for="id_age">Age:</label> <input type="number" name="age" id="id_age" min="0" required></p>''' % (
1872.                 self.w_woodward.pk, self.w_royko.pk,
1873.             )
1874.         )
1875. 
1876.         data = {
1877.             'writer': str(self.w_woodward.pk),
1878.             'age': '65',
1879.         }
1880.         form = WriterProfileForm(data)
1881.         instance = form.save()
1882.         self.assertEqual(str(instance), 'Bob Woodward is 65')
1883. 
1884.         form = WriterProfileForm(instance=instance)
1885.         self.assertHTMLEqual(
1886.             form.as_p(),
1887.             '''<p><label for="id_writer">Writer:</label> <select name="writer" id="id_writer" required>
1888. <option value="">---------</option>
1889. <option value="%s" selected>Bob Woodward</option>
1890. <option value="%s">Mike Royko</option>
1891. </select></p>
1892. <p><label for="id_age">Age:</label>
1893. <input type="number" name="age" value="65" id="id_age" min="0" required></p>''' % (
1894.                 self.w_woodward.pk, self.w_royko.pk,
1895.             )
1896.         )
1897. 
1898.     def test_assignment_of_none(self):
1899.         class AuthorForm(forms.ModelForm):
1900.             class Meta:
1901.                 model = Author
1902.                 fields = ['publication', 'full_name']
1903. 
1904.         publication = Publication.objects.create(title="Pravda", date_published=datetime.date(1991, 8, 22))
1905.         author = Author.objects.create(publication=publication, full_name='John Doe')
1906.         form = AuthorForm({'publication': '', 'full_name': 'John Doe'}, instance=author)
1907.         self.assertTrue(form.is_valid())
1908.         self.assertIsNone(form.cleaned_data['publication'])
1909.         author = form.save()
1910.         # author object returned from form still retains original publication object
1911.         # that's why we need to retrieve it from database again
1912.         new_author = Author.objects.get(pk=author.pk)
1913.         self.assertIsNone(new_author.publication)
1914. 
1915.     def test_assignment_of_none_null_false(self):
1916.         class AuthorForm(forms.ModelForm):
1917.             class Meta:
1918.                 model = Author1
1919.                 fields = ['publication', 'full_name']
1920. 
1921.         publication = Publication.objects.create(title="Pravda", date_published=datetime.date(1991, 8, 22))
1922.         author = Author1.objects.create(publication=publication, full_name='John Doe')
1923.         form = AuthorForm({'publication': '', 'full_name': 'John Doe'}, instance=author)
1924.         self.assertFalse(form.is_valid())
1925. 
1926. 
1927. class FileAndImageFieldTests(TestCase):
1928.     def test_clean_false(self):
1929.         """
1930.         If the ``clean`` method on a non-required FileField receives False as
1931.         the data (meaning clear the field value), it returns False, regardless
1932.         of the value of ``initial``.
1933.         """
1934.         f = forms.FileField(required=False)
1935.         self.assertIs(f.clean(False), False)
1936.         self.assertIs(f.clean(False, 'initial'), False)
1937. 
1938.     def test_clean_false_required(self):
1939.         """
1940.         If the ``clean`` method on a required FileField receives False as the
1941.         data, it has the same effect as None: initial is returned if non-empty,
1942.         otherwise the validation catches the lack of a required value.
1943.         """
1944.         f = forms.FileField(required=True)
1945.         self.assertEqual(f.clean(False, 'initial'), 'initial')
1946.         with self.assertRaises(ValidationError):
1947.             f.clean(False)
1948. 
1949.     def test_full_clear(self):
1950.         """
1951.         Integration happy-path test that a model FileField can actually be set
1952.         and cleared via a ModelForm.
1953.         """
1954.         class DocumentForm(forms.ModelForm):
1955.             class Meta:
1956.                 model = Document
1957.                 fields = '__all__'
1958. 
1959.         form = DocumentForm()
1960.         self.assertIn('name="myfile"', str(form))
1961.         self.assertNotIn('myfile-clear', str(form))
1962.         form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', b'content')})
1963.         self.assertTrue(form.is_valid())
1964.         doc = form.save(commit=False)
1965.         self.assertEqual(doc.myfile.name, 'something.txt')
1966.         form = DocumentForm(instance=doc)
1967.         self.assertIn('myfile-clear', str(form))
1968.         form = DocumentForm(instance=doc, data={'myfile-clear': 'true'})
1969.         doc = form.save(commit=False)
1970.         self.assertFalse(doc.myfile)
1971. 
1972.     def test_clear_and_file_contradiction(self):
1973.         """
1974.         If the user submits a new file upload AND checks the clear checkbox,
1975.         they get a validation error, and the bound redisplay of the form still
1976.         includes the current file and the clear checkbox.
1977.         """
1978.         class DocumentForm(forms.ModelForm):
1979.             class Meta:
1980.                 model = Document
1981.                 fields = '__all__'
1982. 
1983.         form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', b'content')})
1984.         self.assertTrue(form.is_valid())
1985.         doc = form.save(commit=False)
1986.         form = DocumentForm(
1987.             instance=doc,
1988.             files={'myfile': SimpleUploadedFile('something.txt', b'content')},
1989.             data={'myfile-clear': 'true'},
1990.         )
1991.         self.assertTrue(not form.is_valid())
1992.         self.assertEqual(form.errors['myfile'],
1993.                          ['Please either submit a file or check the clear checkbox, not both.'])
1994.         rendered = str(form)
1995.         self.assertIn('something.txt', rendered)
1996.         self.assertIn('myfile-clear', rendered)
1997. 
1998.     def test_render_empty_file_field(self):
1999.         class DocumentForm(forms.ModelForm):
2000.             class Meta:
2001.                 model = Document
2002.                 fields = '__all__'
2003. 
2004.         doc = Document.objects.create()
2005.         form = DocumentForm(instance=doc)
2006.         self.assertHTMLEqual(
2007.             str(form['myfile']),
2008.             '<input id="id_myfile" name="myfile" type="file">'
2009.         )
2010. 
2011.     def test_file_field_data(self):
2012.         # Test conditions when files is either not given or empty.
2013.         f = TextFileForm(data={'description': 'Assistance'})
2014.         self.assertFalse(f.is_valid())
2015.         f = TextFileForm(data={'description': 'Assistance'}, files={})
2016.         self.assertFalse(f.is_valid())
2017. 
2018.         # Upload a file and ensure it all works as expected.
2019.         f = TextFileForm(
2020.             data={'description': 'Assistance'},
2021.             files={'file': SimpleUploadedFile('test1.txt', b'hello world')},
2022.         )
2023.         self.assertTrue(f.is_valid())
2024.         self.assertEqual(type(f.cleaned_data['file']), SimpleUploadedFile)
2025.         instance = f.save()
2026.         self.assertEqual(instance.file.name, 'tests/test1.txt')
2027.         instance.file.delete()
2028. 
2029.         # If the previous file has been deleted, the file name can be reused
2030.         f = TextFileForm(
2031.             data={'description': 'Assistance'},
2032.             files={'file': SimpleUploadedFile('test1.txt', b'hello world')},
2033.         )
2034.         self.assertTrue(f.is_valid())
2035.         self.assertEqual(type(f.cleaned_data['file']), SimpleUploadedFile)
2036.         instance = f.save()
2037.         self.assertEqual(instance.file.name, 'tests/test1.txt')
2038. 
2039.         # Check if the max_length attribute has been inherited from the model.
2040.         f = TextFileForm(
2041.             data={'description': 'Assistance'},
2042.             files={'file': SimpleUploadedFile('test-maxlength.txt', b'hello world')},
2043.         )
2044.         self.assertFalse(f.is_valid())
2045. 
2046.         # Edit an instance that already has the file defined in the model. This will not
2047.         # save the file again, but leave it exactly as it is.
2048.         f = TextFileForm({'description': 'Assistance'}, instance=instance)
2049.         self.assertTrue(f.is_valid())
2050.         self.assertEqual(f.cleaned_data['file'].name, 'tests/test1.txt')
2051.         instance = f.save()
2052.         self.assertEqual(instance.file.name, 'tests/test1.txt')
2053. 
2054.         # Delete the current file since this is not done by Django.
2055.         instance.file.delete()
2056. 
2057.         # Override the file by uploading a new one.
2058.         f = TextFileForm(
2059.             data={'description': 'Assistance'},
2060.             files={'file': SimpleUploadedFile('test2.txt', b'hello world')},
2061.             instance=instance,
2062.         )
2063.         self.assertTrue(f.is_valid())
2064.         instance = f.save()
2065.         self.assertEqual(instance.file.name, 'tests/test2.txt')
2066. 
2067.         # Delete the current file since this is not done by Django.
2068.         instance.file.delete()
2069.         instance.delete()
2070. 
2071.     def test_filefield_required_false(self):
2072.         # Test the non-required FileField
2073.         f = TextFileForm(data={'description': 'Assistance'})
2074.         f.fields['file'].required = False
2075.         self.assertTrue(f.is_valid())
2076.         instance = f.save()
2077.         self.assertEqual(instance.file.name, '')
2078. 
2079.         f = TextFileForm(
2080.             data={'description': 'Assistance'},
2081.             files={'file': SimpleUploadedFile('test3.txt', b'hello world')},
2082.             instance=instance,
2083.         )
2084.         self.assertTrue(f.is_valid())
2085.         instance = f.save()
2086.         self.assertEqual(instance.file.name, 'tests/test3.txt')
2087. 
2088.         # Instance can be edited w/out re-uploading the file and existing file should be preserved.
2089.         f = TextFileForm({'description': 'New Description'}, instance=instance)
2090.         f.fields['file'].required = False
2091.         self.assertTrue(f.is_valid())
2092.         instance = f.save()
2093.         self.assertEqual(instance.description, 'New Description')
2094.         self.assertEqual(instance.file.name, 'tests/test3.txt')
2095. 
2096.         # Delete the current file since this is not done by Django.
2097.         instance.file.delete()
2098.         instance.delete()
2099. 
2100.     def test_custom_file_field_save(self):
2101.         """
2102.         Regression for #11149: save_form_data should be called only once
2103.         """
2104.         class CFFForm(forms.ModelForm):
2105.             class Meta:
2106.                 model = CustomFF
2107.                 fields = '__all__'
2108. 
2109.         # It's enough that the form saves without error -- the custom save routine will
2110.         # generate an AssertionError if it is called more than once during save.
2111.         form = CFFForm(data={'f': None})
2112.         form.save()
2113. 
2114.     def test_file_field_multiple_save(self):
2115.         """
2116.         Simulate a file upload and check how many times Model.save() gets
2117.         called. Test for bug #639.
2118.         """
2119.         class PhotoForm(forms.ModelForm):
2120.             class Meta:
2121.                 model = Photo
2122.                 fields = '__all__'
2123. 
2124.         # Grab an image for testing.
2125.         filename = os.path.join(os.path.dirname(__file__), 'test.png')
2126.         with open(filename, "rb") as fp:
2127.             img = fp.read()
2128. 
2129.         # Fake a POST QueryDict and FILES MultiValueDict.
2130.         data = {'title': 'Testing'}
2131.         files = {"image": SimpleUploadedFile('test.png', img, 'image/png')}
2132. 
2133.         form = PhotoForm(data=data, files=files)
2134.         p = form.save()
2135. 
2136.         try:
2137.             # Check the savecount stored on the object (see the model).
2138.             self.assertEqual(p._savecount, 1)
2139.         finally:
2140.             # Delete the "uploaded" file to avoid clogging /tmp.
2141.             p = Photo.objects.get()
2142.             p.image.delete(save=False)
2143. 
2144.     def test_file_path_field_blank(self):
2145.         """FilePathField(blank=True) includes the empty option."""
2146.         class FPForm(forms.ModelForm):
2147.             class Meta:
2148.                 model = FilePathModel
2149.                 fields = '__all__'
2150. 
2151.         form = FPForm()
2152.         self.assertEqual([name for _, name in form['path'].field.choices], ['---------', 'models.py'])
2153. 
2154.     @skipUnless(test_images, "Pillow not installed")
2155.     def test_image_field(self):
2156.         # ImageField and FileField are nearly identical, but they differ slightly when
2157.         # it comes to validation. This specifically tests that #6302 is fixed for
2158.         # both file fields and image fields.
2159. 
2160.         with open(os.path.join(os.path.dirname(__file__), 'test.png'), 'rb') as fp:
2161.             image_data = fp.read()
2162.         with open(os.path.join(os.path.dirname(__file__), 'test2.png'), 'rb') as fp:
2163.             image_data2 = fp.read()
2164. 
2165.         f = ImageFileForm(
2166.             data={'description': 'An image'},
2167.             files={'image': SimpleUploadedFile('test.png', image_data)},
2168.         )
2169.         self.assertTrue(f.is_valid())
2170.         self.assertEqual(type(f.cleaned_data['image']), SimpleUploadedFile)
2171.         instance = f.save()
2172.         self.assertEqual(instance.image.name, 'tests/test.png')
2173.         self.assertEqual(instance.width, 16)
2174.         self.assertEqual(instance.height, 16)
2175. 
2176.         # Delete the current file since this is not done by Django, but don't save
2177.         # because the dimension fields are not null=True.
2178.         instance.image.delete(save=False)
2179.         f = ImageFileForm(
2180.             data={'description': 'An image'},
2181.             files={'image': SimpleUploadedFile('test.png', image_data)},
2182.         )
2183.         self.assertTrue(f.is_valid())
2184.         self.assertEqual(type(f.cleaned_data['image']), SimpleUploadedFile)
2185.         instance = f.save()
2186.         self.assertEqual(instance.image.name, 'tests/test.png')
2187.         self.assertEqual(instance.width, 16)
2188.         self.assertEqual(instance.height, 16)
2189. 
2190.         # Edit an instance that already has the (required) image defined in the model. This will not
2191.         # save the image again, but leave it exactly as it is.
2192. 
2193.         f = ImageFileForm(data={'description': 'Look, it changed'}, instance=instance)
2194.         self.assertTrue(f.is_valid())
2195.         self.assertEqual(f.cleaned_data['image'].name, 'tests/test.png')
2196.         instance = f.save()
2197.         self.assertEqual(instance.image.name, 'tests/test.png')
2198.         self.assertEqual(instance.height, 16)
2199.         self.assertEqual(instance.width, 16)
2200. 
2201.         # Delete the current file since this is not done by Django, but don't save
2202.         # because the dimension fields are not null=True.
2203.         instance.image.delete(save=False)
2204.         # Override the file by uploading a new one.
2205. 
2206.         f = ImageFileForm(
2207.             data={'description': 'Changed it'},
2208.             files={'image': SimpleUploadedFile('test2.png', image_data2)},
2209.             instance=instance,
2210.         )
2211.         self.assertTrue(f.is_valid())
2212.         instance = f.save()
2213.         self.assertEqual(instance.image.name, 'tests/test2.png')
2214.         self.assertEqual(instance.height, 32)
2215.         self.assertEqual(instance.width, 48)
2216. 
2217.         # Delete the current file since this is not done by Django, but don't save
2218.         # because the dimension fields are not null=True.
2219.         instance.image.delete(save=False)
2220.         instance.delete()
2221. 
2222.         f = ImageFileForm(
2223.             data={'description': 'Changed it'},
2224.             files={'image': SimpleUploadedFile('test2.png', image_data2)},
2225.         )
2226.         self.assertTrue(f.is_valid())
2227.         instance = f.save()
2228.         self.assertEqual(instance.image.name, 'tests/test2.png')
2229.         self.assertEqual(instance.height, 32)
2230.         self.assertEqual(instance.width, 48)
2231. 
2232.         # Delete the current file since this is not done by Django, but don't save
2233.         # because the dimension fields are not null=True.
2234.         instance.image.delete(save=False)
2235.         instance.delete()
2236. 
2237.         # Test the non-required ImageField
2238.         # Note: In Oracle, we expect a null ImageField to return '' instead of
2239.         # None.
2240.         if connection.features.interprets_empty_strings_as_nulls:
2241.             expected_null_imagefield_repr = ''
2242.         else:
2243.             expected_null_imagefield_repr = None
2244. 
2245.         f = OptionalImageFileForm(data={'description': 'Test'})
2246.         self.assertTrue(f.is_valid())
2247.         instance = f.save()
2248.         self.assertEqual(instance.image.name, expected_null_imagefield_repr)
2249.         self.assertIsNone(instance.width)
2250.         self.assertIsNone(instance.height)
2251. 
2252.         f = OptionalImageFileForm(
2253.             data={'description': 'And a final one'},
2254.             files={'image': SimpleUploadedFile('test3.png', image_data)},
2255.             instance=instance,
2256.         )
2257.         self.assertTrue(f.is_valid())
2258.         instance = f.save()
2259.         self.assertEqual(instance.image.name, 'tests/test3.png')
2260.         self.assertEqual(instance.width, 16)
2261.         self.assertEqual(instance.height, 16)
2262. 
2263.         # Editing the instance without re-uploading the image should not affect
2264.         # the image or its width/height properties.
2265.         f = OptionalImageFileForm({'description': 'New Description'}, instance=instance)
2266.         self.assertTrue(f.is_valid())
2267.         instance = f.save()
2268.         self.assertEqual(instance.description, 'New Description')
2269.         self.assertEqual(instance.image.name, 'tests/test3.png')
2270.         self.assertEqual(instance.width, 16)
2271.         self.assertEqual(instance.height, 16)
2272. 
2273.         # Delete the current file since this is not done by Django.
2274.         instance.image.delete()
2275.         instance.delete()
2276. 
2277.         f = OptionalImageFileForm(
2278.             data={'description': 'And a final one'},
2279.             files={'image': SimpleUploadedFile('test4.png', image_data2)}
2280.         )
2281.         self.assertTrue(f.is_valid())
2282.         instance = f.save()
2283.         self.assertEqual(instance.image.name, 'tests/test4.png')
2284.         self.assertEqual(instance.width, 48)
2285.         self.assertEqual(instance.height, 32)
2286.         instance.delete()
2287.         # Test callable upload_to behavior that's dependent on the value of another field in the model
2288.         f = ImageFileForm(
2289.             data={'description': 'And a final one', 'path': 'foo'},
2290.             files={'image': SimpleUploadedFile('test4.png', image_data)},
2291.         )
2292.         self.assertTrue(f.is_valid())
2293.         instance = f.save()
2294.         self.assertEqual(instance.image.name, 'foo/test4.png')
2295.         instance.delete()
2296. 
2297.         # Editing an instance that has an image without an extension shouldn't
2298.         # fail validation. First create:
2299.         f = NoExtensionImageFileForm(
2300.             data={'description': 'An image'},
2301.             files={'image': SimpleUploadedFile('test.png', image_data)},
2302.         )
2303.         self.assertTrue(f.is_valid())
2304.         instance = f.save()
2305.         self.assertEqual(instance.image.name, 'tests/no_extension')
2306.         # Then edit:
2307.         f = NoExtensionImageFileForm(data={'description': 'Edited image'}, instance=instance)
2308.         self.assertTrue(f.is_valid())
2309. 
2310. 
2311. class ModelOtherFieldTests(SimpleTestCase):
2312.     def test_big_integer_field(self):
2313.         bif = BigIntForm({'biggie': '-9223372036854775808'})
2314.         self.assertTrue(bif.is_valid())
2315.         bif = BigIntForm({'biggie': '-9223372036854775809'})
2316.         self.assertFalse(bif.is_valid())
2317.         self.assertEqual(
2318.             bif.errors,
2319.             {'biggie': ['Ensure this value is greater than or equal to -9223372036854775808.']}
2320.         )
2321.         bif = BigIntForm({'biggie': '9223372036854775807'})
2322.         self.assertTrue(bif.is_valid())
2323.         bif = BigIntForm({'biggie': '9223372036854775808'})
2324.         self.assertFalse(bif.is_valid())
2325.         self.assertEqual(bif.errors, {'biggie': ['Ensure this value is less than or equal to 9223372036854775807.']})
2326. 
2327.     def test_url_on_modelform(self):
2328.         "Check basic URL field validation on model forms"
2329.         class HomepageForm(forms.ModelForm):
2330.             class Meta:
2331.                 model = Homepage
2332.                 fields = '__all__'
2333. 
2334.         self.assertFalse(HomepageForm({'url': 'foo'}).is_valid())
2335.         self.assertFalse(HomepageForm({'url': 'http://'}).is_valid())
2336.         self.assertFalse(HomepageForm({'url': 'http://example'}).is_valid())
2337.         self.assertFalse(HomepageForm({'url': 'http://example.'}).is_valid())
2338.         self.assertFalse(HomepageForm({'url': 'http://com.'}).is_valid())
2339. 
2340.         self.assertTrue(HomepageForm({'url': 'http://localhost'}).is_valid())
2341.         self.assertTrue(HomepageForm({'url': 'http://example.com'}).is_valid())
2342.         self.assertTrue(HomepageForm({'url': 'http://www.example.com'}).is_valid())
2343.         self.assertTrue(HomepageForm({'url': 'http://www.example.com:8000'}).is_valid())
2344.         self.assertTrue(HomepageForm({'url': 'http://www.example.com/test'}).is_valid())
2345.         self.assertTrue(HomepageForm({'url': 'http://www.example.com:8000/test'}).is_valid())
2346.         self.assertTrue(HomepageForm({'url': 'http://example.com/foo/bar'}).is_valid())
2347. 
2348.     def test_modelform_non_editable_field(self):
2349.         """
2350.         When explicitly including a non-editable field in a ModelForm, the
2351.         error message should be explicit.
2352.         """
2353.         # 'created', non-editable, is excluded by default
2354.         self.assertNotIn('created', ArticleForm().fields)
2355. 
2356.         msg = "'created' cannot be specified for Article model form as it is a non-editable field"
2357.         with self.assertRaisesMessage(FieldError, msg):
2358.             class InvalidArticleForm(forms.ModelForm):
2359.                 class Meta:
2360.                     model = Article
2361.                     fields = ('headline', 'created')
2362. 
2363.     def test_http_prefixing(self):
2364.         """
2365.         If the http:// prefix is omitted on form input, the field adds it again. (Refs #13613)
2366.         """
2367.         class HomepageForm(forms.ModelForm):
2368.             class Meta:
2369.                 model = Homepage
2370.                 fields = '__all__'
2371. 
2372.         form = HomepageForm({'url': 'example.com'})
2373.         self.assertTrue(form.is_valid())
2374.         self.assertEqual(form.cleaned_data['url'], 'http://example.com')
2375. 
2376.         form = HomepageForm({'url': 'example.com/test'})
2377.         self.assertTrue(form.is_valid())
2378.         self.assertEqual(form.cleaned_data['url'], 'http://example.com/test')
2379. 
2380. 
2381. class OtherModelFormTests(TestCase):
2382.     def test_media_on_modelform(self):
2383.         # Similar to a regular Form class you can define custom media to be used on
2384.         # the ModelForm.
2385.         f = ModelFormWithMedia()
2386.         self.assertHTMLEqual(
2387.             str(f.media),
2388.             '''<link href="/some/form/css" type="text/css" media="all" rel="stylesheet">
2389. <script src="/some/form/javascript"></script>'''
2390.         )
2391. 
2392.     def test_choices_type(self):
2393.         # Choices on CharField and IntegerField
2394.         f = ArticleForm()
2395.         with self.assertRaises(ValidationError):
2396.             f.fields['status'].clean('42')
2397. 
2398.         f = ArticleStatusForm()
2399.         with self.assertRaises(ValidationError):
2400.             f.fields['status'].clean('z')
2401. 
2402.     def test_prefetch_related_queryset(self):
2403.         """
2404.         ModelChoiceField should respect a prefetch_related() on its queryset.
2405.         """
2406.         blue = Colour.objects.create(name='blue')
2407.         red = Colour.objects.create(name='red')
2408.         multicolor_item = ColourfulItem.objects.create()
2409.         multicolor_item.colours.add(blue, red)
2410.         red_item = ColourfulItem.objects.create()
2411.         red_item.colours.add(red)
2412. 
2413.         class ColorModelChoiceField(forms.ModelChoiceField):
2414.             def label_from_instance(self, obj):
2415.                 return ', '.join(c.name for c in obj.colours.all())
2416. 
2417.         field = ColorModelChoiceField(ColourfulItem.objects.prefetch_related('colours'))
2418.         with self.assertNumQueries(3):  # would be 4 if prefetch is ignored
2419.             self.assertEqual(tuple(field.choices), (
2420.                 ('', '---------'),
2421.                 (multicolor_item.pk, 'blue, red'),
2422.                 (red_item.pk, 'red'),
2423.             ))
2424. 
2425.     def test_foreignkeys_which_use_to_field(self):
2426.         apple = Inventory.objects.create(barcode=86, name='Apple')
2427.         Inventory.objects.create(barcode=22, name='Pear')
2428.         core = Inventory.objects.create(barcode=87, name='Core', parent=apple)
2429. 
2430.         field = forms.ModelChoiceField(Inventory.objects.all(), to_field_name='barcode')
2431.         self.assertEqual(tuple(field.choices), (
2432.             ('', '---------'),
2433.             (86, 'Apple'),
2434.             (87, 'Core'),
2435.             (22, 'Pear')))
2436. 
2437.         form = InventoryForm(instance=core)
2438.         self.assertHTMLEqual(str(form['parent']), '''<select name="parent" id="id_parent">
2439. <option value="">---------</option>
2440. <option value="86" selected>Apple</option>
2441. <option value="87">Core</option>
2442. <option value="22">Pear</option>
2443. </select>''')
2444.         data = model_to_dict(core)
2445.         data['parent'] = '22'
2446.         form = InventoryForm(data=data, instance=core)
2447.         core = form.save()
2448.         self.assertEqual(core.parent.name, 'Pear')
2449. 
2450.         class CategoryForm(forms.ModelForm):
2451.             description = forms.CharField()
2452. 
2453.             class Meta:
2454.                 model = Category
2455.                 fields = ['description', 'url']
2456. 
2457.         self.assertEqual(list(CategoryForm.base_fields), ['description', 'url'])
2458. 
2459.         self.assertHTMLEqual(
2460.             str(CategoryForm()),
2461.             '''<tr><th><label for="id_description">Description:</label></th>
2462. <td><input type="text" name="description" id="id_description" required></td></tr>
2463. <tr><th><label for="id_url">The URL:</label></th>
2464. <td><input id="id_url" type="text" name="url" maxlength="40" required></td></tr>'''
2465.         )
2466.         # to_field_name should also work on ModelMultipleChoiceField ##################
2467. 
2468.         field = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name='barcode')
2469.         self.assertEqual(tuple(field.choices), ((86, 'Apple'), (87, 'Core'), (22, 'Pear')))
2470.         self.assertQuerysetEqual(field.clean([86]), ['Apple'])
2471. 
2472.         form = SelectInventoryForm({'items': [87, 22]})
2473.         self.assertTrue(form.is_valid())
2474.         self.assertEqual(len(form.cleaned_data), 1)
2475.         self.assertQuerysetEqual(form.cleaned_data['items'], ['Core', 'Pear'])
2476. 
2477.     def test_model_field_that_returns_none_to_exclude_itself_with_explicit_fields(self):
2478.         self.assertEqual(list(CustomFieldForExclusionForm.base_fields), ['name'])
2479.         self.assertHTMLEqual(
2480.             str(CustomFieldForExclusionForm()),
2481.             '''<tr><th><label for="id_name">Name:</label></th>
2482. <td><input id="id_name" type="text" name="name" maxlength="10" required></td></tr>'''
2483.         )
2484. 
2485.     def test_iterable_model_m2m(self):
2486.         class ColourfulItemForm(forms.ModelForm):
2487.             class Meta:
2488.                 model = ColourfulItem
2489.                 fields = '__all__'
2490. 
2491.         colour = Colour.objects.create(name='Blue')
2492.         form = ColourfulItemForm()
2493.         self.maxDiff = 1024
2494.         self.assertHTMLEqual(
2495.             form.as_p(),
2496.             """<p><label for="id_name">Name:</label> <input id="id_name" type="text" name="name" maxlength="50" required></p>
2497.         <p><label for="id_colours">Colours:</label>
2498.         <select multiple name="colours" id="id_colours" required>
2499.         <option value="%(blue_pk)s">Blue</option>
2500.         </select></p>"""
2501.             % {'blue_pk': colour.pk})
2502. 
2503.     def test_callable_field_default(self):
2504.         class PublicationDefaultsForm(forms.ModelForm):
2505.             class Meta:
2506.                 model = PublicationDefaults
2507.                 fields = ('title', 'date_published', 'mode', 'category')
2508. 
2509.         self.maxDiff = 2000
2510.         form = PublicationDefaultsForm()
2511.         today_str = str(datetime.date.today())
2512.         self.assertHTMLEqual(
2513.             form.as_p(),
2514.             """
2515.             <p><label for="id_title">Title:</label>
2516.                 <input id="id_title" maxlength="30" name="title" type="text" required></p>
2517.             <p><label for="id_date_published">Date published:</label>
2518.                 <input id="id_date_published" name="date_published" type="text" value="{0}" required>
2519.                 <input id="initial-id_date_published" name="initial-date_published" type="hidden" value="{0}"></p>
2520.             <p><label for="id_mode">Mode:</label> <select id="id_mode" name="mode">
2521.                 <option value="di" selected>direct</option>
2522.                 <option value="de">delayed</option></select>
2523.                 <input id="initial-id_mode" name="initial-mode" type="hidden" value="di"></p>
2524.            <p><label for="id_category">Category:</label> <select id="id_category" name="category">
2525.                 <option value="1">Games</option>
2526.                 <option value="2">Comics</option>
2527.                 <option value="3" selected>Novel</option></select>
2528.                 <input id="initial-id_category" name="initial-category" type="hidden" value="3">
2529.             """.format(today_str)
2530.         )
2531.         empty_data = {
2532.             'title': '',
2533.             'date_published': today_str,
2534.             'initial-date_published': today_str,
2535.             'mode': 'di',
2536.             'initial-mode': 'di',
2537.             'category': '3',
2538.             'initial-category': '3',
2539.         }
2540.         bound_form = PublicationDefaultsForm(empty_data)
2541.         self.assertFalse(bound_form.has_changed())
2542. 
2543. 
2544. class ModelFormCustomErrorTests(SimpleTestCase):
2545.     def test_custom_error_messages(self):
2546.         data = {'name1': '@#$!!**@#$', 'name2': '@#$!!**@#$'}
2547.         errors = CustomErrorMessageForm(data).errors
2548.         self.assertHTMLEqual(
2549.             str(errors['name1']),
2550.             '<ul class="errorlist"><li>Form custom error message.</li></ul>'
2551.         )
2552.         self.assertHTMLEqual(
2553.             str(errors['name2']),
2554.             '<ul class="errorlist"><li>Model custom error message.</li></ul>'
2555.         )
2556. 
2557.     def test_model_clean_error_messages(self):
2558.         data = {'name1': 'FORBIDDEN_VALUE', 'name2': 'ABC'}
2559.         form = CustomErrorMessageForm(data)
2560.         self.assertFalse(form.is_valid())
2561.         self.assertHTMLEqual(
2562.             str(form.errors['name1']),
2563.             '<ul class="errorlist"><li>Model.clean() error messages.</li></ul>'
2564.         )
2565.         data = {'name1': 'FORBIDDEN_VALUE2', 'name2': 'ABC'}
2566.         form = CustomErrorMessageForm(data)
2567.         self.assertFalse(form.is_valid())
2568.         self.assertHTMLEqual(
2569.             str(form.errors['name1']),
2570.             '<ul class="errorlist"><li>Model.clean() error messages (simpler syntax).</li></ul>'
2571.         )
2572.         data = {'name1': 'GLOBAL_ERROR', 'name2': 'ABC'}
2573.         form = CustomErrorMessageForm(data)
2574.         self.assertFalse(form.is_valid())
2575.         self.assertEqual(form.errors['__all__'], ['Global error message.'])
2576. 
2577. 
2578. class CustomCleanTests(TestCase):
2579.     def test_override_clean(self):
2580.         """
2581.         Regression for #12596: Calling super from ModelForm.clean() should be
2582.         optional.
2583.         """
2584.         class TripleFormWithCleanOverride(forms.ModelForm):
2585.             class Meta:
2586.                 model = Triple
2587.                 fields = '__all__'
2588. 
2589.             def clean(self):
2590.                 if not self.cleaned_data['left'] == self.cleaned_data['right']:
2591.                     raise forms.ValidationError('Left and right should be equal')
2592.                 return self.cleaned_data
2593. 
2594.         form = TripleFormWithCleanOverride({'left': 1, 'middle': 2, 'right': 1})
2595.         self.assertTrue(form.is_valid())
2596.         # form.instance.left will be None if the instance was not constructed
2597.         # by form.full_clean().
2598.         self.assertEqual(form.instance.left, 1)
2599. 
2600.     def test_model_form_clean_applies_to_model(self):
2601.         """
2602.         Regression test for #12960. Make sure the cleaned_data returned from
2603.         ModelForm.clean() is applied to the model instance.
2604.         """
2605.         class CategoryForm(forms.ModelForm):
2606.             class Meta:
2607.                 model = Category
2608.                 fields = '__all__'
2609. 
2610.             def clean(self):
2611.                 self.cleaned_data['name'] = self.cleaned_data['name'].upper()
2612.                 return self.cleaned_data
2613. 
2614.         data = {'name': 'Test', 'slug': 'test', 'url': '/test'}
2615.         form = CategoryForm(data)
2616.         category = form.save()
2617.         self.assertEqual(category.name, 'TEST')
2618. 
2619. 
2620. class ModelFormInheritanceTests(SimpleTestCase):
2621.     def test_form_subclass_inheritance(self):
2622.         class Form(forms.Form):
2623.             age = forms.IntegerField()
2624. 
2625.         class ModelForm(forms.ModelForm, Form):
2626.             class Meta:
2627.                 model = Writer
2628.                 fields = '__all__'
2629. 
2630.         self.assertEqual(list(ModelForm().fields), ['name', 'age'])
2631. 
2632.     def test_field_removal(self):
2633.         class ModelForm(forms.ModelForm):
2634.             class Meta:
2635.                 model = Writer
2636.                 fields = '__all__'
2637. 
2638.         class Mixin:
2639.             age = None
2640. 
2641.         class Form(forms.Form):
2642.             age = forms.IntegerField()
2643. 
2644.         class Form2(forms.Form):
2645.             foo = forms.IntegerField()
2646. 
2647.         self.assertEqual(list(ModelForm().fields), ['name'])
2648.         self.assertEqual(list(type('NewForm', (Mixin, Form), {})().fields), [])
2649.         self.assertEqual(list(type('NewForm', (Form2, Mixin, Form), {})().fields), ['foo'])
2650.         self.assertEqual(list(type('NewForm', (Mixin, ModelForm, Form), {})().fields), ['name'])
2651.         self.assertEqual(list(type('NewForm', (ModelForm, Mixin, Form), {})().fields), ['name'])
2652.         self.assertEqual(list(type('NewForm', (ModelForm, Form, Mixin), {})().fields), ['name', 'age'])
2653.         self.assertEqual(list(type('NewForm', (ModelForm, Form), {'age': None})().fields), ['name'])
2654. 
2655.     def test_field_removal_name_clashes(self):
2656.         """
2657.         Form fields can be removed in subclasses by setting them to None
2658.         (#22510).
2659.         """
2660.         class MyForm(forms.ModelForm):
2661.             media = forms.CharField()
2662. 
2663.             class Meta:
2664.                 model = Writer
2665.                 fields = '__all__'
2666. 
2667.         class SubForm(MyForm):
2668.             media = None
2669. 
2670.         self.assertIn('media', MyForm().fields)
2671.         self.assertNotIn('media', SubForm().fields)
2672.         self.assertTrue(hasattr(MyForm, 'media'))
2673.         self.assertTrue(hasattr(SubForm, 'media'))
2674. 
2675. 
2676. class StumpJokeForm(forms.ModelForm):
2677.     class Meta:
2678.         model = StumpJoke
2679.         fields = '__all__'
2680. 
2681. 
2682. class CustomFieldWithQuerysetButNoLimitChoicesTo(forms.Field):
2683.     queryset = 42
2684. 
2685. 
2686. class StumpJokeWithCustomFieldForm(forms.ModelForm):
2687.     custom = CustomFieldWithQuerysetButNoLimitChoicesTo()
2688. 
2689.     class Meta:
2690.         model = StumpJoke
2691.         fields = ()
2692. 
2693. 
2694. class LimitChoicesToTests(TestCase):
2695.     """
2696.     Tests the functionality of ``limit_choices_to``.
2697.     """
2698.     @classmethod
2699.     def setUpTestData(cls):
2700.         cls.threepwood = Character.objects.create(
2701.             username='threepwood',
2702.             last_action=datetime.datetime.today() + datetime.timedelta(days=1),
2703.         )
2704.         cls.marley = Character.objects.create(
2705.             username='marley',
2706.             last_action=datetime.datetime.today() - datetime.timedelta(days=1),
2707.         )
2708. 
2709.     def test_limit_choices_to_callable_for_fk_rel(self):
2710.         """
2711.         A ForeignKey can use limit_choices_to as a callable (#2554).
2712.         """
2713.         stumpjokeform = StumpJokeForm()
2714.         self.assertSequenceEqual(stumpjokeform.fields['most_recently_fooled'].queryset, [self.threepwood])
2715. 
2716.     def test_limit_choices_to_callable_for_m2m_rel(self):
2717.         """
2718.         A ManyToManyField can use limit_choices_to as a callable (#2554).
2719.         """
2720.         stumpjokeform = StumpJokeForm()
2721.         self.assertSequenceEqual(stumpjokeform.fields['most_recently_fooled'].queryset, [self.threepwood])
2722. 
2723.     def test_custom_field_with_queryset_but_no_limit_choices_to(self):
2724.         """
2725.         A custom field with a `queryset` attribute but no `limit_choices_to`
2726.         works (#23795).
2727.         """
2728.         f = StumpJokeWithCustomFieldForm()
2729.         self.assertEqual(f.fields['custom'].queryset, 42)
2730. 
2731.     def test_fields_for_model_applies_limit_choices_to(self):
2732.         fields = fields_for_model(StumpJoke, ['has_fooled_today'])
2733.         self.assertSequenceEqual(fields['has_fooled_today'].queryset, [self.threepwood])
2734. 
2735.     def test_callable_called_each_time_form_is_instantiated(self):
2736.         field = StumpJokeForm.base_fields['most_recently_fooled']
2737.         with mock.patch.object(field, 'limit_choices_to') as today_callable_dict:
2738.             StumpJokeForm()
2739.             self.assertEqual(today_callable_dict.call_count, 1)
2740.             StumpJokeForm()
2741.             self.assertEqual(today_callable_dict.call_count, 2)
2742.             StumpJokeForm()
2743.             self.assertEqual(today_callable_dict.call_count, 3)
2744. 
2745. 
2746. class FormFieldCallbackTests(SimpleTestCase):
2747. 
2748.     def test_baseform_with_widgets_in_meta(self):
2749.         """Regression for #13095: Using base forms with widgets defined in Meta should not raise errors."""
2750.         widget = forms.Textarea()
2751. 
2752.         class BaseForm(forms.ModelForm):
2753.             class Meta:
2754.                 model = Person
2755.                 widgets = {'name': widget}
2756.                 fields = "__all__"
2757. 
2758.         Form = modelform_factory(Person, form=BaseForm)
2759.         self.assertIsInstance(Form.base_fields['name'].widget, forms.Textarea)
2760. 
2761.     def test_factory_with_widget_argument(self):
2762.         """ Regression for #15315: modelform_factory should accept widgets
2763.             argument
2764.         """
2765.         widget = forms.Textarea()
2766. 
2767.         # Without a widget should not set the widget to textarea
2768.         Form = modelform_factory(Person, fields="__all__")
2769.         self.assertNotEqual(Form.base_fields['name'].widget.__class__, forms.Textarea)
2770. 
2771.         # With a widget should not set the widget to textarea
2772.         Form = modelform_factory(Person, fields="__all__", widgets={'name': widget})
2773.         self.assertEqual(Form.base_fields['name'].widget.__class__, forms.Textarea)
2774. 
2775.     def test_modelform_factory_without_fields(self):
2776.         """ Regression for #19733 """
2777.         message = (
2778.             "Calling modelform_factory without defining 'fields' or 'exclude' "
2779.             "explicitly is prohibited."
2780.         )
2781.         with self.assertRaisesMessage(ImproperlyConfigured, message):
2782.             modelform_factory(Person)
2783. 
2784.     def test_modelform_factory_with_all_fields(self):
2785.         """ Regression for #19733 """
2786.         form = modelform_factory(Person, fields="__all__")
2787.         self.assertEqual(list(form.base_fields), ["name"])
2788. 
2789.     def test_custom_callback(self):
2790.         """A custom formfield_callback is used if provided"""
2791.         callback_args = []
2792. 
2793.         def callback(db_field, **kwargs):
2794.             callback_args.append((db_field, kwargs))
2795.             return db_field.formfield(**kwargs)
2796. 
2797.         widget = forms.Textarea()
2798. 
2799.         class BaseForm(forms.ModelForm):
2800.             class Meta:
2801.                 model = Person
2802.                 widgets = {'name': widget}
2803.                 fields = "__all__"
2804. 
2805.         modelform_factory(Person, form=BaseForm, formfield_callback=callback)
2806.         id_field, name_field = Person._meta.fields
2807. 
2808.         self.assertEqual(callback_args, [(id_field, {}), (name_field, {'widget': widget})])
2809. 
2810.     def test_bad_callback(self):
2811.         # A bad callback provided by user still gives an error
2812.         with self.assertRaises(TypeError):
2813.             modelform_factory(Person, fields="__all__", formfield_callback='not a function or callable')
2814. 
2815.     def test_inherit_after_custom_callback(self):
2816.         def callback(db_field, **kwargs):
2817.             if isinstance(db_field, models.CharField):
2818.                 return forms.CharField(widget=forms.Textarea)
2819.             return db_field.formfield(**kwargs)
2820. 
2821.         class BaseForm(forms.ModelForm):
2822.             class Meta:
2823.                 model = Person
2824.                 fields = '__all__'
2825. 
2826.         NewForm = modelform_factory(Person, form=BaseForm, formfield_callback=callback)
2827. 
2828.         class InheritedForm(NewForm):
2829.             pass
2830. 
2831.         for name in NewForm.base_fields:
2832.             self.assertEqual(
2833.                 type(InheritedForm.base_fields[name].widget),
2834.                 type(NewForm.base_fields[name].widget)
2835.             )
2836. 
2837. 
2838. class LocalizedModelFormTest(TestCase):
2839.     def test_model_form_applies_localize_to_some_fields(self):
2840.         class PartiallyLocalizedTripleForm(forms.ModelForm):
2841.             class Meta:
2842.                 model = Triple
2843.                 localized_fields = ('left', 'right',)
2844.                 fields = '__all__'
2845. 
2846.         f = PartiallyLocalizedTripleForm({'left': 10, 'middle': 10, 'right': 10})
2847.         self.assertTrue(f.is_valid())
2848.         self.assertTrue(f.fields['left'].localize)
2849.         self.assertFalse(f.fields['middle'].localize)
2850.         self.assertTrue(f.fields['right'].localize)
2851. 
2852.     def test_model_form_applies_localize_to_all_fields(self):
2853.         class FullyLocalizedTripleForm(forms.ModelForm):
2854.             class Meta:
2855.                 model = Triple
2856.                 localized_fields = '__all__'
2857.                 fields = '__all__'
2858. 
2859.         f = FullyLocalizedTripleForm({'left': 10, 'middle': 10, 'right': 10})
2860.         self.assertTrue(f.is_valid())
2861.         self.assertTrue(f.fields['left'].localize)
2862.         self.assertTrue(f.fields['middle'].localize)
2863.         self.assertTrue(f.fields['right'].localize)
2864. 
2865.     def test_model_form_refuses_arbitrary_string(self):
2866.         msg = (
2867.             "BrokenLocalizedTripleForm.Meta.localized_fields "
2868.             "cannot be a string. Did you mean to type: ('foo',)?"
2869.         )
2870.         with self.assertRaisesMessage(TypeError, msg):
2871.             class BrokenLocalizedTripleForm(forms.ModelForm):
2872.                 class Meta:
2873.                     model = Triple
2874.                     localized_fields = "foo"
2875. 
2876. 
2877. class CustomMetaclass(ModelFormMetaclass):
2878.     def __new__(cls, name, bases, attrs):
2879.         new = super().__new__(cls, name, bases, attrs)
2880.         new.base_fields = {}
2881.         return new
2882. 
2883. 
2884. class CustomMetaclassForm(forms.ModelForm, metaclass=CustomMetaclass):
2885.     pass
2886. 
2887. 
2888. class CustomMetaclassTestCase(SimpleTestCase):
2889.     def test_modelform_factory_metaclass(self):
2890.         new_cls = modelform_factory(Person, fields="__all__", form=CustomMetaclassForm)
2891.         self.assertEqual(new_cls.base_fields, {})
2892. 
2893. 
2894. class StrictAssignmentTests(SimpleTestCase):
2895.     """
2896.     Should a model do anything special with __setattr__() or descriptors which
2897.     raise a ValidationError, a model form should catch the error (#24706).
2898.     """
2899. 
2900.     def test_setattr_raises_validation_error_field_specific(self):
2901.         """
2902.         A model ValidationError using the dict form should put the error
2903.         message into the correct key of form.errors.
2904.         """
2905.         form_class = modelform_factory(model=StrictAssignmentFieldSpecific, fields=['title'])
2906.         form = form_class(data={'title': 'testing setattr'}, files=None)
2907.         # This line turns on the ValidationError; it avoids the model erroring
2908.         # when its own __init__() is called when creating form.instance.
2909.         form.instance._should_error = True
2910.         self.assertFalse(form.is_valid())
2911.         self.assertEqual(form.errors, {
2912.             'title': ['Cannot set attribute', 'This field cannot be blank.']
2913.         })
2914. 
2915.     def test_setattr_raises_validation_error_non_field(self):
2916.         """
2917.         A model ValidationError not using the dict form should put the error
2918.         message into __all__ (i.e. non-field errors) on the form.
2919.         """
2920.         form_class = modelform_factory(model=StrictAssignmentAll, fields=['title'])
2921.         form = form_class(data={'title': 'testing setattr'}, files=None)
2922.         # This line turns on the ValidationError; it avoids the model erroring
2923.         # when its own __init__() is called when creating form.instance.
2924.         form.instance._should_error = True
2925.         self.assertFalse(form.is_valid())
2926.         self.assertEqual(form.errors, {
2927.             '__all__': ['Cannot set attribute'],
2928.             'title': ['This field cannot be blank.']
2929.         })
2930. 
2931. 
2932. class ModelToDictTests(TestCase):
2933.     def test_many_to_many(self):
2934.         """Data for a ManyToManyField is a list rather than a lazy QuerySet."""
2935.         blue = Colour.objects.create(name='blue')
2936.         red = Colour.objects.create(name='red')
2937.         item = ColourfulItem.objects.create()
2938.         item.colours.set([blue])
2939.         data = model_to_dict(item)['colours']
2940.         self.assertEqual(data, [blue])
2941.         item.colours.set([red])
2942.         # If data were a QuerySet, it would be reevaluated here and give "red"
2943.         # instead of the original value.
2944.         self.assertEqual(data, [blue])

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 16:27:05,718 - thread-130694728648384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The provided context from `tests/model_forms/test_modelchoicefield.py` and `tests/model_forms/tests.py` is sufficient. It contains tests for `ModelChoiceField` with `RadioSelect` widgets and tests for `ModelForm` with required `ForeignKey` fields. Although no single test perfectly matches the bug report scenario, I can combine patterns from existing tests to fulfill the user's request for 3 relevant examples. Specifically, I can use tests that show `ModelChoiceField` choice generation, `RadioSelect` usage, and `ModelForm` validation for required foreign keys." query='' extra_requirements='' purpose=''
2025-12-21 16:27:05,719 - thread-130694728648384.prometheus_context_collector - INFO - Successfully retrieved 3 context snippets
