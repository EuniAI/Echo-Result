2025-12-24 03:56:47,496 - thread-125237555361472.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Add `nonform` CSS class for non form errors in FormSets

Description: Description
	 
		(last modified by Ties Jan Hefting)
	 
Forms add the nonfield CSS class for non field errors in ErrorList instances. This is documented in a section on ​rendering form error messages. Similarly, in FormSets I'd expect to see the nonform CSS class added for non form errors. This would allow a custom ErrorList to make a distinction in form field errors, non field errors (forms) and non form errors (FormSets) when rendering error messages. Therefore I'd suggest to add this nonform CSS class and document it for developers to use.

Patch information:
diff --git a/django/forms/formsets.py b/django/forms/formsets.py
index a89c35599f..1b0d4554e0 100644
--- a/django/forms/formsets.py
+++ b/django/forms/formsets.py
@@ -333,7 +333,7 @@ class BaseFormSet:
         self._non_form_errors.
         """
         self._errors = []
-        self._non_form_errors = self.error_class()
+        self._non_form_errors = self.error_class(error_class='nonform')
         empty_forms_count = 0
 
         if not self.is_bound:  # Stop further processing.
@@ -380,7 +380,7 @@ class BaseFormSet:
             # Give self.clean() a chance to do cross-form validation.
             self.clean()
         except ValidationError as e:
-            self._non_form_errors = self.error_class(e.error_list)
+            self._non_form_errors = self.error_class(e.error_list, error_class='nonform')
 
     def clean(self):
         """
diff --git a/docs/ref/forms/api.txt b/docs/ref/forms/api.txt
index 5df969232a..013193fe1e 100644
--- a/docs/ref/forms/api.txt
+++ b/docs/ref/forms/api.txt
@@ -210,6 +210,13 @@ This includes ``ValidationError``\s that are raised in :meth:`Form.clean()
 <django.forms.Form.clean>` and errors added using :meth:`Form.add_error(None,
 "...") <django.forms.Form.add_error>`.
 
+Non-form errors on formsets
+---------------------------
+
+Formset-level errors returned by :meth:`~django.forms.formsets.BaseFormSet.non_form_errors`
+are rendered with an additional ``nonform`` CSS class (e.g., ``<ul class="errorlist nonform">``)
+to distinguish them from field-specific and form-level non-field errors.
+
 Behavior of unbound forms
 -------------------------
 
diff --git a/docs/topics/forms/formsets.txt b/docs/topics/forms/formsets.txt
index 1f2c7c3fad..fbce2f5393 100644
--- a/docs/topics/forms/formsets.txt
+++ b/docs/topics/forms/formsets.txt
@@ -365,6 +365,16 @@ The formset ``clean`` method is called after all the ``Form.clean`` methods
 have been called. The errors will be found using the ``non_form_errors()``
 method on the formset.
 
+Non-form errors will be rendered with an additional class of ``nonform`` to
+help distinguish them from field-specific errors. For example,
+``{{ formset.non_form_errors }}`` would look like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 Validating the number of forms in a formset
 ===========================================
 
diff --git a/docs/topics/forms/index.txt b/docs/topics/forms/index.txt
index e55b6d7bf2..ebc3145986 100644
--- a/docs/topics/forms/index.txt
+++ b/docs/topics/forms/index.txt
@@ -616,6 +616,16 @@ errors. For example, ``{{ form.non_field_errors }}`` would look like:
         <li>Generic validation error</li>
     </ul>
 
+Similarly, non-form errors on formsets will be rendered with an additional
+class of ``nonform``. For example, ``{{ formset.non_form_errors }}`` would look
+like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 See :doc:`/ref/forms/api` for more on errors, styling, and working with form
 attributes in templates.
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-24 03:56:47,597 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_block_error.html
    |   |   ├── test_extends_block_error_parent.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Add `nonform` CSS class for non form errors in FormSets

Description: Description
	 
		(last modified by Ties Jan Hefting)
	 
Forms add the nonfield CSS class for non field errors in ErrorList instances. This is documented in a section on ​rendering form error messages. Similarly, in FormSets I'd expect to see the nonform CSS class added for non form errors. This would allow a custom ErrorList to make a distinction in form field errors, non field errors (forms) and non form errors (FormSets) when rendering error messages. Therefore I'd suggest to add this nonform CSS class and document it for developers to use.

Patch information:
diff --git a/django/forms/formsets.py b/django/forms/formsets.py
index a89c35599f..1b0d4554e0 100644
--- a/django/forms/formsets.py
+++ b/django/forms/formsets.py
@@ -333,7 +333,7 @@ class BaseFormSet:
         self._non_form_errors.
         """
         self._errors = []
-        self._non_form_errors = self.error_class()
+        self._non_form_errors = self.error_class(error_class='nonform')
         empty_forms_count = 0
 
         if not self.is_bound:  # Stop further processing.
@@ -380,7 +380,7 @@ class BaseFormSet:
             # Give self.clean() a chance to do cross-form validation.
             self.clean()
         except ValidationError as e:
-            self._non_form_errors = self.error_class(e.error_list)
+            self._non_form_errors = self.error_class(e.error_list, error_class='nonform')
 
     def clean(self):
         """
diff --git a/docs/ref/forms/api.txt b/docs/ref/forms/api.txt
index 5df969232a..013193fe1e 100644
--- a/docs/ref/forms/api.txt
+++ b/docs/ref/forms/api.txt
@@ -210,6 +210,13 @@ This includes ``ValidationError``\s that are raised in :meth:`Form.clean()
 <django.forms.Form.clean>` and errors added using :meth:`Form.add_error(None,
 "...") <django.forms.Form.add_error>`.
 
+Non-form errors on formsets
+---------------------------
+
+Formset-level errors returned by :meth:`~django.forms.formsets.BaseFormSet.non_form_errors`
+are rendered with an additional ``nonform`` CSS class (e.g., ``<ul class="errorlist nonform">``)
+to distinguish them from field-specific and form-level non-field errors.
+
 Behavior of unbound forms
 -------------------------
 
diff --git a/docs/topics/forms/formsets.txt b/docs/topics/forms/formsets.txt
index 1f2c7c3fad..fbce2f5393 100644
--- a/docs/topics/forms/formsets.txt
+++ b/docs/topics/forms/formsets.txt
@@ -365,6 +365,16 @@ The formset ``clean`` method is called after all the ``Form.clean`` methods
 have been called. The errors will be found using the ``non_form_errors()``
 method on the formset.
 
+Non-form errors will be rendered with an additional class of ``nonform`` to
+help distinguish them from field-specific errors. For example,
+``{{ formset.non_form_errors }}`` would look like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 Validating the number of forms in a formset
 ===========================================
 
diff --git a/docs/topics/forms/index.txt b/docs/topics/forms/index.txt
index e55b6d7bf2..ebc3145986 100644
--- a/docs/topics/forms/index.txt
+++ b/docs/topics/forms/index.txt
@@ -616,6 +616,16 @@ errors. For example, ``{{ form.non_field_errors }}`` would look like:
         <li>Generic validation error</li>
     </ul>
 
+Similarly, non-form errors on formsets will be rendered with an additional
+class of ``nonform``. For example, ``{{ formset.non_form_errors }}`` would look
+like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 See :doc:`/ref/forms/api` for more on errors, styling, and working with form
 attributes in templates.
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 03:57:07,063 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find test cases related to FormSet error rendering. The patch adds a 'nonform' CSS class to non-form errors in a FormSet. The most relevant tests would be in the test file for formsets. The issue description also draws a parallel to 'non_field_errors' in single forms, making the test file for forms also relevant. Therefore, I need to examine `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py` to find tests that check the HTML rendering of form or formset errors." query='Please provide the full content of `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`.' extra_requirements='' purpose='I need to find existing test cases that check the rendering of formset and form errors, which can be adapted to test the new `nonform` CSS class.'
2025-12-24 03:57:07,064 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`.
2025-12-24 03:57:07,064 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 03:57:07,065 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 03:57:07,065 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 03:57:07,065 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`.
Purpose: I need to find existing test cases that check the rendering of formset and form errors, which can be adapted to test the new `nonform` CSS class.
2025-12-24 03:57:10,261 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have initiated a search for the contents of both `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`. This will allow me to examine the existing test cases for formset and form error rendering. By analyzing these files, I can identify relevant examples to adapt for testing the new `nonform` CSS class.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/forms_tests/tests/test_forms.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2135, 'candidates_token_count': 138, 'total_token_count': 2404, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2135}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 138}], 'thoughts_token_count': 131, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.052869890047156295, 'model_name': 'gemini-2.5-pro'} id='run--6103f8b3-aaec-43ea-9282-9905d385ab52-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/forms_tests/tests/test_formsets.py'}, 'id': 'e47bf179-5f62-4dbb-bdee-261e91f3d479', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/forms_tests/tests/test_forms.py'}, 'id': '0a04a2c4-1609-4bde-9063-f0734251728b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2135, 'output_tokens': 138, 'total_tokens': 2404, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 131}}
2025-12-24 03:57:18,029 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the contents of both `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`. My next step is to analyze these files to locate existing test cases that handle the rendering of formset and form errors. This will provide the necessary foundation for developing tests for the new `nonform` CSS class.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 109.0, "relative_path": "tests/forms_tests/tests/test_forms.py", "end_line": 166.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 21195, 'candidates_token_count': 150, 'total_token_count': 21927, 'cached_content_token_count': 1882, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21195}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1882}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 150}], 'thoughts_token_count': 582}, 'finish_reason': 'STOP', 'avg_logprobs': -0.26709327697753904, 'model_name': 'gemini-2.5-pro'} id='run--e327685f-1f17-4b26-bde0-d814c6022f64-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 319.0, 'relative_path': 'tests/forms_tests/tests/test_formsets.py', 'end_line': 362.0}, 'id': '4faa6d86-9744-4b91-be8b-1d8fab12ba3c', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 109.0, 'relative_path': 'tests/forms_tests/tests/test_forms.py', 'end_line': 166.0}, 'id': '9026e602-0253-4330-b15b-ac81858ae729', 'type': 'tool_call'}] usage_metadata={'input_tokens': 21195, 'output_tokens': 150, 'total_tokens': 21927, 'input_token_details': {'cache_read': 1882}, 'output_token_details': {'reasoning': 582}}
2025-12-24 03:57:22,895 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now reviewed both `test_formsets.py` and `test_forms.py`, focusing on tests that handle error rendering. In `test_formsets.py`, the `test_formset_validate_max_flag` and `test_formset_validate_min_flag` tests are particularly relevant as they demonstrate how `non_form_errors` are handled. Similarly, `test_empty_dict` in `test_forms.py` provides examples of form error rendering. My next step is to investigate the `BaseFormSet` class to understand how to trigger the `nonform` CSS class.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "class BaseFormSet", "basename": "formsets.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 23594, 'candidates_token_count': 159, 'total_token_count': 23985, 'cached_content_token_count': 20729, 'prompt_tokens_details': [{'modality': 1, 'token_count': 23594}], 'cache_tokens_details': [{'modality': 1, 'token_count': 20729}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 159}], 'thoughts_token_count': 232}, 'finish_reason': 'STOP', 'avg_logprobs': -0.19124723230517884, 'model_name': 'gemini-2.5-pro'} id='run--6909b457-6af0-4264-a929-0a5277be61d7-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'class BaseFormSet', 'basename': 'formsets.py'}, 'id': '57ba11ac-18e6-4e0d-a134-4ad20e426aad', 'type': 'tool_call'}] usage_metadata={'input_tokens': 23594, 'output_tokens': 159, 'total_tokens': 23985, 'input_token_details': {'cache_read': 20729}, 'output_token_details': {'reasoning': 232}}
2025-12-24 03:57:27,810 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I've located the `BaseFormSet` class and its `non_form_errors` method, which handles errors not specific to any single form. To understand how to trigger these non-form errors for testing the `nonform` CSS class, I will now examine the `full_clean` and `as_p` methods within the `BaseFormSet` class. This will reveal the mechanism for populating and rendering these errors." additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 450.0, "relative_path": "django/forms/formsets.py", "end_line": 457.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 28357, 'candidates_token_count': 147, 'total_token_count': 28768, 'cached_content_token_count': 22703, 'prompt_tokens_details': [{'modality': 1, 'token_count': 28357}], 'cache_tokens_details': [{'modality': 1, 'token_count': 22703}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 147}], 'thoughts_token_count': 264}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22191368154927987, 'model_name': 'gemini-2.5-pro'} id='run--07c58aa9-f719-4c10-b221-c0c781db88c4-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 354.0, 'relative_path': 'django/forms/formsets.py', 'end_line': 418.0}, 'id': '740ca7d8-8574-4ccb-846a-7c95c16ecefd', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 450.0, 'relative_path': 'django/forms/formsets.py', 'end_line': 457.0}, 'id': '63ef3fff-f277-4a3f-ac21-7792fe6df411', 'type': 'tool_call'}] usage_metadata={'input_tokens': 28357, 'output_tokens': 147, 'total_tokens': 28768, 'input_token_details': {'cache_read': 22703}, 'output_token_details': {'reasoning': 264}}
2025-12-24 03:57:34,189 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have analyzed the `BaseFormSet` class, including the `full_clean` and `as_p` methods, to understand how non-form errors are handled. My investigation revealed that while `full_clean` populates the `_non_form_errors` list, the rendering of these errors is not handled directly within the formset's rendering methods like `as_p`. Instead, this is managed by the template, so I will now investigate the templates to see how the `nonform` CSS class is applied." additional_kwargs={'function_call': {'name': 'find_text_node_with_text_in_file', 'arguments': '{"basename": "forms.py", "text": "class Form"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 29880, 'candidates_token_count': 131, 'total_token_count': 30382, 'cached_content_token_count': 26484, 'prompt_tokens_details': [{'modality': 1, 'token_count': 29880}], 'cache_tokens_details': [{'modality': 1, 'token_count': 26484}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 131}], 'thoughts_token_count': 371}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5908907242403686, 'model_name': 'gemini-2.5-pro'} id='run--2d18c871-0331-419a-a699-75a466adc357-0' tool_calls=[{'name': 'find_text_node_with_text_in_file', 'args': {'basename': 'forms.py', 'text': 'class Form'}, 'id': '478031fb-1ae2-478e-ac92-e8140b96f0d3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 29880, 'output_tokens': 131, 'total_tokens': 30382, 'input_token_details': {'cache_read': 26484}, 'output_token_details': {'reasoning': 371}}
2025-12-24 03:57:38,909 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now determined that the rendering of `non_form_errors` and the application of the `nonform` CSS class are handled by templates rather than the formset\'s methods. My previous attempt to locate the `Form` class was unsuccessful. Therefore, I will now search the codebase for the string "nonform" to directly locate the relevant template file and analyze its implementation.' additional_kwargs={'function_call': {'name': 'find_text_node_with_text', 'arguments': '{"text": "nonform"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30037, 'candidates_token_count': 91, 'total_token_count': 30373, 'cached_content_token_count': 28356, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30037}], 'cache_tokens_details': [{'modality': 1, 'token_count': 28356}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 91}], 'thoughts_token_count': 245}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5589566073574863, 'model_name': 'gemini-2.5-pro'} id='run--498326b3-12b8-423a-a7b4-5ceec6e8ee77-0' tool_calls=[{'name': 'find_text_node_with_text', 'args': {'text': 'nonform'}, 'id': '61d458e0-14a3-4e4a-920f-47bcc60bf201', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30037, 'output_tokens': 91, 'total_tokens': 30373, 'input_token_details': {'cache_read': 28356}, 'output_token_details': {'reasoning': 245}}
2025-12-24 03:57:45,185 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have been unsuccessful in locating the `nonform` CSS class by searching for the `Form` class and the string "nonform" directly. This suggests that the class may be applied dynamically or is not explicitly present in the files I\'ve examined. Therefore, I will now broaden my search to locate the default form templates and analyze how form errors, including non-form errors, are rendered in order to find where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/templates/django/forms/div.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30150, 'candidates_token_count': 122, 'total_token_count': 30604, 'cached_content_token_count': 26448, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30150}], 'cache_tokens_details': [{'modality': 1, 'token_count': 26448}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 122}], 'thoughts_token_count': 332}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5530950827676742, 'model_name': 'gemini-2.5-pro'} id='run--885f27d7-03bf-422b-847e-7ccef980c719-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/div.html'}, 'id': 'fc2536f2-2aac-4405-b03e-e97f74e051af', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30150, 'output_tokens': 122, 'total_tokens': 30604, 'input_token_details': {'cache_read': 26448}, 'output_token_details': {'reasoning': 332}}
2025-12-24 03:57:47,731 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='My previous attempts to locate the relevant template files were unsuccessful. I will now try to read the `p.html` file within the `django/forms/templates/django/forms/` directory to analyze how form errors are rendered and to find where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/templates/django/forms/p.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30303, 'candidates_token_count': 88, 'total_token_count': 30452, 'cached_content_token_count': 28320, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30303}], 'cache_tokens_details': [{'modality': 1, 'token_count': 28320}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 88}], 'thoughts_token_count': 61}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2322939309206876, 'model_name': 'gemini-2.5-pro'} id='run--ed3807f3-225e-482d-af19-6d6188b4ae53-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/p.html'}, 'id': '7e5cd7f7-0ebe-43d0-b82a-46936f2cedaa', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30303, 'output_tokens': 88, 'total_tokens': 30452, 'input_token_details': {'cache_read': 28320}, 'output_token_details': {'reasoning': 61}}
2025-12-24 03:57:50,855 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='My attempts to locate the `div.html` and `p.html` templates have been unsuccessful. I will now try to read the `table.html` file within the same directory, as it is another common template for rendering forms. This will help me understand how form errors are rendered and where the `nonform` CSS class might be applied.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/templates/django/forms/table.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30422, 'candidates_token_count': 99, 'total_token_count': 30614, 'cached_content_token_count': 30188, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30422}], 'cache_tokens_details': [{'modality': 1, 'token_count': 30188}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 99}], 'thoughts_token_count': 93}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2872500178789852, 'model_name': 'gemini-2.5-pro'} id='run--eadafaaf-b356-406f-afcc-e26149c129c8-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/table.html'}, 'id': '55c64133-151d-4083-85bd-c88a8d860737', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30422, 'output_tokens': 99, 'total_tokens': 30614, 'input_token_details': {'cache_read': 30188}, 'output_token_details': {'reasoning': 93}}
2025-12-24 03:57:53,544 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='My attempts to locate the default form templates have been unsuccessful. It appears the file structure is not what I initially assumed. To find the correct template path and determine where the `nonform` CSS class is used, I will now search for the `DjangoTemplates` class, which is responsible for rendering these templates.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"basename": "renderers.py", "text": "class DjangoTemplates"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30552, 'candidates_token_count': 89, 'total_token_count': 30715, 'cached_content_token_count': 30169, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30552}], 'cache_tokens_details': [{'modality': 1, 'token_count': 30169}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 89}], 'thoughts_token_count': 74}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22115038753895278, 'model_name': 'gemini-2.5-pro'} id='run--2848c776-fd79-4bdb-8884-4830df83a59d-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'basename': 'renderers.py', 'text': 'class DjangoTemplates'}, 'id': 'ea7dba8c-6e36-4a6a-ac4c-f3a12e95792a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30552, 'output_tokens': 89, 'total_tokens': 30715, 'input_token_details': {'cache_read': 30169}, 'output_token_details': {'reasoning': 74}}
2025-12-24 03:57:57,842 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have located the `DjangoTemplates` class, which confirms that form templates are loaded from the `django/forms/templates` directory. My previous attempts to read the template files failed because I was using an incorrect path. I will now correct the path and read the `div.html`, `p.html`, and `table.html` files to analyze how form errors are rendered and find where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/templates/django/forms/table.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30808, 'candidates_token_count': 172, 'total_token_count': 31145, 'cached_content_token_count': 30138, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30808}], 'cache_tokens_details': [{'modality': 1, 'token_count': 30138}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 172}], 'thoughts_token_count': 165}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1532737598862759, 'model_name': 'gemini-2.5-pro'} id='run--1fb1aca8-5250-4a8a-a006-9ce2d06d65bd-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/div.html'}, 'id': 'fcd56260-4780-4c8f-89f1-bc9916052d6a', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/p.html'}, 'id': '104a168d-d8a3-4a5c-8538-f432db7d85fe', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/table.html'}, 'id': '08424580-5589-4ffe-a3e2-8f6192cb7e52', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30808, 'output_tokens': 172, 'total_tokens': 31145, 'input_token_details': {'cache_read': 30138}, 'output_token_details': {'reasoning': 165}}
2025-12-24 03:58:03,496 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='My previous attempts to locate the default form templates were unsuccessful, and I have now determined that the rendering of `non_form_errors` is handled by templates. I will now search for the `widgets.py` file to understand how templates are rendered and to find the correct path to the template files. This will allow me to analyze the templates and determine where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "widgets.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31073, 'candidates_token_count': 96, 'total_token_count': 31562, 'cached_content_token_count': 30094, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31073}], 'cache_tokens_details': [{'modality': 1, 'token_count': 30094}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 96}], 'thoughts_token_count': 393}, 'finish_reason': 'STOP', 'avg_logprobs': -1.0605565706888835, 'model_name': 'gemini-2.5-pro'} id='run--f04e4596-55aa-4a84-8baf-0fd51a3623c2-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'widgets.py'}, 'id': 'c2840cfd-7994-4753-b4d2-439931066a20', 'type': 'tool_call'}] usage_metadata={'input_tokens': 31073, 'output_tokens': 96, 'total_tokens': 31562, 'input_token_details': {'cache_read': 30094}, 'output_token_details': {'reasoning': 393}}
2025-12-24 03:58:06,112 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have located several `widgets.py` files, with the most relevant being `django/forms/widgets.py`. My next step is to examine this file to understand how templates are rendered. This will help me find the correct path to the template files so I can analyze them and determine where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/widgets.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31368, 'candidates_token_count': 91, 'total_token_count': 31561, 'cached_content_token_count': 30058, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31368}], 'cache_tokens_details': [{'modality': 1, 'token_count': 30058}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 91}], 'thoughts_token_count': 102}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2132484100677155, 'model_name': 'gemini-2.5-pro'} id='run--e65ec400-0821-4f40-8add-916cafb2751a-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/widgets.py'}, 'id': '64bcd1a8-3e09-4324-80cd-1ac50592694a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 31368, 'output_tokens': 91, 'total_tokens': 31561, 'input_token_details': {'cache_read': 30058}, 'output_token_details': {'reasoning': 102}}
2025-12-24 03:58:08,370 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have examined `django/forms/widgets.py` and found that the `template_name` attribute for each widget specifies the path to the template used for rendering. For example, the `TextInput` widget uses `django/forms/widgets/text.html`. This confirms that the templates are located in the `django/forms/widgets/` directory. I will now read the content of `input.html` to analyze how form errors are rendered and to find where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/widgets/input.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38193, 'candidates_token_count': 130, 'total_token_count': 38323, 'cached_content_token_count': 30245, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38193}], 'cache_tokens_details': [{'modality': 1, 'token_count': 30245}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 130}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.08640812360323392, 'model_name': 'gemini-2.5-pro'} id='run--3d6dbe0e-3c8b-4446-a714-9ec1c3fdd9d7-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/widgets/input.html'}, 'id': 'cc653644-9069-4b1a-914b-ce355d7ab378', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38193, 'output_tokens': 130, 'total_tokens': 38323, 'input_token_details': {'cache_read': 30245}}
2025-12-24 03:58:11,033 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have determined that the `nonform` CSS class is not directly present in the form or formset classes, but is likely applied within the template files. I have also identified the correct directory for widget templates. Therefore, I will now read the content of the `text.html` file, which is used by the `TextInput` widget, to analyze how form fields are rendered and to find where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/widgets/text.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38350, 'candidates_token_count': 114, 'total_token_count': 38464, 'cached_content_token_count': 37789, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38350}], 'cache_tokens_details': [{'modality': 1, 'token_count': 37789}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 114}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.20055028011924342, 'model_name': 'gemini-2.5-pro'} id='run--bea7383f-9436-4621-bf0b-259821c5efbc-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/widgets/text.html'}, 'id': '7c207334-02b5-43f4-a7ba-8d1adac5961d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38350, 'output_tokens': 114, 'total_tokens': 38464, 'input_token_details': {'cache_read': 37789}}
2025-12-24 03:58:13,433 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have been unable to locate the specific template files for individual form widgets. It appears my assumption about the file structure was incorrect. To find the correct template and analyze how errors are rendered, I will now read the `base.html` file from the `django/forms/templates/django/forms/` directory, which is likely to contain the base structure for all form rendering. This will help me understand how the `nonform` CSS class is applied to non-form errors.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/templates/django/forms/base.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38491, 'candidates_token_count': 126, 'total_token_count': 38617, 'cached_content_token_count': 37771, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38491}], 'cache_tokens_details': [{'modality': 1, 'token_count': 37771}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 126}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15388655284094432, 'model_name': 'gemini-2.5-pro'} id='run--41da62a9-2af9-4762-95a7-880fc3901cce-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/base.html'}, 'id': '2f0ef24a-4b8a-4d01-ac3e-08cfc2d6e116', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38491, 'output_tokens': 126, 'total_tokens': 38617, 'input_token_details': {'cache_read': 37771}}
2025-12-24 03:58:15,484 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have been unable to locate the specific template files for form rendering. It appears my assumption about the file structure was incorrect. To find the correct template and analyze how errors are rendered, I will now read the `list.html` file from the `django/forms/templates/django/forms/` directory, which is another possibility for a base template. This will help me understand how the `nonform` CSS class is applied to non-form errors.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/templates/django/forms/list.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38648, 'candidates_token_count': 121, 'total_token_count': 38769, 'cached_content_token_count': 37754, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38648}], 'cache_tokens_details': [{'modality': 1, 'token_count': 37754}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 121}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0693304597838851, 'model_name': 'gemini-2.5-pro'} id='run--261d1a78-2257-4d49-b912-e1289aa570ac-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/list.html'}, 'id': '19ee8f7c-66f1-4217-90d9-8a335280520b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38648, 'output_tokens': 121, 'total_tokens': 38769, 'input_token_details': {'cache_read': 37754}}
2025-12-24 03:58:17,651 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have been unable to locate the specific template files for form rendering. It appears my assumption about the file structure was incorrect. I will now search for the `template_name` attribute within the `widgets.py` file to identify the correct template paths. This will allow me to analyze the templates and determine where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "template_name", "basename": "widgets.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38800, 'candidates_token_count': 98, 'total_token_count': 38898, 'cached_content_token_count': 37737, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38800}], 'cache_tokens_details': [{'modality': 1, 'token_count': 37737}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 98}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.08805794618567642, 'model_name': 'gemini-2.5-pro'} id='run--92b0e9b6-94bb-46a5-b73c-c0c7264b8b3c-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'template_name', 'basename': 'widgets.py'}, 'id': 'd45cb3cd-4097-4fe8-98cf-6ea957ce0565', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38800, 'output_tokens': 98, 'total_tokens': 38898, 'input_token_details': {'cache_read': 37737}}
2025-12-24 03:58:20,313 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified the template paths for several widgets, all located in the `django/forms/widgets/` directory. I will now read the `radio.html` template, used by the `AdminRadioSelect` widget, to analyze how form elements and errors are rendered. This will help me understand how the `nonform` CSS class is applied.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "admin/widgets/radio.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 39547, 'candidates_token_count': 93, 'total_token_count': 39723, 'cached_content_token_count': 37679, 'prompt_tokens_details': [{'modality': 1, 'token_count': 39547}], 'cache_tokens_details': [{'modality': 1, 'token_count': 37679}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 93}], 'thoughts_token_count': 83}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21448918824554772, 'model_name': 'gemini-2.5-pro'} id='run--a04cab64-1a79-4ed6-b4f6-adc844f09d57-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'admin/widgets/radio.html'}, 'id': '264fc35b-9e53-420d-97cc-b81c3b19b03b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 39547, 'output_tokens': 93, 'total_tokens': 39723, 'input_token_details': {'cache_read': 37679}, 'output_token_details': {'reasoning': 83}}
2025-12-24 03:58:24,170 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have been unable to locate the specific template files for form rendering. It appears my assumption about the file structure was incorrect. To find the correct template and analyze how errors are rendered, I will now read the `ul.html` file from the `django/forms/templates/django/forms/` directory, which is another possibility for a base template. This will help me understand how the `nonform` CSS class is applied to non-form errors.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/templates/django/forms/ul.html"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 39665, 'candidates_token_count': 121, 'total_token_count': 39859, 'cached_content_token_count': 37660, 'prompt_tokens_details': [{'modality': 1, 'token_count': 39665}], 'cache_tokens_details': [{'modality': 1, 'token_count': 37660}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 121}], 'thoughts_token_count': 73}, 'finish_reason': 'STOP', 'avg_logprobs': -0.19975356425135588, 'model_name': 'gemini-2.5-pro'} id='run--2ca04cfc-d852-4d43-948b-cc657f5ded45-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/templates/django/forms/ul.html'}, 'id': '239aa605-4567-47e9-96cf-ad55e3b1ec94', 'type': 'tool_call'}] usage_metadata={'input_tokens': 39665, 'output_tokens': 121, 'total_tokens': 39859, 'input_token_details': {'cache_read': 37660}, 'output_token_details': {'reasoning': 73}}
2025-12-24 03:58:29,537 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='My previous attempts to locate the template files have been unsuccessful. I will now re-examine the `forms.py` file to find the `Form` class and its `as_p` method. This will help me understand how form errors are rendered and will lead me to the correct template file where the `nonform` CSS class is applied.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "class Form", "basename": "forms.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 39817, 'candidates_token_count': 95, 'total_token_count': 40333, 'cached_content_token_count': 39526, 'prompt_tokens_details': [{'modality': 1, 'token_count': 39817}], 'cache_tokens_details': [{'modality': 1, 'token_count': 39526}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 95}], 'thoughts_token_count': 421}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5688225997121711, 'model_name': 'gemini-2.5-pro'} id='run--2e1e5482-83ec-4093-a95b-afa0ca4cb570-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'class Form', 'basename': 'forms.py'}, 'id': 'b3b7199d-be68-4755-8e2f-b61863d47421', 'type': 'tool_call'}] usage_metadata={'input_tokens': 39817, 'output_tokens': 95, 'total_tokens': 40333, 'input_token_details': {'cache_read': 39526}, 'output_token_details': {'reasoning': 421}}
2025-12-24 03:58:35,111 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully located the `Form` class in `django/forms/forms.py`. I will now examine the `as_p` method within this file to understand how forms are rendered as paragraphs. This will help me identify the template responsible for rendering the form and its errors, which will ultimately lead me to where the `nonform` CSS class is used.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "django/forms/forms.py", "text": "def as_p"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 40137, 'candidates_token_count': 109, 'total_token_count': 40690, 'cached_content_token_count': 39506, 'prompt_tokens_details': [{'modality': 1, 'token_count': 40137}], 'cache_tokens_details': [{'modality': 1, 'token_count': 39506}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 109}], 'thoughts_token_count': 444}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6402613088625286, 'model_name': 'gemini-2.5-pro'} id='run--49e0817d-3098-44a3-a958-6dba146d2ad2-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'django/forms/forms.py', 'text': 'def as_p'}, 'id': 'f9c89d27-e36e-484f-a8d0-c4ae9945dd52', 'type': 'tool_call'}] usage_metadata={'input_tokens': 40137, 'output_tokens': 109, 'total_tokens': 40690, 'input_token_details': {'cache_read': 39506}, 'output_token_details': {'reasoning': 444}}
2025-12-24 03:58:56,361 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have analyzed the `as_p` method in `django/forms/forms.py` and can now provide a complete answer. The `as_p` method calls the `_html_output` method, which is responsible for rendering the form. Within `_html_output`, non-field errors are rendered using the `error_row` template. The `non_field_errors` method in the `BaseForm` class retrieves these errors and applies the `nonfield` error class, which is the key to testing the `nonform` CSS class. I have now gathered all the necessary information to provide a comprehensive response.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 45167, 'candidates_token_count': 132, 'total_token_count': 47636, 'cached_content_token_count': 39624, 'prompt_tokens_details': [{'modality': 1, 'token_count': 45167}], 'cache_tokens_details': [{'modality': 1, 'token_count': 39624}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 132}], 'thoughts_token_count': 2337}, 'finish_reason': 'STOP', 'avg_logprobs': -2.040151885061553, 'model_name': 'gemini-2.5-pro'} id='run--1014ef71-d8a0-4c3e-99ae-72ec11c1acfb-0' usage_metadata={'input_tokens': 45167, 'output_tokens': 132, 'total_tokens': 47636, 'input_token_details': {'cache_read': 39624}, 'output_token_details': {'reasoning': 2337}}
2025-12-24 03:58:56,364 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find existing test cases that check the rendering of formset and form errors, which can be adapted to test the new `nonform` CSS class.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/contrib/admin/widgets.py
Line number range: 92 - 93
Content:
class AdminRadioSelect(forms.RadioSelect):
    template_name = 'admin/widgets/radio.html'


File: django/forms/forms.py
Line number range: 51 - 498
Content:
@html_safe
class BaseForm:
    """
    The main implementation of all the Form logic. Note that this class is
    different than Form. See the comments by the Form class for more info. Any
    improvements to the form API should be made to this class, not to the Form
    class.
    """
    default_renderer = None
    field_order = None
    prefix = None
    use_required_attribute = True

    def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,
                 initial=None, error_class=ErrorList, label_suffix=None,
                 empty_permitted=False, field_order=None, use_required_attribute=None, renderer=None):
        self.is_bound = data is not None or files is not None
        self.data = MultiValueDict() if data is None else data
        self.files = MultiValueDict() if files is None else files
        self.auto_id = auto_id
        if prefix is not None:
            self.prefix = prefix
        self.initial = initial or {}
        self.error_class = error_class
        # Translators: This is the default suffix added to form field labels
        self.label_suffix = label_suffix if label_suffix is not None else _(':')
        self.empty_permitted = empty_permitted
        self._errors = None  # Stores the errors after clean() has been called.

        # The base_fields class attribute is the *class-wide* definition of
        # fields. Because a particular *instance* of the class might want to
        # alter self.fields, we create self.fields here by copying base_fields.
        # Instances should always modify self.fields; they should not modify
        # self.base_fields.
        self.fields = copy.deepcopy(self.base_fields)
        self._bound_fields_cache = {}
        self.order_fields(self.field_order if field_order is None else field_order)

        if use_required_attribute is not None:
            self.use_required_attribute = use_required_attribute

        if self.empty_permitted and self.use_required_attribute:
            raise ValueError(
                'The empty_permitted and use_required_attribute arguments may '
                'not both be True.'
            )

        # Initialize form renderer. Use a global default if not specified
        # either as an argument or as self.default_renderer.
        if renderer is None:
            if self.default_renderer is None:
                renderer = get_default_renderer()
            else:
                renderer = self.default_renderer
                if isinstance(self.default_renderer, type):
                    renderer = renderer()
        self.renderer = renderer

    def order_fields(self, field_order):
        """
        Rearrange the fields according to field_order.

        field_order is a list of field names specifying the order. Append fields
        not included in the list in the default order for backward compatibility
        with subclasses not overriding field_order. If field_order is None,
        keep all fields in the order defined in the class. Ignore unknown
        fields in field_order to allow disabling fields in form subclasses
        without redefining ordering.
        """
        if field_order is None:
            return
        fields = {}
        for key in field_order:
            try:
                fields[key] = self.fields.pop(key)
            except KeyError:  # ignore unknown fields
                pass
        fields.update(self.fields)  # add remaining fields in original order
        self.fields = fields

    def __str__(self):
        return self.as_table()

    def __repr__(self):
        if self._errors is None:
            is_valid = "Unknown"
        else:
            is_valid = self.is_bound and not self._errors
        return '<%(cls)s bound=%(bound)s, valid=%(valid)s, fields=(%(fields)s)>' % {
            'cls': self.__class__.__name__,
            'bound': self.is_bound,
            'valid': is_valid,
            'fields': ';'.join(self.fields),
        }

    def __iter__(self):
        for name in self.fields:
            yield self[name]

    def __getitem__(self, name):
        """Return a BoundField with the given name."""
        try:
            return self._bound_fields_cache[name]
        except KeyError:
            pass
        try:
            field = self.fields[name]
        except KeyError:
            raise KeyError(
                "Key '%s' not found in '%s'. Choices are: %s." % (
                    name,
                    self.__class__.__name__,
                    ', '.join(sorted(self.fields)),
                )
            )
        bound_field = field.get_bound_field(self, name)
        self._bound_fields_cache[name] = bound_field
        return bound_field

    @property
    def errors(self):
        """Return an ErrorDict for the data provided for the form."""
        if self._errors is None:
            self.full_clean()
        return self._errors

    def is_valid(self):
        """Return True if the form has no errors, or False otherwise."""
        return self.is_bound and not self.errors

    def add_prefix(self, field_name):
        """
        Return the field name with a prefix appended, if this Form has a
        prefix set.

        Subclasses may wish to override.
        """
        return '%s-%s' % (self.prefix, field_name) if self.prefix else field_name

    def add_initial_prefix(self, field_name):
        """Add an 'initial' prefix for checking dynamic initial values."""
        return 'initial-%s' % self.add_prefix(field_name)

    def _widget_data_value(self, widget, html_name):
        # value_from_datadict() gets the data from the data dictionaries.
        # Each widget type knows how to retrieve its own data, because some
        # widgets split data over several HTML fields.
        return widget.value_from_datadict(self.data, self.files, html_name)

    def _field_data_value(self, field, html_name):
        return self._widget_data_value(field.widget, html_name)

    def _html_output(self, normal_row, error_row, row_ender, help_text_html, errors_on_separate_row):
        "Output HTML. Used by as_table(), as_ul(), as_p()."
        # Errors that should be displayed above all fields.
        top_errors = self.non_field_errors().copy()
        output, hidden_fields = [], []

        for name, field in self.fields.items():
            html_class_attr = ''
            bf = self[name]
            bf_errors = self.error_class(bf.errors)
            if bf.is_hidden:
                if bf_errors:
                    top_errors.extend(
                        [_('(Hidden field %(name)s) %(error)s') % {'name': name, 'error': str(e)}
                         for e in bf_errors])
                hidden_fields.append(str(bf))
            else:
                # Create a 'class="..."' attribute if the row should have any
                # CSS classes applied.
                css_classes = bf.css_classes()
                if css_classes:
                    html_class_attr = ' class="%s"' % css_classes

                if errors_on_separate_row and bf_errors:
                    output.append(error_row % str(bf_errors))

                if bf.label:
                    label = conditional_escape(bf.label)
                    label = bf.label_tag(label) or ''
                else:
                    label = ''

                if field.help_text:
                    help_text = help_text_html % field.help_text
                else:
                    help_text = ''

                output.append(normal_row % {
                    'errors': bf_errors,
                    'label': label,
                    'field': bf,
                    'help_text': help_text,
                    'html_class_attr': html_class_attr,
                    'css_classes': css_classes,
                    'field_name': bf.html_name,
                })

        if top_errors:
            output.insert(0, error_row % top_errors)

        if hidden_fields:  # Insert any hidden fields in the last row.
            str_hidden = ''.join(hidden_fields)
            if output:
                last_row = output[-1]
                # Chop off the trailing row_ender (e.g. '</td></tr>') and
                # insert the hidden fields.
                if not last_row.endswith(row_ender):
                    # This can happen in the as_p() case (and possibly others
                    # that users write): if there are only top errors, we may
                    # not be able to conscript the last row for our purposes,
                    # so insert a new, empty row.
                    last_row = (normal_row % {
                        'errors': '',
                        'label': '',
                        'field': '',
                        'help_text': '',
                        'html_class_attr': html_class_attr,
                        'css_classes': '',
                        'field_name': '',
                    })
                    output.append(last_row)
                output[-1] = last_row[:-len(row_ender)] + str_hidden + row_ender
            else:
                # If there aren't any rows in the output, just append the
                # hidden fields.
                output.append(str_hidden)
        return mark_safe('\n'.join(output))

    def as_table(self):
        "Return this form rendered as HTML <tr>s -- excluding the <table></table>."
        return self._html_output(
            normal_row='<tr%(html_class_attr)s><th>%(label)s</th><td>%(errors)s%(field)s%(help_text)s</td></tr>',
            error_row='<tr><td colspan="2">%s</td></tr>',
            row_ender='</td></tr>',
            help_text_html='<br><span class="helptext">%s</span>',
            errors_on_separate_row=False,
        )

    def as_ul(self):
        "Return this form rendered as HTML <li>s -- excluding the <ul></ul>."
        return self._html_output(
            normal_row='<li%(html_class_attr)s>%(errors)s%(label)s %(field)s%(help_text)s</li>',
            error_row='<li>%s</li>',
            row_ender='</li>',
            help_text_html=' <span class="helptext">%s</span>',
            errors_on_separate_row=False,
        )

    def as_p(self):
        "Return this form rendered as HTML <p>s."
        return self._html_output(
            normal_row='<p%(html_class_attr)s>%(label)s %(field)s%(help_text)s</p>',
            error_row='%s',
            row_ender='</p>',
            help_text_html=' <span class="helptext">%s</span>',
            errors_on_separate_row=True,
        )

    def non_field_errors(self):
        """
        Return an ErrorList of errors that aren't associated with a particular
        field -- i.e., from Form.clean(). Return an empty ErrorList if there
        are none.
        """
        return self.errors.get(NON_FIELD_ERRORS, self.error_class(error_class='nonfield'))

    def add_error(self, field, error):
        """
        Update the content of `self._errors`.

        The `field` argument is the name of the field to which the errors
        should be added. If it's None, treat the errors as NON_FIELD_ERRORS.

        The `error` argument can be a single error, a list of errors, or a
        dictionary that maps field names to lists of errors. An "error" can be
        either a simple string or an instance of ValidationError with its
        message attribute set and a "list or dictionary" can be an actual
        `list` or `dict` or an instance of ValidationError with its
        `error_list` or `error_dict` attribute set.

        If `error` is a dictionary, the `field` argument *must* be None and
        errors will be added to the fields that correspond to the keys of the
        dictionary.
        """
        if not isinstance(error, ValidationError):
            # Normalize to ValidationError and let its constructor
            # do the hard work of making sense of the input.
            error = ValidationError(error)

        if hasattr(error, 'error_dict'):
            if field is not None:
                raise TypeError(
                    "The argument `field` must be `None` when the `error` "
                    "argument contains errors for multiple fields."
                )
            else:
                error = error.error_dict
        else:
            error = {field or NON_FIELD_ERRORS: error.error_list}

        for field, error_list in error.items():
            if field not in self.errors:
                if field != NON_FIELD_ERRORS and field not in self.fields:
                    raise ValueError(
                        "'%s' has no field named '%s'." % (self.__class__.__name__, field))
                if field == NON_FIELD_ERRORS:
                    self._errors[field] = self.error_class(error_class='nonfield')
                else:
                    self._errors[field] = self.error_class()
            self._errors[field].extend(error_list)
            if field in self.cleaned_data:
                del self.cleaned_data[field]

    def has_error(self, field, code=None):
        return field in self.errors and (
            code is None or
            any(error.code == code for error in self.errors.as_data()[field])
        )

    def full_clean(self):
        """
        Clean all of self.data and populate self._errors and self.cleaned_data.
        """
        self._errors = ErrorDict()
        if not self.is_bound:  # Stop further processing.
            return
        self.cleaned_data = {}
        # If the form is permitted to be empty, and none of the form data has
        # changed from the initial data, short circuit any validation.
        if self.empty_permitted and not self.has_changed():
            return

        self._clean_fields()
        self._clean_form()
        self._post_clean()

    def _clean_fields(self):
        for name, field in self.fields.items():
            if field.disabled:
                value = self.get_initial_for_field(field, name)
            else:
                value = self._field_data_value(field, self.add_prefix(name))
            try:
                if isinstance(field, FileField):
                    initial = self.get_initial_for_field(field, name)
                    value = field.clean(value, initial)
                else:
                    value = field.clean(value)
                self.cleaned_data[name] = value
                if hasattr(self, 'clean_%s' % name):
                    value = getattr(self, 'clean_%s' % name)()
                    self.cleaned_data[name] = value
            except ValidationError as e:
                self.add_error(name, e)

    def _clean_form(self):
        try:
            cleaned_data = self.clean()
        except ValidationError as e:
            self.add_error(None, e)
        else:
            if cleaned_data is not None:
                self.cleaned_data = cleaned_data

    def _post_clean(self):
        """
        An internal hook for performing additional cleaning after form cleaning
        is complete. Used for model validation in model forms.
        """
        pass

    def clean(self):
        """
        Hook for doing any extra form-wide cleaning after Field.clean() has been
        called on every field. Any ValidationError raised by this method will
        not be associated with a particular field; it will have a special-case
        association with the field named '__all__'.
        """
        return self.cleaned_data

    def has_changed(self):
        """Return True if data differs from initial."""
        return bool(self.changed_data)

    @cached_property
    def changed_data(self):
        data = []
        for name, field in self.fields.items():
            data_value = self._field_data_value(field, self.add_prefix(name))
            if not field.show_hidden_initial:
                # Use the BoundField's initial as this is the value passed to
                # the widget.
                initial_value = self[name].initial
            else:
                initial_prefixed_name = self.add_initial_prefix(name)
                hidden_widget = field.hidden_widget()
                try:
                    initial_value = field.to_python(
                        self._widget_data_value(hidden_widget, initial_prefixed_name)
                    )
                except ValidationError:
                    # Always assume data has changed if validation fails.
                    data.append(name)
                    continue
            if field.has_changed(initial_value, data_value):
                data.append(name)
        return data

    @property
    def media(self):
        """Return all media required to render the widgets on this form."""
        media = Media()
        for field in self.fields.values():
            media = media + field.widget.media
        return media

    def is_multipart(self):
        """
        Return True if the form needs to be multipart-encoded, i.e. it has
        FileInput, or False otherwise.
        """
        return any(field.widget.needs_multipart_form for field in self.fields.values())

    def hidden_fields(self):
        """
        Return a list of all the BoundField objects that are hidden fields.
        Useful for manual form layout in templates.
        """
        return [field for field in self if field.is_hidden]

    def visible_fields(self):
        """
        Return a list of BoundField objects that aren't hidden fields.
        The opposite of the hidden_fields() method.
        """
        return [field for field in self if not field.is_hidden]

    def get_initial_for_field(self, field, field_name):
        """
        Return initial data for field on form. Use initial data from the form
        or the field, in that order. Evaluate callable values.
        """
        value = self.initial.get(field_name, field.initial)
        if callable(value):
            value = value()
        return value


File: django/forms/forms.py
Line number range: 501 - 507
Content:
class Form(BaseForm, metaclass=DeclarativeFieldsMetaclass):
    "A collection of Fields, plus their associated data."
    # This is a separate class from BaseForm in order to abstract the way
    # self.fields is specified. This class (Form) is the one that does the
    # fancy metaclass stuff purely for the semantic sugar -- it allows one
    # to define a form using declarative syntax.
    # BaseForm itself has no way of designating self.fields.


File: django/forms/formsets.py
Line number range: 53 - 457
Content:
@html_safe
class BaseFormSet:
    """
    A collection of instances of the same Form class.
    """
    ordering_widget = NumberInput
    default_error_messages = {
        'missing_management_form': _(
            'ManagementForm data is missing or has been tampered with. Missing fields: '
            '%(field_names)s. You may need to file a bug report if the issue persists.'
        ),
    }

    def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,
                 initial=None, error_class=ErrorList, form_kwargs=None,
                 error_messages=None):
        self.is_bound = data is not None or files is not None
        self.prefix = prefix or self.get_default_prefix()
        self.auto_id = auto_id
        self.data = data or {}
        self.files = files or {}
        self.initial = initial
        self.form_kwargs = form_kwargs or {}
        self.error_class = error_class
        self._errors = None
        self._non_form_errors = None

        messages = {}
        for cls in reversed(type(self).__mro__):
            messages.update(getattr(cls, 'default_error_messages', {}))
        if error_messages is not None:
            messages.update(error_messages)
        self.error_messages = messages

    def __str__(self):
        return self.as_table()

    def __iter__(self):
        """Yield the forms in the order they should be rendered."""
        return iter(self.forms)

    def __getitem__(self, index):
        """Return the form at the given index, based on the rendering order."""
        return self.forms[index]

    def __len__(self):
        return len(self.forms)

    def __bool__(self):
        """
        Return True since all formsets have a management form which is not
        included in the length.
        """
        return True

    @cached_property
    def management_form(self):
        """Return the ManagementForm instance for this FormSet."""
        if self.is_bound:
            form = ManagementForm(self.data, auto_id=self.auto_id, prefix=self.prefix)
            form.full_clean()
        else:
            form = ManagementForm(auto_id=self.auto_id, prefix=self.prefix, initial={
                TOTAL_FORM_COUNT: self.total_form_count(),
                INITIAL_FORM_COUNT: self.initial_form_count(),
                MIN_NUM_FORM_COUNT: self.min_num,
                MAX_NUM_FORM_COUNT: self.max_num
            })
        return form

    def total_form_count(self):
        """Return the total number of forms in this FormSet."""
        if self.is_bound:
            # return absolute_max if it is lower than the actual total form
            # count in the data; this is DoS protection to prevent clients
            # from forcing the server to instantiate arbitrary numbers of
            # forms
            return min(self.management_form.cleaned_data[TOTAL_FORM_COUNT], self.absolute_max)
        else:
            initial_forms = self.initial_form_count()
            total_forms = max(initial_forms, self.min_num) + self.extra
            # Allow all existing related objects/inlines to be displayed,
            # but don't allow extra beyond max_num.
            if initial_forms > self.max_num >= 0:
                total_forms = initial_forms
            elif total_forms > self.max_num >= 0:
                total_forms = self.max_num
        return total_forms

    def initial_form_count(self):
        """Return the number of forms that are required in this FormSet."""
        if self.is_bound:
            return self.management_form.cleaned_data[INITIAL_FORM_COUNT]
        else:
            # Use the length of the initial data if it's there, 0 otherwise.
            initial_forms = len(self.initial) if self.initial else 0
        return initial_forms

    @cached_property
    def forms(self):
        """Instantiate forms at first property access."""
        # DoS protection is included in total_form_count()
        return [
            self._construct_form(i, **self.get_form_kwargs(i))
            for i in range(self.total_form_count())
        ]

    def get_form_kwargs(self, index):
        """
        Return additional keyword arguments for each individual formset form.

        index will be None if the form being constructed is a new empty
        form.
        """
        return self.form_kwargs.copy()

    def _construct_form(self, i, **kwargs):
        """Instantiate and return the i-th form instance in a formset."""
        defaults = {
            'auto_id': self.auto_id,
            'prefix': self.add_prefix(i),
            'error_class': self.error_class,
            # Don't render the HTML 'required' attribute as it may cause
            # incorrect validation for extra, optional, and deleted
            # forms in the formset.
            'use_required_attribute': False,
        }
        if self.is_bound:
            defaults['data'] = self.data
            defaults['files'] = self.files
        if self.initial and 'initial' not in kwargs:
            try:
                defaults['initial'] = self.initial[i]
            except IndexError:
                pass
        # Allow extra forms to be empty, unless they're part of
        # the minimum forms.
        if i >= self.initial_form_count() and i >= self.min_num:
            defaults['empty_permitted'] = True
        defaults.update(kwargs)
        form = self.form(**defaults)
        self.add_fields(form, i)
        return form

    @property
    def initial_forms(self):
        """Return a list of all the initial forms in this formset."""
        return self.forms[:self.initial_form_count()]

    @property
    def extra_forms(self):
        """Return a list of all the extra forms in this formset."""
        return self.forms[self.initial_form_count():]

    @property
    def empty_form(self):
        form = self.form(
            auto_id=self.auto_id,
            prefix=self.add_prefix('__prefix__'),
            empty_permitted=True,
            use_required_attribute=False,
            **self.get_form_kwargs(None)
        )
        self.add_fields(form, None)
        return form

    @property
    def cleaned_data(self):
        """
        Return a list of form.cleaned_data dicts for every form in self.forms.
        """
        if not self.is_valid():
            raise AttributeError("'%s' object has no attribute 'cleaned_data'" % self.__class__.__name__)
        return [form.cleaned_data for form in self.forms]

    @property
    def deleted_forms(self):
        """Return a list of forms that have been marked for deletion."""
        if not self.is_valid() or not self.can_delete:
            return []
        # construct _deleted_form_indexes which is just a list of form indexes
        # that have had their deletion widget set to True
        if not hasattr(self, '_deleted_form_indexes'):
            self._deleted_form_indexes = []
            for i, form in enumerate(self.forms):
                # if this is an extra form and hasn't changed, don't consider it
                if i >= self.initial_form_count() and not form.has_changed():
                    continue
                if self._should_delete_form(form):
                    self._deleted_form_indexes.append(i)
        return [self.forms[i] for i in self._deleted_form_indexes]

    @property
    def ordered_forms(self):
        """
        Return a list of form in the order specified by the incoming data.
        Raise an AttributeError if ordering is not allowed.
        """
        if not self.is_valid() or not self.can_order:
            raise AttributeError("'%s' object has no attribute 'ordered_forms'" % self.__class__.__name__)
        # Construct _ordering, which is a list of (form_index, order_field_value)
        # tuples. After constructing this list, we'll sort it by order_field_value
        # so we have a way to get to the form indexes in the order specified
        # by the form data.
        if not hasattr(self, '_ordering'):
            self._ordering = []
            for i, form in enumerate(self.forms):
                # if this is an extra form and hasn't changed, don't consider it
                if i >= self.initial_form_count() and not form.has_changed():
                    continue
                # don't add data marked for deletion to self.ordered_data
                if self.can_delete and self._should_delete_form(form):
                    continue
                self._ordering.append((i, form.cleaned_data[ORDERING_FIELD_NAME]))
            # After we're done populating self._ordering, sort it.
            # A sort function to order things numerically ascending, but
            # None should be sorted below anything else. Allowing None as
            # a comparison value makes it so we can leave ordering fields
            # blank.

            def compare_ordering_key(k):
                if k[1] is None:
                    return (1, 0)  # +infinity, larger than any number
                return (0, k[1])
            self._ordering.sort(key=compare_ordering_key)
        # Return a list of form.cleaned_data dicts in the order specified by
        # the form data.
        return [self.forms[i[0]] for i in self._ordering]

    @classmethod
    def get_default_prefix(cls):
        return 'form'

    @classmethod
    def get_ordering_widget(cls):
        return cls.ordering_widget

    def non_form_errors(self):
        """
        Return an ErrorList of errors that aren't associated with a particular
        form -- i.e., from formset.clean(). Return an empty ErrorList if there
        are none.
        """
        if self._non_form_errors is None:
            self.full_clean()
        return self._non_form_errors

    @property
    def errors(self):
        """Return a list of form.errors for every form in self.forms."""
        if self._errors is None:
            self.full_clean()
        return self._errors

    def total_error_count(self):
        """Return the number of errors across all forms in the formset."""
        return len(self.non_form_errors()) +\
            sum(len(form_errors) for form_errors in self.errors)

    def _should_delete_form(self, form):
        """Return whether or not the form was marked for deletion."""
        return form.cleaned_data.get(DELETION_FIELD_NAME, False)

    def is_valid(self):
        """Return True if every form in self.forms is valid."""
        if not self.is_bound:
            return False
        # Accessing errors triggers a full clean the first time only.
        self.errors
        # List comprehension ensures is_valid() is called for all forms.
        # Forms due to be deleted shouldn't cause the formset to be invalid.
        forms_valid = all([
            form.is_valid() for form in self.forms
            if not (self.can_delete and self._should_delete_form(form))
        ])
        return forms_valid and not self.non_form_errors()

    def full_clean(self):
        """
        Clean all of self.data and populate self._errors and
        self._non_form_errors.
        """
        self._errors = []
        self._non_form_errors = self.error_class()
        empty_forms_count = 0

        if not self.is_bound:  # Stop further processing.
            return

        if not self.management_form.is_valid():
            error = ValidationError(
                self.error_messages['missing_management_form'],
                params={
                    'field_names': ', '.join(
                        self.management_form.add_prefix(field_name)
                        for field_name in self.management_form.errors
                    ),
                },
                code='missing_management_form',
            )
            self._non_form_errors.append(error)

        for i, form in enumerate(self.forms):
            # Empty forms are unchanged forms beyond those with initial data.
            if not form.has_changed() and i >= self.initial_form_count():
                empty_forms_count += 1
            # Accessing errors calls full_clean() if necessary.
            # _should_delete_form() requires cleaned_data.
            form_errors = form.errors
            if self.can_delete and self._should_delete_form(form):
                continue
            self._errors.append(form_errors)
        try:
            if (self.validate_max and
                    self.total_form_count() - len(self.deleted_forms) > self.max_num) or \
                    self.management_form.cleaned_data[TOTAL_FORM_COUNT] > self.absolute_max:
                raise ValidationError(ngettext(
                    "Please submit at most %d form.",
                    "Please submit at most %d forms.", self.max_num) % self.max_num,
                    code='too_many_forms',
                )
            if (self.validate_min and
                    self.total_form_count() - len(self.deleted_forms) - empty_forms_count < self.min_num):
                raise ValidationError(ngettext(
                    "Please submit at least %d form.",
                    "Please submit at least %d forms.", self.min_num) % self.min_num,
                    code='too_few_forms')
            # Give self.clean() a chance to do cross-form validation.
            self.clean()
        except ValidationError as e:
            self._non_form_errors = self.error_class(e.error_list)

    def clean(self):
        """
        Hook for doing any extra formset-wide cleaning after Form.clean() has
        been called on every form. Any ValidationError raised by this method
        will not be associated with a particular form; it will be accessible
        via formset.non_form_errors()
        """
        pass

    def has_changed(self):
        """Return True if data in any form differs from initial."""
        return any(form.has_changed() for form in self)

    def add_fields(self, form, index):
        """A hook for adding extra fields on to each form instance."""
        initial_form_count = self.initial_form_count()
        if self.can_order:
            # Only pre-fill the ordering field for initial forms.
            if index is not None and index < initial_form_count:
                form.fields[ORDERING_FIELD_NAME] = IntegerField(
                    label=_('Order'),
                    initial=index + 1,
                    required=False,
                    widget=self.get_ordering_widget(),
                )
            else:
                form.fields[ORDERING_FIELD_NAME] = IntegerField(
                    label=_('Order'),
                    required=False,
                    widget=self.get_ordering_widget(),
                )
        if self.can_delete and (self.can_delete_extra or index < initial_form_count):
            form.fields[DELETION_FIELD_NAME] = BooleanField(label=_('Delete'), required=False)

    def add_prefix(self, index):
        return '%s-%s' % (self.prefix, index)

    def is_multipart(self):
        """
        Return True if the formset needs to be multipart, i.e. it
        has FileInput, or False otherwise.
        """
        if self.forms:
            return self.forms[0].is_multipart()
        else:
            return self.empty_form.is_multipart()

    @property
    def media(self):
        # All the forms on a FormSet are the same, so you only need to
        # interrogate the first form for media.
        if self.forms:
            return self.forms[0].media
        else:
            return self.empty_form.media

    def as_table(self):
        "Return this formset rendered as HTML <tr>s -- excluding the <table></table>."
        # XXX: there is no semantic division between forms here, there
        # probably should be. It might make sense to render each form as a
        # table row with each field as a td.
        forms = ' '.join(form.as_table() for form in self)
        return mark_safe(str(self.management_form) + '\n' + forms)

    def as_p(self):
        "Return this formset rendered as HTML <p>s."
        forms = ' '.join(form.as_p() for form in self)
        return mark_safe(str(self.management_form) + '\n' + forms)

    def as_ul(self):
        "Return this formset rendered as HTML <li>s."
        forms = ' '.join(form.as_ul() for form in self)
        return mark_safe(str(self.management_form) + '\n' + forms)


File: django/forms/renderers.py
Line number range: 40 - 45
Content:
class DjangoTemplates(EngineMixin, BaseRenderer):
    """
    Load Django templates from the built-in widget templates in
    django/forms/templates and from apps' 'templates' directory.
    """
    backend = DjangoTemplates


File: django/forms/widgets.py
Line number range: 1 - 500
Content:
1. """
2. HTML Widget classes
3. """
4. 
5. import copy
6. import datetime
7. import warnings
8. from collections import defaultdict
9. from itertools import chain
10. 
11. from django.forms.utils import to_current_timezone
12. from django.templatetags.static import static
13. from django.utils import formats
14. from django.utils.datastructures import OrderedSet
15. from django.utils.dates import MONTHS
16. from django.utils.formats import get_format
17. from django.utils.html import format_html, html_safe
18. from django.utils.regex_helper import _lazy_re_compile
19. from django.utils.safestring import mark_safe
20. from django.utils.topological_sort import (
21.     CyclicDependencyError, stable_topological_sort,
22. )
23. from django.utils.translation import gettext_lazy as _
24. 
25. from .renderers import get_default_renderer
26. 
27. __all__ = (
28.     'Media', 'MediaDefiningClass', 'Widget', 'TextInput', 'NumberInput',
29.     'EmailInput', 'URLInput', 'PasswordInput', 'HiddenInput',
30.     'MultipleHiddenInput', 'FileInput', 'ClearableFileInput', 'Textarea',
31.     'DateInput', 'DateTimeInput', 'TimeInput', 'CheckboxInput', 'Select',
32.     'NullBooleanSelect', 'SelectMultiple', 'RadioSelect',
33.     'CheckboxSelectMultiple', 'MultiWidget', 'SplitDateTimeWidget',
34.     'SplitHiddenDateTimeWidget', 'SelectDateWidget',
35. )
36. 
37. MEDIA_TYPES = ('css', 'js')
38. 
39. 
40. class MediaOrderConflictWarning(RuntimeWarning):
41.     pass
42. 
43. 
44. @html_safe
45. class Media:
46.     def __init__(self, media=None, css=None, js=None):
47.         if media is not None:
48.             css = getattr(media, 'css', {})
49.             js = getattr(media, 'js', [])
50.         else:
51.             if css is None:
52.                 css = {}
53.             if js is None:
54.                 js = []
55.         self._css_lists = [css]
56.         self._js_lists = [js]
57. 
58.     def __repr__(self):
59.         return 'Media(css=%r, js=%r)' % (self._css, self._js)
60. 
61.     def __str__(self):
62.         return self.render()
63. 
64.     @property
65.     def _css(self):
66.         css = defaultdict(list)
67.         for css_list in self._css_lists:
68.             for medium, sublist in css_list.items():
69.                 css[medium].append(sublist)
70.         return {medium: self.merge(*lists) for medium, lists in css.items()}
71. 
72.     @property
73.     def _js(self):
74.         return self.merge(*self._js_lists)
75. 
76.     def render(self):
77.         return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
78. 
79.     def render_js(self):
80.         return [
81.             format_html(
82.                 '<script src="{}"></script>',
83.                 self.absolute_path(path)
84.             ) for path in self._js
85.         ]
86. 
87.     def render_css(self):
88.         # To keep rendering order consistent, we can't just iterate over items().
89.         # We need to sort the keys, and iterate over the sorted list.
90.         media = sorted(self._css)
91.         return chain.from_iterable([
92.             format_html(
93.                 '<link href="{}" type="text/css" media="{}" rel="stylesheet">',
94.                 self.absolute_path(path), medium
95.             ) for path in self._css[medium]
96.         ] for medium in media)
97. 
98.     def absolute_path(self, path):
99.         """
100.         Given a relative or absolute path to a static asset, return an absolute
101.         path. An absolute path will be returned unchanged while a relative path
102.         will be passed to django.templatetags.static.static().
103.         """
104.         if path.startswith(('http://', 'https://', '/')):
105.             return path
106.         return static(path)
107. 
108.     def __getitem__(self, name):
109.         """Return a Media object that only contains media of the given type."""
110.         if name in MEDIA_TYPES:
111.             return Media(**{str(name): getattr(self, '_' + name)})
112.         raise KeyError('Unknown media type "%s"' % name)
113. 
114.     @staticmethod
115.     def merge(*lists):
116.         """
117.         Merge lists while trying to keep the relative order of the elements.
118.         Warn if the lists have the same elements in a different relative order.
119. 
120.         For static assets it can be important to have them included in the DOM
121.         in a certain order. In JavaScript you may not be able to reference a
122.         global or in CSS you might want to override a style.
123.         """
124.         dependency_graph = defaultdict(set)
125.         all_items = OrderedSet()
126.         for list_ in filter(None, lists):
127.             head = list_[0]
128.             # The first items depend on nothing but have to be part of the
129.             # dependency graph to be included in the result.
130.             dependency_graph.setdefault(head, set())
131.             for item in list_:
132.                 all_items.add(item)
133.                 # No self dependencies
134.                 if head != item:
135.                     dependency_graph[item].add(head)
136.                 head = item
137.         try:
138.             return stable_topological_sort(all_items, dependency_graph)
139.         except CyclicDependencyError:
140.             warnings.warn(
141.                 'Detected duplicate Media files in an opposite order: {}'.format(
142.                     ', '.join(repr(list_) for list_ in lists)
143.                 ), MediaOrderConflictWarning,
144.             )
145.             return list(all_items)
146. 
147.     def __add__(self, other):
148.         combined = Media()
149.         combined._css_lists = self._css_lists[:]
150.         combined._js_lists = self._js_lists[:]
151.         for item in other._css_lists:
152.             if item and item not in self._css_lists:
153.                 combined._css_lists.append(item)
154.         for item in other._js_lists:
155.             if item and item not in self._js_lists:
156.                 combined._js_lists.append(item)
157.         return combined
158. 
159. 
160. def media_property(cls):
161.     def _media(self):
162.         # Get the media property of the superclass, if it exists
163.         sup_cls = super(cls, self)
164.         try:
165.             base = sup_cls.media
166.         except AttributeError:
167.             base = Media()
168. 
169.         # Get the media definition for this class
170.         definition = getattr(cls, 'Media', None)
171.         if definition:
172.             extend = getattr(definition, 'extend', True)
173.             if extend:
174.                 if extend is True:
175.                     m = base
176.                 else:
177.                     m = Media()
178.                     for medium in extend:
179.                         m = m + base[medium]
180.                 return m + Media(definition)
181.             return Media(definition)
182.         return base
183.     return property(_media)
184. 
185. 
186. class MediaDefiningClass(type):
187.     """
188.     Metaclass for classes that can have media definitions.
189.     """
190.     def __new__(mcs, name, bases, attrs):
191.         new_class = super().__new__(mcs, name, bases, attrs)
192. 
193.         if 'media' not in attrs:
194.             new_class.media = media_property(new_class)
195. 
196.         return new_class
197. 
198. 
199. class Widget(metaclass=MediaDefiningClass):
200.     needs_multipart_form = False  # Determines does this widget need multipart form
201.     is_localized = False
202.     is_required = False
203.     supports_microseconds = True
204. 
205.     def __init__(self, attrs=None):
206.         self.attrs = {} if attrs is None else attrs.copy()
207. 
208.     def __deepcopy__(self, memo):
209.         obj = copy.copy(self)
210.         obj.attrs = self.attrs.copy()
211.         memo[id(self)] = obj
212.         return obj
213. 
214.     @property
215.     def is_hidden(self):
216.         return self.input_type == 'hidden' if hasattr(self, 'input_type') else False
217. 
218.     def subwidgets(self, name, value, attrs=None):
219.         context = self.get_context(name, value, attrs)
220.         yield context['widget']
221. 
222.     def format_value(self, value):
223.         """
224.         Return a value as it should appear when rendered in a template.
225.         """
226.         if value == '' or value is None:
227.             return None
228.         if self.is_localized:
229.             return formats.localize_input(value)
230.         return str(value)
231. 
232.     def get_context(self, name, value, attrs):
233.         return {
234.             'widget': {
235.                 'name': name,
236.                 'is_hidden': self.is_hidden,
237.                 'required': self.is_required,
238.                 'value': self.format_value(value),
239.                 'attrs': self.build_attrs(self.attrs, attrs),
240.                 'template_name': self.template_name,
241.             },
242.         }
243. 
244.     def render(self, name, value, attrs=None, renderer=None):
245.         """Render the widget as an HTML string."""
246.         context = self.get_context(name, value, attrs)
247.         return self._render(self.template_name, context, renderer)
248. 
249.     def _render(self, template_name, context, renderer=None):
250.         if renderer is None:
251.             renderer = get_default_renderer()
252.         return mark_safe(renderer.render(template_name, context))
253. 
254.     def build_attrs(self, base_attrs, extra_attrs=None):
255.         """Build an attribute dictionary."""
256.         return {**base_attrs, **(extra_attrs or {})}
257. 
258.     def value_from_datadict(self, data, files, name):
259.         """
260.         Given a dictionary of data and this widget's name, return the value
261.         of this widget or None if it's not provided.
262.         """
263.         return data.get(name)
264. 
265.     def value_omitted_from_data(self, data, files, name):
266.         return name not in data
267. 
268.     def id_for_label(self, id_):
269.         """
270.         Return the HTML ID attribute of this Widget for use by a <label>,
271.         given the ID of the field. Return None if no ID is available.
272. 
273.         This hook is necessary because some widgets have multiple HTML
274.         elements and, thus, multiple IDs. In that case, this method should
275.         return an ID value that corresponds to the first ID in the widget's
276.         tags.
277.         """
278.         return id_
279. 
280.     def use_required_attribute(self, initial):
281.         return not self.is_hidden
282. 
283. 
284. class Input(Widget):
285.     """
286.     Base class for all <input> widgets.
287.     """
288.     input_type = None  # Subclasses must define this.
289.     template_name = 'django/forms/widgets/input.html'
290. 
291.     def __init__(self, attrs=None):
292.         if attrs is not None:
293.             attrs = attrs.copy()
294.             self.input_type = attrs.pop('type', self.input_type)
295.         super().__init__(attrs)
296. 
297.     def get_context(self, name, value, attrs):
298.         context = super().get_context(name, value, attrs)
299.         context['widget']['type'] = self.input_type
300.         return context
301. 
302. 
303. class TextInput(Input):
304.     input_type = 'text'
305.     template_name = 'django/forms/widgets/text.html'
306. 
307. 
308. class NumberInput(Input):
309.     input_type = 'number'
310.     template_name = 'django/forms/widgets/number.html'
311. 
312. 
313. class EmailInput(Input):
314.     input_type = 'email'
315.     template_name = 'django/forms/widgets/email.html'
316. 
317. 
318. class URLInput(Input):
319.     input_type = 'url'
320.     template_name = 'django/forms/widgets/url.html'
321. 
322. 
323. class PasswordInput(Input):
324.     input_type = 'password'
325.     template_name = 'django/forms/widgets/password.html'
326. 
327.     def __init__(self, attrs=None, render_value=False):
328.         super().__init__(attrs)
329.         self.render_value = render_value
330. 
331.     def get_context(self, name, value, attrs):
332.         if not self.render_value:
333.             value = None
334.         return super().get_context(name, value, attrs)
335. 
336. 
337. class HiddenInput(Input):
338.     input_type = 'hidden'
339.     template_name = 'django/forms/widgets/hidden.html'
340. 
341. 
342. class MultipleHiddenInput(HiddenInput):
343.     """
344.     Handle <input type="hidden"> for fields that have a list
345.     of values.
346.     """
347.     template_name = 'django/forms/widgets/multiple_hidden.html'
348. 
349.     def get_context(self, name, value, attrs):
350.         context = super().get_context(name, value, attrs)
351.         final_attrs = context['widget']['attrs']
352.         id_ = context['widget']['attrs'].get('id')
353. 
354.         subwidgets = []
355.         for index, value_ in enumerate(context['widget']['value']):
356.             widget_attrs = final_attrs.copy()
357.             if id_:
358.                 # An ID attribute was given. Add a numeric index as a suffix
359.                 # so that the inputs don't all have the same ID attribute.
360.                 widget_attrs['id'] = '%s_%s' % (id_, index)
361.             widget = HiddenInput()
362.             widget.is_required = self.is_required
363.             subwidgets.append(widget.get_context(name, value_, widget_attrs)['widget'])
364. 
365.         context['widget']['subwidgets'] = subwidgets
366.         return context
367. 
368.     def value_from_datadict(self, data, files, name):
369.         try:
370.             getter = data.getlist
371.         except AttributeError:
372.             getter = data.get
373.         return getter(name)
374. 
375.     def format_value(self, value):
376.         return [] if value is None else value
377. 
378. 
379. class FileInput(Input):
380.     input_type = 'file'
381.     needs_multipart_form = True
382.     template_name = 'django/forms/widgets/file.html'
383. 
384.     def format_value(self, value):
385.         """File input never renders a value."""
386.         return
387. 
388.     def value_from_datadict(self, data, files, name):
389.         "File widgets take data from FILES, not POST"
390.         return files.get(name)
391. 
392.     def value_omitted_from_data(self, data, files, name):
393.         return name not in files
394. 
395.     def use_required_attribute(self, initial):
396.         return super().use_required_attribute(initial) and not initial
397. 
398. 
399. FILE_INPUT_CONTRADICTION = object()
400. 
401. 
402. class ClearableFileInput(FileInput):
403.     clear_checkbox_label = _('Clear')
404.     initial_text = _('Currently')
405.     input_text = _('Change')
406.     template_name = 'django/forms/widgets/clearable_file_input.html'
407. 
408.     def clear_checkbox_name(self, name):
409.         """
410.         Given the name of the file input, return the name of the clear checkbox
411.         input.
412.         """
413.         return name + '-clear'
414. 
415.     def clear_checkbox_id(self, name):
416.         """
417.         Given the name of the clear checkbox input, return the HTML id for it.
418.         """
419.         return name + '_id'
420. 
421.     def is_initial(self, value):
422.         """
423.         Return whether value is considered to be initial value.
424.         """
425.         return bool(value and getattr(value, 'url', False))
426. 
427.     def format_value(self, value):
428.         """
429.         Return the file object if it has a defined url attribute.
430.         """
431.         if self.is_initial(value):
432.             return value
433. 
434.     def get_context(self, name, value, attrs):
435.         context = super().get_context(name, value, attrs)
436.         checkbox_name = self.clear_checkbox_name(name)
437.         checkbox_id = self.clear_checkbox_id(checkbox_name)
438.         context['widget'].update({
439.             'checkbox_name': checkbox_name,
440.             'checkbox_id': checkbox_id,
441.             'is_initial': self.is_initial(value),
442.             'input_text': self.input_text,
443.             'initial_text': self.initial_text,
444.             'clear_checkbox_label': self.clear_checkbox_label,
445.         })
446.         return context
447. 
448.     def value_from_datadict(self, data, files, name):
449.         upload = super().value_from_datadict(data, files, name)
450.         if not self.is_required and CheckboxInput().value_from_datadict(
451.                 data, files, self.clear_checkbox_name(name)):
452. 
453.             if upload:
454.                 # If the user contradicts themselves (uploads a new file AND
455.                 # checks the "clear" checkbox), we return a unique marker
456.                 # object that FileField will turn into a ValidationError.
457.                 return FILE_INPUT_CONTRADICTION
458.             # False signals to clear any existing value, as opposed to just None
459.             return False
460.         return upload
461. 
462.     def value_omitted_from_data(self, data, files, name):
463.         return (
464.             super().value_omitted_from_data(data, files, name) and
465.             self.clear_checkbox_name(name) not in data
466.         )
467. 
468. 
469. class Textarea(Widget):
470.     template_name = 'django/forms/widgets/textarea.html'
471. 
472.     def __init__(self, attrs=None):
473.         # Use slightly better defaults than HTML's 20x2 box
474.         default_attrs = {'cols': '40', 'rows': '10'}
475.         if attrs:
476.             default_attrs.update(attrs)
477.         super().__init__(default_attrs)
478. 
479. 
480. class DateTimeBaseInput(TextInput):
481.     format_key = ''
482.     supports_microseconds = False
483. 
484.     def __init__(self, attrs=None, format=None):
485.         super().__init__(attrs)
486.         self.format = format or None
487. 
488.     def format_value(self, value):
489.         return formats.localize_input(value, self.format or formats.get_format(self.format_key)[0])
490. 
491. 
492. class DateInput(DateTimeBaseInput):
493.     format_key = 'DATE_INPUT_FORMATS'
494.     template_name = 'django/forms/widgets/date.html'
495. 
496. 
497. class DateTimeInput(DateTimeBaseInput):
498.     format_key = 'DATETIME_INPUT_FORMATS'
499.     template_name = 'django/forms/widgets/datetime.html'
500.


File: tests/forms_tests/tests/test_forms.py
Line number range: 1 - 500
Content:
1. import copy
2. import datetime
3. import json
4. import uuid
5. 
6. from django.core.exceptions import NON_FIELD_ERRORS
7. from django.core.files.uploadedfile import SimpleUploadedFile
8. from django.core.validators import MaxValueValidator, RegexValidator
9. from django.forms import (
10.     BooleanField, CharField, CheckboxSelectMultiple, ChoiceField, DateField,
11.     DateTimeField, EmailField, FileField, FileInput, FloatField, Form,
12.     HiddenInput, ImageField, IntegerField, MultipleChoiceField,
13.     MultipleHiddenInput, MultiValueField, NullBooleanField, PasswordInput,
14.     RadioSelect, Select, SplitDateTimeField, SplitHiddenDateTimeWidget,
15.     Textarea, TextInput, TimeField, ValidationError, forms,
16. )
17. from django.forms.renderers import DjangoTemplates, get_default_renderer
18. from django.forms.utils import ErrorList
19. from django.http import QueryDict
20. from django.template import Context, Template
21. from django.test import SimpleTestCase
22. from django.utils.datastructures import MultiValueDict
23. from django.utils.safestring import mark_safe
24. 
25. 
26. class Person(Form):
27.     first_name = CharField()
28.     last_name = CharField()
29.     birthday = DateField()
30. 
31. 
32. class PersonNew(Form):
33.     first_name = CharField(widget=TextInput(attrs={'id': 'first_name_id'}))
34.     last_name = CharField()
35.     birthday = DateField()
36. 
37. 
38. class MultiValueDictLike(dict):
39.     def getlist(self, key):
40.         return [self[key]]
41. 
42. 
43. class FormsTestCase(SimpleTestCase):
44.     # A Form is a collection of Fields. It knows how to validate a set of data and it
45.     # knows how to render itself in a couple of default ways (e.g., an HTML table).
46.     # You can pass it data in __init__(), as a dictionary.
47. 
48.     def test_form(self):
49.         # Pass a dictionary to a Form's __init__().
50.         p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': '1940-10-9'})
51. 
52.         self.assertTrue(p.is_bound)
53.         self.assertEqual(p.errors, {})
54.         self.assertTrue(p.is_valid())
55.         self.assertHTMLEqual(p.errors.as_ul(), '')
56.         self.assertEqual(p.errors.as_text(), '')
57.         self.assertEqual(p.cleaned_data["first_name"], 'John')
58.         self.assertEqual(p.cleaned_data["last_name"], 'Lennon')
59.         self.assertEqual(p.cleaned_data["birthday"], datetime.date(1940, 10, 9))
60.         self.assertHTMLEqual(
61.             str(p['first_name']),
62.             '<input type="text" name="first_name" value="John" id="id_first_name" required>'
63.         )
64.         self.assertHTMLEqual(
65.             str(p['last_name']),
66.             '<input type="text" name="last_name" value="Lennon" id="id_last_name" required>'
67.         )
68.         self.assertHTMLEqual(
69.             str(p['birthday']),
70.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>'
71.         )
72. 
73.         msg = "Key 'nonexistentfield' not found in 'Person'. Choices are: birthday, first_name, last_name."
74.         with self.assertRaisesMessage(KeyError, msg):
75.             p['nonexistentfield']
76. 
77.         form_output = []
78. 
79.         for boundfield in p:
80.             form_output.append(str(boundfield))
81. 
82.         self.assertHTMLEqual(
83.             '\n'.join(form_output),
84.             """<input type="text" name="first_name" value="John" id="id_first_name" required>
85. <input type="text" name="last_name" value="Lennon" id="id_last_name" required>
86. <input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>"""
87.         )
88. 
89.         form_output = []
90. 
91.         for boundfield in p:
92.             form_output.append([boundfield.label, boundfield.data])
93. 
94.         self.assertEqual(form_output, [
95.             ['First name', 'John'],
96.             ['Last name', 'Lennon'],
97.             ['Birthday', '1940-10-9']
98.         ])
99.         self.assertHTMLEqual(
100.             str(p),
101.             """<tr><th><label for="id_first_name">First name:</label></th><td>
102. <input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>
103. <tr><th><label for="id_last_name">Last name:</label></th><td>
104. <input type="text" name="last_name" value="Lennon" id="id_last_name" required></td></tr>
105. <tr><th><label for="id_birthday">Birthday:</label></th><td>
106. <input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>"""
107.         )
108. 
109.     def test_empty_dict(self):
110.         # Empty dictionaries are valid, too.
111.         p = Person({})
112.         self.assertTrue(p.is_bound)
113.         self.assertEqual(p.errors['first_name'], ['This field is required.'])
114.         self.assertEqual(p.errors['last_name'], ['This field is required.'])
115.         self.assertEqual(p.errors['birthday'], ['This field is required.'])
116.         self.assertFalse(p.is_valid())
117.         self.assertEqual(p.cleaned_data, {})
118.         self.assertHTMLEqual(
119.             str(p),
120.             """<tr><th><label for="id_first_name">First name:</label></th><td>
121. <ul class="errorlist"><li>This field is required.</li></ul>
122. <input type="text" name="first_name" id="id_first_name" required></td></tr>
123. <tr><th><label for="id_last_name">Last name:</label></th>
124. <td><ul class="errorlist"><li>This field is required.</li></ul>
125. <input type="text" name="last_name" id="id_last_name" required></td></tr>
126. <tr><th><label for="id_birthday">Birthday:</label></th><td>
127. <ul class="errorlist"><li>This field is required.</li></ul>
128. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
129.         )
130.         self.assertHTMLEqual(
131.             p.as_table(),
132.             """<tr><th><label for="id_first_name">First name:</label></th><td>
133. <ul class="errorlist"><li>This field is required.</li></ul>
134. <input type="text" name="first_name" id="id_first_name" required></td></tr>
135. <tr><th><label for="id_last_name">Last name:</label></th>
136. <td><ul class="errorlist"><li>This field is required.</li></ul>
137. <input type="text" name="last_name" id="id_last_name" required></td></tr>
138. <tr><th><label for="id_birthday">Birthday:</label></th>
139. <td><ul class="errorlist"><li>This field is required.</li></ul>
140. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
141.         )
142.         self.assertHTMLEqual(
143.             p.as_ul(),
144.             """<li><ul class="errorlist"><li>This field is required.</li></ul>
145. <label for="id_first_name">First name:</label>
146. <input type="text" name="first_name" id="id_first_name" required></li>
147. <li><ul class="errorlist"><li>This field is required.</li></ul>
148. <label for="id_last_name">Last name:</label>
149. <input type="text" name="last_name" id="id_last_name" required></li>
150. <li><ul class="errorlist"><li>This field is required.</li></ul>
151. <label for="id_birthday">Birthday:</label>
152. <input type="text" name="birthday" id="id_birthday" required></li>"""
153.         )
154.         self.assertHTMLEqual(
155.             p.as_p(),
156.             """<ul class="errorlist"><li>This field is required.</li></ul>
157. <p><label for="id_first_name">First name:</label>
158. <input type="text" name="first_name" id="id_first_name" required></p>
159. <ul class="errorlist"><li>This field is required.</li></ul>
160. <p><label for="id_last_name">Last name:</label>
161. <input type="text" name="last_name" id="id_last_name" required></p>
162. <ul class="errorlist"><li>This field is required.</li></ul>
163. <p><label for="id_birthday">Birthday:</label>
164. <input type="text" name="birthday" id="id_birthday" required></p>"""
165.         )
166. 
167.     def test_empty_querydict_args(self):
168.         data = QueryDict()
169.         files = QueryDict()
170.         p = Person(data, files)
171.         self.assertIs(p.data, data)
172.         self.assertIs(p.files, files)
173. 
174.     def test_unbound_form(self):
175.         # If you don't pass any values to the Form's __init__(), or if you pass None,
176.         # the Form will be considered unbound and won't do any validation. Form.errors
177.         # will be an empty dictionary *but* Form.is_valid() will return False.
178.         p = Person()
179.         self.assertFalse(p.is_bound)
180.         self.assertEqual(p.errors, {})
181.         self.assertFalse(p.is_valid())
182.         with self.assertRaises(AttributeError):
183.             p.cleaned_data
184. 
185.         self.assertHTMLEqual(
186.             str(p),
187.             """<tr><th><label for="id_first_name">First name:</label></th><td>
188. <input type="text" name="first_name" id="id_first_name" required></td></tr>
189. <tr><th><label for="id_last_name">Last name:</label></th><td>
190. <input type="text" name="last_name" id="id_last_name" required></td></tr>
191. <tr><th><label for="id_birthday">Birthday:</label></th><td>
192. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
193.         )
194.         self.assertHTMLEqual(
195.             p.as_table(),
196.             """<tr><th><label for="id_first_name">First name:</label></th><td>
197. <input type="text" name="first_name" id="id_first_name" required></td></tr>
198. <tr><th><label for="id_last_name">Last name:</label></th><td>
199. <input type="text" name="last_name" id="id_last_name" required></td></tr>
200. <tr><th><label for="id_birthday">Birthday:</label></th><td>
201. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
202.         )
203.         self.assertHTMLEqual(
204.             p.as_ul(),
205.             """<li><label for="id_first_name">First name:</label>
206. <input type="text" name="first_name" id="id_first_name" required></li>
207. <li><label for="id_last_name">Last name:</label>
208. <input type="text" name="last_name" id="id_last_name" required></li>
209. <li><label for="id_birthday">Birthday:</label>
210. <input type="text" name="birthday" id="id_birthday" required></li>"""
211.         )
212.         self.assertHTMLEqual(
213.             p.as_p(),
214.             """<p><label for="id_first_name">First name:</label>
215. <input type="text" name="first_name" id="id_first_name" required></p>
216. <p><label for="id_last_name">Last name:</label>
217. <input type="text" name="last_name" id="id_last_name" required></p>
218. <p><label for="id_birthday">Birthday:</label>
219. <input type="text" name="birthday" id="id_birthday" required></p>"""
220.         )
221. 
222.     def test_unicode_values(self):
223.         # Unicode values are handled properly.
224.         p = Person({
225.             'first_name': 'John',
226.             'last_name': '\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111',
227.             'birthday': '1940-10-9'
228.         })
229.         self.assertHTMLEqual(
230.             p.as_table(),
231.             '<tr><th><label for="id_first_name">First name:</label></th><td>'
232.             '<input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>\n'
233.             '<tr><th><label for="id_last_name">Last name:</label>'
234.             '</th><td><input type="text" name="last_name" '
235.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111"'
236.             'id="id_last_name" required></td></tr>\n'
237.             '<tr><th><label for="id_birthday">Birthday:</label></th><td>'
238.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>'
239.         )
240.         self.assertHTMLEqual(
241.             p.as_ul(),
242.             '<li><label for="id_first_name">First name:</label> '
243.             '<input type="text" name="first_name" value="John" id="id_first_name" required></li>\n'
244.             '<li><label for="id_last_name">Last name:</label> '
245.             '<input type="text" name="last_name" '
246.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></li>\n'
247.             '<li><label for="id_birthday">Birthday:</label> '
248.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></li>'
249.         )
250.         self.assertHTMLEqual(
251.             p.as_p(),
252.             '<p><label for="id_first_name">First name:</label> '
253.             '<input type="text" name="first_name" value="John" id="id_first_name" required></p>\n'
254.             '<p><label for="id_last_name">Last name:</label> '
255.             '<input type="text" name="last_name" '
256.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></p>\n'
257.             '<p><label for="id_birthday">Birthday:</label> '
258.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></p>'
259.         )
260. 
261.         p = Person({'last_name': 'Lennon'})
262.         self.assertEqual(p.errors['first_name'], ['This field is required.'])
263.         self.assertEqual(p.errors['birthday'], ['This field is required.'])
264.         self.assertFalse(p.is_valid())
265.         self.assertEqual(
266.             p.errors,
267.             {'birthday': ['This field is required.'], 'first_name': ['This field is required.']}
268.         )
269.         self.assertEqual(p.cleaned_data, {'last_name': 'Lennon'})
270.         self.assertEqual(p['first_name'].errors, ['This field is required.'])
271.         self.assertHTMLEqual(
272.             p['first_name'].errors.as_ul(),
273.             '<ul class="errorlist"><li>This field is required.</li></ul>'
274.         )
275.         self.assertEqual(p['first_name'].errors.as_text(), '* This field is required.')
276. 
277.         p = Person()
278.         self.assertHTMLEqual(
279.             str(p['first_name']),
280.             '<input type="text" name="first_name" id="id_first_name" required>',
281.         )
282.         self.assertHTMLEqual(str(p['last_name']), '<input type="text" name="last_name" id="id_last_name" required>')
283.         self.assertHTMLEqual(str(p['birthday']), '<input type="text" name="birthday" id="id_birthday" required>')
284. 
285.     def test_cleaned_data_only_fields(self):
286.         # cleaned_data will always *only* contain a key for fields defined in the
287.         # Form, even if you pass extra data when you define the Form. In this
288.         # example, we pass a bunch of extra fields to the form constructor,
289.         # but cleaned_data contains only the form's fields.
290.         data = {
291.             'first_name': 'John',
292.             'last_name': 'Lennon',
293.             'birthday': '1940-10-9',
294.             'extra1': 'hello',
295.             'extra2': 'hello',
296.         }
297.         p = Person(data)
298.         self.assertTrue(p.is_valid())
299.         self.assertEqual(p.cleaned_data['first_name'], 'John')
300.         self.assertEqual(p.cleaned_data['last_name'], 'Lennon')
301.         self.assertEqual(p.cleaned_data['birthday'], datetime.date(1940, 10, 9))
302. 
303.     def test_optional_data(self):
304.         # cleaned_data will include a key and value for *all* fields defined in the Form,
305.         # even if the Form's data didn't include a value for fields that are not
306.         # required. In this example, the data dictionary doesn't include a value for the
307.         # "nick_name" field, but cleaned_data includes it. For CharFields, it's set to the
308.         # empty string.
309.         class OptionalPersonForm(Form):
310.             first_name = CharField()
311.             last_name = CharField()
312.             nick_name = CharField(required=False)
313. 
314.         data = {'first_name': 'John', 'last_name': 'Lennon'}
315.         f = OptionalPersonForm(data)
316.         self.assertTrue(f.is_valid())
317.         self.assertEqual(f.cleaned_data['nick_name'], '')
318.         self.assertEqual(f.cleaned_data['first_name'], 'John')
319.         self.assertEqual(f.cleaned_data['last_name'], 'Lennon')
320. 
321.         # For DateFields, it's set to None.
322.         class OptionalPersonForm(Form):
323.             first_name = CharField()
324.             last_name = CharField()
325.             birth_date = DateField(required=False)
326. 
327.         data = {'first_name': 'John', 'last_name': 'Lennon'}
328.         f = OptionalPersonForm(data)
329.         self.assertTrue(f.is_valid())
330.         self.assertIsNone(f.cleaned_data['birth_date'])
331.         self.assertEqual(f.cleaned_data['first_name'], 'John')
332.         self.assertEqual(f.cleaned_data['last_name'], 'Lennon')
333. 
334.     def test_auto_id(self):
335.         # "auto_id" tells the Form to add an "id" attribute to each form element.
336.         # If it's a string that contains '%s', Django will use that as a format string
337.         # into which the field's name will be inserted. It will also put a <label> around
338.         # the human-readable labels for a field.
339.         p = Person(auto_id='%s_id')
340.         self.assertHTMLEqual(
341.             p.as_table(),
342.             """<tr><th><label for="first_name_id">First name:</label></th><td>
343. <input type="text" name="first_name" id="first_name_id" required></td></tr>
344. <tr><th><label for="last_name_id">Last name:</label></th><td>
345. <input type="text" name="last_name" id="last_name_id" required></td></tr>
346. <tr><th><label for="birthday_id">Birthday:</label></th><td>
347. <input type="text" name="birthday" id="birthday_id" required></td></tr>"""
348.         )
349.         self.assertHTMLEqual(
350.             p.as_ul(),
351.             """<li><label for="first_name_id">First name:</label>
352. <input type="text" name="first_name" id="first_name_id" required></li>
353. <li><label for="last_name_id">Last name:</label>
354. <input type="text" name="last_name" id="last_name_id" required></li>
355. <li><label for="birthday_id">Birthday:</label>
356. <input type="text" name="birthday" id="birthday_id" required></li>"""
357.         )
358.         self.assertHTMLEqual(
359.             p.as_p(),
360.             """<p><label for="first_name_id">First name:</label>
361. <input type="text" name="first_name" id="first_name_id" required></p>
362. <p><label for="last_name_id">Last name:</label>
363. <input type="text" name="last_name" id="last_name_id" required></p>
364. <p><label for="birthday_id">Birthday:</label>
365. <input type="text" name="birthday" id="birthday_id" required></p>"""
366.         )
367. 
368.     def test_auto_id_true(self):
369.         # If auto_id is any True value whose str() does not contain '%s', the "id"
370.         # attribute will be the name of the field.
371.         p = Person(auto_id=True)
372.         self.assertHTMLEqual(
373.             p.as_ul(),
374.             """<li><label for="first_name">First name:</label>
375. <input type="text" name="first_name" id="first_name" required></li>
376. <li><label for="last_name">Last name:</label>
377. <input type="text" name="last_name" id="last_name" required></li>
378. <li><label for="birthday">Birthday:</label>
379. <input type="text" name="birthday" id="birthday" required></li>"""
380.         )
381. 
382.     def test_auto_id_false(self):
383.         # If auto_id is any False value, an "id" attribute won't be output unless it
384.         # was manually entered.
385.         p = Person(auto_id=False)
386.         self.assertHTMLEqual(
387.             p.as_ul(),
388.             """<li>First name: <input type="text" name="first_name" required></li>
389. <li>Last name: <input type="text" name="last_name" required></li>
390. <li>Birthday: <input type="text" name="birthday" required></li>"""
391.         )
392. 
393.     def test_id_on_field(self):
394.         # In this example, auto_id is False, but the "id" attribute for the "first_name"
395.         # field is given. Also note that field gets a <label>, while the others don't.
396.         p = PersonNew(auto_id=False)
397.         self.assertHTMLEqual(
398.             p.as_ul(),
399.             """<li><label for="first_name_id">First name:</label>
400. <input type="text" id="first_name_id" name="first_name" required></li>
401. <li>Last name: <input type="text" name="last_name" required></li>
402. <li>Birthday: <input type="text" name="birthday" required></li>"""
403.         )
404. 
405.     def test_auto_id_on_form_and_field(self):
406.         # If the "id" attribute is specified in the Form and auto_id is True, the "id"
407.         # attribute in the Form gets precedence.
408.         p = PersonNew(auto_id=True)
409.         self.assertHTMLEqual(
410.             p.as_ul(),
411.             """<li><label for="first_name_id">First name:</label>
412. <input type="text" id="first_name_id" name="first_name" required></li>
413. <li><label for="last_name">Last name:</label>
414. <input type="text" name="last_name" id="last_name" required></li>
415. <li><label for="birthday">Birthday:</label>
416. <input type="text" name="birthday" id="birthday" required></li>"""
417.         )
418. 
419.     def test_various_boolean_values(self):
420.         class SignupForm(Form):
421.             email = EmailField()
422.             get_spam = BooleanField()
423. 
424.         f = SignupForm(auto_id=False)
425.         self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" required>')
426.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
427. 
428.         f = SignupForm({'email': 'test@example.com', 'get_spam': True}, auto_id=False)
429.         self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" value="test@example.com" required>')
430.         self.assertHTMLEqual(
431.             str(f['get_spam']),
432.             '<input checked type="checkbox" name="get_spam" required>',
433.         )
434. 
435.         # 'True' or 'true' should be rendered without a value attribute
436.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'True'}, auto_id=False)
437.         self.assertHTMLEqual(
438.             str(f['get_spam']),
439.             '<input checked type="checkbox" name="get_spam" required>',
440.         )
441. 
442.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'true'}, auto_id=False)
443.         self.assertHTMLEqual(
444.             str(f['get_spam']), '<input checked type="checkbox" name="get_spam" required>')
445. 
446.         # A value of 'False' or 'false' should be rendered unchecked
447.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'False'}, auto_id=False)
448.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
449. 
450.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'false'}, auto_id=False)
451.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
452. 
453.         # A value of '0' should be interpreted as a True value (#16820)
454.         f = SignupForm({'email': 'test@example.com', 'get_spam': '0'})
455.         self.assertTrue(f.is_valid())
456.         self.assertTrue(f.cleaned_data.get('get_spam'))
457. 
458.     def test_widget_output(self):
459.         # Any Field can have a Widget class passed to its constructor:
460.         class ContactForm(Form):
461.             subject = CharField()
462.             message = CharField(widget=Textarea)
463. 
464.         f = ContactForm(auto_id=False)
465.         self.assertHTMLEqual(str(f['subject']), '<input type="text" name="subject" required>')
466.         self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="10" cols="40" required></textarea>')
467. 
468.         # as_textarea(), as_text() and as_hidden() are shortcuts for changing the output
469.         # widget type:
470.         self.assertHTMLEqual(
471.             f['subject'].as_textarea(),
472.             '<textarea name="subject" rows="10" cols="40" required></textarea>',
473.         )
474.         self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
475.         self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message">')
476. 
477.         # The 'widget' parameter to a Field can also be an instance:
478.         class ContactForm(Form):
479.             subject = CharField()
480.             message = CharField(widget=Textarea(attrs={'rows': 80, 'cols': 20}))
481. 
482.         f = ContactForm(auto_id=False)
483.         self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="80" cols="20" required></textarea>')
484. 
485.         # Instance-level attrs are *not* carried over to as_textarea(), as_text() and
486.         # as_hidden():
487.         self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
488.         f = ContactForm({'subject': 'Hello', 'message': 'I love you.'}, auto_id=False)
489.         self.assertHTMLEqual(
490.             f['subject'].as_textarea(),
491.             '<textarea rows="10" cols="40" name="subject" required>Hello</textarea>'
492.         )
493.         self.assertHTMLEqual(
494.             f['message'].as_text(),
495.             '<input type="text" name="message" value="I love you." required>',
496.         )
497.         self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message" value="I love you.">')
498. 
499.     def test_forms_with_choices(self):
500.         # For a form with a <select>, use ChoiceField:


File: tests/forms_tests/tests/test_formsets.py
Line number range: 1 - 500
Content:
1. import datetime
2. from collections import Counter
3. from unittest import mock
4. 
5. from django.core.exceptions import ValidationError
6. from django.forms import (
7.     BaseForm, CharField, DateField, FileField, Form, IntegerField,
8.     SplitDateTimeField, formsets,
9. )
10. from django.forms.formsets import BaseFormSet, all_valid, formset_factory
11. from django.forms.utils import ErrorList
12. from django.forms.widgets import HiddenInput
13. from django.test import SimpleTestCase
14. 
15. 
16. class Choice(Form):
17.     choice = CharField()
18.     votes = IntegerField()
19. 
20. 
21. ChoiceFormSet = formset_factory(Choice)
22. 
23. 
24. class FavoriteDrinkForm(Form):
25.     name = CharField()
26. 
27. 
28. class BaseFavoriteDrinksFormSet(BaseFormSet):
29.     def clean(self):
30.         seen_drinks = []
31. 
32.         for drink in self.cleaned_data:
33.             if drink['name'] in seen_drinks:
34.                 raise ValidationError('You may only specify a drink once.')
35. 
36.             seen_drinks.append(drink['name'])
37. 
38. 
39. # A FormSet that takes a list of favorite drinks and raises an error if
40. # there are any duplicates.
41. FavoriteDrinksFormSet = formset_factory(FavoriteDrinkForm, formset=BaseFavoriteDrinksFormSet, extra=3)
42. 
43. 
44. class CustomKwargForm(Form):
45.     def __init__(self, *args, custom_kwarg, **kwargs):
46.         self.custom_kwarg = custom_kwarg
47.         super().__init__(*args, **kwargs)
48. 
49. 
50. class FormsFormsetTestCase(SimpleTestCase):
51. 
52.     def make_choiceformset(
53.             self, formset_data=None, formset_class=ChoiceFormSet,
54.             total_forms=None, initial_forms=0, max_num_forms=0, min_num_forms=0, **kwargs):
55.         """
56.         Make a ChoiceFormset from the given formset_data.
57.         The data should be given as a list of (choice, votes) tuples.
58.         """
59.         kwargs.setdefault('prefix', 'choices')
60.         kwargs.setdefault('auto_id', False)
61. 
62.         if formset_data is None:
63.             return formset_class(**kwargs)
64. 
65.         if total_forms is None:
66.             total_forms = len(formset_data)
67. 
68.         def prefixed(*args):
69.             args = (kwargs['prefix'],) + args
70.             return '-'.join(args)
71. 
72.         data = {
73.             prefixed('TOTAL_FORMS'): str(total_forms),
74.             prefixed('INITIAL_FORMS'): str(initial_forms),
75.             prefixed('MAX_NUM_FORMS'): str(max_num_forms),
76.             prefixed('MIN_NUM_FORMS'): str(min_num_forms),
77.         }
78.         for i, (choice, votes) in enumerate(formset_data):
79.             data[prefixed(str(i), 'choice')] = choice
80.             data[prefixed(str(i), 'votes')] = votes
81. 
82.         return formset_class(data, **kwargs)
83. 
84.     def test_basic_formset(self):
85.         """
86.         A FormSet constructor takes the same arguments as Form. Create a
87.         FormSet for adding data. By default, it displays 1 blank form.
88.         """
89.         formset = self.make_choiceformset()
90.         self.assertHTMLEqual(
91.             str(formset),
92.             """<input type="hidden" name="choices-TOTAL_FORMS" value="1">
93. <input type="hidden" name="choices-INITIAL_FORMS" value="0">
94. <input type="hidden" name="choices-MIN_NUM_FORMS" value="0">
95. <input type="hidden" name="choices-MAX_NUM_FORMS" value="1000">
96. <tr><th>Choice:</th><td><input type="text" name="choices-0-choice"></td></tr>
97. <tr><th>Votes:</th><td><input type="number" name="choices-0-votes"></td></tr>"""
98.         )
99.         # FormSet are treated similarly to Forms. FormSet has an is_valid()
100.         # method, and a cleaned_data or errors attribute depending on whether
101.         # all the forms passed validation. However, unlike a Form, cleaned_data
102.         # and errors will be a list of dicts rather than a single dict.
103.         formset = self.make_choiceformset([('Calexico', '100')])
104.         self.assertTrue(formset.is_valid())
105.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}])
106. 
107.         # If a FormSet wasn't passed any data, is_valid() and has_changed()
108.         # return False.
109.         formset = self.make_choiceformset()
110.         self.assertFalse(formset.is_valid())
111.         self.assertFalse(formset.has_changed())
112. 
113.     def test_form_kwargs_formset(self):
114.         """
115.         Custom kwargs set on the formset instance are passed to the
116.         underlying forms.
117.         """
118.         FormSet = formset_factory(CustomKwargForm, extra=2)
119.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
120.         for form in formset:
121.             self.assertTrue(hasattr(form, 'custom_kwarg'))
122.             self.assertEqual(form.custom_kwarg, 1)
123. 
124.     def test_form_kwargs_formset_dynamic(self):
125.         """Form kwargs can be passed dynamically in a formset."""
126.         class DynamicBaseFormSet(BaseFormSet):
127.             def get_form_kwargs(self, index):
128.                 return {'custom_kwarg': index}
129. 
130.         DynamicFormSet = formset_factory(CustomKwargForm, formset=DynamicBaseFormSet, extra=2)
131.         formset = DynamicFormSet(form_kwargs={'custom_kwarg': 'ignored'})
132.         for i, form in enumerate(formset):
133.             self.assertTrue(hasattr(form, 'custom_kwarg'))
134.             self.assertEqual(form.custom_kwarg, i)
135. 
136.     def test_form_kwargs_empty_form(self):
137.         FormSet = formset_factory(CustomKwargForm)
138.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
139.         self.assertTrue(hasattr(formset.empty_form, 'custom_kwarg'))
140.         self.assertEqual(formset.empty_form.custom_kwarg, 1)
141. 
142.     def test_formset_validation(self):
143.         # FormSet instances can also have an error attribute if validation failed for
144.         # any of the forms.
145.         formset = self.make_choiceformset([('Calexico', '')])
146.         self.assertFalse(formset.is_valid())
147.         self.assertEqual(formset.errors, [{'votes': ['This field is required.']}])
148. 
149.     def test_formset_validation_count(self):
150.         """
151.         A formset's ManagementForm is validated once per FormSet.is_valid()
152.         call and each form of the formset is cleaned once.
153.         """
154.         def make_method_counter(func):
155.             """Add a counter to func for the number of times it's called."""
156.             counter = Counter()
157.             counter.call_count = 0
158. 
159.             def mocked_func(*args, **kwargs):
160.                 counter.call_count += 1
161.                 return func(*args, **kwargs)
162. 
163.             return mocked_func, counter
164. 
165.         mocked_is_valid, is_valid_counter = make_method_counter(formsets.ManagementForm.is_valid)
166.         mocked_full_clean, full_clean_counter = make_method_counter(BaseForm.full_clean)
167.         formset = self.make_choiceformset([('Calexico', '100'), ('Any1', '42'), ('Any2', '101')])
168. 
169.         with mock.patch('django.forms.formsets.ManagementForm.is_valid', mocked_is_valid), \
170.                 mock.patch('django.forms.forms.BaseForm.full_clean', mocked_full_clean):
171.             self.assertTrue(formset.is_valid())
172.         self.assertEqual(is_valid_counter.call_count, 1)
173.         self.assertEqual(full_clean_counter.call_count, 4)
174. 
175.     def test_formset_has_changed(self):
176.         """
177.         FormSet.has_changed() is True if any data is passed to its forms, even
178.         if the formset didn't validate.
179.         """
180.         blank_formset = self.make_choiceformset([('', '')])
181.         self.assertFalse(blank_formset.has_changed())
182.         # invalid formset
183.         invalid_formset = self.make_choiceformset([('Calexico', '')])
184.         self.assertFalse(invalid_formset.is_valid())
185.         self.assertTrue(invalid_formset.has_changed())
186.         # valid formset
187.         valid_formset = self.make_choiceformset([('Calexico', '100')])
188.         self.assertTrue(valid_formset.is_valid())
189.         self.assertTrue(valid_formset.has_changed())
190. 
191.     def test_formset_initial_data(self):
192.         """
193.         A FormSet can be prefilled with existing data by providing a list of
194.         dicts to the `initial` argument. By default, an extra blank form is
195.         included.
196.         """
197.         formset = self.make_choiceformset(initial=[{'choice': 'Calexico', 'votes': 100}])
198.         self.assertHTMLEqual(
199.             '\n'.join(form.as_ul() for form in formset.forms),
200.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
201. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
202. <li>Choice: <input type="text" name="choices-1-choice"></li>
203. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
204.         )
205. 
206.     def test_blank_form_unfilled(self):
207.         """A form that's displayed as blank may be submitted as blank."""
208.         formset = self.make_choiceformset([('Calexico', '100'), ('', '')], initial_forms=1)
209.         self.assertTrue(formset.is_valid())
210.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}])
211. 
212.     def test_second_form_partially_filled(self):
213.         """
214.         If at least one field is filled out on a blank form, it will be
215.         validated.
216.         """
217.         formset = self.make_choiceformset([('Calexico', '100'), ('The Decemberists', '')], initial_forms=1)
218.         self.assertFalse(formset.is_valid())
219.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}])
220. 
221.     def test_delete_prefilled_data(self):
222.         """
223.         Deleting prefilled data is an error. Removing data from form fields
224.         isn't the proper way to delete it.
225.         """
226.         formset = self.make_choiceformset([('', ''), ('', '')], initial_forms=1)
227.         self.assertFalse(formset.is_valid())
228.         self.assertEqual(
229.             formset.errors,
230.             [{'votes': ['This field is required.'], 'choice': ['This field is required.']}, {}]
231.         )
232. 
233.     def test_displaying_more_than_one_blank_form(self):
234.         """
235.         More than 1 empty form can be displayed using formset_factory's
236.         `extra` argument.
237.         """
238.         ChoiceFormSet = formset_factory(Choice, extra=3)
239.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
240.         self.assertHTMLEqual(
241.             '\n'.join(form.as_ul() for form in formset.forms),
242.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
243. <li>Votes: <input type="number" name="choices-0-votes"></li>
244. <li>Choice: <input type="text" name="choices-1-choice"></li>
245. <li>Votes: <input type="number" name="choices-1-votes"></li>
246. <li>Choice: <input type="text" name="choices-2-choice"></li>
247. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
248.         )
249.         # Since every form was displayed as blank, they are also accepted as
250.         # blank. This may seem a little strange, but min_num is used to require
251.         # a minimum number of forms to be completed.
252.         data = {
253.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
254.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
255.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
256.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
257.             'choices-0-choice': '',
258.             'choices-0-votes': '',
259.             'choices-1-choice': '',
260.             'choices-1-votes': '',
261.             'choices-2-choice': '',
262.             'choices-2-votes': '',
263.         }
264.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
265.         self.assertTrue(formset.is_valid())
266.         self.assertEqual([form.cleaned_data for form in formset.forms], [{}, {}, {}])
267. 
268.     def test_min_num_displaying_more_than_one_blank_form(self):
269.         """
270.         More than 1 empty form can also be displayed using formset_factory's
271.         min_num argument. It will (essentially) increment the extra argument.
272.         """
273.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=1)
274.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
275.         # Min_num forms are required; extra forms can be empty.
276.         self.assertFalse(formset.forms[0].empty_permitted)
277.         self.assertTrue(formset.forms[1].empty_permitted)
278.         self.assertHTMLEqual(
279.             '\n'.join(form.as_ul() for form in formset.forms),
280.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
281. <li>Votes: <input type="number" name="choices-0-votes"></li>
282. <li>Choice: <input type="text" name="choices-1-choice"></li>
283. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
284.         )
285. 
286.     def test_min_num_displaying_more_than_one_blank_form_with_zero_extra(self):
287.         """More than 1 empty form can be displayed using min_num."""
288.         ChoiceFormSet = formset_factory(Choice, extra=0, min_num=3)
289.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
290.         self.assertHTMLEqual(
291.             '\n'.join(form.as_ul() for form in formset.forms),
292.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
293. <li>Votes: <input type="number" name="choices-0-votes"></li>
294. <li>Choice: <input type="text" name="choices-1-choice"></li>
295. <li>Votes: <input type="number" name="choices-1-votes"></li>
296. <li>Choice: <input type="text" name="choices-2-choice"></li>
297. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
298.         )
299. 
300.     def test_single_form_completed(self):
301.         """Just one form may be completed."""
302.         data = {
303.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
304.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
305.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
306.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
307.             'choices-0-choice': 'Calexico',
308.             'choices-0-votes': '100',
309.             'choices-1-choice': '',
310.             'choices-1-votes': '',
311.             'choices-2-choice': '',
312.             'choices-2-votes': '',
313.         }
314.         ChoiceFormSet = formset_factory(Choice, extra=3)
315.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
316.         self.assertTrue(formset.is_valid())
317.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}, {}])
318. 
319.     def test_formset_validate_max_flag(self):
320.         """
321.         If validate_max is set and max_num is less than TOTAL_FORMS in the
322.         data, a ValidationError is raised. MAX_NUM_FORMS in the data is
323.         irrelevant here (it's output as a hint for the client but its value
324.         in the returned data is not checked).
325.         """
326.         data = {
327.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
328.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
329.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
330.             'choices-MAX_NUM_FORMS': '2',  # max number of forms - should be ignored
331.             'choices-0-choice': 'Zero',
332.             'choices-0-votes': '0',
333.             'choices-1-choice': 'One',
334.             'choices-1-votes': '1',
335.         }
336.         ChoiceFormSet = formset_factory(Choice, extra=1, max_num=1, validate_max=True)
337.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
338.         self.assertFalse(formset.is_valid())
339.         self.assertEqual(formset.non_form_errors(), ['Please submit at most 1 form.'])
340. 
341.     def test_formset_validate_min_flag(self):
342.         """
343.         If validate_min is set and min_num is more than TOTAL_FORMS in the
344.         data, a ValidationError is raised. MIN_NUM_FORMS in the data is
345.         irrelevant here (it's output as a hint for the client but its value
346.         in the returned data is not checked).
347.         """
348.         data = {
349.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
350.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
351.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
352.             'choices-MAX_NUM_FORMS': '0',  # max number of forms - should be ignored
353.             'choices-0-choice': 'Zero',
354.             'choices-0-votes': '0',
355.             'choices-1-choice': 'One',
356.             'choices-1-votes': '1',
357.         }
358.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=3, validate_min=True)
359.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
360.         self.assertFalse(formset.is_valid())
361.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 3 forms.'])
362. 
363.     def test_formset_validate_min_unchanged_forms(self):
364.         """
365.         min_num validation doesn't consider unchanged forms with initial data
366.         as "empty".
367.         """
368.         initial = [
369.             {'choice': 'Zero', 'votes': 0},
370.             {'choice': 'One', 'votes': 0},
371.         ]
372.         data = {
373.             'choices-TOTAL_FORMS': '2',
374.             'choices-INITIAL_FORMS': '2',
375.             'choices-MIN_NUM_FORMS': '0',
376.             'choices-MAX_NUM_FORMS': '2',
377.             'choices-0-choice': 'Zero',
378.             'choices-0-votes': '0',
379.             'choices-1-choice': 'One',
380.             'choices-1-votes': '1',  # changed from initial
381.         }
382.         ChoiceFormSet = formset_factory(Choice, min_num=2, validate_min=True)
383.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices', initial=initial)
384.         self.assertFalse(formset.forms[0].has_changed())
385.         self.assertTrue(formset.forms[1].has_changed())
386.         self.assertTrue(formset.is_valid())
387. 
388.     def test_formset_validate_min_excludes_empty_forms(self):
389.         data = {
390.             'choices-TOTAL_FORMS': '2',
391.             'choices-INITIAL_FORMS': '0',
392.         }
393.         ChoiceFormSet = formset_factory(Choice, extra=2, min_num=1, validate_min=True, can_delete=True)
394.         formset = ChoiceFormSet(data, prefix='choices')
395.         self.assertFalse(formset.has_changed())
396.         self.assertFalse(formset.is_valid())
397.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 1 form.'])
398. 
399.     def test_second_form_partially_filled_2(self):
400.         """A partially completed form is invalid."""
401.         data = {
402.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
403.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
404.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
405.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
406.             'choices-0-choice': 'Calexico',
407.             'choices-0-votes': '100',
408.             'choices-1-choice': 'The Decemberists',
409.             'choices-1-votes': '',  # missing value
410.             'choices-2-choice': '',
411.             'choices-2-votes': '',
412.         }
413.         ChoiceFormSet = formset_factory(Choice, extra=3)
414.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
415.         self.assertFalse(formset.is_valid())
416.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}, {}])
417. 
418.     def test_more_initial_data(self):
419.         """
420.         The extra argument works when the formset is pre-filled with initial
421.         data.
422.         """
423.         initial = [{'choice': 'Calexico', 'votes': 100}]
424.         ChoiceFormSet = formset_factory(Choice, extra=3)
425.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
426.         self.assertHTMLEqual(
427.             '\n'.join(form.as_ul() for form in formset.forms),
428.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
429. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
430. <li>Choice: <input type="text" name="choices-1-choice"></li>
431. <li>Votes: <input type="number" name="choices-1-votes"></li>
432. <li>Choice: <input type="text" name="choices-2-choice"></li>
433. <li>Votes: <input type="number" name="choices-2-votes"></li>
434. <li>Choice: <input type="text" name="choices-3-choice"></li>
435. <li>Votes: <input type="number" name="choices-3-votes"></li>"""
436.         )
437.         # Retrieving an empty form works. Tt shows up in the form list.
438.         self.assertTrue(formset.empty_form.empty_permitted)
439.         self.assertHTMLEqual(
440.             formset.empty_form.as_ul(),
441.             """<li>Choice: <input type="text" name="choices-__prefix__-choice"></li>
442. <li>Votes: <input type="number" name="choices-__prefix__-votes"></li>"""
443.         )
444. 
445.     def test_formset_with_deletion(self):
446.         """
447.         formset_factory's can_delete argument adds a boolean "delete" field to
448.         each form. When that boolean field is True, the form will be in
449.         formset.deleted_forms.
450.         """
451.         ChoiceFormSet = formset_factory(Choice, can_delete=True)
452.         initial = [{'choice': 'Calexico', 'votes': 100}, {'choice': 'Fergie', 'votes': 900}]
453.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
454.         self.assertHTMLEqual(
455.             '\n'.join(form.as_ul() for form in formset.forms),
456.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
457. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
458. <li>Delete: <input type="checkbox" name="choices-0-DELETE"></li>
459. <li>Choice: <input type="text" name="choices-1-choice" value="Fergie"></li>
460. <li>Votes: <input type="number" name="choices-1-votes" value="900"></li>
461. <li>Delete: <input type="checkbox" name="choices-1-DELETE"></li>
462. <li>Choice: <input type="text" name="choices-2-choice"></li>
463. <li>Votes: <input type="number" name="choices-2-votes"></li>
464. <li>Delete: <input type="checkbox" name="choices-2-DELETE"></li>"""
465.         )
466.         # To delete something, set that form's special delete field to 'on'.
467.         # Let's go ahead and delete Fergie.
468.         data = {
469.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
470.             'choices-INITIAL_FORMS': '2',  # the number of forms with initial data
471.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
472.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
473.             'choices-0-choice': 'Calexico',
474.             'choices-0-votes': '100',
475.             'choices-0-DELETE': '',
476.             'choices-1-choice': 'Fergie',
477.             'choices-1-votes': '900',
478.             'choices-1-DELETE': 'on',
479.             'choices-2-choice': '',
480.             'choices-2-votes': '',
481.             'choices-2-DELETE': '',
482.         }
483.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
484.         self.assertTrue(formset.is_valid())
485.         self.assertEqual(
486.             [form.cleaned_data for form in formset.forms],
487.             [
488.                 {'votes': 100, 'DELETE': False, 'choice': 'Calexico'},
489.                 {'votes': 900, 'DELETE': True, 'choice': 'Fergie'},
490.                 {},
491.             ]
492.         )
493.         self.assertEqual(
494.             [form.cleaned_data for form in formset.deleted_forms],
495.             [{'votes': 900, 'DELETE': True, 'choice': 'Fergie'}]
496.         )
497. 
498.     def test_formset_with_deletion_remove_deletion_flag(self):
499.         """
500.         If a form is filled with something and can_delete is also checked, that

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 03:59:05,563 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly requested the full content of `tests/forms_tests/tests/test_formsets.py`.\n2. Extended relevance:\n   - This context provides the entire content of the requested file, from line 1 to 500.', relative_path='tests/forms_tests/tests/test_formsets.py', start_line=1, end_line=500), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly requested the full content of `tests/forms_tests/tests/test_forms.py`.\n2. Extended relevance:\n   - This context provides the entire content of the requested file, from line 1 to 500.', relative_path='tests/forms_tests/tests/test_forms.py', start_line=1, end_line=500)]
2025-12-24 03:59:05,566 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`.
2025-12-24 03:59:05,566 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 03:59:05,566 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 03:59:05,567 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-24 03:59:05,567 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-24 03:59:05,568 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_block_error.html
    |   |   ├── test_extends_block_error_parent.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Add `nonform` CSS class for non form errors in FormSets

Description: Description
	 
		(last modified by Ties Jan Hefting)
	 
Forms add the nonfield CSS class for non field errors in ErrorList instances. This is documented in a section on ​rendering form error messages. Similarly, in FormSets I'd expect to see the nonform CSS class added for non form errors. This would allow a custom ErrorList to make a distinction in form field errors, non field errors (forms) and non form errors (FormSets) when rendering error messages. Therefore I'd suggest to add this nonform CSS class and document it for developers to use.

Patch information:
diff --git a/django/forms/formsets.py b/django/forms/formsets.py
index a89c35599f..1b0d4554e0 100644
--- a/django/forms/formsets.py
+++ b/django/forms/formsets.py
@@ -333,7 +333,7 @@ class BaseFormSet:
         self._non_form_errors.
         """
         self._errors = []
-        self._non_form_errors = self.error_class()
+        self._non_form_errors = self.error_class(error_class='nonform')
         empty_forms_count = 0
 
         if not self.is_bound:  # Stop further processing.
@@ -380,7 +380,7 @@ class BaseFormSet:
             # Give self.clean() a chance to do cross-form validation.
             self.clean()
         except ValidationError as e:
-            self._non_form_errors = self.error_class(e.error_list)
+            self._non_form_errors = self.error_class(e.error_list, error_class='nonform')
 
     def clean(self):
         """
diff --git a/docs/ref/forms/api.txt b/docs/ref/forms/api.txt
index 5df969232a..013193fe1e 100644
--- a/docs/ref/forms/api.txt
+++ b/docs/ref/forms/api.txt
@@ -210,6 +210,13 @@ This includes ``ValidationError``\s that are raised in :meth:`Form.clean()
 <django.forms.Form.clean>` and errors added using :meth:`Form.add_error(None,
 "...") <django.forms.Form.add_error>`.
 
+Non-form errors on formsets
+---------------------------
+
+Formset-level errors returned by :meth:`~django.forms.formsets.BaseFormSet.non_form_errors`
+are rendered with an additional ``nonform`` CSS class (e.g., ``<ul class="errorlist nonform">``)
+to distinguish them from field-specific and form-level non-field errors.
+
 Behavior of unbound forms
 -------------------------
 
diff --git a/docs/topics/forms/formsets.txt b/docs/topics/forms/formsets.txt
index 1f2c7c3fad..fbce2f5393 100644
--- a/docs/topics/forms/formsets.txt
+++ b/docs/topics/forms/formsets.txt
@@ -365,6 +365,16 @@ The formset ``clean`` method is called after all the ``Form.clean`` methods
 have been called. The errors will be found using the ``non_form_errors()``
 method on the formset.
 
+Non-form errors will be rendered with an additional class of ``nonform`` to
+help distinguish them from field-specific errors. For example,
+``{{ formset.non_form_errors }}`` would look like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 Validating the number of forms in a formset
 ===========================================
 
diff --git a/docs/topics/forms/index.txt b/docs/topics/forms/index.txt
index e55b6d7bf2..ebc3145986 100644
--- a/docs/topics/forms/index.txt
+++ b/docs/topics/forms/index.txt
@@ -616,6 +616,16 @@ errors. For example, ``{{ form.non_field_errors }}`` would look like:
         <li>Generic validation error</li>
     </ul>
 
+Similarly, non-form errors on formsets will be rendered with an additional
+class of ``nonform``. For example, ``{{ formset.non_form_errors }}`` would look
+like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 See :doc:`/ref/forms/api` for more on errors, styling, and working with form
 attributes in templates.
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`.
Extra Requirements: 
Purpose: I need to find existing test cases that check the rendering of formset and form errors, which can be adapted to test the new `nonform` CSS class.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/forms_tests/tests/test_forms.py
Line number range: 1 - 500
Content:
1. import copy
2. import datetime
3. import json
4. import uuid
5. 
6. from django.core.exceptions import NON_FIELD_ERRORS
7. from django.core.files.uploadedfile import SimpleUploadedFile
8. from django.core.validators import MaxValueValidator, RegexValidator
9. from django.forms import (
10.     BooleanField, CharField, CheckboxSelectMultiple, ChoiceField, DateField,
11.     DateTimeField, EmailField, FileField, FileInput, FloatField, Form,
12.     HiddenInput, ImageField, IntegerField, MultipleChoiceField,
13.     MultipleHiddenInput, MultiValueField, NullBooleanField, PasswordInput,
14.     RadioSelect, Select, SplitDateTimeField, SplitHiddenDateTimeWidget,
15.     Textarea, TextInput, TimeField, ValidationError, forms,
16. )
17. from django.forms.renderers import DjangoTemplates, get_default_renderer
18. from django.forms.utils import ErrorList
19. from django.http import QueryDict
20. from django.template import Context, Template
21. from django.test import SimpleTestCase
22. from django.utils.datastructures import MultiValueDict
23. from django.utils.safestring import mark_safe
24. 
25. 
26. class Person(Form):
27.     first_name = CharField()
28.     last_name = CharField()
29.     birthday = DateField()
30. 
31. 
32. class PersonNew(Form):
33.     first_name = CharField(widget=TextInput(attrs={'id': 'first_name_id'}))
34.     last_name = CharField()
35.     birthday = DateField()
36. 
37. 
38. class MultiValueDictLike(dict):
39.     def getlist(self, key):
40.         return [self[key]]
41. 
42. 
43. class FormsTestCase(SimpleTestCase):
44.     # A Form is a collection of Fields. It knows how to validate a set of data and it
45.     # knows how to render itself in a couple of default ways (e.g., an HTML table).
46.     # You can pass it data in __init__(), as a dictionary.
47. 
48.     def test_form(self):
49.         # Pass a dictionary to a Form's __init__().
50.         p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': '1940-10-9'})
51. 
52.         self.assertTrue(p.is_bound)
53.         self.assertEqual(p.errors, {})
54.         self.assertTrue(p.is_valid())
55.         self.assertHTMLEqual(p.errors.as_ul(), '')
56.         self.assertEqual(p.errors.as_text(), '')
57.         self.assertEqual(p.cleaned_data["first_name"], 'John')
58.         self.assertEqual(p.cleaned_data["last_name"], 'Lennon')
59.         self.assertEqual(p.cleaned_data["birthday"], datetime.date(1940, 10, 9))
60.         self.assertHTMLEqual(
61.             str(p['first_name']),
62.             '<input type="text" name="first_name" value="John" id="id_first_name" required>'
63.         )
64.         self.assertHTMLEqual(
65.             str(p['last_name']),
66.             '<input type="text" name="last_name" value="Lennon" id="id_last_name" required>'
67.         )
68.         self.assertHTMLEqual(
69.             str(p['birthday']),
70.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>'
71.         )
72. 
73.         msg = "Key 'nonexistentfield' not found in 'Person'. Choices are: birthday, first_name, last_name."
74.         with self.assertRaisesMessage(KeyError, msg):
75.             p['nonexistentfield']
76. 
77.         form_output = []
78. 
79.         for boundfield in p:
80.             form_output.append(str(boundfield))
81. 
82.         self.assertHTMLEqual(
83.             '\n'.join(form_output),
84.             """<input type="text" name="first_name" value="John" id="id_first_name" required>
85. <input type="text" name="last_name" value="Lennon" id="id_last_name" required>
86. <input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>"""
87.         )
88. 
89.         form_output = []
90. 
91.         for boundfield in p:
92.             form_output.append([boundfield.label, boundfield.data])
93. 
94.         self.assertEqual(form_output, [
95.             ['First name', 'John'],
96.             ['Last name', 'Lennon'],
97.             ['Birthday', '1940-10-9']
98.         ])
99.         self.assertHTMLEqual(
100.             str(p),
101.             """<tr><th><label for="id_first_name">First name:</label></th><td>
102. <input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>
103. <tr><th><label for="id_last_name">Last name:</label></th><td>
104. <input type="text" name="last_name" value="Lennon" id="id_last_name" required></td></tr>
105. <tr><th><label for="id_birthday">Birthday:</label></th><td>
106. <input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>"""
107.         )
108. 
109.     def test_empty_dict(self):
110.         # Empty dictionaries are valid, too.
111.         p = Person({})
112.         self.assertTrue(p.is_bound)
113.         self.assertEqual(p.errors['first_name'], ['This field is required.'])
114.         self.assertEqual(p.errors['last_name'], ['This field is required.'])
115.         self.assertEqual(p.errors['birthday'], ['This field is required.'])
116.         self.assertFalse(p.is_valid())
117.         self.assertEqual(p.cleaned_data, {})
118.         self.assertHTMLEqual(
119.             str(p),
120.             """<tr><th><label for="id_first_name">First name:</label></th><td>
121. <ul class="errorlist"><li>This field is required.</li></ul>
122. <input type="text" name="first_name" id="id_first_name" required></td></tr>
123. <tr><th><label for="id_last_name">Last name:</label></th>
124. <td><ul class="errorlist"><li>This field is required.</li></ul>
125. <input type="text" name="last_name" id="id_last_name" required></td></tr>
126. <tr><th><label for="id_birthday">Birthday:</label></th><td>
127. <ul class="errorlist"><li>This field is required.</li></ul>
128. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
129.         )
130.         self.assertHTMLEqual(
131.             p.as_table(),
132.             """<tr><th><label for="id_first_name">First name:</label></th><td>
133. <ul class="errorlist"><li>This field is required.</li></ul>
134. <input type="text" name="first_name" id="id_first_name" required></td></tr>
135. <tr><th><label for="id_last_name">Last name:</label></th>
136. <td><ul class="errorlist"><li>This field is required.</li></ul>
137. <input type="text" name="last_name" id="id_last_name" required></td></tr>
138. <tr><th><label for="id_birthday">Birthday:</label></th>
139. <td><ul class="errorlist"><li>This field is required.</li></ul>
140. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
141.         )
142.         self.assertHTMLEqual(
143.             p.as_ul(),
144.             """<li><ul class="errorlist"><li>This field is required.</li></ul>
145. <label for="id_first_name">First name:</label>
146. <input type="text" name="first_name" id="id_first_name" required></li>
147. <li><ul class="errorlist"><li>This field is required.</li></ul>
148. <label for="id_last_name">Last name:</label>
149. <input type="text" name="last_name" id="id_last_name" required></li>
150. <li><ul class="errorlist"><li>This field is required.</li></ul>
151. <label for="id_birthday">Birthday:</label>
152. <input type="text" name="birthday" id="id_birthday" required></li>"""
153.         )
154.         self.assertHTMLEqual(
155.             p.as_p(),
156.             """<ul class="errorlist"><li>This field is required.</li></ul>
157. <p><label for="id_first_name">First name:</label>
158. <input type="text" name="first_name" id="id_first_name" required></p>
159. <ul class="errorlist"><li>This field is required.</li></ul>
160. <p><label for="id_last_name">Last name:</label>
161. <input type="text" name="last_name" id="id_last_name" required></p>
162. <ul class="errorlist"><li>This field is required.</li></ul>
163. <p><label for="id_birthday">Birthday:</label>
164. <input type="text" name="birthday" id="id_birthday" required></p>"""
165.         )
166. 
167.     def test_empty_querydict_args(self):
168.         data = QueryDict()
169.         files = QueryDict()
170.         p = Person(data, files)
171.         self.assertIs(p.data, data)
172.         self.assertIs(p.files, files)
173. 
174.     def test_unbound_form(self):
175.         # If you don't pass any values to the Form's __init__(), or if you pass None,
176.         # the Form will be considered unbound and won't do any validation. Form.errors
177.         # will be an empty dictionary *but* Form.is_valid() will return False.
178.         p = Person()
179.         self.assertFalse(p.is_bound)
180.         self.assertEqual(p.errors, {})
181.         self.assertFalse(p.is_valid())
182.         with self.assertRaises(AttributeError):
183.             p.cleaned_data
184. 
185.         self.assertHTMLEqual(
186.             str(p),
187.             """<tr><th><label for="id_first_name">First name:</label></th><td>
188. <input type="text" name="first_name" id="id_first_name" required></td></tr>
189. <tr><th><label for="id_last_name">Last name:</label></th><td>
190. <input type="text" name="last_name" id="id_last_name" required></td></tr>
191. <tr><th><label for="id_birthday">Birthday:</label></th><td>
192. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
193.         )
194.         self.assertHTMLEqual(
195.             p.as_table(),
196.             """<tr><th><label for="id_first_name">First name:</label></th><td>
197. <input type="text" name="first_name" id="id_first_name" required></td></tr>
198. <tr><th><label for="id_last_name">Last name:</label></th><td>
199. <input type="text" name="last_name" id="id_last_name" required></td></tr>
200. <tr><th><label for="id_birthday">Birthday:</label></th><td>
201. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
202.         )
203.         self.assertHTMLEqual(
204.             p.as_ul(),
205.             """<li><label for="id_first_name">First name:</label>
206. <input type="text" name="first_name" id="id_first_name" required></li>
207. <li><label for="id_last_name">Last name:</label>
208. <input type="text" name="last_name" id="id_last_name" required></li>
209. <li><label for="id_birthday">Birthday:</label>
210. <input type="text" name="birthday" id="id_birthday" required></li>"""
211.         )
212.         self.assertHTMLEqual(
213.             p.as_p(),
214.             """<p><label for="id_first_name">First name:</label>
215. <input type="text" name="first_name" id="id_first_name" required></p>
216. <p><label for="id_last_name">Last name:</label>
217. <input type="text" name="last_name" id="id_last_name" required></p>
218. <p><label for="id_birthday">Birthday:</label>
219. <input type="text" name="birthday" id="id_birthday" required></p>"""
220.         )
221. 
222.     def test_unicode_values(self):
223.         # Unicode values are handled properly.
224.         p = Person({
225.             'first_name': 'John',
226.             'last_name': '\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111',
227.             'birthday': '1940-10-9'
228.         })
229.         self.assertHTMLEqual(
230.             p.as_table(),
231.             '<tr><th><label for="id_first_name">First name:</label></th><td>'
232.             '<input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>\n'
233.             '<tr><th><label for="id_last_name">Last name:</label>'
234.             '</th><td><input type="text" name="last_name" '
235.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111"'
236.             'id="id_last_name" required></td></tr>\n'
237.             '<tr><th><label for="id_birthday">Birthday:</label></th><td>'
238.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>'
239.         )
240.         self.assertHTMLEqual(
241.             p.as_ul(),
242.             '<li><label for="id_first_name">First name:</label> '
243.             '<input type="text" name="first_name" value="John" id="id_first_name" required></li>\n'
244.             '<li><label for="id_last_name">Last name:</label> '
245.             '<input type="text" name="last_name" '
246.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></li>\n'
247.             '<li><label for="id_birthday">Birthday:</label> '
248.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></li>'
249.         )
250.         self.assertHTMLEqual(
251.             p.as_p(),
252.             '<p><label for="id_first_name">First name:</label> '
253.             '<input type="text" name="first_name" value="John" id="id_first_name" required></p>\n'
254.             '<p><label for="id_last_name">Last name:</label> '
255.             '<input type="text" name="last_name" '
256.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></p>\n'
257.             '<p><label for="id_birthday">Birthday:</label> '
258.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></p>'
259.         )
260. 
261.         p = Person({'last_name': 'Lennon'})
262.         self.assertEqual(p.errors['first_name'], ['This field is required.'])
263.         self.assertEqual(p.errors['birthday'], ['This field is required.'])
264.         self.assertFalse(p.is_valid())
265.         self.assertEqual(
266.             p.errors,
267.             {'birthday': ['This field is required.'], 'first_name': ['This field is required.']}
268.         )
269.         self.assertEqual(p.cleaned_data, {'last_name': 'Lennon'})
270.         self.assertEqual(p['first_name'].errors, ['This field is required.'])
271.         self.assertHTMLEqual(
272.             p['first_name'].errors.as_ul(),
273.             '<ul class="errorlist"><li>This field is required.</li></ul>'
274.         )
275.         self.assertEqual(p['first_name'].errors.as_text(), '* This field is required.')
276. 
277.         p = Person()
278.         self.assertHTMLEqual(
279.             str(p['first_name']),
280.             '<input type="text" name="first_name" id="id_first_name" required>',
281.         )
282.         self.assertHTMLEqual(str(p['last_name']), '<input type="text" name="last_name" id="id_last_name" required>')
283.         self.assertHTMLEqual(str(p['birthday']), '<input type="text" name="birthday" id="id_birthday" required>')
284. 
285.     def test_cleaned_data_only_fields(self):
286.         # cleaned_data will always *only* contain a key for fields defined in the
287.         # Form, even if you pass extra data when you define the Form. In this
288.         # example, we pass a bunch of extra fields to the form constructor,
289.         # but cleaned_data contains only the form's fields.
290.         data = {
291.             'first_name': 'John',
292.             'last_name': 'Lennon',
293.             'birthday': '1940-10-9',
294.             'extra1': 'hello',
295.             'extra2': 'hello',
296.         }
297.         p = Person(data)
298.         self.assertTrue(p.is_valid())
299.         self.assertEqual(p.cleaned_data['first_name'], 'John')
300.         self.assertEqual(p.cleaned_data['last_name'], 'Lennon')
301.         self.assertEqual(p.cleaned_data['birthday'], datetime.date(1940, 10, 9))
302. 
303.     def test_optional_data(self):
304.         # cleaned_data will include a key and value for *all* fields defined in the Form,
305.         # even if the Form's data didn't include a value for fields that are not
306.         # required. In this example, the data dictionary doesn't include a value for the
307.         # "nick_name" field, but cleaned_data includes it. For CharFields, it's set to the
308.         # empty string.
309.         class OptionalPersonForm(Form):
310.             first_name = CharField()
311.             last_name = CharField()
312.             nick_name = CharField(required=False)
313. 
314.         data = {'first_name': 'John', 'last_name': 'Lennon'}
315.         f = OptionalPersonForm(data)
316.         self.assertTrue(f.is_valid())
317.         self.assertEqual(f.cleaned_data['nick_name'], '')
318.         self.assertEqual(f.cleaned_data['first_name'], 'John')
319.         self.assertEqual(f.cleaned_data['last_name'], 'Lennon')
320. 
321.         # For DateFields, it's set to None.
322.         class OptionalPersonForm(Form):
323.             first_name = CharField()
324.             last_name = CharField()
325.             birth_date = DateField(required=False)
326. 
327.         data = {'first_name': 'John', 'last_name': 'Lennon'}
328.         f = OptionalPersonForm(data)
329.         self.assertTrue(f.is_valid())
330.         self.assertIsNone(f.cleaned_data['birth_date'])
331.         self.assertEqual(f.cleaned_data['first_name'], 'John')
332.         self.assertEqual(f.cleaned_data['last_name'], 'Lennon')
333. 
334.     def test_auto_id(self):
335.         # "auto_id" tells the Form to add an "id" attribute to each form element.
336.         # If it's a string that contains '%s', Django will use that as a format string
337.         # into which the field's name will be inserted. It will also put a <label> around
338.         # the human-readable labels for a field.
339.         p = Person(auto_id='%s_id')
340.         self.assertHTMLEqual(
341.             p.as_table(),
342.             """<tr><th><label for="first_name_id">First name:</label></th><td>
343. <input type="text" name="first_name" id="first_name_id" required></td></tr>
344. <tr><th><label for="last_name_id">Last name:</label></th><td>
345. <input type="text" name="last_name" id="last_name_id" required></td></tr>
346. <tr><th><label for="birthday_id">Birthday:</label></th><td>
347. <input type="text" name="birthday" id="birthday_id" required></td></tr>"""
348.         )
349.         self.assertHTMLEqual(
350.             p.as_ul(),
351.             """<li><label for="first_name_id">First name:</label>
352. <input type="text" name="first_name" id="first_name_id" required></li>
353. <li><label for="last_name_id">Last name:</label>
354. <input type="text" name="last_name" id="last_name_id" required></li>
355. <li><label for="birthday_id">Birthday:</label>
356. <input type="text" name="birthday" id="birthday_id" required></li>"""
357.         )
358.         self.assertHTMLEqual(
359.             p.as_p(),
360.             """<p><label for="first_name_id">First name:</label>
361. <input type="text" name="first_name" id="first_name_id" required></p>
362. <p><label for="last_name_id">Last name:</label>
363. <input type="text" name="last_name" id="last_name_id" required></p>
364. <p><label for="birthday_id">Birthday:</label>
365. <input type="text" name="birthday" id="birthday_id" required></p>"""
366.         )
367. 
368.     def test_auto_id_true(self):
369.         # If auto_id is any True value whose str() does not contain '%s', the "id"
370.         # attribute will be the name of the field.
371.         p = Person(auto_id=True)
372.         self.assertHTMLEqual(
373.             p.as_ul(),
374.             """<li><label for="first_name">First name:</label>
375. <input type="text" name="first_name" id="first_name" required></li>
376. <li><label for="last_name">Last name:</label>
377. <input type="text" name="last_name" id="last_name" required></li>
378. <li><label for="birthday">Birthday:</label>
379. <input type="text" name="birthday" id="birthday" required></li>"""
380.         )
381. 
382.     def test_auto_id_false(self):
383.         # If auto_id is any False value, an "id" attribute won't be output unless it
384.         # was manually entered.
385.         p = Person(auto_id=False)
386.         self.assertHTMLEqual(
387.             p.as_ul(),
388.             """<li>First name: <input type="text" name="first_name" required></li>
389. <li>Last name: <input type="text" name="last_name" required></li>
390. <li>Birthday: <input type="text" name="birthday" required></li>"""
391.         )
392. 
393.     def test_id_on_field(self):
394.         # In this example, auto_id is False, but the "id" attribute for the "first_name"
395.         # field is given. Also note that field gets a <label>, while the others don't.
396.         p = PersonNew(auto_id=False)
397.         self.assertHTMLEqual(
398.             p.as_ul(),
399.             """<li><label for="first_name_id">First name:</label>
400. <input type="text" id="first_name_id" name="first_name" required></li>
401. <li>Last name: <input type="text" name="last_name" required></li>
402. <li>Birthday: <input type="text" name="birthday" required></li>"""
403.         )
404. 
405.     def test_auto_id_on_form_and_field(self):
406.         # If the "id" attribute is specified in the Form and auto_id is True, the "id"
407.         # attribute in the Form gets precedence.
408.         p = PersonNew(auto_id=True)
409.         self.assertHTMLEqual(
410.             p.as_ul(),
411.             """<li><label for="first_name_id">First name:</label>
412. <input type="text" id="first_name_id" name="first_name" required></li>
413. <li><label for="last_name">Last name:</label>
414. <input type="text" name="last_name" id="last_name" required></li>
415. <li><label for="birthday">Birthday:</label>
416. <input type="text" name="birthday" id="birthday" required></li>"""
417.         )
418. 
419.     def test_various_boolean_values(self):
420.         class SignupForm(Form):
421.             email = EmailField()
422.             get_spam = BooleanField()
423. 
424.         f = SignupForm(auto_id=False)
425.         self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" required>')
426.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
427. 
428.         f = SignupForm({'email': 'test@example.com', 'get_spam': True}, auto_id=False)
429.         self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" value="test@example.com" required>')
430.         self.assertHTMLEqual(
431.             str(f['get_spam']),
432.             '<input checked type="checkbox" name="get_spam" required>',
433.         )
434. 
435.         # 'True' or 'true' should be rendered without a value attribute
436.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'True'}, auto_id=False)
437.         self.assertHTMLEqual(
438.             str(f['get_spam']),
439.             '<input checked type="checkbox" name="get_spam" required>',
440.         )
441. 
442.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'true'}, auto_id=False)
443.         self.assertHTMLEqual(
444.             str(f['get_spam']), '<input checked type="checkbox" name="get_spam" required>')
445. 
446.         # A value of 'False' or 'false' should be rendered unchecked
447.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'False'}, auto_id=False)
448.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
449. 
450.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'false'}, auto_id=False)
451.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
452. 
453.         # A value of '0' should be interpreted as a True value (#16820)
454.         f = SignupForm({'email': 'test@example.com', 'get_spam': '0'})
455.         self.assertTrue(f.is_valid())
456.         self.assertTrue(f.cleaned_data.get('get_spam'))
457. 
458.     def test_widget_output(self):
459.         # Any Field can have a Widget class passed to its constructor:
460.         class ContactForm(Form):
461.             subject = CharField()
462.             message = CharField(widget=Textarea)
463. 
464.         f = ContactForm(auto_id=False)
465.         self.assertHTMLEqual(str(f['subject']), '<input type="text" name="subject" required>')
466.         self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="10" cols="40" required></textarea>')
467. 
468.         # as_textarea(), as_text() and as_hidden() are shortcuts for changing the output
469.         # widget type:
470.         self.assertHTMLEqual(
471.             f['subject'].as_textarea(),
472.             '<textarea name="subject" rows="10" cols="40" required></textarea>',
473.         )
474.         self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
475.         self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message">')
476. 
477.         # The 'widget' parameter to a Field can also be an instance:
478.         class ContactForm(Form):
479.             subject = CharField()
480.             message = CharField(widget=Textarea(attrs={'rows': 80, 'cols': 20}))
481. 
482.         f = ContactForm(auto_id=False)
483.         self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="80" cols="20" required></textarea>')
484. 
485.         # Instance-level attrs are *not* carried over to as_textarea(), as_text() and
486.         # as_hidden():
487.         self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
488.         f = ContactForm({'subject': 'Hello', 'message': 'I love you.'}, auto_id=False)
489.         self.assertHTMLEqual(
490.             f['subject'].as_textarea(),
491.             '<textarea rows="10" cols="40" name="subject" required>Hello</textarea>'
492.         )
493.         self.assertHTMLEqual(
494.             f['message'].as_text(),
495.             '<input type="text" name="message" value="I love you." required>',
496.         )
497.         self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message" value="I love you.">')
498. 
499.     def test_forms_with_choices(self):
500.         # For a form with a <select>, use ChoiceField:


File: tests/forms_tests/tests/test_formsets.py
Line number range: 1 - 500
Content:
1. import datetime
2. from collections import Counter
3. from unittest import mock
4. 
5. from django.core.exceptions import ValidationError
6. from django.forms import (
7.     BaseForm, CharField, DateField, FileField, Form, IntegerField,
8.     SplitDateTimeField, formsets,
9. )
10. from django.forms.formsets import BaseFormSet, all_valid, formset_factory
11. from django.forms.utils import ErrorList
12. from django.forms.widgets import HiddenInput
13. from django.test import SimpleTestCase
14. 
15. 
16. class Choice(Form):
17.     choice = CharField()
18.     votes = IntegerField()
19. 
20. 
21. ChoiceFormSet = formset_factory(Choice)
22. 
23. 
24. class FavoriteDrinkForm(Form):
25.     name = CharField()
26. 
27. 
28. class BaseFavoriteDrinksFormSet(BaseFormSet):
29.     def clean(self):
30.         seen_drinks = []
31. 
32.         for drink in self.cleaned_data:
33.             if drink['name'] in seen_drinks:
34.                 raise ValidationError('You may only specify a drink once.')
35. 
36.             seen_drinks.append(drink['name'])
37. 
38. 
39. # A FormSet that takes a list of favorite drinks and raises an error if
40. # there are any duplicates.
41. FavoriteDrinksFormSet = formset_factory(FavoriteDrinkForm, formset=BaseFavoriteDrinksFormSet, extra=3)
42. 
43. 
44. class CustomKwargForm(Form):
45.     def __init__(self, *args, custom_kwarg, **kwargs):
46.         self.custom_kwarg = custom_kwarg
47.         super().__init__(*args, **kwargs)
48. 
49. 
50. class FormsFormsetTestCase(SimpleTestCase):
51. 
52.     def make_choiceformset(
53.             self, formset_data=None, formset_class=ChoiceFormSet,
54.             total_forms=None, initial_forms=0, max_num_forms=0, min_num_forms=0, **kwargs):
55.         """
56.         Make a ChoiceFormset from the given formset_data.
57.         The data should be given as a list of (choice, votes) tuples.
58.         """
59.         kwargs.setdefault('prefix', 'choices')
60.         kwargs.setdefault('auto_id', False)
61. 
62.         if formset_data is None:
63.             return formset_class(**kwargs)
64. 
65.         if total_forms is None:
66.             total_forms = len(formset_data)
67. 
68.         def prefixed(*args):
69.             args = (kwargs['prefix'],) + args
70.             return '-'.join(args)
71. 
72.         data = {
73.             prefixed('TOTAL_FORMS'): str(total_forms),
74.             prefixed('INITIAL_FORMS'): str(initial_forms),
75.             prefixed('MAX_NUM_FORMS'): str(max_num_forms),
76.             prefixed('MIN_NUM_FORMS'): str(min_num_forms),
77.         }
78.         for i, (choice, votes) in enumerate(formset_data):
79.             data[prefixed(str(i), 'choice')] = choice
80.             data[prefixed(str(i), 'votes')] = votes
81. 
82.         return formset_class(data, **kwargs)
83. 
84.     def test_basic_formset(self):
85.         """
86.         A FormSet constructor takes the same arguments as Form. Create a
87.         FormSet for adding data. By default, it displays 1 blank form.
88.         """
89.         formset = self.make_choiceformset()
90.         self.assertHTMLEqual(
91.             str(formset),
92.             """<input type="hidden" name="choices-TOTAL_FORMS" value="1">
93. <input type="hidden" name="choices-INITIAL_FORMS" value="0">
94. <input type="hidden" name="choices-MIN_NUM_FORMS" value="0">
95. <input type="hidden" name="choices-MAX_NUM_FORMS" value="1000">
96. <tr><th>Choice:</th><td><input type="text" name="choices-0-choice"></td></tr>
97. <tr><th>Votes:</th><td><input type="number" name="choices-0-votes"></td></tr>"""
98.         )
99.         # FormSet are treated similarly to Forms. FormSet has an is_valid()
100.         # method, and a cleaned_data or errors attribute depending on whether
101.         # all the forms passed validation. However, unlike a Form, cleaned_data
102.         # and errors will be a list of dicts rather than a single dict.
103.         formset = self.make_choiceformset([('Calexico', '100')])
104.         self.assertTrue(formset.is_valid())
105.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}])
106. 
107.         # If a FormSet wasn't passed any data, is_valid() and has_changed()
108.         # return False.
109.         formset = self.make_choiceformset()
110.         self.assertFalse(formset.is_valid())
111.         self.assertFalse(formset.has_changed())
112. 
113.     def test_form_kwargs_formset(self):
114.         """
115.         Custom kwargs set on the formset instance are passed to the
116.         underlying forms.
117.         """
118.         FormSet = formset_factory(CustomKwargForm, extra=2)
119.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
120.         for form in formset:
121.             self.assertTrue(hasattr(form, 'custom_kwarg'))
122.             self.assertEqual(form.custom_kwarg, 1)
123. 
124.     def test_form_kwargs_formset_dynamic(self):
125.         """Form kwargs can be passed dynamically in a formset."""
126.         class DynamicBaseFormSet(BaseFormSet):
127.             def get_form_kwargs(self, index):
128.                 return {'custom_kwarg': index}
129. 
130.         DynamicFormSet = formset_factory(CustomKwargForm, formset=DynamicBaseFormSet, extra=2)
131.         formset = DynamicFormSet(form_kwargs={'custom_kwarg': 'ignored'})
132.         for i, form in enumerate(formset):
133.             self.assertTrue(hasattr(form, 'custom_kwarg'))
134.             self.assertEqual(form.custom_kwarg, i)
135. 
136.     def test_form_kwargs_empty_form(self):
137.         FormSet = formset_factory(CustomKwargForm)
138.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
139.         self.assertTrue(hasattr(formset.empty_form, 'custom_kwarg'))
140.         self.assertEqual(formset.empty_form.custom_kwarg, 1)
141. 
142.     def test_formset_validation(self):
143.         # FormSet instances can also have an error attribute if validation failed for
144.         # any of the forms.
145.         formset = self.make_choiceformset([('Calexico', '')])
146.         self.assertFalse(formset.is_valid())
147.         self.assertEqual(formset.errors, [{'votes': ['This field is required.']}])
148. 
149.     def test_formset_validation_count(self):
150.         """
151.         A formset's ManagementForm is validated once per FormSet.is_valid()
152.         call and each form of the formset is cleaned once.
153.         """
154.         def make_method_counter(func):
155.             """Add a counter to func for the number of times it's called."""
156.             counter = Counter()
157.             counter.call_count = 0
158. 
159.             def mocked_func(*args, **kwargs):
160.                 counter.call_count += 1
161.                 return func(*args, **kwargs)
162. 
163.             return mocked_func, counter
164. 
165.         mocked_is_valid, is_valid_counter = make_method_counter(formsets.ManagementForm.is_valid)
166.         mocked_full_clean, full_clean_counter = make_method_counter(BaseForm.full_clean)
167.         formset = self.make_choiceformset([('Calexico', '100'), ('Any1', '42'), ('Any2', '101')])
168. 
169.         with mock.patch('django.forms.formsets.ManagementForm.is_valid', mocked_is_valid), \
170.                 mock.patch('django.forms.forms.BaseForm.full_clean', mocked_full_clean):
171.             self.assertTrue(formset.is_valid())
172.         self.assertEqual(is_valid_counter.call_count, 1)
173.         self.assertEqual(full_clean_counter.call_count, 4)
174. 
175.     def test_formset_has_changed(self):
176.         """
177.         FormSet.has_changed() is True if any data is passed to its forms, even
178.         if the formset didn't validate.
179.         """
180.         blank_formset = self.make_choiceformset([('', '')])
181.         self.assertFalse(blank_formset.has_changed())
182.         # invalid formset
183.         invalid_formset = self.make_choiceformset([('Calexico', '')])
184.         self.assertFalse(invalid_formset.is_valid())
185.         self.assertTrue(invalid_formset.has_changed())
186.         # valid formset
187.         valid_formset = self.make_choiceformset([('Calexico', '100')])
188.         self.assertTrue(valid_formset.is_valid())
189.         self.assertTrue(valid_formset.has_changed())
190. 
191.     def test_formset_initial_data(self):
192.         """
193.         A FormSet can be prefilled with existing data by providing a list of
194.         dicts to the `initial` argument. By default, an extra blank form is
195.         included.
196.         """
197.         formset = self.make_choiceformset(initial=[{'choice': 'Calexico', 'votes': 100}])
198.         self.assertHTMLEqual(
199.             '\n'.join(form.as_ul() for form in formset.forms),
200.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
201. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
202. <li>Choice: <input type="text" name="choices-1-choice"></li>
203. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
204.         )
205. 
206.     def test_blank_form_unfilled(self):
207.         """A form that's displayed as blank may be submitted as blank."""
208.         formset = self.make_choiceformset([('Calexico', '100'), ('', '')], initial_forms=1)
209.         self.assertTrue(formset.is_valid())
210.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}])
211. 
212.     def test_second_form_partially_filled(self):
213.         """
214.         If at least one field is filled out on a blank form, it will be
215.         validated.
216.         """
217.         formset = self.make_choiceformset([('Calexico', '100'), ('The Decemberists', '')], initial_forms=1)
218.         self.assertFalse(formset.is_valid())
219.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}])
220. 
221.     def test_delete_prefilled_data(self):
222.         """
223.         Deleting prefilled data is an error. Removing data from form fields
224.         isn't the proper way to delete it.
225.         """
226.         formset = self.make_choiceformset([('', ''), ('', '')], initial_forms=1)
227.         self.assertFalse(formset.is_valid())
228.         self.assertEqual(
229.             formset.errors,
230.             [{'votes': ['This field is required.'], 'choice': ['This field is required.']}, {}]
231.         )
232. 
233.     def test_displaying_more_than_one_blank_form(self):
234.         """
235.         More than 1 empty form can be displayed using formset_factory's
236.         `extra` argument.
237.         """
238.         ChoiceFormSet = formset_factory(Choice, extra=3)
239.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
240.         self.assertHTMLEqual(
241.             '\n'.join(form.as_ul() for form in formset.forms),
242.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
243. <li>Votes: <input type="number" name="choices-0-votes"></li>
244. <li>Choice: <input type="text" name="choices-1-choice"></li>
245. <li>Votes: <input type="number" name="choices-1-votes"></li>
246. <li>Choice: <input type="text" name="choices-2-choice"></li>
247. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
248.         )
249.         # Since every form was displayed as blank, they are also accepted as
250.         # blank. This may seem a little strange, but min_num is used to require
251.         # a minimum number of forms to be completed.
252.         data = {
253.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
254.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
255.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
256.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
257.             'choices-0-choice': '',
258.             'choices-0-votes': '',
259.             'choices-1-choice': '',
260.             'choices-1-votes': '',
261.             'choices-2-choice': '',
262.             'choices-2-votes': '',
263.         }
264.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
265.         self.assertTrue(formset.is_valid())
266.         self.assertEqual([form.cleaned_data for form in formset.forms], [{}, {}, {}])
267. 
268.     def test_min_num_displaying_more_than_one_blank_form(self):
269.         """
270.         More than 1 empty form can also be displayed using formset_factory's
271.         min_num argument. It will (essentially) increment the extra argument.
272.         """
273.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=1)
274.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
275.         # Min_num forms are required; extra forms can be empty.
276.         self.assertFalse(formset.forms[0].empty_permitted)
277.         self.assertTrue(formset.forms[1].empty_permitted)
278.         self.assertHTMLEqual(
279.             '\n'.join(form.as_ul() for form in formset.forms),
280.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
281. <li>Votes: <input type="number" name="choices-0-votes"></li>
282. <li>Choice: <input type="text" name="choices-1-choice"></li>
283. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
284.         )
285. 
286.     def test_min_num_displaying_more_than_one_blank_form_with_zero_extra(self):
287.         """More than 1 empty form can be displayed using min_num."""
288.         ChoiceFormSet = formset_factory(Choice, extra=0, min_num=3)
289.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
290.         self.assertHTMLEqual(
291.             '\n'.join(form.as_ul() for form in formset.forms),
292.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
293. <li>Votes: <input type="number" name="choices-0-votes"></li>
294. <li>Choice: <input type="text" name="choices-1-choice"></li>
295. <li>Votes: <input type="number" name="choices-1-votes"></li>
296. <li>Choice: <input type="text" name="choices-2-choice"></li>
297. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
298.         )
299. 
300.     def test_single_form_completed(self):
301.         """Just one form may be completed."""
302.         data = {
303.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
304.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
305.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
306.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
307.             'choices-0-choice': 'Calexico',
308.             'choices-0-votes': '100',
309.             'choices-1-choice': '',
310.             'choices-1-votes': '',
311.             'choices-2-choice': '',
312.             'choices-2-votes': '',
313.         }
314.         ChoiceFormSet = formset_factory(Choice, extra=3)
315.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
316.         self.assertTrue(formset.is_valid())
317.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}, {}])
318. 
319.     def test_formset_validate_max_flag(self):
320.         """
321.         If validate_max is set and max_num is less than TOTAL_FORMS in the
322.         data, a ValidationError is raised. MAX_NUM_FORMS in the data is
323.         irrelevant here (it's output as a hint for the client but its value
324.         in the returned data is not checked).
325.         """
326.         data = {
327.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
328.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
329.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
330.             'choices-MAX_NUM_FORMS': '2',  # max number of forms - should be ignored
331.             'choices-0-choice': 'Zero',
332.             'choices-0-votes': '0',
333.             'choices-1-choice': 'One',
334.             'choices-1-votes': '1',
335.         }
336.         ChoiceFormSet = formset_factory(Choice, extra=1, max_num=1, validate_max=True)
337.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
338.         self.assertFalse(formset.is_valid())
339.         self.assertEqual(formset.non_form_errors(), ['Please submit at most 1 form.'])
340. 
341.     def test_formset_validate_min_flag(self):
342.         """
343.         If validate_min is set and min_num is more than TOTAL_FORMS in the
344.         data, a ValidationError is raised. MIN_NUM_FORMS in the data is
345.         irrelevant here (it's output as a hint for the client but its value
346.         in the returned data is not checked).
347.         """
348.         data = {
349.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
350.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
351.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
352.             'choices-MAX_NUM_FORMS': '0',  # max number of forms - should be ignored
353.             'choices-0-choice': 'Zero',
354.             'choices-0-votes': '0',
355.             'choices-1-choice': 'One',
356.             'choices-1-votes': '1',
357.         }
358.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=3, validate_min=True)
359.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
360.         self.assertFalse(formset.is_valid())
361.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 3 forms.'])
362. 
363.     def test_formset_validate_min_unchanged_forms(self):
364.         """
365.         min_num validation doesn't consider unchanged forms with initial data
366.         as "empty".
367.         """
368.         initial = [
369.             {'choice': 'Zero', 'votes': 0},
370.             {'choice': 'One', 'votes': 0},
371.         ]
372.         data = {
373.             'choices-TOTAL_FORMS': '2',
374.             'choices-INITIAL_FORMS': '2',
375.             'choices-MIN_NUM_FORMS': '0',
376.             'choices-MAX_NUM_FORMS': '2',
377.             'choices-0-choice': 'Zero',
378.             'choices-0-votes': '0',
379.             'choices-1-choice': 'One',
380.             'choices-1-votes': '1',  # changed from initial
381.         }
382.         ChoiceFormSet = formset_factory(Choice, min_num=2, validate_min=True)
383.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices', initial=initial)
384.         self.assertFalse(formset.forms[0].has_changed())
385.         self.assertTrue(formset.forms[1].has_changed())
386.         self.assertTrue(formset.is_valid())
387. 
388.     def test_formset_validate_min_excludes_empty_forms(self):
389.         data = {
390.             'choices-TOTAL_FORMS': '2',
391.             'choices-INITIAL_FORMS': '0',
392.         }
393.         ChoiceFormSet = formset_factory(Choice, extra=2, min_num=1, validate_min=True, can_delete=True)
394.         formset = ChoiceFormSet(data, prefix='choices')
395.         self.assertFalse(formset.has_changed())
396.         self.assertFalse(formset.is_valid())
397.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 1 form.'])
398. 
399.     def test_second_form_partially_filled_2(self):
400.         """A partially completed form is invalid."""
401.         data = {
402.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
403.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
404.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
405.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
406.             'choices-0-choice': 'Calexico',
407.             'choices-0-votes': '100',
408.             'choices-1-choice': 'The Decemberists',
409.             'choices-1-votes': '',  # missing value
410.             'choices-2-choice': '',
411.             'choices-2-votes': '',
412.         }
413.         ChoiceFormSet = formset_factory(Choice, extra=3)
414.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
415.         self.assertFalse(formset.is_valid())
416.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}, {}])
417. 
418.     def test_more_initial_data(self):
419.         """
420.         The extra argument works when the formset is pre-filled with initial
421.         data.
422.         """
423.         initial = [{'choice': 'Calexico', 'votes': 100}]
424.         ChoiceFormSet = formset_factory(Choice, extra=3)
425.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
426.         self.assertHTMLEqual(
427.             '\n'.join(form.as_ul() for form in formset.forms),
428.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
429. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
430. <li>Choice: <input type="text" name="choices-1-choice"></li>
431. <li>Votes: <input type="number" name="choices-1-votes"></li>
432. <li>Choice: <input type="text" name="choices-2-choice"></li>
433. <li>Votes: <input type="number" name="choices-2-votes"></li>
434. <li>Choice: <input type="text" name="choices-3-choice"></li>
435. <li>Votes: <input type="number" name="choices-3-votes"></li>"""
436.         )
437.         # Retrieving an empty form works. Tt shows up in the form list.
438.         self.assertTrue(formset.empty_form.empty_permitted)
439.         self.assertHTMLEqual(
440.             formset.empty_form.as_ul(),
441.             """<li>Choice: <input type="text" name="choices-__prefix__-choice"></li>
442. <li>Votes: <input type="number" name="choices-__prefix__-votes"></li>"""
443.         )
444. 
445.     def test_formset_with_deletion(self):
446.         """
447.         formset_factory's can_delete argument adds a boolean "delete" field to
448.         each form. When that boolean field is True, the form will be in
449.         formset.deleted_forms.
450.         """
451.         ChoiceFormSet = formset_factory(Choice, can_delete=True)
452.         initial = [{'choice': 'Calexico', 'votes': 100}, {'choice': 'Fergie', 'votes': 900}]
453.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
454.         self.assertHTMLEqual(
455.             '\n'.join(form.as_ul() for form in formset.forms),
456.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
457. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
458. <li>Delete: <input type="checkbox" name="choices-0-DELETE"></li>
459. <li>Choice: <input type="text" name="choices-1-choice" value="Fergie"></li>
460. <li>Votes: <input type="number" name="choices-1-votes" value="900"></li>
461. <li>Delete: <input type="checkbox" name="choices-1-DELETE"></li>
462. <li>Choice: <input type="text" name="choices-2-choice"></li>
463. <li>Votes: <input type="number" name="choices-2-votes"></li>
464. <li>Delete: <input type="checkbox" name="choices-2-DELETE"></li>"""
465.         )
466.         # To delete something, set that form's special delete field to 'on'.
467.         # Let's go ahead and delete Fergie.
468.         data = {
469.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
470.             'choices-INITIAL_FORMS': '2',  # the number of forms with initial data
471.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
472.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
473.             'choices-0-choice': 'Calexico',
474.             'choices-0-votes': '100',
475.             'choices-0-DELETE': '',
476.             'choices-1-choice': 'Fergie',
477.             'choices-1-votes': '900',
478.             'choices-1-DELETE': 'on',
479.             'choices-2-choice': '',
480.             'choices-2-votes': '',
481.             'choices-2-DELETE': '',
482.         }
483.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
484.         self.assertTrue(formset.is_valid())
485.         self.assertEqual(
486.             [form.cleaned_data for form in formset.forms],
487.             [
488.                 {'votes': 100, 'DELETE': False, 'choice': 'Calexico'},
489.                 {'votes': 900, 'DELETE': True, 'choice': 'Fergie'},
490.                 {},
491.             ]
492.         )
493.         self.assertEqual(
494.             [form.cleaned_data for form in formset.deleted_forms],
495.             [{'votes': 900, 'DELETE': True, 'choice': 'Fergie'}]
496.         )
497. 
498.     def test_formset_with_deletion_remove_deletion_flag(self):
499.         """
500.         If a form is filled with something and can_delete is also checked, that

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 04:00:00,637 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find test cases for rendering the `nonform` CSS class on formset errors. The provided context contains tests for formsets that generate non-form errors but doesn't show how they are rendered and tested. The analogous functionality for forms is the `nonfield` CSS class for non-field errors. Tests for this functionality will provide the correct pattern for the new test case. These tests are likely in `tests/forms_tests/tests/test_forms.py` but are not in the current context. Additionally, a file named `tests/forms_tests/tests/test_error_messages.py` exists and is highly relevant for testing error rendering, but its content has not been provided." query='Please provide the full content of `tests/forms_tests/tests/test_error_messages.py` and any test methods from `tests/forms_tests/tests/test_forms.py` that test the rendering of `non_field_errors`.' extra_requirements='' purpose='This will provide examples of how error list CSS classes are tested, which is necessary to write a test for the new `nonform` class.'
2025-12-24 04:00:00,638 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/forms_tests/tests/test_error_messages.py` and any test methods from `tests/forms_tests/tests/test_forms.py` that test the rendering of `non_field_errors`.
2025-12-24 04:00:00,639 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 04:00:00,639 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 04:00:00,640 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 04:00:00,640 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/forms_tests/tests/test_error_messages.py` and any test methods from `tests/forms_tests/tests/test_forms.py` that test the rendering of `non_field_errors`.
Purpose: This will provide examples of how error list CSS classes are tested, which is necessary to write a test for the new `nonform` class.
2025-12-24 04:00:04,350 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will begin by retrieving the entire content of `tests/forms_tests/tests/test_error_messages.py` to get an idea of how error messages are tested. Concurrently, I will search for test methods in `tests/forms_tests/tests/test_forms.py` that specifically handle `non_field_errors` to see how they are rendered. This will give me a comprehensive understanding of how to approach the new `nonform` class.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/forms_tests/tests/test_forms.py", "text": "non_field_errors"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2148, 'candidates_token_count': 168, 'total_token_count': 2453, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2148}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 168}], 'thoughts_token_count': 137, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.08174405779157366, 'model_name': 'gemini-2.5-pro'} id='run--fd42d89f-7992-418f-acfa-75970b970038-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/forms_tests/tests/test_error_messages.py'}, 'id': '90118571-42a9-4625-9fec-8a6080a28d7b', 'type': 'tool_call'}, {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/forms_tests/tests/test_forms.py', 'text': 'non_field_errors'}, 'id': '68c6c75b-b04b-4ee4-93e3-8c3913ea643c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2148, 'output_tokens': 168, 'total_tokens': 2453, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 137}}
2025-12-24 04:00:10,332 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the content of `tests/forms_tests/tests/test_error_messages.py` and located the `FormsTestCase` class in `tests/forms_tests/tests/test_forms.py`, which contains tests for `non_field_errors`. I will now examine the `test_templates_with_forms` method within that class to understand how `non_field_errors` are rendered.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2813.0, "relative_path": "tests/forms_tests/tests/test_forms.py", "end_line": 2919.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 61764, 'candidates_token_count': 122, 'total_token_count': 62132, 'prompt_tokens_details': [{'modality': 1, 'token_count': 61764}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 122}], 'thoughts_token_count': 246, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.29231693705574413, 'model_name': 'gemini-2.5-pro'} id='run--0ea05eb0-c134-402c-adc1-468bd11d1800-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2813.0, 'relative_path': 'tests/forms_tests/tests/test_forms.py', 'end_line': 2919.0}, 'id': '830c70e8-86bc-4db2-9525-a278102b89ff', 'type': 'tool_call'}] usage_metadata={'input_tokens': 61764, 'output_tokens': 122, 'total_tokens': 62132, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 246}}
2025-12-24 04:00:15,906 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have gathered the necessary information by retrieving the file content of `test_error_messages.py` and identifying test methods in `test_forms.py` that handle `non_field_errors`. This provides a solid foundation for understanding how error list CSS classes are tested, which will be crucial for implementing the new `nonform` class test. I will now read the `test_error_list_with_non_field_errors_has_correct_class` test method to get more context on how the `nonfield` class is tested.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 3415.0, "relative_path": "tests/forms_tests/tests/test_forms.py", "end_line": 3453.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 64049, 'candidates_token_count': 148, 'total_token_count': 64355, 'cached_content_token_count': 60722, 'prompt_tokens_details': [{'modality': 1, 'token_count': 64049}], 'cache_tokens_details': [{'modality': 1, 'token_count': 60722}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 148}], 'thoughts_token_count': 158}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21206867372667468, 'model_name': 'gemini-2.5-pro'} id='run--94a022cc-f952-4bb8-a8aa-8eaec333fc0b-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 3415.0, 'relative_path': 'tests/forms_tests/tests/test_forms.py', 'end_line': 3453.0}, 'id': '022208bc-259a-4e3a-bf5b-110fb32a6a48', 'type': 'tool_call'}] usage_metadata={'input_tokens': 64049, 'output_tokens': 148, 'total_tokens': 64355, 'input_token_details': {'cache_read': 60722}, 'output_token_details': {'reasoning': 158}}
2025-12-24 04:00:20,613 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully gathered the necessary information to write a test for the new `nonform` class. I began by retrieving the full content of `tests/forms_tests/tests/test_error_messages.py` to understand the existing error message testing patterns. I then identified and examined the `test_templates_with_forms` and `test_error_list_with_non_field_errors_has_correct_class` methods in `tests/forms_tests/tests/test_forms.py` to see how `non_field_errors` and their CSS classes are specifically tested. This provides a comprehensive understanding of the current testing strategy and will enable me to write a new test that aligns with the existing codebase.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 65039, 'candidates_token_count': 152, 'total_token_count': 65321, 'cached_content_token_count': 60715, 'prompt_tokens_details': [{'modality': 1, 'token_count': 65039}], 'cache_tokens_details': [{'modality': 1, 'token_count': 60715}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 152}], 'thoughts_token_count': 130}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1396065260234632, 'model_name': 'gemini-2.5-pro'} id='run--f99c01b5-7463-4c32-8e11-efbc08554700-0' usage_metadata={'input_tokens': 65039, 'output_tokens': 152, 'total_tokens': 65321, 'input_token_details': {'cache_read': 60715}, 'output_token_details': {'reasoning': 130}}
2025-12-24 04:00:20,617 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/forms_tests/tests/test_error_messages.py` and any test methods from `tests/forms_tests/tests/test_forms.py` that test the rendering of `non_field_errors`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This will provide examples of how error list CSS classes are tested, which is necessary to write a test for the new `nonform` class.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/forms_tests/tests/test_error_messages.py
Line number range: 1 - 323
Content:
1. from django.core.exceptions import ValidationError
2. from django.core.files.uploadedfile import SimpleUploadedFile
3. from django.forms import (
4.     BooleanField, CharField, ChoiceField, DateField, DateTimeField,
5.     DecimalField, EmailField, FileField, FloatField, Form,
6.     GenericIPAddressField, IntegerField, ModelChoiceField,
7.     ModelMultipleChoiceField, MultipleChoiceField, RegexField,
8.     SplitDateTimeField, TimeField, URLField, utils,
9. )
10. from django.template import Context, Template
11. from django.test import SimpleTestCase, TestCase
12. from django.utils.safestring import mark_safe
13. 
14. from ..models import ChoiceModel
15. 
16. 
17. class AssertFormErrorsMixin:
18.     def assertFormErrors(self, expected, the_callable, *args, **kwargs):
19.         with self.assertRaises(ValidationError) as cm:
20.             the_callable(*args, **kwargs)
21.         self.assertEqual(cm.exception.messages, expected)
22. 
23. 
24. class FormsErrorMessagesTestCase(SimpleTestCase, AssertFormErrorsMixin):
25.     def test_charfield(self):
26.         e = {
27.             'required': 'REQUIRED',
28.             'min_length': 'LENGTH %(show_value)s, MIN LENGTH %(limit_value)s',
29.             'max_length': 'LENGTH %(show_value)s, MAX LENGTH %(limit_value)s',
30.         }
31.         f = CharField(min_length=5, max_length=10, error_messages=e)
32.         self.assertFormErrors(['REQUIRED'], f.clean, '')
33.         self.assertFormErrors(['LENGTH 4, MIN LENGTH 5'], f.clean, '1234')
34.         self.assertFormErrors(['LENGTH 11, MAX LENGTH 10'], f.clean, '12345678901')
35. 
36.     def test_integerfield(self):
37.         e = {
38.             'required': 'REQUIRED',
39.             'invalid': 'INVALID',
40.             'min_value': 'MIN VALUE IS %(limit_value)s',
41.             'max_value': 'MAX VALUE IS %(limit_value)s',
42.         }
43.         f = IntegerField(min_value=5, max_value=10, error_messages=e)
44.         self.assertFormErrors(['REQUIRED'], f.clean, '')
45.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
46.         self.assertFormErrors(['MIN VALUE IS 5'], f.clean, '4')
47.         self.assertFormErrors(['MAX VALUE IS 10'], f.clean, '11')
48. 
49.     def test_floatfield(self):
50.         e = {
51.             'required': 'REQUIRED',
52.             'invalid': 'INVALID',
53.             'min_value': 'MIN VALUE IS %(limit_value)s',
54.             'max_value': 'MAX VALUE IS %(limit_value)s',
55.         }
56.         f = FloatField(min_value=5, max_value=10, error_messages=e)
57.         self.assertFormErrors(['REQUIRED'], f.clean, '')
58.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
59.         self.assertFormErrors(['MIN VALUE IS 5'], f.clean, '4')
60.         self.assertFormErrors(['MAX VALUE IS 10'], f.clean, '11')
61. 
62.     def test_decimalfield(self):
63.         e = {
64.             'required': 'REQUIRED',
65.             'invalid': 'INVALID',
66.             'min_value': 'MIN VALUE IS %(limit_value)s',
67.             'max_value': 'MAX VALUE IS %(limit_value)s',
68.             'max_digits': 'MAX DIGITS IS %(max)s',
69.             'max_decimal_places': 'MAX DP IS %(max)s',
70.             'max_whole_digits': 'MAX DIGITS BEFORE DP IS %(max)s',
71.         }
72.         f = DecimalField(min_value=5, max_value=10, error_messages=e)
73.         self.assertFormErrors(['REQUIRED'], f.clean, '')
74.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
75.         self.assertFormErrors(['MIN VALUE IS 5'], f.clean, '4')
76.         self.assertFormErrors(['MAX VALUE IS 10'], f.clean, '11')
77. 
78.         f2 = DecimalField(max_digits=4, decimal_places=2, error_messages=e)
79.         self.assertFormErrors(['MAX DIGITS IS 4'], f2.clean, '123.45')
80.         self.assertFormErrors(['MAX DP IS 2'], f2.clean, '1.234')
81.         self.assertFormErrors(['MAX DIGITS BEFORE DP IS 2'], f2.clean, '123.4')
82. 
83.     def test_datefield(self):
84.         e = {
85.             'required': 'REQUIRED',
86.             'invalid': 'INVALID',
87.         }
88.         f = DateField(error_messages=e)
89.         self.assertFormErrors(['REQUIRED'], f.clean, '')
90.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
91. 
92.     def test_timefield(self):
93.         e = {
94.             'required': 'REQUIRED',
95.             'invalid': 'INVALID',
96.         }
97.         f = TimeField(error_messages=e)
98.         self.assertFormErrors(['REQUIRED'], f.clean, '')
99.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
100. 
101.     def test_datetimefield(self):
102.         e = {
103.             'required': 'REQUIRED',
104.             'invalid': 'INVALID',
105.         }
106.         f = DateTimeField(error_messages=e)
107.         self.assertFormErrors(['REQUIRED'], f.clean, '')
108.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
109. 
110.     def test_regexfield(self):
111.         e = {
112.             'required': 'REQUIRED',
113.             'invalid': 'INVALID',
114.             'min_length': 'LENGTH %(show_value)s, MIN LENGTH %(limit_value)s',
115.             'max_length': 'LENGTH %(show_value)s, MAX LENGTH %(limit_value)s',
116.         }
117.         f = RegexField(r'^[0-9]+$', min_length=5, max_length=10, error_messages=e)
118.         self.assertFormErrors(['REQUIRED'], f.clean, '')
119.         self.assertFormErrors(['INVALID'], f.clean, 'abcde')
120.         self.assertFormErrors(['LENGTH 4, MIN LENGTH 5'], f.clean, '1234')
121.         self.assertFormErrors(['LENGTH 11, MAX LENGTH 10'], f.clean, '12345678901')
122. 
123.     def test_emailfield(self):
124.         e = {
125.             'required': 'REQUIRED',
126.             'invalid': 'INVALID',
127.             'min_length': 'LENGTH %(show_value)s, MIN LENGTH %(limit_value)s',
128.             'max_length': 'LENGTH %(show_value)s, MAX LENGTH %(limit_value)s',
129.         }
130.         f = EmailField(min_length=8, max_length=10, error_messages=e)
131.         self.assertFormErrors(['REQUIRED'], f.clean, '')
132.         self.assertFormErrors(['INVALID'], f.clean, 'abcdefgh')
133.         self.assertFormErrors(['LENGTH 7, MIN LENGTH 8'], f.clean, 'a@b.com')
134.         self.assertFormErrors(['LENGTH 11, MAX LENGTH 10'], f.clean, 'aye@bee.com')
135. 
136.     def test_filefield(self):
137.         e = {
138.             'required': 'REQUIRED',
139.             'invalid': 'INVALID',
140.             'missing': 'MISSING',
141.             'empty': 'EMPTY FILE',
142.         }
143.         f = FileField(error_messages=e)
144.         self.assertFormErrors(['REQUIRED'], f.clean, '')
145.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
146.         self.assertFormErrors(['EMPTY FILE'], f.clean, SimpleUploadedFile('name', None))
147.         self.assertFormErrors(['EMPTY FILE'], f.clean, SimpleUploadedFile('name', ''))
148. 
149.     def test_urlfield(self):
150.         e = {
151.             'required': 'REQUIRED',
152.             'invalid': 'INVALID',
153.             'max_length': '"%(value)s" has more than %(limit_value)d characters.',
154.         }
155.         f = URLField(error_messages=e, max_length=17)
156.         self.assertFormErrors(['REQUIRED'], f.clean, '')
157.         self.assertFormErrors(['INVALID'], f.clean, 'abc.c')
158.         self.assertFormErrors(
159.             ['"http://djangoproject.com" has more than 17 characters.'],
160.             f.clean,
161.             'djangoproject.com'
162.         )
163. 
164.     def test_booleanfield(self):
165.         e = {
166.             'required': 'REQUIRED',
167.         }
168.         f = BooleanField(error_messages=e)
169.         self.assertFormErrors(['REQUIRED'], f.clean, '')
170. 
171.     def test_choicefield(self):
172.         e = {
173.             'required': 'REQUIRED',
174.             'invalid_choice': '%(value)s IS INVALID CHOICE',
175.         }
176.         f = ChoiceField(choices=[('a', 'aye')], error_messages=e)
177.         self.assertFormErrors(['REQUIRED'], f.clean, '')
178.         self.assertFormErrors(['b IS INVALID CHOICE'], f.clean, 'b')
179. 
180.     def test_multiplechoicefield(self):
181.         e = {
182.             'required': 'REQUIRED',
183.             'invalid_choice': '%(value)s IS INVALID CHOICE',
184.             'invalid_list': 'NOT A LIST',
185.         }
186.         f = MultipleChoiceField(choices=[('a', 'aye')], error_messages=e)
187.         self.assertFormErrors(['REQUIRED'], f.clean, '')
188.         self.assertFormErrors(['NOT A LIST'], f.clean, 'b')
189.         self.assertFormErrors(['b IS INVALID CHOICE'], f.clean, ['b'])
190. 
191.     def test_splitdatetimefield(self):
192.         e = {
193.             'required': 'REQUIRED',
194.             'invalid_date': 'INVALID DATE',
195.             'invalid_time': 'INVALID TIME',
196.         }
197.         f = SplitDateTimeField(error_messages=e)
198.         self.assertFormErrors(['REQUIRED'], f.clean, '')
199.         self.assertFormErrors(['INVALID DATE', 'INVALID TIME'], f.clean, ['a', 'b'])
200. 
201.     def test_generic_ipaddressfield(self):
202.         e = {
203.             'required': 'REQUIRED',
204.             'invalid': 'INVALID IP ADDRESS',
205.         }
206.         f = GenericIPAddressField(error_messages=e)
207.         self.assertFormErrors(['REQUIRED'], f.clean, '')
208.         self.assertFormErrors(['INVALID IP ADDRESS'], f.clean, '127.0.0')
209. 
210.     def test_subclassing_errorlist(self):
211.         class TestForm(Form):
212.             first_name = CharField()
213.             last_name = CharField()
214.             birthday = DateField()
215. 
216.             def clean(self):
217.                 raise ValidationError("I like to be awkward.")
218. 
219.         class CustomErrorList(utils.ErrorList):
220.             def __str__(self):
221.                 return self.as_divs()
222. 
223.             def as_divs(self):
224.                 if not self:
225.                     return ''
226.                 return mark_safe('<div class="error">%s</div>' % ''.join('<p>%s</p>' % e for e in self))
227. 
228.         # This form should print errors the default way.
229.         form1 = TestForm({'first_name': 'John'})
230.         self.assertHTMLEqual(
231.             str(form1['last_name'].errors),
232.             '<ul class="errorlist"><li>This field is required.</li></ul>'
233.         )
234.         self.assertHTMLEqual(
235.             str(form1.errors['__all__']),
236.             '<ul class="errorlist nonfield"><li>I like to be awkward.</li></ul>'
237.         )
238. 
239.         # This one should wrap error groups in the customized way.
240.         form2 = TestForm({'first_name': 'John'}, error_class=CustomErrorList)
241.         self.assertHTMLEqual(str(form2['last_name'].errors), '<div class="error"><p>This field is required.</p></div>')
242.         self.assertHTMLEqual(str(form2.errors['__all__']), '<div class="error"><p>I like to be awkward.</p></div>')
243. 
244.     def test_error_messages_escaping(self):
245.         # The forms layer doesn't escape input values directly because error
246.         # messages might be presented in non-HTML contexts. Instead, the
247.         # message is marked for escaping by the template engine, so a template
248.         # is needed to trigger the escaping.
249.         t = Template('{{ form.errors }}')
250. 
251.         class SomeForm(Form):
252.             field = ChoiceField(choices=[('one', 'One')])
253. 
254.         f = SomeForm({'field': '<script>'})
255.         self.assertHTMLEqual(
256.             t.render(Context({'form': f})),
257.             '<ul class="errorlist"><li>field<ul class="errorlist">'
258.             '<li>Select a valid choice. &lt;script&gt; is not one of the '
259.             'available choices.</li></ul></li></ul>'
260.         )
261. 
262.         class SomeForm(Form):
263.             field = MultipleChoiceField(choices=[('one', 'One')])
264. 
265.         f = SomeForm({'field': ['<script>']})
266.         self.assertHTMLEqual(
267.             t.render(Context({'form': f})),
268.             '<ul class="errorlist"><li>field<ul class="errorlist">'
269.             '<li>Select a valid choice. &lt;script&gt; is not one of the '
270.             'available choices.</li></ul></li></ul>'
271.         )
272. 
273.         class SomeForm(Form):
274.             field = ModelMultipleChoiceField(ChoiceModel.objects.all())
275. 
276.         f = SomeForm({'field': ['<script>']})
277.         self.assertHTMLEqual(
278.             t.render(Context({'form': f})),
279.             '<ul class="errorlist"><li>field<ul class="errorlist">'
280.             '<li>“&lt;script&gt;” is not a valid value.</li>'
281.             '</ul></li></ul>'
282.         )
283. 
284. 
285. class ModelChoiceFieldErrorMessagesTestCase(TestCase, AssertFormErrorsMixin):
286.     def test_modelchoicefield(self):
287.         # Create choices for the model choice field tests below.
288.         ChoiceModel.objects.create(pk=1, name='a')
289.         ChoiceModel.objects.create(pk=2, name='b')
290.         ChoiceModel.objects.create(pk=3, name='c')
291. 
292.         # ModelChoiceField
293.         e = {
294.             'required': 'REQUIRED',
295.             'invalid_choice': 'INVALID CHOICE',
296.         }
297.         f = ModelChoiceField(queryset=ChoiceModel.objects.all(), error_messages=e)
298.         self.assertFormErrors(['REQUIRED'], f.clean, '')
299.         self.assertFormErrors(['INVALID CHOICE'], f.clean, '4')
300. 
301.         # ModelMultipleChoiceField
302.         e = {
303.             'required': 'REQUIRED',
304.             'invalid_choice': '%(value)s IS INVALID CHOICE',
305.             'invalid_list': 'NOT A LIST OF VALUES',
306.         }
307.         f = ModelMultipleChoiceField(queryset=ChoiceModel.objects.all(), error_messages=e)
308.         self.assertFormErrors(['REQUIRED'], f.clean, '')
309.         self.assertFormErrors(['NOT A LIST OF VALUES'], f.clean, '3')
310.         self.assertFormErrors(['4 IS INVALID CHOICE'], f.clean, ['4'])
311. 
312.     def test_modelchoicefield_value_placeholder(self):
313.         f = ModelChoiceField(
314.             queryset=ChoiceModel.objects.all(),
315.             error_messages={
316.                 'invalid_choice': '"%(value)s" is not one of the available choices.',
317.             },
318.         )
319.         self.assertFormErrors(
320.             ['"invalid" is not one of the available choices.'],
321.             f.clean,
322.             'invalid',
323.         )


File: tests/forms_tests/tests/test_forms.py
Line number range: 43 - 3750
Content:
class FormsTestCase(SimpleTestCase):
    # A Form is a collection of Fields. It knows how to validate a set of data and it
    # knows how to render itself in a couple of default ways (e.g., an HTML table).
    # You can pass it data in __init__(), as a dictionary.

    def test_form(self):
        # Pass a dictionary to a Form's __init__().
        p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': '1940-10-9'})

        self.assertTrue(p.is_bound)
        self.assertEqual(p.errors, {})
        self.assertTrue(p.is_valid())
        self.assertHTMLEqual(p.errors.as_ul(), '')
        self.assertEqual(p.errors.as_text(), '')
        self.assertEqual(p.cleaned_data["first_name"], 'John')
        self.assertEqual(p.cleaned_data["last_name"], 'Lennon')
        self.assertEqual(p.cleaned_data["birthday"], datetime.date(1940, 10, 9))
        self.assertHTMLEqual(
            str(p['first_name']),
            '<input type="text" name="first_name" value="John" id="id_first_name" required>'
        )
        self.assertHTMLEqual(
            str(p['last_name']),
            '<input type="text" name="last_name" value="Lennon" id="id_last_name" required>'
        )
        self.assertHTMLEqual(
            str(p['birthday']),
            '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>'
        )

        msg = "Key 'nonexistentfield' not found in 'Person'. Choices are: birthday, first_name, last_name."
        with self.assertRaisesMessage(KeyError, msg):
            p['nonexistentfield']

        form_output = []

        for boundfield in p:
            form_output.append(str(boundfield))

        self.assertHTMLEqual(
            '\n'.join(form_output),
            """<input type="text" name="first_name" value="John" id="id_first_name" required>
<input type="text" name="last_name" value="Lennon" id="id_last_name" required>
<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>"""
        )

        form_output = []

        for boundfield in p:
            form_output.append([boundfield.label, boundfield.data])

        self.assertEqual(form_output, [
            ['First name', 'John'],
            ['Last name', 'Lennon'],
            ['Birthday', '1940-10-9']
        ])
        self.assertHTMLEqual(
            str(p),
            """<tr><th><label for="id_first_name">First name:</label></th><td>
<input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>
<tr><th><label for="id_last_name">Last name:</label></th><td>
<input type="text" name="last_name" value="Lennon" id="id_last_name" required></td></tr>
<tr><th><label for="id_birthday">Birthday:</label></th><td>
<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>"""
        )

    def test_empty_dict(self):
        # Empty dictionaries are valid, too.
        p = Person({})
        self.assertTrue(p.is_bound)
        self.assertEqual(p.errors['first_name'], ['This field is required.'])
        self.assertEqual(p.errors['last_name'], ['This field is required.'])
        self.assertEqual(p.errors['birthday'], ['This field is required.'])
        self.assertFalse(p.is_valid())
        self.assertEqual(p.cleaned_data, {})
        self.assertHTMLEqual(
            str(p),
            """<tr><th><label for="id_first_name">First name:</label></th><td>
<ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="first_name" id="id_first_name" required></td></tr>
<tr><th><label for="id_last_name">Last name:</label></th>
<td><ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="last_name" id="id_last_name" required></td></tr>
<tr><th><label for="id_birthday">Birthday:</label></th><td>
<ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="birthday" id="id_birthday" required></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><th><label for="id_first_name">First name:</label></th><td>
<ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="first_name" id="id_first_name" required></td></tr>
<tr><th><label for="id_last_name">Last name:</label></th>
<td><ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="last_name" id="id_last_name" required></td></tr>
<tr><th><label for="id_birthday">Birthday:</label></th>
<td><ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="birthday" id="id_birthday" required></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist"><li>This field is required.</li></ul>
<label for="id_first_name">First name:</label>
<input type="text" name="first_name" id="id_first_name" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
<label for="id_last_name">Last name:</label>
<input type="text" name="last_name" id="id_last_name" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
<label for="id_birthday">Birthday:</label>
<input type="text" name="birthday" id="id_birthday" required></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<ul class="errorlist"><li>This field is required.</li></ul>
<p><label for="id_first_name">First name:</label>
<input type="text" name="first_name" id="id_first_name" required></p>
<ul class="errorlist"><li>This field is required.</li></ul>
<p><label for="id_last_name">Last name:</label>
<input type="text" name="last_name" id="id_last_name" required></p>
<ul class="errorlist"><li>This field is required.</li></ul>
<p><label for="id_birthday">Birthday:</label>
<input type="text" name="birthday" id="id_birthday" required></p>"""
        )

    def test_empty_querydict_args(self):
        data = QueryDict()
        files = QueryDict()
        p = Person(data, files)
        self.assertIs(p.data, data)
        self.assertIs(p.files, files)

    def test_unbound_form(self):
        # If you don't pass any values to the Form's __init__(), or if you pass None,
        # the Form will be considered unbound and won't do any validation. Form.errors
        # will be an empty dictionary *but* Form.is_valid() will return False.
        p = Person()
        self.assertFalse(p.is_bound)
        self.assertEqual(p.errors, {})
        self.assertFalse(p.is_valid())
        with self.assertRaises(AttributeError):
            p.cleaned_data

        self.assertHTMLEqual(
            str(p),
            """<tr><th><label for="id_first_name">First name:</label></th><td>
<input type="text" name="first_name" id="id_first_name" required></td></tr>
<tr><th><label for="id_last_name">Last name:</label></th><td>
<input type="text" name="last_name" id="id_last_name" required></td></tr>
<tr><th><label for="id_birthday">Birthday:</label></th><td>
<input type="text" name="birthday" id="id_birthday" required></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><th><label for="id_first_name">First name:</label></th><td>
<input type="text" name="first_name" id="id_first_name" required></td></tr>
<tr><th><label for="id_last_name">Last name:</label></th><td>
<input type="text" name="last_name" id="id_last_name" required></td></tr>
<tr><th><label for="id_birthday">Birthday:</label></th><td>
<input type="text" name="birthday" id="id_birthday" required></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="id_first_name">First name:</label>
<input type="text" name="first_name" id="id_first_name" required></li>
<li><label for="id_last_name">Last name:</label>
<input type="text" name="last_name" id="id_last_name" required></li>
<li><label for="id_birthday">Birthday:</label>
<input type="text" name="birthday" id="id_birthday" required></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<p><label for="id_first_name">First name:</label>
<input type="text" name="first_name" id="id_first_name" required></p>
<p><label for="id_last_name">Last name:</label>
<input type="text" name="last_name" id="id_last_name" required></p>
<p><label for="id_birthday">Birthday:</label>
<input type="text" name="birthday" id="id_birthday" required></p>"""
        )

    def test_unicode_values(self):
        # Unicode values are handled properly.
        p = Person({
            'first_name': 'John',
            'last_name': '\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111',
            'birthday': '1940-10-9'
        })
        self.assertHTMLEqual(
            p.as_table(),
            '<tr><th><label for="id_first_name">First name:</label></th><td>'
            '<input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>\n'
            '<tr><th><label for="id_last_name">Last name:</label>'
            '</th><td><input type="text" name="last_name" '
            'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111"'
            'id="id_last_name" required></td></tr>\n'
            '<tr><th><label for="id_birthday">Birthday:</label></th><td>'
            '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>'
        )
        self.assertHTMLEqual(
            p.as_ul(),
            '<li><label for="id_first_name">First name:</label> '
            '<input type="text" name="first_name" value="John" id="id_first_name" required></li>\n'
            '<li><label for="id_last_name">Last name:</label> '
            '<input type="text" name="last_name" '
            'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></li>\n'
            '<li><label for="id_birthday">Birthday:</label> '
            '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></li>'
        )
        self.assertHTMLEqual(
            p.as_p(),
            '<p><label for="id_first_name">First name:</label> '
            '<input type="text" name="first_name" value="John" id="id_first_name" required></p>\n'
            '<p><label for="id_last_name">Last name:</label> '
            '<input type="text" name="last_name" '
            'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></p>\n'
            '<p><label for="id_birthday">Birthday:</label> '
            '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></p>'
        )

        p = Person({'last_name': 'Lennon'})
        self.assertEqual(p.errors['first_name'], ['This field is required.'])
        self.assertEqual(p.errors['birthday'], ['This field is required.'])
        self.assertFalse(p.is_valid())
        self.assertEqual(
            p.errors,
            {'birthday': ['This field is required.'], 'first_name': ['This field is required.']}
        )
        self.assertEqual(p.cleaned_data, {'last_name': 'Lennon'})
        self.assertEqual(p['first_name'].errors, ['This field is required.'])
        self.assertHTMLEqual(
            p['first_name'].errors.as_ul(),
            '<ul class="errorlist"><li>This field is required.</li></ul>'
        )
        self.assertEqual(p['first_name'].errors.as_text(), '* This field is required.')

        p = Person()
        self.assertHTMLEqual(
            str(p['first_name']),
            '<input type="text" name="first_name" id="id_first_name" required>',
        )
        self.assertHTMLEqual(str(p['last_name']), '<input type="text" name="last_name" id="id_last_name" required>')
        self.assertHTMLEqual(str(p['birthday']), '<input type="text" name="birthday" id="id_birthday" required>')

    def test_cleaned_data_only_fields(self):
        # cleaned_data will always *only* contain a key for fields defined in the
        # Form, even if you pass extra data when you define the Form. In this
        # example, we pass a bunch of extra fields to the form constructor,
        # but cleaned_data contains only the form's fields.
        data = {
            'first_name': 'John',
            'last_name': 'Lennon',
            'birthday': '1940-10-9',
            'extra1': 'hello',
            'extra2': 'hello',
        }
        p = Person(data)
        self.assertTrue(p.is_valid())
        self.assertEqual(p.cleaned_data['first_name'], 'John')
        self.assertEqual(p.cleaned_data['last_name'], 'Lennon')
        self.assertEqual(p.cleaned_data['birthday'], datetime.date(1940, 10, 9))

    def test_optional_data(self):
        # cleaned_data will include a key and value for *all* fields defined in the Form,
        # even if the Form's data didn't include a value for fields that are not
        # required. In this example, the data dictionary doesn't include a value for the
        # "nick_name" field, but cleaned_data includes it. For CharFields, it's set to the
        # empty string.
        class OptionalPersonForm(Form):
            first_name = CharField()
            last_name = CharField()
            nick_name = CharField(required=False)

        data = {'first_name': 'John', 'last_name': 'Lennon'}
        f = OptionalPersonForm(data)
        self.assertTrue(f.is_valid())
        self.assertEqual(f.cleaned_data['nick_name'], '')
        self.assertEqual(f.cleaned_data['first_name'], 'John')
        self.assertEqual(f.cleaned_data['last_name'], 'Lennon')

        # For DateFields, it's set to None.
        class OptionalPersonForm(Form):
            first_name = CharField()
            last_name = CharField()
            birth_date = DateField(required=False)

        data = {'first_name': 'John', 'last_name': 'Lennon'}
        f = OptionalPersonForm(data)
        self.assertTrue(f.is_valid())
        self.assertIsNone(f.cleaned_data['birth_date'])
        self.assertEqual(f.cleaned_data['first_name'], 'John')
        self.assertEqual(f.cleaned_data['last_name'], 'Lennon')

    def test_auto_id(self):
        # "auto_id" tells the Form to add an "id" attribute to each form element.
        # If it's a string that contains '%s', Django will use that as a format string
        # into which the field's name will be inserted. It will also put a <label> around
        # the human-readable labels for a field.
        p = Person(auto_id='%s_id')
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><th><label for="first_name_id">First name:</label></th><td>
<input type="text" name="first_name" id="first_name_id" required></td></tr>
<tr><th><label for="last_name_id">Last name:</label></th><td>
<input type="text" name="last_name" id="last_name_id" required></td></tr>
<tr><th><label for="birthday_id">Birthday:</label></th><td>
<input type="text" name="birthday" id="birthday_id" required></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="first_name_id">First name:</label>
<input type="text" name="first_name" id="first_name_id" required></li>
<li><label for="last_name_id">Last name:</label>
<input type="text" name="last_name" id="last_name_id" required></li>
<li><label for="birthday_id">Birthday:</label>
<input type="text" name="birthday" id="birthday_id" required></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<p><label for="first_name_id">First name:</label>
<input type="text" name="first_name" id="first_name_id" required></p>
<p><label for="last_name_id">Last name:</label>
<input type="text" name="last_name" id="last_name_id" required></p>
<p><label for="birthday_id">Birthday:</label>
<input type="text" name="birthday" id="birthday_id" required></p>"""
        )

    def test_auto_id_true(self):
        # If auto_id is any True value whose str() does not contain '%s', the "id"
        # attribute will be the name of the field.
        p = Person(auto_id=True)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="first_name">First name:</label>
<input type="text" name="first_name" id="first_name" required></li>
<li><label for="last_name">Last name:</label>
<input type="text" name="last_name" id="last_name" required></li>
<li><label for="birthday">Birthday:</label>
<input type="text" name="birthday" id="birthday" required></li>"""
        )

    def test_auto_id_false(self):
        # If auto_id is any False value, an "id" attribute won't be output unless it
        # was manually entered.
        p = Person(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>First name: <input type="text" name="first_name" required></li>
<li>Last name: <input type="text" name="last_name" required></li>
<li>Birthday: <input type="text" name="birthday" required></li>"""
        )

    def test_id_on_field(self):
        # In this example, auto_id is False, but the "id" attribute for the "first_name"
        # field is given. Also note that field gets a <label>, while the others don't.
        p = PersonNew(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="first_name_id">First name:</label>
<input type="text" id="first_name_id" name="first_name" required></li>
<li>Last name: <input type="text" name="last_name" required></li>
<li>Birthday: <input type="text" name="birthday" required></li>"""
        )

    def test_auto_id_on_form_and_field(self):
        # If the "id" attribute is specified in the Form and auto_id is True, the "id"
        # attribute in the Form gets precedence.
        p = PersonNew(auto_id=True)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="first_name_id">First name:</label>
<input type="text" id="first_name_id" name="first_name" required></li>
<li><label for="last_name">Last name:</label>
<input type="text" name="last_name" id="last_name" required></li>
<li><label for="birthday">Birthday:</label>
<input type="text" name="birthday" id="birthday" required></li>"""
        )

    def test_various_boolean_values(self):
        class SignupForm(Form):
            email = EmailField()
            get_spam = BooleanField()

        f = SignupForm(auto_id=False)
        self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" required>')
        self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')

        f = SignupForm({'email': 'test@example.com', 'get_spam': True}, auto_id=False)
        self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" value="test@example.com" required>')
        self.assertHTMLEqual(
            str(f['get_spam']),
            '<input checked type="checkbox" name="get_spam" required>',
        )

        # 'True' or 'true' should be rendered without a value attribute
        f = SignupForm({'email': 'test@example.com', 'get_spam': 'True'}, auto_id=False)
        self.assertHTMLEqual(
            str(f['get_spam']),
            '<input checked type="checkbox" name="get_spam" required>',
        )

        f = SignupForm({'email': 'test@example.com', 'get_spam': 'true'}, auto_id=False)
        self.assertHTMLEqual(
            str(f['get_spam']), '<input checked type="checkbox" name="get_spam" required>')

        # A value of 'False' or 'false' should be rendered unchecked
        f = SignupForm({'email': 'test@example.com', 'get_spam': 'False'}, auto_id=False)
        self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')

        f = SignupForm({'email': 'test@example.com', 'get_spam': 'false'}, auto_id=False)
        self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')

        # A value of '0' should be interpreted as a True value (#16820)
        f = SignupForm({'email': 'test@example.com', 'get_spam': '0'})
        self.assertTrue(f.is_valid())
        self.assertTrue(f.cleaned_data.get('get_spam'))

    def test_widget_output(self):
        # Any Field can have a Widget class passed to its constructor:
        class ContactForm(Form):
            subject = CharField()
            message = CharField(widget=Textarea)

        f = ContactForm(auto_id=False)
        self.assertHTMLEqual(str(f['subject']), '<input type="text" name="subject" required>')
        self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="10" cols="40" required></textarea>')

        # as_textarea(), as_text() and as_hidden() are shortcuts for changing the output
        # widget type:
        self.assertHTMLEqual(
            f['subject'].as_textarea(),
            '<textarea name="subject" rows="10" cols="40" required></textarea>',
        )
        self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
        self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message">')

        # The 'widget' parameter to a Field can also be an instance:
        class ContactForm(Form):
            subject = CharField()
            message = CharField(widget=Textarea(attrs={'rows': 80, 'cols': 20}))

        f = ContactForm(auto_id=False)
        self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="80" cols="20" required></textarea>')

        # Instance-level attrs are *not* carried over to as_textarea(), as_text() and
        # as_hidden():
        self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
        f = ContactForm({'subject': 'Hello', 'message': 'I love you.'}, auto_id=False)
        self.assertHTMLEqual(
            f['subject'].as_textarea(),
            '<textarea rows="10" cols="40" name="subject" required>Hello</textarea>'
        )
        self.assertHTMLEqual(
            f['message'].as_text(),
            '<input type="text" name="message" value="I love you." required>',
        )
        self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message" value="I love you.">')

    def test_forms_with_choices(self):
        # For a form with a <select>, use ChoiceField:
        class FrameworkForm(Form):
            name = CharField()
            language = ChoiceField(choices=[('P', 'Python'), ('J', 'Java')])

        f = FrameworkForm(auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select name="language">
<option value="P">Python</option>
<option value="J">Java</option>
</select>""")
        f = FrameworkForm({'name': 'Django', 'language': 'P'}, auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select name="language">
<option value="P" selected>Python</option>
<option value="J">Java</option>
</select>""")

        # A subtlety: If one of the choices' value is the empty string and the form is
        # unbound, then the <option> for the empty-string choice will get selected.
        class FrameworkForm(Form):
            name = CharField()
            language = ChoiceField(choices=[('', '------'), ('P', 'Python'), ('J', 'Java')])

        f = FrameworkForm(auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select name="language" required>
<option value="" selected>------</option>
<option value="P">Python</option>
<option value="J">Java</option>
</select>""")

        # You can specify widget attributes in the Widget constructor.
        class FrameworkForm(Form):
            name = CharField()
            language = ChoiceField(choices=[('P', 'Python'), ('J', 'Java')], widget=Select(attrs={'class': 'foo'}))

        f = FrameworkForm(auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select class="foo" name="language">
<option value="P">Python</option>
<option value="J">Java</option>
</select>""")
        f = FrameworkForm({'name': 'Django', 'language': 'P'}, auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select class="foo" name="language">
<option value="P" selected>Python</option>
<option value="J">Java</option>
</select>""")

        # When passing a custom widget instance to ChoiceField, note that setting
        # 'choices' on the widget is meaningless. The widget will use the choices
        # defined on the Field, not the ones defined on the Widget.
        class FrameworkForm(Form):
            name = CharField()
            language = ChoiceField(
                choices=[('P', 'Python'), ('J', 'Java')],
                widget=Select(choices=[('R', 'Ruby'), ('P', 'Perl')], attrs={'class': 'foo'}),
            )

        f = FrameworkForm(auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select class="foo" name="language">
<option value="P">Python</option>
<option value="J">Java</option>
</select>""")
        f = FrameworkForm({'name': 'Django', 'language': 'P'}, auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select class="foo" name="language">
<option value="P" selected>Python</option>
<option value="J">Java</option>
</select>""")

        # You can set a ChoiceField's choices after the fact.
        class FrameworkForm(Form):
            name = CharField()
            language = ChoiceField()

        f = FrameworkForm(auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<select name="language">
</select>""")
        f.fields['language'].choices = [('P', 'Python'), ('J', 'Java')]
        self.assertHTMLEqual(str(f['language']), """<select name="language">
<option value="P">Python</option>
<option value="J">Java</option>
</select>""")

    def test_forms_with_radio(self):
        # Add widget=RadioSelect to use that widget with a ChoiceField.
        class FrameworkForm(Form):
            name = CharField()
            language = ChoiceField(choices=[('P', 'Python'), ('J', 'Java')], widget=RadioSelect)

        f = FrameworkForm(auto_id=False)
        self.assertHTMLEqual(str(f['language']), """<ul>
<li><label><input type="radio" name="language" value="P" required> Python</label></li>
<li><label><input type="radio" name="language" value="J" required> Java</label></li>
</ul>""")
        self.assertHTMLEqual(f.as_table(), """<tr><th>Name:</th><td><input type="text" name="name" required></td></tr>
<tr><th>Language:</th><td><ul>
<li><label><input type="radio" name="language" value="P" required> Python</label></li>
<li><label><input type="radio" name="language" value="J" required> Java</label></li>
</ul></td></tr>""")
        self.assertHTMLEqual(f.as_ul(), """<li>Name: <input type="text" name="name" required></li>
<li>Language: <ul>
<li><label><input type="radio" name="language" value="P" required> Python</label></li>
<li><label><input type="radio" name="language" value="J" required> Java</label></li>
</ul></li>""")

        # Regarding auto_id and <label>, RadioSelect is a special case. Each radio button
        # gets a distinct ID, formed by appending an underscore plus the button's
        # zero-based index.
        f = FrameworkForm(auto_id='id_%s')
        self.assertHTMLEqual(
            str(f['language']),
            """<ul id="id_language">
<li><label for="id_language_0"><input type="radio" id="id_language_0" value="P" name="language" required>
Python</label></li>
<li><label for="id_language_1"><input type="radio" id="id_language_1" value="J" name="language" required>
Java</label></li>
</ul>"""
        )

        # When RadioSelect is used with auto_id, and the whole form is printed
        # using either as_table() or as_ul(), the label for the RadioSelect
        # will **not** point to the ID of the *first* radio button to improve
        # accessibility for screen reader users.
        self.assertHTMLEqual(
            f.as_table(),
            """<tr><th><label for="id_name">Name:</label></th><td><input type="text" name="name" id="id_name" required></td></tr>
<tr><th><label>Language:</label></th><td><ul id="id_language">
<li><label for="id_language_0"><input type="radio" id="id_language_0" value="P" name="language" required>
Python</label></li>
<li><label for="id_language_1"><input type="radio" id="id_language_1" value="J" name="language" required>
Java</label></li>
</ul></td></tr>"""
        )
        self.assertHTMLEqual(
            f.as_ul(),
            """<li><label for="id_name">Name:</label> <input type="text" name="name" id="id_name" required></li>
<li><label>Language:</label> <ul id="id_language">
<li><label for="id_language_0"><input type="radio" id="id_language_0" value="P" name="language" required>
Python</label></li>
<li><label for="id_language_1"><input type="radio" id="id_language_1" value="J" name="language" required>
Java</label></li>
</ul></li>"""
        )
        self.assertHTMLEqual(
            f.as_p(),
            """<p><label for="id_name">Name:</label> <input type="text" name="name" id="id_name" required></p>
<p><label>Language:</label> <ul id="id_language">
<li><label for="id_language_0"><input type="radio" id="id_language_0" value="P" name="language" required>
Python</label></li>
<li><label for="id_language_1"><input type="radio" id="id_language_1" value="J" name="language" required>
Java</label></li>
</ul></p>"""
        )

        # Test iterating on individual radios in a template
        t = Template('{% for radio in form.language %}<div class="myradio">{{ radio }}</div>{% endfor %}')
        self.assertHTMLEqual(
            t.render(Context({'form': f})),
            """<div class="myradio"><label for="id_language_0">
<input id="id_language_0" name="language" type="radio" value="P" required> Python</label></div>
<div class="myradio"><label for="id_language_1">
<input id="id_language_1" name="language" type="radio" value="J" required> Java</label></div>"""
        )

    def test_form_with_iterable_boundfield(self):
        class BeatleForm(Form):
            name = ChoiceField(
                choices=[('john', 'John'), ('paul', 'Paul'), ('george', 'George'), ('ringo', 'Ringo')],
                widget=RadioSelect,
            )

        f = BeatleForm(auto_id=False)
        self.assertHTMLEqual(
            '\n'.join(str(bf) for bf in f['name']),
            """<label><input type="radio" name="name" value="john" required> John</label>
<label><input type="radio" name="name" value="paul" required> Paul</label>
<label><input type="radio" name="name" value="george" required> George</label>
<label><input type="radio" name="name" value="ringo" required> Ringo</label>"""
        )
        self.assertHTMLEqual(
            '\n'.join('<div>%s</div>' % bf for bf in f['name']),
            """<div><label><input type="radio" name="name" value="john" required> John</label></div>
<div><label><input type="radio" name="name" value="paul" required> Paul</label></div>
<div><label><input type="radio" name="name" value="george" required> George</label></div>
<div><label><input type="radio" name="name" value="ringo" required> Ringo</label></div>"""
        )

    def test_form_with_iterable_boundfield_id(self):
        class BeatleForm(Form):
            name = ChoiceField(
                choices=[('john', 'John'), ('paul', 'Paul'), ('george', 'George'), ('ringo', 'Ringo')],
                widget=RadioSelect,
            )
        fields = list(BeatleForm()['name'])
        self.assertEqual(len(fields), 4)

        self.assertEqual(fields[0].id_for_label, 'id_name_0')
        self.assertEqual(fields[0].choice_label, 'John')
        self.assertHTMLEqual(
            fields[0].tag(),
            '<input type="radio" name="name" value="john" id="id_name_0" required>'
        )
        self.assertHTMLEqual(
            str(fields[0]),
            '<label for="id_name_0"><input type="radio" name="name" '
            'value="john" id="id_name_0" required> John</label>'
        )

        self.assertEqual(fields[1].id_for_label, 'id_name_1')
        self.assertEqual(fields[1].choice_label, 'Paul')
        self.assertHTMLEqual(
            fields[1].tag(),
            '<input type="radio" name="name" value="paul" id="id_name_1" required>'
        )
        self.assertHTMLEqual(
            str(fields[1]),
            '<label for="id_name_1"><input type="radio" name="name" '
            'value="paul" id="id_name_1" required> Paul</label>'
        )

    def test_iterable_boundfield_select(self):
        class BeatleForm(Form):
            name = ChoiceField(choices=[('john', 'John'), ('paul', 'Paul'), ('george', 'George'), ('ringo', 'Ringo')])
        fields = list(BeatleForm(auto_id=False)['name'])
        self.assertEqual(len(fields), 4)

        self.assertEqual(fields[0].id_for_label, 'id_name_0')
        self.assertEqual(fields[0].choice_label, 'John')
        self.assertHTMLEqual(fields[0].tag(), '<option value="john">John</option>')
        self.assertHTMLEqual(str(fields[0]), '<option value="john">John</option>')

    def test_form_with_noniterable_boundfield(self):
        # You can iterate over any BoundField, not just those with widget=RadioSelect.
        class BeatleForm(Form):
            name = CharField()

        f = BeatleForm(auto_id=False)
        self.assertHTMLEqual('\n'.join(str(bf) for bf in f['name']), '<input type="text" name="name" required>')

    def test_boundfield_slice(self):
        class BeatleForm(Form):
            name = ChoiceField(
                choices=[('john', 'John'), ('paul', 'Paul'), ('george', 'George'), ('ringo', 'Ringo')],
                widget=RadioSelect,
            )

        f = BeatleForm()
        bf = f['name']
        self.assertEqual(
            [str(item) for item in bf[1:]],
            [str(bf[1]), str(bf[2]), str(bf[3])],
        )

    def test_boundfield_invalid_index(self):
        class TestForm(Form):
            name = ChoiceField(choices=[])

        field = TestForm()['name']
        msg = 'BoundField indices must be integers or slices, not str.'
        with self.assertRaisesMessage(TypeError, msg):
            field['foo']

    def test_boundfield_bool(self):
        """BoundField without any choices (subwidgets) evaluates to True."""
        class TestForm(Form):
            name = ChoiceField(choices=[])

        self.assertIs(bool(TestForm()['name']), True)

    def test_forms_with_multiple_choice(self):
        # MultipleChoiceField is a special case, as its data is required to be a list:
        class SongForm(Form):
            name = CharField()
            composers = MultipleChoiceField()

        f = SongForm(auto_id=False)
        self.assertHTMLEqual(str(f['composers']), """<select multiple name="composers" required>
</select>""")

        class SongForm(Form):
            name = CharField()
            composers = MultipleChoiceField(choices=[('J', 'John Lennon'), ('P', 'Paul McCartney')])

        f = SongForm(auto_id=False)
        self.assertHTMLEqual(str(f['composers']), """<select multiple name="composers" required>
<option value="J">John Lennon</option>
<option value="P">Paul McCartney</option>
</select>""")
        f = SongForm({'name': 'Yesterday', 'composers': ['P']}, auto_id=False)
        self.assertHTMLEqual(str(f['name']), '<input type="text" name="name" value="Yesterday" required>')
        self.assertHTMLEqual(str(f['composers']), """<select multiple name="composers" required>
<option value="J">John Lennon</option>
<option value="P" selected>Paul McCartney</option>
</select>""")

    def test_form_with_disabled_fields(self):
        class PersonForm(Form):
            name = CharField()
            birthday = DateField(disabled=True)

        class PersonFormFieldInitial(Form):
            name = CharField()
            birthday = DateField(disabled=True, initial=datetime.date(1974, 8, 16))

        # Disabled fields are generally not transmitted by user agents.
        # The value from the form's initial data is used.
        f1 = PersonForm({'name': 'John Doe'}, initial={'birthday': datetime.date(1974, 8, 16)})
        f2 = PersonFormFieldInitial({'name': 'John Doe'})
        for form in (f1, f2):
            self.assertTrue(form.is_valid())
            self.assertEqual(
                form.cleaned_data,
                {'birthday': datetime.date(1974, 8, 16), 'name': 'John Doe'}
            )

        # Values provided in the form's data are ignored.
        data = {'name': 'John Doe', 'birthday': '1984-11-10'}
        f1 = PersonForm(data, initial={'birthday': datetime.date(1974, 8, 16)})
        f2 = PersonFormFieldInitial(data)
        for form in (f1, f2):
            self.assertTrue(form.is_valid())
            self.assertEqual(
                form.cleaned_data,
                {'birthday': datetime.date(1974, 8, 16), 'name': 'John Doe'}
            )

        # Initial data remains present on invalid forms.
        data = {}
        f1 = PersonForm(data, initial={'birthday': datetime.date(1974, 8, 16)})
        f2 = PersonFormFieldInitial(data)
        for form in (f1, f2):
            self.assertFalse(form.is_valid())
            self.assertEqual(form['birthday'].value(), datetime.date(1974, 8, 16))

    def test_hidden_data(self):
        class SongForm(Form):
            name = CharField()
            composers = MultipleChoiceField(choices=[('J', 'John Lennon'), ('P', 'Paul McCartney')])

        # MultipleChoiceField rendered as_hidden() is a special case. Because it can
        # have multiple values, its as_hidden() renders multiple <input type="hidden">
        # tags.
        f = SongForm({'name': 'Yesterday', 'composers': ['P']}, auto_id=False)
        self.assertHTMLEqual(f['composers'].as_hidden(), '<input type="hidden" name="composers" value="P">')
        f = SongForm({'name': 'From Me To You', 'composers': ['P', 'J']}, auto_id=False)
        self.assertHTMLEqual(f['composers'].as_hidden(), """<input type="hidden" name="composers" value="P">
<input type="hidden" name="composers" value="J">""")

        # DateTimeField rendered as_hidden() is special too
        class MessageForm(Form):
            when = SplitDateTimeField()

        f = MessageForm({'when_0': '1992-01-01', 'when_1': '01:01'})
        self.assertTrue(f.is_valid())
        self.assertHTMLEqual(
            str(f['when']),
            '<input type="text" name="when_0" value="1992-01-01" id="id_when_0" required>'
            '<input type="text" name="when_1" value="01:01" id="id_when_1" required>'
        )
        self.assertHTMLEqual(
            f['when'].as_hidden(),
            '<input type="hidden" name="when_0" value="1992-01-01" id="id_when_0">'
            '<input type="hidden" name="when_1" value="01:01" id="id_when_1">'
        )

    def test_multiple_choice_checkbox(self):
        # MultipleChoiceField can also be used with the CheckboxSelectMultiple widget.
        class SongForm(Form):
            name = CharField()
            composers = MultipleChoiceField(
                choices=[('J', 'John Lennon'), ('P', 'Paul McCartney')],
                widget=CheckboxSelectMultiple,
            )

        f = SongForm(auto_id=False)
        self.assertHTMLEqual(str(f['composers']), """<ul>
<li><label><input type="checkbox" name="composers" value="J"> John Lennon</label></li>
<li><label><input type="checkbox" name="composers" value="P"> Paul McCartney</label></li>
</ul>""")
        f = SongForm({'composers': ['J']}, auto_id=False)
        self.assertHTMLEqual(str(f['composers']), """<ul>
<li><label><input checked type="checkbox" name="composers" value="J"> John Lennon</label></li>
<li><label><input type="checkbox" name="composers" value="P"> Paul McCartney</label></li>
</ul>""")
        f = SongForm({'composers': ['J', 'P']}, auto_id=False)
        self.assertHTMLEqual(str(f['composers']), """<ul>
<li><label><input checked type="checkbox" name="composers" value="J"> John Lennon</label></li>
<li><label><input checked type="checkbox" name="composers" value="P"> Paul McCartney</label></li>
</ul>""")
        # Test iterating on individual checkboxes in a template
        t = Template('{% for checkbox in form.composers %}<div class="mycheckbox">{{ checkbox }}</div>{% endfor %}')
        self.assertHTMLEqual(t.render(Context({'form': f})), """<div class="mycheckbox"><label>
<input checked name="composers" type="checkbox" value="J"> John Lennon</label></div>
<div class="mycheckbox"><label>
<input checked name="composers" type="checkbox" value="P"> Paul McCartney</label></div>""")

    def test_checkbox_auto_id(self):
        # Regarding auto_id, CheckboxSelectMultiple is a special case. Each checkbox
        # gets a distinct ID, formed by appending an underscore plus the checkbox's
        # zero-based index.
        class SongForm(Form):
            name = CharField()
            composers = MultipleChoiceField(
                choices=[('J', 'John Lennon'), ('P', 'Paul McCartney')],
                widget=CheckboxSelectMultiple,
            )

        f = SongForm(auto_id='%s_id')
        self.assertHTMLEqual(
            str(f['composers']),
            """<ul id="composers_id">
<li><label for="composers_id_0">
<input type="checkbox" name="composers" value="J" id="composers_id_0"> John Lennon</label></li>
<li><label for="composers_id_1">
<input type="checkbox" name="composers" value="P" id="composers_id_1"> Paul McCartney</label></li>
</ul>"""
        )

    def test_multiple_choice_list_data(self):
        # Data for a MultipleChoiceField should be a list. QueryDict and
        # MultiValueDict conveniently work with this.
        class SongForm(Form):
            name = CharField()
            composers = MultipleChoiceField(
                choices=[('J', 'John Lennon'), ('P', 'Paul McCartney')],
                widget=CheckboxSelectMultiple,
            )

        data = {'name': 'Yesterday', 'composers': ['J', 'P']}
        f = SongForm(data)
        self.assertEqual(f.errors, {})

        data = QueryDict('name=Yesterday&composers=J&composers=P')
        f = SongForm(data)
        self.assertEqual(f.errors, {})

        data = MultiValueDict({'name': ['Yesterday'], 'composers': ['J', 'P']})
        f = SongForm(data)
        self.assertEqual(f.errors, {})

        # SelectMultiple uses ducktyping so that MultiValueDictLike.getlist()
        # is called.
        f = SongForm(MultiValueDictLike({'name': 'Yesterday', 'composers': 'J'}))
        self.assertEqual(f.errors, {})
        self.assertEqual(f.cleaned_data['composers'], ['J'])

    def test_multiple_hidden(self):
        class SongForm(Form):
            name = CharField()
            composers = MultipleChoiceField(
                choices=[('J', 'John Lennon'), ('P', 'Paul McCartney')],
                widget=CheckboxSelectMultiple,
            )

        # The MultipleHiddenInput widget renders multiple values as hidden fields.
        class SongFormHidden(Form):
            name = CharField()
            composers = MultipleChoiceField(
                choices=[('J', 'John Lennon'), ('P', 'Paul McCartney')],
                widget=MultipleHiddenInput,
            )

        f = SongFormHidden(MultiValueDict({'name': ['Yesterday'], 'composers': ['J', 'P']}), auto_id=False)
        self.assertHTMLEqual(
            f.as_ul(),
            """<li>Name: <input type="text" name="name" value="Yesterday" required>
<input type="hidden" name="composers" value="J">
<input type="hidden" name="composers" value="P"></li>"""
        )

        # When using CheckboxSelectMultiple, the framework expects a list of input and
        # returns a list of input.
        f = SongForm({'name': 'Yesterday'}, auto_id=False)
        self.assertEqual(f.errors['composers'], ['This field is required.'])
        f = SongForm({'name': 'Yesterday', 'composers': ['J']}, auto_id=False)
        self.assertEqual(f.errors, {})
        self.assertEqual(f.cleaned_data['composers'], ['J'])
        self.assertEqual(f.cleaned_data['name'], 'Yesterday')
        f = SongForm({'name': 'Yesterday', 'composers': ['J', 'P']}, auto_id=False)
        self.assertEqual(f.errors, {})
        self.assertEqual(f.cleaned_data['composers'], ['J', 'P'])
        self.assertEqual(f.cleaned_data['name'], 'Yesterday')

        # MultipleHiddenInput uses ducktyping so that
        # MultiValueDictLike.getlist() is called.
        f = SongForm(MultiValueDictLike({'name': 'Yesterday', 'composers': 'J'}))
        self.assertEqual(f.errors, {})
        self.assertEqual(f.cleaned_data['composers'], ['J'])

    def test_escaping(self):
        # Validation errors are HTML-escaped when output as HTML.
        class EscapingForm(Form):
            special_name = CharField(label="<em>Special</em> Field")
            special_safe_name = CharField(label=mark_safe("<em>Special</em> Field"))

            def clean_special_name(self):
                raise ValidationError("Something's wrong with '%s'" % self.cleaned_data['special_name'])

            def clean_special_safe_name(self):
                raise ValidationError(
                    mark_safe("'<b>%s</b>' is a safe string" % self.cleaned_data['special_safe_name'])
                )

        f = EscapingForm({
            'special_name':
            "Nothing to escape",
            'special_safe_name': "Nothing to escape",
        }, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            """<tr><th>&lt;em&gt;Special&lt;/em&gt; Field:</th><td>
<ul class="errorlist"><li>Something&#x27;s wrong with &#x27;Nothing to escape&#x27;</li></ul>
<input type="text" name="special_name" value="Nothing to escape" required></td></tr>
<tr><th><em>Special</em> Field:</th><td>
<ul class="errorlist"><li>'<b>Nothing to escape</b>' is a safe string</li></ul>
<input type="text" name="special_safe_name" value="Nothing to escape" required></td></tr>"""
        )
        f = EscapingForm({
            'special_name': "Should escape < & > and <script>alert('xss')</script>",
            'special_safe_name': "<i>Do not escape</i>"
        }, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            """<tr><th>&lt;em&gt;Special&lt;/em&gt; Field:</th><td>
<ul class="errorlist"><li>Something&#x27;s wrong with &#x27;Should escape &lt; &amp; &gt; and
&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&#x27;</li></ul>
<input type="text" name="special_name"
value="Should escape &lt; &amp; &gt; and &lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;" required></td></tr>
<tr><th><em>Special</em> Field:</th><td>
<ul class="errorlist"><li>'<b><i>Do not escape</i></b>' is a safe string</li></ul>
<input type="text" name="special_safe_name" value="&lt;i&gt;Do not escape&lt;/i&gt;" required></td></tr>"""
        )

    def test_validating_multiple_fields(self):
        # There are a couple of ways to do multiple-field validation. If you want the
        # validation message to be associated with a particular field, implement the
        # clean_XXX() method on the Form, where XXX is the field name. As in
        # Field.clean(), the clean_XXX() method should return the cleaned value. In the
        # clean_XXX() method, you have access to self.cleaned_data, which is a dictionary
        # of all the data that has been cleaned *so far*, in order by the fields,
        # including the current field (e.g., the field XXX if you're in clean_XXX()).
        class UserRegistration(Form):
            username = CharField(max_length=10)
            password1 = CharField(widget=PasswordInput)
            password2 = CharField(widget=PasswordInput)

            def clean_password2(self):
                if (self.cleaned_data.get('password1') and self.cleaned_data.get('password2') and
                        self.cleaned_data['password1'] != self.cleaned_data['password2']):
                    raise ValidationError('Please make sure your passwords match.')

                return self.cleaned_data['password2']

        f = UserRegistration(auto_id=False)
        self.assertEqual(f.errors, {})
        f = UserRegistration({}, auto_id=False)
        self.assertEqual(f.errors['username'], ['This field is required.'])
        self.assertEqual(f.errors['password1'], ['This field is required.'])
        self.assertEqual(f.errors['password2'], ['This field is required.'])
        f = UserRegistration({'username': 'adrian', 'password1': 'foo', 'password2': 'bar'}, auto_id=False)
        self.assertEqual(f.errors['password2'], ['Please make sure your passwords match.'])
        f = UserRegistration({'username': 'adrian', 'password1': 'foo', 'password2': 'foo'}, auto_id=False)
        self.assertEqual(f.errors, {})
        self.assertEqual(f.cleaned_data['username'], 'adrian')
        self.assertEqual(f.cleaned_data['password1'], 'foo')
        self.assertEqual(f.cleaned_data['password2'], 'foo')

        # Another way of doing multiple-field validation is by implementing the
        # Form's clean() method. Usually ValidationError raised by that method
        # will not be associated with a particular field and will have a
        # special-case association with the field named '__all__'. It's
        # possible to associate the errors to particular field with the
        # Form.add_error() method or by passing a dictionary that maps each
        # field to one or more errors.
        #
        # Note that in Form.clean(), you have access to self.cleaned_data, a
        # dictionary of all the fields/values that have *not* raised a
        # ValidationError. Also note Form.clean() is required to return a
        # dictionary of all clean data.
        class UserRegistration(Form):
            username = CharField(max_length=10)
            password1 = CharField(widget=PasswordInput)
            password2 = CharField(widget=PasswordInput)

            def clean(self):
                # Test raising a ValidationError as NON_FIELD_ERRORS.
                if (self.cleaned_data.get('password1') and self.cleaned_data.get('password2') and
                        self.cleaned_data['password1'] != self.cleaned_data['password2']):
                    raise ValidationError('Please make sure your passwords match.')

                # Test raising ValidationError that targets multiple fields.
                errors = {}
                if self.cleaned_data.get('password1') == 'FORBIDDEN_VALUE':
                    errors['password1'] = 'Forbidden value.'
                if self.cleaned_data.get('password2') == 'FORBIDDEN_VALUE':
                    errors['password2'] = ['Forbidden value.']
                if errors:
                    raise ValidationError(errors)

                # Test Form.add_error()
                if self.cleaned_data.get('password1') == 'FORBIDDEN_VALUE2':
                    self.add_error(None, 'Non-field error 1.')
                    self.add_error('password1', 'Forbidden value 2.')
                if self.cleaned_data.get('password2') == 'FORBIDDEN_VALUE2':
                    self.add_error('password2', 'Forbidden value 2.')
                    raise ValidationError('Non-field error 2.')

                return self.cleaned_data

        f = UserRegistration(auto_id=False)
        self.assertEqual(f.errors, {})

        f = UserRegistration({}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            """<tr><th>Username:</th><td>
<ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="username" maxlength="10" required></td></tr>
<tr><th>Password1:</th><td><ul class="errorlist"><li>This field is required.</li></ul>
<input type="password" name="password1" required></td></tr>
<tr><th>Password2:</th><td><ul class="errorlist"><li>This field is required.</li></ul>
<input type="password" name="password2" required></td></tr>"""
        )
        self.assertEqual(f.errors['username'], ['This field is required.'])
        self.assertEqual(f.errors['password1'], ['This field is required.'])
        self.assertEqual(f.errors['password2'], ['This field is required.'])

        f = UserRegistration({'username': 'adrian', 'password1': 'foo', 'password2': 'bar'}, auto_id=False)
        self.assertEqual(f.errors['__all__'], ['Please make sure your passwords match.'])
        self.assertHTMLEqual(
            f.as_table(),
            """<tr><td colspan="2">
<ul class="errorlist nonfield"><li>Please make sure your passwords match.</li></ul></td></tr>
<tr><th>Username:</th><td><input type="text" name="username" value="adrian" maxlength="10" required></td></tr>
<tr><th>Password1:</th><td><input type="password" name="password1" required></td></tr>
<tr><th>Password2:</th><td><input type="password" name="password2" required></td></tr>"""
        )
        self.assertHTMLEqual(
            f.as_ul(),
            """<li><ul class="errorlist nonfield">
<li>Please make sure your passwords match.</li></ul></li>
<li>Username: <input type="text" name="username" value="adrian" maxlength="10" required></li>
<li>Password1: <input type="password" name="password1" required></li>
<li>Password2: <input type="password" name="password2" required></li>"""
        )

        f = UserRegistration({'username': 'adrian', 'password1': 'foo', 'password2': 'foo'}, auto_id=False)
        self.assertEqual(f.errors, {})
        self.assertEqual(f.cleaned_data['username'], 'adrian')
        self.assertEqual(f.cleaned_data['password1'], 'foo')
        self.assertEqual(f.cleaned_data['password2'], 'foo')

        f = UserRegistration({
            'username': 'adrian',
            'password1': 'FORBIDDEN_VALUE',
            'password2': 'FORBIDDEN_VALUE',
        }, auto_id=False)
        self.assertEqual(f.errors['password1'], ['Forbidden value.'])
        self.assertEqual(f.errors['password2'], ['Forbidden value.'])

        f = UserRegistration({
            'username': 'adrian',
            'password1': 'FORBIDDEN_VALUE2',
            'password2': 'FORBIDDEN_VALUE2',
        }, auto_id=False)
        self.assertEqual(f.errors['__all__'], ['Non-field error 1.', 'Non-field error 2.'])
        self.assertEqual(f.errors['password1'], ['Forbidden value 2.'])
        self.assertEqual(f.errors['password2'], ['Forbidden value 2.'])

        with self.assertRaisesMessage(ValueError, "has no field named"):
            f.add_error('missing_field', 'Some error.')

    def test_update_error_dict(self):
        class CodeForm(Form):
            code = CharField(max_length=10)

            def clean(self):
                try:
                    raise ValidationError({'code': [ValidationError('Code error 1.')]})
                except ValidationError as e:
                    self._errors = e.update_error_dict(self._errors)

                try:
                    raise ValidationError({'code': [ValidationError('Code error 2.')]})
                except ValidationError as e:
                    self._errors = e.update_error_dict(self._errors)

                try:
                    raise ValidationError({'code': forms.ErrorList(['Code error 3.'])})
                except ValidationError as e:
                    self._errors = e.update_error_dict(self._errors)

                try:
                    raise ValidationError('Non-field error 1.')
                except ValidationError as e:
                    self._errors = e.update_error_dict(self._errors)

                try:
                    raise ValidationError([ValidationError('Non-field error 2.')])
                except ValidationError as e:
                    self._errors = e.update_error_dict(self._errors)

                # The newly added list of errors is an instance of ErrorList.
                for field, error_list in self._errors.items():
                    if not isinstance(error_list, self.error_class):
                        self._errors[field] = self.error_class(error_list)

        form = CodeForm({'code': 'hello'})
        # Trigger validation.
        self.assertFalse(form.is_valid())

        # update_error_dict didn't lose track of the ErrorDict type.
        self.assertIsInstance(form._errors, forms.ErrorDict)

        self.assertEqual(dict(form.errors), {
            'code': ['Code error 1.', 'Code error 2.', 'Code error 3.'],
            NON_FIELD_ERRORS: ['Non-field error 1.', 'Non-field error 2.'],
        })

    def test_has_error(self):
        class UserRegistration(Form):
            username = CharField(max_length=10)
            password1 = CharField(widget=PasswordInput, min_length=5)
            password2 = CharField(widget=PasswordInput)

            def clean(self):
                if (self.cleaned_data.get('password1') and self.cleaned_data.get('password2') and
                        self.cleaned_data['password1'] != self.cleaned_data['password2']):
                    raise ValidationError(
                        'Please make sure your passwords match.',
                        code='password_mismatch',
                    )

        f = UserRegistration(data={})
        self.assertTrue(f.has_error('password1'))
        self.assertTrue(f.has_error('password1', 'required'))
        self.assertFalse(f.has_error('password1', 'anything'))

        f = UserRegistration(data={'password1': 'Hi', 'password2': 'Hi'})
        self.assertTrue(f.has_error('password1'))
        self.assertTrue(f.has_error('password1', 'min_length'))
        self.assertFalse(f.has_error('password1', 'anything'))
        self.assertFalse(f.has_error('password2'))
        self.assertFalse(f.has_error('password2', 'anything'))

        f = UserRegistration(data={'password1': 'Bonjour', 'password2': 'Hello'})
        self.assertFalse(f.has_error('password1'))
        self.assertFalse(f.has_error('password1', 'required'))
        self.assertTrue(f.has_error(NON_FIELD_ERRORS))
        self.assertTrue(f.has_error(NON_FIELD_ERRORS, 'password_mismatch'))
        self.assertFalse(f.has_error(NON_FIELD_ERRORS, 'anything'))

    def test_html_output_with_hidden_input_field_errors(self):
        class TestForm(Form):
            hidden_input = CharField(widget=HiddenInput)

            def clean(self):
                self.add_error(None, 'Form error')

        f = TestForm(data={})
        error_dict = {
            'hidden_input': ['This field is required.'],
            '__all__': ['Form error'],
        }
        self.assertEqual(f.errors, error_dict)
        f.as_table()
        self.assertEqual(f.errors, error_dict)

    def test_dynamic_construction(self):
        # It's possible to construct a Form dynamically by adding to the self.fields
        # dictionary in __init__(). Don't forget to call Form.__init__() within the
        # subclass' __init__().
        class Person(Form):
            first_name = CharField()
            last_name = CharField()

            def __init__(self, *args, **kwargs):
                super().__init__(*args, **kwargs)
                self.fields['birthday'] = DateField()

        p = Person(auto_id=False)
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><th>First name:</th><td><input type="text" name="first_name" required></td></tr>
<tr><th>Last name:</th><td><input type="text" name="last_name" required></td></tr>
<tr><th>Birthday:</th><td><input type="text" name="birthday" required></td></tr>"""
        )

        # Instances of a dynamic Form do not persist fields from one Form instance to
        # the next.
        class MyForm(Form):
            def __init__(self, data=None, auto_id=False, field_list=[]):
                Form.__init__(self, data, auto_id=auto_id)

                for field in field_list:
                    self.fields[field[0]] = field[1]

        field_list = [('field1', CharField()), ('field2', CharField())]
        my_form = MyForm(field_list=field_list)
        self.assertHTMLEqual(
            my_form.as_table(),
            """<tr><th>Field1:</th><td><input type="text" name="field1" required></td></tr>
<tr><th>Field2:</th><td><input type="text" name="field2" required></td></tr>"""
        )
        field_list = [('field3', CharField()), ('field4', CharField())]
        my_form = MyForm(field_list=field_list)
        self.assertHTMLEqual(
            my_form.as_table(),
            """<tr><th>Field3:</th><td><input type="text" name="field3" required></td></tr>
<tr><th>Field4:</th><td><input type="text" name="field4" required></td></tr>"""
        )

        class MyForm(Form):
            default_field_1 = CharField()
            default_field_2 = CharField()

            def __init__(self, data=None, auto_id=False, field_list=[]):
                Form.__init__(self, data, auto_id=auto_id)

                for field in field_list:
                    self.fields[field[0]] = field[1]

        field_list = [('field1', CharField()), ('field2', CharField())]
        my_form = MyForm(field_list=field_list)
        self.assertHTMLEqual(
            my_form.as_table(),
            """<tr><th>Default field 1:</th><td><input type="text" name="default_field_1" required></td></tr>
<tr><th>Default field 2:</th><td><input type="text" name="default_field_2" required></td></tr>
<tr><th>Field1:</th><td><input type="text" name="field1" required></td></tr>
<tr><th>Field2:</th><td><input type="text" name="field2" required></td></tr>"""
        )
        field_list = [('field3', CharField()), ('field4', CharField())]
        my_form = MyForm(field_list=field_list)
        self.assertHTMLEqual(
            my_form.as_table(),
            """<tr><th>Default field 1:</th><td><input type="text" name="default_field_1" required></td></tr>
<tr><th>Default field 2:</th><td><input type="text" name="default_field_2" required></td></tr>
<tr><th>Field3:</th><td><input type="text" name="field3" required></td></tr>
<tr><th>Field4:</th><td><input type="text" name="field4" required></td></tr>"""
        )

        # Similarly, changes to field attributes do not persist from one Form instance
        # to the next.
        class Person(Form):
            first_name = CharField(required=False)
            last_name = CharField(required=False)

            def __init__(self, names_required=False, *args, **kwargs):
                super().__init__(*args, **kwargs)

                if names_required:
                    self.fields['first_name'].required = True
                    self.fields['first_name'].widget.attrs['class'] = 'required'
                    self.fields['last_name'].required = True
                    self.fields['last_name'].widget.attrs['class'] = 'required'

        f = Person(names_required=False)
        self.assertEqual(f['first_name'].field.required, f['last_name'].field.required, (False, False))
        self.assertEqual(f['first_name'].field.widget.attrs, f['last_name'].field.widget.attrs, ({}, {}))
        f = Person(names_required=True)
        self.assertEqual(f['first_name'].field.required, f['last_name'].field.required, (True, True))
        self.assertEqual(
            f['first_name'].field.widget.attrs,
            f['last_name'].field.widget.attrs,
            ({'class': 'reuired'}, {'class': 'required'})
        )
        f = Person(names_required=False)
        self.assertEqual(f['first_name'].field.required, f['last_name'].field.required, (False, False))
        self.assertEqual(f['first_name'].field.widget.attrs, f['last_name'].field.widget.attrs, ({}, {}))

        class Person(Form):
            first_name = CharField(max_length=30)
            last_name = CharField(max_length=30)

            def __init__(self, name_max_length=None, *args, **kwargs):
                super().__init__(*args, **kwargs)

                if name_max_length:
                    self.fields['first_name'].max_length = name_max_length
                    self.fields['last_name'].max_length = name_max_length

        f = Person(name_max_length=None)
        self.assertEqual(f['first_name'].field.max_length, f['last_name'].field.max_length, (30, 30))
        f = Person(name_max_length=20)
        self.assertEqual(f['first_name'].field.max_length, f['last_name'].field.max_length, (20, 20))
        f = Person(name_max_length=None)
        self.assertEqual(f['first_name'].field.max_length, f['last_name'].field.max_length, (30, 30))

        # Similarly, choices do not persist from one Form instance to the next.
        # Refs #15127.
        class Person(Form):
            first_name = CharField(required=False)
            last_name = CharField(required=False)
            gender = ChoiceField(choices=(('f', 'Female'), ('m', 'Male')))

            def __init__(self, allow_unspec_gender=False, *args, **kwargs):
                super().__init__(*args, **kwargs)

                if allow_unspec_gender:
                    self.fields['gender'].choices += (('u', 'Unspecified'),)

        f = Person()
        self.assertEqual(f['gender'].field.choices, [('f', 'Female'), ('m', 'Male')])
        f = Person(allow_unspec_gender=True)
        self.assertEqual(f['gender'].field.choices, [('f', 'Female'), ('m', 'Male'), ('u', 'Unspecified')])
        f = Person()
        self.assertEqual(f['gender'].field.choices, [('f', 'Female'), ('m', 'Male')])

    def test_validators_independence(self):
        """
        The list of form field validators can be modified without polluting
        other forms.
        """
        class MyForm(Form):
            myfield = CharField(max_length=25)

        f1 = MyForm()
        f2 = MyForm()

        f1.fields['myfield'].validators[0] = MaxValueValidator(12)
        self.assertNotEqual(f1.fields['myfield'].validators[0], f2.fields['myfield'].validators[0])

    def test_hidden_widget(self):
        # HiddenInput widgets are displayed differently in the as_table(), as_ul())
        # and as_p() output of a Form -- their verbose names are not displayed, and a
        # separate row is not displayed. They're displayed in the last row of the
        # form, directly after that row's form element.
        class Person(Form):
            first_name = CharField()
            last_name = CharField()
            hidden_text = CharField(widget=HiddenInput)
            birthday = DateField()

        p = Person(auto_id=False)
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><th>First name:</th><td><input type="text" name="first_name" required></td></tr>
<tr><th>Last name:</th><td><input type="text" name="last_name" required></td></tr>
<tr><th>Birthday:</th>
<td><input type="text" name="birthday" required><input type="hidden" name="hidden_text"></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>First name: <input type="text" name="first_name" required></li>
<li>Last name: <input type="text" name="last_name" required></li>
<li>Birthday: <input type="text" name="birthday" required><input type="hidden" name="hidden_text"></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(), """<p>First name: <input type="text" name="first_name" required></p>
<p>Last name: <input type="text" name="last_name" required></p>
<p>Birthday: <input type="text" name="birthday" required><input type="hidden" name="hidden_text"></p>"""
        )

        # With auto_id set, a HiddenInput still gets an ID, but it doesn't get a label.
        p = Person(auto_id='id_%s')
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><th><label for="id_first_name">First name:</label></th><td>
<input type="text" name="first_name" id="id_first_name" required></td></tr>
<tr><th><label for="id_last_name">Last name:</label></th><td>
<input type="text" name="last_name" id="id_last_name" required></td></tr>
<tr><th><label for="id_birthday">Birthday:</label></th><td>
<input type="text" name="birthday" id="id_birthday" required>
<input type="hidden" name="hidden_text" id="id_hidden_text"></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="id_first_name">First name:</label>
<input type="text" name="first_name" id="id_first_name" required></li>
<li><label for="id_last_name">Last name:</label>
<input type="text" name="last_name" id="id_last_name" required></li>
<li><label for="id_birthday">Birthday:</label>
<input type="text" name="birthday" id="id_birthday" required>
<input type="hidden" name="hidden_text" id="id_hidden_text"></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<p><label for="id_first_name">First name:</label>
<input type="text" name="first_name" id="id_first_name" required></p>
<p><label for="id_last_name">Last name:</label>
<input type="text" name="last_name" id="id_last_name" required></p>
<p><label for="id_birthday">Birthday:</label>
<input type="text" name="birthday" id="id_birthday" required>
<input type="hidden" name="hidden_text" id="id_hidden_text"></p>"""
        )

        # If a field with a HiddenInput has errors, the as_table() and as_ul() output
        # will include the error message(s) with the text "(Hidden field [fieldname]) "
        # prepended. This message is displayed at the top of the output, regardless of
        # its field's order in the form.
        p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': '1940-10-9'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><td colspan="2">
<ul class="errorlist nonfield"><li>(Hidden field hidden_text) This field is required.</li></ul></td></tr>
<tr><th>First name:</th><td><input type="text" name="first_name" value="John" required></td></tr>
<tr><th>Last name:</th><td><input type="text" name="last_name" value="Lennon" required></td></tr>
<tr><th>Birthday:</th><td><input type="text" name="birthday" value="1940-10-9" required>
<input type="hidden" name="hidden_text"></td></tr>"""
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist nonfield"><li>(Hidden field hidden_text) This field is required.</li></ul></li>
<li>First name: <input type="text" name="first_name" value="John" required></li>
<li>Last name: <input type="text" name="last_name" value="Lennon" required></li>
<li>Birthday: <input type="text" name="birthday" value="1940-10-9" required>
<input type="hidden" name="hidden_text"></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<ul class="errorlist nonfield"><li>(Hidden field hidden_text) This field is required.</li></ul>
<p>First name: <input type="text" name="first_name" value="John" required></p>
<p>Last name: <input type="text" name="last_name" value="Lennon" required></p>
<p>Birthday: <input type="text" name="birthday" value="1940-10-9" required>
<input type="hidden" name="hidden_text"></p>"""
        )

        # A corner case: It's possible for a form to have only HiddenInputs.
        class TestForm(Form):
            foo = CharField(widget=HiddenInput)
            bar = CharField(widget=HiddenInput)

        p = TestForm(auto_id=False)
        self.assertHTMLEqual(p.as_table(), '<input type="hidden" name="foo"><input type="hidden" name="bar">')
        self.assertHTMLEqual(p.as_ul(), '<input type="hidden" name="foo"><input type="hidden" name="bar">')
        self.assertHTMLEqual(p.as_p(), '<input type="hidden" name="foo"><input type="hidden" name="bar">')

    def test_field_order(self):
        # A Form's fields are displayed in the same order in which they were defined.
        class TestForm(Form):
            field1 = CharField()
            field2 = CharField()
            field3 = CharField()
            field4 = CharField()
            field5 = CharField()
            field6 = CharField()
            field7 = CharField()
            field8 = CharField()
            field9 = CharField()
            field10 = CharField()
            field11 = CharField()
            field12 = CharField()
            field13 = CharField()
            field14 = CharField()

        p = TestForm(auto_id=False)
        self.assertHTMLEqual(p.as_table(), """<tr><th>Field1:</th><td><input type="text" name="field1" required></td></tr>
<tr><th>Field2:</th><td><input type="text" name="field2" required></td></tr>
<tr><th>Field3:</th><td><input type="text" name="field3" required></td></tr>
<tr><th>Field4:</th><td><input type="text" name="field4" required></td></tr>
<tr><th>Field5:</th><td><input type="text" name="field5" required></td></tr>
<tr><th>Field6:</th><td><input type="text" name="field6" required></td></tr>
<tr><th>Field7:</th><td><input type="text" name="field7" required></td></tr>
<tr><th>Field8:</th><td><input type="text" name="field8" required></td></tr>
<tr><th>Field9:</th><td><input type="text" name="field9" required></td></tr>
<tr><th>Field10:</th><td><input type="text" name="field10" required></td></tr>
<tr><th>Field11:</th><td><input type="text" name="field11" required></td></tr>
<tr><th>Field12:</th><td><input type="text" name="field12" required></td></tr>
<tr><th>Field13:</th><td><input type="text" name="field13" required></td></tr>
<tr><th>Field14:</th><td><input type="text" name="field14" required></td></tr>""")

    def test_explicit_field_order(self):
        class TestFormParent(Form):
            field1 = CharField()
            field2 = CharField()
            field4 = CharField()
            field5 = CharField()
            field6 = CharField()
            field_order = ['field6', 'field5', 'field4', 'field2', 'field1']

        class TestForm(TestFormParent):
            field3 = CharField()
            field_order = ['field2', 'field4', 'field3', 'field5', 'field6']

        class TestFormRemove(TestForm):
            field1 = None

        class TestFormMissing(TestForm):
            field_order = ['field2', 'field4', 'field3', 'field5', 'field6', 'field1']
            field1 = None

        class TestFormInit(TestFormParent):
            field3 = CharField()
            field_order = None

            def __init__(self, **kwargs):
                super().__init__(**kwargs)
                self.order_fields(field_order=TestForm.field_order)

        p = TestFormParent()
        self.assertEqual(list(p.fields), TestFormParent.field_order)
        p = TestFormRemove()
        self.assertEqual(list(p.fields), TestForm.field_order)
        p = TestFormMissing()
        self.assertEqual(list(p.fields), TestForm.field_order)
        p = TestForm()
        self.assertEqual(list(p.fields), TestFormMissing.field_order)
        p = TestFormInit()
        order = [*TestForm.field_order, 'field1']
        self.assertEqual(list(p.fields), order)
        TestForm.field_order = ['unknown']
        p = TestForm()
        self.assertEqual(list(p.fields), ['field1', 'field2', 'field4', 'field5', 'field6', 'field3'])

    def test_form_html_attributes(self):
        # Some Field classes have an effect on the HTML attributes of their associated
        # Widget. If you set max_length in a CharField and its associated widget is
        # either a TextInput or PasswordInput, then the widget's rendered HTML will
        # include the "maxlength" attribute.
        class UserRegistration(Form):
            username = CharField(max_length=10)                   # uses TextInput by default
            password = CharField(max_length=10, widget=PasswordInput)
            realname = CharField(max_length=10, widget=TextInput)  # redundantly define widget, just to test
            address = CharField()                                 # no max_length defined here

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" maxlength="10" required></li>
<li>Password: <input type="password" name="password" maxlength="10" required></li>
<li>Realname: <input type="text" name="realname" maxlength="10" required></li>
<li>Address: <input type="text" name="address" required></li>"""
        )

        # If you specify a custom "attrs" that includes the "maxlength" attribute,
        # the Field's max_length attribute will override whatever "maxlength" you specify
        # in "attrs".
        class UserRegistration(Form):
            username = CharField(max_length=10, widget=TextInput(attrs={'maxlength': 20}))
            password = CharField(max_length=10, widget=PasswordInput)

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" maxlength="10" required></li>
<li>Password: <input type="password" name="password" maxlength="10" required></li>"""
        )

    def test_specifying_labels(self):
        # You can specify the label for a field by using the 'label' argument to a Field
        # class. If you don't specify 'label', Django will use the field name with
        # underscores converted to spaces, and the initial letter capitalized.
        class UserRegistration(Form):
            username = CharField(max_length=10, label='Your username')
            password1 = CharField(widget=PasswordInput)
            password2 = CharField(widget=PasswordInput, label='Contraseña (de nuevo)')

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Your username: <input type="text" name="username" maxlength="10" required></li>
<li>Password1: <input type="password" name="password1" required></li>
<li>Contraseña (de nuevo): <input type="password" name="password2" required></li>"""
        )

        # Labels for as_* methods will only end in a colon if they don't end in other
        # punctuation already.
        class Questions(Form):
            q1 = CharField(label='The first question')
            q2 = CharField(label='What is your name?')
            q3 = CharField(label='The answer to life is:')
            q4 = CharField(label='Answer this question!')
            q5 = CharField(label='The last question. Period.')

        self.assertHTMLEqual(
            Questions(auto_id=False).as_p(),
            """<p>The first question: <input type="text" name="q1" required></p>
<p>What is your name? <input type="text" name="q2" required></p>
<p>The answer to life is: <input type="text" name="q3" required></p>
<p>Answer this question! <input type="text" name="q4" required></p>
<p>The last question. Period. <input type="text" name="q5" required></p>"""
        )
        self.assertHTMLEqual(
            Questions().as_p(),
            """<p><label for="id_q1">The first question:</label> <input type="text" name="q1" id="id_q1" required></p>
<p><label for="id_q2">What is your name?</label> <input type="text" name="q2" id="id_q2" required></p>
<p><label for="id_q3">The answer to life is:</label> <input type="text" name="q3" id="id_q3" required></p>
<p><label for="id_q4">Answer this question!</label> <input type="text" name="q4" id="id_q4" required></p>
<p><label for="id_q5">The last question. Period.</label> <input type="text" name="q5" id="id_q5" required></p>"""
        )

        # If a label is set to the empty string for a field, that field won't get a label.
        class UserRegistration(Form):
            username = CharField(max_length=10, label='')
            password = CharField(widget=PasswordInput)

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(p.as_ul(), """<li> <input type="text" name="username" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>""")
        p = UserRegistration(auto_id='id_%s')
        self.assertHTMLEqual(
            p.as_ul(),
            """<li> <input id="id_username" type="text" name="username" maxlength="10" required></li>
<li><label for="id_password">Password:</label>
<input type="password" name="password" id="id_password" required></li>"""
        )

        # If label is None, Django will auto-create the label from the field name. This
        # is default behavior.
        class UserRegistration(Form):
            username = CharField(max_length=10, label=None)
            password = CharField(widget=PasswordInput)

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>"""
        )
        p = UserRegistration(auto_id='id_%s')
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="id_username">Username:</label>
<input id="id_username" type="text" name="username" maxlength="10" required></li>
<li><label for="id_password">Password:</label>
<input type="password" name="password" id="id_password" required></li>"""
        )

    def test_label_suffix(self):
        # You can specify the 'label_suffix' argument to a Form class to modify the
        # punctuation symbol used at the end of a label.  By default, the colon (:) is
        # used, and is only appended to the label if the label doesn't already end with a
        # punctuation symbol: ., !, ? or :.  If you specify a different suffix, it will
        # be appended regardless of the last character of the label.
        class FavoriteForm(Form):
            color = CharField(label='Favorite color?')
            animal = CharField(label='Favorite animal')
            answer = CharField(label='Secret answer', label_suffix=' =')

        f = FavoriteForm(auto_id=False)
        self.assertHTMLEqual(f.as_ul(), """<li>Favorite color? <input type="text" name="color" required></li>
<li>Favorite animal: <input type="text" name="animal" required></li>
<li>Secret answer = <input type="text" name="answer" required></li>""")

        f = FavoriteForm(auto_id=False, label_suffix='?')
        self.assertHTMLEqual(f.as_ul(), """<li>Favorite color? <input type="text" name="color" required></li>
<li>Favorite animal? <input type="text" name="animal" required></li>
<li>Secret answer = <input type="text" name="answer" required></li>""")

        f = FavoriteForm(auto_id=False, label_suffix='')
        self.assertHTMLEqual(f.as_ul(), """<li>Favorite color? <input type="text" name="color" required></li>
<li>Favorite animal <input type="text" name="animal" required></li>
<li>Secret answer = <input type="text" name="answer" required></li>""")

        f = FavoriteForm(auto_id=False, label_suffix='\u2192')
        self.assertHTMLEqual(
            f.as_ul(),
            '<li>Favorite color? <input type="text" name="color" required></li>\n'
            '<li>Favorite animal\u2192 <input type="text" name="animal" required></li>\n'
            '<li>Secret answer = <input type="text" name="answer" required></li>'
        )

    def test_initial_data(self):
        # You can specify initial data for a field by using the 'initial' argument to a
        # Field class. This initial data is displayed when a Form is rendered with *no*
        # data. It is not displayed when a Form is rendered with any data (including an
        # empty dictionary). Also, the initial value is *not* used if data for a
        # particular required field isn't provided.
        class UserRegistration(Form):
            username = CharField(max_length=10, initial='django')
            password = CharField(widget=PasswordInput)

        # Here, we're not submitting any data, so the initial value will be displayed.)
        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="django" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>"""
        )

        # Here, we're submitting data, so the initial value will *not* be displayed.
        p = UserRegistration({}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist"><li>This field is required.</li></ul>
Username: <input type="text" name="username" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>"""
        )
        p = UserRegistration({'username': ''}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist"><li>This field is required.</li></ul>
Username: <input type="text" name="username" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>"""
        )
        p = UserRegistration({'username': 'foo'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="foo" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>"""
        )

        # An 'initial' value is *not* used as a fallback if data is not provided. In this
        # example, we don't provide a value for 'username', and the form raises a
        # validation error rather than using the initial value for 'username'.
        p = UserRegistration({'password': 'secret'})
        self.assertEqual(p.errors['username'], ['This field is required.'])
        self.assertFalse(p.is_valid())

    def test_dynamic_initial_data(self):
        # The previous technique dealt with "hard-coded" initial data, but it's also
        # possible to specify initial data after you've already created the Form class
        # (i.e., at runtime). Use the 'initial' parameter to the Form constructor. This
        # should be a dictionary containing initial values for one or more fields in the
        # form, keyed by field name.
        class UserRegistration(Form):
            username = CharField(max_length=10)
            password = CharField(widget=PasswordInput)

        # Here, we're not submitting any data, so the initial value will be displayed.)
        p = UserRegistration(initial={'username': 'django'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="django" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>"""
        )
        p = UserRegistration(initial={'username': 'stephane'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="stephane" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>"""
        )

        # The 'initial' parameter is meaningless if you pass data.
        p = UserRegistration({}, initial={'username': 'django'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist"><li>This field is required.</li></ul>
Username: <input type="text" name="username" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>"""
        )
        p = UserRegistration({'username': ''}, initial={'username': 'django'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist"><li>This field is required.</li></ul>
Username: <input type="text" name="username" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>"""
        )
        p = UserRegistration({'username': 'foo'}, initial={'username': 'django'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(), """<li>Username: <input type="text" name="username" value="foo" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>"""
        )

        # A dynamic 'initial' value is *not* used as a fallback if data is not provided.
        # In this example, we don't provide a value for 'username', and the form raises a
        # validation error rather than using the initial value for 'username'.
        p = UserRegistration({'password': 'secret'}, initial={'username': 'django'})
        self.assertEqual(p.errors['username'], ['This field is required.'])
        self.assertFalse(p.is_valid())

        # If a Form defines 'initial' *and* 'initial' is passed as a parameter to Form(),
        # then the latter will get precedence.
        class UserRegistration(Form):
            username = CharField(max_length=10, initial='django')
            password = CharField(widget=PasswordInput)

        p = UserRegistration(initial={'username': 'babik'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="babik" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>"""
        )

    def test_callable_initial_data(self):
        # The previous technique dealt with raw values as initial data, but it's also
        # possible to specify callable data.
        class UserRegistration(Form):
            username = CharField(max_length=10)
            password = CharField(widget=PasswordInput)
            options = MultipleChoiceField(choices=[('f', 'foo'), ('b', 'bar'), ('w', 'whiz')])

        # We need to define functions that get called later.)
        def initial_django():
            return 'django'

        def initial_stephane():
            return 'stephane'

        def initial_options():
            return ['f', 'b']

        def initial_other_options():
            return ['b', 'w']

        # Here, we're not submitting any data, so the initial value will be displayed.)
        p = UserRegistration(initial={'username': initial_django, 'options': initial_options}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="django" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>
<li>Options: <select multiple name="options" required>
<option value="f" selected>foo</option>
<option value="b" selected>bar</option>
<option value="w">whiz</option>
</select></li>"""
        )

        # The 'initial' parameter is meaningless if you pass data.
        p = UserRegistration({}, initial={'username': initial_django, 'options': initial_options}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist"><li>This field is required.</li></ul>
Username: <input type="text" name="username" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Options: <select multiple name="options" required>
<option value="f">foo</option>
<option value="b">bar</option>
<option value="w">whiz</option>
</select></li>"""
        )
        p = UserRegistration({'username': ''}, initial={'username': initial_django}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist"><li>This field is required.</li></ul>
            Username: <input type="text" name="username" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Options: <select multiple name="options" required>
<option value="f">foo</option>
<option value="b">bar</option>
<option value="w">whiz</option>
</select></li>"""
        )
        p = UserRegistration(
            {'username': 'foo', 'options': ['f', 'b']}, initial={'username': initial_django}, auto_id=False
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="foo" maxlength="10" required></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required></li>
<li>Options: <select multiple name="options" required>
<option value="f" selected>foo</option>
<option value="b" selected>bar</option>
<option value="w">whiz</option>
</select></li>"""
        )

        # A callable 'initial' value is *not* used as a fallback if data is not provided.
        # In this example, we don't provide a value for 'username', and the form raises a
        # validation error rather than using the initial value for 'username'.
        p = UserRegistration({'password': 'secret'}, initial={'username': initial_django, 'options': initial_options})
        self.assertEqual(p.errors['username'], ['This field is required.'])
        self.assertFalse(p.is_valid())

        # If a Form defines 'initial' *and* 'initial' is passed as a parameter to Form(),
        # then the latter will get precedence.
        class UserRegistration(Form):
            username = CharField(max_length=10, initial=initial_django)
            password = CharField(widget=PasswordInput)
            options = MultipleChoiceField(
                choices=[('f', 'foo'), ('b', 'bar'), ('w', 'whiz')],
                initial=initial_other_options,
            )

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="django" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>
<li>Options: <select multiple name="options" required>
<option value="f">foo</option>
<option value="b" selected>bar</option>
<option value="w" selected>whiz</option>
</select></li>"""
        )
        p = UserRegistration(initial={'username': initial_stephane, 'options': initial_options}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="stephane" maxlength="10" required></li>
<li>Password: <input type="password" name="password" required></li>
<li>Options: <select multiple name="options" required>
<option value="f" selected>foo</option>
<option value="b" selected>bar</option>
<option value="w">whiz</option>
</select></li>"""
        )

    def test_get_initial_for_field(self):
        class PersonForm(Form):
            first_name = CharField(initial='John')
            last_name = CharField(initial='Doe')
            age = IntegerField()
            occupation = CharField(initial=lambda: 'Unknown')

        form = PersonForm(initial={'first_name': 'Jane'})
        self.assertIsNone(form.get_initial_for_field(form.fields['age'], 'age'))
        self.assertEqual(form.get_initial_for_field(form.fields['last_name'], 'last_name'), 'Doe')
        # Form.initial overrides Field.initial.
        self.assertEqual(form.get_initial_for_field(form.fields['first_name'], 'first_name'), 'Jane')
        # Callables are evaluated.
        self.assertEqual(form.get_initial_for_field(form.fields['occupation'], 'occupation'), 'Unknown')

    def test_changed_data(self):
        class Person(Form):
            first_name = CharField(initial='Hans')
            last_name = CharField(initial='Greatel')
            birthday = DateField(initial=datetime.date(1974, 8, 16))

        p = Person(data={'first_name': 'Hans', 'last_name': 'Scrmbl', 'birthday': '1974-08-16'})
        self.assertTrue(p.is_valid())
        self.assertNotIn('first_name', p.changed_data)
        self.assertIn('last_name', p.changed_data)
        self.assertNotIn('birthday', p.changed_data)

        # A field raising ValidationError is always in changed_data
        class PedanticField(forms.Field):
            def to_python(self, value):
                raise ValidationError('Whatever')

        class Person2(Person):
            pedantic = PedanticField(initial='whatever', show_hidden_initial=True)

        p = Person2(data={
            'first_name': 'Hans', 'last_name': 'Scrmbl', 'birthday': '1974-08-16',
            'initial-pedantic': 'whatever',
        })
        self.assertFalse(p.is_valid())
        self.assertIn('pedantic', p.changed_data)

    def test_boundfield_values(self):
        # It's possible to get to the value which would be used for rendering
        # the widget for a field by using the BoundField's value method.

        class UserRegistration(Form):
            username = CharField(max_length=10, initial='djangonaut')
            password = CharField(widget=PasswordInput)

        unbound = UserRegistration()
        bound = UserRegistration({'password': 'foo'})
        self.assertIsNone(bound['username'].value())
        self.assertEqual(unbound['username'].value(), 'djangonaut')
        self.assertEqual(bound['password'].value(), 'foo')
        self.assertIsNone(unbound['password'].value())

    def test_boundfield_initial_called_once(self):
        """
        Multiple calls to BoundField().value() in an unbound form should return
        the same result each time (#24391).
        """
        class MyForm(Form):
            name = CharField(max_length=10, initial=uuid.uuid4)

        form = MyForm()
        name = form['name']
        self.assertEqual(name.value(), name.value())
        # BoundField is also cached
        self.assertIs(form['name'], name)

    def test_boundfield_value_disabled_callable_initial(self):
        class PersonForm(Form):
            name = CharField(initial=lambda: 'John Doe', disabled=True)

        # Without form data.
        form = PersonForm()
        self.assertEqual(form['name'].value(), 'John Doe')

        # With form data. As the field is disabled, the value should not be
        # affected by the form data.
        form = PersonForm({})
        self.assertEqual(form['name'].value(), 'John Doe')

    def test_custom_boundfield(self):
        class CustomField(CharField):
            def get_bound_field(self, form, name):
                return (form, name)

        class SampleForm(Form):
            name = CustomField()

        f = SampleForm()
        self.assertEqual(f['name'], (f, 'name'))

    def test_initial_datetime_values(self):
        now = datetime.datetime.now()
        # Nix microseconds (since they should be ignored). #22502
        now_no_ms = now.replace(microsecond=0)
        if now == now_no_ms:
            now = now.replace(microsecond=1)

        def delayed_now():
            return now

        def delayed_now_time():
            return now.time()

        class HiddenInputWithoutMicrosec(HiddenInput):
            supports_microseconds = False

        class TextInputWithoutMicrosec(TextInput):
            supports_microseconds = False

        class DateTimeForm(Form):
            auto_timestamp = DateTimeField(initial=delayed_now)
            auto_time_only = TimeField(initial=delayed_now_time)
            supports_microseconds = DateTimeField(initial=delayed_now, widget=TextInput)
            hi_default_microsec = DateTimeField(initial=delayed_now, widget=HiddenInput)
            hi_without_microsec = DateTimeField(initial=delayed_now, widget=HiddenInputWithoutMicrosec)
            ti_without_microsec = DateTimeField(initial=delayed_now, widget=TextInputWithoutMicrosec)

        unbound = DateTimeForm()
        self.assertEqual(unbound['auto_timestamp'].value(), now_no_ms)
        self.assertEqual(unbound['auto_time_only'].value(), now_no_ms.time())
        self.assertEqual(unbound['supports_microseconds'].value(), now)
        self.assertEqual(unbound['hi_default_microsec'].value(), now)
        self.assertEqual(unbound['hi_without_microsec'].value(), now_no_ms)
        self.assertEqual(unbound['ti_without_microsec'].value(), now_no_ms)

    def test_datetime_clean_initial_callable_disabled(self):
        now = datetime.datetime(2006, 10, 25, 14, 30, 45, 123456)

        class DateTimeForm(forms.Form):
            dt = DateTimeField(initial=lambda: now, disabled=True)

        form = DateTimeForm({})
        self.assertEqual(form.errors, {})
        self.assertEqual(form.cleaned_data, {'dt': now})

    def test_datetime_changed_data_callable_with_microseconds(self):
        class DateTimeForm(forms.Form):
            dt = DateTimeField(initial=lambda: datetime.datetime(2006, 10, 25, 14, 30, 45, 123456), disabled=True)

        form = DateTimeForm({'dt': '2006-10-25 14:30:45'})
        self.assertEqual(form.changed_data, [])

    def test_help_text(self):
        # You can specify descriptive text for a field by using the 'help_text' argument)
        class UserRegistration(Form):
            username = CharField(max_length=10, help_text='e.g., user@example.com')
            password = CharField(widget=PasswordInput, help_text='Wählen Sie mit Bedacht.')

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" maxlength="10" required>
<span class="helptext">e.g., user@example.com</span></li>
<li>Password: <input type="password" name="password" required>
<span class="helptext">Wählen Sie mit Bedacht.</span></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<p>Username: <input type="text" name="username" maxlength="10" required>
<span class="helptext">e.g., user@example.com</span></p>
<p>Password: <input type="password" name="password" required>
<span class="helptext">Wählen Sie mit Bedacht.</span></p>"""
        )
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><th>Username:</th><td><input type="text" name="username" maxlength="10" required><br>
<span class="helptext">e.g., user@example.com</span></td></tr>
<tr><th>Password:</th><td><input type="password" name="password" required><br>
<span class="helptext">Wählen Sie mit Bedacht.</span></td></tr>"""
        )

        # The help text is displayed whether or not data is provided for the form.
        p = UserRegistration({'username': 'foo'}, auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" value="foo" maxlength="10" required>
<span class="helptext">e.g., user@example.com</span></li>
<li><ul class="errorlist"><li>This field is required.</li></ul>
Password: <input type="password" name="password" required>
<span class="helptext">Wählen Sie mit Bedacht.</span></li>"""
        )

        # help_text is not displayed for hidden fields. It can be used for documentation
        # purposes, though.
        class UserRegistration(Form):
            username = CharField(max_length=10, help_text='e.g., user@example.com')
            password = CharField(widget=PasswordInput)
            next = CharField(widget=HiddenInput, initial='/', help_text='Redirect destination')

        p = UserRegistration(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>Username: <input type="text" name="username" maxlength="10" required>
<span class="helptext">e.g., user@example.com</span></li>
<li>Password: <input type="password" name="password" required>
<input type="hidden" name="next" value="/"></li>"""
        )

    def test_subclassing_forms(self):
        # You can subclass a Form to add fields. The resulting form subclass will have
        # all of the fields of the parent Form, plus whichever fields you define in the
        # subclass.
        class Person(Form):
            first_name = CharField()
            last_name = CharField()
            birthday = DateField()

        class Musician(Person):
            instrument = CharField()

        p = Person(auto_id=False)
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>First name: <input type="text" name="first_name" required></li>
<li>Last name: <input type="text" name="last_name" required></li>
<li>Birthday: <input type="text" name="birthday" required></li>"""
        )
        m = Musician(auto_id=False)
        self.assertHTMLEqual(
            m.as_ul(),
            """<li>First name: <input type="text" name="first_name" required></li>
<li>Last name: <input type="text" name="last_name" required></li>
<li>Birthday: <input type="text" name="birthday" required></li>
<li>Instrument: <input type="text" name="instrument" required></li>"""
        )

        # Yes, you can subclass multiple forms. The fields are added in the order in
        # which the parent classes are listed.
        class Person(Form):
            first_name = CharField()
            last_name = CharField()
            birthday = DateField()

        class Instrument(Form):
            instrument = CharField()

        class Beatle(Person, Instrument):
            haircut_type = CharField()

        b = Beatle(auto_id=False)
        self.assertHTMLEqual(b.as_ul(), """<li>Instrument: <input type="text" name="instrument" required></li>
<li>First name: <input type="text" name="first_name" required></li>
<li>Last name: <input type="text" name="last_name" required></li>
<li>Birthday: <input type="text" name="birthday" required></li>
<li>Haircut type: <input type="text" name="haircut_type" required></li>""")

    def test_forms_with_prefixes(self):
        # Sometimes it's necessary to have multiple forms display on the same HTML page,
        # or multiple copies of the same form. We can accomplish this with form prefixes.
        # Pass the keyword argument 'prefix' to the Form constructor to use this feature.
        # This value will be prepended to each HTML form field name. One way to think
        # about this is "namespaces for HTML forms". Notice that in the data argument,
        # each field's key has the prefix, in this case 'person1', prepended to the
        # actual field name.
        class Person(Form):
            first_name = CharField()
            last_name = CharField()
            birthday = DateField()

        data = {
            'person1-first_name': 'John',
            'person1-last_name': 'Lennon',
            'person1-birthday': '1940-10-9'
        }
        p = Person(data, prefix='person1')
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="id_person1-first_name">First name:</label>
<input type="text" name="person1-first_name" value="John" id="id_person1-first_name" required></li>
<li><label for="id_person1-last_name">Last name:</label>
<input type="text" name="person1-last_name" value="Lennon" id="id_person1-last_name" required></li>
<li><label for="id_person1-birthday">Birthday:</label>
<input type="text" name="person1-birthday" value="1940-10-9" id="id_person1-birthday" required></li>"""
        )
        self.assertHTMLEqual(
            str(p['first_name']),
            '<input type="text" name="person1-first_name" value="John" id="id_person1-first_name" required>'
        )
        self.assertHTMLEqual(
            str(p['last_name']),
            '<input type="text" name="person1-last_name" value="Lennon" id="id_person1-last_name" required>'
        )
        self.assertHTMLEqual(
            str(p['birthday']),
            '<input type="text" name="person1-birthday" value="1940-10-9" id="id_person1-birthday" required>'
        )
        self.assertEqual(p.errors, {})
        self.assertTrue(p.is_valid())
        self.assertEqual(p.cleaned_data['first_name'], 'John')
        self.assertEqual(p.cleaned_data['last_name'], 'Lennon')
        self.assertEqual(p.cleaned_data['birthday'], datetime.date(1940, 10, 9))

        # Let's try submitting some bad data to make sure form.errors and field.errors
        # work as expected.
        data = {
            'person1-first_name': '',
            'person1-last_name': '',
            'person1-birthday': ''
        }
        p = Person(data, prefix='person1')
        self.assertEqual(p.errors['first_name'], ['This field is required.'])
        self.assertEqual(p.errors['last_name'], ['This field is required.'])
        self.assertEqual(p.errors['birthday'], ['This field is required.'])
        self.assertEqual(p['first_name'].errors, ['This field is required.'])
        # Accessing a nonexistent field.
        with self.assertRaises(KeyError):
            p['person1-first_name'].errors

        # In this example, the data doesn't have a prefix, but the form requires it, so
        # the form doesn't "see" the fields.
        data = {
            'first_name': 'John',
            'last_name': 'Lennon',
            'birthday': '1940-10-9'
        }
        p = Person(data, prefix='person1')
        self.assertEqual(p.errors['first_name'], ['This field is required.'])
        self.assertEqual(p.errors['last_name'], ['This field is required.'])
        self.assertEqual(p.errors['birthday'], ['This field is required.'])

        # With prefixes, a single data dictionary can hold data for multiple instances
        # of the same form.
        data = {
            'person1-first_name': 'John',
            'person1-last_name': 'Lennon',
            'person1-birthday': '1940-10-9',
            'person2-first_name': 'Jim',
            'person2-last_name': 'Morrison',
            'person2-birthday': '1943-12-8'
        }
        p1 = Person(data, prefix='person1')
        self.assertTrue(p1.is_valid())
        self.assertEqual(p1.cleaned_data['first_name'], 'John')
        self.assertEqual(p1.cleaned_data['last_name'], 'Lennon')
        self.assertEqual(p1.cleaned_data['birthday'], datetime.date(1940, 10, 9))
        p2 = Person(data, prefix='person2')
        self.assertTrue(p2.is_valid())
        self.assertEqual(p2.cleaned_data['first_name'], 'Jim')
        self.assertEqual(p2.cleaned_data['last_name'], 'Morrison')
        self.assertEqual(p2.cleaned_data['birthday'], datetime.date(1943, 12, 8))

        # By default, forms append a hyphen between the prefix and the field name, but a
        # form can alter that behavior by implementing the add_prefix() method. This
        # method takes a field name and returns the prefixed field, according to
        # self.prefix.
        class Person(Form):
            first_name = CharField()
            last_name = CharField()
            birthday = DateField()

            def add_prefix(self, field_name):
                return '%s-prefix-%s' % (self.prefix, field_name) if self.prefix else field_name

        p = Person(prefix='foo')
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><label for="id_foo-prefix-first_name">First name:</label>
<input type="text" name="foo-prefix-first_name" id="id_foo-prefix-first_name" required></li>
<li><label for="id_foo-prefix-last_name">Last name:</label>
<input type="text" name="foo-prefix-last_name" id="id_foo-prefix-last_name" required></li>
<li><label for="id_foo-prefix-birthday">Birthday:</label>
<input type="text" name="foo-prefix-birthday" id="id_foo-prefix-birthday" required></li>"""
        )
        data = {
            'foo-prefix-first_name': 'John',
            'foo-prefix-last_name': 'Lennon',
            'foo-prefix-birthday': '1940-10-9'
        }
        p = Person(data, prefix='foo')
        self.assertTrue(p.is_valid())
        self.assertEqual(p.cleaned_data['first_name'], 'John')
        self.assertEqual(p.cleaned_data['last_name'], 'Lennon')
        self.assertEqual(p.cleaned_data['birthday'], datetime.date(1940, 10, 9))

    def test_class_prefix(self):
        # Prefix can be also specified at the class level.
        class Person(Form):
            first_name = CharField()
            prefix = 'foo'

        p = Person()
        self.assertEqual(p.prefix, 'foo')

        p = Person(prefix='bar')
        self.assertEqual(p.prefix, 'bar')

    def test_forms_with_null_boolean(self):
        # NullBooleanField is a bit of a special case because its presentation (widget)
        # is different than its data. This is handled transparently, though.
        class Person(Form):
            name = CharField()
            is_cool = NullBooleanField()

        p = Person({'name': 'Joe'}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown" selected>Unknown</option>
<option value="true">Yes</option>
<option value="false">No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': '1'}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown" selected>Unknown</option>
<option value="true">Yes</option>
<option value="false">No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': '2'}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown">Unknown</option>
<option value="true" selected>Yes</option>
<option value="false">No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': '3'}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown">Unknown</option>
<option value="true">Yes</option>
<option value="false" selected>No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': True}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown">Unknown</option>
<option value="true" selected>Yes</option>
<option value="false">No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': False}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown">Unknown</option>
<option value="true">Yes</option>
<option value="false" selected>No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': 'unknown'}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown" selected>Unknown</option>
<option value="true">Yes</option>
<option value="false">No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': 'true'}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown">Unknown</option>
<option value="true" selected>Yes</option>
<option value="false">No</option>
</select>""")
        p = Person({'name': 'Joe', 'is_cool': 'false'}, auto_id=False)
        self.assertHTMLEqual(str(p['is_cool']), """<select name="is_cool">
<option value="unknown">Unknown</option>
<option value="true">Yes</option>
<option value="false" selected>No</option>
</select>""")

    def test_forms_with_file_fields(self):
        # FileFields are a special case because they take their data from the request.FILES,
        # not request.POST.
        class FileForm(Form):
            file1 = FileField()

        f = FileForm(auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td><input type="file" name="file1" required></td></tr>',
        )

        f = FileForm(data={}, files={}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td>'
            '<ul class="errorlist"><li>This field is required.</li></ul>'
            '<input type="file" name="file1" required></td></tr>'
        )

        f = FileForm(data={}, files={'file1': SimpleUploadedFile('name', b'')}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td>'
            '<ul class="errorlist"><li>The submitted file is empty.</li></ul>'
            '<input type="file" name="file1" required></td></tr>'
        )

        f = FileForm(data={}, files={'file1': 'something that is not a file'}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td>'
            '<ul class="errorlist"><li>No file was submitted. Check the '
            'encoding type on the form.</li></ul>'
            '<input type="file" name="file1" required></td></tr>'
        )

        f = FileForm(data={}, files={'file1': SimpleUploadedFile('name', b'some content')}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td><input type="file" name="file1" required></td></tr>',
        )
        self.assertTrue(f.is_valid())

        file1 = SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', 'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह'.encode())
        f = FileForm(data={}, files={'file1': file1}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td><input type="file" name="file1" required></td></tr>',
        )

        # A required file field with initial data should not contain the
        # required HTML attribute. The file input is left blank by the user to
        # keep the existing, initial value.
        f = FileForm(initial={'file1': 'resume.txt'}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td><input type="file" name="file1"></td></tr>',
        )

    def test_filefield_initial_callable(self):
        class FileForm(forms.Form):
            file1 = forms.FileField(initial=lambda: 'resume.txt')

        f = FileForm({})
        self.assertEqual(f.errors, {})
        self.assertEqual(f.cleaned_data['file1'], 'resume.txt')

    def test_filefield_with_fileinput_required(self):
        class FileForm(Form):
            file1 = forms.FileField(widget=FileInput)

        f = FileForm(auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td>'
            '<input type="file" name="file1" required></td></tr>',
        )
        # A required file field with initial data doesn't contain the required
        # HTML attribute. The file input is left blank by the user to keep the
        # existing, initial value.
        f = FileForm(initial={'file1': 'resume.txt'}, auto_id=False)
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><th>File1:</th><td><input type="file" name="file1"></td></tr>',
        )

    def test_basic_processing_in_view(self):
        class UserRegistration(Form):
            username = CharField(max_length=10)
            password1 = CharField(widget=PasswordInput)
            password2 = CharField(widget=PasswordInput)

            def clean(self):
                if (self.cleaned_data.get('password1') and self.cleaned_data.get('password2') and
                        self.cleaned_data['password1'] != self.cleaned_data['password2']):
                    raise ValidationError('Please make sure your passwords match.')

                return self.cleaned_data

        def my_function(method, post_data):
            if method == 'POST':
                form = UserRegistration(post_data, auto_id=False)
            else:
                form = UserRegistration(auto_id=False)

            if form.is_valid():
                return 'VALID: %r' % sorted(form.cleaned_data.items())

            t = Template(
                '<form method="post">\n'
                '<table>\n{{ form }}\n</table>\n<input type="submit" required>\n</form>'
            )
            return t.render(Context({'form': form}))

        # Case 1: GET (an empty form, with no errors).)
        self.assertHTMLEqual(my_function('GET', {}), """<form method="post">
<table>
<tr><th>Username:</th><td><input type="text" name="username" maxlength="10" required></td></tr>
<tr><th>Password1:</th><td><input type="password" name="password1" required></td></tr>
<tr><th>Password2:</th><td><input type="password" name="password2" required></td></tr>
</table>
<input type="submit" required>
</form>""")
        # Case 2: POST with erroneous data (a redisplayed form, with errors).)
        self.assertHTMLEqual(
            my_function('POST', {'username': 'this-is-a-long-username', 'password1': 'foo', 'password2': 'bar'}),
            """<form method="post">
<table>
<tr><td colspan="2"><ul class="errorlist nonfield"><li>Please make sure your passwords match.</li></ul></td></tr>
<tr><th>Username:</th><td><ul class="errorlist">
<li>Ensure this value has at most 10 characters (it has 23).</li></ul>
<input type="text" name="username" value="this-is-a-long-username" maxlength="10" required></td></tr>
<tr><th>Password1:</th><td><input type="password" name="password1" required></td></tr>
<tr><th>Password2:</th><td><input type="password" name="password2" required></td></tr>
</table>
<input type="submit" required>
</form>"""
        )
        # Case 3: POST with valid data (the success message).)
        self.assertEqual(
            my_function('POST', {'username': 'adrian', 'password1': 'secret', 'password2': 'secret'}),
            "VALID: [('password1', 'secret'), ('password2', 'secret'), ('username', 'adrian')]"
        )

    def test_templates_with_forms(self):
        class UserRegistration(Form):
            username = CharField(max_length=10, help_text="Good luck picking a username that doesn't already exist.")
            password1 = CharField(widget=PasswordInput)
            password2 = CharField(widget=PasswordInput)

            def clean(self):
                if (self.cleaned_data.get('password1') and self.cleaned_data.get('password2') and
                        self.cleaned_data['password1'] != self.cleaned_data['password2']):
                    raise ValidationError('Please make sure your passwords match.')

                return self.cleaned_data

        # You have full flexibility in displaying form fields in a template. Just pass a
        # Form instance to the template, and use "dot" access to refer to individual
        # fields. Note, however, that this flexibility comes with the responsibility of
        # displaying all the errors, including any that might not be associated with a
        # particular field.
        t = Template('''<form>
{{ form.username.errors.as_ul }}<p><label>Your username: {{ form.username }}</label></p>
{{ form.password1.errors.as_ul }}<p><label>Password: {{ form.password1 }}</label></p>
{{ form.password2.errors.as_ul }}<p><label>Password (again): {{ form.password2 }}</label></p>
<input type="submit" required>
</form>''')
        self.assertHTMLEqual(t.render(Context({'form': UserRegistration(auto_id=False)})), """<form>
<p><label>Your username: <input type="text" name="username" maxlength="10" required></label></p>
<p><label>Password: <input type="password" name="password1" required></label></p>
<p><label>Password (again): <input type="password" name="password2" required></label></p>
<input type="submit" required>
</form>""")
        self.assertHTMLEqual(
            t.render(Context({'form': UserRegistration({'username': 'django'}, auto_id=False)})),
            """<form>
<p><label>Your username: <input type="text" name="username" value="django" maxlength="10" required></label></p>
<ul class="errorlist"><li>This field is required.</li></ul><p>
<label>Password: <input type="password" name="password1" required></label></p>
<ul class="errorlist"><li>This field is required.</li></ul>
<p><label>Password (again): <input type="password" name="password2" required></label></p>
<input type="submit" required>
</form>"""
        )

        # Use form.[field].label to output a field's label. You can specify the label for
        # a field by using the 'label' argument to a Field class. If you don't specify
        # 'label', Django will use the field name with underscores converted to spaces,
        # and the initial letter capitalized.
        t = Template('''<form>
<p><label>{{ form.username.label }}: {{ form.username }}</label></p>
<p><label>{{ form.password1.label }}: {{ form.password1 }}</label></p>
<p><label>{{ form.password2.label }}: {{ form.password2 }}</label></p>
<input type="submit" required>
</form>''')
        self.assertHTMLEqual(t.render(Context({'form': UserRegistration(auto_id=False)})), """<form>
<p><label>Username: <input type="text" name="username" maxlength="10" required></label></p>
<p><label>Password1: <input type="password" name="password1" required></label></p>
<p><label>Password2: <input type="password" name="password2" required></label></p>
<input type="submit" required>
</form>""")

        # User form.[field].label_tag to output a field's label with a <label> tag
        # wrapped around it, but *only* if the given field has an "id" attribute.
        # Recall from above that passing the "auto_id" argument to a Form gives each
        # field an "id" attribute.
        t = Template('''<form>
<p>{{ form.username.label_tag }} {{ form.username }}</p>
<p>{{ form.password1.label_tag }} {{ form.password1 }}</p>
<p>{{ form.password2.label_tag }} {{ form.password2 }}</p>
<input type="submit" required>
</form>''')
        self.assertHTMLEqual(t.render(Context({'form': UserRegistration(auto_id=False)})), """<form>
<p>Username: <input type="text" name="username" maxlength="10" required></p>
<p>Password1: <input type="password" name="password1" required></p>
<p>Password2: <input type="password" name="password2" required></p>
<input type="submit" required>
</form>""")
        self.assertHTMLEqual(t.render(Context({'form': UserRegistration(auto_id='id_%s')})), """<form>
<p><label for="id_username">Username:</label>
<input id="id_username" type="text" name="username" maxlength="10" required></p>
<p><label for="id_password1">Password1:</label>
<input type="password" name="password1" id="id_password1" required></p>
<p><label for="id_password2">Password2:</label>
<input type="password" name="password2" id="id_password2" required></p>
<input type="submit" required>
</form>""")

        # User form.[field].help_text to output a field's help text. If the given field
        # does not have help text, nothing will be output.
        t = Template('''<form>
<p>{{ form.username.label_tag }} {{ form.username }}<br>{{ form.username.help_text }}</p>
<p>{{ form.password1.label_tag }} {{ form.password1 }}</p>
<p>{{ form.password2.label_tag }} {{ form.password2 }}</p>
<input type="submit" required>
</form>''')
        self.assertHTMLEqual(
            t.render(Context({'form': UserRegistration(auto_id=False)})),
            """<form>
<p>Username: <input type="text" name="username" maxlength="10" required><br>
Good luck picking a username that doesn&#x27;t already exist.</p>
<p>Password1: <input type="password" name="password1" required></p>
<p>Password2: <input type="password" name="password2" required></p>
<input type="submit" required>
</form>"""
        )
        self.assertEqual(
            Template('{{ form.password1.help_text }}').render(Context({'form': UserRegistration(auto_id=False)})),
            ''
        )

        # To display the errors that aren't associated with a particular field -- e.g.,
        # the errors caused by Form.clean() -- use {{ form.non_field_errors }} in the
        # template. If used on its own, it is displayed as a <ul> (or an empty string, if
        # the list of errors is empty). You can also use it in {% if %} statements.
        t = Template('''<form>
{{ form.username.errors.as_ul }}<p><label>Your username: {{ form.username }}</label></p>
{{ form.password1.errors.as_ul }}<p><label>Password: {{ form.password1 }}</label></p>
{{ form.password2.errors.as_ul }}<p><label>Password (again): {{ form.password2 }}</label></p>
<input type="submit" required>
</form>''')
        self.assertHTMLEqual(
            t.render(Context({
                'form': UserRegistration({'username': 'django', 'password1': 'foo', 'password2': 'bar'}, auto_id=False)
            })),
            """<form>
<p><label>Your username: <input type="text" name="username" value="django" maxlength="10" required></label></p>
<p><label>Password: <input type="password" name="password1" required></label></p>
<p><label>Password (again): <input type="password" name="password2" required></label></p>
<input type="submit" required>
</form>"""
        )
        t = Template('''<form>
{{ form.non_field_errors }}
{{ form.username.errors.as_ul }}<p><label>Your username: {{ form.username }}</label></p>
{{ form.password1.errors.as_ul }}<p><label>Password: {{ form.password1 }}</label></p>
{{ form.password2.errors.as_ul }}<p><label>Password (again): {{ form.password2 }}</label></p>
<input type="submit" required>
</form>''')
        self.assertHTMLEqual(
            t.render(Context({
                'form': UserRegistration({'username': 'django', 'password1': 'foo', 'password2': 'bar'}, auto_id=False)
            })),
            """<form>
<ul class="errorlist nonfield"><li>Please make sure your passwords match.</li></ul>
<p><label>Your username: <input type="text" name="username" value="django" maxlength="10" required></label></p>
<p><label>Password: <input type="password" name="password1" required></label></p>
<p><label>Password (again): <input type="password" name="password2" required></label></p>
<input type="submit" required>
</form>"""
        )

    def test_empty_permitted(self):
        # Sometimes (pretty much in formsets) we want to allow a form to pass validation
        # if it is completely empty. We can accomplish this by using the empty_permitted
        # argument to a form constructor.
        class SongForm(Form):
            artist = CharField()
            name = CharField()

        # First let's show what happens id empty_permitted=False (the default):
        data = {'artist': '', 'song': ''}
        form = SongForm(data, empty_permitted=False)
        self.assertFalse(form.is_valid())
        self.assertEqual(form.errors, {'name': ['This field is required.'], 'artist': ['This field is required.']})
        self.assertEqual(form.cleaned_data, {})

        # Now let's show what happens when empty_permitted=True and the form is empty.
        form = SongForm(data, empty_permitted=True, use_required_attribute=False)
        self.assertTrue(form.is_valid())
        self.assertEqual(form.errors, {})
        self.assertEqual(form.cleaned_data, {})

        # But if we fill in data for one of the fields, the form is no longer empty and
        # the whole thing must pass validation.
        data = {'artist': 'The Doors', 'song': ''}
        form = SongForm(data, empty_permitted=False)
        self.assertFalse(form.is_valid())
        self.assertEqual(form.errors, {'name': ['This field is required.']})
        self.assertEqual(form.cleaned_data, {'artist': 'The Doors'})

        # If a field is not given in the data then None is returned for its data. Lets
        # make sure that when checking for empty_permitted that None is treated
        # accordingly.
        data = {'artist': None, 'song': ''}
        form = SongForm(data, empty_permitted=True, use_required_attribute=False)
        self.assertTrue(form.is_valid())

        # However, we *really* need to be sure we are checking for None as any data in
        # initial that returns False on a boolean call needs to be treated literally.
        class PriceForm(Form):
            amount = FloatField()
            qty = IntegerField()

        data = {'amount': '0.0', 'qty': ''}
        form = PriceForm(data, initial={'amount': 0.0}, empty_permitted=True, use_required_attribute=False)
        self.assertTrue(form.is_valid())

    def test_empty_permitted_and_use_required_attribute(self):
        msg = (
            'The empty_permitted and use_required_attribute arguments may not '
            'both be True.'
        )
        with self.assertRaisesMessage(ValueError, msg):
            Person(empty_permitted=True, use_required_attribute=True)

    def test_extracting_hidden_and_visible(self):
        class SongForm(Form):
            token = CharField(widget=HiddenInput)
            artist = CharField()
            name = CharField()

        form = SongForm()
        self.assertEqual([f.name for f in form.hidden_fields()], ['token'])
        self.assertEqual([f.name for f in form.visible_fields()], ['artist', 'name'])

    def test_hidden_initial_gets_id(self):
        class MyForm(Form):
            field1 = CharField(max_length=50, show_hidden_initial=True)

        self.assertHTMLEqual(
            MyForm().as_table(),
            '<tr><th><label for="id_field1">Field1:</label></th>'
            '<td><input id="id_field1" type="text" name="field1" maxlength="50" required>'
            '<input type="hidden" name="initial-field1" id="initial-id_field1"></td></tr>'
        )

    def test_error_html_required_html_classes(self):
        class Person(Form):
            name = CharField()
            is_cool = NullBooleanField()
            email = EmailField(required=False)
            age = IntegerField()

        p = Person({})
        p.error_css_class = 'error'
        p.required_css_class = 'required'

        self.assertHTMLEqual(
            p.as_ul(),
            """<li class="required error"><ul class="errorlist"><li>This field is required.</li></ul>
<label class="required" for="id_name">Name:</label> <input type="text" name="name" id="id_name" required></li>
<li class="required"><label class="required" for="id_is_cool">Is cool:</label>
<select name="is_cool" id="id_is_cool">
<option value="unknown" selected>Unknown</option>
<option value="true">Yes</option>
<option value="false">No</option>
</select></li>
<li><label for="id_email">Email:</label> <input type="email" name="email" id="id_email"></li>
<li class="required error"><ul class="errorlist"><li>This field is required.</li></ul>
<label class="required" for="id_age">Age:</label> <input type="number" name="age" id="id_age" required></li>"""
        )

        self.assertHTMLEqual(
            p.as_p(),
            """<ul class="errorlist"><li>This field is required.</li></ul>
<p class="required error"><label class="required" for="id_name">Name:</label>
<input type="text" name="name" id="id_name" required></p>
<p class="required"><label class="required" for="id_is_cool">Is cool:</label>
<select name="is_cool" id="id_is_cool">
<option value="unknown" selected>Unknown</option>
<option value="true">Yes</option>
<option value="false">No</option>
</select></p>
<p><label for="id_email">Email:</label> <input type="email" name="email" id="id_email"></p>
<ul class="errorlist"><li>This field is required.</li></ul>
<p class="required error"><label class="required" for="id_age">Age:</label>
<input type="number" name="age" id="id_age" required></p>"""
        )

        self.assertHTMLEqual(
            p.as_table(),
            """<tr class="required error">
<th><label class="required" for="id_name">Name:</label></th>
<td><ul class="errorlist"><li>This field is required.</li></ul>
<input type="text" name="name" id="id_name" required></td></tr>
<tr class="required"><th><label class="required" for="id_is_cool">Is cool:</label></th>
<td><select name="is_cool" id="id_is_cool">
<option value="unknown" selected>Unknown</option>
<option value="true">Yes</option>
<option value="false">No</option>
</select></td></tr>
<tr><th><label for="id_email">Email:</label></th><td>
<input type="email" name="email" id="id_email"></td></tr>
<tr class="required error"><th><label class="required" for="id_age">Age:</label></th>
<td><ul class="errorlist"><li>This field is required.</li></ul>
<input type="number" name="age" id="id_age" required></td></tr>"""
        )

    def test_label_has_required_css_class(self):
        """
        #17922 - required_css_class is added to the label_tag() of required fields.
        """
        class SomeForm(Form):
            required_css_class = 'required'
            field = CharField(max_length=10)
            field2 = IntegerField(required=False)

        f = SomeForm({'field': 'test'})
        self.assertHTMLEqual(f['field'].label_tag(), '<label for="id_field" class="required">Field:</label>')
        self.assertHTMLEqual(
            f['field'].label_tag(attrs={'class': 'foo'}),
            '<label for="id_field" class="foo required">Field:</label>'
        )
        self.assertHTMLEqual(f['field2'].label_tag(), '<label for="id_field2">Field2:</label>')

    def test_label_split_datetime_not_displayed(self):
        class EventForm(Form):
            happened_at = SplitDateTimeField(widget=SplitHiddenDateTimeWidget)

        form = EventForm()
        self.assertHTMLEqual(
            form.as_ul(),
            '<input type="hidden" name="happened_at_0" id="id_happened_at_0">'
            '<input type="hidden" name="happened_at_1" id="id_happened_at_1">'
        )

    def test_multivalue_field_validation(self):
        def bad_names(value):
            if value == 'bad value':
                raise ValidationError('bad value not allowed')

        class NameField(MultiValueField):
            def __init__(self, fields=(), *args, **kwargs):
                fields = (CharField(label='First name', max_length=10),
                          CharField(label='Last name', max_length=10))
                super().__init__(fields=fields, *args, **kwargs)

            def compress(self, data_list):
                return ' '.join(data_list)

        class NameForm(Form):
            name = NameField(validators=[bad_names])

        form = NameForm(data={'name': ['bad', 'value']})
        form.full_clean()
        self.assertFalse(form.is_valid())
        self.assertEqual(form.errors, {'name': ['bad value not allowed']})
        form = NameForm(data={'name': ['should be overly', 'long for the field names']})
        self.assertFalse(form.is_valid())
        self.assertEqual(
            form.errors, {
                'name': [
                    'Ensure this value has at most 10 characters (it has 16).',
                    'Ensure this value has at most 10 characters (it has 24).',
                ],
            }
        )
        form = NameForm(data={'name': ['fname', 'lname']})
        self.assertTrue(form.is_valid())
        self.assertEqual(form.cleaned_data, {'name': 'fname lname'})

    def test_multivalue_deep_copy(self):
        """
        #19298 -- MultiValueField needs to override the default as it needs
        to deep-copy subfields:
        """
        class ChoicesField(MultiValueField):
            def __init__(self, fields=(), *args, **kwargs):
                fields = (
                    ChoiceField(label='Rank', choices=((1, 1), (2, 2))),
                    CharField(label='Name', max_length=10),
                )
                super().__init__(fields=fields, *args, **kwargs)

        field = ChoicesField()
        field2 = copy.deepcopy(field)
        self.assertIsInstance(field2, ChoicesField)
        self.assertIsNot(field2.fields, field.fields)
        self.assertIsNot(field2.fields[0].choices, field.fields[0].choices)

    def test_multivalue_initial_data(self):
        """
        #23674 -- invalid initial data should not break form.changed_data()
        """
        class DateAgeField(MultiValueField):
            def __init__(self, fields=(), *args, **kwargs):
                fields = (DateField(label="Date"), IntegerField(label="Age"))
                super().__init__(fields=fields, *args, **kwargs)

        class DateAgeForm(Form):
            date_age = DateAgeField()

        data = {"date_age": ["1998-12-06", 16]}
        form = DateAgeForm(data, initial={"date_age": ["200-10-10", 14]})
        self.assertTrue(form.has_changed())

    def test_multivalue_optional_subfields(self):
        class PhoneField(MultiValueField):
            def __init__(self, *args, **kwargs):
                fields = (
                    CharField(label='Country Code', validators=[
                        RegexValidator(r'^\+[0-9]{1,2}$', message='Enter a valid country code.')]),
                    CharField(label='Phone Number'),
                    CharField(label='Extension', error_messages={'incomplete': 'Enter an extension.'}),
                    CharField(label='Label', required=False, help_text='E.g. home, work.'),
                )
                super().__init__(fields, *args, **kwargs)

            def compress(self, data_list):
                if data_list:
                    return '%s.%s ext. %s (label: %s)' % tuple(data_list)
                return None

        # An empty value for any field will raise a `required` error on a
        # required `MultiValueField`.
        f = PhoneField()
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean('')
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean(None)
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean([])
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean(['+61'])
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean(['+61', '287654321', '123'])
        self.assertEqual('+61.287654321 ext. 123 (label: Home)', f.clean(['+61', '287654321', '123', 'Home']))
        with self.assertRaisesMessage(ValidationError, "'Enter a valid country code.'"):
            f.clean(['61', '287654321', '123', 'Home'])

        # Empty values for fields will NOT raise a `required` error on an
        # optional `MultiValueField`
        f = PhoneField(required=False)
        self.assertIsNone(f.clean(''))
        self.assertIsNone(f.clean(None))
        self.assertIsNone(f.clean([]))
        self.assertEqual('+61. ext.  (label: )', f.clean(['+61']))
        self.assertEqual('+61.287654321 ext. 123 (label: )', f.clean(['+61', '287654321', '123']))
        self.assertEqual('+61.287654321 ext. 123 (label: Home)', f.clean(['+61', '287654321', '123', 'Home']))
        with self.assertRaisesMessage(ValidationError, "'Enter a valid country code.'"):
            f.clean(['61', '287654321', '123', 'Home'])

        # For a required `MultiValueField` with `require_all_fields=False`, a
        # `required` error will only be raised if all fields are empty. Fields
        # can individually be required or optional. An empty value for any
        # required field will raise an `incomplete` error.
        f = PhoneField(require_all_fields=False)
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean('')
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean(None)
        with self.assertRaisesMessage(ValidationError, "'This field is required.'"):
            f.clean([])
        with self.assertRaisesMessage(ValidationError, "'Enter a complete value.'"):
            f.clean(['+61'])
        self.assertEqual('+61.287654321 ext. 123 (label: )', f.clean(['+61', '287654321', '123']))
        with self.assertRaisesMessage(ValidationError, "'Enter a complete value.', 'Enter an extension.'"):
            f.clean(['', '', '', 'Home'])
        with self.assertRaisesMessage(ValidationError, "'Enter a valid country code.'"):
            f.clean(['61', '287654321', '123', 'Home'])

        # For an optional `MultiValueField` with `require_all_fields=False`, we
        # don't get any `required` error but we still get `incomplete` errors.
        f = PhoneField(required=False, require_all_fields=False)
        self.assertIsNone(f.clean(''))
        self.assertIsNone(f.clean(None))
        self.assertIsNone(f.clean([]))
        with self.assertRaisesMessage(ValidationError, "'Enter a complete value.'"):
            f.clean(['+61'])
        self.assertEqual('+61.287654321 ext. 123 (label: )', f.clean(['+61', '287654321', '123']))
        with self.assertRaisesMessage(ValidationError, "'Enter a complete value.', 'Enter an extension.'"):
            f.clean(['', '', '', 'Home'])
        with self.assertRaisesMessage(ValidationError, "'Enter a valid country code.'"):
            f.clean(['61', '287654321', '123', 'Home'])

    def test_custom_empty_values(self):
        """
        Form fields can customize what is considered as an empty value
        for themselves (#19997).
        """
        class CustomJSONField(CharField):
            empty_values = [None, '']

            def to_python(self, value):
                # Fake json.loads
                if value == '{}':
                    return {}
                return super().to_python(value)

        class JSONForm(forms.Form):
            json = CustomJSONField()

        form = JSONForm(data={'json': '{}'})
        form.full_clean()
        self.assertEqual(form.cleaned_data, {'json': {}})

    def test_boundfield_label_tag(self):
        class SomeForm(Form):
            field = CharField()
        boundfield = SomeForm()['field']

        testcases = [  # (args, kwargs, expected)
            # without anything: just print the <label>
            ((), {}, '<label for="id_field">Field:</label>'),

            # passing just one argument: overrides the field's label
            (('custom',), {}, '<label for="id_field">custom:</label>'),

            # the overridden label is escaped
            (('custom&',), {}, '<label for="id_field">custom&amp;:</label>'),
            ((mark_safe('custom&'),), {}, '<label for="id_field">custom&:</label>'),

            # Passing attrs to add extra attributes on the <label>
            ((), {'attrs': {'class': 'pretty'}}, '<label for="id_field" class="pretty">Field:</label>')
        ]

        for args, kwargs, expected in testcases:
            with self.subTest(args=args, kwargs=kwargs):
                self.assertHTMLEqual(boundfield.label_tag(*args, **kwargs), expected)

    def test_boundfield_label_tag_no_id(self):
        """
        If a widget has no id, label_tag just returns the text with no
        surrounding <label>.
        """
        class SomeForm(Form):
            field = CharField()
        boundfield = SomeForm(auto_id='')['field']

        self.assertHTMLEqual(boundfield.label_tag(), 'Field:')
        self.assertHTMLEqual(boundfield.label_tag('Custom&'), 'Custom&amp;:')

    def test_boundfield_label_tag_custom_widget_id_for_label(self):
        class CustomIdForLabelTextInput(TextInput):
            def id_for_label(self, id):
                return 'custom_' + id

        class EmptyIdForLabelTextInput(TextInput):
            def id_for_label(self, id):
                return None

        class SomeForm(Form):
            custom = CharField(widget=CustomIdForLabelTextInput)
            empty = CharField(widget=EmptyIdForLabelTextInput)

        form = SomeForm()
        self.assertHTMLEqual(form['custom'].label_tag(), '<label for="custom_id_custom">Custom:</label>')
        self.assertHTMLEqual(form['empty'].label_tag(), '<label>Empty:</label>')

    def test_boundfield_empty_label(self):
        class SomeForm(Form):
            field = CharField(label='')
        boundfield = SomeForm()['field']

        self.assertHTMLEqual(boundfield.label_tag(), '<label for="id_field"></label>')

    def test_boundfield_id_for_label(self):
        class SomeForm(Form):
            field = CharField(label='')

        self.assertEqual(SomeForm()['field'].id_for_label, 'id_field')

    def test_boundfield_id_for_label_override_by_attrs(self):
        """
        If an id is provided in `Widget.attrs`, it overrides the generated ID,
        unless it is `None`.
        """
        class SomeForm(Form):
            field = CharField(widget=TextInput(attrs={'id': 'myCustomID'}))
            field_none = CharField(widget=TextInput(attrs={'id': None}))

        form = SomeForm()
        self.assertEqual(form['field'].id_for_label, 'myCustomID')
        self.assertEqual(form['field_none'].id_for_label, 'id_field_none')

    def test_boundfield_widget_type(self):
        class SomeForm(Form):
            first_name = CharField()
            birthday = SplitDateTimeField(widget=SplitHiddenDateTimeWidget)

        f = SomeForm()
        self.assertEqual(f['first_name'].widget_type, 'text')
        self.assertEqual(f['birthday'].widget_type, 'splithiddendatetime')

    def test_boundfield_css_classes(self):
        form = Person()
        field = form['first_name']
        self.assertEqual(field.css_classes(), '')
        self.assertEqual(field.css_classes(extra_classes=''), '')
        self.assertEqual(field.css_classes(extra_classes='test'), 'test')
        self.assertEqual(field.css_classes(extra_classes='test test'), 'test')

    def test_label_tag_override(self):
        """
        BoundField label_suffix (if provided) overrides Form label_suffix
        """
        class SomeForm(Form):
            field = CharField()
        boundfield = SomeForm(label_suffix='!')['field']

        self.assertHTMLEqual(boundfield.label_tag(label_suffix='$'), '<label for="id_field">Field$</label>')

    def test_field_name(self):
        """#5749 - `field_name` may be used as a key in _html_output()."""
        class SomeForm(Form):
            some_field = CharField()

            def as_p(self):
                return self._html_output(
                    normal_row='<p id="p_%(field_name)s"></p>',
                    error_row='%s',
                    row_ender='</p>',
                    help_text_html=' %s',
                    errors_on_separate_row=True,
                )

        form = SomeForm()
        self.assertHTMLEqual(form.as_p(), '<p id="p_some_field"></p>')

    def test_field_without_css_classes(self):
        """
        `css_classes` may be used as a key in _html_output() (empty classes).
        """
        class SomeForm(Form):
            some_field = CharField()

            def as_p(self):
                return self._html_output(
                    normal_row='<p class="%(css_classes)s"></p>',
                    error_row='%s',
                    row_ender='</p>',
                    help_text_html=' %s',
                    errors_on_separate_row=True,
                )

        form = SomeForm()
        self.assertHTMLEqual(form.as_p(), '<p class=""></p>')

    def test_field_with_css_class(self):
        """
        `css_classes` may be used as a key in _html_output() (class comes
        from required_css_class in this case).
        """
        class SomeForm(Form):
            some_field = CharField()
            required_css_class = 'foo'

            def as_p(self):
                return self._html_output(
                    normal_row='<p class="%(css_classes)s"></p>',
                    error_row='%s',
                    row_ender='</p>',
                    help_text_html=' %s',
                    errors_on_separate_row=True,
                )

        form = SomeForm()
        self.assertHTMLEqual(form.as_p(), '<p class="foo"></p>')

    def test_field_name_with_hidden_input(self):
        """
        BaseForm._html_output() should merge all the hidden input fields and
        put them in the last row.
        """
        class SomeForm(Form):
            hidden1 = CharField(widget=HiddenInput)
            custom = CharField()
            hidden2 = CharField(widget=HiddenInput)

            def as_p(self):
                return self._html_output(
                    normal_row='<p%(html_class_attr)s>%(field)s %(field_name)s</p>',
                    error_row='%s',
                    row_ender='</p>',
                    help_text_html=' %s',
                    errors_on_separate_row=True,
                )

        form = SomeForm()
        self.assertHTMLEqual(
            form.as_p(),
            '<p><input id="id_custom" name="custom" type="text" required> custom'
            '<input id="id_hidden1" name="hidden1" type="hidden">'
            '<input id="id_hidden2" name="hidden2" type="hidden"></p>'
        )

    def test_field_name_with_hidden_input_and_non_matching_row_ender(self):
        """
        BaseForm._html_output() should merge all the hidden input fields and
        put them in the last row ended with the specific row ender.
        """
        class SomeForm(Form):
            hidden1 = CharField(widget=HiddenInput)
            custom = CharField()
            hidden2 = CharField(widget=HiddenInput)

            def as_p(self):
                return self._html_output(
                    normal_row='<p%(html_class_attr)s>%(field)s %(field_name)s</p>',
                    error_row='%s',
                    row_ender='<hr><hr>',
                    help_text_html=' %s',
                    errors_on_separate_row=True
                )

        form = SomeForm()
        self.assertHTMLEqual(
            form.as_p(),
            '<p><input id="id_custom" name="custom" type="text" required> custom</p>\n'
            '<input id="id_hidden1" name="hidden1" type="hidden">'
            '<input id="id_hidden2" name="hidden2" type="hidden"><hr><hr>'
        )

    def test_error_dict(self):
        class MyForm(Form):
            foo = CharField()
            bar = CharField()

            def clean(self):
                raise ValidationError('Non-field error.', code='secret', params={'a': 1, 'b': 2})

        form = MyForm({})
        self.assertIs(form.is_valid(), False)

        errors = form.errors.as_text()
        control = [
            '* foo\n  * This field is required.',
            '* bar\n  * This field is required.',
            '* __all__\n  * Non-field error.',
        ]
        for error in control:
            self.assertIn(error, errors)

        errors = form.errors.as_ul()
        control = [
            '<li>foo<ul class="errorlist"><li>This field is required.</li></ul></li>',
            '<li>bar<ul class="errorlist"><li>This field is required.</li></ul></li>',
            '<li>__all__<ul class="errorlist nonfield"><li>Non-field error.</li></ul></li>',
        ]
        for error in control:
            self.assertInHTML(error, errors)

        errors = form.errors.get_json_data()
        control = {
            'foo': [{'code': 'required', 'message': 'This field is required.'}],
            'bar': [{'code': 'required', 'message': 'This field is required.'}],
            '__all__': [{'code': 'secret', 'message': 'Non-field error.'}]
        }
        self.assertEqual(errors, control)
        self.assertEqual(json.dumps(errors), form.errors.as_json())

    def test_error_dict_as_json_escape_html(self):
        """#21962 - adding html escape flag to ErrorDict"""
        class MyForm(Form):
            foo = CharField()
            bar = CharField()

            def clean(self):
                raise ValidationError(
                    '<p>Non-field error.</p>',
                    code='secret',
                    params={'a': 1, 'b': 2},
                )

        control = {
            'foo': [{'code': 'required', 'message': 'This field is required.'}],
            'bar': [{'code': 'required', 'message': 'This field is required.'}],
            '__all__': [{'code': 'secret', 'message': '<p>Non-field error.</p>'}]
        }

        form = MyForm({})
        self.assertFalse(form.is_valid())

        errors = json.loads(form.errors.as_json())
        self.assertEqual(errors, control)

        escaped_error = '&lt;p&gt;Non-field error.&lt;/p&gt;'
        self.assertEqual(
            form.errors.get_json_data(escape_html=True)['__all__'][0]['message'],
            escaped_error
        )
        errors = json.loads(form.errors.as_json(escape_html=True))
        control['__all__'][0]['message'] = escaped_error
        self.assertEqual(errors, control)

    def test_error_list(self):
        e = ErrorList()
        e.append('Foo')
        e.append(ValidationError('Foo%(bar)s', code='foobar', params={'bar': 'bar'}))

        self.assertIsInstance(e, list)
        self.assertIn('Foo', e)
        self.assertIn('Foo', ValidationError(e))

        self.assertEqual(
            e.as_text(),
            '* Foo\n* Foobar'
        )

        self.assertEqual(
            e.as_ul(),
            '<ul class="errorlist"><li>Foo</li><li>Foobar</li></ul>'
        )

        errors = e.get_json_data()
        self.assertEqual(
            errors,
            [{"message": "Foo", "code": ""}, {"message": "Foobar", "code": "foobar"}]
        )
        self.assertEqual(json.dumps(errors), e.as_json())

    def test_error_list_class_not_specified(self):
        e = ErrorList()
        e.append('Foo')
        e.append(ValidationError('Foo%(bar)s', code='foobar', params={'bar': 'bar'}))
        self.assertEqual(
            e.as_ul(),
            '<ul class="errorlist"><li>Foo</li><li>Foobar</li></ul>'
        )

    def test_error_list_class_has_one_class_specified(self):
        e = ErrorList(error_class='foobar-error-class')
        e.append('Foo')
        e.append(ValidationError('Foo%(bar)s', code='foobar', params={'bar': 'bar'}))
        self.assertEqual(
            e.as_ul(),
            '<ul class="errorlist foobar-error-class"><li>Foo</li><li>Foobar</li></ul>'
        )

    def test_error_list_with_hidden_field_errors_has_correct_class(self):
        class Person(Form):
            first_name = CharField()
            last_name = CharField(widget=HiddenInput)

        p = Person({'first_name': 'John'})
        self.assertHTMLEqual(
            p.as_ul(),
            """<li><ul class="errorlist nonfield">
<li>(Hidden field last_name) This field is required.</li></ul></li><li>
<label for="id_first_name">First name:</label>
<input id="id_first_name" name="first_name" type="text" value="John" required>
<input id="id_last_name" name="last_name" type="hidden"></li>"""
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<ul class="errorlist nonfield"><li>(Hidden field last_name) This field is required.</li></ul>
<p><label for="id_first_name">First name:</label>
<input id="id_first_name" name="first_name" type="text" value="John" required>
<input id="id_last_name" name="last_name" type="hidden"></p>"""
        )
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><td colspan="2"><ul class="errorlist nonfield">
<li>(Hidden field last_name) This field is required.</li></ul></td></tr>
<tr><th><label for="id_first_name">First name:</label></th><td>
<input id="id_first_name" name="first_name" type="text" value="John" required>
<input id="id_last_name" name="last_name" type="hidden"></td></tr>"""
        )

    def test_error_list_with_non_field_errors_has_correct_class(self):
        class Person(Form):
            first_name = CharField()
            last_name = CharField()

            def clean(self):
                raise ValidationError('Generic validation error')

        p = Person({'first_name': 'John', 'last_name': 'Lennon'})
        self.assertHTMLEqual(
            str(p.non_field_errors()),
            '<ul class="errorlist nonfield"><li>Generic validation error</li></ul>'
        )
        self.assertHTMLEqual(
            p.as_ul(),
            """<li>
<ul class="errorlist nonfield"><li>Generic validation error</li></ul></li>
<li><label for="id_first_name">First name:</label>
<input id="id_first_name" name="first_name" type="text" value="John" required></li>
<li><label for="id_last_name">Last name:</label>
<input id="id_last_name" name="last_name" type="text" value="Lennon" required></li>"""
        )
        self.assertHTMLEqual(
            p.non_field_errors().as_text(),
            '* Generic validation error'
        )
        self.assertHTMLEqual(
            p.as_p(),
            """<ul class="errorlist nonfield"><li>Generic validation error</li></ul>
<p><label for="id_first_name">First name:</label>
<input id="id_first_name" name="first_name" type="text" value="John" required></p>
<p><label for="id_last_name">Last name:</label>
<input id="id_last_name" name="last_name" type="text" value="Lennon" required></p>"""
        )
        self.assertHTMLEqual(
            p.as_table(),
            """<tr><td colspan="2"><ul class="errorlist nonfield"><li>Generic validation error</li></ul></td></tr>
<tr><th><label for="id_first_name">First name:</label></th><td>
<input id="id_first_name" name="first_name" type="text" value="John" required></td></tr>
<tr><th><label for="id_last_name">Last name:</label></th><td>
<input id="id_last_name" name="last_name" type="text" value="Lennon" required></td></tr>"""
        )

    def test_errorlist_override(self):
        class DivErrorList(ErrorList):
            def __str__(self):
                return self.as_divs()

            def as_divs(self):
                if not self:
                    return ''
                return '<div class="errorlist">%s</div>' % ''.join(
                    '<div class="error">%s</div>' % e for e in self)

        class CommentForm(Form):
            name = CharField(max_length=50, required=False)
            email = EmailField()
            comment = CharField()

        data = {'email': 'invalid'}
        f = CommentForm(data, auto_id=False, error_class=DivErrorList)
        self.assertHTMLEqual(f.as_p(), """<p>Name: <input type="text" name="name" maxlength="50"></p>
<div class="errorlist"><div class="error">Enter a valid email address.</div></div>
<p>Email: <input type="email" name="email" value="invalid" required></p>
<div class="errorlist"><div class="error">This field is required.</div></div>
<p>Comment: <input type="text" name="comment" required></p>""")

    def test_error_escaping(self):
        class TestForm(Form):
            hidden = CharField(widget=HiddenInput(), required=False)
            visible = CharField()

            def clean_hidden(self):
                raise ValidationError('Foo & "bar"!')

            clean_visible = clean_hidden

        form = TestForm({'hidden': 'a', 'visible': 'b'})
        form.is_valid()
        self.assertHTMLEqual(
            form.as_ul(),
            '<li><ul class="errorlist nonfield"><li>(Hidden field hidden) Foo &amp; &quot;bar&quot;!</li></ul></li>'
            '<li><ul class="errorlist"><li>Foo &amp; &quot;bar&quot;!</li></ul>'
            '<label for="id_visible">Visible:</label> '
            '<input type="text" name="visible" value="b" id="id_visible" required>'
            '<input type="hidden" name="hidden" value="a" id="id_hidden"></li>'
        )

    def test_baseform_repr(self):
        """
        BaseForm.__repr__() should contain some basic information about the
        form.
        """
        p = Person()
        self.assertEqual(repr(p), "<Person bound=False, valid=Unknown, fields=(first_name;last_name;birthday)>")
        p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': '1940-10-9'})
        self.assertEqual(repr(p), "<Person bound=True, valid=Unknown, fields=(first_name;last_name;birthday)>")
        p.is_valid()
        self.assertEqual(repr(p), "<Person bound=True, valid=True, fields=(first_name;last_name;birthday)>")
        p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': 'fakedate'})
        p.is_valid()
        self.assertEqual(repr(p), "<Person bound=True, valid=False, fields=(first_name;last_name;birthday)>")

    def test_baseform_repr_dont_trigger_validation(self):
        """
        BaseForm.__repr__() shouldn't trigger the form validation.
        """
        p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': 'fakedate'})
        repr(p)
        with self.assertRaises(AttributeError):
            p.cleaned_data
        self.assertFalse(p.is_valid())
        self.assertEqual(p.cleaned_data, {'first_name': 'John', 'last_name': 'Lennon'})

    def test_accessing_clean(self):
        class UserForm(Form):
            username = CharField(max_length=10)
            password = CharField(widget=PasswordInput)

            def clean(self):
                data = self.cleaned_data

                if not self.errors:
                    data['username'] = data['username'].lower()

                return data

        f = UserForm({'username': 'SirRobin', 'password': 'blue'})
        self.assertTrue(f.is_valid())
        self.assertEqual(f.cleaned_data['username'], 'sirrobin')

    def test_changing_cleaned_data_nothing_returned(self):
        class UserForm(Form):
            username = CharField(max_length=10)
            password = CharField(widget=PasswordInput)

            def clean(self):
                self.cleaned_data['username'] = self.cleaned_data['username'].lower()
                # don't return anything

        f = UserForm({'username': 'SirRobin', 'password': 'blue'})
        self.assertTrue(f.is_valid())
        self.assertEqual(f.cleaned_data['username'], 'sirrobin')

    def test_changing_cleaned_data_in_clean(self):
        class UserForm(Form):
            username = CharField(max_length=10)
            password = CharField(widget=PasswordInput)

            def clean(self):
                data = self.cleaned_data

                # Return a different dict. We have not changed self.cleaned_data.
                return {
                    'username': data['username'].lower(),
                    'password': 'this_is_not_a_secret',
                }

        f = UserForm({'username': 'SirRobin', 'password': 'blue'})
        self.assertTrue(f.is_valid())
        self.assertEqual(f.cleaned_data['username'], 'sirrobin')

    def test_multipart_encoded_form(self):
        class FormWithoutFile(Form):
            username = CharField()

        class FormWithFile(Form):
            username = CharField()
            file = FileField()

        class FormWithImage(Form):
            image = ImageField()

        self.assertFalse(FormWithoutFile().is_multipart())
        self.assertTrue(FormWithFile().is_multipart())
        self.assertTrue(FormWithImage().is_multipart())

    def test_html_safe(self):
        class SimpleForm(Form):
            username = CharField()

        form = SimpleForm()
        self.assertTrue(hasattr(SimpleForm, '__html__'))
        self.assertEqual(str(form), form.__html__())
        self.assertTrue(hasattr(form['username'], '__html__'))
        self.assertEqual(str(form['username']), form['username'].__html__())

    def test_use_required_attribute_true(self):
        class MyForm(Form):
            use_required_attribute = True
            f1 = CharField(max_length=30)
            f2 = CharField(max_length=30, required=False)
            f3 = CharField(widget=Textarea)
            f4 = ChoiceField(choices=[('P', 'Python'), ('J', 'Java')])

        form = MyForm()
        self.assertHTMLEqual(
            form.as_p(),
            '<p><label for="id_f1">F1:</label> <input id="id_f1" maxlength="30" name="f1" type="text" required></p>'
            '<p><label for="id_f2">F2:</label> <input id="id_f2" maxlength="30" name="f2" type="text"></p>'
            '<p><label for="id_f3">F3:</label> <textarea cols="40" id="id_f3" name="f3" rows="10" required>'
            '</textarea></p>'
            '<p><label for="id_f4">F4:</label> <select id="id_f4" name="f4">'
            '<option value="P">Python</option>'
            '<option value="J">Java</option>'
            '</select></p>',
        )
        self.assertHTMLEqual(
            form.as_ul(),
            '<li><label for="id_f1">F1:</label> '
            '<input id="id_f1" maxlength="30" name="f1" type="text" required></li>'
            '<li><label for="id_f2">F2:</label> <input id="id_f2" maxlength="30" name="f2" type="text"></li>'
            '<li><label for="id_f3">F3:</label> <textarea cols="40" id="id_f3" name="f3" rows="10" required>'
            '</textarea></li>'
            '<li><label for="id_f4">F4:</label> <select id="id_f4" name="f4">'
            '<option value="P">Python</option>'
            '<option value="J">Java</option>'
            '</select></li>',
        )
        self.assertHTMLEqual(
            form.as_table(),
            '<tr><th><label for="id_f1">F1:</label></th>'
            '<td><input id="id_f1" maxlength="30" name="f1" type="text" required></td></tr>'
            '<tr><th><label for="id_f2">F2:</label></th>'
            '<td><input id="id_f2" maxlength="30" name="f2" type="text"></td></tr>'
            '<tr><th><label for="id_f3">F3:</label></th>'
            '<td><textarea cols="40" id="id_f3" name="f3" rows="10" required>'
            '</textarea></td></tr>'
            '<tr><th><label for="id_f4">F4:</label></th><td><select id="id_f4" name="f4">'
            '<option value="P">Python</option>'
            '<option value="J">Java</option>'
            '</select></td></tr>',
        )

    def test_use_required_attribute_false(self):
        class MyForm(Form):
            use_required_attribute = False
            f1 = CharField(max_length=30)
            f2 = CharField(max_length=30, required=False)
            f3 = CharField(widget=Textarea)
            f4 = ChoiceField(choices=[('P', 'Python'), ('J', 'Java')])

        form = MyForm()
        self.assertHTMLEqual(
            form.as_p(),
            '<p><label for="id_f1">F1:</label> <input id="id_f1" maxlength="30" name="f1" type="text"></p>'
            '<p><label for="id_f2">F2:</label> <input id="id_f2" maxlength="30" name="f2" type="text"></p>'
            '<p><label for="id_f3">F3:</label> <textarea cols="40" id="id_f3" name="f3" rows="10">'
            '</textarea></p>'
            '<p><label for="id_f4">F4:</label> <select id="id_f4" name="f4">'
            '<option value="P">Python</option>'
            '<option value="J">Java</option>'
            '</select></p>',
        )
        self.assertHTMLEqual(
            form.as_ul(),
            '<li><label for="id_f1">F1:</label> <input id="id_f1" maxlength="30" name="f1" type="text"></li>'
            '<li><label for="id_f2">F2:</label> <input id="id_f2" maxlength="30" name="f2" type="text"></li>'
            '<li><label for="id_f3">F3:</label> <textarea cols="40" id="id_f3" name="f3" rows="10">'
            '</textarea></li>'
            '<li><label for="id_f4">F4:</label> <select id="id_f4" name="f4">'
            '<option value="P">Python</option>'
            '<option value="J">Java</option>'
            '</select></li>',
        )
        self.assertHTMLEqual(
            form.as_table(),
            '<tr><th><label for="id_f1">F1:</label></th>'
            '<td><input id="id_f1" maxlength="30" name="f1" type="text"></td></tr>'
            '<tr><th><label for="id_f2">F2:</label></th>'
            '<td><input id="id_f2" maxlength="30" name="f2" type="text"></td></tr>'
            '<tr><th><label for="id_f3">F3:</label></th><td><textarea cols="40" id="id_f3" name="f3" rows="10">'
            '</textarea></td></tr>'
            '<tr><th><label for="id_f4">F4:</label></th><td><select id="id_f4" name="f4">'
            '<option value="P">Python</option>'
            '<option value="J">Java</option>'
            '</select></td></tr>',
        )

    def test_only_hidden_fields(self):
        # A form with *only* hidden fields that has errors is going to be very unusual.
        class HiddenForm(Form):
            data = IntegerField(widget=HiddenInput)

        f = HiddenForm({})
        self.assertHTMLEqual(
            f.as_p(),
            '<ul class="errorlist nonfield">'
            '<li>(Hidden field data) This field is required.</li></ul>\n<p> '
            '<input type="hidden" name="data" id="id_data"></p>'
        )
        self.assertHTMLEqual(
            f.as_table(),
            '<tr><td colspan="2"><ul class="errorlist nonfield">'
            '<li>(Hidden field data) This field is required.</li></ul>'
            '<input type="hidden" name="data" id="id_data"></td></tr>'
        )

    def test_field_named_data(self):
        class DataForm(Form):
            data = CharField(max_length=10)

        f = DataForm({'data': 'xyzzy'})
        self.assertTrue(f.is_valid())
        self.assertEqual(f.cleaned_data, {'data': 'xyzzy'})

    def test_empty_data_files_multi_value_dict(self):
        p = Person()
        self.assertIsInstance(p.data, MultiValueDict)
        self.assertIsInstance(p.files, MultiValueDict)

    def test_field_deep_copy_error_messages(self):
        class CustomCharField(CharField):
            def __init__(self, **kwargs):
                kwargs['error_messages'] = {'invalid': 'Form custom error message.'}
                super().__init__(**kwargs)

        field = CustomCharField()
        field_copy = copy.deepcopy(field)
        self.assertIsInstance(field_copy, CustomCharField)
        self.assertIsNot(field_copy.error_messages, field.error_messages)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 04:00:41,891 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly requested the full content of `tests/forms_tests/tests/test_error_messages.py`.\n   - This context represents the entire file content as provided.\n2. Extended relevance:\n   - This file contains numerous test cases for how different form fields handle and render custom error messages, which is directly related to the overall topic of form error handling.', relative_path='tests/forms_tests/tests/test_error_messages.py', start_line=1, end_line=323), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user asked for test methods that test the rendering of `non_field_errors`.\n   - This test method, `test_validating_multiple_fields`, demonstrates how to raise a `ValidationError` that is not tied to a specific field, resulting in a non-field error.\n2. Extended relevance:\n   - It explicitly asserts the HTML output for `as_table()` and `as_ul()`, checking for the presence of `<ul class="errorlist nonfield">`, which is the exact rendering mechanism for `non_field_errors` that the user is interested in.', relative_path='tests/forms_tests/tests/test_forms.py', start_line=1338, end_line=1478), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user wants to see tests for rendering `non_field_errors`.\n   - This test method demonstrates that errors for hidden fields are rendered as non-field errors.\n2. Extended relevance:\n   - It includes assertions (`assertHTMLEqual`) that check for the specific HTML structure `<ul class="errorlist nonfield">...</ul>` when a hidden field has an error, which is a key example of how `non_field_errors` are rendered.', relative_path='tests/forms_tests/tests/test_forms.py', start_line=2133, end_line=2228), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user is looking for tests related to `non_field_errors` rendering.\n   - This test method explicitly uses the `{{ form.non_field_errors }}` template variable.\n2. Extended relevance:\n   - It shows how to display non-field errors in a template and asserts that the rendered HTML includes the `<ul class="errorlist nonfield">`, providing a clear example of template-based rendering of `non_field_errors`.', relative_path='tests/forms_tests/tests/test_forms.py', start_line=2850, end_line=2980), ContextOutput(reasoning='1. Query requirement analysis:\n   - The query asks for tests that render `non_field_errors`.\n   - This test confirms that errors from hidden fields are rendered within a list that has the `nonfield` class.\n2. Extended relevance:\n   - It provides assertions for `as_ul`, `as_p`, and `as_table`, showing how hidden field errors are consistently treated as non-field errors across different rendering methods.', relative_path='tests/forms_tests/tests/test_forms.py', start_line=3433, end_line=3468), ContextOutput(reasoning='1. Query requirement analysis:\n   - This test method directly addresses the user\'s query about testing the rendering of `non_field_errors`.\n   - It specifically calls `p.non_field_errors()` and checks its output.\n2. Extended relevance:\n   - It asserts that the output of `non_field_errors()` and the full form rendering methods (`as_ul`, `as_p`, `as_table`) contain the `<ul class="errorlist nonfield">` structure, which is the core of what the user needs to understand.', relative_path='tests/forms_tests/tests/test_forms.py', start_line=3470, end_line=3519)]
2025-12-24 04:00:41,897 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 6 contexts to memory for query: Please provide the full content of `tests/forms_tests/tests/test_error_messages.py` and any test methods from `tests/forms_tests/tests/test_forms.py` that test the rendering of `non_field_errors`.
2025-12-24 04:00:41,897 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 04:00:41,897 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 04:00:41,897 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 6 new contexts to 2 existing contexts
2025-12-24 04:00:41,898 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 8 total contexts (removed 0 duplicates)
2025-12-24 04:00:41,899 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_block_error.html
    |   |   ├── test_extends_block_error_parent.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Add `nonform` CSS class for non form errors in FormSets

Description: Description
	 
		(last modified by Ties Jan Hefting)
	 
Forms add the nonfield CSS class for non field errors in ErrorList instances. This is documented in a section on ​rendering form error messages. Similarly, in FormSets I'd expect to see the nonform CSS class added for non form errors. This would allow a custom ErrorList to make a distinction in form field errors, non field errors (forms) and non form errors (FormSets) when rendering error messages. Therefore I'd suggest to add this nonform CSS class and document it for developers to use.

Patch information:
diff --git a/django/forms/formsets.py b/django/forms/formsets.py
index a89c35599f..1b0d4554e0 100644
--- a/django/forms/formsets.py
+++ b/django/forms/formsets.py
@@ -333,7 +333,7 @@ class BaseFormSet:
         self._non_form_errors.
         """
         self._errors = []
-        self._non_form_errors = self.error_class()
+        self._non_form_errors = self.error_class(error_class='nonform')
         empty_forms_count = 0
 
         if not self.is_bound:  # Stop further processing.
@@ -380,7 +380,7 @@ class BaseFormSet:
             # Give self.clean() a chance to do cross-form validation.
             self.clean()
         except ValidationError as e:
-            self._non_form_errors = self.error_class(e.error_list)
+            self._non_form_errors = self.error_class(e.error_list, error_class='nonform')
 
     def clean(self):
         """
diff --git a/docs/ref/forms/api.txt b/docs/ref/forms/api.txt
index 5df969232a..013193fe1e 100644
--- a/docs/ref/forms/api.txt
+++ b/docs/ref/forms/api.txt
@@ -210,6 +210,13 @@ This includes ``ValidationError``\s that are raised in :meth:`Form.clean()
 <django.forms.Form.clean>` and errors added using :meth:`Form.add_error(None,
 "...") <django.forms.Form.add_error>`.
 
+Non-form errors on formsets
+---------------------------
+
+Formset-level errors returned by :meth:`~django.forms.formsets.BaseFormSet.non_form_errors`
+are rendered with an additional ``nonform`` CSS class (e.g., ``<ul class="errorlist nonform">``)
+to distinguish them from field-specific and form-level non-field errors.
+
 Behavior of unbound forms
 -------------------------
 
diff --git a/docs/topics/forms/formsets.txt b/docs/topics/forms/formsets.txt
index 1f2c7c3fad..fbce2f5393 100644
--- a/docs/topics/forms/formsets.txt
+++ b/docs/topics/forms/formsets.txt
@@ -365,6 +365,16 @@ The formset ``clean`` method is called after all the ``Form.clean`` methods
 have been called. The errors will be found using the ``non_form_errors()``
 method on the formset.
 
+Non-form errors will be rendered with an additional class of ``nonform`` to
+help distinguish them from field-specific errors. For example,
+``{{ formset.non_form_errors }}`` would look like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 Validating the number of forms in a formset
 ===========================================
 
diff --git a/docs/topics/forms/index.txt b/docs/topics/forms/index.txt
index e55b6d7bf2..ebc3145986 100644
--- a/docs/topics/forms/index.txt
+++ b/docs/topics/forms/index.txt
@@ -616,6 +616,16 @@ errors. For example, ``{{ form.non_field_errors }}`` would look like:
         <li>Generic validation error</li>
     </ul>
 
+Similarly, non-form errors on formsets will be rendered with an additional
+class of ``nonform``. For example, ``{{ formset.non_form_errors }}`` would look
+like:
+
+.. code-block:: html+django
+
+    <ul class="errorlist nonform">
+        <li>Generic validation error</li>
+    </ul>
+
 See :doc:`/ref/forms/api` for more on errors, styling, and working with form
 attributes in templates.
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/forms_tests/tests/test_formsets.py` and `tests/forms_tests/tests/test_forms.py`.
Extra Requirements: 
Purpose: I need to find existing test cases that check the rendering of formset and form errors, which can be adapted to test the new `nonform` CSS class.

Previous refined query 2:
Essential Query: Please provide the full content of `tests/forms_tests/tests/test_error_messages.py` and any test methods from `tests/forms_tests/tests/test_forms.py` that test the rendering of `non_field_errors`.
Extra Requirements: 
Purpose: This will provide examples of how error list CSS classes are tested, which is necessary to write a test for the new `nonform` class.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/forms_tests/tests/test_error_messages.py
Line number range: 1 - 323
Content:
1. from django.core.exceptions import ValidationError
2. from django.core.files.uploadedfile import SimpleUploadedFile
3. from django.forms import (
4.     BooleanField, CharField, ChoiceField, DateField, DateTimeField,
5.     DecimalField, EmailField, FileField, FloatField, Form,
6.     GenericIPAddressField, IntegerField, ModelChoiceField,
7.     ModelMultipleChoiceField, MultipleChoiceField, RegexField,
8.     SplitDateTimeField, TimeField, URLField, utils,
9. )
10. from django.template import Context, Template
11. from django.test import SimpleTestCase, TestCase
12. from django.utils.safestring import mark_safe
13. 
14. from ..models import ChoiceModel
15. 
16. 
17. class AssertFormErrorsMixin:
18.     def assertFormErrors(self, expected, the_callable, *args, **kwargs):
19.         with self.assertRaises(ValidationError) as cm:
20.             the_callable(*args, **kwargs)
21.         self.assertEqual(cm.exception.messages, expected)
22. 
23. 
24. class FormsErrorMessagesTestCase(SimpleTestCase, AssertFormErrorsMixin):
25.     def test_charfield(self):
26.         e = {
27.             'required': 'REQUIRED',
28.             'min_length': 'LENGTH %(show_value)s, MIN LENGTH %(limit_value)s',
29.             'max_length': 'LENGTH %(show_value)s, MAX LENGTH %(limit_value)s',
30.         }
31.         f = CharField(min_length=5, max_length=10, error_messages=e)
32.         self.assertFormErrors(['REQUIRED'], f.clean, '')
33.         self.assertFormErrors(['LENGTH 4, MIN LENGTH 5'], f.clean, '1234')
34.         self.assertFormErrors(['LENGTH 11, MAX LENGTH 10'], f.clean, '12345678901')
35. 
36.     def test_integerfield(self):
37.         e = {
38.             'required': 'REQUIRED',
39.             'invalid': 'INVALID',
40.             'min_value': 'MIN VALUE IS %(limit_value)s',
41.             'max_value': 'MAX VALUE IS %(limit_value)s',
42.         }
43.         f = IntegerField(min_value=5, max_value=10, error_messages=e)
44.         self.assertFormErrors(['REQUIRED'], f.clean, '')
45.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
46.         self.assertFormErrors(['MIN VALUE IS 5'], f.clean, '4')
47.         self.assertFormErrors(['MAX VALUE IS 10'], f.clean, '11')
48. 
49.     def test_floatfield(self):
50.         e = {
51.             'required': 'REQUIRED',
52.             'invalid': 'INVALID',
53.             'min_value': 'MIN VALUE IS %(limit_value)s',
54.             'max_value': 'MAX VALUE IS %(limit_value)s',
55.         }
56.         f = FloatField(min_value=5, max_value=10, error_messages=e)
57.         self.assertFormErrors(['REQUIRED'], f.clean, '')
58.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
59.         self.assertFormErrors(['MIN VALUE IS 5'], f.clean, '4')
60.         self.assertFormErrors(['MAX VALUE IS 10'], f.clean, '11')
61. 
62.     def test_decimalfield(self):
63.         e = {
64.             'required': 'REQUIRED',
65.             'invalid': 'INVALID',
66.             'min_value': 'MIN VALUE IS %(limit_value)s',
67.             'max_value': 'MAX VALUE IS %(limit_value)s',
68.             'max_digits': 'MAX DIGITS IS %(max)s',
69.             'max_decimal_places': 'MAX DP IS %(max)s',
70.             'max_whole_digits': 'MAX DIGITS BEFORE DP IS %(max)s',
71.         }
72.         f = DecimalField(min_value=5, max_value=10, error_messages=e)
73.         self.assertFormErrors(['REQUIRED'], f.clean, '')
74.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
75.         self.assertFormErrors(['MIN VALUE IS 5'], f.clean, '4')
76.         self.assertFormErrors(['MAX VALUE IS 10'], f.clean, '11')
77. 
78.         f2 = DecimalField(max_digits=4, decimal_places=2, error_messages=e)
79.         self.assertFormErrors(['MAX DIGITS IS 4'], f2.clean, '123.45')
80.         self.assertFormErrors(['MAX DP IS 2'], f2.clean, '1.234')
81.         self.assertFormErrors(['MAX DIGITS BEFORE DP IS 2'], f2.clean, '123.4')
82. 
83.     def test_datefield(self):
84.         e = {
85.             'required': 'REQUIRED',
86.             'invalid': 'INVALID',
87.         }
88.         f = DateField(error_messages=e)
89.         self.assertFormErrors(['REQUIRED'], f.clean, '')
90.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
91. 
92.     def test_timefield(self):
93.         e = {
94.             'required': 'REQUIRED',
95.             'invalid': 'INVALID',
96.         }
97.         f = TimeField(error_messages=e)
98.         self.assertFormErrors(['REQUIRED'], f.clean, '')
99.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
100. 
101.     def test_datetimefield(self):
102.         e = {
103.             'required': 'REQUIRED',
104.             'invalid': 'INVALID',
105.         }
106.         f = DateTimeField(error_messages=e)
107.         self.assertFormErrors(['REQUIRED'], f.clean, '')
108.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
109. 
110.     def test_regexfield(self):
111.         e = {
112.             'required': 'REQUIRED',
113.             'invalid': 'INVALID',
114.             'min_length': 'LENGTH %(show_value)s, MIN LENGTH %(limit_value)s',
115.             'max_length': 'LENGTH %(show_value)s, MAX LENGTH %(limit_value)s',
116.         }
117.         f = RegexField(r'^[0-9]+$', min_length=5, max_length=10, error_messages=e)
118.         self.assertFormErrors(['REQUIRED'], f.clean, '')
119.         self.assertFormErrors(['INVALID'], f.clean, 'abcde')
120.         self.assertFormErrors(['LENGTH 4, MIN LENGTH 5'], f.clean, '1234')
121.         self.assertFormErrors(['LENGTH 11, MAX LENGTH 10'], f.clean, '12345678901')
122. 
123.     def test_emailfield(self):
124.         e = {
125.             'required': 'REQUIRED',
126.             'invalid': 'INVALID',
127.             'min_length': 'LENGTH %(show_value)s, MIN LENGTH %(limit_value)s',
128.             'max_length': 'LENGTH %(show_value)s, MAX LENGTH %(limit_value)s',
129.         }
130.         f = EmailField(min_length=8, max_length=10, error_messages=e)
131.         self.assertFormErrors(['REQUIRED'], f.clean, '')
132.         self.assertFormErrors(['INVALID'], f.clean, 'abcdefgh')
133.         self.assertFormErrors(['LENGTH 7, MIN LENGTH 8'], f.clean, 'a@b.com')
134.         self.assertFormErrors(['LENGTH 11, MAX LENGTH 10'], f.clean, 'aye@bee.com')
135. 
136.     def test_filefield(self):
137.         e = {
138.             'required': 'REQUIRED',
139.             'invalid': 'INVALID',
140.             'missing': 'MISSING',
141.             'empty': 'EMPTY FILE',
142.         }
143.         f = FileField(error_messages=e)
144.         self.assertFormErrors(['REQUIRED'], f.clean, '')
145.         self.assertFormErrors(['INVALID'], f.clean, 'abc')
146.         self.assertFormErrors(['EMPTY FILE'], f.clean, SimpleUploadedFile('name', None))
147.         self.assertFormErrors(['EMPTY FILE'], f.clean, SimpleUploadedFile('name', ''))
148. 
149.     def test_urlfield(self):
150.         e = {
151.             'required': 'REQUIRED',
152.             'invalid': 'INVALID',
153.             'max_length': '"%(value)s" has more than %(limit_value)d characters.',
154.         }
155.         f = URLField(error_messages=e, max_length=17)
156.         self.assertFormErrors(['REQUIRED'], f.clean, '')
157.         self.assertFormErrors(['INVALID'], f.clean, 'abc.c')
158.         self.assertFormErrors(
159.             ['"http://djangoproject.com" has more than 17 characters.'],
160.             f.clean,
161.             'djangoproject.com'
162.         )
163. 
164.     def test_booleanfield(self):
165.         e = {
166.             'required': 'REQUIRED',
167.         }
168.         f = BooleanField(error_messages=e)
169.         self.assertFormErrors(['REQUIRED'], f.clean, '')
170. 
171.     def test_choicefield(self):
172.         e = {
173.             'required': 'REQUIRED',
174.             'invalid_choice': '%(value)s IS INVALID CHOICE',
175.         }
176.         f = ChoiceField(choices=[('a', 'aye')], error_messages=e)
177.         self.assertFormErrors(['REQUIRED'], f.clean, '')
178.         self.assertFormErrors(['b IS INVALID CHOICE'], f.clean, 'b')
179. 
180.     def test_multiplechoicefield(self):
181.         e = {
182.             'required': 'REQUIRED',
183.             'invalid_choice': '%(value)s IS INVALID CHOICE',
184.             'invalid_list': 'NOT A LIST',
185.         }
186.         f = MultipleChoiceField(choices=[('a', 'aye')], error_messages=e)
187.         self.assertFormErrors(['REQUIRED'], f.clean, '')
188.         self.assertFormErrors(['NOT A LIST'], f.clean, 'b')
189.         self.assertFormErrors(['b IS INVALID CHOICE'], f.clean, ['b'])
190. 
191.     def test_splitdatetimefield(self):
192.         e = {
193.             'required': 'REQUIRED',
194.             'invalid_date': 'INVALID DATE',
195.             'invalid_time': 'INVALID TIME',
196.         }
197.         f = SplitDateTimeField(error_messages=e)
198.         self.assertFormErrors(['REQUIRED'], f.clean, '')
199.         self.assertFormErrors(['INVALID DATE', 'INVALID TIME'], f.clean, ['a', 'b'])
200. 
201.     def test_generic_ipaddressfield(self):
202.         e = {
203.             'required': 'REQUIRED',
204.             'invalid': 'INVALID IP ADDRESS',
205.         }
206.         f = GenericIPAddressField(error_messages=e)
207.         self.assertFormErrors(['REQUIRED'], f.clean, '')
208.         self.assertFormErrors(['INVALID IP ADDRESS'], f.clean, '127.0.0')
209. 
210.     def test_subclassing_errorlist(self):
211.         class TestForm(Form):
212.             first_name = CharField()
213.             last_name = CharField()
214.             birthday = DateField()
215. 
216.             def clean(self):
217.                 raise ValidationError("I like to be awkward.")
218. 
219.         class CustomErrorList(utils.ErrorList):
220.             def __str__(self):
221.                 return self.as_divs()
222. 
223.             def as_divs(self):
224.                 if not self:
225.                     return ''
226.                 return mark_safe('<div class="error">%s</div>' % ''.join('<p>%s</p>' % e for e in self))
227. 
228.         # This form should print errors the default way.
229.         form1 = TestForm({'first_name': 'John'})
230.         self.assertHTMLEqual(
231.             str(form1['last_name'].errors),
232.             '<ul class="errorlist"><li>This field is required.</li></ul>'
233.         )
234.         self.assertHTMLEqual(
235.             str(form1.errors['__all__']),
236.             '<ul class="errorlist nonfield"><li>I like to be awkward.</li></ul>'
237.         )
238. 
239.         # This one should wrap error groups in the customized way.
240.         form2 = TestForm({'first_name': 'John'}, error_class=CustomErrorList)
241.         self.assertHTMLEqual(str(form2['last_name'].errors), '<div class="error"><p>This field is required.</p></div>')
242.         self.assertHTMLEqual(str(form2.errors['__all__']), '<div class="error"><p>I like to be awkward.</p></div>')
243. 
244.     def test_error_messages_escaping(self):
245.         # The forms layer doesn't escape input values directly because error
246.         # messages might be presented in non-HTML contexts. Instead, the
247.         # message is marked for escaping by the template engine, so a template
248.         # is needed to trigger the escaping.
249.         t = Template('{{ form.errors }}')
250. 
251.         class SomeForm(Form):
252.             field = ChoiceField(choices=[('one', 'One')])
253. 
254.         f = SomeForm({'field': '<script>'})
255.         self.assertHTMLEqual(
256.             t.render(Context({'form': f})),
257.             '<ul class="errorlist"><li>field<ul class="errorlist">'
258.             '<li>Select a valid choice. &lt;script&gt; is not one of the '
259.             'available choices.</li></ul></li></ul>'
260.         )
261. 
262.         class SomeForm(Form):
263.             field = MultipleChoiceField(choices=[('one', 'One')])
264. 
265.         f = SomeForm({'field': ['<script>']})
266.         self.assertHTMLEqual(
267.             t.render(Context({'form': f})),
268.             '<ul class="errorlist"><li>field<ul class="errorlist">'
269.             '<li>Select a valid choice. &lt;script&gt; is not one of the '
270.             'available choices.</li></ul></li></ul>'
271.         )
272. 
273.         class SomeForm(Form):
274.             field = ModelMultipleChoiceField(ChoiceModel.objects.all())
275. 
276.         f = SomeForm({'field': ['<script>']})
277.         self.assertHTMLEqual(
278.             t.render(Context({'form': f})),
279.             '<ul class="errorlist"><li>field<ul class="errorlist">'
280.             '<li>“&lt;script&gt;” is not a valid value.</li>'
281.             '</ul></li></ul>'
282.         )
283. 
284. 
285. class ModelChoiceFieldErrorMessagesTestCase(TestCase, AssertFormErrorsMixin):
286.     def test_modelchoicefield(self):
287.         # Create choices for the model choice field tests below.
288.         ChoiceModel.objects.create(pk=1, name='a')
289.         ChoiceModel.objects.create(pk=2, name='b')
290.         ChoiceModel.objects.create(pk=3, name='c')
291. 
292.         # ModelChoiceField
293.         e = {
294.             'required': 'REQUIRED',
295.             'invalid_choice': 'INVALID CHOICE',
296.         }
297.         f = ModelChoiceField(queryset=ChoiceModel.objects.all(), error_messages=e)
298.         self.assertFormErrors(['REQUIRED'], f.clean, '')
299.         self.assertFormErrors(['INVALID CHOICE'], f.clean, '4')
300. 
301.         # ModelMultipleChoiceField
302.         e = {
303.             'required': 'REQUIRED',
304.             'invalid_choice': '%(value)s IS INVALID CHOICE',
305.             'invalid_list': 'NOT A LIST OF VALUES',
306.         }
307.         f = ModelMultipleChoiceField(queryset=ChoiceModel.objects.all(), error_messages=e)
308.         self.assertFormErrors(['REQUIRED'], f.clean, '')
309.         self.assertFormErrors(['NOT A LIST OF VALUES'], f.clean, '3')
310.         self.assertFormErrors(['4 IS INVALID CHOICE'], f.clean, ['4'])
311. 
312.     def test_modelchoicefield_value_placeholder(self):
313.         f = ModelChoiceField(
314.             queryset=ChoiceModel.objects.all(),
315.             error_messages={
316.                 'invalid_choice': '"%(value)s" is not one of the available choices.',
317.             },
318.         )
319.         self.assertFormErrors(
320.             ['"invalid" is not one of the available choices.'],
321.             f.clean,
322.             'invalid',
323.         )


File: tests/forms_tests/tests/test_forms.py
Line number range: 1 - 500
Content:
1. import copy
2. import datetime
3. import json
4. import uuid
5. 
6. from django.core.exceptions import NON_FIELD_ERRORS
7. from django.core.files.uploadedfile import SimpleUploadedFile
8. from django.core.validators import MaxValueValidator, RegexValidator
9. from django.forms import (
10.     BooleanField, CharField, CheckboxSelectMultiple, ChoiceField, DateField,
11.     DateTimeField, EmailField, FileField, FileInput, FloatField, Form,
12.     HiddenInput, ImageField, IntegerField, MultipleChoiceField,
13.     MultipleHiddenInput, MultiValueField, NullBooleanField, PasswordInput,
14.     RadioSelect, Select, SplitDateTimeField, SplitHiddenDateTimeWidget,
15.     Textarea, TextInput, TimeField, ValidationError, forms,
16. )
17. from django.forms.renderers import DjangoTemplates, get_default_renderer
18. from django.forms.utils import ErrorList
19. from django.http import QueryDict
20. from django.template import Context, Template
21. from django.test import SimpleTestCase
22. from django.utils.datastructures import MultiValueDict
23. from django.utils.safestring import mark_safe
24. 
25. 
26. class Person(Form):
27.     first_name = CharField()
28.     last_name = CharField()
29.     birthday = DateField()
30. 
31. 
32. class PersonNew(Form):
33.     first_name = CharField(widget=TextInput(attrs={'id': 'first_name_id'}))
34.     last_name = CharField()
35.     birthday = DateField()
36. 
37. 
38. class MultiValueDictLike(dict):
39.     def getlist(self, key):
40.         return [self[key]]
41. 
42. 
43. class FormsTestCase(SimpleTestCase):
44.     # A Form is a collection of Fields. It knows how to validate a set of data and it
45.     # knows how to render itself in a couple of default ways (e.g., an HTML table).
46.     # You can pass it data in __init__(), as a dictionary.
47. 
48.     def test_form(self):
49.         # Pass a dictionary to a Form's __init__().
50.         p = Person({'first_name': 'John', 'last_name': 'Lennon', 'birthday': '1940-10-9'})
51. 
52.         self.assertTrue(p.is_bound)
53.         self.assertEqual(p.errors, {})
54.         self.assertTrue(p.is_valid())
55.         self.assertHTMLEqual(p.errors.as_ul(), '')
56.         self.assertEqual(p.errors.as_text(), '')
57.         self.assertEqual(p.cleaned_data["first_name"], 'John')
58.         self.assertEqual(p.cleaned_data["last_name"], 'Lennon')
59.         self.assertEqual(p.cleaned_data["birthday"], datetime.date(1940, 10, 9))
60.         self.assertHTMLEqual(
61.             str(p['first_name']),
62.             '<input type="text" name="first_name" value="John" id="id_first_name" required>'
63.         )
64.         self.assertHTMLEqual(
65.             str(p['last_name']),
66.             '<input type="text" name="last_name" value="Lennon" id="id_last_name" required>'
67.         )
68.         self.assertHTMLEqual(
69.             str(p['birthday']),
70.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>'
71.         )
72. 
73.         msg = "Key 'nonexistentfield' not found in 'Person'. Choices are: birthday, first_name, last_name."
74.         with self.assertRaisesMessage(KeyError, msg):
75.             p['nonexistentfield']
76. 
77.         form_output = []
78. 
79.         for boundfield in p:
80.             form_output.append(str(boundfield))
81. 
82.         self.assertHTMLEqual(
83.             '\n'.join(form_output),
84.             """<input type="text" name="first_name" value="John" id="id_first_name" required>
85. <input type="text" name="last_name" value="Lennon" id="id_last_name" required>
86. <input type="text" name="birthday" value="1940-10-9" id="id_birthday" required>"""
87.         )
88. 
89.         form_output = []
90. 
91.         for boundfield in p:
92.             form_output.append([boundfield.label, boundfield.data])
93. 
94.         self.assertEqual(form_output, [
95.             ['First name', 'John'],
96.             ['Last name', 'Lennon'],
97.             ['Birthday', '1940-10-9']
98.         ])
99.         self.assertHTMLEqual(
100.             str(p),
101.             """<tr><th><label for="id_first_name">First name:</label></th><td>
102. <input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>
103. <tr><th><label for="id_last_name">Last name:</label></th><td>
104. <input type="text" name="last_name" value="Lennon" id="id_last_name" required></td></tr>
105. <tr><th><label for="id_birthday">Birthday:</label></th><td>
106. <input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>"""
107.         )
108. 
109.     def test_empty_dict(self):
110.         # Empty dictionaries are valid, too.
111.         p = Person({})
112.         self.assertTrue(p.is_bound)
113.         self.assertEqual(p.errors['first_name'], ['This field is required.'])
114.         self.assertEqual(p.errors['last_name'], ['This field is required.'])
115.         self.assertEqual(p.errors['birthday'], ['This field is required.'])
116.         self.assertFalse(p.is_valid())
117.         self.assertEqual(p.cleaned_data, {})
118.         self.assertHTMLEqual(
119.             str(p),
120.             """<tr><th><label for="id_first_name">First name:</label></th><td>
121. <ul class="errorlist"><li>This field is required.</li></ul>
122. <input type="text" name="first_name" id="id_first_name" required></td></tr>
123. <tr><th><label for="id_last_name">Last name:</label></th>
124. <td><ul class="errorlist"><li>This field is required.</li></ul>
125. <input type="text" name="last_name" id="id_last_name" required></td></tr>
126. <tr><th><label for="id_birthday">Birthday:</label></th><td>
127. <ul class="errorlist"><li>This field is required.</li></ul>
128. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
129.         )
130.         self.assertHTMLEqual(
131.             p.as_table(),
132.             """<tr><th><label for="id_first_name">First name:</label></th><td>
133. <ul class="errorlist"><li>This field is required.</li></ul>
134. <input type="text" name="first_name" id="id_first_name" required></td></tr>
135. <tr><th><label for="id_last_name">Last name:</label></th>
136. <td><ul class="errorlist"><li>This field is required.</li></ul>
137. <input type="text" name="last_name" id="id_last_name" required></td></tr>
138. <tr><th><label for="id_birthday">Birthday:</label></th>
139. <td><ul class="errorlist"><li>This field is required.</li></ul>
140. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
141.         )
142.         self.assertHTMLEqual(
143.             p.as_ul(),
144.             """<li><ul class="errorlist"><li>This field is required.</li></ul>
145. <label for="id_first_name">First name:</label>
146. <input type="text" name="first_name" id="id_first_name" required></li>
147. <li><ul class="errorlist"><li>This field is required.</li></ul>
148. <label for="id_last_name">Last name:</label>
149. <input type="text" name="last_name" id="id_last_name" required></li>
150. <li><ul class="errorlist"><li>This field is required.</li></ul>
151. <label for="id_birthday">Birthday:</label>
152. <input type="text" name="birthday" id="id_birthday" required></li>"""
153.         )
154.         self.assertHTMLEqual(
155.             p.as_p(),
156.             """<ul class="errorlist"><li>This field is required.</li></ul>
157. <p><label for="id_first_name">First name:</label>
158. <input type="text" name="first_name" id="id_first_name" required></p>
159. <ul class="errorlist"><li>This field is required.</li></ul>
160. <p><label for="id_last_name">Last name:</label>
161. <input type="text" name="last_name" id="id_last_name" required></p>
162. <ul class="errorlist"><li>This field is required.</li></ul>
163. <p><label for="id_birthday">Birthday:</label>
164. <input type="text" name="birthday" id="id_birthday" required></p>"""
165.         )
166. 
167.     def test_empty_querydict_args(self):
168.         data = QueryDict()
169.         files = QueryDict()
170.         p = Person(data, files)
171.         self.assertIs(p.data, data)
172.         self.assertIs(p.files, files)
173. 
174.     def test_unbound_form(self):
175.         # If you don't pass any values to the Form's __init__(), or if you pass None,
176.         # the Form will be considered unbound and won't do any validation. Form.errors
177.         # will be an empty dictionary *but* Form.is_valid() will return False.
178.         p = Person()
179.         self.assertFalse(p.is_bound)
180.         self.assertEqual(p.errors, {})
181.         self.assertFalse(p.is_valid())
182.         with self.assertRaises(AttributeError):
183.             p.cleaned_data
184. 
185.         self.assertHTMLEqual(
186.             str(p),
187.             """<tr><th><label for="id_first_name">First name:</label></th><td>
188. <input type="text" name="first_name" id="id_first_name" required></td></tr>
189. <tr><th><label for="id_last_name">Last name:</label></th><td>
190. <input type="text" name="last_name" id="id_last_name" required></td></tr>
191. <tr><th><label for="id_birthday">Birthday:</label></th><td>
192. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
193.         )
194.         self.assertHTMLEqual(
195.             p.as_table(),
196.             """<tr><th><label for="id_first_name">First name:</label></th><td>
197. <input type="text" name="first_name" id="id_first_name" required></td></tr>
198. <tr><th><label for="id_last_name">Last name:</label></th><td>
199. <input type="text" name="last_name" id="id_last_name" required></td></tr>
200. <tr><th><label for="id_birthday">Birthday:</label></th><td>
201. <input type="text" name="birthday" id="id_birthday" required></td></tr>"""
202.         )
203.         self.assertHTMLEqual(
204.             p.as_ul(),
205.             """<li><label for="id_first_name">First name:</label>
206. <input type="text" name="first_name" id="id_first_name" required></li>
207. <li><label for="id_last_name">Last name:</label>
208. <input type="text" name="last_name" id="id_last_name" required></li>
209. <li><label for="id_birthday">Birthday:</label>
210. <input type="text" name="birthday" id="id_birthday" required></li>"""
211.         )
212.         self.assertHTMLEqual(
213.             p.as_p(),
214.             """<p><label for="id_first_name">First name:</label>
215. <input type="text" name="first_name" id="id_first_name" required></p>
216. <p><label for="id_last_name">Last name:</label>
217. <input type="text" name="last_name" id="id_last_name" required></p>
218. <p><label for="id_birthday">Birthday:</label>
219. <input type="text" name="birthday" id="id_birthday" required></p>"""
220.         )
221. 
222.     def test_unicode_values(self):
223.         # Unicode values are handled properly.
224.         p = Person({
225.             'first_name': 'John',
226.             'last_name': '\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111',
227.             'birthday': '1940-10-9'
228.         })
229.         self.assertHTMLEqual(
230.             p.as_table(),
231.             '<tr><th><label for="id_first_name">First name:</label></th><td>'
232.             '<input type="text" name="first_name" value="John" id="id_first_name" required></td></tr>\n'
233.             '<tr><th><label for="id_last_name">Last name:</label>'
234.             '</th><td><input type="text" name="last_name" '
235.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111"'
236.             'id="id_last_name" required></td></tr>\n'
237.             '<tr><th><label for="id_birthday">Birthday:</label></th><td>'
238.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></td></tr>'
239.         )
240.         self.assertHTMLEqual(
241.             p.as_ul(),
242.             '<li><label for="id_first_name">First name:</label> '
243.             '<input type="text" name="first_name" value="John" id="id_first_name" required></li>\n'
244.             '<li><label for="id_last_name">Last name:</label> '
245.             '<input type="text" name="last_name" '
246.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></li>\n'
247.             '<li><label for="id_birthday">Birthday:</label> '
248.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></li>'
249.         )
250.         self.assertHTMLEqual(
251.             p.as_p(),
252.             '<p><label for="id_first_name">First name:</label> '
253.             '<input type="text" name="first_name" value="John" id="id_first_name" required></p>\n'
254.             '<p><label for="id_last_name">Last name:</label> '
255.             '<input type="text" name="last_name" '
256.             'value="\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111" id="id_last_name" required></p>\n'
257.             '<p><label for="id_birthday">Birthday:</label> '
258.             '<input type="text" name="birthday" value="1940-10-9" id="id_birthday" required></p>'
259.         )
260. 
261.         p = Person({'last_name': 'Lennon'})
262.         self.assertEqual(p.errors['first_name'], ['This field is required.'])
263.         self.assertEqual(p.errors['birthday'], ['This field is required.'])
264.         self.assertFalse(p.is_valid())
265.         self.assertEqual(
266.             p.errors,
267.             {'birthday': ['This field is required.'], 'first_name': ['This field is required.']}
268.         )
269.         self.assertEqual(p.cleaned_data, {'last_name': 'Lennon'})
270.         self.assertEqual(p['first_name'].errors, ['This field is required.'])
271.         self.assertHTMLEqual(
272.             p['first_name'].errors.as_ul(),
273.             '<ul class="errorlist"><li>This field is required.</li></ul>'
274.         )
275.         self.assertEqual(p['first_name'].errors.as_text(), '* This field is required.')
276. 
277.         p = Person()
278.         self.assertHTMLEqual(
279.             str(p['first_name']),
280.             '<input type="text" name="first_name" id="id_first_name" required>',
281.         )
282.         self.assertHTMLEqual(str(p['last_name']), '<input type="text" name="last_name" id="id_last_name" required>')
283.         self.assertHTMLEqual(str(p['birthday']), '<input type="text" name="birthday" id="id_birthday" required>')
284. 
285.     def test_cleaned_data_only_fields(self):
286.         # cleaned_data will always *only* contain a key for fields defined in the
287.         # Form, even if you pass extra data when you define the Form. In this
288.         # example, we pass a bunch of extra fields to the form constructor,
289.         # but cleaned_data contains only the form's fields.
290.         data = {
291.             'first_name': 'John',
292.             'last_name': 'Lennon',
293.             'birthday': '1940-10-9',
294.             'extra1': 'hello',
295.             'extra2': 'hello',
296.         }
297.         p = Person(data)
298.         self.assertTrue(p.is_valid())
299.         self.assertEqual(p.cleaned_data['first_name'], 'John')
300.         self.assertEqual(p.cleaned_data['last_name'], 'Lennon')
301.         self.assertEqual(p.cleaned_data['birthday'], datetime.date(1940, 10, 9))
302. 
303.     def test_optional_data(self):
304.         # cleaned_data will include a key and value for *all* fields defined in the Form,
305.         # even if the Form's data didn't include a value for fields that are not
306.         # required. In this example, the data dictionary doesn't include a value for the
307.         # "nick_name" field, but cleaned_data includes it. For CharFields, it's set to the
308.         # empty string.
309.         class OptionalPersonForm(Form):
310.             first_name = CharField()
311.             last_name = CharField()
312.             nick_name = CharField(required=False)
313. 
314.         data = {'first_name': 'John', 'last_name': 'Lennon'}
315.         f = OptionalPersonForm(data)
316.         self.assertTrue(f.is_valid())
317.         self.assertEqual(f.cleaned_data['nick_name'], '')
318.         self.assertEqual(f.cleaned_data['first_name'], 'John')
319.         self.assertEqual(f.cleaned_data['last_name'], 'Lennon')
320. 
321.         # For DateFields, it's set to None.
322.         class OptionalPersonForm(Form):
323.             first_name = CharField()
324.             last_name = CharField()
325.             birth_date = DateField(required=False)
326. 
327.         data = {'first_name': 'John', 'last_name': 'Lennon'}
328.         f = OptionalPersonForm(data)
329.         self.assertTrue(f.is_valid())
330.         self.assertIsNone(f.cleaned_data['birth_date'])
331.         self.assertEqual(f.cleaned_data['first_name'], 'John')
332.         self.assertEqual(f.cleaned_data['last_name'], 'Lennon')
333. 
334.     def test_auto_id(self):
335.         # "auto_id" tells the Form to add an "id" attribute to each form element.
336.         # If it's a string that contains '%s', Django will use that as a format string
337.         # into which the field's name will be inserted. It will also put a <label> around
338.         # the human-readable labels for a field.
339.         p = Person(auto_id='%s_id')
340.         self.assertHTMLEqual(
341.             p.as_table(),
342.             """<tr><th><label for="first_name_id">First name:</label></th><td>
343. <input type="text" name="first_name" id="first_name_id" required></td></tr>
344. <tr><th><label for="last_name_id">Last name:</label></th><td>
345. <input type="text" name="last_name" id="last_name_id" required></td></tr>
346. <tr><th><label for="birthday_id">Birthday:</label></th><td>
347. <input type="text" name="birthday" id="birthday_id" required></td></tr>"""
348.         )
349.         self.assertHTMLEqual(
350.             p.as_ul(),
351.             """<li><label for="first_name_id">First name:</label>
352. <input type="text" name="first_name" id="first_name_id" required></li>
353. <li><label for="last_name_id">Last name:</label>
354. <input type="text" name="last_name" id="last_name_id" required></li>
355. <li><label for="birthday_id">Birthday:</label>
356. <input type="text" name="birthday" id="birthday_id" required></li>"""
357.         )
358.         self.assertHTMLEqual(
359.             p.as_p(),
360.             """<p><label for="first_name_id">First name:</label>
361. <input type="text" name="first_name" id="first_name_id" required></p>
362. <p><label for="last_name_id">Last name:</label>
363. <input type="text" name="last_name" id="last_name_id" required></p>
364. <p><label for="birthday_id">Birthday:</label>
365. <input type="text" name="birthday" id="birthday_id" required></p>"""
366.         )
367. 
368.     def test_auto_id_true(self):
369.         # If auto_id is any True value whose str() does not contain '%s', the "id"
370.         # attribute will be the name of the field.
371.         p = Person(auto_id=True)
372.         self.assertHTMLEqual(
373.             p.as_ul(),
374.             """<li><label for="first_name">First name:</label>
375. <input type="text" name="first_name" id="first_name" required></li>
376. <li><label for="last_name">Last name:</label>
377. <input type="text" name="last_name" id="last_name" required></li>
378. <li><label for="birthday">Birthday:</label>
379. <input type="text" name="birthday" id="birthday" required></li>"""
380.         )
381. 
382.     def test_auto_id_false(self):
383.         # If auto_id is any False value, an "id" attribute won't be output unless it
384.         # was manually entered.
385.         p = Person(auto_id=False)
386.         self.assertHTMLEqual(
387.             p.as_ul(),
388.             """<li>First name: <input type="text" name="first_name" required></li>
389. <li>Last name: <input type="text" name="last_name" required></li>
390. <li>Birthday: <input type="text" name="birthday" required></li>"""
391.         )
392. 
393.     def test_id_on_field(self):
394.         # In this example, auto_id is False, but the "id" attribute for the "first_name"
395.         # field is given. Also note that field gets a <label>, while the others don't.
396.         p = PersonNew(auto_id=False)
397.         self.assertHTMLEqual(
398.             p.as_ul(),
399.             """<li><label for="first_name_id">First name:</label>
400. <input type="text" id="first_name_id" name="first_name" required></li>
401. <li>Last name: <input type="text" name="last_name" required></li>
402. <li>Birthday: <input type="text" name="birthday" required></li>"""
403.         )
404. 
405.     def test_auto_id_on_form_and_field(self):
406.         # If the "id" attribute is specified in the Form and auto_id is True, the "id"
407.         # attribute in the Form gets precedence.
408.         p = PersonNew(auto_id=True)
409.         self.assertHTMLEqual(
410.             p.as_ul(),
411.             """<li><label for="first_name_id">First name:</label>
412. <input type="text" id="first_name_id" name="first_name" required></li>
413. <li><label for="last_name">Last name:</label>
414. <input type="text" name="last_name" id="last_name" required></li>
415. <li><label for="birthday">Birthday:</label>
416. <input type="text" name="birthday" id="birthday" required></li>"""
417.         )
418. 
419.     def test_various_boolean_values(self):
420.         class SignupForm(Form):
421.             email = EmailField()
422.             get_spam = BooleanField()
423. 
424.         f = SignupForm(auto_id=False)
425.         self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" required>')
426.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
427. 
428.         f = SignupForm({'email': 'test@example.com', 'get_spam': True}, auto_id=False)
429.         self.assertHTMLEqual(str(f['email']), '<input type="email" name="email" value="test@example.com" required>')
430.         self.assertHTMLEqual(
431.             str(f['get_spam']),
432.             '<input checked type="checkbox" name="get_spam" required>',
433.         )
434. 
435.         # 'True' or 'true' should be rendered without a value attribute
436.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'True'}, auto_id=False)
437.         self.assertHTMLEqual(
438.             str(f['get_spam']),
439.             '<input checked type="checkbox" name="get_spam" required>',
440.         )
441. 
442.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'true'}, auto_id=False)
443.         self.assertHTMLEqual(
444.             str(f['get_spam']), '<input checked type="checkbox" name="get_spam" required>')
445. 
446.         # A value of 'False' or 'false' should be rendered unchecked
447.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'False'}, auto_id=False)
448.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
449. 
450.         f = SignupForm({'email': 'test@example.com', 'get_spam': 'false'}, auto_id=False)
451.         self.assertHTMLEqual(str(f['get_spam']), '<input type="checkbox" name="get_spam" required>')
452. 
453.         # A value of '0' should be interpreted as a True value (#16820)
454.         f = SignupForm({'email': 'test@example.com', 'get_spam': '0'})
455.         self.assertTrue(f.is_valid())
456.         self.assertTrue(f.cleaned_data.get('get_spam'))
457. 
458.     def test_widget_output(self):
459.         # Any Field can have a Widget class passed to its constructor:
460.         class ContactForm(Form):
461.             subject = CharField()
462.             message = CharField(widget=Textarea)
463. 
464.         f = ContactForm(auto_id=False)
465.         self.assertHTMLEqual(str(f['subject']), '<input type="text" name="subject" required>')
466.         self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="10" cols="40" required></textarea>')
467. 
468.         # as_textarea(), as_text() and as_hidden() are shortcuts for changing the output
469.         # widget type:
470.         self.assertHTMLEqual(
471.             f['subject'].as_textarea(),
472.             '<textarea name="subject" rows="10" cols="40" required></textarea>',
473.         )
474.         self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
475.         self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message">')
476. 
477.         # The 'widget' parameter to a Field can also be an instance:
478.         class ContactForm(Form):
479.             subject = CharField()
480.             message = CharField(widget=Textarea(attrs={'rows': 80, 'cols': 20}))
481. 
482.         f = ContactForm(auto_id=False)
483.         self.assertHTMLEqual(str(f['message']), '<textarea name="message" rows="80" cols="20" required></textarea>')
484. 
485.         # Instance-level attrs are *not* carried over to as_textarea(), as_text() and
486.         # as_hidden():
487.         self.assertHTMLEqual(f['message'].as_text(), '<input type="text" name="message" required>')
488.         f = ContactForm({'subject': 'Hello', 'message': 'I love you.'}, auto_id=False)
489.         self.assertHTMLEqual(
490.             f['subject'].as_textarea(),
491.             '<textarea rows="10" cols="40" name="subject" required>Hello</textarea>'
492.         )
493.         self.assertHTMLEqual(
494.             f['message'].as_text(),
495.             '<input type="text" name="message" value="I love you." required>',
496.         )
497.         self.assertHTMLEqual(f['message'].as_hidden(), '<input type="hidden" name="message" value="I love you.">')
498. 
499.     def test_forms_with_choices(self):
500.         # For a form with a <select>, use ChoiceField:


File: tests/forms_tests/tests/test_forms.py
Line number range: 1338 - 1478
Content:
1338.         # Similarly, changes to field attributes do not persist from one Form instance
1339.         # to the next.
1340.         class Person(Form):
1341.             first_name = CharField(required=False)
1342.             last_name = CharField(required=False)
1343. 
1344.             def __init__(self, names_required=False, *args, **kwargs):
1345.                 super().__init__(*args, **kwargs)
1346. 
1347.                 if names_required:
1348.                     self.fields['first_name'].required = True
1349.                     self.fields['first_name'].widget.attrs['class'] = 'required'
1350.                     self.fields['last_name'].required = True
1351.                     self.fields['last_name'].widget.attrs['class'] = 'required'
1352. 
1353.         f = Person(names_required=False)
1354.         self.assertEqual(f['first_name'].field.required, f['last_name'].field.required, (False, False))
1355.         self.assertEqual(f['first_name'].field.widget.attrs, f['last_name'].field.widget.attrs, ({}, {}))
1356.         f = Person(names_required=True)
1357.         self.assertEqual(f['first_name'].field.required, f['last_name'].field.required, (True, True))
1358.         self.assertEqual(
1359.             f['first_name'].field.widget.attrs,
1360.             f['last_name'].field.widget.attrs,
1361.             ({'class': 'reuired'}, {'class': 'required'})
1362.         )
1363.         f = Person(names_required=False)
1364.         self.assertEqual(f['first_name'].field.required, f['last_name'].field.required, (False, False))
1365.         self.assertEqual(f['first_name'].field.widget.attrs, f['last_name'].field.widget.attrs, ({}, {}))
1366. 
1367.         class Person(Form):
1368.             first_name = CharField(max_length=30)
1369.             last_name = CharField(max_length=30)
1370. 
1371.             def __init__(self, name_max_length=None, *args, **kwargs):
1372.                 super().__init__(*args, **kwargs)
1373. 
1374.                 if name_max_length:
1375.                     self.fields['first_name'].max_length = name_max_length
1376.                     self.fields['last_name'].max_length = name_max_length
1377. 
1378.         f = Person(name_max_length=None)
1379.         self.assertEqual(f['first_name'].field.max_length, f['last_name'].field.max_length, (30, 30))
1380.         f = Person(name_max_length=20)
1381.         self.assertEqual(f['first_name'].field.max_length, f['last_name'].field.max_length, (20, 20))
1382.         f = Person(name_max_length=None)
1383.         self.assertEqual(f['first_name'].field.max_length, f['last_name'].field.max_length, (30, 30))
1384. 
1385.         # Similarly, choices do not persist from one Form instance to the next.
1386.         # Refs #15127.
1387.         class Person(Form):
1388.             first_name = CharField(required=False)
1389.             last_name = CharField(required=False)
1390.             gender = ChoiceField(choices=(('f', 'Female'), ('m', 'Male')))
1391. 
1392.             def __init__(self, allow_unspec_gender=False, *args, **kwargs):
1393.                 super().__init__(*args, **kwargs)
1394. 
1395.                 if allow_unspec_gender:
1396.                     self.fields['gender'].choices += (('u', 'Unspecified'),)
1397. 
1398.         f = Person()
1399.         self.assertEqual(f['gender'].field.choices, [('f', 'Female'), ('m', 'Male')])
1400.         f = Person(allow_unspec_gender=True)
1401.         self.assertEqual(f['gender'].field.choices, [('f', 'Female'), ('m', 'Male'), ('u', 'Unspecified')])
1402.         f = Person()
1403.         self.assertEqual(f['gender'].field.choices, [('f', 'Female'), ('m', 'Male')])
1404. 
1405.     def test_validators_independence(self):
1406.         """
1407.         The list of form field validators can be modified without polluting
1408.         other forms.
1409.         """
1410.         class MyForm(Form):
1411.             myfield = CharField(max_length=25)
1412. 
1413.         f1 = MyForm()
1414.         f2 = MyForm()
1415. 
1416.         f1.fields['myfield'].validators[0] = MaxValueValidator(12)
1417.         self.assertNotEqual(f1.fields['myfield'].validators[0], f2.fields['myfield'].validators[0])
1418. 
1419.     def test_hidden_widget(self):
1420.         # HiddenInput widgets are displayed differently in the as_table(), as_ul())
1421.         # and as_p() output of a Form -- their verbose names are not displayed, and a
1422.         # separate row is not displayed. They're displayed in the last row of the
1423.         # form, directly after that row's form element.
1424.         class Person(Form):
1425.             first_name = CharField()
1426.             last_name = CharField()
1427.             hidden_text = CharField(widget=HiddenInput)
1428.             birthday = DateField()
1429. 
1430.         p = Person(auto_id=False)
1431.         self.assertHTMLEqual(
1432.             p.as_table(),
1433.             """<tr><th>First name:</th><td><input type="text" name="first_name" required></td></tr>
1434. <tr><th>Last name:</th><td><input type="text" name="last_name" required></td></tr>
1435. <tr><th>Birthday:</th>
1436. <td><input type="text" name="birthday" required><input type="hidden" name="hidden_text"></td></tr>"""
1437.         )
1438.         self.assertHTMLEqual(
1439.             p.as_ul(),
1440.             """<li>First name: <input type="text" name="first_name" required></li>
1441. <li>Last name: <input type="text" name="last_name" required></li>
1442. <li>Birthday: <input type="text" name="birthday" required><input type="hidden" name="hidden_text"></li>"""
1443.         )
1444.         self.assertHTMLEqual(
1445.             p.as_p(), """<p>First name: <input type="text" name="first_name" required></p>
1446. <p>Last name: <input type="text" name="last_name" required></p>
1447. <p>Birthday: <input type="text" name="birthday" required><input type="hidden" name="hidden_text"></p>"""
1448.         )
1449. 
1450.         # With auto_id set, a HiddenInput still gets an ID, but it doesn't get a label.
1451.         p = Person(auto_id='id_%s')
1452.         self.assertHTMLEqual(
1453.             p.as_table(),
1454.             """<tr><th><label for="id_first_name">First name:</label></th><td>
1455. <input type="text" name="first_name" id="id_first_name" required></td></tr>
1456. <tr><th><label for="id_last_name">Last name:</label></th><td>
1457. <input type="text" name="last_name" id="id_last_name" required></td></tr>
1458. <tr><th><label for="id_birthday">Birthday:</label></th><td>
1459. <input type="text" name="birthday" id="id_birthday" required>
1460. <input type="hidden" name="hidden_text" id="id_hidden_text"></td></tr>"""
1461.         )
1462.         self.assertHTMLEqual(
1463.             p.as_ul(),
1464.             """<li><label for="id_first_name">First name:</label>
1465. <input type="text" name="first_name" id="id_first_name" required></li>
1466. <li><label for="id_last_name">Last name:</label>
1467. <input type="text" name="last_name" id="id_last_name" required></li>
1468. <li><label for="id_birthday">Birthday:</label>
1469. <input type="text" name="birthday" id="id_birthday" required>
1470. <input type="hidden" name="hidden_text" id="id_hidden_text"></li>"""
1471.         )
1472.         self.assertHTMLEqual(
1473.             p.as_p(),
1474.             """<p><label for="id_first_name">First name:</label>
1475. <input type="text" name="first_name" id="id_first_name" required></p>
1476. <p><label for="id_last_name">Last name:</label>
1477. <input type="text" name="last_name" id="id_last_name" required></p>
1478. <p><label for="id_birthday">Birthday:</label>


File: tests/forms_tests/tests/test_forms.py
Line number range: 2133 - 2228
Content:
2133.         # You can specify descriptive text for a field by using the 'help_text' argument)
2134.         class UserRegistration(Form):
2135.             username = CharField(max_length=10, help_text='e.g., user@example.com')
2136.             password = CharField(widget=PasswordInput, help_text='Wählen Sie mit Bedacht.')
2137. 
2138.         p = UserRegistration(auto_id=False)
2139.         self.assertHTMLEqual(
2140.             p.as_ul(),
2141.             """<li>Username: <input type="text" name="username" maxlength="10" required>
2142. <span class="helptext">e.g., user@example.com</span></li>
2143. <li>Password: <input type="password" name="password" required>
2144. <span class="helptext">Wählen Sie mit Bedacht.</span></li>"""
2145.         )
2146.         self.assertHTMLEqual(
2147.             p.as_p(),
2148.             """<p>Username: <input type="text" name="username" maxlength="10" required>
2149. <span class="helptext">e.g., user@example.com</span></p>
2150. <p>Password: <input type="password" name="password" required>
2151. <span class="helptext">Wählen Sie mit Bedacht.</span></p>"""
2152.         )
2153.         self.assertHTMLEqual(
2154.             p.as_table(),
2155.             """<tr><th>Username:</th><td><input type="text" name="username" maxlength="10" required><br>
2156. <span class="helptext">e.g., user@example.com</span></td></tr>
2157. <tr><th>Password:</th><td><input type="password" name="password" required><br>
2158. <span class="helptext">Wählen Sie mit Bedacht.</span></td></tr>"""
2159.         )
2160. 
2161.         # The help text is displayed whether or not data is provided for the form.
2162.         p = UserRegistration({'username': 'foo'}, auto_id=False)
2163.         self.assertHTMLEqual(
2164.             p.as_ul(),
2165.             """<li>Username: <input type="text" name="username" value="foo" maxlength="10" required>
2166. <span class="helptext">e.g., user@example.com</span></li>
2167. <li><ul class="errorlist"><li>This field is required.</li></ul>
2168. Password: <input type="password" name="password" required>
2169. <span class="helptext">Wählen Sie mit Bedacht.</span></li>"""
2170.         )
2171. 
2172.         # help_text is not displayed for hidden fields. It can be used for documentation
2173.         # purposes, though.
2174.         class UserRegistration(Form):
2175.             username = CharField(max_length=10, help_text='e.g., user@example.com')
2176.             password = CharField(widget=PasswordInput)
2177.             next = CharField(widget=HiddenInput, initial='/', help_text='Redirect destination')
2178. 
2179.         p = UserRegistration(auto_id=False)
2180.         self.assertHTMLEqual(
2181.             p.as_ul(),
2182.             """<li>Username: <input type="text" name="username" maxlength="10" required>
2183. <span class="helptext">e.g., user@example.com</span></li>
2184. <li>Password: <input type="password" name="password" required>
2185. <input type="hidden" name="next" value="/"></li>"""
2186.         )
2187. 
2188.     def test_subclassing_forms(self):
2189.         # You can subclass a Form to add fields. The resulting form subclass will have
2190.         # all of the fields of the parent Form, plus whichever fields you define in the
2191.         # subclass.
2192.         class Person(Form):
2193.             first_name = CharField()
2194.             last_name = CharField()
2195.             birthday = DateField()
2196. 
2197.         class Musician(Person):
2198.             instrument = CharField()
2199. 
2200.         p = Person(auto_id=False)
2201.         self.assertHTMLEqual(
2202.             p.as_ul(),
2203.             """<li>First name: <input type="text" name="first_name" required></li>
2204. <li>Last name: <input type="text" name="last_name" required></li>
2205. <li>Birthday: <input type="text" name="birthday" required></li>"""
2206.         )
2207.         m = Musician(auto_id=False)
2208.         self.assertHTMLEqual(
2209.             m.as_ul(),
2210.             """<li>First name: <input type="text" name="first_name" required></li>
2211. <li>Last name: <input type="text" name="last_name" required></li>
2212. <li>Birthday: <input type="text" name="birthday" required></li>
2213. <li>Instrument: <input type="text" name="instrument" required></li>"""
2214.         )
2215. 
2216.         # Yes, you can subclass multiple forms. The fields are added in the order in
2217.         # which the parent classes are listed.
2218.         class Person(Form):
2219.             first_name = CharField()
2220.             last_name = CharField()
2221.             birthday = DateField()
2222. 
2223.         class Instrument(Form):
2224.             instrument = CharField()
2225. 
2226.         class Beatle(Person, Instrument):
2227.             haircut_type = CharField()
2228. 


File: tests/forms_tests/tests/test_forms.py
Line number range: 2850 - 2980
Content:
2850.         self.assertHTMLEqual(
2851.             p.as_table(),
2852.             """<tr class="required error">
2853. <th><label class="required" for="id_name">Name:</label></th>
2854. <td><ul class="errorlist"><li>This field is required.</li></ul>
2855. <input type="text" name="name" id="id_name" required></td></tr>
2856. <tr class="required"><th><label class="required" for="id_is_cool">Is cool:</label></th>
2857. <td><select name="is_cool" id="id_is_cool">
2858. <option value="unknown" selected>Unknown</option>
2859. <option value="true">Yes</option>
2860. <option value="false">No</option>
2861. </select></td></tr>
2862. <tr><th><label for="id_email">Email:</label></th><td>
2863. <input type="email" name="email" id="id_email"></td></tr>
2864. <tr class="required error"><th><label class="required" for="id_age">Age:</label></th>
2865. <td><ul class="errorlist"><li>This field is required.</li></ul>
2866. <input type="number" name="age" id="id_age" required></td></tr>"""
2867.         )
2868. 
2869.     def test_label_has_required_css_class(self):
2870.         """
2871.         #17922 - required_css_class is added to the label_tag() of required fields.
2872.         """
2873.         class SomeForm(Form):
2874.             required_css_class = 'required'
2875.             field = CharField(max_length=10)
2876.             field2 = IntegerField(required=False)
2877. 
2878.         f = SomeForm({'field': 'test'})
2879.         self.assertHTMLEqual(f['field'].label_tag(), '<label for="id_field" class="required">Field:</label>')
2880.         self.assertHTMLEqual(
2881.             f['field'].label_tag(attrs={'class': 'foo'}),
2882.             '<label for="id_field" class="foo required">Field:</label>'
2883.         )
2884.         self.assertHTMLEqual(f['field2'].label_tag(), '<label for="id_field2">Field2:</label>')
2885. 
2886.     def test_label_split_datetime_not_displayed(self):
2887.         class EventForm(Form):
2888.             happened_at = SplitDateTimeField(widget=SplitHiddenDateTimeWidget)
2889. 
2890.         form = EventForm()
2891.         self.assertHTMLEqual(
2892.             form.as_ul(),
2893.             '<input type="hidden" name="happened_at_0" id="id_happened_at_0">'
2894.             '<input type="hidden" name="happened_at_1" id="id_happened_at_1">'
2895.         )
2896. 
2897.     def test_multivalue_field_validation(self):
2898.         def bad_names(value):
2899.             if value == 'bad value':
2900.                 raise ValidationError('bad value not allowed')
2901. 
2902.         class NameField(MultiValueField):
2903.             def __init__(self, fields=(), *args, **kwargs):
2904.                 fields = (CharField(label='First name', max_length=10),
2905.                           CharField(label='Last name', max_length=10))
2906.                 super().__init__(fields=fields, *args, **kwargs)
2907. 
2908.             def compress(self, data_list):
2909.                 return ' '.join(data_list)
2910. 
2911.         class NameForm(Form):
2912.             name = NameField(validators=[bad_names])
2913. 
2914.         form = NameForm(data={'name': ['bad', 'value']})
2915.         form.full_clean()
2916.         self.assertFalse(form.is_valid())
2917.         self.assertEqual(form.errors, {'name': ['bad value not allowed']})
2918.         form = NameForm(data={'name': ['should be overly', 'long for the field names']})
2919.         self.assertFalse(form.is_valid())
2920.         self.assertEqual(
2921.             form.errors, {
2922.                 'name': [
2923.                     'Ensure this value has at most 10 characters (it has 16).',
2924.                     'Ensure this value has at most 10 characters (it has 24).',
2925.                 ],
2926.             }
2927.         )
2928.         form = NameForm(data={'name': ['fname', 'lname']})
2929.         self.assertTrue(form.is_valid())
2930.         self.assertEqual(form.cleaned_data, {'name': 'fname lname'})
2931. 
2932.     def test_multivalue_deep_copy(self):
2933.         """
2934.         #19298 -- MultiValueField needs to override the default as it needs
2935.         to deep-copy subfields:
2936.         """
2937.         class ChoicesField(MultiValueField):
2938.             def __init__(self, fields=(), *args, **kwargs):
2939.                 fields = (
2940.                     ChoiceField(label='Rank', choices=((1, 1), (2, 2))),
2941.                     CharField(label='Name', max_length=10),
2942.                 )
2943.                 super().__init__(fields=fields, *args, **kwargs)
2944. 
2945.         field = ChoicesField()
2946.         field2 = copy.deepcopy(field)
2947.         self.assertIsInstance(field2, ChoicesField)
2948.         self.assertIsNot(field2.fields, field.fields)
2949.         self.assertIsNot(field2.fields[0].choices, field.fields[0].choices)
2950. 
2951.     def test_multivalue_initial_data(self):
2952.         """
2953.         #23674 -- invalid initial data should not break form.changed_data()
2954.         """
2955.         class DateAgeField(MultiValueField):
2956.             def __init__(self, fields=(), *args, **kwargs):
2957.                 fields = (DateField(label="Date"), IntegerField(label="Age"))
2958.                 super().__init__(fields=fields, *args, **kwargs)
2959. 
2960.         class DateAgeForm(Form):
2961.             date_age = DateAgeField()
2962. 
2963.         data = {"date_age": ["1998-12-06", 16]}
2964.         form = DateAgeForm(data, initial={"date_age": ["200-10-10", 14]})
2965.         self.assertTrue(form.has_changed())
2966. 
2967.     def test_multivalue_optional_subfields(self):
2968.         class PhoneField(MultiValueField):
2969.             def __init__(self, *args, **kwargs):
2970.                 fields = (
2971.                     CharField(label='Country Code', validators=[
2972.                         RegexValidator(r'^\+[0-9]{1,2}$', message='Enter a valid country code.')]),
2973.                     CharField(label='Phone Number'),
2974.                     CharField(label='Extension', error_messages={'incomplete': 'Enter an extension.'}),
2975.                     CharField(label='Label', required=False, help_text='E.g. home, work.'),
2976.                 )
2977.                 super().__init__(fields, *args, **kwargs)
2978. 
2979.             def compress(self, data_list):
2980.                 if data_list:


File: tests/forms_tests/tests/test_forms.py
Line number range: 3433 - 3468
Content:
3433.             last_name = CharField()
3434. 
3435.             def clean(self):
3436.                 raise ValidationError('Generic validation error')
3437. 
3438.         p = Person({'first_name': 'John', 'last_name': 'Lennon'})
3439.         self.assertHTMLEqual(
3440.             str(p.non_field_errors()),
3441.             '<ul class="errorlist nonfield"><li>Generic validation error</li></ul>'
3442.         )
3443.         self.assertHTMLEqual(
3444.             p.as_ul(),
3445.             """<li>
3446. <ul class="errorlist nonfield"><li>Generic validation error</li></ul></li>
3447. <li><label for="id_first_name">First name:</label>
3448. <input id="id_first_name" name="first_name" type="text" value="John" required></li>
3449. <li><label for="id_last_name">Last name:</label>
3450. <input id="id_last_name" name="last_name" type="text" value="Lennon" required></li>"""
3451.         )
3452.         self.assertHTMLEqual(
3453.             p.non_field_errors().as_text(),
3454.             '* Generic validation error'
3455.         )
3456.         self.assertHTMLEqual(
3457.             p.as_p(),
3458.             """<ul class="errorlist nonfield"><li>Generic validation error</li></ul>
3459. <p><label for="id_first_name">First name:</label>
3460. <input id="id_first_name" name="first_name" type="text" value="John" required></p>
3461. <p><label for="id_last_name">Last name:</label>
3462. <input id="id_last_name" name="last_name" type="text" value="Lennon" required></p>"""
3463.         )
3464.         self.assertHTMLEqual(
3465.             p.as_table(),
3466.             """<tr><td colspan="2"><ul class="errorlist nonfield"><li>Generic validation error</li></ul></td></tr>
3467. <tr><th><label for="id_first_name">First name:</label></th><td>
3468. <input id="id_first_name" name="first_name" type="text" value="John" required></td></tr>


File: tests/forms_tests/tests/test_forms.py
Line number range: 3470 - 3519
Content:
3470. <input id="id_last_name" name="last_name" type="text" value="Lennon" required></td></tr>"""
3471.         )
3472. 
3473.     def test_errorlist_override(self):
3474.         class DivErrorList(ErrorList):
3475.             def __str__(self):
3476.                 return self.as_divs()
3477. 
3478.             def as_divs(self):
3479.                 if not self:
3480.                     return ''
3481.                 return '<div class="errorlist">%s</div>' % ''.join(
3482.                     '<div class="error">%s</div>' % e for e in self)
3483. 
3484.         class CommentForm(Form):
3485.             name = CharField(max_length=50, required=False)
3486.             email = EmailField()
3487.             comment = CharField()
3488. 
3489.         data = {'email': 'invalid'}
3490.         f = CommentForm(data, auto_id=False, error_class=DivErrorList)
3491.         self.assertHTMLEqual(f.as_p(), """<p>Name: <input type="text" name="name" maxlength="50"></p>
3492. <div class="errorlist"><div class="error">Enter a valid email address.</div></div>
3493. <p>Email: <input type="email" name="email" value="invalid" required></p>
3494. <div class="errorlist"><div class="error">This field is required.</div></div>
3495. <p>Comment: <input type="text" name="comment" required></p>""")
3496. 
3497.     def test_error_escaping(self):
3498.         class TestForm(Form):
3499.             hidden = CharField(widget=HiddenInput(), required=False)
3500.             visible = CharField()
3501. 
3502.             def clean_hidden(self):
3503.                 raise ValidationError('Foo & "bar"!')
3504. 
3505.             clean_visible = clean_hidden
3506. 
3507.         form = TestForm({'hidden': 'a', 'visible': 'b'})
3508.         form.is_valid()
3509.         self.assertHTMLEqual(
3510.             form.as_ul(),
3511.             '<li><ul class="errorlist nonfield"><li>(Hidden field hidden) Foo &amp; &quot;bar&quot;!</li></ul></li>'
3512.             '<li><ul class="errorlist"><li>Foo &amp; &quot;bar&quot;!</li></ul>'
3513.             '<label for="id_visible">Visible:</label> '
3514.             '<input type="text" name="visible" value="b" id="id_visible" required>'
3515.             '<input type="hidden" name="hidden" value="a" id="id_hidden"></li>'
3516.         )
3517. 
3518.     def test_baseform_repr(self):
3519.         """


File: tests/forms_tests/tests/test_formsets.py
Line number range: 1 - 500
Content:
1. import datetime
2. from collections import Counter
3. from unittest import mock
4. 
5. from django.core.exceptions import ValidationError
6. from django.forms import (
7.     BaseForm, CharField, DateField, FileField, Form, IntegerField,
8.     SplitDateTimeField, formsets,
9. )
10. from django.forms.formsets import BaseFormSet, all_valid, formset_factory
11. from django.forms.utils import ErrorList
12. from django.forms.widgets import HiddenInput
13. from django.test import SimpleTestCase
14. 
15. 
16. class Choice(Form):
17.     choice = CharField()
18.     votes = IntegerField()
19. 
20. 
21. ChoiceFormSet = formset_factory(Choice)
22. 
23. 
24. class FavoriteDrinkForm(Form):
25.     name = CharField()
26. 
27. 
28. class BaseFavoriteDrinksFormSet(BaseFormSet):
29.     def clean(self):
30.         seen_drinks = []
31. 
32.         for drink in self.cleaned_data:
33.             if drink['name'] in seen_drinks:
34.                 raise ValidationError('You may only specify a drink once.')
35. 
36.             seen_drinks.append(drink['name'])
37. 
38. 
39. # A FormSet that takes a list of favorite drinks and raises an error if
40. # there are any duplicates.
41. FavoriteDrinksFormSet = formset_factory(FavoriteDrinkForm, formset=BaseFavoriteDrinksFormSet, extra=3)
42. 
43. 
44. class CustomKwargForm(Form):
45.     def __init__(self, *args, custom_kwarg, **kwargs):
46.         self.custom_kwarg = custom_kwarg
47.         super().__init__(*args, **kwargs)
48. 
49. 
50. class FormsFormsetTestCase(SimpleTestCase):
51. 
52.     def make_choiceformset(
53.             self, formset_data=None, formset_class=ChoiceFormSet,
54.             total_forms=None, initial_forms=0, max_num_forms=0, min_num_forms=0, **kwargs):
55.         """
56.         Make a ChoiceFormset from the given formset_data.
57.         The data should be given as a list of (choice, votes) tuples.
58.         """
59.         kwargs.setdefault('prefix', 'choices')
60.         kwargs.setdefault('auto_id', False)
61. 
62.         if formset_data is None:
63.             return formset_class(**kwargs)
64. 
65.         if total_forms is None:
66.             total_forms = len(formset_data)
67. 
68.         def prefixed(*args):
69.             args = (kwargs['prefix'],) + args
70.             return '-'.join(args)
71. 
72.         data = {
73.             prefixed('TOTAL_FORMS'): str(total_forms),
74.             prefixed('INITIAL_FORMS'): str(initial_forms),
75.             prefixed('MAX_NUM_FORMS'): str(max_num_forms),
76.             prefixed('MIN_NUM_FORMS'): str(min_num_forms),
77.         }
78.         for i, (choice, votes) in enumerate(formset_data):
79.             data[prefixed(str(i), 'choice')] = choice
80.             data[prefixed(str(i), 'votes')] = votes
81. 
82.         return formset_class(data, **kwargs)
83. 
84.     def test_basic_formset(self):
85.         """
86.         A FormSet constructor takes the same arguments as Form. Create a
87.         FormSet for adding data. By default, it displays 1 blank form.
88.         """
89.         formset = self.make_choiceformset()
90.         self.assertHTMLEqual(
91.             str(formset),
92.             """<input type="hidden" name="choices-TOTAL_FORMS" value="1">
93. <input type="hidden" name="choices-INITIAL_FORMS" value="0">
94. <input type="hidden" name="choices-MIN_NUM_FORMS" value="0">
95. <input type="hidden" name="choices-MAX_NUM_FORMS" value="1000">
96. <tr><th>Choice:</th><td><input type="text" name="choices-0-choice"></td></tr>
97. <tr><th>Votes:</th><td><input type="number" name="choices-0-votes"></td></tr>"""
98.         )
99.         # FormSet are treated similarly to Forms. FormSet has an is_valid()
100.         # method, and a cleaned_data or errors attribute depending on whether
101.         # all the forms passed validation. However, unlike a Form, cleaned_data
102.         # and errors will be a list of dicts rather than a single dict.
103.         formset = self.make_choiceformset([('Calexico', '100')])
104.         self.assertTrue(formset.is_valid())
105.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}])
106. 
107.         # If a FormSet wasn't passed any data, is_valid() and has_changed()
108.         # return False.
109.         formset = self.make_choiceformset()
110.         self.assertFalse(formset.is_valid())
111.         self.assertFalse(formset.has_changed())
112. 
113.     def test_form_kwargs_formset(self):
114.         """
115.         Custom kwargs set on the formset instance are passed to the
116.         underlying forms.
117.         """
118.         FormSet = formset_factory(CustomKwargForm, extra=2)
119.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
120.         for form in formset:
121.             self.assertTrue(hasattr(form, 'custom_kwarg'))
122.             self.assertEqual(form.custom_kwarg, 1)
123. 
124.     def test_form_kwargs_formset_dynamic(self):
125.         """Form kwargs can be passed dynamically in a formset."""
126.         class DynamicBaseFormSet(BaseFormSet):
127.             def get_form_kwargs(self, index):
128.                 return {'custom_kwarg': index}
129. 
130.         DynamicFormSet = formset_factory(CustomKwargForm, formset=DynamicBaseFormSet, extra=2)
131.         formset = DynamicFormSet(form_kwargs={'custom_kwarg': 'ignored'})
132.         for i, form in enumerate(formset):
133.             self.assertTrue(hasattr(form, 'custom_kwarg'))
134.             self.assertEqual(form.custom_kwarg, i)
135. 
136.     def test_form_kwargs_empty_form(self):
137.         FormSet = formset_factory(CustomKwargForm)
138.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
139.         self.assertTrue(hasattr(formset.empty_form, 'custom_kwarg'))
140.         self.assertEqual(formset.empty_form.custom_kwarg, 1)
141. 
142.     def test_formset_validation(self):
143.         # FormSet instances can also have an error attribute if validation failed for
144.         # any of the forms.
145.         formset = self.make_choiceformset([('Calexico', '')])
146.         self.assertFalse(formset.is_valid())
147.         self.assertEqual(formset.errors, [{'votes': ['This field is required.']}])
148. 
149.     def test_formset_validation_count(self):
150.         """
151.         A formset's ManagementForm is validated once per FormSet.is_valid()
152.         call and each form of the formset is cleaned once.
153.         """
154.         def make_method_counter(func):
155.             """Add a counter to func for the number of times it's called."""
156.             counter = Counter()
157.             counter.call_count = 0
158. 
159.             def mocked_func(*args, **kwargs):
160.                 counter.call_count += 1
161.                 return func(*args, **kwargs)
162. 
163.             return mocked_func, counter
164. 
165.         mocked_is_valid, is_valid_counter = make_method_counter(formsets.ManagementForm.is_valid)
166.         mocked_full_clean, full_clean_counter = make_method_counter(BaseForm.full_clean)
167.         formset = self.make_choiceformset([('Calexico', '100'), ('Any1', '42'), ('Any2', '101')])
168. 
169.         with mock.patch('django.forms.formsets.ManagementForm.is_valid', mocked_is_valid), \
170.                 mock.patch('django.forms.forms.BaseForm.full_clean', mocked_full_clean):
171.             self.assertTrue(formset.is_valid())
172.         self.assertEqual(is_valid_counter.call_count, 1)
173.         self.assertEqual(full_clean_counter.call_count, 4)
174. 
175.     def test_formset_has_changed(self):
176.         """
177.         FormSet.has_changed() is True if any data is passed to its forms, even
178.         if the formset didn't validate.
179.         """
180.         blank_formset = self.make_choiceformset([('', '')])
181.         self.assertFalse(blank_formset.has_changed())
182.         # invalid formset
183.         invalid_formset = self.make_choiceformset([('Calexico', '')])
184.         self.assertFalse(invalid_formset.is_valid())
185.         self.assertTrue(invalid_formset.has_changed())
186.         # valid formset
187.         valid_formset = self.make_choiceformset([('Calexico', '100')])
188.         self.assertTrue(valid_formset.is_valid())
189.         self.assertTrue(valid_formset.has_changed())
190. 
191.     def test_formset_initial_data(self):
192.         """
193.         A FormSet can be prefilled with existing data by providing a list of
194.         dicts to the `initial` argument. By default, an extra blank form is
195.         included.
196.         """
197.         formset = self.make_choiceformset(initial=[{'choice': 'Calexico', 'votes': 100}])
198.         self.assertHTMLEqual(
199.             '\n'.join(form.as_ul() for form in formset.forms),
200.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
201. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
202. <li>Choice: <input type="text" name="choices-1-choice"></li>
203. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
204.         )
205. 
206.     def test_blank_form_unfilled(self):
207.         """A form that's displayed as blank may be submitted as blank."""
208.         formset = self.make_choiceformset([('Calexico', '100'), ('', '')], initial_forms=1)
209.         self.assertTrue(formset.is_valid())
210.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}])
211. 
212.     def test_second_form_partially_filled(self):
213.         """
214.         If at least one field is filled out on a blank form, it will be
215.         validated.
216.         """
217.         formset = self.make_choiceformset([('Calexico', '100'), ('The Decemberists', '')], initial_forms=1)
218.         self.assertFalse(formset.is_valid())
219.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}])
220. 
221.     def test_delete_prefilled_data(self):
222.         """
223.         Deleting prefilled data is an error. Removing data from form fields
224.         isn't the proper way to delete it.
225.         """
226.         formset = self.make_choiceformset([('', ''), ('', '')], initial_forms=1)
227.         self.assertFalse(formset.is_valid())
228.         self.assertEqual(
229.             formset.errors,
230.             [{'votes': ['This field is required.'], 'choice': ['This field is required.']}, {}]
231.         )
232. 
233.     def test_displaying_more_than_one_blank_form(self):
234.         """
235.         More than 1 empty form can be displayed using formset_factory's
236.         `extra` argument.
237.         """
238.         ChoiceFormSet = formset_factory(Choice, extra=3)
239.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
240.         self.assertHTMLEqual(
241.             '\n'.join(form.as_ul() for form in formset.forms),
242.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
243. <li>Votes: <input type="number" name="choices-0-votes"></li>
244. <li>Choice: <input type="text" name="choices-1-choice"></li>
245. <li>Votes: <input type="number" name="choices-1-votes"></li>
246. <li>Choice: <input type="text" name="choices-2-choice"></li>
247. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
248.         )
249.         # Since every form was displayed as blank, they are also accepted as
250.         # blank. This may seem a little strange, but min_num is used to require
251.         # a minimum number of forms to be completed.
252.         data = {
253.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
254.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
255.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
256.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
257.             'choices-0-choice': '',
258.             'choices-0-votes': '',
259.             'choices-1-choice': '',
260.             'choices-1-votes': '',
261.             'choices-2-choice': '',
262.             'choices-2-votes': '',
263.         }
264.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
265.         self.assertTrue(formset.is_valid())
266.         self.assertEqual([form.cleaned_data for form in formset.forms], [{}, {}, {}])
267. 
268.     def test_min_num_displaying_more_than_one_blank_form(self):
269.         """
270.         More than 1 empty form can also be displayed using formset_factory's
271.         min_num argument. It will (essentially) increment the extra argument.
272.         """
273.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=1)
274.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
275.         # Min_num forms are required; extra forms can be empty.
276.         self.assertFalse(formset.forms[0].empty_permitted)
277.         self.assertTrue(formset.forms[1].empty_permitted)
278.         self.assertHTMLEqual(
279.             '\n'.join(form.as_ul() for form in formset.forms),
280.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
281. <li>Votes: <input type="number" name="choices-0-votes"></li>
282. <li>Choice: <input type="text" name="choices-1-choice"></li>
283. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
284.         )
285. 
286.     def test_min_num_displaying_more_than_one_blank_form_with_zero_extra(self):
287.         """More than 1 empty form can be displayed using min_num."""
288.         ChoiceFormSet = formset_factory(Choice, extra=0, min_num=3)
289.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
290.         self.assertHTMLEqual(
291.             '\n'.join(form.as_ul() for form in formset.forms),
292.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
293. <li>Votes: <input type="number" name="choices-0-votes"></li>
294. <li>Choice: <input type="text" name="choices-1-choice"></li>
295. <li>Votes: <input type="number" name="choices-1-votes"></li>
296. <li>Choice: <input type="text" name="choices-2-choice"></li>
297. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
298.         )
299. 
300.     def test_single_form_completed(self):
301.         """Just one form may be completed."""
302.         data = {
303.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
304.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
305.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
306.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
307.             'choices-0-choice': 'Calexico',
308.             'choices-0-votes': '100',
309.             'choices-1-choice': '',
310.             'choices-1-votes': '',
311.             'choices-2-choice': '',
312.             'choices-2-votes': '',
313.         }
314.         ChoiceFormSet = formset_factory(Choice, extra=3)
315.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
316.         self.assertTrue(formset.is_valid())
317.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}, {}])
318. 
319.     def test_formset_validate_max_flag(self):
320.         """
321.         If validate_max is set and max_num is less than TOTAL_FORMS in the
322.         data, a ValidationError is raised. MAX_NUM_FORMS in the data is
323.         irrelevant here (it's output as a hint for the client but its value
324.         in the returned data is not checked).
325.         """
326.         data = {
327.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
328.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
329.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
330.             'choices-MAX_NUM_FORMS': '2',  # max number of forms - should be ignored
331.             'choices-0-choice': 'Zero',
332.             'choices-0-votes': '0',
333.             'choices-1-choice': 'One',
334.             'choices-1-votes': '1',
335.         }
336.         ChoiceFormSet = formset_factory(Choice, extra=1, max_num=1, validate_max=True)
337.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
338.         self.assertFalse(formset.is_valid())
339.         self.assertEqual(formset.non_form_errors(), ['Please submit at most 1 form.'])
340. 
341.     def test_formset_validate_min_flag(self):
342.         """
343.         If validate_min is set and min_num is more than TOTAL_FORMS in the
344.         data, a ValidationError is raised. MIN_NUM_FORMS in the data is
345.         irrelevant here (it's output as a hint for the client but its value
346.         in the returned data is not checked).
347.         """
348.         data = {
349.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
350.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
351.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
352.             'choices-MAX_NUM_FORMS': '0',  # max number of forms - should be ignored
353.             'choices-0-choice': 'Zero',
354.             'choices-0-votes': '0',
355.             'choices-1-choice': 'One',
356.             'choices-1-votes': '1',
357.         }
358.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=3, validate_min=True)
359.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
360.         self.assertFalse(formset.is_valid())
361.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 3 forms.'])
362. 
363.     def test_formset_validate_min_unchanged_forms(self):
364.         """
365.         min_num validation doesn't consider unchanged forms with initial data
366.         as "empty".
367.         """
368.         initial = [
369.             {'choice': 'Zero', 'votes': 0},
370.             {'choice': 'One', 'votes': 0},
371.         ]
372.         data = {
373.             'choices-TOTAL_FORMS': '2',
374.             'choices-INITIAL_FORMS': '2',
375.             'choices-MIN_NUM_FORMS': '0',
376.             'choices-MAX_NUM_FORMS': '2',
377.             'choices-0-choice': 'Zero',
378.             'choices-0-votes': '0',
379.             'choices-1-choice': 'One',
380.             'choices-1-votes': '1',  # changed from initial
381.         }
382.         ChoiceFormSet = formset_factory(Choice, min_num=2, validate_min=True)
383.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices', initial=initial)
384.         self.assertFalse(formset.forms[0].has_changed())
385.         self.assertTrue(formset.forms[1].has_changed())
386.         self.assertTrue(formset.is_valid())
387. 
388.     def test_formset_validate_min_excludes_empty_forms(self):
389.         data = {
390.             'choices-TOTAL_FORMS': '2',
391.             'choices-INITIAL_FORMS': '0',
392.         }
393.         ChoiceFormSet = formset_factory(Choice, extra=2, min_num=1, validate_min=True, can_delete=True)
394.         formset = ChoiceFormSet(data, prefix='choices')
395.         self.assertFalse(formset.has_changed())
396.         self.assertFalse(formset.is_valid())
397.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 1 form.'])
398. 
399.     def test_second_form_partially_filled_2(self):
400.         """A partially completed form is invalid."""
401.         data = {
402.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
403.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
404.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
405.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
406.             'choices-0-choice': 'Calexico',
407.             'choices-0-votes': '100',
408.             'choices-1-choice': 'The Decemberists',
409.             'choices-1-votes': '',  # missing value
410.             'choices-2-choice': '',
411.             'choices-2-votes': '',
412.         }
413.         ChoiceFormSet = formset_factory(Choice, extra=3)
414.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
415.         self.assertFalse(formset.is_valid())
416.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}, {}])
417. 
418.     def test_more_initial_data(self):
419.         """
420.         The extra argument works when the formset is pre-filled with initial
421.         data.
422.         """
423.         initial = [{'choice': 'Calexico', 'votes': 100}]
424.         ChoiceFormSet = formset_factory(Choice, extra=3)
425.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
426.         self.assertHTMLEqual(
427.             '\n'.join(form.as_ul() for form in formset.forms),
428.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
429. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
430. <li>Choice: <input type="text" name="choices-1-choice"></li>
431. <li>Votes: <input type="number" name="choices-1-votes"></li>
432. <li>Choice: <input type="text" name="choices-2-choice"></li>
433. <li>Votes: <input type="number" name="choices-2-votes"></li>
434. <li>Choice: <input type="text" name="choices-3-choice"></li>
435. <li>Votes: <input type="number" name="choices-3-votes"></li>"""
436.         )
437.         # Retrieving an empty form works. Tt shows up in the form list.
438.         self.assertTrue(formset.empty_form.empty_permitted)
439.         self.assertHTMLEqual(
440.             formset.empty_form.as_ul(),
441.             """<li>Choice: <input type="text" name="choices-__prefix__-choice"></li>
442. <li>Votes: <input type="number" name="choices-__prefix__-votes"></li>"""
443.         )
444. 
445.     def test_formset_with_deletion(self):
446.         """
447.         formset_factory's can_delete argument adds a boolean "delete" field to
448.         each form. When that boolean field is True, the form will be in
449.         formset.deleted_forms.
450.         """
451.         ChoiceFormSet = formset_factory(Choice, can_delete=True)
452.         initial = [{'choice': 'Calexico', 'votes': 100}, {'choice': 'Fergie', 'votes': 900}]
453.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
454.         self.assertHTMLEqual(
455.             '\n'.join(form.as_ul() for form in formset.forms),
456.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
457. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
458. <li>Delete: <input type="checkbox" name="choices-0-DELETE"></li>
459. <li>Choice: <input type="text" name="choices-1-choice" value="Fergie"></li>
460. <li>Votes: <input type="number" name="choices-1-votes" value="900"></li>
461. <li>Delete: <input type="checkbox" name="choices-1-DELETE"></li>
462. <li>Choice: <input type="text" name="choices-2-choice"></li>
463. <li>Votes: <input type="number" name="choices-2-votes"></li>
464. <li>Delete: <input type="checkbox" name="choices-2-DELETE"></li>"""
465.         )
466.         # To delete something, set that form's special delete field to 'on'.
467.         # Let's go ahead and delete Fergie.
468.         data = {
469.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
470.             'choices-INITIAL_FORMS': '2',  # the number of forms with initial data
471.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
472.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
473.             'choices-0-choice': 'Calexico',
474.             'choices-0-votes': '100',
475.             'choices-0-DELETE': '',
476.             'choices-1-choice': 'Fergie',
477.             'choices-1-votes': '900',
478.             'choices-1-DELETE': 'on',
479.             'choices-2-choice': '',
480.             'choices-2-votes': '',
481.             'choices-2-DELETE': '',
482.         }
483.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
484.         self.assertTrue(formset.is_valid())
485.         self.assertEqual(
486.             [form.cleaned_data for form in formset.forms],
487.             [
488.                 {'votes': 100, 'DELETE': False, 'choice': 'Calexico'},
489.                 {'votes': 900, 'DELETE': True, 'choice': 'Fergie'},
490.                 {},
491.             ]
492.         )
493.         self.assertEqual(
494.             [form.cleaned_data for form in formset.deleted_forms],
495.             [{'votes': 900, 'DELETE': True, 'choice': 'Fergie'}]
496.         )
497. 
498.     def test_formset_with_deletion_remove_deletion_flag(self):
499.         """
500.         If a form is filled with something and can_delete is also checked, that

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 04:01:21,873 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The current context is missing a test case that validates `non_form_errors` when a `ValidationError` is raised from a custom `clean()` method in a `BaseFormSet` subclass. The patch explicitly modifies this code path. While `BaseFavoriteDrinksFormSet` is defined in the context and has such a `clean` method, the test that uses it is missing because the `tests/forms_tests/tests/test_formsets.py` file content is incomplete. Getting this test is crucial for covering all aspects of the patch.' query='Please provide the test method `test_formset_with_custom_clean` from `tests/forms_tests/tests/test_formsets.py`.' extra_requirements="If that specific test doesn't exist, please provide any test method from that file that uses the `FavoriteDrinksFormSet`." purpose="I need a test case that covers the creation of `non_form_errors` from a `ValidationError` raised within a formset's `clean()` method, which is the second scenario the patch addresses."
2025-12-24 04:01:21,874 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the test method `test_formset_with_custom_clean` from `tests/forms_tests/tests/test_formsets.py`.
2025-12-24 04:01:21,875 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 04:01:21,875 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 04:01:21,876 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 04:01:21,876 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the test method `test_formset_with_custom_clean` from `tests/forms_tests/tests/test_formsets.py`.
Extra requirements: If that specific test doesn't exist, please provide any test method from that file that uses the `FavoriteDrinksFormSet`.
Purpose: I need a test case that covers the creation of `non_form_errors` from a `ValidationError` raised within a formset's `clean()` method, which is the second scenario the patch addresses.
2025-12-24 04:01:33,269 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_file_node_with_relative_path', 'arguments': '{"relative_path": "tests/forms_tests/tests/test_formsets.py"}'}, '__gemini_function_call_thought_signatures__': {'09a2dc94-e03b-49d9-8c79-2708cbb9d0b1': 'CsANAY89a18YVI8Mh8m6Nys3lyvthsRHQHn04GckmumgLR1eDj38tLDvS1OJrRleVgsEp/Y/lgAQ5w/uvGAgoRuPrcvtFgJKdEj04iaQHATy2OlpyXB3rLpP4GNR0ad/g9I3CRe/1UijarspOtnpwP89FDc9ucEoaAhEDGF1+PcpfoZkNGq2mVsBBGEh7pEQDAIDAiL7sDAG+wH8nONZSgCOCE9p9Vpbh6on6+zQPIvXqVX4b4K53Kz54IYJuL10XXhVxLh7P4J3A9o+q1F6CDNg6uIoepwPOy/Ef0RBDVxd3KPMME5b245i09uz3OlCNHZpdvSlyaIqAizsmPS3xR8X3PR8tjC8mpqkezMgucdY11yAE1XTFuXlEgRjGZwdoPZZBrcLLepuXPoHakz0A1j0Drknyr0ZYNxVObuYnROrsiB6K8evx6qETu9XScRzToWldFhKeXEbLkuvTi7molF9dX/YL6yo8v3N3K+MaQyVuAdKBR5dLWQQOeXPa/sus1tJYg3EgwDWwnlTv4vE6zndxK8w+vsxD/QG1Od8+4vW2LtZB6cYLNwOftHZz0yqBuVU4tGR+dRHabqIwQPkvJ09tW0eDCaSVM5kSw6iCaqJJPlqbALrYuWCHbF+VlTCoJ8TCHkh1zvCe14xFg/nrGBDbzR2f8u5fLBVvKLQMRc3w8s/k3usbYZDAOMgzFSSS71H3gdwZXfU2e2VpFsuoIuO+cj+0/TkhyM665BqTqtdlzYPfMzbZEJJ7sXSjt9h0ebpVCntq6RiwSvPPc7VmDhbilQJ8eQnb9w34G+JuvX4cMfIEFvSJ4awCJxAAbyO+2nndZIbcrxGZR8Mx9xSiAIvGLUL1we4y5I7xm0GJ54f9mlvY978Gsm9NyfFqAIGKuhKm3pER1vIedcIwa+5ELlTSVHqJXmfWnLb2d79Py8mXxpeX2psInaS6tSEDksrtRUqnqFgcVXv4vn52xoL0e6cFVOplMQqTHOlD705M5rJcJsYIiXlku4foJQrWoXw9SWk77ulbSeTbxa5zzDkfrrtUFRRCJUaYdcqzG9d/3wAxE8WaWiUH4mWLyAy0RCMI0wEdmOr3y95wgcPEP9ypECPSwmPDhWaigQcbLstbcf9rP/DGGkd8iEn6iK9SYhheiSmMzE/+0WpuDEiA5K5FqWMJAhB+7zzr5go0FHWieshUo3Y58fjrHD+O5BKKZJuUmGDyXoaY2LpUnZNY5vZ7arBKYtH5PFAgdqzqJo3e3oPAvNtso3wh8ERS04jUjVKUCv5yPbzstUuqPfE5mf85Brxfy61N082lbFmO5rmyqYmTKrKWBVHBJtmQHUN4PpONcvj/6Y3azfvw/wMgDVxag//8yFwLqk3W402Se7qVh9FT3F/vSL54/0VMF0nyfSZK+izihCSDEyB4XSnjijGTN5LJFgclu/f03dOSpklYLa69CKHonntyJHa2hJf1BmwtbNG3m83/DvklJ4FuVoj98IUEKszFxxZ9jJ5k2M+79wtGSn36D/whdvGCkvepEB0WGdoJZ9oC0HrGHQ6NTyTz0AwstKJ7GXJ5/+gnxeSFOYY+DpVGQZSI2OwlafHjaX+V3QZhN35qJrkW8BCyOY5vMl6Yq7igljkI2v5GQI81b7/Ucx0w3k15Q66PXOqY0sOCOKfFguKSYxWgn41CGSN0KlrSCAnpCpZbl2zwhWbc/V2fOrrS80LaoUJWYxAvt+bfz89F5eJ/cH1w116mrpCdA6Lim6ev7njfdfcgzaxrZ88mlDBgX0npXNPc8Hu+WIamZbQhXPmrOcBjEt1/bYUQDtz49UP3OX/ceTBmSAXwGWtOazvetdzG/y0UiKJtr5GxqZZhgKX+nOMVZpl1f7T9Suh/BQo0V0uYKcNE+zUQ072cWQ36YwiGC1CTWsKL6rCEEme/ujvZCQwbW8pSWnEuVDE/5iRE+PNpBxLKaAqBA7qb55G7iZ7R2A8TtAy7N0DtPz6UCbGck3ZT6LsZL9Day7E77auEpCGZTN4q1JSkYbMba+vxFhO66LzNfgG9FUchFs1nhtutWiQiQ0OIlmkC4HQysBnUGHcMlndKokglhr7dOFwrbYd5KbNd33g4AJk2sWaHL2lAR6JNz5tqr7a3YsfERTIeQHXPlEMlrMz7v3we6GDyi4TM7tvvssyA737/rSvjh3Dn16H7bT5tJ/8STX006AQbYKcGLP22hN8UVoh6l63QXvgzQZjXmCjpNlIoB9Z5zz+npFjQYI6QLT46T9ZTDKbPT6g1BmvV136GpmyidjGkn3yOMvSlEytdbNfumOk'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2171, 'candidates_token_count': 28, 'total_token_count': 3236, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2171}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 28}], 'thoughts_token_count': 1037, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -3.02858761378697, 'model_name': 'gemini-2.5-pro'} id='run--90ed5c58-055d-4497-9554-f5abf946811f-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'tests/forms_tests/tests/test_formsets.py'}, 'id': '09a2dc94-e03b-49d9-8c79-2708cbb9d0b1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2171, 'output_tokens': 28, 'total_tokens': 3236, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1037}}
2025-12-24 04:01:36,551 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/forms_tests/tests/test_formsets.py", "text": "test_formset_with_custom_clean"}'}, '__gemini_function_call_thought_signatures__': {'f557ac1b-4b85-46b7-a8ae-97cd32deb8ec': 'CtkGAY89a1+mWmsD6JzWNpgrYxoYu58LI692/joivvSX5KBrcQ2mzaza9RBWOs4UQXFzTMTh3k4xnwu7NGeUYY47g3YXFz10501IcW/Ini0lZBYQstFEr2eBt8kfXaUyS9DBBsKebCmOT7+BpZGB9WhbghaDRRiuJjtzT+IJCRn6/slo6psBs9S/o+O0c0SMfwD6lFX0jyNZ7FyFs9Cj/dL/1MPZEzAZZwnAU/6YwFXduQWzR6LnZUIeDD+T6SIM+Hl3YSrEbzjl7JjoUUdjXzf7kz3EJ5TAEuC9XlOll/PVdNdyS7+am7+kn7PhIwo3v4N8fQyoXPzLg5fGjlvryvZJR1oCwR8wNUx0mccYY5qw8inPd+Ol2Q1F1EhaysTpdRH0L0G8LcqcybA3bkrVtB4Q59MGJcidQxKlsbpV5A+dfuj1fZLLdT3u8viVjmq8bgQKbNd69vjpSKYPz7uLshcPEfNXu+JA+4vXD+9aHKYsenkJ72wWhquZmDLI3h2MUdP9MDXMtk06o1G9cT/AHxoHckos5vB6Zi8EE4AjCAx5UqdxI8/CtNtSUSqZhkBzfDe0tZGVzvFKrLRB1rLU2yVixBBOu1hpq0eN8nbFieDo6hpfGxSzyxQOKjcvLb0EjV2Ljp6IbXD8z9daqJEQJKo8TMAF7eb+iIgYQK0cr5MmHTQBzCkD7h4tq6vySHGK3zg9jKrPO581USx6R2NnKtpkE9mEVzwg7+EsRAFrODJcr0LWo8vSVzSG1FTNQX0t+iIk51SG7BQWppYGEbiC7cM4i2TYd2+B3DeUT+fzBMBAMPNPKKEGYpEI5cxnYAgtqGUKMcd0+VZ+rdqEKkGCzCIz9eCH73MryuPbom/hIQG7OJczGH4x3tB27nJl/xIAe37uHp7nTyStzzAxBX35KwNXIIEbeOhbqxDZ3Rd+NZYXV/YtUPPiRp1UNNB921gMIPUkvmtHFkXqpdigvDGTRiWW59/0XyHlI8R3lwuNKXMXh/9GL9D3e8yICuvvKVYC/P6QT+wjAg4Xh5tWpwpwvYw0Le3nubBtGK9V4GqtcJo8pGvJpbwMJWFAqANHJm3h9vreuOHKzp/OgeO2RM1g7VQykgIHfWRYRRALOzrcdWbjcKbpqzFBzXJTUDw='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2265, 'candidates_token_count': 47, 'total_token_count': 2561, 'cached_content_token_count': 1553, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2765}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1553}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 47}], 'thoughts_token_count': 249}, 'finish_reason': 'STOP', 'avg_logprobs': -0.46527704279473486, 'model_name': 'gemini-2.5-pro'} id='run--00fc8856-77c2-4f83-abf3-8b6ed36a967a-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/forms_tests/tests/test_formsets.py', 'text': 'test_formset_with_custom_clean'}, 'id': 'f557ac1b-4b85-46b7-a8ae-97cd32deb8ec', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2265, 'output_tokens': 47, 'total_tokens': 2561, 'input_token_details': {'cache_read': 1553}, 'output_token_details': {'reasoning': 249}}
2025-12-24 04:01:41,269 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/forms_tests/tests/test_formsets.py", "text": "FavoriteDrinksFormSet"}'}, '__gemini_function_call_thought_signatures__': {'398283ad-bc70-4448-a432-fd2504cf3c34': 'CtMLAY89a1/Ezbd2r8t7zzNz2L8IbE6vYAZsGqtqd/qen+HHCDoZsu9louKpLQEGkiFPPaChEpFxEA9/272volNZngN7ijuhTwqxhKXzMg9dE+uxXlx9etF7ZSekf0EcUqKZvHIGN5vYMPqaWtcIWfFg8qGEF0WCq4hjUnD3WLpdNceyJqSLG3K0JoWvcs5PpWAfzMbOxHikdGdxpW7MpNvw1vyHX5YME9GHCE3Xd9/RbH50HANenhiG5n3wrukxWBwnsydglomiDplKUELkJuPIG1I/ikOWN8UVJRjVG4OJRbNCmDJn94vCMp8lS51I8xt0wIJeZgoHNA8shasBO5dCu7On5XgMdXyIQIwWj004IkTyKl64kmRWsHJMkChyxA3eUJ1NKiuTeKfQOlTw74bfXt1mfv1KRiffUgW2sqyBF3f/X3Tu6pjtuluP9b4nZ5fXinIG+xpwPx+qVikAmQOArNS2Tto2Mm2c9ATL8MxFzhNr2QVI4elNiiId3SiDdPzFFXVF0jh+xQayehwvPUtO4aK6m3O7nY16hqXy1yZmYV6v9hciBPh4pTiwXMOljje7Ef9mUBPzlU7gnQdLKj6F5Vd975dQZiVoZSy1kFOVgBqN7dDpZulbh1xnm+ellJcA5orC/8Cij6gQVRV2koXf9aKII4glpGCJfR5Lp4pLE/N/Y0Wqe2JX+m07NsINBQEOC3xz6CTkTZLjwLGc8M2xPqKtO2yNhSJmFcIOtdeRIbkFCb44KhxLiNIptA0rtgEI6eYbJaCjGHcTQVQswk6yueL+7mRj0ntgR2e5GBcsbVgVXZ3iINcU/vqrfvmls3ea36ScspWvByIWi+py2EJ/djXweCYhKG1tBQs5GbzRccEeBvNMieKIhvvIH1+2uL1wKy+Dg+AfmSIdZLanc4iOq5yZq86YFLri2pbEpGuLEz+SQxuxuTsoHnNrkV1kEHom6tLrEuJjHjtqORRa3sWqxQXrVftmplBrA4kW7qgNFww33VC1IWvjAojyS3UHn1B3wC5F6YmBhmP9QrTLTN7Xhkep4xfmcVbHFHp+cWdIHG/cpc6JlaQB4iLGEw+PQvqrXLFsjmawKiUQ7jj8SJMnBqe2F+2X/XMZIsejkZvo3ZiEuxxYizlCXL74m+348sPQy/iMWXkVsa3Mhh28G7yMDwHwiEoK+/2V8Mht872OerrN9hc9AlafwS2Cx7C6/pHLBHn1v0fDRsDW9XdLBtYmWkygOviwIRY2VtUsX+uZULLdKAg6I1GCfAEhDGLQY63O13vZd+3CtZWqZ8ivACwJPN3T4BZal6z3JPc9DNKfqzyD+Id0VbjLaL99Iw3LvW59pHOu/FJVMCM/wUlgyiGv8sFiUuuinoV6LtjY0/dD9aEyjewmRAqW5UCG2WDWEiRmmLGOWbG88JHnMiQvHxtCHpG3nvw6MeeI7JnouLCm2UEhCRIknsBzH+pE/cxPc2xFUAcSSWuZF1q3BNlHyQZZPFacdGJVl/NuYHLCa7qzYKjegSuQ0omywpcW0Z38dZInsfG1QtHz/tY/hvtWxRemGV64FvZAkiexQqrBysA9p0Xv8lWNNskEjbRnmEUtZjge3vYNA9/KcdqjU6pB1EoHDq6VbrIqViUkO9bNp6f+F5nDqs39cXicY3bobLiSn6AWjvUHFMtvr0DI2USBpZFpvqk5K66FMoCw03PY97hIfscPeMIHc2I35R7HJBGAcZWVyd69mWndFdRNW6cKMu1vkC0HmaUIayh8EaThlp99DA6EQkOIy9f9OxNS+mMwkGb/TgKojiaz2wIqDjLbEWKW4ckb8l+/dAvomobIyXx6ykKLIAFqk2sDOcyPVKG1WAVm8wbsQHGyX/dpSk99w82fjEePGOP1Klqd4/VJHhl32cNt4ZuJOjMjUS5XHInErp9Q73l04HnZce8syaxLdADJe4AkkVIwwy2Ake+gdYN0uW6NKUo4uBUcu9KgoXPdHRtvlrI3'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2344, 'candidates_token_count': 41, 'total_token_count': 2781, 'cached_content_token_count': 1578, 'prompt_tokens_details': [{'modality': 1, 'token_count': 3093}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1578}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 41}], 'thoughts_token_count': 396}, 'finish_reason': 'STOP', 'avg_logprobs': -0.8769232587116521, 'model_name': 'gemini-2.5-pro'} id='run--2b38d8f8-2a22-4017-8036-c87c5ccfb302-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/forms_tests/tests/test_formsets.py', 'text': 'FavoriteDrinksFormSet'}, 'id': '398283ad-bc70-4448-a432-fd2504cf3c34', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2344, 'output_tokens': 41, 'total_tokens': 2781, 'input_token_details': {'cache_read': 1578}, 'output_token_details': {'reasoning': 396}}
2025-12-24 04:01:50,171 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/forms_tests/tests/test_formsets.py", "text": "def test_clean_hook(self):"}'}, '__gemini_function_call_thought_signatures__': {'5ce94b9b-779c-4ed1-9ca0-58056b75e80b': 'Cu4YAY89a18Z9R/BEv3HBFnrat4iU6rxjG4TrOXjymn6ZoQkj7vveoVO34pS4E8IJDpKSqdK3sh6O2m9Gc55M5vMTVlHQgcKeiR+FxbO5I1cDUhJMLa2hGLwZ9yKuPkCMCagSHgy3jDct/okQRD+VEAw4XcsD4GO0LU7cPiFK+dAE6eox3lB4wrqFUOPgkcSirQsgmxf6nWU3ULvmHiczfOzJD3HBqH/cmk9z+BNH0efoKin2oz9JqiS8zcSVRwXJctfkK0YSHuLDG0XEXZo5hLmrCBxF6+CroDprNPw4/bMgV3nzOvd8i0Tn0HiC68j6Xaq64WyEdE1CnDUPgcm3hBDWcuOmMfy3QD2Z8zsxcMD/EgZ9Bni3dZ6JCvkJZ3FT4oGYbZbSWmNUdCFxDkIDJgBUXMlniJKkLKx0gRQqNwk3b57xH+Uc68KCHlppcWQl8vLqbZY2/RqQUw1UbaWk80X2ou1eUGBlE/net+6np7EW7QeR9VxAAoY+VUGPoKuXI3EkVvplCUPl2X8rB0hPDrPWvwkQbQKADxKym+h0HHQzLVCF8y25DwXoTFV5gt/ePKiUJs6IjZzerV39tio0GP3x6LzUeBVYYE3uI52J1FnpojNL4Jt5LN/a1JstOuYNjesc7k/Wmp0DW78ywismBneo5iB14uZNfJONbnZs1Ys3g2Y8NWRMTGhfOqqGeWn6wC3Uh206z+e8ybeuL7leXREOBJw2z+EuqXXnSXOvu7B+gkSVUTyOUXvIKJZJqrdDcwbVcvO9/lKc8FYGU7aPj1KF29L5L0ELRVKlunDmE72qow+bnhT6jAlptqBDo1CCcbx8IGBuCdDj+esglHtjwAhoVmv/DnPKlKppOC8XJhp4l+QKgWhgNfCdsWc5S6bK331L4JMcdZomIEvrNAmdk0M5PidRndWmxjuZeGLFjG33GxyGQyykmhIdc4+ltxYdRFqrxMGjxVbJJgOW8i6Jd6jUD0WL5obCsJbg7VkOtihrmGtEyi+GodsuSIxZ2oNZLLCrjToUGahmr0Cz6Atpzzjas0wlNOpO51VyYOUtiqqc7YVZPNME5x1luCivS69uzt1BgfBA0n9QEPTkfWczWauJ/B3/7YLPGPJlrmGfYRAUfBuNp7/oTbsvJez49gC+w88xJxjw2jrLVoSHgfYa+6n/hL8MPHXL/dqDzRc+OVB6PQIv2LVfUCkUm8/7ZVXrjWl2iR8ITT440el1suzD8c6mgFXhxXwkeKx/75nxnVoYlu2YsrpAfahXuP/1qizttl72bGelgTRbE8t9+qqDP9Yh5RjNNfieSRmvnsVXJMon21/0EZTSjo5PmNH6XZp9lGh6iSSy3iaK6+Z3lLdDJR4jDoSrweOvkgC4aS0gw9m1ldlXDhRrlrHAEM8LvU1RJS4temnnElMBxcIC4pxsw4vjr7khax5vppF5T6mohMtkXs6pS8jcQMPhc8fKpnDz60zjlHDH60NX56xpMB5UdaLqt9HJVw9odMI7s2+cyHXrZuWVo18vrpbJ7IIUnrxsdf6W5i4c9nm0M/KXhwAAi5WSGhRvEnaOXcIIJQc/2DKLeNUKmLmAy2BTWnNtZ62UjSIe5aFmssh9EAnhA9pOBZc2K0lo6xlDYKCTZZOaYiFrB6U4B9ai8e0vvmBaUOGHBX6qcXTou/dhPSunIdsDM6vyGTYnyldcBXl0pY9Xm59K0snGxPaJp3wWja+kMPGvSaIhgxjcGF5hzxceZuCCHWSzpjKoFR6oCcmyHodArzZGEaERG/v6UBZSgOIqPQVFzNLVQBrymS1HRsO4bQTlI7XfDFg+w8fYsM6C3YQnA6yWlboU6i5y4qr/4Lqj8Nmt3m8XsI45ww5TCZvokyNSru9KM4lKeJCno+ph5v7G+Cw8PyG2q9HvZcKWpGsfBIU4R19r+bVLluntO6IzFb3qlRnbsoEdwKZ3fq0SNiQ7m7x73EaEzYbwiAP5moTNlwrH5+0UdN5h3QNUBgqfzRQN8WVnq4Jbiv31OFWuEHaZzm6QDizBW1BYDfOPcEeukR9i8rBAPpglsms4a3f5iyqCdmhC2uS4YLP18XEi5+br45XAgz0gtIsnU7pmAk/wcs46rZs1HTVGXagOvEk6sewohC+8ZsKxXFCwDtUgp4q/06HtJ5B8tlJtPmT7Sr7QYJDZY2N2vJjS/avR6sjULVZe/6r0PHhPgbu9M63KTCKYidJqZgsDMldpozGW7cHeUWT0OdP4W1FGFgx1vyeyrNYQC0yv1EXTMvL1h0k7swaXt6a8eViwtvUHQkloYCqmILe7bdO5UbktLFjtlWJ2PsJL0HxUAJ48D/j5THsMC7biCkf2UTKfkvAX6DeXxrfyGTjMkJ0gl2i6h42Qi2TM76WeIANJAO4B+FWu3+/V+YxzbM0VG3Jy0kZ6OJWiRuq+jJOWWR8elWV1CAxZ0Sr+drRAf7BCoXd8p1bK1wqEMGDlaMcHJBuYitvbk5HRt6UL337cjJ3deJg7xUFDMyrRLWKbz0FHD1ziYtl42VVUqxh8ivMXVexhTZhL5TL4+aDF/AummV4zkOD+iMwcAZt/pesvpawl8zjKKtiw7ofgvqHMbr6DUZIl3fz9EneSC9yuJsCWv/EtISdLIBw9wcMx5ttSymHXx2bomJQVtF3/qvYEjBaNLUPIIIocT+G+vEO0CM8wSJnVndou15OqeztQJbd92UVrk++udHPKy7IuYm7kN0HpYKjVXhxpZQ1IKCLhbyW3+blpvF5J/c1TwRxpOTlIAxvCrg0WKIsXTCDeaSJcemalpRO4IKsVxzB3JOsXpzn8DhQSBwwIFVSQ4k4+6H8bQmlryVlIjGf3B0o8qwQalmGQ+xEMhwZKYz+2+3netxLxWbBcxgQd5el8K1YGHqvQ9M9FCTplmTAalzsEMDFClVEQhigUy46SLEMM82hfetz7Y9Cuc0/JqMcCP3V1v4dnQq1jsC1pY317E0hPc2HC8idZzEoFPdkgopZKJcXNQN6eXkCfsp8yrViDQzW25mjyYGrWcLuBsrUqfEWMKKVfoHQ7oD1xUYTHulaw9/FMs9yrRQEViBYfSW5OAo2pUSbZSugkIB85eLZtEnbuyTW+uSyTz9bj/GSTMsF6YFf8ECnccf/jrKDBORUtC7C+YObLvUz1GQ3kVhwEFJqNyQM9Iwx9sAaHyrp2+MIh8ywmG1vM1gRwPJupxzTE1TY+klZyWtvQ/iXwE0z3VmnhTuxepdyNld769XJDkMJuA5yLg0IryXncGfFoVJfMUK5EeQciwgCWm3oEbqMQjTnS3+fs0wJP0Y1bVIEH27ztLxWEMreZBgKe+xWrHWAUWG5rnbLM49TwmCKJs9O57R5su0OTLT/PFQCHu+8vrNQlRA0w+xP7i/EqMuQDRIuLFT22itEWycwsf3aqGZF6dv93QbNitjK2WEN294Vx/9fMFztExGXXSL3zZ27hbRzQhDanhh4Dm7ZDkwcP9ToOUzgHNUaa8n41L5q90coRu3fyn7DXxxcjQ3ZT0dDjxy4BAsGnmcleDvc1oQtvtjL7ea0Sy/28UbSclJydByKGxEBtP7YR6css6K1N4seGE+ajjfMuS5c6HuchRY7XK1Pe1eweJWsIsceQ8N2tx69YkzPJeNlifdqj7wKKNoUUkzC8YpFAIIp51sHAAYIlS9L9TajXIRzkUDlbxrSUDCX0iSSoL7uZpJwIVGlAuuISHod5Ebx5Hccc6hyRlmnqNQLYP94bn8HjFeLRscMPHTC3Yk+R826jhfCGdKq8t2ZpCb4sjyPrN4lvry3YJxa4l4m5DnLc1PHJhSRfnM71RgboRghuVfwvlOQX4y9ycyHKj5tkozF46k+IxRGTTEaOkgdwpUR4V3OzQVFVZvZ40WkqGROjZaOUpuDcbmsSH2IdzCRloOm9c6p4kiNanfpd+a3rz0mzDFcZs260JkCIou2onqmslrBG5XfXBHu2ZxAMkGDnQhrUskN2wRcXv2fllLmbZw6pDtHEi+ZPDU4pIljWeliceeDAHVk3JHnT0QHfrSjxyASWfLxCRTp8zPoATxoCvGq/rlcwiS15CSGgWfeBjg7wHYf8zUH3hD0GDJ3K3zmgr+ejEta7DTs3rMQs4pLwqJg3TPldpdcJiG6rjnTKW0/I892ULR7J6COfZLx+R6qQ0mGrQ1o/zT+tLOZcB+e05KeQ62/2JLmrGdID8WVRcGY1GOiULeBMadUi1nuazxrN20oSQjgLhk='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20430, 'candidates_token_count': 46, 'total_token_count': 21359, 'cached_content_token_count': 1847, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21575}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1847}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 46}], 'thoughts_token_count': 883}, 'finish_reason': 'STOP', 'avg_logprobs': -1.4393023615298064, 'model_name': 'gemini-2.5-pro'} id='run--2241d7ab-637c-4620-9b5b-35d76f7998b3-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/forms_tests/tests/test_formsets.py', 'text': 'def test_clean_hook(self):'}, 'id': '5ce94b9b-779c-4ed1-9ca0-58056b75e80b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 20430, 'output_tokens': 46, 'total_tokens': 21359, 'input_token_details': {'cache_read': 1847}, 'output_token_details': {'reasoning': 883}}
2025-12-24 04:01:58,996 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/forms_tests/tests/test_formsets.py"}'}, '__gemini_function_call_thought_signatures__': {'54c73799-bdd7-4e80-ac6c-80b7cad4127b': 'Cp8WAY89a1+QIbnqavI8Zcq5SnxSX5s2shsugT7wlaHNYeJ60CMBTBznHK/v0BcT1ns7dATXNXyis52tR/LWDwFpdi5of43F+5vZsZGgblcQOn/Q+Um7GB1L4K0UI43f3bHVt9JULKNbljfYLI19OT7bReyeTEhMOabquLLcIhlMSQOJLp4hJw97fxTiMvt+X07Sw8UHSYKXvBdV1K3ufh+Wn/RBV6NvBiBYl3+KaYNGx8AXw8O/vH0FCRCvzBIwqx7PS4cGjlHKtQzgmLHO6OAMvXTRpdCMazX5d/8iBDVSL+kku5vav6+ZsctNr8HDWxqhZA5cs1aFQkLtkzfs+pk9RRs4LCt//cn5/0e5Cnz7GzPHFEMN1hwTqpll2LeGOYmUu5XotMKLNXKj3KyfDdDmQl6wx0N2Y4YO7ZAAtM2s0E/lDWOPb4CbCXr9lZ2sEZUH2caiJ/N5ssYOV/OYI9lacLwPL00Op/73vvS7X0k1Al9jaQU6SkOrisdGN5pcu97Mb2LwKZGZyghjs87KvY02E9vzMVJJPq6zubk8cLT3GiCSVfb9M69bVL0skn0isAmFSV5NK2fccktPL8UM7A6MGnb1kf58/9DY/iQrlEDmpYcOzeDmSF9innSKTEXKfNIryK78ktX/SfNpTxBsUeSMKbQv2ed+NglKv2/MU7/9TJfTnp00FLDQzyuk9ODHGC8OrzUrbMURoR2OX7lLIguXOV9lGpA6sA+mG80EBglaJED3o/0/Lmid/eOCxwOdo0exXFn07/7ZRU5I+tm6M8UybkONNFJgIBgs6dH3HfbKxlll50qVKbgM5pQpAm+P+TLl1kFUjDNe1sSuBhRZebc8OVXRGCzqiz661MIMjTudnfjQ2fFpC/ZtIQAL6E/RZjFioRz6zh8q/OWBWu02CSV8gQ/guTqGKgssbcx0HpyEm+T336HVBilBtxmkIelKq9AsfT9P6aPavRU8JqN/MPbbv1TULeADdg/HtiVYj6GBl0A4MLNmrMmAlxHP/+Qt1aOOAB0HMUAs3LG7ZsTU38r6EOYMFo4QgI5GBpq/Ik7Vy6Hu9z1jhKQB6cTJPoPrW+M/kQLCz7+wCZbDl/JJV4pHl00Cj+g7T7w8uCvCEpTxfUR56rGI9ZYuCVBcC1HnG5Mn1RNZwlUOMxGfvKucFJs/JCSSVqopw+31txOdc87QwCgl+NBHwNMy21G6uyG/AIvVn7Ebdxa2EN1XjQPC3i5NhcQIWHYfv+LJXOy9RSn5vj9CVqGHXxVgF48tkn4pM/veWTIU2Rtafztnl3yX+apSz8zpeYgA0eyHvuRX8igE7gDehuHkOCB+ekU77IKhVlz7ZdTM56+mlLnYVz2cifMHm+G9yiWB9e/n82HOKyyRcXyJ9e/7Qz5ZYqBo/Oe6LrPFql+TWzfUAut2M6t/o7mHdsUW8yInS6nT9lcqOo27eL/kfSZfrhIf7cf4N6fJxbYH1UEuS3j56nZDC6ruVZDq/1NVtQUrhN0joOw+9spOmR0rYqpffSWPchcDq4z7TLRhwVZugFd2l+RoBoMwu6tq3bxAcoP6Y6iZtphpScKq1A1Op6ypFVbe5emdstdcZHSQXYScoI8NdjCfjAkB4sHVuIuLdXWV5pDvzcLBTaK57K7LpDv3HumCGat2foVkJIgrvDpiUExrTWgHEfLxvfDu+sTRrgY1jVtfPpW6r51pA4iGjx0YZ9h4/6OyqBujDF6R4jPVBzDwvEOg9eFC4xeIdTzLP01EQI+cEOaLpxP24C0FnuGfUqxYCnGtb9Sbnt+7KYl8y+U2CdpB10zRAFx6sq/aD+ii9hDUBBDtCaXJJETmnxa+AF06ycn7R22Qj+n0ywCKF6X+Bnlgjekomxn0IhOwsg4PeANA49zc5cF8F6+WYak7eApEkTnnubJjJ+u90ZFhavTbbZONzoXWEYGjPA/i3YxENjYBz4Q0c4GaNwo1NvJy1OIjwSHYIMCV07ptoHKPy3SaCd2Bjp4ijBuNu6lcQOI/J+XKNBbENyz1o167EaTWU4b5cqFTs5GtuNokgr0ALgvZXqPSB04ZbXXxnzPQku0TMQNjd1+Jy3wqbkyL6qTIyFBWamJ0eFKzBwqWuoyS/09gtaw/ndooNEASPtd2NxQYEkvCZn1LZ1b5dLSJwbwhy/dU11bcnfqepRX8aPl7pqpMY2EcQGnc7jBF2jdhCOxYASfhTWXFnHtYyoienY6oOc8LeCyZUplQKoQcbAVrovn0yd/qgxiXnBIr+A8u628RpRnKHIhuQTlpDgJxsQQaiLtQHlv3QgBL9pUAXJe/VkoCt+Sc7EWQ0xWtw5qQphRmkyRlWv3/EV7J86ztuGk3k3VI3P7zxGKyO2hD+m3JjtBpMkt3jXDseHVlqPqu879yRxLKi/b9CjcotVu9TSGGDd9dIj/HA5zmYUokY346ICw30XkltyaiDfxXwYTlgG8ch6OZEp+E4pVA3cJvSlAQRwUbBuhQlPh4mNIr0qEYlAItAZKnCwVDB1NqkSsNixOLdpcG/t4ur2NFO6hopdVLCg5vN+zVMqCOhFQyJh3hsI1xdNpl4zFyxrASVsCvwyUr3LF6f0iuX0M/poZcQixnIZeN0MCmAJ1KlgF3/rkeYoRvin/tW21kR0YXJndL90AiJ6dEnh6AvQq0Q/s/Fdun5j2WTpWX+zxIr6tH3s+dcsygIeVmjptzwWCEFi0CtIsdqUotDWFHKuut9XNosAyuvbvajSPrkc0SJikC8IqN4gErZrPpCCb8FO1/UU4o4ysTgfhUldyuz2BQJMhlzf9p4U9jW9Q1ROkbcxc3g+ST0an5iD88P3DDh+QxowokYwbF2RdSq1YxL2thmgabA+p115PAj1cW/8XM4TXqavH8oDmzsiOPnBaqFMUj/Jjy1nz21gWMqU2TCJcd7oHIsX9ev0jmMyg+HLzCEn31OiRkvREj+thw5dGcT4veyg2XhHefN1guWEMMgJh+lWCh8GXmHzeaG1O4hXAzjp3V2jROlBaUEi2Bx8ct5GVgFl/Monhj6PtEf6n6CAXdHE069SwlKXR+JJfT93t1wGoL5kcfu9nupsRCFIxbQqi4SGPHcReQnI9TiZ+Xrn/1AAe2v3dq4Xucj98kwHBHBZ9BhKzcnpMZfhAcVkLYxY2yq813FXwPaMHvj5ao3ZGI/I+o3pRApVpRQ1G8pSZvFzTPjnYpBEgwyGu7SLFGH9E3bu9JU5mBYMJnqH/LyLAi5mD8XXABFncZ0bpY1oa4s+o8rAw/NGhscnSPv/DQmDHLbmarG4UEAp68tHFovqI6pwTGsENOsL9NYbI1I15jiM+oUCwWZyghyV3srzz0pnj/sCbdwuDh+X7OR/JphpEMK2XHM8P9ArQ2EAqz7WMZ0QPwvWbl00XMO+N2/hz5bvAS1A9SyVgHzjcPVq2OAqa0AJA+aswJqss+E2R7ZPcuOTHla7suSDEI2C7nWaw2Rqk3nmHx7FP4accceQtPKIGzmB3P1PbrjELS7WOM5UarEkkx9hrSmSilprkRNEfu42wF0Hr1srovVjCVShpyDQIhqj31pr7Al45MuGSkRHPqG8+emiG29FtnXRrMcBYANAzJVW4qz4tc2oLU/rLXkIhC38/TQ0JlCAvwVkktdfbMddjEuKSBSoPa18vrxzZYX3cEu2OLAQAz3juqCPAfWzTwNPYHGs/owtKIpHDZSWgIaTSieMd2OaOaBolJXTVulpNztQGJpv1HFAjwGk+zd7zpoAzp2jNnniP0smvnb/DhgsFdDfXe7F0Af8yuy50a1/mq'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38207, 'candidates_token_count': 28, 'total_token_count': 39057, 'cached_content_token_count': 20626, 'prompt_tokens_details': [{'modality': 1, 'token_count': 40235}], 'cache_tokens_details': [{'modality': 1, 'token_count': 20626}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 28}], 'thoughts_token_count': 822}, 'finish_reason': 'STOP', 'avg_logprobs': -2.232393945966448, 'model_name': 'gemini-2.5-pro'} id='run--a7bb7da2-d56f-48a0-b622-388bea7e528a-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/forms_tests/tests/test_formsets.py'}, 'id': '54c73799-bdd7-4e80-ac6c-80b7cad4127b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38207, 'output_tokens': 28, 'total_tokens': 39057, 'input_token_details': {'cache_read': 20626}, 'output_token_details': {'reasoning': 822}}
2025-12-24 04:02:04,852 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 50.0, "relative_path": "tests/forms_tests/tests/test_formsets.py", "end_line": 1244.0}'}, '__gemini_function_call_thought_signatures__': {'477d6dd5-8261-4b10-9d37-bdf9a43c47e0': 'CvUNAY89a1/4aEE7gjFGkw+64ILzh6+y1HLrSDfplr+Yagch78cJ249jbcHUVr7ma1Xn9R54WJS/NA0dbd+KijDddBEJ7tqd8iKehBZnrjG5naOZRyZ2u3BAkKto6j6opGPmZYPua3SSjut2VvujAB/UK831DS6i4aTIK+J+IEkjw96FswoA4BkPRc2w/iPJzNy0uwxUHDLGVXvbmaJcHoNt1cEaotZP/uVlsWXC6Ke41TlUZKrX4kXxsarUifktKuqNOr9h/rLjCPpX/NJhQBqbxuNuT+cuZFvU/MWgm5h5TuQ+/NZLA4fLqLiqfUYs7WmOxwFt5WXvJXDJcpyJJfDcguF3f501xiZMyFl9kNDlzXng76UUJMg3T/MEpQs7eA8qB8AU5b5vCGaShARhcnPtKtddVv05jhwf10AW0bj+TxdqZGpQ+4XSNU/5Mb5WibcdHVow9TGRr9fiF9gyH99HD/eqDuVp0W1f6o75N4axl+qvxc8ALKuH+rhaEcD5A0GIx4EcqHhQhfxYQUPxrxrgP5BqctVkn9NLMzhFiaPXsVEebA7vVbyo/3XIv/VgJPyLpNGQirBeybkDoYkcCnEuHaNCjmhFS7J02KRgmSx84eEeCf+truJQ5p6s3OR/7J8YKkdMSxAGM73ZBskQP+IVkSyeMduGfXBLOVOZvZ8PHC9kyZV0B2JqisvTatfH98bTBdGCs38GIaTsEg1M2wPkkL2CT/v4Wg/E5m32BfMqIgpJdqjfH4FglmUiWB9KcQN00StfZ1spnZMbayhOuZlH2bSnCdoKly5hmaDpU2Zl8ETnkADoTElqR+DDPTO3rkg14+/22Ai9vGDgVw/SGEzqjMw1v18Uo8IvU2WNaVhflmOVIoZBU64WinkswggX4abUteciMclxpwX9oaS62J87c3dzd1bptcaS3eaEPXO/qC3QERaCXbeT+0gMp1RKKoqCgLrVNpWsYeR15G2B0F1dSJ4+/LUEylT8LUtMj0wQoFHccylaBkt7PBcJygtxSzY0dNy00kvU/qqHA05Pl4HVaSJo3CTSpfROkgTVWzPmHn3jA6c1zBS+gzRH9kuh8YW+ywpunE8zJPp/Z94IAtb8ujl0i87tgkJSCjU7609l1X+H+psU/GjFRtZmQlWjgFw22Nu4ey2iMaumwXgErlCgu5l1tyeEu3cYiFOsoPlsHouvFPVPYA2xGXPktDDO+cB558+xzf/jrUG5KtQecFLGFB15WJSp7BPv2lSf6myH9ae5bxW896tNvda48ynJ4Dwshr4pXKEpOTEDiEZqP6sI5XO0G/LXHzND5NxAuSxIfK3c2U/YAylC8z5vGmRFotSm/tfqIi/kPpAUUFBZCnZ1GZVQIHFrx55xP8HHPvMWzqtXLDNWdHmxyP97CH/bbMIhn2fNDEf2PMAPzYGX871KzlXrG6RD6SCtwW+arthpzJolGnnN4hnIEh8WufZhYIDQlf7irPBisZiGgglWCnr/gI5Kpw+vNdqmgU3lx1NlXSV38jVF2fSa3y/boh/iuIknGEN2Zv3qL6ARmqp7RraJ0psAFLw4W+kMWrMMFIj6c6Jvl8lrj3L5Yj6ImD6VldAjNImyqwwMEkBdnFnIjRNbwjjaeTNkmK8x1UoLd5iVuT0vhGIpep+bRRkyUhY5c9Xv2fd4cLuNa7/aXwO97EU++H2TTLCxuP7fCSJN000H93MaM/Fp/O6YQvIe1mmMiM3ZPSjn8HPqCl6DhMQBv9XLtEb4L0Vu2RCzs2/+L3HAZZCa0+5B8eEUAQldw6o0hnM9qjM/HQB8BT26w+lUHhAchMCupRy4085/S8sMvIpNAm6CIJ9ehfOaSz4ROqlLcd3SAbKZscqAWkIUHjLUuc7fO5/+gHK3d2zxR+nRLHZLdP/SjhOaaM5GFcA5p9qHiG12ocFygt3KyTVxFQL2MUGkdRvbqHJI7ueUrN3uic7T5HsOzj97G9XVwJeRKCvLqYe7uqgKpJqLgr9yGL9QXaVmDyzZN1yLDiOzYzMXtMj6ss38AhN0O7JQpFJlgxPjJiZHQe/FBzs7we/SwIHMvKSGsRIQx0b3dYF4QecUkcB2Of9CqycbOdXSRMqcenB/pWpZNgN1WqQidxZiGljrsjxDOoLCeTqvXIagckwT5bTo2HahQ7HQ4VvRqf+XGLh18Of5kdbqG0m9STNrfDzjCo/65WXpPUXRWUg4AWisH2B1EMs1DBu9+H9N5HxntWeedWUBl5Tbw5MmfDy82FBoSDdA7RPzkTFja16Axf0DqV3ldsPN6q/yaPYEpDByM3gS+fUU0mRrYHrojFi8xWiMVA3UlXwe1j+VuJhFEpioHzIiZIMnZD4yCIGzCjMv4edPT86AkHOPrjY='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 249, 'end_index': 1396, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 47461, 'candidates_token_count': 34, 'total_token_count': 48020, 'cached_content_token_count': 39660, 'prompt_tokens_details': [{'modality': 1, 'token_count': 50311}], 'cache_tokens_details': [{'modality': 1, 'token_count': 39660}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 34}], 'thoughts_token_count': 525}, 'finish_reason': 'STOP', 'avg_logprobs': -1.004231621237362, 'model_name': 'gemini-2.5-pro'} id='run--7d7aef81-4071-4df6-b5f2-67e03344318c-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 50.0, 'relative_path': 'tests/forms_tests/tests/test_formsets.py', 'end_line': 1244.0}, 'id': '477d6dd5-8261-4b10-9d37-bdf9a43c47e0', 'type': 'tool_call'}] usage_metadata={'input_tokens': 47461, 'output_tokens': 34, 'total_tokens': 48020, 'input_token_details': {'cache_read': 39660}, 'output_token_details': {'reasoning': 525}}
2025-12-24 04:02:07,772 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 752.0, "relative_path": "tests/forms_tests/tests/test_formsets.py", "end_line": 777.0}'}, '__gemini_function_call_thought_signatures__': {'3c531dfa-437c-427c-a3d4-89d330efc640': 'CoMCAY89a1/qWy8zsOz5gyuwqpTv1+Ws3nV/AdmCIBfacn1ExCP6Y8ub9HtELxVqKLXr4E0f/qX14jZGpk1Eh8WZPlQSpqgZbA8vxqzTY0p0XP5jGIM6ivQOFmrTwmDwH+zcVpf1M4x8aFG6VjwjPtkduAN1rM4zGZdsP8/FPQpPuscqrbL25xbbBYEU9SZ8zZm0M9s2EhSUYQFZSXsaMibkE6NQjES+IhUdEWk2P8+0GPO+FN+5GhfR4N003goV6yRxl+3KeAh7rAWS/7Ik7UCS+13BuBypPD2O2wQUFsaXn1TmM4wmj0lPsimanZ8v+ntycn5cC0QxIHDhW+l9qzyArjpnjg=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 70242, 'candidates_token_count': 34, 'total_token_count': 70346, 'prompt_tokens_details': [{'modality': 1, 'token_count': 73617}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 34}], 'thoughts_token_count': 70, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.14998322374680462, 'model_name': 'gemini-2.5-pro'} id='run--45cb7d52-fdea-44fd-b51e-22e854b4d3e2-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 752.0, 'relative_path': 'tests/forms_tests/tests/test_formsets.py', 'end_line': 777.0}, 'id': '3c531dfa-437c-427c-a3d4-89d330efc640', 'type': 'tool_call'}] usage_metadata={'input_tokens': 70242, 'output_tokens': 34, 'total_tokens': 70346, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 70}}
2025-12-24 04:02:12,967 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I was unable to find the specific test method `test_formset_with_custom_clean`. However, I did find a relevant test method, `test_clean_hook`, within the same file that utilizes `FavoriteDrinksFormSet`. This method tests the creation of `non_form_errors` from a `ValidationError` raised within the formset's `clean()` method, which appears to align with your requirements." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 70850, 'candidates_token_count': 88, 'total_token_count': 71148, 'cached_content_token_count': 72274, 'prompt_tokens_details': [{'modality': 1, 'token_count': 74295}], 'cache_tokens_details': [{'modality': 1, 'token_count': 72274}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 88}], 'thoughts_token_count': 210}, 'finish_reason': 'STOP', 'avg_logprobs': -0.38196164911443536, 'model_name': 'gemini-2.5-pro'} id='run--5b909ccc-ab23-4f36-8de3-1dfc753f7443-0' usage_metadata={'input_tokens': 70850, 'output_tokens': 88, 'total_tokens': 71148, 'input_token_details': {'cache_read': 72274}, 'output_token_details': {'reasoning': 210}}
2025-12-24 04:02:12,969 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the test method `test_formset_with_custom_clean` from `tests/forms_tests/tests/test_formsets.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If that specific test doesn't exist, please provide any test method from that file that uses the `FavoriteDrinksFormSet`.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
I need a test case that covers the creation of `non_form_errors` from a `ValidationError` raised within a formset's `clean()` method, which is the second scenario the patch addresses.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/forms_tests/tests/test_formsets.py
Line number range: 1 - 500
Content:
1. import datetime
2. from collections import Counter
3. from unittest import mock
4. 
5. from django.core.exceptions import ValidationError
6. from django.forms import (
7.     BaseForm, CharField, DateField, FileField, Form, IntegerField,
8.     SplitDateTimeField, formsets,
9. )
10. from django.forms.formsets import BaseFormSet, all_valid, formset_factory
11. from django.forms.utils import ErrorList
12. from django.forms.widgets import HiddenInput
13. from django.test import SimpleTestCase
14. 
15. 
16. class Choice(Form):
17.     choice = CharField()
18.     votes = IntegerField()
19. 
20. 
21. ChoiceFormSet = formset_factory(Choice)
22. 
23. 
24. class FavoriteDrinkForm(Form):
25.     name = CharField()
26. 
27. 
28. class BaseFavoriteDrinksFormSet(BaseFormSet):
29.     def clean(self):
30.         seen_drinks = []
31. 
32.         for drink in self.cleaned_data:
33.             if drink['name'] in seen_drinks:
34.                 raise ValidationError('You may only specify a drink once.')
35. 
36.             seen_drinks.append(drink['name'])
37. 
38. 
39. # A FormSet that takes a list of favorite drinks and raises an error if
40. # there are any duplicates.
41. FavoriteDrinksFormSet = formset_factory(FavoriteDrinkForm, formset=BaseFavoriteDrinksFormSet, extra=3)
42. 
43. 
44. class CustomKwargForm(Form):
45.     def __init__(self, *args, custom_kwarg, **kwargs):
46.         self.custom_kwarg = custom_kwarg
47.         super().__init__(*args, **kwargs)
48. 
49. 
50. class FormsFormsetTestCase(SimpleTestCase):
51. 
52.     def make_choiceformset(
53.             self, formset_data=None, formset_class=ChoiceFormSet,
54.             total_forms=None, initial_forms=0, max_num_forms=0, min_num_forms=0, **kwargs):
55.         """
56.         Make a ChoiceFormset from the given formset_data.
57.         The data should be given as a list of (choice, votes) tuples.
58.         """
59.         kwargs.setdefault('prefix', 'choices')
60.         kwargs.setdefault('auto_id', False)
61. 
62.         if formset_data is None:
63.             return formset_class(**kwargs)
64. 
65.         if total_forms is None:
66.             total_forms = len(formset_data)
67. 
68.         def prefixed(*args):
69.             args = (kwargs['prefix'],) + args
70.             return '-'.join(args)
71. 
72.         data = {
73.             prefixed('TOTAL_FORMS'): str(total_forms),
74.             prefixed('INITIAL_FORMS'): str(initial_forms),
75.             prefixed('MAX_NUM_FORMS'): str(max_num_forms),
76.             prefixed('MIN_NUM_FORMS'): str(min_num_forms),
77.         }
78.         for i, (choice, votes) in enumerate(formset_data):
79.             data[prefixed(str(i), 'choice')] = choice
80.             data[prefixed(str(i), 'votes')] = votes
81. 
82.         return formset_class(data, **kwargs)
83. 
84.     def test_basic_formset(self):
85.         """
86.         A FormSet constructor takes the same arguments as Form. Create a
87.         FormSet for adding data. By default, it displays 1 blank form.
88.         """
89.         formset = self.make_choiceformset()
90.         self.assertHTMLEqual(
91.             str(formset),
92.             """<input type="hidden" name="choices-TOTAL_FORMS" value="1">
93. <input type="hidden" name="choices-INITIAL_FORMS" value="0">
94. <input type="hidden" name="choices-MIN_NUM_FORMS" value="0">
95. <input type="hidden" name="choices-MAX_NUM_FORMS" value="1000">
96. <tr><th>Choice:</th><td><input type="text" name="choices-0-choice"></td></tr>
97. <tr><th>Votes:</th><td><input type="number" name="choices-0-votes"></td></tr>"""
98.         )
99.         # FormSet are treated similarly to Forms. FormSet has an is_valid()
100.         # method, and a cleaned_data or errors attribute depending on whether
101.         # all the forms passed validation. However, unlike a Form, cleaned_data
102.         # and errors will be a list of dicts rather than a single dict.
103.         formset = self.make_choiceformset([('Calexico', '100')])
104.         self.assertTrue(formset.is_valid())
105.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}])
106. 
107.         # If a FormSet wasn't passed any data, is_valid() and has_changed()
108.         # return False.
109.         formset = self.make_choiceformset()
110.         self.assertFalse(formset.is_valid())
111.         self.assertFalse(formset.has_changed())
112. 
113.     def test_form_kwargs_formset(self):
114.         """
115.         Custom kwargs set on the formset instance are passed to the
116.         underlying forms.
117.         """
118.         FormSet = formset_factory(CustomKwargForm, extra=2)
119.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
120.         for form in formset:
121.             self.assertTrue(hasattr(form, 'custom_kwarg'))
122.             self.assertEqual(form.custom_kwarg, 1)
123. 
124.     def test_form_kwargs_formset_dynamic(self):
125.         """Form kwargs can be passed dynamically in a formset."""
126.         class DynamicBaseFormSet(BaseFormSet):
127.             def get_form_kwargs(self, index):
128.                 return {'custom_kwarg': index}
129. 
130.         DynamicFormSet = formset_factory(CustomKwargForm, formset=DynamicBaseFormSet, extra=2)
131.         formset = DynamicFormSet(form_kwargs={'custom_kwarg': 'ignored'})
132.         for i, form in enumerate(formset):
133.             self.assertTrue(hasattr(form, 'custom_kwarg'))
134.             self.assertEqual(form.custom_kwarg, i)
135. 
136.     def test_form_kwargs_empty_form(self):
137.         FormSet = formset_factory(CustomKwargForm)
138.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
139.         self.assertTrue(hasattr(formset.empty_form, 'custom_kwarg'))
140.         self.assertEqual(formset.empty_form.custom_kwarg, 1)
141. 
142.     def test_formset_validation(self):
143.         # FormSet instances can also have an error attribute if validation failed for
144.         # any of the forms.
145.         formset = self.make_choiceformset([('Calexico', '')])
146.         self.assertFalse(formset.is_valid())
147.         self.assertEqual(formset.errors, [{'votes': ['This field is required.']}])
148. 
149.     def test_formset_validation_count(self):
150.         """
151.         A formset's ManagementForm is validated once per FormSet.is_valid()
152.         call and each form of the formset is cleaned once.
153.         """
154.         def make_method_counter(func):
155.             """Add a counter to func for the number of times it's called."""
156.             counter = Counter()
157.             counter.call_count = 0
158. 
159.             def mocked_func(*args, **kwargs):
160.                 counter.call_count += 1
161.                 return func(*args, **kwargs)
162. 
163.             return mocked_func, counter
164. 
165.         mocked_is_valid, is_valid_counter = make_method_counter(formsets.ManagementForm.is_valid)
166.         mocked_full_clean, full_clean_counter = make_method_counter(BaseForm.full_clean)
167.         formset = self.make_choiceformset([('Calexico', '100'), ('Any1', '42'), ('Any2', '101')])
168. 
169.         with mock.patch('django.forms.formsets.ManagementForm.is_valid', mocked_is_valid), \
170.                 mock.patch('django.forms.forms.BaseForm.full_clean', mocked_full_clean):
171.             self.assertTrue(formset.is_valid())
172.         self.assertEqual(is_valid_counter.call_count, 1)
173.         self.assertEqual(full_clean_counter.call_count, 4)
174. 
175.     def test_formset_has_changed(self):
176.         """
177.         FormSet.has_changed() is True if any data is passed to its forms, even
178.         if the formset didn't validate.
179.         """
180.         blank_formset = self.make_choiceformset([('', '')])
181.         self.assertFalse(blank_formset.has_changed())
182.         # invalid formset
183.         invalid_formset = self.make_choiceformset([('Calexico', '')])
184.         self.assertFalse(invalid_formset.is_valid())
185.         self.assertTrue(invalid_formset.has_changed())
186.         # valid formset
187.         valid_formset = self.make_choiceformset([('Calexico', '100')])
188.         self.assertTrue(valid_formset.is_valid())
189.         self.assertTrue(valid_formset.has_changed())
190. 
191.     def test_formset_initial_data(self):
192.         """
193.         A FormSet can be prefilled with existing data by providing a list of
194.         dicts to the `initial` argument. By default, an extra blank form is
195.         included.
196.         """
197.         formset = self.make_choiceformset(initial=[{'choice': 'Calexico', 'votes': 100}])
198.         self.assertHTMLEqual(
199.             '\n'.join(form.as_ul() for form in formset.forms),
200.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
201. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
202. <li>Choice: <input type="text" name="choices-1-choice"></li>
203. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
204.         )
205. 
206.     def test_blank_form_unfilled(self):
207.         """A form that's displayed as blank may be submitted as blank."""
208.         formset = self.make_choiceformset([('Calexico', '100'), ('', '')], initial_forms=1)
209.         self.assertTrue(formset.is_valid())
210.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}])
211. 
212.     def test_second_form_partially_filled(self):
213.         """
214.         If at least one field is filled out on a blank form, it will be
215.         validated.
216.         """
217.         formset = self.make_choiceformset([('Calexico', '100'), ('The Decemberists', '')], initial_forms=1)
218.         self.assertFalse(formset.is_valid())
219.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}])
220. 
221.     def test_delete_prefilled_data(self):
222.         """
223.         Deleting prefilled data is an error. Removing data from form fields
224.         isn't the proper way to delete it.
225.         """
226.         formset = self.make_choiceformset([('', ''), ('', '')], initial_forms=1)
227.         self.assertFalse(formset.is_valid())
228.         self.assertEqual(
229.             formset.errors,
230.             [{'votes': ['This field is required.'], 'choice': ['This field is required.']}, {}]
231.         )
232. 
233.     def test_displaying_more_than_one_blank_form(self):
234.         """
235.         More than 1 empty form can be displayed using formset_factory's
236.         `extra` argument.
237.         """
238.         ChoiceFormSet = formset_factory(Choice, extra=3)
239.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
240.         self.assertHTMLEqual(
241.             '\n'.join(form.as_ul() for form in formset.forms),
242.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
243. <li>Votes: <input type="number" name="choices-0-votes"></li>
244. <li>Choice: <input type="text" name="choices-1-choice"></li>
245. <li>Votes: <input type="number" name="choices-1-votes"></li>
246. <li>Choice: <input type="text" name="choices-2-choice"></li>
247. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
248.         )
249.         # Since every form was displayed as blank, they are also accepted as
250.         # blank. This may seem a little strange, but min_num is used to require
251.         # a minimum number of forms to be completed.
252.         data = {
253.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
254.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
255.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
256.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
257.             'choices-0-choice': '',
258.             'choices-0-votes': '',
259.             'choices-1-choice': '',
260.             'choices-1-votes': '',
261.             'choices-2-choice': '',
262.             'choices-2-votes': '',
263.         }
264.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
265.         self.assertTrue(formset.is_valid())
266.         self.assertEqual([form.cleaned_data for form in formset.forms], [{}, {}, {}])
267. 
268.     def test_min_num_displaying_more_than_one_blank_form(self):
269.         """
270.         More than 1 empty form can also be displayed using formset_factory's
271.         min_num argument. It will (essentially) increment the extra argument.
272.         """
273.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=1)
274.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
275.         # Min_num forms are required; extra forms can be empty.
276.         self.assertFalse(formset.forms[0].empty_permitted)
277.         self.assertTrue(formset.forms[1].empty_permitted)
278.         self.assertHTMLEqual(
279.             '\n'.join(form.as_ul() for form in formset.forms),
280.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
281. <li>Votes: <input type="number" name="choices-0-votes"></li>
282. <li>Choice: <input type="text" name="choices-1-choice"></li>
283. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
284.         )
285. 
286.     def test_min_num_displaying_more_than_one_blank_form_with_zero_extra(self):
287.         """More than 1 empty form can be displayed using min_num."""
288.         ChoiceFormSet = formset_factory(Choice, extra=0, min_num=3)
289.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
290.         self.assertHTMLEqual(
291.             '\n'.join(form.as_ul() for form in formset.forms),
292.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
293. <li>Votes: <input type="number" name="choices-0-votes"></li>
294. <li>Choice: <input type="text" name="choices-1-choice"></li>
295. <li>Votes: <input type="number" name="choices-1-votes"></li>
296. <li>Choice: <input type="text" name="choices-2-choice"></li>
297. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
298.         )
299. 
300.     def test_single_form_completed(self):
301.         """Just one form may be completed."""
302.         data = {
303.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
304.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
305.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
306.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
307.             'choices-0-choice': 'Calexico',
308.             'choices-0-votes': '100',
309.             'choices-1-choice': '',
310.             'choices-1-votes': '',
311.             'choices-2-choice': '',
312.             'choices-2-votes': '',
313.         }
314.         ChoiceFormSet = formset_factory(Choice, extra=3)
315.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
316.         self.assertTrue(formset.is_valid())
317.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}, {}])
318. 
319.     def test_formset_validate_max_flag(self):
320.         """
321.         If validate_max is set and max_num is less than TOTAL_FORMS in the
322.         data, a ValidationError is raised. MAX_NUM_FORMS in the data is
323.         irrelevant here (it's output as a hint for the client but its value
324.         in the returned data is not checked).
325.         """
326.         data = {
327.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
328.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
329.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
330.             'choices-MAX_NUM_FORMS': '2',  # max number of forms - should be ignored
331.             'choices-0-choice': 'Zero',
332.             'choices-0-votes': '0',
333.             'choices-1-choice': 'One',
334.             'choices-1-votes': '1',
335.         }
336.         ChoiceFormSet = formset_factory(Choice, extra=1, max_num=1, validate_max=True)
337.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
338.         self.assertFalse(formset.is_valid())
339.         self.assertEqual(formset.non_form_errors(), ['Please submit at most 1 form.'])
340. 
341.     def test_formset_validate_min_flag(self):
342.         """
343.         If validate_min is set and min_num is more than TOTAL_FORMS in the
344.         data, a ValidationError is raised. MIN_NUM_FORMS in the data is
345.         irrelevant here (it's output as a hint for the client but its value
346.         in the returned data is not checked).
347.         """
348.         data = {
349.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
350.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
351.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
352.             'choices-MAX_NUM_FORMS': '0',  # max number of forms - should be ignored
353.             'choices-0-choice': 'Zero',
354.             'choices-0-votes': '0',
355.             'choices-1-choice': 'One',
356.             'choices-1-votes': '1',
357.         }
358.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=3, validate_min=True)
359.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
360.         self.assertFalse(formset.is_valid())
361.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 3 forms.'])
362. 
363.     def test_formset_validate_min_unchanged_forms(self):
364.         """
365.         min_num validation doesn't consider unchanged forms with initial data
366.         as "empty".
367.         """
368.         initial = [
369.             {'choice': 'Zero', 'votes': 0},
370.             {'choice': 'One', 'votes': 0},
371.         ]
372.         data = {
373.             'choices-TOTAL_FORMS': '2',
374.             'choices-INITIAL_FORMS': '2',
375.             'choices-MIN_NUM_FORMS': '0',
376.             'choices-MAX_NUM_FORMS': '2',
377.             'choices-0-choice': 'Zero',
378.             'choices-0-votes': '0',
379.             'choices-1-choice': 'One',
380.             'choices-1-votes': '1',  # changed from initial
381.         }
382.         ChoiceFormSet = formset_factory(Choice, min_num=2, validate_min=True)
383.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices', initial=initial)
384.         self.assertFalse(formset.forms[0].has_changed())
385.         self.assertTrue(formset.forms[1].has_changed())
386.         self.assertTrue(formset.is_valid())
387. 
388.     def test_formset_validate_min_excludes_empty_forms(self):
389.         data = {
390.             'choices-TOTAL_FORMS': '2',
391.             'choices-INITIAL_FORMS': '0',
392.         }
393.         ChoiceFormSet = formset_factory(Choice, extra=2, min_num=1, validate_min=True, can_delete=True)
394.         formset = ChoiceFormSet(data, prefix='choices')
395.         self.assertFalse(formset.has_changed())
396.         self.assertFalse(formset.is_valid())
397.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 1 form.'])
398. 
399.     def test_second_form_partially_filled_2(self):
400.         """A partially completed form is invalid."""
401.         data = {
402.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
403.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
404.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
405.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
406.             'choices-0-choice': 'Calexico',
407.             'choices-0-votes': '100',
408.             'choices-1-choice': 'The Decemberists',
409.             'choices-1-votes': '',  # missing value
410.             'choices-2-choice': '',
411.             'choices-2-votes': '',
412.         }
413.         ChoiceFormSet = formset_factory(Choice, extra=3)
414.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
415.         self.assertFalse(formset.is_valid())
416.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}, {}])
417. 
418.     def test_more_initial_data(self):
419.         """
420.         The extra argument works when the formset is pre-filled with initial
421.         data.
422.         """
423.         initial = [{'choice': 'Calexico', 'votes': 100}]
424.         ChoiceFormSet = formset_factory(Choice, extra=3)
425.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
426.         self.assertHTMLEqual(
427.             '\n'.join(form.as_ul() for form in formset.forms),
428.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
429. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
430. <li>Choice: <input type="text" name="choices-1-choice"></li>
431. <li>Votes: <input type="number" name="choices-1-votes"></li>
432. <li>Choice: <input type="text" name="choices-2-choice"></li>
433. <li>Votes: <input type="number" name="choices-2-votes"></li>
434. <li>Choice: <input type="text" name="choices-3-choice"></li>
435. <li>Votes: <input type="number" name="choices-3-votes"></li>"""
436.         )
437.         # Retrieving an empty form works. Tt shows up in the form list.
438.         self.assertTrue(formset.empty_form.empty_permitted)
439.         self.assertHTMLEqual(
440.             formset.empty_form.as_ul(),
441.             """<li>Choice: <input type="text" name="choices-__prefix__-choice"></li>
442. <li>Votes: <input type="number" name="choices-__prefix__-votes"></li>"""
443.         )
444. 
445.     def test_formset_with_deletion(self):
446.         """
447.         formset_factory's can_delete argument adds a boolean "delete" field to
448.         each form. When that boolean field is True, the form will be in
449.         formset.deleted_forms.
450.         """
451.         ChoiceFormSet = formset_factory(Choice, can_delete=True)
452.         initial = [{'choice': 'Calexico', 'votes': 100}, {'choice': 'Fergie', 'votes': 900}]
453.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
454.         self.assertHTMLEqual(
455.             '\n'.join(form.as_ul() for form in formset.forms),
456.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
457. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
458. <li>Delete: <input type="checkbox" name="choices-0-DELETE"></li>
459. <li>Choice: <input type="text" name="choices-1-choice" value="Fergie"></li>
460. <li>Votes: <input type="number" name="choices-1-votes" value="900"></li>
461. <li>Delete: <input type="checkbox" name="choices-1-DELETE"></li>
462. <li>Choice: <input type="text" name="choices-2-choice"></li>
463. <li>Votes: <input type="number" name="choices-2-votes"></li>
464. <li>Delete: <input type="checkbox" name="choices-2-DELETE"></li>"""
465.         )
466.         # To delete something, set that form's special delete field to 'on'.
467.         # Let's go ahead and delete Fergie.
468.         data = {
469.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
470.             'choices-INITIAL_FORMS': '2',  # the number of forms with initial data
471.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
472.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
473.             'choices-0-choice': 'Calexico',
474.             'choices-0-votes': '100',
475.             'choices-0-DELETE': '',
476.             'choices-1-choice': 'Fergie',
477.             'choices-1-votes': '900',
478.             'choices-1-DELETE': 'on',
479.             'choices-2-choice': '',
480.             'choices-2-votes': '',
481.             'choices-2-DELETE': '',
482.         }
483.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
484.         self.assertTrue(formset.is_valid())
485.         self.assertEqual(
486.             [form.cleaned_data for form in formset.forms],
487.             [
488.                 {'votes': 100, 'DELETE': False, 'choice': 'Calexico'},
489.                 {'votes': 900, 'DELETE': True, 'choice': 'Fergie'},
490.                 {},
491.             ]
492.         )
493.         self.assertEqual(
494.             [form.cleaned_data for form in formset.deleted_forms],
495.             [{'votes': 900, 'DELETE': True, 'choice': 'Fergie'}]
496.         )
497. 
498.     def test_formset_with_deletion_remove_deletion_flag(self):
499.         """
500.         If a form is filled with something and can_delete is also checked, that


File: tests/forms_tests/tests/test_formsets.py
Line number range: 50 - 1244
Content:
50. class FormsFormsetTestCase(SimpleTestCase):
51. 
52.     def make_choiceformset(
53.             self, formset_data=None, formset_class=ChoiceFormSet,
54.             total_forms=None, initial_forms=0, max_num_forms=0, min_num_forms=0, **kwargs):
55.         """
56.         Make a ChoiceFormset from the given formset_data.
57.         The data should be given as a list of (choice, votes) tuples.
58.         """
59.         kwargs.setdefault('prefix', 'choices')
60.         kwargs.setdefault('auto_id', False)
61. 
62.         if formset_data is None:
63.             return formset_class(**kwargs)
64. 
65.         if total_forms is None:
66.             total_forms = len(formset_data)
67. 
68.         def prefixed(*args):
69.             args = (kwargs['prefix'],) + args
70.             return '-'.join(args)
71. 
72.         data = {
73.             prefixed('TOTAL_FORMS'): str(total_forms),
74.             prefixed('INITIAL_FORMS'): str(initial_forms),
75.             prefixed('MAX_NUM_FORMS'): str(max_num_forms),
76.             prefixed('MIN_NUM_FORMS'): str(min_num_forms),
77.         }
78.         for i, (choice, votes) in enumerate(formset_data):
79.             data[prefixed(str(i), 'choice')] = choice
80.             data[prefixed(str(i), 'votes')] = votes
81. 
82.         return formset_class(data, **kwargs)
83. 
84.     def test_basic_formset(self):
85.         """
86.         A FormSet constructor takes the same arguments as Form. Create a
87.         FormSet for adding data. By default, it displays 1 blank form.
88.         """
89.         formset = self.make_choiceformset()
90.         self.assertHTMLEqual(
91.             str(formset),
92.             """<input type="hidden" name="choices-TOTAL_FORMS" value="1">
93. <input type="hidden" name="choices-INITIAL_FORMS" value="0">
94. <input type="hidden" name="choices-MIN_NUM_FORMS" value="0">
95. <input type="hidden" name="choices-MAX_NUM_FORMS" value="1000">
96. <tr><th>Choice:</th><td><input type="text" name="choices-0-choice"></td></tr>
97. <tr><th>Votes:</th><td><input type="number" name="choices-0-votes"></td></tr>"""
98.         )
99.         # FormSet are treated similarly to Forms. FormSet has an is_valid()
100.         # method, and a cleaned_data or errors attribute depending on whether
101.         # all the forms passed validation. However, unlike a Form, cleaned_data
102.         # and errors will be a list of dicts rather than a single dict.
103.         formset = self.make_choiceformset([('Calexico', '100')])
104.         self.assertTrue(formset.is_valid())
105.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}])
106. 
107.         # If a FormSet wasn't passed any data, is_valid() and has_changed()
108.         # return False.
109.         formset = self.make_choiceformset()
110.         self.assertFalse(formset.is_valid())
111.         self.assertFalse(formset.has_changed())
112. 
113.     def test_form_kwargs_formset(self):
114.         """
115.         Custom kwargs set on the formset instance are passed to the
116.         underlying forms.
117.         """
118.         FormSet = formset_factory(CustomKwargForm, extra=2)
119.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
120.         for form in formset:
121.             self.assertTrue(hasattr(form, 'custom_kwarg'))
122.             self.assertEqual(form.custom_kwarg, 1)
123. 
124.     def test_form_kwargs_formset_dynamic(self):
125.         """Form kwargs can be passed dynamically in a formset."""
126.         class DynamicBaseFormSet(BaseFormSet):
127.             def get_form_kwargs(self, index):
128.                 return {'custom_kwarg': index}
129. 
130.         DynamicFormSet = formset_factory(CustomKwargForm, formset=DynamicBaseFormSet, extra=2)
131.         formset = DynamicFormSet(form_kwargs={'custom_kwarg': 'ignored'})
132.         for i, form in enumerate(formset):
133.             self.assertTrue(hasattr(form, 'custom_kwarg'))
134.             self.assertEqual(form.custom_kwarg, i)
135. 
136.     def test_form_kwargs_empty_form(self):
137.         FormSet = formset_factory(CustomKwargForm)
138.         formset = FormSet(form_kwargs={'custom_kwarg': 1})
139.         self.assertTrue(hasattr(formset.empty_form, 'custom_kwarg'))
140.         self.assertEqual(formset.empty_form.custom_kwarg, 1)
141. 
142.     def test_formset_validation(self):
143.         # FormSet instances can also have an error attribute if validation failed for
144.         # any of the forms.
145.         formset = self.make_choiceformset([('Calexico', '')])
146.         self.assertFalse(formset.is_valid())
147.         self.assertEqual(formset.errors, [{'votes': ['This field is required.']}])
148. 
149.     def test_formset_validation_count(self):
150.         """
151.         A formset's ManagementForm is validated once per FormSet.is_valid()
152.         call and each form of the formset is cleaned once.
153.         """
154.         def make_method_counter(func):
155.             """Add a counter to func for the number of times it's called."""
156.             counter = Counter()
157.             counter.call_count = 0
158. 
159.             def mocked_func(*args, **kwargs):
160.                 counter.call_count += 1
161.                 return func(*args, **kwargs)
162. 
163.             return mocked_func, counter
164. 
165.         mocked_is_valid, is_valid_counter = make_method_counter(formsets.ManagementForm.is_valid)
166.         mocked_full_clean, full_clean_counter = make_method_counter(BaseForm.full_clean)
167.         formset = self.make_choiceformset([('Calexico', '100'), ('Any1', '42'), ('Any2', '101')])
168. 
169.         with mock.patch('django.forms.formsets.ManagementForm.is_valid', mocked_is_valid), \
170.                 mock.patch('django.forms.forms.BaseForm.full_clean', mocked_full_clean):
171.             self.assertTrue(formset.is_valid())
172.         self.assertEqual(is_valid_counter.call_count, 1)
173.         self.assertEqual(full_clean_counter.call_count, 4)
174. 
175.     def test_formset_has_changed(self):
176.         """
177.         FormSet.has_changed() is True if any data is passed to its forms, even
178.         if the formset didn't validate.
179.         """
180.         blank_formset = self.make_choiceformset([('', '')])
181.         self.assertFalse(blank_formset.has_changed())
182.         # invalid formset
183.         invalid_formset = self.make_choiceformset([('Calexico', '')])
184.         self.assertFalse(invalid_formset.is_valid())
185.         self.assertTrue(invalid_formset.has_changed())
186.         # valid formset
187.         valid_formset = self.make_choiceformset([('Calexico', '100')])
188.         self.assertTrue(valid_formset.is_valid())
189.         self.assertTrue(valid_formset.has_changed())
190. 
191.     def test_formset_initial_data(self):
192.         """
193.         A FormSet can be prefilled with existing data by providing a list of
194.         dicts to the `initial` argument. By default, an extra blank form is
195.         included.
196.         """
197.         formset = self.make_choiceformset(initial=[{'choice': 'Calexico', 'votes': 100}])
198.         self.assertHTMLEqual(
199.             '\n'.join(form.as_ul() for form in formset.forms),
200.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
201. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
202. <li>Choice: <input type="text" name="choices-1-choice"></li>
203. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
204.         )
205. 
206.     def test_blank_form_unfilled(self):
207.         """A form that's displayed as blank may be submitted as blank."""
208.         formset = self.make_choiceformset([('Calexico', '100'), ('', '')], initial_forms=1)
209.         self.assertTrue(formset.is_valid())
210.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}])
211. 
212.     def test_second_form_partially_filled(self):
213.         """
214.         If at least one field is filled out on a blank form, it will be
215.         validated.
216.         """
217.         formset = self.make_choiceformset([('Calexico', '100'), ('The Decemberists', '')], initial_forms=1)
218.         self.assertFalse(formset.is_valid())
219.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}])
220. 
221.     def test_delete_prefilled_data(self):
222.         """
223.         Deleting prefilled data is an error. Removing data from form fields
224.         isn't the proper way to delete it.
225.         """
226.         formset = self.make_choiceformset([('', ''), ('', '')], initial_forms=1)
227.         self.assertFalse(formset.is_valid())
228.         self.assertEqual(
229.             formset.errors,
230.             [{'votes': ['This field is required.'], 'choice': ['This field is required.']}, {}]
231.         )
232. 
233.     def test_displaying_more_than_one_blank_form(self):
234.         """
235.         More than 1 empty form can be displayed using formset_factory's
236.         `extra` argument.
237.         """
238.         ChoiceFormSet = formset_factory(Choice, extra=3)
239.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
240.         self.assertHTMLEqual(
241.             '\n'.join(form.as_ul() for form in formset.forms),
242.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
243. <li>Votes: <input type="number" name="choices-0-votes"></li>
244. <li>Choice: <input type="text" name="choices-1-choice"></li>
245. <li>Votes: <input type="number" name="choices-1-votes"></li>
246. <li>Choice: <input type="text" name="choices-2-choice"></li>
247. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
248.         )
249.         # Since every form was displayed as blank, they are also accepted as
250.         # blank. This may seem a little strange, but min_num is used to require
251.         # a minimum number of forms to be completed.
252.         data = {
253.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
254.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
255.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
256.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
257.             'choices-0-choice': '',
258.             'choices-0-votes': '',
259.             'choices-1-choice': '',
260.             'choices-1-votes': '',
261.             'choices-2-choice': '',
262.             'choices-2-votes': '',
263.         }
264.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
265.         self.assertTrue(formset.is_valid())
266.         self.assertEqual([form.cleaned_data for form in formset.forms], [{}, {}, {}])
267. 
268.     def test_min_num_displaying_more_than_one_blank_form(self):
269.         """
270.         More than 1 empty form can also be displayed using formset_factory's
271.         min_num argument. It will (essentially) increment the extra argument.
272.         """
273.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=1)
274.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
275.         # Min_num forms are required; extra forms can be empty.
276.         self.assertFalse(formset.forms[0].empty_permitted)
277.         self.assertTrue(formset.forms[1].empty_permitted)
278.         self.assertHTMLEqual(
279.             '\n'.join(form.as_ul() for form in formset.forms),
280.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
281. <li>Votes: <input type="number" name="choices-0-votes"></li>
282. <li>Choice: <input type="text" name="choices-1-choice"></li>
283. <li>Votes: <input type="number" name="choices-1-votes"></li>"""
284.         )
285. 
286.     def test_min_num_displaying_more_than_one_blank_form_with_zero_extra(self):
287.         """More than 1 empty form can be displayed using min_num."""
288.         ChoiceFormSet = formset_factory(Choice, extra=0, min_num=3)
289.         formset = ChoiceFormSet(auto_id=False, prefix='choices')
290.         self.assertHTMLEqual(
291.             '\n'.join(form.as_ul() for form in formset.forms),
292.             """<li>Choice: <input type="text" name="choices-0-choice"></li>
293. <li>Votes: <input type="number" name="choices-0-votes"></li>
294. <li>Choice: <input type="text" name="choices-1-choice"></li>
295. <li>Votes: <input type="number" name="choices-1-votes"></li>
296. <li>Choice: <input type="text" name="choices-2-choice"></li>
297. <li>Votes: <input type="number" name="choices-2-votes"></li>"""
298.         )
299. 
300.     def test_single_form_completed(self):
301.         """Just one form may be completed."""
302.         data = {
303.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
304.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
305.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
306.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
307.             'choices-0-choice': 'Calexico',
308.             'choices-0-votes': '100',
309.             'choices-1-choice': '',
310.             'choices-1-votes': '',
311.             'choices-2-choice': '',
312.             'choices-2-votes': '',
313.         }
314.         ChoiceFormSet = formset_factory(Choice, extra=3)
315.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
316.         self.assertTrue(formset.is_valid())
317.         self.assertEqual([form.cleaned_data for form in formset.forms], [{'votes': 100, 'choice': 'Calexico'}, {}, {}])
318. 
319.     def test_formset_validate_max_flag(self):
320.         """
321.         If validate_max is set and max_num is less than TOTAL_FORMS in the
322.         data, a ValidationError is raised. MAX_NUM_FORMS in the data is
323.         irrelevant here (it's output as a hint for the client but its value
324.         in the returned data is not checked).
325.         """
326.         data = {
327.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
328.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
329.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
330.             'choices-MAX_NUM_FORMS': '2',  # max number of forms - should be ignored
331.             'choices-0-choice': 'Zero',
332.             'choices-0-votes': '0',
333.             'choices-1-choice': 'One',
334.             'choices-1-votes': '1',
335.         }
336.         ChoiceFormSet = formset_factory(Choice, extra=1, max_num=1, validate_max=True)
337.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
338.         self.assertFalse(formset.is_valid())
339.         self.assertEqual(formset.non_form_errors(), ['Please submit at most 1 form.'])
340. 
341.     def test_formset_validate_min_flag(self):
342.         """
343.         If validate_min is set and min_num is more than TOTAL_FORMS in the
344.         data, a ValidationError is raised. MIN_NUM_FORMS in the data is
345.         irrelevant here (it's output as a hint for the client but its value
346.         in the returned data is not checked).
347.         """
348.         data = {
349.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
350.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
351.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
352.             'choices-MAX_NUM_FORMS': '0',  # max number of forms - should be ignored
353.             'choices-0-choice': 'Zero',
354.             'choices-0-votes': '0',
355.             'choices-1-choice': 'One',
356.             'choices-1-votes': '1',
357.         }
358.         ChoiceFormSet = formset_factory(Choice, extra=1, min_num=3, validate_min=True)
359.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
360.         self.assertFalse(formset.is_valid())
361.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 3 forms.'])
362. 
363.     def test_formset_validate_min_unchanged_forms(self):
364.         """
365.         min_num validation doesn't consider unchanged forms with initial data
366.         as "empty".
367.         """
368.         initial = [
369.             {'choice': 'Zero', 'votes': 0},
370.             {'choice': 'One', 'votes': 0},
371.         ]
372.         data = {
373.             'choices-TOTAL_FORMS': '2',
374.             'choices-INITIAL_FORMS': '2',
375.             'choices-MIN_NUM_FORMS': '0',
376.             'choices-MAX_NUM_FORMS': '2',
377.             'choices-0-choice': 'Zero',
378.             'choices-0-votes': '0',
379.             'choices-1-choice': 'One',
380.             'choices-1-votes': '1',  # changed from initial
381.         }
382.         ChoiceFormSet = formset_factory(Choice, min_num=2, validate_min=True)
383.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices', initial=initial)
384.         self.assertFalse(formset.forms[0].has_changed())
385.         self.assertTrue(formset.forms[1].has_changed())
386.         self.assertTrue(formset.is_valid())
387. 
388.     def test_formset_validate_min_excludes_empty_forms(self):
389.         data = {
390.             'choices-TOTAL_FORMS': '2',
391.             'choices-INITIAL_FORMS': '0',
392.         }
393.         ChoiceFormSet = formset_factory(Choice, extra=2, min_num=1, validate_min=True, can_delete=True)
394.         formset = ChoiceFormSet(data, prefix='choices')
395.         self.assertFalse(formset.has_changed())
396.         self.assertFalse(formset.is_valid())
397.         self.assertEqual(formset.non_form_errors(), ['Please submit at least 1 form.'])
398. 
399.     def test_second_form_partially_filled_2(self):
400.         """A partially completed form is invalid."""
401.         data = {
402.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
403.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
404.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
405.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
406.             'choices-0-choice': 'Calexico',
407.             'choices-0-votes': '100',
408.             'choices-1-choice': 'The Decemberists',
409.             'choices-1-votes': '',  # missing value
410.             'choices-2-choice': '',
411.             'choices-2-votes': '',
412.         }
413.         ChoiceFormSet = formset_factory(Choice, extra=3)
414.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
415.         self.assertFalse(formset.is_valid())
416.         self.assertEqual(formset.errors, [{}, {'votes': ['This field is required.']}, {}])
417. 
418.     def test_more_initial_data(self):
419.         """
420.         The extra argument works when the formset is pre-filled with initial
421.         data.
422.         """
423.         initial = [{'choice': 'Calexico', 'votes': 100}]
424.         ChoiceFormSet = formset_factory(Choice, extra=3)
425.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
426.         self.assertHTMLEqual(
427.             '\n'.join(form.as_ul() for form in formset.forms),
428.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
429. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
430. <li>Choice: <input type="text" name="choices-1-choice"></li>
431. <li>Votes: <input type="number" name="choices-1-votes"></li>
432. <li>Choice: <input type="text" name="choices-2-choice"></li>
433. <li>Votes: <input type="number" name="choices-2-votes"></li>
434. <li>Choice: <input type="text" name="choices-3-choice"></li>
435. <li>Votes: <input type="number" name="choices-3-votes"></li>"""
436.         )
437.         # Retrieving an empty form works. Tt shows up in the form list.
438.         self.assertTrue(formset.empty_form.empty_permitted)
439.         self.assertHTMLEqual(
440.             formset.empty_form.as_ul(),
441.             """<li>Choice: <input type="text" name="choices-__prefix__-choice"></li>
442. <li>Votes: <input type="number" name="choices-__prefix__-votes"></li>"""
443.         )
444. 
445.     def test_formset_with_deletion(self):
446.         """
447.         formset_factory's can_delete argument adds a boolean "delete" field to
448.         each form. When that boolean field is True, the form will be in
449.         formset.deleted_forms.
450.         """
451.         ChoiceFormSet = formset_factory(Choice, can_delete=True)
452.         initial = [{'choice': 'Calexico', 'votes': 100}, {'choice': 'Fergie', 'votes': 900}]
453.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
454.         self.assertHTMLEqual(
455.             '\n'.join(form.as_ul() for form in formset.forms),
456.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
457. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
458. <li>Delete: <input type="checkbox" name="choices-0-DELETE"></li>
459. <li>Choice: <input type="text" name="choices-1-choice" value="Fergie"></li>
460. <li>Votes: <input type="number" name="choices-1-votes" value="900"></li>
461. <li>Delete: <input type="checkbox" name="choices-1-DELETE"></li>
462. <li>Choice: <input type="text" name="choices-2-choice"></li>
463. <li>Votes: <input type="number" name="choices-2-votes"></li>
464. <li>Delete: <input type="checkbox" name="choices-2-DELETE"></li>"""
465.         )
466.         # To delete something, set that form's special delete field to 'on'.
467.         # Let's go ahead and delete Fergie.
468.         data = {
469.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
470.             'choices-INITIAL_FORMS': '2',  # the number of forms with initial data
471.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
472.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
473.             'choices-0-choice': 'Calexico',
474.             'choices-0-votes': '100',
475.             'choices-0-DELETE': '',
476.             'choices-1-choice': 'Fergie',
477.             'choices-1-votes': '900',
478.             'choices-1-DELETE': 'on',
479.             'choices-2-choice': '',
480.             'choices-2-votes': '',
481.             'choices-2-DELETE': '',
482.         }
483.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
484.         self.assertTrue(formset.is_valid())
485.         self.assertEqual(
486.             [form.cleaned_data for form in formset.forms],
487.             [
488.                 {'votes': 100, 'DELETE': False, 'choice': 'Calexico'},
489.                 {'votes': 900, 'DELETE': True, 'choice': 'Fergie'},
490.                 {},
491.             ]
492.         )
493.         self.assertEqual(
494.             [form.cleaned_data for form in formset.deleted_forms],
495.             [{'votes': 900, 'DELETE': True, 'choice': 'Fergie'}]
496.         )
497. 
498.     def test_formset_with_deletion_remove_deletion_flag(self):
499.         """
500.         If a form is filled with something and can_delete is also checked, that
501.         form's errors shouldn't make the entire formset invalid since it's
502.         going to be deleted.
503.         """
504.         class CheckForm(Form):
505.             field = IntegerField(min_value=100)
506. 
507.         data = {
508.             'check-TOTAL_FORMS': '3',  # the number of forms rendered
509.             'check-INITIAL_FORMS': '2',  # the number of forms with initial data
510.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
511.             'check-MAX_NUM_FORMS': '0',  # max number of forms
512.             'check-0-field': '200',
513.             'check-0-DELETE': '',
514.             'check-1-field': '50',
515.             'check-1-DELETE': 'on',
516.             'check-2-field': '',
517.             'check-2-DELETE': '',
518.         }
519.         CheckFormSet = formset_factory(CheckForm, can_delete=True)
520.         formset = CheckFormSet(data, prefix='check')
521.         self.assertTrue(formset.is_valid())
522.         # If the deletion flag is removed, validation is enabled.
523.         data['check-1-DELETE'] = ''
524.         formset = CheckFormSet(data, prefix='check')
525.         self.assertFalse(formset.is_valid())
526. 
527.     def test_formset_with_deletion_invalid_deleted_form(self):
528.         """
529.         deleted_forms works on a valid formset even if a deleted form would
530.         have been invalid.
531.         """
532.         FavoriteDrinkFormset = formset_factory(form=FavoriteDrinkForm, can_delete=True)
533.         formset = FavoriteDrinkFormset({
534.             'form-0-name': '',
535.             'form-0-DELETE': 'on',  # no name!
536.             'form-TOTAL_FORMS': 1,
537.             'form-INITIAL_FORMS': 1,
538.             'form-MIN_NUM_FORMS': 0,
539.             'form-MAX_NUM_FORMS': 1,
540.         })
541.         self.assertTrue(formset.is_valid())
542.         self.assertEqual(formset._errors, [])
543.         self.assertEqual(len(formset.deleted_forms), 1)
544. 
545.     def test_formsets_with_ordering(self):
546.         """
547.         formset_factory's can_order argument adds an integer field to each
548.         form. When form validation succeeds, [form.cleaned_data for form in formset.forms]
549.         will have the data in the correct order specified by the ordering
550.         fields. If a number is duplicated in the set of ordering fields, for
551.         instance form 0 and form 3 are both marked as 1, then the form index
552.         used as a secondary ordering criteria. In order to put something at the
553.         front of the list, you'd need to set its order to 0.
554.         """
555.         ChoiceFormSet = formset_factory(Choice, can_order=True)
556.         initial = [{'choice': 'Calexico', 'votes': 100}, {'choice': 'Fergie', 'votes': 900}]
557.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
558.         self.assertHTMLEqual(
559.             '\n'.join(form.as_ul() for form in formset.forms),
560.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
561. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
562. <li>Order: <input type="number" name="choices-0-ORDER" value="1"></li>
563. <li>Choice: <input type="text" name="choices-1-choice" value="Fergie"></li>
564. <li>Votes: <input type="number" name="choices-1-votes" value="900"></li>
565. <li>Order: <input type="number" name="choices-1-ORDER" value="2"></li>
566. <li>Choice: <input type="text" name="choices-2-choice"></li>
567. <li>Votes: <input type="number" name="choices-2-votes"></li>
568. <li>Order: <input type="number" name="choices-2-ORDER"></li>"""
569.         )
570.         data = {
571.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
572.             'choices-INITIAL_FORMS': '2',  # the number of forms with initial data
573.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
574.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
575.             'choices-0-choice': 'Calexico',
576.             'choices-0-votes': '100',
577.             'choices-0-ORDER': '1',
578.             'choices-1-choice': 'Fergie',
579.             'choices-1-votes': '900',
580.             'choices-1-ORDER': '2',
581.             'choices-2-choice': 'The Decemberists',
582.             'choices-2-votes': '500',
583.             'choices-2-ORDER': '0',
584.         }
585.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
586.         self.assertTrue(formset.is_valid())
587.         self.assertEqual(
588.             [form.cleaned_data for form in formset.ordered_forms],
589.             [
590.                 {'votes': 500, 'ORDER': 0, 'choice': 'The Decemberists'},
591.                 {'votes': 100, 'ORDER': 1, 'choice': 'Calexico'},
592.                 {'votes': 900, 'ORDER': 2, 'choice': 'Fergie'},
593.             ],
594.         )
595. 
596.     def test_formsets_with_order_custom_widget(self):
597.         class OrderingAttributFormSet(BaseFormSet):
598.             ordering_widget = HiddenInput
599. 
600.         class OrderingMethodFormSet(BaseFormSet):
601.             def get_ordering_widget(self):
602.                 return HiddenInput(attrs={'class': 'ordering'})
603. 
604.         tests = (
605.             (OrderingAttributFormSet, '<input type="hidden" name="form-0-ORDER">'),
606.             (OrderingMethodFormSet, '<input class="ordering" type="hidden" name="form-0-ORDER">'),
607.         )
608.         for formset_class, order_html in tests:
609.             with self.subTest(formset_class=formset_class.__name__):
610.                 ArticleFormSet = formset_factory(ArticleForm, formset=formset_class, can_order=True)
611.                 formset = ArticleFormSet(auto_id=False)
612.                 self.assertHTMLEqual(
613.                     '\n'.join(form.as_ul() for form in formset.forms),
614.                     (
615.                         '<li>Title: <input type="text" name="form-0-title"></li>'
616.                         '<li>Pub date: <input type="text" name="form-0-pub_date">'
617.                         '%s</li>' % order_html
618.                     ),
619.                 )
620. 
621.     def test_empty_ordered_fields(self):
622.         """
623.         Ordering fields are allowed to be left blank. If they are left blank,
624.         they'll be sorted below everything else.
625.         """
626.         data = {
627.             'choices-TOTAL_FORMS': '4',  # the number of forms rendered
628.             'choices-INITIAL_FORMS': '3',  # the number of forms with initial data
629.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
630.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
631.             'choices-0-choice': 'Calexico',
632.             'choices-0-votes': '100',
633.             'choices-0-ORDER': '1',
634.             'choices-1-choice': 'Fergie',
635.             'choices-1-votes': '900',
636.             'choices-1-ORDER': '2',
637.             'choices-2-choice': 'The Decemberists',
638.             'choices-2-votes': '500',
639.             'choices-2-ORDER': '',
640.             'choices-3-choice': 'Basia Bulat',
641.             'choices-3-votes': '50',
642.             'choices-3-ORDER': '',
643.         }
644.         ChoiceFormSet = formset_factory(Choice, can_order=True)
645.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
646.         self.assertTrue(formset.is_valid())
647.         self.assertEqual(
648.             [form.cleaned_data for form in formset.ordered_forms],
649.             [
650.                 {'votes': 100, 'ORDER': 1, 'choice': 'Calexico'},
651.                 {'votes': 900, 'ORDER': 2, 'choice': 'Fergie'},
652.                 {'votes': 500, 'ORDER': None, 'choice': 'The Decemberists'},
653.                 {'votes': 50, 'ORDER': None, 'choice': 'Basia Bulat'},
654.             ],
655.         )
656. 
657.     def test_ordering_blank_fieldsets(self):
658.         """Ordering works with blank fieldsets."""
659.         data = {
660.             'choices-TOTAL_FORMS': '3',  # the number of forms rendered
661.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
662.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
663.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
664.         }
665.         ChoiceFormSet = formset_factory(Choice, can_order=True)
666.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
667.         self.assertTrue(formset.is_valid())
668.         self.assertEqual(formset.ordered_forms, [])
669. 
670.     def test_formset_with_ordering_and_deletion(self):
671.         """FormSets with ordering + deletion."""
672.         ChoiceFormSet = formset_factory(Choice, can_order=True, can_delete=True)
673.         initial = [
674.             {'choice': 'Calexico', 'votes': 100},
675.             {'choice': 'Fergie', 'votes': 900},
676.             {'choice': 'The Decemberists', 'votes': 500},
677.         ]
678.         formset = ChoiceFormSet(initial=initial, auto_id=False, prefix='choices')
679.         self.assertHTMLEqual(
680.             '\n'.join(form.as_ul() for form in formset.forms),
681.             """<li>Choice: <input type="text" name="choices-0-choice" value="Calexico"></li>
682. <li>Votes: <input type="number" name="choices-0-votes" value="100"></li>
683. <li>Order: <input type="number" name="choices-0-ORDER" value="1"></li>
684. <li>Delete: <input type="checkbox" name="choices-0-DELETE"></li>
685. <li>Choice: <input type="text" name="choices-1-choice" value="Fergie"></li>
686. <li>Votes: <input type="number" name="choices-1-votes" value="900"></li>
687. <li>Order: <input type="number" name="choices-1-ORDER" value="2"></li>
688. <li>Delete: <input type="checkbox" name="choices-1-DELETE"></li>
689. <li>Choice: <input type="text" name="choices-2-choice" value="The Decemberists"></li>
690. <li>Votes: <input type="number" name="choices-2-votes" value="500"></li>
691. <li>Order: <input type="number" name="choices-2-ORDER" value="3"></li>
692. <li>Delete: <input type="checkbox" name="choices-2-DELETE"></li>
693. <li>Choice: <input type="text" name="choices-3-choice"></li>
694. <li>Votes: <input type="number" name="choices-3-votes"></li>
695. <li>Order: <input type="number" name="choices-3-ORDER"></li>
696. <li>Delete: <input type="checkbox" name="choices-3-DELETE"></li>"""
697.         )
698.         # Let's delete Fergie, and put The Decemberists ahead of Calexico.
699.         data = {
700.             'choices-TOTAL_FORMS': '4',  # the number of forms rendered
701.             'choices-INITIAL_FORMS': '3',  # the number of forms with initial data
702.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
703.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
704.             'choices-0-choice': 'Calexico',
705.             'choices-0-votes': '100',
706.             'choices-0-ORDER': '1',
707.             'choices-0-DELETE': '',
708.             'choices-1-choice': 'Fergie',
709.             'choices-1-votes': '900',
710.             'choices-1-ORDER': '2',
711.             'choices-1-DELETE': 'on',
712.             'choices-2-choice': 'The Decemberists',
713.             'choices-2-votes': '500',
714.             'choices-2-ORDER': '0',
715.             'choices-2-DELETE': '',
716.             'choices-3-choice': '',
717.             'choices-3-votes': '',
718.             'choices-3-ORDER': '',
719.             'choices-3-DELETE': '',
720.         }
721.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
722.         self.assertTrue(formset.is_valid())
723.         self.assertEqual(
724.             [form.cleaned_data for form in formset.ordered_forms],
725.             [
726.                 {'votes': 500, 'DELETE': False, 'ORDER': 0, 'choice': 'The Decemberists'},
727.                 {'votes': 100, 'DELETE': False, 'ORDER': 1, 'choice': 'Calexico'},
728.             ],
729.         )
730.         self.assertEqual(
731.             [form.cleaned_data for form in formset.deleted_forms],
732.             [{'votes': 900, 'DELETE': True, 'ORDER': 2, 'choice': 'Fergie'}]
733.         )
734. 
735.     def test_invalid_deleted_form_with_ordering(self):
736.         """
737.         Can get ordered_forms from a valid formset even if a deleted form
738.         would have been invalid.
739.         """
740.         FavoriteDrinkFormset = formset_factory(form=FavoriteDrinkForm, can_delete=True, can_order=True)
741.         formset = FavoriteDrinkFormset({
742.             'form-0-name': '',
743.             'form-0-DELETE': 'on',  # no name!
744.             'form-TOTAL_FORMS': 1,
745.             'form-INITIAL_FORMS': 1,
746.             'form-MIN_NUM_FORMS': 0,
747.             'form-MAX_NUM_FORMS': 1
748.         })
749.         self.assertTrue(formset.is_valid())
750.         self.assertEqual(formset.ordered_forms, [])
751. 
752.     def test_clean_hook(self):
753.         """
754.         FormSets have a clean() hook for doing extra validation that isn't tied
755.         to any form. It follows the same pattern as the clean() hook on Forms.
756.         """
757.         # Start out with a some duplicate data.
758.         data = {
759.             'drinks-TOTAL_FORMS': '2',  # the number of forms rendered
760.             'drinks-INITIAL_FORMS': '0',  # the number of forms with initial data
761.             'drinks-MIN_NUM_FORMS': '0',  # min number of forms
762.             'drinks-MAX_NUM_FORMS': '0',  # max number of forms
763.             'drinks-0-name': 'Gin and Tonic',
764.             'drinks-1-name': 'Gin and Tonic',
765.         }
766.         formset = FavoriteDrinksFormSet(data, prefix='drinks')
767.         self.assertFalse(formset.is_valid())
768.         # Any errors raised by formset.clean() are available via the
769.         # formset.non_form_errors() method.
770.         for error in formset.non_form_errors():
771.             self.assertEqual(str(error), 'You may only specify a drink once.')
772.         # The valid case still works.
773.         data['drinks-1-name'] = 'Bloody Mary'
774.         formset = FavoriteDrinksFormSet(data, prefix='drinks')
775.         self.assertTrue(formset.is_valid())
776.         self.assertEqual(formset.non_form_errors(), [])
777. 
778.     def test_limiting_max_forms(self):
779.         """Limiting the maximum number of forms with max_num."""
780.         # When not passed, max_num will take a high default value, leaving the
781.         # number of forms only controlled by the value of the extra parameter.
782.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=3)
783.         formset = LimitedFavoriteDrinkFormSet()
784.         self.assertHTMLEqual(
785.             '\n'.join(str(form) for form in formset.forms),
786.             """<tr><th><label for="id_form-0-name">Name:</label></th>
787. <td><input type="text" name="form-0-name" id="id_form-0-name"></td></tr>
788. <tr><th><label for="id_form-1-name">Name:</label></th>
789. <td><input type="text" name="form-1-name" id="id_form-1-name"></td></tr>
790. <tr><th><label for="id_form-2-name">Name:</label></th>
791. <td><input type="text" name="form-2-name" id="id_form-2-name"></td></tr>"""
792.         )
793.         # If max_num is 0 then no form is rendered at all.
794.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=3, max_num=0)
795.         formset = LimitedFavoriteDrinkFormSet()
796.         self.assertEqual(formset.forms, [])
797. 
798.     def test_limited_max_forms_two(self):
799.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=5, max_num=2)
800.         formset = LimitedFavoriteDrinkFormSet()
801.         self.assertHTMLEqual(
802.             '\n'.join(str(form) for form in formset.forms),
803.             """<tr><th><label for="id_form-0-name">Name:</label></th><td>
804. <input type="text" name="form-0-name" id="id_form-0-name"></td></tr>
805. <tr><th><label for="id_form-1-name">Name:</label></th>
806. <td><input type="text" name="form-1-name" id="id_form-1-name"></td></tr>"""
807.         )
808. 
809.     def test_limiting_extra_lest_than_max_num(self):
810.         """max_num has no effect when extra is less than max_num."""
811.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=1, max_num=2)
812.         formset = LimitedFavoriteDrinkFormSet()
813.         self.assertHTMLEqual(
814.             '\n'.join(str(form) for form in formset.forms),
815.             """<tr><th><label for="id_form-0-name">Name:</label></th>
816. <td><input type="text" name="form-0-name" id="id_form-0-name"></td></tr>"""
817.         )
818. 
819.     def test_max_num_with_initial_data(self):
820.         # When not passed, max_num will take a high default value, leaving the
821.         # number of forms only controlled by the value of the initial and extra
822.         # parameters.
823.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=1)
824.         formset = LimitedFavoriteDrinkFormSet(initial=[{'name': 'Fernet and Coke'}])
825.         self.assertHTMLEqual(
826.             '\n'.join(str(form) for form in formset.forms),
827.             """<tr><th><label for="id_form-0-name">Name:</label></th>
828. <td><input type="text" name="form-0-name" value="Fernet and Coke" id="id_form-0-name"></td></tr>
829. <tr><th><label for="id_form-1-name">Name:</label></th>
830. <td><input type="text" name="form-1-name" id="id_form-1-name"></td></tr>"""
831.         )
832. 
833.     def test_max_num_zero(self):
834.         """
835.         If max_num is 0 then no form is rendered at all, regardless of extra,
836.         unless initial data is present.
837.         """
838.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=1, max_num=0)
839.         formset = LimitedFavoriteDrinkFormSet()
840.         self.assertEqual(formset.forms, [])
841. 
842.     def test_max_num_zero_with_initial(self):
843.         # initial trumps max_num
844.         initial = [
845.             {'name': 'Fernet and Coke'},
846.             {'name': 'Bloody Mary'},
847.         ]
848.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=1, max_num=0)
849.         formset = LimitedFavoriteDrinkFormSet(initial=initial)
850.         self.assertHTMLEqual(
851.             '\n'.join(str(form) for form in formset.forms),
852.             """<tr><th><label for="id_form-0-name">Name:</label></th>
853. <td><input id="id_form-0-name" name="form-0-name" type="text" value="Fernet and Coke"></td></tr>
854. <tr><th><label for="id_form-1-name">Name:</label></th>
855. <td><input id="id_form-1-name" name="form-1-name" type="text" value="Bloody Mary"></td></tr>"""
856.         )
857. 
858.     def test_more_initial_than_max_num(self):
859.         """
860.         More initial forms than max_num results in all initial forms being
861.         displayed (but no extra forms).
862.         """
863.         initial = [
864.             {'name': 'Gin Tonic'},
865.             {'name': 'Bloody Mary'},
866.             {'name': 'Jack and Coke'},
867.         ]
868.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=1, max_num=2)
869.         formset = LimitedFavoriteDrinkFormSet(initial=initial)
870.         self.assertHTMLEqual(
871.             '\n'.join(str(form) for form in formset.forms),
872.             """<tr><th><label for="id_form-0-name">Name:</label></th>
873. <td><input id="id_form-0-name" name="form-0-name" type="text" value="Gin Tonic"></td></tr>
874. <tr><th><label for="id_form-1-name">Name:</label></th>
875. <td><input id="id_form-1-name" name="form-1-name" type="text" value="Bloody Mary"></td></tr>
876. <tr><th><label for="id_form-2-name">Name:</label></th>
877. <td><input id="id_form-2-name" name="form-2-name" type="text" value="Jack and Coke"></td></tr>"""
878.         )
879. 
880.     def test_default_absolute_max(self):
881.         # absolute_max defaults to 2 * DEFAULT_MAX_NUM if max_num is None.
882.         data = {
883.             'form-TOTAL_FORMS': 2001,
884.             'form-INITIAL_FORMS': '0',
885.             'form-MAX_NUM_FORMS': '0',
886.         }
887.         formset = FavoriteDrinksFormSet(data=data)
888.         self.assertIs(formset.is_valid(), False)
889.         self.assertEqual(
890.             formset.non_form_errors(),
891.             ['Please submit at most 1000 forms.'],
892.         )
893.         self.assertEqual(formset.absolute_max, 2000)
894. 
895.     def test_absolute_max(self):
896.         data = {
897.             'form-TOTAL_FORMS': '2001',
898.             'form-INITIAL_FORMS': '0',
899.             'form-MAX_NUM_FORMS': '0',
900.         }
901.         AbsoluteMaxFavoriteDrinksFormSet = formset_factory(
902.             FavoriteDrinkForm,
903.             absolute_max=3000,
904.         )
905.         formset = AbsoluteMaxFavoriteDrinksFormSet(data=data)
906.         self.assertIs(formset.is_valid(), True)
907.         self.assertEqual(len(formset.forms), 2001)
908.         # absolute_max provides a hard limit.
909.         data['form-TOTAL_FORMS'] = '3001'
910.         formset = AbsoluteMaxFavoriteDrinksFormSet(data=data)
911.         self.assertIs(formset.is_valid(), False)
912.         self.assertEqual(len(formset.forms), 3000)
913.         self.assertEqual(
914.             formset.non_form_errors(),
915.             ['Please submit at most 1000 forms.'],
916.         )
917. 
918.     def test_absolute_max_with_max_num(self):
919.         data = {
920.             'form-TOTAL_FORMS': '1001',
921.             'form-INITIAL_FORMS': '0',
922.             'form-MAX_NUM_FORMS': '0',
923.         }
924.         LimitedFavoriteDrinksFormSet = formset_factory(
925.             FavoriteDrinkForm,
926.             max_num=30,
927.             absolute_max=1000,
928.         )
929.         formset = LimitedFavoriteDrinksFormSet(data=data)
930.         self.assertIs(formset.is_valid(), False)
931.         self.assertEqual(len(formset.forms), 1000)
932.         self.assertEqual(
933.             formset.non_form_errors(),
934.             ['Please submit at most 30 forms.'],
935.         )
936. 
937.     def test_absolute_max_invalid(self):
938.         msg = "'absolute_max' must be greater or equal to 'max_num'."
939.         for max_num in [None, 31]:
940.             with self.subTest(max_num=max_num):
941.                 with self.assertRaisesMessage(ValueError, msg):
942.                     formset_factory(FavoriteDrinkForm, max_num=max_num, absolute_max=30)
943. 
944.     def test_more_initial_form_result_in_one(self):
945.         """
946.         One form from initial and extra=3 with max_num=2 results in the one
947.         initial form and one extra.
948.         """
949.         LimitedFavoriteDrinkFormSet = formset_factory(FavoriteDrinkForm, extra=3, max_num=2)
950.         formset = LimitedFavoriteDrinkFormSet(initial=[{'name': 'Gin Tonic'}])
951.         self.assertHTMLEqual(
952.             '\n'.join(str(form) for form in formset.forms),
953.             """<tr><th><label for="id_form-0-name">Name:</label></th>
954. <td><input type="text" name="form-0-name" value="Gin Tonic" id="id_form-0-name"></td></tr>
955. <tr><th><label for="id_form-1-name">Name:</label></th>
956. <td><input type="text" name="form-1-name" id="id_form-1-name"></td></tr>"""
957.         )
958. 
959.     def test_management_form_prefix(self):
960.         """The management form has the correct prefix."""
961.         formset = FavoriteDrinksFormSet()
962.         self.assertEqual(formset.management_form.prefix, 'form')
963.         data = {
964.             'form-TOTAL_FORMS': '2',
965.             'form-INITIAL_FORMS': '0',
966.             'form-MIN_NUM_FORMS': '0',
967.             'form-MAX_NUM_FORMS': '0',
968.         }
969.         formset = FavoriteDrinksFormSet(data=data)
970.         self.assertEqual(formset.management_form.prefix, 'form')
971.         formset = FavoriteDrinksFormSet(initial={})
972.         self.assertEqual(formset.management_form.prefix, 'form')
973. 
974.     def test_non_form_errors(self):
975.         data = {
976.             'drinks-TOTAL_FORMS': '2',  # the number of forms rendered
977.             'drinks-INITIAL_FORMS': '0',  # the number of forms with initial data
978.             'drinks-MIN_NUM_FORMS': '0',  # min number of forms
979.             'drinks-MAX_NUM_FORMS': '0',  # max number of forms
980.             'drinks-0-name': 'Gin and Tonic',
981.             'drinks-1-name': 'Gin and Tonic',
982.         }
983.         formset = FavoriteDrinksFormSet(data, prefix='drinks')
984.         self.assertFalse(formset.is_valid())
985.         self.assertEqual(formset.non_form_errors(), ['You may only specify a drink once.'])
986. 
987.     def test_formset_iteration(self):
988.         """Formset instances are iterable."""
989.         ChoiceFormset = formset_factory(Choice, extra=3)
990.         formset = ChoiceFormset()
991.         # An iterated formset yields formset.forms.
992.         forms = list(formset)
993.         self.assertEqual(forms, formset.forms)
994.         self.assertEqual(len(formset), len(forms))
995.         # A formset may be indexed to retrieve its forms.
996.         self.assertEqual(formset[0], forms[0])
997.         with self.assertRaises(IndexError):
998.             formset[3]
999. 
1000.         # Formsets can override the default iteration order
1001.         class BaseReverseFormSet(BaseFormSet):
1002.             def __iter__(self):
1003.                 return reversed(self.forms)
1004. 
1005.             def __getitem__(self, idx):
1006.                 return super().__getitem__(len(self) - idx - 1)
1007. 
1008.         ReverseChoiceFormset = formset_factory(Choice, BaseReverseFormSet, extra=3)
1009.         reverse_formset = ReverseChoiceFormset()
1010.         # __iter__() modifies the rendering order.
1011.         # Compare forms from "reverse" formset with forms from original formset
1012.         self.assertEqual(str(reverse_formset[0]), str(forms[-1]))
1013.         self.assertEqual(str(reverse_formset[1]), str(forms[-2]))
1014.         self.assertEqual(len(reverse_formset), len(forms))
1015. 
1016.     def test_formset_nonzero(self):
1017.         """A formsets without any forms evaluates as True."""
1018.         ChoiceFormset = formset_factory(Choice, extra=0)
1019.         formset = ChoiceFormset()
1020.         self.assertEqual(len(formset.forms), 0)
1021.         self.assertTrue(formset)
1022. 
1023.     def test_formset_splitdatetimefield(self):
1024.         """
1025.         Formset works with SplitDateTimeField(initial=datetime.datetime.now).
1026.         """
1027.         class SplitDateTimeForm(Form):
1028.             when = SplitDateTimeField(initial=datetime.datetime.now)
1029. 
1030.         SplitDateTimeFormSet = formset_factory(SplitDateTimeForm)
1031.         data = {
1032.             'form-TOTAL_FORMS': '1',
1033.             'form-INITIAL_FORMS': '0',
1034.             'form-0-when_0': '1904-06-16',
1035.             'form-0-when_1': '15:51:33',
1036.         }
1037.         formset = SplitDateTimeFormSet(data)
1038.         self.assertTrue(formset.is_valid())
1039. 
1040.     def test_formset_error_class(self):
1041.         """Formset's forms use the formset's error_class."""
1042.         class CustomErrorList(ErrorList):
1043.             pass
1044. 
1045.         formset = FavoriteDrinksFormSet(error_class=CustomErrorList)
1046.         self.assertEqual(formset.forms[0].error_class, CustomErrorList)
1047. 
1048.     def test_formset_calls_forms_is_valid(self):
1049.         """Formsets call is_valid() on each form."""
1050.         class AnotherChoice(Choice):
1051.             def is_valid(self):
1052.                 self.is_valid_called = True
1053.                 return super().is_valid()
1054. 
1055.         AnotherChoiceFormSet = formset_factory(AnotherChoice)
1056.         data = {
1057.             'choices-TOTAL_FORMS': '1',  # number of forms rendered
1058.             'choices-INITIAL_FORMS': '0',  # number of forms with initial data
1059.             'choices-MIN_NUM_FORMS': '0',  # min number of forms
1060.             'choices-MAX_NUM_FORMS': '0',  # max number of forms
1061.             'choices-0-choice': 'Calexico',
1062.             'choices-0-votes': '100',
1063.         }
1064.         formset = AnotherChoiceFormSet(data, auto_id=False, prefix='choices')
1065.         self.assertTrue(formset.is_valid())
1066.         self.assertTrue(all(form.is_valid_called for form in formset.forms))
1067. 
1068.     def test_hard_limit_on_instantiated_forms(self):
1069.         """A formset has a hard limit on the number of forms instantiated."""
1070.         # reduce the default limit of 1000 temporarily for testing
1071.         _old_DEFAULT_MAX_NUM = formsets.DEFAULT_MAX_NUM
1072.         try:
1073.             formsets.DEFAULT_MAX_NUM = 2
1074.             ChoiceFormSet = formset_factory(Choice, max_num=1)
1075.             # someone fiddles with the mgmt form data...
1076.             formset = ChoiceFormSet(
1077.                 {
1078.                     'choices-TOTAL_FORMS': '4',
1079.                     'choices-INITIAL_FORMS': '0',
1080.                     'choices-MIN_NUM_FORMS': '0',  # min number of forms
1081.                     'choices-MAX_NUM_FORMS': '4',
1082.                     'choices-0-choice': 'Zero',
1083.                     'choices-0-votes': '0',
1084.                     'choices-1-choice': 'One',
1085.                     'choices-1-votes': '1',
1086.                     'choices-2-choice': 'Two',
1087.                     'choices-2-votes': '2',
1088.                     'choices-3-choice': 'Three',
1089.                     'choices-3-votes': '3',
1090.                 },
1091.                 prefix='choices',
1092.             )
1093.             # But we still only instantiate 3 forms
1094.             self.assertEqual(len(formset.forms), 3)
1095.             # and the formset isn't valid
1096.             self.assertFalse(formset.is_valid())
1097.         finally:
1098.             formsets.DEFAULT_MAX_NUM = _old_DEFAULT_MAX_NUM
1099. 
1100.     def test_increase_hard_limit(self):
1101.         """Can increase the built-in forms limit via a higher max_num."""
1102.         # reduce the default limit of 1000 temporarily for testing
1103.         _old_DEFAULT_MAX_NUM = formsets.DEFAULT_MAX_NUM
1104.         try:
1105.             formsets.DEFAULT_MAX_NUM = 3
1106.             # for this form, we want a limit of 4
1107.             ChoiceFormSet = formset_factory(Choice, max_num=4)
1108.             formset = ChoiceFormSet(
1109.                 {
1110.                     'choices-TOTAL_FORMS': '4',
1111.                     'choices-INITIAL_FORMS': '0',
1112.                     'choices-MIN_NUM_FORMS': '0',  # min number of forms
1113.                     'choices-MAX_NUM_FORMS': '4',
1114.                     'choices-0-choice': 'Zero',
1115.                     'choices-0-votes': '0',
1116.                     'choices-1-choice': 'One',
1117.                     'choices-1-votes': '1',
1118.                     'choices-2-choice': 'Two',
1119.                     'choices-2-votes': '2',
1120.                     'choices-3-choice': 'Three',
1121.                     'choices-3-votes': '3',
1122.                 },
1123.                 prefix='choices',
1124.             )
1125.             # Four forms are instantiated and no exception is raised
1126.             self.assertEqual(len(formset.forms), 4)
1127.         finally:
1128.             formsets.DEFAULT_MAX_NUM = _old_DEFAULT_MAX_NUM
1129. 
1130.     def test_non_form_errors_run_full_clean(self):
1131.         """
1132.         If non_form_errors() is called without calling is_valid() first,
1133.         it should ensure that full_clean() is called.
1134.         """
1135.         class BaseCustomFormSet(BaseFormSet):
1136.             def clean(self):
1137.                 raise ValidationError("This is a non-form error")
1138. 
1139.         ChoiceFormSet = formset_factory(Choice, formset=BaseCustomFormSet)
1140.         data = {
1141.             'choices-TOTAL_FORMS': '1',
1142.             'choices-INITIAL_FORMS': '0',
1143.         }
1144.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
1145.         self.assertIsInstance(formset.non_form_errors(), ErrorList)
1146.         self.assertEqual(list(formset.non_form_errors()), ['This is a non-form error'])
1147. 
1148.     def test_validate_max_ignores_forms_marked_for_deletion(self):
1149.         class CheckForm(Form):
1150.             field = IntegerField()
1151. 
1152.         data = {
1153.             'check-TOTAL_FORMS': '2',
1154.             'check-INITIAL_FORMS': '0',
1155.             'check-MAX_NUM_FORMS': '1',
1156.             'check-0-field': '200',
1157.             'check-0-DELETE': '',
1158.             'check-1-field': '50',
1159.             'check-1-DELETE': 'on',
1160.         }
1161.         CheckFormSet = formset_factory(CheckForm, max_num=1, validate_max=True, can_delete=True)
1162.         formset = CheckFormSet(data, prefix='check')
1163.         self.assertTrue(formset.is_valid())
1164. 
1165.     def test_formset_total_error_count(self):
1166.         """A valid formset should have 0 total errors."""
1167.         data = [  # formset_data, expected error count
1168.             ([('Calexico', '100')], 0),
1169.             ([('Calexico', '')], 1),
1170.             ([('', 'invalid')], 2),
1171.             ([('Calexico', '100'), ('Calexico', '')], 1),
1172.             ([('Calexico', ''), ('Calexico', '')], 2),
1173.         ]
1174.         for formset_data, expected_error_count in data:
1175.             formset = self.make_choiceformset(formset_data)
1176.             self.assertEqual(formset.total_error_count(), expected_error_count)
1177. 
1178.     def test_formset_total_error_count_with_non_form_errors(self):
1179.         data = {
1180.             'choices-TOTAL_FORMS': '2',  # the number of forms rendered
1181.             'choices-INITIAL_FORMS': '0',  # the number of forms with initial data
1182.             'choices-MAX_NUM_FORMS': '2',  # max number of forms - should be ignored
1183.             'choices-0-choice': 'Zero',
1184.             'choices-0-votes': '0',
1185.             'choices-1-choice': 'One',
1186.             'choices-1-votes': '1',
1187.         }
1188.         ChoiceFormSet = formset_factory(Choice, extra=1, max_num=1, validate_max=True)
1189.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
1190.         self.assertEqual(formset.total_error_count(), 1)
1191.         data['choices-1-votes'] = ''
1192.         formset = ChoiceFormSet(data, auto_id=False, prefix='choices')
1193.         self.assertEqual(formset.total_error_count(), 2)
1194. 
1195.     def test_html_safe(self):
1196.         formset = self.make_choiceformset()
1197.         self.assertTrue(hasattr(formset, '__html__'))
1198.         self.assertEqual(str(formset), formset.__html__())
1199. 
1200.     def test_can_delete_extra_formset_forms(self):
1201.         ChoiceFormFormset = formset_factory(form=Choice, can_delete=True, extra=2)
1202.         formset = ChoiceFormFormset()
1203.         self.assertEqual(len(formset), 2)
1204.         self.assertIn('DELETE', formset.forms[0].fields)
1205.         self.assertIn('DELETE', formset.forms[1].fields)
1206. 
1207.     def test_disable_delete_extra_formset_forms(self):
1208.         ChoiceFormFormset = formset_factory(
1209.             form=Choice,
1210.             can_delete=True,
1211.             can_delete_extra=False,
1212.             extra=2,
1213.         )
1214.         formset = ChoiceFormFormset()
1215.         self.assertEqual(len(formset), 2)
1216.         self.assertNotIn('DELETE', formset.forms[0].fields)
1217.         self.assertNotIn('DELETE', formset.forms[1].fields)
1218. 
1219.         formset = ChoiceFormFormset(initial=[{'choice': 'Zero', 'votes': '1'}])
1220.         self.assertEqual(len(formset), 3)
1221.         self.assertIn('DELETE', formset.forms[0].fields)
1222.         self.assertNotIn('DELETE', formset.forms[1].fields)
1223.         self.assertNotIn('DELETE', formset.forms[2].fields)
1224. 
1225.         formset = ChoiceFormFormset(data={
1226.             'form-0-choice': 'Zero',
1227.             'form-0-votes': '0',
1228.             'form-0-DELETE': 'on',
1229.             'form-1-choice': 'One',
1230.             'form-1-votes': '1',
1231.             'form-2-choice': '',
1232.             'form-2-votes': '',
1233.             'form-TOTAL_FORMS': '3',
1234.             'form-INITIAL_FORMS': '1',
1235.         }, initial=[{'choice': 'Zero', 'votes': '1'}])
1236.         self.assertEqual(formset.cleaned_data, [
1237.             {'choice': 'Zero', 'votes': 0, 'DELETE': True},
1238.             {'choice': 'One', 'votes': 1},
1239.             {},
1240.         ])
1241.         self.assertIs(formset._should_delete_form(formset.forms[0]), True)
1242.         self.assertIs(formset._should_delete_form(formset.forms[1]), False)
1243.         self.assertIs(formset._should_delete_form(formset.forms[2]), False)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 04:02:46,844 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='This context defines the `BaseFavoriteDrinksFormSet`, which contains the custom `clean` method. This method is the subject of the test the user is interested in, as it raises a `ValidationError` that becomes a `non_form_error`.', relative_path='tests/forms_tests/tests/test_formsets.py', start_line=28, end_line=37), ContextOutput(reasoning="The user's query asks for a test method that uses `FavoriteDrinksFormSet`. This context shows the creation of that formset using the `formset_factory`. It is essential for understanding how the `BaseFavoriteDrinksFormSet` with the custom `clean` method is actually used.", relative_path='tests/forms_tests/tests/test_formsets.py', start_line=39, end_line=41), ContextOutput(reasoning="The requested test method `test_formset_with_custom_clean` does not exist. This test method, `test_clean_hook`, fulfills the user's alternative request to see a test that uses `FavoriteDrinksFormSet`. More importantly, it directly demonstrates the behavior described in the user's purpose: it checks that a `ValidationError` raised in the formset's `clean` method is correctly added to the formset's `non_form_errors`.", relative_path='tests/forms_tests/tests/test_formsets.py', start_line=752, end_line=777), ContextOutput(reasoning="This context defines the `FavoriteDrinkForm`, which is the form used within the `FavoriteDrinksFormSet`. This is necessary context for understanding the data being validated in the formset's `clean` method.", relative_path='tests/forms_tests/tests/test_formsets.py', start_line=24, end_line=26)]
2025-12-24 04:02:46,846 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 4 contexts to memory for query: Please provide the test method `test_formset_with_custom_clean` from `tests/forms_tests/tests/test_formsets.py`.
2025-12-24 04:02:46,848 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 04:02:46,848 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 04:02:46,849 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 4 new contexts to 8 existing contexts
2025-12-24 04:02:46,850 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 9 total contexts (removed 3 duplicates)
2025-12-24 04:02:46,850 - thread-125237555361472.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-24 04:02:46,851 - thread-125237555361472.prometheus_context_collector - INFO - Successfully retrieved 9 context snippets
