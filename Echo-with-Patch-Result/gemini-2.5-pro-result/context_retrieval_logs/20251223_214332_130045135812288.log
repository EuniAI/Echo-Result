2025-12-23 21:43:32,592 - thread-130045135812288.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Constant expressions of an ExpressionWrapper object are incorrectly placed at the GROUP BY clause

Description: Description
	
I have a function that expects an arbitrary Query expression and constructs a query on a Postgres db
 def execQuery(expr):
	 expr = ExpressionWrapper(expr, output_field=IntegerField())
	 return Model.objects.annotate(expr_res=expr).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
However, when the given expr is a constant expression (e.g., Value(3)), Django generates an SQL query that contains this constant expression in its GROUP BY clause.
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a", 3
This leads to an exception because in Postgres, the query above is invalid:
django.db.utils.ProgrammingError: aggregate functions are not allowed in GROUP BY
LINE 1: SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."col...
Note that when the given query expression is not wrapped by the ExpressionWrapper object, Django correctly identifies and omits the constant from the GROUP BY clause. For example, the query below runs correctly.
 def execQuery(expr):
	 return Model.objects.annotate(expr_res=Value(3, output_field=IntegerField())).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a"

Patch information:
diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py
index c1a76584f0..aface75cff 100644
--- a/django/db/models/expressions.py
+++ b/django/db/models/expressions.py
@@ -863,6 +863,9 @@ class ExpressionWrapper(Expression):
     def get_source_expressions(self):
         return [self.expression]
 
+    def get_group_by_cols(self, alias=None):
+        return self.expression.get_group_by_cols(alias)
+
     def as_sql(self, compiler, connection):
         return self.expression.as_sql(compiler, connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 21:43:32,694 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Constant expressions of an ExpressionWrapper object are incorrectly placed at the GROUP BY clause

Description: Description
	
I have a function that expects an arbitrary Query expression and constructs a query on a Postgres db
 def execQuery(expr):
	 expr = ExpressionWrapper(expr, output_field=IntegerField())
	 return Model.objects.annotate(expr_res=expr).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
However, when the given expr is a constant expression (e.g., Value(3)), Django generates an SQL query that contains this constant expression in its GROUP BY clause.
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a", 3
This leads to an exception because in Postgres, the query above is invalid:
django.db.utils.ProgrammingError: aggregate functions are not allowed in GROUP BY
LINE 1: SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."col...
Note that when the given query expression is not wrapped by the ExpressionWrapper object, Django correctly identifies and omits the constant from the GROUP BY clause. For example, the query below runs correctly.
 def execQuery(expr):
	 return Model.objects.annotate(expr_res=Value(3, output_field=IntegerField())).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a"

Patch information:
diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py
index c1a76584f0..aface75cff 100644
--- a/django/db/models/expressions.py
+++ b/django/db/models/expressions.py
@@ -863,6 +863,9 @@ class ExpressionWrapper(Expression):
     def get_source_expressions(self):
         return [self.expression]
 
+    def get_group_by_cols(self, alias=None):
+        return self.expression.get_group_by_cols(alias)
+
     def as_sql(self, compiler, connection):
         return self.expression.as_sql(compiler, connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 21:43:51,431 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a bug in `ExpressionWrapper` concerning `GROUP BY` clauses. The patch is in `django/db/models/expressions.py`. The most relevant tests are likely in the corresponding test file in the `tests` directory. `tests/expressions/tests.py` is the most likely candidate to contain tests for `ExpressionWrapper` and its interaction with query generation, which is central to the bug.' query='Please provide the full content of the file `tests/expressions/tests.py`.' extra_requirements='' purpose='I need to find 3 relevant test cases that demonstrate the buggy behavior of ExpressionWrapper in GROUP BY clauses. This file is the most likely place to find them.'
2025-12-23 21:43:51,433 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `tests/expressions/tests.py`.
2025-12-23 21:43:51,433 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 21:43:51,434 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 21:43:51,435 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 21:43:51,435 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `tests/expressions/tests.py`.
Purpose: I need to find 3 relevant test cases that demonstrate the buggy behavior of ExpressionWrapper in GROUP BY clauses. This file is the most likely place to find them.
2025-12-23 21:43:53,501 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `tests/expressions/tests.py` as you requested. This will allow you to examine the test cases related to the buggy behavior of `ExpressionWrapper` in `GROUP BY` clauses.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/expressions/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2110, 'candidates_token_count': 67, 'total_token_count': 2249, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2110}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 67}], 'thoughts_token_count': 72, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.14070038297283116, 'model_name': 'gemini-2.5-pro'} id='run--4095c2de-8c2b-4f95-b315-7539765d908d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/expressions/tests.py'}, 'id': '10b50ccd-4410-4d4d-bc77-1dd938daa208', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2110, 'output_tokens': 67, 'total_tokens': 2249, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 72}}
2025-12-23 21:44:06,425 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have found three relevant test cases in `tests/expressions/tests.py` that demonstrate the behavior of `ExpressionWrapper` in `GROUP BY` clauses. I will now retrieve the full code for these tests for your review.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1069.0, "end_line": 1086.0, "relative_path": "tests/expressions/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10048, 'candidates_token_count': 128, 'total_token_count': 11423, 'cached_content_token_count': 1835, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10048}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1835}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 128}], 'thoughts_token_count': 1247}, 'finish_reason': 'STOP', 'avg_logprobs': -1.3372159004211426, 'model_name': 'gemini-2.5-pro'} id='run--0749245f-0642-470f-80de-3e34d6630dc3-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1032.0, 'end_line': 1050.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '09f8b323-7c2a-4a2e-90bd-0d25bd483304', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1051.0, 'end_line': 1068.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '9813105a-4660-4e8b-b951-ae9940e2c82c', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1069.0, 'end_line': 1086.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '6eb4828c-f9c8-4512-8c3f-ba8bae747a29', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10048, 'output_tokens': 128, 'total_tokens': 11423, 'input_token_details': {'cache_read': 1835}, 'output_token_details': {'reasoning': 1247}}
2025-12-23 21:45:40,750 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the content of `tests/expressions/tests.py` to help you find the test cases you're looking for. I will now find three relevant test cases that demonstrate the buggy behavior of `ExpressionWrapper` in `GROUP BY` clauses and provide you with the code." additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1543.0, "end_line": 1560.0, "relative_path": "tests/expressions/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11111, 'candidates_token_count': 161, 'total_token_count': 21636, 'cached_content_token_count': 9154, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11111}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9154}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 161}], 'thoughts_token_count': 10364}, 'finish_reason': 'STOP', 'avg_logprobs': -9.832172275329969, 'model_name': 'gemini-2.5-pro'} id='run--e670f2e4-bc0d-4917-9a75-9251d3ca5819-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/expressions/tests.py'}, 'id': '7ff6bec6-220a-4439-9bdf-382e1a17b7c8', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1503.0, 'end_line': 1522.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': 'ea2a5b64-f2a4-4d0c-a989-15ec320a6995', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1524.0, 'end_line': 1541.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '10df2055-7608-4772-ba6e-4eeb414f536e', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1543.0, 'end_line': 1560.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '17d6d82f-05a0-41f3-b151-060d54f117e7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11111, 'output_tokens': 161, 'total_tokens': 21636, 'input_token_details': {'cache_read': 9154}, 'output_token_details': {'reasoning': 10364}}
2025-12-23 21:46:04,257 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified three relevant test cases in `tests/expressions/tests.py` that demonstrate the usage of `ExpressionWrapper` with `GROUP BY` clauses. Here is the code for each of them, which should help in understanding the behavior of `ExpressionWrapper` in these scenarios.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1669.0, "end_line": 1685.0, "relative_path": "tests/expressions/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20299, 'candidates_token_count': 139, 'total_token_count': 22991, 'cached_content_token_count': 11287, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20299}], 'cache_tokens_details': [{'modality': 1, 'token_count': 11287}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 139}], 'thoughts_token_count': 2553}, 'finish_reason': 'STOP', 'avg_logprobs': -2.1816586281755845, 'model_name': 'gemini-2.5-pro'} id='run--e5cc3c11-f679-4d99-bc30-941037cafed3-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1636.0, 'end_line': 1653.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '3f670ee7-6703-4ec3-8b8e-b911fb5d3862', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1653.0, 'end_line': 1669.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': 'ffe8f935-27b9-4502-a730-85c1fdb3bd36', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1669.0, 'end_line': 1685.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': 'ec0b15b8-bed2-4445-a186-0deb6bebc661', 'type': 'tool_call'}] usage_metadata={'input_tokens': 20299, 'output_tokens': 139, 'total_tokens': 22991, 'input_token_details': {'cache_read': 11287}, 'output_token_details': {'reasoning': 2553}}
2025-12-23 21:46:15,874 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have found three test cases in `tests/expressions/tests.py` that demonstrate the buggy behavior of `ExpressionWrapper` in `GROUP BY` clauses. I will now provide the full code for these tests.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2046.0, "end_line": 2054.0, "relative_path": "tests/expressions/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 21678, 'candidates_token_count': 125, 'total_token_count': 22865, 'cached_content_token_count': 18761, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21678}], 'cache_tokens_details': [{'modality': 1, 'token_count': 18761}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 125}], 'thoughts_token_count': 1062}, 'finish_reason': 'STOP', 'avg_logprobs': -1.11036962890625, 'model_name': 'gemini-2.5-pro'} id='run--650eb2b8-1220-4fbe-920a-400493777778-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2023.0, 'end_line': 2035.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': 'c72103f4-0013-45b2-9da4-3b4afe0726e3', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 2036.0, 'end_line': 2045.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '6c228092-bb8c-44e8-8745-40cbbecab386', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 2046.0, 'end_line': 2054.0, 'relative_path': 'tests/expressions/tests.py'}, 'id': '41787740-8248-451d-89aa-29476a86aedf', 'type': 'tool_call'}] usage_metadata={'input_tokens': 21678, 'output_tokens': 125, 'total_tokens': 22865, 'input_token_details': {'cache_read': 18761}, 'output_token_details': {'reasoning': 1062}}
2025-12-23 21:46:42,916 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 22055, 'total_token_count': 25190, 'cached_content_token_count': 20543, 'prompt_tokens_details': [{'modality': 1, 'token_count': 22055}], 'cache_tokens_details': [{'modality': 1, 'token_count': 20543}], 'thoughts_token_count': 3135, 'candidates_token_count': 0, 'candidates_tokens_details': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-pro'} id='run--610f56e9-bb55-4ef7-9555-1631ace62cec-0' usage_metadata={'input_tokens': 22055, 'output_tokens': 0, 'total_tokens': 25190, 'input_token_details': {'cache_read': 20543}, 'output_token_details': {'reasoning': 3135}}
2025-12-23 21:46:42,919 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `tests/expressions/tests.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find 3 relevant test cases that demonstrate the buggy behavior of ExpressionWrapper in GROUP BY clauses. This file is the most likely place to find them.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/expressions/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import pickle
3. import unittest
4. import uuid
5. from copy import deepcopy
6. from unittest import mock
7. 
8. from django.core.exceptions import FieldError
9. from django.db import DatabaseError, NotSupportedError, connection
10. from django.db.models import (
11.     Avg, BooleanField, Case, CharField, Count, DateField, DateTimeField,
12.     DurationField, Exists, Expression, ExpressionList, ExpressionWrapper, F,
13.     Func, IntegerField, Max, Min, Model, OrderBy, OuterRef, Q, StdDev,
14.     Subquery, Sum, TimeField, UUIDField, Value, Variance, When,
15. )
16. from django.db.models.expressions import Col, Combinable, Random, RawSQL, Ref
17. from django.db.models.functions import (
18.     Coalesce, Concat, Left, Length, Lower, Substr, Upper,
19. )
20. from django.db.models.sql import constants
21. from django.db.models.sql.datastructures import Join
22. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
23. from django.test.utils import Approximate, isolate_apps
24. from django.utils.functional import SimpleLazyObject
25. 
26. from .models import (
27.     UUID, UUIDPK, Company, Employee, Experiment, Manager, Number,
28.     RemoteEmployee, Result, SimulationRun, Time,
29. )
30. 
31. 
32. class BasicExpressionsTests(TestCase):
33.     @classmethod
34.     def setUpTestData(cls):
35.         cls.example_inc = Company.objects.create(
36.             name="Example Inc.", num_employees=2300, num_chairs=5,
37.             ceo=Employee.objects.create(firstname="Joe", lastname="Smith", salary=10)
38.         )
39.         cls.foobar_ltd = Company.objects.create(
40.             name="Foobar Ltd.", num_employees=3, num_chairs=4, based_in_eu=True,
41.             ceo=Employee.objects.create(firstname="Frank", lastname="Meyer", salary=20)
42.         )
43.         cls.max = Employee.objects.create(firstname='Max', lastname='Mustermann', salary=30)
44.         cls.gmbh = Company.objects.create(name='Test GmbH', num_employees=32, num_chairs=1, ceo=cls.max)
45. 
46.     def setUp(self):
47.         self.company_query = Company.objects.values(
48.             "name", "num_employees", "num_chairs"
49.         ).order_by(
50.             "name", "num_employees", "num_chairs"
51.         )
52. 
53.     def test_annotate_values_aggregate(self):
54.         companies = Company.objects.annotate(
55.             salaries=F('ceo__salary'),
56.         ).values('num_employees', 'salaries').aggregate(
57.             result=Sum(
58.                 F('salaries') + F('num_employees'),
59.                 output_field=IntegerField()
60.             ),
61.         )
62.         self.assertEqual(companies['result'], 2395)
63. 
64.     def test_annotate_values_filter(self):
65.         companies = Company.objects.annotate(
66.             foo=RawSQL('%s', ['value']),
67.         ).filter(foo='value').order_by('name')
68.         self.assertQuerysetEqual(
69.             companies,
70.             ['<Company: Example Inc.>', '<Company: Foobar Ltd.>', '<Company: Test GmbH>'],
71.         )
72. 
73.     def test_annotate_values_count(self):
74.         companies = Company.objects.annotate(foo=RawSQL('%s', ['value']))
75.         self.assertEqual(companies.count(), 3)
76. 
77.     @skipUnlessDBFeature('supports_boolean_expr_in_select_clause')
78.     def test_filtering_on_annotate_that_uses_q(self):
79.         self.assertEqual(
80.             Company.objects.annotate(
81.                 num_employees_check=ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
82.             ).filter(num_employees_check=True).count(),
83.             2,
84.         )
85. 
86.     def test_filtering_on_q_that_is_boolean(self):
87.         self.assertEqual(
88.             Company.objects.filter(
89.                 ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
90.             ).count(),
91.             2,
92.         )
93. 
94.     def test_filtering_on_rawsql_that_is_boolean(self):
95.         self.assertEqual(
96.             Company.objects.filter(
97.                 RawSQL('num_employees > %s', (3,), output_field=BooleanField()),
98.             ).count(),
99.             2,
100.         )
101. 
102.     def test_filter_inter_attribute(self):
103.         # We can filter on attribute relationships on same model obj, e.g.
104.         # find companies where the number of employees is greater
105.         # than the number of chairs.
106.         self.assertSequenceEqual(
107.             self.company_query.filter(num_employees__gt=F("num_chairs")), [
108.                 {
109.                     "num_chairs": 5,
110.                     "name": "Example Inc.",
111.                     "num_employees": 2300,
112.                 },
113.                 {
114.                     "num_chairs": 1,
115.                     "name": "Test GmbH",
116.                     "num_employees": 32
117.                 },
118.             ],
119.         )
120. 
121.     def test_update(self):
122.         # We can set one field to have the value of another field
123.         # Make sure we have enough chairs
124.         self.company_query.update(num_chairs=F("num_employees"))
125.         self.assertSequenceEqual(
126.             self.company_query, [
127.                 {
128.                     "num_chairs": 2300,
129.                     "name": "Example Inc.",
130.                     "num_employees": 2300
131.                 },
132.                 {
133.                     "num_chairs": 3,
134.                     "name": "Foobar Ltd.",
135.                     "num_employees": 3
136.                 },
137.                 {
138.                     "num_chairs": 32,
139.                     "name": "Test GmbH",
140.                     "num_employees": 32
141.                 }
142.             ],
143.         )
144. 
145.     def test_arithmetic(self):
146.         # We can perform arithmetic operations in expressions
147.         # Make sure we have 2 spare chairs
148.         self.company_query.update(num_chairs=F("num_employees") + 2)
149.         self.assertSequenceEqual(
150.             self.company_query, [
151.                 {
152.                     'num_chairs': 2302,
153.                     'name': 'Example Inc.',
154.                     'num_employees': 2300
155.                 },
156.                 {
157.                     'num_chairs': 5,
158.                     'name': 'Foobar Ltd.',
159.                     'num_employees': 3
160.                 },
161.                 {
162.                     'num_chairs': 34,
163.                     'name': 'Test GmbH',
164.                     'num_employees': 32
165.                 }
166.             ],
167.         )
168. 
169.     def test_order_of_operations(self):
170.         # Law of order of operations is followed
171.         self.company_query.update(num_chairs=F('num_employees') + 2 * F('num_employees'))
172.         self.assertSequenceEqual(
173.             self.company_query, [
174.                 {
175.                     'num_chairs': 6900,
176.                     'name': 'Example Inc.',
177.                     'num_employees': 2300
178.                 },
179.                 {
180.                     'num_chairs': 9,
181.                     'name': 'Foobar Ltd.',
182.                     'num_employees': 3
183.                 },
184.                 {
185.                     'num_chairs': 96,
186.                     'name': 'Test GmbH',
187.                     'num_employees': 32
188.                 }
189.             ],
190.         )
191. 
192.     def test_parenthesis_priority(self):
193.         # Law of order of operations can be overridden by parentheses
194.         self.company_query.update(num_chairs=(F('num_employees') + 2) * F('num_employees'))
195.         self.assertSequenceEqual(
196.             self.company_query, [
197.                 {
198.                     'num_chairs': 5294600,
199.                     'name': 'Example Inc.',
200.                     'num_employees': 2300
201.                 },
202.                 {
203.                     'num_chairs': 15,
204.                     'name': 'Foobar Ltd.',
205.                     'num_employees': 3
206.                 },
207.                 {
208.                     'num_chairs': 1088,
209.                     'name': 'Test GmbH',
210.                     'num_employees': 32
211.                 }
212.             ],
213.         )
214. 
215.     def test_update_with_fk(self):
216.         # ForeignKey can become updated with the value of another ForeignKey.
217.         self.assertEqual(Company.objects.update(point_of_contact=F('ceo')), 3)
218.         self.assertQuerysetEqual(
219.             Company.objects.all(),
220.             ['Joe Smith', 'Frank Meyer', 'Max Mustermann'],
221.             lambda c: str(c.point_of_contact),
222.             ordered=False
223.         )
224. 
225.     def test_update_with_none(self):
226.         Number.objects.create(integer=1, float=1.0)
227.         Number.objects.create(integer=2)
228.         Number.objects.filter(float__isnull=False).update(float=Value(None))
229.         self.assertQuerysetEqual(
230.             Number.objects.all(),
231.             [None, None],
232.             lambda n: n.float,
233.             ordered=False
234.         )
235. 
236.     def test_filter_with_join(self):
237.         # F Expressions can also span joins
238.         Company.objects.update(point_of_contact=F('ceo'))
239.         c = Company.objects.first()
240.         c.point_of_contact = Employee.objects.create(firstname="Guido", lastname="van Rossum")
241.         c.save()
242. 
243.         self.assertQuerysetEqual(
244.             Company.objects.filter(ceo__firstname=F('point_of_contact__firstname')),
245.             ['Foobar Ltd.', 'Test GmbH'],
246.             lambda c: c.name,
247.             ordered=False
248.         )
249. 
250.         Company.objects.exclude(
251.             ceo__firstname=F("point_of_contact__firstname")
252.         ).update(name="foo")
253.         self.assertEqual(
254.             Company.objects.exclude(
255.                 ceo__firstname=F('point_of_contact__firstname')
256.             ).get().name,
257.             "foo",
258.         )
259. 
260.         msg = "Joined field references are not permitted in this query"
261.         with self.assertRaisesMessage(FieldError, msg):
262.             Company.objects.exclude(
263.                 ceo__firstname=F('point_of_contact__firstname')
264.             ).update(name=F('point_of_contact__lastname'))
265. 
266.     def test_object_update(self):
267.         # F expressions can be used to update attributes on single objects
268.         self.gmbh.num_employees = F('num_employees') + 4
269.         self.gmbh.save()
270.         self.gmbh.refresh_from_db()
271.         self.assertEqual(self.gmbh.num_employees, 36)
272. 
273.     def test_new_object_save(self):
274.         # We should be able to use Funcs when inserting new data
275.         test_co = Company(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
276.         test_co.save()
277.         test_co.refresh_from_db()
278.         self.assertEqual(test_co.name, "upper")
279. 
280.     def test_new_object_create(self):
281.         test_co = Company.objects.create(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
282.         test_co.refresh_from_db()
283.         self.assertEqual(test_co.name, "upper")
284. 
285.     def test_object_create_with_aggregate(self):
286.         # Aggregates are not allowed when inserting new data
287.         msg = 'Aggregate functions are not allowed in this query (num_employees=Max(Value(1))).'
288.         with self.assertRaisesMessage(FieldError, msg):
289.             Company.objects.create(
290.                 name='Company', num_employees=Max(Value(1)), num_chairs=1,
291.                 ceo=Employee.objects.create(firstname="Just", lastname="Doit", salary=30),
292.             )
293. 
294.     def test_object_update_fk(self):
295.         # F expressions cannot be used to update attributes which are foreign
296.         # keys, or attributes which involve joins.
297.         test_gmbh = Company.objects.get(pk=self.gmbh.pk)
298.         msg = 'F(ceo)": "Company.point_of_contact" must be a "Employee" instance.'
299.         with self.assertRaisesMessage(ValueError, msg):
300.             test_gmbh.point_of_contact = F('ceo')
301. 
302.         test_gmbh.point_of_contact = self.gmbh.ceo
303.         test_gmbh.save()
304.         test_gmbh.name = F('ceo__lastname')
305.         msg = 'Joined field references are not permitted in this query'
306.         with self.assertRaisesMessage(FieldError, msg):
307.             test_gmbh.save()
308. 
309.     def test_update_inherited_field_value(self):
310.         msg = 'Joined field references are not permitted in this query'
311.         with self.assertRaisesMessage(FieldError, msg):
312.             RemoteEmployee.objects.update(adjusted_salary=F('salary') * 5)
313. 
314.     def test_object_update_unsaved_objects(self):
315.         # F expressions cannot be used to update attributes on objects which do
316.         # not yet exist in the database
317.         acme = Company(name='The Acme Widget Co.', num_employees=12, num_chairs=5, ceo=self.max)
318.         acme.num_employees = F("num_employees") + 16
319.         msg = (
320.             'Failed to insert expression "Col(expressions_company, '
321.             'expressions.Company.num_employees) + Value(16)" on '
322.             'expressions.Company.num_employees. F() expressions can only be '
323.             'used to update, not to insert.'
324.         )
325.         with self.assertRaisesMessage(ValueError, msg):
326.             acme.save()
327. 
328.         acme.num_employees = 12
329.         acme.name = Lower(F('name'))
330.         msg = (
331.             'Failed to insert expression "Lower(Col(expressions_company, '
332.             'expressions.Company.name))" on expressions.Company.name. F() '
333.             'expressions can only be used to update, not to insert.'
334.         )
335.         with self.assertRaisesMessage(ValueError, msg):
336.             acme.save()
337. 
338.     def test_ticket_11722_iexact_lookup(self):
339.         Employee.objects.create(firstname="John", lastname="Doe")
340.         Employee.objects.create(firstname="Test", lastname="test")
341. 
342.         queryset = Employee.objects.filter(firstname__iexact=F('lastname'))
343.         self.assertQuerysetEqual(queryset, ["<Employee: Test test>"])
344. 
345.     def test_ticket_16731_startswith_lookup(self):
346.         Employee.objects.create(firstname="John", lastname="Doe")
347.         e2 = Employee.objects.create(firstname="Jack", lastname="Jackson")
348.         e3 = Employee.objects.create(firstname="Jack", lastname="jackson")
349.         self.assertSequenceEqual(
350.             Employee.objects.filter(lastname__startswith=F('firstname')),
351.             [e2, e3] if connection.features.has_case_insensitive_like else [e2]
352.         )
353.         qs = Employee.objects.filter(lastname__istartswith=F('firstname')).order_by('pk')
354.         self.assertSequenceEqual(qs, [e2, e3])
355. 
356.     def test_ticket_18375_join_reuse(self):
357.         # Reverse multijoin F() references and the lookup target the same join.
358.         # Pre #18375 the F() join was generated first and the lookup couldn't
359.         # reuse that join.
360.         qs = Employee.objects.filter(company_ceo_set__num_chairs=F('company_ceo_set__num_employees'))
361.         self.assertEqual(str(qs.query).count('JOIN'), 1)
362. 
363.     def test_ticket_18375_kwarg_ordering(self):
364.         # The next query was dict-randomization dependent - if the "gte=1"
365.         # was seen first, then the F() will reuse the join generated by the
366.         # gte lookup, if F() was seen first, then it generated a join the
367.         # other lookups could not reuse.
368.         qs = Employee.objects.filter(
369.             company_ceo_set__num_chairs=F('company_ceo_set__num_employees'),
370.             company_ceo_set__num_chairs__gte=1,
371.         )
372.         self.assertEqual(str(qs.query).count('JOIN'), 1)
373. 
374.     def test_ticket_18375_kwarg_ordering_2(self):
375.         # Another similar case for F() than above. Now we have the same join
376.         # in two filter kwargs, one in the lhs lookup, one in F. Here pre
377.         # #18375 the amount of joins generated was random if dict
378.         # randomization was enabled, that is the generated query dependent
379.         # on which clause was seen first.
380.         qs = Employee.objects.filter(
381.             company_ceo_set__num_employees=F('pk'),
382.             pk=F('company_ceo_set__num_employees')
383.         )
384.         self.assertEqual(str(qs.query).count('JOIN'), 1)
385. 
386.     def test_ticket_18375_chained_filters(self):
387.         # F() expressions do not reuse joins from previous filter.
388.         qs = Employee.objects.filter(
389.             company_ceo_set__num_employees=F('pk')
390.         ).filter(
391.             company_ceo_set__num_employees=F('company_ceo_set__num_employees')
392.         )
393.         self.assertEqual(str(qs.query).count('JOIN'), 2)
394. 
395.     def test_order_by_exists(self):
396.         mary = Employee.objects.create(firstname='Mary', lastname='Mustermann', salary=20)
397.         mustermanns_by_seniority = Employee.objects.filter(lastname='Mustermann').order_by(
398.             # Order by whether the employee is the CEO of a company
399.             Exists(Company.objects.filter(ceo=OuterRef('pk'))).desc()
400.         )
401.         self.assertSequenceEqual(mustermanns_by_seniority, [self.max, mary])
402. 
403.     def test_order_by_multiline_sql(self):
404.         raw_order_by = (
405.             RawSQL('''
406.                 CASE WHEN num_employees > 1000
407.                      THEN num_chairs
408.                      ELSE 0 END
409.             ''', []).desc(),
410.             RawSQL('''
411.                 CASE WHEN num_chairs > 1
412.                      THEN 1
413.                      ELSE 0 END
414.             ''', []).asc()
415.         )
416.         for qs in (
417.             Company.objects.all(),
418.             Company.objects.distinct(),
419.         ):
420.             with self.subTest(qs=qs):
421.                 self.assertSequenceEqual(
422.                     qs.order_by(*raw_order_by),
423.                     [self.example_inc, self.gmbh, self.foobar_ltd],
424.                 )
425. 
426.     def test_outerref(self):
427.         inner = Company.objects.filter(point_of_contact=OuterRef('pk'))
428.         msg = (
429.             'This queryset contains a reference to an outer query and may only '
430.             'be used in a subquery.'
431.         )
432.         with self.assertRaisesMessage(ValueError, msg):
433.             inner.exists()
434. 
435.         outer = Employee.objects.annotate(is_point_of_contact=Exists(inner))
436.         self.assertIs(outer.exists(), True)
437. 
438.     def test_exist_single_field_output_field(self):
439.         queryset = Company.objects.values('pk')
440.         self.assertIsInstance(Exists(queryset).output_field, BooleanField)
441. 
442.     def test_subquery(self):
443.         Company.objects.filter(name='Example Inc.').update(
444.             point_of_contact=Employee.objects.get(firstname='Joe', lastname='Smith'),
445.             ceo=self.max,
446.         )
447.         Employee.objects.create(firstname='Bob', lastname='Brown', salary=40)
448.         qs = Employee.objects.annotate(
449.             is_point_of_contact=Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
450.             is_not_point_of_contact=~Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
451.             is_ceo_of_small_company=Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
452.             is_ceo_small_2=~~Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
453.             largest_company=Subquery(Company.objects.order_by('-num_employees').filter(
454.                 Q(ceo=OuterRef('pk')) | Q(point_of_contact=OuterRef('pk'))
455.             ).values('name')[:1], output_field=CharField())
456.         ).values(
457.             'firstname',
458.             'is_point_of_contact',
459.             'is_not_point_of_contact',
460.             'is_ceo_of_small_company',
461.             'is_ceo_small_2',
462.             'largest_company',
463.         ).order_by('firstname')
464. 
465.         results = list(qs)
466.         # Could use Coalesce(subq, Value('')) instead except for the bug in
467.         # cx_Oracle mentioned in #23843.
468.         bob = results[0]
469.         if bob['largest_company'] == '' and connection.features.interprets_empty_strings_as_nulls:
470.             bob['largest_company'] = None
471. 
472.         self.assertEqual(results, [
473.             {
474.                 'firstname': 'Bob',
475.                 'is_point_of_contact': False,
476.                 'is_not_point_of_contact': True,
477.                 'is_ceo_of_small_company': False,
478.                 'is_ceo_small_2': False,
479.                 'largest_company': None,
480.             },
481.             {
482.                 'firstname': 'Frank',
483.                 'is_point_of_contact': False,
484.                 'is_not_point_of_contact': True,
485.                 'is_ceo_of_small_company': True,
486.                 'is_ceo_small_2': True,
487.                 'largest_company': 'Foobar Ltd.',
488.             },
489.             {
490.                 'firstname': 'Joe',
491.                 'is_point_of_contact': True,
492.                 'is_not_point_of_contact': False,
493.                 'is_ceo_of_small_company': False,
494.                 'is_ceo_small_2': False,
495.                 'largest_company': 'Example Inc.',
496.             },
497.             {
498.                 'firstname': 'Max',
499.                 'is_point_of_contact': False,
500.                 'is_not_point_of_contact': True,


File: tests/expressions/tests.py
Line number range: 1032 - 1050
Content:
1032.         )
1033.         self.assertQuerysetEqual(
1034.             Employee.objects.filter(firstname__iendswith=F('lastname')),
1035.             ["<Employee: Jean-Claude claude>"],
1036.             ordered=False,
1037.         )
1038. 
1039. 
1040. @isolate_apps('expressions')
1041. class SimpleExpressionTests(SimpleTestCase):
1042. 
1043.     def test_equal(self):
1044.         self.assertEqual(Expression(), Expression())
1045.         self.assertEqual(
1046.             Expression(IntegerField()),
1047.             Expression(output_field=IntegerField())
1048.         )
1049.         self.assertEqual(Expression(IntegerField()), mock.ANY)
1050.         self.assertNotEqual(


File: tests/expressions/tests.py
Line number range: 1051 - 1068
Content:
1051.             Expression(IntegerField()),
1052.             Expression(CharField())
1053.         )
1054. 
1055.         class TestModel(Model):
1056.             field = IntegerField()
1057.             other_field = IntegerField()
1058. 
1059.         self.assertNotEqual(
1060.             Expression(TestModel._meta.get_field('field')),
1061.             Expression(TestModel._meta.get_field('other_field')),
1062.         )
1063. 
1064.     def test_hash(self):
1065.         self.assertEqual(hash(Expression()), hash(Expression()))
1066.         self.assertEqual(
1067.             hash(Expression(IntegerField())),
1068.             hash(Expression(output_field=IntegerField()))


File: tests/expressions/tests.py
Line number range: 1069 - 1086
Content:
1069.         )
1070.         self.assertNotEqual(
1071.             hash(Expression(IntegerField())),
1072.             hash(Expression(CharField())),
1073.         )
1074. 
1075.         class TestModel(Model):
1076.             field = IntegerField()
1077.             other_field = IntegerField()
1078. 
1079.         self.assertNotEqual(
1080.             hash(Expression(TestModel._meta.get_field('field'))),
1081.             hash(Expression(TestModel._meta.get_field('other_field'))),
1082.         )
1083. 
1084. 
1085. class ExpressionsNumericTests(TestCase):


File: tests/expressions/tests.py
Line number range: 1503 - 1522
Content:
1503.         queryset = Experiment.objects.annotate(
1504.             difference=ExpressionWrapper(
1505.                 subquery - F('completed'), output_field=DurationField(),
1506.             ),
1507.         ).filter(difference=datetime.timedelta())
1508.         self.assertTrue(queryset.exists())
1509. 
1510.     @skipUnlessDBFeature('supports_temporal_subtraction')
1511.     def test_date_case_subtraction(self):
1512.         queryset = Experiment.objects.annotate(
1513.             date_case=Case(
1514.                 When(Q(name='e0'), then=F('completed')),
1515.                 output_field=DateField(),
1516.             ),
1517.             completed_value=Value(
1518.                 self.e0.completed,
1519.                 output_field=DateField(),
1520.             ),
1521.             difference=ExpressionWrapper(
1522.                 F('date_case') - F('completed_value'), output_field=DurationField(),


File: tests/expressions/tests.py
Line number range: 1524 - 1541
Content:
1524.         ).filter(difference=datetime.timedelta())
1525.         self.assertEqual(queryset.get(), self.e0)
1526. 
1527.     @skipUnlessDBFeature('supports_temporal_subtraction')
1528.     def test_time_subtraction(self):
1529.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1530.         queryset = Time.objects.annotate(
1531.             difference=ExpressionWrapper(
1532.                 F('time') - Value(datetime.time(11, 15, 0), output_field=TimeField()),
1533.                 output_field=DurationField(),
1534.             )
1535.         )
1536.         self.assertEqual(
1537.             queryset.get().difference,
1538.             datetime.timedelta(hours=1, minutes=15, seconds=15, microseconds=2345)
1539.         )
1540. 
1541.         queryset = Time.objects.annotate(difference=ExpressionWrapper(


File: tests/expressions/tests.py
Line number range: 1543 - 1560
Content:
1543.             output_field=DurationField(),
1544.         ))
1545.         self.assertIsNone(queryset.first().difference)
1546. 
1547.         queryset = Time.objects.annotate(shifted=ExpressionWrapper(
1548.             F('time') - Value(None, output_field=DurationField()),
1549.             output_field=TimeField(),
1550.         ))
1551.         self.assertIsNone(queryset.first().shifted)
1552. 
1553.     @skipUnlessDBFeature('supports_temporal_subtraction')
1554.     def test_time_subquery_subtraction(self):
1555.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1556.         subquery = Time.objects.filter(pk=OuterRef('pk')).values('time')
1557.         queryset = Time.objects.annotate(
1558.             difference=ExpressionWrapper(
1559.                 subquery - F('time'), output_field=DurationField(),
1560.             ),


File: tests/expressions/tests.py
Line number range: 1636 - 1653
Content:
1636.         ).annotate(
1637.             start_sub_minutes=F('start_sub_seconds') + datetime.timedelta(minutes=-30),
1638.         ).annotate(
1639.             start_sub_hours=F('start_sub_minutes') + datetime.timedelta(hours=-2),
1640.         ).annotate(
1641.             new_start=F('start_sub_hours') + datetime.timedelta(days=-2),
1642.         )
1643.         expected_start = datetime.datetime(2010, 6, 23, 9, 45, 0)
1644.         # subtract 30 microseconds
1645.         experiments = experiments.annotate(new_start=F('new_start') + datetime.timedelta(microseconds=-30))
1646.         expected_start += datetime.timedelta(microseconds=+746970)
1647.         experiments.update(start=F('new_start'))
1648.         e0 = Experiment.objects.get(name='e0')
1649.         self.assertEqual(e0.start, expected_start)
1650. 
1651. 
1652. class ValueTests(TestCase):
1653.     def test_update_TimeField_using_Value(self):


File: tests/expressions/tests.py
Line number range: 1653 - 1669
Content:
1653.     def test_update_TimeField_using_Value(self):
1654.         Time.objects.create()
1655.         Time.objects.update(time=Value(datetime.time(1), output_field=TimeField()))
1656.         self.assertEqual(Time.objects.get().time, datetime.time(1))
1657. 
1658.     def test_update_UUIDField_using_Value(self):
1659.         UUID.objects.create()
1660.         UUID.objects.update(uuid=Value(uuid.UUID('12345678901234567890123456789012'), output_field=UUIDField()))
1661.         self.assertEqual(UUID.objects.get().uuid, uuid.UUID('12345678901234567890123456789012'))
1662. 
1663.     def test_deconstruct(self):
1664.         value = Value('name')
1665.         path, args, kwargs = value.deconstruct()
1666.         self.assertEqual(path, 'django.db.models.expressions.Value')
1667.         self.assertEqual(args, (value.value,))
1668.         self.assertEqual(kwargs, {})


File: tests/expressions/tests.py
Line number range: 1669 - 1685
Content:
1669. 
1670.     def test_deconstruct_output_field(self):
1671.         value = Value('name', output_field=CharField())
1672.         path, args, kwargs = value.deconstruct()
1673.         self.assertEqual(path, 'django.db.models.expressions.Value')
1674.         self.assertEqual(args, (value.value,))
1675.         self.assertEqual(len(kwargs), 1)
1676.         self.assertEqual(kwargs['output_field'].deconstruct(), CharField().deconstruct())
1677. 
1678.     def test_equal(self):
1679.         value = Value('name')
1680.         self.assertEqual(value, Value('name'))
1681.         self.assertNotEqual(value, Value('username'))
1682. 
1683.     def test_hash(self):
1684.         d = {Value('name'): 'Bob'}
1685.         self.assertIn(Value('name'), d)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 21:47:20,758 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1, end_line=500), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1032, end_line=1050), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1051, end_line=1068), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1069, end_line=1086), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1503, end_line=1522), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1524, end_line=1541), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1543, end_line=1560), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1636, end_line=1653), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1653, end_line=1669), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the full content of the file `tests/expressions/tests.py`.\n2. Extended relevance:\n   - This context is a part of the requested file. Providing all available parts of the file is necessary to fulfill the user's request.", relative_path='tests/expressions/tests.py', start_line=1669, end_line=1685)]
2025-12-23 21:47:20,763 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 10 contexts to memory for query: Please provide the full content of the file `tests/expressions/tests.py`.
2025-12-23 21:47:20,763 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 21:47:20,763 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 21:47:20,764 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 10 new contexts to 0 existing contexts
2025-12-23 21:47:20,764 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 10 total contexts (removed 0 duplicates)
2025-12-23 21:47:20,765 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Constant expressions of an ExpressionWrapper object are incorrectly placed at the GROUP BY clause

Description: Description
	
I have a function that expects an arbitrary Query expression and constructs a query on a Postgres db
 def execQuery(expr):
	 expr = ExpressionWrapper(expr, output_field=IntegerField())
	 return Model.objects.annotate(expr_res=expr).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
However, when the given expr is a constant expression (e.g., Value(3)), Django generates an SQL query that contains this constant expression in its GROUP BY clause.
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a", 3
This leads to an exception because in Postgres, the query above is invalid:
django.db.utils.ProgrammingError: aggregate functions are not allowed in GROUP BY
LINE 1: SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."col...
Note that when the given query expression is not wrapped by the ExpressionWrapper object, Django correctly identifies and omits the constant from the GROUP BY clause. For example, the query below runs correctly.
 def execQuery(expr):
	 return Model.objects.annotate(expr_res=Value(3, output_field=IntegerField())).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a"

Patch information:
diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py
index c1a76584f0..aface75cff 100644
--- a/django/db/models/expressions.py
+++ b/django/db/models/expressions.py
@@ -863,6 +863,9 @@ class ExpressionWrapper(Expression):
     def get_source_expressions(self):
         return [self.expression]
 
+    def get_group_by_cols(self, alias=None):
+        return self.expression.get_group_by_cols(alias)
+
     def as_sql(self, compiler, connection):
         return self.expression.as_sql(compiler, connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file `tests/expressions/tests.py`.
Extra Requirements: 
Purpose: I need to find 3 relevant test cases that demonstrate the buggy behavior of ExpressionWrapper in GROUP BY clauses. This file is the most likely place to find them.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/expressions/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import pickle
3. import unittest
4. import uuid
5. from copy import deepcopy
6. from unittest import mock
7. 
8. from django.core.exceptions import FieldError
9. from django.db import DatabaseError, NotSupportedError, connection
10. from django.db.models import (
11.     Avg, BooleanField, Case, CharField, Count, DateField, DateTimeField,
12.     DurationField, Exists, Expression, ExpressionList, ExpressionWrapper, F,
13.     Func, IntegerField, Max, Min, Model, OrderBy, OuterRef, Q, StdDev,
14.     Subquery, Sum, TimeField, UUIDField, Value, Variance, When,
15. )
16. from django.db.models.expressions import Col, Combinable, Random, RawSQL, Ref
17. from django.db.models.functions import (
18.     Coalesce, Concat, Left, Length, Lower, Substr, Upper,
19. )
20. from django.db.models.sql import constants
21. from django.db.models.sql.datastructures import Join
22. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
23. from django.test.utils import Approximate, isolate_apps
24. from django.utils.functional import SimpleLazyObject
25. 
26. from .models import (
27.     UUID, UUIDPK, Company, Employee, Experiment, Manager, Number,
28.     RemoteEmployee, Result, SimulationRun, Time,
29. )
30. 
31. 
32. class BasicExpressionsTests(TestCase):
33.     @classmethod
34.     def setUpTestData(cls):
35.         cls.example_inc = Company.objects.create(
36.             name="Example Inc.", num_employees=2300, num_chairs=5,
37.             ceo=Employee.objects.create(firstname="Joe", lastname="Smith", salary=10)
38.         )
39.         cls.foobar_ltd = Company.objects.create(
40.             name="Foobar Ltd.", num_employees=3, num_chairs=4, based_in_eu=True,
41.             ceo=Employee.objects.create(firstname="Frank", lastname="Meyer", salary=20)
42.         )
43.         cls.max = Employee.objects.create(firstname='Max', lastname='Mustermann', salary=30)
44.         cls.gmbh = Company.objects.create(name='Test GmbH', num_employees=32, num_chairs=1, ceo=cls.max)
45. 
46.     def setUp(self):
47.         self.company_query = Company.objects.values(
48.             "name", "num_employees", "num_chairs"
49.         ).order_by(
50.             "name", "num_employees", "num_chairs"
51.         )
52. 
53.     def test_annotate_values_aggregate(self):
54.         companies = Company.objects.annotate(
55.             salaries=F('ceo__salary'),
56.         ).values('num_employees', 'salaries').aggregate(
57.             result=Sum(
58.                 F('salaries') + F('num_employees'),
59.                 output_field=IntegerField()
60.             ),
61.         )
62.         self.assertEqual(companies['result'], 2395)
63. 
64.     def test_annotate_values_filter(self):
65.         companies = Company.objects.annotate(
66.             foo=RawSQL('%s', ['value']),
67.         ).filter(foo='value').order_by('name')
68.         self.assertQuerysetEqual(
69.             companies,
70.             ['<Company: Example Inc.>', '<Company: Foobar Ltd.>', '<Company: Test GmbH>'],
71.         )
72. 
73.     def test_annotate_values_count(self):
74.         companies = Company.objects.annotate(foo=RawSQL('%s', ['value']))
75.         self.assertEqual(companies.count(), 3)
76. 
77.     @skipUnlessDBFeature('supports_boolean_expr_in_select_clause')
78.     def test_filtering_on_annotate_that_uses_q(self):
79.         self.assertEqual(
80.             Company.objects.annotate(
81.                 num_employees_check=ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
82.             ).filter(num_employees_check=True).count(),
83.             2,
84.         )
85. 
86.     def test_filtering_on_q_that_is_boolean(self):
87.         self.assertEqual(
88.             Company.objects.filter(
89.                 ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
90.             ).count(),
91.             2,
92.         )
93. 
94.     def test_filtering_on_rawsql_that_is_boolean(self):
95.         self.assertEqual(
96.             Company.objects.filter(
97.                 RawSQL('num_employees > %s', (3,), output_field=BooleanField()),
98.             ).count(),
99.             2,
100.         )
101. 
102.     def test_filter_inter_attribute(self):
103.         # We can filter on attribute relationships on same model obj, e.g.
104.         # find companies where the number of employees is greater
105.         # than the number of chairs.
106.         self.assertSequenceEqual(
107.             self.company_query.filter(num_employees__gt=F("num_chairs")), [
108.                 {
109.                     "num_chairs": 5,
110.                     "name": "Example Inc.",
111.                     "num_employees": 2300,
112.                 },
113.                 {
114.                     "num_chairs": 1,
115.                     "name": "Test GmbH",
116.                     "num_employees": 32
117.                 },
118.             ],
119.         )
120. 
121.     def test_update(self):
122.         # We can set one field to have the value of another field
123.         # Make sure we have enough chairs
124.         self.company_query.update(num_chairs=F("num_employees"))
125.         self.assertSequenceEqual(
126.             self.company_query, [
127.                 {
128.                     "num_chairs": 2300,
129.                     "name": "Example Inc.",
130.                     "num_employees": 2300
131.                 },
132.                 {
133.                     "num_chairs": 3,
134.                     "name": "Foobar Ltd.",
135.                     "num_employees": 3
136.                 },
137.                 {
138.                     "num_chairs": 32,
139.                     "name": "Test GmbH",
140.                     "num_employees": 32
141.                 }
142.             ],
143.         )
144. 
145.     def test_arithmetic(self):
146.         # We can perform arithmetic operations in expressions
147.         # Make sure we have 2 spare chairs
148.         self.company_query.update(num_chairs=F("num_employees") + 2)
149.         self.assertSequenceEqual(
150.             self.company_query, [
151.                 {
152.                     'num_chairs': 2302,
153.                     'name': 'Example Inc.',
154.                     'num_employees': 2300
155.                 },
156.                 {
157.                     'num_chairs': 5,
158.                     'name': 'Foobar Ltd.',
159.                     'num_employees': 3
160.                 },
161.                 {
162.                     'num_chairs': 34,
163.                     'name': 'Test GmbH',
164.                     'num_employees': 32
165.                 }
166.             ],
167.         )
168. 
169.     def test_order_of_operations(self):
170.         # Law of order of operations is followed
171.         self.company_query.update(num_chairs=F('num_employees') + 2 * F('num_employees'))
172.         self.assertSequenceEqual(
173.             self.company_query, [
174.                 {
175.                     'num_chairs': 6900,
176.                     'name': 'Example Inc.',
177.                     'num_employees': 2300
178.                 },
179.                 {
180.                     'num_chairs': 9,
181.                     'name': 'Foobar Ltd.',
182.                     'num_employees': 3
183.                 },
184.                 {
185.                     'num_chairs': 96,
186.                     'name': 'Test GmbH',
187.                     'num_employees': 32
188.                 }
189.             ],
190.         )
191. 
192.     def test_parenthesis_priority(self):
193.         # Law of order of operations can be overridden by parentheses
194.         self.company_query.update(num_chairs=(F('num_employees') + 2) * F('num_employees'))
195.         self.assertSequenceEqual(
196.             self.company_query, [
197.                 {
198.                     'num_chairs': 5294600,
199.                     'name': 'Example Inc.',
200.                     'num_employees': 2300
201.                 },
202.                 {
203.                     'num_chairs': 15,
204.                     'name': 'Foobar Ltd.',
205.                     'num_employees': 3
206.                 },
207.                 {
208.                     'num_chairs': 1088,
209.                     'name': 'Test GmbH',
210.                     'num_employees': 32
211.                 }
212.             ],
213.         )
214. 
215.     def test_update_with_fk(self):
216.         # ForeignKey can become updated with the value of another ForeignKey.
217.         self.assertEqual(Company.objects.update(point_of_contact=F('ceo')), 3)
218.         self.assertQuerysetEqual(
219.             Company.objects.all(),
220.             ['Joe Smith', 'Frank Meyer', 'Max Mustermann'],
221.             lambda c: str(c.point_of_contact),
222.             ordered=False
223.         )
224. 
225.     def test_update_with_none(self):
226.         Number.objects.create(integer=1, float=1.0)
227.         Number.objects.create(integer=2)
228.         Number.objects.filter(float__isnull=False).update(float=Value(None))
229.         self.assertQuerysetEqual(
230.             Number.objects.all(),
231.             [None, None],
232.             lambda n: n.float,
233.             ordered=False
234.         )
235. 
236.     def test_filter_with_join(self):
237.         # F Expressions can also span joins
238.         Company.objects.update(point_of_contact=F('ceo'))
239.         c = Company.objects.first()
240.         c.point_of_contact = Employee.objects.create(firstname="Guido", lastname="van Rossum")
241.         c.save()
242. 
243.         self.assertQuerysetEqual(
244.             Company.objects.filter(ceo__firstname=F('point_of_contact__firstname')),
245.             ['Foobar Ltd.', 'Test GmbH'],
246.             lambda c: c.name,
247.             ordered=False
248.         )
249. 
250.         Company.objects.exclude(
251.             ceo__firstname=F("point_of_contact__firstname")
252.         ).update(name="foo")
253.         self.assertEqual(
254.             Company.objects.exclude(
255.                 ceo__firstname=F('point_of_contact__firstname')
256.             ).get().name,
257.             "foo",
258.         )
259. 
260.         msg = "Joined field references are not permitted in this query"
261.         with self.assertRaisesMessage(FieldError, msg):
262.             Company.objects.exclude(
263.                 ceo__firstname=F('point_of_contact__firstname')
264.             ).update(name=F('point_of_contact__lastname'))
265. 
266.     def test_object_update(self):
267.         # F expressions can be used to update attributes on single objects
268.         self.gmbh.num_employees = F('num_employees') + 4
269.         self.gmbh.save()
270.         self.gmbh.refresh_from_db()
271.         self.assertEqual(self.gmbh.num_employees, 36)
272. 
273.     def test_new_object_save(self):
274.         # We should be able to use Funcs when inserting new data
275.         test_co = Company(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
276.         test_co.save()
277.         test_co.refresh_from_db()
278.         self.assertEqual(test_co.name, "upper")
279. 
280.     def test_new_object_create(self):
281.         test_co = Company.objects.create(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
282.         test_co.refresh_from_db()
283.         self.assertEqual(test_co.name, "upper")
284. 
285.     def test_object_create_with_aggregate(self):
286.         # Aggregates are not allowed when inserting new data
287.         msg = 'Aggregate functions are not allowed in this query (num_employees=Max(Value(1))).'
288.         with self.assertRaisesMessage(FieldError, msg):
289.             Company.objects.create(
290.                 name='Company', num_employees=Max(Value(1)), num_chairs=1,
291.                 ceo=Employee.objects.create(firstname="Just", lastname="Doit", salary=30),
292.             )
293. 
294.     def test_object_update_fk(self):
295.         # F expressions cannot be used to update attributes which are foreign
296.         # keys, or attributes which involve joins.
297.         test_gmbh = Company.objects.get(pk=self.gmbh.pk)
298.         msg = 'F(ceo)": "Company.point_of_contact" must be a "Employee" instance.'
299.         with self.assertRaisesMessage(ValueError, msg):
300.             test_gmbh.point_of_contact = F('ceo')
301. 
302.         test_gmbh.point_of_contact = self.gmbh.ceo
303.         test_gmbh.save()
304.         test_gmbh.name = F('ceo__lastname')
305.         msg = 'Joined field references are not permitted in this query'
306.         with self.assertRaisesMessage(FieldError, msg):
307.             test_gmbh.save()
308. 
309.     def test_update_inherited_field_value(self):
310.         msg = 'Joined field references are not permitted in this query'
311.         with self.assertRaisesMessage(FieldError, msg):
312.             RemoteEmployee.objects.update(adjusted_salary=F('salary') * 5)
313. 
314.     def test_object_update_unsaved_objects(self):
315.         # F expressions cannot be used to update attributes on objects which do
316.         # not yet exist in the database
317.         acme = Company(name='The Acme Widget Co.', num_employees=12, num_chairs=5, ceo=self.max)
318.         acme.num_employees = F("num_employees") + 16
319.         msg = (
320.             'Failed to insert expression "Col(expressions_company, '
321.             'expressions.Company.num_employees) + Value(16)" on '
322.             'expressions.Company.num_employees. F() expressions can only be '
323.             'used to update, not to insert.'
324.         )
325.         with self.assertRaisesMessage(ValueError, msg):
326.             acme.save()
327. 
328.         acme.num_employees = 12
329.         acme.name = Lower(F('name'))
330.         msg = (
331.             'Failed to insert expression "Lower(Col(expressions_company, '
332.             'expressions.Company.name))" on expressions.Company.name. F() '
333.             'expressions can only be used to update, not to insert.'
334.         )
335.         with self.assertRaisesMessage(ValueError, msg):
336.             acme.save()
337. 
338.     def test_ticket_11722_iexact_lookup(self):
339.         Employee.objects.create(firstname="John", lastname="Doe")
340.         Employee.objects.create(firstname="Test", lastname="test")
341. 
342.         queryset = Employee.objects.filter(firstname__iexact=F('lastname'))
343.         self.assertQuerysetEqual(queryset, ["<Employee: Test test>"])
344. 
345.     def test_ticket_16731_startswith_lookup(self):
346.         Employee.objects.create(firstname="John", lastname="Doe")
347.         e2 = Employee.objects.create(firstname="Jack", lastname="Jackson")
348.         e3 = Employee.objects.create(firstname="Jack", lastname="jackson")
349.         self.assertSequenceEqual(
350.             Employee.objects.filter(lastname__startswith=F('firstname')),
351.             [e2, e3] if connection.features.has_case_insensitive_like else [e2]
352.         )
353.         qs = Employee.objects.filter(lastname__istartswith=F('firstname')).order_by('pk')
354.         self.assertSequenceEqual(qs, [e2, e3])
355. 
356.     def test_ticket_18375_join_reuse(self):
357.         # Reverse multijoin F() references and the lookup target the same join.
358.         # Pre #18375 the F() join was generated first and the lookup couldn't
359.         # reuse that join.
360.         qs = Employee.objects.filter(company_ceo_set__num_chairs=F('company_ceo_set__num_employees'))
361.         self.assertEqual(str(qs.query).count('JOIN'), 1)
362. 
363.     def test_ticket_18375_kwarg_ordering(self):
364.         # The next query was dict-randomization dependent - if the "gte=1"
365.         # was seen first, then the F() will reuse the join generated by the
366.         # gte lookup, if F() was seen first, then it generated a join the
367.         # other lookups could not reuse.
368.         qs = Employee.objects.filter(
369.             company_ceo_set__num_chairs=F('company_ceo_set__num_employees'),
370.             company_ceo_set__num_chairs__gte=1,
371.         )
372.         self.assertEqual(str(qs.query).count('JOIN'), 1)
373. 
374.     def test_ticket_18375_kwarg_ordering_2(self):
375.         # Another similar case for F() than above. Now we have the same join
376.         # in two filter kwargs, one in the lhs lookup, one in F. Here pre
377.         # #18375 the amount of joins generated was random if dict
378.         # randomization was enabled, that is the generated query dependent
379.         # on which clause was seen first.
380.         qs = Employee.objects.filter(
381.             company_ceo_set__num_employees=F('pk'),
382.             pk=F('company_ceo_set__num_employees')
383.         )
384.         self.assertEqual(str(qs.query).count('JOIN'), 1)
385. 
386.     def test_ticket_18375_chained_filters(self):
387.         # F() expressions do not reuse joins from previous filter.
388.         qs = Employee.objects.filter(
389.             company_ceo_set__num_employees=F('pk')
390.         ).filter(
391.             company_ceo_set__num_employees=F('company_ceo_set__num_employees')
392.         )
393.         self.assertEqual(str(qs.query).count('JOIN'), 2)
394. 
395.     def test_order_by_exists(self):
396.         mary = Employee.objects.create(firstname='Mary', lastname='Mustermann', salary=20)
397.         mustermanns_by_seniority = Employee.objects.filter(lastname='Mustermann').order_by(
398.             # Order by whether the employee is the CEO of a company
399.             Exists(Company.objects.filter(ceo=OuterRef('pk'))).desc()
400.         )
401.         self.assertSequenceEqual(mustermanns_by_seniority, [self.max, mary])
402. 
403.     def test_order_by_multiline_sql(self):
404.         raw_order_by = (
405.             RawSQL('''
406.                 CASE WHEN num_employees > 1000
407.                      THEN num_chairs
408.                      ELSE 0 END
409.             ''', []).desc(),
410.             RawSQL('''
411.                 CASE WHEN num_chairs > 1
412.                      THEN 1
413.                      ELSE 0 END
414.             ''', []).asc()
415.         )
416.         for qs in (
417.             Company.objects.all(),
418.             Company.objects.distinct(),
419.         ):
420.             with self.subTest(qs=qs):
421.                 self.assertSequenceEqual(
422.                     qs.order_by(*raw_order_by),
423.                     [self.example_inc, self.gmbh, self.foobar_ltd],
424.                 )
425. 
426.     def test_outerref(self):
427.         inner = Company.objects.filter(point_of_contact=OuterRef('pk'))
428.         msg = (
429.             'This queryset contains a reference to an outer query and may only '
430.             'be used in a subquery.'
431.         )
432.         with self.assertRaisesMessage(ValueError, msg):
433.             inner.exists()
434. 
435.         outer = Employee.objects.annotate(is_point_of_contact=Exists(inner))
436.         self.assertIs(outer.exists(), True)
437. 
438.     def test_exist_single_field_output_field(self):
439.         queryset = Company.objects.values('pk')
440.         self.assertIsInstance(Exists(queryset).output_field, BooleanField)
441. 
442.     def test_subquery(self):
443.         Company.objects.filter(name='Example Inc.').update(
444.             point_of_contact=Employee.objects.get(firstname='Joe', lastname='Smith'),
445.             ceo=self.max,
446.         )
447.         Employee.objects.create(firstname='Bob', lastname='Brown', salary=40)
448.         qs = Employee.objects.annotate(
449.             is_point_of_contact=Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
450.             is_not_point_of_contact=~Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
451.             is_ceo_of_small_company=Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
452.             is_ceo_small_2=~~Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
453.             largest_company=Subquery(Company.objects.order_by('-num_employees').filter(
454.                 Q(ceo=OuterRef('pk')) | Q(point_of_contact=OuterRef('pk'))
455.             ).values('name')[:1], output_field=CharField())
456.         ).values(
457.             'firstname',
458.             'is_point_of_contact',
459.             'is_not_point_of_contact',
460.             'is_ceo_of_small_company',
461.             'is_ceo_small_2',
462.             'largest_company',
463.         ).order_by('firstname')
464. 
465.         results = list(qs)
466.         # Could use Coalesce(subq, Value('')) instead except for the bug in
467.         # cx_Oracle mentioned in #23843.
468.         bob = results[0]
469.         if bob['largest_company'] == '' and connection.features.interprets_empty_strings_as_nulls:
470.             bob['largest_company'] = None
471. 
472.         self.assertEqual(results, [
473.             {
474.                 'firstname': 'Bob',
475.                 'is_point_of_contact': False,
476.                 'is_not_point_of_contact': True,
477.                 'is_ceo_of_small_company': False,
478.                 'is_ceo_small_2': False,
479.                 'largest_company': None,
480.             },
481.             {
482.                 'firstname': 'Frank',
483.                 'is_point_of_contact': False,
484.                 'is_not_point_of_contact': True,
485.                 'is_ceo_of_small_company': True,
486.                 'is_ceo_small_2': True,
487.                 'largest_company': 'Foobar Ltd.',
488.             },
489.             {
490.                 'firstname': 'Joe',
491.                 'is_point_of_contact': True,
492.                 'is_not_point_of_contact': False,
493.                 'is_ceo_of_small_company': False,
494.                 'is_ceo_small_2': False,
495.                 'largest_company': 'Example Inc.',
496.             },
497.             {
498.                 'firstname': 'Max',
499.                 'is_point_of_contact': False,
500.                 'is_not_point_of_contact': True,


File: tests/expressions/tests.py
Line number range: 1032 - 1050
Content:
1032.         )
1033.         self.assertQuerysetEqual(
1034.             Employee.objects.filter(firstname__iendswith=F('lastname')),
1035.             ["<Employee: Jean-Claude claude>"],
1036.             ordered=False,
1037.         )
1038. 
1039. 
1040. @isolate_apps('expressions')
1041. class SimpleExpressionTests(SimpleTestCase):
1042. 
1043.     def test_equal(self):
1044.         self.assertEqual(Expression(), Expression())
1045.         self.assertEqual(
1046.             Expression(IntegerField()),
1047.             Expression(output_field=IntegerField())
1048.         )
1049.         self.assertEqual(Expression(IntegerField()), mock.ANY)
1050.         self.assertNotEqual(


File: tests/expressions/tests.py
Line number range: 1051 - 1068
Content:
1051.             Expression(IntegerField()),
1052.             Expression(CharField())
1053.         )
1054. 
1055.         class TestModel(Model):
1056.             field = IntegerField()
1057.             other_field = IntegerField()
1058. 
1059.         self.assertNotEqual(
1060.             Expression(TestModel._meta.get_field('field')),
1061.             Expression(TestModel._meta.get_field('other_field')),
1062.         )
1063. 
1064.     def test_hash(self):
1065.         self.assertEqual(hash(Expression()), hash(Expression()))
1066.         self.assertEqual(
1067.             hash(Expression(IntegerField())),
1068.             hash(Expression(output_field=IntegerField()))


File: tests/expressions/tests.py
Line number range: 1069 - 1086
Content:
1069.         )
1070.         self.assertNotEqual(
1071.             hash(Expression(IntegerField())),
1072.             hash(Expression(CharField())),
1073.         )
1074. 
1075.         class TestModel(Model):
1076.             field = IntegerField()
1077.             other_field = IntegerField()
1078. 
1079.         self.assertNotEqual(
1080.             hash(Expression(TestModel._meta.get_field('field'))),
1081.             hash(Expression(TestModel._meta.get_field('other_field'))),
1082.         )
1083. 
1084. 
1085. class ExpressionsNumericTests(TestCase):
1086. 


File: tests/expressions/tests.py
Line number range: 1503 - 1522
Content:
1503.         queryset = Experiment.objects.annotate(
1504.             difference=ExpressionWrapper(
1505.                 subquery - F('completed'), output_field=DurationField(),
1506.             ),
1507.         ).filter(difference=datetime.timedelta())
1508.         self.assertTrue(queryset.exists())
1509. 
1510.     @skipUnlessDBFeature('supports_temporal_subtraction')
1511.     def test_date_case_subtraction(self):
1512.         queryset = Experiment.objects.annotate(
1513.             date_case=Case(
1514.                 When(Q(name='e0'), then=F('completed')),
1515.                 output_field=DateField(),
1516.             ),
1517.             completed_value=Value(
1518.                 self.e0.completed,
1519.                 output_field=DateField(),
1520.             ),
1521.             difference=ExpressionWrapper(
1522.                 F('date_case') - F('completed_value'), output_field=DurationField(),


File: tests/expressions/tests.py
Line number range: 1524 - 1541
Content:
1524.         ).filter(difference=datetime.timedelta())
1525.         self.assertEqual(queryset.get(), self.e0)
1526. 
1527.     @skipUnlessDBFeature('supports_temporal_subtraction')
1528.     def test_time_subtraction(self):
1529.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1530.         queryset = Time.objects.annotate(
1531.             difference=ExpressionWrapper(
1532.                 F('time') - Value(datetime.time(11, 15, 0), output_field=TimeField()),
1533.                 output_field=DurationField(),
1534.             )
1535.         )
1536.         self.assertEqual(
1537.             queryset.get().difference,
1538.             datetime.timedelta(hours=1, minutes=15, seconds=15, microseconds=2345)
1539.         )
1540. 
1541.         queryset = Time.objects.annotate(difference=ExpressionWrapper(


File: tests/expressions/tests.py
Line number range: 1543 - 1560
Content:
1543.             output_field=DurationField(),
1544.         ))
1545.         self.assertIsNone(queryset.first().difference)
1546. 
1547.         queryset = Time.objects.annotate(shifted=ExpressionWrapper(
1548.             F('time') - Value(None, output_field=DurationField()),
1549.             output_field=TimeField(),
1550.         ))
1551.         self.assertIsNone(queryset.first().shifted)
1552. 
1553.     @skipUnlessDBFeature('supports_temporal_subtraction')
1554.     def test_time_subquery_subtraction(self):
1555.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1556.         subquery = Time.objects.filter(pk=OuterRef('pk')).values('time')
1557.         queryset = Time.objects.annotate(
1558.             difference=ExpressionWrapper(
1559.                 subquery - F('time'), output_field=DurationField(),
1560.             ),


File: tests/expressions/tests.py
Line number range: 1636 - 1653
Content:
1636.         ).annotate(
1637.             start_sub_minutes=F('start_sub_seconds') + datetime.timedelta(minutes=-30),
1638.         ).annotate(
1639.             start_sub_hours=F('start_sub_minutes') + datetime.timedelta(hours=-2),
1640.         ).annotate(
1641.             new_start=F('start_sub_hours') + datetime.timedelta(days=-2),
1642.         )
1643.         expected_start = datetime.datetime(2010, 6, 23, 9, 45, 0)
1644.         # subtract 30 microseconds
1645.         experiments = experiments.annotate(new_start=F('new_start') + datetime.timedelta(microseconds=-30))
1646.         expected_start += datetime.timedelta(microseconds=+746970)
1647.         experiments.update(start=F('new_start'))
1648.         e0 = Experiment.objects.get(name='e0')
1649.         self.assertEqual(e0.start, expected_start)
1650. 
1651. 
1652. class ValueTests(TestCase):
1653.     def test_update_TimeField_using_Value(self):


File: tests/expressions/tests.py
Line number range: 1653 - 1669
Content:
1653.     def test_update_TimeField_using_Value(self):
1654.         Time.objects.create()
1655.         Time.objects.update(time=Value(datetime.time(1), output_field=TimeField()))
1656.         self.assertEqual(Time.objects.get().time, datetime.time(1))
1657. 
1658.     def test_update_UUIDField_using_Value(self):
1659.         UUID.objects.create()
1660.         UUID.objects.update(uuid=Value(uuid.UUID('12345678901234567890123456789012'), output_field=UUIDField()))
1661.         self.assertEqual(UUID.objects.get().uuid, uuid.UUID('12345678901234567890123456789012'))
1662. 
1663.     def test_deconstruct(self):
1664.         value = Value('name')
1665.         path, args, kwargs = value.deconstruct()
1666.         self.assertEqual(path, 'django.db.models.expressions.Value')
1667.         self.assertEqual(args, (value.value,))
1668.         self.assertEqual(kwargs, {})
1669. 


File: tests/expressions/tests.py
Line number range: 1669 - 1685
Content:
1669. 
1670.     def test_deconstruct_output_field(self):
1671.         value = Value('name', output_field=CharField())
1672.         path, args, kwargs = value.deconstruct()
1673.         self.assertEqual(path, 'django.db.models.expressions.Value')
1674.         self.assertEqual(args, (value.value,))
1675.         self.assertEqual(len(kwargs), 1)
1676.         self.assertEqual(kwargs['output_field'].deconstruct(), CharField().deconstruct())
1677. 
1678.     def test_equal(self):
1679.         value = Value('name')
1680.         self.assertEqual(value, Value('name'))
1681.         self.assertNotEqual(value, Value('username'))
1682. 
1683.     def test_hash(self):
1684.         d = {Value('name'): 'Bob'}
1685.         self.assertIn(Value('name'), d)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 21:48:06,079 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user is reporting a bug related to `ExpressionWrapper` and `GROUP BY` clauses in aggregation queries. The initial context from `tests/expressions/tests.py` does not contain tests for this specific scenario. The bug seems like a regression in aggregation behavior. Therefore, I need to examine tests for aggregation regressions to find relevant examples.' query='Please provide the full content of the file `tests/aggregation_regress/tests.py`.' extra_requirements='If the file is too large, please provide the content of `tests/aggregation/tests.py` instead.' purpose='I am looking for test cases that involve aggregations and `GROUP BY` clauses to find examples that are similar to the reported bug.'
2025-12-23 21:48:06,080 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `tests/aggregation_regress/tests.py`.
2025-12-23 21:48:06,080 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 21:48:06,081 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 21:48:06,082 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 21:48:06,082 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `tests/aggregation_regress/tests.py`.
Extra requirements: If the file is too large, please provide the content of `tests/aggregation/tests.py` instead.
Purpose: I am looking for test cases that involve aggregations and `GROUP BY` clauses to find examples that are similar to the reported bug.
2025-12-23 21:48:09,254 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I will first attempt to retrieve the content of `tests/aggregation_regress/tests.py`. If that file proves to be too large or doesn't contain the information I need, I will proceed to read `tests/aggregation/tests.py` as a fallback. This approach ensures that I can find the relevant test cases about aggregations and `GROUP BY` clauses." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/aggregation_regress/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2134, 'candidates_token_count': 102, 'total_token_count': 2393, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2134}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 102}], 'thoughts_token_count': 157, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.19559948117125267, 'model_name': 'gemini-2.5-pro'} id='run--0cf74640-04fb-4b5c-a54c-3fc505b43af5-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/aggregation_regress/tests.py'}, 'id': 'bb3baf49-9114-4f72-9c4d-fa9a8755cb4d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2134, 'output_tokens': 102, 'total_tokens': 2393, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 157}}
2025-12-23 21:48:11,361 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the initial part of the file `tests/aggregation_regress/tests.py`. Since the file is larger than the initial preview, I will now fetch the remaining content to provide the complete file.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 1001.0, "relative_path": "tests/aggregation_regress/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11039, 'candidates_token_count': 74, 'total_token_count': 11157, 'cached_content_token_count': 1857, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11039}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1857}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 74}], 'thoughts_token_count': 44}, 'finish_reason': 'STOP', 'avg_logprobs': -0.08211642342644769, 'model_name': 'gemini-2.5-pro'} id='run--8cf44884-01e7-40e3-b300-b79f3723f60d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 1001.0, 'relative_path': 'tests/aggregation_regress/tests.py'}, 'id': '3626ed1d-c38c-4afb-95e3-f519ad125757', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11039, 'output_tokens': 74, 'total_tokens': 11157, 'input_token_details': {'cache_read': 1857}, 'output_token_details': {'reasoning': 44}}
2025-12-23 21:48:13,477 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the first 1001 lines of `tests/aggregation_regress/tests.py`. I will now read the remaining portion of the file to provide you with its complete content.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "end_line": 1501.0, "relative_path": "tests/aggregation_regress/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18880, 'candidates_token_count': 73, 'total_token_count': 19003, 'cached_content_token_count': 9507, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18880}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9507}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 73}], 'thoughts_token_count': 50}, 'finish_reason': 'STOP', 'avg_logprobs': -0.11825609860354908, 'model_name': 'gemini-2.5-pro'} id='run--650dab4d-4ec5-4646-814a-223f5953c685-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'end_line': 1501.0, 'relative_path': 'tests/aggregation_regress/tests.py'}, 'id': '90d45f71-0e02-4d95-b2f5-31039766ff60', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18880, 'output_tokens': 73, 'total_tokens': 19003, 'input_token_details': {'cache_read': 9507}, 'output_token_details': {'reasoning': 50}}
2025-12-23 21:48:17,101 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved all 1501 lines of the file `tests/aggregation_regress/tests.py`. I will now read the remaining portion of the file to provide you with its complete content.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1501.0, "end_line": 2001.0, "relative_path": "tests/aggregation_regress/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 27711, 'candidates_token_count': 74, 'total_token_count': 27909, 'cached_content_token_count': 17355, 'prompt_tokens_details': [{'modality': 1, 'token_count': 27711}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17355}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 74}], 'thoughts_token_count': 124}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2554109676464184, 'model_name': 'gemini-2.5-pro'} id='run--a9955736-07e2-4d9a-b3dc-3dc7b1704f19-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1501.0, 'end_line': 2001.0, 'relative_path': 'tests/aggregation_regress/tests.py'}, 'id': '7414ca7f-4345-4435-b2e3-541b761d45f7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 27711, 'output_tokens': 74, 'total_tokens': 27909, 'input_token_details': {'cache_read': 17355}, 'output_token_details': {'reasoning': 124}}
2025-12-23 21:48:23,756 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the full content of the file `tests/aggregation_regress/tests.py`. This file contains a comprehensive suite of tests for aggregation functionalities in Django's ORM, including various test cases for annotations, aggregations, and filtering with `GROUP BY` clauses. These examples should be helpful in understanding and debugging the reported bug. Since the requested file was fully retrieved, I did not proceed to read the fallback file `tests/aggregation/tests.py`." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 29168, 'candidates_token_count': 98, 'total_token_count': 29821, 'cached_content_token_count': 27003, 'prompt_tokens_details': [{'modality': 1, 'token_count': 29168}], 'cache_tokens_details': [{'modality': 1, 'token_count': 27003}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 98}], 'thoughts_token_count': 555}, 'finish_reason': 'STOP', 'avg_logprobs': -0.8202165097606425, 'model_name': 'gemini-2.5-pro'} id='run--01707642-823a-4c50-8357-5605bd8ad99f-0' usage_metadata={'input_tokens': 29168, 'output_tokens': 98, 'total_tokens': 29821, 'input_token_details': {'cache_read': 27003}, 'output_token_details': {'reasoning': 555}}
2025-12-23 21:48:23,759 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `tests/aggregation_regress/tests.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the file is too large, please provide the content of `tests/aggregation/tests.py` instead.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
I am looking for test cases that involve aggregations and `GROUP BY` clauses to find examples that are similar to the reported bug.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/aggregation_regress/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import pickle
3. from decimal import Decimal
4. from operator import attrgetter
5. from unittest import mock
6. 
7. from django.contrib.contenttypes.models import ContentType
8. from django.core.exceptions import FieldError
9. from django.db import connection
10. from django.db.models import (
11.     Aggregate, Avg, Case, Count, DecimalField, F, IntegerField, Max, Q, StdDev,
12.     Sum, Value, Variance, When,
13. )
14. from django.test import TestCase, skipUnlessAnyDBFeature, skipUnlessDBFeature
15. from django.test.utils import Approximate
16. 
17. from .models import (
18.     Alfa, Author, Book, Bravo, Charlie, Clues, Entries, HardbackBook, ItemTag,
19.     Publisher, SelfRefFK, Store, WithManualPK,
20. )
21. 
22. 
23. class AggregationTests(TestCase):
24. 
25.     @classmethod
26.     def setUpTestData(cls):
27.         cls.a1 = Author.objects.create(name='Adrian Holovaty', age=34)
28.         cls.a2 = Author.objects.create(name='Jacob Kaplan-Moss', age=35)
29.         cls.a3 = Author.objects.create(name='Brad Dayley', age=45)
30.         cls.a4 = Author.objects.create(name='James Bennett', age=29)
31.         cls.a5 = Author.objects.create(name='Jeffrey Forcier', age=37)
32.         cls.a6 = Author.objects.create(name='Paul Bissex', age=29)
33.         cls.a7 = Author.objects.create(name='Wesley J. Chun', age=25)
34.         cls.a8 = Author.objects.create(name='Peter Norvig', age=57)
35.         cls.a9 = Author.objects.create(name='Stuart Russell', age=46)
36.         cls.a1.friends.add(cls.a2, cls.a4)
37.         cls.a2.friends.add(cls.a1, cls.a7)
38.         cls.a4.friends.add(cls.a1)
39.         cls.a5.friends.add(cls.a6, cls.a7)
40.         cls.a6.friends.add(cls.a5, cls.a7)
41.         cls.a7.friends.add(cls.a2, cls.a5, cls.a6)
42.         cls.a8.friends.add(cls.a9)
43.         cls.a9.friends.add(cls.a8)
44. 
45.         cls.p1 = Publisher.objects.create(name='Apress', num_awards=3)
46.         cls.p2 = Publisher.objects.create(name='Sams', num_awards=1)
47.         cls.p3 = Publisher.objects.create(name='Prentice Hall', num_awards=7)
48.         cls.p4 = Publisher.objects.create(name='Morgan Kaufmann', num_awards=9)
49.         cls.p5 = Publisher.objects.create(name="Jonno's House of Books", num_awards=0)
50. 
51.         cls.b1 = Book.objects.create(
52.             isbn='159059725', name='The Definitive Guide to Django: Web Development Done Right',
53.             pages=447, rating=4.5, price=Decimal('30.00'), contact=cls.a1, publisher=cls.p1,
54.             pubdate=datetime.date(2007, 12, 6)
55.         )
56.         cls.b2 = Book.objects.create(
57.             isbn='067232959', name='Sams Teach Yourself Django in 24 Hours',
58.             pages=528, rating=3.0, price=Decimal('23.09'), contact=cls.a3, publisher=cls.p2,
59.             pubdate=datetime.date(2008, 3, 3)
60.         )
61.         cls.b3 = Book.objects.create(
62.             isbn='159059996', name='Practical Django Projects',
63.             pages=300, rating=4.0, price=Decimal('29.69'), contact=cls.a4, publisher=cls.p1,
64.             pubdate=datetime.date(2008, 6, 23)
65.         )
66.         cls.b4 = Book.objects.create(
67.             isbn='013235613', name='Python Web Development with Django',
68.             pages=350, rating=4.0, price=Decimal('29.69'), contact=cls.a5, publisher=cls.p3,
69.             pubdate=datetime.date(2008, 11, 3)
70.         )
71.         cls.b5 = HardbackBook.objects.create(
72.             isbn='013790395', name='Artificial Intelligence: A Modern Approach',
73.             pages=1132, rating=4.0, price=Decimal('82.80'), contact=cls.a8, publisher=cls.p3,
74.             pubdate=datetime.date(1995, 1, 15), weight=4.5)
75.         cls.b6 = HardbackBook.objects.create(
76.             isbn='155860191', name='Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
77.             pages=946, rating=5.0, price=Decimal('75.00'), contact=cls.a8, publisher=cls.p4,
78.             pubdate=datetime.date(1991, 10, 15), weight=3.7)
79.         cls.b1.authors.add(cls.a1, cls.a2)
80.         cls.b2.authors.add(cls.a3)
81.         cls.b3.authors.add(cls.a4)
82.         cls.b4.authors.add(cls.a5, cls.a6, cls.a7)
83.         cls.b5.authors.add(cls.a8, cls.a9)
84.         cls.b6.authors.add(cls.a8)
85. 
86.         s1 = Store.objects.create(
87.             name='Amazon.com',
88.             original_opening=datetime.datetime(1994, 4, 23, 9, 17, 42),
89.             friday_night_closing=datetime.time(23, 59, 59)
90.         )
91.         s2 = Store.objects.create(
92.             name='Books.com',
93.             original_opening=datetime.datetime(2001, 3, 15, 11, 23, 37),
94.             friday_night_closing=datetime.time(23, 59, 59)
95.         )
96.         s3 = Store.objects.create(
97.             name="Mamma and Pappa's Books",
98.             original_opening=datetime.datetime(1945, 4, 25, 16, 24, 14),
99.             friday_night_closing=datetime.time(21, 30)
100.         )
101.         s1.books.add(cls.b1, cls.b2, cls.b3, cls.b4, cls.b5, cls.b6)
102.         s2.books.add(cls.b1, cls.b3, cls.b5, cls.b6)
103.         s3.books.add(cls.b3, cls.b4, cls.b6)
104. 
105.     def assertObjectAttrs(self, obj, **kwargs):
106.         for attr, value in kwargs.items():
107.             self.assertEqual(getattr(obj, attr), value)
108. 
109.     def test_annotation_with_value(self):
110.         values = Book.objects.filter(
111.             name='Practical Django Projects',
112.         ).annotate(
113.             discount_price=F('price') * 2,
114.         ).values(
115.             'discount_price',
116.         ).annotate(sum_discount=Sum('discount_price'))
117.         self.assertSequenceEqual(
118.             values,
119.             [{'discount_price': Decimal('59.38'), 'sum_discount': Decimal('59.38')}]
120.         )
121. 
122.     def test_aggregates_in_where_clause(self):
123.         """
124.         Regression test for #12822: DatabaseError: aggregates not allowed in
125.         WHERE clause
126. 
127.         The subselect works and returns results equivalent to a
128.         query with the IDs listed.
129. 
130.         Before the corresponding fix for this bug, this test passed in 1.1 and
131.         failed in 1.2-beta (trunk).
132.         """
133.         qs = Book.objects.values('contact').annotate(Max('id'))
134.         qs = qs.order_by('contact').values_list('id__max', flat=True)
135.         # don't do anything with the queryset (qs) before including it as a
136.         # subquery
137.         books = Book.objects.order_by('id')
138.         qs1 = books.filter(id__in=qs)
139.         qs2 = books.filter(id__in=list(qs))
140.         self.assertEqual(list(qs1), list(qs2))
141. 
142.     def test_aggregates_in_where_clause_pre_eval(self):
143.         """
144.         Regression test for #12822: DatabaseError: aggregates not allowed in
145.         WHERE clause
146. 
147.         Same as the above test, but evaluates the queryset for the subquery
148.         before it's used as a subquery.
149. 
150.         Before the corresponding fix for this bug, this test failed in both
151.         1.1 and 1.2-beta (trunk).
152.         """
153.         qs = Book.objects.values('contact').annotate(Max('id'))
154.         qs = qs.order_by('contact').values_list('id__max', flat=True)
155.         # force the queryset (qs) for the subquery to be evaluated in its
156.         # current state
157.         list(qs)
158.         books = Book.objects.order_by('id')
159.         qs1 = books.filter(id__in=qs)
160.         qs2 = books.filter(id__in=list(qs))
161.         self.assertEqual(list(qs1), list(qs2))
162. 
163.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
164.     def test_annotate_with_extra(self):
165.         """
166.         Regression test for #11916: Extra params + aggregation creates
167.         incorrect SQL.
168.         """
169.         # Oracle doesn't support subqueries in group by clause
170.         shortest_book_sql = """
171.         SELECT name
172.         FROM aggregation_regress_book b
173.         WHERE b.publisher_id = aggregation_regress_publisher.id
174.         ORDER BY b.pages
175.         LIMIT 1
176.         """
177.         # tests that this query does not raise a DatabaseError due to the full
178.         # subselect being (erroneously) added to the GROUP BY parameters
179.         qs = Publisher.objects.extra(select={
180.             'name_of_shortest_book': shortest_book_sql,
181.         }).annotate(total_books=Count('book'))
182.         # force execution of the query
183.         list(qs)
184. 
185.     def test_aggregate(self):
186.         # Ordering requests are ignored
187.         self.assertEqual(
188.             Author.objects.order_by("name").aggregate(Avg("age")),
189.             {"age__avg": Approximate(37.444, places=1)}
190.         )
191. 
192.         # Implicit ordering is also ignored
193.         self.assertEqual(
194.             Book.objects.aggregate(Sum("pages")),
195.             {"pages__sum": 3703},
196.         )
197. 
198.         # Baseline results
199.         self.assertEqual(
200.             Book.objects.aggregate(Sum('pages'), Avg('pages')),
201.             {'pages__sum': 3703, 'pages__avg': Approximate(617.166, places=2)}
202.         )
203. 
204.         # Empty values query doesn't affect grouping or results
205.         self.assertEqual(
206.             Book.objects.values().aggregate(Sum('pages'), Avg('pages')),
207.             {'pages__sum': 3703, 'pages__avg': Approximate(617.166, places=2)}
208.         )
209. 
210.         # Aggregate overrides extra selected column
211.         self.assertEqual(
212.             Book.objects.extra(select={'price_per_page': 'price / pages'}).aggregate(Sum('pages')),
213.             {'pages__sum': 3703}
214.         )
215. 
216.     def test_annotation(self):
217.         # Annotations get combined with extra select clauses
218.         obj = Book.objects.annotate(mean_auth_age=Avg("authors__age")).extra(
219.             select={"manufacture_cost": "price * .5"}).get(pk=self.b2.pk)
220.         self.assertObjectAttrs(
221.             obj,
222.             contact_id=self.a3.id,
223.             isbn='067232959',
224.             mean_auth_age=45.0,
225.             name='Sams Teach Yourself Django in 24 Hours',
226.             pages=528,
227.             price=Decimal("23.09"),
228.             pubdate=datetime.date(2008, 3, 3),
229.             publisher_id=self.p2.id,
230.             rating=3.0
231.         )
232.         # Different DB backends return different types for the extra select computation
233.         self.assertIn(obj.manufacture_cost, (11.545, Decimal('11.545')))
234. 
235.         # Order of the annotate/extra in the query doesn't matter
236.         obj = Book.objects.extra(select={'manufacture_cost': 'price * .5'}).annotate(
237.             mean_auth_age=Avg('authors__age')).get(pk=self.b2.pk)
238.         self.assertObjectAttrs(
239.             obj,
240.             contact_id=self.a3.id,
241.             isbn='067232959',
242.             mean_auth_age=45.0,
243.             name='Sams Teach Yourself Django in 24 Hours',
244.             pages=528,
245.             price=Decimal("23.09"),
246.             pubdate=datetime.date(2008, 3, 3),
247.             publisher_id=self.p2.id,
248.             rating=3.0
249.         )
250.         # Different DB backends return different types for the extra select computation
251.         self.assertIn(obj.manufacture_cost, (11.545, Decimal('11.545')))
252. 
253.         # Values queries can be combined with annotate and extra
254.         obj = Book.objects.annotate(mean_auth_age=Avg('authors__age')).extra(
255.             select={'manufacture_cost': 'price * .5'}).values().get(pk=self.b2.pk)
256.         manufacture_cost = obj['manufacture_cost']
257.         self.assertIn(manufacture_cost, (11.545, Decimal('11.545')))
258.         del obj['manufacture_cost']
259.         self.assertEqual(obj, {
260.             'id': self.b2.id,
261.             'contact_id': self.a3.id,
262.             'isbn': '067232959',
263.             'mean_auth_age': 45.0,
264.             'name': 'Sams Teach Yourself Django in 24 Hours',
265.             'pages': 528,
266.             'price': Decimal('23.09'),
267.             'pubdate': datetime.date(2008, 3, 3),
268.             'publisher_id': self.p2.id,
269.             'rating': 3.0,
270.         })
271. 
272.         # The order of the (empty) values, annotate and extra clauses doesn't
273.         # matter
274.         obj = Book.objects.values().annotate(mean_auth_age=Avg('authors__age')).extra(
275.             select={'manufacture_cost': 'price * .5'}).get(pk=self.b2.pk)
276.         manufacture_cost = obj['manufacture_cost']
277.         self.assertIn(manufacture_cost, (11.545, Decimal('11.545')))
278.         del obj['manufacture_cost']
279.         self.assertEqual(obj, {
280.             'id': self.b2.id,
281.             'contact_id': self.a3.id,
282.             'isbn': '067232959',
283.             'mean_auth_age': 45.0,
284.             'name': 'Sams Teach Yourself Django in 24 Hours',
285.             'pages': 528,
286.             'price': Decimal('23.09'),
287.             'pubdate': datetime.date(2008, 3, 3),
288.             'publisher_id': self.p2.id,
289.             'rating': 3.0
290.         })
291. 
292.         # If the annotation precedes the values clause, it won't be included
293.         # unless it is explicitly named
294.         obj = Book.objects.annotate(mean_auth_age=Avg('authors__age')).extra(
295.             select={'price_per_page': 'price / pages'}).values('name').get(pk=self.b1.pk)
296.         self.assertEqual(obj, {
297.             "name": 'The Definitive Guide to Django: Web Development Done Right',
298.         })
299. 
300.         obj = Book.objects.annotate(mean_auth_age=Avg('authors__age')).extra(
301.             select={'price_per_page': 'price / pages'}).values('name', 'mean_auth_age').get(pk=self.b1.pk)
302.         self.assertEqual(obj, {
303.             'mean_auth_age': 34.5,
304.             'name': 'The Definitive Guide to Django: Web Development Done Right',
305.         })
306. 
307.         # If an annotation isn't included in the values, it can still be used
308.         # in a filter
309.         qs = Book.objects.annotate(n_authors=Count('authors')).values('name').filter(n_authors__gt=2)
310.         self.assertSequenceEqual(
311.             qs, [
312.                 {"name": 'Python Web Development with Django'}
313.             ],
314.         )
315. 
316.         # The annotations are added to values output if values() precedes
317.         # annotate()
318.         obj = Book.objects.values('name').annotate(mean_auth_age=Avg('authors__age')).extra(
319.             select={'price_per_page': 'price / pages'}).get(pk=self.b1.pk)
320.         self.assertEqual(obj, {
321.             'mean_auth_age': 34.5,
322.             'name': 'The Definitive Guide to Django: Web Development Done Right',
323.         })
324. 
325.         # All of the objects are getting counted (allow_nulls) and that values
326.         # respects the amount of objects
327.         self.assertEqual(
328.             len(Author.objects.annotate(Avg('friends__age')).values()),
329.             9
330.         )
331. 
332.         # Consecutive calls to annotate accumulate in the query
333.         qs = (
334.             Book.objects
335.             .values('price')
336.             .annotate(oldest=Max('authors__age'))
337.             .order_by('oldest', 'price')
338.             .annotate(Max('publisher__num_awards'))
339.         )
340.         self.assertSequenceEqual(
341.             qs, [
342.                 {'price': Decimal("30"), 'oldest': 35, 'publisher__num_awards__max': 3},
343.                 {'price': Decimal("29.69"), 'oldest': 37, 'publisher__num_awards__max': 7},
344.                 {'price': Decimal("23.09"), 'oldest': 45, 'publisher__num_awards__max': 1},
345.                 {'price': Decimal("75"), 'oldest': 57, 'publisher__num_awards__max': 9},
346.                 {'price': Decimal("82.8"), 'oldest': 57, 'publisher__num_awards__max': 7}
347.             ],
348.         )
349. 
350.     def test_aggregate_annotation(self):
351.         # Aggregates can be composed over annotations.
352.         # The return type is derived from the composed aggregate
353.         vals = (
354.             Book.objects
355.             .all()
356.             .annotate(num_authors=Count('authors__id'))
357.             .aggregate(Max('pages'), Max('price'), Sum('num_authors'), Avg('num_authors'))
358.         )
359.         self.assertEqual(vals, {
360.             'num_authors__sum': 10,
361.             'num_authors__avg': Approximate(1.666, places=2),
362.             'pages__max': 1132,
363.             'price__max': Decimal("82.80")
364.         })
365. 
366.         # Regression for #15624 - Missing SELECT columns when using values, annotate
367.         # and aggregate in a single query
368.         self.assertEqual(
369.             Book.objects.annotate(c=Count('authors')).values('c').aggregate(Max('c')),
370.             {'c__max': 3}
371.         )
372. 
373.     def test_conditional_aggregate(self):
374.         # Conditional aggregation of a grouped queryset.
375.         self.assertEqual(
376.             Book.objects.annotate(c=Count('authors')).values('pk').aggregate(test=Sum(
377.                 Case(When(c__gt=1, then=1), output_field=IntegerField())
378.             ))['test'],
379.             3
380.         )
381. 
382.     def test_sliced_conditional_aggregate(self):
383.         self.assertEqual(
384.             Author.objects.all()[:5].aggregate(test=Sum(Case(
385.                 When(age__lte=35, then=1), output_field=IntegerField()
386.             )))['test'],
387.             3
388.         )
389. 
390.     def test_annotated_conditional_aggregate(self):
391.         annotated_qs = Book.objects.annotate(discount_price=F('price') * 0.75)
392.         self.assertAlmostEqual(
393.             annotated_qs.aggregate(test=Avg(Case(
394.                 When(pages__lt=400, then='discount_price'),
395.                 output_field=DecimalField()
396.             )))['test'],
397.             Decimal('22.27'), places=2
398.         )
399. 
400.     def test_distinct_conditional_aggregate(self):
401.         self.assertEqual(
402.             Book.objects.distinct().aggregate(test=Avg(Case(
403.                 When(price=Decimal('29.69'), then='pages'),
404.                 output_field=IntegerField()
405.             )))['test'],
406.             325
407.         )
408. 
409.     def test_conditional_aggregate_on_complex_condition(self):
410.         self.assertEqual(
411.             Book.objects.distinct().aggregate(test=Avg(Case(
412.                 When(Q(price__gte=Decimal('29')) & Q(price__lt=Decimal('30')), then='pages'),
413.                 output_field=IntegerField()
414.             )))['test'],
415.             325
416.         )
417. 
418.     def test_decimal_aggregate_annotation_filter(self):
419.         """
420.         Filtering on an aggregate annotation with Decimal values should work.
421.         Requires special handling on SQLite (#18247).
422.         """
423.         self.assertEqual(
424.             len(Author.objects.annotate(sum=Sum('book_contact_set__price')).filter(sum__gt=Decimal(40))),
425.             1
426.         )
427.         self.assertEqual(
428.             len(Author.objects.annotate(sum=Sum('book_contact_set__price')).filter(sum__lte=Decimal(40))),
429.             4
430.         )
431. 
432.     def test_field_error(self):
433.         # Bad field requests in aggregates are caught and reported
434.         msg = (
435.             "Cannot resolve keyword 'foo' into field. Choices are: authors, "
436.             "contact, contact_id, hardbackbook, id, isbn, name, pages, price, "
437.             "pubdate, publisher, publisher_id, rating, store, tags"
438.         )
439.         with self.assertRaisesMessage(FieldError, msg):
440.             Book.objects.all().aggregate(num_authors=Count('foo'))
441. 
442.         with self.assertRaisesMessage(FieldError, msg):
443.             Book.objects.all().annotate(num_authors=Count('foo'))
444. 
445.         msg = (
446.             "Cannot resolve keyword 'foo' into field. Choices are: authors, "
447.             "contact, contact_id, hardbackbook, id, isbn, name, num_authors, "
448.             "pages, price, pubdate, publisher, publisher_id, rating, store, tags"
449.         )
450.         with self.assertRaisesMessage(FieldError, msg):
451.             Book.objects.all().annotate(num_authors=Count('authors__id')).aggregate(Max('foo'))
452. 
453.     def test_more(self):
454.         # Old-style count aggregations can be mixed with new-style
455.         self.assertEqual(
456.             Book.objects.annotate(num_authors=Count('authors')).count(),
457.             6
458.         )
459. 
460.         # Non-ordinal, non-computed Aggregates over annotations correctly
461.         # inherit the annotation's internal type if the annotation is ordinal
462.         # or computed
463.         vals = Book.objects.annotate(num_authors=Count('authors')).aggregate(Max('num_authors'))
464.         self.assertEqual(
465.             vals,
466.             {'num_authors__max': 3}
467.         )
468. 
469.         vals = Publisher.objects.annotate(avg_price=Avg('book__price')).aggregate(Max('avg_price'))
470.         self.assertEqual(
471.             vals,
472.             {'avg_price__max': 75.0}
473.         )
474. 
475.         # Aliases are quoted to protected aliases that might be reserved names
476.         vals = Book.objects.aggregate(number=Max('pages'), select=Max('pages'))
477.         self.assertEqual(
478.             vals,
479.             {'number': 1132, 'select': 1132}
480.         )
481. 
482.         # Regression for #10064: select_related() plays nice with aggregates
483.         obj = Book.objects.select_related('publisher').annotate(
484.             num_authors=Count('authors')).values().get(isbn='013790395')
485.         self.assertEqual(obj, {
486.             'contact_id': self.a8.id,
487.             'id': self.b5.id,
488.             'isbn': '013790395',
489.             'name': 'Artificial Intelligence: A Modern Approach',
490.             'num_authors': 2,
491.             'pages': 1132,
492.             'price': Decimal("82.8"),
493.             'pubdate': datetime.date(1995, 1, 15),
494.             'publisher_id': self.p3.id,
495.             'rating': 4.0,
496.         })
497. 
498.         # Regression for #10010: exclude on an aggregate field is correctly
499.         # negated
500.         self.assertEqual(


File: tests/aggregation_regress/tests.py
Line number range: 501 - 1001
Content:
501.             len(Book.objects.annotate(num_authors=Count('authors'))),
502.             6
503.         )
504.         self.assertEqual(
505.             len(Book.objects.annotate(num_authors=Count('authors')).filter(num_authors__gt=2)),
506.             1
507.         )
508.         self.assertEqual(
509.             len(Book.objects.annotate(num_authors=Count('authors')).exclude(num_authors__gt=2)),
510.             5
511.         )
512. 
513.         self.assertEqual(
514.             len(
515.                 Book.objects
516.                 .annotate(num_authors=Count('authors'))
517.                 .filter(num_authors__lt=3)
518.                 .exclude(num_authors__lt=2)
519.             ),
520.             2
521.         )
522.         self.assertEqual(
523.             len(
524.                 Book.objects
525.                 .annotate(num_authors=Count('authors'))
526.                 .exclude(num_authors__lt=2)
527.                 .filter(num_authors__lt=3)
528.             ),
529.             2
530.         )
531. 
532.     def test_aggregate_fexpr(self):
533.         # Aggregates can be used with F() expressions
534.         # ... where the F() is pushed into the HAVING clause
535.         qs = (
536.             Publisher.objects
537.             .annotate(num_books=Count('book'))
538.             .filter(num_books__lt=F('num_awards') / 2)
539.             .order_by('name')
540.             .values('name', 'num_books', 'num_awards')
541.         )
542.         self.assertSequenceEqual(
543.             qs, [
544.                 {'num_books': 1, 'name': 'Morgan Kaufmann', 'num_awards': 9},
545.                 {'num_books': 2, 'name': 'Prentice Hall', 'num_awards': 7}
546.             ],
547.         )
548. 
549.         qs = (
550.             Publisher.objects
551.             .annotate(num_books=Count('book'))
552.             .exclude(num_books__lt=F('num_awards') / 2)
553.             .order_by('name')
554.             .values('name', 'num_books', 'num_awards')
555.         )
556.         self.assertSequenceEqual(
557.             qs, [
558.                 {'num_books': 2, 'name': 'Apress', 'num_awards': 3},
559.                 {'num_books': 0, 'name': "Jonno's House of Books", 'num_awards': 0},
560.                 {'num_books': 1, 'name': 'Sams', 'num_awards': 1}
561.             ],
562.         )
563. 
564.         # ... and where the F() references an aggregate
565.         qs = (
566.             Publisher.objects
567.             .annotate(num_books=Count('book'))
568.             .filter(num_awards__gt=2 * F('num_books'))
569.             .order_by('name')
570.             .values('name', 'num_books', 'num_awards')
571.         )
572.         self.assertSequenceEqual(
573.             qs, [
574.                 {'num_books': 1, 'name': 'Morgan Kaufmann', 'num_awards': 9},
575.                 {'num_books': 2, 'name': 'Prentice Hall', 'num_awards': 7}
576.             ],
577.         )
578. 
579.         qs = (
580.             Publisher.objects
581.             .annotate(num_books=Count('book'))
582.             .exclude(num_books__lt=F('num_awards') / 2)
583.             .order_by('name')
584.             .values('name', 'num_books', 'num_awards')
585.         )
586.         self.assertSequenceEqual(
587.             qs, [
588.                 {'num_books': 2, 'name': 'Apress', 'num_awards': 3},
589.                 {'num_books': 0, 'name': "Jonno's House of Books", 'num_awards': 0},
590.                 {'num_books': 1, 'name': 'Sams', 'num_awards': 1}
591.             ],
592.         )
593. 
594.     def test_db_col_table(self):
595.         # Tests on fields with non-default table and column names.
596.         qs = (
597.             Clues.objects
598.             .values('EntryID__Entry')
599.             .annotate(Appearances=Count('EntryID'), Distinct_Clues=Count('Clue', distinct=True))
600.         )
601.         self.assertQuerysetEqual(qs, [])
602. 
603.         qs = Entries.objects.annotate(clue_count=Count('clues__ID'))
604.         self.assertQuerysetEqual(qs, [])
605. 
606.     def test_boolean_conversion(self):
607.         # Aggregates mixed up ordering of columns for backend's convert_values
608.         # method. Refs #21126.
609.         e = Entries.objects.create(Entry='foo')
610.         c = Clues.objects.create(EntryID=e, Clue='bar')
611.         qs = Clues.objects.select_related('EntryID').annotate(Count('ID'))
612.         self.assertSequenceEqual(qs, [c])
613.         self.assertEqual(qs[0].EntryID, e)
614.         self.assertIs(qs[0].EntryID.Exclude, False)
615. 
616.     def test_empty(self):
617.         # Regression for #10089: Check handling of empty result sets with
618.         # aggregates
619.         self.assertEqual(
620.             Book.objects.filter(id__in=[]).count(),
621.             0
622.         )
623. 
624.         vals = (
625.             Book.objects
626.             .filter(id__in=[])
627.             .aggregate(
628.                 num_authors=Count('authors'),
629.                 avg_authors=Avg('authors'),
630.                 max_authors=Max('authors'),
631.                 max_price=Max('price'),
632.                 max_rating=Max('rating'),
633.             )
634.         )
635.         self.assertEqual(
636.             vals,
637.             {'max_authors': None, 'max_rating': None, 'num_authors': 0, 'avg_authors': None, 'max_price': None}
638.         )
639. 
640.         qs = (
641.             Publisher.objects
642.             .filter(name="Jonno's House of Books")
643.             .annotate(
644.                 num_authors=Count('book__authors'),
645.                 avg_authors=Avg('book__authors'),
646.                 max_authors=Max('book__authors'),
647.                 max_price=Max('book__price'),
648.                 max_rating=Max('book__rating'),
649.             ).values()
650.         )
651.         self.assertSequenceEqual(
652.             qs,
653.             [{
654.                 'max_authors': None,
655.                 'name': "Jonno's House of Books",
656.                 'num_awards': 0,
657.                 'max_price': None,
658.                 'num_authors': 0,
659.                 'max_rating': None,
660.                 'id': self.p5.id,
661.                 'avg_authors': None,
662.             }],
663.         )
664. 
665.     def test_more_more(self):
666.         # Regression for #10113 - Fields mentioned in order_by() must be
667.         # included in the GROUP BY. This only becomes a problem when the
668.         # order_by introduces a new join.
669.         self.assertQuerysetEqual(
670.             Book.objects.annotate(num_authors=Count('authors')).order_by('publisher__name', 'name'), [
671.                 "Practical Django Projects",
672.                 "The Definitive Guide to Django: Web Development Done Right",
673.                 "Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp",
674.                 "Artificial Intelligence: A Modern Approach",
675.                 "Python Web Development with Django",
676.                 "Sams Teach Yourself Django in 24 Hours",
677.             ],
678.             lambda b: b.name
679.         )
680. 
681.         # Regression for #10127 - Empty select_related() works with annotate
682.         qs = Book.objects.filter(rating__lt=4.5).select_related().annotate(Avg('authors__age')).order_by('name')
683.         self.assertQuerysetEqual(
684.             qs,
685.             [
686.                 ('Artificial Intelligence: A Modern Approach', 51.5, 'Prentice Hall', 'Peter Norvig'),
687.                 ('Practical Django Projects', 29.0, 'Apress', 'James Bennett'),
688.                 (
689.                     'Python Web Development with Django',
690.                     Approximate(30.333, places=2),
691.                     'Prentice Hall',
692.                     'Jeffrey Forcier',
693.                 ),
694.                 ('Sams Teach Yourself Django in 24 Hours', 45.0, 'Sams', 'Brad Dayley')
695.             ],
696.             lambda b: (b.name, b.authors__age__avg, b.publisher.name, b.contact.name)
697.         )
698. 
699.         # Regression for #10132 - If the values() clause only mentioned extra
700.         # (select=) columns, those columns are used for grouping
701.         qs = Book.objects.extra(select={'pub': 'publisher_id'}).values('pub').annotate(Count('id')).order_by('pub')
702.         self.assertSequenceEqual(
703.             qs, [
704.                 {'pub': self.b1.id, 'id__count': 2},
705.                 {'pub': self.b2.id, 'id__count': 1},
706.                 {'pub': self.b3.id, 'id__count': 2},
707.                 {'pub': self.b4.id, 'id__count': 1}
708.             ],
709.         )
710. 
711.         qs = (
712.             Book.objects
713.             .extra(select={'pub': 'publisher_id', 'foo': 'pages'})
714.             .values('pub')
715.             .annotate(Count('id'))
716.             .order_by('pub')
717.         )
718.         self.assertSequenceEqual(
719.             qs, [
720.                 {'pub': self.p1.id, 'id__count': 2},
721.                 {'pub': self.p2.id, 'id__count': 1},
722.                 {'pub': self.p3.id, 'id__count': 2},
723.                 {'pub': self.p4.id, 'id__count': 1}
724.             ],
725.         )
726. 
727.         # Regression for #10182 - Queries with aggregate calls are correctly
728.         # realiased when used in a subquery
729.         ids = (
730.             Book.objects
731.             .filter(pages__gt=100)
732.             .annotate(n_authors=Count('authors'))
733.             .filter(n_authors__gt=2)
734.             .order_by('n_authors')
735.         )
736.         self.assertQuerysetEqual(
737.             Book.objects.filter(id__in=ids), [
738.                 "Python Web Development with Django",
739.             ],
740.             lambda b: b.name
741.         )
742. 
743.         # Regression for #15709 - Ensure each group_by field only exists once
744.         # per query
745.         qstr = str(Book.objects.values('publisher').annotate(max_pages=Max('pages')).order_by().query)
746.         # There is just one GROUP BY clause (zero commas means at most one clause).
747.         self.assertEqual(qstr[qstr.index('GROUP BY'):].count(', '), 0)
748. 
749.     def test_duplicate_alias(self):
750.         # Regression for #11256 - duplicating a default alias raises ValueError.
751.         msg = (
752.             "The named annotation 'authors__age__avg' conflicts with "
753.             "the default name for another annotation."
754.         )
755.         with self.assertRaisesMessage(ValueError, msg):
756.             Book.objects.all().annotate(Avg('authors__age'), authors__age__avg=Avg('authors__age'))
757. 
758.     def test_field_name_conflict(self):
759.         # Regression for #11256 - providing an aggregate name
760.         # that conflicts with a field name on the model raises ValueError
761.         msg = "The annotation 'age' conflicts with a field on the model."
762.         with self.assertRaisesMessage(ValueError, msg):
763.             Author.objects.annotate(age=Avg('friends__age'))
764. 
765.     def test_m2m_name_conflict(self):
766.         # Regression for #11256 - providing an aggregate name
767.         # that conflicts with an m2m name on the model raises ValueError
768.         msg = "The annotation 'friends' conflicts with a field on the model."
769.         with self.assertRaisesMessage(ValueError, msg):
770.             Author.objects.annotate(friends=Count('friends'))
771. 
772.     def test_fk_attname_conflict(self):
773.         msg = "The annotation 'contact_id' conflicts with a field on the model."
774.         with self.assertRaisesMessage(ValueError, msg):
775.             Book.objects.annotate(contact_id=F('publisher_id'))
776. 
777.     def test_values_queryset_non_conflict(self):
778.         # Regression for #14707 -- If you're using a values query set, some potential conflicts are avoided.
779. 
780.         # age is a field on Author, so it shouldn't be allowed as an aggregate.
781.         # But age isn't included in values(), so it is.
782.         results = Author.objects.values('name').annotate(age=Count('book_contact_set')).order_by('name')
783.         self.assertEqual(len(results), 9)
784.         self.assertEqual(results[0]['name'], 'Adrian Holovaty')
785.         self.assertEqual(results[0]['age'], 1)
786. 
787.         # Same problem, but aggregating over m2m fields
788.         results = Author.objects.values('name').annotate(age=Avg('friends__age')).order_by('name')
789.         self.assertEqual(len(results), 9)
790.         self.assertEqual(results[0]['name'], 'Adrian Holovaty')
791.         self.assertEqual(results[0]['age'], 32.0)
792. 
793.         # Same problem, but colliding with an m2m field
794.         results = Author.objects.values('name').annotate(friends=Count('friends')).order_by('name')
795.         self.assertEqual(len(results), 9)
796.         self.assertEqual(results[0]['name'], 'Adrian Holovaty')
797.         self.assertEqual(results[0]['friends'], 2)
798. 
799.     def test_reverse_relation_name_conflict(self):
800.         # Regression for #11256 - providing an aggregate name
801.         # that conflicts with a reverse-related name on the model raises ValueError
802.         msg = "The annotation 'book_contact_set' conflicts with a field on the model."
803.         with self.assertRaisesMessage(ValueError, msg):
804.             Author.objects.annotate(book_contact_set=Avg('friends__age'))
805. 
806.     def test_pickle(self):
807.         # Regression for #10197 -- Queries with aggregates can be pickled.
808.         # First check that pickling is possible at all. No crash = success
809.         qs = Book.objects.annotate(num_authors=Count('authors'))
810.         pickle.dumps(qs)
811. 
812.         # Then check that the round trip works.
813.         query = qs.query.get_compiler(qs.db).as_sql()[0]
814.         qs2 = pickle.loads(pickle.dumps(qs))
815.         self.assertEqual(
816.             qs2.query.get_compiler(qs2.db).as_sql()[0],
817.             query,
818.         )
819. 
820.     def test_more_more_more(self):
821.         # Regression for #10199 - Aggregate calls clone the original query so
822.         # the original query can still be used
823.         books = Book.objects.all()
824.         books.aggregate(Avg("authors__age"))
825.         self.assertQuerysetEqual(
826.             books.all(), [
827.                 'Artificial Intelligence: A Modern Approach',
828.                 'Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
829.                 'Practical Django Projects',
830.                 'Python Web Development with Django',
831.                 'Sams Teach Yourself Django in 24 Hours',
832.                 'The Definitive Guide to Django: Web Development Done Right'
833.             ],
834.             lambda b: b.name
835.         )
836. 
837.         # Regression for #10248 - Annotations work with dates()
838.         qs = Book.objects.annotate(num_authors=Count('authors')).filter(num_authors=2).dates('pubdate', 'day')
839.         self.assertSequenceEqual(
840.             qs, [
841.                 datetime.date(1995, 1, 15),
842.                 datetime.date(2007, 12, 6),
843.             ],
844.         )
845. 
846.         # Regression for #10290 - extra selects with parameters can be used for
847.         # grouping.
848.         qs = (
849.             Book.objects
850.             .annotate(mean_auth_age=Avg('authors__age'))
851.             .extra(select={'sheets': '(pages + %s) / %s'}, select_params=[1, 2])
852.             .order_by('sheets')
853.             .values('sheets')
854.         )
855.         self.assertQuerysetEqual(
856.             qs, [
857.                 150,
858.                 175,
859.                 224,
860.                 264,
861.                 473,
862.                 566
863.             ],
864.             lambda b: int(b["sheets"])
865.         )
866. 
867.         # Regression for 10425 - annotations don't get in the way of a count()
868.         # clause
869.         self.assertEqual(
870.             Book.objects.values('publisher').annotate(Count('publisher')).count(),
871.             4
872.         )
873.         self.assertEqual(
874.             Book.objects.annotate(Count('publisher')).values('publisher').count(),
875.             6
876.         )
877. 
878.         # Note: intentionally no order_by(), that case needs tests, too.
879.         publishers = Publisher.objects.filter(id__in=[1, 2])
880.         self.assertEqual(
881.             sorted(p.name for p in publishers),
882.             [
883.                 "Apress",
884.                 "Sams"
885.             ]
886.         )
887. 
888.         publishers = publishers.annotate(n_books=Count("book"))
889.         sorted_publishers = sorted(publishers, key=lambda x: x.name)
890.         self.assertEqual(
891.             sorted_publishers[0].n_books,
892.             2
893.         )
894.         self.assertEqual(
895.             sorted_publishers[1].n_books,
896.             1
897.         )
898. 
899.         self.assertEqual(
900.             sorted(p.name for p in publishers),
901.             [
902.                 "Apress",
903.                 "Sams"
904.             ]
905.         )
906. 
907.         books = Book.objects.filter(publisher__in=publishers)
908.         self.assertQuerysetEqual(
909.             books, [
910.                 "Practical Django Projects",
911.                 "Sams Teach Yourself Django in 24 Hours",
912.                 "The Definitive Guide to Django: Web Development Done Right",
913.             ],
914.             lambda b: b.name
915.         )
916.         self.assertEqual(
917.             sorted(p.name for p in publishers),
918.             [
919.                 "Apress",
920.                 "Sams"
921.             ]
922.         )
923. 
924.         # Regression for 10666 - inherited fields work with annotations and
925.         # aggregations
926.         self.assertEqual(
927.             HardbackBook.objects.aggregate(n_pages=Sum('book_ptr__pages')),
928.             {'n_pages': 2078}
929.         )
930. 
931.         self.assertEqual(
932.             HardbackBook.objects.aggregate(n_pages=Sum('pages')),
933.             {'n_pages': 2078},
934.         )
935. 
936.         qs = HardbackBook.objects.annotate(
937.             n_authors=Count('book_ptr__authors'),
938.         ).values('name', 'n_authors').order_by('name')
939.         self.assertSequenceEqual(
940.             qs,
941.             [
942.                 {'n_authors': 2, 'name': 'Artificial Intelligence: A Modern Approach'},
943.                 {
944.                     'n_authors': 1,
945.                     'name': 'Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp'
946.                 }
947.             ],
948.         )
949. 
950.         qs = HardbackBook.objects.annotate(n_authors=Count('authors')).values('name', 'n_authors').order_by('name')
951.         self.assertSequenceEqual(
952.             qs,
953.             [
954.                 {'n_authors': 2, 'name': 'Artificial Intelligence: A Modern Approach'},
955.                 {
956.                     'n_authors': 1,
957.                     'name': 'Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp'
958.                 }
959.             ],
960.         )
961. 
962.         # Regression for #10766 - Shouldn't be able to reference an aggregate
963.         # fields in an aggregate() call.
964.         msg = "Cannot compute Avg('mean_age'): 'mean_age' is an aggregate"
965.         with self.assertRaisesMessage(FieldError, msg):
966.             Book.objects.annotate(mean_age=Avg('authors__age')).annotate(Avg('mean_age'))
967. 
968.     def test_empty_filter_count(self):
969.         self.assertEqual(
970.             Author.objects.filter(id__in=[]).annotate(Count("friends")).count(),
971.             0
972.         )
973. 
974.     def test_empty_filter_aggregate(self):
975.         self.assertEqual(
976.             Author.objects.filter(id__in=[]).annotate(Count("friends")).aggregate(Count("pk")),
977.             {"pk__count": None}
978.         )
979. 
980.     def test_none_call_before_aggregate(self):
981.         # Regression for #11789
982.         self.assertEqual(
983.             Author.objects.none().aggregate(Avg('age')),
984.             {'age__avg': None}
985.         )
986. 
987.     def test_annotate_and_join(self):
988.         self.assertEqual(
989.             Author.objects.annotate(c=Count("friends__name")).exclude(friends__name="Joe").count(),
990.             Author.objects.count()
991.         )
992. 
993.     def test_f_expression_annotation(self):
994.         # Books with less than 200 pages per author.
995.         qs = Book.objects.values("name").annotate(
996.             n_authors=Count("authors")
997.         ).filter(
998.             pages__lt=F("n_authors") * 200
999.         ).values_list("pk")
1000.         self.assertQuerysetEqual(
1001.             Book.objects.filter(pk__in=qs), [


File: tests/aggregation_regress/tests.py
Line number range: 1001 - 1501
Content:
1001.             Book.objects.filter(pk__in=qs), [
1002.                 "Python Web Development with Django"
1003.             ],
1004.             attrgetter("name")
1005.         )
1006. 
1007.     def test_values_annotate_values(self):
1008.         qs = Book.objects.values("name").annotate(
1009.             n_authors=Count("authors")
1010.         ).values_list("pk", flat=True).order_by('name')
1011.         self.assertEqual(list(qs), list(Book.objects.values_list("pk", flat=True)))
1012. 
1013.     def test_having_group_by(self):
1014.         # When a field occurs on the LHS of a HAVING clause that it
1015.         # appears correctly in the GROUP BY clause
1016.         qs = Book.objects.values_list("name").annotate(
1017.             n_authors=Count("authors")
1018.         ).filter(
1019.             pages__gt=F("n_authors")
1020.         ).values_list("name", flat=True).order_by('name')
1021.         # Results should be the same, all Books have more pages than authors
1022.         self.assertEqual(
1023.             list(qs), list(Book.objects.values_list("name", flat=True))
1024.         )
1025. 
1026.     def test_values_list_annotation_args_ordering(self):
1027.         """
1028.         Annotate *args ordering should be preserved in values_list results.
1029.         **kwargs comes after *args.
1030.         Regression test for #23659.
1031.         """
1032.         books = Book.objects.values_list("publisher__name").annotate(
1033.             Count("id"), Avg("price"), Avg("authors__age"), avg_pgs=Avg("pages")
1034.         ).order_by("-publisher__name")
1035.         self.assertEqual(books[0], ('Sams', 1, Decimal('23.09'), 45.0, 528.0))
1036. 
1037.     def test_annotation_disjunction(self):
1038.         qs = Book.objects.annotate(n_authors=Count("authors")).filter(
1039.             Q(n_authors=2) | Q(name="Python Web Development with Django")
1040.         ).order_by('name')
1041.         self.assertQuerysetEqual(
1042.             qs, [
1043.                 "Artificial Intelligence: A Modern Approach",
1044.                 "Python Web Development with Django",
1045.                 "The Definitive Guide to Django: Web Development Done Right",
1046.             ],
1047.             attrgetter("name")
1048.         )
1049. 
1050.         qs = (
1051.             Book.objects
1052.             .annotate(n_authors=Count("authors"))
1053.             .filter(
1054.                 Q(name="The Definitive Guide to Django: Web Development Done Right") |
1055.                 (Q(name="Artificial Intelligence: A Modern Approach") & Q(n_authors=3))
1056.             )
1057.         ).order_by('name')
1058.         self.assertQuerysetEqual(
1059.             qs,
1060.             [
1061.                 "The Definitive Guide to Django: Web Development Done Right",
1062.             ],
1063.             attrgetter("name")
1064.         )
1065. 
1066.         qs = Publisher.objects.annotate(
1067.             rating_sum=Sum("book__rating"),
1068.             book_count=Count("book")
1069.         ).filter(
1070.             Q(rating_sum__gt=5.5) | Q(rating_sum__isnull=True)
1071.         ).order_by('pk')
1072.         self.assertQuerysetEqual(
1073.             qs, [
1074.                 "Apress",
1075.                 "Prentice Hall",
1076.                 "Jonno's House of Books",
1077.             ],
1078.             attrgetter("name")
1079.         )
1080. 
1081.         qs = Publisher.objects.annotate(
1082.             rating_sum=Sum("book__rating"),
1083.             book_count=Count("book")
1084.         ).filter(
1085.             Q(rating_sum__gt=F("book_count")) | Q(rating_sum=None)
1086.         ).order_by("num_awards")
1087.         self.assertQuerysetEqual(
1088.             qs, [
1089.                 "Jonno's House of Books",
1090.                 "Sams",
1091.                 "Apress",
1092.                 "Prentice Hall",
1093.                 "Morgan Kaufmann"
1094.             ],
1095.             attrgetter("name")
1096.         )
1097. 
1098.     def test_quoting_aggregate_order_by(self):
1099.         qs = Book.objects.filter(
1100.             name="Python Web Development with Django"
1101.         ).annotate(
1102.             authorCount=Count("authors")
1103.         ).order_by("authorCount")
1104.         self.assertQuerysetEqual(
1105.             qs, [
1106.                 ("Python Web Development with Django", 3),
1107.             ],
1108.             lambda b: (b.name, b.authorCount)
1109.         )
1110. 
1111.     def test_stddev(self):
1112.         self.assertEqual(
1113.             Book.objects.aggregate(StdDev('pages')),
1114.             {'pages__stddev': Approximate(311.46, 1)}
1115.         )
1116. 
1117.         self.assertEqual(
1118.             Book.objects.aggregate(StdDev('rating')),
1119.             {'rating__stddev': Approximate(0.60, 1)}
1120.         )
1121. 
1122.         self.assertEqual(
1123.             Book.objects.aggregate(StdDev('price')),
1124.             {'price__stddev': Approximate(Decimal('24.16'), 2)}
1125.         )
1126. 
1127.         self.assertEqual(
1128.             Book.objects.aggregate(StdDev('pages', sample=True)),
1129.             {'pages__stddev': Approximate(341.19, 2)}
1130.         )
1131. 
1132.         self.assertEqual(
1133.             Book.objects.aggregate(StdDev('rating', sample=True)),
1134.             {'rating__stddev': Approximate(0.66, 2)}
1135.         )
1136. 
1137.         self.assertEqual(
1138.             Book.objects.aggregate(StdDev('price', sample=True)),
1139.             {'price__stddev': Approximate(Decimal('26.46'), 1)}
1140.         )
1141. 
1142.         self.assertEqual(
1143.             Book.objects.aggregate(Variance('pages')),
1144.             {'pages__variance': Approximate(97010.80, 1)}
1145.         )
1146. 
1147.         self.assertEqual(
1148.             Book.objects.aggregate(Variance('rating')),
1149.             {'rating__variance': Approximate(0.36, 1)}
1150.         )
1151. 
1152.         self.assertEqual(
1153.             Book.objects.aggregate(Variance('price')),
1154.             {'price__variance': Approximate(Decimal('583.77'), 1)}
1155.         )
1156. 
1157.         self.assertEqual(
1158.             Book.objects.aggregate(Variance('pages', sample=True)),
1159.             {'pages__variance': Approximate(116412.96, 1)}
1160.         )
1161. 
1162.         self.assertEqual(
1163.             Book.objects.aggregate(Variance('rating', sample=True)),
1164.             {'rating__variance': Approximate(0.44, 2)}
1165.         )
1166. 
1167.         self.assertEqual(
1168.             Book.objects.aggregate(Variance('price', sample=True)),
1169.             {'price__variance': Approximate(Decimal('700.53'), 2)}
1170.         )
1171. 
1172.     def test_filtering_by_annotation_name(self):
1173.         # Regression test for #14476
1174. 
1175.         # The name of the explicitly provided annotation name in this case
1176.         # poses no problem
1177.         qs = Author.objects.annotate(book_cnt=Count('book')).filter(book_cnt=2).order_by('name')
1178.         self.assertQuerysetEqual(
1179.             qs,
1180.             ['Peter Norvig'],
1181.             lambda b: b.name
1182.         )
1183.         # Neither in this case
1184.         qs = Author.objects.annotate(book_count=Count('book')).filter(book_count=2).order_by('name')
1185.         self.assertQuerysetEqual(
1186.             qs,
1187.             ['Peter Norvig'],
1188.             lambda b: b.name
1189.         )
1190.         # This case used to fail because the ORM couldn't resolve the
1191.         # automatically generated annotation name `book__count`
1192.         qs = Author.objects.annotate(Count('book')).filter(book__count=2).order_by('name')
1193.         self.assertQuerysetEqual(
1194.             qs,
1195.             ['Peter Norvig'],
1196.             lambda b: b.name
1197.         )
1198.         # Referencing the auto-generated name in an aggregate() also works.
1199.         self.assertEqual(
1200.             Author.objects.annotate(Count('book')).aggregate(Max('book__count')),
1201.             {'book__count__max': 2}
1202.         )
1203. 
1204.     def test_annotate_joins(self):
1205.         """
1206.         The base table's join isn't promoted to LOUTER. This could
1207.         cause the query generation to fail if there is an exclude() for fk-field
1208.         in the query, too. Refs #19087.
1209.         """
1210.         qs = Book.objects.annotate(n=Count('pk'))
1211.         self.assertIs(qs.query.alias_map['aggregation_regress_book'].join_type, None)
1212.         # The query executes without problems.
1213.         self.assertEqual(len(qs.exclude(publisher=-1)), 6)
1214. 
1215.     @skipUnlessAnyDBFeature('allows_group_by_pk', 'allows_group_by_selected_pks')
1216.     def test_aggregate_duplicate_columns(self):
1217.         # Regression test for #17144
1218. 
1219.         results = Author.objects.annotate(num_contacts=Count('book_contact_set'))
1220. 
1221.         # There should only be one GROUP BY clause, for the `id` column.
1222.         # `name` and `age` should not be grouped on.
1223.         _, _, group_by = results.query.get_compiler(using='default').pre_sql_setup()
1224.         self.assertEqual(len(group_by), 1)
1225.         self.assertIn('id', group_by[0][0])
1226.         self.assertNotIn('name', group_by[0][0])
1227.         self.assertNotIn('age', group_by[0][0])
1228.         self.assertEqual(
1229.             [(a.name, a.num_contacts) for a in results.order_by('name')],
1230.             [
1231.                 ('Adrian Holovaty', 1),
1232.                 ('Brad Dayley', 1),
1233.                 ('Jacob Kaplan-Moss', 0),
1234.                 ('James Bennett', 1),
1235.                 ('Jeffrey Forcier', 1),
1236.                 ('Paul Bissex', 0),
1237.                 ('Peter Norvig', 2),
1238.                 ('Stuart Russell', 0),
1239.                 ('Wesley J. Chun', 0),
1240.             ]
1241.         )
1242. 
1243.     @skipUnlessAnyDBFeature('allows_group_by_pk', 'allows_group_by_selected_pks')
1244.     def test_aggregate_duplicate_columns_only(self):
1245.         # Works with only() too.
1246.         results = Author.objects.only('id', 'name').annotate(num_contacts=Count('book_contact_set'))
1247.         _, _, grouping = results.query.get_compiler(using='default').pre_sql_setup()
1248.         self.assertEqual(len(grouping), 1)
1249.         self.assertIn('id', grouping[0][0])
1250.         self.assertNotIn('name', grouping[0][0])
1251.         self.assertNotIn('age', grouping[0][0])
1252.         self.assertEqual(
1253.             [(a.name, a.num_contacts) for a in results.order_by('name')],
1254.             [
1255.                 ('Adrian Holovaty', 1),
1256.                 ('Brad Dayley', 1),
1257.                 ('Jacob Kaplan-Moss', 0),
1258.                 ('James Bennett', 1),
1259.                 ('Jeffrey Forcier', 1),
1260.                 ('Paul Bissex', 0),
1261.                 ('Peter Norvig', 2),
1262.                 ('Stuart Russell', 0),
1263.                 ('Wesley J. Chun', 0),
1264.             ]
1265.         )
1266. 
1267.     @skipUnlessAnyDBFeature('allows_group_by_pk', 'allows_group_by_selected_pks')
1268.     def test_aggregate_duplicate_columns_select_related(self):
1269.         # And select_related()
1270.         results = Book.objects.select_related('contact').annotate(
1271.             num_authors=Count('authors'))
1272.         _, _, grouping = results.query.get_compiler(using='default').pre_sql_setup()
1273.         # In the case of `group_by_selected_pks` we also group by contact.id because of the select_related.
1274.         self.assertEqual(len(grouping), 1 if connection.features.allows_group_by_pk else 2)
1275.         self.assertIn('id', grouping[0][0])
1276.         self.assertNotIn('name', grouping[0][0])
1277.         self.assertNotIn('contact', grouping[0][0])
1278.         self.assertEqual(
1279.             [(b.name, b.num_authors) for b in results.order_by('name')],
1280.             [
1281.                 ('Artificial Intelligence: A Modern Approach', 2),
1282.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1283.                 ('Practical Django Projects', 1),
1284.                 ('Python Web Development with Django', 3),
1285.                 ('Sams Teach Yourself Django in 24 Hours', 1),
1286.                 ('The Definitive Guide to Django: Web Development Done Right', 2)
1287.             ]
1288.         )
1289. 
1290.     @skipUnlessDBFeature('allows_group_by_selected_pks')
1291.     def test_aggregate_unmanaged_model_columns(self):
1292.         """
1293.         Unmanaged models are sometimes used to represent database views which
1294.         may not allow grouping by selected primary key.
1295.         """
1296.         def assertQuerysetResults(queryset):
1297.             self.assertEqual(
1298.                 [(b.name, b.num_authors) for b in queryset.order_by('name')],
1299.                 [
1300.                     ('Artificial Intelligence: A Modern Approach', 2),
1301.                     ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1302.                     ('Practical Django Projects', 1),
1303.                     ('Python Web Development with Django', 3),
1304.                     ('Sams Teach Yourself Django in 24 Hours', 1),
1305.                     ('The Definitive Guide to Django: Web Development Done Right', 2),
1306.                 ]
1307.             )
1308.         queryset = Book.objects.select_related('contact').annotate(num_authors=Count('authors'))
1309.         # Unmanaged origin model.
1310.         with mock.patch.object(Book._meta, 'managed', False):
1311.             _, _, grouping = queryset.query.get_compiler(using='default').pre_sql_setup()
1312.             self.assertEqual(len(grouping), len(Book._meta.fields) + 1)
1313.             for index, field in enumerate(Book._meta.fields):
1314.                 self.assertIn(field.name, grouping[index][0])
1315.             self.assertIn(Author._meta.pk.name, grouping[-1][0])
1316.             assertQuerysetResults(queryset)
1317.         # Unmanaged related model.
1318.         with mock.patch.object(Author._meta, 'managed', False):
1319.             _, _, grouping = queryset.query.get_compiler(using='default').pre_sql_setup()
1320.             self.assertEqual(len(grouping), len(Author._meta.fields) + 1)
1321.             self.assertIn(Book._meta.pk.name, grouping[0][0])
1322.             for index, field in enumerate(Author._meta.fields):
1323.                 self.assertIn(field.name, grouping[index + 1][0])
1324.             assertQuerysetResults(queryset)
1325. 
1326.     @skipUnlessDBFeature('allows_group_by_selected_pks')
1327.     def test_aggregate_unmanaged_model_as_tables(self):
1328.         qs = Book.objects.select_related('contact').annotate(num_authors=Count('authors'))
1329.         # Force treating unmanaged models as tables.
1330.         with mock.patch(
1331.             'django.db.connection.features.allows_group_by_selected_pks_on_model',
1332.             return_value=True,
1333.         ):
1334.             with mock.patch.object(Book._meta, 'managed', False), \
1335.                     mock.patch.object(Author._meta, 'managed', False):
1336.                 _, _, grouping = qs.query.get_compiler(using='default').pre_sql_setup()
1337.                 self.assertEqual(len(grouping), 2)
1338.                 self.assertIn('id', grouping[0][0])
1339.                 self.assertIn('id', grouping[1][0])
1340.                 self.assertQuerysetEqual(
1341.                     qs.order_by('name'),
1342.                     [
1343.                         ('Artificial Intelligence: A Modern Approach', 2),
1344.                         ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1345.                         ('Practical Django Projects', 1),
1346.                         ('Python Web Development with Django', 3),
1347.                         ('Sams Teach Yourself Django in 24 Hours', 1),
1348.                         ('The Definitive Guide to Django: Web Development Done Right', 2),
1349.                     ],
1350.                     attrgetter('name', 'num_authors'),
1351.                 )
1352. 
1353.     def test_reverse_join_trimming(self):
1354.         qs = Author.objects.annotate(Count('book_contact_set__contact'))
1355.         self.assertIn(' JOIN ', str(qs.query))
1356. 
1357.     def test_aggregation_with_generic_reverse_relation(self):
1358.         """
1359.         Regression test for #10870:  Aggregates with joins ignore extra
1360.         filters provided by setup_joins
1361. 
1362.         tests aggregations with generic reverse relations
1363.         """
1364.         django_book = Book.objects.get(name='Practical Django Projects')
1365.         ItemTag.objects.create(
1366.             object_id=django_book.id, tag='intermediate',
1367.             content_type=ContentType.objects.get_for_model(django_book),
1368.         )
1369.         ItemTag.objects.create(
1370.             object_id=django_book.id, tag='django',
1371.             content_type=ContentType.objects.get_for_model(django_book),
1372.         )
1373.         # Assign a tag to model with same PK as the book above. If the JOIN
1374.         # used in aggregation doesn't have content type as part of the
1375.         # condition the annotation will also count the 'hi mom' tag for b.
1376.         wmpk = WithManualPK.objects.create(id=django_book.pk)
1377.         ItemTag.objects.create(
1378.             object_id=wmpk.id, tag='hi mom',
1379.             content_type=ContentType.objects.get_for_model(wmpk),
1380.         )
1381.         ai_book = Book.objects.get(name__startswith='Paradigms of Artificial Intelligence')
1382.         ItemTag.objects.create(
1383.             object_id=ai_book.id, tag='intermediate',
1384.             content_type=ContentType.objects.get_for_model(ai_book),
1385.         )
1386. 
1387.         self.assertEqual(Book.objects.aggregate(Count('tags')), {'tags__count': 3})
1388.         results = Book.objects.annotate(Count('tags')).order_by('-tags__count', 'name')
1389.         self.assertEqual(
1390.             [(b.name, b.tags__count) for b in results],
1391.             [
1392.                 ('Practical Django Projects', 2),
1393.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1394.                 ('Artificial Intelligence: A Modern Approach', 0),
1395.                 ('Python Web Development with Django', 0),
1396.                 ('Sams Teach Yourself Django in 24 Hours', 0),
1397.                 ('The Definitive Guide to Django: Web Development Done Right', 0)
1398.             ]
1399.         )
1400. 
1401.     def test_negated_aggregation(self):
1402.         expected_results = Author.objects.exclude(
1403.             pk__in=Author.objects.annotate(book_cnt=Count('book')).filter(book_cnt=2)
1404.         ).order_by('name')
1405.         expected_results = [a.name for a in expected_results]
1406.         qs = Author.objects.annotate(book_cnt=Count('book')).exclude(
1407.             Q(book_cnt=2), Q(book_cnt=2)).order_by('name')
1408.         self.assertQuerysetEqual(
1409.             qs,
1410.             expected_results,
1411.             lambda b: b.name
1412.         )
1413.         expected_results = Author.objects.exclude(
1414.             pk__in=Author.objects.annotate(book_cnt=Count('book')).filter(book_cnt=2)
1415.         ).order_by('name')
1416.         expected_results = [a.name for a in expected_results]
1417.         qs = Author.objects.annotate(book_cnt=Count('book')).exclude(Q(book_cnt=2) | Q(book_cnt=2)).order_by('name')
1418.         self.assertQuerysetEqual(
1419.             qs,
1420.             expected_results,
1421.             lambda b: b.name
1422.         )
1423. 
1424.     def test_name_filters(self):
1425.         qs = Author.objects.annotate(Count('book')).filter(
1426.             Q(book__count__exact=2) | Q(name='Adrian Holovaty')
1427.         ).order_by('name')
1428.         self.assertQuerysetEqual(
1429.             qs,
1430.             ['Adrian Holovaty', 'Peter Norvig'],
1431.             lambda b: b.name
1432.         )
1433. 
1434.     def test_name_expressions(self):
1435.         # Aggregates are spotted correctly from F objects.
1436.         # Note that Adrian's age is 34 in the fixtures, and he has one book
1437.         # so both conditions match one author.
1438.         qs = Author.objects.annotate(Count('book')).filter(
1439.             Q(name='Peter Norvig') | Q(age=F('book__count') + 33)
1440.         ).order_by('name')
1441.         self.assertQuerysetEqual(
1442.             qs,
1443.             ['Adrian Holovaty', 'Peter Norvig'],
1444.             lambda b: b.name
1445.         )
1446. 
1447.     def test_ticket_11293(self):
1448.         q1 = Q(price__gt=50)
1449.         q2 = Q(authors__count__gt=1)
1450.         query = Book.objects.annotate(Count('authors')).filter(
1451.             q1 | q2).order_by('pk')
1452.         self.assertQuerysetEqual(
1453.             query, [1, 4, 5, 6],
1454.             lambda b: b.pk)
1455. 
1456.     def test_ticket_11293_q_immutable(self):
1457.         """
1458.         Splitting a q object to parts for where/having doesn't alter
1459.         the original q-object.
1460.         """
1461.         q1 = Q(isbn='')
1462.         q2 = Q(authors__count__gt=1)
1463.         query = Book.objects.annotate(Count('authors'))
1464.         query.filter(q1 | q2)
1465.         self.assertEqual(len(q2.children), 1)
1466. 
1467.     def test_fobj_group_by(self):
1468.         """
1469.         An F() object referring to related column works correctly in group by.
1470.         """
1471.         qs = Book.objects.annotate(
1472.             account=Count('authors')
1473.         ).filter(
1474.             account=F('publisher__num_awards')
1475.         )
1476.         self.assertQuerysetEqual(
1477.             qs, ['Sams Teach Yourself Django in 24 Hours'],
1478.             lambda b: b.name)
1479. 
1480.     def test_annotate_reserved_word(self):
1481.         """
1482.         Regression #18333 - Ensure annotated column name is properly quoted.
1483.         """
1484.         vals = Book.objects.annotate(select=Count('authors__id')).aggregate(Sum('select'), Avg('select'))
1485.         self.assertEqual(vals, {
1486.             'select__sum': 10,
1487.             'select__avg': Approximate(1.666, places=2),
1488.         })
1489. 
1490.     def test_annotate_on_relation(self):
1491.         book = Book.objects.annotate(avg_price=Avg('price'), publisher_name=F('publisher__name')).get(pk=self.b1.pk)
1492.         self.assertEqual(book.avg_price, 30.00)
1493.         self.assertEqual(book.publisher_name, "Apress")
1494. 
1495.     def test_aggregate_on_relation(self):
1496.         # A query with an existing annotation aggregation on a relation should
1497.         # succeed.
1498.         qs = Book.objects.annotate(avg_price=Avg('price')).aggregate(
1499.             publisher_awards=Sum('publisher__num_awards')
1500.         )
1501.         self.assertEqual(qs['publisher_awards'], 30)


File: tests/aggregation_regress/tests.py
Line number range: 1501 - 2001
Content:
1501.         self.assertEqual(qs['publisher_awards'], 30)
1502. 
1503.     def test_annotate_distinct_aggregate(self):
1504.         # There are three books with rating of 4.0 and two of the books have
1505.         # the same price. Hence, the distinct removes one rating of 4.0
1506.         # from the results.
1507.         vals1 = Book.objects.values('rating', 'price').distinct().aggregate(result=Sum('rating'))
1508.         vals2 = Book.objects.aggregate(result=Sum('rating') - Value(4.0))
1509.         self.assertEqual(vals1, vals2)
1510. 
1511.     def test_annotate_values_list_flat(self):
1512.         """Find ages that are shared by at least two authors."""
1513.         qs = Author.objects.values_list('age', flat=True).annotate(age_count=Count('age')).filter(age_count__gt=1)
1514.         self.assertSequenceEqual(qs, [29])
1515. 
1516.     def test_allow_distinct(self):
1517.         class MyAggregate(Aggregate):
1518.             pass
1519.         with self.assertRaisesMessage(TypeError, 'MyAggregate does not allow distinct'):
1520.             MyAggregate('foo', distinct=True)
1521. 
1522.         class DistinctAggregate(Aggregate):
1523.             allow_distinct = True
1524.         DistinctAggregate('foo', distinct=True)
1525. 
1526. 
1527. class JoinPromotionTests(TestCase):
1528.     def test_ticket_21150(self):
1529.         b = Bravo.objects.create()
1530.         c = Charlie.objects.create(bravo=b)
1531.         qs = Charlie.objects.select_related('alfa').annotate(Count('bravo__charlie'))
1532.         self.assertSequenceEqual(qs, [c])
1533.         self.assertIs(qs[0].alfa, None)
1534.         a = Alfa.objects.create()
1535.         c.alfa = a
1536.         c.save()
1537.         # Force re-evaluation
1538.         qs = qs.all()
1539.         self.assertSequenceEqual(qs, [c])
1540.         self.assertEqual(qs[0].alfa, a)
1541. 
1542.     def test_existing_join_not_promoted(self):
1543.         # No promotion for existing joins
1544.         qs = Charlie.objects.filter(alfa__name__isnull=False).annotate(Count('alfa__name'))
1545.         self.assertIn(' INNER JOIN ', str(qs.query))
1546.         # Also, the existing join is unpromoted when doing filtering for already
1547.         # promoted join.
1548.         qs = Charlie.objects.annotate(Count('alfa__name')).filter(alfa__name__isnull=False)
1549.         self.assertIn(' INNER JOIN ', str(qs.query))
1550.         # But, as the join is nullable first use by annotate will be LOUTER
1551.         qs = Charlie.objects.annotate(Count('alfa__name'))
1552.         self.assertIn(' LEFT OUTER JOIN ', str(qs.query))
1553. 
1554.     def test_non_nullable_fk_not_promoted(self):
1555.         qs = Book.objects.annotate(Count('contact__name'))
1556.         self.assertIn(' INNER JOIN ', str(qs.query))
1557. 
1558. 
1559. class SelfReferentialFKTests(TestCase):
1560.     def test_ticket_24748(self):
1561.         t1 = SelfRefFK.objects.create(name='t1')
1562.         SelfRefFK.objects.create(name='t2', parent=t1)
1563.         SelfRefFK.objects.create(name='t3', parent=t1)
1564.         self.assertQuerysetEqual(
1565.             SelfRefFK.objects.annotate(num_children=Count('children')).order_by('name'),
1566.             [('t1', 2), ('t2', 0), ('t3', 0)],
1567.             lambda x: (x.name, x.num_children)
1568.         )

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 21:48:29,981 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user has requested the full content of the file `tests/aggregation_regress/tests.py`. The provided context contains the content of this file from line 1 to 1568, which seems to be the complete file. Therefore, I am returning the entire content as a single context to fulfill the user's request.", relative_path='tests/aggregation_regress/tests.py', start_line=1, end_line=1568)]
2025-12-23 21:48:29,984 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file `tests/aggregation_regress/tests.py`.
2025-12-23 21:48:29,985 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 21:48:29,985 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 21:48:29,985 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 10 existing contexts
2025-12-23 21:48:29,985 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 11 total contexts (removed 0 duplicates)
2025-12-23 21:48:29,986 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Constant expressions of an ExpressionWrapper object are incorrectly placed at the GROUP BY clause

Description: Description
	
I have a function that expects an arbitrary Query expression and constructs a query on a Postgres db
 def execQuery(expr):
	 expr = ExpressionWrapper(expr, output_field=IntegerField())
	 return Model.objects.annotate(expr_res=expr).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
However, when the given expr is a constant expression (e.g., Value(3)), Django generates an SQL query that contains this constant expression in its GROUP BY clause.
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a", 3
This leads to an exception because in Postgres, the query above is invalid:
django.db.utils.ProgrammingError: aggregate functions are not allowed in GROUP BY
LINE 1: SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."col...
Note that when the given query expression is not wrapped by the ExpressionWrapper object, Django correctly identifies and omits the constant from the GROUP BY clause. For example, the query below runs correctly.
 def execQuery(expr):
	 return Model.objects.annotate(expr_res=Value(3, output_field=IntegerField())).values('expr_res', 'column_a').annotate(sum=Sum('column_b'))
SELECT "model"."column_a", 3 AS "expr_res", SUM("model"."column_b") AS "sum" FROM "model" GROUP BY "model"."column_a"

Patch information:
diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py
index c1a76584f0..aface75cff 100644
--- a/django/db/models/expressions.py
+++ b/django/db/models/expressions.py
@@ -863,6 +863,9 @@ class ExpressionWrapper(Expression):
     def get_source_expressions(self):
         return [self.expression]
 
+    def get_group_by_cols(self, alias=None):
+        return self.expression.get_group_by_cols(alias)
+
     def as_sql(self, compiler, connection):
         return self.expression.as_sql(compiler, connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file `tests/expressions/tests.py`.
Extra Requirements: 
Purpose: I need to find 3 relevant test cases that demonstrate the buggy behavior of ExpressionWrapper in GROUP BY clauses. This file is the most likely place to find them.

Previous refined query 2:
Essential Query: Please provide the full content of the file `tests/aggregation_regress/tests.py`.
Extra Requirements: If the file is too large, please provide the content of `tests/aggregation/tests.py` instead.
Purpose: I am looking for test cases that involve aggregations and `GROUP BY` clauses to find examples that are similar to the reported bug.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/aggregation_regress/tests.py
Line number range: 1 - 1568
Content:
1. import datetime
2. import pickle
3. from decimal import Decimal
4. from operator import attrgetter
5. from unittest import mock
6. 
7. from django.contrib.contenttypes.models import ContentType
8. from django.core.exceptions import FieldError
9. from django.db import connection
10. from django.db.models import (
11.     Aggregate, Avg, Case, Count, DecimalField, F, IntegerField, Max, Q, StdDev,
12.     Sum, Value, Variance, When,
13. )
14. from django.test import TestCase, skipUnlessAnyDBFeature, skipUnlessDBFeature
15. from django.test.utils import Approximate
16. 
17. from .models import (
18.     Alfa, Author, Book, Bravo, Charlie, Clues, Entries, HardbackBook, ItemTag,
19.     Publisher, SelfRefFK, Store, WithManualPK,
20. )
21. 
22. 
23. class AggregationTests(TestCase):
24. 
25.     @classmethod
26.     def setUpTestData(cls):
27.         cls.a1 = Author.objects.create(name='Adrian Holovaty', age=34)
28.         cls.a2 = Author.objects.create(name='Jacob Kaplan-Moss', age=35)
29.         cls.a3 = Author.objects.create(name='Brad Dayley', age=45)
30.         cls.a4 = Author.objects.create(name='James Bennett', age=29)
31.         cls.a5 = Author.objects.create(name='Jeffrey Forcier', age=37)
32.         cls.a6 = Author.objects.create(name='Paul Bissex', age=29)
33.         cls.a7 = Author.objects.create(name='Wesley J. Chun', age=25)
34.         cls.a8 = Author.objects.create(name='Peter Norvig', age=57)
35.         cls.a9 = Author.objects.create(name='Stuart Russell', age=46)
36.         cls.a1.friends.add(cls.a2, cls.a4)
37.         cls.a2.friends.add(cls.a1, cls.a7)
38.         cls.a4.friends.add(cls.a1)
39.         cls.a5.friends.add(cls.a6, cls.a7)
40.         cls.a6.friends.add(cls.a5, cls.a7)
41.         cls.a7.friends.add(cls.a2, cls.a5, cls.a6)
42.         cls.a8.friends.add(cls.a9)
43.         cls.a9.friends.add(cls.a8)
44. 
45.         cls.p1 = Publisher.objects.create(name='Apress', num_awards=3)
46.         cls.p2 = Publisher.objects.create(name='Sams', num_awards=1)
47.         cls.p3 = Publisher.objects.create(name='Prentice Hall', num_awards=7)
48.         cls.p4 = Publisher.objects.create(name='Morgan Kaufmann', num_awards=9)
49.         cls.p5 = Publisher.objects.create(name="Jonno's House of Books", num_awards=0)
50. 
51.         cls.b1 = Book.objects.create(
52.             isbn='159059725', name='The Definitive Guide to Django: Web Development Done Right',
53.             pages=447, rating=4.5, price=Decimal('30.00'), contact=cls.a1, publisher=cls.p1,
54.             pubdate=datetime.date(2007, 12, 6)
55.         )
56.         cls.b2 = Book.objects.create(
57.             isbn='067232959', name='Sams Teach Yourself Django in 24 Hours',
58.             pages=528, rating=3.0, price=Decimal('23.09'), contact=cls.a3, publisher=cls.p2,
59.             pubdate=datetime.date(2008, 3, 3)
60.         )
61.         cls.b3 = Book.objects.create(
62.             isbn='159059996', name='Practical Django Projects',
63.             pages=300, rating=4.0, price=Decimal('29.69'), contact=cls.a4, publisher=cls.p1,
64.             pubdate=datetime.date(2008, 6, 23)
65.         )
66.         cls.b4 = Book.objects.create(
67.             isbn='013235613', name='Python Web Development with Django',
68.             pages=350, rating=4.0, price=Decimal('29.69'), contact=cls.a5, publisher=cls.p3,
69.             pubdate=datetime.date(2008, 11, 3)
70.         )
71.         cls.b5 = HardbackBook.objects.create(
72.             isbn='013790395', name='Artificial Intelligence: A Modern Approach',
73.             pages=1132, rating=4.0, price=Decimal('82.80'), contact=cls.a8, publisher=cls.p3,
74.             pubdate=datetime.date(1995, 1, 15), weight=4.5)
75.         cls.b6 = HardbackBook.objects.create(
76.             isbn='155860191', name='Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
77.             pages=946, rating=5.0, price=Decimal('75.00'), contact=cls.a8, publisher=cls.p4,
78.             pubdate=datetime.date(1991, 10, 15), weight=3.7)
79.         cls.b1.authors.add(cls.a1, cls.a2)
80.         cls.b2.authors.add(cls.a3)
81.         cls.b3.authors.add(cls.a4)
82.         cls.b4.authors.add(cls.a5, cls.a6, cls.a7)
83.         cls.b5.authors.add(cls.a8, cls.a9)
84.         cls.b6.authors.add(cls.a8)
85. 
86.         s1 = Store.objects.create(
87.             name='Amazon.com',
88.             original_opening=datetime.datetime(1994, 4, 23, 9, 17, 42),
89.             friday_night_closing=datetime.time(23, 59, 59)
90.         )
91.         s2 = Store.objects.create(
92.             name='Books.com',
93.             original_opening=datetime.datetime(2001, 3, 15, 11, 23, 37),
94.             friday_night_closing=datetime.time(23, 59, 59)
95.         )
96.         s3 = Store.objects.create(
97.             name="Mamma and Pappa's Books",
98.             original_opening=datetime.datetime(1945, 4, 25, 16, 24, 14),
99.             friday_night_closing=datetime.time(21, 30)
100.         )
101.         s1.books.add(cls.b1, cls.b2, cls.b3, cls.b4, cls.b5, cls.b6)
102.         s2.books.add(cls.b1, cls.b3, cls.b5, cls.b6)
103.         s3.books.add(cls.b3, cls.b4, cls.b6)
104. 
105.     def assertObjectAttrs(self, obj, **kwargs):
106.         for attr, value in kwargs.items():
107.             self.assertEqual(getattr(obj, attr), value)
108. 
109.     def test_annotation_with_value(self):
110.         values = Book.objects.filter(
111.             name='Practical Django Projects',
112.         ).annotate(
113.             discount_price=F('price') * 2,
114.         ).values(
115.             'discount_price',
116.         ).annotate(sum_discount=Sum('discount_price'))
117.         self.assertSequenceEqual(
118.             values,
119.             [{'discount_price': Decimal('59.38'), 'sum_discount': Decimal('59.38')}]
120.         )
121. 
122.     def test_aggregates_in_where_clause(self):
123.         """
124.         Regression test for #12822: DatabaseError: aggregates not allowed in
125.         WHERE clause
126. 
127.         The subselect works and returns results equivalent to a
128.         query with the IDs listed.
129. 
130.         Before the corresponding fix for this bug, this test passed in 1.1 and
131.         failed in 1.2-beta (trunk).
132.         """
133.         qs = Book.objects.values('contact').annotate(Max('id'))
134.         qs = qs.order_by('contact').values_list('id__max', flat=True)
135.         # don't do anything with the queryset (qs) before including it as a
136.         # subquery
137.         books = Book.objects.order_by('id')
138.         qs1 = books.filter(id__in=qs)
139.         qs2 = books.filter(id__in=list(qs))
140.         self.assertEqual(list(qs1), list(qs2))
141. 
142.     def test_aggregates_in_where_clause_pre_eval(self):
143.         """
144.         Regression test for #12822: DatabaseError: aggregates not allowed in
145.         WHERE clause
146. 
147.         Same as the above test, but evaluates the queryset for the subquery
148.         before it's used as a subquery.
149. 
150.         Before the corresponding fix for this bug, this test failed in both
151.         1.1 and 1.2-beta (trunk).
152.         """
153.         qs = Book.objects.values('contact').annotate(Max('id'))
154.         qs = qs.order_by('contact').values_list('id__max', flat=True)
155.         # force the queryset (qs) for the subquery to be evaluated in its
156.         # current state
157.         list(qs)
158.         books = Book.objects.order_by('id')
159.         qs1 = books.filter(id__in=qs)
160.         qs2 = books.filter(id__in=list(qs))
161.         self.assertEqual(list(qs1), list(qs2))
162. 
163.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
164.     def test_annotate_with_extra(self):
165.         """
166.         Regression test for #11916: Extra params + aggregation creates
167.         incorrect SQL.
168.         """
169.         # Oracle doesn't support subqueries in group by clause
170.         shortest_book_sql = """
171.         SELECT name
172.         FROM aggregation_regress_book b
173.         WHERE b.publisher_id = aggregation_regress_publisher.id
174.         ORDER BY b.pages
175.         LIMIT 1
176.         """
177.         # tests that this query does not raise a DatabaseError due to the full
178.         # subselect being (erroneously) added to the GROUP BY parameters
179.         qs = Publisher.objects.extra(select={
180.             'name_of_shortest_book': shortest_book_sql,
181.         }).annotate(total_books=Count('book'))
182.         # force execution of the query
183.         list(qs)
184. 
185.     def test_aggregate(self):
186.         # Ordering requests are ignored
187.         self.assertEqual(
188.             Author.objects.order_by("name").aggregate(Avg("age")),
189.             {"age__avg": Approximate(37.444, places=1)}
190.         )
191. 
192.         # Implicit ordering is also ignored
193.         self.assertEqual(
194.             Book.objects.aggregate(Sum("pages")),
195.             {"pages__sum": 3703},
196.         )
197. 
198.         # Baseline results
199.         self.assertEqual(
200.             Book.objects.aggregate(Sum('pages'), Avg('pages')),
201.             {'pages__sum': 3703, 'pages__avg': Approximate(617.166, places=2)}
202.         )
203. 
204.         # Empty values query doesn't affect grouping or results
205.         self.assertEqual(
206.             Book.objects.values().aggregate(Sum('pages'), Avg('pages')),
207.             {'pages__sum': 3703, 'pages__avg': Approximate(617.166, places=2)}
208.         )
209. 
210.         # Aggregate overrides extra selected column
211.         self.assertEqual(
212.             Book.objects.extra(select={'price_per_page': 'price / pages'}).aggregate(Sum('pages')),
213.             {'pages__sum': 3703}
214.         )
215. 
216.     def test_annotation(self):
217.         # Annotations get combined with extra select clauses
218.         obj = Book.objects.annotate(mean_auth_age=Avg("authors__age")).extra(
219.             select={"manufacture_cost": "price * .5"}).get(pk=self.b2.pk)
220.         self.assertObjectAttrs(
221.             obj,
222.             contact_id=self.a3.id,
223.             isbn='067232959',
224.             mean_auth_age=45.0,
225.             name='Sams Teach Yourself Django in 24 Hours',
226.             pages=528,
227.             price=Decimal("23.09"),
228.             pubdate=datetime.date(2008, 3, 3),
229.             publisher_id=self.p2.id,
230.             rating=3.0
231.         )
232.         # Different DB backends return different types for the extra select computation
233.         self.assertIn(obj.manufacture_cost, (11.545, Decimal('11.545')))
234. 
235.         # Order of the annotate/extra in the query doesn't matter
236.         obj = Book.objects.extra(select={'manufacture_cost': 'price * .5'}).annotate(
237.             mean_auth_age=Avg('authors__age')).get(pk=self.b2.pk)
238.         self.assertObjectAttrs(
239.             obj,
240.             contact_id=self.a3.id,
241.             isbn='067232959',
242.             mean_auth_age=45.0,
243.             name='Sams Teach Yourself Django in 24 Hours',
244.             pages=528,
245.             price=Decimal("23.09"),
246.             pubdate=datetime.date(2008, 3, 3),
247.             publisher_id=self.p2.id,
248.             rating=3.0
249.         )
250.         # Different DB backends return different types for the extra select computation
251.         self.assertIn(obj.manufacture_cost, (11.545, Decimal('11.545')))
252. 
253.         # Values queries can be combined with annotate and extra
254.         obj = Book.objects.annotate(mean_auth_age=Avg('authors__age')).extra(
255.             select={'manufacture_cost': 'price * .5'}).values().get(pk=self.b2.pk)
256.         manufacture_cost = obj['manufacture_cost']
257.         self.assertIn(manufacture_cost, (11.545, Decimal('11.545')))
258.         del obj['manufacture_cost']
259.         self.assertEqual(obj, {
260.             'id': self.b2.id,
261.             'contact_id': self.a3.id,
262.             'isbn': '067232959',
263.             'mean_auth_age': 45.0,
264.             'name': 'Sams Teach Yourself Django in 24 Hours',
265.             'pages': 528,
266.             'price': Decimal('23.09'),
267.             'pubdate': datetime.date(2008, 3, 3),
268.             'publisher_id': self.p2.id,
269.             'rating': 3.0,
270.         })
271. 
272.         # The order of the (empty) values, annotate and extra clauses doesn't
273.         # matter
274.         obj = Book.objects.values().annotate(mean_auth_age=Avg('authors__age')).extra(
275.             select={'manufacture_cost': 'price * .5'}).get(pk=self.b2.pk)
276.         manufacture_cost = obj['manufacture_cost']
277.         self.assertIn(manufacture_cost, (11.545, Decimal('11.545')))
278.         del obj['manufacture_cost']
279.         self.assertEqual(obj, {
280.             'id': self.b2.id,
281.             'contact_id': self.a3.id,
282.             'isbn': '067232959',
283.             'mean_auth_age': 45.0,
284.             'name': 'Sams Teach Yourself Django in 24 Hours',
285.             'pages': 528,
286.             'price': Decimal('23.09'),
287.             'pubdate': datetime.date(2008, 3, 3),
288.             'publisher_id': self.p2.id,
289.             'rating': 3.0
290.         })
291. 
292.         # If the annotation precedes the values clause, it won't be included
293.         # unless it is explicitly named
294.         obj = Book.objects.annotate(mean_auth_age=Avg('authors__age')).extra(
295.             select={'price_per_page': 'price / pages'}).values('name').get(pk=self.b1.pk)
296.         self.assertEqual(obj, {
297.             "name": 'The Definitive Guide to Django: Web Development Done Right',
298.         })
299. 
300.         obj = Book.objects.annotate(mean_auth_age=Avg('authors__age')).extra(
301.             select={'price_per_page': 'price / pages'}).values('name', 'mean_auth_age').get(pk=self.b1.pk)
302.         self.assertEqual(obj, {
303.             'mean_auth_age': 34.5,
304.             'name': 'The Definitive Guide to Django: Web Development Done Right',
305.         })
306. 
307.         # If an annotation isn't included in the values, it can still be used
308.         # in a filter
309.         qs = Book.objects.annotate(n_authors=Count('authors')).values('name').filter(n_authors__gt=2)
310.         self.assertSequenceEqual(
311.             qs, [
312.                 {"name": 'Python Web Development with Django'}
313.             ],
314.         )
315. 
316.         # The annotations are added to values output if values() precedes
317.         # annotate()
318.         obj = Book.objects.values('name').annotate(mean_auth_age=Avg('authors__age')).extra(
319.             select={'price_per_page': 'price / pages'}).get(pk=self.b1.pk)
320.         self.assertEqual(obj, {
321.             'mean_auth_age': 34.5,
322.             'name': 'The Definitive Guide to Django: Web Development Done Right',
323.         })
324. 
325.         # All of the objects are getting counted (allow_nulls) and that values
326.         # respects the amount of objects
327.         self.assertEqual(
328.             len(Author.objects.annotate(Avg('friends__age')).values()),
329.             9
330.         )
331. 
332.         # Consecutive calls to annotate accumulate in the query
333.         qs = (
334.             Book.objects
335.             .values('price')
336.             .annotate(oldest=Max('authors__age'))
337.             .order_by('oldest', 'price')
338.             .annotate(Max('publisher__num_awards'))
339.         )
340.         self.assertSequenceEqual(
341.             qs, [
342.                 {'price': Decimal("30"), 'oldest': 35, 'publisher__num_awards__max': 3},
343.                 {'price': Decimal("29.69"), 'oldest': 37, 'publisher__num_awards__max': 7},
344.                 {'price': Decimal("23.09"), 'oldest': 45, 'publisher__num_awards__max': 1},
345.                 {'price': Decimal("75"), 'oldest': 57, 'publisher__num_awards__max': 9},
346.                 {'price': Decimal("82.8"), 'oldest': 57, 'publisher__num_awards__max': 7}
347.             ],
348.         )
349. 
350.     def test_aggregate_annotation(self):
351.         # Aggregates can be composed over annotations.
352.         # The return type is derived from the composed aggregate
353.         vals = (
354.             Book.objects
355.             .all()
356.             .annotate(num_authors=Count('authors__id'))
357.             .aggregate(Max('pages'), Max('price'), Sum('num_authors'), Avg('num_authors'))
358.         )
359.         self.assertEqual(vals, {
360.             'num_authors__sum': 10,
361.             'num_authors__avg': Approximate(1.666, places=2),
362.             'pages__max': 1132,
363.             'price__max': Decimal("82.80")
364.         })
365. 
366.         # Regression for #15624 - Missing SELECT columns when using values, annotate
367.         # and aggregate in a single query
368.         self.assertEqual(
369.             Book.objects.annotate(c=Count('authors')).values('c').aggregate(Max('c')),
370.             {'c__max': 3}
371.         )
372. 
373.     def test_conditional_aggregate(self):
374.         # Conditional aggregation of a grouped queryset.
375.         self.assertEqual(
376.             Book.objects.annotate(c=Count('authors')).values('pk').aggregate(test=Sum(
377.                 Case(When(c__gt=1, then=1), output_field=IntegerField())
378.             ))['test'],
379.             3
380.         )
381. 
382.     def test_sliced_conditional_aggregate(self):
383.         self.assertEqual(
384.             Author.objects.all()[:5].aggregate(test=Sum(Case(
385.                 When(age__lte=35, then=1), output_field=IntegerField()
386.             )))['test'],
387.             3
388.         )
389. 
390.     def test_annotated_conditional_aggregate(self):
391.         annotated_qs = Book.objects.annotate(discount_price=F('price') * 0.75)
392.         self.assertAlmostEqual(
393.             annotated_qs.aggregate(test=Avg(Case(
394.                 When(pages__lt=400, then='discount_price'),
395.                 output_field=DecimalField()
396.             )))['test'],
397.             Decimal('22.27'), places=2
398.         )
399. 
400.     def test_distinct_conditional_aggregate(self):
401.         self.assertEqual(
402.             Book.objects.distinct().aggregate(test=Avg(Case(
403.                 When(price=Decimal('29.69'), then='pages'),
404.                 output_field=IntegerField()
405.             )))['test'],
406.             325
407.         )
408. 
409.     def test_conditional_aggregate_on_complex_condition(self):
410.         self.assertEqual(
411.             Book.objects.distinct().aggregate(test=Avg(Case(
412.                 When(Q(price__gte=Decimal('29')) & Q(price__lt=Decimal('30')), then='pages'),
413.                 output_field=IntegerField()
414.             )))['test'],
415.             325
416.         )
417. 
418.     def test_decimal_aggregate_annotation_filter(self):
419.         """
420.         Filtering on an aggregate annotation with Decimal values should work.
421.         Requires special handling on SQLite (#18247).
422.         """
423.         self.assertEqual(
424.             len(Author.objects.annotate(sum=Sum('book_contact_set__price')).filter(sum__gt=Decimal(40))),
425.             1
426.         )
427.         self.assertEqual(
428.             len(Author.objects.annotate(sum=Sum('book_contact_set__price')).filter(sum__lte=Decimal(40))),
429.             4
430.         )
431. 
432.     def test_field_error(self):
433.         # Bad field requests in aggregates are caught and reported
434.         msg = (
435.             "Cannot resolve keyword 'foo' into field. Choices are: authors, "
436.             "contact, contact_id, hardbackbook, id, isbn, name, pages, price, "
437.             "pubdate, publisher, publisher_id, rating, store, tags"
438.         )
439.         with self.assertRaisesMessage(FieldError, msg):
440.             Book.objects.all().aggregate(num_authors=Count('foo'))
441. 
442.         with self.assertRaisesMessage(FieldError, msg):
443.             Book.objects.all().annotate(num_authors=Count('foo'))
444. 
445.         msg = (
446.             "Cannot resolve keyword 'foo' into field. Choices are: authors, "
447.             "contact, contact_id, hardbackbook, id, isbn, name, num_authors, "
448.             "pages, price, pubdate, publisher, publisher_id, rating, store, tags"
449.         )
450.         with self.assertRaisesMessage(FieldError, msg):
451.             Book.objects.all().annotate(num_authors=Count('authors__id')).aggregate(Max('foo'))
452. 
453.     def test_more(self):
454.         # Old-style count aggregations can be mixed with new-style
455.         self.assertEqual(
456.             Book.objects.annotate(num_authors=Count('authors')).count(),
457.             6
458.         )
459. 
460.         # Non-ordinal, non-computed Aggregates over annotations correctly
461.         # inherit the annotation's internal type if the annotation is ordinal
462.         # or computed
463.         vals = Book.objects.annotate(num_authors=Count('authors')).aggregate(Max('num_authors'))
464.         self.assertEqual(
465.             vals,
466.             {'num_authors__max': 3}
467.         )
468. 
469.         vals = Publisher.objects.annotate(avg_price=Avg('book__price')).aggregate(Max('avg_price'))
470.         self.assertEqual(
471.             vals,
472.             {'avg_price__max': 75.0}
473.         )
474. 
475.         # Aliases are quoted to protected aliases that might be reserved names
476.         vals = Book.objects.aggregate(number=Max('pages'), select=Max('pages'))
477.         self.assertEqual(
478.             vals,
479.             {'number': 1132, 'select': 1132}
480.         )
481. 
482.         # Regression for #10064: select_related() plays nice with aggregates
483.         obj = Book.objects.select_related('publisher').annotate(
484.             num_authors=Count('authors')).values().get(isbn='013790395')
485.         self.assertEqual(obj, {
486.             'contact_id': self.a8.id,
487.             'id': self.b5.id,
488.             'isbn': '013790395',
489.             'name': 'Artificial Intelligence: A Modern Approach',
490.             'num_authors': 2,
491.             'pages': 1132,
492.             'price': Decimal("82.8"),
493.             'pubdate': datetime.date(1995, 1, 15),
494.             'publisher_id': self.p3.id,
495.             'rating': 4.0,
496.         })
497. 
498.         # Regression for #10010: exclude on an aggregate field is correctly
499.         # negated
500.         self.assertEqual(
501.             len(Book.objects.annotate(num_authors=Count('authors'))),
502.             6
503.         )
504.         self.assertEqual(
505.             len(Book.objects.annotate(num_authors=Count('authors')).filter(num_authors__gt=2)),
506.             1
507.         )
508.         self.assertEqual(
509.             len(Book.objects.annotate(num_authors=Count('authors')).exclude(num_authors__gt=2)),
510.             5
511.         )
512. 
513.         self.assertEqual(
514.             len(
515.                 Book.objects
516.                 .annotate(num_authors=Count('authors'))
517.                 .filter(num_authors__lt=3)
518.                 .exclude(num_authors__lt=2)
519.             ),
520.             2
521.         )
522.         self.assertEqual(
523.             len(
524.                 Book.objects
525.                 .annotate(num_authors=Count('authors'))
526.                 .exclude(num_authors__lt=2)
527.                 .filter(num_authors__lt=3)
528.             ),
529.             2
530.         )
531. 
532.     def test_aggregate_fexpr(self):
533.         # Aggregates can be used with F() expressions
534.         # ... where the F() is pushed into the HAVING clause
535.         qs = (
536.             Publisher.objects
537.             .annotate(num_books=Count('book'))
538.             .filter(num_books__lt=F('num_awards') / 2)
539.             .order_by('name')
540.             .values('name', 'num_books', 'num_awards')
541.         )
542.         self.assertSequenceEqual(
543.             qs, [
544.                 {'num_books': 1, 'name': 'Morgan Kaufmann', 'num_awards': 9},
545.                 {'num_books': 2, 'name': 'Prentice Hall', 'num_awards': 7}
546.             ],
547.         )
548. 
549.         qs = (
550.             Publisher.objects
551.             .annotate(num_books=Count('book'))
552.             .exclude(num_books__lt=F('num_awards') / 2)
553.             .order_by('name')
554.             .values('name', 'num_books', 'num_awards')
555.         )
556.         self.assertSequenceEqual(
557.             qs, [
558.                 {'num_books': 2, 'name': 'Apress', 'num_awards': 3},
559.                 {'num_books': 0, 'name': "Jonno's House of Books", 'num_awards': 0},
560.                 {'num_books': 1, 'name': 'Sams', 'num_awards': 1}
561.             ],
562.         )
563. 
564.         # ... and where the F() references an aggregate
565.         qs = (
566.             Publisher.objects
567.             .annotate(num_books=Count('book'))
568.             .filter(num_awards__gt=2 * F('num_books'))
569.             .order_by('name')
570.             .values('name', 'num_books', 'num_awards')
571.         )
572.         self.assertSequenceEqual(
573.             qs, [
574.                 {'num_books': 1, 'name': 'Morgan Kaufmann', 'num_awards': 9},
575.                 {'num_books': 2, 'name': 'Prentice Hall', 'num_awards': 7}
576.             ],
577.         )
578. 
579.         qs = (
580.             Publisher.objects
581.             .annotate(num_books=Count('book'))
582.             .exclude(num_books__lt=F('num_awards') / 2)
583.             .order_by('name')
584.             .values('name', 'num_books', 'num_awards')
585.         )
586.         self.assertSequenceEqual(
587.             qs, [
588.                 {'num_books': 2, 'name': 'Apress', 'num_awards': 3},
589.                 {'num_books': 0, 'name': "Jonno's House of Books", 'num_awards': 0},
590.                 {'num_books': 1, 'name': 'Sams', 'num_awards': 1}
591.             ],
592.         )
593. 
594.     def test_db_col_table(self):
595.         # Tests on fields with non-default table and column names.
596.         qs = (
597.             Clues.objects
598.             .values('EntryID__Entry')
599.             .annotate(Appearances=Count('EntryID'), Distinct_Clues=Count('Clue', distinct=True))
600.         )
601.         self.assertQuerysetEqual(qs, [])
602. 
603.         qs = Entries.objects.annotate(clue_count=Count('clues__ID'))
604.         self.assertQuerysetEqual(qs, [])
605. 
606.     def test_boolean_conversion(self):
607.         # Aggregates mixed up ordering of columns for backend's convert_values
608.         # method. Refs #21126.
609.         e = Entries.objects.create(Entry='foo')
610.         c = Clues.objects.create(EntryID=e, Clue='bar')
611.         qs = Clues.objects.select_related('EntryID').annotate(Count('ID'))
612.         self.assertSequenceEqual(qs, [c])
613.         self.assertEqual(qs[0].EntryID, e)
614.         self.assertIs(qs[0].EntryID.Exclude, False)
615. 
616.     def test_empty(self):
617.         # Regression for #10089: Check handling of empty result sets with
618.         # aggregates
619.         self.assertEqual(
620.             Book.objects.filter(id__in=[]).count(),
621.             0
622.         )
623. 
624.         vals = (
625.             Book.objects
626.             .filter(id__in=[])
627.             .aggregate(
628.                 num_authors=Count('authors'),
629.                 avg_authors=Avg('authors'),
630.                 max_authors=Max('authors'),
631.                 max_price=Max('price'),
632.                 max_rating=Max('rating'),
633.             )
634.         )
635.         self.assertEqual(
636.             vals,
637.             {'max_authors': None, 'max_rating': None, 'num_authors': 0, 'avg_authors': None, 'max_price': None}
638.         )
639. 
640.         qs = (
641.             Publisher.objects
642.             .filter(name="Jonno's House of Books")
643.             .annotate(
644.                 num_authors=Count('book__authors'),
645.                 avg_authors=Avg('book__authors'),
646.                 max_authors=Max('book__authors'),
647.                 max_price=Max('book__price'),
648.                 max_rating=Max('book__rating'),
649.             ).values()
650.         )
651.         self.assertSequenceEqual(
652.             qs,
653.             [{
654.                 'max_authors': None,
655.                 'name': "Jonno's House of Books",
656.                 'num_awards': 0,
657.                 'max_price': None,
658.                 'num_authors': 0,
659.                 'max_rating': None,
660.                 'id': self.p5.id,
661.                 'avg_authors': None,
662.             }],
663.         )
664. 
665.     def test_more_more(self):
666.         # Regression for #10113 - Fields mentioned in order_by() must be
667.         # included in the GROUP BY. This only becomes a problem when the
668.         # order_by introduces a new join.
669.         self.assertQuerysetEqual(
670.             Book.objects.annotate(num_authors=Count('authors')).order_by('publisher__name', 'name'), [
671.                 "Practical Django Projects",
672.                 "The Definitive Guide to Django: Web Development Done Right",
673.                 "Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp",
674.                 "Artificial Intelligence: A Modern Approach",
675.                 "Python Web Development with Django",
676.                 "Sams Teach Yourself Django in 24 Hours",
677.             ],
678.             lambda b: b.name
679.         )
680. 
681.         # Regression for #10127 - Empty select_related() works with annotate
682.         qs = Book.objects.filter(rating__lt=4.5).select_related().annotate(Avg('authors__age')).order_by('name')
683.         self.assertQuerysetEqual(
684.             qs,
685.             [
686.                 ('Artificial Intelligence: A Modern Approach', 51.5, 'Prentice Hall', 'Peter Norvig'),
687.                 ('Practical Django Projects', 29.0, 'Apress', 'James Bennett'),
688.                 (
689.                     'Python Web Development with Django',
690.                     Approximate(30.333, places=2),
691.                     'Prentice Hall',
692.                     'Jeffrey Forcier',
693.                 ),
694.                 ('Sams Teach Yourself Django in 24 Hours', 45.0, 'Sams', 'Brad Dayley')
695.             ],
696.             lambda b: (b.name, b.authors__age__avg, b.publisher.name, b.contact.name)
697.         )
698. 
699.         # Regression for #10132 - If the values() clause only mentioned extra
700.         # (select=) columns, those columns are used for grouping
701.         qs = Book.objects.extra(select={'pub': 'publisher_id'}).values('pub').annotate(Count('id')).order_by('pub')
702.         self.assertSequenceEqual(
703.             qs, [
704.                 {'pub': self.b1.id, 'id__count': 2},
705.                 {'pub': self.b2.id, 'id__count': 1},
706.                 {'pub': self.b3.id, 'id__count': 2},
707.                 {'pub': self.b4.id, 'id__count': 1}
708.             ],
709.         )
710. 
711.         qs = (
712.             Book.objects
713.             .extra(select={'pub': 'publisher_id', 'foo': 'pages'})
714.             .values('pub')
715.             .annotate(Count('id'))
716.             .order_by('pub')
717.         )
718.         self.assertSequenceEqual(
719.             qs, [
720.                 {'pub': self.p1.id, 'id__count': 2},
721.                 {'pub': self.p2.id, 'id__count': 1},
722.                 {'pub': self.p3.id, 'id__count': 2},
723.                 {'pub': self.p4.id, 'id__count': 1}
724.             ],
725.         )
726. 
727.         # Regression for #10182 - Queries with aggregate calls are correctly
728.         # realiased when used in a subquery
729.         ids = (
730.             Book.objects
731.             .filter(pages__gt=100)
732.             .annotate(n_authors=Count('authors'))
733.             .filter(n_authors__gt=2)
734.             .order_by('n_authors')
735.         )
736.         self.assertQuerysetEqual(
737.             Book.objects.filter(id__in=ids), [
738.                 "Python Web Development with Django",
739.             ],
740.             lambda b: b.name
741.         )
742. 
743.         # Regression for #15709 - Ensure each group_by field only exists once
744.         # per query
745.         qstr = str(Book.objects.values('publisher').annotate(max_pages=Max('pages')).order_by().query)
746.         # There is just one GROUP BY clause (zero commas means at most one clause).
747.         self.assertEqual(qstr[qstr.index('GROUP BY'):].count(', '), 0)
748. 
749.     def test_duplicate_alias(self):
750.         # Regression for #11256 - duplicating a default alias raises ValueError.
751.         msg = (
752.             "The named annotation 'authors__age__avg' conflicts with "
753.             "the default name for another annotation."
754.         )
755.         with self.assertRaisesMessage(ValueError, msg):
756.             Book.objects.all().annotate(Avg('authors__age'), authors__age__avg=Avg('authors__age'))
757. 
758.     def test_field_name_conflict(self):
759.         # Regression for #11256 - providing an aggregate name
760.         # that conflicts with a field name on the model raises ValueError
761.         msg = "The annotation 'age' conflicts with a field on the model."
762.         with self.assertRaisesMessage(ValueError, msg):
763.             Author.objects.annotate(age=Avg('friends__age'))
764. 
765.     def test_m2m_name_conflict(self):
766.         # Regression for #11256 - providing an aggregate name
767.         # that conflicts with an m2m name on the model raises ValueError
768.         msg = "The annotation 'friends' conflicts with a field on the model."
769.         with self.assertRaisesMessage(ValueError, msg):
770.             Author.objects.annotate(friends=Count('friends'))
771. 
772.     def test_fk_attname_conflict(self):
773.         msg = "The annotation 'contact_id' conflicts with a field on the model."
774.         with self.assertRaisesMessage(ValueError, msg):
775.             Book.objects.annotate(contact_id=F('publisher_id'))
776. 
777.     def test_values_queryset_non_conflict(self):
778.         # Regression for #14707 -- If you're using a values query set, some potential conflicts are avoided.
779. 
780.         # age is a field on Author, so it shouldn't be allowed as an aggregate.
781.         # But age isn't included in values(), so it is.
782.         results = Author.objects.values('name').annotate(age=Count('book_contact_set')).order_by('name')
783.         self.assertEqual(len(results), 9)
784.         self.assertEqual(results[0]['name'], 'Adrian Holovaty')
785.         self.assertEqual(results[0]['age'], 1)
786. 
787.         # Same problem, but aggregating over m2m fields
788.         results = Author.objects.values('name').annotate(age=Avg('friends__age')).order_by('name')
789.         self.assertEqual(len(results), 9)
790.         self.assertEqual(results[0]['name'], 'Adrian Holovaty')
791.         self.assertEqual(results[0]['age'], 32.0)
792. 
793.         # Same problem, but colliding with an m2m field
794.         results = Author.objects.values('name').annotate(friends=Count('friends')).order_by('name')
795.         self.assertEqual(len(results), 9)
796.         self.assertEqual(results[0]['name'], 'Adrian Holovaty')
797.         self.assertEqual(results[0]['friends'], 2)
798. 
799.     def test_reverse_relation_name_conflict(self):
800.         # Regression for #11256 - providing an aggregate name
801.         # that conflicts with a reverse-related name on the model raises ValueError
802.         msg = "The annotation 'book_contact_set' conflicts with a field on the model."
803.         with self.assertRaisesMessage(ValueError, msg):
804.             Author.objects.annotate(book_contact_set=Avg('friends__age'))
805. 
806.     def test_pickle(self):
807.         # Regression for #10197 -- Queries with aggregates can be pickled.
808.         # First check that pickling is possible at all. No crash = success
809.         qs = Book.objects.annotate(num_authors=Count('authors'))
810.         pickle.dumps(qs)
811. 
812.         # Then check that the round trip works.
813.         query = qs.query.get_compiler(qs.db).as_sql()[0]
814.         qs2 = pickle.loads(pickle.dumps(qs))
815.         self.assertEqual(
816.             qs2.query.get_compiler(qs2.db).as_sql()[0],
817.             query,
818.         )
819. 
820.     def test_more_more_more(self):
821.         # Regression for #10199 - Aggregate calls clone the original query so
822.         # the original query can still be used
823.         books = Book.objects.all()
824.         books.aggregate(Avg("authors__age"))
825.         self.assertQuerysetEqual(
826.             books.all(), [
827.                 'Artificial Intelligence: A Modern Approach',
828.                 'Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
829.                 'Practical Django Projects',
830.                 'Python Web Development with Django',
831.                 'Sams Teach Yourself Django in 24 Hours',
832.                 'The Definitive Guide to Django: Web Development Done Right'
833.             ],
834.             lambda b: b.name
835.         )
836. 
837.         # Regression for #10248 - Annotations work with dates()
838.         qs = Book.objects.annotate(num_authors=Count('authors')).filter(num_authors=2).dates('pubdate', 'day')
839.         self.assertSequenceEqual(
840.             qs, [
841.                 datetime.date(1995, 1, 15),
842.                 datetime.date(2007, 12, 6),
843.             ],
844.         )
845. 
846.         # Regression for #10290 - extra selects with parameters can be used for
847.         # grouping.
848.         qs = (
849.             Book.objects
850.             .annotate(mean_auth_age=Avg('authors__age'))
851.             .extra(select={'sheets': '(pages + %s) / %s'}, select_params=[1, 2])
852.             .order_by('sheets')
853.             .values('sheets')
854.         )
855.         self.assertQuerysetEqual(
856.             qs, [
857.                 150,
858.                 175,
859.                 224,
860.                 264,
861.                 473,
862.                 566
863.             ],
864.             lambda b: int(b["sheets"])
865.         )
866. 
867.         # Regression for 10425 - annotations don't get in the way of a count()
868.         # clause
869.         self.assertEqual(
870.             Book.objects.values('publisher').annotate(Count('publisher')).count(),
871.             4
872.         )
873.         self.assertEqual(
874.             Book.objects.annotate(Count('publisher')).values('publisher').count(),
875.             6
876.         )
877. 
878.         # Note: intentionally no order_by(), that case needs tests, too.
879.         publishers = Publisher.objects.filter(id__in=[1, 2])
880.         self.assertEqual(
881.             sorted(p.name for p in publishers),
882.             [
883.                 "Apress",
884.                 "Sams"
885.             ]
886.         )
887. 
888.         publishers = publishers.annotate(n_books=Count("book"))
889.         sorted_publishers = sorted(publishers, key=lambda x: x.name)
890.         self.assertEqual(
891.             sorted_publishers[0].n_books,
892.             2
893.         )
894.         self.assertEqual(
895.             sorted_publishers[1].n_books,
896.             1
897.         )
898. 
899.         self.assertEqual(
900.             sorted(p.name for p in publishers),
901.             [
902.                 "Apress",
903.                 "Sams"
904.             ]
905.         )
906. 
907.         books = Book.objects.filter(publisher__in=publishers)
908.         self.assertQuerysetEqual(
909.             books, [
910.                 "Practical Django Projects",
911.                 "Sams Teach Yourself Django in 24 Hours",
912.                 "The Definitive Guide to Django: Web Development Done Right",
913.             ],
914.             lambda b: b.name
915.         )
916.         self.assertEqual(
917.             sorted(p.name for p in publishers),
918.             [
919.                 "Apress",
920.                 "Sams"
921.             ]
922.         )
923. 
924.         # Regression for 10666 - inherited fields work with annotations and
925.         # aggregations
926.         self.assertEqual(
927.             HardbackBook.objects.aggregate(n_pages=Sum('book_ptr__pages')),
928.             {'n_pages': 2078}
929.         )
930. 
931.         self.assertEqual(
932.             HardbackBook.objects.aggregate(n_pages=Sum('pages')),
933.             {'n_pages': 2078},
934.         )
935. 
936.         qs = HardbackBook.objects.annotate(
937.             n_authors=Count('book_ptr__authors'),
938.         ).values('name', 'n_authors').order_by('name')
939.         self.assertSequenceEqual(
940.             qs,
941.             [
942.                 {'n_authors': 2, 'name': 'Artificial Intelligence: A Modern Approach'},
943.                 {
944.                     'n_authors': 1,
945.                     'name': 'Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp'
946.                 }
947.             ],
948.         )
949. 
950.         qs = HardbackBook.objects.annotate(n_authors=Count('authors')).values('name', 'n_authors').order_by('name')
951.         self.assertSequenceEqual(
952.             qs,
953.             [
954.                 {'n_authors': 2, 'name': 'Artificial Intelligence: A Modern Approach'},
955.                 {
956.                     'n_authors': 1,
957.                     'name': 'Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp'
958.                 }
959.             ],
960.         )
961. 
962.         # Regression for #10766 - Shouldn't be able to reference an aggregate
963.         # fields in an aggregate() call.
964.         msg = "Cannot compute Avg('mean_age'): 'mean_age' is an aggregate"
965.         with self.assertRaisesMessage(FieldError, msg):
966.             Book.objects.annotate(mean_age=Avg('authors__age')).annotate(Avg('mean_age'))
967. 
968.     def test_empty_filter_count(self):
969.         self.assertEqual(
970.             Author.objects.filter(id__in=[]).annotate(Count("friends")).count(),
971.             0
972.         )
973. 
974.     def test_empty_filter_aggregate(self):
975.         self.assertEqual(
976.             Author.objects.filter(id__in=[]).annotate(Count("friends")).aggregate(Count("pk")),
977.             {"pk__count": None}
978.         )
979. 
980.     def test_none_call_before_aggregate(self):
981.         # Regression for #11789
982.         self.assertEqual(
983.             Author.objects.none().aggregate(Avg('age')),
984.             {'age__avg': None}
985.         )
986. 
987.     def test_annotate_and_join(self):
988.         self.assertEqual(
989.             Author.objects.annotate(c=Count("friends__name")).exclude(friends__name="Joe").count(),
990.             Author.objects.count()
991.         )
992. 
993.     def test_f_expression_annotation(self):
994.         # Books with less than 200 pages per author.
995.         qs = Book.objects.values("name").annotate(
996.             n_authors=Count("authors")
997.         ).filter(
998.             pages__lt=F("n_authors") * 200
999.         ).values_list("pk")
1000.         self.assertQuerysetEqual(
1001.             Book.objects.filter(pk__in=qs), [
1002.                 "Python Web Development with Django"
1003.             ],
1004.             attrgetter("name")
1005.         )
1006. 
1007.     def test_values_annotate_values(self):
1008.         qs = Book.objects.values("name").annotate(
1009.             n_authors=Count("authors")
1010.         ).values_list("pk", flat=True).order_by('name')
1011.         self.assertEqual(list(qs), list(Book.objects.values_list("pk", flat=True)))
1012. 
1013.     def test_having_group_by(self):
1014.         # When a field occurs on the LHS of a HAVING clause that it
1015.         # appears correctly in the GROUP BY clause
1016.         qs = Book.objects.values_list("name").annotate(
1017.             n_authors=Count("authors")
1018.         ).filter(
1019.             pages__gt=F("n_authors")
1020.         ).values_list("name", flat=True).order_by('name')
1021.         # Results should be the same, all Books have more pages than authors
1022.         self.assertEqual(
1023.             list(qs), list(Book.objects.values_list("name", flat=True))
1024.         )
1025. 
1026.     def test_values_list_annotation_args_ordering(self):
1027.         """
1028.         Annotate *args ordering should be preserved in values_list results.
1029.         **kwargs comes after *args.
1030.         Regression test for #23659.
1031.         """
1032.         books = Book.objects.values_list("publisher__name").annotate(
1033.             Count("id"), Avg("price"), Avg("authors__age"), avg_pgs=Avg("pages")
1034.         ).order_by("-publisher__name")
1035.         self.assertEqual(books[0], ('Sams', 1, Decimal('23.09'), 45.0, 528.0))
1036. 
1037.     def test_annotation_disjunction(self):
1038.         qs = Book.objects.annotate(n_authors=Count("authors")).filter(
1039.             Q(n_authors=2) | Q(name="Python Web Development with Django")
1040.         ).order_by('name')
1041.         self.assertQuerysetEqual(
1042.             qs, [
1043.                 "Artificial Intelligence: A Modern Approach",
1044.                 "Python Web Development with Django",
1045.                 "The Definitive Guide to Django: Web Development Done Right",
1046.             ],
1047.             attrgetter("name")
1048.         )
1049. 
1050.         qs = (
1051.             Book.objects
1052.             .annotate(n_authors=Count("authors"))
1053.             .filter(
1054.                 Q(name="The Definitive Guide to Django: Web Development Done Right") |
1055.                 (Q(name="Artificial Intelligence: A Modern Approach") & Q(n_authors=3))
1056.             )
1057.         ).order_by('name')
1058.         self.assertQuerysetEqual(
1059.             qs,
1060.             [
1061.                 "The Definitive Guide to Django: Web Development Done Right",
1062.             ],
1063.             attrgetter("name")
1064.         )
1065. 
1066.         qs = Publisher.objects.annotate(
1067.             rating_sum=Sum("book__rating"),
1068.             book_count=Count("book")
1069.         ).filter(
1070.             Q(rating_sum__gt=5.5) | Q(rating_sum__isnull=True)
1071.         ).order_by('pk')
1072.         self.assertQuerysetEqual(
1073.             qs, [
1074.                 "Apress",
1075.                 "Prentice Hall",
1076.                 "Jonno's House of Books",
1077.             ],
1078.             attrgetter("name")
1079.         )
1080. 
1081.         qs = Publisher.objects.annotate(
1082.             rating_sum=Sum("book__rating"),
1083.             book_count=Count("book")
1084.         ).filter(
1085.             Q(rating_sum__gt=F("book_count")) | Q(rating_sum=None)
1086.         ).order_by("num_awards")
1087.         self.assertQuerysetEqual(
1088.             qs, [
1089.                 "Jonno's House of Books",
1090.                 "Sams",
1091.                 "Apress",
1092.                 "Prentice Hall",
1093.                 "Morgan Kaufmann"
1094.             ],
1095.             attrgetter("name")
1096.         )
1097. 
1098.     def test_quoting_aggregate_order_by(self):
1099.         qs = Book.objects.filter(
1100.             name="Python Web Development with Django"
1101.         ).annotate(
1102.             authorCount=Count("authors")
1103.         ).order_by("authorCount")
1104.         self.assertQuerysetEqual(
1105.             qs, [
1106.                 ("Python Web Development with Django", 3),
1107.             ],
1108.             lambda b: (b.name, b.authorCount)
1109.         )
1110. 
1111.     def test_stddev(self):
1112.         self.assertEqual(
1113.             Book.objects.aggregate(StdDev('pages')),
1114.             {'pages__stddev': Approximate(311.46, 1)}
1115.         )
1116. 
1117.         self.assertEqual(
1118.             Book.objects.aggregate(StdDev('rating')),
1119.             {'rating__stddev': Approximate(0.60, 1)}
1120.         )
1121. 
1122.         self.assertEqual(
1123.             Book.objects.aggregate(StdDev('price')),
1124.             {'price__stddev': Approximate(Decimal('24.16'), 2)}
1125.         )
1126. 
1127.         self.assertEqual(
1128.             Book.objects.aggregate(StdDev('pages', sample=True)),
1129.             {'pages__stddev': Approximate(341.19, 2)}
1130.         )
1131. 
1132.         self.assertEqual(
1133.             Book.objects.aggregate(StdDev('rating', sample=True)),
1134.             {'rating__stddev': Approximate(0.66, 2)}
1135.         )
1136. 
1137.         self.assertEqual(
1138.             Book.objects.aggregate(StdDev('price', sample=True)),
1139.             {'price__stddev': Approximate(Decimal('26.46'), 1)}
1140.         )
1141. 
1142.         self.assertEqual(
1143.             Book.objects.aggregate(Variance('pages')),
1144.             {'pages__variance': Approximate(97010.80, 1)}
1145.         )
1146. 
1147.         self.assertEqual(
1148.             Book.objects.aggregate(Variance('rating')),
1149.             {'rating__variance': Approximate(0.36, 1)}
1150.         )
1151. 
1152.         self.assertEqual(
1153.             Book.objects.aggregate(Variance('price')),
1154.             {'price__variance': Approximate(Decimal('583.77'), 1)}
1155.         )
1156. 
1157.         self.assertEqual(
1158.             Book.objects.aggregate(Variance('pages', sample=True)),
1159.             {'pages__variance': Approximate(116412.96, 1)}
1160.         )
1161. 
1162.         self.assertEqual(
1163.             Book.objects.aggregate(Variance('rating', sample=True)),
1164.             {'rating__variance': Approximate(0.44, 2)}
1165.         )
1166. 
1167.         self.assertEqual(
1168.             Book.objects.aggregate(Variance('price', sample=True)),
1169.             {'price__variance': Approximate(Decimal('700.53'), 2)}
1170.         )
1171. 
1172.     def test_filtering_by_annotation_name(self):
1173.         # Regression test for #14476
1174. 
1175.         # The name of the explicitly provided annotation name in this case
1176.         # poses no problem
1177.         qs = Author.objects.annotate(book_cnt=Count('book')).filter(book_cnt=2).order_by('name')
1178.         self.assertQuerysetEqual(
1179.             qs,
1180.             ['Peter Norvig'],
1181.             lambda b: b.name
1182.         )
1183.         # Neither in this case
1184.         qs = Author.objects.annotate(book_count=Count('book')).filter(book_count=2).order_by('name')
1185.         self.assertQuerysetEqual(
1186.             qs,
1187.             ['Peter Norvig'],
1188.             lambda b: b.name
1189.         )
1190.         # This case used to fail because the ORM couldn't resolve the
1191.         # automatically generated annotation name `book__count`
1192.         qs = Author.objects.annotate(Count('book')).filter(book__count=2).order_by('name')
1193.         self.assertQuerysetEqual(
1194.             qs,
1195.             ['Peter Norvig'],
1196.             lambda b: b.name
1197.         )
1198.         # Referencing the auto-generated name in an aggregate() also works.
1199.         self.assertEqual(
1200.             Author.objects.annotate(Count('book')).aggregate(Max('book__count')),
1201.             {'book__count__max': 2}
1202.         )
1203. 
1204.     def test_annotate_joins(self):
1205.         """
1206.         The base table's join isn't promoted to LOUTER. This could
1207.         cause the query generation to fail if there is an exclude() for fk-field
1208.         in the query, too. Refs #19087.
1209.         """
1210.         qs = Book.objects.annotate(n=Count('pk'))
1211.         self.assertIs(qs.query.alias_map['aggregation_regress_book'].join_type, None)
1212.         # The query executes without problems.
1213.         self.assertEqual(len(qs.exclude(publisher=-1)), 6)
1214. 
1215.     @skipUnlessAnyDBFeature('allows_group_by_pk', 'allows_group_by_selected_pks')
1216.     def test_aggregate_duplicate_columns(self):
1217.         # Regression test for #17144
1218. 
1219.         results = Author.objects.annotate(num_contacts=Count('book_contact_set'))
1220. 
1221.         # There should only be one GROUP BY clause, for the `id` column.
1222.         # `name` and `age` should not be grouped on.
1223.         _, _, group_by = results.query.get_compiler(using='default').pre_sql_setup()
1224.         self.assertEqual(len(group_by), 1)
1225.         self.assertIn('id', group_by[0][0])
1226.         self.assertNotIn('name', group_by[0][0])
1227.         self.assertNotIn('age', group_by[0][0])
1228.         self.assertEqual(
1229.             [(a.name, a.num_contacts) for a in results.order_by('name')],
1230.             [
1231.                 ('Adrian Holovaty', 1),
1232.                 ('Brad Dayley', 1),
1233.                 ('Jacob Kaplan-Moss', 0),
1234.                 ('James Bennett', 1),
1235.                 ('Jeffrey Forcier', 1),
1236.                 ('Paul Bissex', 0),
1237.                 ('Peter Norvig', 2),
1238.                 ('Stuart Russell', 0),
1239.                 ('Wesley J. Chun', 0),
1240.             ]
1241.         )
1242. 
1243.     @skipUnlessAnyDBFeature('allows_group_by_pk', 'allows_group_by_selected_pks')
1244.     def test_aggregate_duplicate_columns_only(self):
1245.         # Works with only() too.
1246.         results = Author.objects.only('id', 'name').annotate(num_contacts=Count('book_contact_set'))
1247.         _, _, grouping = results.query.get_compiler(using='default').pre_sql_setup()
1248.         self.assertEqual(len(grouping), 1)
1249.         self.assertIn('id', grouping[0][0])
1250.         self.assertNotIn('name', grouping[0][0])
1251.         self.assertNotIn('age', grouping[0][0])
1252.         self.assertEqual(
1253.             [(a.name, a.num_contacts) for a in results.order_by('name')],
1254.             [
1255.                 ('Adrian Holovaty', 1),
1256.                 ('Brad Dayley', 1),
1257.                 ('Jacob Kaplan-Moss', 0),
1258.                 ('James Bennett', 1),
1259.                 ('Jeffrey Forcier', 1),
1260.                 ('Paul Bissex', 0),
1261.                 ('Peter Norvig', 2),
1262.                 ('Stuart Russell', 0),
1263.                 ('Wesley J. Chun', 0),
1264.             ]
1265.         )
1266. 
1267.     @skipUnlessAnyDBFeature('allows_group_by_pk', 'allows_group_by_selected_pks')
1268.     def test_aggregate_duplicate_columns_select_related(self):
1269.         # And select_related()
1270.         results = Book.objects.select_related('contact').annotate(
1271.             num_authors=Count('authors'))
1272.         _, _, grouping = results.query.get_compiler(using='default').pre_sql_setup()
1273.         # In the case of `group_by_selected_pks` we also group by contact.id because of the select_related.
1274.         self.assertEqual(len(grouping), 1 if connection.features.allows_group_by_pk else 2)
1275.         self.assertIn('id', grouping[0][0])
1276.         self.assertNotIn('name', grouping[0][0])
1277.         self.assertNotIn('contact', grouping[0][0])
1278.         self.assertEqual(
1279.             [(b.name, b.num_authors) for b in results.order_by('name')],
1280.             [
1281.                 ('Artificial Intelligence: A Modern Approach', 2),
1282.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1283.                 ('Practical Django Projects', 1),
1284.                 ('Python Web Development with Django', 3),
1285.                 ('Sams Teach Yourself Django in 24 Hours', 1),
1286.                 ('The Definitive Guide to Django: Web Development Done Right', 2)
1287.             ]
1288.         )
1289. 
1290.     @skipUnlessDBFeature('allows_group_by_selected_pks')
1291.     def test_aggregate_unmanaged_model_columns(self):
1292.         """
1293.         Unmanaged models are sometimes used to represent database views which
1294.         may not allow grouping by selected primary key.
1295.         """
1296.         def assertQuerysetResults(queryset):
1297.             self.assertEqual(
1298.                 [(b.name, b.num_authors) for b in queryset.order_by('name')],
1299.                 [
1300.                     ('Artificial Intelligence: A Modern Approach', 2),
1301.                     ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1302.                     ('Practical Django Projects', 1),
1303.                     ('Python Web Development with Django', 3),
1304.                     ('Sams Teach Yourself Django in 24 Hours', 1),
1305.                     ('The Definitive Guide to Django: Web Development Done Right', 2),
1306.                 ]
1307.             )
1308.         queryset = Book.objects.select_related('contact').annotate(num_authors=Count('authors'))
1309.         # Unmanaged origin model.
1310.         with mock.patch.object(Book._meta, 'managed', False):
1311.             _, _, grouping = queryset.query.get_compiler(using='default').pre_sql_setup()
1312.             self.assertEqual(len(grouping), len(Book._meta.fields) + 1)
1313.             for index, field in enumerate(Book._meta.fields):
1314.                 self.assertIn(field.name, grouping[index][0])
1315.             self.assertIn(Author._meta.pk.name, grouping[-1][0])
1316.             assertQuerysetResults(queryset)
1317.         # Unmanaged related model.
1318.         with mock.patch.object(Author._meta, 'managed', False):
1319.             _, _, grouping = queryset.query.get_compiler(using='default').pre_sql_setup()
1320.             self.assertEqual(len(grouping), len(Author._meta.fields) + 1)
1321.             self.assertIn(Book._meta.pk.name, grouping[0][0])
1322.             for index, field in enumerate(Author._meta.fields):
1323.                 self.assertIn(field.name, grouping[index + 1][0])
1324.             assertQuerysetResults(queryset)
1325. 
1326.     @skipUnlessDBFeature('allows_group_by_selected_pks')
1327.     def test_aggregate_unmanaged_model_as_tables(self):
1328.         qs = Book.objects.select_related('contact').annotate(num_authors=Count('authors'))
1329.         # Force treating unmanaged models as tables.
1330.         with mock.patch(
1331.             'django.db.connection.features.allows_group_by_selected_pks_on_model',
1332.             return_value=True,
1333.         ):
1334.             with mock.patch.object(Book._meta, 'managed', False), \
1335.                     mock.patch.object(Author._meta, 'managed', False):
1336.                 _, _, grouping = qs.query.get_compiler(using='default').pre_sql_setup()
1337.                 self.assertEqual(len(grouping), 2)
1338.                 self.assertIn('id', grouping[0][0])
1339.                 self.assertIn('id', grouping[1][0])
1340.                 self.assertQuerysetEqual(
1341.                     qs.order_by('name'),
1342.                     [
1343.                         ('Artificial Intelligence: A Modern Approach', 2),
1344.                         ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1345.                         ('Practical Django Projects', 1),
1346.                         ('Python Web Development with Django', 3),
1347.                         ('Sams Teach Yourself Django in 24 Hours', 1),
1348.                         ('The Definitive Guide to Django: Web Development Done Right', 2),
1349.                     ],
1350.                     attrgetter('name', 'num_authors'),
1351.                 )
1352. 
1353.     def test_reverse_join_trimming(self):
1354.         qs = Author.objects.annotate(Count('book_contact_set__contact'))
1355.         self.assertIn(' JOIN ', str(qs.query))
1356. 
1357.     def test_aggregation_with_generic_reverse_relation(self):
1358.         """
1359.         Regression test for #10870:  Aggregates with joins ignore extra
1360.         filters provided by setup_joins
1361. 
1362.         tests aggregations with generic reverse relations
1363.         """
1364.         django_book = Book.objects.get(name='Practical Django Projects')
1365.         ItemTag.objects.create(
1366.             object_id=django_book.id, tag='intermediate',
1367.             content_type=ContentType.objects.get_for_model(django_book),
1368.         )
1369.         ItemTag.objects.create(
1370.             object_id=django_book.id, tag='django',
1371.             content_type=ContentType.objects.get_for_model(django_book),
1372.         )
1373.         # Assign a tag to model with same PK as the book above. If the JOIN
1374.         # used in aggregation doesn't have content type as part of the
1375.         # condition the annotation will also count the 'hi mom' tag for b.
1376.         wmpk = WithManualPK.objects.create(id=django_book.pk)
1377.         ItemTag.objects.create(
1378.             object_id=wmpk.id, tag='hi mom',
1379.             content_type=ContentType.objects.get_for_model(wmpk),
1380.         )
1381.         ai_book = Book.objects.get(name__startswith='Paradigms of Artificial Intelligence')
1382.         ItemTag.objects.create(
1383.             object_id=ai_book.id, tag='intermediate',
1384.             content_type=ContentType.objects.get_for_model(ai_book),
1385.         )
1386. 
1387.         self.assertEqual(Book.objects.aggregate(Count('tags')), {'tags__count': 3})
1388.         results = Book.objects.annotate(Count('tags')).order_by('-tags__count', 'name')
1389.         self.assertEqual(
1390.             [(b.name, b.tags__count) for b in results],
1391.             [
1392.                 ('Practical Django Projects', 2),
1393.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
1394.                 ('Artificial Intelligence: A Modern Approach', 0),
1395.                 ('Python Web Development with Django', 0),
1396.                 ('Sams Teach Yourself Django in 24 Hours', 0),
1397.                 ('The Definitive Guide to Django: Web Development Done Right', 0)
1398.             ]
1399.         )
1400. 
1401.     def test_negated_aggregation(self):
1402.         expected_results = Author.objects.exclude(
1403.             pk__in=Author.objects.annotate(book_cnt=Count('book')).filter(book_cnt=2)
1404.         ).order_by('name')
1405.         expected_results = [a.name for a in expected_results]
1406.         qs = Author.objects.annotate(book_cnt=Count('book')).exclude(
1407.             Q(book_cnt=2), Q(book_cnt=2)).order_by('name')
1408.         self.assertQuerysetEqual(
1409.             qs,
1410.             expected_results,
1411.             lambda b: b.name
1412.         )
1413.         expected_results = Author.objects.exclude(
1414.             pk__in=Author.objects.annotate(book_cnt=Count('book')).filter(book_cnt=2)
1415.         ).order_by('name')
1416.         expected_results = [a.name for a in expected_results]
1417.         qs = Author.objects.annotate(book_cnt=Count('book')).exclude(Q(book_cnt=2) | Q(book_cnt=2)).order_by('name')
1418.         self.assertQuerysetEqual(
1419.             qs,
1420.             expected_results,
1421.             lambda b: b.name
1422.         )
1423. 
1424.     def test_name_filters(self):
1425.         qs = Author.objects.annotate(Count('book')).filter(
1426.             Q(book__count__exact=2) | Q(name='Adrian Holovaty')
1427.         ).order_by('name')
1428.         self.assertQuerysetEqual(
1429.             qs,
1430.             ['Adrian Holovaty', 'Peter Norvig'],
1431.             lambda b: b.name
1432.         )
1433. 
1434.     def test_name_expressions(self):
1435.         # Aggregates are spotted correctly from F objects.
1436.         # Note that Adrian's age is 34 in the fixtures, and he has one book
1437.         # so both conditions match one author.
1438.         qs = Author.objects.annotate(Count('book')).filter(
1439.             Q(name='Peter Norvig') | Q(age=F('book__count') + 33)
1440.         ).order_by('name')
1441.         self.assertQuerysetEqual(
1442.             qs,
1443.             ['Adrian Holovaty', 'Peter Norvig'],
1444.             lambda b: b.name
1445.         )
1446. 
1447.     def test_ticket_11293(self):
1448.         q1 = Q(price__gt=50)
1449.         q2 = Q(authors__count__gt=1)
1450.         query = Book.objects.annotate(Count('authors')).filter(
1451.             q1 | q2).order_by('pk')
1452.         self.assertQuerysetEqual(
1453.             query, [1, 4, 5, 6],
1454.             lambda b: b.pk)
1455. 
1456.     def test_ticket_11293_q_immutable(self):
1457.         """
1458.         Splitting a q object to parts for where/having doesn't alter
1459.         the original q-object.
1460.         """
1461.         q1 = Q(isbn='')
1462.         q2 = Q(authors__count__gt=1)
1463.         query = Book.objects.annotate(Count('authors'))
1464.         query.filter(q1 | q2)
1465.         self.assertEqual(len(q2.children), 1)
1466. 
1467.     def test_fobj_group_by(self):
1468.         """
1469.         An F() object referring to related column works correctly in group by.
1470.         """
1471.         qs = Book.objects.annotate(
1472.             account=Count('authors')
1473.         ).filter(
1474.             account=F('publisher__num_awards')
1475.         )
1476.         self.assertQuerysetEqual(
1477.             qs, ['Sams Teach Yourself Django in 24 Hours'],
1478.             lambda b: b.name)
1479. 
1480.     def test_annotate_reserved_word(self):
1481.         """
1482.         Regression #18333 - Ensure annotated column name is properly quoted.
1483.         """
1484.         vals = Book.objects.annotate(select=Count('authors__id')).aggregate(Sum('select'), Avg('select'))
1485.         self.assertEqual(vals, {
1486.             'select__sum': 10,
1487.             'select__avg': Approximate(1.666, places=2),
1488.         })
1489. 
1490.     def test_annotate_on_relation(self):
1491.         book = Book.objects.annotate(avg_price=Avg('price'), publisher_name=F('publisher__name')).get(pk=self.b1.pk)
1492.         self.assertEqual(book.avg_price, 30.00)
1493.         self.assertEqual(book.publisher_name, "Apress")
1494. 
1495.     def test_aggregate_on_relation(self):
1496.         # A query with an existing annotation aggregation on a relation should
1497.         # succeed.
1498.         qs = Book.objects.annotate(avg_price=Avg('price')).aggregate(
1499.             publisher_awards=Sum('publisher__num_awards')
1500.         )
1501.         self.assertEqual(qs['publisher_awards'], 30)
1502. 
1503.     def test_annotate_distinct_aggregate(self):
1504.         # There are three books with rating of 4.0 and two of the books have
1505.         # the same price. Hence, the distinct removes one rating of 4.0
1506.         # from the results.
1507.         vals1 = Book.objects.values('rating', 'price').distinct().aggregate(result=Sum('rating'))
1508.         vals2 = Book.objects.aggregate(result=Sum('rating') - Value(4.0))
1509.         self.assertEqual(vals1, vals2)
1510. 
1511.     def test_annotate_values_list_flat(self):
1512.         """Find ages that are shared by at least two authors."""
1513.         qs = Author.objects.values_list('age', flat=True).annotate(age_count=Count('age')).filter(age_count__gt=1)
1514.         self.assertSequenceEqual(qs, [29])
1515. 
1516.     def test_allow_distinct(self):
1517.         class MyAggregate(Aggregate):
1518.             pass
1519.         with self.assertRaisesMessage(TypeError, 'MyAggregate does not allow distinct'):
1520.             MyAggregate('foo', distinct=True)
1521. 
1522.         class DistinctAggregate(Aggregate):
1523.             allow_distinct = True
1524.         DistinctAggregate('foo', distinct=True)
1525. 
1526. 
1527. class JoinPromotionTests(TestCase):
1528.     def test_ticket_21150(self):
1529.         b = Bravo.objects.create()
1530.         c = Charlie.objects.create(bravo=b)
1531.         qs = Charlie.objects.select_related('alfa').annotate(Count('bravo__charlie'))
1532.         self.assertSequenceEqual(qs, [c])
1533.         self.assertIs(qs[0].alfa, None)
1534.         a = Alfa.objects.create()
1535.         c.alfa = a
1536.         c.save()
1537.         # Force re-evaluation
1538.         qs = qs.all()
1539.         self.assertSequenceEqual(qs, [c])
1540.         self.assertEqual(qs[0].alfa, a)
1541. 
1542.     def test_existing_join_not_promoted(self):
1543.         # No promotion for existing joins
1544.         qs = Charlie.objects.filter(alfa__name__isnull=False).annotate(Count('alfa__name'))
1545.         self.assertIn(' INNER JOIN ', str(qs.query))
1546.         # Also, the existing join is unpromoted when doing filtering for already
1547.         # promoted join.
1548.         qs = Charlie.objects.annotate(Count('alfa__name')).filter(alfa__name__isnull=False)
1549.         self.assertIn(' INNER JOIN ', str(qs.query))
1550.         # But, as the join is nullable first use by annotate will be LOUTER
1551.         qs = Charlie.objects.annotate(Count('alfa__name'))
1552.         self.assertIn(' LEFT OUTER JOIN ', str(qs.query))
1553. 
1554.     def test_non_nullable_fk_not_promoted(self):
1555.         qs = Book.objects.annotate(Count('contact__name'))
1556.         self.assertIn(' INNER JOIN ', str(qs.query))
1557. 
1558. 
1559. class SelfReferentialFKTests(TestCase):
1560.     def test_ticket_24748(self):
1561.         t1 = SelfRefFK.objects.create(name='t1')
1562.         SelfRefFK.objects.create(name='t2', parent=t1)
1563.         SelfRefFK.objects.create(name='t3', parent=t1)
1564.         self.assertQuerysetEqual(
1565.             SelfRefFK.objects.annotate(num_children=Count('children')).order_by('name'),
1566.             [('t1', 2), ('t2', 0), ('t3', 0)],
1567.             lambda x: (x.name, x.num_children)
1568.         )


File: tests/expressions/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import pickle
3. import unittest
4. import uuid
5. from copy import deepcopy
6. from unittest import mock
7. 
8. from django.core.exceptions import FieldError
9. from django.db import DatabaseError, NotSupportedError, connection
10. from django.db.models import (
11.     Avg, BooleanField, Case, CharField, Count, DateField, DateTimeField,
12.     DurationField, Exists, Expression, ExpressionList, ExpressionWrapper, F,
13.     Func, IntegerField, Max, Min, Model, OrderBy, OuterRef, Q, StdDev,
14.     Subquery, Sum, TimeField, UUIDField, Value, Variance, When,
15. )
16. from django.db.models.expressions import Col, Combinable, Random, RawSQL, Ref
17. from django.db.models.functions import (
18.     Coalesce, Concat, Left, Length, Lower, Substr, Upper,
19. )
20. from django.db.models.sql import constants
21. from django.db.models.sql.datastructures import Join
22. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
23. from django.test.utils import Approximate, isolate_apps
24. from django.utils.functional import SimpleLazyObject
25. 
26. from .models import (
27.     UUID, UUIDPK, Company, Employee, Experiment, Manager, Number,
28.     RemoteEmployee, Result, SimulationRun, Time,
29. )
30. 
31. 
32. class BasicExpressionsTests(TestCase):
33.     @classmethod
34.     def setUpTestData(cls):
35.         cls.example_inc = Company.objects.create(
36.             name="Example Inc.", num_employees=2300, num_chairs=5,
37.             ceo=Employee.objects.create(firstname="Joe", lastname="Smith", salary=10)
38.         )
39.         cls.foobar_ltd = Company.objects.create(
40.             name="Foobar Ltd.", num_employees=3, num_chairs=4, based_in_eu=True,
41.             ceo=Employee.objects.create(firstname="Frank", lastname="Meyer", salary=20)
42.         )
43.         cls.max = Employee.objects.create(firstname='Max', lastname='Mustermann', salary=30)
44.         cls.gmbh = Company.objects.create(name='Test GmbH', num_employees=32, num_chairs=1, ceo=cls.max)
45. 
46.     def setUp(self):
47.         self.company_query = Company.objects.values(
48.             "name", "num_employees", "num_chairs"
49.         ).order_by(
50.             "name", "num_employees", "num_chairs"
51.         )
52. 
53.     def test_annotate_values_aggregate(self):
54.         companies = Company.objects.annotate(
55.             salaries=F('ceo__salary'),
56.         ).values('num_employees', 'salaries').aggregate(
57.             result=Sum(
58.                 F('salaries') + F('num_employees'),
59.                 output_field=IntegerField()
60.             ),
61.         )
62.         self.assertEqual(companies['result'], 2395)
63. 
64.     def test_annotate_values_filter(self):
65.         companies = Company.objects.annotate(
66.             foo=RawSQL('%s', ['value']),
67.         ).filter(foo='value').order_by('name')
68.         self.assertQuerysetEqual(
69.             companies,
70.             ['<Company: Example Inc.>', '<Company: Foobar Ltd.>', '<Company: Test GmbH>'],
71.         )
72. 
73.     def test_annotate_values_count(self):
74.         companies = Company.objects.annotate(foo=RawSQL('%s', ['value']))
75.         self.assertEqual(companies.count(), 3)
76. 
77.     @skipUnlessDBFeature('supports_boolean_expr_in_select_clause')
78.     def test_filtering_on_annotate_that_uses_q(self):
79.         self.assertEqual(
80.             Company.objects.annotate(
81.                 num_employees_check=ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
82.             ).filter(num_employees_check=True).count(),
83.             2,
84.         )
85. 
86.     def test_filtering_on_q_that_is_boolean(self):
87.         self.assertEqual(
88.             Company.objects.filter(
89.                 ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
90.             ).count(),
91.             2,
92.         )
93. 
94.     def test_filtering_on_rawsql_that_is_boolean(self):
95.         self.assertEqual(
96.             Company.objects.filter(
97.                 RawSQL('num_employees > %s', (3,), output_field=BooleanField()),
98.             ).count(),
99.             2,
100.         )
101. 
102.     def test_filter_inter_attribute(self):
103.         # We can filter on attribute relationships on same model obj, e.g.
104.         # find companies where the number of employees is greater
105.         # than the number of chairs.
106.         self.assertSequenceEqual(
107.             self.company_query.filter(num_employees__gt=F("num_chairs")), [
108.                 {
109.                     "num_chairs": 5,
110.                     "name": "Example Inc.",
111.                     "num_employees": 2300,
112.                 },
113.                 {
114.                     "num_chairs": 1,
115.                     "name": "Test GmbH",
116.                     "num_employees": 32
117.                 },
118.             ],
119.         )
120. 
121.     def test_update(self):
122.         # We can set one field to have the value of another field
123.         # Make sure we have enough chairs
124.         self.company_query.update(num_chairs=F("num_employees"))
125.         self.assertSequenceEqual(
126.             self.company_query, [
127.                 {
128.                     "num_chairs": 2300,
129.                     "name": "Example Inc.",
130.                     "num_employees": 2300
131.                 },
132.                 {
133.                     "num_chairs": 3,
134.                     "name": "Foobar Ltd.",
135.                     "num_employees": 3
136.                 },
137.                 {
138.                     "num_chairs": 32,
139.                     "name": "Test GmbH",
140.                     "num_employees": 32
141.                 }
142.             ],
143.         )
144. 
145.     def test_arithmetic(self):
146.         # We can perform arithmetic operations in expressions
147.         # Make sure we have 2 spare chairs
148.         self.company_query.update(num_chairs=F("num_employees") + 2)
149.         self.assertSequenceEqual(
150.             self.company_query, [
151.                 {
152.                     'num_chairs': 2302,
153.                     'name': 'Example Inc.',
154.                     'num_employees': 2300
155.                 },
156.                 {
157.                     'num_chairs': 5,
158.                     'name': 'Foobar Ltd.',
159.                     'num_employees': 3
160.                 },
161.                 {
162.                     'num_chairs': 34,
163.                     'name': 'Test GmbH',
164.                     'num_employees': 32
165.                 }
166.             ],
167.         )
168. 
169.     def test_order_of_operations(self):
170.         # Law of order of operations is followed
171.         self.company_query.update(num_chairs=F('num_employees') + 2 * F('num_employees'))
172.         self.assertSequenceEqual(
173.             self.company_query, [
174.                 {
175.                     'num_chairs': 6900,
176.                     'name': 'Example Inc.',
177.                     'num_employees': 2300
178.                 },
179.                 {
180.                     'num_chairs': 9,
181.                     'name': 'Foobar Ltd.',
182.                     'num_employees': 3
183.                 },
184.                 {
185.                     'num_chairs': 96,
186.                     'name': 'Test GmbH',
187.                     'num_employees': 32
188.                 }
189.             ],
190.         )
191. 
192.     def test_parenthesis_priority(self):
193.         # Law of order of operations can be overridden by parentheses
194.         self.company_query.update(num_chairs=(F('num_employees') + 2) * F('num_employees'))
195.         self.assertSequenceEqual(
196.             self.company_query, [
197.                 {
198.                     'num_chairs': 5294600,
199.                     'name': 'Example Inc.',
200.                     'num_employees': 2300
201.                 },
202.                 {
203.                     'num_chairs': 15,
204.                     'name': 'Foobar Ltd.',
205.                     'num_employees': 3
206.                 },
207.                 {
208.                     'num_chairs': 1088,
209.                     'name': 'Test GmbH',
210.                     'num_employees': 32
211.                 }
212.             ],
213.         )
214. 
215.     def test_update_with_fk(self):
216.         # ForeignKey can become updated with the value of another ForeignKey.
217.         self.assertEqual(Company.objects.update(point_of_contact=F('ceo')), 3)
218.         self.assertQuerysetEqual(
219.             Company.objects.all(),
220.             ['Joe Smith', 'Frank Meyer', 'Max Mustermann'],
221.             lambda c: str(c.point_of_contact),
222.             ordered=False
223.         )
224. 
225.     def test_update_with_none(self):
226.         Number.objects.create(integer=1, float=1.0)
227.         Number.objects.create(integer=2)
228.         Number.objects.filter(float__isnull=False).update(float=Value(None))
229.         self.assertQuerysetEqual(
230.             Number.objects.all(),
231.             [None, None],
232.             lambda n: n.float,
233.             ordered=False
234.         )
235. 
236.     def test_filter_with_join(self):
237.         # F Expressions can also span joins
238.         Company.objects.update(point_of_contact=F('ceo'))
239.         c = Company.objects.first()
240.         c.point_of_contact = Employee.objects.create(firstname="Guido", lastname="van Rossum")
241.         c.save()
242. 
243.         self.assertQuerysetEqual(
244.             Company.objects.filter(ceo__firstname=F('point_of_contact__firstname')),
245.             ['Foobar Ltd.', 'Test GmbH'],
246.             lambda c: c.name,
247.             ordered=False
248.         )
249. 
250.         Company.objects.exclude(
251.             ceo__firstname=F("point_of_contact__firstname")
252.         ).update(name="foo")
253.         self.assertEqual(
254.             Company.objects.exclude(
255.                 ceo__firstname=F('point_of_contact__firstname')
256.             ).get().name,
257.             "foo",
258.         )
259. 
260.         msg = "Joined field references are not permitted in this query"
261.         with self.assertRaisesMessage(FieldError, msg):
262.             Company.objects.exclude(
263.                 ceo__firstname=F('point_of_contact__firstname')
264.             ).update(name=F('point_of_contact__lastname'))
265. 
266.     def test_object_update(self):
267.         # F expressions can be used to update attributes on single objects
268.         self.gmbh.num_employees = F('num_employees') + 4
269.         self.gmbh.save()
270.         self.gmbh.refresh_from_db()
271.         self.assertEqual(self.gmbh.num_employees, 36)
272. 
273.     def test_new_object_save(self):
274.         # We should be able to use Funcs when inserting new data
275.         test_co = Company(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
276.         test_co.save()
277.         test_co.refresh_from_db()
278.         self.assertEqual(test_co.name, "upper")
279. 
280.     def test_new_object_create(self):
281.         test_co = Company.objects.create(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
282.         test_co.refresh_from_db()
283.         self.assertEqual(test_co.name, "upper")
284. 
285.     def test_object_create_with_aggregate(self):
286.         # Aggregates are not allowed when inserting new data
287.         msg = 'Aggregate functions are not allowed in this query (num_employees=Max(Value(1))).'
288.         with self.assertRaisesMessage(FieldError, msg):
289.             Company.objects.create(
290.                 name='Company', num_employees=Max(Value(1)), num_chairs=1,
291.                 ceo=Employee.objects.create(firstname="Just", lastname="Doit", salary=30),
292.             )
293. 
294.     def test_object_update_fk(self):
295.         # F expressions cannot be used to update attributes which are foreign
296.         # keys, or attributes which involve joins.
297.         test_gmbh = Company.objects.get(pk=self.gmbh.pk)
298.         msg = 'F(ceo)": "Company.point_of_contact" must be a "Employee" instance.'
299.         with self.assertRaisesMessage(ValueError, msg):
300.             test_gmbh.point_of_contact = F('ceo')
301. 
302.         test_gmbh.point_of_contact = self.gmbh.ceo
303.         test_gmbh.save()
304.         test_gmbh.name = F('ceo__lastname')
305.         msg = 'Joined field references are not permitted in this query'
306.         with self.assertRaisesMessage(FieldError, msg):
307.             test_gmbh.save()
308. 
309.     def test_update_inherited_field_value(self):
310.         msg = 'Joined field references are not permitted in this query'
311.         with self.assertRaisesMessage(FieldError, msg):
312.             RemoteEmployee.objects.update(adjusted_salary=F('salary') * 5)
313. 
314.     def test_object_update_unsaved_objects(self):
315.         # F expressions cannot be used to update attributes on objects which do
316.         # not yet exist in the database
317.         acme = Company(name='The Acme Widget Co.', num_employees=12, num_chairs=5, ceo=self.max)
318.         acme.num_employees = F("num_employees") + 16
319.         msg = (
320.             'Failed to insert expression "Col(expressions_company, '
321.             'expressions.Company.num_employees) + Value(16)" on '
322.             'expressions.Company.num_employees. F() expressions can only be '
323.             'used to update, not to insert.'
324.         )
325.         with self.assertRaisesMessage(ValueError, msg):
326.             acme.save()
327. 
328.         acme.num_employees = 12
329.         acme.name = Lower(F('name'))
330.         msg = (
331.             'Failed to insert expression "Lower(Col(expressions_company, '
332.             'expressions.Company.name))" on expressions.Company.name. F() '
333.             'expressions can only be used to update, not to insert.'
334.         )
335.         with self.assertRaisesMessage(ValueError, msg):
336.             acme.save()
337. 
338.     def test_ticket_11722_iexact_lookup(self):
339.         Employee.objects.create(firstname="John", lastname="Doe")
340.         Employee.objects.create(firstname="Test", lastname="test")
341. 
342.         queryset = Employee.objects.filter(firstname__iexact=F('lastname'))
343.         self.assertQuerysetEqual(queryset, ["<Employee: Test test>"])
344. 
345.     def test_ticket_16731_startswith_lookup(self):
346.         Employee.objects.create(firstname="John", lastname="Doe")
347.         e2 = Employee.objects.create(firstname="Jack", lastname="Jackson")
348.         e3 = Employee.objects.create(firstname="Jack", lastname="jackson")
349.         self.assertSequenceEqual(
350.             Employee.objects.filter(lastname__startswith=F('firstname')),
351.             [e2, e3] if connection.features.has_case_insensitive_like else [e2]
352.         )
353.         qs = Employee.objects.filter(lastname__istartswith=F('firstname')).order_by('pk')
354.         self.assertSequenceEqual(qs, [e2, e3])
355. 
356.     def test_ticket_18375_join_reuse(self):
357.         # Reverse multijoin F() references and the lookup target the same join.
358.         # Pre #18375 the F() join was generated first and the lookup couldn't
359.         # reuse that join.
360.         qs = Employee.objects.filter(company_ceo_set__num_chairs=F('company_ceo_set__num_employees'))
361.         self.assertEqual(str(qs.query).count('JOIN'), 1)
362. 
363.     def test_ticket_18375_kwarg_ordering(self):
364.         # The next query was dict-randomization dependent - if the "gte=1"
365.         # was seen first, then the F() will reuse the join generated by the
366.         # gte lookup, if F() was seen first, then it generated a join the
367.         # other lookups could not reuse.
368.         qs = Employee.objects.filter(
369.             company_ceo_set__num_chairs=F('company_ceo_set__num_employees'),
370.             company_ceo_set__num_chairs__gte=1,
371.         )
372.         self.assertEqual(str(qs.query).count('JOIN'), 1)
373. 
374.     def test_ticket_18375_kwarg_ordering_2(self):
375.         # Another similar case for F() than above. Now we have the same join
376.         # in two filter kwargs, one in the lhs lookup, one in F. Here pre
377.         # #18375 the amount of joins generated was random if dict
378.         # randomization was enabled, that is the generated query dependent
379.         # on which clause was seen first.
380.         qs = Employee.objects.filter(
381.             company_ceo_set__num_employees=F('pk'),
382.             pk=F('company_ceo_set__num_employees')
383.         )
384.         self.assertEqual(str(qs.query).count('JOIN'), 1)
385. 
386.     def test_ticket_18375_chained_filters(self):
387.         # F() expressions do not reuse joins from previous filter.
388.         qs = Employee.objects.filter(
389.             company_ceo_set__num_employees=F('pk')
390.         ).filter(
391.             company_ceo_set__num_employees=F('company_ceo_set__num_employees')
392.         )
393.         self.assertEqual(str(qs.query).count('JOIN'), 2)
394. 
395.     def test_order_by_exists(self):
396.         mary = Employee.objects.create(firstname='Mary', lastname='Mustermann', salary=20)
397.         mustermanns_by_seniority = Employee.objects.filter(lastname='Mustermann').order_by(
398.             # Order by whether the employee is the CEO of a company
399.             Exists(Company.objects.filter(ceo=OuterRef('pk'))).desc()
400.         )
401.         self.assertSequenceEqual(mustermanns_by_seniority, [self.max, mary])
402. 
403.     def test_order_by_multiline_sql(self):
404.         raw_order_by = (
405.             RawSQL('''
406.                 CASE WHEN num_employees > 1000
407.                      THEN num_chairs
408.                      ELSE 0 END
409.             ''', []).desc(),
410.             RawSQL('''
411.                 CASE WHEN num_chairs > 1
412.                      THEN 1
413.                      ELSE 0 END
414.             ''', []).asc()
415.         )
416.         for qs in (
417.             Company.objects.all(),
418.             Company.objects.distinct(),
419.         ):
420.             with self.subTest(qs=qs):
421.                 self.assertSequenceEqual(
422.                     qs.order_by(*raw_order_by),
423.                     [self.example_inc, self.gmbh, self.foobar_ltd],
424.                 )
425. 
426.     def test_outerref(self):
427.         inner = Company.objects.filter(point_of_contact=OuterRef('pk'))
428.         msg = (
429.             'This queryset contains a reference to an outer query and may only '
430.             'be used in a subquery.'
431.         )
432.         with self.assertRaisesMessage(ValueError, msg):
433.             inner.exists()
434. 
435.         outer = Employee.objects.annotate(is_point_of_contact=Exists(inner))
436.         self.assertIs(outer.exists(), True)
437. 
438.     def test_exist_single_field_output_field(self):
439.         queryset = Company.objects.values('pk')
440.         self.assertIsInstance(Exists(queryset).output_field, BooleanField)
441. 
442.     def test_subquery(self):
443.         Company.objects.filter(name='Example Inc.').update(
444.             point_of_contact=Employee.objects.get(firstname='Joe', lastname='Smith'),
445.             ceo=self.max,
446.         )
447.         Employee.objects.create(firstname='Bob', lastname='Brown', salary=40)
448.         qs = Employee.objects.annotate(
449.             is_point_of_contact=Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
450.             is_not_point_of_contact=~Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
451.             is_ceo_of_small_company=Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
452.             is_ceo_small_2=~~Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
453.             largest_company=Subquery(Company.objects.order_by('-num_employees').filter(
454.                 Q(ceo=OuterRef('pk')) | Q(point_of_contact=OuterRef('pk'))
455.             ).values('name')[:1], output_field=CharField())
456.         ).values(
457.             'firstname',
458.             'is_point_of_contact',
459.             'is_not_point_of_contact',
460.             'is_ceo_of_small_company',
461.             'is_ceo_small_2',
462.             'largest_company',
463.         ).order_by('firstname')
464. 
465.         results = list(qs)
466.         # Could use Coalesce(subq, Value('')) instead except for the bug in
467.         # cx_Oracle mentioned in #23843.
468.         bob = results[0]
469.         if bob['largest_company'] == '' and connection.features.interprets_empty_strings_as_nulls:
470.             bob['largest_company'] = None
471. 
472.         self.assertEqual(results, [
473.             {
474.                 'firstname': 'Bob',
475.                 'is_point_of_contact': False,
476.                 'is_not_point_of_contact': True,
477.                 'is_ceo_of_small_company': False,
478.                 'is_ceo_small_2': False,
479.                 'largest_company': None,
480.             },
481.             {
482.                 'firstname': 'Frank',
483.                 'is_point_of_contact': False,
484.                 'is_not_point_of_contact': True,
485.                 'is_ceo_of_small_company': True,
486.                 'is_ceo_small_2': True,
487.                 'largest_company': 'Foobar Ltd.',
488.             },
489.             {
490.                 'firstname': 'Joe',
491.                 'is_point_of_contact': True,
492.                 'is_not_point_of_contact': False,
493.                 'is_ceo_of_small_company': False,
494.                 'is_ceo_small_2': False,
495.                 'largest_company': 'Example Inc.',
496.             },
497.             {
498.                 'firstname': 'Max',
499.                 'is_point_of_contact': False,
500.                 'is_not_point_of_contact': True,


File: tests/expressions/tests.py
Line number range: 1032 - 1050
Content:
1032.         )
1033.         self.assertQuerysetEqual(
1034.             Employee.objects.filter(firstname__iendswith=F('lastname')),
1035.             ["<Employee: Jean-Claude claude>"],
1036.             ordered=False,
1037.         )
1038. 
1039. 
1040. @isolate_apps('expressions')
1041. class SimpleExpressionTests(SimpleTestCase):
1042. 
1043.     def test_equal(self):
1044.         self.assertEqual(Expression(), Expression())
1045.         self.assertEqual(
1046.             Expression(IntegerField()),
1047.             Expression(output_field=IntegerField())
1048.         )
1049.         self.assertEqual(Expression(IntegerField()), mock.ANY)
1050.         self.assertNotEqual(


File: tests/expressions/tests.py
Line number range: 1051 - 1068
Content:
1051.             Expression(IntegerField()),
1052.             Expression(CharField())
1053.         )
1054. 
1055.         class TestModel(Model):
1056.             field = IntegerField()
1057.             other_field = IntegerField()
1058. 
1059.         self.assertNotEqual(
1060.             Expression(TestModel._meta.get_field('field')),
1061.             Expression(TestModel._meta.get_field('other_field')),
1062.         )
1063. 
1064.     def test_hash(self):
1065.         self.assertEqual(hash(Expression()), hash(Expression()))
1066.         self.assertEqual(
1067.             hash(Expression(IntegerField())),
1068.             hash(Expression(output_field=IntegerField()))


File: tests/expressions/tests.py
Line number range: 1069 - 1086
Content:
1069.         )
1070.         self.assertNotEqual(
1071.             hash(Expression(IntegerField())),
1072.             hash(Expression(CharField())),
1073.         )
1074. 
1075.         class TestModel(Model):
1076.             field = IntegerField()
1077.             other_field = IntegerField()
1078. 
1079.         self.assertNotEqual(
1080.             hash(Expression(TestModel._meta.get_field('field'))),
1081.             hash(Expression(TestModel._meta.get_field('other_field'))),
1082.         )
1083. 
1084. 
1085. class ExpressionsNumericTests(TestCase):
1086. 


File: tests/expressions/tests.py
Line number range: 1503 - 1522
Content:
1503.         queryset = Experiment.objects.annotate(
1504.             difference=ExpressionWrapper(
1505.                 subquery - F('completed'), output_field=DurationField(),
1506.             ),
1507.         ).filter(difference=datetime.timedelta())
1508.         self.assertTrue(queryset.exists())
1509. 
1510.     @skipUnlessDBFeature('supports_temporal_subtraction')
1511.     def test_date_case_subtraction(self):
1512.         queryset = Experiment.objects.annotate(
1513.             date_case=Case(
1514.                 When(Q(name='e0'), then=F('completed')),
1515.                 output_field=DateField(),
1516.             ),
1517.             completed_value=Value(
1518.                 self.e0.completed,
1519.                 output_field=DateField(),
1520.             ),
1521.             difference=ExpressionWrapper(
1522.                 F('date_case') - F('completed_value'), output_field=DurationField(),


File: tests/expressions/tests.py
Line number range: 1524 - 1541
Content:
1524.         ).filter(difference=datetime.timedelta())
1525.         self.assertEqual(queryset.get(), self.e0)
1526. 
1527.     @skipUnlessDBFeature('supports_temporal_subtraction')
1528.     def test_time_subtraction(self):
1529.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1530.         queryset = Time.objects.annotate(
1531.             difference=ExpressionWrapper(
1532.                 F('time') - Value(datetime.time(11, 15, 0), output_field=TimeField()),
1533.                 output_field=DurationField(),
1534.             )
1535.         )
1536.         self.assertEqual(
1537.             queryset.get().difference,
1538.             datetime.timedelta(hours=1, minutes=15, seconds=15, microseconds=2345)
1539.         )
1540. 
1541.         queryset = Time.objects.annotate(difference=ExpressionWrapper(


File: tests/expressions/tests.py
Line number range: 1543 - 1560
Content:
1543.             output_field=DurationField(),
1544.         ))
1545.         self.assertIsNone(queryset.first().difference)
1546. 
1547.         queryset = Time.objects.annotate(shifted=ExpressionWrapper(
1548.             F('time') - Value(None, output_field=DurationField()),
1549.             output_field=TimeField(),
1550.         ))
1551.         self.assertIsNone(queryset.first().shifted)
1552. 
1553.     @skipUnlessDBFeature('supports_temporal_subtraction')
1554.     def test_time_subquery_subtraction(self):
1555.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1556.         subquery = Time.objects.filter(pk=OuterRef('pk')).values('time')
1557.         queryset = Time.objects.annotate(
1558.             difference=ExpressionWrapper(
1559.                 subquery - F('time'), output_field=DurationField(),
1560.             ),


File: tests/expressions/tests.py
Line number range: 1636 - 1653
Content:
1636.         ).annotate(
1637.             start_sub_minutes=F('start_sub_seconds') + datetime.timedelta(minutes=-30),
1638.         ).annotate(
1639.             start_sub_hours=F('start_sub_minutes') + datetime.timedelta(hours=-2),
1640.         ).annotate(
1641.             new_start=F('start_sub_hours') + datetime.timedelta(days=-2),
1642.         )
1643.         expected_start = datetime.datetime(2010, 6, 23, 9, 45, 0)
1644.         # subtract 30 microseconds
1645.         experiments = experiments.annotate(new_start=F('new_start') + datetime.timedelta(microseconds=-30))
1646.         expected_start += datetime.timedelta(microseconds=+746970)
1647.         experiments.update(start=F('new_start'))
1648.         e0 = Experiment.objects.get(name='e0')
1649.         self.assertEqual(e0.start, expected_start)
1650. 
1651. 
1652. class ValueTests(TestCase):
1653.     def test_update_TimeField_using_Value(self):


File: tests/expressions/tests.py
Line number range: 1653 - 1669
Content:
1653.     def test_update_TimeField_using_Value(self):
1654.         Time.objects.create()
1655.         Time.objects.update(time=Value(datetime.time(1), output_field=TimeField()))
1656.         self.assertEqual(Time.objects.get().time, datetime.time(1))
1657. 
1658.     def test_update_UUIDField_using_Value(self):
1659.         UUID.objects.create()
1660.         UUID.objects.update(uuid=Value(uuid.UUID('12345678901234567890123456789012'), output_field=UUIDField()))
1661.         self.assertEqual(UUID.objects.get().uuid, uuid.UUID('12345678901234567890123456789012'))
1662. 
1663.     def test_deconstruct(self):
1664.         value = Value('name')
1665.         path, args, kwargs = value.deconstruct()
1666.         self.assertEqual(path, 'django.db.models.expressions.Value')
1667.         self.assertEqual(args, (value.value,))
1668.         self.assertEqual(kwargs, {})
1669. 


File: tests/expressions/tests.py
Line number range: 1669 - 1685
Content:
1669. 
1670.     def test_deconstruct_output_field(self):
1671.         value = Value('name', output_field=CharField())
1672.         path, args, kwargs = value.deconstruct()
1673.         self.assertEqual(path, 'django.db.models.expressions.Value')
1674.         self.assertEqual(args, (value.value,))
1675.         self.assertEqual(len(kwargs), 1)
1676.         self.assertEqual(kwargs['output_field'].deconstruct(), CharField().deconstruct())
1677. 
1678.     def test_equal(self):
1679.         value = Value('name')
1680.         self.assertEqual(value, Value('name'))
1681.         self.assertNotEqual(value, Value('username'))
1682. 
1683.     def test_hash(self):
1684.         d = {Value('name'): 'Bob'}
1685.         self.assertIn(Value('name'), d)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 21:49:44,337 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's bug involves an `ExpressionWrapper` within an aggregation query that generates an incorrect `GROUP BY` clause. I have already examined `tests/aggregation_regress/tests.py` and parts of `tests/expressions/tests.py`. While they contain related tests, they don't have a specific test case that combines `ExpressionWrapper` with a constant `Value` in a grouping aggregation, which is the core of the reported issue. The file `tests/aggregation/tests.py` has not been provided yet and is highly relevant as it should contain the main tests for Django's aggregation features. This file may contain test cases that use expressions within aggregations, which would be very helpful for finding similar examples to the user's bug." query='Please provide the full content of the file `tests/aggregation/tests.py`.' extra_requirements='' purpose='I need to find test cases involving aggregations and expressions to find examples similar to the reported bug, and this file is likely to contain them.'
2025-12-23 21:49:44,338 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `tests/aggregation/tests.py`.
2025-12-23 21:49:44,338 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 21:49:44,339 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 21:49:44,340 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 21:49:44,340 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `tests/aggregation/tests.py`.
Purpose: I need to find test cases involving aggregations and expressions to find examples similar to the reported bug, and this file is likely to contain them.
2025-12-23 21:49:47,129 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will read the full content of `tests/aggregation/tests.py` to help you find test cases related to aggregations and expressions. This will provide you with the examples you need to investigate the bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/aggregation/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2106, 'candidates_token_count': 64, 'total_token_count': 2284, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2106}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 64}], 'thoughts_token_count': 114, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.11433298885822296, 'model_name': 'gemini-2.5-pro'} id='run--5bdcfd79-694d-4db5-bb54-f264856cb41d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/aggregation/tests.py'}, 'id': 'b4262e93-86e8-412e-8d74-e77724456925', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2106, 'output_tokens': 64, 'total_tokens': 2284, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 114}}
2025-12-23 21:49:49,596 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have provided the initial 500 lines of `tests/aggregation/tests.py` to give you a substantial part of the test cases for aggregations and expressions. Since the file is larger, I will now retrieve the remaining content to ensure you have the complete file for your investigation.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 1001.0, "relative_path": "tests/aggregation/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10762, 'candidates_token_count': 87, 'total_token_count': 10914, 'cached_content_token_count': 1851, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10762}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1851}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 87}], 'thoughts_token_count': 65}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15976620816636358, 'model_name': 'gemini-2.5-pro'} id='run--28b60bc5-140b-4abc-9c68-e6f300db3bfb-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 1001.0, 'relative_path': 'tests/aggregation/tests.py'}, 'id': '47ac7a81-962e-4b86-a5b6-e0ab23fe4814', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10762, 'output_tokens': 87, 'total_tokens': 10914, 'input_token_details': {'cache_read': 1851}, 'output_token_details': {'reasoning': 65}}
2025-12-23 21:49:51,735 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the full content of `tests/aggregation/tests.py` by reading it in chunks. This should give you all the information you need to find the test cases relevant to your bug investigation.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "end_line": 1501.0, "relative_path": "tests/aggregation/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19278, 'candidates_token_count': 70, 'total_token_count': 19402, 'cached_content_token_count': 9498, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19278}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9498}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 70}], 'thoughts_token_count': 54}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10209708895002093, 'model_name': 'gemini-2.5-pro'} id='run--8d1fc13b-3f44-4f11-a157-e8c56d18ea2d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'end_line': 1501.0, 'relative_path': 'tests/aggregation/tests.py'}, 'id': '43ef011a-ae63-48a6-8998-6eac4c7a96fa', 'type': 'tool_call'}] usage_metadata={'input_tokens': 19278, 'output_tokens': 70, 'total_tokens': 19402, 'input_token_details': {'cache_read': 9498}, 'output_token_details': {'reasoning': 54}}
2025-12-23 21:49:53,904 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of the file `tests/aggregation/tests.py`. The file was read in three separate chunks to handle its size, and the complete content has been provided. You should now have all the necessary information to find the test cases related to aggregations and expressions for your bug investigation.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 25126, 'candidates_token_count': 64, 'total_token_count': 25243, 'cached_content_token_count': 19178, 'prompt_tokens_details': [{'modality': 1, 'token_count': 25126}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19178}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 64}], 'thoughts_token_count': 53}, 'finish_reason': 'STOP', 'avg_logprobs': -0.200558140873909, 'model_name': 'gemini-2.5-pro'} id='run--10cc7e13-7d38-4181-8037-188ebccac6cd-0' usage_metadata={'input_tokens': 25126, 'output_tokens': 64, 'total_tokens': 25243, 'input_token_details': {'cache_read': 19178}, 'output_token_details': {'reasoning': 53}}
2025-12-23 21:49:53,906 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `tests/aggregation/tests.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases involving aggregations and expressions to find examples similar to the reported bug, and this file is likely to contain them.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/aggregation/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import re
3. from decimal import Decimal
4. from unittest import skipIf
5. 
6. from django.core.exceptions import FieldError
7. from django.db import connection
8. from django.db.models import (
9.     Avg, Case, Count, DecimalField, DurationField, Exists, F, FloatField, Func,
10.     IntegerField, Max, Min, OuterRef, Subquery, Sum, Value, When,
11. )
12. from django.db.models.functions import Coalesce
13. from django.test import TestCase
14. from django.test.testcases import skipUnlessDBFeature
15. from django.test.utils import Approximate, CaptureQueriesContext
16. from django.utils import timezone
17. 
18. from .models import Author, Book, Publisher, Store
19. 
20. 
21. class AggregateTestCase(TestCase):
22. 
23.     @classmethod
24.     def setUpTestData(cls):
25.         cls.a1 = Author.objects.create(name='Adrian Holovaty', age=34)
26.         cls.a2 = Author.objects.create(name='Jacob Kaplan-Moss', age=35)
27.         cls.a3 = Author.objects.create(name='Brad Dayley', age=45)
28.         cls.a4 = Author.objects.create(name='James Bennett', age=29)
29.         cls.a5 = Author.objects.create(name='Jeffrey Forcier', age=37)
30.         cls.a6 = Author.objects.create(name='Paul Bissex', age=29)
31.         cls.a7 = Author.objects.create(name='Wesley J. Chun', age=25)
32.         cls.a8 = Author.objects.create(name='Peter Norvig', age=57)
33.         cls.a9 = Author.objects.create(name='Stuart Russell', age=46)
34.         cls.a1.friends.add(cls.a2, cls.a4)
35.         cls.a2.friends.add(cls.a1, cls.a7)
36.         cls.a4.friends.add(cls.a1)
37.         cls.a5.friends.add(cls.a6, cls.a7)
38.         cls.a6.friends.add(cls.a5, cls.a7)
39.         cls.a7.friends.add(cls.a2, cls.a5, cls.a6)
40.         cls.a8.friends.add(cls.a9)
41.         cls.a9.friends.add(cls.a8)
42. 
43.         cls.p1 = Publisher.objects.create(name='Apress', num_awards=3, duration=datetime.timedelta(days=1))
44.         cls.p2 = Publisher.objects.create(name='Sams', num_awards=1, duration=datetime.timedelta(days=2))
45.         cls.p3 = Publisher.objects.create(name='Prentice Hall', num_awards=7)
46.         cls.p4 = Publisher.objects.create(name='Morgan Kaufmann', num_awards=9)
47.         cls.p5 = Publisher.objects.create(name="Jonno's House of Books", num_awards=0)
48. 
49.         cls.b1 = Book.objects.create(
50.             isbn='159059725', name='The Definitive Guide to Django: Web Development Done Right',
51.             pages=447, rating=4.5, price=Decimal('30.00'), contact=cls.a1, publisher=cls.p1,
52.             pubdate=datetime.date(2007, 12, 6)
53.         )
54.         cls.b2 = Book.objects.create(
55.             isbn='067232959', name='Sams Teach Yourself Django in 24 Hours',
56.             pages=528, rating=3.0, price=Decimal('23.09'), contact=cls.a3, publisher=cls.p2,
57.             pubdate=datetime.date(2008, 3, 3)
58.         )
59.         cls.b3 = Book.objects.create(
60.             isbn='159059996', name='Practical Django Projects',
61.             pages=300, rating=4.0, price=Decimal('29.69'), contact=cls.a4, publisher=cls.p1,
62.             pubdate=datetime.date(2008, 6, 23)
63.         )
64.         cls.b4 = Book.objects.create(
65.             isbn='013235613', name='Python Web Development with Django',
66.             pages=350, rating=4.0, price=Decimal('29.69'), contact=cls.a5, publisher=cls.p3,
67.             pubdate=datetime.date(2008, 11, 3)
68.         )
69.         cls.b5 = Book.objects.create(
70.             isbn='013790395', name='Artificial Intelligence: A Modern Approach',
71.             pages=1132, rating=4.0, price=Decimal('82.80'), contact=cls.a8, publisher=cls.p3,
72.             pubdate=datetime.date(1995, 1, 15)
73.         )
74.         cls.b6 = Book.objects.create(
75.             isbn='155860191', name='Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
76.             pages=946, rating=5.0, price=Decimal('75.00'), contact=cls.a8, publisher=cls.p4,
77.             pubdate=datetime.date(1991, 10, 15)
78.         )
79.         cls.b1.authors.add(cls.a1, cls.a2)
80.         cls.b2.authors.add(cls.a3)
81.         cls.b3.authors.add(cls.a4)
82.         cls.b4.authors.add(cls.a5, cls.a6, cls.a7)
83.         cls.b5.authors.add(cls.a8, cls.a9)
84.         cls.b6.authors.add(cls.a8)
85. 
86.         s1 = Store.objects.create(
87.             name='Amazon.com',
88.             original_opening=datetime.datetime(1994, 4, 23, 9, 17, 42),
89.             friday_night_closing=datetime.time(23, 59, 59)
90.         )
91.         s2 = Store.objects.create(
92.             name='Books.com',
93.             original_opening=datetime.datetime(2001, 3, 15, 11, 23, 37),
94.             friday_night_closing=datetime.time(23, 59, 59)
95.         )
96.         s3 = Store.objects.create(
97.             name="Mamma and Pappa's Books",
98.             original_opening=datetime.datetime(1945, 4, 25, 16, 24, 14),
99.             friday_night_closing=datetime.time(21, 30)
100.         )
101.         s1.books.add(cls.b1, cls.b2, cls.b3, cls.b4, cls.b5, cls.b6)
102.         s2.books.add(cls.b1, cls.b3, cls.b5, cls.b6)
103.         s3.books.add(cls.b3, cls.b4, cls.b6)
104. 
105.     def test_empty_aggregate(self):
106.         self.assertEqual(Author.objects.all().aggregate(), {})
107. 
108.     def test_aggregate_in_order_by(self):
109.         msg = (
110.             'Using an aggregate in order_by() without also including it in '
111.             'annotate() is not allowed: Avg(F(book__rating)'
112.         )
113.         with self.assertRaisesMessage(FieldError, msg):
114.             Author.objects.values('age').order_by(Avg('book__rating'))
115. 
116.     def test_single_aggregate(self):
117.         vals = Author.objects.aggregate(Avg("age"))
118.         self.assertEqual(vals, {"age__avg": Approximate(37.4, places=1)})
119. 
120.     def test_multiple_aggregates(self):
121.         vals = Author.objects.aggregate(Sum("age"), Avg("age"))
122.         self.assertEqual(vals, {"age__sum": 337, "age__avg": Approximate(37.4, places=1)})
123. 
124.     def test_filter_aggregate(self):
125.         vals = Author.objects.filter(age__gt=29).aggregate(Sum("age"))
126.         self.assertEqual(vals, {'age__sum': 254})
127. 
128.     def test_related_aggregate(self):
129.         vals = Author.objects.aggregate(Avg("friends__age"))
130.         self.assertEqual(vals, {'friends__age__avg': Approximate(34.07, places=2)})
131. 
132.         vals = Book.objects.filter(rating__lt=4.5).aggregate(Avg("authors__age"))
133.         self.assertEqual(vals, {'authors__age__avg': Approximate(38.2857, places=2)})
134. 
135.         vals = Author.objects.all().filter(name__contains="a").aggregate(Avg("book__rating"))
136.         self.assertEqual(vals, {'book__rating__avg': 4.0})
137. 
138.         vals = Book.objects.aggregate(Sum("publisher__num_awards"))
139.         self.assertEqual(vals, {'publisher__num_awards__sum': 30})
140. 
141.         vals = Publisher.objects.aggregate(Sum("book__price"))
142.         self.assertEqual(vals, {'book__price__sum': Decimal('270.27')})
143. 
144.     def test_aggregate_multi_join(self):
145.         vals = Store.objects.aggregate(Max("books__authors__age"))
146.         self.assertEqual(vals, {'books__authors__age__max': 57})
147. 
148.         vals = Author.objects.aggregate(Min("book__publisher__num_awards"))
149.         self.assertEqual(vals, {'book__publisher__num_awards__min': 1})
150. 
151.     def test_aggregate_alias(self):
152.         vals = Store.objects.filter(name="Amazon.com").aggregate(amazon_mean=Avg("books__rating"))
153.         self.assertEqual(vals, {'amazon_mean': Approximate(4.08, places=2)})
154. 
155.     def test_annotate_basic(self):
156.         self.assertQuerysetEqual(
157.             Book.objects.annotate().order_by('pk'), [
158.                 "The Definitive Guide to Django: Web Development Done Right",
159.                 "Sams Teach Yourself Django in 24 Hours",
160.                 "Practical Django Projects",
161.                 "Python Web Development with Django",
162.                 "Artificial Intelligence: A Modern Approach",
163.                 "Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp"
164.             ],
165.             lambda b: b.name
166.         )
167. 
168.         books = Book.objects.annotate(mean_age=Avg("authors__age"))
169.         b = books.get(pk=self.b1.pk)
170.         self.assertEqual(
171.             b.name,
172.             'The Definitive Guide to Django: Web Development Done Right'
173.         )
174.         self.assertEqual(b.mean_age, 34.5)
175. 
176.     def test_annotate_defer(self):
177.         qs = Book.objects.annotate(
178.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
179. 
180.         rows = [
181.             (self.b1.id, "159059725", 447, "The Definitive Guide to Django: Web Development Done Right")
182.         ]
183.         self.assertQuerysetEqual(
184.             qs.order_by('pk'), rows,
185.             lambda r: (r.id, r.isbn, r.page_sum, r.name)
186.         )
187. 
188.     def test_annotate_defer_select_related(self):
189.         qs = Book.objects.select_related('contact').annotate(
190.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
191. 
192.         rows = [
193.             (self.b1.id, "159059725", 447, "Adrian Holovaty",
194.              "The Definitive Guide to Django: Web Development Done Right")
195.         ]
196.         self.assertQuerysetEqual(
197.             qs.order_by('pk'), rows,
198.             lambda r: (r.id, r.isbn, r.page_sum, r.contact.name, r.name)
199.         )
200. 
201.     def test_annotate_m2m(self):
202.         books = Book.objects.filter(rating__lt=4.5).annotate(Avg("authors__age")).order_by("name")
203.         self.assertQuerysetEqual(
204.             books, [
205.                 ('Artificial Intelligence: A Modern Approach', 51.5),
206.                 ('Practical Django Projects', 29.0),
207.                 ('Python Web Development with Django', Approximate(30.3, places=1)),
208.                 ('Sams Teach Yourself Django in 24 Hours', 45.0)
209.             ],
210.             lambda b: (b.name, b.authors__age__avg),
211.         )
212. 
213.         books = Book.objects.annotate(num_authors=Count("authors")).order_by("name")
214.         self.assertQuerysetEqual(
215.             books, [
216.                 ('Artificial Intelligence: A Modern Approach', 2),
217.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
218.                 ('Practical Django Projects', 1),
219.                 ('Python Web Development with Django', 3),
220.                 ('Sams Teach Yourself Django in 24 Hours', 1),
221.                 ('The Definitive Guide to Django: Web Development Done Right', 2)
222.             ],
223.             lambda b: (b.name, b.num_authors)
224.         )
225. 
226.     def test_backwards_m2m_annotate(self):
227.         authors = Author.objects.filter(name__contains="a").annotate(Avg("book__rating")).order_by("name")
228.         self.assertQuerysetEqual(
229.             authors, [
230.                 ('Adrian Holovaty', 4.5),
231.                 ('Brad Dayley', 3.0),
232.                 ('Jacob Kaplan-Moss', 4.5),
233.                 ('James Bennett', 4.0),
234.                 ('Paul Bissex', 4.0),
235.                 ('Stuart Russell', 4.0)
236.             ],
237.             lambda a: (a.name, a.book__rating__avg)
238.         )
239. 
240.         authors = Author.objects.annotate(num_books=Count("book")).order_by("name")
241.         self.assertQuerysetEqual(
242.             authors, [
243.                 ('Adrian Holovaty', 1),
244.                 ('Brad Dayley', 1),
245.                 ('Jacob Kaplan-Moss', 1),
246.                 ('James Bennett', 1),
247.                 ('Jeffrey Forcier', 1),
248.                 ('Paul Bissex', 1),
249.                 ('Peter Norvig', 2),
250.                 ('Stuart Russell', 1),
251.                 ('Wesley J. Chun', 1)
252.             ],
253.             lambda a: (a.name, a.num_books)
254.         )
255. 
256.     def test_reverse_fkey_annotate(self):
257.         books = Book.objects.annotate(Sum("publisher__num_awards")).order_by("name")
258.         self.assertQuerysetEqual(
259.             books, [
260.                 ('Artificial Intelligence: A Modern Approach', 7),
261.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 9),
262.                 ('Practical Django Projects', 3),
263.                 ('Python Web Development with Django', 7),
264.                 ('Sams Teach Yourself Django in 24 Hours', 1),
265.                 ('The Definitive Guide to Django: Web Development Done Right', 3)
266.             ],
267.             lambda b: (b.name, b.publisher__num_awards__sum)
268.         )
269. 
270.         publishers = Publisher.objects.annotate(Sum("book__price")).order_by("name")
271.         self.assertQuerysetEqual(
272.             publishers, [
273.                 ('Apress', Decimal("59.69")),
274.                 ("Jonno's House of Books", None),
275.                 ('Morgan Kaufmann', Decimal("75.00")),
276.                 ('Prentice Hall', Decimal("112.49")),
277.                 ('Sams', Decimal("23.09"))
278.             ],
279.             lambda p: (p.name, p.book__price__sum)
280.         )
281. 
282.     def test_annotate_values(self):
283.         books = list(Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values())
284.         self.assertEqual(
285.             books, [
286.                 {
287.                     "contact_id": self.a1.id,
288.                     "id": self.b1.id,
289.                     "isbn": "159059725",
290.                     "mean_age": 34.5,
291.                     "name": "The Definitive Guide to Django: Web Development Done Right",
292.                     "pages": 447,
293.                     "price": Approximate(Decimal("30")),
294.                     "pubdate": datetime.date(2007, 12, 6),
295.                     "publisher_id": self.p1.id,
296.                     "rating": 4.5,
297.                 }
298.             ]
299.         )
300. 
301.         books = (
302.             Book.objects
303.             .filter(pk=self.b1.pk)
304.             .annotate(mean_age=Avg('authors__age'))
305.             .values('pk', 'isbn', 'mean_age')
306.         )
307.         self.assertEqual(
308.             list(books), [
309.                 {
310.                     "pk": self.b1.pk,
311.                     "isbn": "159059725",
312.                     "mean_age": 34.5,
313.                 }
314.             ]
315.         )
316. 
317.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values("name")
318.         self.assertEqual(
319.             list(books),
320.             [{'name': 'The Definitive Guide to Django: Web Development Done Right'}],
321.         )
322. 
323.         books = Book.objects.filter(pk=self.b1.pk).values().annotate(mean_age=Avg('authors__age'))
324.         self.assertEqual(
325.             list(books), [
326.                 {
327.                     "contact_id": self.a1.id,
328.                     "id": self.b1.id,
329.                     "isbn": "159059725",
330.                     "mean_age": 34.5,
331.                     "name": "The Definitive Guide to Django: Web Development Done Right",
332.                     "pages": 447,
333.                     "price": Approximate(Decimal("30")),
334.                     "pubdate": datetime.date(2007, 12, 6),
335.                     "publisher_id": self.p1.id,
336.                     "rating": 4.5,
337.                 }
338.             ]
339.         )
340. 
341.         books = (
342.             Book.objects
343.             .values("rating")
344.             .annotate(n_authors=Count("authors__id"), mean_age=Avg("authors__age"))
345.             .order_by("rating")
346.         )
347.         self.assertEqual(
348.             list(books), [
349.                 {
350.                     "rating": 3.0,
351.                     "n_authors": 1,
352.                     "mean_age": 45.0,
353.                 },
354.                 {
355.                     "rating": 4.0,
356.                     "n_authors": 6,
357.                     "mean_age": Approximate(37.16, places=1)
358.                 },
359.                 {
360.                     "rating": 4.5,
361.                     "n_authors": 2,
362.                     "mean_age": 34.5,
363.                 },
364.                 {
365.                     "rating": 5.0,
366.                     "n_authors": 1,
367.                     "mean_age": 57.0,
368.                 }
369.             ]
370.         )
371. 
372.         authors = Author.objects.annotate(Avg("friends__age")).order_by("name")
373.         self.assertQuerysetEqual(
374.             authors, [
375.                 ('Adrian Holovaty', 32.0),
376.                 ('Brad Dayley', None),
377.                 ('Jacob Kaplan-Moss', 29.5),
378.                 ('James Bennett', 34.0),
379.                 ('Jeffrey Forcier', 27.0),
380.                 ('Paul Bissex', 31.0),
381.                 ('Peter Norvig', 46.0),
382.                 ('Stuart Russell', 57.0),
383.                 ('Wesley J. Chun', Approximate(33.66, places=1))
384.             ],
385.             lambda a: (a.name, a.friends__age__avg)
386.         )
387. 
388.     def test_count(self):
389.         vals = Book.objects.aggregate(Count("rating"))
390.         self.assertEqual(vals, {"rating__count": 6})
391. 
392.     def test_count_star(self):
393.         with self.assertNumQueries(1) as ctx:
394.             Book.objects.aggregate(n=Count("*"))
395.         sql = ctx.captured_queries[0]['sql']
396.         self.assertIn('SELECT COUNT(*) ', sql)
397. 
398.     def test_count_distinct_expression(self):
399.         aggs = Book.objects.aggregate(
400.             distinct_ratings=Count(Case(When(pages__gt=300, then='rating')), distinct=True),
401.         )
402.         self.assertEqual(aggs['distinct_ratings'], 4)
403. 
404.     def test_distinct_on_aggregate(self):
405.         for aggregate, expected_result in (
406.             (Avg, 4.125),
407.             (Count, 4),
408.             (Sum, 16.5),
409.         ):
410.             with self.subTest(aggregate=aggregate.__name__):
411.                 books = Book.objects.aggregate(ratings=aggregate('rating', distinct=True))
412.                 self.assertEqual(books['ratings'], expected_result)
413. 
414.     def test_non_grouped_annotation_not_in_group_by(self):
415.         """
416.         An annotation not included in values() before an aggregate should be
417.         excluded from the group by clause.
418.         """
419.         qs = (
420.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating')
421.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
422.         )
423.         self.assertEqual(list(qs), [{'rating': 4.0, 'count': 2}])
424. 
425.     def test_grouped_annotation_in_group_by(self):
426.         """
427.         An annotation included in values() before an aggregate should be
428.         included in the group by clause.
429.         """
430.         qs = (
431.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating', 'xprice')
432.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
433.         )
434.         self.assertEqual(
435.             list(qs), [
436.                 {'rating': 4.0, 'count': 1},
437.                 {'rating': 4.0, 'count': 2},
438.             ]
439.         )
440. 
441.     def test_fkey_aggregate(self):
442.         explicit = list(Author.objects.annotate(Count('book__id')))
443.         implicit = list(Author.objects.annotate(Count('book')))
444.         self.assertCountEqual(explicit, implicit)
445. 
446.     def test_annotate_ordering(self):
447.         books = Book.objects.values('rating').annotate(oldest=Max('authors__age')).order_by('oldest', 'rating')
448.         self.assertEqual(
449.             list(books), [
450.                 {'rating': 4.5, 'oldest': 35},
451.                 {'rating': 3.0, 'oldest': 45},
452.                 {'rating': 4.0, 'oldest': 57},
453.                 {'rating': 5.0, 'oldest': 57},
454.             ]
455.         )
456. 
457.         books = Book.objects.values("rating").annotate(oldest=Max("authors__age")).order_by("-oldest", "-rating")
458.         self.assertEqual(
459.             list(books), [
460.                 {'rating': 5.0, 'oldest': 57},
461.                 {'rating': 4.0, 'oldest': 57},
462.                 {'rating': 3.0, 'oldest': 45},
463.                 {'rating': 4.5, 'oldest': 35},
464.             ]
465.         )
466. 
467.     def test_aggregate_annotation(self):
468.         vals = Book.objects.annotate(num_authors=Count("authors__id")).aggregate(Avg("num_authors"))
469.         self.assertEqual(vals, {"num_authors__avg": Approximate(1.66, places=1)})
470. 
471.     def test_avg_duration_field(self):
472.         # Explicit `output_field`.
473.         self.assertEqual(
474.             Publisher.objects.aggregate(Avg('duration', output_field=DurationField())),
475.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
476.         )
477.         # Implicit `output_field`.
478.         self.assertEqual(
479.             Publisher.objects.aggregate(Avg('duration')),
480.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
481.         )
482. 
483.     def test_sum_duration_field(self):
484.         self.assertEqual(
485.             Publisher.objects.aggregate(Sum('duration', output_field=DurationField())),
486.             {'duration__sum': datetime.timedelta(days=3)}
487.         )
488. 
489.     def test_sum_distinct_aggregate(self):
490.         """
491.         Sum on a distinct() QuerySet should aggregate only the distinct items.
492.         """
493.         authors = Author.objects.filter(book__in=[self.b5, self.b6])
494.         self.assertEqual(authors.count(), 3)
495. 
496.         distinct_authors = authors.distinct()
497.         self.assertEqual(distinct_authors.count(), 2)
498. 
499.         # Selected author ages are 57 and 46
500.         age_sum = distinct_authors.aggregate(Sum('age'))


File: tests/aggregation/tests.py
Line number range: 501 - 1001
Content:
501.         self.assertEqual(age_sum['age__sum'], 103)
502. 
503.     def test_filtering(self):
504.         p = Publisher.objects.create(name='Expensive Publisher', num_awards=0)
505.         Book.objects.create(
506.             name='ExpensiveBook1',
507.             pages=1,
508.             isbn='111',
509.             rating=3.5,
510.             price=Decimal("1000"),
511.             publisher=p,
512.             contact_id=self.a1.id,
513.             pubdate=datetime.date(2008, 12, 1)
514.         )
515.         Book.objects.create(
516.             name='ExpensiveBook2',
517.             pages=1,
518.             isbn='222',
519.             rating=4.0,
520.             price=Decimal("1000"),
521.             publisher=p,
522.             contact_id=self.a1.id,
523.             pubdate=datetime.date(2008, 12, 2)
524.         )
525.         Book.objects.create(
526.             name='ExpensiveBook3',
527.             pages=1,
528.             isbn='333',
529.             rating=4.5,
530.             price=Decimal("35"),
531.             publisher=p,
532.             contact_id=self.a1.id,
533.             pubdate=datetime.date(2008, 12, 3)
534.         )
535. 
536.         publishers = Publisher.objects.annotate(num_books=Count("book__id")).filter(num_books__gt=1).order_by("pk")
537.         self.assertQuerysetEqual(
538.             publishers,
539.             ['Apress', 'Prentice Hall', 'Expensive Publisher'],
540.             lambda p: p.name,
541.         )
542. 
543.         publishers = Publisher.objects.filter(book__price__lt=Decimal("40.0")).order_by("pk")
544.         self.assertQuerysetEqual(
545.             publishers, [
546.                 "Apress",
547.                 "Apress",
548.                 "Sams",
549.                 "Prentice Hall",
550.                 "Expensive Publisher",
551.             ],
552.             lambda p: p.name
553.         )
554. 
555.         publishers = (
556.             Publisher.objects
557.             .annotate(num_books=Count("book__id"))
558.             .filter(num_books__gt=1, book__price__lt=Decimal("40.0"))
559.             .order_by("pk")
560.         )
561.         self.assertQuerysetEqual(
562.             publishers,
563.             ['Apress', 'Prentice Hall', 'Expensive Publisher'],
564.             lambda p: p.name,
565.         )
566. 
567.         publishers = (
568.             Publisher.objects
569.             .filter(book__price__lt=Decimal("40.0"))
570.             .annotate(num_books=Count("book__id"))
571.             .filter(num_books__gt=1)
572.             .order_by("pk")
573.         )
574.         self.assertQuerysetEqual(publishers, ['Apress'], lambda p: p.name)
575. 
576.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__range=[1, 3]).order_by("pk")
577.         self.assertQuerysetEqual(
578.             publishers, [
579.                 "Apress",
580.                 "Sams",
581.                 "Prentice Hall",
582.                 "Morgan Kaufmann",
583.                 "Expensive Publisher",
584.             ],
585.             lambda p: p.name
586.         )
587. 
588.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__range=[1, 2]).order_by("pk")
589.         self.assertQuerysetEqual(
590.             publishers,
591.             ['Apress', 'Sams', 'Prentice Hall', 'Morgan Kaufmann'],
592.             lambda p: p.name
593.         )
594. 
595.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__in=[1, 3]).order_by("pk")
596.         self.assertQuerysetEqual(
597.             publishers,
598.             ['Sams', 'Morgan Kaufmann', 'Expensive Publisher'],
599.             lambda p: p.name,
600.         )
601. 
602.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__isnull=True)
603.         self.assertEqual(len(publishers), 0)
604. 
605.     def test_annotation(self):
606.         vals = Author.objects.filter(pk=self.a1.pk).aggregate(Count("friends__id"))
607.         self.assertEqual(vals, {"friends__id__count": 2})
608. 
609.         books = Book.objects.annotate(num_authors=Count("authors__name")).filter(num_authors__exact=2).order_by("pk")
610.         self.assertQuerysetEqual(
611.             books, [
612.                 "The Definitive Guide to Django: Web Development Done Right",
613.                 "Artificial Intelligence: A Modern Approach",
614.             ],
615.             lambda b: b.name
616.         )
617. 
618.         authors = (
619.             Author.objects
620.             .annotate(num_friends=Count("friends__id", distinct=True))
621.             .filter(num_friends=0)
622.             .order_by("pk")
623.         )
624.         self.assertQuerysetEqual(authors, ['Brad Dayley'], lambda a: a.name)
625. 
626.         publishers = Publisher.objects.annotate(num_books=Count("book__id")).filter(num_books__gt=1).order_by("pk")
627.         self.assertQuerysetEqual(publishers, ['Apress', 'Prentice Hall'], lambda p: p.name)
628. 
629.         publishers = (
630.             Publisher.objects
631.             .filter(book__price__lt=Decimal("40.0"))
632.             .annotate(num_books=Count("book__id"))
633.             .filter(num_books__gt=1)
634.         )
635.         self.assertQuerysetEqual(publishers, ['Apress'], lambda p: p.name)
636. 
637.         books = (
638.             Book.objects
639.             .annotate(num_authors=Count("authors__id"))
640.             .filter(authors__name__contains="Norvig", num_authors__gt=1)
641.         )
642.         self.assertQuerysetEqual(
643.             books,
644.             ['Artificial Intelligence: A Modern Approach'],
645.             lambda b: b.name
646.         )
647. 
648.     def test_more_aggregation(self):
649.         a = Author.objects.get(name__contains='Norvig')
650.         b = Book.objects.get(name__contains='Done Right')
651.         b.authors.add(a)
652.         b.save()
653. 
654.         vals = (
655.             Book.objects
656.             .annotate(num_authors=Count("authors__id"))
657.             .filter(authors__name__contains="Norvig", num_authors__gt=1)
658.             .aggregate(Avg("rating"))
659.         )
660.         self.assertEqual(vals, {"rating__avg": 4.25})
661. 
662.     def test_even_more_aggregate(self):
663.         publishers = Publisher.objects.annotate(
664.             earliest_book=Min("book__pubdate"),
665.         ).exclude(earliest_book=None).order_by("earliest_book").values(
666.             'earliest_book',
667.             'num_awards',
668.             'id',
669.             'name',
670.         )
671.         self.assertEqual(
672.             list(publishers), [
673.                 {
674.                     'earliest_book': datetime.date(1991, 10, 15),
675.                     'num_awards': 9,
676.                     'id': self.p4.id,
677.                     'name': 'Morgan Kaufmann'
678.                 },
679.                 {
680.                     'earliest_book': datetime.date(1995, 1, 15),
681.                     'num_awards': 7,
682.                     'id': self.p3.id,
683.                     'name': 'Prentice Hall'
684.                 },
685.                 {
686.                     'earliest_book': datetime.date(2007, 12, 6),
687.                     'num_awards': 3,
688.                     'id': self.p1.id,
689.                     'name': 'Apress'
690.                 },
691.                 {
692.                     'earliest_book': datetime.date(2008, 3, 3),
693.                     'num_awards': 1,
694.                     'id': self.p2.id,
695.                     'name': 'Sams'
696.                 }
697.             ]
698.         )
699. 
700.         vals = Store.objects.aggregate(Max("friday_night_closing"), Min("original_opening"))
701.         self.assertEqual(
702.             vals,
703.             {
704.                 "friday_night_closing__max": datetime.time(23, 59, 59),
705.                 "original_opening__min": datetime.datetime(1945, 4, 25, 16, 24, 14),
706.             }
707.         )
708. 
709.     def test_annotate_values_list(self):
710.         books = (
711.             Book.objects
712.             .filter(pk=self.b1.pk)
713.             .annotate(mean_age=Avg("authors__age"))
714.             .values_list("pk", "isbn", "mean_age")
715.         )
716.         self.assertEqual(list(books), [(self.b1.id, '159059725', 34.5)])
717. 
718.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values_list("isbn")
719.         self.assertEqual(list(books), [('159059725',)])
720. 
721.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values_list("mean_age")
722.         self.assertEqual(list(books), [(34.5,)])
723. 
724.         books = (
725.             Book.objects
726.             .filter(pk=self.b1.pk)
727.             .annotate(mean_age=Avg("authors__age"))
728.             .values_list("mean_age", flat=True)
729.         )
730.         self.assertEqual(list(books), [34.5])
731. 
732.         books = Book.objects.values_list("price").annotate(count=Count("price")).order_by("-count", "price")
733.         self.assertEqual(
734.             list(books), [
735.                 (Decimal("29.69"), 2),
736.                 (Decimal('23.09'), 1),
737.                 (Decimal('30'), 1),
738.                 (Decimal('75'), 1),
739.                 (Decimal('82.8'), 1),
740.             ]
741.         )
742. 
743.     def test_dates_with_aggregation(self):
744.         """
745.         .dates() returns a distinct set of dates when applied to a
746.         QuerySet with aggregation.
747. 
748.         Refs #18056. Previously, .dates() would return distinct (date_kind,
749.         aggregation) sets, in this case (year, num_authors), so 2008 would be
750.         returned twice because there are books from 2008 with a different
751.         number of authors.
752.         """
753.         dates = Book.objects.annotate(num_authors=Count("authors")).dates('pubdate', 'year')
754.         self.assertQuerysetEqual(
755.             dates, [
756.                 "datetime.date(1991, 1, 1)",
757.                 "datetime.date(1995, 1, 1)",
758.                 "datetime.date(2007, 1, 1)",
759.                 "datetime.date(2008, 1, 1)"
760.             ]
761.         )
762. 
763.     def test_values_aggregation(self):
764.         # Refs #20782
765.         max_rating = Book.objects.values('rating').aggregate(max_rating=Max('rating'))
766.         self.assertEqual(max_rating['max_rating'], 5)
767.         max_books_per_rating = Book.objects.values('rating').annotate(
768.             books_per_rating=Count('id')
769.         ).aggregate(Max('books_per_rating'))
770.         self.assertEqual(
771.             max_books_per_rating,
772.             {'books_per_rating__max': 3})
773. 
774.     def test_ticket17424(self):
775.         """
776.         Doing exclude() on a foreign model after annotate() doesn't crash.
777.         """
778.         all_books = list(Book.objects.values_list('pk', flat=True).order_by('pk'))
779.         annotated_books = Book.objects.order_by('pk').annotate(one=Count("id"))
780. 
781.         # The value doesn't matter, we just need any negative
782.         # constraint on a related model that's a noop.
783.         excluded_books = annotated_books.exclude(publisher__name="__UNLIKELY_VALUE__")
784. 
785.         # Try to generate query tree
786.         str(excluded_books.query)
787. 
788.         self.assertQuerysetEqual(excluded_books, all_books, lambda x: x.pk)
789. 
790.         # Check internal state
791.         self.assertIsNone(annotated_books.query.alias_map["aggregation_book"].join_type)
792.         self.assertIsNone(excluded_books.query.alias_map["aggregation_book"].join_type)
793. 
794.     def test_ticket12886(self):
795.         """
796.         Aggregation over sliced queryset works correctly.
797.         """
798.         qs = Book.objects.all().order_by('-rating')[0:3]
799.         vals = qs.aggregate(average_top3_rating=Avg('rating'))['average_top3_rating']
800.         self.assertAlmostEqual(vals, 4.5, places=2)
801. 
802.     def test_ticket11881(self):
803.         """
804.         Subqueries do not needlessly contain ORDER BY, SELECT FOR UPDATE or
805.         select_related() stuff.
806.         """
807.         qs = Book.objects.all().select_for_update().order_by(
808.             'pk').select_related('publisher').annotate(max_pk=Max('pk'))
809.         with CaptureQueriesContext(connection) as captured_queries:
810.             qs.aggregate(avg_pk=Avg('max_pk'))
811.             self.assertEqual(len(captured_queries), 1)
812.             qstr = captured_queries[0]['sql'].lower()
813.             self.assertNotIn('for update', qstr)
814.             forced_ordering = connection.ops.force_no_ordering()
815.             if forced_ordering:
816.                 # If the backend needs to force an ordering we make sure it's
817.                 # the only "ORDER BY" clause present in the query.
818.                 self.assertEqual(
819.                     re.findall(r'order by (\w+)', qstr),
820.                     [', '.join(f[1][0] for f in forced_ordering).lower()]
821.                 )
822.             else:
823.                 self.assertNotIn('order by', qstr)
824.             self.assertEqual(qstr.count(' join '), 0)
825. 
826.     def test_decimal_max_digits_has_no_effect(self):
827.         Book.objects.all().delete()
828.         a1 = Author.objects.first()
829.         p1 = Publisher.objects.first()
830.         thedate = timezone.now()
831.         for i in range(10):
832.             Book.objects.create(
833.                 isbn="abcde{}".format(i), name="none", pages=10, rating=4.0,
834.                 price=9999.98, contact=a1, publisher=p1, pubdate=thedate)
835. 
836.         book = Book.objects.aggregate(price_sum=Sum('price'))
837.         self.assertEqual(book['price_sum'], Decimal("99999.80"))
838. 
839.     def test_nonaggregate_aggregation_throws(self):
840.         with self.assertRaisesMessage(TypeError, 'fail is not an aggregate expression'):
841.             Book.objects.aggregate(fail=F('price'))
842. 
843.     def test_nonfield_annotation(self):
844.         book = Book.objects.annotate(val=Max(Value(2, output_field=IntegerField()))).first()
845.         self.assertEqual(book.val, 2)
846.         book = Book.objects.annotate(val=Max(Value(2), output_field=IntegerField())).first()
847.         self.assertEqual(book.val, 2)
848.         book = Book.objects.annotate(val=Max(2, output_field=IntegerField())).first()
849.         self.assertEqual(book.val, 2)
850. 
851.     def test_missing_output_field_raises_error(self):
852.         with self.assertRaisesMessage(FieldError, 'Cannot resolve expression type, unknown output_field'):
853.             Book.objects.annotate(val=Max(2)).first()
854. 
855.     def test_annotation_expressions(self):
856.         authors = Author.objects.annotate(combined_ages=Sum(F('age') + F('friends__age'))).order_by('name')
857.         authors2 = Author.objects.annotate(combined_ages=Sum('age') + Sum('friends__age')).order_by('name')
858.         for qs in (authors, authors2):
859.             self.assertQuerysetEqual(
860.                 qs, [
861.                     ('Adrian Holovaty', 132),
862.                     ('Brad Dayley', None),
863.                     ('Jacob Kaplan-Moss', 129),
864.                     ('James Bennett', 63),
865.                     ('Jeffrey Forcier', 128),
866.                     ('Paul Bissex', 120),
867.                     ('Peter Norvig', 103),
868.                     ('Stuart Russell', 103),
869.                     ('Wesley J. Chun', 176)
870.                 ],
871.                 lambda a: (a.name, a.combined_ages)
872.             )
873. 
874.     def test_aggregation_expressions(self):
875.         a1 = Author.objects.aggregate(av_age=Sum('age') / Count('*'))
876.         a2 = Author.objects.aggregate(av_age=Sum('age') / Count('age'))
877.         a3 = Author.objects.aggregate(av_age=Avg('age'))
878.         self.assertEqual(a1, {'av_age': 37})
879.         self.assertEqual(a2, {'av_age': 37})
880.         self.assertEqual(a3, {'av_age': Approximate(37.4, places=1)})
881. 
882.     def test_avg_decimal_field(self):
883.         v = Book.objects.filter(rating=4).aggregate(avg_price=(Avg('price')))['avg_price']
884.         self.assertIsInstance(v, Decimal)
885.         self.assertEqual(v, Approximate(Decimal('47.39'), places=2))
886. 
887.     def test_order_of_precedence(self):
888.         p1 = Book.objects.filter(rating=4).aggregate(avg_price=(Avg('price') + 2) * 3)
889.         self.assertEqual(p1, {'avg_price': Approximate(Decimal('148.18'), places=2)})
890. 
891.         p2 = Book.objects.filter(rating=4).aggregate(avg_price=Avg('price') + 2 * 3)
892.         self.assertEqual(p2, {'avg_price': Approximate(Decimal('53.39'), places=2)})
893. 
894.     def test_combine_different_types(self):
895.         msg = (
896.             'Expression contains mixed types: FloatField, IntegerField. '
897.             'You must set output_field.'
898.         )
899.         qs = Book.objects.annotate(sums=Sum('rating') + Sum('pages') + Sum('price'))
900.         with self.assertRaisesMessage(FieldError, msg):
901.             qs.first()
902.         with self.assertRaisesMessage(FieldError, msg):
903.             qs.first()
904. 
905.         b1 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
906.                                    output_field=IntegerField())).get(pk=self.b4.pk)
907.         self.assertEqual(b1.sums, 383)
908. 
909.         b2 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
910.                                    output_field=FloatField())).get(pk=self.b4.pk)
911.         self.assertEqual(b2.sums, 383.69)
912. 
913.         b3 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
914.                                    output_field=DecimalField())).get(pk=self.b4.pk)
915.         self.assertEqual(b3.sums, Approximate(Decimal("383.69"), places=2))
916. 
917.     def test_complex_aggregations_require_kwarg(self):
918.         with self.assertRaisesMessage(TypeError, 'Complex annotations require an alias'):
919.             Author.objects.annotate(Sum(F('age') + F('friends__age')))
920.         with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
921.             Author.objects.aggregate(Sum('age') / Count('age'))
922.         with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
923.             Author.objects.aggregate(Sum(1))
924. 
925.     def test_aggregate_over_complex_annotation(self):
926.         qs = Author.objects.annotate(
927.             combined_ages=Sum(F('age') + F('friends__age')))
928. 
929.         age = qs.aggregate(max_combined_age=Max('combined_ages'))
930.         self.assertEqual(age['max_combined_age'], 176)
931. 
932.         age = qs.aggregate(max_combined_age_doubled=Max('combined_ages') * 2)
933.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
934. 
935.         age = qs.aggregate(
936.             max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'))
937.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
938. 
939.         age = qs.aggregate(
940.             max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'),
941.             sum_combined_age=Sum('combined_ages'))
942.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
943.         self.assertEqual(age['sum_combined_age'], 954)
944. 
945.         age = qs.aggregate(
946.             max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'),
947.             sum_combined_age_doubled=Sum('combined_ages') + Sum('combined_ages'))
948.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
949.         self.assertEqual(age['sum_combined_age_doubled'], 954 * 2)
950. 
951.     def test_values_annotation_with_expression(self):
952.         # ensure the F() is promoted to the group by clause
953.         qs = Author.objects.values('name').annotate(another_age=Sum('age') + F('age'))
954.         a = qs.get(name="Adrian Holovaty")
955.         self.assertEqual(a['another_age'], 68)
956. 
957.         qs = qs.annotate(friend_count=Count('friends'))
958.         a = qs.get(name="Adrian Holovaty")
959.         self.assertEqual(a['friend_count'], 2)
960. 
961.         qs = qs.annotate(combined_age=Sum('age') + F('friends__age')).filter(
962.             name="Adrian Holovaty").order_by('-combined_age')
963.         self.assertEqual(
964.             list(qs), [
965.                 {
966.                     "name": 'Adrian Holovaty',
967.                     "another_age": 68,
968.                     "friend_count": 1,
969.                     "combined_age": 69
970.                 },
971.                 {
972.                     "name": 'Adrian Holovaty',
973.                     "another_age": 68,
974.                     "friend_count": 1,
975.                     "combined_age": 63
976.                 }
977.             ]
978.         )
979. 
980.         vals = qs.values('name', 'combined_age')
981.         self.assertEqual(
982.             list(vals), [
983.                 {'name': 'Adrian Holovaty', 'combined_age': 69},
984.                 {'name': 'Adrian Holovaty', 'combined_age': 63},
985.             ]
986.         )
987. 
988.     def test_annotate_values_aggregate(self):
989.         alias_age = Author.objects.annotate(
990.             age_alias=F('age')
991.         ).values(
992.             'age_alias',
993.         ).aggregate(sum_age=Sum('age_alias'))
994. 
995.         age = Author.objects.values('age').aggregate(sum_age=Sum('age'))
996. 
997.         self.assertEqual(alias_age['sum_age'], age['sum_age'])
998. 
999.     def test_annotate_over_annotate(self):
1000.         author = Author.objects.annotate(
1001.             age_alias=F('age')


File: tests/aggregation/tests.py
Line number range: 1001 - 1501
Content:
1001.             age_alias=F('age')
1002.         ).annotate(
1003.             sum_age=Sum('age_alias')
1004.         ).get(name="Adrian Holovaty")
1005. 
1006.         other_author = Author.objects.annotate(
1007.             sum_age=Sum('age')
1008.         ).get(name="Adrian Holovaty")
1009. 
1010.         self.assertEqual(author.sum_age, other_author.sum_age)
1011. 
1012.     def test_annotated_aggregate_over_annotated_aggregate(self):
1013.         with self.assertRaisesMessage(FieldError, "Cannot compute Sum('id__max'): 'id__max' is an aggregate"):
1014.             Book.objects.annotate(Max('id')).annotate(Sum('id__max'))
1015. 
1016.         class MyMax(Max):
1017.             def as_sql(self, compiler, connection):
1018.                 self.set_source_expressions(self.get_source_expressions()[0:1])
1019.                 return super().as_sql(compiler, connection)
1020. 
1021.         with self.assertRaisesMessage(FieldError, "Cannot compute Max('id__max'): 'id__max' is an aggregate"):
1022.             Book.objects.annotate(Max('id')).annotate(my_max=MyMax('id__max', 'price'))
1023. 
1024.     def test_multi_arg_aggregate(self):
1025.         class MyMax(Max):
1026.             output_field = DecimalField()
1027. 
1028.             def as_sql(self, compiler, connection):
1029.                 copy = self.copy()
1030.                 copy.set_source_expressions(copy.get_source_expressions()[0:1])
1031.                 return super(MyMax, copy).as_sql(compiler, connection)
1032. 
1033.         with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
1034.             Book.objects.aggregate(MyMax('pages', 'price'))
1035. 
1036.         with self.assertRaisesMessage(TypeError, 'Complex annotations require an alias'):
1037.             Book.objects.annotate(MyMax('pages', 'price'))
1038. 
1039.         Book.objects.aggregate(max_field=MyMax('pages', 'price'))
1040. 
1041.     def test_add_implementation(self):
1042.         class MySum(Sum):
1043.             pass
1044. 
1045.         # test completely changing how the output is rendered
1046.         def lower_case_function_override(self, compiler, connection):
1047.             sql, params = compiler.compile(self.source_expressions[0])
1048.             substitutions = {'function': self.function.lower(), 'expressions': sql, 'distinct': ''}
1049.             substitutions.update(self.extra)
1050.             return self.template % substitutions, params
1051.         setattr(MySum, 'as_' + connection.vendor, lower_case_function_override)
1052. 
1053.         qs = Book.objects.annotate(
1054.             sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
1055.         )
1056.         self.assertEqual(str(qs.query).count('sum('), 1)
1057.         b1 = qs.get(pk=self.b4.pk)
1058.         self.assertEqual(b1.sums, 383)
1059. 
1060.         # test changing the dict and delegating
1061.         def lower_case_function_super(self, compiler, connection):
1062.             self.extra['function'] = self.function.lower()
1063.             return super(MySum, self).as_sql(compiler, connection)
1064.         setattr(MySum, 'as_' + connection.vendor, lower_case_function_super)
1065. 
1066.         qs = Book.objects.annotate(
1067.             sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
1068.         )
1069.         self.assertEqual(str(qs.query).count('sum('), 1)
1070.         b1 = qs.get(pk=self.b4.pk)
1071.         self.assertEqual(b1.sums, 383)
1072. 
1073.         # test overriding all parts of the template
1074.         def be_evil(self, compiler, connection):
1075.             substitutions = {'function': 'MAX', 'expressions': '2', 'distinct': ''}
1076.             substitutions.update(self.extra)
1077.             return self.template % substitutions, ()
1078.         setattr(MySum, 'as_' + connection.vendor, be_evil)
1079. 
1080.         qs = Book.objects.annotate(
1081.             sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
1082.         )
1083.         self.assertEqual(str(qs.query).count('MAX('), 1)
1084.         b1 = qs.get(pk=self.b4.pk)
1085.         self.assertEqual(b1.sums, 2)
1086. 
1087.     def test_complex_values_aggregation(self):
1088.         max_rating = Book.objects.values('rating').aggregate(
1089.             double_max_rating=Max('rating') + Max('rating'))
1090.         self.assertEqual(max_rating['double_max_rating'], 5 * 2)
1091. 
1092.         max_books_per_rating = Book.objects.values('rating').annotate(
1093.             books_per_rating=Count('id') + 5
1094.         ).aggregate(Max('books_per_rating'))
1095.         self.assertEqual(
1096.             max_books_per_rating,
1097.             {'books_per_rating__max': 3 + 5})
1098. 
1099.     def test_expression_on_aggregation(self):
1100. 
1101.         # Create a plain expression
1102.         class Greatest(Func):
1103.             function = 'GREATEST'
1104. 
1105.             def as_sqlite(self, compiler, connection, **extra_context):
1106.                 return super().as_sql(compiler, connection, function='MAX', **extra_context)
1107. 
1108.         qs = Publisher.objects.annotate(
1109.             price_or_median=Greatest(Avg('book__rating', output_field=DecimalField()), Avg('book__price'))
1110.         ).filter(price_or_median__gte=F('num_awards')).order_by('num_awards')
1111.         self.assertQuerysetEqual(
1112.             qs, [1, 3, 7, 9], lambda v: v.num_awards)
1113. 
1114.         qs2 = Publisher.objects.annotate(
1115.             rating_or_num_awards=Greatest(Avg('book__rating'), F('num_awards'),
1116.                                           output_field=FloatField())
1117.         ).filter(rating_or_num_awards__gt=F('num_awards')).order_by('num_awards')
1118.         self.assertQuerysetEqual(
1119.             qs2, [1, 3], lambda v: v.num_awards)
1120. 
1121.     def test_arguments_must_be_expressions(self):
1122.         msg = 'QuerySet.aggregate() received non-expression(s): %s.'
1123.         with self.assertRaisesMessage(TypeError, msg % FloatField()):
1124.             Book.objects.aggregate(FloatField())
1125.         with self.assertRaisesMessage(TypeError, msg % True):
1126.             Book.objects.aggregate(is_book=True)
1127.         with self.assertRaisesMessage(TypeError, msg % ', '.join([str(FloatField()), 'True'])):
1128.             Book.objects.aggregate(FloatField(), Avg('price'), is_book=True)
1129. 
1130.     def test_aggregation_subquery_annotation(self):
1131.         """Subquery annotations are excluded from the GROUP BY if they are
1132.         not explicitly grouped against."""
1133.         latest_book_pubdate_qs = Book.objects.filter(
1134.             publisher=OuterRef('pk')
1135.         ).order_by('-pubdate').values('pubdate')[:1]
1136.         publisher_qs = Publisher.objects.annotate(
1137.             latest_book_pubdate=Subquery(latest_book_pubdate_qs),
1138.         ).annotate(count=Count('book'))
1139.         with self.assertNumQueries(1) as ctx:
1140.             list(publisher_qs)
1141.         self.assertEqual(ctx[0]['sql'].count('SELECT'), 2)
1142.         # The GROUP BY should not be by alias either.
1143.         self.assertEqual(ctx[0]['sql'].lower().count('latest_book_pubdate'), 1)
1144. 
1145.     def test_aggregation_subquery_annotation_exists(self):
1146.         latest_book_pubdate_qs = Book.objects.filter(
1147.             publisher=OuterRef('pk')
1148.         ).order_by('-pubdate').values('pubdate')[:1]
1149.         publisher_qs = Publisher.objects.annotate(
1150.             latest_book_pubdate=Subquery(latest_book_pubdate_qs),
1151.             count=Count('book'),
1152.         )
1153.         self.assertTrue(publisher_qs.exists())
1154. 
1155.     def test_aggregation_exists_annotation(self):
1156.         published_books = Book.objects.filter(publisher=OuterRef('pk'))
1157.         publisher_qs = Publisher.objects.annotate(
1158.             published_book=Exists(published_books),
1159.             count=Count('book'),
1160.         ).values_list('name', flat=True)
1161.         self.assertCountEqual(list(publisher_qs), [
1162.             'Apress',
1163.             'Morgan Kaufmann',
1164.             "Jonno's House of Books",
1165.             'Prentice Hall',
1166.             'Sams',
1167.         ])
1168. 
1169.     def test_aggregation_subquery_annotation_values(self):
1170.         """
1171.         Subquery annotations and external aliases are excluded from the GROUP
1172.         BY if they are not selected.
1173.         """
1174.         books_qs = Book.objects.annotate(
1175.             first_author_the_same_age=Subquery(
1176.                 Author.objects.filter(
1177.                     age=OuterRef('contact__friends__age'),
1178.                 ).order_by('age').values('id')[:1],
1179.             )
1180.         ).filter(
1181.             publisher=self.p1,
1182.             first_author_the_same_age__isnull=False,
1183.         ).annotate(
1184.             min_age=Min('contact__friends__age'),
1185.         ).values('name', 'min_age').order_by('name')
1186.         self.assertEqual(list(books_qs), [
1187.             {'name': 'Practical Django Projects', 'min_age': 34},
1188.             {
1189.                 'name': 'The Definitive Guide to Django: Web Development Done Right',
1190.                 'min_age': 29,
1191.             },
1192.         ])
1193. 
1194.     def test_aggregation_subquery_annotation_values_collision(self):
1195.         books_rating_qs = Book.objects.filter(
1196.             publisher=OuterRef('pk'),
1197.             price=Decimal('29.69'),
1198.         ).values('rating')
1199.         publisher_qs = Publisher.objects.filter(
1200.             book__contact__age__gt=20,
1201.             name=self.p1.name,
1202.         ).annotate(
1203.             rating=Subquery(books_rating_qs),
1204.             contacts_count=Count('book__contact'),
1205.         ).values('rating').annotate(total_count=Count('rating'))
1206.         self.assertEqual(list(publisher_qs), [
1207.             {'rating': 4.0, 'total_count': 2},
1208.         ])
1209. 
1210.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1211.     @skipIf(
1212.         connection.vendor == 'mysql' and 'ONLY_FULL_GROUP_BY' in connection.sql_mode,
1213.         'GROUP BY optimization does not work properly when ONLY_FULL_GROUP_BY '
1214.         'mode is enabled on MySQL, see #31331.',
1215.     )
1216.     def test_aggregation_subquery_annotation_multivalued(self):
1217.         """
1218.         Subquery annotations must be included in the GROUP BY if they use
1219.         potentially multivalued relations (contain the LOOKUP_SEP).
1220.         """
1221.         subquery_qs = Author.objects.filter(
1222.             pk=OuterRef('pk'),
1223.             book__name=OuterRef('book__name'),
1224.         ).values('pk')
1225.         author_qs = Author.objects.annotate(
1226.             subquery_id=Subquery(subquery_qs),
1227.         ).annotate(count=Count('book'))
1228.         self.assertEqual(author_qs.count(), Author.objects.count())
1229. 
1230.     def test_aggregation_order_by_not_selected_annotation_values(self):
1231.         result_asc = [
1232.             self.b4.pk,
1233.             self.b3.pk,
1234.             self.b1.pk,
1235.             self.b2.pk,
1236.             self.b5.pk,
1237.             self.b6.pk,
1238.         ]
1239.         result_desc = result_asc[::-1]
1240.         tests = [
1241.             ('min_related_age', result_asc),
1242.             ('-min_related_age', result_desc),
1243.             (F('min_related_age'), result_asc),
1244.             (F('min_related_age').asc(), result_asc),
1245.             (F('min_related_age').desc(), result_desc),
1246.         ]
1247.         for ordering, expected_result in tests:
1248.             with self.subTest(ordering=ordering):
1249.                 books_qs = Book.objects.annotate(
1250.                     min_age=Min('authors__age'),
1251.                 ).annotate(
1252.                     min_related_age=Coalesce('min_age', 'contact__age'),
1253.                 ).order_by(ordering).values_list('pk', flat=True)
1254.                 self.assertEqual(list(books_qs), expected_result)
1255. 
1256.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1257.     def test_group_by_subquery_annotation(self):
1258.         """
1259.         Subquery annotations are included in the GROUP BY if they are
1260.         grouped against.
1261.         """
1262.         long_books_count_qs = Book.objects.filter(
1263.             publisher=OuterRef('pk'),
1264.             pages__gt=400,
1265.         ).values(
1266.             'publisher'
1267.         ).annotate(count=Count('pk')).values('count')
1268.         long_books_count_breakdown = Publisher.objects.values_list(
1269.             Subquery(long_books_count_qs, IntegerField()),
1270.         ).annotate(total=Count('*'))
1271.         self.assertEqual(dict(long_books_count_breakdown), {None: 1, 1: 4})
1272. 
1273.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1274.     def test_group_by_exists_annotation(self):
1275.         """
1276.         Exists annotations are included in the GROUP BY if they are
1277.         grouped against.
1278.         """
1279.         long_books_qs = Book.objects.filter(
1280.             publisher=OuterRef('pk'),
1281.             pages__gt=800,
1282.         )
1283.         has_long_books_breakdown = Publisher.objects.values_list(
1284.             Exists(long_books_qs),
1285.         ).annotate(total=Count('*'))
1286.         self.assertEqual(dict(has_long_books_breakdown), {True: 2, False: 3})
1287. 
1288.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1289.     def test_aggregation_subquery_annotation_related_field(self):
1290.         publisher = Publisher.objects.create(name=self.a9.name, num_awards=2)
1291.         book = Book.objects.create(
1292.             isbn='159059999', name='Test book.', pages=819, rating=2.5,
1293.             price=Decimal('14.44'), contact=self.a9, publisher=publisher,
1294.             pubdate=datetime.date(2019, 12, 6),
1295.         )
1296.         book.authors.add(self.a5, self.a6, self.a7)
1297.         books_qs = Book.objects.annotate(
1298.             contact_publisher=Subquery(
1299.                 Publisher.objects.filter(
1300.                     pk=OuterRef('publisher'),
1301.                     name=OuterRef('contact__name'),
1302.                 ).values('name')[:1],
1303.             )
1304.         ).filter(
1305.             contact_publisher__isnull=False,
1306.         ).annotate(count=Count('authors'))
1307.         self.assertSequenceEqual(books_qs, [book])
1308.         # FIXME: GROUP BY doesn't need to include a subquery with
1309.         # non-multivalued JOINs, see Col.possibly_multivalued (refs #31150):
1310.         # with self.assertNumQueries(1) as ctx:
1311.         #     self.assertSequenceEqual(books_qs, [book])
1312.         # self.assertEqual(ctx[0]['sql'].count('SELECT'), 2)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 21:49:59,814 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of the file `tests/aggregation/tests.py`. The provided context contains the content of this file from line 1 to 1312, which I can use to fulfill the request.', relative_path='tests/aggregation/tests.py', start_line=1, end_line=1312)]
2025-12-23 21:49:59,816 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file `tests/aggregation/tests.py`.
2025-12-23 21:49:59,816 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 21:49:59,816 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 21:49:59,817 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 11 existing contexts
2025-12-23 21:49:59,817 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 12 total contexts (removed 0 duplicates)
2025-12-23 21:49:59,818 - thread-130045135812288.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-23 21:49:59,819 - thread-130045135812288.prometheus_context_collector - INFO - Successfully retrieved 12 context snippets
