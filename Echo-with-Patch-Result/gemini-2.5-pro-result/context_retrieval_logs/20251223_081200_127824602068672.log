2025-12-23 08:12:00,230 - thread-127824602068672.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: order_by('?') unexpectedly breaking queryset aggregation

Description: Description
	
Steps to reproduce:
class Thing(models.Model):
	pass
class Related(models.Model):
	models.ForeignKey(Thing)
With data
t = Thing.objects.create()
rs = [Related.objects.create(thing=t) for _ in range(2)]
The following query works as expected. The aggregation with Count produces a GROUP BY clause on related.id.
>>> Thing.objects.annotate(rc=Count('related')).order_by('rc').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 2}]>
This also works as expected (at least to me). Although there is an aggregation, ordering by related means that the grouping will be broken down.
>>> Thing.objects.annotate(rc=Count('related')).order_by('related').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
But the following seems wrong to me.
>>> Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
The random function call has nothing to do with the aggregation, and I see no reason it should break it. Dumping the query seems that indeed the random call breaks the group by call: (I simpilfied the table names a little)
>>> print(Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc').query)
SELECT "thing"."id", COUNT("related"."id") AS "rc" FROM "thing" LEFT OUTER JOIN "related" ON ("thing"."id" = "related"."thing_id") GROUP BY "thing"."id", RANDOM() ORDER BY RANDOM() ASC
I dug into the SQL compiler, and it seems to me the problem is inside django.db.models.sql.compiler.get_group_by, where the compiler combines all non-aggregate, non-ref order_by expressions into group_by. I patched it like this
for expr, (sql, params, is_ref) in order_by:
	if expr.contains_aggregate:
		continue
	if is_ref:
		continue
	expressions.extend([
		exp for exp in expr.get_source_expressions()
		if not isinstance(exp, Random)
	])
and things seem to work correctly. No failed tests against SQLite3 with default settings.

Patch information:
diff --git a/django/db/models/functions/math.py b/django/db/models/functions/math.py
index 304e112225..15915f4b7c 100644
--- a/django/db/models/functions/math.py
+++ b/django/db/models/functions/math.py
@@ -154,6 +154,9 @@ class Random(NumericOutputFieldMixin, Func):
     def as_sqlite(self, compiler, connection, **extra_context):
         return super().as_sql(compiler, connection, function='RAND', **extra_context)
 
+    def get_group_by_cols(self, alias=None):
+        return []
+
 
 class Round(Transform):
     function = 'ROUND'


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 08:12:00,322 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: order_by('?') unexpectedly breaking queryset aggregation

Description: Description
	
Steps to reproduce:
class Thing(models.Model):
	pass
class Related(models.Model):
	models.ForeignKey(Thing)
With data
t = Thing.objects.create()
rs = [Related.objects.create(thing=t) for _ in range(2)]
The following query works as expected. The aggregation with Count produces a GROUP BY clause on related.id.
>>> Thing.objects.annotate(rc=Count('related')).order_by('rc').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 2}]>
This also works as expected (at least to me). Although there is an aggregation, ordering by related means that the grouping will be broken down.
>>> Thing.objects.annotate(rc=Count('related')).order_by('related').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
But the following seems wrong to me.
>>> Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
The random function call has nothing to do with the aggregation, and I see no reason it should break it. Dumping the query seems that indeed the random call breaks the group by call: (I simpilfied the table names a little)
>>> print(Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc').query)
SELECT "thing"."id", COUNT("related"."id") AS "rc" FROM "thing" LEFT OUTER JOIN "related" ON ("thing"."id" = "related"."thing_id") GROUP BY "thing"."id", RANDOM() ORDER BY RANDOM() ASC
I dug into the SQL compiler, and it seems to me the problem is inside django.db.models.sql.compiler.get_group_by, where the compiler combines all non-aggregate, non-ref order_by expressions into group_by. I patched it like this
for expr, (sql, params, is_ref) in order_by:
	if expr.contains_aggregate:
		continue
	if is_ref:
		continue
	expressions.extend([
		exp for exp in expr.get_source_expressions()
		if not isinstance(exp, Random)
	])
and things seem to work correctly. No failed tests against SQLite3 with default settings.

Patch information:
diff --git a/django/db/models/functions/math.py b/django/db/models/functions/math.py
index 304e112225..15915f4b7c 100644
--- a/django/db/models/functions/math.py
+++ b/django/db/models/functions/math.py
@@ -154,6 +154,9 @@ class Random(NumericOutputFieldMixin, Func):
     def as_sqlite(self, compiler, connection, **extra_context):
         return super().as_sql(compiler, connection, function='RAND', **extra_context)
 
+    def get_group_by_cols(self, alias=None):
+        return []
+
 
 class Round(Transform):
     function = 'ROUND'


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 08:12:21,600 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user is reporting a bug where `order_by('?')` breaks queryset aggregation. To find relevant tests, I need to examine test files that cover ordering and aggregation. The current context is empty. I'll start by looking at tests for ordering to see how `order_by('?')` is handled, especially in combination with annotations." query='Please provide the full content of tests/ordering/tests.py.' extra_requirements='' purpose="I need to find test cases that use `order_by('?')` in conjunction with `annotate()` to see if there are any existing tests that cover similar scenarios to the bug report."
2025-12-23 08:12:21,601 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of tests/ordering/tests.py.
2025-12-23 08:12:21,601 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 08:12:21,602 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 08:12:21,603 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 08:12:21,603 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of tests/ordering/tests.py.
Purpose: I need to find test cases that use `order_by('?')` in conjunction with `annotate()` to see if there are any existing tests that cover similar scenarios to the bug report.
2025-12-23 08:12:23,945 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/ordering/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'b419f881-1a59-464f-bfc2-75e64300a50d': 'CoIFAY89a1//g3r2nhl7v0NKUgTYOtror2XuZSB0xIKyzZ/Pse9WO+AnAR0yl12WZO3EWvUuuhJC1YmsfA7abD8Y9oAFYqCu6rKfMFCEP/KRrZq26NoYaiunb0DbeRc0c3rmK+RrhKAtXQBRbW6IgSpFzp4peOVaNQn/uvQXjDmYbfDt3AULUO5A+cye4l33i4TfaLxUdL48msMaqEnDK144pa7+bICiHJLzuec5j6KNOuU7cO5f60W5JzeML3izDCRZoiF7yplAVGi1klq+MrreqCYjNz8iYOzl7CvGZPZlL9UyX24t9DUpSRD/6IT6qNXh68zsbJqsCU2BNWl8h+7mVg9wfLngeO1cdWBCVYw6Amkvl3NsmKQRBiGoE4GdfHmx4It1EErdGDSk56AORx26CV29EJcEe5FDzucq242ClJdZoczxNrrqzM+tK0m3kxd4qP0UfHSn4Wa1TUIt2FwRe43tjjCYzlBgoE6DVweUQeeBWLrvVq09P4qQv9FYxzguZwM7PyhhwkqP8kkMpQGeIUyzWnIphXU9numNChr3gWgqdqV4zDndQIG82ypTsIBfgUI0bW2XKdfFZWo3LOP6wUA9uZoH4nt8kcWym4Vo06fGx8wruCYMABJhnrRHvdoW4/0oYw1gM0LaXplyUpzmWmTRHqG032j45QKzys5YhRiiHapgpcirXydiIe2aIOQ9uea+nmClYw0Ibq+xfhwhmRRHNhwUIBTvvFjKN3nVoY52iIhSnNXRWJlBZEJG8Eb0Ag00m2QvQLbkTT/tSwjRKdVJsBnKgvHvpl3jwQJAOCBnhNIWhHpOKjrgobioDufini8H6FVDVlNsrHoHi8MG0JYg'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2112, 'candidates_token_count': 21, 'total_token_count': 2289, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2112}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 156, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.321019967397054, 'model_name': 'gemini-2.5-pro'} id='run--1e1b6c7f-c9ee-4ee1-ab23-656e3687b3d5-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/ordering/tests.py'}, 'id': 'b419f881-1a59-464f-bfc2-75e64300a50d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2112, 'output_tokens': 21, 'total_tokens': 2289, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 156}}
2025-12-23 08:12:27,330 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of `tests/ordering/tests.py` as requested. You can now examine the code to find test cases relevant to your bug report, specifically those that might involve both `order_by('?')` and `annotate()`. I will now perform a more specific search for `order_by('?')` within the file to pinpoint its usage." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/ordering/tests.py", "text": "order_by(\'?\')"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9281, 'candidates_token_count': 112, 'total_token_count': 9520, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9437}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 112}], 'thoughts_token_count': 127, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22395004544939315, 'model_name': 'gemini-2.5-pro'} id='run--ebe33679-9298-474f-a248-49f2fe790c86-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/ordering/tests.py', 'text': "order_by('?')"}, 'id': '56f3a605-409a-43bc-9833-6da2346ea424', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9281, 'output_tokens': 112, 'total_tokens': 9520, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 127}}
2025-12-23 08:12:30,702 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_type_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/ordering/tests.py", "type": "function_definition"}'}, '__gemini_function_call_thought_signatures__': {'4a1928c6-8469-453a-8de3-e6020b86e8f5': 'CvkHAY89a1/LjmBVGMYY4Vx0OzS9iC3TQdALIW/gd/ZcaX/MroEQYv+A3FC84xCsq3+iQMphp6hGmJlpYcCulRfsy/bPK7RbBLQTlxw7TkOe4UuoDq87b1NmtsY5AVz+x3/fB63HsptsZ/0UlQ1YIjj2xz3uKGg+VqoQidMVb3olssVoQxV8Nj4UKQaI9kZPS737AqD/iDlz2/wddjB46TYIR6e1HuH8ZDoGDbdGotpHDdolDRJQIbBVsO+QSj424H/tLT0sFlh62cSON9yiPRekamboiH7mQJ08Zqbqh+SCePp5X0DO8fJjp3Z7I/j8EELUTS93e3u7ov53H6UcBDfK6urNeN4nePigd3ohfE/nG5EgL3nGBWHlYwBjBpbwvQJlfQE4lYslzpu/vMwfiTpBRv2dPbu/0k49bsbcs56wRXNll2iTVWyZ2ZdXOiCvjhgS4YkfzXi/BWZv4/ypISbfvGz1e2fPApiZRhcadTdhXoYmzFhPridRRKUqoiixEAuLoZBegt7yODq/IwOU81Swln4+yyIcahqoSnFMPNEletA/gDlidt5OidZqpOSW+bMaSjfj6olsSJv24REGptAg9AZNgcHhSvE27Fm1dZhjjmbsJ15P2bdpVko56sj/Fy4mk/w+mNyyQxciloKV/VZLsgJK9Ukxa4d51mERu14RzG1CvZu5XTjK2g2wqj/3G+udMRijdZU75MlrDzfKelLuJmwLy89ODnrnBSs934G161sYbZYaRSzBHr9jXIeIu9ABy9sRTk0N6B6ijUBurBjXDceB5pMjbl6kIxc+HsCBjyLW2x0CZts/s6PJkhegUtoAu4h8fUDEVlJxHbF6Senj8owNF+We1FACjD9K+OGkxa2MCR7yvXWI/190yM9f2e8eGszMvGiHZF995ij0EP4tSL6jfWbSiUNugnFVSdP68TEzWrXYYIxAc2l3EqxiUT178Mjr4zz5NxS537WgM24WfWPkOpWnNon4lEqVxy591hVq/M8PvTMyKQjxb/497OmcRo8eea2iv+0rKkhJxwPZUz7OMeh7lfCwpNs+3DzaDgCbqBsunXEs87pvGsa/+8ezIKXBDJ7iFCUvRAIgD7C1D8R3S3buhVvV5D2s2s5YPmaki71jyiBo/vQA1oU8dytq0AtQ45HbnSLxiBCV489GnO3v96tcX89Re8b5J20a3Ow5o+NyzyQt5tVOAJth0HeMdXP1U1CM17P3qkEqEzi9TU+8qe/tljJMjxd12+xiWr/QK8c/IlsGfOjlyKZRWJIg2G8DwoOvFmuV7P0/WNKc064Ue4Y0b/ar4QasZqkP+PFV3xUnth6wf1x5Vq3wC5zAULBJheW2gSxF'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9425, 'candidates_token_count': 33, 'total_token_count': 9725, 'cached_content_token_count': 9089, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9581}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9089}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 33}], 'thoughts_token_count': 267}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7765206423672762, 'model_name': 'gemini-2.5-pro'} id='run--dd41a288-fa5d-4c50-a6ed-b40074403fa0-0' tool_calls=[{'name': 'find_ast_node_with_type_in_file_with_relative_path', 'args': {'relative_path': 'tests/ordering/tests.py', 'type': 'function_definition'}, 'id': '4a1928c6-8469-453a-8de3-e6020b86e8f5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9425, 'output_tokens': 33, 'total_tokens': 9725, 'input_token_details': {'cache_read': 9089}, 'output_token_details': {'reasoning': 267}}
2025-12-23 08:12:39,944 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of `tests/ordering/tests.py` and analyzed it to find test cases relevant to your query.\n\nBased on my analysis of the file, there are no test cases that use `order_by('?')` in conjunction with `annotate()`. However, I did find a test named `test_random_ordering` which specifically tests the random ordering functionality using `order_by('?')`. Additionally, there are other tests that use `annotate()` with `order_by()`, but not with the random ordering parameter." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 810, 'end_index': 1546, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 1730, 'end_index': 2341, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg177007.html', 'title': '', 'license_': ''}, {'start_index': 2352, 'end_index': 2635, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg177007.html', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 9490, 'candidates_token_count': 114, 'total_token_count': 10558, 'cached_content_token_count': 9091, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9913}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9091}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 114}], 'thoughts_token_count': 954}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2968170433713679, 'model_name': 'gemini-2.5-pro'} id='run--b4991050-687b-4ee0-b930-374a0a8298f9-0' usage_metadata={'input_tokens': 9490, 'output_tokens': 114, 'total_tokens': 10558, 'input_token_details': {'cache_read': 9091}, 'output_token_details': {'reasoning': 954}}
2025-12-23 08:12:39,946 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of tests/ordering/tests.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases that use `order_by('?')` in conjunction with `annotate()` to see if there are any existing tests that cover similar scenarios to the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/ordering/tests.py
Line number range: 1 - 486
Content:
1. from datetime import datetime
2. from operator import attrgetter
3. 
4. from django.db.models import (
5.     CharField, DateTimeField, F, Max, OuterRef, Subquery, Value,
6. )
7. from django.db.models.functions import Upper
8. from django.test import TestCase
9. 
10. from .models import Article, Author, ChildArticle, OrderedByFArticle, Reference
11. 
12. 
13. class OrderingTests(TestCase):
14. 
15.     @classmethod
16.     def setUpTestData(cls):
17.         cls.a1 = Article.objects.create(headline="Article 1", pub_date=datetime(2005, 7, 26))
18.         cls.a2 = Article.objects.create(headline="Article 2", pub_date=datetime(2005, 7, 27))
19.         cls.a3 = Article.objects.create(headline="Article 3", pub_date=datetime(2005, 7, 27))
20.         cls.a4 = Article.objects.create(headline="Article 4", pub_date=datetime(2005, 7, 28))
21.         cls.author_1 = Author.objects.create(name="Name 1")
22.         cls.author_2 = Author.objects.create(name="Name 2")
23.         for i in range(2):
24.             Author.objects.create()
25. 
26.     def test_default_ordering(self):
27.         """
28.         By default, Article.objects.all() orders by pub_date descending, then
29.         headline ascending.
30.         """
31.         self.assertQuerysetEqual(
32.             Article.objects.all(), [
33.                 "Article 4",
34.                 "Article 2",
35.                 "Article 3",
36.                 "Article 1",
37.             ],
38.             attrgetter("headline")
39.         )
40. 
41.         # Getting a single item should work too:
42.         self.assertEqual(Article.objects.all()[0], self.a4)
43. 
44.     def test_default_ordering_override(self):
45.         """
46.         Override ordering with order_by, which is in the same format as the
47.         ordering attribute in models.
48.         """
49.         self.assertQuerysetEqual(
50.             Article.objects.order_by("headline"), [
51.                 "Article 1",
52.                 "Article 2",
53.                 "Article 3",
54.                 "Article 4",
55.             ],
56.             attrgetter("headline")
57.         )
58.         self.assertQuerysetEqual(
59.             Article.objects.order_by("pub_date", "-headline"), [
60.                 "Article 1",
61.                 "Article 3",
62.                 "Article 2",
63.                 "Article 4",
64.             ],
65.             attrgetter("headline")
66.         )
67. 
68.     def test_order_by_override(self):
69.         """
70.         Only the last order_by has any effect (since they each override any
71.         previous ordering).
72.         """
73.         self.assertQuerysetEqual(
74.             Article.objects.order_by("id"), [
75.                 "Article 1",
76.                 "Article 2",
77.                 "Article 3",
78.                 "Article 4",
79.             ],
80.             attrgetter("headline")
81.         )
82.         self.assertQuerysetEqual(
83.             Article.objects.order_by("id").order_by("-headline"), [
84.                 "Article 4",
85.                 "Article 3",
86.                 "Article 2",
87.                 "Article 1",
88.             ],
89.             attrgetter("headline")
90.         )
91. 
92.     def test_order_by_nulls_first_and_last(self):
93.         msg = "nulls_first and nulls_last are mutually exclusive"
94.         with self.assertRaisesMessage(ValueError, msg):
95.             Article.objects.order_by(F("author").desc(nulls_last=True, nulls_first=True))
96. 
97.     def assertQuerysetEqualReversible(self, queryset, sequence):
98.         self.assertSequenceEqual(queryset, sequence)
99.         self.assertSequenceEqual(queryset.reverse(), list(reversed(sequence)))
100. 
101.     def test_order_by_nulls_last(self):
102.         Article.objects.filter(headline="Article 3").update(author=self.author_1)
103.         Article.objects.filter(headline="Article 4").update(author=self.author_2)
104.         # asc and desc are chainable with nulls_last.
105.         self.assertQuerysetEqualReversible(
106.             Article.objects.order_by(F("author").desc(nulls_last=True), 'headline'),
107.             [self.a4, self.a3, self.a1, self.a2],
108.         )
109.         self.assertQuerysetEqualReversible(
110.             Article.objects.order_by(F("author").asc(nulls_last=True), 'headline'),
111.             [self.a3, self.a4, self.a1, self.a2],
112.         )
113.         self.assertQuerysetEqualReversible(
114.             Article.objects.order_by(Upper("author__name").desc(nulls_last=True), 'headline'),
115.             [self.a4, self.a3, self.a1, self.a2],
116.         )
117.         self.assertQuerysetEqualReversible(
118.             Article.objects.order_by(Upper("author__name").asc(nulls_last=True), 'headline'),
119.             [self.a3, self.a4, self.a1, self.a2],
120.         )
121. 
122.     def test_order_by_nulls_first(self):
123.         Article.objects.filter(headline="Article 3").update(author=self.author_1)
124.         Article.objects.filter(headline="Article 4").update(author=self.author_2)
125.         # asc and desc are chainable with nulls_first.
126.         self.assertQuerysetEqualReversible(
127.             Article.objects.order_by(F("author").asc(nulls_first=True), 'headline'),
128.             [self.a1, self.a2, self.a3, self.a4],
129.         )
130.         self.assertQuerysetEqualReversible(
131.             Article.objects.order_by(F("author").desc(nulls_first=True), 'headline'),
132.             [self.a1, self.a2, self.a4, self.a3],
133.         )
134.         self.assertQuerysetEqualReversible(
135.             Article.objects.order_by(Upper("author__name").asc(nulls_first=True), 'headline'),
136.             [self.a1, self.a2, self.a3, self.a4],
137.         )
138.         self.assertQuerysetEqualReversible(
139.             Article.objects.order_by(Upper("author__name").desc(nulls_first=True), 'headline'),
140.             [self.a1, self.a2, self.a4, self.a3],
141.         )
142. 
143.     def test_orders_nulls_first_on_filtered_subquery(self):
144.         Article.objects.filter(headline='Article 1').update(author=self.author_1)
145.         Article.objects.filter(headline='Article 2').update(author=self.author_1)
146.         Article.objects.filter(headline='Article 4').update(author=self.author_2)
147.         Author.objects.filter(name__isnull=True).delete()
148.         author_3 = Author.objects.create(name='Name 3')
149.         article_subquery = Article.objects.filter(
150.             author=OuterRef('pk'),
151.             headline__icontains='Article',
152.         ).order_by().values('author').annotate(
153.             last_date=Max('pub_date'),
154.         ).values('last_date')
155.         self.assertQuerysetEqualReversible(
156.             Author.objects.annotate(
157.                 last_date=Subquery(article_subquery, output_field=DateTimeField())
158.             ).order_by(
159.                 F('last_date').asc(nulls_first=True)
160.             ).distinct(),
161.             [author_3, self.author_1, self.author_2],
162.         )
163. 
164.     def test_stop_slicing(self):
165.         """
166.         Use the 'stop' part of slicing notation to limit the results.
167.         """
168.         self.assertQuerysetEqual(
169.             Article.objects.order_by("headline")[:2], [
170.                 "Article 1",
171.                 "Article 2",
172.             ],
173.             attrgetter("headline")
174.         )
175. 
176.     def test_stop_start_slicing(self):
177.         """
178.         Use the 'stop' and 'start' parts of slicing notation to offset the
179.         result list.
180.         """
181.         self.assertQuerysetEqual(
182.             Article.objects.order_by("headline")[1:3], [
183.                 "Article 2",
184.                 "Article 3",
185.             ],
186.             attrgetter("headline")
187.         )
188. 
189.     def test_random_ordering(self):
190.         """
191.         Use '?' to order randomly.
192.         """
193.         self.assertEqual(
194.             len(list(Article.objects.order_by("?"))), 4
195.         )
196. 
197.     def test_reversed_ordering(self):
198.         """
199.         Ordering can be reversed using the reverse() method on a queryset.
200.         This allows you to extract things like "the last two items" (reverse
201.         and then take the first two).
202.         """
203.         self.assertQuerysetEqual(
204.             Article.objects.all().reverse()[:2], [
205.                 "Article 1",
206.                 "Article 3",
207.             ],
208.             attrgetter("headline")
209.         )
210. 
211.     def test_reverse_ordering_pure(self):
212.         qs1 = Article.objects.order_by(F('headline').asc())
213.         qs2 = qs1.reverse()
214.         self.assertQuerysetEqual(
215.             qs2, [
216.                 'Article 4',
217.                 'Article 3',
218.                 'Article 2',
219.                 'Article 1',
220.             ],
221.             attrgetter('headline'),
222.         )
223.         self.assertQuerysetEqual(
224.             qs1, [
225.                 "Article 1",
226.                 "Article 2",
227.                 "Article 3",
228.                 "Article 4",
229.             ],
230.             attrgetter("headline")
231.         )
232. 
233.     def test_reverse_meta_ordering_pure(self):
234.         Article.objects.create(
235.             headline='Article 5',
236.             pub_date=datetime(2005, 7, 30),
237.             author=self.author_1,
238.             second_author=self.author_2,
239.         )
240.         Article.objects.create(
241.             headline='Article 5',
242.             pub_date=datetime(2005, 7, 30),
243.             author=self.author_2,
244.             second_author=self.author_1,
245.         )
246.         self.assertQuerysetEqual(
247.             Article.objects.filter(headline='Article 5').reverse(),
248.             ['Name 2', 'Name 1'],
249.             attrgetter('author.name'),
250.         )
251.         self.assertQuerysetEqual(
252.             Article.objects.filter(headline='Article 5'),
253.             ['Name 1', 'Name 2'],
254.             attrgetter('author.name'),
255.         )
256. 
257.     def test_no_reordering_after_slicing(self):
258.         msg = 'Cannot reverse a query once a slice has been taken.'
259.         qs = Article.objects.all()[0:2]
260.         with self.assertRaisesMessage(TypeError, msg):
261.             qs.reverse()
262.         with self.assertRaisesMessage(TypeError, msg):
263.             qs.last()
264. 
265.     def test_extra_ordering(self):
266.         """
267.         Ordering can be based on fields included from an 'extra' clause
268.         """
269.         self.assertQuerysetEqual(
270.             Article.objects.extra(select={"foo": "pub_date"}, order_by=["foo", "headline"]), [
271.                 "Article 1",
272.                 "Article 2",
273.                 "Article 3",
274.                 "Article 4",
275.             ],
276.             attrgetter("headline")
277.         )
278. 
279.     def test_extra_ordering_quoting(self):
280.         """
281.         If the extra clause uses an SQL keyword for a name, it will be
282.         protected by quoting.
283.         """
284.         self.assertQuerysetEqual(
285.             Article.objects.extra(select={"order": "pub_date"}, order_by=["order", "headline"]), [
286.                 "Article 1",
287.                 "Article 2",
288.                 "Article 3",
289.                 "Article 4",
290.             ],
291.             attrgetter("headline")
292.         )
293. 
294.     def test_extra_ordering_with_table_name(self):
295.         self.assertQuerysetEqual(
296.             Article.objects.extra(order_by=['ordering_article.headline']), [
297.                 "Article 1",
298.                 "Article 2",
299.                 "Article 3",
300.                 "Article 4",
301.             ],
302.             attrgetter("headline")
303.         )
304.         self.assertQuerysetEqual(
305.             Article.objects.extra(order_by=['-ordering_article.headline']), [
306.                 "Article 4",
307.                 "Article 3",
308.                 "Article 2",
309.                 "Article 1",
310.             ],
311.             attrgetter("headline")
312.         )
313. 
314.     def test_order_by_pk(self):
315.         """
316.         'pk' works as an ordering option in Meta.
317.         """
318.         self.assertQuerysetEqual(
319.             Author.objects.all(),
320.             list(reversed(range(1, Author.objects.count() + 1))),
321.             attrgetter("pk"),
322.         )
323. 
324.     def test_order_by_fk_attname(self):
325.         """
326.         ordering by a foreign key by its attribute name prevents the query
327.         from inheriting its related model ordering option (#19195).
328.         """
329.         for i in range(1, 5):
330.             author = Author.objects.get(pk=i)
331.             article = getattr(self, "a%d" % (5 - i))
332.             article.author = author
333.             article.save(update_fields={'author'})
334. 
335.         self.assertQuerysetEqual(
336.             Article.objects.order_by('author_id'), [
337.                 "Article 4",
338.                 "Article 3",
339.                 "Article 2",
340.                 "Article 1",
341.             ],
342.             attrgetter("headline")
343.         )
344. 
345.     def test_order_by_self_referential_fk(self):
346.         self.a1.author = Author.objects.create(editor=self.author_1)
347.         self.a1.save()
348.         self.a2.author = Author.objects.create(editor=self.author_2)
349.         self.a2.save()
350.         self.assertQuerysetEqual(
351.             Article.objects.filter(author__isnull=False).order_by('author__editor'),
352.             ['Article 2', 'Article 1'],
353.             attrgetter('headline'),
354.         )
355.         self.assertQuerysetEqual(
356.             Article.objects.filter(author__isnull=False).order_by('author__editor_id'),
357.             ['Article 1', 'Article 2'],
358.             attrgetter('headline'),
359.         )
360. 
361.     def test_order_by_f_expression(self):
362.         self.assertQuerysetEqual(
363.             Article.objects.order_by(F('headline')), [
364.                 "Article 1",
365.                 "Article 2",
366.                 "Article 3",
367.                 "Article 4",
368.             ],
369.             attrgetter("headline")
370.         )
371.         self.assertQuerysetEqual(
372.             Article.objects.order_by(F('headline').asc()), [
373.                 "Article 1",
374.                 "Article 2",
375.                 "Article 3",
376.                 "Article 4",
377.             ],
378.             attrgetter("headline")
379.         )
380.         self.assertQuerysetEqual(
381.             Article.objects.order_by(F('headline').desc()), [
382.                 "Article 4",
383.                 "Article 3",
384.                 "Article 2",
385.                 "Article 1",
386.             ],
387.             attrgetter("headline")
388.         )
389. 
390.     def test_order_by_f_expression_duplicates(self):
391.         """
392.         A column may only be included once (the first occurrence) so we check
393.         to ensure there are no duplicates by inspecting the SQL.
394.         """
395.         qs = Article.objects.order_by(F('headline').asc(), F('headline').desc())
396.         sql = str(qs.query).upper()
397.         fragment = sql[sql.find('ORDER BY'):]
398.         self.assertEqual(fragment.count('HEADLINE'), 1)
399.         self.assertQuerysetEqual(
400.             qs, [
401.                 "Article 1",
402.                 "Article 2",
403.                 "Article 3",
404.                 "Article 4",
405.             ],
406.             attrgetter("headline")
407.         )
408.         qs = Article.objects.order_by(F('headline').desc(), F('headline').asc())
409.         sql = str(qs.query).upper()
410.         fragment = sql[sql.find('ORDER BY'):]
411.         self.assertEqual(fragment.count('HEADLINE'), 1)
412.         self.assertQuerysetEqual(
413.             qs, [
414.                 "Article 4",
415.                 "Article 3",
416.                 "Article 2",
417.                 "Article 1",
418.             ],
419.             attrgetter("headline")
420.         )
421. 
422.     def test_order_by_constant_value(self):
423.         # Order by annotated constant from selected columns.
424.         qs = Article.objects.annotate(
425.             constant=Value('1', output_field=CharField()),
426.         ).order_by('constant', '-headline')
427.         self.assertSequenceEqual(qs, [self.a4, self.a3, self.a2, self.a1])
428.         # Order by annotated constant which is out of selected columns.
429.         self.assertSequenceEqual(
430.             qs.values_list('headline', flat=True), [
431.                 'Article 4',
432.                 'Article 3',
433.                 'Article 2',
434.                 'Article 1',
435.             ],
436.         )
437.         # Order by constant.
438.         qs = Article.objects.order_by(Value('1', output_field=CharField()), '-headline')
439.         self.assertSequenceEqual(qs, [self.a4, self.a3, self.a2, self.a1])
440. 
441.     def test_related_ordering_duplicate_table_reference(self):
442.         """
443.         An ordering referencing a model with an ordering referencing a model
444.         multiple time no circular reference should be detected (#24654).
445.         """
446.         first_author = Author.objects.create()
447.         second_author = Author.objects.create()
448.         self.a1.author = first_author
449.         self.a1.second_author = second_author
450.         self.a1.save()
451.         self.a2.author = second_author
452.         self.a2.second_author = first_author
453.         self.a2.save()
454.         r1 = Reference.objects.create(article_id=self.a1.pk)
455.         r2 = Reference.objects.create(article_id=self.a2.pk)
456.         self.assertSequenceEqual(Reference.objects.all(), [r2, r1])
457. 
458.     def test_default_ordering_by_f_expression(self):
459.         """F expressions can be used in Meta.ordering."""
460.         articles = OrderedByFArticle.objects.all()
461.         articles.filter(headline='Article 2').update(author=self.author_2)
462.         articles.filter(headline='Article 3').update(author=self.author_1)
463.         self.assertQuerysetEqual(
464.             articles, ['Article 1', 'Article 4', 'Article 3', 'Article 2'],
465.             attrgetter('headline')
466.         )
467. 
468.     def test_order_by_ptr_field_with_default_ordering_by_expression(self):
469.         ca1 = ChildArticle.objects.create(
470.             headline='h2',
471.             pub_date=datetime(2005, 7, 27),
472.             author=self.author_2,
473.         )
474.         ca2 = ChildArticle.objects.create(
475.             headline='h2',
476.             pub_date=datetime(2005, 7, 27),
477.             author=self.author_1,
478.         )
479.         ca3 = ChildArticle.objects.create(
480.             headline='h3',
481.             pub_date=datetime(2005, 7, 27),
482.             author=self.author_1,
483.         )
484.         ca4 = ChildArticle.objects.create(headline='h1', pub_date=datetime(2005, 7, 28))
485.         articles = ChildArticle.objects.order_by('article_ptr')
486.         self.assertSequenceEqual(articles, [ca4, ca2, ca1, ca3])

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 08:12:47,420 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full content of the file 'tests/ordering/tests.py'.\n2. Extended relevance:\n   - The purpose is to find test cases using `order_by('?')` with `annotate()`. While no single test does both, the file contains `test_random_ordering` which uses `order_by('?')` and other tests that use `annotate()`. Providing the full file allows the user to examine all related tests.", relative_path='tests/ordering/tests.py', start_line=1, end_line=486)]
2025-12-23 08:12:47,422 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of tests/ordering/tests.py.
2025-12-23 08:12:47,422 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 08:12:47,422 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 08:12:47,423 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-23 08:12:47,423 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-23 08:12:47,425 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: order_by('?') unexpectedly breaking queryset aggregation

Description: Description
	
Steps to reproduce:
class Thing(models.Model):
	pass
class Related(models.Model):
	models.ForeignKey(Thing)
With data
t = Thing.objects.create()
rs = [Related.objects.create(thing=t) for _ in range(2)]
The following query works as expected. The aggregation with Count produces a GROUP BY clause on related.id.
>>> Thing.objects.annotate(rc=Count('related')).order_by('rc').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 2}]>
This also works as expected (at least to me). Although there is an aggregation, ordering by related means that the grouping will be broken down.
>>> Thing.objects.annotate(rc=Count('related')).order_by('related').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
But the following seems wrong to me.
>>> Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
The random function call has nothing to do with the aggregation, and I see no reason it should break it. Dumping the query seems that indeed the random call breaks the group by call: (I simpilfied the table names a little)
>>> print(Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc').query)
SELECT "thing"."id", COUNT("related"."id") AS "rc" FROM "thing" LEFT OUTER JOIN "related" ON ("thing"."id" = "related"."thing_id") GROUP BY "thing"."id", RANDOM() ORDER BY RANDOM() ASC
I dug into the SQL compiler, and it seems to me the problem is inside django.db.models.sql.compiler.get_group_by, where the compiler combines all non-aggregate, non-ref order_by expressions into group_by. I patched it like this
for expr, (sql, params, is_ref) in order_by:
	if expr.contains_aggregate:
		continue
	if is_ref:
		continue
	expressions.extend([
		exp for exp in expr.get_source_expressions()
		if not isinstance(exp, Random)
	])
and things seem to work correctly. No failed tests against SQLite3 with default settings.

Patch information:
diff --git a/django/db/models/functions/math.py b/django/db/models/functions/math.py
index 304e112225..15915f4b7c 100644
--- a/django/db/models/functions/math.py
+++ b/django/db/models/functions/math.py
@@ -154,6 +154,9 @@ class Random(NumericOutputFieldMixin, Func):
     def as_sqlite(self, compiler, connection, **extra_context):
         return super().as_sql(compiler, connection, function='RAND', **extra_context)
 
+    def get_group_by_cols(self, alias=None):
+        return []
+
 
 class Round(Transform):
     function = 'ROUND'


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of tests/ordering/tests.py.
Extra Requirements: 
Purpose: I need to find test cases that use `order_by('?')` in conjunction with `annotate()` to see if there are any existing tests that cover similar scenarios to the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/ordering/tests.py
Line number range: 1 - 486
Content:
1. from datetime import datetime
2. from operator import attrgetter
3. 
4. from django.db.models import (
5.     CharField, DateTimeField, F, Max, OuterRef, Subquery, Value,
6. )
7. from django.db.models.functions import Upper
8. from django.test import TestCase
9. 
10. from .models import Article, Author, ChildArticle, OrderedByFArticle, Reference
11. 
12. 
13. class OrderingTests(TestCase):
14. 
15.     @classmethod
16.     def setUpTestData(cls):
17.         cls.a1 = Article.objects.create(headline="Article 1", pub_date=datetime(2005, 7, 26))
18.         cls.a2 = Article.objects.create(headline="Article 2", pub_date=datetime(2005, 7, 27))
19.         cls.a3 = Article.objects.create(headline="Article 3", pub_date=datetime(2005, 7, 27))
20.         cls.a4 = Article.objects.create(headline="Article 4", pub_date=datetime(2005, 7, 28))
21.         cls.author_1 = Author.objects.create(name="Name 1")
22.         cls.author_2 = Author.objects.create(name="Name 2")
23.         for i in range(2):
24.             Author.objects.create()
25. 
26.     def test_default_ordering(self):
27.         """
28.         By default, Article.objects.all() orders by pub_date descending, then
29.         headline ascending.
30.         """
31.         self.assertQuerysetEqual(
32.             Article.objects.all(), [
33.                 "Article 4",
34.                 "Article 2",
35.                 "Article 3",
36.                 "Article 1",
37.             ],
38.             attrgetter("headline")
39.         )
40. 
41.         # Getting a single item should work too:
42.         self.assertEqual(Article.objects.all()[0], self.a4)
43. 
44.     def test_default_ordering_override(self):
45.         """
46.         Override ordering with order_by, which is in the same format as the
47.         ordering attribute in models.
48.         """
49.         self.assertQuerysetEqual(
50.             Article.objects.order_by("headline"), [
51.                 "Article 1",
52.                 "Article 2",
53.                 "Article 3",
54.                 "Article 4",
55.             ],
56.             attrgetter("headline")
57.         )
58.         self.assertQuerysetEqual(
59.             Article.objects.order_by("pub_date", "-headline"), [
60.                 "Article 1",
61.                 "Article 3",
62.                 "Article 2",
63.                 "Article 4",
64.             ],
65.             attrgetter("headline")
66.         )
67. 
68.     def test_order_by_override(self):
69.         """
70.         Only the last order_by has any effect (since they each override any
71.         previous ordering).
72.         """
73.         self.assertQuerysetEqual(
74.             Article.objects.order_by("id"), [
75.                 "Article 1",
76.                 "Article 2",
77.                 "Article 3",
78.                 "Article 4",
79.             ],
80.             attrgetter("headline")
81.         )
82.         self.assertQuerysetEqual(
83.             Article.objects.order_by("id").order_by("-headline"), [
84.                 "Article 4",
85.                 "Article 3",
86.                 "Article 2",
87.                 "Article 1",
88.             ],
89.             attrgetter("headline")
90.         )
91. 
92.     def test_order_by_nulls_first_and_last(self):
93.         msg = "nulls_first and nulls_last are mutually exclusive"
94.         with self.assertRaisesMessage(ValueError, msg):
95.             Article.objects.order_by(F("author").desc(nulls_last=True, nulls_first=True))
96. 
97.     def assertQuerysetEqualReversible(self, queryset, sequence):
98.         self.assertSequenceEqual(queryset, sequence)
99.         self.assertSequenceEqual(queryset.reverse(), list(reversed(sequence)))
100. 
101.     def test_order_by_nulls_last(self):
102.         Article.objects.filter(headline="Article 3").update(author=self.author_1)
103.         Article.objects.filter(headline="Article 4").update(author=self.author_2)
104.         # asc and desc are chainable with nulls_last.
105.         self.assertQuerysetEqualReversible(
106.             Article.objects.order_by(F("author").desc(nulls_last=True), 'headline'),
107.             [self.a4, self.a3, self.a1, self.a2],
108.         )
109.         self.assertQuerysetEqualReversible(
110.             Article.objects.order_by(F("author").asc(nulls_last=True), 'headline'),
111.             [self.a3, self.a4, self.a1, self.a2],
112.         )
113.         self.assertQuerysetEqualReversible(
114.             Article.objects.order_by(Upper("author__name").desc(nulls_last=True), 'headline'),
115.             [self.a4, self.a3, self.a1, self.a2],
116.         )
117.         self.assertQuerysetEqualReversible(
118.             Article.objects.order_by(Upper("author__name").asc(nulls_last=True), 'headline'),
119.             [self.a3, self.a4, self.a1, self.a2],
120.         )
121. 
122.     def test_order_by_nulls_first(self):
123.         Article.objects.filter(headline="Article 3").update(author=self.author_1)
124.         Article.objects.filter(headline="Article 4").update(author=self.author_2)
125.         # asc and desc are chainable with nulls_first.
126.         self.assertQuerysetEqualReversible(
127.             Article.objects.order_by(F("author").asc(nulls_first=True), 'headline'),
128.             [self.a1, self.a2, self.a3, self.a4],
129.         )
130.         self.assertQuerysetEqualReversible(
131.             Article.objects.order_by(F("author").desc(nulls_first=True), 'headline'),
132.             [self.a1, self.a2, self.a4, self.a3],
133.         )
134.         self.assertQuerysetEqualReversible(
135.             Article.objects.order_by(Upper("author__name").asc(nulls_first=True), 'headline'),
136.             [self.a1, self.a2, self.a3, self.a4],
137.         )
138.         self.assertQuerysetEqualReversible(
139.             Article.objects.order_by(Upper("author__name").desc(nulls_first=True), 'headline'),
140.             [self.a1, self.a2, self.a4, self.a3],
141.         )
142. 
143.     def test_orders_nulls_first_on_filtered_subquery(self):
144.         Article.objects.filter(headline='Article 1').update(author=self.author_1)
145.         Article.objects.filter(headline='Article 2').update(author=self.author_1)
146.         Article.objects.filter(headline='Article 4').update(author=self.author_2)
147.         Author.objects.filter(name__isnull=True).delete()
148.         author_3 = Author.objects.create(name='Name 3')
149.         article_subquery = Article.objects.filter(
150.             author=OuterRef('pk'),
151.             headline__icontains='Article',
152.         ).order_by().values('author').annotate(
153.             last_date=Max('pub_date'),
154.         ).values('last_date')
155.         self.assertQuerysetEqualReversible(
156.             Author.objects.annotate(
157.                 last_date=Subquery(article_subquery, output_field=DateTimeField())
158.             ).order_by(
159.                 F('last_date').asc(nulls_first=True)
160.             ).distinct(),
161.             [author_3, self.author_1, self.author_2],
162.         )
163. 
164.     def test_stop_slicing(self):
165.         """
166.         Use the 'stop' part of slicing notation to limit the results.
167.         """
168.         self.assertQuerysetEqual(
169.             Article.objects.order_by("headline")[:2], [
170.                 "Article 1",
171.                 "Article 2",
172.             ],
173.             attrgetter("headline")
174.         )
175. 
176.     def test_stop_start_slicing(self):
177.         """
178.         Use the 'stop' and 'start' parts of slicing notation to offset the
179.         result list.
180.         """
181.         self.assertQuerysetEqual(
182.             Article.objects.order_by("headline")[1:3], [
183.                 "Article 2",
184.                 "Article 3",
185.             ],
186.             attrgetter("headline")
187.         )
188. 
189.     def test_random_ordering(self):
190.         """
191.         Use '?' to order randomly.
192.         """
193.         self.assertEqual(
194.             len(list(Article.objects.order_by("?"))), 4
195.         )
196. 
197.     def test_reversed_ordering(self):
198.         """
199.         Ordering can be reversed using the reverse() method on a queryset.
200.         This allows you to extract things like "the last two items" (reverse
201.         and then take the first two).
202.         """
203.         self.assertQuerysetEqual(
204.             Article.objects.all().reverse()[:2], [
205.                 "Article 1",
206.                 "Article 3",
207.             ],
208.             attrgetter("headline")
209.         )
210. 
211.     def test_reverse_ordering_pure(self):
212.         qs1 = Article.objects.order_by(F('headline').asc())
213.         qs2 = qs1.reverse()
214.         self.assertQuerysetEqual(
215.             qs2, [
216.                 'Article 4',
217.                 'Article 3',
218.                 'Article 2',
219.                 'Article 1',
220.             ],
221.             attrgetter('headline'),
222.         )
223.         self.assertQuerysetEqual(
224.             qs1, [
225.                 "Article 1",
226.                 "Article 2",
227.                 "Article 3",
228.                 "Article 4",
229.             ],
230.             attrgetter("headline")
231.         )
232. 
233.     def test_reverse_meta_ordering_pure(self):
234.         Article.objects.create(
235.             headline='Article 5',
236.             pub_date=datetime(2005, 7, 30),
237.             author=self.author_1,
238.             second_author=self.author_2,
239.         )
240.         Article.objects.create(
241.             headline='Article 5',
242.             pub_date=datetime(2005, 7, 30),
243.             author=self.author_2,
244.             second_author=self.author_1,
245.         )
246.         self.assertQuerysetEqual(
247.             Article.objects.filter(headline='Article 5').reverse(),
248.             ['Name 2', 'Name 1'],
249.             attrgetter('author.name'),
250.         )
251.         self.assertQuerysetEqual(
252.             Article.objects.filter(headline='Article 5'),
253.             ['Name 1', 'Name 2'],
254.             attrgetter('author.name'),
255.         )
256. 
257.     def test_no_reordering_after_slicing(self):
258.         msg = 'Cannot reverse a query once a slice has been taken.'
259.         qs = Article.objects.all()[0:2]
260.         with self.assertRaisesMessage(TypeError, msg):
261.             qs.reverse()
262.         with self.assertRaisesMessage(TypeError, msg):
263.             qs.last()
264. 
265.     def test_extra_ordering(self):
266.         """
267.         Ordering can be based on fields included from an 'extra' clause
268.         """
269.         self.assertQuerysetEqual(
270.             Article.objects.extra(select={"foo": "pub_date"}, order_by=["foo", "headline"]), [
271.                 "Article 1",
272.                 "Article 2",
273.                 "Article 3",
274.                 "Article 4",
275.             ],
276.             attrgetter("headline")
277.         )
278. 
279.     def test_extra_ordering_quoting(self):
280.         """
281.         If the extra clause uses an SQL keyword for a name, it will be
282.         protected by quoting.
283.         """
284.         self.assertQuerysetEqual(
285.             Article.objects.extra(select={"order": "pub_date"}, order_by=["order", "headline"]), [
286.                 "Article 1",
287.                 "Article 2",
288.                 "Article 3",
289.                 "Article 4",
290.             ],
291.             attrgetter("headline")
292.         )
293. 
294.     def test_extra_ordering_with_table_name(self):
295.         self.assertQuerysetEqual(
296.             Article.objects.extra(order_by=['ordering_article.headline']), [
297.                 "Article 1",
298.                 "Article 2",
299.                 "Article 3",
300.                 "Article 4",
301.             ],
302.             attrgetter("headline")
303.         )
304.         self.assertQuerysetEqual(
305.             Article.objects.extra(order_by=['-ordering_article.headline']), [
306.                 "Article 4",
307.                 "Article 3",
308.                 "Article 2",
309.                 "Article 1",
310.             ],
311.             attrgetter("headline")
312.         )
313. 
314.     def test_order_by_pk(self):
315.         """
316.         'pk' works as an ordering option in Meta.
317.         """
318.         self.assertQuerysetEqual(
319.             Author.objects.all(),
320.             list(reversed(range(1, Author.objects.count() + 1))),
321.             attrgetter("pk"),
322.         )
323. 
324.     def test_order_by_fk_attname(self):
325.         """
326.         ordering by a foreign key by its attribute name prevents the query
327.         from inheriting its related model ordering option (#19195).
328.         """
329.         for i in range(1, 5):
330.             author = Author.objects.get(pk=i)
331.             article = getattr(self, "a%d" % (5 - i))
332.             article.author = author
333.             article.save(update_fields={'author'})
334. 
335.         self.assertQuerysetEqual(
336.             Article.objects.order_by('author_id'), [
337.                 "Article 4",
338.                 "Article 3",
339.                 "Article 2",
340.                 "Article 1",
341.             ],
342.             attrgetter("headline")
343.         )
344. 
345.     def test_order_by_self_referential_fk(self):
346.         self.a1.author = Author.objects.create(editor=self.author_1)
347.         self.a1.save()
348.         self.a2.author = Author.objects.create(editor=self.author_2)
349.         self.a2.save()
350.         self.assertQuerysetEqual(
351.             Article.objects.filter(author__isnull=False).order_by('author__editor'),
352.             ['Article 2', 'Article 1'],
353.             attrgetter('headline'),
354.         )
355.         self.assertQuerysetEqual(
356.             Article.objects.filter(author__isnull=False).order_by('author__editor_id'),
357.             ['Article 1', 'Article 2'],
358.             attrgetter('headline'),
359.         )
360. 
361.     def test_order_by_f_expression(self):
362.         self.assertQuerysetEqual(
363.             Article.objects.order_by(F('headline')), [
364.                 "Article 1",
365.                 "Article 2",
366.                 "Article 3",
367.                 "Article 4",
368.             ],
369.             attrgetter("headline")
370.         )
371.         self.assertQuerysetEqual(
372.             Article.objects.order_by(F('headline').asc()), [
373.                 "Article 1",
374.                 "Article 2",
375.                 "Article 3",
376.                 "Article 4",
377.             ],
378.             attrgetter("headline")
379.         )
380.         self.assertQuerysetEqual(
381.             Article.objects.order_by(F('headline').desc()), [
382.                 "Article 4",
383.                 "Article 3",
384.                 "Article 2",
385.                 "Article 1",
386.             ],
387.             attrgetter("headline")
388.         )
389. 
390.     def test_order_by_f_expression_duplicates(self):
391.         """
392.         A column may only be included once (the first occurrence) so we check
393.         to ensure there are no duplicates by inspecting the SQL.
394.         """
395.         qs = Article.objects.order_by(F('headline').asc(), F('headline').desc())
396.         sql = str(qs.query).upper()
397.         fragment = sql[sql.find('ORDER BY'):]
398.         self.assertEqual(fragment.count('HEADLINE'), 1)
399.         self.assertQuerysetEqual(
400.             qs, [
401.                 "Article 1",
402.                 "Article 2",
403.                 "Article 3",
404.                 "Article 4",
405.             ],
406.             attrgetter("headline")
407.         )
408.         qs = Article.objects.order_by(F('headline').desc(), F('headline').asc())
409.         sql = str(qs.query).upper()
410.         fragment = sql[sql.find('ORDER BY'):]
411.         self.assertEqual(fragment.count('HEADLINE'), 1)
412.         self.assertQuerysetEqual(
413.             qs, [
414.                 "Article 4",
415.                 "Article 3",
416.                 "Article 2",
417.                 "Article 1",
418.             ],
419.             attrgetter("headline")
420.         )
421. 
422.     def test_order_by_constant_value(self):
423.         # Order by annotated constant from selected columns.
424.         qs = Article.objects.annotate(
425.             constant=Value('1', output_field=CharField()),
426.         ).order_by('constant', '-headline')
427.         self.assertSequenceEqual(qs, [self.a4, self.a3, self.a2, self.a1])
428.         # Order by annotated constant which is out of selected columns.
429.         self.assertSequenceEqual(
430.             qs.values_list('headline', flat=True), [
431.                 'Article 4',
432.                 'Article 3',
433.                 'Article 2',
434.                 'Article 1',
435.             ],
436.         )
437.         # Order by constant.
438.         qs = Article.objects.order_by(Value('1', output_field=CharField()), '-headline')
439.         self.assertSequenceEqual(qs, [self.a4, self.a3, self.a2, self.a1])
440. 
441.     def test_related_ordering_duplicate_table_reference(self):
442.         """
443.         An ordering referencing a model with an ordering referencing a model
444.         multiple time no circular reference should be detected (#24654).
445.         """
446.         first_author = Author.objects.create()
447.         second_author = Author.objects.create()
448.         self.a1.author = first_author
449.         self.a1.second_author = second_author
450.         self.a1.save()
451.         self.a2.author = second_author
452.         self.a2.second_author = first_author
453.         self.a2.save()
454.         r1 = Reference.objects.create(article_id=self.a1.pk)
455.         r2 = Reference.objects.create(article_id=self.a2.pk)
456.         self.assertSequenceEqual(Reference.objects.all(), [r2, r1])
457. 
458.     def test_default_ordering_by_f_expression(self):
459.         """F expressions can be used in Meta.ordering."""
460.         articles = OrderedByFArticle.objects.all()
461.         articles.filter(headline='Article 2').update(author=self.author_2)
462.         articles.filter(headline='Article 3').update(author=self.author_1)
463.         self.assertQuerysetEqual(
464.             articles, ['Article 1', 'Article 4', 'Article 3', 'Article 2'],
465.             attrgetter('headline')
466.         )
467. 
468.     def test_order_by_ptr_field_with_default_ordering_by_expression(self):
469.         ca1 = ChildArticle.objects.create(
470.             headline='h2',
471.             pub_date=datetime(2005, 7, 27),
472.             author=self.author_2,
473.         )
474.         ca2 = ChildArticle.objects.create(
475.             headline='h2',
476.             pub_date=datetime(2005, 7, 27),
477.             author=self.author_1,
478.         )
479.         ca3 = ChildArticle.objects.create(
480.             headline='h3',
481.             pub_date=datetime(2005, 7, 27),
482.             author=self.author_1,
483.         )
484.         ca4 = ChildArticle.objects.create(headline='h1', pub_date=datetime(2005, 7, 28))
485.         articles = ChildArticle.objects.order_by('article_ptr')
486.         self.assertSequenceEqual(articles, [ca4, ca2, ca1, ca3])

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 08:13:04,649 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's bug report concerns an issue where `order_by('?')` interferes with `annotate()`. The previously provided context from `tests/ordering/tests.py` does not contain any tests that combine `annotate()` with `order_by('?')`. To find relevant test cases, I need to look into tests for aggregation. The file `tests/aggregation/tests.py` is the most logical place to find tests that cover the interaction between aggregation and ordering." query='Please provide the full content of tests/aggregation/tests.py' extra_requirements='' purpose='I need to find test cases that use `annotate()` in conjunction with `order_by()` to see if there are any existing tests that cover similar scenarios to the bug report, specifically how ordering affects the GROUP BY clause of an aggregation query.'
2025-12-23 08:13:04,650 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of tests/aggregation/tests.py
2025-12-23 08:13:04,650 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 08:13:04,650 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 08:13:04,651 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 08:13:04,651 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of tests/aggregation/tests.py
Purpose: I need to find test cases that use `annotate()` in conjunction with `order_by()` to see if there are any existing tests that cover similar scenarios to the bug report, specifically how ordering affects the GROUP BY clause of an aggregation query.
2025-12-23 08:13:08,668 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `tests/aggregation/tests.py`. This will allow me to examine the test cases that use both `annotate()` and `order_by()` to understand how ordering impacts the GROUP BY clause in aggregation queries, which is directly related to the bug report you are investigating.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/aggregation/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2122, 'candidates_token_count': 83, 'total_token_count': 2480, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2122}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 83}], 'thoughts_token_count': 275, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.24165362622364459, 'model_name': 'gemini-2.5-pro'} id='run--0c1bc0c1-3dff-4290-96ea-6b331818b68e-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/aggregation/tests.py'}, 'id': '3347a103-f8f8-457e-b635-c176623d7c10', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2122, 'output_tokens': 83, 'total_tokens': 2480, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 275}}
2025-12-23 08:13:11,112 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the content of `tests/aggregation/tests.py`. Now, I will search for instances of `annotate()` being used with `order_by()` within this file. This will help identify test cases relevant to the bug report by showing how ordering is handled in aggregation queries.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/aggregation/tests.py", "text": "annotate"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10811, 'candidates_token_count': 90, 'total_token_count': 10959, 'cached_content_token_count': 1852, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10811}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1852}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 90}], 'thoughts_token_count': 58}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15241547690497503, 'model_name': 'gemini-2.5-pro'} id='run--8f2c89db-dc6e-4f07-b1fb-992447584f74-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/aggregation/tests.py', 'text': 'annotate'}, 'id': '3996f4be-3f3d-426b-8cd4-1d9a23098901', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10811, 'output_tokens': 90, 'total_tokens': 10959, 'input_token_details': {'cache_read': 1852}, 'output_token_details': {'reasoning': 58}}
2025-12-23 08:13:15,266 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have found the test cases within `tests/aggregation/tests.py` that use both `annotate()` and `order_by()`. I will now read the content of the `test_annotate_ordering` method to understand how it tests the interaction between annotation and ordering. This will help determine if the existing tests cover the scenario described in the bug report.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/aggregation/tests.py", "start_line": 445.0, "end_line": 465.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 27965, 'candidates_token_count': 101, 'total_token_count': 28192, 'cached_content_token_count': 9587, 'prompt_tokens_details': [{'modality': 1, 'token_count': 27965}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9587}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 101}], 'thoughts_token_count': 126}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2606941827453009, 'model_name': 'gemini-2.5-pro'} id='run--a58298c4-bf12-4b8a-b620-6d643590e1b5-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/aggregation/tests.py', 'start_line': 445.0, 'end_line': 465.0}, 'id': '13946265-1d59-4ff6-9c66-41ccc5545f75', 'type': 'tool_call'}] usage_metadata={'input_tokens': 27965, 'output_tokens': 101, 'total_tokens': 28192, 'input_token_details': {'cache_read': 9587}, 'output_token_details': {'reasoning': 126}}
2025-12-23 08:13:34,415 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `tests/aggregation/tests.py` and analyzed its contents. I found several test cases relevant to your query about the interaction of `annotate()` and `order_by()` and their effect on the `GROUP BY` clause. Specifically, the `test_annotate_ordering`, `test_non_grouped_annotation_not_in_group_by`, and `test_grouped_annotation_in_group_by` methods provide insight into how Django handles these scenarios. These tests confirm that ordering by annotated fields works as expected and that the inclusion of annotated fields in the `GROUP BY` clause is handled correctly depending on whether they are included in the `values()` clause.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 2411, 'end_index': 2772, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 3775, 'end_index': 4763, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 28513, 'candidates_token_count': 146, 'total_token_count': 30720, 'cached_content_token_count': 26809, 'prompt_tokens_details': [{'modality': 1, 'token_count': 28513}], 'cache_tokens_details': [{'modality': 1, 'token_count': 26809}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 146}], 'thoughts_token_count': 2061}, 'finish_reason': 'STOP', 'avg_logprobs': -1.4829070208823845, 'model_name': 'gemini-2.5-pro'} id='run--1dfd1c44-8093-408d-af43-54c96f1a7bac-0' usage_metadata={'input_tokens': 28513, 'output_tokens': 146, 'total_tokens': 30720, 'input_token_details': {'cache_read': 26809}, 'output_token_details': {'reasoning': 2061}}
2025-12-23 08:13:34,417 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of tests/aggregation/tests.py
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases that use `annotate()` in conjunction with `order_by()` to see if there are any existing tests that cover similar scenarios to the bug report, specifically how ordering affects the GROUP BY clause of an aggregation query.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/aggregation/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import re
3. from decimal import Decimal
4. 
5. from django.core.exceptions import FieldError
6. from django.db import connection
7. from django.db.models import (
8.     Avg, Case, Count, DecimalField, DurationField, Exists, F, FloatField, Func,
9.     IntegerField, Max, Min, OuterRef, Subquery, Sum, Value, When,
10. )
11. from django.db.models.functions import Coalesce
12. from django.test import TestCase
13. from django.test.testcases import skipUnlessDBFeature
14. from django.test.utils import Approximate, CaptureQueriesContext
15. from django.utils import timezone
16. 
17. from .models import Author, Book, Publisher, Store
18. 
19. 
20. class AggregateTestCase(TestCase):
21. 
22.     @classmethod
23.     def setUpTestData(cls):
24.         cls.a1 = Author.objects.create(name='Adrian Holovaty', age=34)
25.         cls.a2 = Author.objects.create(name='Jacob Kaplan-Moss', age=35)
26.         cls.a3 = Author.objects.create(name='Brad Dayley', age=45)
27.         cls.a4 = Author.objects.create(name='James Bennett', age=29)
28.         cls.a5 = Author.objects.create(name='Jeffrey Forcier', age=37)
29.         cls.a6 = Author.objects.create(name='Paul Bissex', age=29)
30.         cls.a7 = Author.objects.create(name='Wesley J. Chun', age=25)
31.         cls.a8 = Author.objects.create(name='Peter Norvig', age=57)
32.         cls.a9 = Author.objects.create(name='Stuart Russell', age=46)
33.         cls.a1.friends.add(cls.a2, cls.a4)
34.         cls.a2.friends.add(cls.a1, cls.a7)
35.         cls.a4.friends.add(cls.a1)
36.         cls.a5.friends.add(cls.a6, cls.a7)
37.         cls.a6.friends.add(cls.a5, cls.a7)
38.         cls.a7.friends.add(cls.a2, cls.a5, cls.a6)
39.         cls.a8.friends.add(cls.a9)
40.         cls.a9.friends.add(cls.a8)
41. 
42.         cls.p1 = Publisher.objects.create(name='Apress', num_awards=3, duration=datetime.timedelta(days=1))
43.         cls.p2 = Publisher.objects.create(name='Sams', num_awards=1, duration=datetime.timedelta(days=2))
44.         cls.p3 = Publisher.objects.create(name='Prentice Hall', num_awards=7)
45.         cls.p4 = Publisher.objects.create(name='Morgan Kaufmann', num_awards=9)
46.         cls.p5 = Publisher.objects.create(name="Jonno's House of Books", num_awards=0)
47. 
48.         cls.b1 = Book.objects.create(
49.             isbn='159059725', name='The Definitive Guide to Django: Web Development Done Right',
50.             pages=447, rating=4.5, price=Decimal('30.00'), contact=cls.a1, publisher=cls.p1,
51.             pubdate=datetime.date(2007, 12, 6)
52.         )
53.         cls.b2 = Book.objects.create(
54.             isbn='067232959', name='Sams Teach Yourself Django in 24 Hours',
55.             pages=528, rating=3.0, price=Decimal('23.09'), contact=cls.a3, publisher=cls.p2,
56.             pubdate=datetime.date(2008, 3, 3)
57.         )
58.         cls.b3 = Book.objects.create(
59.             isbn='159059996', name='Practical Django Projects',
60.             pages=300, rating=4.0, price=Decimal('29.69'), contact=cls.a4, publisher=cls.p1,
61.             pubdate=datetime.date(2008, 6, 23)
62.         )
63.         cls.b4 = Book.objects.create(
64.             isbn='013235613', name='Python Web Development with Django',
65.             pages=350, rating=4.0, price=Decimal('29.69'), contact=cls.a5, publisher=cls.p3,
66.             pubdate=datetime.date(2008, 11, 3)
67.         )
68.         cls.b5 = Book.objects.create(
69.             isbn='013790395', name='Artificial Intelligence: A Modern Approach',
70.             pages=1132, rating=4.0, price=Decimal('82.80'), contact=cls.a8, publisher=cls.p3,
71.             pubdate=datetime.date(1995, 1, 15)
72.         )
73.         cls.b6 = Book.objects.create(
74.             isbn='155860191', name='Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
75.             pages=946, rating=5.0, price=Decimal('75.00'), contact=cls.a8, publisher=cls.p4,
76.             pubdate=datetime.date(1991, 10, 15)
77.         )
78.         cls.b1.authors.add(cls.a1, cls.a2)
79.         cls.b2.authors.add(cls.a3)
80.         cls.b3.authors.add(cls.a4)
81.         cls.b4.authors.add(cls.a5, cls.a6, cls.a7)
82.         cls.b5.authors.add(cls.a8, cls.a9)
83.         cls.b6.authors.add(cls.a8)
84. 
85.         s1 = Store.objects.create(
86.             name='Amazon.com',
87.             original_opening=datetime.datetime(1994, 4, 23, 9, 17, 42),
88.             friday_night_closing=datetime.time(23, 59, 59)
89.         )
90.         s2 = Store.objects.create(
91.             name='Books.com',
92.             original_opening=datetime.datetime(2001, 3, 15, 11, 23, 37),
93.             friday_night_closing=datetime.time(23, 59, 59)
94.         )
95.         s3 = Store.objects.create(
96.             name="Mamma and Pappa's Books",
97.             original_opening=datetime.datetime(1945, 4, 25, 16, 24, 14),
98.             friday_night_closing=datetime.time(21, 30)
99.         )
100.         s1.books.add(cls.b1, cls.b2, cls.b3, cls.b4, cls.b5, cls.b6)
101.         s2.books.add(cls.b1, cls.b3, cls.b5, cls.b6)
102.         s3.books.add(cls.b3, cls.b4, cls.b6)
103. 
104.     def test_empty_aggregate(self):
105.         self.assertEqual(Author.objects.all().aggregate(), {})
106. 
107.     def test_aggregate_in_order_by(self):
108.         msg = (
109.             'Using an aggregate in order_by() without also including it in '
110.             'annotate() is not allowed: Avg(F(book__rating)'
111.         )
112.         with self.assertRaisesMessage(FieldError, msg):
113.             Author.objects.values('age').order_by(Avg('book__rating'))
114. 
115.     def test_single_aggregate(self):
116.         vals = Author.objects.aggregate(Avg("age"))
117.         self.assertEqual(vals, {"age__avg": Approximate(37.4, places=1)})
118. 
119.     def test_multiple_aggregates(self):
120.         vals = Author.objects.aggregate(Sum("age"), Avg("age"))
121.         self.assertEqual(vals, {"age__sum": 337, "age__avg": Approximate(37.4, places=1)})
122. 
123.     def test_filter_aggregate(self):
124.         vals = Author.objects.filter(age__gt=29).aggregate(Sum("age"))
125.         self.assertEqual(vals, {'age__sum': 254})
126. 
127.     def test_related_aggregate(self):
128.         vals = Author.objects.aggregate(Avg("friends__age"))
129.         self.assertEqual(vals, {'friends__age__avg': Approximate(34.07, places=2)})
130. 
131.         vals = Book.objects.filter(rating__lt=4.5).aggregate(Avg("authors__age"))
132.         self.assertEqual(vals, {'authors__age__avg': Approximate(38.2857, places=2)})
133. 
134.         vals = Author.objects.all().filter(name__contains="a").aggregate(Avg("book__rating"))
135.         self.assertEqual(vals, {'book__rating__avg': 4.0})
136. 
137.         vals = Book.objects.aggregate(Sum("publisher__num_awards"))
138.         self.assertEqual(vals, {'publisher__num_awards__sum': 30})
139. 
140.         vals = Publisher.objects.aggregate(Sum("book__price"))
141.         self.assertEqual(vals, {'book__price__sum': Decimal('270.27')})
142. 
143.     def test_aggregate_multi_join(self):
144.         vals = Store.objects.aggregate(Max("books__authors__age"))
145.         self.assertEqual(vals, {'books__authors__age__max': 57})
146. 
147.         vals = Author.objects.aggregate(Min("book__publisher__num_awards"))
148.         self.assertEqual(vals, {'book__publisher__num_awards__min': 1})
149. 
150.     def test_aggregate_alias(self):
151.         vals = Store.objects.filter(name="Amazon.com").aggregate(amazon_mean=Avg("books__rating"))
152.         self.assertEqual(vals, {'amazon_mean': Approximate(4.08, places=2)})
153. 
154.     def test_annotate_basic(self):
155.         self.assertQuerysetEqual(
156.             Book.objects.annotate().order_by('pk'), [
157.                 "The Definitive Guide to Django: Web Development Done Right",
158.                 "Sams Teach Yourself Django in 24 Hours",
159.                 "Practical Django Projects",
160.                 "Python Web Development with Django",
161.                 "Artificial Intelligence: A Modern Approach",
162.                 "Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp"
163.             ],
164.             lambda b: b.name
165.         )
166. 
167.         books = Book.objects.annotate(mean_age=Avg("authors__age"))
168.         b = books.get(pk=self.b1.pk)
169.         self.assertEqual(
170.             b.name,
171.             'The Definitive Guide to Django: Web Development Done Right'
172.         )
173.         self.assertEqual(b.mean_age, 34.5)
174. 
175.     def test_annotate_defer(self):
176.         qs = Book.objects.annotate(
177.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
178. 
179.         rows = [
180.             (self.b1.id, "159059725", 447, "The Definitive Guide to Django: Web Development Done Right")
181.         ]
182.         self.assertQuerysetEqual(
183.             qs.order_by('pk'), rows,
184.             lambda r: (r.id, r.isbn, r.page_sum, r.name)
185.         )
186. 
187.     def test_annotate_defer_select_related(self):
188.         qs = Book.objects.select_related('contact').annotate(
189.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
190. 
191.         rows = [
192.             (self.b1.id, "159059725", 447, "Adrian Holovaty",
193.              "The Definitive Guide to Django: Web Development Done Right")
194.         ]
195.         self.assertQuerysetEqual(
196.             qs.order_by('pk'), rows,
197.             lambda r: (r.id, r.isbn, r.page_sum, r.contact.name, r.name)
198.         )
199. 
200.     def test_annotate_m2m(self):
201.         books = Book.objects.filter(rating__lt=4.5).annotate(Avg("authors__age")).order_by("name")
202.         self.assertQuerysetEqual(
203.             books, [
204.                 ('Artificial Intelligence: A Modern Approach', 51.5),
205.                 ('Practical Django Projects', 29.0),
206.                 ('Python Web Development with Django', Approximate(30.3, places=1)),
207.                 ('Sams Teach Yourself Django in 24 Hours', 45.0)
208.             ],
209.             lambda b: (b.name, b.authors__age__avg),
210.         )
211. 
212.         books = Book.objects.annotate(num_authors=Count("authors")).order_by("name")
213.         self.assertQuerysetEqual(
214.             books, [
215.                 ('Artificial Intelligence: A Modern Approach', 2),
216.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
217.                 ('Practical Django Projects', 1),
218.                 ('Python Web Development with Django', 3),
219.                 ('Sams Teach Yourself Django in 24 Hours', 1),
220.                 ('The Definitive Guide to Django: Web Development Done Right', 2)
221.             ],
222.             lambda b: (b.name, b.num_authors)
223.         )
224. 
225.     def test_backwards_m2m_annotate(self):
226.         authors = Author.objects.filter(name__contains="a").annotate(Avg("book__rating")).order_by("name")
227.         self.assertQuerysetEqual(
228.             authors, [
229.                 ('Adrian Holovaty', 4.5),
230.                 ('Brad Dayley', 3.0),
231.                 ('Jacob Kaplan-Moss', 4.5),
232.                 ('James Bennett', 4.0),
233.                 ('Paul Bissex', 4.0),
234.                 ('Stuart Russell', 4.0)
235.             ],
236.             lambda a: (a.name, a.book__rating__avg)
237.         )
238. 
239.         authors = Author.objects.annotate(num_books=Count("book")).order_by("name")
240.         self.assertQuerysetEqual(
241.             authors, [
242.                 ('Adrian Holovaty', 1),
243.                 ('Brad Dayley', 1),
244.                 ('Jacob Kaplan-Moss', 1),
245.                 ('James Bennett', 1),
246.                 ('Jeffrey Forcier', 1),
247.                 ('Paul Bissex', 1),
248.                 ('Peter Norvig', 2),
249.                 ('Stuart Russell', 1),
250.                 ('Wesley J. Chun', 1)
251.             ],
252.             lambda a: (a.name, a.num_books)
253.         )
254. 
255.     def test_reverse_fkey_annotate(self):
256.         books = Book.objects.annotate(Sum("publisher__num_awards")).order_by("name")
257.         self.assertQuerysetEqual(
258.             books, [
259.                 ('Artificial Intelligence: A Modern Approach', 7),
260.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 9),
261.                 ('Practical Django Projects', 3),
262.                 ('Python Web Development with Django', 7),
263.                 ('Sams Teach Yourself Django in 24 Hours', 1),
264.                 ('The Definitive Guide to Django: Web Development Done Right', 3)
265.             ],
266.             lambda b: (b.name, b.publisher__num_awards__sum)
267.         )
268. 
269.         publishers = Publisher.objects.annotate(Sum("book__price")).order_by("name")
270.         self.assertQuerysetEqual(
271.             publishers, [
272.                 ('Apress', Decimal("59.69")),
273.                 ("Jonno's House of Books", None),
274.                 ('Morgan Kaufmann', Decimal("75.00")),
275.                 ('Prentice Hall', Decimal("112.49")),
276.                 ('Sams', Decimal("23.09"))
277.             ],
278.             lambda p: (p.name, p.book__price__sum)
279.         )
280. 
281.     def test_annotate_values(self):
282.         books = list(Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values())
283.         self.assertEqual(
284.             books, [
285.                 {
286.                     "contact_id": self.a1.id,
287.                     "id": self.b1.id,
288.                     "isbn": "159059725",
289.                     "mean_age": 34.5,
290.                     "name": "The Definitive Guide to Django: Web Development Done Right",
291.                     "pages": 447,
292.                     "price": Approximate(Decimal("30")),
293.                     "pubdate": datetime.date(2007, 12, 6),
294.                     "publisher_id": self.p1.id,
295.                     "rating": 4.5,
296.                 }
297.             ]
298.         )
299. 
300.         books = (
301.             Book.objects
302.             .filter(pk=self.b1.pk)
303.             .annotate(mean_age=Avg('authors__age'))
304.             .values('pk', 'isbn', 'mean_age')
305.         )
306.         self.assertEqual(
307.             list(books), [
308.                 {
309.                     "pk": self.b1.pk,
310.                     "isbn": "159059725",
311.                     "mean_age": 34.5,
312.                 }
313.             ]
314.         )
315. 
316.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values("name")
317.         self.assertEqual(
318.             list(books),
319.             [{'name': 'The Definitive Guide to Django: Web Development Done Right'}],
320.         )
321. 
322.         books = Book.objects.filter(pk=self.b1.pk).values().annotate(mean_age=Avg('authors__age'))
323.         self.assertEqual(
324.             list(books), [
325.                 {
326.                     "contact_id": self.a1.id,
327.                     "id": self.b1.id,
328.                     "isbn": "159059725",
329.                     "mean_age": 34.5,
330.                     "name": "The Definitive Guide to Django: Web Development Done Right",
331.                     "pages": 447,
332.                     "price": Approximate(Decimal("30")),
333.                     "pubdate": datetime.date(2007, 12, 6),
334.                     "publisher_id": self.p1.id,
335.                     "rating": 4.5,
336.                 }
337.             ]
338.         )
339. 
340.         books = (
341.             Book.objects
342.             .values("rating")
343.             .annotate(n_authors=Count("authors__id"), mean_age=Avg("authors__age"))
344.             .order_by("rating")
345.         )
346.         self.assertEqual(
347.             list(books), [
348.                 {
349.                     "rating": 3.0,
350.                     "n_authors": 1,
351.                     "mean_age": 45.0,
352.                 },
353.                 {
354.                     "rating": 4.0,
355.                     "n_authors": 6,
356.                     "mean_age": Approximate(37.16, places=1)
357.                 },
358.                 {
359.                     "rating": 4.5,
360.                     "n_authors": 2,
361.                     "mean_age": 34.5,
362.                 },
363.                 {
364.                     "rating": 5.0,
365.                     "n_authors": 1,
366.                     "mean_age": 57.0,
367.                 }
368.             ]
369.         )
370. 
371.         authors = Author.objects.annotate(Avg("friends__age")).order_by("name")
372.         self.assertQuerysetEqual(
373.             authors, [
374.                 ('Adrian Holovaty', 32.0),
375.                 ('Brad Dayley', None),
376.                 ('Jacob Kaplan-Moss', 29.5),
377.                 ('James Bennett', 34.0),
378.                 ('Jeffrey Forcier', 27.0),
379.                 ('Paul Bissex', 31.0),
380.                 ('Peter Norvig', 46.0),
381.                 ('Stuart Russell', 57.0),
382.                 ('Wesley J. Chun', Approximate(33.66, places=1))
383.             ],
384.             lambda a: (a.name, a.friends__age__avg)
385.         )
386. 
387.     def test_count(self):
388.         vals = Book.objects.aggregate(Count("rating"))
389.         self.assertEqual(vals, {"rating__count": 6})
390. 
391.     def test_count_star(self):
392.         with self.assertNumQueries(1) as ctx:
393.             Book.objects.aggregate(n=Count("*"))
394.         sql = ctx.captured_queries[0]['sql']
395.         self.assertIn('SELECT COUNT(*) ', sql)
396. 
397.     def test_count_distinct_expression(self):
398.         aggs = Book.objects.aggregate(
399.             distinct_ratings=Count(Case(When(pages__gt=300, then='rating')), distinct=True),
400.         )
401.         self.assertEqual(aggs['distinct_ratings'], 4)
402. 
403.     def test_distinct_on_aggregate(self):
404.         for aggregate, expected_result in (
405.             (Avg, 4.125),
406.             (Count, 4),
407.             (Sum, 16.5),
408.         ):
409.             with self.subTest(aggregate=aggregate.__name__):
410.                 books = Book.objects.aggregate(ratings=aggregate('rating', distinct=True))
411.                 self.assertEqual(books['ratings'], expected_result)
412. 
413.     def test_non_grouped_annotation_not_in_group_by(self):
414.         """
415.         An annotation not included in values() before an aggregate should be
416.         excluded from the group by clause.
417.         """
418.         qs = (
419.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating')
420.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
421.         )
422.         self.assertEqual(list(qs), [{'rating': 4.0, 'count': 2}])
423. 
424.     def test_grouped_annotation_in_group_by(self):
425.         """
426.         An annotation included in values() before an aggregate should be
427.         included in the group by clause.
428.         """
429.         qs = (
430.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating', 'xprice')
431.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
432.         )
433.         self.assertEqual(
434.             list(qs), [
435.                 {'rating': 4.0, 'count': 1},
436.                 {'rating': 4.0, 'count': 2},
437.             ]
438.         )
439. 
440.     def test_fkey_aggregate(self):
441.         explicit = list(Author.objects.annotate(Count('book__id')))
442.         implicit = list(Author.objects.annotate(Count('book')))
443.         self.assertCountEqual(explicit, implicit)
444. 
445.     def test_annotate_ordering(self):
446.         books = Book.objects.values('rating').annotate(oldest=Max('authors__age')).order_by('oldest', 'rating')
447.         self.assertEqual(
448.             list(books), [
449.                 {'rating': 4.5, 'oldest': 35},
450.                 {'rating': 3.0, 'oldest': 45},
451.                 {'rating': 4.0, 'oldest': 57},
452.                 {'rating': 5.0, 'oldest': 57},
453.             ]
454.         )
455. 
456.         books = Book.objects.values("rating").annotate(oldest=Max("authors__age")).order_by("-oldest", "-rating")
457.         self.assertEqual(
458.             list(books), [
459.                 {'rating': 5.0, 'oldest': 57},
460.                 {'rating': 4.0, 'oldest': 57},
461.                 {'rating': 3.0, 'oldest': 45},
462.                 {'rating': 4.5, 'oldest': 35},
463.             ]
464.         )
465. 
466.     def test_aggregate_annotation(self):
467.         vals = Book.objects.annotate(num_authors=Count("authors__id")).aggregate(Avg("num_authors"))
468.         self.assertEqual(vals, {"num_authors__avg": Approximate(1.66, places=1)})
469. 
470.     def test_avg_duration_field(self):
471.         # Explicit `output_field`.
472.         self.assertEqual(
473.             Publisher.objects.aggregate(Avg('duration', output_field=DurationField())),
474.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
475.         )
476.         # Implicit `output_field`.
477.         self.assertEqual(
478.             Publisher.objects.aggregate(Avg('duration')),
479.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
480.         )
481. 
482.     def test_sum_duration_field(self):
483.         self.assertEqual(
484.             Publisher.objects.aggregate(Sum('duration', output_field=DurationField())),
485.             {'duration__sum': datetime.timedelta(days=3)}
486.         )
487. 
488.     def test_sum_distinct_aggregate(self):
489.         """
490.         Sum on a distinct() QuerySet should aggregate only the distinct items.
491.         """
492.         authors = Author.objects.filter(book__in=[self.b5, self.b6])
493.         self.assertEqual(authors.count(), 3)
494. 
495.         distinct_authors = authors.distinct()
496.         self.assertEqual(distinct_authors.count(), 2)
497. 
498.         # Selected author ages are 57 and 46
499.         age_sum = distinct_authors.aggregate(Sum('age'))
500.         self.assertEqual(age_sum['age__sum'], 103)


File: tests/aggregation/tests.py
Line number range: 20 - 1317
Content:
class AggregateTestCase(TestCase):

    @classmethod
    def setUpTestData(cls):
        cls.a1 = Author.objects.create(name='Adrian Holovaty', age=34)
        cls.a2 = Author.objects.create(name='Jacob Kaplan-Moss', age=35)
        cls.a3 = Author.objects.create(name='Brad Dayley', age=45)
        cls.a4 = Author.objects.create(name='James Bennett', age=29)
        cls.a5 = Author.objects.create(name='Jeffrey Forcier', age=37)
        cls.a6 = Author.objects.create(name='Paul Bissex', age=29)
        cls.a7 = Author.objects.create(name='Wesley J. Chun', age=25)
        cls.a8 = Author.objects.create(name='Peter Norvig', age=57)
        cls.a9 = Author.objects.create(name='Stuart Russell', age=46)
        cls.a1.friends.add(cls.a2, cls.a4)
        cls.a2.friends.add(cls.a1, cls.a7)
        cls.a4.friends.add(cls.a1)
        cls.a5.friends.add(cls.a6, cls.a7)
        cls.a6.friends.add(cls.a5, cls.a7)
        cls.a7.friends.add(cls.a2, cls.a5, cls.a6)
        cls.a8.friends.add(cls.a9)
        cls.a9.friends.add(cls.a8)

        cls.p1 = Publisher.objects.create(name='Apress', num_awards=3, duration=datetime.timedelta(days=1))
        cls.p2 = Publisher.objects.create(name='Sams', num_awards=1, duration=datetime.timedelta(days=2))
        cls.p3 = Publisher.objects.create(name='Prentice Hall', num_awards=7)
        cls.p4 = Publisher.objects.create(name='Morgan Kaufmann', num_awards=9)
        cls.p5 = Publisher.objects.create(name="Jonno's House of Books", num_awards=0)

        cls.b1 = Book.objects.create(
            isbn='159059725', name='The Definitive Guide to Django: Web Development Done Right',
            pages=447, rating=4.5, price=Decimal('30.00'), contact=cls.a1, publisher=cls.p1,
            pubdate=datetime.date(2007, 12, 6)
        )
        cls.b2 = Book.objects.create(
            isbn='067232959', name='Sams Teach Yourself Django in 24 Hours',
            pages=528, rating=3.0, price=Decimal('23.09'), contact=cls.a3, publisher=cls.p2,
            pubdate=datetime.date(2008, 3, 3)
        )
        cls.b3 = Book.objects.create(
            isbn='159059996', name='Practical Django Projects',
            pages=300, rating=4.0, price=Decimal('29.69'), contact=cls.a4, publisher=cls.p1,
            pubdate=datetime.date(2008, 6, 23)
        )
        cls.b4 = Book.objects.create(
            isbn='013235613', name='Python Web Development with Django',
            pages=350, rating=4.0, price=Decimal('29.69'), contact=cls.a5, publisher=cls.p3,
            pubdate=datetime.date(2008, 11, 3)
        )
        cls.b5 = Book.objects.create(
            isbn='013790395', name='Artificial Intelligence: A Modern Approach',
            pages=1132, rating=4.0, price=Decimal('82.80'), contact=cls.a8, publisher=cls.p3,
            pubdate=datetime.date(1995, 1, 15)
        )
        cls.b6 = Book.objects.create(
            isbn='155860191', name='Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
            pages=946, rating=5.0, price=Decimal('75.00'), contact=cls.a8, publisher=cls.p4,
            pubdate=datetime.date(1991, 10, 15)
        )
        cls.b1.authors.add(cls.a1, cls.a2)
        cls.b2.authors.add(cls.a3)
        cls.b3.authors.add(cls.a4)
        cls.b4.authors.add(cls.a5, cls.a6, cls.a7)
        cls.b5.authors.add(cls.a8, cls.a9)
        cls.b6.authors.add(cls.a8)

        s1 = Store.objects.create(
            name='Amazon.com',
            original_opening=datetime.datetime(1994, 4, 23, 9, 17, 42),
            friday_night_closing=datetime.time(23, 59, 59)
        )
        s2 = Store.objects.create(
            name='Books.com',
            original_opening=datetime.datetime(2001, 3, 15, 11, 23, 37),
            friday_night_closing=datetime.time(23, 59, 59)
        )
        s3 = Store.objects.create(
            name="Mamma and Pappa's Books",
            original_opening=datetime.datetime(1945, 4, 25, 16, 24, 14),
            friday_night_closing=datetime.time(21, 30)
        )
        s1.books.add(cls.b1, cls.b2, cls.b3, cls.b4, cls.b5, cls.b6)
        s2.books.add(cls.b1, cls.b3, cls.b5, cls.b6)
        s3.books.add(cls.b3, cls.b4, cls.b6)

    def test_empty_aggregate(self):
        self.assertEqual(Author.objects.all().aggregate(), {})

    def test_aggregate_in_order_by(self):
        msg = (
            'Using an aggregate in order_by() without also including it in '
            'annotate() is not allowed: Avg(F(book__rating)'
        )
        with self.assertRaisesMessage(FieldError, msg):
            Author.objects.values('age').order_by(Avg('book__rating'))

    def test_single_aggregate(self):
        vals = Author.objects.aggregate(Avg("age"))
        self.assertEqual(vals, {"age__avg": Approximate(37.4, places=1)})

    def test_multiple_aggregates(self):
        vals = Author.objects.aggregate(Sum("age"), Avg("age"))
        self.assertEqual(vals, {"age__sum": 337, "age__avg": Approximate(37.4, places=1)})

    def test_filter_aggregate(self):
        vals = Author.objects.filter(age__gt=29).aggregate(Sum("age"))
        self.assertEqual(vals, {'age__sum': 254})

    def test_related_aggregate(self):
        vals = Author.objects.aggregate(Avg("friends__age"))
        self.assertEqual(vals, {'friends__age__avg': Approximate(34.07, places=2)})

        vals = Book.objects.filter(rating__lt=4.5).aggregate(Avg("authors__age"))
        self.assertEqual(vals, {'authors__age__avg': Approximate(38.2857, places=2)})

        vals = Author.objects.all().filter(name__contains="a").aggregate(Avg("book__rating"))
        self.assertEqual(vals, {'book__rating__avg': 4.0})

        vals = Book.objects.aggregate(Sum("publisher__num_awards"))
        self.assertEqual(vals, {'publisher__num_awards__sum': 30})

        vals = Publisher.objects.aggregate(Sum("book__price"))
        self.assertEqual(vals, {'book__price__sum': Decimal('270.27')})

    def test_aggregate_multi_join(self):
        vals = Store.objects.aggregate(Max("books__authors__age"))
        self.assertEqual(vals, {'books__authors__age__max': 57})

        vals = Author.objects.aggregate(Min("book__publisher__num_awards"))
        self.assertEqual(vals, {'book__publisher__num_awards__min': 1})

    def test_aggregate_alias(self):
        vals = Store.objects.filter(name="Amazon.com").aggregate(amazon_mean=Avg("books__rating"))
        self.assertEqual(vals, {'amazon_mean': Approximate(4.08, places=2)})

    def test_annotate_basic(self):
        self.assertQuerysetEqual(
            Book.objects.annotate().order_by('pk'), [
                "The Definitive Guide to Django: Web Development Done Right",
                "Sams Teach Yourself Django in 24 Hours",
                "Practical Django Projects",
                "Python Web Development with Django",
                "Artificial Intelligence: A Modern Approach",
                "Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp"
            ],
            lambda b: b.name
        )

        books = Book.objects.annotate(mean_age=Avg("authors__age"))
        b = books.get(pk=self.b1.pk)
        self.assertEqual(
            b.name,
            'The Definitive Guide to Django: Web Development Done Right'
        )
        self.assertEqual(b.mean_age, 34.5)

    def test_annotate_defer(self):
        qs = Book.objects.annotate(
            page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)

        rows = [
            (self.b1.id, "159059725", 447, "The Definitive Guide to Django: Web Development Done Right")
        ]
        self.assertQuerysetEqual(
            qs.order_by('pk'), rows,
            lambda r: (r.id, r.isbn, r.page_sum, r.name)
        )

    def test_annotate_defer_select_related(self):
        qs = Book.objects.select_related('contact').annotate(
            page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)

        rows = [
            (self.b1.id, "159059725", 447, "Adrian Holovaty",
             "The Definitive Guide to Django: Web Development Done Right")
        ]
        self.assertQuerysetEqual(
            qs.order_by('pk'), rows,
            lambda r: (r.id, r.isbn, r.page_sum, r.contact.name, r.name)
        )

    def test_annotate_m2m(self):
        books = Book.objects.filter(rating__lt=4.5).annotate(Avg("authors__age")).order_by("name")
        self.assertQuerysetEqual(
            books, [
                ('Artificial Intelligence: A Modern Approach', 51.5),
                ('Practical Django Projects', 29.0),
                ('Python Web Development with Django', Approximate(30.3, places=1)),
                ('Sams Teach Yourself Django in 24 Hours', 45.0)
            ],
            lambda b: (b.name, b.authors__age__avg),
        )

        books = Book.objects.annotate(num_authors=Count("authors")).order_by("name")
        self.assertQuerysetEqual(
            books, [
                ('Artificial Intelligence: A Modern Approach', 2),
                ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
                ('Practical Django Projects', 1),
                ('Python Web Development with Django', 3),
                ('Sams Teach Yourself Django in 24 Hours', 1),
                ('The Definitive Guide to Django: Web Development Done Right', 2)
            ],
            lambda b: (b.name, b.num_authors)
        )

    def test_backwards_m2m_annotate(self):
        authors = Author.objects.filter(name__contains="a").annotate(Avg("book__rating")).order_by("name")
        self.assertQuerysetEqual(
            authors, [
                ('Adrian Holovaty', 4.5),
                ('Brad Dayley', 3.0),
                ('Jacob Kaplan-Moss', 4.5),
                ('James Bennett', 4.0),
                ('Paul Bissex', 4.0),
                ('Stuart Russell', 4.0)
            ],
            lambda a: (a.name, a.book__rating__avg)
        )

        authors = Author.objects.annotate(num_books=Count("book")).order_by("name")
        self.assertQuerysetEqual(
            authors, [
                ('Adrian Holovaty', 1),
                ('Brad Dayley', 1),
                ('Jacob Kaplan-Moss', 1),
                ('James Bennett', 1),
                ('Jeffrey Forcier', 1),
                ('Paul Bissex', 1),
                ('Peter Norvig', 2),
                ('Stuart Russell', 1),
                ('Wesley J. Chun', 1)
            ],
            lambda a: (a.name, a.num_books)
        )

    def test_reverse_fkey_annotate(self):
        books = Book.objects.annotate(Sum("publisher__num_awards")).order_by("name")
        self.assertQuerysetEqual(
            books, [
                ('Artificial Intelligence: A Modern Approach', 7),
                ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 9),
                ('Practical Django Projects', 3),
                ('Python Web Development with Django', 7),
                ('Sams Teach Yourself Django in 24 Hours', 1),
                ('The Definitive Guide to Django: Web Development Done Right', 3)
            ],
            lambda b: (b.name, b.publisher__num_awards__sum)
        )

        publishers = Publisher.objects.annotate(Sum("book__price")).order_by("name")
        self.assertQuerysetEqual(
            publishers, [
                ('Apress', Decimal("59.69")),
                ("Jonno's House of Books", None),
                ('Morgan Kaufmann', Decimal("75.00")),
                ('Prentice Hall', Decimal("112.49")),
                ('Sams', Decimal("23.09"))
            ],
            lambda p: (p.name, p.book__price__sum)
        )

    def test_annotate_values(self):
        books = list(Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values())
        self.assertEqual(
            books, [
                {
                    "contact_id": self.a1.id,
                    "id": self.b1.id,
                    "isbn": "159059725",
                    "mean_age": 34.5,
                    "name": "The Definitive Guide to Django: Web Development Done Right",
                    "pages": 447,
                    "price": Approximate(Decimal("30")),
                    "pubdate": datetime.date(2007, 12, 6),
                    "publisher_id": self.p1.id,
                    "rating": 4.5,
                }
            ]
        )

        books = (
            Book.objects
            .filter(pk=self.b1.pk)
            .annotate(mean_age=Avg('authors__age'))
            .values('pk', 'isbn', 'mean_age')
        )
        self.assertEqual(
            list(books), [
                {
                    "pk": self.b1.pk,
                    "isbn": "159059725",
                    "mean_age": 34.5,
                }
            ]
        )

        books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values("name")
        self.assertEqual(
            list(books),
            [{'name': 'The Definitive Guide to Django: Web Development Done Right'}],
        )

        books = Book.objects.filter(pk=self.b1.pk).values().annotate(mean_age=Avg('authors__age'))
        self.assertEqual(
            list(books), [
                {
                    "contact_id": self.a1.id,
                    "id": self.b1.id,
                    "isbn": "159059725",
                    "mean_age": 34.5,
                    "name": "The Definitive Guide to Django: Web Development Done Right",
                    "pages": 447,
                    "price": Approximate(Decimal("30")),
                    "pubdate": datetime.date(2007, 12, 6),
                    "publisher_id": self.p1.id,
                    "rating": 4.5,
                }
            ]
        )

        books = (
            Book.objects
            .values("rating")
            .annotate(n_authors=Count("authors__id"), mean_age=Avg("authors__age"))
            .order_by("rating")
        )
        self.assertEqual(
            list(books), [
                {
                    "rating": 3.0,
                    "n_authors": 1,
                    "mean_age": 45.0,
                },
                {
                    "rating": 4.0,
                    "n_authors": 6,
                    "mean_age": Approximate(37.16, places=1)
                },
                {
                    "rating": 4.5,
                    "n_authors": 2,
                    "mean_age": 34.5,
                },
                {
                    "rating": 5.0,
                    "n_authors": 1,
                    "mean_age": 57.0,
                }
            ]
        )

        authors = Author.objects.annotate(Avg("friends__age")).order_by("name")
        self.assertQuerysetEqual(
            authors, [
                ('Adrian Holovaty', 32.0),
                ('Brad Dayley', None),
                ('Jacob Kaplan-Moss', 29.5),
                ('James Bennett', 34.0),
                ('Jeffrey Forcier', 27.0),
                ('Paul Bissex', 31.0),
                ('Peter Norvig', 46.0),
                ('Stuart Russell', 57.0),
                ('Wesley J. Chun', Approximate(33.66, places=1))
            ],
            lambda a: (a.name, a.friends__age__avg)
        )

    def test_count(self):
        vals = Book.objects.aggregate(Count("rating"))
        self.assertEqual(vals, {"rating__count": 6})

    def test_count_star(self):
        with self.assertNumQueries(1) as ctx:
            Book.objects.aggregate(n=Count("*"))
        sql = ctx.captured_queries[0]['sql']
        self.assertIn('SELECT COUNT(*) ', sql)

    def test_count_distinct_expression(self):
        aggs = Book.objects.aggregate(
            distinct_ratings=Count(Case(When(pages__gt=300, then='rating')), distinct=True),
        )
        self.assertEqual(aggs['distinct_ratings'], 4)

    def test_distinct_on_aggregate(self):
        for aggregate, expected_result in (
            (Avg, 4.125),
            (Count, 4),
            (Sum, 16.5),
        ):
            with self.subTest(aggregate=aggregate.__name__):
                books = Book.objects.aggregate(ratings=aggregate('rating', distinct=True))
                self.assertEqual(books['ratings'], expected_result)

    def test_non_grouped_annotation_not_in_group_by(self):
        """
        An annotation not included in values() before an aggregate should be
        excluded from the group by clause.
        """
        qs = (
            Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating')
                .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
        )
        self.assertEqual(list(qs), [{'rating': 4.0, 'count': 2}])

    def test_grouped_annotation_in_group_by(self):
        """
        An annotation included in values() before an aggregate should be
        included in the group by clause.
        """
        qs = (
            Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating', 'xprice')
                .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
        )
        self.assertEqual(
            list(qs), [
                {'rating': 4.0, 'count': 1},
                {'rating': 4.0, 'count': 2},
            ]
        )

    def test_fkey_aggregate(self):
        explicit = list(Author.objects.annotate(Count('book__id')))
        implicit = list(Author.objects.annotate(Count('book')))
        self.assertCountEqual(explicit, implicit)

    def test_annotate_ordering(self):
        books = Book.objects.values('rating').annotate(oldest=Max('authors__age')).order_by('oldest', 'rating')
        self.assertEqual(
            list(books), [
                {'rating': 4.5, 'oldest': 35},
                {'rating': 3.0, 'oldest': 45},
                {'rating': 4.0, 'oldest': 57},
                {'rating': 5.0, 'oldest': 57},
            ]
        )

        books = Book.objects.values("rating").annotate(oldest=Max("authors__age")).order_by("-oldest", "-rating")
        self.assertEqual(
            list(books), [
                {'rating': 5.0, 'oldest': 57},
                {'rating': 4.0, 'oldest': 57},
                {'rating': 3.0, 'oldest': 45},
                {'rating': 4.5, 'oldest': 35},
            ]
        )

    def test_aggregate_annotation(self):
        vals = Book.objects.annotate(num_authors=Count("authors__id")).aggregate(Avg("num_authors"))
        self.assertEqual(vals, {"num_authors__avg": Approximate(1.66, places=1)})

    def test_avg_duration_field(self):
        # Explicit `output_field`.
        self.assertEqual(
            Publisher.objects.aggregate(Avg('duration', output_field=DurationField())),
            {'duration__avg': datetime.timedelta(days=1, hours=12)}
        )
        # Implicit `output_field`.
        self.assertEqual(
            Publisher.objects.aggregate(Avg('duration')),
            {'duration__avg': datetime.timedelta(days=1, hours=12)}
        )

    def test_sum_duration_field(self):
        self.assertEqual(
            Publisher.objects.aggregate(Sum('duration', output_field=DurationField())),
            {'duration__sum': datetime.timedelta(days=3)}
        )

    def test_sum_distinct_aggregate(self):
        """
        Sum on a distinct() QuerySet should aggregate only the distinct items.
        """
        authors = Author.objects.filter(book__in=[self.b5, self.b6])
        self.assertEqual(authors.count(), 3)

        distinct_authors = authors.distinct()
        self.assertEqual(distinct_authors.count(), 2)

        # Selected author ages are 57 and 46
        age_sum = distinct_authors.aggregate(Sum('age'))
        self.assertEqual(age_sum['age__sum'], 103)

    def test_filtering(self):
        p = Publisher.objects.create(name='Expensive Publisher', num_awards=0)
        Book.objects.create(
            name='ExpensiveBook1',
            pages=1,
            isbn='111',
            rating=3.5,
            price=Decimal("1000"),
            publisher=p,
            contact_id=self.a1.id,
            pubdate=datetime.date(2008, 12, 1)
        )
        Book.objects.create(
            name='ExpensiveBook2',
            pages=1,
            isbn='222',
            rating=4.0,
            price=Decimal("1000"),
            publisher=p,
            contact_id=self.a1.id,
            pubdate=datetime.date(2008, 12, 2)
        )
        Book.objects.create(
            name='ExpensiveBook3',
            pages=1,
            isbn='333',
            rating=4.5,
            price=Decimal("35"),
            publisher=p,
            contact_id=self.a1.id,
            pubdate=datetime.date(2008, 12, 3)
        )

        publishers = Publisher.objects.annotate(num_books=Count("book__id")).filter(num_books__gt=1).order_by("pk")
        self.assertQuerysetEqual(
            publishers,
            ['Apress', 'Prentice Hall', 'Expensive Publisher'],
            lambda p: p.name,
        )

        publishers = Publisher.objects.filter(book__price__lt=Decimal("40.0")).order_by("pk")
        self.assertQuerysetEqual(
            publishers, [
                "Apress",
                "Apress",
                "Sams",
                "Prentice Hall",
                "Expensive Publisher",
            ],
            lambda p: p.name
        )

        publishers = (
            Publisher.objects
            .annotate(num_books=Count("book__id"))
            .filter(num_books__gt=1, book__price__lt=Decimal("40.0"))
            .order_by("pk")
        )
        self.assertQuerysetEqual(
            publishers,
            ['Apress', 'Prentice Hall', 'Expensive Publisher'],
            lambda p: p.name,
        )

        publishers = (
            Publisher.objects
            .filter(book__price__lt=Decimal("40.0"))
            .annotate(num_books=Count("book__id"))
            .filter(num_books__gt=1)
            .order_by("pk")
        )
        self.assertQuerysetEqual(publishers, ['Apress'], lambda p: p.name)

        publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__range=[1, 3]).order_by("pk")
        self.assertQuerysetEqual(
            publishers, [
                "Apress",
                "Sams",
                "Prentice Hall",
                "Morgan Kaufmann",
                "Expensive Publisher",
            ],
            lambda p: p.name
        )

        publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__range=[1, 2]).order_by("pk")
        self.assertQuerysetEqual(
            publishers,
            ['Apress', 'Sams', 'Prentice Hall', 'Morgan Kaufmann'],
            lambda p: p.name
        )

        publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__in=[1, 3]).order_by("pk")
        self.assertQuerysetEqual(
            publishers,
            ['Sams', 'Morgan Kaufmann', 'Expensive Publisher'],
            lambda p: p.name,
        )

        publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__isnull=True)
        self.assertEqual(len(publishers), 0)

    def test_annotation(self):
        vals = Author.objects.filter(pk=self.a1.pk).aggregate(Count("friends__id"))
        self.assertEqual(vals, {"friends__id__count": 2})

        books = Book.objects.annotate(num_authors=Count("authors__name")).filter(num_authors__exact=2).order_by("pk")
        self.assertQuerysetEqual(
            books, [
                "The Definitive Guide to Django: Web Development Done Right",
                "Artificial Intelligence: A Modern Approach",
            ],
            lambda b: b.name
        )

        authors = (
            Author.objects
            .annotate(num_friends=Count("friends__id", distinct=True))
            .filter(num_friends=0)
            .order_by("pk")
        )
        self.assertQuerysetEqual(authors, ['Brad Dayley'], lambda a: a.name)

        publishers = Publisher.objects.annotate(num_books=Count("book__id")).filter(num_books__gt=1).order_by("pk")
        self.assertQuerysetEqual(publishers, ['Apress', 'Prentice Hall'], lambda p: p.name)

        publishers = (
            Publisher.objects
            .filter(book__price__lt=Decimal("40.0"))
            .annotate(num_books=Count("book__id"))
            .filter(num_books__gt=1)
        )
        self.assertQuerysetEqual(publishers, ['Apress'], lambda p: p.name)

        books = (
            Book.objects
            .annotate(num_authors=Count("authors__id"))
            .filter(authors__name__contains="Norvig", num_authors__gt=1)
        )
        self.assertQuerysetEqual(
            books,
            ['Artificial Intelligence: A Modern Approach'],
            lambda b: b.name
        )

    def test_more_aggregation(self):
        a = Author.objects.get(name__contains='Norvig')
        b = Book.objects.get(name__contains='Done Right')
        b.authors.add(a)
        b.save()

        vals = (
            Book.objects
            .annotate(num_authors=Count("authors__id"))
            .filter(authors__name__contains="Norvig", num_authors__gt=1)
            .aggregate(Avg("rating"))
        )
        self.assertEqual(vals, {"rating__avg": 4.25})

    def test_even_more_aggregate(self):
        publishers = Publisher.objects.annotate(
            earliest_book=Min("book__pubdate"),
        ).exclude(earliest_book=None).order_by("earliest_book").values(
            'earliest_book',
            'num_awards',
            'id',
            'name',
        )
        self.assertEqual(
            list(publishers), [
                {
                    'earliest_book': datetime.date(1991, 10, 15),
                    'num_awards': 9,
                    'id': self.p4.id,
                    'name': 'Morgan Kaufmann'
                },
                {
                    'earliest_book': datetime.date(1995, 1, 15),
                    'num_awards': 7,
                    'id': self.p3.id,
                    'name': 'Prentice Hall'
                },
                {
                    'earliest_book': datetime.date(2007, 12, 6),
                    'num_awards': 3,
                    'id': self.p1.id,
                    'name': 'Apress'
                },
                {
                    'earliest_book': datetime.date(2008, 3, 3),
                    'num_awards': 1,
                    'id': self.p2.id,
                    'name': 'Sams'
                }
            ]
        )

        vals = Store.objects.aggregate(Max("friday_night_closing"), Min("original_opening"))
        self.assertEqual(
            vals,
            {
                "friday_night_closing__max": datetime.time(23, 59, 59),
                "original_opening__min": datetime.datetime(1945, 4, 25, 16, 24, 14),
            }
        )

    def test_annotate_values_list(self):
        books = (
            Book.objects
            .filter(pk=self.b1.pk)
            .annotate(mean_age=Avg("authors__age"))
            .values_list("pk", "isbn", "mean_age")
        )
        self.assertEqual(list(books), [(self.b1.id, '159059725', 34.5)])

        books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values_list("isbn")
        self.assertEqual(list(books), [('159059725',)])

        books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values_list("mean_age")
        self.assertEqual(list(books), [(34.5,)])

        books = (
            Book.objects
            .filter(pk=self.b1.pk)
            .annotate(mean_age=Avg("authors__age"))
            .values_list("mean_age", flat=True)
        )
        self.assertEqual(list(books), [34.5])

        books = Book.objects.values_list("price").annotate(count=Count("price")).order_by("-count", "price")
        self.assertEqual(
            list(books), [
                (Decimal("29.69"), 2),
                (Decimal('23.09'), 1),
                (Decimal('30'), 1),
                (Decimal('75'), 1),
                (Decimal('82.8'), 1),
            ]
        )

    def test_dates_with_aggregation(self):
        """
        .dates() returns a distinct set of dates when applied to a
        QuerySet with aggregation.

        Refs #18056. Previously, .dates() would return distinct (date_kind,
        aggregation) sets, in this case (year, num_authors), so 2008 would be
        returned twice because there are books from 2008 with a different
        number of authors.
        """
        dates = Book.objects.annotate(num_authors=Count("authors")).dates('pubdate', 'year')
        self.assertQuerysetEqual(
            dates, [
                "datetime.date(1991, 1, 1)",
                "datetime.date(1995, 1, 1)",
                "datetime.date(2007, 1, 1)",
                "datetime.date(2008, 1, 1)"
            ]
        )

    def test_values_aggregation(self):
        # Refs #20782
        max_rating = Book.objects.values('rating').aggregate(max_rating=Max('rating'))
        self.assertEqual(max_rating['max_rating'], 5)
        max_books_per_rating = Book.objects.values('rating').annotate(
            books_per_rating=Count('id')
        ).aggregate(Max('books_per_rating'))
        self.assertEqual(
            max_books_per_rating,
            {'books_per_rating__max': 3})

    def test_ticket17424(self):
        """
        Doing exclude() on a foreign model after annotate() doesn't crash.
        """
        all_books = list(Book.objects.values_list('pk', flat=True).order_by('pk'))
        annotated_books = Book.objects.order_by('pk').annotate(one=Count("id"))

        # The value doesn't matter, we just need any negative
        # constraint on a related model that's a noop.
        excluded_books = annotated_books.exclude(publisher__name="__UNLIKELY_VALUE__")

        # Try to generate query tree
        str(excluded_books.query)

        self.assertQuerysetEqual(excluded_books, all_books, lambda x: x.pk)

        # Check internal state
        self.assertIsNone(annotated_books.query.alias_map["aggregation_book"].join_type)
        self.assertIsNone(excluded_books.query.alias_map["aggregation_book"].join_type)

    def test_ticket12886(self):
        """
        Aggregation over sliced queryset works correctly.
        """
        qs = Book.objects.all().order_by('-rating')[0:3]
        vals = qs.aggregate(average_top3_rating=Avg('rating'))['average_top3_rating']
        self.assertAlmostEqual(vals, 4.5, places=2)

    def test_ticket11881(self):
        """
        Subqueries do not needlessly contain ORDER BY, SELECT FOR UPDATE or
        select_related() stuff.
        """
        qs = Book.objects.all().select_for_update().order_by(
            'pk').select_related('publisher').annotate(max_pk=Max('pk'))
        with CaptureQueriesContext(connection) as captured_queries:
            qs.aggregate(avg_pk=Avg('max_pk'))
            self.assertEqual(len(captured_queries), 1)
            qstr = captured_queries[0]['sql'].lower()
            self.assertNotIn('for update', qstr)
            forced_ordering = connection.ops.force_no_ordering()
            if forced_ordering:
                # If the backend needs to force an ordering we make sure it's
                # the only "ORDER BY" clause present in the query.
                self.assertEqual(
                    re.findall(r'order by (\w+)', qstr),
                    [', '.join(f[1][0] for f in forced_ordering).lower()]
                )
            else:
                self.assertNotIn('order by', qstr)
            self.assertEqual(qstr.count(' join '), 0)

    def test_decimal_max_digits_has_no_effect(self):
        Book.objects.all().delete()
        a1 = Author.objects.first()
        p1 = Publisher.objects.first()
        thedate = timezone.now()
        for i in range(10):
            Book.objects.create(
                isbn="abcde{}".format(i), name="none", pages=10, rating=4.0,
                price=9999.98, contact=a1, publisher=p1, pubdate=thedate)

        book = Book.objects.aggregate(price_sum=Sum('price'))
        self.assertEqual(book['price_sum'], Decimal("99999.80"))

    def test_nonaggregate_aggregation_throws(self):
        with self.assertRaisesMessage(TypeError, 'fail is not an aggregate expression'):
            Book.objects.aggregate(fail=F('price'))

    def test_nonfield_annotation(self):
        book = Book.objects.annotate(val=Max(Value(2))).first()
        self.assertEqual(book.val, 2)
        book = Book.objects.annotate(val=Max(Value(2), output_field=IntegerField())).first()
        self.assertEqual(book.val, 2)
        book = Book.objects.annotate(val=Max(2, output_field=IntegerField())).first()
        self.assertEqual(book.val, 2)

    def test_annotation_expressions(self):
        authors = Author.objects.annotate(combined_ages=Sum(F('age') + F('friends__age'))).order_by('name')
        authors2 = Author.objects.annotate(combined_ages=Sum('age') + Sum('friends__age')).order_by('name')
        for qs in (authors, authors2):
            self.assertQuerysetEqual(
                qs, [
                    ('Adrian Holovaty', 132),
                    ('Brad Dayley', None),
                    ('Jacob Kaplan-Moss', 129),
                    ('James Bennett', 63),
                    ('Jeffrey Forcier', 128),
                    ('Paul Bissex', 120),
                    ('Peter Norvig', 103),
                    ('Stuart Russell', 103),
                    ('Wesley J. Chun', 176)
                ],
                lambda a: (a.name, a.combined_ages)
            )

    def test_aggregation_expressions(self):
        a1 = Author.objects.aggregate(av_age=Sum('age') / Count('*'))
        a2 = Author.objects.aggregate(av_age=Sum('age') / Count('age'))
        a3 = Author.objects.aggregate(av_age=Avg('age'))
        self.assertEqual(a1, {'av_age': 37})
        self.assertEqual(a2, {'av_age': 37})
        self.assertEqual(a3, {'av_age': Approximate(37.4, places=1)})

    def test_avg_decimal_field(self):
        v = Book.objects.filter(rating=4).aggregate(avg_price=(Avg('price')))['avg_price']
        self.assertIsInstance(v, Decimal)
        self.assertEqual(v, Approximate(Decimal('47.39'), places=2))

    def test_order_of_precedence(self):
        p1 = Book.objects.filter(rating=4).aggregate(avg_price=(Avg('price') + 2) * 3)
        self.assertEqual(p1, {'avg_price': Approximate(Decimal('148.18'), places=2)})

        p2 = Book.objects.filter(rating=4).aggregate(avg_price=Avg('price') + 2 * 3)
        self.assertEqual(p2, {'avg_price': Approximate(Decimal('53.39'), places=2)})

    def test_combine_different_types(self):
        msg = (
            'Expression contains mixed types: FloatField, DecimalField. '
            'You must set output_field.'
        )
        qs = Book.objects.annotate(sums=Sum('rating') + Sum('pages') + Sum('price'))
        with self.assertRaisesMessage(FieldError, msg):
            qs.first()
        with self.assertRaisesMessage(FieldError, msg):
            qs.first()

        b1 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
                                   output_field=IntegerField())).get(pk=self.b4.pk)
        self.assertEqual(b1.sums, 383)

        b2 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
                                   output_field=FloatField())).get(pk=self.b4.pk)
        self.assertEqual(b2.sums, 383.69)

        b3 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
                                   output_field=DecimalField())).get(pk=self.b4.pk)
        self.assertEqual(b3.sums, Approximate(Decimal("383.69"), places=2))

    def test_complex_aggregations_require_kwarg(self):
        with self.assertRaisesMessage(TypeError, 'Complex annotations require an alias'):
            Author.objects.annotate(Sum(F('age') + F('friends__age')))
        with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
            Author.objects.aggregate(Sum('age') / Count('age'))
        with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
            Author.objects.aggregate(Sum(1))

    def test_aggregate_over_complex_annotation(self):
        qs = Author.objects.annotate(
            combined_ages=Sum(F('age') + F('friends__age')))

        age = qs.aggregate(max_combined_age=Max('combined_ages'))
        self.assertEqual(age['max_combined_age'], 176)

        age = qs.aggregate(max_combined_age_doubled=Max('combined_ages') * 2)
        self.assertEqual(age['max_combined_age_doubled'], 176 * 2)

        age = qs.aggregate(
            max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'))
        self.assertEqual(age['max_combined_age_doubled'], 176 * 2)

        age = qs.aggregate(
            max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'),
            sum_combined_age=Sum('combined_ages'))
        self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
        self.assertEqual(age['sum_combined_age'], 954)

        age = qs.aggregate(
            max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'),
            sum_combined_age_doubled=Sum('combined_ages') + Sum('combined_ages'))
        self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
        self.assertEqual(age['sum_combined_age_doubled'], 954 * 2)

    def test_values_annotation_with_expression(self):
        # ensure the F() is promoted to the group by clause
        qs = Author.objects.values('name').annotate(another_age=Sum('age') + F('age'))
        a = qs.get(name="Adrian Holovaty")
        self.assertEqual(a['another_age'], 68)

        qs = qs.annotate(friend_count=Count('friends'))
        a = qs.get(name="Adrian Holovaty")
        self.assertEqual(a['friend_count'], 2)

        qs = qs.annotate(combined_age=Sum('age') + F('friends__age')).filter(
            name="Adrian Holovaty").order_by('-combined_age')
        self.assertEqual(
            list(qs), [
                {
                    "name": 'Adrian Holovaty',
                    "another_age": 68,
                    "friend_count": 1,
                    "combined_age": 69
                },
                {
                    "name": 'Adrian Holovaty',
                    "another_age": 68,
                    "friend_count": 1,
                    "combined_age": 63
                }
            ]
        )

        vals = qs.values('name', 'combined_age')
        self.assertEqual(
            list(vals), [
                {'name': 'Adrian Holovaty', 'combined_age': 69},
                {'name': 'Adrian Holovaty', 'combined_age': 63},
            ]
        )

    def test_annotate_values_aggregate(self):
        alias_age = Author.objects.annotate(
            age_alias=F('age')
        ).values(
            'age_alias',
        ).aggregate(sum_age=Sum('age_alias'))

        age = Author.objects.values('age').aggregate(sum_age=Sum('age'))

        self.assertEqual(alias_age['sum_age'], age['sum_age'])

    def test_annotate_over_annotate(self):
        author = Author.objects.annotate(
            age_alias=F('age')
        ).annotate(
            sum_age=Sum('age_alias')
        ).get(name="Adrian Holovaty")

        other_author = Author.objects.annotate(
            sum_age=Sum('age')
        ).get(name="Adrian Holovaty")

        self.assertEqual(author.sum_age, other_author.sum_age)

    def test_aggregate_over_aggregate(self):
        msg = "Cannot compute Avg('age'): 'age' is an aggregate"
        with self.assertRaisesMessage(FieldError, msg):
            Author.objects.annotate(
                age_alias=F('age'),
            ).aggregate(
                age=Sum(F('age')),
                avg_age=Avg(F('age')),
            )

    def test_annotated_aggregate_over_annotated_aggregate(self):
        with self.assertRaisesMessage(FieldError, "Cannot compute Sum('id__max'): 'id__max' is an aggregate"):
            Book.objects.annotate(Max('id')).annotate(Sum('id__max'))

        class MyMax(Max):
            def as_sql(self, compiler, connection):
                self.set_source_expressions(self.get_source_expressions()[0:1])
                return super().as_sql(compiler, connection)

        with self.assertRaisesMessage(FieldError, "Cannot compute Max('id__max'): 'id__max' is an aggregate"):
            Book.objects.annotate(Max('id')).annotate(my_max=MyMax('id__max', 'price'))

    def test_multi_arg_aggregate(self):
        class MyMax(Max):
            output_field = DecimalField()

            def as_sql(self, compiler, connection):
                copy = self.copy()
                copy.set_source_expressions(copy.get_source_expressions()[0:1])
                return super(MyMax, copy).as_sql(compiler, connection)

        with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
            Book.objects.aggregate(MyMax('pages', 'price'))

        with self.assertRaisesMessage(TypeError, 'Complex annotations require an alias'):
            Book.objects.annotate(MyMax('pages', 'price'))

        Book.objects.aggregate(max_field=MyMax('pages', 'price'))

    def test_add_implementation(self):
        class MySum(Sum):
            pass

        # test completely changing how the output is rendered
        def lower_case_function_override(self, compiler, connection):
            sql, params = compiler.compile(self.source_expressions[0])
            substitutions = {'function': self.function.lower(), 'expressions': sql, 'distinct': ''}
            substitutions.update(self.extra)
            return self.template % substitutions, params
        setattr(MySum, 'as_' + connection.vendor, lower_case_function_override)

        qs = Book.objects.annotate(
            sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
        )
        self.assertEqual(str(qs.query).count('sum('), 1)
        b1 = qs.get(pk=self.b4.pk)
        self.assertEqual(b1.sums, 383)

        # test changing the dict and delegating
        def lower_case_function_super(self, compiler, connection):
            self.extra['function'] = self.function.lower()
            return super(MySum, self).as_sql(compiler, connection)
        setattr(MySum, 'as_' + connection.vendor, lower_case_function_super)

        qs = Book.objects.annotate(
            sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
        )
        self.assertEqual(str(qs.query).count('sum('), 1)
        b1 = qs.get(pk=self.b4.pk)
        self.assertEqual(b1.sums, 383)

        # test overriding all parts of the template
        def be_evil(self, compiler, connection):
            substitutions = {'function': 'MAX', 'expressions': '2', 'distinct': ''}
            substitutions.update(self.extra)
            return self.template % substitutions, ()
        setattr(MySum, 'as_' + connection.vendor, be_evil)

        qs = Book.objects.annotate(
            sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
        )
        self.assertEqual(str(qs.query).count('MAX('), 1)
        b1 = qs.get(pk=self.b4.pk)
        self.assertEqual(b1.sums, 2)

    def test_complex_values_aggregation(self):
        max_rating = Book.objects.values('rating').aggregate(
            double_max_rating=Max('rating') + Max('rating'))
        self.assertEqual(max_rating['double_max_rating'], 5 * 2)

        max_books_per_rating = Book.objects.values('rating').annotate(
            books_per_rating=Count('id') + 5
        ).aggregate(Max('books_per_rating'))
        self.assertEqual(
            max_books_per_rating,
            {'books_per_rating__max': 3 + 5})

    def test_expression_on_aggregation(self):

        # Create a plain expression
        class Greatest(Func):
            function = 'GREATEST'

            def as_sqlite(self, compiler, connection, **extra_context):
                return super().as_sql(compiler, connection, function='MAX', **extra_context)

        qs = Publisher.objects.annotate(
            price_or_median=Greatest(Avg('book__rating', output_field=DecimalField()), Avg('book__price'))
        ).filter(price_or_median__gte=F('num_awards')).order_by('num_awards')
        self.assertQuerysetEqual(
            qs, [1, 3, 7, 9], lambda v: v.num_awards)

        qs2 = Publisher.objects.annotate(
            rating_or_num_awards=Greatest(Avg('book__rating'), F('num_awards'),
                                          output_field=FloatField())
        ).filter(rating_or_num_awards__gt=F('num_awards')).order_by('num_awards')
        self.assertQuerysetEqual(
            qs2, [1, 3], lambda v: v.num_awards)

    def test_arguments_must_be_expressions(self):
        msg = 'QuerySet.aggregate() received non-expression(s): %s.'
        with self.assertRaisesMessage(TypeError, msg % FloatField()):
            Book.objects.aggregate(FloatField())
        with self.assertRaisesMessage(TypeError, msg % True):
            Book.objects.aggregate(is_book=True)
        with self.assertRaisesMessage(TypeError, msg % ', '.join([str(FloatField()), 'True'])):
            Book.objects.aggregate(FloatField(), Avg('price'), is_book=True)

    def test_aggregation_subquery_annotation(self):
        """Subquery annotations are excluded from the GROUP BY if they are
        not explicitly grouped against."""
        latest_book_pubdate_qs = Book.objects.filter(
            publisher=OuterRef('pk')
        ).order_by('-pubdate').values('pubdate')[:1]
        publisher_qs = Publisher.objects.annotate(
            latest_book_pubdate=Subquery(latest_book_pubdate_qs),
        ).annotate(count=Count('book'))
        with self.assertNumQueries(1) as ctx:
            list(publisher_qs)
        self.assertEqual(ctx[0]['sql'].count('SELECT'), 2)
        # The GROUP BY should not be by alias either.
        self.assertEqual(ctx[0]['sql'].lower().count('latest_book_pubdate'), 1)

    def test_aggregation_subquery_annotation_exists(self):
        latest_book_pubdate_qs = Book.objects.filter(
            publisher=OuterRef('pk')
        ).order_by('-pubdate').values('pubdate')[:1]
        publisher_qs = Publisher.objects.annotate(
            latest_book_pubdate=Subquery(latest_book_pubdate_qs),
            count=Count('book'),
        )
        self.assertTrue(publisher_qs.exists())

    def test_aggregation_exists_annotation(self):
        published_books = Book.objects.filter(publisher=OuterRef('pk'))
        publisher_qs = Publisher.objects.annotate(
            published_book=Exists(published_books),
            count=Count('book'),
        ).values_list('name', flat=True)
        self.assertCountEqual(list(publisher_qs), [
            'Apress',
            'Morgan Kaufmann',
            "Jonno's House of Books",
            'Prentice Hall',
            'Sams',
        ])

    def test_aggregation_subquery_annotation_values(self):
        """
        Subquery annotations and external aliases are excluded from the GROUP
        BY if they are not selected.
        """
        books_qs = Book.objects.annotate(
            first_author_the_same_age=Subquery(
                Author.objects.filter(
                    age=OuterRef('contact__friends__age'),
                ).order_by('age').values('id')[:1],
            )
        ).filter(
            publisher=self.p1,
            first_author_the_same_age__isnull=False,
        ).annotate(
            min_age=Min('contact__friends__age'),
        ).values('name', 'min_age').order_by('name')
        self.assertEqual(list(books_qs), [
            {'name': 'Practical Django Projects', 'min_age': 34},
            {
                'name': 'The Definitive Guide to Django: Web Development Done Right',
                'min_age': 29,
            },
        ])

    def test_aggregation_subquery_annotation_values_collision(self):
        books_rating_qs = Book.objects.filter(
            publisher=OuterRef('pk'),
            price=Decimal('29.69'),
        ).values('rating')
        publisher_qs = Publisher.objects.filter(
            book__contact__age__gt=20,
            name=self.p1.name,
        ).annotate(
            rating=Subquery(books_rating_qs),
            contacts_count=Count('book__contact'),
        ).values('rating').annotate(total_count=Count('rating'))
        self.assertEqual(list(publisher_qs), [
            {'rating': 4.0, 'total_count': 2},
        ])

    @skipUnlessDBFeature('supports_subqueries_in_group_by')
    def test_aggregation_subquery_annotation_multivalued(self):
        """
        Subquery annotations must be included in the GROUP BY if they use
        potentially multivalued relations (contain the LOOKUP_SEP).
        """
        if connection.vendor == 'mysql' and 'ONLY_FULL_GROUP_BY' in connection.sql_mode:
            self.skipTest(
                'GROUP BY optimization does not work properly when '
                'ONLY_FULL_GROUP_BY mode is enabled on MySQL, see #31331.'
            )
        subquery_qs = Author.objects.filter(
            pk=OuterRef('pk'),
            book__name=OuterRef('book__name'),
        ).values('pk')
        author_qs = Author.objects.annotate(
            subquery_id=Subquery(subquery_qs),
        ).annotate(count=Count('book'))
        self.assertEqual(author_qs.count(), Author.objects.count())

    def test_aggregation_order_by_not_selected_annotation_values(self):
        result_asc = [
            self.b4.pk,
            self.b3.pk,
            self.b1.pk,
            self.b2.pk,
            self.b5.pk,
            self.b6.pk,
        ]
        result_desc = result_asc[::-1]
        tests = [
            ('min_related_age', result_asc),
            ('-min_related_age', result_desc),
            (F('min_related_age'), result_asc),
            (F('min_related_age').asc(), result_asc),
            (F('min_related_age').desc(), result_desc),
        ]
        for ordering, expected_result in tests:
            with self.subTest(ordering=ordering):
                books_qs = Book.objects.annotate(
                    min_age=Min('authors__age'),
                ).annotate(
                    min_related_age=Coalesce('min_age', 'contact__age'),
                ).order_by(ordering).values_list('pk', flat=True)
                self.assertEqual(list(books_qs), expected_result)

    @skipUnlessDBFeature('supports_subqueries_in_group_by')
    def test_group_by_subquery_annotation(self):
        """
        Subquery annotations are included in the GROUP BY if they are
        grouped against.
        """
        long_books_count_qs = Book.objects.filter(
            publisher=OuterRef('pk'),
            pages__gt=400,
        ).values(
            'publisher'
        ).annotate(count=Count('pk')).values('count')
        long_books_count_breakdown = Publisher.objects.values_list(
            Subquery(long_books_count_qs, IntegerField()),
        ).annotate(total=Count('*'))
        self.assertEqual(dict(long_books_count_breakdown), {None: 1, 1: 4})

    @skipUnlessDBFeature('supports_subqueries_in_group_by')
    def test_group_by_exists_annotation(self):
        """
        Exists annotations are included in the GROUP BY if they are
        grouped against.
        """
        long_books_qs = Book.objects.filter(
            publisher=OuterRef('pk'),
            pages__gt=800,
        )
        has_long_books_breakdown = Publisher.objects.values_list(
            Exists(long_books_qs),
        ).annotate(total=Count('*'))
        self.assertEqual(dict(has_long_books_breakdown), {True: 2, False: 3})

    @skipUnlessDBFeature('supports_subqueries_in_group_by')
    def test_aggregation_subquery_annotation_related_field(self):
        publisher = Publisher.objects.create(name=self.a9.name, num_awards=2)
        book = Book.objects.create(
            isbn='159059999', name='Test book.', pages=819, rating=2.5,
            price=Decimal('14.44'), contact=self.a9, publisher=publisher,
            pubdate=datetime.date(2019, 12, 6),
        )
        book.authors.add(self.a5, self.a6, self.a7)
        books_qs = Book.objects.annotate(
            contact_publisher=Subquery(
                Publisher.objects.filter(
                    pk=OuterRef('publisher'),
                    name=OuterRef('contact__name'),
                ).values('name')[:1],
            )
        ).filter(
            contact_publisher__isnull=False,
        ).annotate(count=Count('authors'))
        self.assertSequenceEqual(books_qs, [book])
        # FIXME: GROUP BY doesn't need to include a subquery with
        # non-multivalued JOINs, see Col.possibly_multivalued (refs #31150):
        # with self.assertNumQueries(1) as ctx:
        #     self.assertSequenceEqual(books_qs, [book])
        # self.assertEqual(ctx[0]['sql'].count('SELECT'), 2)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 08:14:25,018 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full content of 'tests/aggregation/tests.py'.\n   - This context represents the first part of the requested file.\n2. Extended relevance:\n   - Providing the full file content is necessary to satisfy the user's request.\n   - This part includes the initial setup (`setUpTestData`) which is crucial for understanding the tests.\n   - It contains several tests using `annotate()` and `order_by()`, which aligns with the user's stated purpose of investigating their interaction with GROUP BY clauses.", relative_path='tests/aggregation/tests.py', start_line=1, end_line=500), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full content of 'tests/aggregation/tests.py'.\n   - This context represents the latter, and larger, part of the requested file.\n2. Extended relevance:\n   - Providing the full file content is necessary to satisfy the user's request.\n   - This part of the file contains numerous advanced test cases for aggregation that directly address the user's interest in the interplay of `annotate()`, `order_by()`, and GROUP BY clauses, such as `test_non_grouped_annotation_not_in_group_by`, `test_grouped_annotation_in_group_by`, and `test_annotate_ordering`.", relative_path='tests/aggregation/tests.py', start_line=20, end_line=1317)]
2025-12-23 08:14:25,021 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of tests/aggregation/tests.py
2025-12-23 08:14:25,022 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 08:14:25,022 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 08:14:25,022 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 1 existing contexts
2025-12-23 08:14:25,022 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-23 08:14:25,023 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: order_by('?') unexpectedly breaking queryset aggregation

Description: Description
	
Steps to reproduce:
class Thing(models.Model):
	pass
class Related(models.Model):
	models.ForeignKey(Thing)
With data
t = Thing.objects.create()
rs = [Related.objects.create(thing=t) for _ in range(2)]
The following query works as expected. The aggregation with Count produces a GROUP BY clause on related.id.
>>> Thing.objects.annotate(rc=Count('related')).order_by('rc').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 2}]>
This also works as expected (at least to me). Although there is an aggregation, ordering by related means that the grouping will be broken down.
>>> Thing.objects.annotate(rc=Count('related')).order_by('related').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
But the following seems wrong to me.
>>> Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc')
<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>
The random function call has nothing to do with the aggregation, and I see no reason it should break it. Dumping the query seems that indeed the random call breaks the group by call: (I simpilfied the table names a little)
>>> print(Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc').query)
SELECT "thing"."id", COUNT("related"."id") AS "rc" FROM "thing" LEFT OUTER JOIN "related" ON ("thing"."id" = "related"."thing_id") GROUP BY "thing"."id", RANDOM() ORDER BY RANDOM() ASC
I dug into the SQL compiler, and it seems to me the problem is inside django.db.models.sql.compiler.get_group_by, where the compiler combines all non-aggregate, non-ref order_by expressions into group_by. I patched it like this
for expr, (sql, params, is_ref) in order_by:
	if expr.contains_aggregate:
		continue
	if is_ref:
		continue
	expressions.extend([
		exp for exp in expr.get_source_expressions()
		if not isinstance(exp, Random)
	])
and things seem to work correctly. No failed tests against SQLite3 with default settings.

Patch information:
diff --git a/django/db/models/functions/math.py b/django/db/models/functions/math.py
index 304e112225..15915f4b7c 100644
--- a/django/db/models/functions/math.py
+++ b/django/db/models/functions/math.py
@@ -154,6 +154,9 @@ class Random(NumericOutputFieldMixin, Func):
     def as_sqlite(self, compiler, connection, **extra_context):
         return super().as_sql(compiler, connection, function='RAND', **extra_context)
 
+    def get_group_by_cols(self, alias=None):
+        return []
+
 
 class Round(Transform):
     function = 'ROUND'


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of tests/ordering/tests.py.
Extra Requirements: 
Purpose: I need to find test cases that use `order_by('?')` in conjunction with `annotate()` to see if there are any existing tests that cover similar scenarios to the bug report.

Previous refined query 2:
Essential Query: Please provide the full content of tests/aggregation/tests.py
Extra Requirements: 
Purpose: I need to find test cases that use `annotate()` in conjunction with `order_by()` to see if there are any existing tests that cover similar scenarios to the bug report, specifically how ordering affects the GROUP BY clause of an aggregation query.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/aggregation/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import re
3. from decimal import Decimal
4. 
5. from django.core.exceptions import FieldError
6. from django.db import connection
7. from django.db.models import (
8.     Avg, Case, Count, DecimalField, DurationField, Exists, F, FloatField, Func,
9.     IntegerField, Max, Min, OuterRef, Subquery, Sum, Value, When,
10. )
11. from django.db.models.functions import Coalesce
12. from django.test import TestCase
13. from django.test.testcases import skipUnlessDBFeature
14. from django.test.utils import Approximate, CaptureQueriesContext
15. from django.utils import timezone
16. 
17. from .models import Author, Book, Publisher, Store
18. 
19. 
20. class AggregateTestCase(TestCase):
21. 
22.     @classmethod
23.     def setUpTestData(cls):
24.         cls.a1 = Author.objects.create(name='Adrian Holovaty', age=34)
25.         cls.a2 = Author.objects.create(name='Jacob Kaplan-Moss', age=35)
26.         cls.a3 = Author.objects.create(name='Brad Dayley', age=45)
27.         cls.a4 = Author.objects.create(name='James Bennett', age=29)
28.         cls.a5 = Author.objects.create(name='Jeffrey Forcier', age=37)
29.         cls.a6 = Author.objects.create(name='Paul Bissex', age=29)
30.         cls.a7 = Author.objects.create(name='Wesley J. Chun', age=25)
31.         cls.a8 = Author.objects.create(name='Peter Norvig', age=57)
32.         cls.a9 = Author.objects.create(name='Stuart Russell', age=46)
33.         cls.a1.friends.add(cls.a2, cls.a4)
34.         cls.a2.friends.add(cls.a1, cls.a7)
35.         cls.a4.friends.add(cls.a1)
36.         cls.a5.friends.add(cls.a6, cls.a7)
37.         cls.a6.friends.add(cls.a5, cls.a7)
38.         cls.a7.friends.add(cls.a2, cls.a5, cls.a6)
39.         cls.a8.friends.add(cls.a9)
40.         cls.a9.friends.add(cls.a8)
41. 
42.         cls.p1 = Publisher.objects.create(name='Apress', num_awards=3, duration=datetime.timedelta(days=1))
43.         cls.p2 = Publisher.objects.create(name='Sams', num_awards=1, duration=datetime.timedelta(days=2))
44.         cls.p3 = Publisher.objects.create(name='Prentice Hall', num_awards=7)
45.         cls.p4 = Publisher.objects.create(name='Morgan Kaufmann', num_awards=9)
46.         cls.p5 = Publisher.objects.create(name="Jonno's House of Books", num_awards=0)
47. 
48.         cls.b1 = Book.objects.create(
49.             isbn='159059725', name='The Definitive Guide to Django: Web Development Done Right',
50.             pages=447, rating=4.5, price=Decimal('30.00'), contact=cls.a1, publisher=cls.p1,
51.             pubdate=datetime.date(2007, 12, 6)
52.         )
53.         cls.b2 = Book.objects.create(
54.             isbn='067232959', name='Sams Teach Yourself Django in 24 Hours',
55.             pages=528, rating=3.0, price=Decimal('23.09'), contact=cls.a3, publisher=cls.p2,
56.             pubdate=datetime.date(2008, 3, 3)
57.         )
58.         cls.b3 = Book.objects.create(
59.             isbn='159059996', name='Practical Django Projects',
60.             pages=300, rating=4.0, price=Decimal('29.69'), contact=cls.a4, publisher=cls.p1,
61.             pubdate=datetime.date(2008, 6, 23)
62.         )
63.         cls.b4 = Book.objects.create(
64.             isbn='013235613', name='Python Web Development with Django',
65.             pages=350, rating=4.0, price=Decimal('29.69'), contact=cls.a5, publisher=cls.p3,
66.             pubdate=datetime.date(2008, 11, 3)
67.         )
68.         cls.b5 = Book.objects.create(
69.             isbn='013790395', name='Artificial Intelligence: A Modern Approach',
70.             pages=1132, rating=4.0, price=Decimal('82.80'), contact=cls.a8, publisher=cls.p3,
71.             pubdate=datetime.date(1995, 1, 15)
72.         )
73.         cls.b6 = Book.objects.create(
74.             isbn='155860191', name='Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
75.             pages=946, rating=5.0, price=Decimal('75.00'), contact=cls.a8, publisher=cls.p4,
76.             pubdate=datetime.date(1991, 10, 15)
77.         )
78.         cls.b1.authors.add(cls.a1, cls.a2)
79.         cls.b2.authors.add(cls.a3)
80.         cls.b3.authors.add(cls.a4)
81.         cls.b4.authors.add(cls.a5, cls.a6, cls.a7)
82.         cls.b5.authors.add(cls.a8, cls.a9)
83.         cls.b6.authors.add(cls.a8)
84. 
85.         s1 = Store.objects.create(
86.             name='Amazon.com',
87.             original_opening=datetime.datetime(1994, 4, 23, 9, 17, 42),
88.             friday_night_closing=datetime.time(23, 59, 59)
89.         )
90.         s2 = Store.objects.create(
91.             name='Books.com',
92.             original_opening=datetime.datetime(2001, 3, 15, 11, 23, 37),
93.             friday_night_closing=datetime.time(23, 59, 59)
94.         )
95.         s3 = Store.objects.create(
96.             name="Mamma and Pappa's Books",
97.             original_opening=datetime.datetime(1945, 4, 25, 16, 24, 14),
98.             friday_night_closing=datetime.time(21, 30)
99.         )
100.         s1.books.add(cls.b1, cls.b2, cls.b3, cls.b4, cls.b5, cls.b6)
101.         s2.books.add(cls.b1, cls.b3, cls.b5, cls.b6)
102.         s3.books.add(cls.b3, cls.b4, cls.b6)
103. 
104.     def test_empty_aggregate(self):
105.         self.assertEqual(Author.objects.all().aggregate(), {})
106. 
107.     def test_aggregate_in_order_by(self):
108.         msg = (
109.             'Using an aggregate in order_by() without also including it in '
110.             'annotate() is not allowed: Avg(F(book__rating)'
111.         )
112.         with self.assertRaisesMessage(FieldError, msg):
113.             Author.objects.values('age').order_by(Avg('book__rating'))
114. 
115.     def test_single_aggregate(self):
116.         vals = Author.objects.aggregate(Avg("age"))
117.         self.assertEqual(vals, {"age__avg": Approximate(37.4, places=1)})
118. 
119.     def test_multiple_aggregates(self):
120.         vals = Author.objects.aggregate(Sum("age"), Avg("age"))
121.         self.assertEqual(vals, {"age__sum": 337, "age__avg": Approximate(37.4, places=1)})
122. 
123.     def test_filter_aggregate(self):
124.         vals = Author.objects.filter(age__gt=29).aggregate(Sum("age"))
125.         self.assertEqual(vals, {'age__sum': 254})
126. 
127.     def test_related_aggregate(self):
128.         vals = Author.objects.aggregate(Avg("friends__age"))
129.         self.assertEqual(vals, {'friends__age__avg': Approximate(34.07, places=2)})
130. 
131.         vals = Book.objects.filter(rating__lt=4.5).aggregate(Avg("authors__age"))
132.         self.assertEqual(vals, {'authors__age__avg': Approximate(38.2857, places=2)})
133. 
134.         vals = Author.objects.all().filter(name__contains="a").aggregate(Avg("book__rating"))
135.         self.assertEqual(vals, {'book__rating__avg': 4.0})
136. 
137.         vals = Book.objects.aggregate(Sum("publisher__num_awards"))
138.         self.assertEqual(vals, {'publisher__num_awards__sum': 30})
139. 
140.         vals = Publisher.objects.aggregate(Sum("book__price"))
141.         self.assertEqual(vals, {'book__price__sum': Decimal('270.27')})
142. 
143.     def test_aggregate_multi_join(self):
144.         vals = Store.objects.aggregate(Max("books__authors__age"))
145.         self.assertEqual(vals, {'books__authors__age__max': 57})
146. 
147.         vals = Author.objects.aggregate(Min("book__publisher__num_awards"))
148.         self.assertEqual(vals, {'book__publisher__num_awards__min': 1})
149. 
150.     def test_aggregate_alias(self):
151.         vals = Store.objects.filter(name="Amazon.com").aggregate(amazon_mean=Avg("books__rating"))
152.         self.assertEqual(vals, {'amazon_mean': Approximate(4.08, places=2)})
153. 
154.     def test_annotate_basic(self):
155.         self.assertQuerysetEqual(
156.             Book.objects.annotate().order_by('pk'), [
157.                 "The Definitive Guide to Django: Web Development Done Right",
158.                 "Sams Teach Yourself Django in 24 Hours",
159.                 "Practical Django Projects",
160.                 "Python Web Development with Django",
161.                 "Artificial Intelligence: A Modern Approach",
162.                 "Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp"
163.             ],
164.             lambda b: b.name
165.         )
166. 
167.         books = Book.objects.annotate(mean_age=Avg("authors__age"))
168.         b = books.get(pk=self.b1.pk)
169.         self.assertEqual(
170.             b.name,
171.             'The Definitive Guide to Django: Web Development Done Right'
172.         )
173.         self.assertEqual(b.mean_age, 34.5)
174. 
175.     def test_annotate_defer(self):
176.         qs = Book.objects.annotate(
177.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
178. 
179.         rows = [
180.             (self.b1.id, "159059725", 447, "The Definitive Guide to Django: Web Development Done Right")
181.         ]
182.         self.assertQuerysetEqual(
183.             qs.order_by('pk'), rows,
184.             lambda r: (r.id, r.isbn, r.page_sum, r.name)
185.         )
186. 
187.     def test_annotate_defer_select_related(self):
188.         qs = Book.objects.select_related('contact').annotate(
189.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
190. 
191.         rows = [
192.             (self.b1.id, "159059725", 447, "Adrian Holovaty",
193.              "The Definitive Guide to Django: Web Development Done Right")
194.         ]
195.         self.assertQuerysetEqual(
196.             qs.order_by('pk'), rows,
197.             lambda r: (r.id, r.isbn, r.page_sum, r.contact.name, r.name)
198.         )
199. 
200.     def test_annotate_m2m(self):
201.         books = Book.objects.filter(rating__lt=4.5).annotate(Avg("authors__age")).order_by("name")
202.         self.assertQuerysetEqual(
203.             books, [
204.                 ('Artificial Intelligence: A Modern Approach', 51.5),
205.                 ('Practical Django Projects', 29.0),
206.                 ('Python Web Development with Django', Approximate(30.3, places=1)),
207.                 ('Sams Teach Yourself Django in 24 Hours', 45.0)
208.             ],
209.             lambda b: (b.name, b.authors__age__avg),
210.         )
211. 
212.         books = Book.objects.annotate(num_authors=Count("authors")).order_by("name")
213.         self.assertQuerysetEqual(
214.             books, [
215.                 ('Artificial Intelligence: A Modern Approach', 2),
216.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
217.                 ('Practical Django Projects', 1),
218.                 ('Python Web Development with Django', 3),
219.                 ('Sams Teach Yourself Django in 24 Hours', 1),
220.                 ('The Definitive Guide to Django: Web Development Done Right', 2)
221.             ],
222.             lambda b: (b.name, b.num_authors)
223.         )
224. 
225.     def test_backwards_m2m_annotate(self):
226.         authors = Author.objects.filter(name__contains="a").annotate(Avg("book__rating")).order_by("name")
227.         self.assertQuerysetEqual(
228.             authors, [
229.                 ('Adrian Holovaty', 4.5),
230.                 ('Brad Dayley', 3.0),
231.                 ('Jacob Kaplan-Moss', 4.5),
232.                 ('James Bennett', 4.0),
233.                 ('Paul Bissex', 4.0),
234.                 ('Stuart Russell', 4.0)
235.             ],
236.             lambda a: (a.name, a.book__rating__avg)
237.         )
238. 
239.         authors = Author.objects.annotate(num_books=Count("book")).order_by("name")
240.         self.assertQuerysetEqual(
241.             authors, [
242.                 ('Adrian Holovaty', 1),
243.                 ('Brad Dayley', 1),
244.                 ('Jacob Kaplan-Moss', 1),
245.                 ('James Bennett', 1),
246.                 ('Jeffrey Forcier', 1),
247.                 ('Paul Bissex', 1),
248.                 ('Peter Norvig', 2),
249.                 ('Stuart Russell', 1),
250.                 ('Wesley J. Chun', 1)
251.             ],
252.             lambda a: (a.name, a.num_books)
253.         )
254. 
255.     def test_reverse_fkey_annotate(self):
256.         books = Book.objects.annotate(Sum("publisher__num_awards")).order_by("name")
257.         self.assertQuerysetEqual(
258.             books, [
259.                 ('Artificial Intelligence: A Modern Approach', 7),
260.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 9),
261.                 ('Practical Django Projects', 3),
262.                 ('Python Web Development with Django', 7),
263.                 ('Sams Teach Yourself Django in 24 Hours', 1),
264.                 ('The Definitive Guide to Django: Web Development Done Right', 3)
265.             ],
266.             lambda b: (b.name, b.publisher__num_awards__sum)
267.         )
268. 
269.         publishers = Publisher.objects.annotate(Sum("book__price")).order_by("name")
270.         self.assertQuerysetEqual(
271.             publishers, [
272.                 ('Apress', Decimal("59.69")),
273.                 ("Jonno's House of Books", None),
274.                 ('Morgan Kaufmann', Decimal("75.00")),
275.                 ('Prentice Hall', Decimal("112.49")),
276.                 ('Sams', Decimal("23.09"))
277.             ],
278.             lambda p: (p.name, p.book__price__sum)
279.         )
280. 
281.     def test_annotate_values(self):
282.         books = list(Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values())
283.         self.assertEqual(
284.             books, [
285.                 {
286.                     "contact_id": self.a1.id,
287.                     "id": self.b1.id,
288.                     "isbn": "159059725",
289.                     "mean_age": 34.5,
290.                     "name": "The Definitive Guide to Django: Web Development Done Right",
291.                     "pages": 447,
292.                     "price": Approximate(Decimal("30")),
293.                     "pubdate": datetime.date(2007, 12, 6),
294.                     "publisher_id": self.p1.id,
295.                     "rating": 4.5,
296.                 }
297.             ]
298.         )
299. 
300.         books = (
301.             Book.objects
302.             .filter(pk=self.b1.pk)
303.             .annotate(mean_age=Avg('authors__age'))
304.             .values('pk', 'isbn', 'mean_age')
305.         )
306.         self.assertEqual(
307.             list(books), [
308.                 {
309.                     "pk": self.b1.pk,
310.                     "isbn": "159059725",
311.                     "mean_age": 34.5,
312.                 }
313.             ]
314.         )
315. 
316.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values("name")
317.         self.assertEqual(
318.             list(books),
319.             [{'name': 'The Definitive Guide to Django: Web Development Done Right'}],
320.         )
321. 
322.         books = Book.objects.filter(pk=self.b1.pk).values().annotate(mean_age=Avg('authors__age'))
323.         self.assertEqual(
324.             list(books), [
325.                 {
326.                     "contact_id": self.a1.id,
327.                     "id": self.b1.id,
328.                     "isbn": "159059725",
329.                     "mean_age": 34.5,
330.                     "name": "The Definitive Guide to Django: Web Development Done Right",
331.                     "pages": 447,
332.                     "price": Approximate(Decimal("30")),
333.                     "pubdate": datetime.date(2007, 12, 6),
334.                     "publisher_id": self.p1.id,
335.                     "rating": 4.5,
336.                 }
337.             ]
338.         )
339. 
340.         books = (
341.             Book.objects
342.             .values("rating")
343.             .annotate(n_authors=Count("authors__id"), mean_age=Avg("authors__age"))
344.             .order_by("rating")
345.         )
346.         self.assertEqual(
347.             list(books), [
348.                 {
349.                     "rating": 3.0,
350.                     "n_authors": 1,
351.                     "mean_age": 45.0,
352.                 },
353.                 {
354.                     "rating": 4.0,
355.                     "n_authors": 6,
356.                     "mean_age": Approximate(37.16, places=1)
357.                 },
358.                 {
359.                     "rating": 4.5,
360.                     "n_authors": 2,
361.                     "mean_age": 34.5,
362.                 },
363.                 {
364.                     "rating": 5.0,
365.                     "n_authors": 1,
366.                     "mean_age": 57.0,
367.                 }
368.             ]
369.         )
370. 
371.         authors = Author.objects.annotate(Avg("friends__age")).order_by("name")
372.         self.assertQuerysetEqual(
373.             authors, [
374.                 ('Adrian Holovaty', 32.0),
375.                 ('Brad Dayley', None),
376.                 ('Jacob Kaplan-Moss', 29.5),
377.                 ('James Bennett', 34.0),
378.                 ('Jeffrey Forcier', 27.0),
379.                 ('Paul Bissex', 31.0),
380.                 ('Peter Norvig', 46.0),
381.                 ('Stuart Russell', 57.0),
382.                 ('Wesley J. Chun', Approximate(33.66, places=1))
383.             ],
384.             lambda a: (a.name, a.friends__age__avg)
385.         )
386. 
387.     def test_count(self):
388.         vals = Book.objects.aggregate(Count("rating"))
389.         self.assertEqual(vals, {"rating__count": 6})
390. 
391.     def test_count_star(self):
392.         with self.assertNumQueries(1) as ctx:
393.             Book.objects.aggregate(n=Count("*"))
394.         sql = ctx.captured_queries[0]['sql']
395.         self.assertIn('SELECT COUNT(*) ', sql)
396. 
397.     def test_count_distinct_expression(self):
398.         aggs = Book.objects.aggregate(
399.             distinct_ratings=Count(Case(When(pages__gt=300, then='rating')), distinct=True),
400.         )
401.         self.assertEqual(aggs['distinct_ratings'], 4)
402. 
403.     def test_distinct_on_aggregate(self):
404.         for aggregate, expected_result in (
405.             (Avg, 4.125),
406.             (Count, 4),
407.             (Sum, 16.5),
408.         ):
409.             with self.subTest(aggregate=aggregate.__name__):
410.                 books = Book.objects.aggregate(ratings=aggregate('rating', distinct=True))
411.                 self.assertEqual(books['ratings'], expected_result)
412. 
413.     def test_non_grouped_annotation_not_in_group_by(self):
414.         """
415.         An annotation not included in values() before an aggregate should be
416.         excluded from the group by clause.
417.         """
418.         qs = (
419.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating')
420.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
421.         )
422.         self.assertEqual(list(qs), [{'rating': 4.0, 'count': 2}])
423. 
424.     def test_grouped_annotation_in_group_by(self):
425.         """
426.         An annotation included in values() before an aggregate should be
427.         included in the group by clause.
428.         """
429.         qs = (
430.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating', 'xprice')
431.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
432.         )
433.         self.assertEqual(
434.             list(qs), [
435.                 {'rating': 4.0, 'count': 1},
436.                 {'rating': 4.0, 'count': 2},
437.             ]
438.         )
439. 
440.     def test_fkey_aggregate(self):
441.         explicit = list(Author.objects.annotate(Count('book__id')))
442.         implicit = list(Author.objects.annotate(Count('book')))
443.         self.assertCountEqual(explicit, implicit)
444. 
445.     def test_annotate_ordering(self):
446.         books = Book.objects.values('rating').annotate(oldest=Max('authors__age')).order_by('oldest', 'rating')
447.         self.assertEqual(
448.             list(books), [
449.                 {'rating': 4.5, 'oldest': 35},
450.                 {'rating': 3.0, 'oldest': 45},
451.                 {'rating': 4.0, 'oldest': 57},
452.                 {'rating': 5.0, 'oldest': 57},
453.             ]
454.         )
455. 
456.         books = Book.objects.values("rating").annotate(oldest=Max("authors__age")).order_by("-oldest", "-rating")
457.         self.assertEqual(
458.             list(books), [
459.                 {'rating': 5.0, 'oldest': 57},
460.                 {'rating': 4.0, 'oldest': 57},
461.                 {'rating': 3.0, 'oldest': 45},
462.                 {'rating': 4.5, 'oldest': 35},
463.             ]
464.         )
465. 
466.     def test_aggregate_annotation(self):
467.         vals = Book.objects.annotate(num_authors=Count("authors__id")).aggregate(Avg("num_authors"))
468.         self.assertEqual(vals, {"num_authors__avg": Approximate(1.66, places=1)})
469. 
470.     def test_avg_duration_field(self):
471.         # Explicit `output_field`.
472.         self.assertEqual(
473.             Publisher.objects.aggregate(Avg('duration', output_field=DurationField())),
474.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
475.         )
476.         # Implicit `output_field`.
477.         self.assertEqual(
478.             Publisher.objects.aggregate(Avg('duration')),
479.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
480.         )
481. 
482.     def test_sum_duration_field(self):
483.         self.assertEqual(
484.             Publisher.objects.aggregate(Sum('duration', output_field=DurationField())),
485.             {'duration__sum': datetime.timedelta(days=3)}
486.         )
487. 
488.     def test_sum_distinct_aggregate(self):
489.         """
490.         Sum on a distinct() QuerySet should aggregate only the distinct items.
491.         """
492.         authors = Author.objects.filter(book__in=[self.b5, self.b6])
493.         self.assertEqual(authors.count(), 3)
494. 
495.         distinct_authors = authors.distinct()
496.         self.assertEqual(distinct_authors.count(), 2)
497. 
498.         # Selected author ages are 57 and 46
499.         age_sum = distinct_authors.aggregate(Sum('age'))
500.         self.assertEqual(age_sum['age__sum'], 103)


File: tests/aggregation/tests.py
Line number range: 20 - 1317
Content:
20. class AggregateTestCase(TestCase):
21. 
22.     @classmethod
23.     def setUpTestData(cls):
24.         cls.a1 = Author.objects.create(name='Adrian Holovaty', age=34)
25.         cls.a2 = Author.objects.create(name='Jacob Kaplan-Moss', age=35)
26.         cls.a3 = Author.objects.create(name='Brad Dayley', age=45)
27.         cls.a4 = Author.objects.create(name='James Bennett', age=29)
28.         cls.a5 = Author.objects.create(name='Jeffrey Forcier', age=37)
29.         cls.a6 = Author.objects.create(name='Paul Bissex', age=29)
30.         cls.a7 = Author.objects.create(name='Wesley J. Chun', age=25)
31.         cls.a8 = Author.objects.create(name='Peter Norvig', age=57)
32.         cls.a9 = Author.objects.create(name='Stuart Russell', age=46)
33.         cls.a1.friends.add(cls.a2, cls.a4)
34.         cls.a2.friends.add(cls.a1, cls.a7)
35.         cls.a4.friends.add(cls.a1)
36.         cls.a5.friends.add(cls.a6, cls.a7)
37.         cls.a6.friends.add(cls.a5, cls.a7)
38.         cls.a7.friends.add(cls.a2, cls.a5, cls.a6)
39.         cls.a8.friends.add(cls.a9)
40.         cls.a9.friends.add(cls.a8)
41. 
42.         cls.p1 = Publisher.objects.create(name='Apress', num_awards=3, duration=datetime.timedelta(days=1))
43.         cls.p2 = Publisher.objects.create(name='Sams', num_awards=1, duration=datetime.timedelta(days=2))
44.         cls.p3 = Publisher.objects.create(name='Prentice Hall', num_awards=7)
45.         cls.p4 = Publisher.objects.create(name='Morgan Kaufmann', num_awards=9)
46.         cls.p5 = Publisher.objects.create(name="Jonno's House of Books", num_awards=0)
47. 
48.         cls.b1 = Book.objects.create(
49.             isbn='159059725', name='The Definitive Guide to Django: Web Development Done Right',
50.             pages=447, rating=4.5, price=Decimal('30.00'), contact=cls.a1, publisher=cls.p1,
51.             pubdate=datetime.date(2007, 12, 6)
52.         )
53.         cls.b2 = Book.objects.create(
54.             isbn='067232959', name='Sams Teach Yourself Django in 24 Hours',
55.             pages=528, rating=3.0, price=Decimal('23.09'), contact=cls.a3, publisher=cls.p2,
56.             pubdate=datetime.date(2008, 3, 3)
57.         )
58.         cls.b3 = Book.objects.create(
59.             isbn='159059996', name='Practical Django Projects',
60.             pages=300, rating=4.0, price=Decimal('29.69'), contact=cls.a4, publisher=cls.p1,
61.             pubdate=datetime.date(2008, 6, 23)
62.         )
63.         cls.b4 = Book.objects.create(
64.             isbn='013235613', name='Python Web Development with Django',
65.             pages=350, rating=4.0, price=Decimal('29.69'), contact=cls.a5, publisher=cls.p3,
66.             pubdate=datetime.date(2008, 11, 3)
67.         )
68.         cls.b5 = Book.objects.create(
69.             isbn='013790395', name='Artificial Intelligence: A Modern Approach',
70.             pages=1132, rating=4.0, price=Decimal('82.80'), contact=cls.a8, publisher=cls.p3,
71.             pubdate=datetime.date(1995, 1, 15)
72.         )
73.         cls.b6 = Book.objects.create(
74.             isbn='155860191', name='Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp',
75.             pages=946, rating=5.0, price=Decimal('75.00'), contact=cls.a8, publisher=cls.p4,
76.             pubdate=datetime.date(1991, 10, 15)
77.         )
78.         cls.b1.authors.add(cls.a1, cls.a2)
79.         cls.b2.authors.add(cls.a3)
80.         cls.b3.authors.add(cls.a4)
81.         cls.b4.authors.add(cls.a5, cls.a6, cls.a7)
82.         cls.b5.authors.add(cls.a8, cls.a9)
83.         cls.b6.authors.add(cls.a8)
84. 
85.         s1 = Store.objects.create(
86.             name='Amazon.com',
87.             original_opening=datetime.datetime(1994, 4, 23, 9, 17, 42),
88.             friday_night_closing=datetime.time(23, 59, 59)
89.         )
90.         s2 = Store.objects.create(
91.             name='Books.com',
92.             original_opening=datetime.datetime(2001, 3, 15, 11, 23, 37),
93.             friday_night_closing=datetime.time(23, 59, 59)
94.         )
95.         s3 = Store.objects.create(
96.             name="Mamma and Pappa's Books",
97.             original_opening=datetime.datetime(1945, 4, 25, 16, 24, 14),
98.             friday_night_closing=datetime.time(21, 30)
99.         )
100.         s1.books.add(cls.b1, cls.b2, cls.b3, cls.b4, cls.b5, cls.b6)
101.         s2.books.add(cls.b1, cls.b3, cls.b5, cls.b6)
102.         s3.books.add(cls.b3, cls.b4, cls.b6)
103. 
104.     def test_empty_aggregate(self):
105.         self.assertEqual(Author.objects.all().aggregate(), {})
106. 
107.     def test_aggregate_in_order_by(self):
108.         msg = (
109.             'Using an aggregate in order_by() without also including it in '
110.             'annotate() is not allowed: Avg(F(book__rating)'
111.         )
112.         with self.assertRaisesMessage(FieldError, msg):
113.             Author.objects.values('age').order_by(Avg('book__rating'))
114. 
115.     def test_single_aggregate(self):
116.         vals = Author.objects.aggregate(Avg("age"))
117.         self.assertEqual(vals, {"age__avg": Approximate(37.4, places=1)})
118. 
119.     def test_multiple_aggregates(self):
120.         vals = Author.objects.aggregate(Sum("age"), Avg("age"))
121.         self.assertEqual(vals, {"age__sum": 337, "age__avg": Approximate(37.4, places=1)})
122. 
123.     def test_filter_aggregate(self):
124.         vals = Author.objects.filter(age__gt=29).aggregate(Sum("age"))
125.         self.assertEqual(vals, {'age__sum': 254})
126. 
127.     def test_related_aggregate(self):
128.         vals = Author.objects.aggregate(Avg("friends__age"))
129.         self.assertEqual(vals, {'friends__age__avg': Approximate(34.07, places=2)})
130. 
131.         vals = Book.objects.filter(rating__lt=4.5).aggregate(Avg("authors__age"))
132.         self.assertEqual(vals, {'authors__age__avg': Approximate(38.2857, places=2)})
133. 
134.         vals = Author.objects.all().filter(name__contains="a").aggregate(Avg("book__rating"))
135.         self.assertEqual(vals, {'book__rating__avg': 4.0})
136. 
137.         vals = Book.objects.aggregate(Sum("publisher__num_awards"))
138.         self.assertEqual(vals, {'publisher__num_awards__sum': 30})
139. 
140.         vals = Publisher.objects.aggregate(Sum("book__price"))
141.         self.assertEqual(vals, {'book__price__sum': Decimal('270.27')})
142. 
143.     def test_aggregate_multi_join(self):
144.         vals = Store.objects.aggregate(Max("books__authors__age"))
145.         self.assertEqual(vals, {'books__authors__age__max': 57})
146. 
147.         vals = Author.objects.aggregate(Min("book__publisher__num_awards"))
148.         self.assertEqual(vals, {'book__publisher__num_awards__min': 1})
149. 
150.     def test_aggregate_alias(self):
151.         vals = Store.objects.filter(name="Amazon.com").aggregate(amazon_mean=Avg("books__rating"))
152.         self.assertEqual(vals, {'amazon_mean': Approximate(4.08, places=2)})
153. 
154.     def test_annotate_basic(self):
155.         self.assertQuerysetEqual(
156.             Book.objects.annotate().order_by('pk'), [
157.                 "The Definitive Guide to Django: Web Development Done Right",
158.                 "Sams Teach Yourself Django in 24 Hours",
159.                 "Practical Django Projects",
160.                 "Python Web Development with Django",
161.                 "Artificial Intelligence: A Modern Approach",
162.                 "Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp"
163.             ],
164.             lambda b: b.name
165.         )
166. 
167.         books = Book.objects.annotate(mean_age=Avg("authors__age"))
168.         b = books.get(pk=self.b1.pk)
169.         self.assertEqual(
170.             b.name,
171.             'The Definitive Guide to Django: Web Development Done Right'
172.         )
173.         self.assertEqual(b.mean_age, 34.5)
174. 
175.     def test_annotate_defer(self):
176.         qs = Book.objects.annotate(
177.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
178. 
179.         rows = [
180.             (self.b1.id, "159059725", 447, "The Definitive Guide to Django: Web Development Done Right")
181.         ]
182.         self.assertQuerysetEqual(
183.             qs.order_by('pk'), rows,
184.             lambda r: (r.id, r.isbn, r.page_sum, r.name)
185.         )
186. 
187.     def test_annotate_defer_select_related(self):
188.         qs = Book.objects.select_related('contact').annotate(
189.             page_sum=Sum("pages")).defer('name').filter(pk=self.b1.pk)
190. 
191.         rows = [
192.             (self.b1.id, "159059725", 447, "Adrian Holovaty",
193.              "The Definitive Guide to Django: Web Development Done Right")
194.         ]
195.         self.assertQuerysetEqual(
196.             qs.order_by('pk'), rows,
197.             lambda r: (r.id, r.isbn, r.page_sum, r.contact.name, r.name)
198.         )
199. 
200.     def test_annotate_m2m(self):
201.         books = Book.objects.filter(rating__lt=4.5).annotate(Avg("authors__age")).order_by("name")
202.         self.assertQuerysetEqual(
203.             books, [
204.                 ('Artificial Intelligence: A Modern Approach', 51.5),
205.                 ('Practical Django Projects', 29.0),
206.                 ('Python Web Development with Django', Approximate(30.3, places=1)),
207.                 ('Sams Teach Yourself Django in 24 Hours', 45.0)
208.             ],
209.             lambda b: (b.name, b.authors__age__avg),
210.         )
211. 
212.         books = Book.objects.annotate(num_authors=Count("authors")).order_by("name")
213.         self.assertQuerysetEqual(
214.             books, [
215.                 ('Artificial Intelligence: A Modern Approach', 2),
216.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 1),
217.                 ('Practical Django Projects', 1),
218.                 ('Python Web Development with Django', 3),
219.                 ('Sams Teach Yourself Django in 24 Hours', 1),
220.                 ('The Definitive Guide to Django: Web Development Done Right', 2)
221.             ],
222.             lambda b: (b.name, b.num_authors)
223.         )
224. 
225.     def test_backwards_m2m_annotate(self):
226.         authors = Author.objects.filter(name__contains="a").annotate(Avg("book__rating")).order_by("name")
227.         self.assertQuerysetEqual(
228.             authors, [
229.                 ('Adrian Holovaty', 4.5),
230.                 ('Brad Dayley', 3.0),
231.                 ('Jacob Kaplan-Moss', 4.5),
232.                 ('James Bennett', 4.0),
233.                 ('Paul Bissex', 4.0),
234.                 ('Stuart Russell', 4.0)
235.             ],
236.             lambda a: (a.name, a.book__rating__avg)
237.         )
238. 
239.         authors = Author.objects.annotate(num_books=Count("book")).order_by("name")
240.         self.assertQuerysetEqual(
241.             authors, [
242.                 ('Adrian Holovaty', 1),
243.                 ('Brad Dayley', 1),
244.                 ('Jacob Kaplan-Moss', 1),
245.                 ('James Bennett', 1),
246.                 ('Jeffrey Forcier', 1),
247.                 ('Paul Bissex', 1),
248.                 ('Peter Norvig', 2),
249.                 ('Stuart Russell', 1),
250.                 ('Wesley J. Chun', 1)
251.             ],
252.             lambda a: (a.name, a.num_books)
253.         )
254. 
255.     def test_reverse_fkey_annotate(self):
256.         books = Book.objects.annotate(Sum("publisher__num_awards")).order_by("name")
257.         self.assertQuerysetEqual(
258.             books, [
259.                 ('Artificial Intelligence: A Modern Approach', 7),
260.                 ('Paradigms of Artificial Intelligence Programming: Case Studies in Common Lisp', 9),
261.                 ('Practical Django Projects', 3),
262.                 ('Python Web Development with Django', 7),
263.                 ('Sams Teach Yourself Django in 24 Hours', 1),
264.                 ('The Definitive Guide to Django: Web Development Done Right', 3)
265.             ],
266.             lambda b: (b.name, b.publisher__num_awards__sum)
267.         )
268. 
269.         publishers = Publisher.objects.annotate(Sum("book__price")).order_by("name")
270.         self.assertQuerysetEqual(
271.             publishers, [
272.                 ('Apress', Decimal("59.69")),
273.                 ("Jonno's House of Books", None),
274.                 ('Morgan Kaufmann', Decimal("75.00")),
275.                 ('Prentice Hall', Decimal("112.49")),
276.                 ('Sams', Decimal("23.09"))
277.             ],
278.             lambda p: (p.name, p.book__price__sum)
279.         )
280. 
281.     def test_annotate_values(self):
282.         books = list(Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values())
283.         self.assertEqual(
284.             books, [
285.                 {
286.                     "contact_id": self.a1.id,
287.                     "id": self.b1.id,
288.                     "isbn": "159059725",
289.                     "mean_age": 34.5,
290.                     "name": "The Definitive Guide to Django: Web Development Done Right",
291.                     "pages": 447,
292.                     "price": Approximate(Decimal("30")),
293.                     "pubdate": datetime.date(2007, 12, 6),
294.                     "publisher_id": self.p1.id,
295.                     "rating": 4.5,
296.                 }
297.             ]
298.         )
299. 
300.         books = (
301.             Book.objects
302.             .filter(pk=self.b1.pk)
303.             .annotate(mean_age=Avg('authors__age'))
304.             .values('pk', 'isbn', 'mean_age')
305.         )
306.         self.assertEqual(
307.             list(books), [
308.                 {
309.                     "pk": self.b1.pk,
310.                     "isbn": "159059725",
311.                     "mean_age": 34.5,
312.                 }
313.             ]
314.         )
315. 
316.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values("name")
317.         self.assertEqual(
318.             list(books),
319.             [{'name': 'The Definitive Guide to Django: Web Development Done Right'}],
320.         )
321. 
322.         books = Book.objects.filter(pk=self.b1.pk).values().annotate(mean_age=Avg('authors__age'))
323.         self.assertEqual(
324.             list(books), [
325.                 {
326.                     "contact_id": self.a1.id,
327.                     "id": self.b1.id,
328.                     "isbn": "159059725",
329.                     "mean_age": 34.5,
330.                     "name": "The Definitive Guide to Django: Web Development Done Right",
331.                     "pages": 447,
332.                     "price": Approximate(Decimal("30")),
333.                     "pubdate": datetime.date(2007, 12, 6),
334.                     "publisher_id": self.p1.id,
335.                     "rating": 4.5,
336.                 }
337.             ]
338.         )
339. 
340.         books = (
341.             Book.objects
342.             .values("rating")
343.             .annotate(n_authors=Count("authors__id"), mean_age=Avg("authors__age"))
344.             .order_by("rating")
345.         )
346.         self.assertEqual(
347.             list(books), [
348.                 {
349.                     "rating": 3.0,
350.                     "n_authors": 1,
351.                     "mean_age": 45.0,
352.                 },
353.                 {
354.                     "rating": 4.0,
355.                     "n_authors": 6,
356.                     "mean_age": Approximate(37.16, places=1)
357.                 },
358.                 {
359.                     "rating": 4.5,
360.                     "n_authors": 2,
361.                     "mean_age": 34.5,
362.                 },
363.                 {
364.                     "rating": 5.0,
365.                     "n_authors": 1,
366.                     "mean_age": 57.0,
367.                 }
368.             ]
369.         )
370. 
371.         authors = Author.objects.annotate(Avg("friends__age")).order_by("name")
372.         self.assertQuerysetEqual(
373.             authors, [
374.                 ('Adrian Holovaty', 32.0),
375.                 ('Brad Dayley', None),
376.                 ('Jacob Kaplan-Moss', 29.5),
377.                 ('James Bennett', 34.0),
378.                 ('Jeffrey Forcier', 27.0),
379.                 ('Paul Bissex', 31.0),
380.                 ('Peter Norvig', 46.0),
381.                 ('Stuart Russell', 57.0),
382.                 ('Wesley J. Chun', Approximate(33.66, places=1))
383.             ],
384.             lambda a: (a.name, a.friends__age__avg)
385.         )
386. 
387.     def test_count(self):
388.         vals = Book.objects.aggregate(Count("rating"))
389.         self.assertEqual(vals, {"rating__count": 6})
390. 
391.     def test_count_star(self):
392.         with self.assertNumQueries(1) as ctx:
393.             Book.objects.aggregate(n=Count("*"))
394.         sql = ctx.captured_queries[0]['sql']
395.         self.assertIn('SELECT COUNT(*) ', sql)
396. 
397.     def test_count_distinct_expression(self):
398.         aggs = Book.objects.aggregate(
399.             distinct_ratings=Count(Case(When(pages__gt=300, then='rating')), distinct=True),
400.         )
401.         self.assertEqual(aggs['distinct_ratings'], 4)
402. 
403.     def test_distinct_on_aggregate(self):
404.         for aggregate, expected_result in (
405.             (Avg, 4.125),
406.             (Count, 4),
407.             (Sum, 16.5),
408.         ):
409.             with self.subTest(aggregate=aggregate.__name__):
410.                 books = Book.objects.aggregate(ratings=aggregate('rating', distinct=True))
411.                 self.assertEqual(books['ratings'], expected_result)
412. 
413.     def test_non_grouped_annotation_not_in_group_by(self):
414.         """
415.         An annotation not included in values() before an aggregate should be
416.         excluded from the group by clause.
417.         """
418.         qs = (
419.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating')
420.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
421.         )
422.         self.assertEqual(list(qs), [{'rating': 4.0, 'count': 2}])
423. 
424.     def test_grouped_annotation_in_group_by(self):
425.         """
426.         An annotation included in values() before an aggregate should be
427.         included in the group by clause.
428.         """
429.         qs = (
430.             Book.objects.annotate(xprice=F('price')).filter(rating=4.0).values('rating', 'xprice')
431.                 .annotate(count=Count('publisher_id', distinct=True)).values('count', 'rating').order_by('count')
432.         )
433.         self.assertEqual(
434.             list(qs), [
435.                 {'rating': 4.0, 'count': 1},
436.                 {'rating': 4.0, 'count': 2},
437.             ]
438.         )
439. 
440.     def test_fkey_aggregate(self):
441.         explicit = list(Author.objects.annotate(Count('book__id')))
442.         implicit = list(Author.objects.annotate(Count('book')))
443.         self.assertCountEqual(explicit, implicit)
444. 
445.     def test_annotate_ordering(self):
446.         books = Book.objects.values('rating').annotate(oldest=Max('authors__age')).order_by('oldest', 'rating')
447.         self.assertEqual(
448.             list(books), [
449.                 {'rating': 4.5, 'oldest': 35},
450.                 {'rating': 3.0, 'oldest': 45},
451.                 {'rating': 4.0, 'oldest': 57},
452.                 {'rating': 5.0, 'oldest': 57},
453.             ]
454.         )
455. 
456.         books = Book.objects.values("rating").annotate(oldest=Max("authors__age")).order_by("-oldest", "-rating")
457.         self.assertEqual(
458.             list(books), [
459.                 {'rating': 5.0, 'oldest': 57},
460.                 {'rating': 4.0, 'oldest': 57},
461.                 {'rating': 3.0, 'oldest': 45},
462.                 {'rating': 4.5, 'oldest': 35},
463.             ]
464.         )
465. 
466.     def test_aggregate_annotation(self):
467.         vals = Book.objects.annotate(num_authors=Count("authors__id")).aggregate(Avg("num_authors"))
468.         self.assertEqual(vals, {"num_authors__avg": Approximate(1.66, places=1)})
469. 
470.     def test_avg_duration_field(self):
471.         # Explicit `output_field`.
472.         self.assertEqual(
473.             Publisher.objects.aggregate(Avg('duration', output_field=DurationField())),
474.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
475.         )
476.         # Implicit `output_field`.
477.         self.assertEqual(
478.             Publisher.objects.aggregate(Avg('duration')),
479.             {'duration__avg': datetime.timedelta(days=1, hours=12)}
480.         )
481. 
482.     def test_sum_duration_field(self):
483.         self.assertEqual(
484.             Publisher.objects.aggregate(Sum('duration', output_field=DurationField())),
485.             {'duration__sum': datetime.timedelta(days=3)}
486.         )
487. 
488.     def test_sum_distinct_aggregate(self):
489.         """
490.         Sum on a distinct() QuerySet should aggregate only the distinct items.
491.         """
492.         authors = Author.objects.filter(book__in=[self.b5, self.b6])
493.         self.assertEqual(authors.count(), 3)
494. 
495.         distinct_authors = authors.distinct()
496.         self.assertEqual(distinct_authors.count(), 2)
497. 
498.         # Selected author ages are 57 and 46
499.         age_sum = distinct_authors.aggregate(Sum('age'))
500.         self.assertEqual(age_sum['age__sum'], 103)
501. 
502.     def test_filtering(self):
503.         p = Publisher.objects.create(name='Expensive Publisher', num_awards=0)
504.         Book.objects.create(
505.             name='ExpensiveBook1',
506.             pages=1,
507.             isbn='111',
508.             rating=3.5,
509.             price=Decimal("1000"),
510.             publisher=p,
511.             contact_id=self.a1.id,
512.             pubdate=datetime.date(2008, 12, 1)
513.         )
514.         Book.objects.create(
515.             name='ExpensiveBook2',
516.             pages=1,
517.             isbn='222',
518.             rating=4.0,
519.             price=Decimal("1000"),
520.             publisher=p,
521.             contact_id=self.a1.id,
522.             pubdate=datetime.date(2008, 12, 2)
523.         )
524.         Book.objects.create(
525.             name='ExpensiveBook3',
526.             pages=1,
527.             isbn='333',
528.             rating=4.5,
529.             price=Decimal("35"),
530.             publisher=p,
531.             contact_id=self.a1.id,
532.             pubdate=datetime.date(2008, 12, 3)
533.         )
534. 
535.         publishers = Publisher.objects.annotate(num_books=Count("book__id")).filter(num_books__gt=1).order_by("pk")
536.         self.assertQuerysetEqual(
537.             publishers,
538.             ['Apress', 'Prentice Hall', 'Expensive Publisher'],
539.             lambda p: p.name,
540.         )
541. 
542.         publishers = Publisher.objects.filter(book__price__lt=Decimal("40.0")).order_by("pk")
543.         self.assertQuerysetEqual(
544.             publishers, [
545.                 "Apress",
546.                 "Apress",
547.                 "Sams",
548.                 "Prentice Hall",
549.                 "Expensive Publisher",
550.             ],
551.             lambda p: p.name
552.         )
553. 
554.         publishers = (
555.             Publisher.objects
556.             .annotate(num_books=Count("book__id"))
557.             .filter(num_books__gt=1, book__price__lt=Decimal("40.0"))
558.             .order_by("pk")
559.         )
560.         self.assertQuerysetEqual(
561.             publishers,
562.             ['Apress', 'Prentice Hall', 'Expensive Publisher'],
563.             lambda p: p.name,
564.         )
565. 
566.         publishers = (
567.             Publisher.objects
568.             .filter(book__price__lt=Decimal("40.0"))
569.             .annotate(num_books=Count("book__id"))
570.             .filter(num_books__gt=1)
571.             .order_by("pk")
572.         )
573.         self.assertQuerysetEqual(publishers, ['Apress'], lambda p: p.name)
574. 
575.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__range=[1, 3]).order_by("pk")
576.         self.assertQuerysetEqual(
577.             publishers, [
578.                 "Apress",
579.                 "Sams",
580.                 "Prentice Hall",
581.                 "Morgan Kaufmann",
582.                 "Expensive Publisher",
583.             ],
584.             lambda p: p.name
585.         )
586. 
587.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__range=[1, 2]).order_by("pk")
588.         self.assertQuerysetEqual(
589.             publishers,
590.             ['Apress', 'Sams', 'Prentice Hall', 'Morgan Kaufmann'],
591.             lambda p: p.name
592.         )
593. 
594.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__in=[1, 3]).order_by("pk")
595.         self.assertQuerysetEqual(
596.             publishers,
597.             ['Sams', 'Morgan Kaufmann', 'Expensive Publisher'],
598.             lambda p: p.name,
599.         )
600. 
601.         publishers = Publisher.objects.annotate(num_books=Count("book")).filter(num_books__isnull=True)
602.         self.assertEqual(len(publishers), 0)
603. 
604.     def test_annotation(self):
605.         vals = Author.objects.filter(pk=self.a1.pk).aggregate(Count("friends__id"))
606.         self.assertEqual(vals, {"friends__id__count": 2})
607. 
608.         books = Book.objects.annotate(num_authors=Count("authors__name")).filter(num_authors__exact=2).order_by("pk")
609.         self.assertQuerysetEqual(
610.             books, [
611.                 "The Definitive Guide to Django: Web Development Done Right",
612.                 "Artificial Intelligence: A Modern Approach",
613.             ],
614.             lambda b: b.name
615.         )
616. 
617.         authors = (
618.             Author.objects
619.             .annotate(num_friends=Count("friends__id", distinct=True))
620.             .filter(num_friends=0)
621.             .order_by("pk")
622.         )
623.         self.assertQuerysetEqual(authors, ['Brad Dayley'], lambda a: a.name)
624. 
625.         publishers = Publisher.objects.annotate(num_books=Count("book__id")).filter(num_books__gt=1).order_by("pk")
626.         self.assertQuerysetEqual(publishers, ['Apress', 'Prentice Hall'], lambda p: p.name)
627. 
628.         publishers = (
629.             Publisher.objects
630.             .filter(book__price__lt=Decimal("40.0"))
631.             .annotate(num_books=Count("book__id"))
632.             .filter(num_books__gt=1)
633.         )
634.         self.assertQuerysetEqual(publishers, ['Apress'], lambda p: p.name)
635. 
636.         books = (
637.             Book.objects
638.             .annotate(num_authors=Count("authors__id"))
639.             .filter(authors__name__contains="Norvig", num_authors__gt=1)
640.         )
641.         self.assertQuerysetEqual(
642.             books,
643.             ['Artificial Intelligence: A Modern Approach'],
644.             lambda b: b.name
645.         )
646. 
647.     def test_more_aggregation(self):
648.         a = Author.objects.get(name__contains='Norvig')
649.         b = Book.objects.get(name__contains='Done Right')
650.         b.authors.add(a)
651.         b.save()
652. 
653.         vals = (
654.             Book.objects
655.             .annotate(num_authors=Count("authors__id"))
656.             .filter(authors__name__contains="Norvig", num_authors__gt=1)
657.             .aggregate(Avg("rating"))
658.         )
659.         self.assertEqual(vals, {"rating__avg": 4.25})
660. 
661.     def test_even_more_aggregate(self):
662.         publishers = Publisher.objects.annotate(
663.             earliest_book=Min("book__pubdate"),
664.         ).exclude(earliest_book=None).order_by("earliest_book").values(
665.             'earliest_book',
666.             'num_awards',
667.             'id',
668.             'name',
669.         )
670.         self.assertEqual(
671.             list(publishers), [
672.                 {
673.                     'earliest_book': datetime.date(1991, 10, 15),
674.                     'num_awards': 9,
675.                     'id': self.p4.id,
676.                     'name': 'Morgan Kaufmann'
677.                 },
678.                 {
679.                     'earliest_book': datetime.date(1995, 1, 15),
680.                     'num_awards': 7,
681.                     'id': self.p3.id,
682.                     'name': 'Prentice Hall'
683.                 },
684.                 {
685.                     'earliest_book': datetime.date(2007, 12, 6),
686.                     'num_awards': 3,
687.                     'id': self.p1.id,
688.                     'name': 'Apress'
689.                 },
690.                 {
691.                     'earliest_book': datetime.date(2008, 3, 3),
692.                     'num_awards': 1,
693.                     'id': self.p2.id,
694.                     'name': 'Sams'
695.                 }
696.             ]
697.         )
698. 
699.         vals = Store.objects.aggregate(Max("friday_night_closing"), Min("original_opening"))
700.         self.assertEqual(
701.             vals,
702.             {
703.                 "friday_night_closing__max": datetime.time(23, 59, 59),
704.                 "original_opening__min": datetime.datetime(1945, 4, 25, 16, 24, 14),
705.             }
706.         )
707. 
708.     def test_annotate_values_list(self):
709.         books = (
710.             Book.objects
711.             .filter(pk=self.b1.pk)
712.             .annotate(mean_age=Avg("authors__age"))
713.             .values_list("pk", "isbn", "mean_age")
714.         )
715.         self.assertEqual(list(books), [(self.b1.id, '159059725', 34.5)])
716. 
717.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values_list("isbn")
718.         self.assertEqual(list(books), [('159059725',)])
719. 
720.         books = Book.objects.filter(pk=self.b1.pk).annotate(mean_age=Avg("authors__age")).values_list("mean_age")
721.         self.assertEqual(list(books), [(34.5,)])
722. 
723.         books = (
724.             Book.objects
725.             .filter(pk=self.b1.pk)
726.             .annotate(mean_age=Avg("authors__age"))
727.             .values_list("mean_age", flat=True)
728.         )
729.         self.assertEqual(list(books), [34.5])
730. 
731.         books = Book.objects.values_list("price").annotate(count=Count("price")).order_by("-count", "price")
732.         self.assertEqual(
733.             list(books), [
734.                 (Decimal("29.69"), 2),
735.                 (Decimal('23.09'), 1),
736.                 (Decimal('30'), 1),
737.                 (Decimal('75'), 1),
738.                 (Decimal('82.8'), 1),
739.             ]
740.         )
741. 
742.     def test_dates_with_aggregation(self):
743.         """
744.         .dates() returns a distinct set of dates when applied to a
745.         QuerySet with aggregation.
746. 
747.         Refs #18056. Previously, .dates() would return distinct (date_kind,
748.         aggregation) sets, in this case (year, num_authors), so 2008 would be
749.         returned twice because there are books from 2008 with a different
750.         number of authors.
751.         """
752.         dates = Book.objects.annotate(num_authors=Count("authors")).dates('pubdate', 'year')
753.         self.assertQuerysetEqual(
754.             dates, [
755.                 "datetime.date(1991, 1, 1)",
756.                 "datetime.date(1995, 1, 1)",
757.                 "datetime.date(2007, 1, 1)",
758.                 "datetime.date(2008, 1, 1)"
759.             ]
760.         )
761. 
762.     def test_values_aggregation(self):
763.         # Refs #20782
764.         max_rating = Book.objects.values('rating').aggregate(max_rating=Max('rating'))
765.         self.assertEqual(max_rating['max_rating'], 5)
766.         max_books_per_rating = Book.objects.values('rating').annotate(
767.             books_per_rating=Count('id')
768.         ).aggregate(Max('books_per_rating'))
769.         self.assertEqual(
770.             max_books_per_rating,
771.             {'books_per_rating__max': 3})
772. 
773.     def test_ticket17424(self):
774.         """
775.         Doing exclude() on a foreign model after annotate() doesn't crash.
776.         """
777.         all_books = list(Book.objects.values_list('pk', flat=True).order_by('pk'))
778.         annotated_books = Book.objects.order_by('pk').annotate(one=Count("id"))
779. 
780.         # The value doesn't matter, we just need any negative
781.         # constraint on a related model that's a noop.
782.         excluded_books = annotated_books.exclude(publisher__name="__UNLIKELY_VALUE__")
783. 
784.         # Try to generate query tree
785.         str(excluded_books.query)
786. 
787.         self.assertQuerysetEqual(excluded_books, all_books, lambda x: x.pk)
788. 
789.         # Check internal state
790.         self.assertIsNone(annotated_books.query.alias_map["aggregation_book"].join_type)
791.         self.assertIsNone(excluded_books.query.alias_map["aggregation_book"].join_type)
792. 
793.     def test_ticket12886(self):
794.         """
795.         Aggregation over sliced queryset works correctly.
796.         """
797.         qs = Book.objects.all().order_by('-rating')[0:3]
798.         vals = qs.aggregate(average_top3_rating=Avg('rating'))['average_top3_rating']
799.         self.assertAlmostEqual(vals, 4.5, places=2)
800. 
801.     def test_ticket11881(self):
802.         """
803.         Subqueries do not needlessly contain ORDER BY, SELECT FOR UPDATE or
804.         select_related() stuff.
805.         """
806.         qs = Book.objects.all().select_for_update().order_by(
807.             'pk').select_related('publisher').annotate(max_pk=Max('pk'))
808.         with CaptureQueriesContext(connection) as captured_queries:
809.             qs.aggregate(avg_pk=Avg('max_pk'))
810.             self.assertEqual(len(captured_queries), 1)
811.             qstr = captured_queries[0]['sql'].lower()
812.             self.assertNotIn('for update', qstr)
813.             forced_ordering = connection.ops.force_no_ordering()
814.             if forced_ordering:
815.                 # If the backend needs to force an ordering we make sure it's
816.                 # the only "ORDER BY" clause present in the query.
817.                 self.assertEqual(
818.                     re.findall(r'order by (\w+)', qstr),
819.                     [', '.join(f[1][0] for f in forced_ordering).lower()]
820.                 )
821.             else:
822.                 self.assertNotIn('order by', qstr)
823.             self.assertEqual(qstr.count(' join '), 0)
824. 
825.     def test_decimal_max_digits_has_no_effect(self):
826.         Book.objects.all().delete()
827.         a1 = Author.objects.first()
828.         p1 = Publisher.objects.first()
829.         thedate = timezone.now()
830.         for i in range(10):
831.             Book.objects.create(
832.                 isbn="abcde{}".format(i), name="none", pages=10, rating=4.0,
833.                 price=9999.98, contact=a1, publisher=p1, pubdate=thedate)
834. 
835.         book = Book.objects.aggregate(price_sum=Sum('price'))
836.         self.assertEqual(book['price_sum'], Decimal("99999.80"))
837. 
838.     def test_nonaggregate_aggregation_throws(self):
839.         with self.assertRaisesMessage(TypeError, 'fail is not an aggregate expression'):
840.             Book.objects.aggregate(fail=F('price'))
841. 
842.     def test_nonfield_annotation(self):
843.         book = Book.objects.annotate(val=Max(Value(2))).first()
844.         self.assertEqual(book.val, 2)
845.         book = Book.objects.annotate(val=Max(Value(2), output_field=IntegerField())).first()
846.         self.assertEqual(book.val, 2)
847.         book = Book.objects.annotate(val=Max(2, output_field=IntegerField())).first()
848.         self.assertEqual(book.val, 2)
849. 
850.     def test_annotation_expressions(self):
851.         authors = Author.objects.annotate(combined_ages=Sum(F('age') + F('friends__age'))).order_by('name')
852.         authors2 = Author.objects.annotate(combined_ages=Sum('age') + Sum('friends__age')).order_by('name')
853.         for qs in (authors, authors2):
854.             self.assertQuerysetEqual(
855.                 qs, [
856.                     ('Adrian Holovaty', 132),
857.                     ('Brad Dayley', None),
858.                     ('Jacob Kaplan-Moss', 129),
859.                     ('James Bennett', 63),
860.                     ('Jeffrey Forcier', 128),
861.                     ('Paul Bissex', 120),
862.                     ('Peter Norvig', 103),
863.                     ('Stuart Russell', 103),
864.                     ('Wesley J. Chun', 176)
865.                 ],
866.                 lambda a: (a.name, a.combined_ages)
867.             )
868. 
869.     def test_aggregation_expressions(self):
870.         a1 = Author.objects.aggregate(av_age=Sum('age') / Count('*'))
871.         a2 = Author.objects.aggregate(av_age=Sum('age') / Count('age'))
872.         a3 = Author.objects.aggregate(av_age=Avg('age'))
873.         self.assertEqual(a1, {'av_age': 37})
874.         self.assertEqual(a2, {'av_age': 37})
875.         self.assertEqual(a3, {'av_age': Approximate(37.4, places=1)})
876. 
877.     def test_avg_decimal_field(self):
878.         v = Book.objects.filter(rating=4).aggregate(avg_price=(Avg('price')))['avg_price']
879.         self.assertIsInstance(v, Decimal)
880.         self.assertEqual(v, Approximate(Decimal('47.39'), places=2))
881. 
882.     def test_order_of_precedence(self):
883.         p1 = Book.objects.filter(rating=4).aggregate(avg_price=(Avg('price') + 2) * 3)
884.         self.assertEqual(p1, {'avg_price': Approximate(Decimal('148.18'), places=2)})
885. 
886.         p2 = Book.objects.filter(rating=4).aggregate(avg_price=Avg('price') + 2 * 3)
887.         self.assertEqual(p2, {'avg_price': Approximate(Decimal('53.39'), places=2)})
888. 
889.     def test_combine_different_types(self):
890.         msg = (
891.             'Expression contains mixed types: FloatField, DecimalField. '
892.             'You must set output_field.'
893.         )
894.         qs = Book.objects.annotate(sums=Sum('rating') + Sum('pages') + Sum('price'))
895.         with self.assertRaisesMessage(FieldError, msg):
896.             qs.first()
897.         with self.assertRaisesMessage(FieldError, msg):
898.             qs.first()
899. 
900.         b1 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
901.                                    output_field=IntegerField())).get(pk=self.b4.pk)
902.         self.assertEqual(b1.sums, 383)
903. 
904.         b2 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
905.                                    output_field=FloatField())).get(pk=self.b4.pk)
906.         self.assertEqual(b2.sums, 383.69)
907. 
908.         b3 = Book.objects.annotate(sums=Sum(F('rating') + F('pages') + F('price'),
909.                                    output_field=DecimalField())).get(pk=self.b4.pk)
910.         self.assertEqual(b3.sums, Approximate(Decimal("383.69"), places=2))
911. 
912.     def test_complex_aggregations_require_kwarg(self):
913.         with self.assertRaisesMessage(TypeError, 'Complex annotations require an alias'):
914.             Author.objects.annotate(Sum(F('age') + F('friends__age')))
915.         with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
916.             Author.objects.aggregate(Sum('age') / Count('age'))
917.         with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
918.             Author.objects.aggregate(Sum(1))
919. 
920.     def test_aggregate_over_complex_annotation(self):
921.         qs = Author.objects.annotate(
922.             combined_ages=Sum(F('age') + F('friends__age')))
923. 
924.         age = qs.aggregate(max_combined_age=Max('combined_ages'))
925.         self.assertEqual(age['max_combined_age'], 176)
926. 
927.         age = qs.aggregate(max_combined_age_doubled=Max('combined_ages') * 2)
928.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
929. 
930.         age = qs.aggregate(
931.             max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'))
932.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
933. 
934.         age = qs.aggregate(
935.             max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'),
936.             sum_combined_age=Sum('combined_ages'))
937.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
938.         self.assertEqual(age['sum_combined_age'], 954)
939. 
940.         age = qs.aggregate(
941.             max_combined_age_doubled=Max('combined_ages') + Max('combined_ages'),
942.             sum_combined_age_doubled=Sum('combined_ages') + Sum('combined_ages'))
943.         self.assertEqual(age['max_combined_age_doubled'], 176 * 2)
944.         self.assertEqual(age['sum_combined_age_doubled'], 954 * 2)
945. 
946.     def test_values_annotation_with_expression(self):
947.         # ensure the F() is promoted to the group by clause
948.         qs = Author.objects.values('name').annotate(another_age=Sum('age') + F('age'))
949.         a = qs.get(name="Adrian Holovaty")
950.         self.assertEqual(a['another_age'], 68)
951. 
952.         qs = qs.annotate(friend_count=Count('friends'))
953.         a = qs.get(name="Adrian Holovaty")
954.         self.assertEqual(a['friend_count'], 2)
955. 
956.         qs = qs.annotate(combined_age=Sum('age') + F('friends__age')).filter(
957.             name="Adrian Holovaty").order_by('-combined_age')
958.         self.assertEqual(
959.             list(qs), [
960.                 {
961.                     "name": 'Adrian Holovaty',
962.                     "another_age": 68,
963.                     "friend_count": 1,
964.                     "combined_age": 69
965.                 },
966.                 {
967.                     "name": 'Adrian Holovaty',
968.                     "another_age": 68,
969.                     "friend_count": 1,
970.                     "combined_age": 63
971.                 }
972.             ]
973.         )
974. 
975.         vals = qs.values('name', 'combined_age')
976.         self.assertEqual(
977.             list(vals), [
978.                 {'name': 'Adrian Holovaty', 'combined_age': 69},
979.                 {'name': 'Adrian Holovaty', 'combined_age': 63},
980.             ]
981.         )
982. 
983.     def test_annotate_values_aggregate(self):
984.         alias_age = Author.objects.annotate(
985.             age_alias=F('age')
986.         ).values(
987.             'age_alias',
988.         ).aggregate(sum_age=Sum('age_alias'))
989. 
990.         age = Author.objects.values('age').aggregate(sum_age=Sum('age'))
991. 
992.         self.assertEqual(alias_age['sum_age'], age['sum_age'])
993. 
994.     def test_annotate_over_annotate(self):
995.         author = Author.objects.annotate(
996.             age_alias=F('age')
997.         ).annotate(
998.             sum_age=Sum('age_alias')
999.         ).get(name="Adrian Holovaty")
1000. 
1001.         other_author = Author.objects.annotate(
1002.             sum_age=Sum('age')
1003.         ).get(name="Adrian Holovaty")
1004. 
1005.         self.assertEqual(author.sum_age, other_author.sum_age)
1006. 
1007.     def test_aggregate_over_aggregate(self):
1008.         msg = "Cannot compute Avg('age'): 'age' is an aggregate"
1009.         with self.assertRaisesMessage(FieldError, msg):
1010.             Author.objects.annotate(
1011.                 age_alias=F('age'),
1012.             ).aggregate(
1013.                 age=Sum(F('age')),
1014.                 avg_age=Avg(F('age')),
1015.             )
1016. 
1017.     def test_annotated_aggregate_over_annotated_aggregate(self):
1018.         with self.assertRaisesMessage(FieldError, "Cannot compute Sum('id__max'): 'id__max' is an aggregate"):
1019.             Book.objects.annotate(Max('id')).annotate(Sum('id__max'))
1020. 
1021.         class MyMax(Max):
1022.             def as_sql(self, compiler, connection):
1023.                 self.set_source_expressions(self.get_source_expressions()[0:1])
1024.                 return super().as_sql(compiler, connection)
1025. 
1026.         with self.assertRaisesMessage(FieldError, "Cannot compute Max('id__max'): 'id__max' is an aggregate"):
1027.             Book.objects.annotate(Max('id')).annotate(my_max=MyMax('id__max', 'price'))
1028. 
1029.     def test_multi_arg_aggregate(self):
1030.         class MyMax(Max):
1031.             output_field = DecimalField()
1032. 
1033.             def as_sql(self, compiler, connection):
1034.                 copy = self.copy()
1035.                 copy.set_source_expressions(copy.get_source_expressions()[0:1])
1036.                 return super(MyMax, copy).as_sql(compiler, connection)
1037. 
1038.         with self.assertRaisesMessage(TypeError, 'Complex aggregates require an alias'):
1039.             Book.objects.aggregate(MyMax('pages', 'price'))
1040. 
1041.         with self.assertRaisesMessage(TypeError, 'Complex annotations require an alias'):
1042.             Book.objects.annotate(MyMax('pages', 'price'))
1043. 
1044.         Book.objects.aggregate(max_field=MyMax('pages', 'price'))
1045. 
1046.     def test_add_implementation(self):
1047.         class MySum(Sum):
1048.             pass
1049. 
1050.         # test completely changing how the output is rendered
1051.         def lower_case_function_override(self, compiler, connection):
1052.             sql, params = compiler.compile(self.source_expressions[0])
1053.             substitutions = {'function': self.function.lower(), 'expressions': sql, 'distinct': ''}
1054.             substitutions.update(self.extra)
1055.             return self.template % substitutions, params
1056.         setattr(MySum, 'as_' + connection.vendor, lower_case_function_override)
1057. 
1058.         qs = Book.objects.annotate(
1059.             sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
1060.         )
1061.         self.assertEqual(str(qs.query).count('sum('), 1)
1062.         b1 = qs.get(pk=self.b4.pk)
1063.         self.assertEqual(b1.sums, 383)
1064. 
1065.         # test changing the dict and delegating
1066.         def lower_case_function_super(self, compiler, connection):
1067.             self.extra['function'] = self.function.lower()
1068.             return super(MySum, self).as_sql(compiler, connection)
1069.         setattr(MySum, 'as_' + connection.vendor, lower_case_function_super)
1070. 
1071.         qs = Book.objects.annotate(
1072.             sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
1073.         )
1074.         self.assertEqual(str(qs.query).count('sum('), 1)
1075.         b1 = qs.get(pk=self.b4.pk)
1076.         self.assertEqual(b1.sums, 383)
1077. 
1078.         # test overriding all parts of the template
1079.         def be_evil(self, compiler, connection):
1080.             substitutions = {'function': 'MAX', 'expressions': '2', 'distinct': ''}
1081.             substitutions.update(self.extra)
1082.             return self.template % substitutions, ()
1083.         setattr(MySum, 'as_' + connection.vendor, be_evil)
1084. 
1085.         qs = Book.objects.annotate(
1086.             sums=MySum(F('rating') + F('pages') + F('price'), output_field=IntegerField())
1087.         )
1088.         self.assertEqual(str(qs.query).count('MAX('), 1)
1089.         b1 = qs.get(pk=self.b4.pk)
1090.         self.assertEqual(b1.sums, 2)
1091. 
1092.     def test_complex_values_aggregation(self):
1093.         max_rating = Book.objects.values('rating').aggregate(
1094.             double_max_rating=Max('rating') + Max('rating'))
1095.         self.assertEqual(max_rating['double_max_rating'], 5 * 2)
1096. 
1097.         max_books_per_rating = Book.objects.values('rating').annotate(
1098.             books_per_rating=Count('id') + 5
1099.         ).aggregate(Max('books_per_rating'))
1100.         self.assertEqual(
1101.             max_books_per_rating,
1102.             {'books_per_rating__max': 3 + 5})
1103. 
1104.     def test_expression_on_aggregation(self):
1105. 
1106.         # Create a plain expression
1107.         class Greatest(Func):
1108.             function = 'GREATEST'
1109. 
1110.             def as_sqlite(self, compiler, connection, **extra_context):
1111.                 return super().as_sql(compiler, connection, function='MAX', **extra_context)
1112. 
1113.         qs = Publisher.objects.annotate(
1114.             price_or_median=Greatest(Avg('book__rating', output_field=DecimalField()), Avg('book__price'))
1115.         ).filter(price_or_median__gte=F('num_awards')).order_by('num_awards')
1116.         self.assertQuerysetEqual(
1117.             qs, [1, 3, 7, 9], lambda v: v.num_awards)
1118. 
1119.         qs2 = Publisher.objects.annotate(
1120.             rating_or_num_awards=Greatest(Avg('book__rating'), F('num_awards'),
1121.                                           output_field=FloatField())
1122.         ).filter(rating_or_num_awards__gt=F('num_awards')).order_by('num_awards')
1123.         self.assertQuerysetEqual(
1124.             qs2, [1, 3], lambda v: v.num_awards)
1125. 
1126.     def test_arguments_must_be_expressions(self):
1127.         msg = 'QuerySet.aggregate() received non-expression(s): %s.'
1128.         with self.assertRaisesMessage(TypeError, msg % FloatField()):
1129.             Book.objects.aggregate(FloatField())
1130.         with self.assertRaisesMessage(TypeError, msg % True):
1131.             Book.objects.aggregate(is_book=True)
1132.         with self.assertRaisesMessage(TypeError, msg % ', '.join([str(FloatField()), 'True'])):
1133.             Book.objects.aggregate(FloatField(), Avg('price'), is_book=True)
1134. 
1135.     def test_aggregation_subquery_annotation(self):
1136.         """Subquery annotations are excluded from the GROUP BY if they are
1137.         not explicitly grouped against."""
1138.         latest_book_pubdate_qs = Book.objects.filter(
1139.             publisher=OuterRef('pk')
1140.         ).order_by('-pubdate').values('pubdate')[:1]
1141.         publisher_qs = Publisher.objects.annotate(
1142.             latest_book_pubdate=Subquery(latest_book_pubdate_qs),
1143.         ).annotate(count=Count('book'))
1144.         with self.assertNumQueries(1) as ctx:
1145.             list(publisher_qs)
1146.         self.assertEqual(ctx[0]['sql'].count('SELECT'), 2)
1147.         # The GROUP BY should not be by alias either.
1148.         self.assertEqual(ctx[0]['sql'].lower().count('latest_book_pubdate'), 1)
1149. 
1150.     def test_aggregation_subquery_annotation_exists(self):
1151.         latest_book_pubdate_qs = Book.objects.filter(
1152.             publisher=OuterRef('pk')
1153.         ).order_by('-pubdate').values('pubdate')[:1]
1154.         publisher_qs = Publisher.objects.annotate(
1155.             latest_book_pubdate=Subquery(latest_book_pubdate_qs),
1156.             count=Count('book'),
1157.         )
1158.         self.assertTrue(publisher_qs.exists())
1159. 
1160.     def test_aggregation_exists_annotation(self):
1161.         published_books = Book.objects.filter(publisher=OuterRef('pk'))
1162.         publisher_qs = Publisher.objects.annotate(
1163.             published_book=Exists(published_books),
1164.             count=Count('book'),
1165.         ).values_list('name', flat=True)
1166.         self.assertCountEqual(list(publisher_qs), [
1167.             'Apress',
1168.             'Morgan Kaufmann',
1169.             "Jonno's House of Books",
1170.             'Prentice Hall',
1171.             'Sams',
1172.         ])
1173. 
1174.     def test_aggregation_subquery_annotation_values(self):
1175.         """
1176.         Subquery annotations and external aliases are excluded from the GROUP
1177.         BY if they are not selected.
1178.         """
1179.         books_qs = Book.objects.annotate(
1180.             first_author_the_same_age=Subquery(
1181.                 Author.objects.filter(
1182.                     age=OuterRef('contact__friends__age'),
1183.                 ).order_by('age').values('id')[:1],
1184.             )
1185.         ).filter(
1186.             publisher=self.p1,
1187.             first_author_the_same_age__isnull=False,
1188.         ).annotate(
1189.             min_age=Min('contact__friends__age'),
1190.         ).values('name', 'min_age').order_by('name')
1191.         self.assertEqual(list(books_qs), [
1192.             {'name': 'Practical Django Projects', 'min_age': 34},
1193.             {
1194.                 'name': 'The Definitive Guide to Django: Web Development Done Right',
1195.                 'min_age': 29,
1196.             },
1197.         ])
1198. 
1199.     def test_aggregation_subquery_annotation_values_collision(self):
1200.         books_rating_qs = Book.objects.filter(
1201.             publisher=OuterRef('pk'),
1202.             price=Decimal('29.69'),
1203.         ).values('rating')
1204.         publisher_qs = Publisher.objects.filter(
1205.             book__contact__age__gt=20,
1206.             name=self.p1.name,
1207.         ).annotate(
1208.             rating=Subquery(books_rating_qs),
1209.             contacts_count=Count('book__contact'),
1210.         ).values('rating').annotate(total_count=Count('rating'))
1211.         self.assertEqual(list(publisher_qs), [
1212.             {'rating': 4.0, 'total_count': 2},
1213.         ])
1214. 
1215.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1216.     def test_aggregation_subquery_annotation_multivalued(self):
1217.         """
1218.         Subquery annotations must be included in the GROUP BY if they use
1219.         potentially multivalued relations (contain the LOOKUP_SEP).
1220.         """
1221.         if connection.vendor == 'mysql' and 'ONLY_FULL_GROUP_BY' in connection.sql_mode:
1222.             self.skipTest(
1223.                 'GROUP BY optimization does not work properly when '
1224.                 'ONLY_FULL_GROUP_BY mode is enabled on MySQL, see #31331.'
1225.             )
1226.         subquery_qs = Author.objects.filter(
1227.             pk=OuterRef('pk'),
1228.             book__name=OuterRef('book__name'),
1229.         ).values('pk')
1230.         author_qs = Author.objects.annotate(
1231.             subquery_id=Subquery(subquery_qs),
1232.         ).annotate(count=Count('book'))
1233.         self.assertEqual(author_qs.count(), Author.objects.count())
1234. 
1235.     def test_aggregation_order_by_not_selected_annotation_values(self):
1236.         result_asc = [
1237.             self.b4.pk,
1238.             self.b3.pk,
1239.             self.b1.pk,
1240.             self.b2.pk,
1241.             self.b5.pk,
1242.             self.b6.pk,
1243.         ]
1244.         result_desc = result_asc[::-1]
1245.         tests = [
1246.             ('min_related_age', result_asc),
1247.             ('-min_related_age', result_desc),
1248.             (F('min_related_age'), result_asc),
1249.             (F('min_related_age').asc(), result_asc),
1250.             (F('min_related_age').desc(), result_desc),
1251.         ]
1252.         for ordering, expected_result in tests:
1253.             with self.subTest(ordering=ordering):
1254.                 books_qs = Book.objects.annotate(
1255.                     min_age=Min('authors__age'),
1256.                 ).annotate(
1257.                     min_related_age=Coalesce('min_age', 'contact__age'),
1258.                 ).order_by(ordering).values_list('pk', flat=True)
1259.                 self.assertEqual(list(books_qs), expected_result)
1260. 
1261.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1262.     def test_group_by_subquery_annotation(self):
1263.         """
1264.         Subquery annotations are included in the GROUP BY if they are
1265.         grouped against.
1266.         """
1267.         long_books_count_qs = Book.objects.filter(
1268.             publisher=OuterRef('pk'),
1269.             pages__gt=400,
1270.         ).values(
1271.             'publisher'
1272.         ).annotate(count=Count('pk')).values('count')
1273.         long_books_count_breakdown = Publisher.objects.values_list(
1274.             Subquery(long_books_count_qs, IntegerField()),
1275.         ).annotate(total=Count('*'))
1276.         self.assertEqual(dict(long_books_count_breakdown), {None: 1, 1: 4})
1277. 
1278.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1279.     def test_group_by_exists_annotation(self):
1280.         """
1281.         Exists annotations are included in the GROUP BY if they are
1282.         grouped against.
1283.         """
1284.         long_books_qs = Book.objects.filter(
1285.             publisher=OuterRef('pk'),
1286.             pages__gt=800,
1287.         )
1288.         has_long_books_breakdown = Publisher.objects.values_list(
1289.             Exists(long_books_qs),
1290.         ).annotate(total=Count('*'))
1291.         self.assertEqual(dict(has_long_books_breakdown), {True: 2, False: 3})
1292. 
1293.     @skipUnlessDBFeature('supports_subqueries_in_group_by')
1294.     def test_aggregation_subquery_annotation_related_field(self):
1295.         publisher = Publisher.objects.create(name=self.a9.name, num_awards=2)
1296.         book = Book.objects.create(
1297.             isbn='159059999', name='Test book.', pages=819, rating=2.5,
1298.             price=Decimal('14.44'), contact=self.a9, publisher=publisher,
1299.             pubdate=datetime.date(2019, 12, 6),
1300.         )
1301.         book.authors.add(self.a5, self.a6, self.a7)
1302.         books_qs = Book.objects.annotate(
1303.             contact_publisher=Subquery(
1304.                 Publisher.objects.filter(
1305.                     pk=OuterRef('publisher'),
1306.                     name=OuterRef('contact__name'),
1307.                 ).values('name')[:1],
1308.             )
1309.         ).filter(
1310.             contact_publisher__isnull=False,
1311.         ).annotate(count=Count('authors'))
1312.         self.assertSequenceEqual(books_qs, [book])
1313.         # FIXME: GROUP BY doesn't need to include a subquery with
1314.         # non-multivalued JOINs, see Col.possibly_multivalued (refs #31150):
1315.         # with self.assertNumQueries(1) as ctx:
1316.         #     self.assertSequenceEqual(books_qs, [book])
1317.         # self.assertEqual(ctx[0]['sql'].count('SELECT'), 2)


File: tests/ordering/tests.py
Line number range: 1 - 486
Content:
1. from datetime import datetime
2. from operator import attrgetter
3. 
4. from django.db.models import (
5.     CharField, DateTimeField, F, Max, OuterRef, Subquery, Value,
6. )
7. from django.db.models.functions import Upper
8. from django.test import TestCase
9. 
10. from .models import Article, Author, ChildArticle, OrderedByFArticle, Reference
11. 
12. 
13. class OrderingTests(TestCase):
14. 
15.     @classmethod
16.     def setUpTestData(cls):
17.         cls.a1 = Article.objects.create(headline="Article 1", pub_date=datetime(2005, 7, 26))
18.         cls.a2 = Article.objects.create(headline="Article 2", pub_date=datetime(2005, 7, 27))
19.         cls.a3 = Article.objects.create(headline="Article 3", pub_date=datetime(2005, 7, 27))
20.         cls.a4 = Article.objects.create(headline="Article 4", pub_date=datetime(2005, 7, 28))
21.         cls.author_1 = Author.objects.create(name="Name 1")
22.         cls.author_2 = Author.objects.create(name="Name 2")
23.         for i in range(2):
24.             Author.objects.create()
25. 
26.     def test_default_ordering(self):
27.         """
28.         By default, Article.objects.all() orders by pub_date descending, then
29.         headline ascending.
30.         """
31.         self.assertQuerysetEqual(
32.             Article.objects.all(), [
33.                 "Article 4",
34.                 "Article 2",
35.                 "Article 3",
36.                 "Article 1",
37.             ],
38.             attrgetter("headline")
39.         )
40. 
41.         # Getting a single item should work too:
42.         self.assertEqual(Article.objects.all()[0], self.a4)
43. 
44.     def test_default_ordering_override(self):
45.         """
46.         Override ordering with order_by, which is in the same format as the
47.         ordering attribute in models.
48.         """
49.         self.assertQuerysetEqual(
50.             Article.objects.order_by("headline"), [
51.                 "Article 1",
52.                 "Article 2",
53.                 "Article 3",
54.                 "Article 4",
55.             ],
56.             attrgetter("headline")
57.         )
58.         self.assertQuerysetEqual(
59.             Article.objects.order_by("pub_date", "-headline"), [
60.                 "Article 1",
61.                 "Article 3",
62.                 "Article 2",
63.                 "Article 4",
64.             ],
65.             attrgetter("headline")
66.         )
67. 
68.     def test_order_by_override(self):
69.         """
70.         Only the last order_by has any effect (since they each override any
71.         previous ordering).
72.         """
73.         self.assertQuerysetEqual(
74.             Article.objects.order_by("id"), [
75.                 "Article 1",
76.                 "Article 2",
77.                 "Article 3",
78.                 "Article 4",
79.             ],
80.             attrgetter("headline")
81.         )
82.         self.assertQuerysetEqual(
83.             Article.objects.order_by("id").order_by("-headline"), [
84.                 "Article 4",
85.                 "Article 3",
86.                 "Article 2",
87.                 "Article 1",
88.             ],
89.             attrgetter("headline")
90.         )
91. 
92.     def test_order_by_nulls_first_and_last(self):
93.         msg = "nulls_first and nulls_last are mutually exclusive"
94.         with self.assertRaisesMessage(ValueError, msg):
95.             Article.objects.order_by(F("author").desc(nulls_last=True, nulls_first=True))
96. 
97.     def assertQuerysetEqualReversible(self, queryset, sequence):
98.         self.assertSequenceEqual(queryset, sequence)
99.         self.assertSequenceEqual(queryset.reverse(), list(reversed(sequence)))
100. 
101.     def test_order_by_nulls_last(self):
102.         Article.objects.filter(headline="Article 3").update(author=self.author_1)
103.         Article.objects.filter(headline="Article 4").update(author=self.author_2)
104.         # asc and desc are chainable with nulls_last.
105.         self.assertQuerysetEqualReversible(
106.             Article.objects.order_by(F("author").desc(nulls_last=True), 'headline'),
107.             [self.a4, self.a3, self.a1, self.a2],
108.         )
109.         self.assertQuerysetEqualReversible(
110.             Article.objects.order_by(F("author").asc(nulls_last=True), 'headline'),
111.             [self.a3, self.a4, self.a1, self.a2],
112.         )
113.         self.assertQuerysetEqualReversible(
114.             Article.objects.order_by(Upper("author__name").desc(nulls_last=True), 'headline'),
115.             [self.a4, self.a3, self.a1, self.a2],
116.         )
117.         self.assertQuerysetEqualReversible(
118.             Article.objects.order_by(Upper("author__name").asc(nulls_last=True), 'headline'),
119.             [self.a3, self.a4, self.a1, self.a2],
120.         )
121. 
122.     def test_order_by_nulls_first(self):
123.         Article.objects.filter(headline="Article 3").update(author=self.author_1)
124.         Article.objects.filter(headline="Article 4").update(author=self.author_2)
125.         # asc and desc are chainable with nulls_first.
126.         self.assertQuerysetEqualReversible(
127.             Article.objects.order_by(F("author").asc(nulls_first=True), 'headline'),
128.             [self.a1, self.a2, self.a3, self.a4],
129.         )
130.         self.assertQuerysetEqualReversible(
131.             Article.objects.order_by(F("author").desc(nulls_first=True), 'headline'),
132.             [self.a1, self.a2, self.a4, self.a3],
133.         )
134.         self.assertQuerysetEqualReversible(
135.             Article.objects.order_by(Upper("author__name").asc(nulls_first=True), 'headline'),
136.             [self.a1, self.a2, self.a3, self.a4],
137.         )
138.         self.assertQuerysetEqualReversible(
139.             Article.objects.order_by(Upper("author__name").desc(nulls_first=True), 'headline'),
140.             [self.a1, self.a2, self.a4, self.a3],
141.         )
142. 
143.     def test_orders_nulls_first_on_filtered_subquery(self):
144.         Article.objects.filter(headline='Article 1').update(author=self.author_1)
145.         Article.objects.filter(headline='Article 2').update(author=self.author_1)
146.         Article.objects.filter(headline='Article 4').update(author=self.author_2)
147.         Author.objects.filter(name__isnull=True).delete()
148.         author_3 = Author.objects.create(name='Name 3')
149.         article_subquery = Article.objects.filter(
150.             author=OuterRef('pk'),
151.             headline__icontains='Article',
152.         ).order_by().values('author').annotate(
153.             last_date=Max('pub_date'),
154.         ).values('last_date')
155.         self.assertQuerysetEqualReversible(
156.             Author.objects.annotate(
157.                 last_date=Subquery(article_subquery, output_field=DateTimeField())
158.             ).order_by(
159.                 F('last_date').asc(nulls_first=True)
160.             ).distinct(),
161.             [author_3, self.author_1, self.author_2],
162.         )
163. 
164.     def test_stop_slicing(self):
165.         """
166.         Use the 'stop' part of slicing notation to limit the results.
167.         """
168.         self.assertQuerysetEqual(
169.             Article.objects.order_by("headline")[:2], [
170.                 "Article 1",
171.                 "Article 2",
172.             ],
173.             attrgetter("headline")
174.         )
175. 
176.     def test_stop_start_slicing(self):
177.         """
178.         Use the 'stop' and 'start' parts of slicing notation to offset the
179.         result list.
180.         """
181.         self.assertQuerysetEqual(
182.             Article.objects.order_by("headline")[1:3], [
183.                 "Article 2",
184.                 "Article 3",
185.             ],
186.             attrgetter("headline")
187.         )
188. 
189.     def test_random_ordering(self):
190.         """
191.         Use '?' to order randomly.
192.         """
193.         self.assertEqual(
194.             len(list(Article.objects.order_by("?"))), 4
195.         )
196. 
197.     def test_reversed_ordering(self):
198.         """
199.         Ordering can be reversed using the reverse() method on a queryset.
200.         This allows you to extract things like "the last two items" (reverse
201.         and then take the first two).
202.         """
203.         self.assertQuerysetEqual(
204.             Article.objects.all().reverse()[:2], [
205.                 "Article 1",
206.                 "Article 3",
207.             ],
208.             attrgetter("headline")
209.         )
210. 
211.     def test_reverse_ordering_pure(self):
212.         qs1 = Article.objects.order_by(F('headline').asc())
213.         qs2 = qs1.reverse()
214.         self.assertQuerysetEqual(
215.             qs2, [
216.                 'Article 4',
217.                 'Article 3',
218.                 'Article 2',
219.                 'Article 1',
220.             ],
221.             attrgetter('headline'),
222.         )
223.         self.assertQuerysetEqual(
224.             qs1, [
225.                 "Article 1",
226.                 "Article 2",
227.                 "Article 3",
228.                 "Article 4",
229.             ],
230.             attrgetter("headline")
231.         )
232. 
233.     def test_reverse_meta_ordering_pure(self):
234.         Article.objects.create(
235.             headline='Article 5',
236.             pub_date=datetime(2005, 7, 30),
237.             author=self.author_1,
238.             second_author=self.author_2,
239.         )
240.         Article.objects.create(
241.             headline='Article 5',
242.             pub_date=datetime(2005, 7, 30),
243.             author=self.author_2,
244.             second_author=self.author_1,
245.         )
246.         self.assertQuerysetEqual(
247.             Article.objects.filter(headline='Article 5').reverse(),
248.             ['Name 2', 'Name 1'],
249.             attrgetter('author.name'),
250.         )
251.         self.assertQuerysetEqual(
252.             Article.objects.filter(headline='Article 5'),
253.             ['Name 1', 'Name 2'],
254.             attrgetter('author.name'),
255.         )
256. 
257.     def test_no_reordering_after_slicing(self):
258.         msg = 'Cannot reverse a query once a slice has been taken.'
259.         qs = Article.objects.all()[0:2]
260.         with self.assertRaisesMessage(TypeError, msg):
261.             qs.reverse()
262.         with self.assertRaisesMessage(TypeError, msg):
263.             qs.last()
264. 
265.     def test_extra_ordering(self):
266.         """
267.         Ordering can be based on fields included from an 'extra' clause
268.         """
269.         self.assertQuerysetEqual(
270.             Article.objects.extra(select={"foo": "pub_date"}, order_by=["foo", "headline"]), [
271.                 "Article 1",
272.                 "Article 2",
273.                 "Article 3",
274.                 "Article 4",
275.             ],
276.             attrgetter("headline")
277.         )
278. 
279.     def test_extra_ordering_quoting(self):
280.         """
281.         If the extra clause uses an SQL keyword for a name, it will be
282.         protected by quoting.
283.         """
284.         self.assertQuerysetEqual(
285.             Article.objects.extra(select={"order": "pub_date"}, order_by=["order", "headline"]), [
286.                 "Article 1",
287.                 "Article 2",
288.                 "Article 3",
289.                 "Article 4",
290.             ],
291.             attrgetter("headline")
292.         )
293. 
294.     def test_extra_ordering_with_table_name(self):
295.         self.assertQuerysetEqual(
296.             Article.objects.extra(order_by=['ordering_article.headline']), [
297.                 "Article 1",
298.                 "Article 2",
299.                 "Article 3",
300.                 "Article 4",
301.             ],
302.             attrgetter("headline")
303.         )
304.         self.assertQuerysetEqual(
305.             Article.objects.extra(order_by=['-ordering_article.headline']), [
306.                 "Article 4",
307.                 "Article 3",
308.                 "Article 2",
309.                 "Article 1",
310.             ],
311.             attrgetter("headline")
312.         )
313. 
314.     def test_order_by_pk(self):
315.         """
316.         'pk' works as an ordering option in Meta.
317.         """
318.         self.assertQuerysetEqual(
319.             Author.objects.all(),
320.             list(reversed(range(1, Author.objects.count() + 1))),
321.             attrgetter("pk"),
322.         )
323. 
324.     def test_order_by_fk_attname(self):
325.         """
326.         ordering by a foreign key by its attribute name prevents the query
327.         from inheriting its related model ordering option (#19195).
328.         """
329.         for i in range(1, 5):
330.             author = Author.objects.get(pk=i)
331.             article = getattr(self, "a%d" % (5 - i))
332.             article.author = author
333.             article.save(update_fields={'author'})
334. 
335.         self.assertQuerysetEqual(
336.             Article.objects.order_by('author_id'), [
337.                 "Article 4",
338.                 "Article 3",
339.                 "Article 2",
340.                 "Article 1",
341.             ],
342.             attrgetter("headline")
343.         )
344. 
345.     def test_order_by_self_referential_fk(self):
346.         self.a1.author = Author.objects.create(editor=self.author_1)
347.         self.a1.save()
348.         self.a2.author = Author.objects.create(editor=self.author_2)
349.         self.a2.save()
350.         self.assertQuerysetEqual(
351.             Article.objects.filter(author__isnull=False).order_by('author__editor'),
352.             ['Article 2', 'Article 1'],
353.             attrgetter('headline'),
354.         )
355.         self.assertQuerysetEqual(
356.             Article.objects.filter(author__isnull=False).order_by('author__editor_id'),
357.             ['Article 1', 'Article 2'],
358.             attrgetter('headline'),
359.         )
360. 
361.     def test_order_by_f_expression(self):
362.         self.assertQuerysetEqual(
363.             Article.objects.order_by(F('headline')), [
364.                 "Article 1",
365.                 "Article 2",
366.                 "Article 3",
367.                 "Article 4",
368.             ],
369.             attrgetter("headline")
370.         )
371.         self.assertQuerysetEqual(
372.             Article.objects.order_by(F('headline').asc()), [
373.                 "Article 1",
374.                 "Article 2",
375.                 "Article 3",
376.                 "Article 4",
377.             ],
378.             attrgetter("headline")
379.         )
380.         self.assertQuerysetEqual(
381.             Article.objects.order_by(F('headline').desc()), [
382.                 "Article 4",
383.                 "Article 3",
384.                 "Article 2",
385.                 "Article 1",
386.             ],
387.             attrgetter("headline")
388.         )
389. 
390.     def test_order_by_f_expression_duplicates(self):
391.         """
392.         A column may only be included once (the first occurrence) so we check
393.         to ensure there are no duplicates by inspecting the SQL.
394.         """
395.         qs = Article.objects.order_by(F('headline').asc(), F('headline').desc())
396.         sql = str(qs.query).upper()
397.         fragment = sql[sql.find('ORDER BY'):]
398.         self.assertEqual(fragment.count('HEADLINE'), 1)
399.         self.assertQuerysetEqual(
400.             qs, [
401.                 "Article 1",
402.                 "Article 2",
403.                 "Article 3",
404.                 "Article 4",
405.             ],
406.             attrgetter("headline")
407.         )
408.         qs = Article.objects.order_by(F('headline').desc(), F('headline').asc())
409.         sql = str(qs.query).upper()
410.         fragment = sql[sql.find('ORDER BY'):]
411.         self.assertEqual(fragment.count('HEADLINE'), 1)
412.         self.assertQuerysetEqual(
413.             qs, [
414.                 "Article 4",
415.                 "Article 3",
416.                 "Article 2",
417.                 "Article 1",
418.             ],
419.             attrgetter("headline")
420.         )
421. 
422.     def test_order_by_constant_value(self):
423.         # Order by annotated constant from selected columns.
424.         qs = Article.objects.annotate(
425.             constant=Value('1', output_field=CharField()),
426.         ).order_by('constant', '-headline')
427.         self.assertSequenceEqual(qs, [self.a4, self.a3, self.a2, self.a1])
428.         # Order by annotated constant which is out of selected columns.
429.         self.assertSequenceEqual(
430.             qs.values_list('headline', flat=True), [
431.                 'Article 4',
432.                 'Article 3',
433.                 'Article 2',
434.                 'Article 1',
435.             ],
436.         )
437.         # Order by constant.
438.         qs = Article.objects.order_by(Value('1', output_field=CharField()), '-headline')
439.         self.assertSequenceEqual(qs, [self.a4, self.a3, self.a2, self.a1])
440. 
441.     def test_related_ordering_duplicate_table_reference(self):
442.         """
443.         An ordering referencing a model with an ordering referencing a model
444.         multiple time no circular reference should be detected (#24654).
445.         """
446.         first_author = Author.objects.create()
447.         second_author = Author.objects.create()
448.         self.a1.author = first_author
449.         self.a1.second_author = second_author
450.         self.a1.save()
451.         self.a2.author = second_author
452.         self.a2.second_author = first_author
453.         self.a2.save()
454.         r1 = Reference.objects.create(article_id=self.a1.pk)
455.         r2 = Reference.objects.create(article_id=self.a2.pk)
456.         self.assertSequenceEqual(Reference.objects.all(), [r2, r1])
457. 
458.     def test_default_ordering_by_f_expression(self):
459.         """F expressions can be used in Meta.ordering."""
460.         articles = OrderedByFArticle.objects.all()
461.         articles.filter(headline='Article 2').update(author=self.author_2)
462.         articles.filter(headline='Article 3').update(author=self.author_1)
463.         self.assertQuerysetEqual(
464.             articles, ['Article 1', 'Article 4', 'Article 3', 'Article 2'],
465.             attrgetter('headline')
466.         )
467. 
468.     def test_order_by_ptr_field_with_default_ordering_by_expression(self):
469.         ca1 = ChildArticle.objects.create(
470.             headline='h2',
471.             pub_date=datetime(2005, 7, 27),
472.             author=self.author_2,
473.         )
474.         ca2 = ChildArticle.objects.create(
475.             headline='h2',
476.             pub_date=datetime(2005, 7, 27),
477.             author=self.author_1,
478.         )
479.         ca3 = ChildArticle.objects.create(
480.             headline='h3',
481.             pub_date=datetime(2005, 7, 27),
482.             author=self.author_1,
483.         )
484.         ca4 = ChildArticle.objects.create(headline='h1', pub_date=datetime(2005, 7, 28))
485.         articles = ChildArticle.objects.order_by('article_ptr')
486.         self.assertSequenceEqual(articles, [ca4, ca2, ca1, ca3])

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 08:15:22,644 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user is reporting a bug where `order_by('?')` breaks aggregation by incorrectly modifying the `GROUP BY` clause. I have already examined `tests/aggregation/tests.py` and `tests/ordering/tests.py`. While `tests/aggregation/tests.py` has tests showing how an incorrect `GROUP BY` can break aggregation, and `tests/ordering/tests.py` has a test for `order_by('?')`, neither file contains a test that combines both to replicate the user's scenario. The bug is fundamentally about how an `Expression` (`Random`) interacts with the `GROUP BY` clause generated for an aggregation query. Therefore, I need to examine tests that cover expressions more broadly to find relevant examples of ordering by a function combined with aggregation. `tests/expressions/tests.py` is the most likely place to find such tests." query='Please provide the full content of tests/expressions/tests.py.' extra_requirements='' purpose='I need to find test cases that combine `annotate()` with `order_by()` using a database function or expression to check if the `GROUP BY` clause is correctly generated, which is the core of the reported bug.'
2025-12-23 08:15:22,645 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of tests/expressions/tests.py.
2025-12-23 08:15:22,645 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 08:15:22,646 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 08:15:22,646 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 08:15:22,646 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of tests/expressions/tests.py.
Purpose: I need to find test cases that combine `annotate()` with `order_by()` using a database function or expression to check if the `GROUP BY` clause is correctly generated, which is the core of the reported bug.
2025-12-23 08:15:26,449 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `tests/expressions/tests.py` to help you find test cases that combine `annotate()` with `order_by()` using a database function or expression. This will allow you to verify if the `GROUP BY` clause is correctly generated and investigate the reported bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/expressions/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2119, 'candidates_token_count': 83, 'total_token_count': 2438, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2119}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 83}], 'thoughts_token_count': 236, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.18748083459325585, 'model_name': 'gemini-2.5-pro'} id='run--03512abe-a064-42d5-9952-5c6f9e807bd3-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/expressions/tests.py'}, 'id': '7f7ffacf-b991-48d0-a1c4-c71f5fe437ec', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2119, 'output_tokens': 83, 'total_tokens': 2438, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 236}}
2025-12-23 08:15:29,670 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have read the first 500 lines of `tests/expressions/tests.py`. Since the file is larger, I will now retrieve the remaining content to provide you with the complete file. This will ensure you have all the necessary information to investigate the bug.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/expressions/tests.py", "start_line": 501.0, "end_line": 1501.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10058, 'candidates_token_count': 82, 'total_token_count': 10318, 'cached_content_token_count': 1836, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10058}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1836}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 82}], 'thoughts_token_count': 178}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2218304843437381, 'model_name': 'gemini-2.5-pro'} id='run--7cc432ff-7f42-4fda-8887-7711430534e1-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/expressions/tests.py', 'start_line': 501.0, 'end_line': 1501.0}, 'id': '92f8af1e-7934-4c8d-8e74-f56db909e2f7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10058, 'output_tokens': 82, 'total_tokens': 10318, 'input_token_details': {'cache_read': 1836}, 'output_token_details': {'reasoning': 178}}
2025-12-23 08:15:56,210 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the entire content of `tests/expressions/tests.py`. I will proceed to read the rest of the file to ensure I have all the necessary information to help you with your task.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/expressions/tests.py", "start_line": 1502.0, "end_line": 2501.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 28780, 'candidates_token_count': 69, 'total_token_count': 31746, 'cached_content_token_count': 9697, 'prompt_tokens_details': [{'modality': 1, 'token_count': 28780}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9697}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 69}], 'thoughts_token_count': 2897}, 'finish_reason': 'STOP', 'avg_logprobs': -6.324205923771513, 'model_name': 'gemini-2.5-pro'} id='run--0f80d351-950b-492b-b2de-8d21c538fe7d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/expressions/tests.py', 'start_line': 1502.0, 'end_line': 2501.0}, 'id': '09ec05a5-6e2d-4966-a694-3fe80986fe6a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 28780, 'output_tokens': 69, 'total_tokens': 31746, 'input_token_details': {'cache_read': 9697}, 'output_token_details': {'reasoning': 2897}}
2025-12-23 08:16:10,400 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the complete content of `tests/expressions/tests.py` by reading it in multiple parts. The file contains a comprehensive suite of tests for database expressions in Django. I have examined the content and identified several test cases that involve the use of `annotate()`, `order_by()`, and various expressions, which should help you investigate the bug related to the `GROUP BY` clause generation.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 2290, 'end_index': 2725, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 3016, 'end_index': 3883, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 4188, 'end_index': 4502, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 36857, 'candidates_token_count': 84, 'total_token_count': 38444, 'cached_content_token_count': 27310, 'prompt_tokens_details': [{'modality': 1, 'token_count': 36857}], 'cache_tokens_details': [{'modality': 1, 'token_count': 27310}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 84}], 'thoughts_token_count': 1503}, 'finish_reason': 'STOP', 'avg_logprobs': -1.5336212884812128, 'model_name': 'gemini-2.5-pro'} id='run--1628cf24-b798-46f9-88d5-5145aabe5f7d-0' usage_metadata={'input_tokens': 36857, 'output_tokens': 84, 'total_tokens': 38444, 'input_token_details': {'cache_read': 27310}, 'output_token_details': {'reasoning': 1503}}
2025-12-23 08:16:10,402 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of tests/expressions/tests.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases that combine `annotate()` with `order_by()` using a database function or expression to check if the `GROUP BY` clause is correctly generated, which is the core of the reported bug.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/expressions/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import pickle
3. import unittest
4. import uuid
5. from copy import deepcopy
6. from decimal import Decimal
7. from unittest import mock
8. 
9. from django.core.exceptions import FieldError
10. from django.db import DatabaseError, NotSupportedError, connection
11. from django.db.models import (
12.     AutoField, Avg, BinaryField, BooleanField, Case, CharField, Count,
13.     DateField, DateTimeField, DecimalField, DurationField, Exists, Expression,
14.     ExpressionList, ExpressionWrapper, F, FloatField, Func, IntegerField, Max,
15.     Min, Model, OrderBy, OuterRef, Q, StdDev, Subquery, Sum, TimeField,
16.     UUIDField, Value, Variance, When,
17. )
18. from django.db.models.expressions import (
19.     Col, Combinable, CombinedExpression, RawSQL, Ref,
20. )
21. from django.db.models.functions import (
22.     Coalesce, Concat, Left, Length, Lower, Substr, Upper,
23. )
24. from django.db.models.sql import constants
25. from django.db.models.sql.datastructures import Join
26. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
27. from django.test.utils import Approximate, CaptureQueriesContext, isolate_apps
28. from django.utils.functional import SimpleLazyObject
29. 
30. from .models import (
31.     UUID, UUIDPK, Company, Employee, Experiment, Manager, Number,
32.     RemoteEmployee, Result, SimulationRun, Time,
33. )
34. 
35. 
36. class BasicExpressionsTests(TestCase):
37.     @classmethod
38.     def setUpTestData(cls):
39.         cls.example_inc = Company.objects.create(
40.             name="Example Inc.", num_employees=2300, num_chairs=5,
41.             ceo=Employee.objects.create(firstname="Joe", lastname="Smith", salary=10)
42.         )
43.         cls.foobar_ltd = Company.objects.create(
44.             name="Foobar Ltd.", num_employees=3, num_chairs=4, based_in_eu=True,
45.             ceo=Employee.objects.create(firstname="Frank", lastname="Meyer", salary=20)
46.         )
47.         cls.max = Employee.objects.create(firstname='Max', lastname='Mustermann', salary=30)
48.         cls.gmbh = Company.objects.create(name='Test GmbH', num_employees=32, num_chairs=1, ceo=cls.max)
49. 
50.     def setUp(self):
51.         self.company_query = Company.objects.values(
52.             "name", "num_employees", "num_chairs"
53.         ).order_by(
54.             "name", "num_employees", "num_chairs"
55.         )
56. 
57.     def test_annotate_values_aggregate(self):
58.         companies = Company.objects.annotate(
59.             salaries=F('ceo__salary'),
60.         ).values('num_employees', 'salaries').aggregate(
61.             result=Sum(
62.                 F('salaries') + F('num_employees'),
63.                 output_field=IntegerField()
64.             ),
65.         )
66.         self.assertEqual(companies['result'], 2395)
67. 
68.     def test_annotate_values_filter(self):
69.         companies = Company.objects.annotate(
70.             foo=RawSQL('%s', ['value']),
71.         ).filter(foo='value').order_by('name')
72.         self.assertQuerysetEqual(
73.             companies,
74.             ['<Company: Example Inc.>', '<Company: Foobar Ltd.>', '<Company: Test GmbH>'],
75.         )
76. 
77.     def test_annotate_values_count(self):
78.         companies = Company.objects.annotate(foo=RawSQL('%s', ['value']))
79.         self.assertEqual(companies.count(), 3)
80. 
81.     @skipUnlessDBFeature('supports_boolean_expr_in_select_clause')
82.     def test_filtering_on_annotate_that_uses_q(self):
83.         self.assertEqual(
84.             Company.objects.annotate(
85.                 num_employees_check=ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
86.             ).filter(num_employees_check=True).count(),
87.             2,
88.         )
89. 
90.     def test_filtering_on_q_that_is_boolean(self):
91.         self.assertEqual(
92.             Company.objects.filter(
93.                 ExpressionWrapper(Q(num_employees__gt=3), output_field=BooleanField())
94.             ).count(),
95.             2,
96.         )
97. 
98.     def test_filtering_on_rawsql_that_is_boolean(self):
99.         self.assertEqual(
100.             Company.objects.filter(
101.                 RawSQL('num_employees > %s', (3,), output_field=BooleanField()),
102.             ).count(),
103.             2,
104.         )
105. 
106.     def test_filter_inter_attribute(self):
107.         # We can filter on attribute relationships on same model obj, e.g.
108.         # find companies where the number of employees is greater
109.         # than the number of chairs.
110.         self.assertSequenceEqual(
111.             self.company_query.filter(num_employees__gt=F("num_chairs")), [
112.                 {
113.                     "num_chairs": 5,
114.                     "name": "Example Inc.",
115.                     "num_employees": 2300,
116.                 },
117.                 {
118.                     "num_chairs": 1,
119.                     "name": "Test GmbH",
120.                     "num_employees": 32
121.                 },
122.             ],
123.         )
124. 
125.     def test_update(self):
126.         # We can set one field to have the value of another field
127.         # Make sure we have enough chairs
128.         self.company_query.update(num_chairs=F("num_employees"))
129.         self.assertSequenceEqual(
130.             self.company_query, [
131.                 {
132.                     "num_chairs": 2300,
133.                     "name": "Example Inc.",
134.                     "num_employees": 2300
135.                 },
136.                 {
137.                     "num_chairs": 3,
138.                     "name": "Foobar Ltd.",
139.                     "num_employees": 3
140.                 },
141.                 {
142.                     "num_chairs": 32,
143.                     "name": "Test GmbH",
144.                     "num_employees": 32
145.                 }
146.             ],
147.         )
148. 
149.     def test_arithmetic(self):
150.         # We can perform arithmetic operations in expressions
151.         # Make sure we have 2 spare chairs
152.         self.company_query.update(num_chairs=F("num_employees") + 2)
153.         self.assertSequenceEqual(
154.             self.company_query, [
155.                 {
156.                     'num_chairs': 2302,
157.                     'name': 'Example Inc.',
158.                     'num_employees': 2300
159.                 },
160.                 {
161.                     'num_chairs': 5,
162.                     'name': 'Foobar Ltd.',
163.                     'num_employees': 3
164.                 },
165.                 {
166.                     'num_chairs': 34,
167.                     'name': 'Test GmbH',
168.                     'num_employees': 32
169.                 }
170.             ],
171.         )
172. 
173.     def test_order_of_operations(self):
174.         # Law of order of operations is followed
175.         self.company_query.update(num_chairs=F('num_employees') + 2 * F('num_employees'))
176.         self.assertSequenceEqual(
177.             self.company_query, [
178.                 {
179.                     'num_chairs': 6900,
180.                     'name': 'Example Inc.',
181.                     'num_employees': 2300
182.                 },
183.                 {
184.                     'num_chairs': 9,
185.                     'name': 'Foobar Ltd.',
186.                     'num_employees': 3
187.                 },
188.                 {
189.                     'num_chairs': 96,
190.                     'name': 'Test GmbH',
191.                     'num_employees': 32
192.                 }
193.             ],
194.         )
195. 
196.     def test_parenthesis_priority(self):
197.         # Law of order of operations can be overridden by parentheses
198.         self.company_query.update(num_chairs=(F('num_employees') + 2) * F('num_employees'))
199.         self.assertSequenceEqual(
200.             self.company_query, [
201.                 {
202.                     'num_chairs': 5294600,
203.                     'name': 'Example Inc.',
204.                     'num_employees': 2300
205.                 },
206.                 {
207.                     'num_chairs': 15,
208.                     'name': 'Foobar Ltd.',
209.                     'num_employees': 3
210.                 },
211.                 {
212.                     'num_chairs': 1088,
213.                     'name': 'Test GmbH',
214.                     'num_employees': 32
215.                 }
216.             ],
217.         )
218. 
219.     def test_update_with_fk(self):
220.         # ForeignKey can become updated with the value of another ForeignKey.
221.         self.assertEqual(Company.objects.update(point_of_contact=F('ceo')), 3)
222.         self.assertQuerysetEqual(
223.             Company.objects.all(),
224.             ['Joe Smith', 'Frank Meyer', 'Max Mustermann'],
225.             lambda c: str(c.point_of_contact),
226.             ordered=False
227.         )
228. 
229.     def test_update_with_none(self):
230.         Number.objects.create(integer=1, float=1.0)
231.         Number.objects.create(integer=2)
232.         Number.objects.filter(float__isnull=False).update(float=Value(None))
233.         self.assertQuerysetEqual(
234.             Number.objects.all(),
235.             [None, None],
236.             lambda n: n.float,
237.             ordered=False
238.         )
239. 
240.     def test_filter_with_join(self):
241.         # F Expressions can also span joins
242.         Company.objects.update(point_of_contact=F('ceo'))
243.         c = Company.objects.first()
244.         c.point_of_contact = Employee.objects.create(firstname="Guido", lastname="van Rossum")
245.         c.save()
246. 
247.         self.assertQuerysetEqual(
248.             Company.objects.filter(ceo__firstname=F('point_of_contact__firstname')),
249.             ['Foobar Ltd.', 'Test GmbH'],
250.             lambda c: c.name,
251.             ordered=False
252.         )
253. 
254.         Company.objects.exclude(
255.             ceo__firstname=F("point_of_contact__firstname")
256.         ).update(name="foo")
257.         self.assertEqual(
258.             Company.objects.exclude(
259.                 ceo__firstname=F('point_of_contact__firstname')
260.             ).get().name,
261.             "foo",
262.         )
263. 
264.         msg = "Joined field references are not permitted in this query"
265.         with self.assertRaisesMessage(FieldError, msg):
266.             Company.objects.exclude(
267.                 ceo__firstname=F('point_of_contact__firstname')
268.             ).update(name=F('point_of_contact__lastname'))
269. 
270.     def test_object_update(self):
271.         # F expressions can be used to update attributes on single objects
272.         self.gmbh.num_employees = F('num_employees') + 4
273.         self.gmbh.save()
274.         self.gmbh.refresh_from_db()
275.         self.assertEqual(self.gmbh.num_employees, 36)
276. 
277.     def test_new_object_save(self):
278.         # We should be able to use Funcs when inserting new data
279.         test_co = Company(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
280.         test_co.save()
281.         test_co.refresh_from_db()
282.         self.assertEqual(test_co.name, "upper")
283. 
284.     def test_new_object_create(self):
285.         test_co = Company.objects.create(name=Lower(Value('UPPER')), num_employees=32, num_chairs=1, ceo=self.max)
286.         test_co.refresh_from_db()
287.         self.assertEqual(test_co.name, "upper")
288. 
289.     def test_object_create_with_aggregate(self):
290.         # Aggregates are not allowed when inserting new data
291.         msg = 'Aggregate functions are not allowed in this query (num_employees=Max(Value(1))).'
292.         with self.assertRaisesMessage(FieldError, msg):
293.             Company.objects.create(
294.                 name='Company', num_employees=Max(Value(1)), num_chairs=1,
295.                 ceo=Employee.objects.create(firstname="Just", lastname="Doit", salary=30),
296.             )
297. 
298.     def test_object_update_fk(self):
299.         # F expressions cannot be used to update attributes which are foreign
300.         # keys, or attributes which involve joins.
301.         test_gmbh = Company.objects.get(pk=self.gmbh.pk)
302.         msg = 'F(ceo)": "Company.point_of_contact" must be a "Employee" instance.'
303.         with self.assertRaisesMessage(ValueError, msg):
304.             test_gmbh.point_of_contact = F('ceo')
305. 
306.         test_gmbh.point_of_contact = self.gmbh.ceo
307.         test_gmbh.save()
308.         test_gmbh.name = F('ceo__lastname')
309.         msg = 'Joined field references are not permitted in this query'
310.         with self.assertRaisesMessage(FieldError, msg):
311.             test_gmbh.save()
312. 
313.     def test_update_inherited_field_value(self):
314.         msg = 'Joined field references are not permitted in this query'
315.         with self.assertRaisesMessage(FieldError, msg):
316.             RemoteEmployee.objects.update(adjusted_salary=F('salary') * 5)
317. 
318.     def test_object_update_unsaved_objects(self):
319.         # F expressions cannot be used to update attributes on objects which do
320.         # not yet exist in the database
321.         acme = Company(name='The Acme Widget Co.', num_employees=12, num_chairs=5, ceo=self.max)
322.         acme.num_employees = F("num_employees") + 16
323.         msg = (
324.             'Failed to insert expression "Col(expressions_company, '
325.             'expressions.Company.num_employees) + Value(16)" on '
326.             'expressions.Company.num_employees. F() expressions can only be '
327.             'used to update, not to insert.'
328.         )
329.         with self.assertRaisesMessage(ValueError, msg):
330.             acme.save()
331. 
332.         acme.num_employees = 12
333.         acme.name = Lower(F('name'))
334.         msg = (
335.             'Failed to insert expression "Lower(Col(expressions_company, '
336.             'expressions.Company.name))" on expressions.Company.name. F() '
337.             'expressions can only be used to update, not to insert.'
338.         )
339.         with self.assertRaisesMessage(ValueError, msg):
340.             acme.save()
341. 
342.     def test_ticket_11722_iexact_lookup(self):
343.         Employee.objects.create(firstname="John", lastname="Doe")
344.         Employee.objects.create(firstname="Test", lastname="test")
345. 
346.         queryset = Employee.objects.filter(firstname__iexact=F('lastname'))
347.         self.assertQuerysetEqual(queryset, ["<Employee: Test test>"])
348. 
349.     def test_ticket_16731_startswith_lookup(self):
350.         Employee.objects.create(firstname="John", lastname="Doe")
351.         e2 = Employee.objects.create(firstname="Jack", lastname="Jackson")
352.         e3 = Employee.objects.create(firstname="Jack", lastname="jackson")
353.         self.assertSequenceEqual(
354.             Employee.objects.filter(lastname__startswith=F('firstname')),
355.             [e2, e3] if connection.features.has_case_insensitive_like else [e2]
356.         )
357.         qs = Employee.objects.filter(lastname__istartswith=F('firstname')).order_by('pk')
358.         self.assertSequenceEqual(qs, [e2, e3])
359. 
360.     def test_ticket_18375_join_reuse(self):
361.         # Reverse multijoin F() references and the lookup target the same join.
362.         # Pre #18375 the F() join was generated first and the lookup couldn't
363.         # reuse that join.
364.         qs = Employee.objects.filter(company_ceo_set__num_chairs=F('company_ceo_set__num_employees'))
365.         self.assertEqual(str(qs.query).count('JOIN'), 1)
366. 
367.     def test_ticket_18375_kwarg_ordering(self):
368.         # The next query was dict-randomization dependent - if the "gte=1"
369.         # was seen first, then the F() will reuse the join generated by the
370.         # gte lookup, if F() was seen first, then it generated a join the
371.         # other lookups could not reuse.
372.         qs = Employee.objects.filter(
373.             company_ceo_set__num_chairs=F('company_ceo_set__num_employees'),
374.             company_ceo_set__num_chairs__gte=1,
375.         )
376.         self.assertEqual(str(qs.query).count('JOIN'), 1)
377. 
378.     def test_ticket_18375_kwarg_ordering_2(self):
379.         # Another similar case for F() than above. Now we have the same join
380.         # in two filter kwargs, one in the lhs lookup, one in F. Here pre
381.         # #18375 the amount of joins generated was random if dict
382.         # randomization was enabled, that is the generated query dependent
383.         # on which clause was seen first.
384.         qs = Employee.objects.filter(
385.             company_ceo_set__num_employees=F('pk'),
386.             pk=F('company_ceo_set__num_employees')
387.         )
388.         self.assertEqual(str(qs.query).count('JOIN'), 1)
389. 
390.     def test_ticket_18375_chained_filters(self):
391.         # F() expressions do not reuse joins from previous filter.
392.         qs = Employee.objects.filter(
393.             company_ceo_set__num_employees=F('pk')
394.         ).filter(
395.             company_ceo_set__num_employees=F('company_ceo_set__num_employees')
396.         )
397.         self.assertEqual(str(qs.query).count('JOIN'), 2)
398. 
399.     def test_order_by_exists(self):
400.         mary = Employee.objects.create(firstname='Mary', lastname='Mustermann', salary=20)
401.         mustermanns_by_seniority = Employee.objects.filter(lastname='Mustermann').order_by(
402.             # Order by whether the employee is the CEO of a company
403.             Exists(Company.objects.filter(ceo=OuterRef('pk'))).desc()
404.         )
405.         self.assertSequenceEqual(mustermanns_by_seniority, [self.max, mary])
406. 
407.     def test_order_by_multiline_sql(self):
408.         raw_order_by = (
409.             RawSQL('''
410.                 CASE WHEN num_employees > 1000
411.                      THEN num_chairs
412.                      ELSE 0 END
413.             ''', []).desc(),
414.             RawSQL('''
415.                 CASE WHEN num_chairs > 1
416.                      THEN 1
417.                      ELSE 0 END
418.             ''', []).asc()
419.         )
420.         for qs in (
421.             Company.objects.all(),
422.             Company.objects.distinct(),
423.         ):
424.             with self.subTest(qs=qs):
425.                 self.assertSequenceEqual(
426.                     qs.order_by(*raw_order_by),
427.                     [self.example_inc, self.gmbh, self.foobar_ltd],
428.                 )
429. 
430.     def test_outerref(self):
431.         inner = Company.objects.filter(point_of_contact=OuterRef('pk'))
432.         msg = (
433.             'This queryset contains a reference to an outer query and may only '
434.             'be used in a subquery.'
435.         )
436.         with self.assertRaisesMessage(ValueError, msg):
437.             inner.exists()
438. 
439.         outer = Employee.objects.annotate(is_point_of_contact=Exists(inner))
440.         self.assertIs(outer.exists(), True)
441. 
442.     def test_exist_single_field_output_field(self):
443.         queryset = Company.objects.values('pk')
444.         self.assertIsInstance(Exists(queryset).output_field, BooleanField)
445. 
446.     def test_subquery(self):
447.         Company.objects.filter(name='Example Inc.').update(
448.             point_of_contact=Employee.objects.get(firstname='Joe', lastname='Smith'),
449.             ceo=self.max,
450.         )
451.         Employee.objects.create(firstname='Bob', lastname='Brown', salary=40)
452.         qs = Employee.objects.annotate(
453.             is_point_of_contact=Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
454.             is_not_point_of_contact=~Exists(Company.objects.filter(point_of_contact=OuterRef('pk'))),
455.             is_ceo_of_small_company=Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
456.             is_ceo_small_2=~~Exists(Company.objects.filter(num_employees__lt=200, ceo=OuterRef('pk'))),
457.             largest_company=Subquery(Company.objects.order_by('-num_employees').filter(
458.                 Q(ceo=OuterRef('pk')) | Q(point_of_contact=OuterRef('pk'))
459.             ).values('name')[:1], output_field=CharField())
460.         ).values(
461.             'firstname',
462.             'is_point_of_contact',
463.             'is_not_point_of_contact',
464.             'is_ceo_of_small_company',
465.             'is_ceo_small_2',
466.             'largest_company',
467.         ).order_by('firstname')
468. 
469.         results = list(qs)
470.         # Could use Coalesce(subq, Value('')) instead except for the bug in
471.         # cx_Oracle mentioned in #23843.
472.         bob = results[0]
473.         if bob['largest_company'] == '' and connection.features.interprets_empty_strings_as_nulls:
474.             bob['largest_company'] = None
475. 
476.         self.assertEqual(results, [
477.             {
478.                 'firstname': 'Bob',
479.                 'is_point_of_contact': False,
480.                 'is_not_point_of_contact': True,
481.                 'is_ceo_of_small_company': False,
482.                 'is_ceo_small_2': False,
483.                 'largest_company': None,
484.             },
485.             {
486.                 'firstname': 'Frank',
487.                 'is_point_of_contact': False,
488.                 'is_not_point_of_contact': True,
489.                 'is_ceo_of_small_company': True,
490.                 'is_ceo_small_2': True,
491.                 'largest_company': 'Foobar Ltd.',
492.             },
493.             {
494.                 'firstname': 'Joe',
495.                 'is_point_of_contact': True,
496.                 'is_not_point_of_contact': False,
497.                 'is_ceo_of_small_company': False,
498.                 'is_ceo_small_2': False,
499.                 'largest_company': 'Example Inc.',
500.             },


File: tests/expressions/tests.py
Line number range: 501 - 1501
Content:
501.             {
502.                 'firstname': 'Max',
503.                 'is_point_of_contact': False,
504.                 'is_not_point_of_contact': True,
505.                 'is_ceo_of_small_company': True,
506.                 'is_ceo_small_2': True,
507.                 'largest_company': 'Example Inc.'
508.             }
509.         ])
510.         # A less elegant way to write the same query: this uses a LEFT OUTER
511.         # JOIN and an IS NULL, inside a WHERE NOT IN which is probably less
512.         # efficient than EXISTS.
513.         self.assertCountEqual(
514.             qs.filter(is_point_of_contact=True).values('pk'),
515.             Employee.objects.exclude(company_point_of_contact_set=None).values('pk')
516.         )
517. 
518.     def test_subquery_eq(self):
519.         qs = Employee.objects.annotate(
520.             is_ceo=Exists(Company.objects.filter(ceo=OuterRef('pk'))),
521.             is_point_of_contact=Exists(
522.                 Company.objects.filter(point_of_contact=OuterRef('pk')),
523.             ),
524.             small_company=Exists(
525.                 queryset=Company.objects.filter(num_employees__lt=200),
526.             ),
527.         ).filter(is_ceo=True, is_point_of_contact=False, small_company=True)
528.         self.assertNotEqual(
529.             qs.query.annotations['is_ceo'],
530.             qs.query.annotations['is_point_of_contact'],
531.         )
532.         self.assertNotEqual(
533.             qs.query.annotations['is_ceo'],
534.             qs.query.annotations['small_company'],
535.         )
536. 
537.     def test_in_subquery(self):
538.         # This is a contrived test (and you really wouldn't write this query),
539.         # but it is a succinct way to test the __in=Subquery() construct.
540.         small_companies = Company.objects.filter(num_employees__lt=200).values('pk')
541.         subquery_test = Company.objects.filter(pk__in=Subquery(small_companies))
542.         self.assertCountEqual(subquery_test, [self.foobar_ltd, self.gmbh])
543.         subquery_test2 = Company.objects.filter(pk=Subquery(small_companies.filter(num_employees=3)))
544.         self.assertCountEqual(subquery_test2, [self.foobar_ltd])
545. 
546.     def test_uuid_pk_subquery(self):
547.         u = UUIDPK.objects.create()
548.         UUID.objects.create(uuid_fk=u)
549.         qs = UUIDPK.objects.filter(id__in=Subquery(UUID.objects.values('uuid_fk__id')))
550.         self.assertCountEqual(qs, [u])
551. 
552.     def test_nested_subquery(self):
553.         inner = Company.objects.filter(point_of_contact=OuterRef('pk'))
554.         outer = Employee.objects.annotate(is_point_of_contact=Exists(inner))
555.         contrived = Employee.objects.annotate(
556.             is_point_of_contact=Subquery(
557.                 outer.filter(pk=OuterRef('pk')).values('is_point_of_contact'),
558.                 output_field=BooleanField(),
559.             ),
560.         )
561.         self.assertCountEqual(contrived.values_list(), outer.values_list())
562. 
563.     def test_nested_subquery_join_outer_ref(self):
564.         inner = Employee.objects.filter(pk=OuterRef('ceo__pk')).values('pk')
565.         qs = Employee.objects.annotate(
566.             ceo_company=Subquery(
567.                 Company.objects.filter(
568.                     ceo__in=inner,
569.                     ceo__pk=OuterRef('pk'),
570.                 ).values('pk'),
571.             ),
572.         )
573.         self.assertSequenceEqual(
574.             qs.values_list('ceo_company', flat=True),
575.             [self.example_inc.pk, self.foobar_ltd.pk, self.gmbh.pk],
576.         )
577. 
578.     def test_nested_subquery_outer_ref_2(self):
579.         first = Time.objects.create(time='09:00')
580.         second = Time.objects.create(time='17:00')
581.         third = Time.objects.create(time='21:00')
582.         SimulationRun.objects.bulk_create([
583.             SimulationRun(start=first, end=second, midpoint='12:00'),
584.             SimulationRun(start=first, end=third, midpoint='15:00'),
585.             SimulationRun(start=second, end=first, midpoint='00:00'),
586.         ])
587.         inner = Time.objects.filter(time=OuterRef(OuterRef('time')), pk=OuterRef('start')).values('time')
588.         middle = SimulationRun.objects.annotate(other=Subquery(inner)).values('other')[:1]
589.         outer = Time.objects.annotate(other=Subquery(middle, output_field=TimeField()))
590.         # This is a contrived example. It exercises the double OuterRef form.
591.         self.assertCountEqual(outer, [first, second, third])
592. 
593.     def test_nested_subquery_outer_ref_with_autofield(self):
594.         first = Time.objects.create(time='09:00')
595.         second = Time.objects.create(time='17:00')
596.         SimulationRun.objects.create(start=first, end=second, midpoint='12:00')
597.         inner = SimulationRun.objects.filter(start=OuterRef(OuterRef('pk'))).values('start')
598.         middle = Time.objects.annotate(other=Subquery(inner)).values('other')[:1]
599.         outer = Time.objects.annotate(other=Subquery(middle, output_field=IntegerField()))
600.         # This exercises the double OuterRef form with AutoField as pk.
601.         self.assertCountEqual(outer, [first, second])
602. 
603.     def test_annotations_within_subquery(self):
604.         Company.objects.filter(num_employees__lt=50).update(ceo=Employee.objects.get(firstname='Frank'))
605.         inner = Company.objects.filter(
606.             ceo=OuterRef('pk')
607.         ).values('ceo').annotate(total_employees=Sum('num_employees')).values('total_employees')
608.         outer = Employee.objects.annotate(total_employees=Subquery(inner)).filter(salary__lte=Subquery(inner))
609.         self.assertSequenceEqual(
610.             outer.order_by('-total_employees').values('salary', 'total_employees'),
611.             [{'salary': 10, 'total_employees': 2300}, {'salary': 20, 'total_employees': 35}],
612.         )
613. 
614.     def test_subquery_references_joined_table_twice(self):
615.         inner = Company.objects.filter(
616.             num_chairs__gte=OuterRef('ceo__salary'),
617.             num_employees__gte=OuterRef('point_of_contact__salary'),
618.         )
619.         # Another contrived example (there is no need to have a subquery here)
620.         outer = Company.objects.filter(pk__in=Subquery(inner.values('pk')))
621.         self.assertFalse(outer.exists())
622. 
623.     def test_subquery_filter_by_aggregate(self):
624.         Number.objects.create(integer=1000, float=1.2)
625.         Employee.objects.create(salary=1000)
626.         qs = Number.objects.annotate(
627.             min_valuable_count=Subquery(
628.                 Employee.objects.filter(
629.                     salary=OuterRef('integer'),
630.                 ).annotate(cnt=Count('salary')).filter(cnt__gt=0).values('cnt')[:1]
631.             ),
632.         )
633.         self.assertEqual(qs.get().float, 1.2)
634. 
635.     def test_subquery_filter_by_lazy(self):
636.         self.max.manager = Manager.objects.create(name='Manager')
637.         self.max.save()
638.         max_manager = SimpleLazyObject(
639.             lambda: Manager.objects.get(pk=self.max.manager.pk)
640.         )
641.         qs = Company.objects.annotate(
642.             ceo_manager=Subquery(
643.                 Employee.objects.filter(
644.                     lastname=OuterRef('ceo__lastname'),
645.                 ).values('manager'),
646.             ),
647.         ).filter(ceo_manager=max_manager)
648.         self.assertEqual(qs.get(), self.gmbh)
649. 
650.     def test_aggregate_subquery_annotation(self):
651.         with self.assertNumQueries(1) as ctx:
652.             aggregate = Company.objects.annotate(
653.                 ceo_salary=Subquery(
654.                     Employee.objects.filter(
655.                         id=OuterRef('ceo_id'),
656.                     ).values('salary')
657.                 ),
658.             ).aggregate(
659.                 ceo_salary_gt_20=Count('pk', filter=Q(ceo_salary__gt=20)),
660.             )
661.         self.assertEqual(aggregate, {'ceo_salary_gt_20': 1})
662.         # Aggregation over a subquery annotation doesn't annotate the subquery
663.         # twice in the inner query.
664.         sql = ctx.captured_queries[0]['sql']
665.         self.assertLessEqual(sql.count('SELECT'), 3)
666.         # GROUP BY isn't required to aggregate over a query that doesn't
667.         # contain nested aggregates.
668.         self.assertNotIn('GROUP BY', sql)
669. 
670.     def test_explicit_output_field(self):
671.         class FuncA(Func):
672.             output_field = CharField()
673. 
674.         class FuncB(Func):
675.             pass
676. 
677.         expr = FuncB(FuncA())
678.         self.assertEqual(expr.output_field, FuncA.output_field)
679. 
680.     def test_outerref_mixed_case_table_name(self):
681.         inner = Result.objects.filter(result_time__gte=OuterRef('experiment__assigned'))
682.         outer = Result.objects.filter(pk__in=Subquery(inner.values('pk')))
683.         self.assertFalse(outer.exists())
684. 
685.     def test_outerref_with_operator(self):
686.         inner = Company.objects.filter(num_employees=OuterRef('ceo__salary') + 2)
687.         outer = Company.objects.filter(pk__in=Subquery(inner.values('pk')))
688.         self.assertEqual(outer.get().name, 'Test GmbH')
689. 
690.     def test_nested_outerref_with_function(self):
691.         self.gmbh.point_of_contact = Employee.objects.get(lastname='Meyer')
692.         self.gmbh.save()
693.         inner = Employee.objects.filter(
694.             lastname__startswith=Left(OuterRef(OuterRef('lastname')), 1),
695.         )
696.         qs = Employee.objects.annotate(
697.             ceo_company=Subquery(
698.                 Company.objects.filter(
699.                     point_of_contact__in=inner,
700.                     ceo__pk=OuterRef('pk'),
701.                 ).values('name'),
702.             ),
703.         ).filter(ceo_company__isnull=False)
704.         self.assertEqual(qs.get().ceo_company, 'Test GmbH')
705. 
706.     def test_annotation_with_outerref(self):
707.         gmbh_salary = Company.objects.annotate(
708.             max_ceo_salary_raise=Subquery(
709.                 Company.objects.annotate(
710.                     salary_raise=OuterRef('num_employees') + F('num_employees'),
711.                 ).order_by('-salary_raise').values('salary_raise')[:1],
712.                 output_field=IntegerField(),
713.             ),
714.         ).get(pk=self.gmbh.pk)
715.         self.assertEqual(gmbh_salary.max_ceo_salary_raise, 2332)
716. 
717.     def test_annotation_with_nested_outerref(self):
718.         self.gmbh.point_of_contact = Employee.objects.get(lastname='Meyer')
719.         self.gmbh.save()
720.         inner = Employee.objects.annotate(
721.             outer_lastname=OuterRef(OuterRef('lastname')),
722.         ).filter(lastname__startswith=Left('outer_lastname', 1))
723.         qs = Employee.objects.annotate(
724.             ceo_company=Subquery(
725.                 Company.objects.filter(
726.                     point_of_contact__in=inner,
727.                     ceo__pk=OuterRef('pk'),
728.                 ).values('name'),
729.             ),
730.         ).filter(ceo_company__isnull=False)
731.         self.assertEqual(qs.get().ceo_company, 'Test GmbH')
732. 
733.     def test_pickle_expression(self):
734.         expr = Value(1)
735.         expr.convert_value  # populate cached property
736.         self.assertEqual(pickle.loads(pickle.dumps(expr)), expr)
737. 
738.     def test_incorrect_field_in_F_expression(self):
739.         with self.assertRaisesMessage(FieldError, "Cannot resolve keyword 'nope' into field."):
740.             list(Employee.objects.filter(firstname=F('nope')))
741. 
742.     def test_incorrect_joined_field_in_F_expression(self):
743.         with self.assertRaisesMessage(FieldError, "Cannot resolve keyword 'nope' into field."):
744.             list(Company.objects.filter(ceo__pk=F('point_of_contact__nope')))
745. 
746.     def test_exists_in_filter(self):
747.         inner = Company.objects.filter(ceo=OuterRef('pk')).values('pk')
748.         qs1 = Employee.objects.filter(Exists(inner))
749.         qs2 = Employee.objects.annotate(found=Exists(inner)).filter(found=True)
750.         self.assertCountEqual(qs1, qs2)
751.         self.assertFalse(Employee.objects.exclude(Exists(inner)).exists())
752.         self.assertCountEqual(qs2, Employee.objects.exclude(~Exists(inner)))
753. 
754.     def test_subquery_in_filter(self):
755.         inner = Company.objects.filter(ceo=OuterRef('pk')).values('based_in_eu')
756.         self.assertSequenceEqual(
757.             Employee.objects.filter(Subquery(inner)),
758.             [self.foobar_ltd.ceo],
759.         )
760. 
761.     def test_subquery_group_by_outerref_in_filter(self):
762.         inner = Company.objects.annotate(
763.             employee=OuterRef('pk'),
764.         ).values('employee').annotate(
765.             min_num_chairs=Min('num_chairs'),
766.         ).values('ceo')
767.         self.assertIs(Employee.objects.filter(pk__in=Subquery(inner)).exists(), True)
768. 
769.     def test_case_in_filter_if_boolean_output_field(self):
770.         is_ceo = Company.objects.filter(ceo=OuterRef('pk'))
771.         is_poc = Company.objects.filter(point_of_contact=OuterRef('pk'))
772.         qs = Employee.objects.filter(
773.             Case(
774.                 When(Exists(is_ceo), then=True),
775.                 When(Exists(is_poc), then=True),
776.                 default=False,
777.                 output_field=BooleanField(),
778.             ),
779.         )
780.         self.assertCountEqual(qs, [self.example_inc.ceo, self.foobar_ltd.ceo, self.max])
781. 
782.     def test_boolean_expression_combined(self):
783.         is_ceo = Company.objects.filter(ceo=OuterRef('pk'))
784.         is_poc = Company.objects.filter(point_of_contact=OuterRef('pk'))
785.         self.gmbh.point_of_contact = self.max
786.         self.gmbh.save()
787.         self.assertCountEqual(
788.             Employee.objects.filter(Exists(is_ceo) | Exists(is_poc)),
789.             [self.example_inc.ceo, self.foobar_ltd.ceo, self.max],
790.         )
791.         self.assertCountEqual(
792.             Employee.objects.filter(Exists(is_ceo) & Exists(is_poc)),
793.             [self.max],
794.         )
795.         self.assertCountEqual(
796.             Employee.objects.filter(Exists(is_ceo) & Q(salary__gte=30)),
797.             [self.max],
798.         )
799.         self.assertCountEqual(
800.             Employee.objects.filter(Exists(is_poc) | Q(salary__lt=15)),
801.             [self.example_inc.ceo, self.max],
802.         )
803. 
804. 
805. class IterableLookupInnerExpressionsTests(TestCase):
806.     @classmethod
807.     def setUpTestData(cls):
808.         ceo = Employee.objects.create(firstname='Just', lastname='Doit', salary=30)
809.         # MySQL requires that the values calculated for expressions don't pass
810.         # outside of the field's range, so it's inconvenient to use the values
811.         # in the more general tests.
812.         Company.objects.create(name='5020 Ltd', num_employees=50, num_chairs=20, ceo=ceo)
813.         Company.objects.create(name='5040 Ltd', num_employees=50, num_chairs=40, ceo=ceo)
814.         Company.objects.create(name='5050 Ltd', num_employees=50, num_chairs=50, ceo=ceo)
815.         Company.objects.create(name='5060 Ltd', num_employees=50, num_chairs=60, ceo=ceo)
816.         Company.objects.create(name='99300 Ltd', num_employees=99, num_chairs=300, ceo=ceo)
817. 
818.     def test_in_lookup_allows_F_expressions_and_expressions_for_integers(self):
819.         # __in lookups can use F() expressions for integers.
820.         queryset = Company.objects.filter(num_employees__in=([F('num_chairs') - 10]))
821.         self.assertQuerysetEqual(queryset, ['<Company: 5060 Ltd>'], ordered=False)
822.         self.assertQuerysetEqual(
823.             Company.objects.filter(num_employees__in=([F('num_chairs') - 10, F('num_chairs') + 10])),
824.             ['<Company: 5040 Ltd>', '<Company: 5060 Ltd>'],
825.             ordered=False
826.         )
827.         self.assertQuerysetEqual(
828.             Company.objects.filter(
829.                 num_employees__in=([F('num_chairs') - 10, F('num_chairs'), F('num_chairs') + 10])
830.             ),
831.             ['<Company: 5040 Ltd>', '<Company: 5050 Ltd>', '<Company: 5060 Ltd>'],
832.             ordered=False
833.         )
834. 
835.     def test_expressions_in_lookups_join_choice(self):
836.         midpoint = datetime.time(13, 0)
837.         t1 = Time.objects.create(time=datetime.time(12, 0))
838.         t2 = Time.objects.create(time=datetime.time(14, 0))
839.         SimulationRun.objects.create(start=t1, end=t2, midpoint=midpoint)
840.         SimulationRun.objects.create(start=t1, end=None, midpoint=midpoint)
841.         SimulationRun.objects.create(start=None, end=t2, midpoint=midpoint)
842.         SimulationRun.objects.create(start=None, end=None, midpoint=midpoint)
843. 
844.         queryset = SimulationRun.objects.filter(midpoint__range=[F('start__time'), F('end__time')])
845.         self.assertQuerysetEqual(
846.             queryset,
847.             ['<SimulationRun: 13:00:00 (12:00:00 to 14:00:00)>'],
848.             ordered=False
849.         )
850.         for alias in queryset.query.alias_map.values():
851.             if isinstance(alias, Join):
852.                 self.assertEqual(alias.join_type, constants.INNER)
853. 
854.         queryset = SimulationRun.objects.exclude(midpoint__range=[F('start__time'), F('end__time')])
855.         self.assertQuerysetEqual(queryset, [], ordered=False)
856.         for alias in queryset.query.alias_map.values():
857.             if isinstance(alias, Join):
858.                 self.assertEqual(alias.join_type, constants.LOUTER)
859. 
860.     def test_range_lookup_allows_F_expressions_and_expressions_for_integers(self):
861.         # Range lookups can use F() expressions for integers.
862.         Company.objects.filter(num_employees__exact=F("num_chairs"))
863.         self.assertQuerysetEqual(
864.             Company.objects.filter(num_employees__range=(F('num_chairs'), 100)),
865.             ['<Company: 5020 Ltd>', '<Company: 5040 Ltd>', '<Company: 5050 Ltd>'],
866.             ordered=False
867.         )
868.         self.assertQuerysetEqual(
869.             Company.objects.filter(num_employees__range=(F('num_chairs') - 10, F('num_chairs') + 10)),
870.             ['<Company: 5040 Ltd>', '<Company: 5050 Ltd>', '<Company: 5060 Ltd>'],
871.             ordered=False
872.         )
873.         self.assertQuerysetEqual(
874.             Company.objects.filter(num_employees__range=(F('num_chairs') - 10, 100)),
875.             ['<Company: 5020 Ltd>', '<Company: 5040 Ltd>', '<Company: 5050 Ltd>', '<Company: 5060 Ltd>'],
876.             ordered=False
877.         )
878.         self.assertQuerysetEqual(
879.             Company.objects.filter(num_employees__range=(1, 100)),
880.             [
881.                 '<Company: 5020 Ltd>', '<Company: 5040 Ltd>', '<Company: 5050 Ltd>',
882.                 '<Company: 5060 Ltd>', '<Company: 99300 Ltd>',
883.             ],
884.             ordered=False
885.         )
886. 
887.     @unittest.skipUnless(connection.vendor == 'sqlite',
888.                          "This defensive test only works on databases that don't validate parameter types")
889.     def test_complex_expressions_do_not_introduce_sql_injection_via_untrusted_string_inclusion(self):
890.         """
891.         This tests that SQL injection isn't possible using compilation of
892.         expressions in iterable filters, as their compilation happens before
893.         the main query compilation. It's limited to SQLite, as PostgreSQL,
894.         Oracle and other vendors have defense in depth against this by type
895.         checking. Testing against SQLite (the most permissive of the built-in
896.         databases) demonstrates that the problem doesn't exist while keeping
897.         the test simple.
898.         """
899.         queryset = Company.objects.filter(name__in=[F('num_chairs') + '1)) OR ((1==1'])
900.         self.assertQuerysetEqual(queryset, [], ordered=False)
901. 
902.     def test_in_lookup_allows_F_expressions_and_expressions_for_datetimes(self):
903.         start = datetime.datetime(2016, 2, 3, 15, 0, 0)
904.         end = datetime.datetime(2016, 2, 5, 15, 0, 0)
905.         experiment_1 = Experiment.objects.create(
906.             name='Integrity testing',
907.             assigned=start.date(),
908.             start=start,
909.             end=end,
910.             completed=end.date(),
911.             estimated_time=end - start,
912.         )
913.         experiment_2 = Experiment.objects.create(
914.             name='Taste testing',
915.             assigned=start.date(),
916.             start=start,
917.             end=end,
918.             completed=end.date(),
919.             estimated_time=end - start,
920.         )
921.         Result.objects.create(
922.             experiment=experiment_1,
923.             result_time=datetime.datetime(2016, 2, 4, 15, 0, 0),
924.         )
925.         Result.objects.create(
926.             experiment=experiment_1,
927.             result_time=datetime.datetime(2016, 3, 10, 2, 0, 0),
928.         )
929.         Result.objects.create(
930.             experiment=experiment_2,
931.             result_time=datetime.datetime(2016, 1, 8, 5, 0, 0),
932.         )
933. 
934.         within_experiment_time = [F('experiment__start'), F('experiment__end')]
935.         queryset = Result.objects.filter(result_time__range=within_experiment_time)
936.         self.assertQuerysetEqual(queryset, ["<Result: Result at 2016-02-04 15:00:00>"])
937. 
938.         within_experiment_time = [F('experiment__start'), F('experiment__end')]
939.         queryset = Result.objects.filter(result_time__range=within_experiment_time)
940.         self.assertQuerysetEqual(queryset, ["<Result: Result at 2016-02-04 15:00:00>"])
941. 
942. 
943. class FTests(SimpleTestCase):
944. 
945.     def test_deepcopy(self):
946.         f = F("foo")
947.         g = deepcopy(f)
948.         self.assertEqual(f.name, g.name)
949. 
950.     def test_deconstruct(self):
951.         f = F('name')
952.         path, args, kwargs = f.deconstruct()
953.         self.assertEqual(path, 'django.db.models.expressions.F')
954.         self.assertEqual(args, (f.name,))
955.         self.assertEqual(kwargs, {})
956. 
957.     def test_equal(self):
958.         f = F('name')
959.         same_f = F('name')
960.         other_f = F('username')
961.         self.assertEqual(f, same_f)
962.         self.assertNotEqual(f, other_f)
963. 
964.     def test_hash(self):
965.         d = {F('name'): 'Bob'}
966.         self.assertIn(F('name'), d)
967.         self.assertEqual(d[F('name')], 'Bob')
968. 
969.     def test_not_equal_Value(self):
970.         f = F('name')
971.         value = Value('name')
972.         self.assertNotEqual(f, value)
973.         self.assertNotEqual(value, f)
974. 
975. 
976. class ExpressionsTests(TestCase):
977. 
978.     def test_F_reuse(self):
979.         f = F('id')
980.         n = Number.objects.create(integer=-1)
981.         c = Company.objects.create(
982.             name="Example Inc.", num_employees=2300, num_chairs=5,
983.             ceo=Employee.objects.create(firstname="Joe", lastname="Smith")
984.         )
985.         c_qs = Company.objects.filter(id=f)
986.         self.assertEqual(c_qs.get(), c)
987.         # Reuse the same F-object for another queryset
988.         n_qs = Number.objects.filter(id=f)
989.         self.assertEqual(n_qs.get(), n)
990.         # The original query still works correctly
991.         self.assertEqual(c_qs.get(), c)
992. 
993.     def test_patterns_escape(self):
994.         r"""
995.         Special characters (e.g. %, _ and \) stored in database are
996.         properly escaped when using a pattern lookup with an expression
997.         refs #16731
998.         """
999.         Employee.objects.bulk_create([
1000.             Employee(firstname="%Joh\\nny", lastname="%Joh\\n"),
1001.             Employee(firstname="Johnny", lastname="%John"),
1002.             Employee(firstname="Jean-Claude", lastname="Claud_"),
1003.             Employee(firstname="Jean-Claude", lastname="Claude"),
1004.             Employee(firstname="Jean-Claude", lastname="Claude%"),
1005.             Employee(firstname="Johnny", lastname="Joh\\n"),
1006.             Employee(firstname="Johnny", lastname="John"),
1007.             Employee(firstname="Johnny", lastname="_ohn"),
1008.         ])
1009. 
1010.         self.assertQuerysetEqual(
1011.             Employee.objects.filter(firstname__contains=F('lastname')),
1012.             ["<Employee: %Joh\\nny %Joh\\n>", "<Employee: Jean-Claude Claude>", "<Employee: Johnny John>"],
1013.             ordered=False,
1014.         )
1015.         self.assertQuerysetEqual(
1016.             Employee.objects.filter(firstname__startswith=F('lastname')),
1017.             ["<Employee: %Joh\\nny %Joh\\n>", "<Employee: Johnny John>"],
1018.             ordered=False,
1019.         )
1020.         self.assertQuerysetEqual(
1021.             Employee.objects.filter(firstname__endswith=F('lastname')),
1022.             ["<Employee: Jean-Claude Claude>"],
1023.             ordered=False,
1024.         )
1025. 
1026.     def test_insensitive_patterns_escape(self):
1027.         r"""
1028.         Special characters (e.g. %, _ and \) stored in database are
1029.         properly escaped when using a case insensitive pattern lookup with an
1030.         expression -- refs #16731
1031.         """
1032.         Employee.objects.bulk_create([
1033.             Employee(firstname="%Joh\\nny", lastname="%joh\\n"),
1034.             Employee(firstname="Johnny", lastname="%john"),
1035.             Employee(firstname="Jean-Claude", lastname="claud_"),
1036.             Employee(firstname="Jean-Claude", lastname="claude"),
1037.             Employee(firstname="Jean-Claude", lastname="claude%"),
1038.             Employee(firstname="Johnny", lastname="joh\\n"),
1039.             Employee(firstname="Johnny", lastname="john"),
1040.             Employee(firstname="Johnny", lastname="_ohn"),
1041.         ])
1042. 
1043.         self.assertQuerysetEqual(
1044.             Employee.objects.filter(firstname__icontains=F('lastname')),
1045.             ["<Employee: %Joh\\nny %joh\\n>", "<Employee: Jean-Claude claude>", "<Employee: Johnny john>"],
1046.             ordered=False,
1047.         )
1048.         self.assertQuerysetEqual(
1049.             Employee.objects.filter(firstname__istartswith=F('lastname')),
1050.             ["<Employee: %Joh\\nny %joh\\n>", "<Employee: Johnny john>"],
1051.             ordered=False,
1052.         )
1053.         self.assertQuerysetEqual(
1054.             Employee.objects.filter(firstname__iendswith=F('lastname')),
1055.             ["<Employee: Jean-Claude claude>"],
1056.             ordered=False,
1057.         )
1058. 
1059. 
1060. @isolate_apps('expressions')
1061. class SimpleExpressionTests(SimpleTestCase):
1062. 
1063.     def test_equal(self):
1064.         self.assertEqual(Expression(), Expression())
1065.         self.assertEqual(
1066.             Expression(IntegerField()),
1067.             Expression(output_field=IntegerField())
1068.         )
1069.         self.assertEqual(Expression(IntegerField()), mock.ANY)
1070.         self.assertNotEqual(
1071.             Expression(IntegerField()),
1072.             Expression(CharField())
1073.         )
1074. 
1075.         class TestModel(Model):
1076.             field = IntegerField()
1077.             other_field = IntegerField()
1078. 
1079.         self.assertNotEqual(
1080.             Expression(TestModel._meta.get_field('field')),
1081.             Expression(TestModel._meta.get_field('other_field')),
1082.         )
1083. 
1084.     def test_hash(self):
1085.         self.assertEqual(hash(Expression()), hash(Expression()))
1086.         self.assertEqual(
1087.             hash(Expression(IntegerField())),
1088.             hash(Expression(output_field=IntegerField()))
1089.         )
1090.         self.assertNotEqual(
1091.             hash(Expression(IntegerField())),
1092.             hash(Expression(CharField())),
1093.         )
1094. 
1095.         class TestModel(Model):
1096.             field = IntegerField()
1097.             other_field = IntegerField()
1098. 
1099.         self.assertNotEqual(
1100.             hash(Expression(TestModel._meta.get_field('field'))),
1101.             hash(Expression(TestModel._meta.get_field('other_field'))),
1102.         )
1103. 
1104. 
1105. class ExpressionsNumericTests(TestCase):
1106. 
1107.     @classmethod
1108.     def setUpTestData(cls):
1109.         Number(integer=-1).save()
1110.         Number(integer=42).save()
1111.         Number(integer=1337).save()
1112.         Number.objects.update(float=F('integer'))
1113. 
1114.     def test_fill_with_value_from_same_object(self):
1115.         """
1116.         We can fill a value in all objects with an other value of the
1117.         same object.
1118.         """
1119.         self.assertQuerysetEqual(
1120.             Number.objects.all(),
1121.             ['<Number: -1, -1.000>', '<Number: 42, 42.000>', '<Number: 1337, 1337.000>'],
1122.             ordered=False
1123.         )
1124. 
1125.     def test_increment_value(self):
1126.         """
1127.         We can increment a value of all objects in a query set.
1128.         """
1129.         self.assertEqual(Number.objects.filter(integer__gt=0).update(integer=F('integer') + 1), 2)
1130.         self.assertQuerysetEqual(
1131.             Number.objects.all(),
1132.             ['<Number: -1, -1.000>', '<Number: 43, 42.000>', '<Number: 1338, 1337.000>'],
1133.             ordered=False
1134.         )
1135. 
1136.     def test_filter_not_equals_other_field(self):
1137.         """
1138.         We can filter for objects, where a value is not equals the value
1139.         of an other field.
1140.         """
1141.         self.assertEqual(Number.objects.filter(integer__gt=0).update(integer=F('integer') + 1), 2)
1142.         self.assertQuerysetEqual(
1143.             Number.objects.exclude(float=F('integer')),
1144.             ['<Number: 43, 42.000>', '<Number: 1338, 1337.000>'],
1145.             ordered=False
1146.         )
1147. 
1148.     def test_complex_expressions(self):
1149.         """
1150.         Complex expressions of different connection types are possible.
1151.         """
1152.         n = Number.objects.create(integer=10, float=123.45)
1153.         self.assertEqual(Number.objects.filter(pk=n.pk).update(
1154.             float=F('integer') + F('float') * 2), 1)
1155. 
1156.         self.assertEqual(Number.objects.get(pk=n.pk).integer, 10)
1157.         self.assertEqual(Number.objects.get(pk=n.pk).float, Approximate(256.900, places=3))
1158. 
1159. 
1160. class ExpressionOperatorTests(TestCase):
1161.     @classmethod
1162.     def setUpTestData(cls):
1163.         cls.n = Number.objects.create(integer=42, float=15.5)
1164.         cls.n1 = Number.objects.create(integer=-42, float=-15.5)
1165. 
1166.     def test_lefthand_addition(self):
1167.         # LH Addition of floats and integers
1168.         Number.objects.filter(pk=self.n.pk).update(
1169.             integer=F('integer') + 15,
1170.             float=F('float') + 42.7
1171.         )
1172. 
1173.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 57)
1174.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(58.200, places=3))
1175. 
1176.     def test_lefthand_subtraction(self):
1177.         # LH Subtraction of floats and integers
1178.         Number.objects.filter(pk=self.n.pk).update(integer=F('integer') - 15, float=F('float') - 42.7)
1179. 
1180.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 27)
1181.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(-27.200, places=3))
1182. 
1183.     def test_lefthand_multiplication(self):
1184.         # Multiplication of floats and integers
1185.         Number.objects.filter(pk=self.n.pk).update(integer=F('integer') * 15, float=F('float') * 42.7)
1186. 
1187.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 630)
1188.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(661.850, places=3))
1189. 
1190.     def test_lefthand_division(self):
1191.         # LH Division of floats and integers
1192.         Number.objects.filter(pk=self.n.pk).update(integer=F('integer') / 2, float=F('float') / 42.7)
1193. 
1194.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 21)
1195.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(0.363, places=3))
1196. 
1197.     def test_lefthand_modulo(self):
1198.         # LH Modulo arithmetic on integers
1199.         Number.objects.filter(pk=self.n.pk).update(integer=F('integer') % 20)
1200.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 2)
1201. 
1202.     def test_lefthand_bitwise_and(self):
1203.         # LH Bitwise ands on integers
1204.         Number.objects.filter(pk=self.n.pk).update(integer=F('integer').bitand(56))
1205.         Number.objects.filter(pk=self.n1.pk).update(integer=F('integer').bitand(-56))
1206. 
1207.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 40)
1208.         self.assertEqual(Number.objects.get(pk=self.n1.pk).integer, -64)
1209. 
1210.     def test_lefthand_bitwise_left_shift_operator(self):
1211.         Number.objects.update(integer=F('integer').bitleftshift(2))
1212.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 168)
1213.         self.assertEqual(Number.objects.get(pk=self.n1.pk).integer, -168)
1214. 
1215.     def test_lefthand_bitwise_right_shift_operator(self):
1216.         Number.objects.update(integer=F('integer').bitrightshift(2))
1217.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 10)
1218.         self.assertEqual(Number.objects.get(pk=self.n1.pk).integer, -11)
1219. 
1220.     def test_lefthand_bitwise_or(self):
1221.         # LH Bitwise or on integers
1222.         Number.objects.update(integer=F('integer').bitor(48))
1223. 
1224.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 58)
1225.         self.assertEqual(Number.objects.get(pk=self.n1.pk).integer, -10)
1226. 
1227.     def test_lefthand_power(self):
1228.         # LH Power arithmetic operation on floats and integers
1229.         Number.objects.filter(pk=self.n.pk).update(integer=F('integer') ** 2, float=F('float') ** 1.5)
1230.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 1764)
1231.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(61.02, places=2))
1232. 
1233.     @unittest.skipIf(connection.vendor == 'oracle', "Oracle doesn't support bitwise XOR.")
1234.     def test_lefthand_bitwise_xor(self):
1235.         Number.objects.update(integer=F('integer').bitxor(48))
1236.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 26)
1237.         self.assertEqual(Number.objects.get(pk=self.n1.pk).integer, -26)
1238. 
1239.     @unittest.skipIf(connection.vendor == 'oracle', "Oracle doesn't support bitwise XOR.")
1240.     def test_lefthand_bitwise_xor_null(self):
1241.         employee = Employee.objects.create(firstname='John', lastname='Doe')
1242.         Employee.objects.update(salary=F('salary').bitxor(48))
1243.         employee.refresh_from_db()
1244.         self.assertIsNone(employee.salary)
1245. 
1246.     @unittest.skipUnless(connection.vendor == 'oracle', "Oracle doesn't support bitwise XOR.")
1247.     def test_lefthand_bitwise_xor_not_supported(self):
1248.         msg = 'Bitwise XOR is not supported in Oracle.'
1249.         with self.assertRaisesMessage(NotSupportedError, msg):
1250.             Number.objects.update(integer=F('integer').bitxor(48))
1251. 
1252.     def test_right_hand_addition(self):
1253.         # Right hand operators
1254.         Number.objects.filter(pk=self.n.pk).update(integer=15 + F('integer'), float=42.7 + F('float'))
1255. 
1256.         # RH Addition of floats and integers
1257.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 57)
1258.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(58.200, places=3))
1259. 
1260.     def test_right_hand_subtraction(self):
1261.         Number.objects.filter(pk=self.n.pk).update(integer=15 - F('integer'), float=42.7 - F('float'))
1262. 
1263.         # RH Subtraction of floats and integers
1264.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, -27)
1265.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(27.200, places=3))
1266. 
1267.     def test_right_hand_multiplication(self):
1268.         # RH Multiplication of floats and integers
1269.         Number.objects.filter(pk=self.n.pk).update(integer=15 * F('integer'), float=42.7 * F('float'))
1270. 
1271.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 630)
1272.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(661.850, places=3))
1273. 
1274.     def test_right_hand_division(self):
1275.         # RH Division of floats and integers
1276.         Number.objects.filter(pk=self.n.pk).update(integer=640 / F('integer'), float=42.7 / F('float'))
1277. 
1278.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 15)
1279.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(2.755, places=3))
1280. 
1281.     def test_right_hand_modulo(self):
1282.         # RH Modulo arithmetic on integers
1283.         Number.objects.filter(pk=self.n.pk).update(integer=69 % F('integer'))
1284. 
1285.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 27)
1286. 
1287.     def test_righthand_power(self):
1288.         # RH Power arithmetic operation on floats and integers
1289.         Number.objects.filter(pk=self.n.pk).update(integer=2 ** F('integer'), float=1.5 ** F('float'))
1290.         self.assertEqual(Number.objects.get(pk=self.n.pk).integer, 4398046511104)
1291.         self.assertEqual(Number.objects.get(pk=self.n.pk).float, Approximate(536.308, places=3))
1292. 
1293. 
1294. class FTimeDeltaTests(TestCase):
1295. 
1296.     @classmethod
1297.     def setUpTestData(cls):
1298.         cls.sday = sday = datetime.date(2010, 6, 25)
1299.         cls.stime = stime = datetime.datetime(2010, 6, 25, 12, 15, 30, 747000)
1300.         midnight = datetime.time(0)
1301. 
1302.         delta0 = datetime.timedelta(0)
1303.         delta1 = datetime.timedelta(microseconds=253000)
1304.         delta2 = datetime.timedelta(seconds=44)
1305.         delta3 = datetime.timedelta(hours=21, minutes=8)
1306.         delta4 = datetime.timedelta(days=10)
1307.         delta5 = datetime.timedelta(days=90)
1308. 
1309.         # Test data is set so that deltas and delays will be
1310.         # strictly increasing.
1311.         cls.deltas = []
1312.         cls.delays = []
1313.         cls.days_long = []
1314. 
1315.         # e0: started same day as assigned, zero duration
1316.         end = stime + delta0
1317.         cls.e0 = Experiment.objects.create(
1318.             name='e0', assigned=sday, start=stime, end=end,
1319.             completed=end.date(), estimated_time=delta0,
1320.         )
1321.         cls.deltas.append(delta0)
1322.         cls.delays.append(cls.e0.start - datetime.datetime.combine(cls.e0.assigned, midnight))
1323.         cls.days_long.append(cls.e0.completed - cls.e0.assigned)
1324. 
1325.         # e1: started one day after assigned, tiny duration, data
1326.         # set so that end time has no fractional seconds, which
1327.         # tests an edge case on sqlite.
1328.         delay = datetime.timedelta(1)
1329.         end = stime + delay + delta1
1330.         e1 = Experiment.objects.create(
1331.             name='e1', assigned=sday, start=stime + delay, end=end,
1332.             completed=end.date(), estimated_time=delta1,
1333.         )
1334.         cls.deltas.append(delta1)
1335.         cls.delays.append(e1.start - datetime.datetime.combine(e1.assigned, midnight))
1336.         cls.days_long.append(e1.completed - e1.assigned)
1337. 
1338.         # e2: started three days after assigned, small duration
1339.         end = stime + delta2
1340.         e2 = Experiment.objects.create(
1341.             name='e2', assigned=sday - datetime.timedelta(3), start=stime,
1342.             end=end, completed=end.date(), estimated_time=datetime.timedelta(hours=1),
1343.         )
1344.         cls.deltas.append(delta2)
1345.         cls.delays.append(e2.start - datetime.datetime.combine(e2.assigned, midnight))
1346.         cls.days_long.append(e2.completed - e2.assigned)
1347. 
1348.         # e3: started four days after assigned, medium duration
1349.         delay = datetime.timedelta(4)
1350.         end = stime + delay + delta3
1351.         e3 = Experiment.objects.create(
1352.             name='e3', assigned=sday, start=stime + delay, end=end,
1353.             completed=end.date(), estimated_time=delta3,
1354.         )
1355.         cls.deltas.append(delta3)
1356.         cls.delays.append(e3.start - datetime.datetime.combine(e3.assigned, midnight))
1357.         cls.days_long.append(e3.completed - e3.assigned)
1358. 
1359.         # e4: started 10 days after assignment, long duration
1360.         end = stime + delta4
1361.         e4 = Experiment.objects.create(
1362.             name='e4', assigned=sday - datetime.timedelta(10), start=stime,
1363.             end=end, completed=end.date(), estimated_time=delta4 - datetime.timedelta(1),
1364.         )
1365.         cls.deltas.append(delta4)
1366.         cls.delays.append(e4.start - datetime.datetime.combine(e4.assigned, midnight))
1367.         cls.days_long.append(e4.completed - e4.assigned)
1368. 
1369.         # e5: started a month after assignment, very long duration
1370.         delay = datetime.timedelta(30)
1371.         end = stime + delay + delta5
1372.         e5 = Experiment.objects.create(
1373.             name='e5', assigned=sday, start=stime + delay, end=end,
1374.             completed=end.date(), estimated_time=delta5,
1375.         )
1376.         cls.deltas.append(delta5)
1377.         cls.delays.append(e5.start - datetime.datetime.combine(e5.assigned, midnight))
1378.         cls.days_long.append(e5.completed - e5.assigned)
1379. 
1380.         cls.expnames = [e.name for e in Experiment.objects.all()]
1381. 
1382.     def test_multiple_query_compilation(self):
1383.         # Ticket #21643
1384.         queryset = Experiment.objects.filter(end__lt=F('start') + datetime.timedelta(hours=1))
1385.         q1 = str(queryset.query)
1386.         q2 = str(queryset.query)
1387.         self.assertEqual(q1, q2)
1388. 
1389.     def test_query_clone(self):
1390.         # Ticket #21643 - Crash when compiling query more than once
1391.         qs = Experiment.objects.filter(end__lt=F('start') + datetime.timedelta(hours=1))
1392.         qs2 = qs.all()
1393.         list(qs)
1394.         list(qs2)
1395.         # Intentionally no assert
1396. 
1397.     def test_delta_add(self):
1398.         for i, delta in enumerate(self.deltas):
1399.             test_set = [e.name for e in Experiment.objects.filter(end__lt=F('start') + delta)]
1400.             self.assertEqual(test_set, self.expnames[:i])
1401. 
1402.             test_set = [e.name for e in Experiment.objects.filter(end__lt=delta + F('start'))]
1403.             self.assertEqual(test_set, self.expnames[:i])
1404. 
1405.             test_set = [e.name for e in Experiment.objects.filter(end__lte=F('start') + delta)]
1406.             self.assertEqual(test_set, self.expnames[:i + 1])
1407. 
1408.     def test_delta_subtract(self):
1409.         for i, delta in enumerate(self.deltas):
1410.             test_set = [e.name for e in Experiment.objects.filter(start__gt=F('end') - delta)]
1411.             self.assertEqual(test_set, self.expnames[:i])
1412. 
1413.             test_set = [e.name for e in Experiment.objects.filter(start__gte=F('end') - delta)]
1414.             self.assertEqual(test_set, self.expnames[:i + 1])
1415. 
1416.     def test_exclude(self):
1417.         for i, delta in enumerate(self.deltas):
1418.             test_set = [e.name for e in Experiment.objects.exclude(end__lt=F('start') + delta)]
1419.             self.assertEqual(test_set, self.expnames[i:])
1420. 
1421.             test_set = [e.name for e in Experiment.objects.exclude(end__lte=F('start') + delta)]
1422.             self.assertEqual(test_set, self.expnames[i + 1:])
1423. 
1424.     def test_date_comparison(self):
1425.         for i, days in enumerate(self.days_long):
1426.             test_set = [e.name for e in Experiment.objects.filter(completed__lt=F('assigned') + days)]
1427.             self.assertEqual(test_set, self.expnames[:i])
1428. 
1429.             test_set = [e.name for e in Experiment.objects.filter(completed__lte=F('assigned') + days)]
1430.             self.assertEqual(test_set, self.expnames[:i + 1])
1431. 
1432.     @skipUnlessDBFeature("supports_mixed_date_datetime_comparisons")
1433.     def test_mixed_comparisons1(self):
1434.         for i, delay in enumerate(self.delays):
1435.             test_set = [e.name for e in Experiment.objects.filter(assigned__gt=F('start') - delay)]
1436.             self.assertEqual(test_set, self.expnames[:i])
1437. 
1438.             test_set = [e.name for e in Experiment.objects.filter(assigned__gte=F('start') - delay)]
1439.             self.assertEqual(test_set, self.expnames[:i + 1])
1440. 
1441.     def test_mixed_comparisons2(self):
1442.         for i, delay in enumerate(self.delays):
1443.             delay = datetime.timedelta(delay.days)
1444.             test_set = [e.name for e in Experiment.objects.filter(start__lt=F('assigned') + delay)]
1445.             self.assertEqual(test_set, self.expnames[:i])
1446. 
1447.             test_set = [
1448.                 e.name for e in Experiment.objects.filter(start__lte=F('assigned') + delay + datetime.timedelta(1))
1449.             ]
1450.             self.assertEqual(test_set, self.expnames[:i + 1])
1451. 
1452.     def test_delta_update(self):
1453.         for delta in self.deltas:
1454.             exps = Experiment.objects.all()
1455.             expected_durations = [e.duration() for e in exps]
1456.             expected_starts = [e.start + delta for e in exps]
1457.             expected_ends = [e.end + delta for e in exps]
1458. 
1459.             Experiment.objects.update(start=F('start') + delta, end=F('end') + delta)
1460.             exps = Experiment.objects.all()
1461.             new_starts = [e.start for e in exps]
1462.             new_ends = [e.end for e in exps]
1463.             new_durations = [e.duration() for e in exps]
1464.             self.assertEqual(expected_starts, new_starts)
1465.             self.assertEqual(expected_ends, new_ends)
1466.             self.assertEqual(expected_durations, new_durations)
1467. 
1468.     def test_invalid_operator(self):
1469.         with self.assertRaises(DatabaseError):
1470.             list(Experiment.objects.filter(start=F('start') * datetime.timedelta(0)))
1471. 
1472.     def test_durationfield_add(self):
1473.         zeros = [e.name for e in Experiment.objects.filter(start=F('start') + F('estimated_time'))]
1474.         self.assertEqual(zeros, ['e0'])
1475. 
1476.         end_less = [e.name for e in Experiment.objects.filter(end__lt=F('start') + F('estimated_time'))]
1477.         self.assertEqual(end_less, ['e2'])
1478. 
1479.         delta_math = [
1480.             e.name for e in
1481.             Experiment.objects.filter(end__gte=F('start') + F('estimated_time') + datetime.timedelta(hours=1))
1482.         ]
1483.         self.assertEqual(delta_math, ['e4'])
1484. 
1485.         queryset = Experiment.objects.annotate(shifted=ExpressionWrapper(
1486.             F('start') + Value(None, output_field=DurationField()),
1487.             output_field=DateTimeField(),
1488.         ))
1489.         self.assertIsNone(queryset.first().shifted)
1490. 
1491.     def test_duration_expressions(self):
1492.         for delta in self.deltas:
1493.             qs = Experiment.objects.annotate(duration=F('estimated_time') + delta)
1494.             for obj in qs:
1495.                 self.assertEqual(obj.duration, obj.estimated_time + delta)
1496. 
1497.     @skipUnlessDBFeature('supports_temporal_subtraction')
1498.     def test_date_subtraction(self):
1499.         queryset = Experiment.objects.annotate(
1500.             completion_duration=F('completed') - F('assigned'),
1501.         )


File: tests/expressions/tests.py
Line number range: 1502 - 2501
Content:
1502. 
1503.         at_least_5_days = {e.name for e in queryset.filter(completion_duration__gte=datetime.timedelta(days=5))}
1504.         self.assertEqual(at_least_5_days, {'e3', 'e4', 'e5'})
1505. 
1506.         at_least_120_days = {e.name for e in queryset.filter(completion_duration__gte=datetime.timedelta(days=120))}
1507.         self.assertEqual(at_least_120_days, {'e5'})
1508. 
1509.         less_than_5_days = {e.name for e in queryset.filter(completion_duration__lt=datetime.timedelta(days=5))}
1510.         self.assertEqual(less_than_5_days, {'e0', 'e1', 'e2'})
1511. 
1512.         queryset = Experiment.objects.annotate(
1513.             difference=F('completed') - Value(None, output_field=DateField()),
1514.         )
1515.         self.assertIsNone(queryset.first().difference)
1516. 
1517.         queryset = Experiment.objects.annotate(shifted=ExpressionWrapper(
1518.             F('completed') - Value(None, output_field=DurationField()),
1519.             output_field=DateField(),
1520.         ))
1521.         self.assertIsNone(queryset.first().shifted)
1522. 
1523.     @skipUnlessDBFeature('supports_temporal_subtraction')
1524.     def test_date_subquery_subtraction(self):
1525.         subquery = Experiment.objects.filter(pk=OuterRef('pk')).values('completed')
1526.         queryset = Experiment.objects.annotate(
1527.             difference=subquery - F('completed'),
1528.         ).filter(difference=datetime.timedelta())
1529.         self.assertTrue(queryset.exists())
1530. 
1531.     @skipUnlessDBFeature('supports_temporal_subtraction')
1532.     def test_date_case_subtraction(self):
1533.         queryset = Experiment.objects.annotate(
1534.             date_case=Case(
1535.                 When(Q(name='e0'), then=F('completed')),
1536.                 output_field=DateField(),
1537.             ),
1538.             completed_value=Value(
1539.                 self.e0.completed,
1540.                 output_field=DateField(),
1541.             ),
1542.             difference=F('date_case') - F('completed_value'),
1543.         ).filter(difference=datetime.timedelta())
1544.         self.assertEqual(queryset.get(), self.e0)
1545. 
1546.     @skipUnlessDBFeature('supports_temporal_subtraction')
1547.     def test_time_subtraction(self):
1548.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1549.         queryset = Time.objects.annotate(
1550.             difference=F('time') - Value(datetime.time(11, 15, 0)),
1551.         )
1552.         self.assertEqual(
1553.             queryset.get().difference,
1554.             datetime.timedelta(hours=1, minutes=15, seconds=15, microseconds=2345)
1555.         )
1556. 
1557.         queryset = Time.objects.annotate(
1558.             difference=F('time') - Value(None, output_field=TimeField()),
1559.         )
1560.         self.assertIsNone(queryset.first().difference)
1561. 
1562.         queryset = Time.objects.annotate(shifted=ExpressionWrapper(
1563.             F('time') - Value(None, output_field=DurationField()),
1564.             output_field=TimeField(),
1565.         ))
1566.         self.assertIsNone(queryset.first().shifted)
1567. 
1568.     @skipUnlessDBFeature('supports_temporal_subtraction')
1569.     def test_time_subquery_subtraction(self):
1570.         Time.objects.create(time=datetime.time(12, 30, 15, 2345))
1571.         subquery = Time.objects.filter(pk=OuterRef('pk')).values('time')
1572.         queryset = Time.objects.annotate(
1573.             difference=subquery - F('time'),
1574.         ).filter(difference=datetime.timedelta())
1575.         self.assertTrue(queryset.exists())
1576. 
1577.     @skipUnlessDBFeature('supports_temporal_subtraction')
1578.     def test_datetime_subtraction(self):
1579.         under_estimate = [
1580.             e.name for e in Experiment.objects.filter(estimated_time__gt=F('end') - F('start'))
1581.         ]
1582.         self.assertEqual(under_estimate, ['e2'])
1583. 
1584.         over_estimate = [
1585.             e.name for e in Experiment.objects.filter(estimated_time__lt=F('end') - F('start'))
1586.         ]
1587.         self.assertEqual(over_estimate, ['e4'])
1588. 
1589.         queryset = Experiment.objects.annotate(
1590.             difference=F('start') - Value(None, output_field=DateTimeField()),
1591.         )
1592.         self.assertIsNone(queryset.first().difference)
1593. 
1594.         queryset = Experiment.objects.annotate(shifted=ExpressionWrapper(
1595.             F('start') - Value(None, output_field=DurationField()),
1596.             output_field=DateTimeField(),
1597.         ))
1598.         self.assertIsNone(queryset.first().shifted)
1599. 
1600.     @skipUnlessDBFeature('supports_temporal_subtraction')
1601.     def test_datetime_subquery_subtraction(self):
1602.         subquery = Experiment.objects.filter(pk=OuterRef('pk')).values('start')
1603.         queryset = Experiment.objects.annotate(
1604.             difference=subquery - F('start'),
1605.         ).filter(difference=datetime.timedelta())
1606.         self.assertTrue(queryset.exists())
1607. 
1608.     @skipUnlessDBFeature('supports_temporal_subtraction')
1609.     def test_datetime_subtraction_microseconds(self):
1610.         delta = datetime.timedelta(microseconds=8999999999999999)
1611.         Experiment.objects.update(end=F('start') + delta)
1612.         qs = Experiment.objects.annotate(delta=F('end') - F('start'))
1613.         for e in qs:
1614.             self.assertEqual(e.delta, delta)
1615. 
1616.     def test_duration_with_datetime(self):
1617.         # Exclude e1 which has very high precision so we can test this on all
1618.         # backends regardless of whether or not it supports
1619.         # microsecond_precision.
1620.         over_estimate = Experiment.objects.exclude(name='e1').filter(
1621.             completed__gt=self.stime + F('estimated_time'),
1622.         ).order_by('name')
1623.         self.assertQuerysetEqual(over_estimate, ['e3', 'e4', 'e5'], lambda e: e.name)
1624. 
1625.     def test_duration_with_datetime_microseconds(self):
1626.         delta = datetime.timedelta(microseconds=8999999999999999)
1627.         qs = Experiment.objects.annotate(dt=ExpressionWrapper(
1628.             F('start') + delta,
1629.             output_field=DateTimeField(),
1630.         ))
1631.         for e in qs:
1632.             self.assertEqual(e.dt, e.start + delta)
1633. 
1634.     def test_date_minus_duration(self):
1635.         more_than_4_days = Experiment.objects.filter(
1636.             assigned__lt=F('completed') - Value(datetime.timedelta(days=4))
1637.         )
1638.         self.assertQuerysetEqual(more_than_4_days, ['e3', 'e4', 'e5'], lambda e: e.name)
1639. 
1640.     def test_negative_timedelta_update(self):
1641.         # subtract 30 seconds, 30 minutes, 2 hours and 2 days
1642.         experiments = Experiment.objects.filter(name='e0').annotate(
1643.             start_sub_seconds=F('start') + datetime.timedelta(seconds=-30),
1644.         ).annotate(
1645.             start_sub_minutes=F('start_sub_seconds') + datetime.timedelta(minutes=-30),
1646.         ).annotate(
1647.             start_sub_hours=F('start_sub_minutes') + datetime.timedelta(hours=-2),
1648.         ).annotate(
1649.             new_start=F('start_sub_hours') + datetime.timedelta(days=-2),
1650.         )
1651.         expected_start = datetime.datetime(2010, 6, 23, 9, 45, 0)
1652.         # subtract 30 microseconds
1653.         experiments = experiments.annotate(new_start=F('new_start') + datetime.timedelta(microseconds=-30))
1654.         expected_start += datetime.timedelta(microseconds=+746970)
1655.         experiments.update(start=F('new_start'))
1656.         e0 = Experiment.objects.get(name='e0')
1657.         self.assertEqual(e0.start, expected_start)
1658. 
1659. 
1660. class ValueTests(TestCase):
1661.     def test_update_TimeField_using_Value(self):
1662.         Time.objects.create()
1663.         Time.objects.update(time=Value(datetime.time(1), output_field=TimeField()))
1664.         self.assertEqual(Time.objects.get().time, datetime.time(1))
1665. 
1666.     def test_update_UUIDField_using_Value(self):
1667.         UUID.objects.create()
1668.         UUID.objects.update(uuid=Value(uuid.UUID('12345678901234567890123456789012'), output_field=UUIDField()))
1669.         self.assertEqual(UUID.objects.get().uuid, uuid.UUID('12345678901234567890123456789012'))
1670. 
1671.     def test_deconstruct(self):
1672.         value = Value('name')
1673.         path, args, kwargs = value.deconstruct()
1674.         self.assertEqual(path, 'django.db.models.expressions.Value')
1675.         self.assertEqual(args, (value.value,))
1676.         self.assertEqual(kwargs, {})
1677. 
1678.     def test_deconstruct_output_field(self):
1679.         value = Value('name', output_field=CharField())
1680.         path, args, kwargs = value.deconstruct()
1681.         self.assertEqual(path, 'django.db.models.expressions.Value')
1682.         self.assertEqual(args, (value.value,))
1683.         self.assertEqual(len(kwargs), 1)
1684.         self.assertEqual(kwargs['output_field'].deconstruct(), CharField().deconstruct())
1685. 
1686.     def test_equal(self):
1687.         value = Value('name')
1688.         self.assertEqual(value, Value('name'))
1689.         self.assertNotEqual(value, Value('username'))
1690. 
1691.     def test_hash(self):
1692.         d = {Value('name'): 'Bob'}
1693.         self.assertIn(Value('name'), d)
1694.         self.assertEqual(d[Value('name')], 'Bob')
1695. 
1696.     def test_equal_output_field(self):
1697.         value = Value('name', output_field=CharField())
1698.         same_value = Value('name', output_field=CharField())
1699.         other_value = Value('name', output_field=TimeField())
1700.         no_output_field = Value('name')
1701.         self.assertEqual(value, same_value)
1702.         self.assertNotEqual(value, other_value)
1703.         self.assertNotEqual(value, no_output_field)
1704. 
1705.     def test_raise_empty_expressionlist(self):
1706.         msg = 'ExpressionList requires at least one expression'
1707.         with self.assertRaisesMessage(ValueError, msg):
1708.             ExpressionList()
1709. 
1710.     def test_compile_unresolved(self):
1711.         # This test might need to be revisited later on if #25425 is enforced.
1712.         compiler = Time.objects.all().query.get_compiler(connection=connection)
1713.         value = Value('foo')
1714.         self.assertEqual(value.as_sql(compiler, connection), ('%s', ['foo']))
1715.         value = Value('foo', output_field=CharField())
1716.         self.assertEqual(value.as_sql(compiler, connection), ('%s', ['foo']))
1717. 
1718.     def test_resolve_output_field(self):
1719.         value_types = [
1720.             ('str', CharField),
1721.             (True, BooleanField),
1722.             (42, IntegerField),
1723.             (3.14, FloatField),
1724.             (datetime.date(2019, 5, 15), DateField),
1725.             (datetime.datetime(2019, 5, 15), DateTimeField),
1726.             (datetime.time(3, 16), TimeField),
1727.             (datetime.timedelta(1), DurationField),
1728.             (Decimal('3.14'), DecimalField),
1729.             (b'', BinaryField),
1730.             (uuid.uuid4(), UUIDField),
1731.         ]
1732.         for value, ouput_field_type in value_types:
1733.             with self.subTest(type=type(value)):
1734.                 expr = Value(value)
1735.                 self.assertIsInstance(expr.output_field, ouput_field_type)
1736. 
1737.     def test_resolve_output_field_failure(self):
1738.         msg = 'Cannot resolve expression type, unknown output_field'
1739.         with self.assertRaisesMessage(FieldError, msg):
1740.             Value(object()).output_field
1741. 
1742. 
1743. class ExistsTests(TestCase):
1744.     def test_optimizations(self):
1745.         with CaptureQueriesContext(connection) as context:
1746.             list(Experiment.objects.values(exists=Exists(
1747.                 Experiment.objects.order_by('pk'),
1748.             )).order_by())
1749.         captured_queries = context.captured_queries
1750.         self.assertEqual(len(captured_queries), 1)
1751.         captured_sql = captured_queries[0]['sql']
1752.         self.assertNotIn(
1753.             connection.ops.quote_name(Experiment._meta.pk.column),
1754.             captured_sql,
1755.         )
1756.         self.assertIn(
1757.             connection.ops.limit_offset_sql(None, 1),
1758.             captured_sql,
1759.         )
1760.         self.assertNotIn('ORDER BY', captured_sql)
1761. 
1762. 
1763. class FieldTransformTests(TestCase):
1764. 
1765.     @classmethod
1766.     def setUpTestData(cls):
1767.         cls.sday = sday = datetime.date(2010, 6, 25)
1768.         cls.stime = stime = datetime.datetime(2010, 6, 25, 12, 15, 30, 747000)
1769.         cls.ex1 = Experiment.objects.create(
1770.             name='Experiment 1',
1771.             assigned=sday,
1772.             completed=sday + datetime.timedelta(2),
1773.             estimated_time=datetime.timedelta(2),
1774.             start=stime,
1775.             end=stime + datetime.timedelta(2),
1776.         )
1777. 
1778.     def test_month_aggregation(self):
1779.         self.assertEqual(
1780.             Experiment.objects.aggregate(month_count=Count('assigned__month')),
1781.             {'month_count': 1}
1782.         )
1783. 
1784.     def test_transform_in_values(self):
1785.         self.assertQuerysetEqual(
1786.             Experiment.objects.values('assigned__month'),
1787.             ["{'assigned__month': 6}"]
1788.         )
1789. 
1790.     def test_multiple_transforms_in_values(self):
1791.         self.assertQuerysetEqual(
1792.             Experiment.objects.values('end__date__month'),
1793.             ["{'end__date__month': 6}"]
1794.         )
1795. 
1796. 
1797. class ReprTests(SimpleTestCase):
1798. 
1799.     def test_expressions(self):
1800.         self.assertEqual(
1801.             repr(Case(When(a=1))),
1802.             "<Case: CASE WHEN <Q: (AND: ('a', 1))> THEN Value(None), ELSE Value(None)>"
1803.         )
1804.         self.assertEqual(
1805.             repr(When(Q(age__gte=18), then=Value('legal'))),
1806.             "<When: WHEN <Q: (AND: ('age__gte', 18))> THEN Value(legal)>"
1807.         )
1808.         self.assertEqual(repr(Col('alias', 'field')), "Col(alias, field)")
1809.         self.assertEqual(repr(F('published')), "F(published)")
1810.         self.assertEqual(repr(F('cost') + F('tax')), "<CombinedExpression: F(cost) + F(tax)>")
1811.         self.assertEqual(
1812.             repr(ExpressionWrapper(F('cost') + F('tax'), IntegerField())),
1813.             "ExpressionWrapper(F(cost) + F(tax))"
1814.         )
1815.         self.assertEqual(repr(Func('published', function='TO_CHAR')), "Func(F(published), function=TO_CHAR)")
1816.         self.assertEqual(repr(OrderBy(Value(1))), 'OrderBy(Value(1), descending=False)')
1817.         self.assertEqual(repr(RawSQL('table.col', [])), "RawSQL(table.col, [])")
1818.         self.assertEqual(repr(Ref('sum_cost', Sum('cost'))), "Ref(sum_cost, Sum(F(cost)))")
1819.         self.assertEqual(repr(Value(1)), "Value(1)")
1820.         self.assertEqual(
1821.             repr(ExpressionList(F('col'), F('anothercol'))),
1822.             'ExpressionList(F(col), F(anothercol))'
1823.         )
1824.         self.assertEqual(
1825.             repr(ExpressionList(OrderBy(F('col'), descending=False))),
1826.             'ExpressionList(OrderBy(F(col), descending=False))'
1827.         )
1828. 
1829.     def test_functions(self):
1830.         self.assertEqual(repr(Coalesce('a', 'b')), "Coalesce(F(a), F(b))")
1831.         self.assertEqual(repr(Concat('a', 'b')), "Concat(ConcatPair(F(a), F(b)))")
1832.         self.assertEqual(repr(Length('a')), "Length(F(a))")
1833.         self.assertEqual(repr(Lower('a')), "Lower(F(a))")
1834.         self.assertEqual(repr(Substr('a', 1, 3)), "Substr(F(a), Value(1), Value(3))")
1835.         self.assertEqual(repr(Upper('a')), "Upper(F(a))")
1836. 
1837.     def test_aggregates(self):
1838.         self.assertEqual(repr(Avg('a')), "Avg(F(a))")
1839.         self.assertEqual(repr(Count('a')), "Count(F(a))")
1840.         self.assertEqual(repr(Count('*')), "Count('*')")
1841.         self.assertEqual(repr(Max('a')), "Max(F(a))")
1842.         self.assertEqual(repr(Min('a')), "Min(F(a))")
1843.         self.assertEqual(repr(StdDev('a')), "StdDev(F(a), sample=False)")
1844.         self.assertEqual(repr(Sum('a')), "Sum(F(a))")
1845.         self.assertEqual(repr(Variance('a', sample=True)), "Variance(F(a), sample=True)")
1846. 
1847.     def test_distinct_aggregates(self):
1848.         self.assertEqual(repr(Count('a', distinct=True)), "Count(F(a), distinct=True)")
1849.         self.assertEqual(repr(Count('*', distinct=True)), "Count('*', distinct=True)")
1850. 
1851.     def test_filtered_aggregates(self):
1852.         filter = Q(a=1)
1853.         self.assertEqual(repr(Avg('a', filter=filter)), "Avg(F(a), filter=(AND: ('a', 1)))")
1854.         self.assertEqual(repr(Count('a', filter=filter)), "Count(F(a), filter=(AND: ('a', 1)))")
1855.         self.assertEqual(repr(Max('a', filter=filter)), "Max(F(a), filter=(AND: ('a', 1)))")
1856.         self.assertEqual(repr(Min('a', filter=filter)), "Min(F(a), filter=(AND: ('a', 1)))")
1857.         self.assertEqual(repr(StdDev('a', filter=filter)), "StdDev(F(a), filter=(AND: ('a', 1)), sample=False)")
1858.         self.assertEqual(repr(Sum('a', filter=filter)), "Sum(F(a), filter=(AND: ('a', 1)))")
1859.         self.assertEqual(
1860.             repr(Variance('a', sample=True, filter=filter)),
1861.             "Variance(F(a), filter=(AND: ('a', 1)), sample=True)"
1862.         )
1863.         self.assertEqual(
1864.             repr(Count('a', filter=filter, distinct=True)), "Count(F(a), distinct=True, filter=(AND: ('a', 1)))"
1865.         )
1866. 
1867. 
1868. class CombinableTests(SimpleTestCase):
1869.     bitwise_msg = 'Use .bitand() and .bitor() for bitwise logical operations.'
1870. 
1871.     def test_negation(self):
1872.         c = Combinable()
1873.         self.assertEqual(-c, c * -1)
1874. 
1875.     def test_and(self):
1876.         with self.assertRaisesMessage(NotImplementedError, self.bitwise_msg):
1877.             Combinable() & Combinable()
1878. 
1879.     def test_or(self):
1880.         with self.assertRaisesMessage(NotImplementedError, self.bitwise_msg):
1881.             Combinable() | Combinable()
1882. 
1883.     def test_reversed_and(self):
1884.         with self.assertRaisesMessage(NotImplementedError, self.bitwise_msg):
1885.             object() & Combinable()
1886. 
1887.     def test_reversed_or(self):
1888.         with self.assertRaisesMessage(NotImplementedError, self.bitwise_msg):
1889.             object() | Combinable()
1890. 
1891. 
1892. class CombinedExpressionTests(SimpleTestCase):
1893.     def test_resolve_output_field(self):
1894.         tests = [
1895.             (IntegerField, AutoField, IntegerField),
1896.             (AutoField, IntegerField, IntegerField),
1897.             (IntegerField, DecimalField, DecimalField),
1898.             (DecimalField, IntegerField, DecimalField),
1899.             (IntegerField, FloatField, FloatField),
1900.             (FloatField, IntegerField, FloatField),
1901.         ]
1902.         connectors = [Combinable.ADD, Combinable.SUB, Combinable.MUL, Combinable.DIV]
1903.         for lhs, rhs, combined in tests:
1904.             for connector in connectors:
1905.                 with self.subTest(lhs=lhs, connector=connector, rhs=rhs, combined=combined):
1906.                     expr = CombinedExpression(
1907.                         Expression(lhs()),
1908.                         connector,
1909.                         Expression(rhs()),
1910.                     )
1911.                     self.assertIsInstance(expr.output_field, combined)
1912. 
1913. 
1914. class ExpressionWrapperTests(SimpleTestCase):
1915.     def test_empty_group_by(self):
1916.         expr = ExpressionWrapper(Value(3), output_field=IntegerField())
1917.         self.assertEqual(expr.get_group_by_cols(alias=None), [])
1918. 
1919.     def test_non_empty_group_by(self):
1920.         value = Value('f')
1921.         value.output_field = None
1922.         expr = ExpressionWrapper(Lower(value), output_field=IntegerField())
1923.         group_by_cols = expr.get_group_by_cols(alias=None)
1924.         self.assertEqual(group_by_cols, [expr.expression])
1925.         self.assertEqual(group_by_cols[0].output_field, expr.output_field)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 08:17:24,293 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user has asked for the full content of the file 'tests/expressions/tests.py'. The provided context contains three chunks of this file, which together make up the full content from line 1 to 1925. Therefore, the entire file content seen so far is relevant.", relative_path='tests/expressions/tests.py', start_line=1, end_line=1925)]
2025-12-23 08:17:24,296 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of tests/expressions/tests.py.
2025-12-23 08:17:24,296 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 08:17:24,296 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 08:17:24,297 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 3 existing contexts
2025-12-23 08:17:24,297 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-23 08:17:24,298 - thread-127824602068672.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-23 08:17:24,299 - thread-127824602068672.prometheus_context_collector - INFO - Successfully retrieved 4 context snippets
