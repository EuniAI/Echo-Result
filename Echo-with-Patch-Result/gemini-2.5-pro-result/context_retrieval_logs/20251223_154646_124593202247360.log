2025-12-23 15:46:46,921 - thread-124593202247360.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Add support for tzinfo parameter to TruncDate() and TruncTime().

Description: Description
	 
		(last modified by Joe Jackson)
	 
Description
TruncDate inherits from TruncBase, which includes the TimeZone mixin. This should allow a developer to pass in a tzinfo object to be used when converting TruncDate, but it actually uses the return value from get_current_timezone_name() unconditionally and completely discards the passed in timezone info object. The result is that attempting to aggregate by date doesn't work for timezones other than the global django.utils.timezone. For example I can't have the django app be in UTC and pass the "America/New_York" timezone in.
Here's the offending line: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L295
Note, that a similar issue is happening in TruncTime.
Here's the method I would expect it to use: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L17
Example
class TimeSlots(models.Model):
 start_at = models.DateTimeField()
tz = pytz.timezone("America/New_York")
report = (
 TimeSlots.objects.annotate(start_date=TruncDate("start_at", tzinfo=tz))
 .values("start_date")
 .annotate(timeslot_count=Count("id"))
 .values("start_date", "timeslot_count")
)
I would expect this to work, but currently the results are wrong for any timezone other than the one returned by django.utils.timezone.
Workaround
There was a workaround for me. I was able to use TruncDay and then convert the DateTimes returned outside of the database, but I found no way to convert from DateTime to Date in the database. Maybe a Cast would work, but I would expect TruncDate to work.
Patch
​PR

Patch information:
diff --git a/django/db/models/functions/datetime.py b/django/db/models/functions/datetime.py
index b6594b043b..6828980733 100644
--- a/django/db/models/functions/datetime.py
+++ b/django/db/models/functions/datetime.py
@@ -292,7 +292,7 @@ class TruncDate(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to date rather than truncate to date.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_date_sql(lhs, tzname)
         return sql, lhs_params
 
@@ -305,7 +305,7 @@ class TruncTime(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to time rather than truncate to time.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_time_sql(lhs, tzname)
         return sql, lhs_params
 
diff --git a/docs/ref/models/database-functions.txt b/docs/ref/models/database-functions.txt
index f5efdb7e87..9d8e4b597c 100644
--- a/docs/ref/models/database-functions.txt
+++ b/docs/ref/models/database-functions.txt
@@ -623,7 +623,7 @@ that deal with date-parts can be used with ``DateField``::
 ``DateTimeField`` truncation
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
-.. class:: TruncDate(expression, **extra)
+.. class:: TruncDate(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'date'
     .. attribute:: output_field = DateField()
@@ -632,7 +632,7 @@ that deal with date-parts can be used with ``DateField``::
 truncate function. It's also registered as a transform on  ``DateTimeField`` as
 ``__date``.
 
-.. class:: TruncTime(expression, **extra)
+.. class:: TruncTime(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'time'
     .. attribute:: output_field = TimeField()


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 15:46:47,032 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Add support for tzinfo parameter to TruncDate() and TruncTime().

Description: Description
	 
		(last modified by Joe Jackson)
	 
Description
TruncDate inherits from TruncBase, which includes the TimeZone mixin. This should allow a developer to pass in a tzinfo object to be used when converting TruncDate, but it actually uses the return value from get_current_timezone_name() unconditionally and completely discards the passed in timezone info object. The result is that attempting to aggregate by date doesn't work for timezones other than the global django.utils.timezone. For example I can't have the django app be in UTC and pass the "America/New_York" timezone in.
Here's the offending line: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L295
Note, that a similar issue is happening in TruncTime.
Here's the method I would expect it to use: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L17
Example
class TimeSlots(models.Model):
 start_at = models.DateTimeField()
tz = pytz.timezone("America/New_York")
report = (
 TimeSlots.objects.annotate(start_date=TruncDate("start_at", tzinfo=tz))
 .values("start_date")
 .annotate(timeslot_count=Count("id"))
 .values("start_date", "timeslot_count")
)
I would expect this to work, but currently the results are wrong for any timezone other than the one returned by django.utils.timezone.
Workaround
There was a workaround for me. I was able to use TruncDay and then convert the DateTimes returned outside of the database, but I found no way to convert from DateTime to Date in the database. Maybe a Cast would work, but I would expect TruncDate to work.
Patch
​PR

Patch information:
diff --git a/django/db/models/functions/datetime.py b/django/db/models/functions/datetime.py
index b6594b043b..6828980733 100644
--- a/django/db/models/functions/datetime.py
+++ b/django/db/models/functions/datetime.py
@@ -292,7 +292,7 @@ class TruncDate(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to date rather than truncate to date.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_date_sql(lhs, tzname)
         return sql, lhs_params
 
@@ -305,7 +305,7 @@ class TruncTime(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to time rather than truncate to time.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_time_sql(lhs, tzname)
         return sql, lhs_params
 
diff --git a/docs/ref/models/database-functions.txt b/docs/ref/models/database-functions.txt
index f5efdb7e87..9d8e4b597c 100644
--- a/docs/ref/models/database-functions.txt
+++ b/docs/ref/models/database-functions.txt
@@ -623,7 +623,7 @@ that deal with date-parts can be used with ``DateField``::
 ``DateTimeField`` truncation
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
-.. class:: TruncDate(expression, **extra)
+.. class:: TruncDate(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'date'
     .. attribute:: output_field = DateField()
@@ -632,7 +632,7 @@ that deal with date-parts can be used with ``DateField``::
 truncate function. It's also registered as a transform on  ``DateTimeField`` as
 ``__date``.
 
-.. class:: TruncTime(expression, **extra)
+.. class:: TruncTime(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'time'
     .. attribute:: output_field = TimeField()


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 15:47:23,218 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find relevant test cases for a bug fix in `TruncDate` and `TruncTime`. The bug is related to timezone handling. The most relevant tests are likely in the test file that covers date/time database functions, specifically truncation and extraction. The file `tests/db_functions/datetime/test_extract_trunc.py` is the most likely candidate. To fully understand the fix and the existing tests, the implementation file `django/db/models/functions/datetime.py` where the change is applied is also necessary. It contains the definitions of `TruncDate`, `TruncTime`, and their base classes which are essential for understanding the `tzinfo` handling.' query='Please provide the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`.' extra_requirements='' purpose='I need these files to find existing tests for timezone-aware database functions and to understand the implementation of the `Trunc` functions to identify the most relevant examples for the bug fix.'
2025-12-23 15:47:23,221 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`.
2025-12-23 15:47:23,221 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 15:47:23,223 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 15:47:23,224 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 15:47:23,224 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`.
Purpose: I need these files to find existing tests for timezone-aware database functions and to understand the implementation of the `Trunc` functions to identify the most relevant examples for the bug fix.
2025-12-23 15:47:26,318 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the contents of both `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py` so you can examine the `Trunc` function's implementation and existing tests. This should help you identify relevant examples for your bug fix." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/db_functions/datetime/test_extract_trunc.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2133, 'candidates_token_count': 120, 'total_token_count': 2401, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2133}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 120}], 'thoughts_token_count': 148, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.05931883255640666, 'model_name': 'gemini-2.5-pro'} id='run--d2897f5d-01cb-40f6-ba20-6ed7fe11cfb1-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/functions/datetime.py'}, 'id': 'd5e44016-6e6d-4976-9fa6-542672adc36e', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/db_functions/datetime/test_extract_trunc.py'}, 'id': '047fe97f-b8e5-40d7-98ae-00ed80433136', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2133, 'output_tokens': 120, 'total_tokens': 2401, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 148}}
2025-12-23 15:47:30,966 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have read the file `django/db/models/functions/datetime.py` and the initial part of `tests/db_functions/datetime/test_extract_trunc.py`. To get the complete testing context, I will now read the remaining portion of the test file. This will allow for a comprehensive analysis of both the implementation and the tests for the `Trunc` functions.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/db_functions/datetime/test_extract_trunc.py", "start_line": 501.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17517, 'candidates_token_count': 111, 'total_token_count': 17792, 'cached_content_token_count': 1911, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17517}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1911}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 111}], 'thoughts_token_count': 164}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22887169777810037, 'model_name': 'gemini-2.5-pro'} id='run--69433218-c19a-4ccb-99c3-fb25bae3b537-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/db_functions/datetime/test_extract_trunc.py', 'start_line': 501.0}, 'id': '3b0ff0d6-c75e-46ae-965e-07670be9467a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17517, 'output_tokens': 111, 'total_tokens': 17792, 'input_token_details': {'cache_read': 1911}, 'output_token_details': {'reasoning': 164}}
2025-12-23 15:47:34,152 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I made an error in my previous attempt to read the remainder of the test file. I will now correct this by specifying an end line and retrieve the rest of the content from `tests/db_functions/datetime/test_extract_trunc.py` for your review.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/db_functions/datetime/test_extract_trunc.py", "start_line": 501.0, "end_line": 1500.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17674, 'candidates_token_count': 91, 'total_token_count': 17863, 'cached_content_token_count': 17177, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17674}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17177}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 91}], 'thoughts_token_count': 98}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10679559393243475, 'model_name': 'gemini-2.5-pro'} id='run--f5bb98d0-e069-41ef-bcee-fb151105023f-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/db_functions/datetime/test_extract_trunc.py', 'start_line': 501.0, 'end_line': 1500.0}, 'id': '7ec66a88-54c1-4167-be0a-a69a1a56f05a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17674, 'output_tokens': 91, 'total_tokens': 17863, 'input_token_details': {'cache_read': 17177}, 'output_token_details': {'reasoning': 98}}
2025-12-23 15:47:41,929 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`. This will allow you to examine the implementation of the `Trunc` functions and their existing tests. The test file `tests/db_functions/datetime/test_extract_trunc.py` contains relevant examples for timezone-aware database functions, which should be helpful for your bug fix.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 33128, 'candidates_token_count': 97, 'total_token_count': 33779, 'cached_content_token_count': 17576, 'prompt_tokens_details': [{'modality': 1, 'token_count': 33128}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17576}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 97}], 'thoughts_token_count': 554}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6391485941778753, 'model_name': 'gemini-2.5-pro'} id='run--6d50a54e-c504-4b46-a960-c6dc8db3bebe-0' usage_metadata={'input_tokens': 33128, 'output_tokens': 97, 'total_tokens': 33779, 'input_token_details': {'cache_read': 17576}, 'output_token_details': {'reasoning': 554}}
2025-12-23 15:47:41,931 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need these files to find existing tests for timezone-aware database functions and to understand the implementation of the `Trunc` functions to identify the most relevant examples for the bug fix.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/functions/datetime.py
Line number range: 1 - 326
Content:
1. from datetime import datetime
2. 
3. from django.conf import settings
4. from django.db.models.expressions import Func
5. from django.db.models.fields import (
6.     DateField, DateTimeField, DurationField, Field, IntegerField, TimeField,
7. )
8. from django.db.models.lookups import (
9.     Transform, YearExact, YearGt, YearGte, YearLt, YearLte,
10. )
11. from django.utils import timezone
12. 
13. 
14. class TimezoneMixin:
15.     tzinfo = None
16. 
17.     def get_tzname(self):
18.         # Timezone conversions must happen to the input datetime *before*
19.         # applying a function. 2015-12-31 23:00:00 -02:00 is stored in the
20.         # database as 2016-01-01 01:00:00 +00:00. Any results should be
21.         # based on the input datetime not the stored datetime.
22.         tzname = None
23.         if settings.USE_TZ:
24.             if self.tzinfo is None:
25.                 tzname = timezone.get_current_timezone_name()
26.             else:
27.                 tzname = timezone._get_timezone_name(self.tzinfo)
28.         return tzname
29. 
30. 
31. class Extract(TimezoneMixin, Transform):
32.     lookup_name = None
33.     output_field = IntegerField()
34. 
35.     def __init__(self, expression, lookup_name=None, tzinfo=None, **extra):
36.         if self.lookup_name is None:
37.             self.lookup_name = lookup_name
38.         if self.lookup_name is None:
39.             raise ValueError('lookup_name must be provided')
40.         self.tzinfo = tzinfo
41.         super().__init__(expression, **extra)
42. 
43.     def as_sql(self, compiler, connection):
44.         sql, params = compiler.compile(self.lhs)
45.         lhs_output_field = self.lhs.output_field
46.         if isinstance(lhs_output_field, DateTimeField):
47.             tzname = self.get_tzname()
48.             sql = connection.ops.datetime_extract_sql(self.lookup_name, sql, tzname)
49.         elif isinstance(lhs_output_field, DateField):
50.             sql = connection.ops.date_extract_sql(self.lookup_name, sql)
51.         elif isinstance(lhs_output_field, TimeField):
52.             sql = connection.ops.time_extract_sql(self.lookup_name, sql)
53.         elif isinstance(lhs_output_field, DurationField):
54.             if not connection.features.has_native_duration_field:
55.                 raise ValueError('Extract requires native DurationField database support.')
56.             sql = connection.ops.time_extract_sql(self.lookup_name, sql)
57.         else:
58.             # resolve_expression has already validated the output_field so this
59.             # assert should never be hit.
60.             assert False, "Tried to Extract from an invalid type."
61.         return sql, params
62. 
63.     def resolve_expression(self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False):
64.         copy = super().resolve_expression(query, allow_joins, reuse, summarize, for_save)
65.         field = copy.lhs.output_field
66.         if not isinstance(field, (DateField, DateTimeField, TimeField, DurationField)):
67.             raise ValueError(
68.                 'Extract input expression must be DateField, DateTimeField, '
69.                 'TimeField, or DurationField.'
70.             )
71.         # Passing dates to functions expecting datetimes is most likely a mistake.
72.         if type(field) == DateField and copy.lookup_name in ('hour', 'minute', 'second'):
73.             raise ValueError(
74.                 "Cannot extract time component '%s' from DateField '%s'. " % (copy.lookup_name, field.name)
75.             )
76.         if (
77.             isinstance(field, DurationField) and
78.             copy.lookup_name in ('year', 'iso_year', 'month', 'week', 'week_day', 'iso_week_day', 'quarter')
79.         ):
80.             raise ValueError(
81.                 "Cannot extract component '%s' from DurationField '%s'."
82.                 % (copy.lookup_name, field.name)
83.             )
84.         return copy
85. 
86. 
87. class ExtractYear(Extract):
88.     lookup_name = 'year'
89. 
90. 
91. class ExtractIsoYear(Extract):
92.     """Return the ISO-8601 week-numbering year."""
93.     lookup_name = 'iso_year'
94. 
95. 
96. class ExtractMonth(Extract):
97.     lookup_name = 'month'
98. 
99. 
100. class ExtractDay(Extract):
101.     lookup_name = 'day'
102. 
103. 
104. class ExtractWeek(Extract):
105.     """
106.     Return 1-52 or 53, based on ISO-8601, i.e., Monday is the first of the
107.     week.
108.     """
109.     lookup_name = 'week'
110. 
111. 
112. class ExtractWeekDay(Extract):
113.     """
114.     Return Sunday=1 through Saturday=7.
115. 
116.     To replicate this in Python: (mydatetime.isoweekday() % 7) + 1
117.     """
118.     lookup_name = 'week_day'
119. 
120. 
121. class ExtractIsoWeekDay(Extract):
122.     """Return Monday=1 through Sunday=7, based on ISO-8601."""
123.     lookup_name = 'iso_week_day'
124. 
125. 
126. class ExtractQuarter(Extract):
127.     lookup_name = 'quarter'
128. 
129. 
130. class ExtractHour(Extract):
131.     lookup_name = 'hour'
132. 
133. 
134. class ExtractMinute(Extract):
135.     lookup_name = 'minute'
136. 
137. 
138. class ExtractSecond(Extract):
139.     lookup_name = 'second'
140. 
141. 
142. DateField.register_lookup(ExtractYear)
143. DateField.register_lookup(ExtractMonth)
144. DateField.register_lookup(ExtractDay)
145. DateField.register_lookup(ExtractWeekDay)
146. DateField.register_lookup(ExtractIsoWeekDay)
147. DateField.register_lookup(ExtractWeek)
148. DateField.register_lookup(ExtractIsoYear)
149. DateField.register_lookup(ExtractQuarter)
150. 
151. TimeField.register_lookup(ExtractHour)
152. TimeField.register_lookup(ExtractMinute)
153. TimeField.register_lookup(ExtractSecond)
154. 
155. DateTimeField.register_lookup(ExtractHour)
156. DateTimeField.register_lookup(ExtractMinute)
157. DateTimeField.register_lookup(ExtractSecond)
158. 
159. ExtractYear.register_lookup(YearExact)
160. ExtractYear.register_lookup(YearGt)
161. ExtractYear.register_lookup(YearGte)
162. ExtractYear.register_lookup(YearLt)
163. ExtractYear.register_lookup(YearLte)
164. 
165. ExtractIsoYear.register_lookup(YearExact)
166. ExtractIsoYear.register_lookup(YearGt)
167. ExtractIsoYear.register_lookup(YearGte)
168. ExtractIsoYear.register_lookup(YearLt)
169. ExtractIsoYear.register_lookup(YearLte)
170. 
171. 
172. class Now(Func):
173.     template = 'CURRENT_TIMESTAMP'
174.     output_field = DateTimeField()
175. 
176.     def as_postgresql(self, compiler, connection, **extra_context):
177.         # PostgreSQL's CURRENT_TIMESTAMP means "the time at the start of the
178.         # transaction". Use STATEMENT_TIMESTAMP to be cross-compatible with
179.         # other databases.
180.         return self.as_sql(compiler, connection, template='STATEMENT_TIMESTAMP()', **extra_context)
181. 
182. 
183. class TruncBase(TimezoneMixin, Transform):
184.     kind = None
185.     tzinfo = None
186. 
187.     def __init__(self, expression, output_field=None, tzinfo=None, is_dst=None, **extra):
188.         self.tzinfo = tzinfo
189.         self.is_dst = is_dst
190.         super().__init__(expression, output_field=output_field, **extra)
191. 
192.     def as_sql(self, compiler, connection):
193.         inner_sql, inner_params = compiler.compile(self.lhs)
194.         if isinstance(self.output_field, DateTimeField):
195.             tzname = self.get_tzname()
196.             sql = connection.ops.datetime_trunc_sql(self.kind, inner_sql, tzname)
197.         elif isinstance(self.output_field, DateField):
198.             sql = connection.ops.date_trunc_sql(self.kind, inner_sql)
199.         elif isinstance(self.output_field, TimeField):
200.             sql = connection.ops.time_trunc_sql(self.kind, inner_sql)
201.         else:
202.             raise ValueError('Trunc only valid on DateField, TimeField, or DateTimeField.')
203.         return sql, inner_params
204. 
205.     def resolve_expression(self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False):
206.         copy = super().resolve_expression(query, allow_joins, reuse, summarize, for_save)
207.         field = copy.lhs.output_field
208.         # DateTimeField is a subclass of DateField so this works for both.
209.         assert isinstance(field, (DateField, TimeField)), (
210.             "%r isn't a DateField, TimeField, or DateTimeField." % field.name
211.         )
212.         # If self.output_field was None, then accessing the field will trigger
213.         # the resolver to assign it to self.lhs.output_field.
214.         if not isinstance(copy.output_field, (DateField, DateTimeField, TimeField)):
215.             raise ValueError('output_field must be either DateField, TimeField, or DateTimeField')
216.         # Passing dates or times to functions expecting datetimes is most
217.         # likely a mistake.
218.         class_output_field = self.__class__.output_field if isinstance(self.__class__.output_field, Field) else None
219.         output_field = class_output_field or copy.output_field
220.         has_explicit_output_field = class_output_field or field.__class__ is not copy.output_field.__class__
221.         if type(field) == DateField and (
222.                 isinstance(output_field, DateTimeField) or copy.kind in ('hour', 'minute', 'second', 'time')):
223.             raise ValueError("Cannot truncate DateField '%s' to %s. " % (
224.                 field.name, output_field.__class__.__name__ if has_explicit_output_field else 'DateTimeField'
225.             ))
226.         elif isinstance(field, TimeField) and (
227.                 isinstance(output_field, DateTimeField) or
228.                 copy.kind in ('year', 'quarter', 'month', 'week', 'day', 'date')):
229.             raise ValueError("Cannot truncate TimeField '%s' to %s. " % (
230.                 field.name, output_field.__class__.__name__ if has_explicit_output_field else 'DateTimeField'
231.             ))
232.         return copy
233. 
234.     def convert_value(self, value, expression, connection):
235.         if isinstance(self.output_field, DateTimeField):
236.             if not settings.USE_TZ:
237.                 pass
238.             elif value is not None:
239.                 value = value.replace(tzinfo=None)
240.                 value = timezone.make_aware(value, self.tzinfo, is_dst=self.is_dst)
241.             elif not connection.features.has_zoneinfo_database:
242.                 raise ValueError(
243.                     'Database returned an invalid datetime value. Are time '
244.                     'zone definitions for your database installed?'
245.                 )
246.         elif isinstance(value, datetime):
247.             if value is None:
248.                 pass
249.             elif isinstance(self.output_field, DateField):
250.                 value = value.date()
251.             elif isinstance(self.output_field, TimeField):
252.                 value = value.time()
253.         return value
254. 
255. 
256. class Trunc(TruncBase):
257. 
258.     def __init__(self, expression, kind, output_field=None, tzinfo=None, is_dst=None, **extra):
259.         self.kind = kind
260.         super().__init__(
261.             expression, output_field=output_field, tzinfo=tzinfo,
262.             is_dst=is_dst, **extra
263.         )
264. 
265. 
266. class TruncYear(TruncBase):
267.     kind = 'year'
268. 
269. 
270. class TruncQuarter(TruncBase):
271.     kind = 'quarter'
272. 
273. 
274. class TruncMonth(TruncBase):
275.     kind = 'month'
276. 
277. 
278. class TruncWeek(TruncBase):
279.     """Truncate to midnight on the Monday of the week."""
280.     kind = 'week'
281. 
282. 
283. class TruncDay(TruncBase):
284.     kind = 'day'
285. 
286. 
287. class TruncDate(TruncBase):
288.     kind = 'date'
289.     lookup_name = 'date'
290.     output_field = DateField()
291. 
292.     def as_sql(self, compiler, connection):
293.         # Cast to date rather than truncate to date.
294.         lhs, lhs_params = compiler.compile(self.lhs)
295.         tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
296.         sql = connection.ops.datetime_cast_date_sql(lhs, tzname)
297.         return sql, lhs_params
298. 
299. 
300. class TruncTime(TruncBase):
301.     kind = 'time'
302.     lookup_name = 'time'
303.     output_field = TimeField()
304. 
305.     def as_sql(self, compiler, connection):
306.         # Cast to time rather than truncate to time.
307.         lhs, lhs_params = compiler.compile(self.lhs)
308.         tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
309.         sql = connection.ops.datetime_cast_time_sql(lhs, tzname)
310.         return sql, lhs_params
311. 
312. 
313. class TruncHour(TruncBase):
314.     kind = 'hour'
315. 
316. 
317. class TruncMinute(TruncBase):
318.     kind = 'minute'
319. 
320. 
321. class TruncSecond(TruncBase):
322.     kind = 'second'
323. 
324. 
325. DateTimeField.register_lookup(TruncDate)
326. DateTimeField.register_lookup(TruncTime)


File: tests/db_functions/datetime/test_extract_trunc.py
Line number range: 1 - 500
Content:
1. from datetime import datetime, timedelta, timezone as datetime_timezone
2. 
3. import pytz
4. 
5. from django.conf import settings
6. from django.db.models import (
7.     DateField, DateTimeField, F, IntegerField, Max, OuterRef, Subquery,
8.     TimeField,
9. )
10. from django.db.models.functions import (
11.     Extract, ExtractDay, ExtractHour, ExtractIsoWeekDay, ExtractIsoYear,
12.     ExtractMinute, ExtractMonth, ExtractQuarter, ExtractSecond, ExtractWeek,
13.     ExtractWeekDay, ExtractYear, Trunc, TruncDate, TruncDay, TruncHour,
14.     TruncMinute, TruncMonth, TruncQuarter, TruncSecond, TruncTime, TruncWeek,
15.     TruncYear,
16. )
17. from django.test import (
18.     TestCase, override_settings, skipIfDBFeature, skipUnlessDBFeature,
19. )
20. from django.utils import timezone
21. 
22. from ..models import Author, DTModel, Fan
23. 
24. 
25. def truncate_to(value, kind, tzinfo=None):
26.     # Convert to target timezone before truncation
27.     if tzinfo is not None:
28.         value = value.astimezone(tzinfo)
29. 
30.     def truncate(value, kind):
31.         if kind == 'second':
32.             return value.replace(microsecond=0)
33.         if kind == 'minute':
34.             return value.replace(second=0, microsecond=0)
35.         if kind == 'hour':
36.             return value.replace(minute=0, second=0, microsecond=0)
37.         if kind == 'day':
38.             if isinstance(value, datetime):
39.                 return value.replace(hour=0, minute=0, second=0, microsecond=0)
40.             return value
41.         if kind == 'week':
42.             if isinstance(value, datetime):
43.                 return (value - timedelta(days=value.weekday())).replace(hour=0, minute=0, second=0, microsecond=0)
44.             return value - timedelta(days=value.weekday())
45.         if kind == 'month':
46.             if isinstance(value, datetime):
47.                 return value.replace(day=1, hour=0, minute=0, second=0, microsecond=0)
48.             return value.replace(day=1)
49.         if kind == 'quarter':
50.             month_in_quarter = value.month - (value.month - 1) % 3
51.             if isinstance(value, datetime):
52.                 return value.replace(month=month_in_quarter, day=1, hour=0, minute=0, second=0, microsecond=0)
53.             return value.replace(month=month_in_quarter, day=1)
54.         # otherwise, truncate to year
55.         if isinstance(value, datetime):
56.             return value.replace(month=1, day=1, hour=0, minute=0, second=0, microsecond=0)
57.         return value.replace(month=1, day=1)
58. 
59.     value = truncate(value, kind)
60.     if tzinfo is not None:
61.         # If there was a daylight saving transition, then reset the timezone.
62.         value = timezone.make_aware(value.replace(tzinfo=None), tzinfo)
63.     return value
64. 
65. 
66. @override_settings(USE_TZ=False)
67. class DateFunctionTests(TestCase):
68. 
69.     def create_model(self, start_datetime, end_datetime):
70.         return DTModel.objects.create(
71.             name=start_datetime.isoformat() if start_datetime else 'None',
72.             start_datetime=start_datetime,
73.             end_datetime=end_datetime,
74.             start_date=start_datetime.date() if start_datetime else None,
75.             end_date=end_datetime.date() if end_datetime else None,
76.             start_time=start_datetime.time() if start_datetime else None,
77.             end_time=end_datetime.time() if end_datetime else None,
78.             duration=(end_datetime - start_datetime) if start_datetime and end_datetime else None,
79.         )
80. 
81.     def test_extract_year_exact_lookup(self):
82.         """
83.         Extract year uses a BETWEEN filter to compare the year to allow indexes
84.         to be used.
85.         """
86.         start_datetime = datetime(2015, 6, 15, 14, 10)
87.         end_datetime = datetime(2016, 6, 15, 14, 10)
88.         if settings.USE_TZ:
89.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
90.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
91.         self.create_model(start_datetime, end_datetime)
92.         self.create_model(end_datetime, start_datetime)
93. 
94.         for lookup in ('year', 'iso_year'):
95.             with self.subTest(lookup):
96.                 qs = DTModel.objects.filter(**{'start_datetime__%s__exact' % lookup: 2015})
97.                 self.assertEqual(qs.count(), 1)
98.                 query_string = str(qs.query).lower()
99.                 self.assertEqual(query_string.count(' between '), 1)
100.                 self.assertEqual(query_string.count('extract'), 0)
101.                 # exact is implied and should be the same
102.                 qs = DTModel.objects.filter(**{'start_datetime__%s' % lookup: 2015})
103.                 self.assertEqual(qs.count(), 1)
104.                 query_string = str(qs.query).lower()
105.                 self.assertEqual(query_string.count(' between '), 1)
106.                 self.assertEqual(query_string.count('extract'), 0)
107.                 # date and datetime fields should behave the same
108.                 qs = DTModel.objects.filter(**{'start_date__%s' % lookup: 2015})
109.                 self.assertEqual(qs.count(), 1)
110.                 query_string = str(qs.query).lower()
111.                 self.assertEqual(query_string.count(' between '), 1)
112.                 self.assertEqual(query_string.count('extract'), 0)
113.                 # an expression rhs cannot use the between optimization.
114.                 qs = DTModel.objects.annotate(
115.                     start_year=ExtractYear('start_datetime'),
116.                 ).filter(end_datetime__year=F('start_year') + 1)
117.                 self.assertEqual(qs.count(), 1)
118.                 query_string = str(qs.query).lower()
119.                 self.assertEqual(query_string.count(' between '), 0)
120.                 self.assertEqual(query_string.count('extract'), 3)
121. 
122.     def test_extract_year_greaterthan_lookup(self):
123.         start_datetime = datetime(2015, 6, 15, 14, 10)
124.         end_datetime = datetime(2016, 6, 15, 14, 10)
125.         if settings.USE_TZ:
126.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
127.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
128.         self.create_model(start_datetime, end_datetime)
129.         self.create_model(end_datetime, start_datetime)
130. 
131.         for lookup in ('year', 'iso_year'):
132.             with self.subTest(lookup):
133.                 qs = DTModel.objects.filter(**{'start_datetime__%s__gt' % lookup: 2015})
134.                 self.assertEqual(qs.count(), 1)
135.                 self.assertEqual(str(qs.query).lower().count('extract'), 0)
136.                 qs = DTModel.objects.filter(**{'start_datetime__%s__gte' % lookup: 2015})
137.                 self.assertEqual(qs.count(), 2)
138.                 self.assertEqual(str(qs.query).lower().count('extract'), 0)
139.                 qs = DTModel.objects.annotate(
140.                     start_year=ExtractYear('start_datetime'),
141.                 ).filter(**{'end_datetime__%s__gte' % lookup: F('start_year')})
142.                 self.assertEqual(qs.count(), 1)
143.                 self.assertGreaterEqual(str(qs.query).lower().count('extract'), 2)
144. 
145.     def test_extract_year_lessthan_lookup(self):
146.         start_datetime = datetime(2015, 6, 15, 14, 10)
147.         end_datetime = datetime(2016, 6, 15, 14, 10)
148.         if settings.USE_TZ:
149.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
150.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
151.         self.create_model(start_datetime, end_datetime)
152.         self.create_model(end_datetime, start_datetime)
153. 
154.         for lookup in ('year', 'iso_year'):
155.             with self.subTest(lookup):
156.                 qs = DTModel.objects.filter(**{'start_datetime__%s__lt' % lookup: 2016})
157.                 self.assertEqual(qs.count(), 1)
158.                 self.assertEqual(str(qs.query).count('extract'), 0)
159.                 qs = DTModel.objects.filter(**{'start_datetime__%s__lte' % lookup: 2016})
160.                 self.assertEqual(qs.count(), 2)
161.                 self.assertEqual(str(qs.query).count('extract'), 0)
162.                 qs = DTModel.objects.annotate(
163.                     end_year=ExtractYear('end_datetime'),
164.                 ).filter(**{'start_datetime__%s__lte' % lookup: F('end_year')})
165.                 self.assertEqual(qs.count(), 1)
166.                 self.assertGreaterEqual(str(qs.query).lower().count('extract'), 2)
167. 
168.     def test_extract_func(self):
169.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
170.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
171.         if settings.USE_TZ:
172.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
173.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
174.         self.create_model(start_datetime, end_datetime)
175.         self.create_model(end_datetime, start_datetime)
176. 
177.         with self.assertRaisesMessage(ValueError, 'lookup_name must be provided'):
178.             Extract('start_datetime')
179. 
180.         msg = 'Extract input expression must be DateField, DateTimeField, TimeField, or DurationField.'
181.         with self.assertRaisesMessage(ValueError, msg):
182.             list(DTModel.objects.annotate(extracted=Extract('name', 'hour')))
183. 
184.         with self.assertRaisesMessage(
185.                 ValueError, "Cannot extract time component 'second' from DateField 'start_date'."):
186.             list(DTModel.objects.annotate(extracted=Extract('start_date', 'second')))
187. 
188.         self.assertQuerysetEqual(
189.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'year')).order_by('start_datetime'),
190.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
191.             lambda m: (m.start_datetime, m.extracted)
192.         )
193.         self.assertQuerysetEqual(
194.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'quarter')).order_by('start_datetime'),
195.             [(start_datetime, 2), (end_datetime, 2)],
196.             lambda m: (m.start_datetime, m.extracted)
197.         )
198.         self.assertQuerysetEqual(
199.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'month')).order_by('start_datetime'),
200.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
201.             lambda m: (m.start_datetime, m.extracted)
202.         )
203.         self.assertQuerysetEqual(
204.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'day')).order_by('start_datetime'),
205.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
206.             lambda m: (m.start_datetime, m.extracted)
207.         )
208.         self.assertQuerysetEqual(
209.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'week')).order_by('start_datetime'),
210.             [(start_datetime, 25), (end_datetime, 24)],
211.             lambda m: (m.start_datetime, m.extracted)
212.         )
213.         self.assertQuerysetEqual(
214.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'week_day')).order_by('start_datetime'),
215.             [
216.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
217.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1)
218.             ],
219.             lambda m: (m.start_datetime, m.extracted)
220.         )
221.         self.assertQuerysetEqual(
222.             DTModel.objects.annotate(
223.                 extracted=Extract('start_datetime', 'iso_week_day'),
224.             ).order_by('start_datetime'),
225.             [
226.                 (start_datetime, start_datetime.isoweekday()),
227.                 (end_datetime, end_datetime.isoweekday()),
228.             ],
229.             lambda m: (m.start_datetime, m.extracted)
230.         )
231.         self.assertQuerysetEqual(
232.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'hour')).order_by('start_datetime'),
233.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
234.             lambda m: (m.start_datetime, m.extracted)
235.         )
236.         self.assertQuerysetEqual(
237.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'minute')).order_by('start_datetime'),
238.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
239.             lambda m: (m.start_datetime, m.extracted)
240.         )
241.         self.assertQuerysetEqual(
242.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'second')).order_by('start_datetime'),
243.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
244.             lambda m: (m.start_datetime, m.extracted)
245.         )
246.         self.assertEqual(DTModel.objects.filter(start_datetime__year=Extract('start_datetime', 'year')).count(), 2)
247.         self.assertEqual(DTModel.objects.filter(start_datetime__hour=Extract('start_datetime', 'hour')).count(), 2)
248.         self.assertEqual(DTModel.objects.filter(start_date__month=Extract('start_date', 'month')).count(), 2)
249.         self.assertEqual(DTModel.objects.filter(start_time__hour=Extract('start_time', 'hour')).count(), 2)
250. 
251.     def test_extract_none(self):
252.         self.create_model(None, None)
253.         for t in (Extract('start_datetime', 'year'), Extract('start_date', 'year'), Extract('start_time', 'hour')):
254.             with self.subTest(t):
255.                 self.assertIsNone(DTModel.objects.annotate(extracted=t).first().extracted)
256. 
257.     @skipUnlessDBFeature('has_native_duration_field')
258.     def test_extract_duration(self):
259.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
260.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
261.         if settings.USE_TZ:
262.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
263.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
264.         self.create_model(start_datetime, end_datetime)
265.         self.create_model(end_datetime, start_datetime)
266.         self.assertQuerysetEqual(
267.             DTModel.objects.annotate(extracted=Extract('duration', 'second')).order_by('start_datetime'),
268.             [
269.                 (start_datetime, (end_datetime - start_datetime).seconds % 60),
270.                 (end_datetime, (start_datetime - end_datetime).seconds % 60)
271.             ],
272.             lambda m: (m.start_datetime, m.extracted)
273.         )
274.         self.assertEqual(
275.             DTModel.objects.annotate(
276.                 duration_days=Extract('duration', 'day'),
277.             ).filter(duration_days__gt=200).count(),
278.             1
279.         )
280. 
281.     @skipIfDBFeature('has_native_duration_field')
282.     def test_extract_duration_without_native_duration_field(self):
283.         msg = 'Extract requires native DurationField database support.'
284.         with self.assertRaisesMessage(ValueError, msg):
285.             list(DTModel.objects.annotate(extracted=Extract('duration', 'second')))
286. 
287.     def test_extract_duration_unsupported_lookups(self):
288.         msg = "Cannot extract component '%s' from DurationField 'duration'."
289.         for lookup in (
290.             'year', 'iso_year', 'month', 'week', 'week_day', 'iso_week_day',
291.             'quarter',
292.         ):
293.             with self.subTest(lookup):
294.                 with self.assertRaisesMessage(ValueError, msg % lookup):
295.                     DTModel.objects.annotate(extracted=Extract('duration', lookup))
296. 
297.     def test_extract_year_func(self):
298.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
299.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
300.         if settings.USE_TZ:
301.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
302.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
303.         self.create_model(start_datetime, end_datetime)
304.         self.create_model(end_datetime, start_datetime)
305.         self.assertQuerysetEqual(
306.             DTModel.objects.annotate(extracted=ExtractYear('start_datetime')).order_by('start_datetime'),
307.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
308.             lambda m: (m.start_datetime, m.extracted)
309.         )
310.         self.assertQuerysetEqual(
311.             DTModel.objects.annotate(extracted=ExtractYear('start_date')).order_by('start_datetime'),
312.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
313.             lambda m: (m.start_datetime, m.extracted)
314.         )
315.         self.assertEqual(DTModel.objects.filter(start_datetime__year=ExtractYear('start_datetime')).count(), 2)
316. 
317.     def test_extract_iso_year_func(self):
318.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
319.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
320.         if settings.USE_TZ:
321.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
322.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
323.         self.create_model(start_datetime, end_datetime)
324.         self.create_model(end_datetime, start_datetime)
325.         self.assertQuerysetEqual(
326.             DTModel.objects.annotate(extracted=ExtractIsoYear('start_datetime')).order_by('start_datetime'),
327.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
328.             lambda m: (m.start_datetime, m.extracted)
329.         )
330.         self.assertQuerysetEqual(
331.             DTModel.objects.annotate(extracted=ExtractIsoYear('start_date')).order_by('start_datetime'),
332.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
333.             lambda m: (m.start_datetime, m.extracted)
334.         )
335.         # Both dates are from the same week year.
336.         self.assertEqual(DTModel.objects.filter(start_datetime__iso_year=ExtractIsoYear('start_datetime')).count(), 2)
337. 
338.     def test_extract_iso_year_func_boundaries(self):
339.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
340.         if settings.USE_TZ:
341.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
342.         week_52_day_2014 = datetime(2014, 12, 27, 13, 0)  # Sunday
343.         week_1_day_2014_2015 = datetime(2014, 12, 31, 13, 0)  # Wednesday
344.         week_53_day_2015 = datetime(2015, 12, 31, 13, 0)  # Thursday
345.         if settings.USE_TZ:
346.             week_1_day_2014_2015 = timezone.make_aware(week_1_day_2014_2015, is_dst=False)
347.             week_52_day_2014 = timezone.make_aware(week_52_day_2014, is_dst=False)
348.             week_53_day_2015 = timezone.make_aware(week_53_day_2015, is_dst=False)
349.         days = [week_52_day_2014, week_1_day_2014_2015, week_53_day_2015]
350.         self.create_model(week_53_day_2015, end_datetime)
351.         self.create_model(week_52_day_2014, end_datetime)
352.         self.create_model(week_1_day_2014_2015, end_datetime)
353.         qs = DTModel.objects.filter(start_datetime__in=days).annotate(
354.             extracted=ExtractIsoYear('start_datetime'),
355.         ).order_by('start_datetime')
356.         self.assertQuerysetEqual(qs, [
357.             (week_52_day_2014, 2014),
358.             (week_1_day_2014_2015, 2015),
359.             (week_53_day_2015, 2015),
360.         ], lambda m: (m.start_datetime, m.extracted))
361. 
362.     def test_extract_month_func(self):
363.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
364.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
365.         if settings.USE_TZ:
366.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
367.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
368.         self.create_model(start_datetime, end_datetime)
369.         self.create_model(end_datetime, start_datetime)
370.         self.assertQuerysetEqual(
371.             DTModel.objects.annotate(extracted=ExtractMonth('start_datetime')).order_by('start_datetime'),
372.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
373.             lambda m: (m.start_datetime, m.extracted)
374.         )
375.         self.assertQuerysetEqual(
376.             DTModel.objects.annotate(extracted=ExtractMonth('start_date')).order_by('start_datetime'),
377.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
378.             lambda m: (m.start_datetime, m.extracted)
379.         )
380.         self.assertEqual(DTModel.objects.filter(start_datetime__month=ExtractMonth('start_datetime')).count(), 2)
381. 
382.     def test_extract_day_func(self):
383.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
384.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
385.         if settings.USE_TZ:
386.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
387.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
388.         self.create_model(start_datetime, end_datetime)
389.         self.create_model(end_datetime, start_datetime)
390.         self.assertQuerysetEqual(
391.             DTModel.objects.annotate(extracted=ExtractDay('start_datetime')).order_by('start_datetime'),
392.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
393.             lambda m: (m.start_datetime, m.extracted)
394.         )
395.         self.assertQuerysetEqual(
396.             DTModel.objects.annotate(extracted=ExtractDay('start_date')).order_by('start_datetime'),
397.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
398.             lambda m: (m.start_datetime, m.extracted)
399.         )
400.         self.assertEqual(DTModel.objects.filter(start_datetime__day=ExtractDay('start_datetime')).count(), 2)
401. 
402.     def test_extract_week_func(self):
403.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
404.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
405.         if settings.USE_TZ:
406.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
407.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
408.         self.create_model(start_datetime, end_datetime)
409.         self.create_model(end_datetime, start_datetime)
410.         self.assertQuerysetEqual(
411.             DTModel.objects.annotate(extracted=ExtractWeek('start_datetime')).order_by('start_datetime'),
412.             [(start_datetime, 25), (end_datetime, 24)],
413.             lambda m: (m.start_datetime, m.extracted)
414.         )
415.         self.assertQuerysetEqual(
416.             DTModel.objects.annotate(extracted=ExtractWeek('start_date')).order_by('start_datetime'),
417.             [(start_datetime, 25), (end_datetime, 24)],
418.             lambda m: (m.start_datetime, m.extracted)
419.         )
420.         # both dates are from the same week.
421.         self.assertEqual(DTModel.objects.filter(start_datetime__week=ExtractWeek('start_datetime')).count(), 2)
422. 
423.     def test_extract_quarter_func(self):
424.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
425.         end_datetime = datetime(2016, 8, 15, 14, 10, 50, 123)
426.         if settings.USE_TZ:
427.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
428.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
429.         self.create_model(start_datetime, end_datetime)
430.         self.create_model(end_datetime, start_datetime)
431.         self.assertQuerysetEqual(
432.             DTModel.objects.annotate(extracted=ExtractQuarter('start_datetime')).order_by('start_datetime'),
433.             [(start_datetime, 2), (end_datetime, 3)],
434.             lambda m: (m.start_datetime, m.extracted)
435.         )
436.         self.assertQuerysetEqual(
437.             DTModel.objects.annotate(extracted=ExtractQuarter('start_date')).order_by('start_datetime'),
438.             [(start_datetime, 2), (end_datetime, 3)],
439.             lambda m: (m.start_datetime, m.extracted)
440.         )
441.         self.assertEqual(DTModel.objects.filter(start_datetime__quarter=ExtractQuarter('start_datetime')).count(), 2)
442. 
443.     def test_extract_quarter_func_boundaries(self):
444.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
445.         if settings.USE_TZ:
446.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
447. 
448.         last_quarter_2014 = datetime(2014, 12, 31, 13, 0)
449.         first_quarter_2015 = datetime(2015, 1, 1, 13, 0)
450.         if settings.USE_TZ:
451.             last_quarter_2014 = timezone.make_aware(last_quarter_2014, is_dst=False)
452.             first_quarter_2015 = timezone.make_aware(first_quarter_2015, is_dst=False)
453.         dates = [last_quarter_2014, first_quarter_2015]
454.         self.create_model(last_quarter_2014, end_datetime)
455.         self.create_model(first_quarter_2015, end_datetime)
456.         qs = DTModel.objects.filter(start_datetime__in=dates).annotate(
457.             extracted=ExtractQuarter('start_datetime'),
458.         ).order_by('start_datetime')
459.         self.assertQuerysetEqual(qs, [
460.             (last_quarter_2014, 4),
461.             (first_quarter_2015, 1),
462.         ], lambda m: (m.start_datetime, m.extracted))
463. 
464.     def test_extract_week_func_boundaries(self):
465.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
466.         if settings.USE_TZ:
467.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
468. 
469.         week_52_day_2014 = datetime(2014, 12, 27, 13, 0)  # Sunday
470.         week_1_day_2014_2015 = datetime(2014, 12, 31, 13, 0)  # Wednesday
471.         week_53_day_2015 = datetime(2015, 12, 31, 13, 0)  # Thursday
472.         if settings.USE_TZ:
473.             week_1_day_2014_2015 = timezone.make_aware(week_1_day_2014_2015, is_dst=False)
474.             week_52_day_2014 = timezone.make_aware(week_52_day_2014, is_dst=False)
475.             week_53_day_2015 = timezone.make_aware(week_53_day_2015, is_dst=False)
476. 
477.         days = [week_52_day_2014, week_1_day_2014_2015, week_53_day_2015]
478.         self.create_model(week_53_day_2015, end_datetime)
479.         self.create_model(week_52_day_2014, end_datetime)
480.         self.create_model(week_1_day_2014_2015, end_datetime)
481.         qs = DTModel.objects.filter(start_datetime__in=days).annotate(
482.             extracted=ExtractWeek('start_datetime'),
483.         ).order_by('start_datetime')
484.         self.assertQuerysetEqual(qs, [
485.             (week_52_day_2014, 52),
486.             (week_1_day_2014_2015, 1),
487.             (week_53_day_2015, 53),
488.         ], lambda m: (m.start_datetime, m.extracted))
489. 
490.     def test_extract_weekday_func(self):
491.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
492.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
493.         if settings.USE_TZ:
494.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
495.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
496.         self.create_model(start_datetime, end_datetime)
497.         self.create_model(end_datetime, start_datetime)
498.         self.assertQuerysetEqual(
499.             DTModel.objects.annotate(extracted=ExtractWeekDay('start_datetime')).order_by('start_datetime'),
500.             [


File: tests/db_functions/datetime/test_extract_trunc.py
Line number range: 501 - 1500
Content:
501.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
502.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1),
503.             ],
504.             lambda m: (m.start_datetime, m.extracted)
505.         )
506.         self.assertQuerysetEqual(
507.             DTModel.objects.annotate(extracted=ExtractWeekDay('start_date')).order_by('start_datetime'),
508.             [
509.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
510.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1),
511.             ],
512.             lambda m: (m.start_datetime, m.extracted)
513.         )
514.         self.assertEqual(DTModel.objects.filter(start_datetime__week_day=ExtractWeekDay('start_datetime')).count(), 2)
515. 
516.     def test_extract_iso_weekday_func(self):
517.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
518.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
519.         if settings.USE_TZ:
520.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
521.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
522.         self.create_model(start_datetime, end_datetime)
523.         self.create_model(end_datetime, start_datetime)
524.         self.assertQuerysetEqual(
525.             DTModel.objects.annotate(
526.                 extracted=ExtractIsoWeekDay('start_datetime'),
527.             ).order_by('start_datetime'),
528.             [
529.                 (start_datetime, start_datetime.isoweekday()),
530.                 (end_datetime, end_datetime.isoweekday()),
531.             ],
532.             lambda m: (m.start_datetime, m.extracted)
533.         )
534.         self.assertQuerysetEqual(
535.             DTModel.objects.annotate(
536.                 extracted=ExtractIsoWeekDay('start_date'),
537.             ).order_by('start_datetime'),
538.             [
539.                 (start_datetime, start_datetime.isoweekday()),
540.                 (end_datetime, end_datetime.isoweekday()),
541.             ],
542.             lambda m: (m.start_datetime, m.extracted)
543.         )
544.         self.assertEqual(
545.             DTModel.objects.filter(
546.                 start_datetime__week_day=ExtractWeekDay('start_datetime'),
547.             ).count(),
548.             2,
549.         )
550. 
551.     def test_extract_hour_func(self):
552.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
553.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
554.         if settings.USE_TZ:
555.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
556.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
557.         self.create_model(start_datetime, end_datetime)
558.         self.create_model(end_datetime, start_datetime)
559.         self.assertQuerysetEqual(
560.             DTModel.objects.annotate(extracted=ExtractHour('start_datetime')).order_by('start_datetime'),
561.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
562.             lambda m: (m.start_datetime, m.extracted)
563.         )
564.         self.assertQuerysetEqual(
565.             DTModel.objects.annotate(extracted=ExtractHour('start_time')).order_by('start_datetime'),
566.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
567.             lambda m: (m.start_datetime, m.extracted)
568.         )
569.         self.assertEqual(DTModel.objects.filter(start_datetime__hour=ExtractHour('start_datetime')).count(), 2)
570. 
571.     def test_extract_minute_func(self):
572.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
573.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
574.         if settings.USE_TZ:
575.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
576.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
577.         self.create_model(start_datetime, end_datetime)
578.         self.create_model(end_datetime, start_datetime)
579.         self.assertQuerysetEqual(
580.             DTModel.objects.annotate(extracted=ExtractMinute('start_datetime')).order_by('start_datetime'),
581.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
582.             lambda m: (m.start_datetime, m.extracted)
583.         )
584.         self.assertQuerysetEqual(
585.             DTModel.objects.annotate(extracted=ExtractMinute('start_time')).order_by('start_datetime'),
586.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
587.             lambda m: (m.start_datetime, m.extracted)
588.         )
589.         self.assertEqual(DTModel.objects.filter(start_datetime__minute=ExtractMinute('start_datetime')).count(), 2)
590. 
591.     def test_extract_second_func(self):
592.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
593.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
594.         if settings.USE_TZ:
595.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
596.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
597.         self.create_model(start_datetime, end_datetime)
598.         self.create_model(end_datetime, start_datetime)
599.         self.assertQuerysetEqual(
600.             DTModel.objects.annotate(extracted=ExtractSecond('start_datetime')).order_by('start_datetime'),
601.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
602.             lambda m: (m.start_datetime, m.extracted)
603.         )
604.         self.assertQuerysetEqual(
605.             DTModel.objects.annotate(extracted=ExtractSecond('start_time')).order_by('start_datetime'),
606.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
607.             lambda m: (m.start_datetime, m.extracted)
608.         )
609.         self.assertEqual(DTModel.objects.filter(start_datetime__second=ExtractSecond('start_datetime')).count(), 2)
610. 
611.     def test_trunc_func(self):
612.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
613.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
614.         if settings.USE_TZ:
615.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
616.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
617.         self.create_model(start_datetime, end_datetime)
618.         self.create_model(end_datetime, start_datetime)
619. 
620.         msg = 'output_field must be either DateField, TimeField, or DateTimeField'
621.         with self.assertRaisesMessage(ValueError, msg):
622.             list(DTModel.objects.annotate(truncated=Trunc('start_datetime', 'year', output_field=IntegerField())))
623. 
624.         with self.assertRaisesMessage(AssertionError, "'name' isn't a DateField, TimeField, or DateTimeField."):
625.             list(DTModel.objects.annotate(truncated=Trunc('name', 'year', output_field=DateTimeField())))
626. 
627.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
628.             list(DTModel.objects.annotate(truncated=Trunc('start_date', 'second')))
629. 
630.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
631.             list(DTModel.objects.annotate(truncated=Trunc('start_time', 'month')))
632. 
633.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
634.             list(DTModel.objects.annotate(truncated=Trunc('start_date', 'month', output_field=DateTimeField())))
635. 
636.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
637.             list(DTModel.objects.annotate(truncated=Trunc('start_time', 'second', output_field=DateTimeField())))
638. 
639.         def test_datetime_kind(kind):
640.             self.assertQuerysetEqual(
641.                 DTModel.objects.annotate(
642.                     truncated=Trunc('start_datetime', kind, output_field=DateTimeField())
643.                 ).order_by('start_datetime'),
644.                 [
645.                     (start_datetime, truncate_to(start_datetime, kind)),
646.                     (end_datetime, truncate_to(end_datetime, kind))
647.                 ],
648.                 lambda m: (m.start_datetime, m.truncated)
649.             )
650. 
651.         def test_date_kind(kind):
652.             self.assertQuerysetEqual(
653.                 DTModel.objects.annotate(
654.                     truncated=Trunc('start_date', kind, output_field=DateField())
655.                 ).order_by('start_datetime'),
656.                 [
657.                     (start_datetime, truncate_to(start_datetime.date(), kind)),
658.                     (end_datetime, truncate_to(end_datetime.date(), kind))
659.                 ],
660.                 lambda m: (m.start_datetime, m.truncated)
661.             )
662. 
663.         def test_time_kind(kind):
664.             self.assertQuerysetEqual(
665.                 DTModel.objects.annotate(
666.                     truncated=Trunc('start_time', kind, output_field=TimeField())
667.                 ).order_by('start_datetime'),
668.                 [
669.                     (start_datetime, truncate_to(start_datetime.time(), kind)),
670.                     (end_datetime, truncate_to(end_datetime.time(), kind))
671.                 ],
672.                 lambda m: (m.start_datetime, m.truncated)
673.             )
674. 
675.         test_date_kind('year')
676.         test_date_kind('quarter')
677.         test_date_kind('month')
678.         test_date_kind('week')
679.         test_date_kind('day')
680.         test_time_kind('hour')
681.         test_time_kind('minute')
682.         test_time_kind('second')
683.         test_datetime_kind('year')
684.         test_datetime_kind('quarter')
685.         test_datetime_kind('month')
686.         test_datetime_kind('week')
687.         test_datetime_kind('day')
688.         test_datetime_kind('hour')
689.         test_datetime_kind('minute')
690.         test_datetime_kind('second')
691. 
692.         qs = DTModel.objects.filter(start_datetime__date=Trunc('start_datetime', 'day', output_field=DateField()))
693.         self.assertEqual(qs.count(), 2)
694. 
695.     def test_trunc_none(self):
696.         self.create_model(None, None)
697.         for t in (Trunc('start_datetime', 'year'), Trunc('start_date', 'year'), Trunc('start_time', 'hour')):
698.             with self.subTest(t):
699.                 self.assertIsNone(DTModel.objects.annotate(truncated=t).first().truncated)
700. 
701.     def test_trunc_year_func(self):
702.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
703.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'year')
704.         if settings.USE_TZ:
705.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
706.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
707.         self.create_model(start_datetime, end_datetime)
708.         self.create_model(end_datetime, start_datetime)
709.         self.assertQuerysetEqual(
710.             DTModel.objects.annotate(extracted=TruncYear('start_datetime')).order_by('start_datetime'),
711.             [
712.                 (start_datetime, truncate_to(start_datetime, 'year')),
713.                 (end_datetime, truncate_to(end_datetime, 'year')),
714.             ],
715.             lambda m: (m.start_datetime, m.extracted)
716.         )
717.         self.assertQuerysetEqual(
718.             DTModel.objects.annotate(extracted=TruncYear('start_date')).order_by('start_datetime'),
719.             [
720.                 (start_datetime, truncate_to(start_datetime.date(), 'year')),
721.                 (end_datetime, truncate_to(end_datetime.date(), 'year')),
722.             ],
723.             lambda m: (m.start_datetime, m.extracted)
724.         )
725.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncYear('start_datetime')).count(), 1)
726. 
727.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
728.             list(DTModel.objects.annotate(truncated=TruncYear('start_time')))
729. 
730.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
731.             list(DTModel.objects.annotate(truncated=TruncYear('start_time', output_field=TimeField())))
732. 
733.     def test_trunc_quarter_func(self):
734.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
735.         end_datetime = truncate_to(datetime(2016, 10, 15, 14, 10, 50, 123), 'quarter')
736.         last_quarter_2015 = truncate_to(datetime(2015, 12, 31, 14, 10, 50, 123), 'quarter')
737.         first_quarter_2016 = truncate_to(datetime(2016, 1, 1, 14, 10, 50, 123), 'quarter')
738.         if settings.USE_TZ:
739.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
740.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
741.             last_quarter_2015 = timezone.make_aware(last_quarter_2015, is_dst=False)
742.             first_quarter_2016 = timezone.make_aware(first_quarter_2016, is_dst=False)
743.         self.create_model(start_datetime=start_datetime, end_datetime=end_datetime)
744.         self.create_model(start_datetime=end_datetime, end_datetime=start_datetime)
745.         self.create_model(start_datetime=last_quarter_2015, end_datetime=end_datetime)
746.         self.create_model(start_datetime=first_quarter_2016, end_datetime=end_datetime)
747.         self.assertQuerysetEqual(
748.             DTModel.objects.annotate(extracted=TruncQuarter('start_date')).order_by('start_datetime'),
749.             [
750.                 (start_datetime, truncate_to(start_datetime.date(), 'quarter')),
751.                 (last_quarter_2015, truncate_to(last_quarter_2015.date(), 'quarter')),
752.                 (first_quarter_2016, truncate_to(first_quarter_2016.date(), 'quarter')),
753.                 (end_datetime, truncate_to(end_datetime.date(), 'quarter')),
754.             ],
755.             lambda m: (m.start_datetime, m.extracted)
756.         )
757.         self.assertQuerysetEqual(
758.             DTModel.objects.annotate(extracted=TruncQuarter('start_datetime')).order_by('start_datetime'),
759.             [
760.                 (start_datetime, truncate_to(start_datetime, 'quarter')),
761.                 (last_quarter_2015, truncate_to(last_quarter_2015, 'quarter')),
762.                 (first_quarter_2016, truncate_to(first_quarter_2016, 'quarter')),
763.                 (end_datetime, truncate_to(end_datetime, 'quarter')),
764.             ],
765.             lambda m: (m.start_datetime, m.extracted)
766.         )
767. 
768.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
769.             list(DTModel.objects.annotate(truncated=TruncQuarter('start_time')))
770. 
771.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
772.             list(DTModel.objects.annotate(truncated=TruncQuarter('start_time', output_field=TimeField())))
773. 
774.     def test_trunc_month_func(self):
775.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
776.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'month')
777.         if settings.USE_TZ:
778.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
779.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
780.         self.create_model(start_datetime, end_datetime)
781.         self.create_model(end_datetime, start_datetime)
782.         self.assertQuerysetEqual(
783.             DTModel.objects.annotate(extracted=TruncMonth('start_datetime')).order_by('start_datetime'),
784.             [
785.                 (start_datetime, truncate_to(start_datetime, 'month')),
786.                 (end_datetime, truncate_to(end_datetime, 'month')),
787.             ],
788.             lambda m: (m.start_datetime, m.extracted)
789.         )
790.         self.assertQuerysetEqual(
791.             DTModel.objects.annotate(extracted=TruncMonth('start_date')).order_by('start_datetime'),
792.             [
793.                 (start_datetime, truncate_to(start_datetime.date(), 'month')),
794.                 (end_datetime, truncate_to(end_datetime.date(), 'month')),
795.             ],
796.             lambda m: (m.start_datetime, m.extracted)
797.         )
798.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncMonth('start_datetime')).count(), 1)
799. 
800.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
801.             list(DTModel.objects.annotate(truncated=TruncMonth('start_time')))
802. 
803.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
804.             list(DTModel.objects.annotate(truncated=TruncMonth('start_time', output_field=TimeField())))
805. 
806.     def test_trunc_week_func(self):
807.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
808.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'week')
809.         if settings.USE_TZ:
810.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
811.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
812.         self.create_model(start_datetime, end_datetime)
813.         self.create_model(end_datetime, start_datetime)
814.         self.assertQuerysetEqual(
815.             DTModel.objects.annotate(extracted=TruncWeek('start_datetime')).order_by('start_datetime'),
816.             [
817.                 (start_datetime, truncate_to(start_datetime, 'week')),
818.                 (end_datetime, truncate_to(end_datetime, 'week')),
819.             ],
820.             lambda m: (m.start_datetime, m.extracted)
821.         )
822.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncWeek('start_datetime')).count(), 1)
823. 
824.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
825.             list(DTModel.objects.annotate(truncated=TruncWeek('start_time')))
826. 
827.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
828.             list(DTModel.objects.annotate(truncated=TruncWeek('start_time', output_field=TimeField())))
829. 
830.     def test_trunc_date_func(self):
831.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
832.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
833.         if settings.USE_TZ:
834.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
835.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
836.         self.create_model(start_datetime, end_datetime)
837.         self.create_model(end_datetime, start_datetime)
838.         self.assertQuerysetEqual(
839.             DTModel.objects.annotate(extracted=TruncDate('start_datetime')).order_by('start_datetime'),
840.             [
841.                 (start_datetime, start_datetime.date()),
842.                 (end_datetime, end_datetime.date()),
843.             ],
844.             lambda m: (m.start_datetime, m.extracted)
845.         )
846.         self.assertEqual(DTModel.objects.filter(start_datetime__date=TruncDate('start_datetime')).count(), 2)
847. 
848.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateField"):
849.             list(DTModel.objects.annotate(truncated=TruncDate('start_time')))
850. 
851.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateField"):
852.             list(DTModel.objects.annotate(truncated=TruncDate('start_time', output_field=TimeField())))
853. 
854.     def test_trunc_date_none(self):
855.         self.create_model(None, None)
856.         self.assertIsNone(DTModel.objects.annotate(truncated=TruncDate('start_datetime')).first().truncated)
857. 
858.     def test_trunc_time_func(self):
859.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
860.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
861.         if settings.USE_TZ:
862.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
863.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
864.         self.create_model(start_datetime, end_datetime)
865.         self.create_model(end_datetime, start_datetime)
866.         self.assertQuerysetEqual(
867.             DTModel.objects.annotate(extracted=TruncTime('start_datetime')).order_by('start_datetime'),
868.             [
869.                 (start_datetime, start_datetime.time()),
870.                 (end_datetime, end_datetime.time()),
871.             ],
872.             lambda m: (m.start_datetime, m.extracted)
873.         )
874.         self.assertEqual(DTModel.objects.filter(start_datetime__time=TruncTime('start_datetime')).count(), 2)
875. 
876.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to TimeField"):
877.             list(DTModel.objects.annotate(truncated=TruncTime('start_date')))
878. 
879.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to TimeField"):
880.             list(DTModel.objects.annotate(truncated=TruncTime('start_date', output_field=DateField())))
881. 
882.     def test_trunc_time_none(self):
883.         self.create_model(None, None)
884.         self.assertIsNone(DTModel.objects.annotate(truncated=TruncTime('start_datetime')).first().truncated)
885. 
886.     def test_trunc_day_func(self):
887.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
888.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'day')
889.         if settings.USE_TZ:
890.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
891.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
892.         self.create_model(start_datetime, end_datetime)
893.         self.create_model(end_datetime, start_datetime)
894.         self.assertQuerysetEqual(
895.             DTModel.objects.annotate(extracted=TruncDay('start_datetime')).order_by('start_datetime'),
896.             [
897.                 (start_datetime, truncate_to(start_datetime, 'day')),
898.                 (end_datetime, truncate_to(end_datetime, 'day')),
899.             ],
900.             lambda m: (m.start_datetime, m.extracted)
901.         )
902.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncDay('start_datetime')).count(), 1)
903. 
904.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
905.             list(DTModel.objects.annotate(truncated=TruncDay('start_time')))
906. 
907.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
908.             list(DTModel.objects.annotate(truncated=TruncDay('start_time', output_field=TimeField())))
909. 
910.     def test_trunc_hour_func(self):
911.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
912.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'hour')
913.         if settings.USE_TZ:
914.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
915.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
916.         self.create_model(start_datetime, end_datetime)
917.         self.create_model(end_datetime, start_datetime)
918.         self.assertQuerysetEqual(
919.             DTModel.objects.annotate(extracted=TruncHour('start_datetime')).order_by('start_datetime'),
920.             [
921.                 (start_datetime, truncate_to(start_datetime, 'hour')),
922.                 (end_datetime, truncate_to(end_datetime, 'hour')),
923.             ],
924.             lambda m: (m.start_datetime, m.extracted)
925.         )
926.         self.assertQuerysetEqual(
927.             DTModel.objects.annotate(extracted=TruncHour('start_time')).order_by('start_datetime'),
928.             [
929.                 (start_datetime, truncate_to(start_datetime.time(), 'hour')),
930.                 (end_datetime, truncate_to(end_datetime.time(), 'hour')),
931.             ],
932.             lambda m: (m.start_datetime, m.extracted)
933.         )
934.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncHour('start_datetime')).count(), 1)
935. 
936.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
937.             list(DTModel.objects.annotate(truncated=TruncHour('start_date')))
938. 
939.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
940.             list(DTModel.objects.annotate(truncated=TruncHour('start_date', output_field=DateField())))
941. 
942.     def test_trunc_minute_func(self):
943.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
944.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'minute')
945.         if settings.USE_TZ:
946.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
947.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
948.         self.create_model(start_datetime, end_datetime)
949.         self.create_model(end_datetime, start_datetime)
950.         self.assertQuerysetEqual(
951.             DTModel.objects.annotate(extracted=TruncMinute('start_datetime')).order_by('start_datetime'),
952.             [
953.                 (start_datetime, truncate_to(start_datetime, 'minute')),
954.                 (end_datetime, truncate_to(end_datetime, 'minute')),
955.             ],
956.             lambda m: (m.start_datetime, m.extracted)
957.         )
958.         self.assertQuerysetEqual(
959.             DTModel.objects.annotate(extracted=TruncMinute('start_time')).order_by('start_datetime'),
960.             [
961.                 (start_datetime, truncate_to(start_datetime.time(), 'minute')),
962.                 (end_datetime, truncate_to(end_datetime.time(), 'minute')),
963.             ],
964.             lambda m: (m.start_datetime, m.extracted)
965.         )
966.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncMinute('start_datetime')).count(), 1)
967. 
968.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
969.             list(DTModel.objects.annotate(truncated=TruncMinute('start_date')))
970. 
971.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
972.             list(DTModel.objects.annotate(truncated=TruncMinute('start_date', output_field=DateField())))
973. 
974.     def test_trunc_second_func(self):
975.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
976.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'second')
977.         if settings.USE_TZ:
978.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
979.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
980.         self.create_model(start_datetime, end_datetime)
981.         self.create_model(end_datetime, start_datetime)
982.         self.assertQuerysetEqual(
983.             DTModel.objects.annotate(extracted=TruncSecond('start_datetime')).order_by('start_datetime'),
984.             [
985.                 (start_datetime, truncate_to(start_datetime, 'second')),
986.                 (end_datetime, truncate_to(end_datetime, 'second'))
987.             ],
988.             lambda m: (m.start_datetime, m.extracted)
989.         )
990.         self.assertQuerysetEqual(
991.             DTModel.objects.annotate(extracted=TruncSecond('start_time')).order_by('start_datetime'),
992.             [
993.                 (start_datetime, truncate_to(start_datetime.time(), 'second')),
994.                 (end_datetime, truncate_to(end_datetime.time(), 'second'))
995.             ],
996.             lambda m: (m.start_datetime, m.extracted)
997.         )
998.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncSecond('start_datetime')).count(), 1)
999. 
1000.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
1001.             list(DTModel.objects.annotate(truncated=TruncSecond('start_date')))
1002. 
1003.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
1004.             list(DTModel.objects.annotate(truncated=TruncSecond('start_date', output_field=DateField())))
1005. 
1006.     def test_trunc_subquery_with_parameters(self):
1007.         author_1 = Author.objects.create(name='J. R. R. Tolkien')
1008.         author_2 = Author.objects.create(name='G. R. R. Martin')
1009.         fan_since_1 = datetime(2016, 2, 3, 15, 0, 0)
1010.         fan_since_2 = datetime(2015, 2, 3, 15, 0, 0)
1011.         fan_since_3 = datetime(2017, 2, 3, 15, 0, 0)
1012.         if settings.USE_TZ:
1013.             fan_since_1 = timezone.make_aware(fan_since_1, is_dst=False)
1014.             fan_since_2 = timezone.make_aware(fan_since_2, is_dst=False)
1015.             fan_since_3 = timezone.make_aware(fan_since_3, is_dst=False)
1016.         Fan.objects.create(author=author_1, name='Tom', fan_since=fan_since_1)
1017.         Fan.objects.create(author=author_1, name='Emma', fan_since=fan_since_2)
1018.         Fan.objects.create(author=author_2, name='Isabella', fan_since=fan_since_3)
1019. 
1020.         inner = Fan.objects.filter(
1021.             author=OuterRef('pk'),
1022.             name__in=('Emma', 'Isabella', 'Tom')
1023.         ).values('author').annotate(newest_fan=Max('fan_since')).values('newest_fan')
1024.         outer = Author.objects.annotate(
1025.             newest_fan_year=TruncYear(Subquery(inner, output_field=DateTimeField()))
1026.         )
1027.         tz = pytz.UTC if settings.USE_TZ else None
1028.         self.assertSequenceEqual(
1029.             outer.order_by('name').values('name', 'newest_fan_year'),
1030.             [
1031.                 {'name': 'G. R. R. Martin', 'newest_fan_year': datetime(2017, 1, 1, 0, 0, tzinfo=tz)},
1032.                 {'name': 'J. R. R. Tolkien', 'newest_fan_year': datetime(2016, 1, 1, 0, 0, tzinfo=tz)},
1033.             ]
1034.         )
1035. 
1036. 
1037. @override_settings(USE_TZ=True, TIME_ZONE='UTC')
1038. class DateFunctionWithTimeZoneTests(DateFunctionTests):
1039. 
1040.     def test_extract_func_with_timezone(self):
1041.         start_datetime = datetime(2015, 6, 15, 23, 30, 1, 321)
1042.         end_datetime = datetime(2015, 6, 16, 13, 11, 27, 123)
1043.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1044.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1045.         self.create_model(start_datetime, end_datetime)
1046.         melb = pytz.timezone('Australia/Melbourne')
1047.         delta_tzinfo_pos = datetime_timezone(timedelta(hours=5))
1048.         delta_tzinfo_neg = datetime_timezone(timedelta(hours=-5, minutes=17))
1049. 
1050.         qs = DTModel.objects.annotate(
1051.             day=Extract('start_datetime', 'day'),
1052.             day_melb=Extract('start_datetime', 'day', tzinfo=melb),
1053.             week=Extract('start_datetime', 'week', tzinfo=melb),
1054.             isoyear=ExtractIsoYear('start_datetime', tzinfo=melb),
1055.             weekday=ExtractWeekDay('start_datetime'),
1056.             weekday_melb=ExtractWeekDay('start_datetime', tzinfo=melb),
1057.             isoweekday=ExtractIsoWeekDay('start_datetime'),
1058.             isoweekday_melb=ExtractIsoWeekDay('start_datetime', tzinfo=melb),
1059.             quarter=ExtractQuarter('start_datetime', tzinfo=melb),
1060.             hour=ExtractHour('start_datetime'),
1061.             hour_melb=ExtractHour('start_datetime', tzinfo=melb),
1062.             hour_with_delta_pos=ExtractHour('start_datetime', tzinfo=delta_tzinfo_pos),
1063.             hour_with_delta_neg=ExtractHour('start_datetime', tzinfo=delta_tzinfo_neg),
1064.             minute_with_delta_neg=ExtractMinute('start_datetime', tzinfo=delta_tzinfo_neg),
1065.         ).order_by('start_datetime')
1066. 
1067.         utc_model = qs.get()
1068.         self.assertEqual(utc_model.day, 15)
1069.         self.assertEqual(utc_model.day_melb, 16)
1070.         self.assertEqual(utc_model.week, 25)
1071.         self.assertEqual(utc_model.isoyear, 2015)
1072.         self.assertEqual(utc_model.weekday, 2)
1073.         self.assertEqual(utc_model.weekday_melb, 3)
1074.         self.assertEqual(utc_model.isoweekday, 1)
1075.         self.assertEqual(utc_model.isoweekday_melb, 2)
1076.         self.assertEqual(utc_model.quarter, 2)
1077.         self.assertEqual(utc_model.hour, 23)
1078.         self.assertEqual(utc_model.hour_melb, 9)
1079.         self.assertEqual(utc_model.hour_with_delta_pos, 4)
1080.         self.assertEqual(utc_model.hour_with_delta_neg, 18)
1081.         self.assertEqual(utc_model.minute_with_delta_neg, 47)
1082. 
1083.         with timezone.override(melb):
1084.             melb_model = qs.get()
1085. 
1086.         self.assertEqual(melb_model.day, 16)
1087.         self.assertEqual(melb_model.day_melb, 16)
1088.         self.assertEqual(melb_model.week, 25)
1089.         self.assertEqual(melb_model.isoyear, 2015)
1090.         self.assertEqual(melb_model.weekday, 3)
1091.         self.assertEqual(melb_model.isoweekday, 2)
1092.         self.assertEqual(melb_model.quarter, 2)
1093.         self.assertEqual(melb_model.weekday_melb, 3)
1094.         self.assertEqual(melb_model.isoweekday_melb, 2)
1095.         self.assertEqual(melb_model.hour, 9)
1096.         self.assertEqual(melb_model.hour_melb, 9)
1097. 
1098.     def test_extract_func_explicit_timezone_priority(self):
1099.         start_datetime = datetime(2015, 6, 15, 23, 30, 1, 321)
1100.         end_datetime = datetime(2015, 6, 16, 13, 11, 27, 123)
1101.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1102.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1103.         self.create_model(start_datetime, end_datetime)
1104.         melb = pytz.timezone('Australia/Melbourne')
1105. 
1106.         with timezone.override(melb):
1107.             model = DTModel.objects.annotate(
1108.                 day_melb=Extract('start_datetime', 'day'),
1109.                 day_utc=Extract('start_datetime', 'day', tzinfo=timezone.utc),
1110.             ).order_by('start_datetime').get()
1111.             self.assertEqual(model.day_melb, 16)
1112.             self.assertEqual(model.day_utc, 15)
1113. 
1114.     def test_trunc_timezone_applied_before_truncation(self):
1115.         start_datetime = datetime(2016, 1, 1, 1, 30, 50, 321)
1116.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
1117.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1118.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1119.         self.create_model(start_datetime, end_datetime)
1120. 
1121.         melb = pytz.timezone('Australia/Melbourne')
1122.         pacific = pytz.timezone('US/Pacific')
1123. 
1124.         model = DTModel.objects.annotate(
1125.             melb_year=TruncYear('start_datetime', tzinfo=melb),
1126.             pacific_year=TruncYear('start_datetime', tzinfo=pacific),
1127.         ).order_by('start_datetime').get()
1128. 
1129.         self.assertEqual(model.start_datetime, start_datetime)
1130.         self.assertEqual(model.melb_year, truncate_to(start_datetime, 'year', melb))
1131.         self.assertEqual(model.pacific_year, truncate_to(start_datetime, 'year', pacific))
1132.         self.assertEqual(model.start_datetime.year, 2016)
1133.         self.assertEqual(model.melb_year.year, 2016)
1134.         self.assertEqual(model.pacific_year.year, 2015)
1135. 
1136.     def test_trunc_ambiguous_and_invalid_times(self):
1137.         sao = pytz.timezone('America/Sao_Paulo')
1138.         utc = pytz.timezone('UTC')
1139.         start_datetime = utc.localize(datetime(2016, 10, 16, 13))
1140.         end_datetime = utc.localize(datetime(2016, 2, 21, 1))
1141.         self.create_model(start_datetime, end_datetime)
1142.         with timezone.override(sao):
1143.             with self.assertRaisesMessage(pytz.NonExistentTimeError, '2016-10-16 00:00:00'):
1144.                 model = DTModel.objects.annotate(truncated_start=TruncDay('start_datetime')).get()
1145.             with self.assertRaisesMessage(pytz.AmbiguousTimeError, '2016-02-20 23:00:00'):
1146.                 model = DTModel.objects.annotate(truncated_end=TruncHour('end_datetime')).get()
1147.             model = DTModel.objects.annotate(
1148.                 truncated_start=TruncDay('start_datetime', is_dst=False),
1149.                 truncated_end=TruncHour('end_datetime', is_dst=False),
1150.             ).get()
1151.             self.assertEqual(model.truncated_start.dst(), timedelta(0))
1152.             self.assertEqual(model.truncated_end.dst(), timedelta(0))
1153.             model = DTModel.objects.annotate(
1154.                 truncated_start=TruncDay('start_datetime', is_dst=True),
1155.                 truncated_end=TruncHour('end_datetime', is_dst=True),
1156.             ).get()
1157.             self.assertEqual(model.truncated_start.dst(), timedelta(0, 3600))
1158.             self.assertEqual(model.truncated_end.dst(), timedelta(0, 3600))
1159. 
1160.     def test_trunc_func_with_timezone(self):
1161.         """
1162.         If the truncated datetime transitions to a different offset (daylight
1163.         saving) then the returned value will have that new timezone/offset.
1164.         """
1165.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
1166.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
1167.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1168.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1169.         self.create_model(start_datetime, end_datetime)
1170.         self.create_model(end_datetime, start_datetime)
1171. 
1172.         melb = pytz.timezone('Australia/Melbourne')
1173. 
1174.         def test_datetime_kind(kind):
1175.             self.assertQuerysetEqual(
1176.                 DTModel.objects.annotate(
1177.                     truncated=Trunc('start_datetime', kind, output_field=DateTimeField(), tzinfo=melb)
1178.                 ).order_by('start_datetime'),
1179.                 [
1180.                     (start_datetime, truncate_to(start_datetime.astimezone(melb), kind, melb)),
1181.                     (end_datetime, truncate_to(end_datetime.astimezone(melb), kind, melb))
1182.                 ],
1183.                 lambda m: (m.start_datetime, m.truncated)
1184.             )
1185. 
1186.         def test_date_kind(kind):
1187.             self.assertQuerysetEqual(
1188.                 DTModel.objects.annotate(
1189.                     truncated=Trunc('start_date', kind, output_field=DateField(), tzinfo=melb)
1190.                 ).order_by('start_datetime'),
1191.                 [
1192.                     (start_datetime, truncate_to(start_datetime.date(), kind)),
1193.                     (end_datetime, truncate_to(end_datetime.date(), kind))
1194.                 ],
1195.                 lambda m: (m.start_datetime, m.truncated)
1196.             )
1197. 
1198.         def test_time_kind(kind):
1199.             self.assertQuerysetEqual(
1200.                 DTModel.objects.annotate(
1201.                     truncated=Trunc('start_time', kind, output_field=TimeField(), tzinfo=melb)
1202.                 ).order_by('start_datetime'),
1203.                 [
1204.                     (start_datetime, truncate_to(start_datetime.time(), kind)),
1205.                     (end_datetime, truncate_to(end_datetime.time(), kind))
1206.                 ],
1207.                 lambda m: (m.start_datetime, m.truncated)
1208.             )
1209. 
1210.         test_date_kind('year')
1211.         test_date_kind('quarter')
1212.         test_date_kind('month')
1213.         test_date_kind('week')
1214.         test_date_kind('day')
1215.         test_time_kind('hour')
1216.         test_time_kind('minute')
1217.         test_time_kind('second')
1218.         test_datetime_kind('year')
1219.         test_datetime_kind('quarter')
1220.         test_datetime_kind('month')
1221.         test_datetime_kind('week')
1222.         test_datetime_kind('day')
1223.         test_datetime_kind('hour')
1224.         test_datetime_kind('minute')
1225.         test_datetime_kind('second')
1226. 
1227.         qs = DTModel.objects.filter(start_datetime__date=Trunc('start_datetime', 'day', output_field=DateField()))
1228.         self.assertEqual(qs.count(), 2)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 15:47:50,759 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly asked for the full content of this file.', relative_path='django/db/models/functions/datetime.py', start_line=1, end_line=326), ContextOutput(reasoning='The user explicitly asked for the full content of this file.', relative_path='tests/db_functions/datetime/test_extract_trunc.py', start_line=1, end_line=1228)]
2025-12-23 15:47:50,762 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`.
2025-12-23 15:47:50,762 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 15:47:50,762 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 15:47:50,763 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-23 15:47:50,763 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-23 15:47:50,764 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Add support for tzinfo parameter to TruncDate() and TruncTime().

Description: Description
	 
		(last modified by Joe Jackson)
	 
Description
TruncDate inherits from TruncBase, which includes the TimeZone mixin. This should allow a developer to pass in a tzinfo object to be used when converting TruncDate, but it actually uses the return value from get_current_timezone_name() unconditionally and completely discards the passed in timezone info object. The result is that attempting to aggregate by date doesn't work for timezones other than the global django.utils.timezone. For example I can't have the django app be in UTC and pass the "America/New_York" timezone in.
Here's the offending line: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L295
Note, that a similar issue is happening in TruncTime.
Here's the method I would expect it to use: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L17
Example
class TimeSlots(models.Model):
 start_at = models.DateTimeField()
tz = pytz.timezone("America/New_York")
report = (
 TimeSlots.objects.annotate(start_date=TruncDate("start_at", tzinfo=tz))
 .values("start_date")
 .annotate(timeslot_count=Count("id"))
 .values("start_date", "timeslot_count")
)
I would expect this to work, but currently the results are wrong for any timezone other than the one returned by django.utils.timezone.
Workaround
There was a workaround for me. I was able to use TruncDay and then convert the DateTimes returned outside of the database, but I found no way to convert from DateTime to Date in the database. Maybe a Cast would work, but I would expect TruncDate to work.
Patch
​PR

Patch information:
diff --git a/django/db/models/functions/datetime.py b/django/db/models/functions/datetime.py
index b6594b043b..6828980733 100644
--- a/django/db/models/functions/datetime.py
+++ b/django/db/models/functions/datetime.py
@@ -292,7 +292,7 @@ class TruncDate(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to date rather than truncate to date.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_date_sql(lhs, tzname)
         return sql, lhs_params
 
@@ -305,7 +305,7 @@ class TruncTime(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to time rather than truncate to time.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_time_sql(lhs, tzname)
         return sql, lhs_params
 
diff --git a/docs/ref/models/database-functions.txt b/docs/ref/models/database-functions.txt
index f5efdb7e87..9d8e4b597c 100644
--- a/docs/ref/models/database-functions.txt
+++ b/docs/ref/models/database-functions.txt
@@ -623,7 +623,7 @@ that deal with date-parts can be used with ``DateField``::
 ``DateTimeField`` truncation
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
-.. class:: TruncDate(expression, **extra)
+.. class:: TruncDate(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'date'
     .. attribute:: output_field = DateField()
@@ -632,7 +632,7 @@ that deal with date-parts can be used with ``DateField``::
 truncate function. It's also registered as a transform on  ``DateTimeField`` as
 ``__date``.
 
-.. class:: TruncTime(expression, **extra)
+.. class:: TruncTime(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'time'
     .. attribute:: output_field = TimeField()


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`.
Extra Requirements: 
Purpose: I need these files to find existing tests for timezone-aware database functions and to understand the implementation of the `Trunc` functions to identify the most relevant examples for the bug fix.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/functions/datetime.py
Line number range: 1 - 326
Content:
1. from datetime import datetime
2. 
3. from django.conf import settings
4. from django.db.models.expressions import Func
5. from django.db.models.fields import (
6.     DateField, DateTimeField, DurationField, Field, IntegerField, TimeField,
7. )
8. from django.db.models.lookups import (
9.     Transform, YearExact, YearGt, YearGte, YearLt, YearLte,
10. )
11. from django.utils import timezone
12. 
13. 
14. class TimezoneMixin:
15.     tzinfo = None
16. 
17.     def get_tzname(self):
18.         # Timezone conversions must happen to the input datetime *before*
19.         # applying a function. 2015-12-31 23:00:00 -02:00 is stored in the
20.         # database as 2016-01-01 01:00:00 +00:00. Any results should be
21.         # based on the input datetime not the stored datetime.
22.         tzname = None
23.         if settings.USE_TZ:
24.             if self.tzinfo is None:
25.                 tzname = timezone.get_current_timezone_name()
26.             else:
27.                 tzname = timezone._get_timezone_name(self.tzinfo)
28.         return tzname
29. 
30. 
31. class Extract(TimezoneMixin, Transform):
32.     lookup_name = None
33.     output_field = IntegerField()
34. 
35.     def __init__(self, expression, lookup_name=None, tzinfo=None, **extra):
36.         if self.lookup_name is None:
37.             self.lookup_name = lookup_name
38.         if self.lookup_name is None:
39.             raise ValueError('lookup_name must be provided')
40.         self.tzinfo = tzinfo
41.         super().__init__(expression, **extra)
42. 
43.     def as_sql(self, compiler, connection):
44.         sql, params = compiler.compile(self.lhs)
45.         lhs_output_field = self.lhs.output_field
46.         if isinstance(lhs_output_field, DateTimeField):
47.             tzname = self.get_tzname()
48.             sql = connection.ops.datetime_extract_sql(self.lookup_name, sql, tzname)
49.         elif isinstance(lhs_output_field, DateField):
50.             sql = connection.ops.date_extract_sql(self.lookup_name, sql)
51.         elif isinstance(lhs_output_field, TimeField):
52.             sql = connection.ops.time_extract_sql(self.lookup_name, sql)
53.         elif isinstance(lhs_output_field, DurationField):
54.             if not connection.features.has_native_duration_field:
55.                 raise ValueError('Extract requires native DurationField database support.')
56.             sql = connection.ops.time_extract_sql(self.lookup_name, sql)
57.         else:
58.             # resolve_expression has already validated the output_field so this
59.             # assert should never be hit.
60.             assert False, "Tried to Extract from an invalid type."
61.         return sql, params
62. 
63.     def resolve_expression(self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False):
64.         copy = super().resolve_expression(query, allow_joins, reuse, summarize, for_save)
65.         field = copy.lhs.output_field
66.         if not isinstance(field, (DateField, DateTimeField, TimeField, DurationField)):
67.             raise ValueError(
68.                 'Extract input expression must be DateField, DateTimeField, '
69.                 'TimeField, or DurationField.'
70.             )
71.         # Passing dates to functions expecting datetimes is most likely a mistake.
72.         if type(field) == DateField and copy.lookup_name in ('hour', 'minute', 'second'):
73.             raise ValueError(
74.                 "Cannot extract time component '%s' from DateField '%s'. " % (copy.lookup_name, field.name)
75.             )
76.         if (
77.             isinstance(field, DurationField) and
78.             copy.lookup_name in ('year', 'iso_year', 'month', 'week', 'week_day', 'iso_week_day', 'quarter')
79.         ):
80.             raise ValueError(
81.                 "Cannot extract component '%s' from DurationField '%s'."
82.                 % (copy.lookup_name, field.name)
83.             )
84.         return copy
85. 
86. 
87. class ExtractYear(Extract):
88.     lookup_name = 'year'
89. 
90. 
91. class ExtractIsoYear(Extract):
92.     """Return the ISO-8601 week-numbering year."""
93.     lookup_name = 'iso_year'
94. 
95. 
96. class ExtractMonth(Extract):
97.     lookup_name = 'month'
98. 
99. 
100. class ExtractDay(Extract):
101.     lookup_name = 'day'
102. 
103. 
104. class ExtractWeek(Extract):
105.     """
106.     Return 1-52 or 53, based on ISO-8601, i.e., Monday is the first of the
107.     week.
108.     """
109.     lookup_name = 'week'
110. 
111. 
112. class ExtractWeekDay(Extract):
113.     """
114.     Return Sunday=1 through Saturday=7.
115. 
116.     To replicate this in Python: (mydatetime.isoweekday() % 7) + 1
117.     """
118.     lookup_name = 'week_day'
119. 
120. 
121. class ExtractIsoWeekDay(Extract):
122.     """Return Monday=1 through Sunday=7, based on ISO-8601."""
123.     lookup_name = 'iso_week_day'
124. 
125. 
126. class ExtractQuarter(Extract):
127.     lookup_name = 'quarter'
128. 
129. 
130. class ExtractHour(Extract):
131.     lookup_name = 'hour'
132. 
133. 
134. class ExtractMinute(Extract):
135.     lookup_name = 'minute'
136. 
137. 
138. class ExtractSecond(Extract):
139.     lookup_name = 'second'
140. 
141. 
142. DateField.register_lookup(ExtractYear)
143. DateField.register_lookup(ExtractMonth)
144. DateField.register_lookup(ExtractDay)
145. DateField.register_lookup(ExtractWeekDay)
146. DateField.register_lookup(ExtractIsoWeekDay)
147. DateField.register_lookup(ExtractWeek)
148. DateField.register_lookup(ExtractIsoYear)
149. DateField.register_lookup(ExtractQuarter)
150. 
151. TimeField.register_lookup(ExtractHour)
152. TimeField.register_lookup(ExtractMinute)
153. TimeField.register_lookup(ExtractSecond)
154. 
155. DateTimeField.register_lookup(ExtractHour)
156. DateTimeField.register_lookup(ExtractMinute)
157. DateTimeField.register_lookup(ExtractSecond)
158. 
159. ExtractYear.register_lookup(YearExact)
160. ExtractYear.register_lookup(YearGt)
161. ExtractYear.register_lookup(YearGte)
162. ExtractYear.register_lookup(YearLt)
163. ExtractYear.register_lookup(YearLte)
164. 
165. ExtractIsoYear.register_lookup(YearExact)
166. ExtractIsoYear.register_lookup(YearGt)
167. ExtractIsoYear.register_lookup(YearGte)
168. ExtractIsoYear.register_lookup(YearLt)
169. ExtractIsoYear.register_lookup(YearLte)
170. 
171. 
172. class Now(Func):
173.     template = 'CURRENT_TIMESTAMP'
174.     output_field = DateTimeField()
175. 
176.     def as_postgresql(self, compiler, connection, **extra_context):
177.         # PostgreSQL's CURRENT_TIMESTAMP means "the time at the start of the
178.         # transaction". Use STATEMENT_TIMESTAMP to be cross-compatible with
179.         # other databases.
180.         return self.as_sql(compiler, connection, template='STATEMENT_TIMESTAMP()', **extra_context)
181. 
182. 
183. class TruncBase(TimezoneMixin, Transform):
184.     kind = None
185.     tzinfo = None
186. 
187.     def __init__(self, expression, output_field=None, tzinfo=None, is_dst=None, **extra):
188.         self.tzinfo = tzinfo
189.         self.is_dst = is_dst
190.         super().__init__(expression, output_field=output_field, **extra)
191. 
192.     def as_sql(self, compiler, connection):
193.         inner_sql, inner_params = compiler.compile(self.lhs)
194.         if isinstance(self.output_field, DateTimeField):
195.             tzname = self.get_tzname()
196.             sql = connection.ops.datetime_trunc_sql(self.kind, inner_sql, tzname)
197.         elif isinstance(self.output_field, DateField):
198.             sql = connection.ops.date_trunc_sql(self.kind, inner_sql)
199.         elif isinstance(self.output_field, TimeField):
200.             sql = connection.ops.time_trunc_sql(self.kind, inner_sql)
201.         else:
202.             raise ValueError('Trunc only valid on DateField, TimeField, or DateTimeField.')
203.         return sql, inner_params
204. 
205.     def resolve_expression(self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False):
206.         copy = super().resolve_expression(query, allow_joins, reuse, summarize, for_save)
207.         field = copy.lhs.output_field
208.         # DateTimeField is a subclass of DateField so this works for both.
209.         assert isinstance(field, (DateField, TimeField)), (
210.             "%r isn't a DateField, TimeField, or DateTimeField." % field.name
211.         )
212.         # If self.output_field was None, then accessing the field will trigger
213.         # the resolver to assign it to self.lhs.output_field.
214.         if not isinstance(copy.output_field, (DateField, DateTimeField, TimeField)):
215.             raise ValueError('output_field must be either DateField, TimeField, or DateTimeField')
216.         # Passing dates or times to functions expecting datetimes is most
217.         # likely a mistake.
218.         class_output_field = self.__class__.output_field if isinstance(self.__class__.output_field, Field) else None
219.         output_field = class_output_field or copy.output_field
220.         has_explicit_output_field = class_output_field or field.__class__ is not copy.output_field.__class__
221.         if type(field) == DateField and (
222.                 isinstance(output_field, DateTimeField) or copy.kind in ('hour', 'minute', 'second', 'time')):
223.             raise ValueError("Cannot truncate DateField '%s' to %s. " % (
224.                 field.name, output_field.__class__.__name__ if has_explicit_output_field else 'DateTimeField'
225.             ))
226.         elif isinstance(field, TimeField) and (
227.                 isinstance(output_field, DateTimeField) or
228.                 copy.kind in ('year', 'quarter', 'month', 'week', 'day', 'date')):
229.             raise ValueError("Cannot truncate TimeField '%s' to %s. " % (
230.                 field.name, output_field.__class__.__name__ if has_explicit_output_field else 'DateTimeField'
231.             ))
232.         return copy
233. 
234.     def convert_value(self, value, expression, connection):
235.         if isinstance(self.output_field, DateTimeField):
236.             if not settings.USE_TZ:
237.                 pass
238.             elif value is not None:
239.                 value = value.replace(tzinfo=None)
240.                 value = timezone.make_aware(value, self.tzinfo, is_dst=self.is_dst)
241.             elif not connection.features.has_zoneinfo_database:
242.                 raise ValueError(
243.                     'Database returned an invalid datetime value. Are time '
244.                     'zone definitions for your database installed?'
245.                 )
246.         elif isinstance(value, datetime):
247.             if value is None:
248.                 pass
249.             elif isinstance(self.output_field, DateField):
250.                 value = value.date()
251.             elif isinstance(self.output_field, TimeField):
252.                 value = value.time()
253.         return value
254. 
255. 
256. class Trunc(TruncBase):
257. 
258.     def __init__(self, expression, kind, output_field=None, tzinfo=None, is_dst=None, **extra):
259.         self.kind = kind
260.         super().__init__(
261.             expression, output_field=output_field, tzinfo=tzinfo,
262.             is_dst=is_dst, **extra
263.         )
264. 
265. 
266. class TruncYear(TruncBase):
267.     kind = 'year'
268. 
269. 
270. class TruncQuarter(TruncBase):
271.     kind = 'quarter'
272. 
273. 
274. class TruncMonth(TruncBase):
275.     kind = 'month'
276. 
277. 
278. class TruncWeek(TruncBase):
279.     """Truncate to midnight on the Monday of the week."""
280.     kind = 'week'
281. 
282. 
283. class TruncDay(TruncBase):
284.     kind = 'day'
285. 
286. 
287. class TruncDate(TruncBase):
288.     kind = 'date'
289.     lookup_name = 'date'
290.     output_field = DateField()
291. 
292.     def as_sql(self, compiler, connection):
293.         # Cast to date rather than truncate to date.
294.         lhs, lhs_params = compiler.compile(self.lhs)
295.         tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
296.         sql = connection.ops.datetime_cast_date_sql(lhs, tzname)
297.         return sql, lhs_params
298. 
299. 
300. class TruncTime(TruncBase):
301.     kind = 'time'
302.     lookup_name = 'time'
303.     output_field = TimeField()
304. 
305.     def as_sql(self, compiler, connection):
306.         # Cast to time rather than truncate to time.
307.         lhs, lhs_params = compiler.compile(self.lhs)
308.         tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
309.         sql = connection.ops.datetime_cast_time_sql(lhs, tzname)
310.         return sql, lhs_params
311. 
312. 
313. class TruncHour(TruncBase):
314.     kind = 'hour'
315. 
316. 
317. class TruncMinute(TruncBase):
318.     kind = 'minute'
319. 
320. 
321. class TruncSecond(TruncBase):
322.     kind = 'second'
323. 
324. 
325. DateTimeField.register_lookup(TruncDate)
326. DateTimeField.register_lookup(TruncTime)


File: tests/db_functions/datetime/test_extract_trunc.py
Line number range: 1 - 1228
Content:
1. from datetime import datetime, timedelta, timezone as datetime_timezone
2. 
3. import pytz
4. 
5. from django.conf import settings
6. from django.db.models import (
7.     DateField, DateTimeField, F, IntegerField, Max, OuterRef, Subquery,
8.     TimeField,
9. )
10. from django.db.models.functions import (
11.     Extract, ExtractDay, ExtractHour, ExtractIsoWeekDay, ExtractIsoYear,
12.     ExtractMinute, ExtractMonth, ExtractQuarter, ExtractSecond, ExtractWeek,
13.     ExtractWeekDay, ExtractYear, Trunc, TruncDate, TruncDay, TruncHour,
14.     TruncMinute, TruncMonth, TruncQuarter, TruncSecond, TruncTime, TruncWeek,
15.     TruncYear,
16. )
17. from django.test import (
18.     TestCase, override_settings, skipIfDBFeature, skipUnlessDBFeature,
19. )
20. from django.utils import timezone
21. 
22. from ..models import Author, DTModel, Fan
23. 
24. 
25. def truncate_to(value, kind, tzinfo=None):
26.     # Convert to target timezone before truncation
27.     if tzinfo is not None:
28.         value = value.astimezone(tzinfo)
29. 
30.     def truncate(value, kind):
31.         if kind == 'second':
32.             return value.replace(microsecond=0)
33.         if kind == 'minute':
34.             return value.replace(second=0, microsecond=0)
35.         if kind == 'hour':
36.             return value.replace(minute=0, second=0, microsecond=0)
37.         if kind == 'day':
38.             if isinstance(value, datetime):
39.                 return value.replace(hour=0, minute=0, second=0, microsecond=0)
40.             return value
41.         if kind == 'week':
42.             if isinstance(value, datetime):
43.                 return (value - timedelta(days=value.weekday())).replace(hour=0, minute=0, second=0, microsecond=0)
44.             return value - timedelta(days=value.weekday())
45.         if kind == 'month':
46.             if isinstance(value, datetime):
47.                 return value.replace(day=1, hour=0, minute=0, second=0, microsecond=0)
48.             return value.replace(day=1)
49.         if kind == 'quarter':
50.             month_in_quarter = value.month - (value.month - 1) % 3
51.             if isinstance(value, datetime):
52.                 return value.replace(month=month_in_quarter, day=1, hour=0, minute=0, second=0, microsecond=0)
53.             return value.replace(month=month_in_quarter, day=1)
54.         # otherwise, truncate to year
55.         if isinstance(value, datetime):
56.             return value.replace(month=1, day=1, hour=0, minute=0, second=0, microsecond=0)
57.         return value.replace(month=1, day=1)
58. 
59.     value = truncate(value, kind)
60.     if tzinfo is not None:
61.         # If there was a daylight saving transition, then reset the timezone.
62.         value = timezone.make_aware(value.replace(tzinfo=None), tzinfo)
63.     return value
64. 
65. 
66. @override_settings(USE_TZ=False)
67. class DateFunctionTests(TestCase):
68. 
69.     def create_model(self, start_datetime, end_datetime):
70.         return DTModel.objects.create(
71.             name=start_datetime.isoformat() if start_datetime else 'None',
72.             start_datetime=start_datetime,
73.             end_datetime=end_datetime,
74.             start_date=start_datetime.date() if start_datetime else None,
75.             end_date=end_datetime.date() if end_datetime else None,
76.             start_time=start_datetime.time() if start_datetime else None,
77.             end_time=end_datetime.time() if end_datetime else None,
78.             duration=(end_datetime - start_datetime) if start_datetime and end_datetime else None,
79.         )
80. 
81.     def test_extract_year_exact_lookup(self):
82.         """
83.         Extract year uses a BETWEEN filter to compare the year to allow indexes
84.         to be used.
85.         """
86.         start_datetime = datetime(2015, 6, 15, 14, 10)
87.         end_datetime = datetime(2016, 6, 15, 14, 10)
88.         if settings.USE_TZ:
89.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
90.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
91.         self.create_model(start_datetime, end_datetime)
92.         self.create_model(end_datetime, start_datetime)
93. 
94.         for lookup in ('year', 'iso_year'):
95.             with self.subTest(lookup):
96.                 qs = DTModel.objects.filter(**{'start_datetime__%s__exact' % lookup: 2015})
97.                 self.assertEqual(qs.count(), 1)
98.                 query_string = str(qs.query).lower()
99.                 self.assertEqual(query_string.count(' between '), 1)
100.                 self.assertEqual(query_string.count('extract'), 0)
101.                 # exact is implied and should be the same
102.                 qs = DTModel.objects.filter(**{'start_datetime__%s' % lookup: 2015})
103.                 self.assertEqual(qs.count(), 1)
104.                 query_string = str(qs.query).lower()
105.                 self.assertEqual(query_string.count(' between '), 1)
106.                 self.assertEqual(query_string.count('extract'), 0)
107.                 # date and datetime fields should behave the same
108.                 qs = DTModel.objects.filter(**{'start_date__%s' % lookup: 2015})
109.                 self.assertEqual(qs.count(), 1)
110.                 query_string = str(qs.query).lower()
111.                 self.assertEqual(query_string.count(' between '), 1)
112.                 self.assertEqual(query_string.count('extract'), 0)
113.                 # an expression rhs cannot use the between optimization.
114.                 qs = DTModel.objects.annotate(
115.                     start_year=ExtractYear('start_datetime'),
116.                 ).filter(end_datetime__year=F('start_year') + 1)
117.                 self.assertEqual(qs.count(), 1)
118.                 query_string = str(qs.query).lower()
119.                 self.assertEqual(query_string.count(' between '), 0)
120.                 self.assertEqual(query_string.count('extract'), 3)
121. 
122.     def test_extract_year_greaterthan_lookup(self):
123.         start_datetime = datetime(2015, 6, 15, 14, 10)
124.         end_datetime = datetime(2016, 6, 15, 14, 10)
125.         if settings.USE_TZ:
126.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
127.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
128.         self.create_model(start_datetime, end_datetime)
129.         self.create_model(end_datetime, start_datetime)
130. 
131.         for lookup in ('year', 'iso_year'):
132.             with self.subTest(lookup):
133.                 qs = DTModel.objects.filter(**{'start_datetime__%s__gt' % lookup: 2015})
134.                 self.assertEqual(qs.count(), 1)
135.                 self.assertEqual(str(qs.query).lower().count('extract'), 0)
136.                 qs = DTModel.objects.filter(**{'start_datetime__%s__gte' % lookup: 2015})
137.                 self.assertEqual(qs.count(), 2)
138.                 self.assertEqual(str(qs.query).lower().count('extract'), 0)
139.                 qs = DTModel.objects.annotate(
140.                     start_year=ExtractYear('start_datetime'),
141.                 ).filter(**{'end_datetime__%s__gte' % lookup: F('start_year')})
142.                 self.assertEqual(qs.count(), 1)
143.                 self.assertGreaterEqual(str(qs.query).lower().count('extract'), 2)
144. 
145.     def test_extract_year_lessthan_lookup(self):
146.         start_datetime = datetime(2015, 6, 15, 14, 10)
147.         end_datetime = datetime(2016, 6, 15, 14, 10)
148.         if settings.USE_TZ:
149.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
150.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
151.         self.create_model(start_datetime, end_datetime)
152.         self.create_model(end_datetime, start_datetime)
153. 
154.         for lookup in ('year', 'iso_year'):
155.             with self.subTest(lookup):
156.                 qs = DTModel.objects.filter(**{'start_datetime__%s__lt' % lookup: 2016})
157.                 self.assertEqual(qs.count(), 1)
158.                 self.assertEqual(str(qs.query).count('extract'), 0)
159.                 qs = DTModel.objects.filter(**{'start_datetime__%s__lte' % lookup: 2016})
160.                 self.assertEqual(qs.count(), 2)
161.                 self.assertEqual(str(qs.query).count('extract'), 0)
162.                 qs = DTModel.objects.annotate(
163.                     end_year=ExtractYear('end_datetime'),
164.                 ).filter(**{'start_datetime__%s__lte' % lookup: F('end_year')})
165.                 self.assertEqual(qs.count(), 1)
166.                 self.assertGreaterEqual(str(qs.query).lower().count('extract'), 2)
167. 
168.     def test_extract_func(self):
169.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
170.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
171.         if settings.USE_TZ:
172.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
173.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
174.         self.create_model(start_datetime, end_datetime)
175.         self.create_model(end_datetime, start_datetime)
176. 
177.         with self.assertRaisesMessage(ValueError, 'lookup_name must be provided'):
178.             Extract('start_datetime')
179. 
180.         msg = 'Extract input expression must be DateField, DateTimeField, TimeField, or DurationField.'
181.         with self.assertRaisesMessage(ValueError, msg):
182.             list(DTModel.objects.annotate(extracted=Extract('name', 'hour')))
183. 
184.         with self.assertRaisesMessage(
185.                 ValueError, "Cannot extract time component 'second' from DateField 'start_date'."):
186.             list(DTModel.objects.annotate(extracted=Extract('start_date', 'second')))
187. 
188.         self.assertQuerysetEqual(
189.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'year')).order_by('start_datetime'),
190.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
191.             lambda m: (m.start_datetime, m.extracted)
192.         )
193.         self.assertQuerysetEqual(
194.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'quarter')).order_by('start_datetime'),
195.             [(start_datetime, 2), (end_datetime, 2)],
196.             lambda m: (m.start_datetime, m.extracted)
197.         )
198.         self.assertQuerysetEqual(
199.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'month')).order_by('start_datetime'),
200.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
201.             lambda m: (m.start_datetime, m.extracted)
202.         )
203.         self.assertQuerysetEqual(
204.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'day')).order_by('start_datetime'),
205.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
206.             lambda m: (m.start_datetime, m.extracted)
207.         )
208.         self.assertQuerysetEqual(
209.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'week')).order_by('start_datetime'),
210.             [(start_datetime, 25), (end_datetime, 24)],
211.             lambda m: (m.start_datetime, m.extracted)
212.         )
213.         self.assertQuerysetEqual(
214.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'week_day')).order_by('start_datetime'),
215.             [
216.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
217.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1)
218.             ],
219.             lambda m: (m.start_datetime, m.extracted)
220.         )
221.         self.assertQuerysetEqual(
222.             DTModel.objects.annotate(
223.                 extracted=Extract('start_datetime', 'iso_week_day'),
224.             ).order_by('start_datetime'),
225.             [
226.                 (start_datetime, start_datetime.isoweekday()),
227.                 (end_datetime, end_datetime.isoweekday()),
228.             ],
229.             lambda m: (m.start_datetime, m.extracted)
230.         )
231.         self.assertQuerysetEqual(
232.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'hour')).order_by('start_datetime'),
233.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
234.             lambda m: (m.start_datetime, m.extracted)
235.         )
236.         self.assertQuerysetEqual(
237.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'minute')).order_by('start_datetime'),
238.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
239.             lambda m: (m.start_datetime, m.extracted)
240.         )
241.         self.assertQuerysetEqual(
242.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'second')).order_by('start_datetime'),
243.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
244.             lambda m: (m.start_datetime, m.extracted)
245.         )
246.         self.assertEqual(DTModel.objects.filter(start_datetime__year=Extract('start_datetime', 'year')).count(), 2)
247.         self.assertEqual(DTModel.objects.filter(start_datetime__hour=Extract('start_datetime', 'hour')).count(), 2)
248.         self.assertEqual(DTModel.objects.filter(start_date__month=Extract('start_date', 'month')).count(), 2)
249.         self.assertEqual(DTModel.objects.filter(start_time__hour=Extract('start_time', 'hour')).count(), 2)
250. 
251.     def test_extract_none(self):
252.         self.create_model(None, None)
253.         for t in (Extract('start_datetime', 'year'), Extract('start_date', 'year'), Extract('start_time', 'hour')):
254.             with self.subTest(t):
255.                 self.assertIsNone(DTModel.objects.annotate(extracted=t).first().extracted)
256. 
257.     @skipUnlessDBFeature('has_native_duration_field')
258.     def test_extract_duration(self):
259.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
260.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
261.         if settings.USE_TZ:
262.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
263.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
264.         self.create_model(start_datetime, end_datetime)
265.         self.create_model(end_datetime, start_datetime)
266.         self.assertQuerysetEqual(
267.             DTModel.objects.annotate(extracted=Extract('duration', 'second')).order_by('start_datetime'),
268.             [
269.                 (start_datetime, (end_datetime - start_datetime).seconds % 60),
270.                 (end_datetime, (start_datetime - end_datetime).seconds % 60)
271.             ],
272.             lambda m: (m.start_datetime, m.extracted)
273.         )
274.         self.assertEqual(
275.             DTModel.objects.annotate(
276.                 duration_days=Extract('duration', 'day'),
277.             ).filter(duration_days__gt=200).count(),
278.             1
279.         )
280. 
281.     @skipIfDBFeature('has_native_duration_field')
282.     def test_extract_duration_without_native_duration_field(self):
283.         msg = 'Extract requires native DurationField database support.'
284.         with self.assertRaisesMessage(ValueError, msg):
285.             list(DTModel.objects.annotate(extracted=Extract('duration', 'second')))
286. 
287.     def test_extract_duration_unsupported_lookups(self):
288.         msg = "Cannot extract component '%s' from DurationField 'duration'."
289.         for lookup in (
290.             'year', 'iso_year', 'month', 'week', 'week_day', 'iso_week_day',
291.             'quarter',
292.         ):
293.             with self.subTest(lookup):
294.                 with self.assertRaisesMessage(ValueError, msg % lookup):
295.                     DTModel.objects.annotate(extracted=Extract('duration', lookup))
296. 
297.     def test_extract_year_func(self):
298.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
299.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
300.         if settings.USE_TZ:
301.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
302.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
303.         self.create_model(start_datetime, end_datetime)
304.         self.create_model(end_datetime, start_datetime)
305.         self.assertQuerysetEqual(
306.             DTModel.objects.annotate(extracted=ExtractYear('start_datetime')).order_by('start_datetime'),
307.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
308.             lambda m: (m.start_datetime, m.extracted)
309.         )
310.         self.assertQuerysetEqual(
311.             DTModel.objects.annotate(extracted=ExtractYear('start_date')).order_by('start_datetime'),
312.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
313.             lambda m: (m.start_datetime, m.extracted)
314.         )
315.         self.assertEqual(DTModel.objects.filter(start_datetime__year=ExtractYear('start_datetime')).count(), 2)
316. 
317.     def test_extract_iso_year_func(self):
318.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
319.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
320.         if settings.USE_TZ:
321.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
322.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
323.         self.create_model(start_datetime, end_datetime)
324.         self.create_model(end_datetime, start_datetime)
325.         self.assertQuerysetEqual(
326.             DTModel.objects.annotate(extracted=ExtractIsoYear('start_datetime')).order_by('start_datetime'),
327.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
328.             lambda m: (m.start_datetime, m.extracted)
329.         )
330.         self.assertQuerysetEqual(
331.             DTModel.objects.annotate(extracted=ExtractIsoYear('start_date')).order_by('start_datetime'),
332.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
333.             lambda m: (m.start_datetime, m.extracted)
334.         )
335.         # Both dates are from the same week year.
336.         self.assertEqual(DTModel.objects.filter(start_datetime__iso_year=ExtractIsoYear('start_datetime')).count(), 2)
337. 
338.     def test_extract_iso_year_func_boundaries(self):
339.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
340.         if settings.USE_TZ:
341.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
342.         week_52_day_2014 = datetime(2014, 12, 27, 13, 0)  # Sunday
343.         week_1_day_2014_2015 = datetime(2014, 12, 31, 13, 0)  # Wednesday
344.         week_53_day_2015 = datetime(2015, 12, 31, 13, 0)  # Thursday
345.         if settings.USE_TZ:
346.             week_1_day_2014_2015 = timezone.make_aware(week_1_day_2014_2015, is_dst=False)
347.             week_52_day_2014 = timezone.make_aware(week_52_day_2014, is_dst=False)
348.             week_53_day_2015 = timezone.make_aware(week_53_day_2015, is_dst=False)
349.         days = [week_52_day_2014, week_1_day_2014_2015, week_53_day_2015]
350.         self.create_model(week_53_day_2015, end_datetime)
351.         self.create_model(week_52_day_2014, end_datetime)
352.         self.create_model(week_1_day_2014_2015, end_datetime)
353.         qs = DTModel.objects.filter(start_datetime__in=days).annotate(
354.             extracted=ExtractIsoYear('start_datetime'),
355.         ).order_by('start_datetime')
356.         self.assertQuerysetEqual(qs, [
357.             (week_52_day_2014, 2014),
358.             (week_1_day_2014_2015, 2015),
359.             (week_53_day_2015, 2015),
360.         ], lambda m: (m.start_datetime, m.extracted))
361. 
362.     def test_extract_month_func(self):
363.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
364.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
365.         if settings.USE_TZ:
366.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
367.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
368.         self.create_model(start_datetime, end_datetime)
369.         self.create_model(end_datetime, start_datetime)
370.         self.assertQuerysetEqual(
371.             DTModel.objects.annotate(extracted=ExtractMonth('start_datetime')).order_by('start_datetime'),
372.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
373.             lambda m: (m.start_datetime, m.extracted)
374.         )
375.         self.assertQuerysetEqual(
376.             DTModel.objects.annotate(extracted=ExtractMonth('start_date')).order_by('start_datetime'),
377.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
378.             lambda m: (m.start_datetime, m.extracted)
379.         )
380.         self.assertEqual(DTModel.objects.filter(start_datetime__month=ExtractMonth('start_datetime')).count(), 2)
381. 
382.     def test_extract_day_func(self):
383.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
384.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
385.         if settings.USE_TZ:
386.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
387.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
388.         self.create_model(start_datetime, end_datetime)
389.         self.create_model(end_datetime, start_datetime)
390.         self.assertQuerysetEqual(
391.             DTModel.objects.annotate(extracted=ExtractDay('start_datetime')).order_by('start_datetime'),
392.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
393.             lambda m: (m.start_datetime, m.extracted)
394.         )
395.         self.assertQuerysetEqual(
396.             DTModel.objects.annotate(extracted=ExtractDay('start_date')).order_by('start_datetime'),
397.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
398.             lambda m: (m.start_datetime, m.extracted)
399.         )
400.         self.assertEqual(DTModel.objects.filter(start_datetime__day=ExtractDay('start_datetime')).count(), 2)
401. 
402.     def test_extract_week_func(self):
403.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
404.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
405.         if settings.USE_TZ:
406.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
407.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
408.         self.create_model(start_datetime, end_datetime)
409.         self.create_model(end_datetime, start_datetime)
410.         self.assertQuerysetEqual(
411.             DTModel.objects.annotate(extracted=ExtractWeek('start_datetime')).order_by('start_datetime'),
412.             [(start_datetime, 25), (end_datetime, 24)],
413.             lambda m: (m.start_datetime, m.extracted)
414.         )
415.         self.assertQuerysetEqual(
416.             DTModel.objects.annotate(extracted=ExtractWeek('start_date')).order_by('start_datetime'),
417.             [(start_datetime, 25), (end_datetime, 24)],
418.             lambda m: (m.start_datetime, m.extracted)
419.         )
420.         # both dates are from the same week.
421.         self.assertEqual(DTModel.objects.filter(start_datetime__week=ExtractWeek('start_datetime')).count(), 2)
422. 
423.     def test_extract_quarter_func(self):
424.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
425.         end_datetime = datetime(2016, 8, 15, 14, 10, 50, 123)
426.         if settings.USE_TZ:
427.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
428.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
429.         self.create_model(start_datetime, end_datetime)
430.         self.create_model(end_datetime, start_datetime)
431.         self.assertQuerysetEqual(
432.             DTModel.objects.annotate(extracted=ExtractQuarter('start_datetime')).order_by('start_datetime'),
433.             [(start_datetime, 2), (end_datetime, 3)],
434.             lambda m: (m.start_datetime, m.extracted)
435.         )
436.         self.assertQuerysetEqual(
437.             DTModel.objects.annotate(extracted=ExtractQuarter('start_date')).order_by('start_datetime'),
438.             [(start_datetime, 2), (end_datetime, 3)],
439.             lambda m: (m.start_datetime, m.extracted)
440.         )
441.         self.assertEqual(DTModel.objects.filter(start_datetime__quarter=ExtractQuarter('start_datetime')).count(), 2)
442. 
443.     def test_extract_quarter_func_boundaries(self):
444.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
445.         if settings.USE_TZ:
446.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
447. 
448.         last_quarter_2014 = datetime(2014, 12, 31, 13, 0)
449.         first_quarter_2015 = datetime(2015, 1, 1, 13, 0)
450.         if settings.USE_TZ:
451.             last_quarter_2014 = timezone.make_aware(last_quarter_2014, is_dst=False)
452.             first_quarter_2015 = timezone.make_aware(first_quarter_2015, is_dst=False)
453.         dates = [last_quarter_2014, first_quarter_2015]
454.         self.create_model(last_quarter_2014, end_datetime)
455.         self.create_model(first_quarter_2015, end_datetime)
456.         qs = DTModel.objects.filter(start_datetime__in=dates).annotate(
457.             extracted=ExtractQuarter('start_datetime'),
458.         ).order_by('start_datetime')
459.         self.assertQuerysetEqual(qs, [
460.             (last_quarter_2014, 4),
461.             (first_quarter_2015, 1),
462.         ], lambda m: (m.start_datetime, m.extracted))
463. 
464.     def test_extract_week_func_boundaries(self):
465.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
466.         if settings.USE_TZ:
467.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
468. 
469.         week_52_day_2014 = datetime(2014, 12, 27, 13, 0)  # Sunday
470.         week_1_day_2014_2015 = datetime(2014, 12, 31, 13, 0)  # Wednesday
471.         week_53_day_2015 = datetime(2015, 12, 31, 13, 0)  # Thursday
472.         if settings.USE_TZ:
473.             week_1_day_2014_2015 = timezone.make_aware(week_1_day_2014_2015, is_dst=False)
474.             week_52_day_2014 = timezone.make_aware(week_52_day_2014, is_dst=False)
475.             week_53_day_2015 = timezone.make_aware(week_53_day_2015, is_dst=False)
476. 
477.         days = [week_52_day_2014, week_1_day_2014_2015, week_53_day_2015]
478.         self.create_model(week_53_day_2015, end_datetime)
479.         self.create_model(week_52_day_2014, end_datetime)
480.         self.create_model(week_1_day_2014_2015, end_datetime)
481.         qs = DTModel.objects.filter(start_datetime__in=days).annotate(
482.             extracted=ExtractWeek('start_datetime'),
483.         ).order_by('start_datetime')
484.         self.assertQuerysetEqual(qs, [
485.             (week_52_day_2014, 52),
486.             (week_1_day_2014_2015, 1),
487.             (week_53_day_2015, 53),
488.         ], lambda m: (m.start_datetime, m.extracted))
489. 
490.     def test_extract_weekday_func(self):
491.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
492.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
493.         if settings.USE_TZ:
494.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
495.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
496.         self.create_model(start_datetime, end_datetime)
497.         self.create_model(end_datetime, start_datetime)
498.         self.assertQuerysetEqual(
499.             DTModel.objects.annotate(extracted=ExtractWeekDay('start_datetime')).order_by('start_datetime'),
500.             [
501.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
502.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1),
503.             ],
504.             lambda m: (m.start_datetime, m.extracted)
505.         )
506.         self.assertQuerysetEqual(
507.             DTModel.objects.annotate(extracted=ExtractWeekDay('start_date')).order_by('start_datetime'),
508.             [
509.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
510.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1),
511.             ],
512.             lambda m: (m.start_datetime, m.extracted)
513.         )
514.         self.assertEqual(DTModel.objects.filter(start_datetime__week_day=ExtractWeekDay('start_datetime')).count(), 2)
515. 
516.     def test_extract_iso_weekday_func(self):
517.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
518.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
519.         if settings.USE_TZ:
520.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
521.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
522.         self.create_model(start_datetime, end_datetime)
523.         self.create_model(end_datetime, start_datetime)
524.         self.assertQuerysetEqual(
525.             DTModel.objects.annotate(
526.                 extracted=ExtractIsoWeekDay('start_datetime'),
527.             ).order_by('start_datetime'),
528.             [
529.                 (start_datetime, start_datetime.isoweekday()),
530.                 (end_datetime, end_datetime.isoweekday()),
531.             ],
532.             lambda m: (m.start_datetime, m.extracted)
533.         )
534.         self.assertQuerysetEqual(
535.             DTModel.objects.annotate(
536.                 extracted=ExtractIsoWeekDay('start_date'),
537.             ).order_by('start_datetime'),
538.             [
539.                 (start_datetime, start_datetime.isoweekday()),
540.                 (end_datetime, end_datetime.isoweekday()),
541.             ],
542.             lambda m: (m.start_datetime, m.extracted)
543.         )
544.         self.assertEqual(
545.             DTModel.objects.filter(
546.                 start_datetime__week_day=ExtractWeekDay('start_datetime'),
547.             ).count(),
548.             2,
549.         )
550. 
551.     def test_extract_hour_func(self):
552.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
553.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
554.         if settings.USE_TZ:
555.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
556.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
557.         self.create_model(start_datetime, end_datetime)
558.         self.create_model(end_datetime, start_datetime)
559.         self.assertQuerysetEqual(
560.             DTModel.objects.annotate(extracted=ExtractHour('start_datetime')).order_by('start_datetime'),
561.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
562.             lambda m: (m.start_datetime, m.extracted)
563.         )
564.         self.assertQuerysetEqual(
565.             DTModel.objects.annotate(extracted=ExtractHour('start_time')).order_by('start_datetime'),
566.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
567.             lambda m: (m.start_datetime, m.extracted)
568.         )
569.         self.assertEqual(DTModel.objects.filter(start_datetime__hour=ExtractHour('start_datetime')).count(), 2)
570. 
571.     def test_extract_minute_func(self):
572.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
573.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
574.         if settings.USE_TZ:
575.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
576.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
577.         self.create_model(start_datetime, end_datetime)
578.         self.create_model(end_datetime, start_datetime)
579.         self.assertQuerysetEqual(
580.             DTModel.objects.annotate(extracted=ExtractMinute('start_datetime')).order_by('start_datetime'),
581.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
582.             lambda m: (m.start_datetime, m.extracted)
583.         )
584.         self.assertQuerysetEqual(
585.             DTModel.objects.annotate(extracted=ExtractMinute('start_time')).order_by('start_datetime'),
586.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
587.             lambda m: (m.start_datetime, m.extracted)
588.         )
589.         self.assertEqual(DTModel.objects.filter(start_datetime__minute=ExtractMinute('start_datetime')).count(), 2)
590. 
591.     def test_extract_second_func(self):
592.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
593.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
594.         if settings.USE_TZ:
595.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
596.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
597.         self.create_model(start_datetime, end_datetime)
598.         self.create_model(end_datetime, start_datetime)
599.         self.assertQuerysetEqual(
600.             DTModel.objects.annotate(extracted=ExtractSecond('start_datetime')).order_by('start_datetime'),
601.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
602.             lambda m: (m.start_datetime, m.extracted)
603.         )
604.         self.assertQuerysetEqual(
605.             DTModel.objects.annotate(extracted=ExtractSecond('start_time')).order_by('start_datetime'),
606.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
607.             lambda m: (m.start_datetime, m.extracted)
608.         )
609.         self.assertEqual(DTModel.objects.filter(start_datetime__second=ExtractSecond('start_datetime')).count(), 2)
610. 
611.     def test_trunc_func(self):
612.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
613.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
614.         if settings.USE_TZ:
615.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
616.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
617.         self.create_model(start_datetime, end_datetime)
618.         self.create_model(end_datetime, start_datetime)
619. 
620.         msg = 'output_field must be either DateField, TimeField, or DateTimeField'
621.         with self.assertRaisesMessage(ValueError, msg):
622.             list(DTModel.objects.annotate(truncated=Trunc('start_datetime', 'year', output_field=IntegerField())))
623. 
624.         with self.assertRaisesMessage(AssertionError, "'name' isn't a DateField, TimeField, or DateTimeField."):
625.             list(DTModel.objects.annotate(truncated=Trunc('name', 'year', output_field=DateTimeField())))
626. 
627.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
628.             list(DTModel.objects.annotate(truncated=Trunc('start_date', 'second')))
629. 
630.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
631.             list(DTModel.objects.annotate(truncated=Trunc('start_time', 'month')))
632. 
633.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
634.             list(DTModel.objects.annotate(truncated=Trunc('start_date', 'month', output_field=DateTimeField())))
635. 
636.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
637.             list(DTModel.objects.annotate(truncated=Trunc('start_time', 'second', output_field=DateTimeField())))
638. 
639.         def test_datetime_kind(kind):
640.             self.assertQuerysetEqual(
641.                 DTModel.objects.annotate(
642.                     truncated=Trunc('start_datetime', kind, output_field=DateTimeField())
643.                 ).order_by('start_datetime'),
644.                 [
645.                     (start_datetime, truncate_to(start_datetime, kind)),
646.                     (end_datetime, truncate_to(end_datetime, kind))
647.                 ],
648.                 lambda m: (m.start_datetime, m.truncated)
649.             )
650. 
651.         def test_date_kind(kind):
652.             self.assertQuerysetEqual(
653.                 DTModel.objects.annotate(
654.                     truncated=Trunc('start_date', kind, output_field=DateField())
655.                 ).order_by('start_datetime'),
656.                 [
657.                     (start_datetime, truncate_to(start_datetime.date(), kind)),
658.                     (end_datetime, truncate_to(end_datetime.date(), kind))
659.                 ],
660.                 lambda m: (m.start_datetime, m.truncated)
661.             )
662. 
663.         def test_time_kind(kind):
664.             self.assertQuerysetEqual(
665.                 DTModel.objects.annotate(
666.                     truncated=Trunc('start_time', kind, output_field=TimeField())
667.                 ).order_by('start_datetime'),
668.                 [
669.                     (start_datetime, truncate_to(start_datetime.time(), kind)),
670.                     (end_datetime, truncate_to(end_datetime.time(), kind))
671.                 ],
672.                 lambda m: (m.start_datetime, m.truncated)
673.             )
674. 
675.         test_date_kind('year')
676.         test_date_kind('quarter')
677.         test_date_kind('month')
678.         test_date_kind('week')
679.         test_date_kind('day')
680.         test_time_kind('hour')
681.         test_time_kind('minute')
682.         test_time_kind('second')
683.         test_datetime_kind('year')
684.         test_datetime_kind('quarter')
685.         test_datetime_kind('month')
686.         test_datetime_kind('week')
687.         test_datetime_kind('day')
688.         test_datetime_kind('hour')
689.         test_datetime_kind('minute')
690.         test_datetime_kind('second')
691. 
692.         qs = DTModel.objects.filter(start_datetime__date=Trunc('start_datetime', 'day', output_field=DateField()))
693.         self.assertEqual(qs.count(), 2)
694. 
695.     def test_trunc_none(self):
696.         self.create_model(None, None)
697.         for t in (Trunc('start_datetime', 'year'), Trunc('start_date', 'year'), Trunc('start_time', 'hour')):
698.             with self.subTest(t):
699.                 self.assertIsNone(DTModel.objects.annotate(truncated=t).first().truncated)
700. 
701.     def test_trunc_year_func(self):
702.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
703.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'year')
704.         if settings.USE_TZ:
705.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
706.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
707.         self.create_model(start_datetime, end_datetime)
708.         self.create_model(end_datetime, start_datetime)
709.         self.assertQuerysetEqual(
710.             DTModel.objects.annotate(extracted=TruncYear('start_datetime')).order_by('start_datetime'),
711.             [
712.                 (start_datetime, truncate_to(start_datetime, 'year')),
713.                 (end_datetime, truncate_to(end_datetime, 'year')),
714.             ],
715.             lambda m: (m.start_datetime, m.extracted)
716.         )
717.         self.assertQuerysetEqual(
718.             DTModel.objects.annotate(extracted=TruncYear('start_date')).order_by('start_datetime'),
719.             [
720.                 (start_datetime, truncate_to(start_datetime.date(), 'year')),
721.                 (end_datetime, truncate_to(end_datetime.date(), 'year')),
722.             ],
723.             lambda m: (m.start_datetime, m.extracted)
724.         )
725.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncYear('start_datetime')).count(), 1)
726. 
727.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
728.             list(DTModel.objects.annotate(truncated=TruncYear('start_time')))
729. 
730.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
731.             list(DTModel.objects.annotate(truncated=TruncYear('start_time', output_field=TimeField())))
732. 
733.     def test_trunc_quarter_func(self):
734.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
735.         end_datetime = truncate_to(datetime(2016, 10, 15, 14, 10, 50, 123), 'quarter')
736.         last_quarter_2015 = truncate_to(datetime(2015, 12, 31, 14, 10, 50, 123), 'quarter')
737.         first_quarter_2016 = truncate_to(datetime(2016, 1, 1, 14, 10, 50, 123), 'quarter')
738.         if settings.USE_TZ:
739.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
740.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
741.             last_quarter_2015 = timezone.make_aware(last_quarter_2015, is_dst=False)
742.             first_quarter_2016 = timezone.make_aware(first_quarter_2016, is_dst=False)
743.         self.create_model(start_datetime=start_datetime, end_datetime=end_datetime)
744.         self.create_model(start_datetime=end_datetime, end_datetime=start_datetime)
745.         self.create_model(start_datetime=last_quarter_2015, end_datetime=end_datetime)
746.         self.create_model(start_datetime=first_quarter_2016, end_datetime=end_datetime)
747.         self.assertQuerysetEqual(
748.             DTModel.objects.annotate(extracted=TruncQuarter('start_date')).order_by('start_datetime'),
749.             [
750.                 (start_datetime, truncate_to(start_datetime.date(), 'quarter')),
751.                 (last_quarter_2015, truncate_to(last_quarter_2015.date(), 'quarter')),
752.                 (first_quarter_2016, truncate_to(first_quarter_2016.date(), 'quarter')),
753.                 (end_datetime, truncate_to(end_datetime.date(), 'quarter')),
754.             ],
755.             lambda m: (m.start_datetime, m.extracted)
756.         )
757.         self.assertQuerysetEqual(
758.             DTModel.objects.annotate(extracted=TruncQuarter('start_datetime')).order_by('start_datetime'),
759.             [
760.                 (start_datetime, truncate_to(start_datetime, 'quarter')),
761.                 (last_quarter_2015, truncate_to(last_quarter_2015, 'quarter')),
762.                 (first_quarter_2016, truncate_to(first_quarter_2016, 'quarter')),
763.                 (end_datetime, truncate_to(end_datetime, 'quarter')),
764.             ],
765.             lambda m: (m.start_datetime, m.extracted)
766.         )
767. 
768.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
769.             list(DTModel.objects.annotate(truncated=TruncQuarter('start_time')))
770. 
771.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
772.             list(DTModel.objects.annotate(truncated=TruncQuarter('start_time', output_field=TimeField())))
773. 
774.     def test_trunc_month_func(self):
775.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
776.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'month')
777.         if settings.USE_TZ:
778.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
779.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
780.         self.create_model(start_datetime, end_datetime)
781.         self.create_model(end_datetime, start_datetime)
782.         self.assertQuerysetEqual(
783.             DTModel.objects.annotate(extracted=TruncMonth('start_datetime')).order_by('start_datetime'),
784.             [
785.                 (start_datetime, truncate_to(start_datetime, 'month')),
786.                 (end_datetime, truncate_to(end_datetime, 'month')),
787.             ],
788.             lambda m: (m.start_datetime, m.extracted)
789.         )
790.         self.assertQuerysetEqual(
791.             DTModel.objects.annotate(extracted=TruncMonth('start_date')).order_by('start_datetime'),
792.             [
793.                 (start_datetime, truncate_to(start_datetime.date(), 'month')),
794.                 (end_datetime, truncate_to(end_datetime.date(), 'month')),
795.             ],
796.             lambda m: (m.start_datetime, m.extracted)
797.         )
798.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncMonth('start_datetime')).count(), 1)
799. 
800.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
801.             list(DTModel.objects.annotate(truncated=TruncMonth('start_time')))
802. 
803.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
804.             list(DTModel.objects.annotate(truncated=TruncMonth('start_time', output_field=TimeField())))
805. 
806.     def test_trunc_week_func(self):
807.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
808.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'week')
809.         if settings.USE_TZ:
810.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
811.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
812.         self.create_model(start_datetime, end_datetime)
813.         self.create_model(end_datetime, start_datetime)
814.         self.assertQuerysetEqual(
815.             DTModel.objects.annotate(extracted=TruncWeek('start_datetime')).order_by('start_datetime'),
816.             [
817.                 (start_datetime, truncate_to(start_datetime, 'week')),
818.                 (end_datetime, truncate_to(end_datetime, 'week')),
819.             ],
820.             lambda m: (m.start_datetime, m.extracted)
821.         )
822.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncWeek('start_datetime')).count(), 1)
823. 
824.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
825.             list(DTModel.objects.annotate(truncated=TruncWeek('start_time')))
826. 
827.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
828.             list(DTModel.objects.annotate(truncated=TruncWeek('start_time', output_field=TimeField())))
829. 
830.     def test_trunc_date_func(self):
831.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
832.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
833.         if settings.USE_TZ:
834.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
835.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
836.         self.create_model(start_datetime, end_datetime)
837.         self.create_model(end_datetime, start_datetime)
838.         self.assertQuerysetEqual(
839.             DTModel.objects.annotate(extracted=TruncDate('start_datetime')).order_by('start_datetime'),
840.             [
841.                 (start_datetime, start_datetime.date()),
842.                 (end_datetime, end_datetime.date()),
843.             ],
844.             lambda m: (m.start_datetime, m.extracted)
845.         )
846.         self.assertEqual(DTModel.objects.filter(start_datetime__date=TruncDate('start_datetime')).count(), 2)
847. 
848.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateField"):
849.             list(DTModel.objects.annotate(truncated=TruncDate('start_time')))
850. 
851.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateField"):
852.             list(DTModel.objects.annotate(truncated=TruncDate('start_time', output_field=TimeField())))
853. 
854.     def test_trunc_date_none(self):
855.         self.create_model(None, None)
856.         self.assertIsNone(DTModel.objects.annotate(truncated=TruncDate('start_datetime')).first().truncated)
857. 
858.     def test_trunc_time_func(self):
859.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
860.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
861.         if settings.USE_TZ:
862.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
863.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
864.         self.create_model(start_datetime, end_datetime)
865.         self.create_model(end_datetime, start_datetime)
866.         self.assertQuerysetEqual(
867.             DTModel.objects.annotate(extracted=TruncTime('start_datetime')).order_by('start_datetime'),
868.             [
869.                 (start_datetime, start_datetime.time()),
870.                 (end_datetime, end_datetime.time()),
871.             ],
872.             lambda m: (m.start_datetime, m.extracted)
873.         )
874.         self.assertEqual(DTModel.objects.filter(start_datetime__time=TruncTime('start_datetime')).count(), 2)
875. 
876.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to TimeField"):
877.             list(DTModel.objects.annotate(truncated=TruncTime('start_date')))
878. 
879.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to TimeField"):
880.             list(DTModel.objects.annotate(truncated=TruncTime('start_date', output_field=DateField())))
881. 
882.     def test_trunc_time_none(self):
883.         self.create_model(None, None)
884.         self.assertIsNone(DTModel.objects.annotate(truncated=TruncTime('start_datetime')).first().truncated)
885. 
886.     def test_trunc_day_func(self):
887.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
888.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'day')
889.         if settings.USE_TZ:
890.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
891.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
892.         self.create_model(start_datetime, end_datetime)
893.         self.create_model(end_datetime, start_datetime)
894.         self.assertQuerysetEqual(
895.             DTModel.objects.annotate(extracted=TruncDay('start_datetime')).order_by('start_datetime'),
896.             [
897.                 (start_datetime, truncate_to(start_datetime, 'day')),
898.                 (end_datetime, truncate_to(end_datetime, 'day')),
899.             ],
900.             lambda m: (m.start_datetime, m.extracted)
901.         )
902.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncDay('start_datetime')).count(), 1)
903. 
904.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
905.             list(DTModel.objects.annotate(truncated=TruncDay('start_time')))
906. 
907.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
908.             list(DTModel.objects.annotate(truncated=TruncDay('start_time', output_field=TimeField())))
909. 
910.     def test_trunc_hour_func(self):
911.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
912.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'hour')
913.         if settings.USE_TZ:
914.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
915.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
916.         self.create_model(start_datetime, end_datetime)
917.         self.create_model(end_datetime, start_datetime)
918.         self.assertQuerysetEqual(
919.             DTModel.objects.annotate(extracted=TruncHour('start_datetime')).order_by('start_datetime'),
920.             [
921.                 (start_datetime, truncate_to(start_datetime, 'hour')),
922.                 (end_datetime, truncate_to(end_datetime, 'hour')),
923.             ],
924.             lambda m: (m.start_datetime, m.extracted)
925.         )
926.         self.assertQuerysetEqual(
927.             DTModel.objects.annotate(extracted=TruncHour('start_time')).order_by('start_datetime'),
928.             [
929.                 (start_datetime, truncate_to(start_datetime.time(), 'hour')),
930.                 (end_datetime, truncate_to(end_datetime.time(), 'hour')),
931.             ],
932.             lambda m: (m.start_datetime, m.extracted)
933.         )
934.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncHour('start_datetime')).count(), 1)
935. 
936.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
937.             list(DTModel.objects.annotate(truncated=TruncHour('start_date')))
938. 
939.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
940.             list(DTModel.objects.annotate(truncated=TruncHour('start_date', output_field=DateField())))
941. 
942.     def test_trunc_minute_func(self):
943.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
944.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'minute')
945.         if settings.USE_TZ:
946.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
947.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
948.         self.create_model(start_datetime, end_datetime)
949.         self.create_model(end_datetime, start_datetime)
950.         self.assertQuerysetEqual(
951.             DTModel.objects.annotate(extracted=TruncMinute('start_datetime')).order_by('start_datetime'),
952.             [
953.                 (start_datetime, truncate_to(start_datetime, 'minute')),
954.                 (end_datetime, truncate_to(end_datetime, 'minute')),
955.             ],
956.             lambda m: (m.start_datetime, m.extracted)
957.         )
958.         self.assertQuerysetEqual(
959.             DTModel.objects.annotate(extracted=TruncMinute('start_time')).order_by('start_datetime'),
960.             [
961.                 (start_datetime, truncate_to(start_datetime.time(), 'minute')),
962.                 (end_datetime, truncate_to(end_datetime.time(), 'minute')),
963.             ],
964.             lambda m: (m.start_datetime, m.extracted)
965.         )
966.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncMinute('start_datetime')).count(), 1)
967. 
968.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
969.             list(DTModel.objects.annotate(truncated=TruncMinute('start_date')))
970. 
971.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
972.             list(DTModel.objects.annotate(truncated=TruncMinute('start_date', output_field=DateField())))
973. 
974.     def test_trunc_second_func(self):
975.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
976.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'second')
977.         if settings.USE_TZ:
978.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
979.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
980.         self.create_model(start_datetime, end_datetime)
981.         self.create_model(end_datetime, start_datetime)
982.         self.assertQuerysetEqual(
983.             DTModel.objects.annotate(extracted=TruncSecond('start_datetime')).order_by('start_datetime'),
984.             [
985.                 (start_datetime, truncate_to(start_datetime, 'second')),
986.                 (end_datetime, truncate_to(end_datetime, 'second'))
987.             ],
988.             lambda m: (m.start_datetime, m.extracted)
989.         )
990.         self.assertQuerysetEqual(
991.             DTModel.objects.annotate(extracted=TruncSecond('start_time')).order_by('start_datetime'),
992.             [
993.                 (start_datetime, truncate_to(start_datetime.time(), 'second')),
994.                 (end_datetime, truncate_to(end_datetime.time(), 'second'))
995.             ],
996.             lambda m: (m.start_datetime, m.extracted)
997.         )
998.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncSecond('start_datetime')).count(), 1)
999. 
1000.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
1001.             list(DTModel.objects.annotate(truncated=TruncSecond('start_date')))
1002. 
1003.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
1004.             list(DTModel.objects.annotate(truncated=TruncSecond('start_date', output_field=DateField())))
1005. 
1006.     def test_trunc_subquery_with_parameters(self):
1007.         author_1 = Author.objects.create(name='J. R. R. Tolkien')
1008.         author_2 = Author.objects.create(name='G. R. R. Martin')
1009.         fan_since_1 = datetime(2016, 2, 3, 15, 0, 0)
1010.         fan_since_2 = datetime(2015, 2, 3, 15, 0, 0)
1011.         fan_since_3 = datetime(2017, 2, 3, 15, 0, 0)
1012.         if settings.USE_TZ:
1013.             fan_since_1 = timezone.make_aware(fan_since_1, is_dst=False)
1014.             fan_since_2 = timezone.make_aware(fan_since_2, is_dst=False)
1015.             fan_since_3 = timezone.make_aware(fan_since_3, is_dst=False)
1016.         Fan.objects.create(author=author_1, name='Tom', fan_since=fan_since_1)
1017.         Fan.objects.create(author=author_1, name='Emma', fan_since=fan_since_2)
1018.         Fan.objects.create(author=author_2, name='Isabella', fan_since=fan_since_3)
1019. 
1020.         inner = Fan.objects.filter(
1021.             author=OuterRef('pk'),
1022.             name__in=('Emma', 'Isabella', 'Tom')
1023.         ).values('author').annotate(newest_fan=Max('fan_since')).values('newest_fan')
1024.         outer = Author.objects.annotate(
1025.             newest_fan_year=TruncYear(Subquery(inner, output_field=DateTimeField()))
1026.         )
1027.         tz = pytz.UTC if settings.USE_TZ else None
1028.         self.assertSequenceEqual(
1029.             outer.order_by('name').values('name', 'newest_fan_year'),
1030.             [
1031.                 {'name': 'G. R. R. Martin', 'newest_fan_year': datetime(2017, 1, 1, 0, 0, tzinfo=tz)},
1032.                 {'name': 'J. R. R. Tolkien', 'newest_fan_year': datetime(2016, 1, 1, 0, 0, tzinfo=tz)},
1033.             ]
1034.         )
1035. 
1036. 
1037. @override_settings(USE_TZ=True, TIME_ZONE='UTC')
1038. class DateFunctionWithTimeZoneTests(DateFunctionTests):
1039. 
1040.     def test_extract_func_with_timezone(self):
1041.         start_datetime = datetime(2015, 6, 15, 23, 30, 1, 321)
1042.         end_datetime = datetime(2015, 6, 16, 13, 11, 27, 123)
1043.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1044.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1045.         self.create_model(start_datetime, end_datetime)
1046.         melb = pytz.timezone('Australia/Melbourne')
1047.         delta_tzinfo_pos = datetime_timezone(timedelta(hours=5))
1048.         delta_tzinfo_neg = datetime_timezone(timedelta(hours=-5, minutes=17))
1049. 
1050.         qs = DTModel.objects.annotate(
1051.             day=Extract('start_datetime', 'day'),
1052.             day_melb=Extract('start_datetime', 'day', tzinfo=melb),
1053.             week=Extract('start_datetime', 'week', tzinfo=melb),
1054.             isoyear=ExtractIsoYear('start_datetime', tzinfo=melb),
1055.             weekday=ExtractWeekDay('start_datetime'),
1056.             weekday_melb=ExtractWeekDay('start_datetime', tzinfo=melb),
1057.             isoweekday=ExtractIsoWeekDay('start_datetime'),
1058.             isoweekday_melb=ExtractIsoWeekDay('start_datetime', tzinfo=melb),
1059.             quarter=ExtractQuarter('start_datetime', tzinfo=melb),
1060.             hour=ExtractHour('start_datetime'),
1061.             hour_melb=ExtractHour('start_datetime', tzinfo=melb),
1062.             hour_with_delta_pos=ExtractHour('start_datetime', tzinfo=delta_tzinfo_pos),
1063.             hour_with_delta_neg=ExtractHour('start_datetime', tzinfo=delta_tzinfo_neg),
1064.             minute_with_delta_neg=ExtractMinute('start_datetime', tzinfo=delta_tzinfo_neg),
1065.         ).order_by('start_datetime')
1066. 
1067.         utc_model = qs.get()
1068.         self.assertEqual(utc_model.day, 15)
1069.         self.assertEqual(utc_model.day_melb, 16)
1070.         self.assertEqual(utc_model.week, 25)
1071.         self.assertEqual(utc_model.isoyear, 2015)
1072.         self.assertEqual(utc_model.weekday, 2)
1073.         self.assertEqual(utc_model.weekday_melb, 3)
1074.         self.assertEqual(utc_model.isoweekday, 1)
1075.         self.assertEqual(utc_model.isoweekday_melb, 2)
1076.         self.assertEqual(utc_model.quarter, 2)
1077.         self.assertEqual(utc_model.hour, 23)
1078.         self.assertEqual(utc_model.hour_melb, 9)
1079.         self.assertEqual(utc_model.hour_with_delta_pos, 4)
1080.         self.assertEqual(utc_model.hour_with_delta_neg, 18)
1081.         self.assertEqual(utc_model.minute_with_delta_neg, 47)
1082. 
1083.         with timezone.override(melb):
1084.             melb_model = qs.get()
1085. 
1086.         self.assertEqual(melb_model.day, 16)
1087.         self.assertEqual(melb_model.day_melb, 16)
1088.         self.assertEqual(melb_model.week, 25)
1089.         self.assertEqual(melb_model.isoyear, 2015)
1090.         self.assertEqual(melb_model.weekday, 3)
1091.         self.assertEqual(melb_model.isoweekday, 2)
1092.         self.assertEqual(melb_model.quarter, 2)
1093.         self.assertEqual(melb_model.weekday_melb, 3)
1094.         self.assertEqual(melb_model.isoweekday_melb, 2)
1095.         self.assertEqual(melb_model.hour, 9)
1096.         self.assertEqual(melb_model.hour_melb, 9)
1097. 
1098.     def test_extract_func_explicit_timezone_priority(self):
1099.         start_datetime = datetime(2015, 6, 15, 23, 30, 1, 321)
1100.         end_datetime = datetime(2015, 6, 16, 13, 11, 27, 123)
1101.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1102.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1103.         self.create_model(start_datetime, end_datetime)
1104.         melb = pytz.timezone('Australia/Melbourne')
1105. 
1106.         with timezone.override(melb):
1107.             model = DTModel.objects.annotate(
1108.                 day_melb=Extract('start_datetime', 'day'),
1109.                 day_utc=Extract('start_datetime', 'day', tzinfo=timezone.utc),
1110.             ).order_by('start_datetime').get()
1111.             self.assertEqual(model.day_melb, 16)
1112.             self.assertEqual(model.day_utc, 15)
1113. 
1114.     def test_trunc_timezone_applied_before_truncation(self):
1115.         start_datetime = datetime(2016, 1, 1, 1, 30, 50, 321)
1116.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
1117.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1118.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1119.         self.create_model(start_datetime, end_datetime)
1120. 
1121.         melb = pytz.timezone('Australia/Melbourne')
1122.         pacific = pytz.timezone('US/Pacific')
1123. 
1124.         model = DTModel.objects.annotate(
1125.             melb_year=TruncYear('start_datetime', tzinfo=melb),
1126.             pacific_year=TruncYear('start_datetime', tzinfo=pacific),
1127.         ).order_by('start_datetime').get()
1128. 
1129.         self.assertEqual(model.start_datetime, start_datetime)
1130.         self.assertEqual(model.melb_year, truncate_to(start_datetime, 'year', melb))
1131.         self.assertEqual(model.pacific_year, truncate_to(start_datetime, 'year', pacific))
1132.         self.assertEqual(model.start_datetime.year, 2016)
1133.         self.assertEqual(model.melb_year.year, 2016)
1134.         self.assertEqual(model.pacific_year.year, 2015)
1135. 
1136.     def test_trunc_ambiguous_and_invalid_times(self):
1137.         sao = pytz.timezone('America/Sao_Paulo')
1138.         utc = pytz.timezone('UTC')
1139.         start_datetime = utc.localize(datetime(2016, 10, 16, 13))
1140.         end_datetime = utc.localize(datetime(2016, 2, 21, 1))
1141.         self.create_model(start_datetime, end_datetime)
1142.         with timezone.override(sao):
1143.             with self.assertRaisesMessage(pytz.NonExistentTimeError, '2016-10-16 00:00:00'):
1144.                 model = DTModel.objects.annotate(truncated_start=TruncDay('start_datetime')).get()
1145.             with self.assertRaisesMessage(pytz.AmbiguousTimeError, '2016-02-20 23:00:00'):
1146.                 model = DTModel.objects.annotate(truncated_end=TruncHour('end_datetime')).get()
1147.             model = DTModel.objects.annotate(
1148.                 truncated_start=TruncDay('start_datetime', is_dst=False),
1149.                 truncated_end=TruncHour('end_datetime', is_dst=False),
1150.             ).get()
1151.             self.assertEqual(model.truncated_start.dst(), timedelta(0))
1152.             self.assertEqual(model.truncated_end.dst(), timedelta(0))
1153.             model = DTModel.objects.annotate(
1154.                 truncated_start=TruncDay('start_datetime', is_dst=True),
1155.                 truncated_end=TruncHour('end_datetime', is_dst=True),
1156.             ).get()
1157.             self.assertEqual(model.truncated_start.dst(), timedelta(0, 3600))
1158.             self.assertEqual(model.truncated_end.dst(), timedelta(0, 3600))
1159. 
1160.     def test_trunc_func_with_timezone(self):
1161.         """
1162.         If the truncated datetime transitions to a different offset (daylight
1163.         saving) then the returned value will have that new timezone/offset.
1164.         """
1165.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
1166.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
1167.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1168.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1169.         self.create_model(start_datetime, end_datetime)
1170.         self.create_model(end_datetime, start_datetime)
1171. 
1172.         melb = pytz.timezone('Australia/Melbourne')
1173. 
1174.         def test_datetime_kind(kind):
1175.             self.assertQuerysetEqual(
1176.                 DTModel.objects.annotate(
1177.                     truncated=Trunc('start_datetime', kind, output_field=DateTimeField(), tzinfo=melb)
1178.                 ).order_by('start_datetime'),
1179.                 [
1180.                     (start_datetime, truncate_to(start_datetime.astimezone(melb), kind, melb)),
1181.                     (end_datetime, truncate_to(end_datetime.astimezone(melb), kind, melb))
1182.                 ],
1183.                 lambda m: (m.start_datetime, m.truncated)
1184.             )
1185. 
1186.         def test_date_kind(kind):
1187.             self.assertQuerysetEqual(
1188.                 DTModel.objects.annotate(
1189.                     truncated=Trunc('start_date', kind, output_field=DateField(), tzinfo=melb)
1190.                 ).order_by('start_datetime'),
1191.                 [
1192.                     (start_datetime, truncate_to(start_datetime.date(), kind)),
1193.                     (end_datetime, truncate_to(end_datetime.date(), kind))
1194.                 ],
1195.                 lambda m: (m.start_datetime, m.truncated)
1196.             )
1197. 
1198.         def test_time_kind(kind):
1199.             self.assertQuerysetEqual(
1200.                 DTModel.objects.annotate(
1201.                     truncated=Trunc('start_time', kind, output_field=TimeField(), tzinfo=melb)
1202.                 ).order_by('start_datetime'),
1203.                 [
1204.                     (start_datetime, truncate_to(start_datetime.time(), kind)),
1205.                     (end_datetime, truncate_to(end_datetime.time(), kind))
1206.                 ],
1207.                 lambda m: (m.start_datetime, m.truncated)
1208.             )
1209. 
1210.         test_date_kind('year')
1211.         test_date_kind('quarter')
1212.         test_date_kind('month')
1213.         test_date_kind('week')
1214.         test_date_kind('day')
1215.         test_time_kind('hour')
1216.         test_time_kind('minute')
1217.         test_time_kind('second')
1218.         test_datetime_kind('year')
1219.         test_datetime_kind('quarter')
1220.         test_datetime_kind('month')
1221.         test_datetime_kind('week')
1222.         test_datetime_kind('day')
1223.         test_datetime_kind('hour')
1224.         test_datetime_kind('minute')
1225.         test_datetime_kind('second')
1226. 
1227.         qs = DTModel.objects.filter(start_datetime__date=Trunc('start_datetime', 'day', output_field=DateField()))
1228.         self.assertEqual(qs.count(), 2)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 15:48:15,956 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='I have identified three relevant test cases in `tests/db_functions/datetime/test_extract_trunc.py` that demonstrate testing timezone-aware database functions. However, these tests rely on the `DTModel`, `Author`, and `Fan` models, whose definitions are missing from the current context. To provide complete and self-contained test cases as requested, I need the source code for these models.' query='Please provide the full content of `tests/db_functions/models.py`.' extra_requirements='' purpose='I need the model definitions from this file to construct complete test cases that can be run and understood without missing them would leave the test cases incomplete.'
2025-12-23 15:48:15,957 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/db_functions/models.py`.
2025-12-23 15:48:15,957 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 15:48:15,958 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 15:48:15,959 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 15:48:15,959 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/db_functions/models.py`.
Purpose: I need the model definitions from this file to construct complete test cases that can be run and understood without missing them would leave the test cases incomplete.
2025-12-23 15:48:17,795 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/db_functions/models.py"}'}, '__gemini_function_call_thought_signatures__': {'f2569947-89d9-4b90-9518-810a112bfa42': 'CukCAY89a1/TmvHL5YHIDkM7m0onmlt4VNXz7aVm+YbQeonTABsFvzxrgBLpdaonfY9ts8cOn9RNxW2/nwVq/sve9FLcOxnMOeBFMU2UlqssaCFrb0yCYasY7nf2jMDmyUyB10F0dHcgjnZpBygpGqeOrvkx6+yKywhQId1l+4MxSTt07BbQPnZY0igH5+r6V6EmpcUiv7tKlJ9mtuaLfKBAwzCN2uEq1CcbE51Fzp3/Z1yRliM/cdTSy9uLn5pKYM0NkoKQJSot90avObyV0FYxUG/fjRo48q2PQZuchvwmk+yADKA1KUZZcPoz7oklI8Ar7hJaIrdtPzI3jrtJ6dj6MmSmj7062LBkayRkT/Zmp9DXsXdWS0N8Ylh5AulGQXOnk4D/7OQ0nM/w6U2BX8TtE+KeTypAcsOmDV1EsLzQLXfwbLtpXIWVgbwEcRZA1igzWvSjoPNVhfE9eFEQUcrQm4SrehPBrm7aMg=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2106, 'candidates_token_count': 23, 'total_token_count': 2216, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2106}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 23}], 'thoughts_token_count': 87, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.17133081477621329, 'model_name': 'gemini-2.5-pro'} id='run--5e7de0c9-9e62-4abc-b3e3-fac1f2d055bc-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/db_functions/models.py'}, 'id': 'f2569947-89d9-4b90-9518-810a112bfa42', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2106, 'output_tokens': 23, 'total_tokens': 2216, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 87}}
2025-12-23 15:48:19,797 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `tests/db_functions/models.py`. This file contains model definitions for authors, articles, and fans, which will be used to construct test cases. The content is now available for your use.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 3016, 'candidates_token_count': 49, 'total_token_count': 3093, 'cached_content_token_count': 1587, 'prompt_tokens_details': [{'modality': 1, 'token_count': 3103}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1587}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 49}], 'thoughts_token_count': 28}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1906550660425303, 'model_name': 'gemini-2.5-pro'} id='run--a49c9a0f-9527-4f45-93a1-871c32e7b65a-0' usage_metadata={'input_tokens': 3016, 'output_tokens': 49, 'total_tokens': 3093, 'input_token_details': {'cache_read': 1587}, 'output_token_details': {'reasoning': 28}}
2025-12-23 15:48:19,798 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/db_functions/models.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need the model definitions from this file to construct complete test cases that can be run and understood without missing them would leave the test cases incomplete.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/db_functions/models.py
Line number range: 1 - 56
Content:
1. """
2. Tests for built in Function expressions.
3. """
4. from django.db import models
5. 
6. 
7. class Author(models.Model):
8.     name = models.CharField(max_length=50)
9.     alias = models.CharField(max_length=50, null=True, blank=True)
10.     goes_by = models.CharField(max_length=50, null=True, blank=True)
11.     age = models.PositiveSmallIntegerField(default=30)
12. 
13. 
14. class Article(models.Model):
15.     authors = models.ManyToManyField(Author, related_name='articles')
16.     title = models.CharField(max_length=50)
17.     summary = models.CharField(max_length=200, null=True, blank=True)
18.     text = models.TextField()
19.     written = models.DateTimeField()
20.     published = models.DateTimeField(null=True, blank=True)
21.     updated = models.DateTimeField(null=True, blank=True)
22.     views = models.PositiveIntegerField(default=0)
23. 
24. 
25. class Fan(models.Model):
26.     name = models.CharField(max_length=50)
27.     age = models.PositiveSmallIntegerField(default=30)
28.     author = models.ForeignKey(Author, models.CASCADE, related_name='fans')
29.     fan_since = models.DateTimeField(null=True, blank=True)
30. 
31. 
32. class DTModel(models.Model):
33.     name = models.CharField(max_length=32)
34.     start_datetime = models.DateTimeField(null=True, blank=True)
35.     end_datetime = models.DateTimeField(null=True, blank=True)
36.     start_date = models.DateField(null=True, blank=True)
37.     end_date = models.DateField(null=True, blank=True)
38.     start_time = models.TimeField(null=True, blank=True)
39.     end_time = models.TimeField(null=True, blank=True)
40.     duration = models.DurationField(null=True, blank=True)
41. 
42. 
43. class DecimalModel(models.Model):
44.     n1 = models.DecimalField(decimal_places=2, max_digits=6)
45.     n2 = models.DecimalField(decimal_places=2, max_digits=6)
46. 
47. 
48. class IntegerModel(models.Model):
49.     big = models.BigIntegerField(null=True, blank=True)
50.     normal = models.IntegerField(null=True, blank=True)
51.     small = models.SmallIntegerField(null=True, blank=True)
52. 
53. 
54. class FloatModel(models.Model):
55.     f1 = models.FloatField(null=True, blank=True)
56.     f2 = models.FloatField(null=True, blank=True)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 15:48:23,296 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asks for the full content of the file `tests/db_functions/models.py`.\n2. Extended relevance:\n   - The provided context contains the entire content of the requested file, from line 1 to 56. Therefore, the whole file is relevant and necessary to fulfill the user's request.", relative_path='tests/db_functions/models.py', start_line=1, end_line=56)]
2025-12-23 15:48:23,297 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of `tests/db_functions/models.py`.
2025-12-23 15:48:23,297 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 15:48:23,297 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 15:48:23,298 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 2 existing contexts
2025-12-23 15:48:23,298 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-23 15:48:23,298 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Add support for tzinfo parameter to TruncDate() and TruncTime().

Description: Description
	 
		(last modified by Joe Jackson)
	 
Description
TruncDate inherits from TruncBase, which includes the TimeZone mixin. This should allow a developer to pass in a tzinfo object to be used when converting TruncDate, but it actually uses the return value from get_current_timezone_name() unconditionally and completely discards the passed in timezone info object. The result is that attempting to aggregate by date doesn't work for timezones other than the global django.utils.timezone. For example I can't have the django app be in UTC and pass the "America/New_York" timezone in.
Here's the offending line: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L295
Note, that a similar issue is happening in TruncTime.
Here's the method I would expect it to use: ​https://github.com/django/django/blob/master/django/db/models/functions/datetime.py#L17
Example
class TimeSlots(models.Model):
 start_at = models.DateTimeField()
tz = pytz.timezone("America/New_York")
report = (
 TimeSlots.objects.annotate(start_date=TruncDate("start_at", tzinfo=tz))
 .values("start_date")
 .annotate(timeslot_count=Count("id"))
 .values("start_date", "timeslot_count")
)
I would expect this to work, but currently the results are wrong for any timezone other than the one returned by django.utils.timezone.
Workaround
There was a workaround for me. I was able to use TruncDay and then convert the DateTimes returned outside of the database, but I found no way to convert from DateTime to Date in the database. Maybe a Cast would work, but I would expect TruncDate to work.
Patch
​PR

Patch information:
diff --git a/django/db/models/functions/datetime.py b/django/db/models/functions/datetime.py
index b6594b043b..6828980733 100644
--- a/django/db/models/functions/datetime.py
+++ b/django/db/models/functions/datetime.py
@@ -292,7 +292,7 @@ class TruncDate(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to date rather than truncate to date.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_date_sql(lhs, tzname)
         return sql, lhs_params
 
@@ -305,7 +305,7 @@ class TruncTime(TruncBase):
     def as_sql(self, compiler, connection):
         # Cast to time rather than truncate to time.
         lhs, lhs_params = compiler.compile(self.lhs)
-        tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
+        tzname = self.get_tzname()
         sql = connection.ops.datetime_cast_time_sql(lhs, tzname)
         return sql, lhs_params
 
diff --git a/docs/ref/models/database-functions.txt b/docs/ref/models/database-functions.txt
index f5efdb7e87..9d8e4b597c 100644
--- a/docs/ref/models/database-functions.txt
+++ b/docs/ref/models/database-functions.txt
@@ -623,7 +623,7 @@ that deal with date-parts can be used with ``DateField``::
 ``DateTimeField`` truncation
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
-.. class:: TruncDate(expression, **extra)
+.. class:: TruncDate(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'date'
     .. attribute:: output_field = DateField()
@@ -632,7 +632,7 @@ that deal with date-parts can be used with ``DateField``::
 truncate function. It's also registered as a transform on  ``DateTimeField`` as
 ``__date``.
 
-.. class:: TruncTime(expression, **extra)
+.. class:: TruncTime(expression, tzinfo=None, **extra)
 
     .. attribute:: lookup_name = 'time'
     .. attribute:: output_field = TimeField()


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `django/db/models/functions/datetime.py` and `tests/db_functions/datetime/test_extract_trunc.py`.
Extra Requirements: 
Purpose: I need these files to find existing tests for timezone-aware database functions and to understand the implementation of the `Trunc` functions to identify the most relevant examples for the bug fix.

Previous refined query 2:
Essential Query: Please provide the full content of `tests/db_functions/models.py`.
Extra Requirements: 
Purpose: I need the model definitions from this file to construct complete test cases that can be run and understood without missing them would leave the test cases incomplete.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/functions/datetime.py
Line number range: 1 - 326
Content:
1. from datetime import datetime
2. 
3. from django.conf import settings
4. from django.db.models.expressions import Func
5. from django.db.models.fields import (
6.     DateField, DateTimeField, DurationField, Field, IntegerField, TimeField,
7. )
8. from django.db.models.lookups import (
9.     Transform, YearExact, YearGt, YearGte, YearLt, YearLte,
10. )
11. from django.utils import timezone
12. 
13. 
14. class TimezoneMixin:
15.     tzinfo = None
16. 
17.     def get_tzname(self):
18.         # Timezone conversions must happen to the input datetime *before*
19.         # applying a function. 2015-12-31 23:00:00 -02:00 is stored in the
20.         # database as 2016-01-01 01:00:00 +00:00. Any results should be
21.         # based on the input datetime not the stored datetime.
22.         tzname = None
23.         if settings.USE_TZ:
24.             if self.tzinfo is None:
25.                 tzname = timezone.get_current_timezone_name()
26.             else:
27.                 tzname = timezone._get_timezone_name(self.tzinfo)
28.         return tzname
29. 
30. 
31. class Extract(TimezoneMixin, Transform):
32.     lookup_name = None
33.     output_field = IntegerField()
34. 
35.     def __init__(self, expression, lookup_name=None, tzinfo=None, **extra):
36.         if self.lookup_name is None:
37.             self.lookup_name = lookup_name
38.         if self.lookup_name is None:
39.             raise ValueError('lookup_name must be provided')
40.         self.tzinfo = tzinfo
41.         super().__init__(expression, **extra)
42. 
43.     def as_sql(self, compiler, connection):
44.         sql, params = compiler.compile(self.lhs)
45.         lhs_output_field = self.lhs.output_field
46.         if isinstance(lhs_output_field, DateTimeField):
47.             tzname = self.get_tzname()
48.             sql = connection.ops.datetime_extract_sql(self.lookup_name, sql, tzname)
49.         elif isinstance(lhs_output_field, DateField):
50.             sql = connection.ops.date_extract_sql(self.lookup_name, sql)
51.         elif isinstance(lhs_output_field, TimeField):
52.             sql = connection.ops.time_extract_sql(self.lookup_name, sql)
53.         elif isinstance(lhs_output_field, DurationField):
54.             if not connection.features.has_native_duration_field:
55.                 raise ValueError('Extract requires native DurationField database support.')
56.             sql = connection.ops.time_extract_sql(self.lookup_name, sql)
57.         else:
58.             # resolve_expression has already validated the output_field so this
59.             # assert should never be hit.
60.             assert False, "Tried to Extract from an invalid type."
61.         return sql, params
62. 
63.     def resolve_expression(self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False):
64.         copy = super().resolve_expression(query, allow_joins, reuse, summarize, for_save)
65.         field = copy.lhs.output_field
66.         if not isinstance(field, (DateField, DateTimeField, TimeField, DurationField)):
67.             raise ValueError(
68.                 'Extract input expression must be DateField, DateTimeField, '
69.                 'TimeField, or DurationField.'
70.             )
71.         # Passing dates to functions expecting datetimes is most likely a mistake.
72.         if type(field) == DateField and copy.lookup_name in ('hour', 'minute', 'second'):
73.             raise ValueError(
74.                 "Cannot extract time component '%s' from DateField '%s'. " % (copy.lookup_name, field.name)
75.             )
76.         if (
77.             isinstance(field, DurationField) and
78.             copy.lookup_name in ('year', 'iso_year', 'month', 'week', 'week_day', 'iso_week_day', 'quarter')
79.         ):
80.             raise ValueError(
81.                 "Cannot extract component '%s' from DurationField '%s'."
82.                 % (copy.lookup_name, field.name)
83.             )
84.         return copy
85. 
86. 
87. class ExtractYear(Extract):
88.     lookup_name = 'year'
89. 
90. 
91. class ExtractIsoYear(Extract):
92.     """Return the ISO-8601 week-numbering year."""
93.     lookup_name = 'iso_year'
94. 
95. 
96. class ExtractMonth(Extract):
97.     lookup_name = 'month'
98. 
99. 
100. class ExtractDay(Extract):
101.     lookup_name = 'day'
102. 
103. 
104. class ExtractWeek(Extract):
105.     """
106.     Return 1-52 or 53, based on ISO-8601, i.e., Monday is the first of the
107.     week.
108.     """
109.     lookup_name = 'week'
110. 
111. 
112. class ExtractWeekDay(Extract):
113.     """
114.     Return Sunday=1 through Saturday=7.
115. 
116.     To replicate this in Python: (mydatetime.isoweekday() % 7) + 1
117.     """
118.     lookup_name = 'week_day'
119. 
120. 
121. class ExtractIsoWeekDay(Extract):
122.     """Return Monday=1 through Sunday=7, based on ISO-8601."""
123.     lookup_name = 'iso_week_day'
124. 
125. 
126. class ExtractQuarter(Extract):
127.     lookup_name = 'quarter'
128. 
129. 
130. class ExtractHour(Extract):
131.     lookup_name = 'hour'
132. 
133. 
134. class ExtractMinute(Extract):
135.     lookup_name = 'minute'
136. 
137. 
138. class ExtractSecond(Extract):
139.     lookup_name = 'second'
140. 
141. 
142. DateField.register_lookup(ExtractYear)
143. DateField.register_lookup(ExtractMonth)
144. DateField.register_lookup(ExtractDay)
145. DateField.register_lookup(ExtractWeekDay)
146. DateField.register_lookup(ExtractIsoWeekDay)
147. DateField.register_lookup(ExtractWeek)
148. DateField.register_lookup(ExtractIsoYear)
149. DateField.register_lookup(ExtractQuarter)
150. 
151. TimeField.register_lookup(ExtractHour)
152. TimeField.register_lookup(ExtractMinute)
153. TimeField.register_lookup(ExtractSecond)
154. 
155. DateTimeField.register_lookup(ExtractHour)
156. DateTimeField.register_lookup(ExtractMinute)
157. DateTimeField.register_lookup(ExtractSecond)
158. 
159. ExtractYear.register_lookup(YearExact)
160. ExtractYear.register_lookup(YearGt)
161. ExtractYear.register_lookup(YearGte)
162. ExtractYear.register_lookup(YearLt)
163. ExtractYear.register_lookup(YearLte)
164. 
165. ExtractIsoYear.register_lookup(YearExact)
166. ExtractIsoYear.register_lookup(YearGt)
167. ExtractIsoYear.register_lookup(YearGte)
168. ExtractIsoYear.register_lookup(YearLt)
169. ExtractIsoYear.register_lookup(YearLte)
170. 
171. 
172. class Now(Func):
173.     template = 'CURRENT_TIMESTAMP'
174.     output_field = DateTimeField()
175. 
176.     def as_postgresql(self, compiler, connection, **extra_context):
177.         # PostgreSQL's CURRENT_TIMESTAMP means "the time at the start of the
178.         # transaction". Use STATEMENT_TIMESTAMP to be cross-compatible with
179.         # other databases.
180.         return self.as_sql(compiler, connection, template='STATEMENT_TIMESTAMP()', **extra_context)
181. 
182. 
183. class TruncBase(TimezoneMixin, Transform):
184.     kind = None
185.     tzinfo = None
186. 
187.     def __init__(self, expression, output_field=None, tzinfo=None, is_dst=None, **extra):
188.         self.tzinfo = tzinfo
189.         self.is_dst = is_dst
190.         super().__init__(expression, output_field=output_field, **extra)
191. 
192.     def as_sql(self, compiler, connection):
193.         inner_sql, inner_params = compiler.compile(self.lhs)
194.         if isinstance(self.output_field, DateTimeField):
195.             tzname = self.get_tzname()
196.             sql = connection.ops.datetime_trunc_sql(self.kind, inner_sql, tzname)
197.         elif isinstance(self.output_field, DateField):
198.             sql = connection.ops.date_trunc_sql(self.kind, inner_sql)
199.         elif isinstance(self.output_field, TimeField):
200.             sql = connection.ops.time_trunc_sql(self.kind, inner_sql)
201.         else:
202.             raise ValueError('Trunc only valid on DateField, TimeField, or DateTimeField.')
203.         return sql, inner_params
204. 
205.     def resolve_expression(self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False):
206.         copy = super().resolve_expression(query, allow_joins, reuse, summarize, for_save)
207.         field = copy.lhs.output_field
208.         # DateTimeField is a subclass of DateField so this works for both.
209.         assert isinstance(field, (DateField, TimeField)), (
210.             "%r isn't a DateField, TimeField, or DateTimeField." % field.name
211.         )
212.         # If self.output_field was None, then accessing the field will trigger
213.         # the resolver to assign it to self.lhs.output_field.
214.         if not isinstance(copy.output_field, (DateField, DateTimeField, TimeField)):
215.             raise ValueError('output_field must be either DateField, TimeField, or DateTimeField')
216.         # Passing dates or times to functions expecting datetimes is most
217.         # likely a mistake.
218.         class_output_field = self.__class__.output_field if isinstance(self.__class__.output_field, Field) else None
219.         output_field = class_output_field or copy.output_field
220.         has_explicit_output_field = class_output_field or field.__class__ is not copy.output_field.__class__
221.         if type(field) == DateField and (
222.                 isinstance(output_field, DateTimeField) or copy.kind in ('hour', 'minute', 'second', 'time')):
223.             raise ValueError("Cannot truncate DateField '%s' to %s. " % (
224.                 field.name, output_field.__class__.__name__ if has_explicit_output_field else 'DateTimeField'
225.             ))
226.         elif isinstance(field, TimeField) and (
227.                 isinstance(output_field, DateTimeField) or
228.                 copy.kind in ('year', 'quarter', 'month', 'week', 'day', 'date')):
229.             raise ValueError("Cannot truncate TimeField '%s' to %s. " % (
230.                 field.name, output_field.__class__.__name__ if has_explicit_output_field else 'DateTimeField'
231.             ))
232.         return copy
233. 
234.     def convert_value(self, value, expression, connection):
235.         if isinstance(self.output_field, DateTimeField):
236.             if not settings.USE_TZ:
237.                 pass
238.             elif value is not None:
239.                 value = value.replace(tzinfo=None)
240.                 value = timezone.make_aware(value, self.tzinfo, is_dst=self.is_dst)
241.             elif not connection.features.has_zoneinfo_database:
242.                 raise ValueError(
243.                     'Database returned an invalid datetime value. Are time '
244.                     'zone definitions for your database installed?'
245.                 )
246.         elif isinstance(value, datetime):
247.             if value is None:
248.                 pass
249.             elif isinstance(self.output_field, DateField):
250.                 value = value.date()
251.             elif isinstance(self.output_field, TimeField):
252.                 value = value.time()
253.         return value
254. 
255. 
256. class Trunc(TruncBase):
257. 
258.     def __init__(self, expression, kind, output_field=None, tzinfo=None, is_dst=None, **extra):
259.         self.kind = kind
260.         super().__init__(
261.             expression, output_field=output_field, tzinfo=tzinfo,
262.             is_dst=is_dst, **extra
263.         )
264. 
265. 
266. class TruncYear(TruncBase):
267.     kind = 'year'
268. 
269. 
270. class TruncQuarter(TruncBase):
271.     kind = 'quarter'
272. 
273. 
274. class TruncMonth(TruncBase):
275.     kind = 'month'
276. 
277. 
278. class TruncWeek(TruncBase):
279.     """Truncate to midnight on the Monday of the week."""
280.     kind = 'week'
281. 
282. 
283. class TruncDay(TruncBase):
284.     kind = 'day'
285. 
286. 
287. class TruncDate(TruncBase):
288.     kind = 'date'
289.     lookup_name = 'date'
290.     output_field = DateField()
291. 
292.     def as_sql(self, compiler, connection):
293.         # Cast to date rather than truncate to date.
294.         lhs, lhs_params = compiler.compile(self.lhs)
295.         tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
296.         sql = connection.ops.datetime_cast_date_sql(lhs, tzname)
297.         return sql, lhs_params
298. 
299. 
300. class TruncTime(TruncBase):
301.     kind = 'time'
302.     lookup_name = 'time'
303.     output_field = TimeField()
304. 
305.     def as_sql(self, compiler, connection):
306.         # Cast to time rather than truncate to time.
307.         lhs, lhs_params = compiler.compile(self.lhs)
308.         tzname = timezone.get_current_timezone_name() if settings.USE_TZ else None
309.         sql = connection.ops.datetime_cast_time_sql(lhs, tzname)
310.         return sql, lhs_params
311. 
312. 
313. class TruncHour(TruncBase):
314.     kind = 'hour'
315. 
316. 
317. class TruncMinute(TruncBase):
318.     kind = 'minute'
319. 
320. 
321. class TruncSecond(TruncBase):
322.     kind = 'second'
323. 
324. 
325. DateTimeField.register_lookup(TruncDate)
326. DateTimeField.register_lookup(TruncTime)


File: tests/db_functions/datetime/test_extract_trunc.py
Line number range: 1 - 1228
Content:
1. from datetime import datetime, timedelta, timezone as datetime_timezone
2. 
3. import pytz
4. 
5. from django.conf import settings
6. from django.db.models import (
7.     DateField, DateTimeField, F, IntegerField, Max, OuterRef, Subquery,
8.     TimeField,
9. )
10. from django.db.models.functions import (
11.     Extract, ExtractDay, ExtractHour, ExtractIsoWeekDay, ExtractIsoYear,
12.     ExtractMinute, ExtractMonth, ExtractQuarter, ExtractSecond, ExtractWeek,
13.     ExtractWeekDay, ExtractYear, Trunc, TruncDate, TruncDay, TruncHour,
14.     TruncMinute, TruncMonth, TruncQuarter, TruncSecond, TruncTime, TruncWeek,
15.     TruncYear,
16. )
17. from django.test import (
18.     TestCase, override_settings, skipIfDBFeature, skipUnlessDBFeature,
19. )
20. from django.utils import timezone
21. 
22. from ..models import Author, DTModel, Fan
23. 
24. 
25. def truncate_to(value, kind, tzinfo=None):
26.     # Convert to target timezone before truncation
27.     if tzinfo is not None:
28.         value = value.astimezone(tzinfo)
29. 
30.     def truncate(value, kind):
31.         if kind == 'second':
32.             return value.replace(microsecond=0)
33.         if kind == 'minute':
34.             return value.replace(second=0, microsecond=0)
35.         if kind == 'hour':
36.             return value.replace(minute=0, second=0, microsecond=0)
37.         if kind == 'day':
38.             if isinstance(value, datetime):
39.                 return value.replace(hour=0, minute=0, second=0, microsecond=0)
40.             return value
41.         if kind == 'week':
42.             if isinstance(value, datetime):
43.                 return (value - timedelta(days=value.weekday())).replace(hour=0, minute=0, second=0, microsecond=0)
44.             return value - timedelta(days=value.weekday())
45.         if kind == 'month':
46.             if isinstance(value, datetime):
47.                 return value.replace(day=1, hour=0, minute=0, second=0, microsecond=0)
48.             return value.replace(day=1)
49.         if kind == 'quarter':
50.             month_in_quarter = value.month - (value.month - 1) % 3
51.             if isinstance(value, datetime):
52.                 return value.replace(month=month_in_quarter, day=1, hour=0, minute=0, second=0, microsecond=0)
53.             return value.replace(month=month_in_quarter, day=1)
54.         # otherwise, truncate to year
55.         if isinstance(value, datetime):
56.             return value.replace(month=1, day=1, hour=0, minute=0, second=0, microsecond=0)
57.         return value.replace(month=1, day=1)
58. 
59.     value = truncate(value, kind)
60.     if tzinfo is not None:
61.         # If there was a daylight saving transition, then reset the timezone.
62.         value = timezone.make_aware(value.replace(tzinfo=None), tzinfo)
63.     return value
64. 
65. 
66. @override_settings(USE_TZ=False)
67. class DateFunctionTests(TestCase):
68. 
69.     def create_model(self, start_datetime, end_datetime):
70.         return DTModel.objects.create(
71.             name=start_datetime.isoformat() if start_datetime else 'None',
72.             start_datetime=start_datetime,
73.             end_datetime=end_datetime,
74.             start_date=start_datetime.date() if start_datetime else None,
75.             end_date=end_datetime.date() if end_datetime else None,
76.             start_time=start_datetime.time() if start_datetime else None,
77.             end_time=end_datetime.time() if end_datetime else None,
78.             duration=(end_datetime - start_datetime) if start_datetime and end_datetime else None,
79.         )
80. 
81.     def test_extract_year_exact_lookup(self):
82.         """
83.         Extract year uses a BETWEEN filter to compare the year to allow indexes
84.         to be used.
85.         """
86.         start_datetime = datetime(2015, 6, 15, 14, 10)
87.         end_datetime = datetime(2016, 6, 15, 14, 10)
88.         if settings.USE_TZ:
89.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
90.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
91.         self.create_model(start_datetime, end_datetime)
92.         self.create_model(end_datetime, start_datetime)
93. 
94.         for lookup in ('year', 'iso_year'):
95.             with self.subTest(lookup):
96.                 qs = DTModel.objects.filter(**{'start_datetime__%s__exact' % lookup: 2015})
97.                 self.assertEqual(qs.count(), 1)
98.                 query_string = str(qs.query).lower()
99.                 self.assertEqual(query_string.count(' between '), 1)
100.                 self.assertEqual(query_string.count('extract'), 0)
101.                 # exact is implied and should be the same
102.                 qs = DTModel.objects.filter(**{'start_datetime__%s' % lookup: 2015})
103.                 self.assertEqual(qs.count(), 1)
104.                 query_string = str(qs.query).lower()
105.                 self.assertEqual(query_string.count(' between '), 1)
106.                 self.assertEqual(query_string.count('extract'), 0)
107.                 # date and datetime fields should behave the same
108.                 qs = DTModel.objects.filter(**{'start_date__%s' % lookup: 2015})
109.                 self.assertEqual(qs.count(), 1)
110.                 query_string = str(qs.query).lower()
111.                 self.assertEqual(query_string.count(' between '), 1)
112.                 self.assertEqual(query_string.count('extract'), 0)
113.                 # an expression rhs cannot use the between optimization.
114.                 qs = DTModel.objects.annotate(
115.                     start_year=ExtractYear('start_datetime'),
116.                 ).filter(end_datetime__year=F('start_year') + 1)
117.                 self.assertEqual(qs.count(), 1)
118.                 query_string = str(qs.query).lower()
119.                 self.assertEqual(query_string.count(' between '), 0)
120.                 self.assertEqual(query_string.count('extract'), 3)
121. 
122.     def test_extract_year_greaterthan_lookup(self):
123.         start_datetime = datetime(2015, 6, 15, 14, 10)
124.         end_datetime = datetime(2016, 6, 15, 14, 10)
125.         if settings.USE_TZ:
126.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
127.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
128.         self.create_model(start_datetime, end_datetime)
129.         self.create_model(end_datetime, start_datetime)
130. 
131.         for lookup in ('year', 'iso_year'):
132.             with self.subTest(lookup):
133.                 qs = DTModel.objects.filter(**{'start_datetime__%s__gt' % lookup: 2015})
134.                 self.assertEqual(qs.count(), 1)
135.                 self.assertEqual(str(qs.query).lower().count('extract'), 0)
136.                 qs = DTModel.objects.filter(**{'start_datetime__%s__gte' % lookup: 2015})
137.                 self.assertEqual(qs.count(), 2)
138.                 self.assertEqual(str(qs.query).lower().count('extract'), 0)
139.                 qs = DTModel.objects.annotate(
140.                     start_year=ExtractYear('start_datetime'),
141.                 ).filter(**{'end_datetime__%s__gte' % lookup: F('start_year')})
142.                 self.assertEqual(qs.count(), 1)
143.                 self.assertGreaterEqual(str(qs.query).lower().count('extract'), 2)
144. 
145.     def test_extract_year_lessthan_lookup(self):
146.         start_datetime = datetime(2015, 6, 15, 14, 10)
147.         end_datetime = datetime(2016, 6, 15, 14, 10)
148.         if settings.USE_TZ:
149.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
150.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
151.         self.create_model(start_datetime, end_datetime)
152.         self.create_model(end_datetime, start_datetime)
153. 
154.         for lookup in ('year', 'iso_year'):
155.             with self.subTest(lookup):
156.                 qs = DTModel.objects.filter(**{'start_datetime__%s__lt' % lookup: 2016})
157.                 self.assertEqual(qs.count(), 1)
158.                 self.assertEqual(str(qs.query).count('extract'), 0)
159.                 qs = DTModel.objects.filter(**{'start_datetime__%s__lte' % lookup: 2016})
160.                 self.assertEqual(qs.count(), 2)
161.                 self.assertEqual(str(qs.query).count('extract'), 0)
162.                 qs = DTModel.objects.annotate(
163.                     end_year=ExtractYear('end_datetime'),
164.                 ).filter(**{'start_datetime__%s__lte' % lookup: F('end_year')})
165.                 self.assertEqual(qs.count(), 1)
166.                 self.assertGreaterEqual(str(qs.query).lower().count('extract'), 2)
167. 
168.     def test_extract_func(self):
169.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
170.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
171.         if settings.USE_TZ:
172.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
173.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
174.         self.create_model(start_datetime, end_datetime)
175.         self.create_model(end_datetime, start_datetime)
176. 
177.         with self.assertRaisesMessage(ValueError, 'lookup_name must be provided'):
178.             Extract('start_datetime')
179. 
180.         msg = 'Extract input expression must be DateField, DateTimeField, TimeField, or DurationField.'
181.         with self.assertRaisesMessage(ValueError, msg):
182.             list(DTModel.objects.annotate(extracted=Extract('name', 'hour')))
183. 
184.         with self.assertRaisesMessage(
185.                 ValueError, "Cannot extract time component 'second' from DateField 'start_date'."):
186.             list(DTModel.objects.annotate(extracted=Extract('start_date', 'second')))
187. 
188.         self.assertQuerysetEqual(
189.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'year')).order_by('start_datetime'),
190.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
191.             lambda m: (m.start_datetime, m.extracted)
192.         )
193.         self.assertQuerysetEqual(
194.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'quarter')).order_by('start_datetime'),
195.             [(start_datetime, 2), (end_datetime, 2)],
196.             lambda m: (m.start_datetime, m.extracted)
197.         )
198.         self.assertQuerysetEqual(
199.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'month')).order_by('start_datetime'),
200.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
201.             lambda m: (m.start_datetime, m.extracted)
202.         )
203.         self.assertQuerysetEqual(
204.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'day')).order_by('start_datetime'),
205.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
206.             lambda m: (m.start_datetime, m.extracted)
207.         )
208.         self.assertQuerysetEqual(
209.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'week')).order_by('start_datetime'),
210.             [(start_datetime, 25), (end_datetime, 24)],
211.             lambda m: (m.start_datetime, m.extracted)
212.         )
213.         self.assertQuerysetEqual(
214.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'week_day')).order_by('start_datetime'),
215.             [
216.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
217.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1)
218.             ],
219.             lambda m: (m.start_datetime, m.extracted)
220.         )
221.         self.assertQuerysetEqual(
222.             DTModel.objects.annotate(
223.                 extracted=Extract('start_datetime', 'iso_week_day'),
224.             ).order_by('start_datetime'),
225.             [
226.                 (start_datetime, start_datetime.isoweekday()),
227.                 (end_datetime, end_datetime.isoweekday()),
228.             ],
229.             lambda m: (m.start_datetime, m.extracted)
230.         )
231.         self.assertQuerysetEqual(
232.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'hour')).order_by('start_datetime'),
233.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
234.             lambda m: (m.start_datetime, m.extracted)
235.         )
236.         self.assertQuerysetEqual(
237.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'minute')).order_by('start_datetime'),
238.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
239.             lambda m: (m.start_datetime, m.extracted)
240.         )
241.         self.assertQuerysetEqual(
242.             DTModel.objects.annotate(extracted=Extract('start_datetime', 'second')).order_by('start_datetime'),
243.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
244.             lambda m: (m.start_datetime, m.extracted)
245.         )
246.         self.assertEqual(DTModel.objects.filter(start_datetime__year=Extract('start_datetime', 'year')).count(), 2)
247.         self.assertEqual(DTModel.objects.filter(start_datetime__hour=Extract('start_datetime', 'hour')).count(), 2)
248.         self.assertEqual(DTModel.objects.filter(start_date__month=Extract('start_date', 'month')).count(), 2)
249.         self.assertEqual(DTModel.objects.filter(start_time__hour=Extract('start_time', 'hour')).count(), 2)
250. 
251.     def test_extract_none(self):
252.         self.create_model(None, None)
253.         for t in (Extract('start_datetime', 'year'), Extract('start_date', 'year'), Extract('start_time', 'hour')):
254.             with self.subTest(t):
255.                 self.assertIsNone(DTModel.objects.annotate(extracted=t).first().extracted)
256. 
257.     @skipUnlessDBFeature('has_native_duration_field')
258.     def test_extract_duration(self):
259.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
260.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
261.         if settings.USE_TZ:
262.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
263.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
264.         self.create_model(start_datetime, end_datetime)
265.         self.create_model(end_datetime, start_datetime)
266.         self.assertQuerysetEqual(
267.             DTModel.objects.annotate(extracted=Extract('duration', 'second')).order_by('start_datetime'),
268.             [
269.                 (start_datetime, (end_datetime - start_datetime).seconds % 60),
270.                 (end_datetime, (start_datetime - end_datetime).seconds % 60)
271.             ],
272.             lambda m: (m.start_datetime, m.extracted)
273.         )
274.         self.assertEqual(
275.             DTModel.objects.annotate(
276.                 duration_days=Extract('duration', 'day'),
277.             ).filter(duration_days__gt=200).count(),
278.             1
279.         )
280. 
281.     @skipIfDBFeature('has_native_duration_field')
282.     def test_extract_duration_without_native_duration_field(self):
283.         msg = 'Extract requires native DurationField database support.'
284.         with self.assertRaisesMessage(ValueError, msg):
285.             list(DTModel.objects.annotate(extracted=Extract('duration', 'second')))
286. 
287.     def test_extract_duration_unsupported_lookups(self):
288.         msg = "Cannot extract component '%s' from DurationField 'duration'."
289.         for lookup in (
290.             'year', 'iso_year', 'month', 'week', 'week_day', 'iso_week_day',
291.             'quarter',
292.         ):
293.             with self.subTest(lookup):
294.                 with self.assertRaisesMessage(ValueError, msg % lookup):
295.                     DTModel.objects.annotate(extracted=Extract('duration', lookup))
296. 
297.     def test_extract_year_func(self):
298.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
299.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
300.         if settings.USE_TZ:
301.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
302.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
303.         self.create_model(start_datetime, end_datetime)
304.         self.create_model(end_datetime, start_datetime)
305.         self.assertQuerysetEqual(
306.             DTModel.objects.annotate(extracted=ExtractYear('start_datetime')).order_by('start_datetime'),
307.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
308.             lambda m: (m.start_datetime, m.extracted)
309.         )
310.         self.assertQuerysetEqual(
311.             DTModel.objects.annotate(extracted=ExtractYear('start_date')).order_by('start_datetime'),
312.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
313.             lambda m: (m.start_datetime, m.extracted)
314.         )
315.         self.assertEqual(DTModel.objects.filter(start_datetime__year=ExtractYear('start_datetime')).count(), 2)
316. 
317.     def test_extract_iso_year_func(self):
318.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
319.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
320.         if settings.USE_TZ:
321.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
322.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
323.         self.create_model(start_datetime, end_datetime)
324.         self.create_model(end_datetime, start_datetime)
325.         self.assertQuerysetEqual(
326.             DTModel.objects.annotate(extracted=ExtractIsoYear('start_datetime')).order_by('start_datetime'),
327.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
328.             lambda m: (m.start_datetime, m.extracted)
329.         )
330.         self.assertQuerysetEqual(
331.             DTModel.objects.annotate(extracted=ExtractIsoYear('start_date')).order_by('start_datetime'),
332.             [(start_datetime, start_datetime.year), (end_datetime, end_datetime.year)],
333.             lambda m: (m.start_datetime, m.extracted)
334.         )
335.         # Both dates are from the same week year.
336.         self.assertEqual(DTModel.objects.filter(start_datetime__iso_year=ExtractIsoYear('start_datetime')).count(), 2)
337. 
338.     def test_extract_iso_year_func_boundaries(self):
339.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
340.         if settings.USE_TZ:
341.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
342.         week_52_day_2014 = datetime(2014, 12, 27, 13, 0)  # Sunday
343.         week_1_day_2014_2015 = datetime(2014, 12, 31, 13, 0)  # Wednesday
344.         week_53_day_2015 = datetime(2015, 12, 31, 13, 0)  # Thursday
345.         if settings.USE_TZ:
346.             week_1_day_2014_2015 = timezone.make_aware(week_1_day_2014_2015, is_dst=False)
347.             week_52_day_2014 = timezone.make_aware(week_52_day_2014, is_dst=False)
348.             week_53_day_2015 = timezone.make_aware(week_53_day_2015, is_dst=False)
349.         days = [week_52_day_2014, week_1_day_2014_2015, week_53_day_2015]
350.         self.create_model(week_53_day_2015, end_datetime)
351.         self.create_model(week_52_day_2014, end_datetime)
352.         self.create_model(week_1_day_2014_2015, end_datetime)
353.         qs = DTModel.objects.filter(start_datetime__in=days).annotate(
354.             extracted=ExtractIsoYear('start_datetime'),
355.         ).order_by('start_datetime')
356.         self.assertQuerysetEqual(qs, [
357.             (week_52_day_2014, 2014),
358.             (week_1_day_2014_2015, 2015),
359.             (week_53_day_2015, 2015),
360.         ], lambda m: (m.start_datetime, m.extracted))
361. 
362.     def test_extract_month_func(self):
363.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
364.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
365.         if settings.USE_TZ:
366.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
367.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
368.         self.create_model(start_datetime, end_datetime)
369.         self.create_model(end_datetime, start_datetime)
370.         self.assertQuerysetEqual(
371.             DTModel.objects.annotate(extracted=ExtractMonth('start_datetime')).order_by('start_datetime'),
372.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
373.             lambda m: (m.start_datetime, m.extracted)
374.         )
375.         self.assertQuerysetEqual(
376.             DTModel.objects.annotate(extracted=ExtractMonth('start_date')).order_by('start_datetime'),
377.             [(start_datetime, start_datetime.month), (end_datetime, end_datetime.month)],
378.             lambda m: (m.start_datetime, m.extracted)
379.         )
380.         self.assertEqual(DTModel.objects.filter(start_datetime__month=ExtractMonth('start_datetime')).count(), 2)
381. 
382.     def test_extract_day_func(self):
383.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
384.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
385.         if settings.USE_TZ:
386.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
387.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
388.         self.create_model(start_datetime, end_datetime)
389.         self.create_model(end_datetime, start_datetime)
390.         self.assertQuerysetEqual(
391.             DTModel.objects.annotate(extracted=ExtractDay('start_datetime')).order_by('start_datetime'),
392.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
393.             lambda m: (m.start_datetime, m.extracted)
394.         )
395.         self.assertQuerysetEqual(
396.             DTModel.objects.annotate(extracted=ExtractDay('start_date')).order_by('start_datetime'),
397.             [(start_datetime, start_datetime.day), (end_datetime, end_datetime.day)],
398.             lambda m: (m.start_datetime, m.extracted)
399.         )
400.         self.assertEqual(DTModel.objects.filter(start_datetime__day=ExtractDay('start_datetime')).count(), 2)
401. 
402.     def test_extract_week_func(self):
403.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
404.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
405.         if settings.USE_TZ:
406.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
407.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
408.         self.create_model(start_datetime, end_datetime)
409.         self.create_model(end_datetime, start_datetime)
410.         self.assertQuerysetEqual(
411.             DTModel.objects.annotate(extracted=ExtractWeek('start_datetime')).order_by('start_datetime'),
412.             [(start_datetime, 25), (end_datetime, 24)],
413.             lambda m: (m.start_datetime, m.extracted)
414.         )
415.         self.assertQuerysetEqual(
416.             DTModel.objects.annotate(extracted=ExtractWeek('start_date')).order_by('start_datetime'),
417.             [(start_datetime, 25), (end_datetime, 24)],
418.             lambda m: (m.start_datetime, m.extracted)
419.         )
420.         # both dates are from the same week.
421.         self.assertEqual(DTModel.objects.filter(start_datetime__week=ExtractWeek('start_datetime')).count(), 2)
422. 
423.     def test_extract_quarter_func(self):
424.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
425.         end_datetime = datetime(2016, 8, 15, 14, 10, 50, 123)
426.         if settings.USE_TZ:
427.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
428.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
429.         self.create_model(start_datetime, end_datetime)
430.         self.create_model(end_datetime, start_datetime)
431.         self.assertQuerysetEqual(
432.             DTModel.objects.annotate(extracted=ExtractQuarter('start_datetime')).order_by('start_datetime'),
433.             [(start_datetime, 2), (end_datetime, 3)],
434.             lambda m: (m.start_datetime, m.extracted)
435.         )
436.         self.assertQuerysetEqual(
437.             DTModel.objects.annotate(extracted=ExtractQuarter('start_date')).order_by('start_datetime'),
438.             [(start_datetime, 2), (end_datetime, 3)],
439.             lambda m: (m.start_datetime, m.extracted)
440.         )
441.         self.assertEqual(DTModel.objects.filter(start_datetime__quarter=ExtractQuarter('start_datetime')).count(), 2)
442. 
443.     def test_extract_quarter_func_boundaries(self):
444.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
445.         if settings.USE_TZ:
446.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
447. 
448.         last_quarter_2014 = datetime(2014, 12, 31, 13, 0)
449.         first_quarter_2015 = datetime(2015, 1, 1, 13, 0)
450.         if settings.USE_TZ:
451.             last_quarter_2014 = timezone.make_aware(last_quarter_2014, is_dst=False)
452.             first_quarter_2015 = timezone.make_aware(first_quarter_2015, is_dst=False)
453.         dates = [last_quarter_2014, first_quarter_2015]
454.         self.create_model(last_quarter_2014, end_datetime)
455.         self.create_model(first_quarter_2015, end_datetime)
456.         qs = DTModel.objects.filter(start_datetime__in=dates).annotate(
457.             extracted=ExtractQuarter('start_datetime'),
458.         ).order_by('start_datetime')
459.         self.assertQuerysetEqual(qs, [
460.             (last_quarter_2014, 4),
461.             (first_quarter_2015, 1),
462.         ], lambda m: (m.start_datetime, m.extracted))
463. 
464.     def test_extract_week_func_boundaries(self):
465.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
466.         if settings.USE_TZ:
467.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
468. 
469.         week_52_day_2014 = datetime(2014, 12, 27, 13, 0)  # Sunday
470.         week_1_day_2014_2015 = datetime(2014, 12, 31, 13, 0)  # Wednesday
471.         week_53_day_2015 = datetime(2015, 12, 31, 13, 0)  # Thursday
472.         if settings.USE_TZ:
473.             week_1_day_2014_2015 = timezone.make_aware(week_1_day_2014_2015, is_dst=False)
474.             week_52_day_2014 = timezone.make_aware(week_52_day_2014, is_dst=False)
475.             week_53_day_2015 = timezone.make_aware(week_53_day_2015, is_dst=False)
476. 
477.         days = [week_52_day_2014, week_1_day_2014_2015, week_53_day_2015]
478.         self.create_model(week_53_day_2015, end_datetime)
479.         self.create_model(week_52_day_2014, end_datetime)
480.         self.create_model(week_1_day_2014_2015, end_datetime)
481.         qs = DTModel.objects.filter(start_datetime__in=days).annotate(
482.             extracted=ExtractWeek('start_datetime'),
483.         ).order_by('start_datetime')
484.         self.assertQuerysetEqual(qs, [
485.             (week_52_day_2014, 52),
486.             (week_1_day_2014_2015, 1),
487.             (week_53_day_2015, 53),
488.         ], lambda m: (m.start_datetime, m.extracted))
489. 
490.     def test_extract_weekday_func(self):
491.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
492.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
493.         if settings.USE_TZ:
494.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
495.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
496.         self.create_model(start_datetime, end_datetime)
497.         self.create_model(end_datetime, start_datetime)
498.         self.assertQuerysetEqual(
499.             DTModel.objects.annotate(extracted=ExtractWeekDay('start_datetime')).order_by('start_datetime'),
500.             [
501.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
502.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1),
503.             ],
504.             lambda m: (m.start_datetime, m.extracted)
505.         )
506.         self.assertQuerysetEqual(
507.             DTModel.objects.annotate(extracted=ExtractWeekDay('start_date')).order_by('start_datetime'),
508.             [
509.                 (start_datetime, (start_datetime.isoweekday() % 7) + 1),
510.                 (end_datetime, (end_datetime.isoweekday() % 7) + 1),
511.             ],
512.             lambda m: (m.start_datetime, m.extracted)
513.         )
514.         self.assertEqual(DTModel.objects.filter(start_datetime__week_day=ExtractWeekDay('start_datetime')).count(), 2)
515. 
516.     def test_extract_iso_weekday_func(self):
517.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
518.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
519.         if settings.USE_TZ:
520.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
521.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
522.         self.create_model(start_datetime, end_datetime)
523.         self.create_model(end_datetime, start_datetime)
524.         self.assertQuerysetEqual(
525.             DTModel.objects.annotate(
526.                 extracted=ExtractIsoWeekDay('start_datetime'),
527.             ).order_by('start_datetime'),
528.             [
529.                 (start_datetime, start_datetime.isoweekday()),
530.                 (end_datetime, end_datetime.isoweekday()),
531.             ],
532.             lambda m: (m.start_datetime, m.extracted)
533.         )
534.         self.assertQuerysetEqual(
535.             DTModel.objects.annotate(
536.                 extracted=ExtractIsoWeekDay('start_date'),
537.             ).order_by('start_datetime'),
538.             [
539.                 (start_datetime, start_datetime.isoweekday()),
540.                 (end_datetime, end_datetime.isoweekday()),
541.             ],
542.             lambda m: (m.start_datetime, m.extracted)
543.         )
544.         self.assertEqual(
545.             DTModel.objects.filter(
546.                 start_datetime__week_day=ExtractWeekDay('start_datetime'),
547.             ).count(),
548.             2,
549.         )
550. 
551.     def test_extract_hour_func(self):
552.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
553.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
554.         if settings.USE_TZ:
555.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
556.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
557.         self.create_model(start_datetime, end_datetime)
558.         self.create_model(end_datetime, start_datetime)
559.         self.assertQuerysetEqual(
560.             DTModel.objects.annotate(extracted=ExtractHour('start_datetime')).order_by('start_datetime'),
561.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
562.             lambda m: (m.start_datetime, m.extracted)
563.         )
564.         self.assertQuerysetEqual(
565.             DTModel.objects.annotate(extracted=ExtractHour('start_time')).order_by('start_datetime'),
566.             [(start_datetime, start_datetime.hour), (end_datetime, end_datetime.hour)],
567.             lambda m: (m.start_datetime, m.extracted)
568.         )
569.         self.assertEqual(DTModel.objects.filter(start_datetime__hour=ExtractHour('start_datetime')).count(), 2)
570. 
571.     def test_extract_minute_func(self):
572.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
573.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
574.         if settings.USE_TZ:
575.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
576.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
577.         self.create_model(start_datetime, end_datetime)
578.         self.create_model(end_datetime, start_datetime)
579.         self.assertQuerysetEqual(
580.             DTModel.objects.annotate(extracted=ExtractMinute('start_datetime')).order_by('start_datetime'),
581.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
582.             lambda m: (m.start_datetime, m.extracted)
583.         )
584.         self.assertQuerysetEqual(
585.             DTModel.objects.annotate(extracted=ExtractMinute('start_time')).order_by('start_datetime'),
586.             [(start_datetime, start_datetime.minute), (end_datetime, end_datetime.minute)],
587.             lambda m: (m.start_datetime, m.extracted)
588.         )
589.         self.assertEqual(DTModel.objects.filter(start_datetime__minute=ExtractMinute('start_datetime')).count(), 2)
590. 
591.     def test_extract_second_func(self):
592.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
593.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
594.         if settings.USE_TZ:
595.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
596.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
597.         self.create_model(start_datetime, end_datetime)
598.         self.create_model(end_datetime, start_datetime)
599.         self.assertQuerysetEqual(
600.             DTModel.objects.annotate(extracted=ExtractSecond('start_datetime')).order_by('start_datetime'),
601.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
602.             lambda m: (m.start_datetime, m.extracted)
603.         )
604.         self.assertQuerysetEqual(
605.             DTModel.objects.annotate(extracted=ExtractSecond('start_time')).order_by('start_datetime'),
606.             [(start_datetime, start_datetime.second), (end_datetime, end_datetime.second)],
607.             lambda m: (m.start_datetime, m.extracted)
608.         )
609.         self.assertEqual(DTModel.objects.filter(start_datetime__second=ExtractSecond('start_datetime')).count(), 2)
610. 
611.     def test_trunc_func(self):
612.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
613.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
614.         if settings.USE_TZ:
615.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
616.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
617.         self.create_model(start_datetime, end_datetime)
618.         self.create_model(end_datetime, start_datetime)
619. 
620.         msg = 'output_field must be either DateField, TimeField, or DateTimeField'
621.         with self.assertRaisesMessage(ValueError, msg):
622.             list(DTModel.objects.annotate(truncated=Trunc('start_datetime', 'year', output_field=IntegerField())))
623. 
624.         with self.assertRaisesMessage(AssertionError, "'name' isn't a DateField, TimeField, or DateTimeField."):
625.             list(DTModel.objects.annotate(truncated=Trunc('name', 'year', output_field=DateTimeField())))
626. 
627.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
628.             list(DTModel.objects.annotate(truncated=Trunc('start_date', 'second')))
629. 
630.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
631.             list(DTModel.objects.annotate(truncated=Trunc('start_time', 'month')))
632. 
633.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
634.             list(DTModel.objects.annotate(truncated=Trunc('start_date', 'month', output_field=DateTimeField())))
635. 
636.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
637.             list(DTModel.objects.annotate(truncated=Trunc('start_time', 'second', output_field=DateTimeField())))
638. 
639.         def test_datetime_kind(kind):
640.             self.assertQuerysetEqual(
641.                 DTModel.objects.annotate(
642.                     truncated=Trunc('start_datetime', kind, output_field=DateTimeField())
643.                 ).order_by('start_datetime'),
644.                 [
645.                     (start_datetime, truncate_to(start_datetime, kind)),
646.                     (end_datetime, truncate_to(end_datetime, kind))
647.                 ],
648.                 lambda m: (m.start_datetime, m.truncated)
649.             )
650. 
651.         def test_date_kind(kind):
652.             self.assertQuerysetEqual(
653.                 DTModel.objects.annotate(
654.                     truncated=Trunc('start_date', kind, output_field=DateField())
655.                 ).order_by('start_datetime'),
656.                 [
657.                     (start_datetime, truncate_to(start_datetime.date(), kind)),
658.                     (end_datetime, truncate_to(end_datetime.date(), kind))
659.                 ],
660.                 lambda m: (m.start_datetime, m.truncated)
661.             )
662. 
663.         def test_time_kind(kind):
664.             self.assertQuerysetEqual(
665.                 DTModel.objects.annotate(
666.                     truncated=Trunc('start_time', kind, output_field=TimeField())
667.                 ).order_by('start_datetime'),
668.                 [
669.                     (start_datetime, truncate_to(start_datetime.time(), kind)),
670.                     (end_datetime, truncate_to(end_datetime.time(), kind))
671.                 ],
672.                 lambda m: (m.start_datetime, m.truncated)
673.             )
674. 
675.         test_date_kind('year')
676.         test_date_kind('quarter')
677.         test_date_kind('month')
678.         test_date_kind('week')
679.         test_date_kind('day')
680.         test_time_kind('hour')
681.         test_time_kind('minute')
682.         test_time_kind('second')
683.         test_datetime_kind('year')
684.         test_datetime_kind('quarter')
685.         test_datetime_kind('month')
686.         test_datetime_kind('week')
687.         test_datetime_kind('day')
688.         test_datetime_kind('hour')
689.         test_datetime_kind('minute')
690.         test_datetime_kind('second')
691. 
692.         qs = DTModel.objects.filter(start_datetime__date=Trunc('start_datetime', 'day', output_field=DateField()))
693.         self.assertEqual(qs.count(), 2)
694. 
695.     def test_trunc_none(self):
696.         self.create_model(None, None)
697.         for t in (Trunc('start_datetime', 'year'), Trunc('start_date', 'year'), Trunc('start_time', 'hour')):
698.             with self.subTest(t):
699.                 self.assertIsNone(DTModel.objects.annotate(truncated=t).first().truncated)
700. 
701.     def test_trunc_year_func(self):
702.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
703.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'year')
704.         if settings.USE_TZ:
705.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
706.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
707.         self.create_model(start_datetime, end_datetime)
708.         self.create_model(end_datetime, start_datetime)
709.         self.assertQuerysetEqual(
710.             DTModel.objects.annotate(extracted=TruncYear('start_datetime')).order_by('start_datetime'),
711.             [
712.                 (start_datetime, truncate_to(start_datetime, 'year')),
713.                 (end_datetime, truncate_to(end_datetime, 'year')),
714.             ],
715.             lambda m: (m.start_datetime, m.extracted)
716.         )
717.         self.assertQuerysetEqual(
718.             DTModel.objects.annotate(extracted=TruncYear('start_date')).order_by('start_datetime'),
719.             [
720.                 (start_datetime, truncate_to(start_datetime.date(), 'year')),
721.                 (end_datetime, truncate_to(end_datetime.date(), 'year')),
722.             ],
723.             lambda m: (m.start_datetime, m.extracted)
724.         )
725.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncYear('start_datetime')).count(), 1)
726. 
727.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
728.             list(DTModel.objects.annotate(truncated=TruncYear('start_time')))
729. 
730.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
731.             list(DTModel.objects.annotate(truncated=TruncYear('start_time', output_field=TimeField())))
732. 
733.     def test_trunc_quarter_func(self):
734.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
735.         end_datetime = truncate_to(datetime(2016, 10, 15, 14, 10, 50, 123), 'quarter')
736.         last_quarter_2015 = truncate_to(datetime(2015, 12, 31, 14, 10, 50, 123), 'quarter')
737.         first_quarter_2016 = truncate_to(datetime(2016, 1, 1, 14, 10, 50, 123), 'quarter')
738.         if settings.USE_TZ:
739.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
740.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
741.             last_quarter_2015 = timezone.make_aware(last_quarter_2015, is_dst=False)
742.             first_quarter_2016 = timezone.make_aware(first_quarter_2016, is_dst=False)
743.         self.create_model(start_datetime=start_datetime, end_datetime=end_datetime)
744.         self.create_model(start_datetime=end_datetime, end_datetime=start_datetime)
745.         self.create_model(start_datetime=last_quarter_2015, end_datetime=end_datetime)
746.         self.create_model(start_datetime=first_quarter_2016, end_datetime=end_datetime)
747.         self.assertQuerysetEqual(
748.             DTModel.objects.annotate(extracted=TruncQuarter('start_date')).order_by('start_datetime'),
749.             [
750.                 (start_datetime, truncate_to(start_datetime.date(), 'quarter')),
751.                 (last_quarter_2015, truncate_to(last_quarter_2015.date(), 'quarter')),
752.                 (first_quarter_2016, truncate_to(first_quarter_2016.date(), 'quarter')),
753.                 (end_datetime, truncate_to(end_datetime.date(), 'quarter')),
754.             ],
755.             lambda m: (m.start_datetime, m.extracted)
756.         )
757.         self.assertQuerysetEqual(
758.             DTModel.objects.annotate(extracted=TruncQuarter('start_datetime')).order_by('start_datetime'),
759.             [
760.                 (start_datetime, truncate_to(start_datetime, 'quarter')),
761.                 (last_quarter_2015, truncate_to(last_quarter_2015, 'quarter')),
762.                 (first_quarter_2016, truncate_to(first_quarter_2016, 'quarter')),
763.                 (end_datetime, truncate_to(end_datetime, 'quarter')),
764.             ],
765.             lambda m: (m.start_datetime, m.extracted)
766.         )
767. 
768.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
769.             list(DTModel.objects.annotate(truncated=TruncQuarter('start_time')))
770. 
771.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
772.             list(DTModel.objects.annotate(truncated=TruncQuarter('start_time', output_field=TimeField())))
773. 
774.     def test_trunc_month_func(self):
775.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
776.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'month')
777.         if settings.USE_TZ:
778.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
779.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
780.         self.create_model(start_datetime, end_datetime)
781.         self.create_model(end_datetime, start_datetime)
782.         self.assertQuerysetEqual(
783.             DTModel.objects.annotate(extracted=TruncMonth('start_datetime')).order_by('start_datetime'),
784.             [
785.                 (start_datetime, truncate_to(start_datetime, 'month')),
786.                 (end_datetime, truncate_to(end_datetime, 'month')),
787.             ],
788.             lambda m: (m.start_datetime, m.extracted)
789.         )
790.         self.assertQuerysetEqual(
791.             DTModel.objects.annotate(extracted=TruncMonth('start_date')).order_by('start_datetime'),
792.             [
793.                 (start_datetime, truncate_to(start_datetime.date(), 'month')),
794.                 (end_datetime, truncate_to(end_datetime.date(), 'month')),
795.             ],
796.             lambda m: (m.start_datetime, m.extracted)
797.         )
798.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncMonth('start_datetime')).count(), 1)
799. 
800.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
801.             list(DTModel.objects.annotate(truncated=TruncMonth('start_time')))
802. 
803.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
804.             list(DTModel.objects.annotate(truncated=TruncMonth('start_time', output_field=TimeField())))
805. 
806.     def test_trunc_week_func(self):
807.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
808.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'week')
809.         if settings.USE_TZ:
810.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
811.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
812.         self.create_model(start_datetime, end_datetime)
813.         self.create_model(end_datetime, start_datetime)
814.         self.assertQuerysetEqual(
815.             DTModel.objects.annotate(extracted=TruncWeek('start_datetime')).order_by('start_datetime'),
816.             [
817.                 (start_datetime, truncate_to(start_datetime, 'week')),
818.                 (end_datetime, truncate_to(end_datetime, 'week')),
819.             ],
820.             lambda m: (m.start_datetime, m.extracted)
821.         )
822.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncWeek('start_datetime')).count(), 1)
823. 
824.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
825.             list(DTModel.objects.annotate(truncated=TruncWeek('start_time')))
826. 
827.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
828.             list(DTModel.objects.annotate(truncated=TruncWeek('start_time', output_field=TimeField())))
829. 
830.     def test_trunc_date_func(self):
831.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
832.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
833.         if settings.USE_TZ:
834.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
835.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
836.         self.create_model(start_datetime, end_datetime)
837.         self.create_model(end_datetime, start_datetime)
838.         self.assertQuerysetEqual(
839.             DTModel.objects.annotate(extracted=TruncDate('start_datetime')).order_by('start_datetime'),
840.             [
841.                 (start_datetime, start_datetime.date()),
842.                 (end_datetime, end_datetime.date()),
843.             ],
844.             lambda m: (m.start_datetime, m.extracted)
845.         )
846.         self.assertEqual(DTModel.objects.filter(start_datetime__date=TruncDate('start_datetime')).count(), 2)
847. 
848.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateField"):
849.             list(DTModel.objects.annotate(truncated=TruncDate('start_time')))
850. 
851.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateField"):
852.             list(DTModel.objects.annotate(truncated=TruncDate('start_time', output_field=TimeField())))
853. 
854.     def test_trunc_date_none(self):
855.         self.create_model(None, None)
856.         self.assertIsNone(DTModel.objects.annotate(truncated=TruncDate('start_datetime')).first().truncated)
857. 
858.     def test_trunc_time_func(self):
859.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
860.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
861.         if settings.USE_TZ:
862.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
863.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
864.         self.create_model(start_datetime, end_datetime)
865.         self.create_model(end_datetime, start_datetime)
866.         self.assertQuerysetEqual(
867.             DTModel.objects.annotate(extracted=TruncTime('start_datetime')).order_by('start_datetime'),
868.             [
869.                 (start_datetime, start_datetime.time()),
870.                 (end_datetime, end_datetime.time()),
871.             ],
872.             lambda m: (m.start_datetime, m.extracted)
873.         )
874.         self.assertEqual(DTModel.objects.filter(start_datetime__time=TruncTime('start_datetime')).count(), 2)
875. 
876.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to TimeField"):
877.             list(DTModel.objects.annotate(truncated=TruncTime('start_date')))
878. 
879.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to TimeField"):
880.             list(DTModel.objects.annotate(truncated=TruncTime('start_date', output_field=DateField())))
881. 
882.     def test_trunc_time_none(self):
883.         self.create_model(None, None)
884.         self.assertIsNone(DTModel.objects.annotate(truncated=TruncTime('start_datetime')).first().truncated)
885. 
886.     def test_trunc_day_func(self):
887.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
888.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'day')
889.         if settings.USE_TZ:
890.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
891.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
892.         self.create_model(start_datetime, end_datetime)
893.         self.create_model(end_datetime, start_datetime)
894.         self.assertQuerysetEqual(
895.             DTModel.objects.annotate(extracted=TruncDay('start_datetime')).order_by('start_datetime'),
896.             [
897.                 (start_datetime, truncate_to(start_datetime, 'day')),
898.                 (end_datetime, truncate_to(end_datetime, 'day')),
899.             ],
900.             lambda m: (m.start_datetime, m.extracted)
901.         )
902.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncDay('start_datetime')).count(), 1)
903. 
904.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
905.             list(DTModel.objects.annotate(truncated=TruncDay('start_time')))
906. 
907.         with self.assertRaisesMessage(ValueError, "Cannot truncate TimeField 'start_time' to DateTimeField"):
908.             list(DTModel.objects.annotate(truncated=TruncDay('start_time', output_field=TimeField())))
909. 
910.     def test_trunc_hour_func(self):
911.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
912.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'hour')
913.         if settings.USE_TZ:
914.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
915.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
916.         self.create_model(start_datetime, end_datetime)
917.         self.create_model(end_datetime, start_datetime)
918.         self.assertQuerysetEqual(
919.             DTModel.objects.annotate(extracted=TruncHour('start_datetime')).order_by('start_datetime'),
920.             [
921.                 (start_datetime, truncate_to(start_datetime, 'hour')),
922.                 (end_datetime, truncate_to(end_datetime, 'hour')),
923.             ],
924.             lambda m: (m.start_datetime, m.extracted)
925.         )
926.         self.assertQuerysetEqual(
927.             DTModel.objects.annotate(extracted=TruncHour('start_time')).order_by('start_datetime'),
928.             [
929.                 (start_datetime, truncate_to(start_datetime.time(), 'hour')),
930.                 (end_datetime, truncate_to(end_datetime.time(), 'hour')),
931.             ],
932.             lambda m: (m.start_datetime, m.extracted)
933.         )
934.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncHour('start_datetime')).count(), 1)
935. 
936.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
937.             list(DTModel.objects.annotate(truncated=TruncHour('start_date')))
938. 
939.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
940.             list(DTModel.objects.annotate(truncated=TruncHour('start_date', output_field=DateField())))
941. 
942.     def test_trunc_minute_func(self):
943.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
944.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'minute')
945.         if settings.USE_TZ:
946.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
947.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
948.         self.create_model(start_datetime, end_datetime)
949.         self.create_model(end_datetime, start_datetime)
950.         self.assertQuerysetEqual(
951.             DTModel.objects.annotate(extracted=TruncMinute('start_datetime')).order_by('start_datetime'),
952.             [
953.                 (start_datetime, truncate_to(start_datetime, 'minute')),
954.                 (end_datetime, truncate_to(end_datetime, 'minute')),
955.             ],
956.             lambda m: (m.start_datetime, m.extracted)
957.         )
958.         self.assertQuerysetEqual(
959.             DTModel.objects.annotate(extracted=TruncMinute('start_time')).order_by('start_datetime'),
960.             [
961.                 (start_datetime, truncate_to(start_datetime.time(), 'minute')),
962.                 (end_datetime, truncate_to(end_datetime.time(), 'minute')),
963.             ],
964.             lambda m: (m.start_datetime, m.extracted)
965.         )
966.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncMinute('start_datetime')).count(), 1)
967. 
968.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
969.             list(DTModel.objects.annotate(truncated=TruncMinute('start_date')))
970. 
971.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
972.             list(DTModel.objects.annotate(truncated=TruncMinute('start_date', output_field=DateField())))
973. 
974.     def test_trunc_second_func(self):
975.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
976.         end_datetime = truncate_to(datetime(2016, 6, 15, 14, 10, 50, 123), 'second')
977.         if settings.USE_TZ:
978.             start_datetime = timezone.make_aware(start_datetime, is_dst=False)
979.             end_datetime = timezone.make_aware(end_datetime, is_dst=False)
980.         self.create_model(start_datetime, end_datetime)
981.         self.create_model(end_datetime, start_datetime)
982.         self.assertQuerysetEqual(
983.             DTModel.objects.annotate(extracted=TruncSecond('start_datetime')).order_by('start_datetime'),
984.             [
985.                 (start_datetime, truncate_to(start_datetime, 'second')),
986.                 (end_datetime, truncate_to(end_datetime, 'second'))
987.             ],
988.             lambda m: (m.start_datetime, m.extracted)
989.         )
990.         self.assertQuerysetEqual(
991.             DTModel.objects.annotate(extracted=TruncSecond('start_time')).order_by('start_datetime'),
992.             [
993.                 (start_datetime, truncate_to(start_datetime.time(), 'second')),
994.                 (end_datetime, truncate_to(end_datetime.time(), 'second'))
995.             ],
996.             lambda m: (m.start_datetime, m.extracted)
997.         )
998.         self.assertEqual(DTModel.objects.filter(start_datetime=TruncSecond('start_datetime')).count(), 1)
999. 
1000.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
1001.             list(DTModel.objects.annotate(truncated=TruncSecond('start_date')))
1002. 
1003.         with self.assertRaisesMessage(ValueError, "Cannot truncate DateField 'start_date' to DateTimeField"):
1004.             list(DTModel.objects.annotate(truncated=TruncSecond('start_date', output_field=DateField())))
1005. 
1006.     def test_trunc_subquery_with_parameters(self):
1007.         author_1 = Author.objects.create(name='J. R. R. Tolkien')
1008.         author_2 = Author.objects.create(name='G. R. R. Martin')
1009.         fan_since_1 = datetime(2016, 2, 3, 15, 0, 0)
1010.         fan_since_2 = datetime(2015, 2, 3, 15, 0, 0)
1011.         fan_since_3 = datetime(2017, 2, 3, 15, 0, 0)
1012.         if settings.USE_TZ:
1013.             fan_since_1 = timezone.make_aware(fan_since_1, is_dst=False)
1014.             fan_since_2 = timezone.make_aware(fan_since_2, is_dst=False)
1015.             fan_since_3 = timezone.make_aware(fan_since_3, is_dst=False)
1016.         Fan.objects.create(author=author_1, name='Tom', fan_since=fan_since_1)
1017.         Fan.objects.create(author=author_1, name='Emma', fan_since=fan_since_2)
1018.         Fan.objects.create(author=author_2, name='Isabella', fan_since=fan_since_3)
1019. 
1020.         inner = Fan.objects.filter(
1021.             author=OuterRef('pk'),
1022.             name__in=('Emma', 'Isabella', 'Tom')
1023.         ).values('author').annotate(newest_fan=Max('fan_since')).values('newest_fan')
1024.         outer = Author.objects.annotate(
1025.             newest_fan_year=TruncYear(Subquery(inner, output_field=DateTimeField()))
1026.         )
1027.         tz = pytz.UTC if settings.USE_TZ else None
1028.         self.assertSequenceEqual(
1029.             outer.order_by('name').values('name', 'newest_fan_year'),
1030.             [
1031.                 {'name': 'G. R. R. Martin', 'newest_fan_year': datetime(2017, 1, 1, 0, 0, tzinfo=tz)},
1032.                 {'name': 'J. R. R. Tolkien', 'newest_fan_year': datetime(2016, 1, 1, 0, 0, tzinfo=tz)},
1033.             ]
1034.         )
1035. 
1036. 
1037. @override_settings(USE_TZ=True, TIME_ZONE='UTC')
1038. class DateFunctionWithTimeZoneTests(DateFunctionTests):
1039. 
1040.     def test_extract_func_with_timezone(self):
1041.         start_datetime = datetime(2015, 6, 15, 23, 30, 1, 321)
1042.         end_datetime = datetime(2015, 6, 16, 13, 11, 27, 123)
1043.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1044.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1045.         self.create_model(start_datetime, end_datetime)
1046.         melb = pytz.timezone('Australia/Melbourne')
1047.         delta_tzinfo_pos = datetime_timezone(timedelta(hours=5))
1048.         delta_tzinfo_neg = datetime_timezone(timedelta(hours=-5, minutes=17))
1049. 
1050.         qs = DTModel.objects.annotate(
1051.             day=Extract('start_datetime', 'day'),
1052.             day_melb=Extract('start_datetime', 'day', tzinfo=melb),
1053.             week=Extract('start_datetime', 'week', tzinfo=melb),
1054.             isoyear=ExtractIsoYear('start_datetime', tzinfo=melb),
1055.             weekday=ExtractWeekDay('start_datetime'),
1056.             weekday_melb=ExtractWeekDay('start_datetime', tzinfo=melb),
1057.             isoweekday=ExtractIsoWeekDay('start_datetime'),
1058.             isoweekday_melb=ExtractIsoWeekDay('start_datetime', tzinfo=melb),
1059.             quarter=ExtractQuarter('start_datetime', tzinfo=melb),
1060.             hour=ExtractHour('start_datetime'),
1061.             hour_melb=ExtractHour('start_datetime', tzinfo=melb),
1062.             hour_with_delta_pos=ExtractHour('start_datetime', tzinfo=delta_tzinfo_pos),
1063.             hour_with_delta_neg=ExtractHour('start_datetime', tzinfo=delta_tzinfo_neg),
1064.             minute_with_delta_neg=ExtractMinute('start_datetime', tzinfo=delta_tzinfo_neg),
1065.         ).order_by('start_datetime')
1066. 
1067.         utc_model = qs.get()
1068.         self.assertEqual(utc_model.day, 15)
1069.         self.assertEqual(utc_model.day_melb, 16)
1070.         self.assertEqual(utc_model.week, 25)
1071.         self.assertEqual(utc_model.isoyear, 2015)
1072.         self.assertEqual(utc_model.weekday, 2)
1073.         self.assertEqual(utc_model.weekday_melb, 3)
1074.         self.assertEqual(utc_model.isoweekday, 1)
1075.         self.assertEqual(utc_model.isoweekday_melb, 2)
1076.         self.assertEqual(utc_model.quarter, 2)
1077.         self.assertEqual(utc_model.hour, 23)
1078.         self.assertEqual(utc_model.hour_melb, 9)
1079.         self.assertEqual(utc_model.hour_with_delta_pos, 4)
1080.         self.assertEqual(utc_model.hour_with_delta_neg, 18)
1081.         self.assertEqual(utc_model.minute_with_delta_neg, 47)
1082. 
1083.         with timezone.override(melb):
1084.             melb_model = qs.get()
1085. 
1086.         self.assertEqual(melb_model.day, 16)
1087.         self.assertEqual(melb_model.day_melb, 16)
1088.         self.assertEqual(melb_model.week, 25)
1089.         self.assertEqual(melb_model.isoyear, 2015)
1090.         self.assertEqual(melb_model.weekday, 3)
1091.         self.assertEqual(melb_model.isoweekday, 2)
1092.         self.assertEqual(melb_model.quarter, 2)
1093.         self.assertEqual(melb_model.weekday_melb, 3)
1094.         self.assertEqual(melb_model.isoweekday_melb, 2)
1095.         self.assertEqual(melb_model.hour, 9)
1096.         self.assertEqual(melb_model.hour_melb, 9)
1097. 
1098.     def test_extract_func_explicit_timezone_priority(self):
1099.         start_datetime = datetime(2015, 6, 15, 23, 30, 1, 321)
1100.         end_datetime = datetime(2015, 6, 16, 13, 11, 27, 123)
1101.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1102.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1103.         self.create_model(start_datetime, end_datetime)
1104.         melb = pytz.timezone('Australia/Melbourne')
1105. 
1106.         with timezone.override(melb):
1107.             model = DTModel.objects.annotate(
1108.                 day_melb=Extract('start_datetime', 'day'),
1109.                 day_utc=Extract('start_datetime', 'day', tzinfo=timezone.utc),
1110.             ).order_by('start_datetime').get()
1111.             self.assertEqual(model.day_melb, 16)
1112.             self.assertEqual(model.day_utc, 15)
1113. 
1114.     def test_trunc_timezone_applied_before_truncation(self):
1115.         start_datetime = datetime(2016, 1, 1, 1, 30, 50, 321)
1116.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
1117.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1118.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1119.         self.create_model(start_datetime, end_datetime)
1120. 
1121.         melb = pytz.timezone('Australia/Melbourne')
1122.         pacific = pytz.timezone('US/Pacific')
1123. 
1124.         model = DTModel.objects.annotate(
1125.             melb_year=TruncYear('start_datetime', tzinfo=melb),
1126.             pacific_year=TruncYear('start_datetime', tzinfo=pacific),
1127.         ).order_by('start_datetime').get()
1128. 
1129.         self.assertEqual(model.start_datetime, start_datetime)
1130.         self.assertEqual(model.melb_year, truncate_to(start_datetime, 'year', melb))
1131.         self.assertEqual(model.pacific_year, truncate_to(start_datetime, 'year', pacific))
1132.         self.assertEqual(model.start_datetime.year, 2016)
1133.         self.assertEqual(model.melb_year.year, 2016)
1134.         self.assertEqual(model.pacific_year.year, 2015)
1135. 
1136.     def test_trunc_ambiguous_and_invalid_times(self):
1137.         sao = pytz.timezone('America/Sao_Paulo')
1138.         utc = pytz.timezone('UTC')
1139.         start_datetime = utc.localize(datetime(2016, 10, 16, 13))
1140.         end_datetime = utc.localize(datetime(2016, 2, 21, 1))
1141.         self.create_model(start_datetime, end_datetime)
1142.         with timezone.override(sao):
1143.             with self.assertRaisesMessage(pytz.NonExistentTimeError, '2016-10-16 00:00:00'):
1144.                 model = DTModel.objects.annotate(truncated_start=TruncDay('start_datetime')).get()
1145.             with self.assertRaisesMessage(pytz.AmbiguousTimeError, '2016-02-20 23:00:00'):
1146.                 model = DTModel.objects.annotate(truncated_end=TruncHour('end_datetime')).get()
1147.             model = DTModel.objects.annotate(
1148.                 truncated_start=TruncDay('start_datetime', is_dst=False),
1149.                 truncated_end=TruncHour('end_datetime', is_dst=False),
1150.             ).get()
1151.             self.assertEqual(model.truncated_start.dst(), timedelta(0))
1152.             self.assertEqual(model.truncated_end.dst(), timedelta(0))
1153.             model = DTModel.objects.annotate(
1154.                 truncated_start=TruncDay('start_datetime', is_dst=True),
1155.                 truncated_end=TruncHour('end_datetime', is_dst=True),
1156.             ).get()
1157.             self.assertEqual(model.truncated_start.dst(), timedelta(0, 3600))
1158.             self.assertEqual(model.truncated_end.dst(), timedelta(0, 3600))
1159. 
1160.     def test_trunc_func_with_timezone(self):
1161.         """
1162.         If the truncated datetime transitions to a different offset (daylight
1163.         saving) then the returned value will have that new timezone/offset.
1164.         """
1165.         start_datetime = datetime(2015, 6, 15, 14, 30, 50, 321)
1166.         end_datetime = datetime(2016, 6, 15, 14, 10, 50, 123)
1167.         start_datetime = timezone.make_aware(start_datetime, is_dst=False)
1168.         end_datetime = timezone.make_aware(end_datetime, is_dst=False)
1169.         self.create_model(start_datetime, end_datetime)
1170.         self.create_model(end_datetime, start_datetime)
1171. 
1172.         melb = pytz.timezone('Australia/Melbourne')
1173. 
1174.         def test_datetime_kind(kind):
1175.             self.assertQuerysetEqual(
1176.                 DTModel.objects.annotate(
1177.                     truncated=Trunc('start_datetime', kind, output_field=DateTimeField(), tzinfo=melb)
1178.                 ).order_by('start_datetime'),
1179.                 [
1180.                     (start_datetime, truncate_to(start_datetime.astimezone(melb), kind, melb)),
1181.                     (end_datetime, truncate_to(end_datetime.astimezone(melb), kind, melb))
1182.                 ],
1183.                 lambda m: (m.start_datetime, m.truncated)
1184.             )
1185. 
1186.         def test_date_kind(kind):
1187.             self.assertQuerysetEqual(
1188.                 DTModel.objects.annotate(
1189.                     truncated=Trunc('start_date', kind, output_field=DateField(), tzinfo=melb)
1190.                 ).order_by('start_datetime'),
1191.                 [
1192.                     (start_datetime, truncate_to(start_datetime.date(), kind)),
1193.                     (end_datetime, truncate_to(end_datetime.date(), kind))
1194.                 ],
1195.                 lambda m: (m.start_datetime, m.truncated)
1196.             )
1197. 
1198.         def test_time_kind(kind):
1199.             self.assertQuerysetEqual(
1200.                 DTModel.objects.annotate(
1201.                     truncated=Trunc('start_time', kind, output_field=TimeField(), tzinfo=melb)
1202.                 ).order_by('start_datetime'),
1203.                 [
1204.                     (start_datetime, truncate_to(start_datetime.time(), kind)),
1205.                     (end_datetime, truncate_to(end_datetime.time(), kind))
1206.                 ],
1207.                 lambda m: (m.start_datetime, m.truncated)
1208.             )
1209. 
1210.         test_date_kind('year')
1211.         test_date_kind('quarter')
1212.         test_date_kind('month')
1213.         test_date_kind('week')
1214.         test_date_kind('day')
1215.         test_time_kind('hour')
1216.         test_time_kind('minute')
1217.         test_time_kind('second')
1218.         test_datetime_kind('year')
1219.         test_datetime_kind('quarter')
1220.         test_datetime_kind('month')
1221.         test_datetime_kind('week')
1222.         test_datetime_kind('day')
1223.         test_datetime_kind('hour')
1224.         test_datetime_kind('minute')
1225.         test_datetime_kind('second')
1226. 
1227.         qs = DTModel.objects.filter(start_datetime__date=Trunc('start_datetime', 'day', output_field=DateField()))
1228.         self.assertEqual(qs.count(), 2)


File: tests/db_functions/models.py
Line number range: 1 - 56
Content:
1. """
2. Tests for built in Function expressions.
3. """
4. from django.db import models
5. 
6. 
7. class Author(models.Model):
8.     name = models.CharField(max_length=50)
9.     alias = models.CharField(max_length=50, null=True, blank=True)
10.     goes_by = models.CharField(max_length=50, null=True, blank=True)
11.     age = models.PositiveSmallIntegerField(default=30)
12. 
13. 
14. class Article(models.Model):
15.     authors = models.ManyToManyField(Author, related_name='articles')
16.     title = models.CharField(max_length=50)
17.     summary = models.CharField(max_length=200, null=True, blank=True)
18.     text = models.TextField()
19.     written = models.DateTimeField()
20.     published = models.DateTimeField(null=True, blank=True)
21.     updated = models.DateTimeField(null=True, blank=True)
22.     views = models.PositiveIntegerField(default=0)
23. 
24. 
25. class Fan(models.Model):
26.     name = models.CharField(max_length=50)
27.     age = models.PositiveSmallIntegerField(default=30)
28.     author = models.ForeignKey(Author, models.CASCADE, related_name='fans')
29.     fan_since = models.DateTimeField(null=True, blank=True)
30. 
31. 
32. class DTModel(models.Model):
33.     name = models.CharField(max_length=32)
34.     start_datetime = models.DateTimeField(null=True, blank=True)
35.     end_datetime = models.DateTimeField(null=True, blank=True)
36.     start_date = models.DateField(null=True, blank=True)
37.     end_date = models.DateField(null=True, blank=True)
38.     start_time = models.TimeField(null=True, blank=True)
39.     end_time = models.TimeField(null=True, blank=True)
40.     duration = models.DurationField(null=True, blank=True)
41. 
42. 
43. class DecimalModel(models.Model):
44.     n1 = models.DecimalField(decimal_places=2, max_digits=6)
45.     n2 = models.DecimalField(decimal_places=2, max_digits=6)
46. 
47. 
48. class IntegerModel(models.Model):
49.     big = models.BigIntegerField(null=True, blank=True)
50.     normal = models.IntegerField(null=True, blank=True)
51.     small = models.SmallIntegerField(null=True, blank=True)
52. 
53. 
54. class FloatModel(models.Model):
55.     f1 = models.FloatField(null=True, blank=True)
56.     f2 = models.FloatField(null=True, blank=True)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 15:48:46,725 - thread-124593202247360.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="I have analyzed the user's request and the provided context. The files `django/db/models/functions/datetime.py`, `tests/db_functions/datetime/test_extract_trunc.py`, and `tests/db_functions/models.py` contain sufficient information to fulfill the request. `test_extract_trunc.py` includes several relevant test cases within the `DateFunctionWithTimeZoneTests` class that demonstrate how the `tzinfo` parameter should work for database functions. I can extract three complete test cases from this file, including all necessary imports, helper functions, and model definitions from the other provided files. Therefore, no additional context is required." query='' extra_requirements='' purpose=''
2025-12-23 15:48:46,726 - thread-124593202247360.prometheus_context_collector - INFO - Successfully retrieved 3 context snippets
