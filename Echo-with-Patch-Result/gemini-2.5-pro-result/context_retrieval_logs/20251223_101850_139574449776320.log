2025-12-23 10:18:50,305 - thread-139574449776320.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Use of literalinclude prepend results in incorrect indent formatting for code eamples

Description: ### Describe the bug

Cannot determine a mechanism to use literalinclude directive with `prepend` or `append` to match code example indentation, as leading whitespace is removed.

### How to Reproduce

Example of including xml snippet, that should be prefixed with ``     <plugin>``.

File ``index.rst``:

``` rst
# hello world

Code examples:

.. literalinclude:: pom.xml
   :language: xml
   :prepend:       </plugin>
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-at: </plugin>
```

File `pom.xml``:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.0</version>
        <configuration>
          <source>1.8</source>
          <target>1.8</target>
          <debug>true</debug>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin>
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
```

Produces the following valid xml, which is indented poorly:
```xml
<plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
   ```
   
 I cannot think of good warning free way to indent `:prepend:` to match the included code example.

### Expected behavior

Expect leading white space to be preserved in output:

```xml
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
```

### Your project

https://github.com/geoserver/geoserver/tree/main/doc/en/developer/source

### Screenshots

_No response_

### OS

Mac

### Python version

3.9.10

### Sphinx version

4.4.0

### Sphinx extensions

['sphinx.ext.todo', 'sphinx.ext.extlinks']

### Extra tools

_No response_

### Additional context

Using `dedent` creatively almost provides a workaround:

``` rst
.. literalinclude:: pom.xml
   :language: xml
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-before: </plugin>
   :prepend: _____</plugin>
   :dedent: 5
```

Produces a warning, which fails the build with ``-W`` build policy.
```
index.rst.rst:155: WARNING: non-whitespace stripped by dedent
```

Use of `dedent` could be a good solution, if `dedent` was applied only to the literalinclude and not to the `prepend` and `append` content.

Patch information:
diff --git a/sphinx/directives/code.py b/sphinx/directives/code.py
index dc44ed314..9f359c0eb 100644
--- a/sphinx/directives/code.py
+++ b/sphinx/directives/code.py
@@ -343,6 +343,7 @@ class LiteralIncludeReader:
     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         prepend = self.options.get('prepend')
         if prepend:
+            # Preserve the leading whitespace in the prepend text
             lines.insert(0, prepend + '\n')
 
         return lines
@@ -350,13 +351,36 @@ class LiteralIncludeReader:
     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         append = self.options.get('append')
         if append:
+            # Preserve the leading whitespace in the append text
             lines.append(append + '\n')
 
         return lines
 
     def dedent_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         if 'dedent' in self.options:
-            return dedent_lines(lines, self.options.get('dedent'), location=location)
+            # Check if we have prepend/append content
+            has_prepend = 'prepend' in self.options
+            has_append = 'append' in self.options
+            
+            # If we have prepend/append, only dedent the included file content
+            if has_prepend or has_append:
+                # Find the range of lines that are from the included file
+                start = 1 if has_prepend else 0
+                end = len(lines) - 1 if has_append else len(lines)
+                
+                # Split into prepend, included content, and append
+                pre_lines = lines[:start] if has_prepend else []
+                included_lines = lines[start:end]
+                post_lines = lines[end:] if has_append else []
+                
+                # Only dedent the included content
+                dedented_included = dedent_lines(included_lines, self.options.get('dedent'), location=location)
+                
+                # Recombine all parts
+                return pre_lines + dedented_included + post_lines
+            else:
+                # No prepend/append, dedent everything as before
+                return dedent_lines(lines, self.options.get('dedent'), location=location)
         else:
             return lines
 


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

2025-12-23 10:18:50,366 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── create-release.yml
|       ├── docutils-latest.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── automatic-doc-generation.rst
|   |   ├── deploying.rst
|   |   ├── describing-code.rst
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── _sphinx_javascript_frameworks_compat.js
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── dedent.rst
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-extlinks-hardcoded-urls
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-extlinks-hardcoded-urls-multiple-replacements
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-intersphinx-role
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── noqa.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-documents_exclude
|   |   |   ├── br0ken_link.rst
|   |   |   ├── broken_link.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_extlinks.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_extension.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    └── doclinter.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Use of literalinclude prepend results in incorrect indent formatting for code eamples

Description: ### Describe the bug

Cannot determine a mechanism to use literalinclude directive with `prepend` or `append` to match code example indentation, as leading whitespace is removed.

### How to Reproduce

Example of including xml snippet, that should be prefixed with ``     <plugin>``.

File ``index.rst``:

``` rst
# hello world

Code examples:

.. literalinclude:: pom.xml
   :language: xml
   :prepend:       </plugin>
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-at: </plugin>
```

File `pom.xml``:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.0</version>
        <configuration>
          <source>1.8</source>
          <target>1.8</target>
          <debug>true</debug>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin>
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
```

Produces the following valid xml, which is indented poorly:
```xml
<plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
   ```
   
 I cannot think of good warning free way to indent `:prepend:` to match the included code example.

### Expected behavior

Expect leading white space to be preserved in output:

```xml
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
```

### Your project

https://github.com/geoserver/geoserver/tree/main/doc/en/developer/source

### Screenshots

_No response_

### OS

Mac

### Python version

3.9.10

### Sphinx version

4.4.0

### Sphinx extensions

['sphinx.ext.todo', 'sphinx.ext.extlinks']

### Extra tools

_No response_

### Additional context

Using `dedent` creatively almost provides a workaround:

``` rst
.. literalinclude:: pom.xml
   :language: xml
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-before: </plugin>
   :prepend: _____</plugin>
   :dedent: 5
```

Produces a warning, which fails the build with ``-W`` build policy.
```
index.rst.rst:155: WARNING: non-whitespace stripped by dedent
```

Use of `dedent` could be a good solution, if `dedent` was applied only to the literalinclude and not to the `prepend` and `append` content.

Patch information:
diff --git a/sphinx/directives/code.py b/sphinx/directives/code.py
index dc44ed314..9f359c0eb 100644
--- a/sphinx/directives/code.py
+++ b/sphinx/directives/code.py
@@ -343,6 +343,7 @@ class LiteralIncludeReader:
     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         prepend = self.options.get('prepend')
         if prepend:
+            # Preserve the leading whitespace in the prepend text
             lines.insert(0, prepend + '\n')
 
         return lines
@@ -350,13 +351,36 @@ class LiteralIncludeReader:
     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         append = self.options.get('append')
         if append:
+            # Preserve the leading whitespace in the append text
             lines.append(append + '\n')
 
         return lines
 
     def dedent_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         if 'dedent' in self.options:
-            return dedent_lines(lines, self.options.get('dedent'), location=location)
+            # Check if we have prepend/append content
+            has_prepend = 'prepend' in self.options
+            has_append = 'append' in self.options
+            
+            # If we have prepend/append, only dedent the included file content
+            if has_prepend or has_append:
+                # Find the range of lines that are from the included file
+                start = 1 if has_prepend else 0
+                end = len(lines) - 1 if has_append else len(lines)
+                
+                # Split into prepend, included content, and append
+                pre_lines = lines[:start] if has_prepend else []
+                included_lines = lines[start:end]
+                post_lines = lines[end:] if has_append else []
+                
+                # Only dedent the included content
+                dedented_included = dedent_lines(included_lines, self.options.get('dedent'), location=location)
+                
+                # Recombine all parts
+                return pre_lines + dedented_included + post_lines
+            else:
+                # No prepend/append, dedent everything as before
+                return dedent_lines(lines, self.options.get('dedent'), location=location)
         else:
             return lines
 


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 10:19:33,882 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's patch for a `literalinclude` bug modifies `sphinx/directives/code.py` and relies on the `dedent_lines` function. To understand the bug and validate the fix, I need to see the original code for the `LiteralIncludeReader` class from `sphinx/directives/code.py` and the `dedent_lines` function, which is likely in `sphinx/util/docutils.py`." query='Please provide the full content of `sphinx/directives/code.py` and the `dedent_lines` function from `sphinx/util/docutils.py`.' extra_requirements='Please prioritize providing the `LiteralInclude` and `LiteralIncludeReader` classes from `sphinx/directives/code.py`, and just the `dedent_lines` function from `sphinx/util/docutils.py`.' purpose='This context is necessary to understand how `literalinclude` options are processed and how text is dedented, which is crucial for fixing the reported indentation issue.'
2025-12-23 10:19:33,883 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `sphinx/directives/code.py` and the `dedent_lines` function from `sphinx/util/docutils.py`.
2025-12-23 10:19:33,883 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 10:19:33,883 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 10:19:33,884 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 10:19:33,884 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `sphinx/directives/code.py` and the `dedent_lines` function from `sphinx/util/docutils.py`.
Extra requirements: Please prioritize providing the `LiteralInclude` and `LiteralIncludeReader` classes from `sphinx/directives/code.py`, and just the `dedent_lines` function from `sphinx/util/docutils.py`.
Purpose: This context is necessary to understand how `literalinclude` options are processed and how text is dedented, which is crucial for fixing the reported indentation issue.
2025-12-23 10:19:36,997 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first retrieve the entire content of `sphinx/directives/code.py` to understand the overall structure and locate the `LiteralInclude` and `LiteralIncludeReader` classes. Next, I will find the `dedent_lines` function within `sphinx/util/docutils.py` to examine its implementation. This will provide the necessary context to understand how code blocks are included and how indentation is handled.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sphinx/directives/code.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2156, 'candidates_token_count': 106, 'total_token_count': 2364, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2156}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 106}], 'thoughts_token_count': 102, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.12036558367171378, 'model_name': 'gemini-2.5-pro'} id='run--671337f5-542a-43a0-934c-51ec542abb20-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sphinx/directives/code.py'}, 'id': 'c9b8c634-93c9-4774-8b61-b20c677055d7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2156, 'output_tokens': 106, 'total_tokens': 2364, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 102}}
2025-12-23 10:19:39,665 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of `sphinx/directives/code.py`, which includes the `LiteralInclude` and `LiteralIncludeReader` classes. I will now locate the `dedent_lines` function in `sphinx/util/docutils.py` to get the remaining required context.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_type_in_file_with_relative_path', 'arguments': '{"type": "function_definition", "relative_path": "sphinx/util/docutils.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9287, 'candidates_token_count': 94, 'total_token_count': 9468, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9287}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 94}], 'thoughts_token_count': 87, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10305216971864091, 'model_name': 'gemini-2.5-pro'} id='run--b2891ed2-8420-468a-9042-23cee5d9e289-0' tool_calls=[{'name': 'find_ast_node_with_type_in_file_with_relative_path', 'args': {'type': 'function_definition', 'relative_path': 'sphinx/util/docutils.py'}, 'id': 'db232537-971c-44fd-bcc2-33a33f8e9d26', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9287, 'output_tokens': 94, 'total_tokens': 9468, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 87}}
2025-12-23 10:19:42,786 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the content of `sphinx/directives/code.py`. However, my initial attempt to locate the `dedent_lines` function in `sphinx/util/docutils.py` by listing all function definitions was unsuccessful. I will now try a more direct approach by searching for the text "dedent_lines" within that file to pinpoint the function.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "sphinx/util/docutils.py", "text": "dedent_lines"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10088, 'candidates_token_count': 112, 'total_token_count': 10293, 'cached_content_token_count': 9130, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10088}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9130}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 112}], 'thoughts_token_count': 93}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10187621627535139, 'model_name': 'gemini-2.5-pro'} id='run--599731ae-c0b0-4345-93cc-3711a098b868-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'sphinx/util/docutils.py', 'text': 'dedent_lines'}, 'id': 'f9614e68-7867-42f1-9413-d2091bfc4b00', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10088, 'output_tokens': 112, 'total_tokens': 10293, 'input_token_details': {'cache_read': 9130}, 'output_token_details': {'reasoning': 93}}
2025-12-23 10:19:50,616 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the code for you. I started by fetching the entire `sphinx/directives/code.py` file, which, as you requested, contains the `LiteralInclude` and `LiteralIncludeReader` classes. I then discovered that the `dedent_lines` function was also located in `sphinx/directives/code.py`, not `sphinx/util/docutils.py` as you initially suggested, so I did not need to search in the other file.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10232, 'candidates_token_count': 99, 'total_token_count': 10999, 'cached_content_token_count': 9116, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10232}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9116}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 99}], 'thoughts_token_count': 668}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4642147488064236, 'model_name': 'gemini-2.5-pro'} id='run--71d8fa1a-e229-4a1d-87b7-97ef1b88b2a3-0' usage_metadata={'input_tokens': 10232, 'output_tokens': 99, 'total_tokens': 10999, 'input_token_details': {'cache_read': 9116}, 'output_token_details': {'reasoning': 668}}
2025-12-23 10:19:50,618 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `sphinx/directives/code.py` and the `dedent_lines` function from `sphinx/util/docutils.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
Please prioritize providing the `LiteralInclude` and `LiteralIncludeReader` classes from `sphinx/directives/code.py`, and just the `dedent_lines` function from `sphinx/util/docutils.py`.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This context is necessary to understand how `literalinclude` options are processed and how text is dedented, which is crucial for fixing the reported indentation issue.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sphinx/directives/code.py
Line number range: 1 - 461
Content:
1. import sys
2. import textwrap
3. from difflib import unified_diff
4. from typing import TYPE_CHECKING, Any, Dict, List, Tuple
5. 
6. from docutils import nodes
7. from docutils.nodes import Element, Node
8. from docutils.parsers.rst import directives
9. from docutils.statemachine import StringList
10. 
11. from sphinx import addnodes
12. from sphinx.config import Config
13. from sphinx.directives import optional_int
14. from sphinx.locale import __
15. from sphinx.util import logging, parselinenos
16. from sphinx.util.docutils import SphinxDirective
17. from sphinx.util.typing import OptionSpec
18. 
19. if TYPE_CHECKING:
20.     from sphinx.application import Sphinx
21. 
22. logger = logging.getLogger(__name__)
23. 
24. 
25. class Highlight(SphinxDirective):
26.     """
27.     Directive to set the highlighting language for code blocks, as well
28.     as the threshold for line numbers.
29.     """
30. 
31.     has_content = False
32.     required_arguments = 1
33.     optional_arguments = 0
34.     final_argument_whitespace = False
35.     option_spec: OptionSpec = {
36.         'force': directives.flag,
37.         'linenothreshold': directives.positive_int,
38.     }
39. 
40.     def run(self) -> List[Node]:
41.         language = self.arguments[0].strip()
42.         linenothreshold = self.options.get('linenothreshold', sys.maxsize)
43.         force = 'force' in self.options
44. 
45.         self.env.temp_data['highlight_language'] = language
46.         return [addnodes.highlightlang(lang=language,
47.                                        force=force,
48.                                        linenothreshold=linenothreshold)]
49. 
50. 
51. def dedent_lines(lines: List[str], dedent: int, location: Tuple[str, int] = None) -> List[str]:
52.     if dedent is None:
53.         return textwrap.dedent(''.join(lines)).splitlines(True)
54. 
55.     if any(s[:dedent].strip() for s in lines):
56.         logger.warning(__('non-whitespace stripped by dedent'), location=location)
57. 
58.     new_lines = []
59.     for line in lines:
60.         new_line = line[dedent:]
61.         if line.endswith('\n') and not new_line:
62.             new_line = '\n'  # keep CRLF
63.         new_lines.append(new_line)
64. 
65.     return new_lines
66. 
67. 
68. def container_wrapper(directive: SphinxDirective, literal_node: Node, caption: str) -> nodes.container:  # NOQA
69.     container_node = nodes.container('', literal_block=True,
70.                                      classes=['literal-block-wrapper'])
71.     parsed = nodes.Element()
72.     directive.state.nested_parse(StringList([caption], source=''),
73.                                  directive.content_offset, parsed)
74.     if isinstance(parsed[0], nodes.system_message):
75.         msg = __('Invalid caption: %s' % parsed[0].astext())
76.         raise ValueError(msg)
77.     elif isinstance(parsed[0], nodes.Element):
78.         caption_node = nodes.caption(parsed[0].rawsource, '',
79.                                      *parsed[0].children)
80.         caption_node.source = literal_node.source
81.         caption_node.line = literal_node.line
82.         container_node += caption_node
83.         container_node += literal_node
84.         return container_node
85.     else:
86.         raise RuntimeError  # never reached
87. 
88. 
89. class CodeBlock(SphinxDirective):
90.     """
91.     Directive for a code block with special highlighting or line numbering
92.     settings.
93.     """
94. 
95.     has_content = True
96.     required_arguments = 0
97.     optional_arguments = 1
98.     final_argument_whitespace = False
99.     option_spec: OptionSpec = {
100.         'force': directives.flag,
101.         'linenos': directives.flag,
102.         'dedent': optional_int,
103.         'lineno-start': int,
104.         'emphasize-lines': directives.unchanged_required,
105.         'caption': directives.unchanged_required,
106.         'class': directives.class_option,
107.         'name': directives.unchanged,
108.     }
109. 
110.     def run(self) -> List[Node]:
111.         document = self.state.document
112.         code = '\n'.join(self.content)
113.         location = self.state_machine.get_source_and_line(self.lineno)
114. 
115.         linespec = self.options.get('emphasize-lines')
116.         if linespec:
117.             try:
118.                 nlines = len(self.content)
119.                 hl_lines = parselinenos(linespec, nlines)
120.                 if any(i >= nlines for i in hl_lines):
121.                     logger.warning(__('line number spec is out of range(1-%d): %r') %
122.                                    (nlines, self.options['emphasize-lines']),
123.                                    location=location)
124. 
125.                 hl_lines = [x + 1 for x in hl_lines if x < nlines]
126.             except ValueError as err:
127.                 return [document.reporter.warning(err, line=self.lineno)]
128.         else:
129.             hl_lines = None
130. 
131.         if 'dedent' in self.options:
132.             location = self.state_machine.get_source_and_line(self.lineno)
133.             lines = code.splitlines(True)
134.             lines = dedent_lines(lines, self.options['dedent'], location=location)
135.             code = ''.join(lines)
136. 
137.         literal: Element = nodes.literal_block(code, code)
138.         if 'linenos' in self.options or 'lineno-start' in self.options:
139.             literal['linenos'] = True
140.         literal['classes'] += self.options.get('class', [])
141.         literal['force'] = 'force' in self.options
142.         if self.arguments:
143.             # highlight language specified
144.             literal['language'] = self.arguments[0]
145.         else:
146.             # no highlight language specified.  Then this directive refers the current
147.             # highlight setting via ``highlight`` directive or ``highlight_language``
148.             # configuration.
149.             literal['language'] = self.env.temp_data.get('highlight_language',
150.                                                          self.config.highlight_language)
151.         extra_args = literal['highlight_args'] = {}
152.         if hl_lines is not None:
153.             extra_args['hl_lines'] = hl_lines
154.         if 'lineno-start' in self.options:
155.             extra_args['linenostart'] = self.options['lineno-start']
156.         self.set_source_info(literal)
157. 
158.         caption = self.options.get('caption')
159.         if caption:
160.             try:
161.                 literal = container_wrapper(self, literal, caption)
162.             except ValueError as exc:
163.                 return [document.reporter.warning(exc, line=self.lineno)]
164. 
165.         # literal will be note_implicit_target that is linked from caption and numref.
166.         # when options['name'] is provided, it should be primary ID.
167.         self.add_name(literal)
168. 
169.         return [literal]
170. 
171. 
172. class LiteralIncludeReader:
173.     INVALID_OPTIONS_PAIR = [
174.         ('lineno-match', 'lineno-start'),
175.         ('lineno-match', 'append'),
176.         ('lineno-match', 'prepend'),
177.         ('start-after', 'start-at'),
178.         ('end-before', 'end-at'),
179.         ('diff', 'pyobject'),
180.         ('diff', 'lineno-start'),
181.         ('diff', 'lineno-match'),
182.         ('diff', 'lines'),
183.         ('diff', 'start-after'),
184.         ('diff', 'end-before'),
185.         ('diff', 'start-at'),
186.         ('diff', 'end-at'),
187.     ]
188. 
189.     def __init__(self, filename: str, options: Dict, config: Config) -> None:
190.         self.filename = filename
191.         self.options = options
192.         self.encoding = options.get('encoding', config.source_encoding)
193.         self.lineno_start = self.options.get('lineno-start', 1)
194. 
195.         self.parse_options()
196. 
197.     def parse_options(self) -> None:
198.         for option1, option2 in self.INVALID_OPTIONS_PAIR:
199.             if option1 in self.options and option2 in self.options:
200.                 raise ValueError(__('Cannot use both "%s" and "%s" options') %
201.                                  (option1, option2))
202. 
203.     def read_file(self, filename: str, location: Tuple[str, int] = None) -> List[str]:
204.         try:
205.             with open(filename, encoding=self.encoding, errors='strict') as f:
206.                 text = f.read()
207.                 if 'tab-width' in self.options:
208.                     text = text.expandtabs(self.options['tab-width'])
209. 
210.                 return text.splitlines(True)
211.         except OSError as exc:
212.             raise OSError(__('Include file %r not found or reading it failed') %
213.                           filename) from exc
214.         except UnicodeError as exc:
215.             raise UnicodeError(__('Encoding %r used for reading included file %r seems to '
216.                                   'be wrong, try giving an :encoding: option') %
217.                                (self.encoding, filename)) from exc
218. 
219.     def read(self, location: Tuple[str, int] = None) -> Tuple[str, int]:
220.         if 'diff' in self.options:
221.             lines = self.show_diff()
222.         else:
223.             filters = [self.pyobject_filter,
224.                        self.start_filter,
225.                        self.end_filter,
226.                        self.lines_filter,
227.                        self.prepend_filter,
228.                        self.append_filter,
229.                        self.dedent_filter]
230.             lines = self.read_file(self.filename, location=location)
231.             for func in filters:
232.                 lines = func(lines, location=location)
233. 
234.         return ''.join(lines), len(lines)
235. 
236.     def show_diff(self, location: Tuple[str, int] = None) -> List[str]:
237.         new_lines = self.read_file(self.filename)
238.         old_filename = self.options.get('diff')
239.         old_lines = self.read_file(old_filename)
240.         diff = unified_diff(old_lines, new_lines, old_filename, self.filename)
241.         return list(diff)
242. 
243.     def pyobject_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
244.         pyobject = self.options.get('pyobject')
245.         if pyobject:
246.             from sphinx.pycode import ModuleAnalyzer
247.             analyzer = ModuleAnalyzer.for_file(self.filename, '')
248.             tags = analyzer.find_tags()
249.             if pyobject not in tags:
250.                 raise ValueError(__('Object named %r not found in include file %r') %
251.                                  (pyobject, self.filename))
252.             else:
253.                 start = tags[pyobject][1]
254.                 end = tags[pyobject][2]
255.                 lines = lines[start - 1:end]
256.                 if 'lineno-match' in self.options:
257.                     self.lineno_start = start
258. 
259.         return lines
260. 
261.     def lines_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
262.         linespec = self.options.get('lines')
263.         if linespec:
264.             linelist = parselinenos(linespec, len(lines))
265.             if any(i >= len(lines) for i in linelist):
266.                 logger.warning(__('line number spec is out of range(1-%d): %r') %
267.                                (len(lines), linespec), location=location)
268. 
269.             if 'lineno-match' in self.options:
270.                 # make sure the line list is not "disjoint".
271.                 first = linelist[0]
272.                 if all(first + i == n for i, n in enumerate(linelist)):
273.                     self.lineno_start += linelist[0]
274.                 else:
275.                     raise ValueError(__('Cannot use "lineno-match" with a disjoint '
276.                                         'set of "lines"'))
277. 
278.             lines = [lines[n] for n in linelist if n < len(lines)]
279.             if lines == []:
280.                 raise ValueError(__('Line spec %r: no lines pulled from include file %r') %
281.                                  (linespec, self.filename))
282. 
283.         return lines
284. 
285.     def start_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
286.         if 'start-at' in self.options:
287.             start = self.options.get('start-at')
288.             inclusive = False
289.         elif 'start-after' in self.options:
290.             start = self.options.get('start-after')
291.             inclusive = True
292.         else:
293.             start = None
294. 
295.         if start:
296.             for lineno, line in enumerate(lines):
297.                 if start in line:
298.                     if inclusive:
299.                         if 'lineno-match' in self.options:
300.                             self.lineno_start += lineno + 1
301. 
302.                         return lines[lineno + 1:]
303.                     else:
304.                         if 'lineno-match' in self.options:
305.                             self.lineno_start += lineno
306. 
307.                         return lines[lineno:]
308. 
309.             if inclusive is True:
310.                 raise ValueError('start-after pattern not found: %s' % start)
311.             else:
312.                 raise ValueError('start-at pattern not found: %s' % start)
313. 
314.         return lines
315. 
316.     def end_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
317.         if 'end-at' in self.options:
318.             end = self.options.get('end-at')
319.             inclusive = True
320.         elif 'end-before' in self.options:
321.             end = self.options.get('end-before')
322.             inclusive = False
323.         else:
324.             end = None
325. 
326.         if end:
327.             for lineno, line in enumerate(lines):
328.                 if end in line:
329.                     if inclusive:
330.                         return lines[:lineno + 1]
331.                     else:
332.                         if lineno == 0:
333.                             pass  # end-before ignores first line
334.                         else:
335.                             return lines[:lineno]
336.             if inclusive is True:
337.                 raise ValueError('end-at pattern not found: %s' % end)
338.             else:
339.                 raise ValueError('end-before pattern not found: %s' % end)
340. 
341.         return lines
342. 
343.     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
344.         prepend = self.options.get('prepend')
345.         if prepend:
346.             lines.insert(0, prepend + '\n')
347. 
348.         return lines
349. 
350.     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
351.         append = self.options.get('append')
352.         if append:
353.             lines.append(append + '\n')
354. 
355.         return lines
356. 
357.     def dedent_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
358.         if 'dedent' in self.options:
359.             return dedent_lines(lines, self.options.get('dedent'), location=location)
360.         else:
361.             return lines
362. 
363. 
364. class LiteralInclude(SphinxDirective):
365.     """
366.     Like ``.. include:: :literal:``, but only warns if the include file is
367.     not found, and does not raise errors.  Also has several options for
368.     selecting what to include.
369.     """
370. 
371.     has_content = False
372.     required_arguments = 1
373.     optional_arguments = 0
374.     final_argument_whitespace = True
375.     option_spec: OptionSpec = {
376.         'dedent': optional_int,
377.         'linenos': directives.flag,
378.         'lineno-start': int,
379.         'lineno-match': directives.flag,
380.         'tab-width': int,
381.         'language': directives.unchanged_required,
382.         'force': directives.flag,
383.         'encoding': directives.encoding,
384.         'pyobject': directives.unchanged_required,
385.         'lines': directives.unchanged_required,
386.         'start-after': directives.unchanged_required,
387.         'end-before': directives.unchanged_required,
388.         'start-at': directives.unchanged_required,
389.         'end-at': directives.unchanged_required,
390.         'prepend': directives.unchanged_required,
391.         'append': directives.unchanged_required,
392.         'emphasize-lines': directives.unchanged_required,
393.         'caption': directives.unchanged,
394.         'class': directives.class_option,
395.         'name': directives.unchanged,
396.         'diff': directives.unchanged_required,
397.     }
398. 
399.     def run(self) -> List[Node]:
400.         document = self.state.document
401.         if not document.settings.file_insertion_enabled:
402.             return [document.reporter.warning('File insertion disabled',
403.                                               line=self.lineno)]
404.         # convert options['diff'] to absolute path
405.         if 'diff' in self.options:
406.             _, path = self.env.relfn2path(self.options['diff'])
407.             self.options['diff'] = path
408. 
409.         try:
410.             location = self.state_machine.get_source_and_line(self.lineno)
411.             rel_filename, filename = self.env.relfn2path(self.arguments[0])
412.             self.env.note_dependency(rel_filename)
413. 
414.             reader = LiteralIncludeReader(filename, self.options, self.config)
415.             text, lines = reader.read(location=location)
416. 
417.             retnode: Element = nodes.literal_block(text, text, source=filename)
418.             retnode['force'] = 'force' in self.options
419.             self.set_source_info(retnode)
420.             if self.options.get('diff'):  # if diff is set, set udiff
421.                 retnode['language'] = 'udiff'
422.             elif 'language' in self.options:
423.                 retnode['language'] = self.options['language']
424.             if ('linenos' in self.options or 'lineno-start' in self.options or
425.                     'lineno-match' in self.options):
426.                 retnode['linenos'] = True
427.             retnode['classes'] += self.options.get('class', [])
428.             extra_args = retnode['highlight_args'] = {}
429.             if 'emphasize-lines' in self.options:
430.                 hl_lines = parselinenos(self.options['emphasize-lines'], lines)
431.                 if any(i >= lines for i in hl_lines):
432.                     logger.warning(__('line number spec is out of range(1-%d): %r') %
433.                                    (lines, self.options['emphasize-lines']),
434.                                    location=location)
435.                 extra_args['hl_lines'] = [x + 1 for x in hl_lines if x < lines]
436.             extra_args['linenostart'] = reader.lineno_start
437. 
438.             if 'caption' in self.options:
439.                 caption = self.options['caption'] or self.arguments[0]
440.                 retnode = container_wrapper(self, retnode, caption)
441. 
442.             # retnode will be note_implicit_target that is linked from caption and numref.
443.             # when options['name'] is provided, it should be primary ID.
444.             self.add_name(retnode)
445. 
446.             return [retnode]
447.         except Exception as exc:
448.             return [document.reporter.warning(exc, line=self.lineno)]
449. 
450. 
451. def setup(app: "Sphinx") -> Dict[str, Any]:
452.     directives.register_directive('highlight', Highlight)
453.     directives.register_directive('code-block', CodeBlock)
454.     directives.register_directive('sourcecode', CodeBlock)
455.     directives.register_directive('literalinclude', LiteralInclude)
456. 
457.     return {
458.         'version': 'builtin',
459.         'parallel_read_safe': True,
460.         'parallel_write_safe': True,
461.     }


File: sphinx/util/docutils.py
Line number range: 57 - 59
Content:
def is_directive_registered(name: str) -> bool:
    """Check the *name* directive is already registered."""
    return name in directives._directives  # type: ignore


File: sphinx/util/docutils.py
Line number range: 71 - 73
Content:
def is_role_registered(name: str) -> bool:
    """Check the *name* role is already registered."""
    return name in roles._roles  # type: ignore


File: sphinx/util/docutils.py
Line number range: 85 - 87
Content:
def unregister_role(name: str) -> None:
    """Unregister a role from docutils."""
    roles._roles.pop(name, None)  # type: ignore


File: sphinx/util/docutils.py
Line number range: 90 - 92
Content:
def is_node_registered(node: Type[Element]) -> bool:
    """Check the *node* is already registered."""
    return hasattr(nodes.GenericNodeVisitor, 'visit_' + node.__name__)


File: sphinx/util/docutils.py
Line number range: 314 - 315
Content:
def is_html5_writer_available() -> bool:
    return __version_info__ > (0, 13, 0)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 10:20:00,672 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants the `dedent_lines` function.\n   - This context contains the full implementation of the `dedent_lines` function.\n2. Extended relevance:\n   - The function is directly used by the `LiteralIncludeReader` to handle the `dedent` option, which is a core part of the query's purpose.", relative_path='sphinx/directives/code.py', start_line=51, end_line=65), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user specifically requested the `LiteralIncludeReader` class.\n   - This context provides the complete definition of the `LiteralIncludeReader` class.\n2. Extended relevance:\n   - This class is responsible for reading the content of the included file and applying all the options like `dedent`, `lines`, `start-after`, etc. It is essential for understanding how the `literalinclude` directive processes its options.', relative_path='sphinx/directives/code.py', start_line=172, end_line=361), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user specifically requested the `LiteralInclude` class.\n   - This context provides the complete definition of the `LiteralInclude` directive class.\n2. Extended relevance:\n   - This class defines the `literalinclude` directive, its options, and its `run` method which orchestrates the file reading and processing via `LiteralIncludeReader`. It's the entry point for the functionality the user is interested in.", relative_path='sphinx/directives/code.py', start_line=364, end_line=449)]
2025-12-23 10:20:00,674 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 3 contexts to memory for query: Please provide the full content of `sphinx/directives/code.py` and the `dedent_lines` function from `sphinx/util/docutils.py`.
2025-12-23 10:20:00,674 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 10:20:00,674 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 10:20:00,674 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 3 new contexts to 0 existing contexts
2025-12-23 10:20:00,674 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-23 10:20:00,675 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── create-release.yml
|       ├── docutils-latest.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── automatic-doc-generation.rst
|   |   ├── deploying.rst
|   |   ├── describing-code.rst
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── _sphinx_javascript_frameworks_compat.js
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── dedent.rst
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-extlinks-hardcoded-urls
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-extlinks-hardcoded-urls-multiple-replacements
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-intersphinx-role
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── noqa.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-documents_exclude
|   |   |   ├── br0ken_link.rst
|   |   |   ├── broken_link.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_extlinks.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_extension.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    └── doclinter.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Use of literalinclude prepend results in incorrect indent formatting for code eamples

Description: ### Describe the bug

Cannot determine a mechanism to use literalinclude directive with `prepend` or `append` to match code example indentation, as leading whitespace is removed.

### How to Reproduce

Example of including xml snippet, that should be prefixed with ``     <plugin>``.

File ``index.rst``:

``` rst
# hello world

Code examples:

.. literalinclude:: pom.xml
   :language: xml
   :prepend:       </plugin>
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-at: </plugin>
```

File `pom.xml``:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.0</version>
        <configuration>
          <source>1.8</source>
          <target>1.8</target>
          <debug>true</debug>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin>
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
```

Produces the following valid xml, which is indented poorly:
```xml
<plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
   ```
   
 I cannot think of good warning free way to indent `:prepend:` to match the included code example.

### Expected behavior

Expect leading white space to be preserved in output:

```xml
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
```

### Your project

https://github.com/geoserver/geoserver/tree/main/doc/en/developer/source

### Screenshots

_No response_

### OS

Mac

### Python version

3.9.10

### Sphinx version

4.4.0

### Sphinx extensions

['sphinx.ext.todo', 'sphinx.ext.extlinks']

### Extra tools

_No response_

### Additional context

Using `dedent` creatively almost provides a workaround:

``` rst
.. literalinclude:: pom.xml
   :language: xml
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-before: </plugin>
   :prepend: _____</plugin>
   :dedent: 5
```

Produces a warning, which fails the build with ``-W`` build policy.
```
index.rst.rst:155: WARNING: non-whitespace stripped by dedent
```

Use of `dedent` could be a good solution, if `dedent` was applied only to the literalinclude and not to the `prepend` and `append` content.

Patch information:
diff --git a/sphinx/directives/code.py b/sphinx/directives/code.py
index dc44ed314..9f359c0eb 100644
--- a/sphinx/directives/code.py
+++ b/sphinx/directives/code.py
@@ -343,6 +343,7 @@ class LiteralIncludeReader:
     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         prepend = self.options.get('prepend')
         if prepend:
+            # Preserve the leading whitespace in the prepend text
             lines.insert(0, prepend + '\n')
 
         return lines
@@ -350,13 +351,36 @@ class LiteralIncludeReader:
     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         append = self.options.get('append')
         if append:
+            # Preserve the leading whitespace in the append text
             lines.append(append + '\n')
 
         return lines
 
     def dedent_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         if 'dedent' in self.options:
-            return dedent_lines(lines, self.options.get('dedent'), location=location)
+            # Check if we have prepend/append content
+            has_prepend = 'prepend' in self.options
+            has_append = 'append' in self.options
+            
+            # If we have prepend/append, only dedent the included file content
+            if has_prepend or has_append:
+                # Find the range of lines that are from the included file
+                start = 1 if has_prepend else 0
+                end = len(lines) - 1 if has_append else len(lines)
+                
+                # Split into prepend, included content, and append
+                pre_lines = lines[:start] if has_prepend else []
+                included_lines = lines[start:end]
+                post_lines = lines[end:] if has_append else []
+                
+                # Only dedent the included content
+                dedented_included = dedent_lines(included_lines, self.options.get('dedent'), location=location)
+                
+                # Recombine all parts
+                return pre_lines + dedented_included + post_lines
+            else:
+                # No prepend/append, dedent everything as before
+                return dedent_lines(lines, self.options.get('dedent'), location=location)
         else:
             return lines
 


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `sphinx/directives/code.py` and the `dedent_lines` function from `sphinx/util/docutils.py`.
Extra Requirements: Please prioritize providing the `LiteralInclude` and `LiteralIncludeReader` classes from `sphinx/directives/code.py`, and just the `dedent_lines` function from `sphinx/util/docutils.py`.
Purpose: This context is necessary to understand how `literalinclude` options are processed and how text is dedented, which is crucial for fixing the reported indentation issue.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sphinx/directives/code.py
Line number range: 51 - 65
Content:
51. def dedent_lines(lines: List[str], dedent: int, location: Tuple[str, int] = None) -> List[str]:
52.     if dedent is None:
53.         return textwrap.dedent(''.join(lines)).splitlines(True)
54. 
55.     if any(s[:dedent].strip() for s in lines):
56.         logger.warning(__('non-whitespace stripped by dedent'), location=location)
57. 
58.     new_lines = []
59.     for line in lines:
60.         new_line = line[dedent:]
61.         if line.endswith('\n') and not new_line:
62.             new_line = '\n'  # keep CRLF
63.         new_lines.append(new_line)
64. 
65.     return new_lines


File: sphinx/directives/code.py
Line number range: 172 - 361
Content:
172. class LiteralIncludeReader:
173.     INVALID_OPTIONS_PAIR = [
174.         ('lineno-match', 'lineno-start'),
175.         ('lineno-match', 'append'),
176.         ('lineno-match', 'prepend'),
177.         ('start-after', 'start-at'),
178.         ('end-before', 'end-at'),
179.         ('diff', 'pyobject'),
180.         ('diff', 'lineno-start'),
181.         ('diff', 'lineno-match'),
182.         ('diff', 'lines'),
183.         ('diff', 'start-after'),
184.         ('diff', 'end-before'),
185.         ('diff', 'start-at'),
186.         ('diff', 'end-at'),
187.     ]
188. 
189.     def __init__(self, filename: str, options: Dict, config: Config) -> None:
190.         self.filename = filename
191.         self.options = options
192.         self.encoding = options.get('encoding', config.source_encoding)
193.         self.lineno_start = self.options.get('lineno-start', 1)
194. 
195.         self.parse_options()
196. 
197.     def parse_options(self) -> None:
198.         for option1, option2 in self.INVALID_OPTIONS_PAIR:
199.             if option1 in self.options and option2 in self.options:
200.                 raise ValueError(__('Cannot use both "%s" and "%s" options') %
201.                                  (option1, option2))
202. 
203.     def read_file(self, filename: str, location: Tuple[str, int] = None) -> List[str]:
204.         try:
205.             with open(filename, encoding=self.encoding, errors='strict') as f:
206.                 text = f.read()
207.                 if 'tab-width' in self.options:
208.                     text = text.expandtabs(self.options['tab-width'])
209. 
210.                 return text.splitlines(True)
211.         except OSError as exc:
212.             raise OSError(__('Include file %r not found or reading it failed') %
213.                           filename) from exc
214.         except UnicodeError as exc:
215.             raise UnicodeError(__('Encoding %r used for reading included file %r seems to '
216.                                   'be wrong, try giving an :encoding: option') %
217.                                (self.encoding, filename)) from exc
218. 
219.     def read(self, location: Tuple[str, int] = None) -> Tuple[str, int]:
220.         if 'diff' in self.options:
221.             lines = self.show_diff()
222.         else:
223.             filters = [self.pyobject_filter,
224.                        self.start_filter,
225.                        self.end_filter,
226.                        self.lines_filter,
227.                        self.prepend_filter,
228.                        self.append_filter,
229.                        self.dedent_filter]
230.             lines = self.read_file(self.filename, location=location)
231.             for func in filters:
232.                 lines = func(lines, location=location)
233. 
234.         return ''.join(lines), len(lines)
235. 
236.     def show_diff(self, location: Tuple[str, int] = None) -> List[str]:
237.         new_lines = self.read_file(self.filename)
238.         old_filename = self.options.get('diff')
239.         old_lines = self.read_file(old_filename)
240.         diff = unified_diff(old_lines, new_lines, old_filename, self.filename)
241.         return list(diff)
242. 
243.     def pyobject_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
244.         pyobject = self.options.get('pyobject')
245.         if pyobject:
246.             from sphinx.pycode import ModuleAnalyzer
247.             analyzer = ModuleAnalyzer.for_file(self.filename, '')
248.             tags = analyzer.find_tags()
249.             if pyobject not in tags:
250.                 raise ValueError(__('Object named %r not found in include file %r') %
251.                                  (pyobject, self.filename))
252.             else:
253.                 start = tags[pyobject][1]
254.                 end = tags[pyobject][2]
255.                 lines = lines[start - 1:end]
256.                 if 'lineno-match' in self.options:
257.                     self.lineno_start = start
258. 
259.         return lines
260. 
261.     def lines_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
262.         linespec = self.options.get('lines')
263.         if linespec:
264.             linelist = parselinenos(linespec, len(lines))
265.             if any(i >= len(lines) for i in linelist):
266.                 logger.warning(__('line number spec is out of range(1-%d): %r') %
267.                                (len(lines), linespec), location=location)
268. 
269.             if 'lineno-match' in self.options:
270.                 # make sure the line list is not "disjoint".
271.                 first = linelist[0]
272.                 if all(first + i == n for i, n in enumerate(linelist)):
273.                     self.lineno_start += linelist[0]
274.                 else:
275.                     raise ValueError(__('Cannot use "lineno-match" with a disjoint '
276.                                         'set of "lines"'))
277. 
278.             lines = [lines[n] for n in linelist if n < len(lines)]
279.             if lines == []:
280.                 raise ValueError(__('Line spec %r: no lines pulled from include file %r') %
281.                                  (linespec, self.filename))
282. 
283.         return lines
284. 
285.     def start_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
286.         if 'start-at' in self.options:
287.             start = self.options.get('start-at')
288.             inclusive = False
289.         elif 'start-after' in self.options:
290.             start = self.options.get('start-after')
291.             inclusive = True
292.         else:
293.             start = None
294. 
295.         if start:
296.             for lineno, line in enumerate(lines):
297.                 if start in line:
298.                     if inclusive:
299.                         if 'lineno-match' in self.options:
300.                             self.lineno_start += lineno + 1
301. 
302.                         return lines[lineno + 1:]
303.                     else:
304.                         if 'lineno-match' in self.options:
305.                             self.lineno_start += lineno
306. 
307.                         return lines[lineno:]
308. 
309.             if inclusive is True:
310.                 raise ValueError('start-after pattern not found: %s' % start)
311.             else:
312.                 raise ValueError('start-at pattern not found: %s' % start)
313. 
314.         return lines
315. 
316.     def end_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
317.         if 'end-at' in self.options:
318.             end = self.options.get('end-at')
319.             inclusive = True
320.         elif 'end-before' in self.options:
321.             end = self.options.get('end-before')
322.             inclusive = False
323.         else:
324.             end = None
325. 
326.         if end:
327.             for lineno, line in enumerate(lines):
328.                 if end in line:
329.                     if inclusive:
330.                         return lines[:lineno + 1]
331.                     else:
332.                         if lineno == 0:
333.                             pass  # end-before ignores first line
334.                         else:
335.                             return lines[:lineno]
336.             if inclusive is True:
337.                 raise ValueError('end-at pattern not found: %s' % end)
338.             else:
339.                 raise ValueError('end-before pattern not found: %s' % end)
340. 
341.         return lines
342. 
343.     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
344.         prepend = self.options.get('prepend')
345.         if prepend:
346.             lines.insert(0, prepend + '\n')
347. 
348.         return lines
349. 
350.     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
351.         append = self.options.get('append')
352.         if append:
353.             lines.append(append + '\n')
354. 
355.         return lines
356. 
357.     def dedent_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
358.         if 'dedent' in self.options:
359.             return dedent_lines(lines, self.options.get('dedent'), location=location)
360.         else:
361.             return lines


File: sphinx/directives/code.py
Line number range: 364 - 449
Content:
364. class LiteralInclude(SphinxDirective):
365.     """
366.     Like ``.. include:: :literal:``, but only warns if the include file is
367.     not found, and does not raise errors.  Also has several options for
368.     selecting what to include.
369.     """
370. 
371.     has_content = False
372.     required_arguments = 1
373.     optional_arguments = 0
374.     final_argument_whitespace = True
375.     option_spec: OptionSpec = {
376.         'dedent': optional_int,
377.         'linenos': directives.flag,
378.         'lineno-start': int,
379.         'lineno-match': directives.flag,
380.         'tab-width': int,
381.         'language': directives.unchanged_required,
382.         'force': directives.flag,
383.         'encoding': directives.encoding,
384.         'pyobject': directives.unchanged_required,
385.         'lines': directives.unchanged_required,
386.         'start-after': directives.unchanged_required,
387.         'end-before': directives.unchanged_required,
388.         'start-at': directives.unchanged_required,
389.         'end-at': directives.unchanged_required,
390.         'prepend': directives.unchanged_required,
391.         'append': directives.unchanged_required,
392.         'emphasize-lines': directives.unchanged_required,
393.         'caption': directives.unchanged,
394.         'class': directives.class_option,
395.         'name': directives.unchanged,
396.         'diff': directives.unchanged_required,
397.     }
398. 
399.     def run(self) -> List[Node]:
400.         document = self.state.document
401.         if not document.settings.file_insertion_enabled:
402.             return [document.reporter.warning('File insertion disabled',
403.                                               line=self.lineno)]
404.         # convert options['diff'] to absolute path
405.         if 'diff' in self.options:
406.             _, path = self.env.relfn2path(self.options['diff'])
407.             self.options['diff'] = path
408. 
409.         try:
410.             location = self.state_machine.get_source_and_line(self.lineno)
411.             rel_filename, filename = self.env.relfn2path(self.arguments[0])
412.             self.env.note_dependency(rel_filename)
413. 
414.             reader = LiteralIncludeReader(filename, self.options, self.config)
415.             text, lines = reader.read(location=location)
416. 
417.             retnode: Element = nodes.literal_block(text, text, source=filename)
418.             retnode['force'] = 'force' in self.options
419.             self.set_source_info(retnode)
420.             if self.options.get('diff'):  # if diff is set, set udiff
421.                 retnode['language'] = 'udiff'
422.             elif 'language' in self.options:
423.                 retnode['language'] = self.options['language']
424.             if ('linenos' in self.options or 'lineno-start' in self.options or
425.                     'lineno-match' in self.options):
426.                 retnode['linenos'] = True
427.             retnode['classes'] += self.options.get('class', [])
428.             extra_args = retnode['highlight_args'] = {}
429.             if 'emphasize-lines' in self.options:
430.                 hl_lines = parselinenos(self.options['emphasize-lines'], lines)
431.                 if any(i >= lines for i in hl_lines):
432.                     logger.warning(__('line number spec is out of range(1-%d): %r') %
433.                                    (lines, self.options['emphasize-lines']),
434.                                    location=location)
435.                 extra_args['hl_lines'] = [x + 1 for x in hl_lines if x < lines]
436.             extra_args['linenostart'] = reader.lineno_start
437. 
438.             if 'caption' in self.options:
439.                 caption = self.options['caption'] or self.arguments[0]
440.                 retnode = container_wrapper(self, retnode, caption)
441. 
442.             # retnode will be note_implicit_target that is linked from caption and numref.
443.             # when options['name'] is provided, it should be primary ID.
444.             self.add_name(retnode)
445. 
446.             return [retnode]
447.         except Exception as exc:
448.             return [document.reporter.warning(exc, line=self.lineno)]
449. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 10:21:22,390 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's issue involves two related problems: 1) leading whitespace being stripped from the `prepend` option's value, and 2) the `dedent` option affecting the prepended line. The provided context covering `sphinx/directives/code.py` is sufficient to understand and address the second problem, as shown by the user's patch. However, the first and primary problem—whitespace stripping—is likely happening at the docutils parsing level. To investigate this, I need to see how Sphinx's `LiteralInclude` directive, which inherits from `SphinxDirective`, handles its options. The `SphinxDirective` class is defined in `sphinx/util/docutils.py`, making this file essential for a complete diagnosis and solution." query='Please provide the full content of sphinx/util/docutils.py.' extra_requirements='Please ensure the content of the `SphinxDirective` class is included.' purpose="This file is crucial for understanding how Sphinx's directives interact with docutils for option parsing, which will help determine why whitespace is being stripped from the `prepend` option and how to properly fix the fix the issue."
2025-12-23 10:21:22,391 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of sphinx/util/docutils.py.
2025-12-23 10:21:22,392 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 10:21:22,392 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 10:21:22,393 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 10:21:22,393 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of sphinx/util/docutils.py.
Extra requirements: Please ensure the content of the `SphinxDirective` class is included.
Purpose: This file is crucial for understanding how Sphinx's directives interact with docutils for option parsing, which will help determine why whitespace is being stripped from the `prepend` option and how to properly fix the fix the issue.
2025-12-23 10:21:26,068 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first locate the `sphinx/util/docutils.py` file to confirm its existence and then read its entire content to provide you with the complete code. This will ensure you have the full context of the file, including the `SphinxDirective` class, to analyze the option parsing behavior.' additional_kwargs={'function_call': {'name': 'find_file_node_with_relative_path', 'arguments': '{"relative_path": "sphinx/util/docutils.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2118, 'candidates_token_count': 84, 'total_token_count': 2418, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2118}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 84}], 'thoughts_token_count': 216, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.23397706803821383, 'model_name': 'gemini-2.5-pro'} id='run--9913f156-c8ad-44c8-a5b0-13af327d52ce-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'sphinx/util/docutils.py'}, 'id': 'fb20dd45-bc89-438b-8d86-f43cd8f9d262', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2118, 'output_tokens': 84, 'total_tokens': 2418, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 216}}
2025-12-23 10:21:28,020 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have located the file `sphinx/util/docutils.py` and will now read its contents. This will give you the complete source code of the file, including the `SphinxDirective` class as you requested.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sphinx/util/docutils.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2260, 'candidates_token_count': 68, 'total_token_count': 2382, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2260}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 68}], 'thoughts_token_count': 54, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.11856149224674001, 'model_name': 'gemini-2.5-pro'} id='run--33cf8744-1c17-4754-8d19-b05dc57cdf7f-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sphinx/util/docutils.py'}, 'id': 'b0dc1b58-6ce7-49ad-9a4b-4f901b7d59aa', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2260, 'output_tokens': 68, 'total_tokens': 2382, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 54}}
2025-12-23 10:21:31,293 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the initial 500 lines of `sphinx/util/docutils.py`, which includes the beginning of the `SphinxDirective` class definition. Since the file is longer than 500 lines, I will continue to read the remainder of the file to provide you with its complete content.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "sphinx/util/docutils.py", "end_line": 1001.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9561, 'candidates_token_count': 94, 'total_token_count': 9755, 'cached_content_token_count': 1833, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9561}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1833}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 94}], 'thoughts_token_count': 100}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22261710877114155, 'model_name': 'gemini-2.5-pro'} id='run--07e53c02-b817-4fcc-8ad9-e7136d6af725-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'sphinx/util/docutils.py', 'end_line': 1001.0}, 'id': '2cea9ed4-c7e5-42c5-a9fc-4d2aefa51a01', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9561, 'output_tokens': 94, 'total_tokens': 9755, 'input_token_details': {'cache_read': 1833}, 'output_token_details': {'reasoning': 100}}
2025-12-23 10:21:34,280 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of `sphinx/util/docutils.py` for you. The file was read in two parts to ensure the full content was captured, and it is now fully displayed. This will allow you to analyze the complete code, including the `SphinxDirective` class and its methods, to understand the directive option parsing and address the issue with whitespace handling in the `prepend` option.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10833, 'candidates_token_count': 85, 'total_token_count': 10987, 'cached_content_token_count': 9225, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10833}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9225}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 69}, 'finish_reason': 'STOP', 'avg_logprobs': -0.26207519980037913, 'model_name': 'gemini-2.5-pro'} id='run--967cf4ee-9eca-4afb-93fb-71604e494496-0' usage_metadata={'input_tokens': 10833, 'output_tokens': 85, 'total_tokens': 10987, 'input_token_details': {'cache_read': 9225}, 'output_token_details': {'reasoning': 69}}
2025-12-23 10:21:34,282 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of sphinx/util/docutils.py.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
Please ensure the content of the `SphinxDirective` class is included.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This file is crucial for understanding how Sphinx's directives interact with docutils for option parsing, which will help determine why whitespace is being stripped from the `prepend` option and how to properly fix the fix the issue.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sphinx/util/docutils.py
Line number range: 1 - 500
Content:
1. """Utility functions for docutils."""
2. 
3. import os
4. import re
5. from contextlib import contextmanager
6. from copy import copy
7. from os import path
8. from types import ModuleType
9. from typing import (IO, TYPE_CHECKING, Any, Callable, Dict, Generator, List, Optional, Set,
10.                     Tuple, Type, cast)
11. 
12. import docutils
13. from docutils import nodes
14. from docutils.io import FileOutput
15. from docutils.nodes import Element, Node, system_message
16. from docutils.parsers.rst import Directive, directives, roles
17. from docutils.parsers.rst.states import Inliner
18. from docutils.statemachine import State, StateMachine, StringList
19. from docutils.utils import Reporter, unescape
20. from packaging import version
21. 
22. from sphinx.errors import SphinxError
23. from sphinx.locale import _, __
24. from sphinx.util import logging
25. from sphinx.util.typing import RoleFunction
26. 
27. logger = logging.getLogger(__name__)
28. report_re = re.compile('^(.+?:(?:\\d+)?): \\((DEBUG|INFO|WARNING|ERROR|SEVERE)/(\\d+)?\\) ')
29. 
30. if TYPE_CHECKING:
31.     from sphinx.builders import Builder
32.     from sphinx.config import Config
33.     from sphinx.environment import BuildEnvironment
34. 
35. 
36. __version_info__ = version.parse(docutils.__version__).release
37. additional_nodes: Set[Type[Element]] = set()
38. 
39. 
40. @contextmanager
41. def docutils_namespace() -> Generator[None, None, None]:
42.     """Create namespace for reST parsers."""
43.     try:
44.         _directives = copy(directives._directives)  # type: ignore
45.         _roles = copy(roles._roles)  # type: ignore
46. 
47.         yield
48.     finally:
49.         directives._directives = _directives  # type: ignore
50.         roles._roles = _roles  # type: ignore
51. 
52.         for node in list(additional_nodes):
53.             unregister_node(node)
54.             additional_nodes.discard(node)
55. 
56. 
57. def is_directive_registered(name: str) -> bool:
58.     """Check the *name* directive is already registered."""
59.     return name in directives._directives  # type: ignore
60. 
61. 
62. def register_directive(name: str, directive: Type[Directive]) -> None:
63.     """Register a directive to docutils.
64. 
65.     This modifies global state of docutils.  So it is better to use this
66.     inside ``docutils_namespace()`` to prevent side-effects.
67.     """
68.     directives.register_directive(name, directive)
69. 
70. 
71. def is_role_registered(name: str) -> bool:
72.     """Check the *name* role is already registered."""
73.     return name in roles._roles  # type: ignore
74. 
75. 
76. def register_role(name: str, role: RoleFunction) -> None:
77.     """Register a role to docutils.
78. 
79.     This modifies global state of docutils.  So it is better to use this
80.     inside ``docutils_namespace()`` to prevent side-effects.
81.     """
82.     roles.register_local_role(name, role)
83. 
84. 
85. def unregister_role(name: str) -> None:
86.     """Unregister a role from docutils."""
87.     roles._roles.pop(name, None)  # type: ignore
88. 
89. 
90. def is_node_registered(node: Type[Element]) -> bool:
91.     """Check the *node* is already registered."""
92.     return hasattr(nodes.GenericNodeVisitor, 'visit_' + node.__name__)
93. 
94. 
95. def register_node(node: Type[Element]) -> None:
96.     """Register a node to docutils.
97. 
98.     This modifies global state of some visitors.  So it is better to use this
99.     inside ``docutils_namespace()`` to prevent side-effects.
100.     """
101.     if not hasattr(nodes.GenericNodeVisitor, 'visit_' + node.__name__):
102.         nodes._add_node_class_names([node.__name__])  # type: ignore
103.         additional_nodes.add(node)
104. 
105. 
106. def unregister_node(node: Type[Element]) -> None:
107.     """Unregister a node from docutils.
108. 
109.     This is inverse of ``nodes._add_nodes_class_names()``.
110.     """
111.     if hasattr(nodes.GenericNodeVisitor, 'visit_' + node.__name__):
112.         delattr(nodes.GenericNodeVisitor, "visit_" + node.__name__)
113.         delattr(nodes.GenericNodeVisitor, "depart_" + node.__name__)
114.         delattr(nodes.SparseNodeVisitor, 'visit_' + node.__name__)
115.         delattr(nodes.SparseNodeVisitor, 'depart_' + node.__name__)
116. 
117. 
118. @contextmanager
119. def patched_get_language() -> Generator[None, None, None]:
120.     """Patch docutils.languages.get_language() temporarily.
121. 
122.     This ignores the second argument ``reporter`` to suppress warnings.
123.     refs: https://github.com/sphinx-doc/sphinx/issues/3788
124.     """
125.     from docutils.languages import get_language
126. 
127.     def patched_get_language(language_code: str, reporter: Reporter = None) -> Any:
128.         return get_language(language_code)
129. 
130.     try:
131.         docutils.languages.get_language = patched_get_language
132.         yield
133.     finally:
134.         # restore original implementations
135.         docutils.languages.get_language = get_language
136. 
137. 
138. @contextmanager
139. def patched_rst_get_language() -> Generator[None, None, None]:
140.     """Patch docutils.parsers.rst.languages.get_language().
141.     Starting from docutils 0.17, get_language() in ``rst.languages``
142.     also has a reporter, which needs to be disabled temporarily.
143. 
144.     This should also work for old versions of docutils,
145.     because reporter is none by default.
146. 
147.     refs: https://github.com/sphinx-doc/sphinx/issues/10179
148.     """
149.     from docutils.parsers.rst.languages import get_language
150. 
151.     def patched_get_language(language_code: str, reporter: Reporter = None) -> Any:
152.         return get_language(language_code)
153. 
154.     try:
155.         docutils.parsers.rst.languages.get_language = patched_get_language
156.         yield
157.     finally:
158.         # restore original implementations
159.         docutils.parsers.rst.languages.get_language = get_language
160. 
161. 
162. @contextmanager
163. def using_user_docutils_conf(confdir: Optional[str]) -> Generator[None, None, None]:
164.     """Let docutils know the location of ``docutils.conf`` for Sphinx."""
165.     try:
166.         docutilsconfig = os.environ.get('DOCUTILSCONFIG', None)
167.         if confdir:
168.             os.environ['DOCUTILSCONFIG'] = path.join(path.abspath(confdir), 'docutils.conf')
169. 
170.         yield
171.     finally:
172.         if docutilsconfig is None:
173.             os.environ.pop('DOCUTILSCONFIG', None)
174.         else:
175.             os.environ['DOCUTILSCONFIG'] = docutilsconfig
176. 
177. 
178. @contextmanager
179. def patch_docutils(confdir: Optional[str] = None) -> Generator[None, None, None]:
180.     """Patch to docutils temporarily."""
181.     with patched_get_language(), patched_rst_get_language(), using_user_docutils_conf(confdir):
182.         yield
183. 
184. 
185. class CustomReSTDispatcher:
186.     """Custom reST's mark-up dispatcher.
187. 
188.     This replaces docutils's directives and roles dispatch mechanism for reST parser
189.     by original one temporarily.
190.     """
191. 
192.     def __init__(self) -> None:
193.         self.directive_func: Callable = lambda *args: (None, [])
194.         self.roles_func: Callable = lambda *args: (None, [])
195. 
196.     def __enter__(self) -> None:
197.         self.enable()
198. 
199.     def __exit__(self, exc_type: Type[Exception], exc_value: Exception, traceback: Any) -> None:  # NOQA
200.         self.disable()
201. 
202.     def enable(self) -> None:
203.         self.directive_func = directives.directive
204.         self.role_func = roles.role
205. 
206.         directives.directive = self.directive
207.         roles.role = self.role
208. 
209.     def disable(self) -> None:
210.         directives.directive = self.directive_func
211.         roles.role = self.role_func
212. 
213.     def directive(self,
214.                   directive_name: str, language_module: ModuleType, document: nodes.document
215.                   ) -> Tuple[Optional[Type[Directive]], List[system_message]]:
216.         return self.directive_func(directive_name, language_module, document)
217. 
218.     def role(self, role_name: str, language_module: ModuleType, lineno: int, reporter: Reporter
219.              ) -> Tuple[RoleFunction, List[system_message]]:
220.         return self.role_func(role_name, language_module, lineno, reporter)
221. 
222. 
223. class ElementLookupError(Exception):
224.     pass
225. 
226. 
227. class sphinx_domains(CustomReSTDispatcher):
228.     """Monkey-patch directive and role dispatch, so that domain-specific
229.     markup takes precedence.
230.     """
231.     def __init__(self, env: "BuildEnvironment") -> None:
232.         self.env = env
233.         super().__init__()
234. 
235.     def lookup_domain_element(self, type: str, name: str) -> Any:
236.         """Lookup a markup element (directive or role), given its name which can
237.         be a full name (with domain).
238.         """
239.         name = name.lower()
240.         # explicit domain given?
241.         if ':' in name:
242.             domain_name, name = name.split(':', 1)
243.             if domain_name in self.env.domains:
244.                 domain = self.env.get_domain(domain_name)
245.                 element = getattr(domain, type)(name)
246.                 if element is not None:
247.                     return element, []
248.             else:
249.                 logger.warning(_('unknown directive or role name: %s:%s'), domain_name, name)
250.         # else look in the default domain
251.         else:
252.             def_domain = self.env.temp_data.get('default_domain')
253.             if def_domain is not None:
254.                 element = getattr(def_domain, type)(name)
255.                 if element is not None:
256.                     return element, []
257. 
258.         # always look in the std domain
259.         element = getattr(self.env.get_domain('std'), type)(name)
260.         if element is not None:
261.             return element, []
262. 
263.         raise ElementLookupError
264. 
265.     def directive(self,
266.                   directive_name: str, language_module: ModuleType, document: nodes.document
267.                   ) -> Tuple[Optional[Type[Directive]], List[system_message]]:
268.         try:
269.             return self.lookup_domain_element('directive', directive_name)
270.         except ElementLookupError:
271.             return super().directive(directive_name, language_module, document)
272. 
273.     def role(self, role_name: str, language_module: ModuleType, lineno: int, reporter: Reporter
274.              ) -> Tuple[RoleFunction, List[system_message]]:
275.         try:
276.             return self.lookup_domain_element('role', role_name)
277.         except ElementLookupError:
278.             return super().role(role_name, language_module, lineno, reporter)
279. 
280. 
281. class WarningStream:
282.     def write(self, text: str) -> None:
283.         matched = report_re.search(text)
284.         if not matched:
285.             logger.warning(text.rstrip("\r\n"))
286.         else:
287.             location, type, level = matched.groups()
288.             message = report_re.sub('', text).rstrip()
289.             logger.log(type, message, location=location)
290. 
291. 
292. class LoggingReporter(Reporter):
293.     @classmethod
294.     def from_reporter(cls, reporter: Reporter) -> "LoggingReporter":
295.         """Create an instance of LoggingReporter from other reporter object."""
296.         return cls(reporter.source, reporter.report_level, reporter.halt_level,
297.                    reporter.debug_flag, reporter.error_handler)
298. 
299.     def __init__(self, source: str, report_level: int = Reporter.WARNING_LEVEL,
300.                  halt_level: int = Reporter.SEVERE_LEVEL, debug: bool = False,
301.                  error_handler: str = 'backslashreplace') -> None:
302.         stream = cast(IO, WarningStream())
303.         super().__init__(source, report_level, halt_level,
304.                          stream, debug, error_handler=error_handler)
305. 
306. 
307. class NullReporter(Reporter):
308.     """A dummy reporter; write nothing."""
309. 
310.     def __init__(self) -> None:
311.         super().__init__('', 999, 4)
312. 
313. 
314. def is_html5_writer_available() -> bool:
315.     return __version_info__ > (0, 13, 0)
316. 
317. 
318. @contextmanager
319. def switch_source_input(state: State, content: StringList) -> Generator[None, None, None]:
320.     """Switch current source input of state temporarily."""
321.     try:
322.         # remember the original ``get_source_and_line()`` method
323.         get_source_and_line = state.memo.reporter.get_source_and_line  # type: ignore
324. 
325.         # replace it by new one
326.         state_machine = StateMachine([], None)
327.         state_machine.input_lines = content
328.         state.memo.reporter.get_source_and_line = state_machine.get_source_and_line  # type: ignore  # NOQA
329. 
330.         yield
331.     finally:
332.         # restore the method
333.         state.memo.reporter.get_source_and_line = get_source_and_line  # type: ignore
334. 
335. 
336. class SphinxFileOutput(FileOutput):
337.     """Better FileOutput class for Sphinx."""
338. 
339.     def __init__(self, **kwargs: Any) -> None:
340.         self.overwrite_if_changed = kwargs.pop('overwrite_if_changed', False)
341.         super().__init__(**kwargs)
342. 
343.     def write(self, data: str) -> str:
344.         if (self.destination_path and self.autoclose and 'b' not in self.mode and
345.                 self.overwrite_if_changed and os.path.exists(self.destination_path)):
346.             with open(self.destination_path, encoding=self.encoding) as f:
347.                 # skip writing: content not changed
348.                 if f.read() == data:
349.                     return data
350. 
351.         return super().write(data)
352. 
353. 
354. class SphinxDirective(Directive):
355.     """A base class for Sphinx directives.
356. 
357.     This class provides helper methods for Sphinx directives.
358. 
359.     .. note:: The subclasses of this class might not work with docutils.
360.               This class is strongly coupled with Sphinx.
361.     """
362. 
363.     @property
364.     def env(self) -> "BuildEnvironment":
365.         """Reference to the :class:`.BuildEnvironment` object."""
366.         return self.state.document.settings.env
367. 
368.     @property
369.     def config(self) -> "Config":
370.         """Reference to the :class:`.Config` object."""
371.         return self.env.config
372. 
373.     def get_source_info(self) -> Tuple[str, int]:
374.         """Get source and line number."""
375.         return self.state_machine.get_source_and_line(self.lineno)
376. 
377.     def set_source_info(self, node: Node) -> None:
378.         """Set source and line number to the node."""
379.         node.source, node.line = self.get_source_info()
380. 
381.     def get_location(self) -> str:
382.         """Get current location info for logging."""
383.         return ':'.join(str(s) for s in self.get_source_info())
384. 
385. 
386. class SphinxRole:
387.     """A base class for Sphinx roles.
388. 
389.     This class provides helper methods for Sphinx roles.
390. 
391.     .. note:: The subclasses of this class might not work with docutils.
392.               This class is strongly coupled with Sphinx.
393.     """
394.     name: str           #: The role name actually used in the document.
395.     rawtext: str        #: A string containing the entire interpreted text input.
396.     text: str           #: The interpreted text content.
397.     lineno: int         #: The line number where the interpreted text begins.
398.     inliner: Inliner    #: The ``docutils.parsers.rst.states.Inliner`` object.
399.     options: Dict       #: A dictionary of directive options for customization
400.                         #: (from the "role" directive).
401.     content: List[str]  #: A list of strings, the directive content for customization
402.                         #: (from the "role" directive).
403. 
404.     def __call__(self, name: str, rawtext: str, text: str, lineno: int,
405.                  inliner: Inliner, options: Dict = {}, content: List[str] = []
406.                  ) -> Tuple[List[Node], List[system_message]]:
407.         self.rawtext = rawtext
408.         self.text = unescape(text)
409.         self.lineno = lineno
410.         self.inliner = inliner
411.         self.options = options
412.         self.content = content
413. 
414.         # guess role type
415.         if name:
416.             self.name = name.lower()
417.         else:
418.             self.name = self.env.temp_data.get('default_role', '')
419.             if not self.name:
420.                 self.name = self.env.config.default_role
421.             if not self.name:
422.                 raise SphinxError('cannot determine default role!')
423. 
424.         return self.run()
425. 
426.     def run(self) -> Tuple[List[Node], List[system_message]]:
427.         raise NotImplementedError
428. 
429.     @property
430.     def env(self) -> "BuildEnvironment":
431.         """Reference to the :class:`.BuildEnvironment` object."""
432.         return self.inliner.document.settings.env
433. 
434.     @property
435.     def config(self) -> "Config":
436.         """Reference to the :class:`.Config` object."""
437.         return self.env.config
438. 
439.     def get_source_info(self, lineno: int = None) -> Tuple[str, int]:
440.         if lineno is None:
441.             lineno = self.lineno
442.         return self.inliner.reporter.get_source_and_line(lineno)  # type: ignore
443. 
444.     def set_source_info(self, node: Node, lineno: int = None) -> None:
445.         node.source, node.line = self.get_source_info(lineno)
446. 
447.     def get_location(self) -> str:
448.         """Get current location info for logging."""
449.         return ':'.join(str(s) for s in self.get_source_info())
450. 
451. 
452. class ReferenceRole(SphinxRole):
453.     """A base class for reference roles.
454. 
455.     The reference roles can accept ``link title <target>`` style as a text for
456.     the role.  The parsed result; link title and target will be stored to
457.     ``self.title`` and ``self.target``.
458.     """
459.     has_explicit_title: bool    #: A boolean indicates the role has explicit title or not.
460.     disabled: bool              #: A boolean indicates the reference is disabled.
461.     title: str                  #: The link title for the interpreted text.
462.     target: str                 #: The link target for the interpreted text.
463. 
464.     # \x00 means the "<" was backslash-escaped
465.     explicit_title_re = re.compile(r'^(.+?)\s*(?<!\x00)<(.*?)>$', re.DOTALL)
466. 
467.     def __call__(self, name: str, rawtext: str, text: str, lineno: int,
468.                  inliner: Inliner, options: Dict = {}, content: List[str] = []
469.                  ) -> Tuple[List[Node], List[system_message]]:
470.         # if the first character is a bang, don't cross-reference at all
471.         self.disabled = text.startswith('!')
472. 
473.         matched = self.explicit_title_re.match(text)
474.         if matched:
475.             self.has_explicit_title = True
476.             self.title = unescape(matched.group(1))
477.             self.target = unescape(matched.group(2))
478.         else:
479.             self.has_explicit_title = False
480.             self.title = unescape(text)
481.             self.target = unescape(text)
482. 
483.         return super().__call__(name, rawtext, text, lineno, inliner, options, content)
484. 
485. 
486. class SphinxTranslator(nodes.NodeVisitor):
487.     """A base class for Sphinx translators.
488. 
489.     This class adds a support for visitor/departure method for super node class
490.     if visitor/departure method for node class is not found.
491. 
492.     It also provides helper methods for Sphinx translators.
493. 
494.     .. note:: The subclasses of this class might not work with docutils.
495.               This class is strongly coupled with Sphinx.
496.     """
497. 
498.     def __init__(self, document: nodes.document, builder: "Builder") -> None:
499.         super().__init__(document)
500.         self.builder = builder


File: sphinx/util/docutils.py
Line number range: 501 - 1001
Content:
501.         self.config = builder.config
502.         self.settings = document.settings
503. 
504.     def dispatch_visit(self, node: Node) -> None:
505.         """
506.         Dispatch node to appropriate visitor method.
507.         The priority of visitor method is:
508. 
509.         1. ``self.visit_{node_class}()``
510.         2. ``self.visit_{super_node_class}()``
511.         3. ``self.unknown_visit()``
512.         """
513.         for node_class in node.__class__.__mro__:
514.             method = getattr(self, 'visit_%s' % (node_class.__name__), None)
515.             if method:
516.                 method(node)
517.                 break
518.         else:
519.             super().dispatch_visit(node)
520. 
521.     def dispatch_departure(self, node: Node) -> None:
522.         """
523.         Dispatch node to appropriate departure method.
524.         The priority of departure method is:
525. 
526.         1. ``self.depart_{node_class}()``
527.         2. ``self.depart_{super_node_class}()``
528.         3. ``self.unknown_departure()``
529.         """
530.         for node_class in node.__class__.__mro__:
531.             method = getattr(self, 'depart_%s' % (node_class.__name__), None)
532.             if method:
533.                 method(node)
534.                 break
535.         else:
536.             super().dispatch_departure(node)
537. 
538.     def unknown_visit(self, node: Node) -> None:
539.         logger.warning(__('unknown node type: %r'), node, location=node)
540. 
541. 
542. # Node.findall() is a new interface to traverse a doctree since docutils-0.18.
543. # This applies a patch docutils-0.17 or older to be available Node.findall()
544. # method to use it from our codebase.
545. if __version_info__ < (0, 18):
546.     def findall(self, *args, **kwargs):
547.         return iter(self.traverse(*args, **kwargs))
548. 
549.     Node.findall = findall  # type: ignore
550. 
551. 
552. # cache a vanilla instance of nodes.document
553. # Used in new_document() function
554. __document_cache__: Optional[nodes.document] = None
555. 
556. 
557. def new_document(source_path: str, settings: Any = None) -> nodes.document:
558.     """Return a new empty document object.  This is an alternative of docutils'.
559. 
560.     This is a simple wrapper for ``docutils.utils.new_document()``.  It
561.     caches the result of docutils' and use it on second call for instantiation.
562.     This makes an instantiation of document nodes much faster.
563.     """
564.     global __document_cache__
565.     if __document_cache__ is None:
566.         __document_cache__ = docutils.utils.new_document(source_path)
567. 
568.     if settings is None:
569.         # Make a copy of ``settings`` from cache to accelerate instantiation
570.         settings = copy(__document_cache__.settings)
571. 
572.     # Create a new instance of nodes.document using cached reporter
573.     from sphinx import addnodes
574.     document = addnodes.document(settings, __document_cache__.reporter, source=source_path)
575.     document.note_source(source_path, -1)
576.     return document

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 10:21:41,940 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user has requested the full content of the file `sphinx/util/docutils.py`. The provided context contains the file's content from line 1 to 576. This range includes the `SphinxDirective` class, which was specifically requested. Therefore, to fulfill the user's request, I am selecting the entire file content.", relative_path='sphinx/util/docutils.py', start_line=1, end_line=576)]
2025-12-23 10:21:41,942 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of sphinx/util/docutils.py.
2025-12-23 10:21:41,942 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 10:21:41,942 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 10:21:41,943 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 3 existing contexts
2025-12-23 10:21:41,943 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-23 10:21:41,944 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── create-release.yml
|       ├── docutils-latest.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── automatic-doc-generation.rst
|   |   ├── deploying.rst
|   |   ├── describing-code.rst
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── _sphinx_javascript_frameworks_compat.js
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── dedent.rst
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-extlinks-hardcoded-urls
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-extlinks-hardcoded-urls-multiple-replacements
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-intersphinx-role
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── noqa.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-documents_exclude
|   |   |   ├── br0ken_link.rst
|   |   |   ├── broken_link.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_extlinks.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_extension.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    └── doclinter.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Use of literalinclude prepend results in incorrect indent formatting for code eamples

Description: ### Describe the bug

Cannot determine a mechanism to use literalinclude directive with `prepend` or `append` to match code example indentation, as leading whitespace is removed.

### How to Reproduce

Example of including xml snippet, that should be prefixed with ``     <plugin>``.

File ``index.rst``:

``` rst
# hello world

Code examples:

.. literalinclude:: pom.xml
   :language: xml
   :prepend:       </plugin>
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-at: </plugin>
```

File `pom.xml``:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.0</version>
        <configuration>
          <source>1.8</source>
          <target>1.8</target>
          <debug>true</debug>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin>
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
```

Produces the following valid xml, which is indented poorly:
```xml
<plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
   ```
   
 I cannot think of good warning free way to indent `:prepend:` to match the included code example.

### Expected behavior

Expect leading white space to be preserved in output:

```xml
      <plugin>
        <groupId>com.github.ekryd.sortpom</groupId>
        <artifactId>sortpom-maven-plugin</artifactId>
        <version>2.15.0</version>
        <configuration>
          <verifyFailOn>strict</verifyFailOn>
        </configuration>
      </plugin>
```

### Your project

https://github.com/geoserver/geoserver/tree/main/doc/en/developer/source

### Screenshots

_No response_

### OS

Mac

### Python version

3.9.10

### Sphinx version

4.4.0

### Sphinx extensions

['sphinx.ext.todo', 'sphinx.ext.extlinks']

### Extra tools

_No response_

### Additional context

Using `dedent` creatively almost provides a workaround:

``` rst
.. literalinclude:: pom.xml
   :language: xml
   :start-at: <groupId>com.github.ekryd.sortpom</groupId>
   :end-before: </plugin>
   :prepend: _____</plugin>
   :dedent: 5
```

Produces a warning, which fails the build with ``-W`` build policy.
```
index.rst.rst:155: WARNING: non-whitespace stripped by dedent
```

Use of `dedent` could be a good solution, if `dedent` was applied only to the literalinclude and not to the `prepend` and `append` content.

Patch information:
diff --git a/sphinx/directives/code.py b/sphinx/directives/code.py
index dc44ed314..9f359c0eb 100644
--- a/sphinx/directives/code.py
+++ b/sphinx/directives/code.py
@@ -343,6 +343,7 @@ class LiteralIncludeReader:
     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         prepend = self.options.get('prepend')
         if prepend:
+            # Preserve the leading whitespace in the prepend text
             lines.insert(0, prepend + '\n')
 
         return lines
@@ -350,13 +351,36 @@ class LiteralIncludeReader:
     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         append = self.options.get('append')
         if append:
+            # Preserve the leading whitespace in the append text
             lines.append(append + '\n')
 
         return lines
 
     def dedent_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
         if 'dedent' in self.options:
-            return dedent_lines(lines, self.options.get('dedent'), location=location)
+            # Check if we have prepend/append content
+            has_prepend = 'prepend' in self.options
+            has_append = 'append' in self.options
+            
+            # If we have prepend/append, only dedent the included file content
+            if has_prepend or has_append:
+                # Find the range of lines that are from the included file
+                start = 1 if has_prepend else 0
+                end = len(lines) - 1 if has_append else len(lines)
+                
+                # Split into prepend, included content, and append
+                pre_lines = lines[:start] if has_prepend else []
+                included_lines = lines[start:end]
+                post_lines = lines[end:] if has_append else []
+                
+                # Only dedent the included content
+                dedented_included = dedent_lines(included_lines, self.options.get('dedent'), location=location)
+                
+                # Recombine all parts
+                return pre_lines + dedented_included + post_lines
+            else:
+                # No prepend/append, dedent everything as before
+                return dedent_lines(lines, self.options.get('dedent'), location=location)
         else:
             return lines
 


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `sphinx/directives/code.py` and the `dedent_lines` function from `sphinx/util/docutils.py`.
Extra Requirements: Please prioritize providing the `LiteralInclude` and `LiteralIncludeReader` classes from `sphinx/directives/code.py`, and just the `dedent_lines` function from `sphinx/util/docutils.py`.
Purpose: This context is necessary to understand how `literalinclude` options are processed and how text is dedented, which is crucial for fixing the reported indentation issue.

Previous refined query 2:
Essential Query: Please provide the full content of sphinx/util/docutils.py.
Extra Requirements: Please ensure the content of the `SphinxDirective` class is included.
Purpose: This file is crucial for understanding how Sphinx's directives interact with docutils for option parsing, which will help determine why whitespace is being stripped from the `prepend` option and how to properly fix the fix the issue.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sphinx/directives/code.py
Line number range: 51 - 65
Content:
51. def dedent_lines(lines: List[str], dedent: int, location: Tuple[str, int] = None) -> List[str]:
52.     if dedent is None:
53.         return textwrap.dedent(''.join(lines)).splitlines(True)
54. 
55.     if any(s[:dedent].strip() for s in lines):
56.         logger.warning(__('non-whitespace stripped by dedent'), location=location)
57. 
58.     new_lines = []
59.     for line in lines:
60.         new_line = line[dedent:]
61.         if line.endswith('\n') and not new_line:
62.             new_line = '\n'  # keep CRLF
63.         new_lines.append(new_line)
64. 
65.     return new_lines


File: sphinx/directives/code.py
Line number range: 172 - 361
Content:
172. class LiteralIncludeReader:
173.     INVALID_OPTIONS_PAIR = [
174.         ('lineno-match', 'lineno-start'),
175.         ('lineno-match', 'append'),
176.         ('lineno-match', 'prepend'),
177.         ('start-after', 'start-at'),
178.         ('end-before', 'end-at'),
179.         ('diff', 'pyobject'),
180.         ('diff', 'lineno-start'),
181.         ('diff', 'lineno-match'),
182.         ('diff', 'lines'),
183.         ('diff', 'start-after'),
184.         ('diff', 'end-before'),
185.         ('diff', 'start-at'),
186.         ('diff', 'end-at'),
187.     ]
188. 
189.     def __init__(self, filename: str, options: Dict, config: Config) -> None:
190.         self.filename = filename
191.         self.options = options
192.         self.encoding = options.get('encoding', config.source_encoding)
193.         self.lineno_start = self.options.get('lineno-start', 1)
194. 
195.         self.parse_options()
196. 
197.     def parse_options(self) -> None:
198.         for option1, option2 in self.INVALID_OPTIONS_PAIR:
199.             if option1 in self.options and option2 in self.options:
200.                 raise ValueError(__('Cannot use both "%s" and "%s" options') %
201.                                  (option1, option2))
202. 
203.     def read_file(self, filename: str, location: Tuple[str, int] = None) -> List[str]:
204.         try:
205.             with open(filename, encoding=self.encoding, errors='strict') as f:
206.                 text = f.read()
207.                 if 'tab-width' in self.options:
208.                     text = text.expandtabs(self.options['tab-width'])
209. 
210.                 return text.splitlines(True)
211.         except OSError as exc:
212.             raise OSError(__('Include file %r not found or reading it failed') %
213.                           filename) from exc
214.         except UnicodeError as exc:
215.             raise UnicodeError(__('Encoding %r used for reading included file %r seems to '
216.                                   'be wrong, try giving an :encoding: option') %
217.                                (self.encoding, filename)) from exc
218. 
219.     def read(self, location: Tuple[str, int] = None) -> Tuple[str, int]:
220.         if 'diff' in self.options:
221.             lines = self.show_diff()
222.         else:
223.             filters = [self.pyobject_filter,
224.                        self.start_filter,
225.                        self.end_filter,
226.                        self.lines_filter,
227.                        self.prepend_filter,
228.                        self.append_filter,
229.                        self.dedent_filter]
230.             lines = self.read_file(self.filename, location=location)
231.             for func in filters:
232.                 lines = func(lines, location=location)
233. 
234.         return ''.join(lines), len(lines)
235. 
236.     def show_diff(self, location: Tuple[str, int] = None) -> List[str]:
237.         new_lines = self.read_file(self.filename)
238.         old_filename = self.options.get('diff')
239.         old_lines = self.read_file(old_filename)
240.         diff = unified_diff(old_lines, new_lines, old_filename, self.filename)
241.         return list(diff)
242. 
243.     def pyobject_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
244.         pyobject = self.options.get('pyobject')
245.         if pyobject:
246.             from sphinx.pycode import ModuleAnalyzer
247.             analyzer = ModuleAnalyzer.for_file(self.filename, '')
248.             tags = analyzer.find_tags()
249.             if pyobject not in tags:
250.                 raise ValueError(__('Object named %r not found in include file %r') %
251.                                  (pyobject, self.filename))
252.             else:
253.                 start = tags[pyobject][1]
254.                 end = tags[pyobject][2]
255.                 lines = lines[start - 1:end]
256.                 if 'lineno-match' in self.options:
257.                     self.lineno_start = start
258. 
259.         return lines
260. 
261.     def lines_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
262.         linespec = self.options.get('lines')
263.         if linespec:
264.             linelist = parselinenos(linespec, len(lines))
265.             if any(i >= len(lines) for i in linelist):
266.                 logger.warning(__('line number spec is out of range(1-%d): %r') %
267.                                (len(lines), linespec), location=location)
268. 
269.             if 'lineno-match' in self.options:
270.                 # make sure the line list is not "disjoint".
271.                 first = linelist[0]
272.                 if all(first + i == n for i, n in enumerate(linelist)):
273.                     self.lineno_start += linelist[0]
274.                 else:
275.                     raise ValueError(__('Cannot use "lineno-match" with a disjoint '
276.                                         'set of "lines"'))
277. 
278.             lines = [lines[n] for n in linelist if n < len(lines)]
279.             if lines == []:
280.                 raise ValueError(__('Line spec %r: no lines pulled from include file %r') %
281.                                  (linespec, self.filename))
282. 
283.         return lines
284. 
285.     def start_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
286.         if 'start-at' in self.options:
287.             start = self.options.get('start-at')
288.             inclusive = False
289.         elif 'start-after' in self.options:
290.             start = self.options.get('start-after')
291.             inclusive = True
292.         else:
293.             start = None
294. 
295.         if start:
296.             for lineno, line in enumerate(lines):
297.                 if start in line:
298.                     if inclusive:
299.                         if 'lineno-match' in self.options:
300.                             self.lineno_start += lineno + 1
301. 
302.                         return lines[lineno + 1:]
303.                     else:
304.                         if 'lineno-match' in self.options:
305.                             self.lineno_start += lineno
306. 
307.                         return lines[lineno:]
308. 
309.             if inclusive is True:
310.                 raise ValueError('start-after pattern not found: %s' % start)
311.             else:
312.                 raise ValueError('start-at pattern not found: %s' % start)
313. 
314.         return lines
315. 
316.     def end_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
317.         if 'end-at' in self.options:
318.             end = self.options.get('end-at')
319.             inclusive = True
320.         elif 'end-before' in self.options:
321.             end = self.options.get('end-before')
322.             inclusive = False
323.         else:
324.             end = None
325. 
326.         if end:
327.             for lineno, line in enumerate(lines):
328.                 if end in line:
329.                     if inclusive:
330.                         return lines[:lineno + 1]
331.                     else:
332.                         if lineno == 0:
333.                             pass  # end-before ignores first line
334.                         else:
335.                             return lines[:lineno]
336.             if inclusive is True:
337.                 raise ValueError('end-at pattern not found: %s' % end)
338.             else:
339.                 raise ValueError('end-before pattern not found: %s' % end)
340. 
341.         return lines
342. 
343.     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
344.         prepend = self.options.get('prepend')
345.         if prepend:
346.             lines.insert(0, prepend + '\n')
347. 
348.         return lines
349. 
350.     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
351.         append = self.options.get('append')
352.         if append:
353.             lines.append(append + '\n')
354. 
355.         return lines
356. 
357.     def dedent_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:
358.         if 'dedent' in self.options:
359.             return dedent_lines(lines, self.options.get('dedent'), location=location)
360.         else:
361.             return lines


File: sphinx/directives/code.py
Line number range: 364 - 449
Content:
364. class LiteralInclude(SphinxDirective):
365.     """
366.     Like ``.. include:: :literal:``, but only warns if the include file is
367.     not found, and does not raise errors.  Also has several options for
368.     selecting what to include.
369.     """
370. 
371.     has_content = False
372.     required_arguments = 1
373.     optional_arguments = 0
374.     final_argument_whitespace = True
375.     option_spec: OptionSpec = {
376.         'dedent': optional_int,
377.         'linenos': directives.flag,
378.         'lineno-start': int,
379.         'lineno-match': directives.flag,
380.         'tab-width': int,
381.         'language': directives.unchanged_required,
382.         'force': directives.flag,
383.         'encoding': directives.encoding,
384.         'pyobject': directives.unchanged_required,
385.         'lines': directives.unchanged_required,
386.         'start-after': directives.unchanged_required,
387.         'end-before': directives.unchanged_required,
388.         'start-at': directives.unchanged_required,
389.         'end-at': directives.unchanged_required,
390.         'prepend': directives.unchanged_required,
391.         'append': directives.unchanged_required,
392.         'emphasize-lines': directives.unchanged_required,
393.         'caption': directives.unchanged,
394.         'class': directives.class_option,
395.         'name': directives.unchanged,
396.         'diff': directives.unchanged_required,
397.     }
398. 
399.     def run(self) -> List[Node]:
400.         document = self.state.document
401.         if not document.settings.file_insertion_enabled:
402.             return [document.reporter.warning('File insertion disabled',
403.                                               line=self.lineno)]
404.         # convert options['diff'] to absolute path
405.         if 'diff' in self.options:
406.             _, path = self.env.relfn2path(self.options['diff'])
407.             self.options['diff'] = path
408. 
409.         try:
410.             location = self.state_machine.get_source_and_line(self.lineno)
411.             rel_filename, filename = self.env.relfn2path(self.arguments[0])
412.             self.env.note_dependency(rel_filename)
413. 
414.             reader = LiteralIncludeReader(filename, self.options, self.config)
415.             text, lines = reader.read(location=location)
416. 
417.             retnode: Element = nodes.literal_block(text, text, source=filename)
418.             retnode['force'] = 'force' in self.options
419.             self.set_source_info(retnode)
420.             if self.options.get('diff'):  # if diff is set, set udiff
421.                 retnode['language'] = 'udiff'
422.             elif 'language' in self.options:
423.                 retnode['language'] = self.options['language']
424.             if ('linenos' in self.options or 'lineno-start' in self.options or
425.                     'lineno-match' in self.options):
426.                 retnode['linenos'] = True
427.             retnode['classes'] += self.options.get('class', [])
428.             extra_args = retnode['highlight_args'] = {}
429.             if 'emphasize-lines' in self.options:
430.                 hl_lines = parselinenos(self.options['emphasize-lines'], lines)
431.                 if any(i >= lines for i in hl_lines):
432.                     logger.warning(__('line number spec is out of range(1-%d): %r') %
433.                                    (lines, self.options['emphasize-lines']),
434.                                    location=location)
435.                 extra_args['hl_lines'] = [x + 1 for x in hl_lines if x < lines]
436.             extra_args['linenostart'] = reader.lineno_start
437. 
438.             if 'caption' in self.options:
439.                 caption = self.options['caption'] or self.arguments[0]
440.                 retnode = container_wrapper(self, retnode, caption)
441. 
442.             # retnode will be note_implicit_target that is linked from caption and numref.
443.             # when options['name'] is provided, it should be primary ID.
444.             self.add_name(retnode)
445. 
446.             return [retnode]
447.         except Exception as exc:
448.             return [document.reporter.warning(exc, line=self.lineno)]
449. 


File: sphinx/util/docutils.py
Line number range: 1 - 576
Content:
1. """Utility functions for docutils."""
2. 
3. import os
4. import re
5. from contextlib import contextmanager
6. from copy import copy
7. from os import path
8. from types import ModuleType
9. from typing import (IO, TYPE_CHECKING, Any, Callable, Dict, Generator, List, Optional, Set,
10.                     Tuple, Type, cast)
11. 
12. import docutils
13. from docutils import nodes
14. from docutils.io import FileOutput
15. from docutils.nodes import Element, Node, system_message
16. from docutils.parsers.rst import Directive, directives, roles
17. from docutils.parsers.rst.states import Inliner
18. from docutils.statemachine import State, StateMachine, StringList
19. from docutils.utils import Reporter, unescape
20. from packaging import version
21. 
22. from sphinx.errors import SphinxError
23. from sphinx.locale import _, __
24. from sphinx.util import logging
25. from sphinx.util.typing import RoleFunction
26. 
27. logger = logging.getLogger(__name__)
28. report_re = re.compile('^(.+?:(?:\\d+)?): \\((DEBUG|INFO|WARNING|ERROR|SEVERE)/(\\d+)?\\) ')
29. 
30. if TYPE_CHECKING:
31.     from sphinx.builders import Builder
32.     from sphinx.config import Config
33.     from sphinx.environment import BuildEnvironment
34. 
35. 
36. __version_info__ = version.parse(docutils.__version__).release
37. additional_nodes: Set[Type[Element]] = set()
38. 
39. 
40. @contextmanager
41. def docutils_namespace() -> Generator[None, None, None]:
42.     """Create namespace for reST parsers."""
43.     try:
44.         _directives = copy(directives._directives)  # type: ignore
45.         _roles = copy(roles._roles)  # type: ignore
46. 
47.         yield
48.     finally:
49.         directives._directives = _directives  # type: ignore
50.         roles._roles = _roles  # type: ignore
51. 
52.         for node in list(additional_nodes):
53.             unregister_node(node)
54.             additional_nodes.discard(node)
55. 
56. 
57. def is_directive_registered(name: str) -> bool:
58.     """Check the *name* directive is already registered."""
59.     return name in directives._directives  # type: ignore
60. 
61. 
62. def register_directive(name: str, directive: Type[Directive]) -> None:
63.     """Register a directive to docutils.
64. 
65.     This modifies global state of docutils.  So it is better to use this
66.     inside ``docutils_namespace()`` to prevent side-effects.
67.     """
68.     directives.register_directive(name, directive)
69. 
70. 
71. def is_role_registered(name: str) -> bool:
72.     """Check the *name* role is already registered."""
73.     return name in roles._roles  # type: ignore
74. 
75. 
76. def register_role(name: str, role: RoleFunction) -> None:
77.     """Register a role to docutils.
78. 
79.     This modifies global state of docutils.  So it is better to use this
80.     inside ``docutils_namespace()`` to prevent side-effects.
81.     """
82.     roles.register_local_role(name, role)
83. 
84. 
85. def unregister_role(name: str) -> None:
86.     """Unregister a role from docutils."""
87.     roles._roles.pop(name, None)  # type: ignore
88. 
89. 
90. def is_node_registered(node: Type[Element]) -> bool:
91.     """Check the *node* is already registered."""
92.     return hasattr(nodes.GenericNodeVisitor, 'visit_' + node.__name__)
93. 
94. 
95. def register_node(node: Type[Element]) -> None:
96.     """Register a node to docutils.
97. 
98.     This modifies global state of some visitors.  So it is better to use this
99.     inside ``docutils_namespace()`` to prevent side-effects.
100.     """
101.     if not hasattr(nodes.GenericNodeVisitor, 'visit_' + node.__name__):
102.         nodes._add_node_class_names([node.__name__])  # type: ignore
103.         additional_nodes.add(node)
104. 
105. 
106. def unregister_node(node: Type[Element]) -> None:
107.     """Unregister a node from docutils.
108. 
109.     This is inverse of ``nodes._add_nodes_class_names()``.
110.     """
111.     if hasattr(nodes.GenericNodeVisitor, 'visit_' + node.__name__):
112.         delattr(nodes.GenericNodeVisitor, "visit_" + node.__name__)
113.         delattr(nodes.GenericNodeVisitor, "depart_" + node.__name__)
114.         delattr(nodes.SparseNodeVisitor, 'visit_' + node.__name__)
115.         delattr(nodes.SparseNodeVisitor, 'depart_' + node.__name__)
116. 
117. 
118. @contextmanager
119. def patched_get_language() -> Generator[None, None, None]:
120.     """Patch docutils.languages.get_language() temporarily.
121. 
122.     This ignores the second argument ``reporter`` to suppress warnings.
123.     refs: https://github.com/sphinx-doc/sphinx/issues/3788
124.     """
125.     from docutils.languages import get_language
126. 
127.     def patched_get_language(language_code: str, reporter: Reporter = None) -> Any:
128.         return get_language(language_code)
129. 
130.     try:
131.         docutils.languages.get_language = patched_get_language
132.         yield
133.     finally:
134.         # restore original implementations
135.         docutils.languages.get_language = get_language
136. 
137. 
138. @contextmanager
139. def patched_rst_get_language() -> Generator[None, None, None]:
140.     """Patch docutils.parsers.rst.languages.get_language().
141.     Starting from docutils 0.17, get_language() in ``rst.languages``
142.     also has a reporter, which needs to be disabled temporarily.
143. 
144.     This should also work for old versions of docutils,
145.     because reporter is none by default.
146. 
147.     refs: https://github.com/sphinx-doc/sphinx/issues/10179
148.     """
149.     from docutils.parsers.rst.languages import get_language
150. 
151.     def patched_get_language(language_code: str, reporter: Reporter = None) -> Any:
152.         return get_language(language_code)
153. 
154.     try:
155.         docutils.parsers.rst.languages.get_language = patched_get_language
156.         yield
157.     finally:
158.         # restore original implementations
159.         docutils.parsers.rst.languages.get_language = get_language
160. 
161. 
162. @contextmanager
163. def using_user_docutils_conf(confdir: Optional[str]) -> Generator[None, None, None]:
164.     """Let docutils know the location of ``docutils.conf`` for Sphinx."""
165.     try:
166.         docutilsconfig = os.environ.get('DOCUTILSCONFIG', None)
167.         if confdir:
168.             os.environ['DOCUTILSCONFIG'] = path.join(path.abspath(confdir), 'docutils.conf')
169. 
170.         yield
171.     finally:
172.         if docutilsconfig is None:
173.             os.environ.pop('DOCUTILSCONFIG', None)
174.         else:
175.             os.environ['DOCUTILSCONFIG'] = docutilsconfig
176. 
177. 
178. @contextmanager
179. def patch_docutils(confdir: Optional[str] = None) -> Generator[None, None, None]:
180.     """Patch to docutils temporarily."""
181.     with patched_get_language(), patched_rst_get_language(), using_user_docutils_conf(confdir):
182.         yield
183. 
184. 
185. class CustomReSTDispatcher:
186.     """Custom reST's mark-up dispatcher.
187. 
188.     This replaces docutils's directives and roles dispatch mechanism for reST parser
189.     by original one temporarily.
190.     """
191. 
192.     def __init__(self) -> None:
193.         self.directive_func: Callable = lambda *args: (None, [])
194.         self.roles_func: Callable = lambda *args: (None, [])
195. 
196.     def __enter__(self) -> None:
197.         self.enable()
198. 
199.     def __exit__(self, exc_type: Type[Exception], exc_value: Exception, traceback: Any) -> None:  # NOQA
200.         self.disable()
201. 
202.     def enable(self) -> None:
203.         self.directive_func = directives.directive
204.         self.role_func = roles.role
205. 
206.         directives.directive = self.directive
207.         roles.role = self.role
208. 
209.     def disable(self) -> None:
210.         directives.directive = self.directive_func
211.         roles.role = self.role_func
212. 
213.     def directive(self,
214.                   directive_name: str, language_module: ModuleType, document: nodes.document
215.                   ) -> Tuple[Optional[Type[Directive]], List[system_message]]:
216.         return self.directive_func(directive_name, language_module, document)
217. 
218.     def role(self, role_name: str, language_module: ModuleType, lineno: int, reporter: Reporter
219.              ) -> Tuple[RoleFunction, List[system_message]]:
220.         return self.role_func(role_name, language_module, lineno, reporter)
221. 
222. 
223. class ElementLookupError(Exception):
224.     pass
225. 
226. 
227. class sphinx_domains(CustomReSTDispatcher):
228.     """Monkey-patch directive and role dispatch, so that domain-specific
229.     markup takes precedence.
230.     """
231.     def __init__(self, env: "BuildEnvironment") -> None:
232.         self.env = env
233.         super().__init__()
234. 
235.     def lookup_domain_element(self, type: str, name: str) -> Any:
236.         """Lookup a markup element (directive or role), given its name which can
237.         be a full name (with domain).
238.         """
239.         name = name.lower()
240.         # explicit domain given?
241.         if ':' in name:
242.             domain_name, name = name.split(':', 1)
243.             if domain_name in self.env.domains:
244.                 domain = self.env.get_domain(domain_name)
245.                 element = getattr(domain, type)(name)
246.                 if element is not None:
247.                     return element, []
248.             else:
249.                 logger.warning(_('unknown directive or role name: %s:%s'), domain_name, name)
250.         # else look in the default domain
251.         else:
252.             def_domain = self.env.temp_data.get('default_domain')
253.             if def_domain is not None:
254.                 element = getattr(def_domain, type)(name)
255.                 if element is not None:
256.                     return element, []
257. 
258.         # always look in the std domain
259.         element = getattr(self.env.get_domain('std'), type)(name)
260.         if element is not None:
261.             return element, []
262. 
263.         raise ElementLookupError
264. 
265.     def directive(self,
266.                   directive_name: str, language_module: ModuleType, document: nodes.document
267.                   ) -> Tuple[Optional[Type[Directive]], List[system_message]]:
268.         try:
269.             return self.lookup_domain_element('directive', directive_name)
270.         except ElementLookupError:
271.             return super().directive(directive_name, language_module, document)
272. 
273.     def role(self, role_name: str, language_module: ModuleType, lineno: int, reporter: Reporter
274.              ) -> Tuple[RoleFunction, List[system_message]]:
275.         try:
276.             return self.lookup_domain_element('role', role_name)
277.         except ElementLookupError:
278.             return super().role(role_name, language_module, lineno, reporter)
279. 
280. 
281. class WarningStream:
282.     def write(self, text: str) -> None:
283.         matched = report_re.search(text)
284.         if not matched:
285.             logger.warning(text.rstrip("\r\n"))
286.         else:
287.             location, type, level = matched.groups()
288.             message = report_re.sub('', text).rstrip()
289.             logger.log(type, message, location=location)
290. 
291. 
292. class LoggingReporter(Reporter):
293.     @classmethod
294.     def from_reporter(cls, reporter: Reporter) -> "LoggingReporter":
295.         """Create an instance of LoggingReporter from other reporter object."""
296.         return cls(reporter.source, reporter.report_level, reporter.halt_level,
297.                    reporter.debug_flag, reporter.error_handler)
298. 
299.     def __init__(self, source: str, report_level: int = Reporter.WARNING_LEVEL,
300.                  halt_level: int = Reporter.SEVERE_LEVEL, debug: bool = False,
301.                  error_handler: str = 'backslashreplace') -> None:
302.         stream = cast(IO, WarningStream())
303.         super().__init__(source, report_level, halt_level,
304.                          stream, debug, error_handler=error_handler)
305. 
306. 
307. class NullReporter(Reporter):
308.     """A dummy reporter; write nothing."""
309. 
310.     def __init__(self) -> None:
311.         super().__init__('', 999, 4)
312. 
313. 
314. def is_html5_writer_available() -> bool:
315.     return __version_info__ > (0, 13, 0)
316. 
317. 
318. @contextmanager
319. def switch_source_input(state: State, content: StringList) -> Generator[None, None, None]:
320.     """Switch current source input of state temporarily."""
321.     try:
322.         # remember the original ``get_source_and_line()`` method
323.         get_source_and_line = state.memo.reporter.get_source_and_line  # type: ignore
324. 
325.         # replace it by new one
326.         state_machine = StateMachine([], None)
327.         state_machine.input_lines = content
328.         state.memo.reporter.get_source_and_line = state_machine.get_source_and_line  # type: ignore  # NOQA
329. 
330.         yield
331.     finally:
332.         # restore the method
333.         state.memo.reporter.get_source_and_line = get_source_and_line  # type: ignore
334. 
335. 
336. class SphinxFileOutput(FileOutput):
337.     """Better FileOutput class for Sphinx."""
338. 
339.     def __init__(self, **kwargs: Any) -> None:
340.         self.overwrite_if_changed = kwargs.pop('overwrite_if_changed', False)
341.         super().__init__(**kwargs)
342. 
343.     def write(self, data: str) -> str:
344.         if (self.destination_path and self.autoclose and 'b' not in self.mode and
345.                 self.overwrite_if_changed and os.path.exists(self.destination_path)):
346.             with open(self.destination_path, encoding=self.encoding) as f:
347.                 # skip writing: content not changed
348.                 if f.read() == data:
349.                     return data
350. 
351.         return super().write(data)
352. 
353. 
354. class SphinxDirective(Directive):
355.     """A base class for Sphinx directives.
356. 
357.     This class provides helper methods for Sphinx directives.
358. 
359.     .. note:: The subclasses of this class might not work with docutils.
360.               This class is strongly coupled with Sphinx.
361.     """
362. 
363.     @property
364.     def env(self) -> "BuildEnvironment":
365.         """Reference to the :class:`.BuildEnvironment` object."""
366.         return self.state.document.settings.env
367. 
368.     @property
369.     def config(self) -> "Config":
370.         """Reference to the :class:`.Config` object."""
371.         return self.env.config
372. 
373.     def get_source_info(self) -> Tuple[str, int]:
374.         """Get source and line number."""
375.         return self.state_machine.get_source_and_line(self.lineno)
376. 
377.     def set_source_info(self, node: Node) -> None:
378.         """Set source and line number to the node."""
379.         node.source, node.line = self.get_source_info()
380. 
381.     def get_location(self) -> str:
382.         """Get current location info for logging."""
383.         return ':'.join(str(s) for s in self.get_source_info())
384. 
385. 
386. class SphinxRole:
387.     """A base class for Sphinx roles.
388. 
389.     This class provides helper methods for Sphinx roles.
390. 
391.     .. note:: The subclasses of this class might not work with docutils.
392.               This class is strongly coupled with Sphinx.
393.     """
394.     name: str           #: The role name actually used in the document.
395.     rawtext: str        #: A string containing the entire interpreted text input.
396.     text: str           #: The interpreted text content.
397.     lineno: int         #: The line number where the interpreted text begins.
398.     inliner: Inliner    #: The ``docutils.parsers.rst.states.Inliner`` object.
399.     options: Dict       #: A dictionary of directive options for customization
400.                         #: (from the "role" directive).
401.     content: List[str]  #: A list of strings, the directive content for customization
402.                         #: (from the "role" directive).
403. 
404.     def __call__(self, name: str, rawtext: str, text: str, lineno: int,
405.                  inliner: Inliner, options: Dict = {}, content: List[str] = []
406.                  ) -> Tuple[List[Node], List[system_message]]:
407.         self.rawtext = rawtext
408.         self.text = unescape(text)
409.         self.lineno = lineno
410.         self.inliner = inliner
411.         self.options = options
412.         self.content = content
413. 
414.         # guess role type
415.         if name:
416.             self.name = name.lower()
417.         else:
418.             self.name = self.env.temp_data.get('default_role', '')
419.             if not self.name:
420.                 self.name = self.env.config.default_role
421.             if not self.name:
422.                 raise SphinxError('cannot determine default role!')
423. 
424.         return self.run()
425. 
426.     def run(self) -> Tuple[List[Node], List[system_message]]:
427.         raise NotImplementedError
428. 
429.     @property
430.     def env(self) -> "BuildEnvironment":
431.         """Reference to the :class:`.BuildEnvironment` object."""
432.         return self.inliner.document.settings.env
433. 
434.     @property
435.     def config(self) -> "Config":
436.         """Reference to the :class:`.Config` object."""
437.         return self.env.config
438. 
439.     def get_source_info(self, lineno: int = None) -> Tuple[str, int]:
440.         if lineno is None:
441.             lineno = self.lineno
442.         return self.inliner.reporter.get_source_and_line(lineno)  # type: ignore
443. 
444.     def set_source_info(self, node: Node, lineno: int = None) -> None:
445.         node.source, node.line = self.get_source_info(lineno)
446. 
447.     def get_location(self) -> str:
448.         """Get current location info for logging."""
449.         return ':'.join(str(s) for s in self.get_source_info())
450. 
451. 
452. class ReferenceRole(SphinxRole):
453.     """A base class for reference roles.
454. 
455.     The reference roles can accept ``link title <target>`` style as a text for
456.     the role.  The parsed result; link title and target will be stored to
457.     ``self.title`` and ``self.target``.
458.     """
459.     has_explicit_title: bool    #: A boolean indicates the role has explicit title or not.
460.     disabled: bool              #: A boolean indicates the reference is disabled.
461.     title: str                  #: The link title for the interpreted text.
462.     target: str                 #: The link target for the interpreted text.
463. 
464.     # \x00 means the "<" was backslash-escaped
465.     explicit_title_re = re.compile(r'^(.+?)\s*(?<!\x00)<(.*?)>$', re.DOTALL)
466. 
467.     def __call__(self, name: str, rawtext: str, text: str, lineno: int,
468.                  inliner: Inliner, options: Dict = {}, content: List[str] = []
469.                  ) -> Tuple[List[Node], List[system_message]]:
470.         # if the first character is a bang, don't cross-reference at all
471.         self.disabled = text.startswith('!')
472. 
473.         matched = self.explicit_title_re.match(text)
474.         if matched:
475.             self.has_explicit_title = True
476.             self.title = unescape(matched.group(1))
477.             self.target = unescape(matched.group(2))
478.         else:
479.             self.has_explicit_title = False
480.             self.title = unescape(text)
481.             self.target = unescape(text)
482. 
483.         return super().__call__(name, rawtext, text, lineno, inliner, options, content)
484. 
485. 
486. class SphinxTranslator(nodes.NodeVisitor):
487.     """A base class for Sphinx translators.
488. 
489.     This class adds a support for visitor/departure method for super node class
490.     if visitor/departure method for node class is not found.
491. 
492.     It also provides helper methods for Sphinx translators.
493. 
494.     .. note:: The subclasses of this class might not work with docutils.
495.               This class is strongly coupled with Sphinx.
496.     """
497. 
498.     def __init__(self, document: nodes.document, builder: "Builder") -> None:
499.         super().__init__(document)
500.         self.builder = builder
501.         self.config = builder.config
502.         self.settings = document.settings
503. 
504.     def dispatch_visit(self, node: Node) -> None:
505.         """
506.         Dispatch node to appropriate visitor method.
507.         The priority of visitor method is:
508. 
509.         1. ``self.visit_{node_class}()``
510.         2. ``self.visit_{super_node_class}()``
511.         3. ``self.unknown_visit()``
512.         """
513.         for node_class in node.__class__.__mro__:
514.             method = getattr(self, 'visit_%s' % (node_class.__name__), None)
515.             if method:
516.                 method(node)
517.                 break
518.         else:
519.             super().dispatch_visit(node)
520. 
521.     def dispatch_departure(self, node: Node) -> None:
522.         """
523.         Dispatch node to appropriate departure method.
524.         The priority of departure method is:
525. 
526.         1. ``self.depart_{node_class}()``
527.         2. ``self.depart_{super_node_class}()``
528.         3. ``self.unknown_departure()``
529.         """
530.         for node_class in node.__class__.__mro__:
531.             method = getattr(self, 'depart_%s' % (node_class.__name__), None)
532.             if method:
533.                 method(node)
534.                 break
535.         else:
536.             super().dispatch_departure(node)
537. 
538.     def unknown_visit(self, node: Node) -> None:
539.         logger.warning(__('unknown node type: %r'), node, location=node)
540. 
541. 
542. # Node.findall() is a new interface to traverse a doctree since docutils-0.18.
543. # This applies a patch docutils-0.17 or older to be available Node.findall()
544. # method to use it from our codebase.
545. if __version_info__ < (0, 18):
546.     def findall(self, *args, **kwargs):
547.         return iter(self.traverse(*args, **kwargs))
548. 
549.     Node.findall = findall  # type: ignore
550. 
551. 
552. # cache a vanilla instance of nodes.document
553. # Used in new_document() function
554. __document_cache__: Optional[nodes.document] = None
555. 
556. 
557. def new_document(source_path: str, settings: Any = None) -> nodes.document:
558.     """Return a new empty document object.  This is an alternative of docutils'.
559. 
560.     This is a simple wrapper for ``docutils.utils.new_document()``.  It
561.     caches the result of docutils' and use it on second call for instantiation.
562.     This makes an instantiation of document nodes much faster.
563.     """
564.     global __document_cache__
565.     if __document_cache__ is None:
566.         __document_cache__ = docutils.utils.new_document(source_path)
567. 
568.     if settings is None:
569.         # Make a copy of ``settings`` from cache to accelerate instantiation
570.         settings = copy(__document_cache__.settings)
571. 
572.     # Create a new instance of nodes.document using cached reporter
573.     from sphinx import addnodes
574.     document = addnodes.document(settings, __document_cache__.reporter, source=source_path)
575.     document.note_source(source_path, -1)
576.     return document

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 10:22:49,481 - thread-139574449776320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="1. The user wants to fix an indentation issue with the `literalinclude` directive, specifically when using the `prepend` and `dedent` options together.\n2. The user has proposed a patch that modifies the `dedent_filter` method within the `LiteralIncludeReader` class in `sphinx/directives/code.py`.\n3. The proposed change isolates the prepended and appended lines and applies the `dedent` operation only to the lines read from the file.\n4. The provided context includes the full source for `sphinx/directives/code.py`, which contains the `LiteralIncludeReader` class, its methods (`prepend_filter`, `dedent_filter`, etc.), and the `dedent_lines` helper function.\n5. The context also includes `sphinx/util/docutils.py` containing `SphinxDirective`, the base class for `LiteralInclude`.\n6. The logic of the proposed patch is self-contained within the `dedent_filter` method and only depends on code that is already available in the context.\n7. While there is some ambiguity in the user's report about whether whitespace is stripped even without `dedent`, the user's proposed solution and detailed comments focus exclusively on the interaction with `dedent`. Therefore, the primary task is to fix this interaction.\n8. Since all the relevant code for understanding and implementing the proposed fix is present, no additional context is required." query='' extra_requirements='' purpose=''
2025-12-23 10:22:49,482 - thread-139574449776320.prometheus_context_collector - INFO - Successfully retrieved 4 context snippets
