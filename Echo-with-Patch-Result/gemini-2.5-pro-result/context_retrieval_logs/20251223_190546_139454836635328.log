2025-12-23 19:05:46,685 - thread-139454836635328.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Allow overridding widget in formfield_for_manytomany().

Description: Description
	 
		(last modified by Mariusz Felisiak)
	 
It does not work when I set widget param to function formfield_for_manytomany().
This is different from the formfield_for_foreignkey() function.

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 69a5fbf389..b3c4020f39 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -250,15 +250,16 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):
         db = kwargs.get('using')
 
         autocomplete_fields = self.get_autocomplete_fields(request)
-        if db_field.name in autocomplete_fields:
-            kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in self.raw_id_fields:
-            kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
-            kwargs['widget'] = widgets.FilteredSelectMultiple(
-                db_field.verbose_name,
-                db_field.name in self.filter_vertical
-            )
+        if 'widget' not in kwargs:
+            if db_field.name in autocomplete_fields:
+                kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in self.raw_id_fields:
+                kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
+                kwargs['widget'] = widgets.FilteredSelectMultiple(
+                    db_field.verbose_name,
+                    db_field.name in self.filter_vertical
+                )
 
         if 'queryset' not in kwargs:
             queryset = self.get_field_queryset(db, db_field, request)
diff --git a/docs/ref/contrib/admin/index.txt b/docs/ref/contrib/admin/index.txt
index e05319034a..193b7ba38c 100644
--- a/docs/ref/contrib/admin/index.txt
+++ b/docs/ref/contrib/admin/index.txt
@@ -1810,6 +1810,11 @@ templates used by the :class:`ModelAdmin` views:
                     kwargs["queryset"] = Car.objects.filter(owner=request.user)
                 return super().formfield_for_manytomany(db_field, request, **kwargs)
 
+    As with ``formfield_for_foreignkey()``, if you provide a custom ``widget`` in
+    ``kwargs``, that widget will be used instead of the admin's default selection
+    from ``autocomplete_fields``, ``raw_id_fields``, ``filter_vertical``, or
+    ``filter_horizontal``.
+
 .. method:: ModelAdmin.formfield_for_choice_field(db_field, request, **kwargs)
 
     Like the ``formfield_for_foreignkey`` and ``formfield_for_manytomany``


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 19:05:46,777 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Allow overridding widget in formfield_for_manytomany().

Description: Description
	 
		(last modified by Mariusz Felisiak)
	 
It does not work when I set widget param to function formfield_for_manytomany().
This is different from the formfield_for_foreignkey() function.

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 69a5fbf389..b3c4020f39 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -250,15 +250,16 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):
         db = kwargs.get('using')
 
         autocomplete_fields = self.get_autocomplete_fields(request)
-        if db_field.name in autocomplete_fields:
-            kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in self.raw_id_fields:
-            kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
-            kwargs['widget'] = widgets.FilteredSelectMultiple(
-                db_field.verbose_name,
-                db_field.name in self.filter_vertical
-            )
+        if 'widget' not in kwargs:
+            if db_field.name in autocomplete_fields:
+                kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in self.raw_id_fields:
+                kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
+                kwargs['widget'] = widgets.FilteredSelectMultiple(
+                    db_field.verbose_name,
+                    db_field.name in self.filter_vertical
+                )
 
         if 'queryset' not in kwargs:
             queryset = self.get_field_queryset(db, db_field, request)
diff --git a/docs/ref/contrib/admin/index.txt b/docs/ref/contrib/admin/index.txt
index e05319034a..193b7ba38c 100644
--- a/docs/ref/contrib/admin/index.txt
+++ b/docs/ref/contrib/admin/index.txt
@@ -1810,6 +1810,11 @@ templates used by the :class:`ModelAdmin` views:
                     kwargs["queryset"] = Car.objects.filter(owner=request.user)
                 return super().formfield_for_manytomany(db_field, request, **kwargs)
 
+    As with ``formfield_for_foreignkey()``, if you provide a custom ``widget`` in
+    ``kwargs``, that widget will be used instead of the admin's default selection
+    from ``autocomplete_fields``, ``raw_id_fields``, ``filter_vertical``, or
+    ``filter_horizontal``.
+
 .. method:: ModelAdmin.formfield_for_choice_field(db_field, request, **kwargs)
 
     Like the ``formfield_for_foreignkey`` and ``formfield_for_manytomany``


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 19:06:04,354 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find relevant test cases for a bug in `formfield_for_manytomany`. The current context is empty. I need to examine test files to find relevant test cases. `tests/admin_views/test_forms.py` is a good starting point as it likely contains tests related to form generation in the admin, which is directly related to the user's query. I will also request `tests/modeladmin/tests.py` as it is highly likely to contain tests for `ModelAdmin` methods." query='Please provide the full content of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`.' extra_requirements='' purpose='I need to find test cases that demonstrate overriding widgets in ModelAdmin form fields, specifically for many-to-many relationships.'
2025-12-23 19:06:04,355 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`.
2025-12-23 19:06:04,355 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 19:06:04,356 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 19:06:04,357 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 19:06:04,357 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`.
Purpose: I need to find test cases that demonstrate overriding widgets in ModelAdmin form fields, specifically for many-to-many relationships.
2025-12-23 19:06:07,289 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the content of both `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py` so you can examine them for test cases related to overriding widgets in ModelAdmin form fields for many-to-many relationships.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/modeladmin/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2111, 'candidates_token_count': 103, 'total_token_count': 2317, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2111}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 103}], 'thoughts_token_count': 103, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.12729859583586164, 'model_name': 'gemini-2.5-pro'} id='run--e7e9594d-9f82-4a4d-8ab2-c0219b800724-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_views/test_forms.py'}, 'id': '0bb773a2-c6d4-4ac7-83af-06f0d94b540c', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/modeladmin/tests.py'}, 'id': '61576829-830a-4947-abdd-7b55e79d5b8a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2111, 'output_tokens': 103, 'total_tokens': 2317, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 103}}
2025-12-23 19:06:21,469 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`. After reviewing the files, I found that `tests/modeladmin/tests.py` contains several relevant test cases that demonstrate overriding widgets in ModelAdmin form fields for many-to-many relationships. The tests show how to use `filter_horizontal`, `filter_vertical`, `raw_id_fields`, `autocomplete_fields`, and how to override the `formfield_for_manytomany` method to customize the widget.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9997, 'candidates_token_count': 119, 'total_token_count': 11496, 'cached_content_token_count': 1818, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9997}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1818}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 119}], 'thoughts_token_count': 1380}, 'finish_reason': 'STOP', 'avg_logprobs': -0.71568561201336, 'model_name': 'gemini-2.5-pro'} id='run--fe44d775-749a-4141-b644-b0e63e0f2920-0' usage_metadata={'input_tokens': 9997, 'output_tokens': 119, 'total_tokens': 11496, 'input_token_details': {'cache_read': 1818}, 'output_token_details': {'reasoning': 1380}}
2025-12-23 19:06:21,471 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases that demonstrate overriding widgets in ModelAdmin form fields, specifically for many-to-many relationships.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_views/test_forms.py
Line number range: 1 - 20
Content:
1. from django.contrib.admin.forms import AdminAuthenticationForm
2. from django.contrib.auth.models import User
3. from django.test import TestCase, override_settings
4. 
5. 
6. # To verify that the login form rejects inactive users, use an authentication
7. # backend that allows them.
8. @override_settings(AUTHENTICATION_BACKENDS=['django.contrib.auth.backends.AllowAllUsersModelBackend'])
9. class AdminAuthenticationFormTests(TestCase):
10.     @classmethod
11.     def setUpTestData(cls):
12.         User.objects.create_user(username='inactive', password='password', is_active=False)
13. 
14.     def test_inactive_user(self):
15.         data = {
16.             'username': 'inactive',
17.             'password': 'password',
18.         }
19.         form = AdminAuthenticationForm(None, data)
20.         self.assertEqual(form.non_field_errors(), ['This account is inactive.'])


File: tests/modeladmin/tests.py
Line number range: 1 - 500
Content:
1. from datetime import date
2. 
3. from django import forms
4. from django.contrib.admin.models import ADDITION, CHANGE, DELETION, LogEntry
5. from django.contrib.admin.options import (
6.     HORIZONTAL, VERTICAL, ModelAdmin, TabularInline,
7.     get_content_type_for_model,
8. )
9. from django.contrib.admin.sites import AdminSite
10. from django.contrib.admin.widgets import (
11.     AdminDateWidget, AdminRadioSelect, AutocompleteSelect,
12.     AutocompleteSelectMultiple,
13. )
14. from django.contrib.auth.models import User
15. from django.db import models
16. from django.forms.widgets import Select
17. from django.test import SimpleTestCase, TestCase
18. from django.test.utils import isolate_apps
19. 
20. from .models import Band, Concert, Song
21. 
22. 
23. class MockRequest:
24.     pass
25. 
26. 
27. class MockSuperUser:
28.     def has_perm(self, perm):
29.         return True
30. 
31. 
32. request = MockRequest()
33. request.user = MockSuperUser()
34. 
35. 
36. class ModelAdminTests(TestCase):
37. 
38.     def setUp(self):
39.         self.band = Band.objects.create(
40.             name='The Doors',
41.             bio='',
42.             sign_date=date(1965, 1, 1),
43.         )
44.         self.site = AdminSite()
45. 
46.     def test_modeladmin_str(self):
47.         ma = ModelAdmin(Band, self.site)
48.         self.assertEqual(str(ma), 'modeladmin.ModelAdmin')
49. 
50.     # form/fields/fieldsets interaction ##############################
51. 
52.     def test_default_fields(self):
53.         ma = ModelAdmin(Band, self.site)
54.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date'])
55.         self.assertEqual(list(ma.get_fields(request)), ['name', 'bio', 'sign_date'])
56.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name', 'bio', 'sign_date'])
57.         self.assertIsNone(ma.get_exclude(request, self.band))
58. 
59.     def test_default_fieldsets(self):
60.         # fieldsets_add and fieldsets_change should return a special data structure that
61.         # is used in the templates. They should generate the "right thing" whether we
62.         # have specified a custom form, the fields argument, or nothing at all.
63.         #
64.         # Here's the default case. There are no custom form_add/form_change methods,
65.         # no fields argument, and no fieldsets argument.
66.         ma = ModelAdmin(Band, self.site)
67.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name', 'bio', 'sign_date']})])
68.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name', 'bio', 'sign_date']})])
69. 
70.     def test_get_fieldsets(self):
71.         # get_fieldsets() is called when figuring out form fields (#18681).
72.         class BandAdmin(ModelAdmin):
73.             def get_fieldsets(self, request, obj=None):
74.                 return [(None, {'fields': ['name', 'bio']})]
75. 
76.         ma = BandAdmin(Band, self.site)
77.         form = ma.get_form(None)
78.         self.assertEqual(form._meta.fields, ['name', 'bio'])
79. 
80.         class InlineBandAdmin(TabularInline):
81.             model = Concert
82.             fk_name = 'main_band'
83.             can_delete = False
84. 
85.             def get_fieldsets(self, request, obj=None):
86.                 return [(None, {'fields': ['day', 'transport']})]
87. 
88.         ma = InlineBandAdmin(Band, self.site)
89.         form = ma.get_formset(None).form
90.         self.assertEqual(form._meta.fields, ['day', 'transport'])
91. 
92.     def test_lookup_allowed_allows_nonexistent_lookup(self):
93.         """
94.         A lookup_allowed allows a parameter whose field lookup doesn't exist.
95.         (#21129).
96.         """
97.         class BandAdmin(ModelAdmin):
98.             fields = ['name']
99. 
100.         ma = BandAdmin(Band, self.site)
101.         self.assertTrue(ma.lookup_allowed('name__nonexistent', 'test_value'))
102. 
103.     @isolate_apps('modeladmin')
104.     def test_lookup_allowed_onetoone(self):
105.         class Department(models.Model):
106.             code = models.CharField(max_length=4, unique=True)
107. 
108.         class Employee(models.Model):
109.             department = models.ForeignKey(Department, models.CASCADE, to_field="code")
110. 
111.         class EmployeeProfile(models.Model):
112.             employee = models.OneToOneField(Employee, models.CASCADE)
113. 
114.         class EmployeeInfo(models.Model):
115.             employee = models.OneToOneField(Employee, models.CASCADE)
116.             description = models.CharField(max_length=100)
117. 
118.         class EmployeeProfileAdmin(ModelAdmin):
119.             list_filter = [
120.                 'employee__employeeinfo__description',
121.                 'employee__department__code',
122.             ]
123. 
124.         ma = EmployeeProfileAdmin(EmployeeProfile, self.site)
125.         # Reverse OneToOneField
126.         self.assertIs(ma.lookup_allowed('employee__employeeinfo__description', 'test_value'), True)
127.         # OneToOneField and ForeignKey
128.         self.assertIs(ma.lookup_allowed('employee__department__code', 'test_value'), True)
129. 
130.     def test_field_arguments(self):
131.         # If fields is specified, fieldsets_add and fieldsets_change should
132.         # just stick the fields into a formsets structure and return it.
133.         class BandAdmin(ModelAdmin):
134.             fields = ['name']
135. 
136.         ma = BandAdmin(Band, self.site)
137. 
138.         self.assertEqual(list(ma.get_fields(request)), ['name'])
139.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name'])
140.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name']})])
141.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name']})])
142. 
143.     def test_field_arguments_restricted_on_form(self):
144.         # If fields or fieldsets is specified, it should exclude fields on the
145.         # Form class to the fields specified. This may cause errors to be
146.         # raised in the db layer if required model fields aren't in fields/
147.         # fieldsets, but that's preferable to ghost errors where a field in the
148.         # Form class isn't being displayed because it's not in fields/fieldsets.
149. 
150.         # Using `fields`.
151.         class BandAdmin(ModelAdmin):
152.             fields = ['name']
153. 
154.         ma = BandAdmin(Band, self.site)
155.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
156.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
157. 
158.         # Using `fieldsets`.
159.         class BandAdmin(ModelAdmin):
160.             fieldsets = [(None, {'fields': ['name']})]
161. 
162.         ma = BandAdmin(Band, self.site)
163.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
164.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
165. 
166.         # Using `exclude`.
167.         class BandAdmin(ModelAdmin):
168.             exclude = ['bio']
169. 
170.         ma = BandAdmin(Band, self.site)
171.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
172. 
173.         # You can also pass a tuple to `exclude`.
174.         class BandAdmin(ModelAdmin):
175.             exclude = ('bio',)
176. 
177.         ma = BandAdmin(Band, self.site)
178.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
179. 
180.         # Using `fields` and `exclude`.
181.         class BandAdmin(ModelAdmin):
182.             fields = ['name', 'bio']
183.             exclude = ['bio']
184. 
185.         ma = BandAdmin(Band, self.site)
186.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
187. 
188.     def test_custom_form_meta_exclude_with_readonly(self):
189.         """
190.         The custom ModelForm's `Meta.exclude` is respected when used in
191.         conjunction with `ModelAdmin.readonly_fields` and when no
192.         `ModelAdmin.exclude` is defined (#14496).
193.         """
194.         # With ModelAdmin
195.         class AdminBandForm(forms.ModelForm):
196.             class Meta:
197.                 model = Band
198.                 exclude = ['bio']
199. 
200.         class BandAdmin(ModelAdmin):
201.             readonly_fields = ['name']
202.             form = AdminBandForm
203. 
204.         ma = BandAdmin(Band, self.site)
205.         self.assertEqual(list(ma.get_form(request).base_fields), ['sign_date'])
206. 
207.         # With InlineModelAdmin
208.         class AdminConcertForm(forms.ModelForm):
209.             class Meta:
210.                 model = Concert
211.                 exclude = ['day']
212. 
213.         class ConcertInline(TabularInline):
214.             readonly_fields = ['transport']
215.             form = AdminConcertForm
216.             fk_name = 'main_band'
217.             model = Concert
218. 
219.         class BandAdmin(ModelAdmin):
220.             inlines = [ConcertInline]
221. 
222.         ma = BandAdmin(Band, self.site)
223.         self.assertEqual(
224.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
225.             ['main_band', 'opening_band', 'id', 'DELETE'])
226. 
227.     def test_custom_formfield_override_readonly(self):
228.         class AdminBandForm(forms.ModelForm):
229.             name = forms.CharField()
230. 
231.             class Meta:
232.                 exclude = ()
233.                 model = Band
234. 
235.         class BandAdmin(ModelAdmin):
236.             form = AdminBandForm
237.             readonly_fields = ['name']
238. 
239.         ma = BandAdmin(Band, self.site)
240. 
241.         # `name` shouldn't appear in base_fields because it's part of
242.         # readonly_fields.
243.         self.assertEqual(
244.             list(ma.get_form(request).base_fields),
245.             ['bio', 'sign_date']
246.         )
247.         # But it should appear in get_fields()/fieldsets() so it can be
248.         # displayed as read-only.
249.         self.assertEqual(
250.             list(ma.get_fields(request)),
251.             ['bio', 'sign_date', 'name']
252.         )
253.         self.assertEqual(
254.             list(ma.get_fieldsets(request)),
255.             [(None, {'fields': ['bio', 'sign_date', 'name']})]
256.         )
257. 
258.     def test_custom_form_meta_exclude(self):
259.         """
260.         The custom ModelForm's `Meta.exclude` is overridden if
261.         `ModelAdmin.exclude` or `InlineModelAdmin.exclude` are defined (#14496).
262.         """
263.         # With ModelAdmin
264.         class AdminBandForm(forms.ModelForm):
265.             class Meta:
266.                 model = Band
267.                 exclude = ['bio']
268. 
269.         class BandAdmin(ModelAdmin):
270.             exclude = ['name']
271.             form = AdminBandForm
272. 
273.         ma = BandAdmin(Band, self.site)
274.         self.assertEqual(list(ma.get_form(request).base_fields), ['bio', 'sign_date'])
275. 
276.         # With InlineModelAdmin
277.         class AdminConcertForm(forms.ModelForm):
278.             class Meta:
279.                 model = Concert
280.                 exclude = ['day']
281. 
282.         class ConcertInline(TabularInline):
283.             exclude = ['transport']
284.             form = AdminConcertForm
285.             fk_name = 'main_band'
286.             model = Concert
287. 
288.         class BandAdmin(ModelAdmin):
289.             inlines = [ConcertInline]
290. 
291.         ma = BandAdmin(Band, self.site)
292.         self.assertEqual(
293.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
294.             ['main_band', 'opening_band', 'day', 'id', 'DELETE']
295.         )
296. 
297.     def test_overriding_get_exclude(self):
298.         class BandAdmin(ModelAdmin):
299.             def get_exclude(self, request, obj=None):
300.                 return ['name']
301. 
302.         self.assertEqual(
303.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
304.             ['bio', 'sign_date']
305.         )
306. 
307.     def test_get_exclude_overrides_exclude(self):
308.         class BandAdmin(ModelAdmin):
309.             exclude = ['bio']
310. 
311.             def get_exclude(self, request, obj=None):
312.                 return ['name']
313. 
314.         self.assertEqual(
315.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
316.             ['bio', 'sign_date']
317.         )
318. 
319.     def test_get_exclude_takes_obj(self):
320.         class BandAdmin(ModelAdmin):
321.             def get_exclude(self, request, obj=None):
322.                 if obj:
323.                     return ['sign_date']
324.                 return ['name']
325. 
326.         self.assertEqual(
327.             list(BandAdmin(Band, self.site).get_form(request, self.band).base_fields),
328.             ['name', 'bio']
329.         )
330. 
331.     def test_custom_form_validation(self):
332.         # If a form is specified, it should use it allowing custom validation
333.         # to work properly. This won't break any of the admin widgets or media.
334.         class AdminBandForm(forms.ModelForm):
335.             delete = forms.BooleanField()
336. 
337.         class BandAdmin(ModelAdmin):
338.             form = AdminBandForm
339. 
340.         ma = BandAdmin(Band, self.site)
341.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date', 'delete'])
342.         self.assertEqual(type(ma.get_form(request).base_fields['sign_date'].widget), AdminDateWidget)
343. 
344.     def test_form_exclude_kwarg_override(self):
345.         """
346.         The `exclude` kwarg passed to `ModelAdmin.get_form()` overrides all
347.         other declarations (#8999).
348.         """
349.         class AdminBandForm(forms.ModelForm):
350.             class Meta:
351.                 model = Band
352.                 exclude = ['name']
353. 
354.         class BandAdmin(ModelAdmin):
355.             exclude = ['sign_date']
356.             form = AdminBandForm
357. 
358.             def get_form(self, request, obj=None, **kwargs):
359.                 kwargs['exclude'] = ['bio']
360.                 return super().get_form(request, obj, **kwargs)
361. 
362.         ma = BandAdmin(Band, self.site)
363.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
364. 
365.     def test_formset_exclude_kwarg_override(self):
366.         """
367.         The `exclude` kwarg passed to `InlineModelAdmin.get_formset()`
368.         overrides all other declarations (#8999).
369.         """
370.         class AdminConcertForm(forms.ModelForm):
371.             class Meta:
372.                 model = Concert
373.                 exclude = ['day']
374. 
375.         class ConcertInline(TabularInline):
376.             exclude = ['transport']
377.             form = AdminConcertForm
378.             fk_name = 'main_band'
379.             model = Concert
380. 
381.             def get_formset(self, request, obj=None, **kwargs):
382.                 kwargs['exclude'] = ['opening_band']
383.                 return super().get_formset(request, obj, **kwargs)
384. 
385.         class BandAdmin(ModelAdmin):
386.             inlines = [ConcertInline]
387. 
388.         ma = BandAdmin(Band, self.site)
389.         self.assertEqual(
390.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
391.             ['main_band', 'day', 'transport', 'id', 'DELETE']
392.         )
393. 
394.     def test_formset_overriding_get_exclude_with_form_fields(self):
395.         class AdminConcertForm(forms.ModelForm):
396.             class Meta:
397.                 model = Concert
398.                 fields = ['main_band', 'opening_band', 'day', 'transport']
399. 
400.         class ConcertInline(TabularInline):
401.             form = AdminConcertForm
402.             fk_name = 'main_band'
403.             model = Concert
404. 
405.             def get_exclude(self, request, obj=None):
406.                 return ['opening_band']
407. 
408.         class BandAdmin(ModelAdmin):
409.             inlines = [ConcertInline]
410. 
411.         ma = BandAdmin(Band, self.site)
412.         self.assertEqual(
413.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
414.             ['main_band', 'day', 'transport', 'id', 'DELETE']
415.         )
416. 
417.     def test_formset_overriding_get_exclude_with_form_exclude(self):
418.         class AdminConcertForm(forms.ModelForm):
419.             class Meta:
420.                 model = Concert
421.                 exclude = ['day']
422. 
423.         class ConcertInline(TabularInline):
424.             form = AdminConcertForm
425.             fk_name = 'main_band'
426.             model = Concert
427. 
428.             def get_exclude(self, request, obj=None):
429.                 return ['opening_band']
430. 
431.         class BandAdmin(ModelAdmin):
432.             inlines = [ConcertInline]
433. 
434.         ma = BandAdmin(Band, self.site)
435.         self.assertEqual(
436.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
437.             ['main_band', 'day', 'transport', 'id', 'DELETE']
438.         )
439. 
440.     def test_raw_id_fields_widget_override(self):
441.         """
442.         The autocomplete_fields, raw_id_fields, and radio_fields widgets may
443.         overridden by specifying a widget in get_formset().
444.         """
445.         class ConcertInline(TabularInline):
446.             model = Concert
447.             fk_name = 'main_band'
448.             raw_id_fields = ('opening_band',)
449. 
450.             def get_formset(self, request, obj=None, **kwargs):
451.                 kwargs['widgets'] = {'opening_band': Select}
452.                 return super().get_formset(request, obj, **kwargs)
453. 
454.         class BandAdmin(ModelAdmin):
455.             inlines = [ConcertInline]
456. 
457.         ma = BandAdmin(Band, self.site)
458.         band_widget = list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields['opening_band'].widget
459.         # Without the override this would be ForeignKeyRawIdWidget.
460.         self.assertIsInstance(band_widget, Select)
461. 
462.     def test_queryset_override(self):
463.         # If the queryset of a ModelChoiceField in a custom form is overridden,
464.         # RelatedFieldWidgetWrapper doesn't mess that up.
465.         band2 = Band.objects.create(name='The Beatles', bio='', sign_date=date(1962, 1, 1))
466. 
467.         ma = ModelAdmin(Concert, self.site)
468.         form = ma.get_form(request)()
469. 
470.         self.assertHTMLEqual(
471.             str(form["main_band"]),
472.             '<div class="related-widget-wrapper">'
473.             '<select name="main_band" id="id_main_band" required>'
474.             '<option value="" selected>---------</option>'
475.             '<option value="%d">The Beatles</option>'
476.             '<option value="%d">The Doors</option>'
477.             '</select></div>' % (band2.id, self.band.id)
478.         )
479. 
480.         class AdminConcertForm(forms.ModelForm):
481.             def __init__(self, *args, **kwargs):
482.                 super().__init__(*args, **kwargs)
483.                 self.fields["main_band"].queryset = Band.objects.filter(name='The Doors')
484. 
485.         class ConcertAdminWithForm(ModelAdmin):
486.             form = AdminConcertForm
487. 
488.         ma = ConcertAdminWithForm(Concert, self.site)
489.         form = ma.get_form(request)()
490. 
491.         self.assertHTMLEqual(
492.             str(form["main_band"]),
493.             '<div class="related-widget-wrapper">'
494.             '<select name="main_band" id="id_main_band" required>'
495.             '<option value="" selected>---------</option>'
496.             '<option value="%d">The Doors</option>'
497.             '</select></div>' % self.band.id
498.         )
499. 
500.     def test_regression_for_ticket_15820(self):

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 19:07:26,011 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly requested the full content of this file.', relative_path='tests/admin_views/test_forms.py', start_line=1, end_line=20), ContextOutput(reasoning="The user explicitly requested the full content of this file. The user's purpose is to find test cases related to `ModelAdmin`, and this file contains numerous tests for `ModelAdmin` functionality.", relative_path='tests/modeladmin/tests.py', start_line=1, end_line=500)]
2025-12-23 19:07:26,013 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`.
2025-12-23 19:07:26,013 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 19:07:26,013 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 19:07:26,014 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-23 19:07:26,014 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-23 19:07:26,014 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Allow overridding widget in formfield_for_manytomany().

Description: Description
	 
		(last modified by Mariusz Felisiak)
	 
It does not work when I set widget param to function formfield_for_manytomany().
This is different from the formfield_for_foreignkey() function.

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 69a5fbf389..b3c4020f39 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -250,15 +250,16 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):
         db = kwargs.get('using')
 
         autocomplete_fields = self.get_autocomplete_fields(request)
-        if db_field.name in autocomplete_fields:
-            kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in self.raw_id_fields:
-            kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
-            kwargs['widget'] = widgets.FilteredSelectMultiple(
-                db_field.verbose_name,
-                db_field.name in self.filter_vertical
-            )
+        if 'widget' not in kwargs:
+            if db_field.name in autocomplete_fields:
+                kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in self.raw_id_fields:
+                kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
+                kwargs['widget'] = widgets.FilteredSelectMultiple(
+                    db_field.verbose_name,
+                    db_field.name in self.filter_vertical
+                )
 
         if 'queryset' not in kwargs:
             queryset = self.get_field_queryset(db, db_field, request)
diff --git a/docs/ref/contrib/admin/index.txt b/docs/ref/contrib/admin/index.txt
index e05319034a..193b7ba38c 100644
--- a/docs/ref/contrib/admin/index.txt
+++ b/docs/ref/contrib/admin/index.txt
@@ -1810,6 +1810,11 @@ templates used by the :class:`ModelAdmin` views:
                     kwargs["queryset"] = Car.objects.filter(owner=request.user)
                 return super().formfield_for_manytomany(db_field, request, **kwargs)
 
+    As with ``formfield_for_foreignkey()``, if you provide a custom ``widget`` in
+    ``kwargs``, that widget will be used instead of the admin's default selection
+    from ``autocomplete_fields``, ``raw_id_fields``, ``filter_vertical``, or
+    ``filter_horizontal``.
+
 .. method:: ModelAdmin.formfield_for_choice_field(db_field, request, **kwargs)
 
     Like the ``formfield_for_foreignkey`` and ``formfield_for_manytomany``


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`.
Extra Requirements: 
Purpose: I need to find test cases that demonstrate overriding widgets in ModelAdmin form fields, specifically for many-to-many relationships.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/admin_views/test_forms.py
Line number range: 1 - 20
Content:
1. from django.contrib.admin.forms import AdminAuthenticationForm
2. from django.contrib.auth.models import User
3. from django.test import TestCase, override_settings
4. 
5. 
6. # To verify that the login form rejects inactive users, use an authentication
7. # backend that allows them.
8. @override_settings(AUTHENTICATION_BACKENDS=['django.contrib.auth.backends.AllowAllUsersModelBackend'])
9. class AdminAuthenticationFormTests(TestCase):
10.     @classmethod
11.     def setUpTestData(cls):
12.         User.objects.create_user(username='inactive', password='password', is_active=False)
13. 
14.     def test_inactive_user(self):
15.         data = {
16.             'username': 'inactive',
17.             'password': 'password',
18.         }
19.         form = AdminAuthenticationForm(None, data)
20.         self.assertEqual(form.non_field_errors(), ['This account is inactive.'])


File: tests/modeladmin/tests.py
Line number range: 1 - 500
Content:
1. from datetime import date
2. 
3. from django import forms
4. from django.contrib.admin.models import ADDITION, CHANGE, DELETION, LogEntry
5. from django.contrib.admin.options import (
6.     HORIZONTAL, VERTICAL, ModelAdmin, TabularInline,
7.     get_content_type_for_model,
8. )
9. from django.contrib.admin.sites import AdminSite
10. from django.contrib.admin.widgets import (
11.     AdminDateWidget, AdminRadioSelect, AutocompleteSelect,
12.     AutocompleteSelectMultiple,
13. )
14. from django.contrib.auth.models import User
15. from django.db import models
16. from django.forms.widgets import Select
17. from django.test import SimpleTestCase, TestCase
18. from django.test.utils import isolate_apps
19. 
20. from .models import Band, Concert, Song
21. 
22. 
23. class MockRequest:
24.     pass
25. 
26. 
27. class MockSuperUser:
28.     def has_perm(self, perm):
29.         return True
30. 
31. 
32. request = MockRequest()
33. request.user = MockSuperUser()
34. 
35. 
36. class ModelAdminTests(TestCase):
37. 
38.     def setUp(self):
39.         self.band = Band.objects.create(
40.             name='The Doors',
41.             bio='',
42.             sign_date=date(1965, 1, 1),
43.         )
44.         self.site = AdminSite()
45. 
46.     def test_modeladmin_str(self):
47.         ma = ModelAdmin(Band, self.site)
48.         self.assertEqual(str(ma), 'modeladmin.ModelAdmin')
49. 
50.     # form/fields/fieldsets interaction ##############################
51. 
52.     def test_default_fields(self):
53.         ma = ModelAdmin(Band, self.site)
54.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date'])
55.         self.assertEqual(list(ma.get_fields(request)), ['name', 'bio', 'sign_date'])
56.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name', 'bio', 'sign_date'])
57.         self.assertIsNone(ma.get_exclude(request, self.band))
58. 
59.     def test_default_fieldsets(self):
60.         # fieldsets_add and fieldsets_change should return a special data structure that
61.         # is used in the templates. They should generate the "right thing" whether we
62.         # have specified a custom form, the fields argument, or nothing at all.
63.         #
64.         # Here's the default case. There are no custom form_add/form_change methods,
65.         # no fields argument, and no fieldsets argument.
66.         ma = ModelAdmin(Band, self.site)
67.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name', 'bio', 'sign_date']})])
68.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name', 'bio', 'sign_date']})])
69. 
70.     def test_get_fieldsets(self):
71.         # get_fieldsets() is called when figuring out form fields (#18681).
72.         class BandAdmin(ModelAdmin):
73.             def get_fieldsets(self, request, obj=None):
74.                 return [(None, {'fields': ['name', 'bio']})]
75. 
76.         ma = BandAdmin(Band, self.site)
77.         form = ma.get_form(None)
78.         self.assertEqual(form._meta.fields, ['name', 'bio'])
79. 
80.         class InlineBandAdmin(TabularInline):
81.             model = Concert
82.             fk_name = 'main_band'
83.             can_delete = False
84. 
85.             def get_fieldsets(self, request, obj=None):
86.                 return [(None, {'fields': ['day', 'transport']})]
87. 
88.         ma = InlineBandAdmin(Band, self.site)
89.         form = ma.get_formset(None).form
90.         self.assertEqual(form._meta.fields, ['day', 'transport'])
91. 
92.     def test_lookup_allowed_allows_nonexistent_lookup(self):
93.         """
94.         A lookup_allowed allows a parameter whose field lookup doesn't exist.
95.         (#21129).
96.         """
97.         class BandAdmin(ModelAdmin):
98.             fields = ['name']
99. 
100.         ma = BandAdmin(Band, self.site)
101.         self.assertTrue(ma.lookup_allowed('name__nonexistent', 'test_value'))
102. 
103.     @isolate_apps('modeladmin')
104.     def test_lookup_allowed_onetoone(self):
105.         class Department(models.Model):
106.             code = models.CharField(max_length=4, unique=True)
107. 
108.         class Employee(models.Model):
109.             department = models.ForeignKey(Department, models.CASCADE, to_field="code")
110. 
111.         class EmployeeProfile(models.Model):
112.             employee = models.OneToOneField(Employee, models.CASCADE)
113. 
114.         class EmployeeInfo(models.Model):
115.             employee = models.OneToOneField(Employee, models.CASCADE)
116.             description = models.CharField(max_length=100)
117. 
118.         class EmployeeProfileAdmin(ModelAdmin):
119.             list_filter = [
120.                 'employee__employeeinfo__description',
121.                 'employee__department__code',
122.             ]
123. 
124.         ma = EmployeeProfileAdmin(EmployeeProfile, self.site)
125.         # Reverse OneToOneField
126.         self.assertIs(ma.lookup_allowed('employee__employeeinfo__description', 'test_value'), True)
127.         # OneToOneField and ForeignKey
128.         self.assertIs(ma.lookup_allowed('employee__department__code', 'test_value'), True)
129. 
130.     def test_field_arguments(self):
131.         # If fields is specified, fieldsets_add and fieldsets_change should
132.         # just stick the fields into a formsets structure and return it.
133.         class BandAdmin(ModelAdmin):
134.             fields = ['name']
135. 
136.         ma = BandAdmin(Band, self.site)
137. 
138.         self.assertEqual(list(ma.get_fields(request)), ['name'])
139.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name'])
140.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name']})])
141.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name']})])
142. 
143.     def test_field_arguments_restricted_on_form(self):
144.         # If fields or fieldsets is specified, it should exclude fields on the
145.         # Form class to the fields specified. This may cause errors to be
146.         # raised in the db layer if required model fields aren't in fields/
147.         # fieldsets, but that's preferable to ghost errors where a field in the
148.         # Form class isn't being displayed because it's not in fields/fieldsets.
149. 
150.         # Using `fields`.
151.         class BandAdmin(ModelAdmin):
152.             fields = ['name']
153. 
154.         ma = BandAdmin(Band, self.site)
155.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
156.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
157. 
158.         # Using `fieldsets`.
159.         class BandAdmin(ModelAdmin):
160.             fieldsets = [(None, {'fields': ['name']})]
161. 
162.         ma = BandAdmin(Band, self.site)
163.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
164.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
165. 
166.         # Using `exclude`.
167.         class BandAdmin(ModelAdmin):
168.             exclude = ['bio']
169. 
170.         ma = BandAdmin(Band, self.site)
171.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
172. 
173.         # You can also pass a tuple to `exclude`.
174.         class BandAdmin(ModelAdmin):
175.             exclude = ('bio',)
176. 
177.         ma = BandAdmin(Band, self.site)
178.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
179. 
180.         # Using `fields` and `exclude`.
181.         class BandAdmin(ModelAdmin):
182.             fields = ['name', 'bio']
183.             exclude = ['bio']
184. 
185.         ma = BandAdmin(Band, self.site)
186.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
187. 
188.     def test_custom_form_meta_exclude_with_readonly(self):
189.         """
190.         The custom ModelForm's `Meta.exclude` is respected when used in
191.         conjunction with `ModelAdmin.readonly_fields` and when no
192.         `ModelAdmin.exclude` is defined (#14496).
193.         """
194.         # With ModelAdmin
195.         class AdminBandForm(forms.ModelForm):
196.             class Meta:
197.                 model = Band
198.                 exclude = ['bio']
199. 
200.         class BandAdmin(ModelAdmin):
201.             readonly_fields = ['name']
202.             form = AdminBandForm
203. 
204.         ma = BandAdmin(Band, self.site)
205.         self.assertEqual(list(ma.get_form(request).base_fields), ['sign_date'])
206. 
207.         # With InlineModelAdmin
208.         class AdminConcertForm(forms.ModelForm):
209.             class Meta:
210.                 model = Concert
211.                 exclude = ['day']
212. 
213.         class ConcertInline(TabularInline):
214.             readonly_fields = ['transport']
215.             form = AdminConcertForm
216.             fk_name = 'main_band'
217.             model = Concert
218. 
219.         class BandAdmin(ModelAdmin):
220.             inlines = [ConcertInline]
221. 
222.         ma = BandAdmin(Band, self.site)
223.         self.assertEqual(
224.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
225.             ['main_band', 'opening_band', 'id', 'DELETE'])
226. 
227.     def test_custom_formfield_override_readonly(self):
228.         class AdminBandForm(forms.ModelForm):
229.             name = forms.CharField()
230. 
231.             class Meta:
232.                 exclude = ()
233.                 model = Band
234. 
235.         class BandAdmin(ModelAdmin):
236.             form = AdminBandForm
237.             readonly_fields = ['name']
238. 
239.         ma = BandAdmin(Band, self.site)
240. 
241.         # `name` shouldn't appear in base_fields because it's part of
242.         # readonly_fields.
243.         self.assertEqual(
244.             list(ma.get_form(request).base_fields),
245.             ['bio', 'sign_date']
246.         )
247.         # But it should appear in get_fields()/fieldsets() so it can be
248.         # displayed as read-only.
249.         self.assertEqual(
250.             list(ma.get_fields(request)),
251.             ['bio', 'sign_date', 'name']
252.         )
253.         self.assertEqual(
254.             list(ma.get_fieldsets(request)),
255.             [(None, {'fields': ['bio', 'sign_date', 'name']})]
256.         )
257. 
258.     def test_custom_form_meta_exclude(self):
259.         """
260.         The custom ModelForm's `Meta.exclude` is overridden if
261.         `ModelAdmin.exclude` or `InlineModelAdmin.exclude` are defined (#14496).
262.         """
263.         # With ModelAdmin
264.         class AdminBandForm(forms.ModelForm):
265.             class Meta:
266.                 model = Band
267.                 exclude = ['bio']
268. 
269.         class BandAdmin(ModelAdmin):
270.             exclude = ['name']
271.             form = AdminBandForm
272. 
273.         ma = BandAdmin(Band, self.site)
274.         self.assertEqual(list(ma.get_form(request).base_fields), ['bio', 'sign_date'])
275. 
276.         # With InlineModelAdmin
277.         class AdminConcertForm(forms.ModelForm):
278.             class Meta:
279.                 model = Concert
280.                 exclude = ['day']
281. 
282.         class ConcertInline(TabularInline):
283.             exclude = ['transport']
284.             form = AdminConcertForm
285.             fk_name = 'main_band'
286.             model = Concert
287. 
288.         class BandAdmin(ModelAdmin):
289.             inlines = [ConcertInline]
290. 
291.         ma = BandAdmin(Band, self.site)
292.         self.assertEqual(
293.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
294.             ['main_band', 'opening_band', 'day', 'id', 'DELETE']
295.         )
296. 
297.     def test_overriding_get_exclude(self):
298.         class BandAdmin(ModelAdmin):
299.             def get_exclude(self, request, obj=None):
300.                 return ['name']
301. 
302.         self.assertEqual(
303.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
304.             ['bio', 'sign_date']
305.         )
306. 
307.     def test_get_exclude_overrides_exclude(self):
308.         class BandAdmin(ModelAdmin):
309.             exclude = ['bio']
310. 
311.             def get_exclude(self, request, obj=None):
312.                 return ['name']
313. 
314.         self.assertEqual(
315.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
316.             ['bio', 'sign_date']
317.         )
318. 
319.     def test_get_exclude_takes_obj(self):
320.         class BandAdmin(ModelAdmin):
321.             def get_exclude(self, request, obj=None):
322.                 if obj:
323.                     return ['sign_date']
324.                 return ['name']
325. 
326.         self.assertEqual(
327.             list(BandAdmin(Band, self.site).get_form(request, self.band).base_fields),
328.             ['name', 'bio']
329.         )
330. 
331.     def test_custom_form_validation(self):
332.         # If a form is specified, it should use it allowing custom validation
333.         # to work properly. This won't break any of the admin widgets or media.
334.         class AdminBandForm(forms.ModelForm):
335.             delete = forms.BooleanField()
336. 
337.         class BandAdmin(ModelAdmin):
338.             form = AdminBandForm
339. 
340.         ma = BandAdmin(Band, self.site)
341.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date', 'delete'])
342.         self.assertEqual(type(ma.get_form(request).base_fields['sign_date'].widget), AdminDateWidget)
343. 
344.     def test_form_exclude_kwarg_override(self):
345.         """
346.         The `exclude` kwarg passed to `ModelAdmin.get_form()` overrides all
347.         other declarations (#8999).
348.         """
349.         class AdminBandForm(forms.ModelForm):
350.             class Meta:
351.                 model = Band
352.                 exclude = ['name']
353. 
354.         class BandAdmin(ModelAdmin):
355.             exclude = ['sign_date']
356.             form = AdminBandForm
357. 
358.             def get_form(self, request, obj=None, **kwargs):
359.                 kwargs['exclude'] = ['bio']
360.                 return super().get_form(request, obj, **kwargs)
361. 
362.         ma = BandAdmin(Band, self.site)
363.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
364. 
365.     def test_formset_exclude_kwarg_override(self):
366.         """
367.         The `exclude` kwarg passed to `InlineModelAdmin.get_formset()`
368.         overrides all other declarations (#8999).
369.         """
370.         class AdminConcertForm(forms.ModelForm):
371.             class Meta:
372.                 model = Concert
373.                 exclude = ['day']
374. 
375.         class ConcertInline(TabularInline):
376.             exclude = ['transport']
377.             form = AdminConcertForm
378.             fk_name = 'main_band'
379.             model = Concert
380. 
381.             def get_formset(self, request, obj=None, **kwargs):
382.                 kwargs['exclude'] = ['opening_band']
383.                 return super().get_formset(request, obj, **kwargs)
384. 
385.         class BandAdmin(ModelAdmin):
386.             inlines = [ConcertInline]
387. 
388.         ma = BandAdmin(Band, self.site)
389.         self.assertEqual(
390.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
391.             ['main_band', 'day', 'transport', 'id', 'DELETE']
392.         )
393. 
394.     def test_formset_overriding_get_exclude_with_form_fields(self):
395.         class AdminConcertForm(forms.ModelForm):
396.             class Meta:
397.                 model = Concert
398.                 fields = ['main_band', 'opening_band', 'day', 'transport']
399. 
400.         class ConcertInline(TabularInline):
401.             form = AdminConcertForm
402.             fk_name = 'main_band'
403.             model = Concert
404. 
405.             def get_exclude(self, request, obj=None):
406.                 return ['opening_band']
407. 
408.         class BandAdmin(ModelAdmin):
409.             inlines = [ConcertInline]
410. 
411.         ma = BandAdmin(Band, self.site)
412.         self.assertEqual(
413.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
414.             ['main_band', 'day', 'transport', 'id', 'DELETE']
415.         )
416. 
417.     def test_formset_overriding_get_exclude_with_form_exclude(self):
418.         class AdminConcertForm(forms.ModelForm):
419.             class Meta:
420.                 model = Concert
421.                 exclude = ['day']
422. 
423.         class ConcertInline(TabularInline):
424.             form = AdminConcertForm
425.             fk_name = 'main_band'
426.             model = Concert
427. 
428.             def get_exclude(self, request, obj=None):
429.                 return ['opening_band']
430. 
431.         class BandAdmin(ModelAdmin):
432.             inlines = [ConcertInline]
433. 
434.         ma = BandAdmin(Band, self.site)
435.         self.assertEqual(
436.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
437.             ['main_band', 'day', 'transport', 'id', 'DELETE']
438.         )
439. 
440.     def test_raw_id_fields_widget_override(self):
441.         """
442.         The autocomplete_fields, raw_id_fields, and radio_fields widgets may
443.         overridden by specifying a widget in get_formset().
444.         """
445.         class ConcertInline(TabularInline):
446.             model = Concert
447.             fk_name = 'main_band'
448.             raw_id_fields = ('opening_band',)
449. 
450.             def get_formset(self, request, obj=None, **kwargs):
451.                 kwargs['widgets'] = {'opening_band': Select}
452.                 return super().get_formset(request, obj, **kwargs)
453. 
454.         class BandAdmin(ModelAdmin):
455.             inlines = [ConcertInline]
456. 
457.         ma = BandAdmin(Band, self.site)
458.         band_widget = list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields['opening_band'].widget
459.         # Without the override this would be ForeignKeyRawIdWidget.
460.         self.assertIsInstance(band_widget, Select)
461. 
462.     def test_queryset_override(self):
463.         # If the queryset of a ModelChoiceField in a custom form is overridden,
464.         # RelatedFieldWidgetWrapper doesn't mess that up.
465.         band2 = Band.objects.create(name='The Beatles', bio='', sign_date=date(1962, 1, 1))
466. 
467.         ma = ModelAdmin(Concert, self.site)
468.         form = ma.get_form(request)()
469. 
470.         self.assertHTMLEqual(
471.             str(form["main_band"]),
472.             '<div class="related-widget-wrapper">'
473.             '<select name="main_band" id="id_main_band" required>'
474.             '<option value="" selected>---------</option>'
475.             '<option value="%d">The Beatles</option>'
476.             '<option value="%d">The Doors</option>'
477.             '</select></div>' % (band2.id, self.band.id)
478.         )
479. 
480.         class AdminConcertForm(forms.ModelForm):
481.             def __init__(self, *args, **kwargs):
482.                 super().__init__(*args, **kwargs)
483.                 self.fields["main_band"].queryset = Band.objects.filter(name='The Doors')
484. 
485.         class ConcertAdminWithForm(ModelAdmin):
486.             form = AdminConcertForm
487. 
488.         ma = ConcertAdminWithForm(Concert, self.site)
489.         form = ma.get_form(request)()
490. 
491.         self.assertHTMLEqual(
492.             str(form["main_band"]),
493.             '<div class="related-widget-wrapper">'
494.             '<select name="main_band" id="id_main_band" required>'
495.             '<option value="" selected>---------</option>'
496.             '<option value="%d">The Doors</option>'
497.             '</select></div>' % self.band.id
498.         )
499. 
500.     def test_regression_for_ticket_15820(self):

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 19:08:04,218 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="I've identified one relevant test case in the partial content of `tests/modeladmin/tests.py`. To find more examples, especially those dealing directly with `formfield_for_foreignkey` and `formfield_for_manytomany` on `ModelAdmin` rather than inlines, I need the complete content of this file. Additionally, `tests/admin_views/tests.py` is a primary candidate for tests that cover `ModelAdmin` form customizations and widget overrides, as it tests the views where these forms are rendered. The previously requested `tests/admin_views/test_forms.py` was not relevant." query='Please provide the full content of `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`.' extra_requirements='' purpose="I need to find test cases that demonstrate overriding widgets in `ModelAdmin` form fields to find the most relevant examples for the user's issue."
2025-12-23 19:08:04,219 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`.
2025-12-23 19:08:04,220 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 19:08:04,220 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 19:08:04,221 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 19:08:04,221 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`.
Purpose: I need to find test cases that demonstrate overriding widgets in `ModelAdmin` form fields to find the most relevant examples for the user's issue.
2025-12-23 19:08:09,651 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first read the full content of `tests/modeladmin/tests.py` to get an initial understanding of the test cases. Then, I will read the full content of `tests/admin_views/tests.py` to find more relevant examples. This will allow me to find test cases that demonstrate overriding widgets in `ModelAdmin` form fields.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/admin_views/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2113, 'candidates_token_count': 118, 'total_token_count': 2415, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2113}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 118}], 'thoughts_token_count': 184, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.09148734302844032, 'model_name': 'gemini-2.5-pro'} id='run--013bf880-8e81-4127-887c-996be52af251-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/modeladmin/tests.py'}, 'id': '02a5994e-5e51-4f55-9d47-ffaaade82677', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_views/tests.py'}, 'id': '6e4cf296-3fac-47e9-95df-6b4808aa84b6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2113, 'output_tokens': 118, 'total_tokens': 2415, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 184}}
2025-12-23 19:08:12,897 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of both `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`. My next step is to look for specific examples of widget overriding within these test files. I will start by searching for the term "widget" to locate relevant code snippets that demonstrate how to customize form field widgets in the Django admin interface.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/admin_views/tests.py", "text": "widget"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18528, 'candidates_token_count': 141, 'total_token_count': 18747, 'cached_content_token_count': 1887, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18528}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1887}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 141}], 'thoughts_token_count': 78}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07981023044450909, 'model_name': 'gemini-2.5-pro'} id='run--c9fe1bff-4ce2-4207-889b-fe587e9ec574-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/modeladmin/tests.py', 'text': 'widget'}, 'id': '41393d13-2077-452d-99a8-a225ec525a12', 'type': 'tool_call'}, {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/admin_views/tests.py', 'text': 'widget'}, 'id': '05f24686-4731-4a78-ba1b-7bac9cf2d492', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18528, 'output_tokens': 141, 'total_tokens': 18747, 'input_token_details': {'cache_read': 1887}, 'output_token_details': {'reasoning': 78}}
2025-12-23 19:08:18,422 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have found a promising test case named `test_raw_id_fields_widget_override` in `tests/modeladmin/tests.py` that appears to demonstrate how to override a widget in a `ModelAdmin` form field. To get the full context of this test case, I will now read the code for this specific test.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 440.0, "relative_path": "tests/modeladmin/tests.py", "end_line": 461.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 57505, 'candidates_token_count': 98, 'total_token_count': 57906, 'prompt_tokens_details': [{'modality': 1, 'token_count': 57505}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 98}], 'thoughts_token_count': 303, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.37657239485760124, 'model_name': 'gemini-2.5-pro'} id='run--88a9f689-6994-42b5-98ee-560cd124151d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 440.0, 'relative_path': 'tests/modeladmin/tests.py', 'end_line': 461.0}, 'id': 'a9d14962-248a-4d8b-a3f9-7f251dccf88b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 57505, 'output_tokens': 98, 'total_tokens': 57906, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 303}}
2025-12-23 19:08:24,022 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully located and examined the `test_raw_id_fields_widget_override` test case in `tests/modeladmin/tests.py`, which demonstrates how to override a widget within an inline `ModelAdmin` by passing a `widgets` dictionary to the `get_formset` method. This is a great starting point. To provide a more complete answer, I will now investigate `tests/admin_views/tests.py` for additional examples of widget overriding, specifically looking for a test case that modifies a widget directly on a `ModelAdmin` rather than an inline. This will allow me to present a more comprehensive overview of the available techniques.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/admin_views/tests.py", "text": "widget"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 58033, 'candidates_token_count': 168, 'total_token_count': 58458, 'cached_content_token_count': 17420, 'prompt_tokens_details': [{'modality': 1, 'token_count': 58033}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17420}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 168}], 'thoughts_token_count': 257}, 'finish_reason': 'STOP', 'avg_logprobs': -0.259686583564395, 'model_name': 'gemini-2.5-pro'} id='run--8e20dcea-51d2-44e2-84d1-a621492b7da0-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/admin_views/tests.py', 'text': 'widget'}, 'id': '0aac6095-277b-4a9c-9b34-d9e12ffa38ca', 'type': 'tool_call'}] usage_metadata={'input_tokens': 58033, 'output_tokens': 168, 'total_tokens': 58458, 'input_token_details': {'cache_read': 17420}, 'output_token_details': {'reasoning': 257}}
2025-12-23 19:08:38,920 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have finished searching the requested files for test cases that demonstrate overriding widgets in `ModelAdmin` form fields. I found a relevant example in `tests/modeladmin/tests.py` within the `test_raw_id_fields_widget_override` test case. This test shows how to override a widget in an inline `ModelAdmin` by passing a `widgets` dictionary to the `get_formset` method, which is a useful pattern for customization. I did not find a similar direct example of widget overriding on a `ModelAdmin` in `tests/admin_views/tests.py`.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 88556, 'candidates_token_count': 122, 'total_token_count': 89501, 'prompt_tokens_details': [{'modality': 1, 'token_count': 88556}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 122}], 'thoughts_token_count': 823, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.8780469425389024, 'model_name': 'gemini-2.5-pro'} id='run--950758ad-0180-43f2-ba8d-1cbd7fb4ccfe-0' usage_metadata={'input_tokens': 88556, 'output_tokens': 122, 'total_tokens': 89501, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 823}}
2025-12-23 19:08:38,925 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases that demonstrate overriding widgets in `ModelAdmin` form fields to find the most relevant examples for the user's issue.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_views/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import os
3. import re
4. import unittest
5. from unittest import mock
6. from urllib.parse import parse_qsl, urljoin, urlparse
7. 
8. import pytz
9. 
10. from django.contrib.admin import AdminSite, ModelAdmin
11. from django.contrib.admin.helpers import ACTION_CHECKBOX_NAME
12. from django.contrib.admin.models import ADDITION, DELETION, LogEntry
13. from django.contrib.admin.options import TO_FIELD_VAR
14. from django.contrib.admin.templatetags.admin_urls import add_preserved_filters
15. from django.contrib.admin.tests import AdminSeleniumTestCase
16. from django.contrib.admin.utils import quote
17. from django.contrib.admin.views.main import IS_POPUP_VAR
18. from django.contrib.auth import REDIRECT_FIELD_NAME, get_permission_codename
19. from django.contrib.auth.models import Group, Permission, User
20. from django.contrib.contenttypes.models import ContentType
21. from django.core import mail
22. from django.core.checks import Error
23. from django.core.files import temp as tempfile
24. from django.forms.utils import ErrorList
25. from django.template.response import TemplateResponse
26. from django.test import (
27.     TestCase, modify_settings, override_settings, skipUnlessDBFeature,
28. )
29. from django.test.utils import override_script_prefix
30. from django.urls import NoReverseMatch, resolve, reverse
31. from django.utils import formats, translation
32. from django.utils.cache import get_max_age
33. from django.utils.encoding import iri_to_uri
34. from django.utils.html import escape
35. from django.utils.http import urlencode
36. 
37. from . import customadmin
38. from .admin import CityAdmin, site, site2
39. from .models import (
40.     Actor, AdminOrderedAdminMethod, AdminOrderedCallable, AdminOrderedField,
41.     AdminOrderedModelMethod, Album, Answer, Answer2, Article, BarAccount, Book,
42.     Bookmark, Category, Chapter, ChapterXtra1, ChapterXtra2, Character, Child,
43.     Choice, City, Collector, Color, ComplexSortedPerson, CoverLetter,
44.     CustomArticle, CyclicOne, CyclicTwo, DooHickey, Employee, EmptyModel,
45.     Fabric, FancyDoodad, FieldOverridePost, FilteredManager, FooAccount,
46.     FoodDelivery, FunkyTag, Gallery, Grommet, Inquisition, Language, Link,
47.     MainPrepopulated, Media, ModelWithStringPrimaryKey, OtherStory, Paper,
48.     Parent, ParentWithDependentChildren, ParentWithUUIDPK, Person, Persona,
49.     Picture, Pizza, Plot, PlotDetails, PluggableSearchPerson, Podcast, Post,
50.     PrePopulatedPost, Promo, Question, ReadablePizza, ReadOnlyPizza,
51.     Recommendation, Recommender, RelatedPrepopulated, RelatedWithUUIDPKModel,
52.     Report, Restaurant, RowLevelChangePermissionModel, SecretHideout, Section,
53.     ShortMessage, Simple, Song, State, Story, SuperSecretHideout, SuperVillain,
54.     Telegram, TitleTranslation, Topping, UnchangeableObject, UndeletableObject,
55.     UnorderedObject, UserProxy, Villain, Vodcast, Whatsit, Widget, Worker,
56.     WorkHour,
57. )
58. 
59. ERROR_MESSAGE = "Please enter the correct username and password \
60. for a staff account. Note that both fields may be case-sensitive."
61. 
62. MULTIPART_ENCTYPE = 'enctype="multipart/form-data"'
63. 
64. 
65. class AdminFieldExtractionMixin:
66.     """
67.     Helper methods for extracting data from AdminForm.
68.     """
69.     def get_admin_form_fields(self, response):
70.         """
71.         Return a list of AdminFields for the AdminForm in the response.
72.         """
73.         fields = []
74.         for fieldset in response.context['adminform']:
75.             for field_line in fieldset:
76.                 fields.extend(field_line)
77.         return fields
78. 
79.     def get_admin_readonly_fields(self, response):
80.         """
81.         Return the readonly fields for the response's AdminForm.
82.         """
83.         return [f for f in self.get_admin_form_fields(response) if f.is_readonly]
84. 
85.     def get_admin_readonly_field(self, response, field_name):
86.         """
87.         Return the readonly field for the given field_name.
88.         """
89.         admin_readonly_fields = self.get_admin_readonly_fields(response)
90.         for field in admin_readonly_fields:
91.             if field.field['name'] == field_name:
92.                 return field
93. 
94. 
95. @override_settings(ROOT_URLCONF='admin_views.urls', USE_I18N=True, USE_L10N=False, LANGUAGE_CODE='en')
96. class AdminViewBasicTestCase(TestCase):
97. 
98.     @classmethod
99.     def setUpTestData(cls):
100.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
101.         cls.s1 = Section.objects.create(name='Test section')
102.         cls.a1 = Article.objects.create(
103.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
104.         )
105.         cls.a2 = Article.objects.create(
106.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
107.         )
108.         cls.a3 = Article.objects.create(
109.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
110.         )
111.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
112.         cls.color1 = Color.objects.create(value='Red', warm=True)
113.         cls.color2 = Color.objects.create(value='Orange', warm=True)
114.         cls.color3 = Color.objects.create(value='Blue', warm=False)
115.         cls.color4 = Color.objects.create(value='Green', warm=False)
116.         cls.fab1 = Fabric.objects.create(surface='x')
117.         cls.fab2 = Fabric.objects.create(surface='y')
118.         cls.fab3 = Fabric.objects.create(surface='plain')
119.         cls.b1 = Book.objects.create(name='Book 1')
120.         cls.b2 = Book.objects.create(name='Book 2')
121.         cls.pro1 = Promo.objects.create(name='Promo 1', book=cls.b1)
122.         cls.pro1 = Promo.objects.create(name='Promo 2', book=cls.b2)
123.         cls.chap1 = Chapter.objects.create(title='Chapter 1', content='[ insert contents here ]', book=cls.b1)
124.         cls.chap2 = Chapter.objects.create(title='Chapter 2', content='[ insert contents here ]', book=cls.b1)
125.         cls.chap3 = Chapter.objects.create(title='Chapter 1', content='[ insert contents here ]', book=cls.b2)
126.         cls.chap4 = Chapter.objects.create(title='Chapter 2', content='[ insert contents here ]', book=cls.b2)
127.         cls.cx1 = ChapterXtra1.objects.create(chap=cls.chap1, xtra='ChapterXtra1 1')
128.         cls.cx2 = ChapterXtra1.objects.create(chap=cls.chap3, xtra='ChapterXtra1 2')
129.         Actor.objects.create(name='Palin', age=27)
130. 
131.         # Post data for edit inline
132.         cls.inline_post_data = {
133.             "name": "Test section",
134.             # inline data
135.             "article_set-TOTAL_FORMS": "6",
136.             "article_set-INITIAL_FORMS": "3",
137.             "article_set-MAX_NUM_FORMS": "0",
138.             "article_set-0-id": cls.a1.pk,
139.             # there is no title in database, give one here or formset will fail.
140.             "article_set-0-title": "Norske bostaver æøå skaper problemer",
141.             "article_set-0-content": "&lt;p&gt;Middle content&lt;/p&gt;",
142.             "article_set-0-date_0": "2008-03-18",
143.             "article_set-0-date_1": "11:54:58",
144.             "article_set-0-section": cls.s1.pk,
145.             "article_set-1-id": cls.a2.pk,
146.             "article_set-1-title": "Need a title.",
147.             "article_set-1-content": "&lt;p&gt;Oldest content&lt;/p&gt;",
148.             "article_set-1-date_0": "2000-03-18",
149.             "article_set-1-date_1": "11:54:58",
150.             "article_set-2-id": cls.a3.pk,
151.             "article_set-2-title": "Need a title.",
152.             "article_set-2-content": "&lt;p&gt;Newest content&lt;/p&gt;",
153.             "article_set-2-date_0": "2009-03-18",
154.             "article_set-2-date_1": "11:54:58",
155.             "article_set-3-id": "",
156.             "article_set-3-title": "",
157.             "article_set-3-content": "",
158.             "article_set-3-date_0": "",
159.             "article_set-3-date_1": "",
160.             "article_set-4-id": "",
161.             "article_set-4-title": "",
162.             "article_set-4-content": "",
163.             "article_set-4-date_0": "",
164.             "article_set-4-date_1": "",
165.             "article_set-5-id": "",
166.             "article_set-5-title": "",
167.             "article_set-5-content": "",
168.             "article_set-5-date_0": "",
169.             "article_set-5-date_1": "",
170.         }
171. 
172.     def setUp(self):
173.         self.client.force_login(self.superuser)
174. 
175.     def assertContentBefore(self, response, text1, text2, failing_msg=None):
176.         """
177.         Testing utility asserting that text1 appears before text2 in response
178.         content.
179.         """
180.         self.assertEqual(response.status_code, 200)
181.         self.assertLess(
182.             response.content.index(text1.encode()),
183.             response.content.index(text2.encode()),
184.             (failing_msg or '') + '\nResponse:\n' + response.content.decode(response.charset)
185.         )
186. 
187. 
188. class AdminViewBasicTest(AdminViewBasicTestCase):
189.     def test_trailing_slash_required(self):
190.         """
191.         If you leave off the trailing slash, app should redirect and add it.
192.         """
193.         add_url = reverse('admin:admin_views_article_add')
194.         response = self.client.get(add_url[:-1])
195.         self.assertRedirects(response, add_url, status_code=301)
196. 
197.     def test_basic_add_GET(self):
198.         """
199.         A smoke test to ensure GET on the add_view works.
200.         """
201.         response = self.client.get(reverse('admin:admin_views_section_add'))
202.         self.assertIsInstance(response, TemplateResponse)
203.         self.assertEqual(response.status_code, 200)
204. 
205.     def test_add_with_GET_args(self):
206.         response = self.client.get(reverse('admin:admin_views_section_add'), {'name': 'My Section'})
207.         self.assertContains(
208.             response, 'value="My Section"',
209.             msg_prefix="Couldn't find an input with the right value in the response"
210.         )
211. 
212.     def test_basic_edit_GET(self):
213.         """
214.         A smoke test to ensure GET on the change_view works.
215.         """
216.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
217.         self.assertIsInstance(response, TemplateResponse)
218.         self.assertEqual(response.status_code, 200)
219. 
220.     def test_basic_edit_GET_string_PK(self):
221.         """
222.         GET on the change_view (when passing a string as the PK argument for a
223.         model with an integer PK field) redirects to the index page with a
224.         message saying the object doesn't exist.
225.         """
226.         response = self.client.get(reverse('admin:admin_views_section_change', args=(quote("abc/<b>"),)), follow=True)
227.         self.assertRedirects(response, reverse('admin:index'))
228.         self.assertEqual(
229.             [m.message for m in response.context['messages']],
230.             ['section with ID “abc/<b>” doesn’t exist. Perhaps it was deleted?']
231.         )
232. 
233.     def test_basic_edit_GET_old_url_redirect(self):
234.         """
235.         The change URL changed in Django 1.9, but the old one still redirects.
236.         """
237.         response = self.client.get(
238.             reverse('admin:admin_views_section_change', args=(self.s1.pk,)).replace('change/', '')
239.         )
240.         self.assertRedirects(response, reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
241. 
242.     def test_basic_inheritance_GET_string_PK(self):
243.         """
244.         GET on the change_view (for inherited models) redirects to the index
245.         page with a message saying the object doesn't exist.
246.         """
247.         response = self.client.get(reverse('admin:admin_views_supervillain_change', args=('abc',)), follow=True)
248.         self.assertRedirects(response, reverse('admin:index'))
249.         self.assertEqual(
250.             [m.message for m in response.context['messages']],
251.             ['super villain with ID “abc” doesn’t exist. Perhaps it was deleted?']
252.         )
253. 
254.     def test_basic_add_POST(self):
255.         """
256.         A smoke test to ensure POST on add_view works.
257.         """
258.         post_data = {
259.             "name": "Another Section",
260.             # inline data
261.             "article_set-TOTAL_FORMS": "3",
262.             "article_set-INITIAL_FORMS": "0",
263.             "article_set-MAX_NUM_FORMS": "0",
264.         }
265.         response = self.client.post(reverse('admin:admin_views_section_add'), post_data)
266.         self.assertEqual(response.status_code, 302)  # redirect somewhere
267. 
268.     def test_popup_add_POST(self):
269.         """
270.         Ensure http response from a popup is properly escaped.
271.         """
272.         post_data = {
273.             '_popup': '1',
274.             'title': 'title with a new\nline',
275.             'content': 'some content',
276.             'date_0': '2010-09-10',
277.             'date_1': '14:55:39',
278.         }
279.         response = self.client.post(reverse('admin:admin_views_article_add'), post_data)
280.         self.assertContains(response, 'title with a new\\nline')
281. 
282.     def test_basic_edit_POST(self):
283.         """
284.         A smoke test to ensure POST on edit_view works.
285.         """
286.         url = reverse('admin:admin_views_section_change', args=(self.s1.pk,))
287.         response = self.client.post(url, self.inline_post_data)
288.         self.assertEqual(response.status_code, 302)  # redirect somewhere
289. 
290.     def test_edit_save_as(self):
291.         """
292.         Test "save as".
293.         """
294.         post_data = self.inline_post_data.copy()
295.         post_data.update({
296.             '_saveasnew': 'Save+as+new',
297.             "article_set-1-section": "1",
298.             "article_set-2-section": "1",
299.             "article_set-3-section": "1",
300.             "article_set-4-section": "1",
301.             "article_set-5-section": "1",
302.         })
303.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), post_data)
304.         self.assertEqual(response.status_code, 302)  # redirect somewhere
305. 
306.     def test_edit_save_as_delete_inline(self):
307.         """
308.         Should be able to "Save as new" while also deleting an inline.
309.         """
310.         post_data = self.inline_post_data.copy()
311.         post_data.update({
312.             '_saveasnew': 'Save+as+new',
313.             "article_set-1-section": "1",
314.             "article_set-2-section": "1",
315.             "article_set-2-DELETE": "1",
316.             "article_set-3-section": "1",
317.         })
318.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), post_data)
319.         self.assertEqual(response.status_code, 302)
320.         # started with 3 articles, one was deleted.
321.         self.assertEqual(Section.objects.latest('id').article_set.count(), 2)
322. 
323.     def test_change_list_column_field_classes(self):
324.         response = self.client.get(reverse('admin:admin_views_article_changelist'))
325.         # callables display the callable name.
326.         self.assertContains(response, 'column-callable_year')
327.         self.assertContains(response, 'field-callable_year')
328.         # lambdas display as "lambda" + index that they appear in list_display.
329.         self.assertContains(response, 'column-lambda8')
330.         self.assertContains(response, 'field-lambda8')
331. 
332.     def test_change_list_sorting_callable(self):
333.         """
334.         Ensure we can sort on a list_display field that is a callable
335.         (column 2 is callable_year in ArticleAdmin)
336.         """
337.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': 2})
338.         self.assertContentBefore(
339.             response, 'Oldest content', 'Middle content',
340.             "Results of sorting on callable are out of order."
341.         )
342.         self.assertContentBefore(
343.             response, 'Middle content', 'Newest content',
344.             "Results of sorting on callable are out of order."
345.         )
346. 
347.     def test_change_list_sorting_property(self):
348.         """
349.         Sort on a list_display field that is a property (column 10 is
350.         a property in Article model).
351.         """
352.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': 10})
353.         self.assertContentBefore(
354.             response,
355.             'Oldest content',
356.             'Middle content',
357.             'Results of sorting on property are out of order.',
358.         )
359.         self.assertContentBefore(
360.             response,
361.             'Middle content',
362.             'Newest content',
363.             'Results of sorting on property are out of order.',
364.         )
365. 
366.     def test_change_list_sorting_callable_query_expression(self):
367.         """Query expressions may be used for admin_order_field."""
368.         tests = [
369.             ('order_by_expression', 9),
370.             ('order_by_f_expression', 12),
371.             ('order_by_orderby_expression', 13),
372.         ]
373.         for admin_order_field, index in tests:
374.             with self.subTest(admin_order_field):
375.                 response = self.client.get(
376.                     reverse('admin:admin_views_article_changelist'),
377.                     {'o': index},
378.                 )
379.                 self.assertContentBefore(
380.                     response, 'Oldest content', 'Middle content',
381.                     'Results of sorting on callable are out of order.'
382.                 )
383.                 self.assertContentBefore(
384.                     response, 'Middle content', 'Newest content',
385.                     'Results of sorting on callable are out of order.'
386.                 )
387. 
388.     def test_change_list_sorting_callable_query_expression_reverse(self):
389.         tests = [
390.             ('order_by_expression', -9),
391.             ('order_by_f_expression', -12),
392.             ('order_by_orderby_expression', -13),
393.         ]
394.         for admin_order_field, index in tests:
395.             with self.subTest(admin_order_field):
396.                 response = self.client.get(
397.                     reverse('admin:admin_views_article_changelist'),
398.                     {'o': index},
399.                 )
400.                 self.assertContentBefore(
401.                     response, 'Middle content', 'Oldest content',
402.                     'Results of sorting on callable are out of order.'
403.                 )
404.                 self.assertContentBefore(
405.                     response, 'Newest content', 'Middle content',
406.                     'Results of sorting on callable are out of order.'
407.                 )
408. 
409.     def test_change_list_sorting_model(self):
410.         """
411.         Ensure we can sort on a list_display field that is a Model method
412.         (column 3 is 'model_year' in ArticleAdmin)
413.         """
414.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '-3'})
415.         self.assertContentBefore(
416.             response, 'Newest content', 'Middle content',
417.             "Results of sorting on Model method are out of order."
418.         )
419.         self.assertContentBefore(
420.             response, 'Middle content', 'Oldest content',
421.             "Results of sorting on Model method are out of order."
422.         )
423. 
424.     def test_change_list_sorting_model_admin(self):
425.         """
426.         Ensure we can sort on a list_display field that is a ModelAdmin method
427.         (column 4 is 'modeladmin_year' in ArticleAdmin)
428.         """
429.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '4'})
430.         self.assertContentBefore(
431.             response, 'Oldest content', 'Middle content',
432.             "Results of sorting on ModelAdmin method are out of order."
433.         )
434.         self.assertContentBefore(
435.             response, 'Middle content', 'Newest content',
436.             "Results of sorting on ModelAdmin method are out of order."
437.         )
438. 
439.     def test_change_list_sorting_model_admin_reverse(self):
440.         """
441.         Ensure we can sort on a list_display field that is a ModelAdmin
442.         method in reverse order (i.e. admin_order_field uses the '-' prefix)
443.         (column 6 is 'model_year_reverse' in ArticleAdmin)
444.         """
445.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '6'})
446.         self.assertContentBefore(
447.             response, '2009', '2008',
448.             "Results of sorting on ModelAdmin method are out of order."
449.         )
450.         self.assertContentBefore(
451.             response, '2008', '2000',
452.             "Results of sorting on ModelAdmin method are out of order."
453.         )
454.         # Let's make sure the ordering is right and that we don't get a
455.         # FieldError when we change to descending order
456.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '-6'})
457.         self.assertContentBefore(
458.             response, '2000', '2008',
459.             "Results of sorting on ModelAdmin method are out of order."
460.         )
461.         self.assertContentBefore(
462.             response, '2008', '2009',
463.             "Results of sorting on ModelAdmin method are out of order."
464.         )
465. 
466.     def test_change_list_sorting_multiple(self):
467.         p1 = Person.objects.create(name="Chris", gender=1, alive=True)
468.         p2 = Person.objects.create(name="Chris", gender=2, alive=True)
469.         p3 = Person.objects.create(name="Bob", gender=1, alive=True)
470.         link1 = reverse('admin:admin_views_person_change', args=(p1.pk,))
471.         link2 = reverse('admin:admin_views_person_change', args=(p2.pk,))
472.         link3 = reverse('admin:admin_views_person_change', args=(p3.pk,))
473. 
474.         # Sort by name, gender
475.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {'o': '1.2'})
476.         self.assertContentBefore(response, link3, link1)
477.         self.assertContentBefore(response, link1, link2)
478. 
479.         # Sort by gender descending, name
480.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {'o': '-2.1'})
481.         self.assertContentBefore(response, link2, link3)
482.         self.assertContentBefore(response, link3, link1)
483. 
484.     def test_change_list_sorting_preserve_queryset_ordering(self):
485.         """
486.         If no ordering is defined in `ModelAdmin.ordering` or in the query
487.         string, then the underlying order of the queryset should not be
488.         changed, even if it is defined in `Modeladmin.get_queryset()`.
489.         Refs #11868, #7309.
490.         """
491.         p1 = Person.objects.create(name="Amy", gender=1, alive=True, age=80)
492.         p2 = Person.objects.create(name="Bob", gender=1, alive=True, age=70)
493.         p3 = Person.objects.create(name="Chris", gender=2, alive=False, age=60)
494.         link1 = reverse('admin:admin_views_person_change', args=(p1.pk,))
495.         link2 = reverse('admin:admin_views_person_change', args=(p2.pk,))
496.         link3 = reverse('admin:admin_views_person_change', args=(p3.pk,))
497. 
498.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {})
499.         self.assertContentBefore(response, link3, link2)
500.         self.assertContentBefore(response, link2, link1)


File: tests/admin_views/tests.py
Line number range: 1420 - 2417
Content:
@override_settings(
    ROOT_URLCONF='admin_views.urls',
    # Test with the admin's documented list of required context processors.
    TEMPLATES=[{
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    }],
)
class AdminViewPermissionsTest(TestCase):
    """Tests for Admin Views Permissions."""

    @classmethod
    def setUpTestData(cls):
        cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
        cls.viewuser = User.objects.create_user(username='viewuser', password='secret', is_staff=True)
        cls.adduser = User.objects.create_user(username='adduser', password='secret', is_staff=True)
        cls.changeuser = User.objects.create_user(username='changeuser', password='secret', is_staff=True)
        cls.deleteuser = User.objects.create_user(username='deleteuser', password='secret', is_staff=True)
        cls.joepublicuser = User.objects.create_user(username='joepublic', password='secret')
        cls.nostaffuser = User.objects.create_user(username='nostaff', password='secret')
        cls.s1 = Section.objects.create(name='Test section')
        cls.a1 = Article.objects.create(
            content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1,
            another_section=cls.s1,
        )
        cls.a2 = Article.objects.create(
            content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
        )
        cls.a3 = Article.objects.create(
            content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
        )
        cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')

        # Setup permissions, for our users who can add, change, and delete.
        opts = Article._meta

        # User who can view Articles
        cls.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('view', opts)))
        # User who can add Articles
        cls.adduser.user_permissions.add(get_perm(Article, get_permission_codename('add', opts)))
        # User who can change Articles
        cls.changeuser.user_permissions.add(get_perm(Article, get_permission_codename('change', opts)))
        cls.nostaffuser.user_permissions.add(get_perm(Article, get_permission_codename('change', opts)))

        # User who can delete Articles
        cls.deleteuser.user_permissions.add(get_perm(Article, get_permission_codename('delete', opts)))
        cls.deleteuser.user_permissions.add(get_perm(Section, get_permission_codename('delete', Section._meta)))

        # login POST dicts
        cls.index_url = reverse('admin:index')
        cls.super_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'super',
            'password': 'secret',
        }
        cls.super_email_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'super@example.com',
            'password': 'secret',
        }
        cls.super_email_bad_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'super@example.com',
            'password': 'notsecret',
        }
        cls.adduser_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'adduser',
            'password': 'secret',
        }
        cls.changeuser_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'changeuser',
            'password': 'secret',
        }
        cls.deleteuser_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'deleteuser',
            'password': 'secret',
        }
        cls.nostaff_login = {
            REDIRECT_FIELD_NAME: reverse('has_permission_admin:index'),
            'username': 'nostaff',
            'password': 'secret',
        }
        cls.joepublic_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'joepublic',
            'password': 'secret',
        }
        cls.viewuser_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'username': 'viewuser',
            'password': 'secret',
        }
        cls.no_username_login = {
            REDIRECT_FIELD_NAME: cls.index_url,
            'password': 'secret',
        }

    def test_login(self):
        """
        Make sure only staff members can log in.

        Successful posts to the login page will redirect to the original url.
        Unsuccessful attempts will continue to render the login page with
        a 200 status code.
        """
        login_url = '%s?next=%s' % (reverse('admin:login'), reverse('admin:index'))
        # Super User
        response = self.client.get(self.index_url)
        self.assertRedirects(response, login_url)
        login = self.client.post(login_url, self.super_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)
        self.client.get(reverse('admin:logout'))

        # Test if user enters email address
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        login = self.client.post(login_url, self.super_email_login)
        self.assertContains(login, ERROR_MESSAGE)
        # only correct passwords get a username hint
        login = self.client.post(login_url, self.super_email_bad_login)
        self.assertContains(login, ERROR_MESSAGE)
        new_user = User(username='jondoe', password='secret', email='super@example.com')
        new_user.save()
        # check to ensure if there are multiple email addresses a user doesn't get a 500
        login = self.client.post(login_url, self.super_email_login)
        self.assertContains(login, ERROR_MESSAGE)

        # View User
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        login = self.client.post(login_url, self.viewuser_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)
        self.client.get(reverse('admin:logout'))

        # Add User
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        login = self.client.post(login_url, self.adduser_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)
        self.client.get(reverse('admin:logout'))

        # Change User
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        login = self.client.post(login_url, self.changeuser_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)
        self.client.get(reverse('admin:logout'))

        # Delete User
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        login = self.client.post(login_url, self.deleteuser_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)
        self.client.get(reverse('admin:logout'))

        # Regular User should not be able to login.
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        login = self.client.post(login_url, self.joepublic_login)
        self.assertEqual(login.status_code, 200)
        self.assertContains(login, ERROR_MESSAGE)

        # Requests without username should not return 500 errors.
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        login = self.client.post(login_url, self.no_username_login)
        self.assertEqual(login.status_code, 200)
        self.assertFormError(login, 'form', 'username', ['This field is required.'])

    def test_login_redirect_for_direct_get(self):
        """
        Login redirect should be to the admin index page when going directly to
        /admin/login/.
        """
        response = self.client.get(reverse('admin:login'))
        self.assertEqual(response.status_code, 200)
        self.assertEqual(response.context[REDIRECT_FIELD_NAME], reverse('admin:index'))

    def test_login_has_permission(self):
        # Regular User should not be able to login.
        response = self.client.get(reverse('has_permission_admin:index'))
        self.assertEqual(response.status_code, 302)
        login = self.client.post(reverse('has_permission_admin:login'), self.joepublic_login)
        self.assertEqual(login.status_code, 200)
        self.assertContains(login, 'permission denied')

        # User with permissions should be able to login.
        response = self.client.get(reverse('has_permission_admin:index'))
        self.assertEqual(response.status_code, 302)
        login = self.client.post(reverse('has_permission_admin:login'), self.nostaff_login)
        self.assertRedirects(login, reverse('has_permission_admin:index'))
        self.assertFalse(login.context)
        self.client.get(reverse('has_permission_admin:logout'))

        # Staff should be able to login.
        response = self.client.get(reverse('has_permission_admin:index'))
        self.assertEqual(response.status_code, 302)
        login = self.client.post(reverse('has_permission_admin:login'), {
            REDIRECT_FIELD_NAME: reverse('has_permission_admin:index'),
            'username': 'deleteuser',
            'password': 'secret',
        })
        self.assertRedirects(login, reverse('has_permission_admin:index'))
        self.assertFalse(login.context)
        self.client.get(reverse('has_permission_admin:logout'))

    def test_login_successfully_redirects_to_original_URL(self):
        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)
        query_string = 'the-answer=42'
        redirect_url = '%s?%s' % (self.index_url, query_string)
        new_next = {REDIRECT_FIELD_NAME: redirect_url}
        post_data = self.super_login.copy()
        post_data.pop(REDIRECT_FIELD_NAME)
        login = self.client.post(
            '%s?%s' % (reverse('admin:login'), urlencode(new_next)),
            post_data)
        self.assertRedirects(login, redirect_url)

    def test_double_login_is_not_allowed(self):
        """Regression test for #19327"""
        login_url = '%s?next=%s' % (reverse('admin:login'), reverse('admin:index'))

        response = self.client.get(self.index_url)
        self.assertEqual(response.status_code, 302)

        # Establish a valid admin session
        login = self.client.post(login_url, self.super_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)

        # Logging in with non-admin user fails
        login = self.client.post(login_url, self.joepublic_login)
        self.assertEqual(login.status_code, 200)
        self.assertContains(login, ERROR_MESSAGE)

        # Establish a valid admin session
        login = self.client.post(login_url, self.super_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)

        # Logging in with admin user while already logged in
        login = self.client.post(login_url, self.super_login)
        self.assertRedirects(login, self.index_url)
        self.assertFalse(login.context)
        self.client.get(reverse('admin:logout'))

    def test_login_page_notice_for_non_staff_users(self):
        """
        A logged-in non-staff user trying to access the admin index should be
        presented with the login page and a hint indicating that the current
        user doesn't have access to it.
        """
        hint_template = 'You are authenticated as {}'

        # Anonymous user should not be shown the hint
        response = self.client.get(self.index_url, follow=True)
        self.assertContains(response, 'login-form')
        self.assertNotContains(response, hint_template.format(''), status_code=200)

        # Non-staff user should be shown the hint
        self.client.force_login(self.nostaffuser)
        response = self.client.get(self.index_url, follow=True)
        self.assertContains(response, 'login-form')
        self.assertContains(response, hint_template.format(self.nostaffuser.username), status_code=200)

    def test_add_view(self):
        """Test add view restricts access and actually adds items."""
        add_dict = {
            'title': 'Døm ikke',
            'content': '<p>great article</p>',
            'date_0': '2008-03-18', 'date_1': '10:54:39',
            'section': self.s1.pk,
        }
        # Change User should not have access to add articles
        self.client.force_login(self.changeuser)
        # make sure the view removes test cookie
        self.assertIs(self.client.session.test_cookie_worked(), False)
        response = self.client.get(reverse('admin:admin_views_article_add'))
        self.assertEqual(response.status_code, 403)
        # Try POST just to make sure
        post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
        self.assertEqual(post.status_code, 403)
        self.assertEqual(Article.objects.count(), 3)
        self.client.get(reverse('admin:logout'))

        # View User should not have access to add articles
        self.client.force_login(self.viewuser)
        response = self.client.get(reverse('admin:admin_views_article_add'))
        self.assertEqual(response.status_code, 403)
        # Try POST just to make sure
        post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
        self.assertEqual(post.status_code, 403)
        self.assertEqual(Article.objects.count(), 3)
        # Now give the user permission to add but not change.
        self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('add', Article._meta)))
        response = self.client.get(reverse('admin:admin_views_article_add'))
        self.assertContains(response, '<input type="submit" value="Save and view" name="_continue">')
        post = self.client.post(reverse('admin:admin_views_article_add'), add_dict, follow=False)
        self.assertEqual(post.status_code, 302)
        self.assertEqual(Article.objects.count(), 4)
        article = Article.objects.latest('pk')
        response = self.client.get(reverse('admin:admin_views_article_change', args=(article.pk,)))
        self.assertContains(response, '<li class="success">The article “Døm ikke” was added successfully.</li>')
        article.delete()
        self.client.get(reverse('admin:logout'))

        # Add user may login and POST to add view, then redirect to admin root
        self.client.force_login(self.adduser)
        addpage = self.client.get(reverse('admin:admin_views_article_add'))
        change_list_link = '&rsaquo; <a href="%s">Articles</a>' % reverse('admin:admin_views_article_changelist')
        self.assertNotContains(
            addpage, change_list_link,
            msg_prefix='User restricted to add permission is given link to change list view in breadcrumbs.'
        )
        post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
        self.assertRedirects(post, self.index_url)
        self.assertEqual(Article.objects.count(), 4)
        self.assertEqual(len(mail.outbox), 2)
        self.assertEqual(mail.outbox[0].subject, 'Greetings from a created object')
        self.client.get(reverse('admin:logout'))

        # The addition was logged correctly
        addition_log = LogEntry.objects.all()[0]
        new_article = Article.objects.last()
        article_ct = ContentType.objects.get_for_model(Article)
        self.assertEqual(addition_log.user_id, self.adduser.pk)
        self.assertEqual(addition_log.content_type_id, article_ct.pk)
        self.assertEqual(addition_log.object_id, str(new_article.pk))
        self.assertEqual(addition_log.object_repr, "Døm ikke")
        self.assertEqual(addition_log.action_flag, ADDITION)
        self.assertEqual(addition_log.get_change_message(), "Added.")

        # Super can add too, but is redirected to the change list view
        self.client.force_login(self.superuser)
        addpage = self.client.get(reverse('admin:admin_views_article_add'))
        self.assertContains(
            addpage, change_list_link,
            msg_prefix='Unrestricted user is not given link to change list view in breadcrumbs.'
        )
        post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
        self.assertRedirects(post, reverse('admin:admin_views_article_changelist'))
        self.assertEqual(Article.objects.count(), 5)
        self.client.get(reverse('admin:logout'))

        # 8509 - if a normal user is already logged in, it is possible
        # to change user into the superuser without error
        self.client.force_login(self.joepublicuser)
        # Check and make sure that if user expires, data still persists
        self.client.force_login(self.superuser)
        # make sure the view removes test cookie
        self.assertIs(self.client.session.test_cookie_worked(), False)

    @mock.patch('django.contrib.admin.options.InlineModelAdmin.has_change_permission')
    def test_add_view_with_view_only_inlines(self, has_change_permission):
        """User with add permission to a section but view-only for inlines."""
        self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('add', Section._meta)))
        self.client.force_login(self.viewuser)
        # Valid POST creates a new section.
        data = {
            'name': 'New obj',
            'article_set-TOTAL_FORMS': 0,
            'article_set-INITIAL_FORMS': 0,
        }
        response = self.client.post(reverse('admin:admin_views_section_add'), data)
        self.assertRedirects(response, reverse('admin:index'))
        self.assertEqual(Section.objects.latest('id').name, data['name'])
        # InlineModelAdmin.has_change_permission()'s obj argument is always
        # None during object add.
        self.assertEqual([obj for (request, obj), _ in has_change_permission.call_args_list], [None, None])

    def test_change_view(self):
        """Change view should restrict access and allow users to edit items."""
        change_dict = {
            'title': 'Ikke fordømt',
            'content': '<p>edited article</p>',
            'date_0': '2008-03-18', 'date_1': '10:54:39',
            'section': self.s1.pk,
        }
        article_change_url = reverse('admin:admin_views_article_change', args=(self.a1.pk,))
        article_changelist_url = reverse('admin:admin_views_article_changelist')

        # add user should not be able to view the list of article or change any of them
        self.client.force_login(self.adduser)
        response = self.client.get(article_changelist_url)
        self.assertEqual(response.status_code, 403)
        response = self.client.get(article_change_url)
        self.assertEqual(response.status_code, 403)
        post = self.client.post(article_change_url, change_dict)
        self.assertEqual(post.status_code, 403)
        self.client.get(reverse('admin:logout'))

        # view user can view articles but not make changes.
        self.client.force_login(self.viewuser)
        response = self.client.get(article_changelist_url)
        self.assertEqual(response.status_code, 200)
        self.assertEqual(response.context['title'], 'Select article to view')
        response = self.client.get(article_change_url)
        self.assertEqual(response.status_code, 200)
        self.assertEqual(response.context['title'], 'View article')
        self.assertContains(response, '<label>Extra form field:</label>')
        self.assertContains(response, '<a href="/test_admin/admin/admin_views/article/" class="closelink">Close</a>')
        post = self.client.post(article_change_url, change_dict)
        self.assertEqual(post.status_code, 403)
        self.assertEqual(Article.objects.get(pk=self.a1.pk).content, '<p>Middle content</p>')
        self.client.get(reverse('admin:logout'))

        # change user can view all items and edit them
        self.client.force_login(self.changeuser)
        response = self.client.get(article_changelist_url)
        self.assertEqual(response.status_code, 200)
        self.assertEqual(response.context['title'], 'Select article to change')
        response = self.client.get(article_change_url)
        self.assertEqual(response.status_code, 200)
        self.assertEqual(response.context['title'], 'Change article')
        post = self.client.post(article_change_url, change_dict)
        self.assertRedirects(post, article_changelist_url)
        self.assertEqual(Article.objects.get(pk=self.a1.pk).content, '<p>edited article</p>')

        # one error in form should produce singular error message, multiple errors plural
        change_dict['title'] = ''
        post = self.client.post(article_change_url, change_dict)
        self.assertContains(
            post, 'Please correct the error below.',
            msg_prefix='Singular error message not found in response to post with one error'
        )

        change_dict['content'] = ''
        post = self.client.post(article_change_url, change_dict)
        self.assertContains(
            post, 'Please correct the errors below.',
            msg_prefix='Plural error message not found in response to post with multiple errors'
        )
        self.client.get(reverse('admin:logout'))

        # Test redirection when using row-level change permissions. Refs #11513.
        r1 = RowLevelChangePermissionModel.objects.create(id=1, name="odd id")
        r2 = RowLevelChangePermissionModel.objects.create(id=2, name="even id")
        r3 = RowLevelChangePermissionModel.objects.create(id=3, name='odd id mult 3')
        r6 = RowLevelChangePermissionModel.objects.create(id=6, name='even id mult 3')
        change_url_1 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r1.pk,))
        change_url_2 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r2.pk,))
        change_url_3 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r3.pk,))
        change_url_6 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r6.pk,))
        logins = [self.superuser, self.viewuser, self.adduser, self.changeuser, self.deleteuser]
        for login_user in logins:
            with self.subTest(login_user.username):
                self.client.force_login(login_user)
                response = self.client.get(change_url_1)
                self.assertEqual(response.status_code, 403)
                response = self.client.post(change_url_1, {'name': 'changed'})
                self.assertEqual(RowLevelChangePermissionModel.objects.get(id=1).name, 'odd id')
                self.assertEqual(response.status_code, 403)
                response = self.client.get(change_url_2)
                self.assertEqual(response.status_code, 200)
                response = self.client.post(change_url_2, {'name': 'changed'})
                self.assertEqual(RowLevelChangePermissionModel.objects.get(id=2).name, 'changed')
                self.assertRedirects(response, self.index_url)
                response = self.client.get(change_url_3)
                self.assertEqual(response.status_code, 200)
                response = self.client.post(change_url_3, {'name': 'changed'})
                self.assertEqual(response.status_code, 403)
                self.assertEqual(RowLevelChangePermissionModel.objects.get(id=3).name, 'odd id mult 3')
                response = self.client.get(change_url_6)
                self.assertEqual(response.status_code, 200)
                response = self.client.post(change_url_6, {'name': 'changed'})
                self.assertEqual(RowLevelChangePermissionModel.objects.get(id=6).name, 'changed')
                self.assertRedirects(response, self.index_url)

                self.client.get(reverse('admin:logout'))

        for login_user in [self.joepublicuser, self.nostaffuser]:
            with self.subTest(login_user.username):
                self.client.force_login(login_user)
                response = self.client.get(change_url_1, follow=True)
                self.assertContains(response, 'login-form')
                response = self.client.post(change_url_1, {'name': 'changed'}, follow=True)
                self.assertEqual(RowLevelChangePermissionModel.objects.get(id=1).name, 'odd id')
                self.assertContains(response, 'login-form')
                response = self.client.get(change_url_2, follow=True)
                self.assertContains(response, 'login-form')
                response = self.client.post(change_url_2, {'name': 'changed again'}, follow=True)
                self.assertEqual(RowLevelChangePermissionModel.objects.get(id=2).name, 'changed')
                self.assertContains(response, 'login-form')
                self.client.get(reverse('admin:logout'))

    def test_change_view_without_object_change_permission(self):
        """
        The object should be read-only if the user has permission to view it
        and change objects of that type but not to change the current object.
        """
        change_url = reverse('admin9:admin_views_article_change', args=(self.a1.pk,))
        self.client.force_login(self.viewuser)
        response = self.client.get(change_url)
        self.assertEqual(response.status_code, 200)
        self.assertEqual(response.context['title'], 'View article')
        self.assertContains(response, '<a href="/test_admin/admin9/admin_views/article/" class="closelink">Close</a>')

    def test_change_view_save_as_new(self):
        """
        'Save as new' should raise PermissionDenied for users without the 'add'
        permission.
        """
        change_dict_save_as_new = {
            '_saveasnew': 'Save as new',
            'title': 'Ikke fordømt',
            'content': '<p>edited article</p>',
            'date_0': '2008-03-18', 'date_1': '10:54:39',
            'section': self.s1.pk,
        }
        article_change_url = reverse('admin:admin_views_article_change', args=(self.a1.pk,))

        # Add user can perform "Save as new".
        article_count = Article.objects.count()
        self.client.force_login(self.adduser)
        post = self.client.post(article_change_url, change_dict_save_as_new)
        self.assertRedirects(post, self.index_url)
        self.assertEqual(Article.objects.count(), article_count + 1)
        self.client.logout()

        # Change user cannot perform "Save as new" (no 'add' permission).
        article_count = Article.objects.count()
        self.client.force_login(self.changeuser)
        post = self.client.post(article_change_url, change_dict_save_as_new)
        self.assertEqual(post.status_code, 403)
        self.assertEqual(Article.objects.count(), article_count)

        # User with both add and change permissions should be redirected to the
        # change page for the newly created object.
        article_count = Article.objects.count()
        self.client.force_login(self.superuser)
        post = self.client.post(article_change_url, change_dict_save_as_new)
        self.assertEqual(Article.objects.count(), article_count + 1)
        new_article = Article.objects.latest('id')
        self.assertRedirects(post, reverse('admin:admin_views_article_change', args=(new_article.pk,)))

    def test_change_view_with_view_only_inlines(self):
        """
        User with change permission to a section but view-only for inlines.
        """
        self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
        self.client.force_login(self.viewuser)
        # GET shows inlines.
        response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
        self.assertEqual(len(response.context['inline_admin_formsets']), 1)
        formset = response.context['inline_admin_formsets'][0]
        self.assertEqual(len(formset.forms), 3)
        # Valid POST changes the name.
        data = {
            'name': 'Can edit name with view-only inlines',
            'article_set-TOTAL_FORMS': 3,
            'article_set-INITIAL_FORMS': 3
        }
        response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
        self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
        self.assertEqual(Section.objects.get(pk=self.s1.pk).name, data['name'])
        # Invalid POST reshows inlines.
        del data['name']
        response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
        self.assertEqual(response.status_code, 200)
        self.assertEqual(len(response.context['inline_admin_formsets']), 1)
        formset = response.context['inline_admin_formsets'][0]
        self.assertEqual(len(formset.forms), 3)

    def test_change_view_with_view_and_add_inlines(self):
        """User has view and add permissions on the inline model."""
        self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
        self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('add', Article._meta)))
        self.client.force_login(self.viewuser)
        # GET shows inlines.
        response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
        self.assertEqual(len(response.context['inline_admin_formsets']), 1)
        formset = response.context['inline_admin_formsets'][0]
        self.assertEqual(len(formset.forms), 6)
        # Valid POST creates a new article.
        data = {
            'name': 'Can edit name with view-only inlines',
            'article_set-TOTAL_FORMS': 6,
            'article_set-INITIAL_FORMS': 3,
            'article_set-3-id': [''],
            'article_set-3-title': ['A title'],
            'article_set-3-content': ['Added content'],
            'article_set-3-date_0': ['2008-3-18'],
            'article_set-3-date_1': ['11:54:58'],
            'article_set-3-section': [str(self.s1.pk)],
        }
        response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
        self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
        self.assertEqual(Section.objects.get(pk=self.s1.pk).name, data['name'])
        self.assertEqual(Article.objects.count(), 4)
        # Invalid POST reshows inlines.
        del data['name']
        response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
        self.assertEqual(response.status_code, 200)
        self.assertEqual(len(response.context['inline_admin_formsets']), 1)
        formset = response.context['inline_admin_formsets'][0]
        self.assertEqual(len(formset.forms), 6)

    def test_change_view_with_view_and_delete_inlines(self):
        """User has view and delete permissions on the inline model."""
        self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
        self.client.force_login(self.viewuser)
        data = {
            'name': 'Name is required.',
            'article_set-TOTAL_FORMS': 6,
            'article_set-INITIAL_FORMS': 3,
            'article_set-0-id': [str(self.a1.pk)],
            'article_set-0-DELETE': ['on'],
        }
        # Inline POST details are ignored without delete permission.
        response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
        self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
        self.assertEqual(Article.objects.count(), 3)
        # Deletion successful when delete permission is added.
        self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('delete', Article._meta)))
        data = {
            'name': 'Name is required.',
            'article_set-TOTAL_FORMS': 6,
            'article_set-INITIAL_FORMS': 3,
            'article_set-0-id': [str(self.a1.pk)],
            'article_set-0-DELETE': ['on'],
        }
        response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
        self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
        self.assertEqual(Article.objects.count(), 2)

    def test_delete_view(self):
        """Delete view should restrict access and actually delete items."""
        delete_dict = {'post': 'yes'}
        delete_url = reverse('admin:admin_views_article_delete', args=(self.a1.pk,))

        # add user should not be able to delete articles
        self.client.force_login(self.adduser)
        response = self.client.get(delete_url)
        self.assertEqual(response.status_code, 403)
        post = self.client.post(delete_url, delete_dict)
        self.assertEqual(post.status_code, 403)
        self.assertEqual(Article.objects.count(), 3)
        self.client.logout()

        # view user should not be able to delete articles
        self.client.force_login(self.viewuser)
        response = self.client.get(delete_url)
        self.assertEqual(response.status_code, 403)
        post = self.client.post(delete_url, delete_dict)
        self.assertEqual(post.status_code, 403)
        self.assertEqual(Article.objects.count(), 3)
        self.client.logout()

        # Delete user can delete
        self.client.force_login(self.deleteuser)
        response = self.client.get(reverse('admin:admin_views_section_delete', args=(self.s1.pk,)))
        self.assertContains(response, "<h2>Summary</h2>")
        self.assertContains(response, "<li>Articles: 3</li>")
        # test response contains link to related Article
        self.assertContains(response, "admin_views/article/%s/" % self.a1.pk)

        response = self.client.get(delete_url)
        self.assertContains(response, "admin_views/article/%s/" % self.a1.pk)
        self.assertContains(response, "<h2>Summary</h2>")
        self.assertContains(response, "<li>Articles: 1</li>")
        self.assertEqual(response.status_code, 200)
        post = self.client.post(delete_url, delete_dict)
        self.assertRedirects(post, self.index_url)
        self.assertEqual(Article.objects.count(), 2)
        self.assertEqual(len(mail.outbox), 1)
        self.assertEqual(mail.outbox[0].subject, 'Greetings from a deleted object')
        article_ct = ContentType.objects.get_for_model(Article)
        logged = LogEntry.objects.get(content_type=article_ct, action_flag=DELETION)
        self.assertEqual(logged.object_id, str(self.a1.pk))

    def test_delete_view_with_no_default_permissions(self):
        """
        The delete view allows users to delete collected objects without a
        'delete' permission (ReadOnlyPizza.Meta.default_permissions is empty).
        """
        pizza = ReadOnlyPizza.objects.create(name='Double Cheese')
        delete_url = reverse('admin:admin_views_readonlypizza_delete', args=(pizza.pk,))
        self.client.force_login(self.adduser)
        response = self.client.get(delete_url)
        self.assertContains(response, 'admin_views/readonlypizza/%s/' % pizza.pk)
        self.assertContains(response, '<h2>Summary</h2>')
        self.assertContains(response, '<li>Read only pizzas: 1</li>')
        self.assertEqual(response.status_code, 200)
        post = self.client.post(delete_url, {'post': 'yes'})
        self.assertRedirects(post, reverse('admin:admin_views_readonlypizza_changelist'))
        self.assertEqual(ReadOnlyPizza.objects.count(), 0)

    def test_delete_view_nonexistent_obj(self):
        self.client.force_login(self.deleteuser)
        url = reverse('admin:admin_views_article_delete', args=('nonexistent',))
        response = self.client.get(url, follow=True)
        self.assertRedirects(response, reverse('admin:index'))
        self.assertEqual(
            [m.message for m in response.context['messages']],
            ['article with ID “nonexistent” doesn’t exist. Perhaps it was deleted?']
        )

    def test_history_view(self):
        """History view should restrict access."""
        # add user should not be able to view the list of article or change any of them
        self.client.force_login(self.adduser)
        response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
        self.assertEqual(response.status_code, 403)
        self.client.get(reverse('admin:logout'))

        # view user can view all items
        self.client.force_login(self.viewuser)
        response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
        self.assertEqual(response.status_code, 200)
        self.client.get(reverse('admin:logout'))

        # change user can view all items and edit them
        self.client.force_login(self.changeuser)
        response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
        self.assertEqual(response.status_code, 200)

        # Test redirection when using row-level change permissions. Refs #11513.
        rl1 = RowLevelChangePermissionModel.objects.create(name="odd id")
        rl2 = RowLevelChangePermissionModel.objects.create(name="even id")
        logins = [self.superuser, self.viewuser, self.adduser, self.changeuser, self.deleteuser]
        for login_user in logins:
            with self.subTest(login_user.username):
                self.client.force_login(login_user)
                url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl1.pk,))
                response = self.client.get(url)
                self.assertEqual(response.status_code, 403)

                url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl2.pk,))
                response = self.client.get(url)
                self.assertEqual(response.status_code, 200)

                self.client.get(reverse('admin:logout'))

        for login_user in [self.joepublicuser, self.nostaffuser]:
            with self.subTest(login_user.username):
                self.client.force_login(login_user)
                url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl1.pk,))
                response = self.client.get(url, follow=True)
                self.assertContains(response, 'login-form')
                url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl2.pk,))
                response = self.client.get(url, follow=True)
                self.assertContains(response, 'login-form')

                self.client.get(reverse('admin:logout'))

    def test_history_view_bad_url(self):
        self.client.force_login(self.changeuser)
        response = self.client.get(reverse('admin:admin_views_article_history', args=('foo',)), follow=True)
        self.assertRedirects(response, reverse('admin:index'))
        self.assertEqual(
            [m.message for m in response.context['messages']],
            ['article with ID “foo” doesn’t exist. Perhaps it was deleted?']
        )

    def test_conditionally_show_add_section_link(self):
        """
        The foreign key widget should only show the "add related" button if the
        user has permission to add that related item.
        """
        self.client.force_login(self.adduser)
        # The user can't add sections yet, so they shouldn't see the "add section" link.
        url = reverse('admin:admin_views_article_add')
        add_link_text = 'add_id_section'
        response = self.client.get(url)
        self.assertNotContains(response, add_link_text)
        # Allow the user to add sections too. Now they can see the "add section" link.
        user = User.objects.get(username='adduser')
        perm = get_perm(Section, get_permission_codename('add', Section._meta))
        user.user_permissions.add(perm)
        response = self.client.get(url)
        self.assertContains(response, add_link_text)

    def test_conditionally_show_change_section_link(self):
        """
        The foreign key widget should only show the "change related" button if
        the user has permission to change that related item.
        """
        def get_change_related(response):
            return response.context['adminform'].form.fields['section'].widget.can_change_related

        self.client.force_login(self.adduser)
        # The user can't change sections yet, so they shouldn't see the "change section" link.
        url = reverse('admin:admin_views_article_add')
        change_link_text = 'change_id_section'
        response = self.client.get(url)
        self.assertFalse(get_change_related(response))
        self.assertNotContains(response, change_link_text)
        # Allow the user to change sections too. Now they can see the "change section" link.
        user = User.objects.get(username='adduser')
        perm = get_perm(Section, get_permission_codename('change', Section._meta))
        user.user_permissions.add(perm)
        response = self.client.get(url)
        self.assertTrue(get_change_related(response))
        self.assertContains(response, change_link_text)

    def test_conditionally_show_delete_section_link(self):
        """
        The foreign key widget should only show the "delete related" button if
        the user has permission to delete that related item.
        """
        def get_delete_related(response):
            return response.context['adminform'].form.fields['sub_section'].widget.can_delete_related

        self.client.force_login(self.adduser)
        # The user can't delete sections yet, so they shouldn't see the "delete section" link.
        url = reverse('admin:admin_views_article_add')
        delete_link_text = 'delete_id_sub_section'
        response = self.client.get(url)
        self.assertFalse(get_delete_related(response))
        self.assertNotContains(response, delete_link_text)
        # Allow the user to delete sections too. Now they can see the "delete section" link.
        user = User.objects.get(username='adduser')
        perm = get_perm(Section, get_permission_codename('delete', Section._meta))
        user.user_permissions.add(perm)
        response = self.client.get(url)
        self.assertTrue(get_delete_related(response))
        self.assertContains(response, delete_link_text)

    def test_disabled_permissions_when_logged_in(self):
        self.client.force_login(self.superuser)
        superuser = User.objects.get(username='super')
        superuser.is_active = False
        superuser.save()

        response = self.client.get(self.index_url, follow=True)
        self.assertContains(response, 'id="login-form"')
        self.assertNotContains(response, 'Log out')

        response = self.client.get(reverse('secure_view'), follow=True)
        self.assertContains(response, 'id="login-form"')

    def test_disabled_staff_permissions_when_logged_in(self):
        self.client.force_login(self.superuser)
        superuser = User.objects.get(username='super')
        superuser.is_staff = False
        superuser.save()

        response = self.client.get(self.index_url, follow=True)
        self.assertContains(response, 'id="login-form"')
        self.assertNotContains(response, 'Log out')

        response = self.client.get(reverse('secure_view'), follow=True)
        self.assertContains(response, 'id="login-form"')

    def test_app_list_permissions(self):
        """
        If a user has no module perms, the app list returns a 404.
        """
        opts = Article._meta
        change_user = User.objects.get(username='changeuser')
        permission = get_perm(Article, get_permission_codename('change', opts))

        self.client.force_login(self.changeuser)

        # the user has no module permissions
        change_user.user_permissions.remove(permission)
        response = self.client.get(reverse('admin:app_list', args=('admin_views',)))
        self.assertEqual(response.status_code, 404)

        # the user now has module permissions
        change_user.user_permissions.add(permission)
        response = self.client.get(reverse('admin:app_list', args=('admin_views',)))
        self.assertEqual(response.status_code, 200)

    def test_shortcut_view_only_available_to_staff(self):
        """
        Only admin users should be able to use the admin shortcut view.
        """
        model_ctype = ContentType.objects.get_for_model(ModelWithStringPrimaryKey)
        obj = ModelWithStringPrimaryKey.objects.create(string_pk='foo')
        shortcut_url = reverse('admin:view_on_site', args=(model_ctype.pk, obj.pk))

        # Not logged in: we should see the login page.
        response = self.client.get(shortcut_url, follow=True)
        self.assertTemplateUsed(response, 'admin/login.html')

        # Logged in? Redirect.
        self.client.force_login(self.superuser)
        response = self.client.get(shortcut_url, follow=False)
        # Can't use self.assertRedirects() because User.get_absolute_url() is silly.
        self.assertEqual(response.status_code, 302)
        # Domain may depend on contrib.sites tests also run
        self.assertRegex(response.url, 'http://(testserver|example.com)/dummy/foo/')

    def test_has_module_permission(self):
        """
        has_module_permission() returns True for all users who
        have any permission for that module (add, change, or delete), so that
        the module is displayed on the admin index page.
        """
        self.client.force_login(self.superuser)
        response = self.client.get(self.index_url)
        self.assertContains(response, 'admin_views')
        self.assertContains(response, 'Articles')
        self.client.logout()

        self.client.force_login(self.viewuser)
        response = self.client.get(self.index_url)
        self.assertContains(response, 'admin_views')
        self.assertContains(response, 'Articles')
        self.client.logout()

        self.client.force_login(self.adduser)
        response = self.client.get(self.index_url)
        self.assertContains(response, 'admin_views')
        self.assertContains(response, 'Articles')
        self.client.logout()

        self.client.force_login(self.changeuser)
        response = self.client.get(self.index_url)
        self.assertContains(response, 'admin_views')
        self.assertContains(response, 'Articles')
        self.client.logout()

        self.client.force_login(self.deleteuser)
        response = self.client.get(self.index_url)
        self.assertContains(response, 'admin_views')
        self.assertContains(response, 'Articles')

    def test_overriding_has_module_permission(self):
        """
        If has_module_permission() always returns False, the module shouldn't
        be displayed on the admin index page for any users.
        """
        articles = Article._meta.verbose_name_plural.title()
        sections = Section._meta.verbose_name_plural.title()
        index_url = reverse('admin7:index')

        self.client.force_login(self.superuser)
        response = self.client.get(index_url)
        self.assertContains(response, sections)
        self.assertNotContains(response, articles)
        self.client.logout()

        self.client.force_login(self.viewuser)
        response = self.client.get(index_url)
        self.assertNotContains(response, 'admin_views')
        self.assertNotContains(response, articles)
        self.client.logout()

        self.client.force_login(self.adduser)
        response = self.client.get(index_url)
        self.assertNotContains(response, 'admin_views')
        self.assertNotContains(response, articles)
        self.client.logout()

        self.client.force_login(self.changeuser)
        response = self.client.get(index_url)
        self.assertNotContains(response, 'admin_views')
        self.assertNotContains(response, articles)
        self.client.logout()

        self.client.force_login(self.deleteuser)
        response = self.client.get(index_url)
        self.assertNotContains(response, articles)

        # The app list displays Sections but not Articles as the latter has
        # ModelAdmin.has_module_permission() = False.
        self.client.force_login(self.superuser)
        response = self.client.get(reverse('admin7:app_list', args=('admin_views',)))
        self.assertContains(response, sections)
        self.assertNotContains(response, articles)

    def test_post_save_message_no_forbidden_links_visible(self):
        """
        Post-save message shouldn't contain a link to the change form if the
        user doesn't have the change permission.
        """
        self.client.force_login(self.adduser)
        # Emulate Article creation for user with add-only permission.
        post_data = {
            "title": "Fun & games",
            "content": "Some content",
            "date_0": "2015-10-31",
            "date_1": "16:35:00",
            "_save": "Save",
        }
        response = self.client.post(reverse('admin:admin_views_article_add'), post_data, follow=True)
        self.assertContains(
            response,
            '<li class="success">The article “Fun &amp; games” was added successfully.</li>',
            html=True
        )


File: tests/admin_views/tests.py
Line number range: 3982 - 4302
Content:
@override_settings(ROOT_URLCONF='admin_views.urls')
class AdminInlineTests(TestCase):

    @classmethod
    def setUpTestData(cls):
        cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
        cls.collector = Collector.objects.create(pk=1, name='John Fowles')

    def setUp(self):
        self.post_data = {
            "name": "Test Name",

            "widget_set-TOTAL_FORMS": "3",
            "widget_set-INITIAL_FORMS": "0",
            "widget_set-MAX_NUM_FORMS": "0",
            "widget_set-0-id": "",
            "widget_set-0-owner": "1",
            "widget_set-0-name": "",
            "widget_set-1-id": "",
            "widget_set-1-owner": "1",
            "widget_set-1-name": "",
            "widget_set-2-id": "",
            "widget_set-2-owner": "1",
            "widget_set-2-name": "",

            "doohickey_set-TOTAL_FORMS": "3",
            "doohickey_set-INITIAL_FORMS": "0",
            "doohickey_set-MAX_NUM_FORMS": "0",
            "doohickey_set-0-owner": "1",
            "doohickey_set-0-code": "",
            "doohickey_set-0-name": "",
            "doohickey_set-1-owner": "1",
            "doohickey_set-1-code": "",
            "doohickey_set-1-name": "",
            "doohickey_set-2-owner": "1",
            "doohickey_set-2-code": "",
            "doohickey_set-2-name": "",

            "grommet_set-TOTAL_FORMS": "3",
            "grommet_set-INITIAL_FORMS": "0",
            "grommet_set-MAX_NUM_FORMS": "0",
            "grommet_set-0-code": "",
            "grommet_set-0-owner": "1",
            "grommet_set-0-name": "",
            "grommet_set-1-code": "",
            "grommet_set-1-owner": "1",
            "grommet_set-1-name": "",
            "grommet_set-2-code": "",
            "grommet_set-2-owner": "1",
            "grommet_set-2-name": "",

            "whatsit_set-TOTAL_FORMS": "3",
            "whatsit_set-INITIAL_FORMS": "0",
            "whatsit_set-MAX_NUM_FORMS": "0",
            "whatsit_set-0-owner": "1",
            "whatsit_set-0-index": "",
            "whatsit_set-0-name": "",
            "whatsit_set-1-owner": "1",
            "whatsit_set-1-index": "",
            "whatsit_set-1-name": "",
            "whatsit_set-2-owner": "1",
            "whatsit_set-2-index": "",
            "whatsit_set-2-name": "",

            "fancydoodad_set-TOTAL_FORMS": "3",
            "fancydoodad_set-INITIAL_FORMS": "0",
            "fancydoodad_set-MAX_NUM_FORMS": "0",
            "fancydoodad_set-0-doodad_ptr": "",
            "fancydoodad_set-0-owner": "1",
            "fancydoodad_set-0-name": "",
            "fancydoodad_set-0-expensive": "on",
            "fancydoodad_set-1-doodad_ptr": "",
            "fancydoodad_set-1-owner": "1",
            "fancydoodad_set-1-name": "",
            "fancydoodad_set-1-expensive": "on",
            "fancydoodad_set-2-doodad_ptr": "",
            "fancydoodad_set-2-owner": "1",
            "fancydoodad_set-2-name": "",
            "fancydoodad_set-2-expensive": "on",

            "category_set-TOTAL_FORMS": "3",
            "category_set-INITIAL_FORMS": "0",
            "category_set-MAX_NUM_FORMS": "0",
            "category_set-0-order": "",
            "category_set-0-id": "",
            "category_set-0-collector": "1",
            "category_set-1-order": "",
            "category_set-1-id": "",
            "category_set-1-collector": "1",
            "category_set-2-order": "",
            "category_set-2-id": "",
            "category_set-2-collector": "1",
        }

        self.client.force_login(self.superuser)

    def test_simple_inline(self):
        "A simple model can be saved as inlines"
        # First add a new inline
        self.post_data['widget_set-0-name'] = "Widget 1"
        collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Widget.objects.count(), 1)
        self.assertEqual(Widget.objects.all()[0].name, "Widget 1")
        widget_id = Widget.objects.all()[0].id

        # The PK link exists on the rendered form
        response = self.client.get(collector_url)
        self.assertContains(response, 'name="widget_set-0-id"')

        # No file or image fields, no enctype on the forms
        self.assertIs(response.context['has_file_field'], False)
        self.assertNotContains(response, MULTIPART_ENCTYPE)

        # Now resave that inline
        self.post_data['widget_set-INITIAL_FORMS'] = "1"
        self.post_data['widget_set-0-id'] = str(widget_id)
        self.post_data['widget_set-0-name'] = "Widget 1"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Widget.objects.count(), 1)
        self.assertEqual(Widget.objects.all()[0].name, "Widget 1")

        # Now modify that inline
        self.post_data['widget_set-INITIAL_FORMS'] = "1"
        self.post_data['widget_set-0-id'] = str(widget_id)
        self.post_data['widget_set-0-name'] = "Widget 1 Updated"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Widget.objects.count(), 1)
        self.assertEqual(Widget.objects.all()[0].name, "Widget 1 Updated")

    def test_explicit_autofield_inline(self):
        "A model with an explicit autofield primary key can be saved as inlines. Regression for #8093"
        # First add a new inline
        self.post_data['grommet_set-0-name'] = "Grommet 1"
        collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Grommet.objects.count(), 1)
        self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1")

        # The PK link exists on the rendered form
        response = self.client.get(collector_url)
        self.assertContains(response, 'name="grommet_set-0-code"')

        # Now resave that inline
        self.post_data['grommet_set-INITIAL_FORMS'] = "1"
        self.post_data['grommet_set-0-code'] = str(Grommet.objects.all()[0].code)
        self.post_data['grommet_set-0-name'] = "Grommet 1"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Grommet.objects.count(), 1)
        self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1")

        # Now modify that inline
        self.post_data['grommet_set-INITIAL_FORMS'] = "1"
        self.post_data['grommet_set-0-code'] = str(Grommet.objects.all()[0].code)
        self.post_data['grommet_set-0-name'] = "Grommet 1 Updated"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Grommet.objects.count(), 1)
        self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1 Updated")

    def test_char_pk_inline(self):
        "A model with a character PK can be saved as inlines. Regression for #10992"
        # First add a new inline
        self.post_data['doohickey_set-0-code'] = "DH1"
        self.post_data['doohickey_set-0-name'] = "Doohickey 1"
        collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(DooHickey.objects.count(), 1)
        self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1")

        # The PK link exists on the rendered form
        response = self.client.get(collector_url)
        self.assertContains(response, 'name="doohickey_set-0-code"')

        # Now resave that inline
        self.post_data['doohickey_set-INITIAL_FORMS'] = "1"
        self.post_data['doohickey_set-0-code'] = "DH1"
        self.post_data['doohickey_set-0-name'] = "Doohickey 1"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(DooHickey.objects.count(), 1)
        self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1")

        # Now modify that inline
        self.post_data['doohickey_set-INITIAL_FORMS'] = "1"
        self.post_data['doohickey_set-0-code'] = "DH1"
        self.post_data['doohickey_set-0-name'] = "Doohickey 1 Updated"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(DooHickey.objects.count(), 1)
        self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1 Updated")

    def test_integer_pk_inline(self):
        "A model with an integer PK can be saved as inlines. Regression for #10992"
        # First add a new inline
        self.post_data['whatsit_set-0-index'] = "42"
        self.post_data['whatsit_set-0-name'] = "Whatsit 1"
        collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Whatsit.objects.count(), 1)
        self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1")

        # The PK link exists on the rendered form
        response = self.client.get(collector_url)
        self.assertContains(response, 'name="whatsit_set-0-index"')

        # Now resave that inline
        self.post_data['whatsit_set-INITIAL_FORMS'] = "1"
        self.post_data['whatsit_set-0-index'] = "42"
        self.post_data['whatsit_set-0-name'] = "Whatsit 1"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Whatsit.objects.count(), 1)
        self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1")

        # Now modify that inline
        self.post_data['whatsit_set-INITIAL_FORMS'] = "1"
        self.post_data['whatsit_set-0-index'] = "42"
        self.post_data['whatsit_set-0-name'] = "Whatsit 1 Updated"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(Whatsit.objects.count(), 1)
        self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1 Updated")

    def test_inherited_inline(self):
        "An inherited model can be saved as inlines. Regression for #11042"
        # First add a new inline
        self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1"
        collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(FancyDoodad.objects.count(), 1)
        self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1")
        doodad_pk = FancyDoodad.objects.all()[0].pk

        # The PK link exists on the rendered form
        response = self.client.get(collector_url)
        self.assertContains(response, 'name="fancydoodad_set-0-doodad_ptr"')

        # Now resave that inline
        self.post_data['fancydoodad_set-INITIAL_FORMS'] = "1"
        self.post_data['fancydoodad_set-0-doodad_ptr'] = str(doodad_pk)
        self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(FancyDoodad.objects.count(), 1)
        self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1")

        # Now modify that inline
        self.post_data['fancydoodad_set-INITIAL_FORMS'] = "1"
        self.post_data['fancydoodad_set-0-doodad_ptr'] = str(doodad_pk)
        self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1 Updated"
        response = self.client.post(collector_url, self.post_data)
        self.assertEqual(response.status_code, 302)
        self.assertEqual(FancyDoodad.objects.count(), 1)
        self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1 Updated")

    def test_ordered_inline(self):
        """
        An inline with an editable ordering fields is updated correctly.
        """
        # Create some objects with an initial ordering
        Category.objects.create(id=1, order=1, collector=self.collector)
        Category.objects.create(id=2, order=2, collector=self.collector)
        Category.objects.create(id=3, order=0, collector=self.collector)
        Category.objects.create(id=4, order=0, collector=self.collector)

        # NB: The order values must be changed so that the items are reordered.
        self.post_data.update({
            "name": "Frederick Clegg",

            "category_set-TOTAL_FORMS": "7",
            "category_set-INITIAL_FORMS": "4",
            "category_set-MAX_NUM_FORMS": "0",

            "category_set-0-order": "14",
            "category_set-0-id": "1",
            "category_set-0-collector": "1",

            "category_set-1-order": "13",
            "category_set-1-id": "2",
            "category_set-1-collector": "1",

            "category_set-2-order": "1",
            "category_set-2-id": "3",
            "category_set-2-collector": "1",

            "category_set-3-order": "0",
            "category_set-3-id": "4",
            "category_set-3-collector": "1",

            "category_set-4-order": "",
            "category_set-4-id": "",
            "category_set-4-collector": "1",

            "category_set-5-order": "",
            "category_set-5-id": "",
            "category_set-5-collector": "1",

            "category_set-6-order": "",
            "category_set-6-id": "",
            "category_set-6-collector": "1",
        })
        collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
        response = self.client.post(collector_url, self.post_data)
        # Successful post will redirect
        self.assertEqual(response.status_code, 302)

        # The order values have been applied to the right objects
        self.assertEqual(self.collector.category_set.count(), 4)
        self.assertEqual(Category.objects.get(id=1).order, 14)
        self.assertEqual(Category.objects.get(id=2).order, 13)
        self.assertEqual(Category.objects.get(id=3).order, 1)
        self.assertEqual(Category.objects.get(id=4).order, 0)


File: tests/admin_views/tests.py
Line number range: 4435 - 4804
Content:
@override_settings(ROOT_URLCONF='admin_views.urls')
class SeleniumTests(AdminSeleniumTestCase):

    available_apps = ['admin_views'] + AdminSeleniumTestCase.available_apps

    def setUp(self):
        self.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
        self.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')

    def test_prepopulated_fields(self):
        """
        The JavaScript-automated prepopulated fields work with the main form
        and with stacked and tabular inlines.
        Refs #13068, #9264, #9983, #9784.
        """
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        self.selenium.get(self.live_server_url + reverse('admin:admin_views_mainprepopulated_add'))
        self.wait_for('.select2')

        # Main form ----------------------------------------------------------
        self.selenium.find_element_by_id('id_pubdate').send_keys('2012-02-18')
        self.select_option('#id_status', 'option two')
        self.selenium.find_element_by_id('id_name').send_keys(' this is the mAin nÀMë and it\'s awεšomeıııİ')
        slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
        slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
        slug3 = self.selenium.find_element_by_id('id_slug3').get_attribute('value')
        self.assertEqual(slug1, 'main-name-and-its-awesomeiiii-2012-02-18')
        self.assertEqual(slug2, 'option-two-main-name-and-its-awesomeiiii')
        self.assertEqual(slug3, 'this-is-the-main-n\xe0m\xeb-and-its-aw\u03b5\u0161ome\u0131\u0131\u0131i')

        # Stacked inlines ----------------------------------------------------
        # Initial inline
        self.selenium.find_element_by_id('id_relatedprepopulated_set-0-pubdate').send_keys('2011-12-17')
        self.select_option('#id_relatedprepopulated_set-0-status', 'option one')
        self.selenium.find_element_by_id('id_relatedprepopulated_set-0-name').send_keys(
            ' here is a sŤāÇkeð   inline !  '
        )
        slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-0-slug1').get_attribute('value')
        slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-0-slug2').get_attribute('value')
        self.assertEqual(slug1, 'here-stacked-inline-2011-12-17')
        self.assertEqual(slug2, 'option-one-here-stacked-inline')
        initial_select2_inputs = self.selenium.find_elements_by_class_name('select2-selection')
        # Inline formsets have empty/invisible forms.
        # Only the 4 visible select2 inputs are initialized.
        num_initial_select2_inputs = len(initial_select2_inputs)
        self.assertEqual(num_initial_select2_inputs, 4)

        # Add an inline
        self.selenium.find_elements_by_link_text('Add another Related prepopulated')[0].click()
        self.assertEqual(
            len(self.selenium.find_elements_by_class_name('select2-selection')),
            num_initial_select2_inputs + 2
        )
        self.selenium.find_element_by_id('id_relatedprepopulated_set-1-pubdate').send_keys('1999-01-25')
        self.select_option('#id_relatedprepopulated_set-1-status', 'option two')
        self.selenium.find_element_by_id('id_relatedprepopulated_set-1-name').send_keys(
            ' now you haVe anöther   sŤāÇkeð  inline with a very ... '
            'loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog text... '
        )
        slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-1-slug1').get_attribute('value')
        slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-1-slug2').get_attribute('value')
        # 50 characters maximum for slug1 field
        self.assertEqual(slug1, 'now-you-have-another-stacked-inline-very-loooooooo')
        # 60 characters maximum for slug2 field
        self.assertEqual(slug2, 'option-two-now-you-have-another-stacked-inline-very-looooooo')

        # Tabular inlines ----------------------------------------------------
        # Initial inline
        self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-pubdate').send_keys('1234-12-07')
        self.select_option('#id_relatedprepopulated_set-2-0-status', 'option two')
        self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-name').send_keys(
            'And now, with a tÃbűlaŘ inline !!!'
        )
        slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-slug1').get_attribute('value')
        slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-slug2').get_attribute('value')
        self.assertEqual(slug1, 'and-now-tabular-inline-1234-12-07')
        self.assertEqual(slug2, 'option-two-and-now-tabular-inline')

        # Add an inline
        # Button may be outside the browser frame.
        element = self.selenium.find_elements_by_link_text('Add another Related prepopulated')[1]
        self.selenium.execute_script('window.scrollTo(0, %s);' % element.location['y'])
        element.click()
        self.assertEqual(
            len(self.selenium.find_elements_by_class_name('select2-selection')),
            num_initial_select2_inputs + 4
        )
        self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-pubdate').send_keys('1981-08-22')
        self.select_option('#id_relatedprepopulated_set-2-1-status', 'option one')
        self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-name').send_keys(
            r'a tÃbűlaŘ inline with ignored ;"&*^\%$#@-/`~ characters'
        )
        slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-slug1').get_attribute('value')
        slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-slug2').get_attribute('value')
        self.assertEqual(slug1, 'tabular-inline-ignored-characters-1981-08-22')
        self.assertEqual(slug2, 'option-one-tabular-inline-ignored-characters')
        # Add an inline without an initial inline.
        # The button is outside of the browser frame.
        self.selenium.execute_script("window.scrollTo(0, document.body.scrollHeight);")
        self.selenium.find_elements_by_link_text('Add another Related prepopulated')[2].click()
        self.assertEqual(
            len(self.selenium.find_elements_by_class_name('select2-selection')),
            num_initial_select2_inputs + 6
        )
        # Save and check that everything is properly stored in the database
        with self.wait_page_loaded():
            self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
        self.assertEqual(MainPrepopulated.objects.all().count(), 1)
        MainPrepopulated.objects.get(
            name=' this is the mAin nÀMë and it\'s awεšomeıııİ',
            pubdate='2012-02-18',
            status='option two',
            slug1='main-name-and-its-awesomeiiii-2012-02-18',
            slug2='option-two-main-name-and-its-awesomeiiii',
            slug3='this-is-the-main-nàmë-and-its-awεšomeıııi',
        )
        self.assertEqual(RelatedPrepopulated.objects.all().count(), 4)
        RelatedPrepopulated.objects.get(
            name=' here is a sŤāÇkeð   inline !  ',
            pubdate='2011-12-17',
            status='option one',
            slug1='here-stacked-inline-2011-12-17',
            slug2='option-one-here-stacked-inline',
        )
        RelatedPrepopulated.objects.get(
            # 75 characters in name field
            name=' now you haVe anöther   sŤāÇkeð  inline with a very ... loooooooooooooooooo',
            pubdate='1999-01-25',
            status='option two',
            slug1='now-you-have-another-stacked-inline-very-loooooooo',
            slug2='option-two-now-you-have-another-stacked-inline-very-looooooo',
        )
        RelatedPrepopulated.objects.get(
            name='And now, with a tÃbűlaŘ inline !!!',
            pubdate='1234-12-07',
            status='option two',
            slug1='and-now-tabular-inline-1234-12-07',
            slug2='option-two-and-now-tabular-inline',
        )
        RelatedPrepopulated.objects.get(
            name=r'a tÃbűlaŘ inline with ignored ;"&*^\%$#@-/`~ characters',
            pubdate='1981-08-22',
            status='option one',
            slug1='tabular-inline-ignored-characters-1981-08-22',
            slug2='option-one-tabular-inline-ignored-characters',
        )

    def test_populate_existing_object(self):
        """
        The prepopulation works for existing objects too, as long as
        the original field is empty (#19082).
        """
        # Slugs are empty to start with.
        item = MainPrepopulated.objects.create(
            name=' this is the mAin nÀMë',
            pubdate='2012-02-18',
            status='option two',
            slug1='',
            slug2='',
        )
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))

        object_url = self.live_server_url + reverse('admin:admin_views_mainprepopulated_change', args=(item.id,))

        self.selenium.get(object_url)
        self.selenium.find_element_by_id('id_name').send_keys(' the best')

        # The slugs got prepopulated since they were originally empty
        slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
        slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
        self.assertEqual(slug1, 'main-name-best-2012-02-18')
        self.assertEqual(slug2, 'option-two-main-name-best')

        # Save the object
        with self.wait_page_loaded():
            self.selenium.find_element_by_xpath('//input[@value="Save"]').click()

        self.selenium.get(object_url)
        self.selenium.find_element_by_id('id_name').send_keys(' hello')

        # The slugs got prepopulated didn't change since they were originally not empty
        slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
        slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
        self.assertEqual(slug1, 'main-name-best-2012-02-18')
        self.assertEqual(slug2, 'option-two-main-name-best')

    def test_collapsible_fieldset(self):
        """
        The 'collapse' class in fieldsets definition allows to
        show/hide the appropriate field section.
        """
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        self.selenium.get(self.live_server_url + reverse('admin:admin_views_article_add'))
        self.assertFalse(self.selenium.find_element_by_id('id_title').is_displayed())
        self.selenium.find_elements_by_link_text('Show')[0].click()
        self.assertTrue(self.selenium.find_element_by_id('id_title').is_displayed())
        self.assertEqual(self.selenium.find_element_by_id('fieldsetcollapser0').text, "Hide")

    def test_first_field_focus(self):
        """JavaScript-assisted auto-focus on first usable form field."""
        # First form field has a single widget
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        with self.wait_page_loaded():
            self.selenium.get(self.live_server_url + reverse('admin:admin_views_picture_add'))
        self.assertEqual(
            self.selenium.switch_to.active_element,
            self.selenium.find_element_by_id('id_name')
        )

        # First form field has a MultiWidget
        with self.wait_page_loaded():
            self.selenium.get(self.live_server_url + reverse('admin:admin_views_reservation_add'))
        self.assertEqual(
            self.selenium.switch_to.active_element,
            self.selenium.find_element_by_id('id_start_date_0')
        )

    def test_cancel_delete_confirmation(self):
        "Cancelling the deletion of an object takes the user back one page."
        pizza = Pizza.objects.create(name="Double Cheese")
        url = reverse('admin:admin_views_pizza_change', args=(pizza.id,))
        full_url = self.live_server_url + url
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        self.selenium.get(full_url)
        self.selenium.find_element_by_class_name('deletelink').click()
        # Click 'cancel' on the delete page.
        self.selenium.find_element_by_class_name('cancel-link').click()
        # Wait until we're back on the change page.
        self.wait_for_text('#content h1', 'Change pizza')
        self.assertEqual(self.selenium.current_url, full_url)
        self.assertEqual(Pizza.objects.count(), 1)

    def test_cancel_delete_related_confirmation(self):
        """
        Cancelling the deletion of an object with relations takes the user back
        one page.
        """
        pizza = Pizza.objects.create(name="Double Cheese")
        topping1 = Topping.objects.create(name="Cheddar")
        topping2 = Topping.objects.create(name="Mozzarella")
        pizza.toppings.add(topping1, topping2)
        url = reverse('admin:admin_views_pizza_change', args=(pizza.id,))
        full_url = self.live_server_url + url
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        self.selenium.get(full_url)
        self.selenium.find_element_by_class_name('deletelink').click()
        # Click 'cancel' on the delete page.
        self.selenium.find_element_by_class_name('cancel-link').click()
        # Wait until we're back on the change page.
        self.wait_for_text('#content h1', 'Change pizza')
        self.assertEqual(self.selenium.current_url, full_url)
        self.assertEqual(Pizza.objects.count(), 1)
        self.assertEqual(Topping.objects.count(), 2)

    def test_list_editable_popups(self):
        """
        list_editable foreign keys have add/change popups.
        """
        from selenium.webdriver.support.ui import Select
        s1 = Section.objects.create(name='Test section')
        Article.objects.create(
            title='foo',
            content='<p>Middle content</p>',
            date=datetime.datetime(2008, 3, 18, 11, 54, 58),
            section=s1,
        )
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        self.selenium.get(self.live_server_url + reverse('admin:admin_views_article_changelist'))
        # Change popup
        self.selenium.find_element_by_id('change_id_form-0-section').click()
        self.wait_for_and_switch_to_popup()
        self.wait_for_text('#content h1', 'Change section')
        name_input = self.selenium.find_element_by_id('id_name')
        name_input.clear()
        name_input.send_keys('<i>edited section</i>')
        self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
        self.selenium.switch_to.window(self.selenium.window_handles[0])
        select = Select(self.selenium.find_element_by_id('id_form-0-section'))
        self.assertEqual(select.first_selected_option.text, '<i>edited section</i>')
        # Rendered select2 input.
        select2_display = self.selenium.find_element_by_class_name('select2-selection__rendered')
        # Clear button (×\n) is included in text.
        self.assertEqual(select2_display.text, '×\n<i>edited section</i>')

        # Add popup
        self.selenium.find_element_by_id('add_id_form-0-section').click()
        self.wait_for_and_switch_to_popup()
        self.wait_for_text('#content h1', 'Add section')
        self.selenium.find_element_by_id('id_name').send_keys('new section')
        self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
        self.selenium.switch_to.window(self.selenium.window_handles[0])
        select = Select(self.selenium.find_element_by_id('id_form-0-section'))
        self.assertEqual(select.first_selected_option.text, 'new section')
        select2_display = self.selenium.find_element_by_class_name('select2-selection__rendered')
        # Clear button (×\n) is included in text.
        self.assertEqual(select2_display.text, '×\nnew section')

    def test_inline_uuid_pk_edit_with_popup(self):
        from selenium.webdriver.support.ui import Select
        parent = ParentWithUUIDPK.objects.create(title='test')
        related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
        self.selenium.get(self.live_server_url + change_url)
        self.selenium.find_element_by_id('change_id_parent').click()
        self.wait_for_and_switch_to_popup()
        self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
        self.selenium.switch_to.window(self.selenium.window_handles[0])
        select = Select(self.selenium.find_element_by_id('id_parent'))
        self.assertEqual(select.first_selected_option.text, str(parent.id))
        self.assertEqual(select.first_selected_option.get_attribute('value'), str(parent.id))

    def test_inline_uuid_pk_add_with_popup(self):
        from selenium.webdriver.support.ui import Select
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        self.selenium.get(self.live_server_url + reverse('admin:admin_views_relatedwithuuidpkmodel_add'))
        self.selenium.find_element_by_id('add_id_parent').click()
        self.wait_for_and_switch_to_popup()
        self.selenium.find_element_by_id('id_title').send_keys('test')
        self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
        self.selenium.switch_to.window(self.selenium.window_handles[0])
        select = Select(self.selenium.find_element_by_id('id_parent'))
        uuid_id = str(ParentWithUUIDPK.objects.first().id)
        self.assertEqual(select.first_selected_option.text, uuid_id)
        self.assertEqual(select.first_selected_option.get_attribute('value'), uuid_id)

    def test_inline_uuid_pk_delete_with_popup(self):
        from selenium.webdriver.support.ui import Select
        parent = ParentWithUUIDPK.objects.create(title='test')
        related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
        self.selenium.get(self.live_server_url + change_url)
        self.selenium.find_element_by_id('delete_id_parent').click()
        self.wait_for_and_switch_to_popup()
        self.selenium.find_element_by_xpath('//input[@value="Yes, I’m sure"]').click()
        self.selenium.switch_to.window(self.selenium.window_handles[0])
        select = Select(self.selenium.find_element_by_id('id_parent'))
        self.assertEqual(ParentWithUUIDPK.objects.count(), 0)
        self.assertEqual(select.first_selected_option.text, '---------')
        self.assertEqual(select.first_selected_option.get_attribute('value'), '')

    def test_inline_with_popup_cancel_delete(self):
        """Clicking ""No, take me back" on a delete popup closes the window."""
        parent = ParentWithUUIDPK.objects.create(title='test')
        related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
        self.selenium.get(self.live_server_url + change_url)
        self.selenium.find_element_by_id('delete_id_parent').click()
        self.wait_for_and_switch_to_popup()
        self.selenium.find_element_by_xpath('//a[text()="No, take me back"]').click()
        self.selenium.switch_to.window(self.selenium.window_handles[0])
        self.assertEqual(len(self.selenium.window_handles), 1)

    def test_list_editable_raw_id_fields(self):
        parent = ParentWithUUIDPK.objects.create(title='test')
        parent2 = ParentWithUUIDPK.objects.create(title='test2')
        RelatedWithUUIDPKModel.objects.create(parent=parent)
        self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
        change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_changelist', current_app=site2.name)
        self.selenium.get(self.live_server_url + change_url)
        self.selenium.find_element_by_id('lookup_id_form-0-parent').click()
        self.wait_for_and_switch_to_popup()
        # Select "parent2" in the popup.
        self.selenium.find_element_by_link_text(str(parent2.pk)).click()
        self.selenium.switch_to.window(self.selenium.window_handles[0])
        # The newly selected pk should appear in the raw id input.
        value = self.selenium.find_element_by_id('id_form-0-parent').get_attribute('value')
        self.assertEqual(value, str(parent2.pk))


File: tests/admin_views/tests.py
Line number range: 5099 - 5259
Content:
@override_settings(ROOT_URLCONF='admin_views.urls')
class UserAdminTest(TestCase):
    """
    Tests user CRUD functionality.
    """

    @classmethod
    def setUpTestData(cls):
        cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
        cls.adduser = User.objects.create_user(username='adduser', password='secret', is_staff=True)
        cls.changeuser = User.objects.create_user(username='changeuser', password='secret', is_staff=True)
        cls.s1 = Section.objects.create(name='Test section')
        cls.a1 = Article.objects.create(
            content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
        )
        cls.a2 = Article.objects.create(
            content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
        )
        cls.a3 = Article.objects.create(
            content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
        )
        cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')

        cls.per1 = Person.objects.create(name='John Mauchly', gender=1, alive=True)
        cls.per2 = Person.objects.create(name='Grace Hopper', gender=1, alive=False)
        cls.per3 = Person.objects.create(name='Guido van Rossum', gender=1, alive=True)

    def setUp(self):
        self.client.force_login(self.superuser)

    def test_save_button(self):
        user_count = User.objects.count()
        response = self.client.post(reverse('admin:auth_user_add'), {
            'username': 'newuser',
            'password1': 'newpassword',
            'password2': 'newpassword',
        })
        new_user = User.objects.get(username='newuser')
        self.assertRedirects(response, reverse('admin:auth_user_change', args=(new_user.pk,)))
        self.assertEqual(User.objects.count(), user_count + 1)
        self.assertTrue(new_user.has_usable_password())

    def test_save_continue_editing_button(self):
        user_count = User.objects.count()
        response = self.client.post(reverse('admin:auth_user_add'), {
            'username': 'newuser',
            'password1': 'newpassword',
            'password2': 'newpassword',
            '_continue': '1',
        })
        new_user = User.objects.get(username='newuser')
        new_user_url = reverse('admin:auth_user_change', args=(new_user.pk,))
        self.assertRedirects(response, new_user_url, fetch_redirect_response=False)
        self.assertEqual(User.objects.count(), user_count + 1)
        self.assertTrue(new_user.has_usable_password())
        response = self.client.get(new_user_url)
        self.assertContains(
            response,
            '<li class="success">The user “<a href="%s">'
            '%s</a>” was added successfully. You may edit it again below.</li>'
            % (new_user_url, new_user),
            html=True,
        )

    def test_password_mismatch(self):
        response = self.client.post(reverse('admin:auth_user_add'), {
            'username': 'newuser',
            'password1': 'newpassword',
            'password2': 'mismatch',
        })
        self.assertEqual(response.status_code, 200)
        self.assertFormError(response, 'adminform', 'password', [])
        self.assertFormError(response, 'adminform', 'password2', ['The two password fields didn’t match.'])

    def test_user_fk_add_popup(self):
        """User addition through a FK popup should return the appropriate JavaScript response."""
        response = self.client.get(reverse('admin:admin_views_album_add'))
        self.assertContains(response, reverse('admin:auth_user_add'))
        self.assertContains(response, 'class="related-widget-wrapper-link add-related" id="add_id_owner"')
        response = self.client.get(reverse('admin:auth_user_add') + '?_popup=1')
        self.assertNotContains(response, 'name="_continue"')
        self.assertNotContains(response, 'name="_addanother"')
        data = {
            'username': 'newuser',
            'password1': 'newpassword',
            'password2': 'newpassword',
            '_popup': '1',
            '_save': '1',
        }
        response = self.client.post(reverse('admin:auth_user_add') + '?_popup=1', data, follow=True)
        self.assertContains(response, '&quot;obj&quot;: &quot;newuser&quot;')

    def test_user_fk_change_popup(self):
        """User change through a FK popup should return the appropriate JavaScript response."""
        response = self.client.get(reverse('admin:admin_views_album_add'))
        self.assertContains(response, reverse('admin:auth_user_change', args=('__fk__',)))
        self.assertContains(response, 'class="related-widget-wrapper-link change-related" id="change_id_owner"')
        user = User.objects.get(username='changeuser')
        url = reverse('admin:auth_user_change', args=(user.pk,)) + '?_popup=1'
        response = self.client.get(url)
        self.assertNotContains(response, 'name="_continue"')
        self.assertNotContains(response, 'name="_addanother"')
        data = {
            'username': 'newuser',
            'password1': 'newpassword',
            'password2': 'newpassword',
            'last_login_0': '2007-05-30',
            'last_login_1': '13:20:10',
            'date_joined_0': '2007-05-30',
            'date_joined_1': '13:20:10',
            '_popup': '1',
            '_save': '1',
        }
        response = self.client.post(url, data, follow=True)
        self.assertContains(response, '&quot;obj&quot;: &quot;newuser&quot;')
        self.assertContains(response, '&quot;action&quot;: &quot;change&quot;')

    def test_user_fk_delete_popup(self):
        """User deletion through a FK popup should return the appropriate JavaScript response."""
        response = self.client.get(reverse('admin:admin_views_album_add'))
        self.assertContains(response, reverse('admin:auth_user_delete', args=('__fk__',)))
        self.assertContains(response, 'class="related-widget-wrapper-link change-related" id="change_id_owner"')
        user = User.objects.get(username='changeuser')
        url = reverse('admin:auth_user_delete', args=(user.pk,)) + '?_popup=1'
        response = self.client.get(url)
        self.assertEqual(response.status_code, 200)
        data = {
            'post': 'yes',
            '_popup': '1',
        }
        response = self.client.post(url, data, follow=True)
        self.assertContains(response, '&quot;action&quot;: &quot;delete&quot;')

    def test_save_add_another_button(self):
        user_count = User.objects.count()
        response = self.client.post(reverse('admin:auth_user_add'), {
            'username': 'newuser',
            'password1': 'newpassword',
            'password2': 'newpassword',
            '_addanother': '1',
        })
        new_user = User.objects.order_by('-id')[0]
        self.assertRedirects(response, reverse('admin:auth_user_add'))
        self.assertEqual(User.objects.count(), user_count + 1)
        self.assertTrue(new_user.has_usable_password())

    def test_user_permission_performance(self):
        u = User.objects.all()[0]

        # Don't depend on a warm cache, see #17377.
        ContentType.objects.clear_cache()

        with self.assertNumQueries(10):
            response = self.client.get(reverse('admin:auth_user_change', args=(u.pk,)))
            self.assertEqual(response.status_code, 200)

    def test_form_url_present_in_context(self):
        u = User.objects.all()[0]
        response = self.client.get(reverse('admin3:auth_user_password_change', args=(u.pk,)))
        self.assertEqual(response.status_code, 200)
        self.assertEqual(response.context['form_url'], 'pony')


File: tests/modeladmin/tests.py
Line number range: 1 - 500
Content:
1. from datetime import date
2. 
3. from django import forms
4. from django.contrib.admin.models import ADDITION, CHANGE, DELETION, LogEntry
5. from django.contrib.admin.options import (
6.     HORIZONTAL, VERTICAL, ModelAdmin, TabularInline,
7.     get_content_type_for_model,
8. )
9. from django.contrib.admin.sites import AdminSite
10. from django.contrib.admin.widgets import (
11.     AdminDateWidget, AdminRadioSelect, AutocompleteSelect,
12.     AutocompleteSelectMultiple,
13. )
14. from django.contrib.auth.models import User
15. from django.db import models
16. from django.forms.widgets import Select
17. from django.test import SimpleTestCase, TestCase
18. from django.test.utils import isolate_apps
19. 
20. from .models import Band, Concert, Song
21. 
22. 
23. class MockRequest:
24.     pass
25. 
26. 
27. class MockSuperUser:
28.     def has_perm(self, perm):
29.         return True
30. 
31. 
32. request = MockRequest()
33. request.user = MockSuperUser()
34. 
35. 
36. class ModelAdminTests(TestCase):
37. 
38.     def setUp(self):
39.         self.band = Band.objects.create(
40.             name='The Doors',
41.             bio='',
42.             sign_date=date(1965, 1, 1),
43.         )
44.         self.site = AdminSite()
45. 
46.     def test_modeladmin_str(self):
47.         ma = ModelAdmin(Band, self.site)
48.         self.assertEqual(str(ma), 'modeladmin.ModelAdmin')
49. 
50.     # form/fields/fieldsets interaction ##############################
51. 
52.     def test_default_fields(self):
53.         ma = ModelAdmin(Band, self.site)
54.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date'])
55.         self.assertEqual(list(ma.get_fields(request)), ['name', 'bio', 'sign_date'])
56.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name', 'bio', 'sign_date'])
57.         self.assertIsNone(ma.get_exclude(request, self.band))
58. 
59.     def test_default_fieldsets(self):
60.         # fieldsets_add and fieldsets_change should return a special data structure that
61.         # is used in the templates. They should generate the "right thing" whether we
62.         # have specified a custom form, the fields argument, or nothing at all.
63.         #
64.         # Here's the default case. There are no custom form_add/form_change methods,
65.         # no fields argument, and no fieldsets argument.
66.         ma = ModelAdmin(Band, self.site)
67.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name', 'bio', 'sign_date']})])
68.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name', 'bio', 'sign_date']})])
69. 
70.     def test_get_fieldsets(self):
71.         # get_fieldsets() is called when figuring out form fields (#18681).
72.         class BandAdmin(ModelAdmin):
73.             def get_fieldsets(self, request, obj=None):
74.                 return [(None, {'fields': ['name', 'bio']})]
75. 
76.         ma = BandAdmin(Band, self.site)
77.         form = ma.get_form(None)
78.         self.assertEqual(form._meta.fields, ['name', 'bio'])
79. 
80.         class InlineBandAdmin(TabularInline):
81.             model = Concert
82.             fk_name = 'main_band'
83.             can_delete = False
84. 
85.             def get_fieldsets(self, request, obj=None):
86.                 return [(None, {'fields': ['day', 'transport']})]
87. 
88.         ma = InlineBandAdmin(Band, self.site)
89.         form = ma.get_formset(None).form
90.         self.assertEqual(form._meta.fields, ['day', 'transport'])
91. 
92.     def test_lookup_allowed_allows_nonexistent_lookup(self):
93.         """
94.         A lookup_allowed allows a parameter whose field lookup doesn't exist.
95.         (#21129).
96.         """
97.         class BandAdmin(ModelAdmin):
98.             fields = ['name']
99. 
100.         ma = BandAdmin(Band, self.site)
101.         self.assertTrue(ma.lookup_allowed('name__nonexistent', 'test_value'))
102. 
103.     @isolate_apps('modeladmin')
104.     def test_lookup_allowed_onetoone(self):
105.         class Department(models.Model):
106.             code = models.CharField(max_length=4, unique=True)
107. 
108.         class Employee(models.Model):
109.             department = models.ForeignKey(Department, models.CASCADE, to_field="code")
110. 
111.         class EmployeeProfile(models.Model):
112.             employee = models.OneToOneField(Employee, models.CASCADE)
113. 
114.         class EmployeeInfo(models.Model):
115.             employee = models.OneToOneField(Employee, models.CASCADE)
116.             description = models.CharField(max_length=100)
117. 
118.         class EmployeeProfileAdmin(ModelAdmin):
119.             list_filter = [
120.                 'employee__employeeinfo__description',
121.                 'employee__department__code',
122.             ]
123. 
124.         ma = EmployeeProfileAdmin(EmployeeProfile, self.site)
125.         # Reverse OneToOneField
126.         self.assertIs(ma.lookup_allowed('employee__employeeinfo__description', 'test_value'), True)
127.         # OneToOneField and ForeignKey
128.         self.assertIs(ma.lookup_allowed('employee__department__code', 'test_value'), True)
129. 
130.     def test_field_arguments(self):
131.         # If fields is specified, fieldsets_add and fieldsets_change should
132.         # just stick the fields into a formsets structure and return it.
133.         class BandAdmin(ModelAdmin):
134.             fields = ['name']
135. 
136.         ma = BandAdmin(Band, self.site)
137. 
138.         self.assertEqual(list(ma.get_fields(request)), ['name'])
139.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name'])
140.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name']})])
141.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name']})])
142. 
143.     def test_field_arguments_restricted_on_form(self):
144.         # If fields or fieldsets is specified, it should exclude fields on the
145.         # Form class to the fields specified. This may cause errors to be
146.         # raised in the db layer if required model fields aren't in fields/
147.         # fieldsets, but that's preferable to ghost errors where a field in the
148.         # Form class isn't being displayed because it's not in fields/fieldsets.
149. 
150.         # Using `fields`.
151.         class BandAdmin(ModelAdmin):
152.             fields = ['name']
153. 
154.         ma = BandAdmin(Band, self.site)
155.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
156.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
157. 
158.         # Using `fieldsets`.
159.         class BandAdmin(ModelAdmin):
160.             fieldsets = [(None, {'fields': ['name']})]
161. 
162.         ma = BandAdmin(Band, self.site)
163.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
164.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
165. 
166.         # Using `exclude`.
167.         class BandAdmin(ModelAdmin):
168.             exclude = ['bio']
169. 
170.         ma = BandAdmin(Band, self.site)
171.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
172. 
173.         # You can also pass a tuple to `exclude`.
174.         class BandAdmin(ModelAdmin):
175.             exclude = ('bio',)
176. 
177.         ma = BandAdmin(Band, self.site)
178.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
179. 
180.         # Using `fields` and `exclude`.
181.         class BandAdmin(ModelAdmin):
182.             fields = ['name', 'bio']
183.             exclude = ['bio']
184. 
185.         ma = BandAdmin(Band, self.site)
186.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
187. 
188.     def test_custom_form_meta_exclude_with_readonly(self):
189.         """
190.         The custom ModelForm's `Meta.exclude` is respected when used in
191.         conjunction with `ModelAdmin.readonly_fields` and when no
192.         `ModelAdmin.exclude` is defined (#14496).
193.         """
194.         # With ModelAdmin
195.         class AdminBandForm(forms.ModelForm):
196.             class Meta:
197.                 model = Band
198.                 exclude = ['bio']
199. 
200.         class BandAdmin(ModelAdmin):
201.             readonly_fields = ['name']
202.             form = AdminBandForm
203. 
204.         ma = BandAdmin(Band, self.site)
205.         self.assertEqual(list(ma.get_form(request).base_fields), ['sign_date'])
206. 
207.         # With InlineModelAdmin
208.         class AdminConcertForm(forms.ModelForm):
209.             class Meta:
210.                 model = Concert
211.                 exclude = ['day']
212. 
213.         class ConcertInline(TabularInline):
214.             readonly_fields = ['transport']
215.             form = AdminConcertForm
216.             fk_name = 'main_band'
217.             model = Concert
218. 
219.         class BandAdmin(ModelAdmin):
220.             inlines = [ConcertInline]
221. 
222.         ma = BandAdmin(Band, self.site)
223.         self.assertEqual(
224.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
225.             ['main_band', 'opening_band', 'id', 'DELETE'])
226. 
227.     def test_custom_formfield_override_readonly(self):
228.         class AdminBandForm(forms.ModelForm):
229.             name = forms.CharField()
230. 
231.             class Meta:
232.                 exclude = ()
233.                 model = Band
234. 
235.         class BandAdmin(ModelAdmin):
236.             form = AdminBandForm
237.             readonly_fields = ['name']
238. 
239.         ma = BandAdmin(Band, self.site)
240. 
241.         # `name` shouldn't appear in base_fields because it's part of
242.         # readonly_fields.
243.         self.assertEqual(
244.             list(ma.get_form(request).base_fields),
245.             ['bio', 'sign_date']
246.         )
247.         # But it should appear in get_fields()/fieldsets() so it can be
248.         # displayed as read-only.
249.         self.assertEqual(
250.             list(ma.get_fields(request)),
251.             ['bio', 'sign_date', 'name']
252.         )
253.         self.assertEqual(
254.             list(ma.get_fieldsets(request)),
255.             [(None, {'fields': ['bio', 'sign_date', 'name']})]
256.         )
257. 
258.     def test_custom_form_meta_exclude(self):
259.         """
260.         The custom ModelForm's `Meta.exclude` is overridden if
261.         `ModelAdmin.exclude` or `InlineModelAdmin.exclude` are defined (#14496).
262.         """
263.         # With ModelAdmin
264.         class AdminBandForm(forms.ModelForm):
265.             class Meta:
266.                 model = Band
267.                 exclude = ['bio']
268. 
269.         class BandAdmin(ModelAdmin):
270.             exclude = ['name']
271.             form = AdminBandForm
272. 
273.         ma = BandAdmin(Band, self.site)
274.         self.assertEqual(list(ma.get_form(request).base_fields), ['bio', 'sign_date'])
275. 
276.         # With InlineModelAdmin
277.         class AdminConcertForm(forms.ModelForm):
278.             class Meta:
279.                 model = Concert
280.                 exclude = ['day']
281. 
282.         class ConcertInline(TabularInline):
283.             exclude = ['transport']
284.             form = AdminConcertForm
285.             fk_name = 'main_band'
286.             model = Concert
287. 
288.         class BandAdmin(ModelAdmin):
289.             inlines = [ConcertInline]
290. 
291.         ma = BandAdmin(Band, self.site)
292.         self.assertEqual(
293.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
294.             ['main_band', 'opening_band', 'day', 'id', 'DELETE']
295.         )
296. 
297.     def test_overriding_get_exclude(self):
298.         class BandAdmin(ModelAdmin):
299.             def get_exclude(self, request, obj=None):
300.                 return ['name']
301. 
302.         self.assertEqual(
303.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
304.             ['bio', 'sign_date']
305.         )
306. 
307.     def test_get_exclude_overrides_exclude(self):
308.         class BandAdmin(ModelAdmin):
309.             exclude = ['bio']
310. 
311.             def get_exclude(self, request, obj=None):
312.                 return ['name']
313. 
314.         self.assertEqual(
315.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
316.             ['bio', 'sign_date']
317.         )
318. 
319.     def test_get_exclude_takes_obj(self):
320.         class BandAdmin(ModelAdmin):
321.             def get_exclude(self, request, obj=None):
322.                 if obj:
323.                     return ['sign_date']
324.                 return ['name']
325. 
326.         self.assertEqual(
327.             list(BandAdmin(Band, self.site).get_form(request, self.band).base_fields),
328.             ['name', 'bio']
329.         )
330. 
331.     def test_custom_form_validation(self):
332.         # If a form is specified, it should use it allowing custom validation
333.         # to work properly. This won't break any of the admin widgets or media.
334.         class AdminBandForm(forms.ModelForm):
335.             delete = forms.BooleanField()
336. 
337.         class BandAdmin(ModelAdmin):
338.             form = AdminBandForm
339. 
340.         ma = BandAdmin(Band, self.site)
341.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date', 'delete'])
342.         self.assertEqual(type(ma.get_form(request).base_fields['sign_date'].widget), AdminDateWidget)
343. 
344.     def test_form_exclude_kwarg_override(self):
345.         """
346.         The `exclude` kwarg passed to `ModelAdmin.get_form()` overrides all
347.         other declarations (#8999).
348.         """
349.         class AdminBandForm(forms.ModelForm):
350.             class Meta:
351.                 model = Band
352.                 exclude = ['name']
353. 
354.         class BandAdmin(ModelAdmin):
355.             exclude = ['sign_date']
356.             form = AdminBandForm
357. 
358.             def get_form(self, request, obj=None, **kwargs):
359.                 kwargs['exclude'] = ['bio']
360.                 return super().get_form(request, obj, **kwargs)
361. 
362.         ma = BandAdmin(Band, self.site)
363.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
364. 
365.     def test_formset_exclude_kwarg_override(self):
366.         """
367.         The `exclude` kwarg passed to `InlineModelAdmin.get_formset()`
368.         overrides all other declarations (#8999).
369.         """
370.         class AdminConcertForm(forms.ModelForm):
371.             class Meta:
372.                 model = Concert
373.                 exclude = ['day']
374. 
375.         class ConcertInline(TabularInline):
376.             exclude = ['transport']
377.             form = AdminConcertForm
378.             fk_name = 'main_band'
379.             model = Concert
380. 
381.             def get_formset(self, request, obj=None, **kwargs):
382.                 kwargs['exclude'] = ['opening_band']
383.                 return super().get_formset(request, obj, **kwargs)
384. 
385.         class BandAdmin(ModelAdmin):
386.             inlines = [ConcertInline]
387. 
388.         ma = BandAdmin(Band, self.site)
389.         self.assertEqual(
390.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
391.             ['main_band', 'day', 'transport', 'id', 'DELETE']
392.         )
393. 
394.     def test_formset_overriding_get_exclude_with_form_fields(self):
395.         class AdminConcertForm(forms.ModelForm):
396.             class Meta:
397.                 model = Concert
398.                 fields = ['main_band', 'opening_band', 'day', 'transport']
399. 
400.         class ConcertInline(TabularInline):
401.             form = AdminConcertForm
402.             fk_name = 'main_band'
403.             model = Concert
404. 
405.             def get_exclude(self, request, obj=None):
406.                 return ['opening_band']
407. 
408.         class BandAdmin(ModelAdmin):
409.             inlines = [ConcertInline]
410. 
411.         ma = BandAdmin(Band, self.site)
412.         self.assertEqual(
413.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
414.             ['main_band', 'day', 'transport', 'id', 'DELETE']
415.         )
416. 
417.     def test_formset_overriding_get_exclude_with_form_exclude(self):
418.         class AdminConcertForm(forms.ModelForm):
419.             class Meta:
420.                 model = Concert
421.                 exclude = ['day']
422. 
423.         class ConcertInline(TabularInline):
424.             form = AdminConcertForm
425.             fk_name = 'main_band'
426.             model = Concert
427. 
428.             def get_exclude(self, request, obj=None):
429.                 return ['opening_band']
430. 
431.         class BandAdmin(ModelAdmin):
432.             inlines = [ConcertInline]
433. 
434.         ma = BandAdmin(Band, self.site)
435.         self.assertEqual(
436.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
437.             ['main_band', 'day', 'transport', 'id', 'DELETE']
438.         )
439. 
440.     def test_raw_id_fields_widget_override(self):
441.         """
442.         The autocomplete_fields, raw_id_fields, and radio_fields widgets may
443.         overridden by specifying a widget in get_formset().
444.         """
445.         class ConcertInline(TabularInline):
446.             model = Concert
447.             fk_name = 'main_band'
448.             raw_id_fields = ('opening_band',)
449. 
450.             def get_formset(self, request, obj=None, **kwargs):
451.                 kwargs['widgets'] = {'opening_band': Select}
452.                 return super().get_formset(request, obj, **kwargs)
453. 
454.         class BandAdmin(ModelAdmin):
455.             inlines = [ConcertInline]
456. 
457.         ma = BandAdmin(Band, self.site)
458.         band_widget = list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields['opening_band'].widget
459.         # Without the override this would be ForeignKeyRawIdWidget.
460.         self.assertIsInstance(band_widget, Select)
461. 
462.     def test_queryset_override(self):
463.         # If the queryset of a ModelChoiceField in a custom form is overridden,
464.         # RelatedFieldWidgetWrapper doesn't mess that up.
465.         band2 = Band.objects.create(name='The Beatles', bio='', sign_date=date(1962, 1, 1))
466. 
467.         ma = ModelAdmin(Concert, self.site)
468.         form = ma.get_form(request)()
469. 
470.         self.assertHTMLEqual(
471.             str(form["main_band"]),
472.             '<div class="related-widget-wrapper">'
473.             '<select name="main_band" id="id_main_band" required>'
474.             '<option value="" selected>---------</option>'
475.             '<option value="%d">The Beatles</option>'
476.             '<option value="%d">The Doors</option>'
477.             '</select></div>' % (band2.id, self.band.id)
478.         )
479. 
480.         class AdminConcertForm(forms.ModelForm):
481.             def __init__(self, *args, **kwargs):
482.                 super().__init__(*args, **kwargs)
483.                 self.fields["main_band"].queryset = Band.objects.filter(name='The Doors')
484. 
485.         class ConcertAdminWithForm(ModelAdmin):
486.             form = AdminConcertForm
487. 
488.         ma = ConcertAdminWithForm(Concert, self.site)
489.         form = ma.get_form(request)()
490. 
491.         self.assertHTMLEqual(
492.             str(form["main_band"]),
493.             '<div class="related-widget-wrapper">'
494.             '<select name="main_band" id="id_main_band" required>'
495.             '<option value="" selected>---------</option>'
496.             '<option value="%d">The Doors</option>'
497.             '</select></div>' % self.band.id
498.         )
499. 
500.     def test_regression_for_ticket_15820(self):


File: tests/modeladmin/tests.py
Line number range: 36 - 720
Content:
class ModelAdminTests(TestCase):

    def setUp(self):
        self.band = Band.objects.create(
            name='The Doors',
            bio='',
            sign_date=date(1965, 1, 1),
        )
        self.site = AdminSite()

    def test_modeladmin_str(self):
        ma = ModelAdmin(Band, self.site)
        self.assertEqual(str(ma), 'modeladmin.ModelAdmin')

    # form/fields/fieldsets interaction ##############################

    def test_default_fields(self):
        ma = ModelAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date'])
        self.assertEqual(list(ma.get_fields(request)), ['name', 'bio', 'sign_date'])
        self.assertEqual(list(ma.get_fields(request, self.band)), ['name', 'bio', 'sign_date'])
        self.assertIsNone(ma.get_exclude(request, self.band))

    def test_default_fieldsets(self):
        # fieldsets_add and fieldsets_change should return a special data structure that
        # is used in the templates. They should generate the "right thing" whether we
        # have specified a custom form, the fields argument, or nothing at all.
        #
        # Here's the default case. There are no custom form_add/form_change methods,
        # no fields argument, and no fieldsets argument.
        ma = ModelAdmin(Band, self.site)
        self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name', 'bio', 'sign_date']})])
        self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name', 'bio', 'sign_date']})])

    def test_get_fieldsets(self):
        # get_fieldsets() is called when figuring out form fields (#18681).
        class BandAdmin(ModelAdmin):
            def get_fieldsets(self, request, obj=None):
                return [(None, {'fields': ['name', 'bio']})]

        ma = BandAdmin(Band, self.site)
        form = ma.get_form(None)
        self.assertEqual(form._meta.fields, ['name', 'bio'])

        class InlineBandAdmin(TabularInline):
            model = Concert
            fk_name = 'main_band'
            can_delete = False

            def get_fieldsets(self, request, obj=None):
                return [(None, {'fields': ['day', 'transport']})]

        ma = InlineBandAdmin(Band, self.site)
        form = ma.get_formset(None).form
        self.assertEqual(form._meta.fields, ['day', 'transport'])

    def test_lookup_allowed_allows_nonexistent_lookup(self):
        """
        A lookup_allowed allows a parameter whose field lookup doesn't exist.
        (#21129).
        """
        class BandAdmin(ModelAdmin):
            fields = ['name']

        ma = BandAdmin(Band, self.site)
        self.assertTrue(ma.lookup_allowed('name__nonexistent', 'test_value'))

    @isolate_apps('modeladmin')
    def test_lookup_allowed_onetoone(self):
        class Department(models.Model):
            code = models.CharField(max_length=4, unique=True)

        class Employee(models.Model):
            department = models.ForeignKey(Department, models.CASCADE, to_field="code")

        class EmployeeProfile(models.Model):
            employee = models.OneToOneField(Employee, models.CASCADE)

        class EmployeeInfo(models.Model):
            employee = models.OneToOneField(Employee, models.CASCADE)
            description = models.CharField(max_length=100)

        class EmployeeProfileAdmin(ModelAdmin):
            list_filter = [
                'employee__employeeinfo__description',
                'employee__department__code',
            ]

        ma = EmployeeProfileAdmin(EmployeeProfile, self.site)
        # Reverse OneToOneField
        self.assertIs(ma.lookup_allowed('employee__employeeinfo__description', 'test_value'), True)
        # OneToOneField and ForeignKey
        self.assertIs(ma.lookup_allowed('employee__department__code', 'test_value'), True)

    def test_field_arguments(self):
        # If fields is specified, fieldsets_add and fieldsets_change should
        # just stick the fields into a formsets structure and return it.
        class BandAdmin(ModelAdmin):
            fields = ['name']

        ma = BandAdmin(Band, self.site)

        self.assertEqual(list(ma.get_fields(request)), ['name'])
        self.assertEqual(list(ma.get_fields(request, self.band)), ['name'])
        self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name']})])
        self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name']})])

    def test_field_arguments_restricted_on_form(self):
        # If fields or fieldsets is specified, it should exclude fields on the
        # Form class to the fields specified. This may cause errors to be
        # raised in the db layer if required model fields aren't in fields/
        # fieldsets, but that's preferable to ghost errors where a field in the
        # Form class isn't being displayed because it's not in fields/fieldsets.

        # Using `fields`.
        class BandAdmin(ModelAdmin):
            fields = ['name']

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
        self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])

        # Using `fieldsets`.
        class BandAdmin(ModelAdmin):
            fieldsets = [(None, {'fields': ['name']})]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
        self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])

        # Using `exclude`.
        class BandAdmin(ModelAdmin):
            exclude = ['bio']

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])

        # You can also pass a tuple to `exclude`.
        class BandAdmin(ModelAdmin):
            exclude = ('bio',)

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])

        # Using `fields` and `exclude`.
        class BandAdmin(ModelAdmin):
            fields = ['name', 'bio']
            exclude = ['bio']

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])

    def test_custom_form_meta_exclude_with_readonly(self):
        """
        The custom ModelForm's `Meta.exclude` is respected when used in
        conjunction with `ModelAdmin.readonly_fields` and when no
        `ModelAdmin.exclude` is defined (#14496).
        """
        # With ModelAdmin
        class AdminBandForm(forms.ModelForm):
            class Meta:
                model = Band
                exclude = ['bio']

        class BandAdmin(ModelAdmin):
            readonly_fields = ['name']
            form = AdminBandForm

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['sign_date'])

        # With InlineModelAdmin
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            readonly_fields = ['transport']
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'opening_band', 'id', 'DELETE'])

    def test_custom_formfield_override_readonly(self):
        class AdminBandForm(forms.ModelForm):
            name = forms.CharField()

            class Meta:
                exclude = ()
                model = Band

        class BandAdmin(ModelAdmin):
            form = AdminBandForm
            readonly_fields = ['name']

        ma = BandAdmin(Band, self.site)

        # `name` shouldn't appear in base_fields because it's part of
        # readonly_fields.
        self.assertEqual(
            list(ma.get_form(request).base_fields),
            ['bio', 'sign_date']
        )
        # But it should appear in get_fields()/fieldsets() so it can be
        # displayed as read-only.
        self.assertEqual(
            list(ma.get_fields(request)),
            ['bio', 'sign_date', 'name']
        )
        self.assertEqual(
            list(ma.get_fieldsets(request)),
            [(None, {'fields': ['bio', 'sign_date', 'name']})]
        )

    def test_custom_form_meta_exclude(self):
        """
        The custom ModelForm's `Meta.exclude` is overridden if
        `ModelAdmin.exclude` or `InlineModelAdmin.exclude` are defined (#14496).
        """
        # With ModelAdmin
        class AdminBandForm(forms.ModelForm):
            class Meta:
                model = Band
                exclude = ['bio']

        class BandAdmin(ModelAdmin):
            exclude = ['name']
            form = AdminBandForm

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['bio', 'sign_date'])

        # With InlineModelAdmin
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            exclude = ['transport']
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'opening_band', 'day', 'id', 'DELETE']
        )

    def test_overriding_get_exclude(self):
        class BandAdmin(ModelAdmin):
            def get_exclude(self, request, obj=None):
                return ['name']

        self.assertEqual(
            list(BandAdmin(Band, self.site).get_form(request).base_fields),
            ['bio', 'sign_date']
        )

    def test_get_exclude_overrides_exclude(self):
        class BandAdmin(ModelAdmin):
            exclude = ['bio']

            def get_exclude(self, request, obj=None):
                return ['name']

        self.assertEqual(
            list(BandAdmin(Band, self.site).get_form(request).base_fields),
            ['bio', 'sign_date']
        )

    def test_get_exclude_takes_obj(self):
        class BandAdmin(ModelAdmin):
            def get_exclude(self, request, obj=None):
                if obj:
                    return ['sign_date']
                return ['name']

        self.assertEqual(
            list(BandAdmin(Band, self.site).get_form(request, self.band).base_fields),
            ['name', 'bio']
        )

    def test_custom_form_validation(self):
        # If a form is specified, it should use it allowing custom validation
        # to work properly. This won't break any of the admin widgets or media.
        class AdminBandForm(forms.ModelForm):
            delete = forms.BooleanField()

        class BandAdmin(ModelAdmin):
            form = AdminBandForm

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date', 'delete'])
        self.assertEqual(type(ma.get_form(request).base_fields['sign_date'].widget), AdminDateWidget)

    def test_form_exclude_kwarg_override(self):
        """
        The `exclude` kwarg passed to `ModelAdmin.get_form()` overrides all
        other declarations (#8999).
        """
        class AdminBandForm(forms.ModelForm):
            class Meta:
                model = Band
                exclude = ['name']

        class BandAdmin(ModelAdmin):
            exclude = ['sign_date']
            form = AdminBandForm

            def get_form(self, request, obj=None, **kwargs):
                kwargs['exclude'] = ['bio']
                return super().get_form(request, obj, **kwargs)

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])

    def test_formset_exclude_kwarg_override(self):
        """
        The `exclude` kwarg passed to `InlineModelAdmin.get_formset()`
        overrides all other declarations (#8999).
        """
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            exclude = ['transport']
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

            def get_formset(self, request, obj=None, **kwargs):
                kwargs['exclude'] = ['opening_band']
                return super().get_formset(request, obj, **kwargs)

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'day', 'transport', 'id', 'DELETE']
        )

    def test_formset_overriding_get_exclude_with_form_fields(self):
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                fields = ['main_band', 'opening_band', 'day', 'transport']

        class ConcertInline(TabularInline):
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

            def get_exclude(self, request, obj=None):
                return ['opening_band']

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'day', 'transport', 'id', 'DELETE']
        )

    def test_formset_overriding_get_exclude_with_form_exclude(self):
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

            def get_exclude(self, request, obj=None):
                return ['opening_band']

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'day', 'transport', 'id', 'DELETE']
        )

    def test_raw_id_fields_widget_override(self):
        """
        The autocomplete_fields, raw_id_fields, and radio_fields widgets may
        overridden by specifying a widget in get_formset().
        """
        class ConcertInline(TabularInline):
            model = Concert
            fk_name = 'main_band'
            raw_id_fields = ('opening_band',)

            def get_formset(self, request, obj=None, **kwargs):
                kwargs['widgets'] = {'opening_band': Select}
                return super().get_formset(request, obj, **kwargs)

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        band_widget = list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields['opening_band'].widget
        # Without the override this would be ForeignKeyRawIdWidget.
        self.assertIsInstance(band_widget, Select)

    def test_queryset_override(self):
        # If the queryset of a ModelChoiceField in a custom form is overridden,
        # RelatedFieldWidgetWrapper doesn't mess that up.
        band2 = Band.objects.create(name='The Beatles', bio='', sign_date=date(1962, 1, 1))

        ma = ModelAdmin(Concert, self.site)
        form = ma.get_form(request)()

        self.assertHTMLEqual(
            str(form["main_band"]),
            '<div class="related-widget-wrapper">'
            '<select name="main_band" id="id_main_band" required>'
            '<option value="" selected>---------</option>'
            '<option value="%d">The Beatles</option>'
            '<option value="%d">The Doors</option>'
            '</select></div>' % (band2.id, self.band.id)
        )

        class AdminConcertForm(forms.ModelForm):
            def __init__(self, *args, **kwargs):
                super().__init__(*args, **kwargs)
                self.fields["main_band"].queryset = Band.objects.filter(name='The Doors')

        class ConcertAdminWithForm(ModelAdmin):
            form = AdminConcertForm

        ma = ConcertAdminWithForm(Concert, self.site)
        form = ma.get_form(request)()

        self.assertHTMLEqual(
            str(form["main_band"]),
            '<div class="related-widget-wrapper">'
            '<select name="main_band" id="id_main_band" required>'
            '<option value="" selected>---------</option>'
            '<option value="%d">The Doors</option>'
            '</select></div>' % self.band.id
        )

    def test_regression_for_ticket_15820(self):
        """
        `obj` is passed from `InlineModelAdmin.get_fieldsets()` to
        `InlineModelAdmin.get_formset()`.
        """
        class CustomConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                fields = ['day']

        class ConcertInline(TabularInline):
            model = Concert
            fk_name = 'main_band'

            def get_formset(self, request, obj=None, **kwargs):
                if obj:
                    kwargs['form'] = CustomConcertForm
                return super().get_formset(request, obj, **kwargs)

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        Concert.objects.create(main_band=self.band, opening_band=self.band, day=1)
        ma = BandAdmin(Band, self.site)
        inline_instances = ma.get_inline_instances(request)
        fieldsets = list(inline_instances[0].get_fieldsets(request))
        self.assertEqual(fieldsets[0][1]['fields'], ['main_band', 'opening_band', 'day', 'transport'])
        fieldsets = list(inline_instances[0].get_fieldsets(request, inline_instances[0].model))
        self.assertEqual(fieldsets[0][1]['fields'], ['day'])

    # radio_fields behavior ###########################################

    def test_default_foreign_key_widget(self):
        # First, without any radio_fields specified, the widgets for ForeignKey
        # and fields with choices specified ought to be a basic Select widget.
        # ForeignKey widgets in the admin are wrapped with RelatedFieldWidgetWrapper so
        # they need to be handled properly when type checking. For Select fields, all of
        # the choices lists have a first entry of dashes.
        cma = ModelAdmin(Concert, self.site)
        cmafa = cma.get_form(request)

        self.assertEqual(type(cmafa.base_fields['main_band'].widget.widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['main_band'].widget.choices),
            [('', '---------'), (self.band.id, 'The Doors')])

        self.assertEqual(type(cmafa.base_fields['opening_band'].widget.widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['opening_band'].widget.choices),
            [('', '---------'), (self.band.id, 'The Doors')]
        )
        self.assertEqual(type(cmafa.base_fields['day'].widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['day'].widget.choices),
            [('', '---------'), (1, 'Fri'), (2, 'Sat')]
        )
        self.assertEqual(type(cmafa.base_fields['transport'].widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['transport'].widget.choices),
            [('', '---------'), (1, 'Plane'), (2, 'Train'), (3, 'Bus')])

    def test_foreign_key_as_radio_field(self):
        # Now specify all the fields as radio_fields.  Widgets should now be
        # RadioSelect, and the choices list should have a first entry of 'None' if
        # blank=True for the model field.  Finally, the widget should have the
        # 'radiolist' attr, and 'inline' as well if the field is specified HORIZONTAL.
        class ConcertAdmin(ModelAdmin):
            radio_fields = {
                'main_band': HORIZONTAL,
                'opening_band': VERTICAL,
                'day': VERTICAL,
                'transport': HORIZONTAL,
            }

        cma = ConcertAdmin(Concert, self.site)
        cmafa = cma.get_form(request)

        self.assertEqual(type(cmafa.base_fields['main_band'].widget.widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['main_band'].widget.attrs, {'class': 'radiolist inline'})
        self.assertEqual(
            list(cmafa.base_fields['main_band'].widget.choices),
            [(self.band.id, 'The Doors')]
        )

        self.assertEqual(type(cmafa.base_fields['opening_band'].widget.widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['opening_band'].widget.attrs, {'class': 'radiolist'})
        self.assertEqual(
            list(cmafa.base_fields['opening_band'].widget.choices),
            [('', 'None'), (self.band.id, 'The Doors')]
        )
        self.assertEqual(type(cmafa.base_fields['day'].widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['day'].widget.attrs, {'class': 'radiolist'})
        self.assertEqual(list(cmafa.base_fields['day'].widget.choices), [(1, 'Fri'), (2, 'Sat')])

        self.assertEqual(type(cmafa.base_fields['transport'].widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['transport'].widget.attrs, {'class': 'radiolist inline'})
        self.assertEqual(
            list(cmafa.base_fields['transport'].widget.choices),
            [('', 'None'), (1, 'Plane'), (2, 'Train'), (3, 'Bus')]
        )

        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ('transport',)

        class ConcertAdmin(ModelAdmin):
            form = AdminConcertForm

        ma = ConcertAdmin(Concert, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['main_band', 'opening_band', 'day'])

        class AdminConcertForm(forms.ModelForm):
            extra = forms.CharField()

            class Meta:
                model = Concert
                fields = ['extra', 'transport']

        class ConcertAdmin(ModelAdmin):
            form = AdminConcertForm

        ma = ConcertAdmin(Concert, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['extra', 'transport'])

        class ConcertInline(TabularInline):
            form = AdminConcertForm
            model = Concert
            fk_name = 'main_band'
            can_delete = True

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['extra', 'transport', 'id', 'DELETE', 'main_band']
        )

    def test_log_actions(self):
        ma = ModelAdmin(Band, self.site)
        mock_request = MockRequest()
        mock_request.user = User.objects.create(username='bill')
        content_type = get_content_type_for_model(self.band)
        tests = (
            (ma.log_addition, ADDITION, {'added': {}}),
            (ma.log_change, CHANGE, {'changed': {'fields': ['name', 'bio']}}),
            (ma.log_deletion, DELETION, str(self.band)),
        )
        for method, flag, message in tests:
            with self.subTest(name=method.__name__):
                created = method(mock_request, self.band, message)
                fetched = LogEntry.objects.filter(action_flag=flag).latest('id')
                self.assertEqual(created, fetched)
                self.assertEqual(fetched.action_flag, flag)
                self.assertEqual(fetched.content_type, content_type)
                self.assertEqual(fetched.object_id, str(self.band.pk))
                self.assertEqual(fetched.user, mock_request.user)
                if flag == DELETION:
                    self.assertEqual(fetched.change_message, '')
                    self.assertEqual(fetched.object_repr, message)
                else:
                    self.assertEqual(fetched.change_message, str(message))
                    self.assertEqual(fetched.object_repr, str(self.band))

    def test_get_autocomplete_fields(self):
        class NameAdmin(ModelAdmin):
            search_fields = ['name']

        class SongAdmin(ModelAdmin):
            autocomplete_fields = ['featuring']
            fields = ['featuring', 'band']

        class OtherSongAdmin(SongAdmin):
            def get_autocomplete_fields(self, request):
                return ['band']

        self.site.register(Band, NameAdmin)
        try:
            # Uses autocomplete_fields if not overridden.
            model_admin = SongAdmin(Song, self.site)
            form = model_admin.get_form(request)()
            self.assertIsInstance(form.fields['featuring'].widget.widget, AutocompleteSelectMultiple)
            # Uses overridden get_autocomplete_fields
            model_admin = OtherSongAdmin(Song, self.site)
            form = model_admin.get_form(request)()
            self.assertIsInstance(form.fields['band'].widget.widget, AutocompleteSelect)
        finally:
            self.site.unregister(Band)

    def test_get_deleted_objects(self):
        mock_request = MockRequest()
        mock_request.user = User.objects.create_superuser(username='bob', email='bob@test.com', password='test')
        self.site.register(Band, ModelAdmin)
        ma = self.site._registry[Band]
        deletable_objects, model_count, perms_needed, protected = ma.get_deleted_objects([self.band], request)
        self.assertEqual(deletable_objects, ['Band: The Doors'])
        self.assertEqual(model_count, {'bands': 1})
        self.assertEqual(perms_needed, set())
        self.assertEqual(protected, [])

    def test_get_deleted_objects_with_custom_has_delete_permission(self):
        """
        ModelAdmin.get_deleted_objects() uses ModelAdmin.has_delete_permission()
        for permissions checking.
        """
        mock_request = MockRequest()
        mock_request.user = User.objects.create_superuser(username='bob', email='bob@test.com', password='test')

        class TestModelAdmin(ModelAdmin):
            def has_delete_permission(self, request, obj=None):
                return False

        self.site.register(Band, TestModelAdmin)
        ma = self.site._registry[Band]
        deletable_objects, model_count, perms_needed, protected = ma.get_deleted_objects([self.band], request)
        self.assertEqual(deletable_objects, ['Band: The Doors'])
        self.assertEqual(model_count, {'bands': 1})
        self.assertEqual(perms_needed, {'band'})
        self.assertEqual(protected, [])

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 19:08:57,193 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/modeladmin/tests.py`.\n   - This context provides the first 500 lines of the requested file.\n2. Extended relevance:\n   - Providing the full file content as requested is necessary to answer the query.', relative_path='tests/modeladmin/tests.py', start_line=1, end_line=500), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/modeladmin/tests.py`.\n   - This context provides lines 36-720 of the requested file.\n2. Extended relevance:\n   - Providing the full file content as requested is necessary to answer the query.', relative_path='tests/modeladmin/tests.py', start_line=36, end_line=720), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/admin_views/tests.py`.\n   - This context provides the first 500 lines of the requested file.\n2. Extended relevance:\n   - Providing the full file content as requested is necessary to answer the query.', relative_path='tests/admin_views/tests.py', start_line=1, end_line=500), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/admin_views/tests.py`.\n   - This context provides lines 1420-2417 of the requested file.\n2. Extended relevance:\n   - Providing the full file content as requested is necessary to answer the query.', relative_path='tests/admin_views/tests.py', start_line=1420, end_line=2417), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/admin_views/tests.py`.\n   - This context provides lines 3982-4302 of the requested file.\n2. Extended relevance:\n   - Providing the full file content as requested is necessary to answer the query.', relative_path='tests/admin_views/tests.py', start_line=3982, end_line=4302), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/admin_views/tests.py`.\n   - This context provides lines 4435-4804 of the requested file.\n2. Extended relevance:\n   - Providing the full file content as requested is necessary to answer the query.', relative_path='tests/admin_views/tests.py', start_line=4435, end_line=4804), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/admin_views/tests.py`.\n   - This context provides lines 5099-5259 of the requested file.\n2. Extended relevance:\n   - Providing the full file content as requested is necessary to answer the query.', relative_path='tests/admin_views/tests.py', start_line=5099, end_line=5259)]
2025-12-23 19:08:57,205 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 7 contexts to memory for query: Please provide the full content of `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`.
2025-12-23 19:08:57,205 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 19:08:57,205 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 19:08:57,206 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 7 new contexts to 2 existing contexts
2025-12-23 19:08:57,207 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 8 total contexts (removed 1 duplicates)
2025-12-23 19:08:57,208 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Allow overridding widget in formfield_for_manytomany().

Description: Description
	 
		(last modified by Mariusz Felisiak)
	 
It does not work when I set widget param to function formfield_for_manytomany().
This is different from the formfield_for_foreignkey() function.

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 69a5fbf389..b3c4020f39 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -250,15 +250,16 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):
         db = kwargs.get('using')
 
         autocomplete_fields = self.get_autocomplete_fields(request)
-        if db_field.name in autocomplete_fields:
-            kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in self.raw_id_fields:
-            kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
-        elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
-            kwargs['widget'] = widgets.FilteredSelectMultiple(
-                db_field.verbose_name,
-                db_field.name in self.filter_vertical
-            )
+        if 'widget' not in kwargs:
+            if db_field.name in autocomplete_fields:
+                kwargs['widget'] = AutocompleteSelectMultiple(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in self.raw_id_fields:
+                kwargs['widget'] = widgets.ManyToManyRawIdWidget(db_field.remote_field, self.admin_site, using=db)
+            elif db_field.name in [*self.filter_vertical, *self.filter_horizontal]:
+                kwargs['widget'] = widgets.FilteredSelectMultiple(
+                    db_field.verbose_name,
+                    db_field.name in self.filter_vertical
+                )
 
         if 'queryset' not in kwargs:
             queryset = self.get_field_queryset(db, db_field, request)
diff --git a/docs/ref/contrib/admin/index.txt b/docs/ref/contrib/admin/index.txt
index e05319034a..193b7ba38c 100644
--- a/docs/ref/contrib/admin/index.txt
+++ b/docs/ref/contrib/admin/index.txt
@@ -1810,6 +1810,11 @@ templates used by the :class:`ModelAdmin` views:
                     kwargs["queryset"] = Car.objects.filter(owner=request.user)
                 return super().formfield_for_manytomany(db_field, request, **kwargs)
 
+    As with ``formfield_for_foreignkey()``, if you provide a custom ``widget`` in
+    ``kwargs``, that widget will be used instead of the admin's default selection
+    from ``autocomplete_fields``, ``raw_id_fields``, ``filter_vertical``, or
+    ``filter_horizontal``.
+
 .. method:: ModelAdmin.formfield_for_choice_field(db_field, request, **kwargs)
 
     Like the ``formfield_for_foreignkey`` and ``formfield_for_manytomany``


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/admin_views/test_forms.py` and `tests/modeladmin/tests.py`.
Extra Requirements: 
Purpose: I need to find test cases that demonstrate overriding widgets in ModelAdmin form fields, specifically for many-to-many relationships.

Previous refined query 2:
Essential Query: Please provide the full content of `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`.
Extra Requirements: 
Purpose: I need to find test cases that demonstrate overriding widgets in `ModelAdmin` form fields to find the most relevant examples for the user's issue.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/admin_views/test_forms.py
Line number range: 1 - 20
Content:
1. from django.contrib.admin.forms import AdminAuthenticationForm
2. from django.contrib.auth.models import User
3. from django.test import TestCase, override_settings
4. 
5. 
6. # To verify that the login form rejects inactive users, use an authentication
7. # backend that allows them.
8. @override_settings(AUTHENTICATION_BACKENDS=['django.contrib.auth.backends.AllowAllUsersModelBackend'])
9. class AdminAuthenticationFormTests(TestCase):
10.     @classmethod
11.     def setUpTestData(cls):
12.         User.objects.create_user(username='inactive', password='password', is_active=False)
13. 
14.     def test_inactive_user(self):
15.         data = {
16.             'username': 'inactive',
17.             'password': 'password',
18.         }
19.         form = AdminAuthenticationForm(None, data)
20.         self.assertEqual(form.non_field_errors(), ['This account is inactive.'])


File: tests/admin_views/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import os
3. import re
4. import unittest
5. from unittest import mock
6. from urllib.parse import parse_qsl, urljoin, urlparse
7. 
8. import pytz
9. 
10. from django.contrib.admin import AdminSite, ModelAdmin
11. from django.contrib.admin.helpers import ACTION_CHECKBOX_NAME
12. from django.contrib.admin.models import ADDITION, DELETION, LogEntry
13. from django.contrib.admin.options import TO_FIELD_VAR
14. from django.contrib.admin.templatetags.admin_urls import add_preserved_filters
15. from django.contrib.admin.tests import AdminSeleniumTestCase
16. from django.contrib.admin.utils import quote
17. from django.contrib.admin.views.main import IS_POPUP_VAR
18. from django.contrib.auth import REDIRECT_FIELD_NAME, get_permission_codename
19. from django.contrib.auth.models import Group, Permission, User
20. from django.contrib.contenttypes.models import ContentType
21. from django.core import mail
22. from django.core.checks import Error
23. from django.core.files import temp as tempfile
24. from django.forms.utils import ErrorList
25. from django.template.response import TemplateResponse
26. from django.test import (
27.     TestCase, modify_settings, override_settings, skipUnlessDBFeature,
28. )
29. from django.test.utils import override_script_prefix
30. from django.urls import NoReverseMatch, resolve, reverse
31. from django.utils import formats, translation
32. from django.utils.cache import get_max_age
33. from django.utils.encoding import iri_to_uri
34. from django.utils.html import escape
35. from django.utils.http import urlencode
36. 
37. from . import customadmin
38. from .admin import CityAdmin, site, site2
39. from .models import (
40.     Actor, AdminOrderedAdminMethod, AdminOrderedCallable, AdminOrderedField,
41.     AdminOrderedModelMethod, Album, Answer, Answer2, Article, BarAccount, Book,
42.     Bookmark, Category, Chapter, ChapterXtra1, ChapterXtra2, Character, Child,
43.     Choice, City, Collector, Color, ComplexSortedPerson, CoverLetter,
44.     CustomArticle, CyclicOne, CyclicTwo, DooHickey, Employee, EmptyModel,
45.     Fabric, FancyDoodad, FieldOverridePost, FilteredManager, FooAccount,
46.     FoodDelivery, FunkyTag, Gallery, Grommet, Inquisition, Language, Link,
47.     MainPrepopulated, Media, ModelWithStringPrimaryKey, OtherStory, Paper,
48.     Parent, ParentWithDependentChildren, ParentWithUUIDPK, Person, Persona,
49.     Picture, Pizza, Plot, PlotDetails, PluggableSearchPerson, Podcast, Post,
50.     PrePopulatedPost, Promo, Question, ReadablePizza, ReadOnlyPizza,
51.     Recommendation, Recommender, RelatedPrepopulated, RelatedWithUUIDPKModel,
52.     Report, Restaurant, RowLevelChangePermissionModel, SecretHideout, Section,
53.     ShortMessage, Simple, Song, State, Story, SuperSecretHideout, SuperVillain,
54.     Telegram, TitleTranslation, Topping, UnchangeableObject, UndeletableObject,
55.     UnorderedObject, UserProxy, Villain, Vodcast, Whatsit, Widget, Worker,
56.     WorkHour,
57. )
58. 
59. ERROR_MESSAGE = "Please enter the correct username and password \
60. for a staff account. Note that both fields may be case-sensitive."
61. 
62. MULTIPART_ENCTYPE = 'enctype="multipart/form-data"'
63. 
64. 
65. class AdminFieldExtractionMixin:
66.     """
67.     Helper methods for extracting data from AdminForm.
68.     """
69.     def get_admin_form_fields(self, response):
70.         """
71.         Return a list of AdminFields for the AdminForm in the response.
72.         """
73.         fields = []
74.         for fieldset in response.context['adminform']:
75.             for field_line in fieldset:
76.                 fields.extend(field_line)
77.         return fields
78. 
79.     def get_admin_readonly_fields(self, response):
80.         """
81.         Return the readonly fields for the response's AdminForm.
82.         """
83.         return [f for f in self.get_admin_form_fields(response) if f.is_readonly]
84. 
85.     def get_admin_readonly_field(self, response, field_name):
86.         """
87.         Return the readonly field for the given field_name.
88.         """
89.         admin_readonly_fields = self.get_admin_readonly_fields(response)
90.         for field in admin_readonly_fields:
91.             if field.field['name'] == field_name:
92.                 return field
93. 
94. 
95. @override_settings(ROOT_URLCONF='admin_views.urls', USE_I18N=True, USE_L10N=False, LANGUAGE_CODE='en')
96. class AdminViewBasicTestCase(TestCase):
97. 
98.     @classmethod
99.     def setUpTestData(cls):
100.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
101.         cls.s1 = Section.objects.create(name='Test section')
102.         cls.a1 = Article.objects.create(
103.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
104.         )
105.         cls.a2 = Article.objects.create(
106.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
107.         )
108.         cls.a3 = Article.objects.create(
109.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
110.         )
111.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
112.         cls.color1 = Color.objects.create(value='Red', warm=True)
113.         cls.color2 = Color.objects.create(value='Orange', warm=True)
114.         cls.color3 = Color.objects.create(value='Blue', warm=False)
115.         cls.color4 = Color.objects.create(value='Green', warm=False)
116.         cls.fab1 = Fabric.objects.create(surface='x')
117.         cls.fab2 = Fabric.objects.create(surface='y')
118.         cls.fab3 = Fabric.objects.create(surface='plain')
119.         cls.b1 = Book.objects.create(name='Book 1')
120.         cls.b2 = Book.objects.create(name='Book 2')
121.         cls.pro1 = Promo.objects.create(name='Promo 1', book=cls.b1)
122.         cls.pro1 = Promo.objects.create(name='Promo 2', book=cls.b2)
123.         cls.chap1 = Chapter.objects.create(title='Chapter 1', content='[ insert contents here ]', book=cls.b1)
124.         cls.chap2 = Chapter.objects.create(title='Chapter 2', content='[ insert contents here ]', book=cls.b1)
125.         cls.chap3 = Chapter.objects.create(title='Chapter 1', content='[ insert contents here ]', book=cls.b2)
126.         cls.chap4 = Chapter.objects.create(title='Chapter 2', content='[ insert contents here ]', book=cls.b2)
127.         cls.cx1 = ChapterXtra1.objects.create(chap=cls.chap1, xtra='ChapterXtra1 1')
128.         cls.cx2 = ChapterXtra1.objects.create(chap=cls.chap3, xtra='ChapterXtra1 2')
129.         Actor.objects.create(name='Palin', age=27)
130. 
131.         # Post data for edit inline
132.         cls.inline_post_data = {
133.             "name": "Test section",
134.             # inline data
135.             "article_set-TOTAL_FORMS": "6",
136.             "article_set-INITIAL_FORMS": "3",
137.             "article_set-MAX_NUM_FORMS": "0",
138.             "article_set-0-id": cls.a1.pk,
139.             # there is no title in database, give one here or formset will fail.
140.             "article_set-0-title": "Norske bostaver æøå skaper problemer",
141.             "article_set-0-content": "&lt;p&gt;Middle content&lt;/p&gt;",
142.             "article_set-0-date_0": "2008-03-18",
143.             "article_set-0-date_1": "11:54:58",
144.             "article_set-0-section": cls.s1.pk,
145.             "article_set-1-id": cls.a2.pk,
146.             "article_set-1-title": "Need a title.",
147.             "article_set-1-content": "&lt;p&gt;Oldest content&lt;/p&gt;",
148.             "article_set-1-date_0": "2000-03-18",
149.             "article_set-1-date_1": "11:54:58",
150.             "article_set-2-id": cls.a3.pk,
151.             "article_set-2-title": "Need a title.",
152.             "article_set-2-content": "&lt;p&gt;Newest content&lt;/p&gt;",
153.             "article_set-2-date_0": "2009-03-18",
154.             "article_set-2-date_1": "11:54:58",
155.             "article_set-3-id": "",
156.             "article_set-3-title": "",
157.             "article_set-3-content": "",
158.             "article_set-3-date_0": "",
159.             "article_set-3-date_1": "",
160.             "article_set-4-id": "",
161.             "article_set-4-title": "",
162.             "article_set-4-content": "",
163.             "article_set-4-date_0": "",
164.             "article_set-4-date_1": "",
165.             "article_set-5-id": "",
166.             "article_set-5-title": "",
167.             "article_set-5-content": "",
168.             "article_set-5-date_0": "",
169.             "article_set-5-date_1": "",
170.         }
171. 
172.     def setUp(self):
173.         self.client.force_login(self.superuser)
174. 
175.     def assertContentBefore(self, response, text1, text2, failing_msg=None):
176.         """
177.         Testing utility asserting that text1 appears before text2 in response
178.         content.
179.         """
180.         self.assertEqual(response.status_code, 200)
181.         self.assertLess(
182.             response.content.index(text1.encode()),
183.             response.content.index(text2.encode()),
184.             (failing_msg or '') + '\nResponse:\n' + response.content.decode(response.charset)
185.         )
186. 
187. 
188. class AdminViewBasicTest(AdminViewBasicTestCase):
189.     def test_trailing_slash_required(self):
190.         """
191.         If you leave off the trailing slash, app should redirect and add it.
192.         """
193.         add_url = reverse('admin:admin_views_article_add')
194.         response = self.client.get(add_url[:-1])
195.         self.assertRedirects(response, add_url, status_code=301)
196. 
197.     def test_basic_add_GET(self):
198.         """
199.         A smoke test to ensure GET on the add_view works.
200.         """
201.         response = self.client.get(reverse('admin:admin_views_section_add'))
202.         self.assertIsInstance(response, TemplateResponse)
203.         self.assertEqual(response.status_code, 200)
204. 
205.     def test_add_with_GET_args(self):
206.         response = self.client.get(reverse('admin:admin_views_section_add'), {'name': 'My Section'})
207.         self.assertContains(
208.             response, 'value="My Section"',
209.             msg_prefix="Couldn't find an input with the right value in the response"
210.         )
211. 
212.     def test_basic_edit_GET(self):
213.         """
214.         A smoke test to ensure GET on the change_view works.
215.         """
216.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
217.         self.assertIsInstance(response, TemplateResponse)
218.         self.assertEqual(response.status_code, 200)
219. 
220.     def test_basic_edit_GET_string_PK(self):
221.         """
222.         GET on the change_view (when passing a string as the PK argument for a
223.         model with an integer PK field) redirects to the index page with a
224.         message saying the object doesn't exist.
225.         """
226.         response = self.client.get(reverse('admin:admin_views_section_change', args=(quote("abc/<b>"),)), follow=True)
227.         self.assertRedirects(response, reverse('admin:index'))
228.         self.assertEqual(
229.             [m.message for m in response.context['messages']],
230.             ['section with ID “abc/<b>” doesn’t exist. Perhaps it was deleted?']
231.         )
232. 
233.     def test_basic_edit_GET_old_url_redirect(self):
234.         """
235.         The change URL changed in Django 1.9, but the old one still redirects.
236.         """
237.         response = self.client.get(
238.             reverse('admin:admin_views_section_change', args=(self.s1.pk,)).replace('change/', '')
239.         )
240.         self.assertRedirects(response, reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
241. 
242.     def test_basic_inheritance_GET_string_PK(self):
243.         """
244.         GET on the change_view (for inherited models) redirects to the index
245.         page with a message saying the object doesn't exist.
246.         """
247.         response = self.client.get(reverse('admin:admin_views_supervillain_change', args=('abc',)), follow=True)
248.         self.assertRedirects(response, reverse('admin:index'))
249.         self.assertEqual(
250.             [m.message for m in response.context['messages']],
251.             ['super villain with ID “abc” doesn’t exist. Perhaps it was deleted?']
252.         )
253. 
254.     def test_basic_add_POST(self):
255.         """
256.         A smoke test to ensure POST on add_view works.
257.         """
258.         post_data = {
259.             "name": "Another Section",
260.             # inline data
261.             "article_set-TOTAL_FORMS": "3",
262.             "article_set-INITIAL_FORMS": "0",
263.             "article_set-MAX_NUM_FORMS": "0",
264.         }
265.         response = self.client.post(reverse('admin:admin_views_section_add'), post_data)
266.         self.assertEqual(response.status_code, 302)  # redirect somewhere
267. 
268.     def test_popup_add_POST(self):
269.         """
270.         Ensure http response from a popup is properly escaped.
271.         """
272.         post_data = {
273.             '_popup': '1',
274.             'title': 'title with a new\nline',
275.             'content': 'some content',
276.             'date_0': '2010-09-10',
277.             'date_1': '14:55:39',
278.         }
279.         response = self.client.post(reverse('admin:admin_views_article_add'), post_data)
280.         self.assertContains(response, 'title with a new\\nline')
281. 
282.     def test_basic_edit_POST(self):
283.         """
284.         A smoke test to ensure POST on edit_view works.
285.         """
286.         url = reverse('admin:admin_views_section_change', args=(self.s1.pk,))
287.         response = self.client.post(url, self.inline_post_data)
288.         self.assertEqual(response.status_code, 302)  # redirect somewhere
289. 
290.     def test_edit_save_as(self):
291.         """
292.         Test "save as".
293.         """
294.         post_data = self.inline_post_data.copy()
295.         post_data.update({
296.             '_saveasnew': 'Save+as+new',
297.             "article_set-1-section": "1",
298.             "article_set-2-section": "1",
299.             "article_set-3-section": "1",
300.             "article_set-4-section": "1",
301.             "article_set-5-section": "1",
302.         })
303.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), post_data)
304.         self.assertEqual(response.status_code, 302)  # redirect somewhere
305. 
306.     def test_edit_save_as_delete_inline(self):
307.         """
308.         Should be able to "Save as new" while also deleting an inline.
309.         """
310.         post_data = self.inline_post_data.copy()
311.         post_data.update({
312.             '_saveasnew': 'Save+as+new',
313.             "article_set-1-section": "1",
314.             "article_set-2-section": "1",
315.             "article_set-2-DELETE": "1",
316.             "article_set-3-section": "1",
317.         })
318.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), post_data)
319.         self.assertEqual(response.status_code, 302)
320.         # started with 3 articles, one was deleted.
321.         self.assertEqual(Section.objects.latest('id').article_set.count(), 2)
322. 
323.     def test_change_list_column_field_classes(self):
324.         response = self.client.get(reverse('admin:admin_views_article_changelist'))
325.         # callables display the callable name.
326.         self.assertContains(response, 'column-callable_year')
327.         self.assertContains(response, 'field-callable_year')
328.         # lambdas display as "lambda" + index that they appear in list_display.
329.         self.assertContains(response, 'column-lambda8')
330.         self.assertContains(response, 'field-lambda8')
331. 
332.     def test_change_list_sorting_callable(self):
333.         """
334.         Ensure we can sort on a list_display field that is a callable
335.         (column 2 is callable_year in ArticleAdmin)
336.         """
337.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': 2})
338.         self.assertContentBefore(
339.             response, 'Oldest content', 'Middle content',
340.             "Results of sorting on callable are out of order."
341.         )
342.         self.assertContentBefore(
343.             response, 'Middle content', 'Newest content',
344.             "Results of sorting on callable are out of order."
345.         )
346. 
347.     def test_change_list_sorting_property(self):
348.         """
349.         Sort on a list_display field that is a property (column 10 is
350.         a property in Article model).
351.         """
352.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': 10})
353.         self.assertContentBefore(
354.             response,
355.             'Oldest content',
356.             'Middle content',
357.             'Results of sorting on property are out of order.',
358.         )
359.         self.assertContentBefore(
360.             response,
361.             'Middle content',
362.             'Newest content',
363.             'Results of sorting on property are out of order.',
364.         )
365. 
366.     def test_change_list_sorting_callable_query_expression(self):
367.         """Query expressions may be used for admin_order_field."""
368.         tests = [
369.             ('order_by_expression', 9),
370.             ('order_by_f_expression', 12),
371.             ('order_by_orderby_expression', 13),
372.         ]
373.         for admin_order_field, index in tests:
374.             with self.subTest(admin_order_field):
375.                 response = self.client.get(
376.                     reverse('admin:admin_views_article_changelist'),
377.                     {'o': index},
378.                 )
379.                 self.assertContentBefore(
380.                     response, 'Oldest content', 'Middle content',
381.                     'Results of sorting on callable are out of order.'
382.                 )
383.                 self.assertContentBefore(
384.                     response, 'Middle content', 'Newest content',
385.                     'Results of sorting on callable are out of order.'
386.                 )
387. 
388.     def test_change_list_sorting_callable_query_expression_reverse(self):
389.         tests = [
390.             ('order_by_expression', -9),
391.             ('order_by_f_expression', -12),
392.             ('order_by_orderby_expression', -13),
393.         ]
394.         for admin_order_field, index in tests:
395.             with self.subTest(admin_order_field):
396.                 response = self.client.get(
397.                     reverse('admin:admin_views_article_changelist'),
398.                     {'o': index},
399.                 )
400.                 self.assertContentBefore(
401.                     response, 'Middle content', 'Oldest content',
402.                     'Results of sorting on callable are out of order.'
403.                 )
404.                 self.assertContentBefore(
405.                     response, 'Newest content', 'Middle content',
406.                     'Results of sorting on callable are out of order.'
407.                 )
408. 
409.     def test_change_list_sorting_model(self):
410.         """
411.         Ensure we can sort on a list_display field that is a Model method
412.         (column 3 is 'model_year' in ArticleAdmin)
413.         """
414.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '-3'})
415.         self.assertContentBefore(
416.             response, 'Newest content', 'Middle content',
417.             "Results of sorting on Model method are out of order."
418.         )
419.         self.assertContentBefore(
420.             response, 'Middle content', 'Oldest content',
421.             "Results of sorting on Model method are out of order."
422.         )
423. 
424.     def test_change_list_sorting_model_admin(self):
425.         """
426.         Ensure we can sort on a list_display field that is a ModelAdmin method
427.         (column 4 is 'modeladmin_year' in ArticleAdmin)
428.         """
429.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '4'})
430.         self.assertContentBefore(
431.             response, 'Oldest content', 'Middle content',
432.             "Results of sorting on ModelAdmin method are out of order."
433.         )
434.         self.assertContentBefore(
435.             response, 'Middle content', 'Newest content',
436.             "Results of sorting on ModelAdmin method are out of order."
437.         )
438. 
439.     def test_change_list_sorting_model_admin_reverse(self):
440.         """
441.         Ensure we can sort on a list_display field that is a ModelAdmin
442.         method in reverse order (i.e. admin_order_field uses the '-' prefix)
443.         (column 6 is 'model_year_reverse' in ArticleAdmin)
444.         """
445.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '6'})
446.         self.assertContentBefore(
447.             response, '2009', '2008',
448.             "Results of sorting on ModelAdmin method are out of order."
449.         )
450.         self.assertContentBefore(
451.             response, '2008', '2000',
452.             "Results of sorting on ModelAdmin method are out of order."
453.         )
454.         # Let's make sure the ordering is right and that we don't get a
455.         # FieldError when we change to descending order
456.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '-6'})
457.         self.assertContentBefore(
458.             response, '2000', '2008',
459.             "Results of sorting on ModelAdmin method are out of order."
460.         )
461.         self.assertContentBefore(
462.             response, '2008', '2009',
463.             "Results of sorting on ModelAdmin method are out of order."
464.         )
465. 
466.     def test_change_list_sorting_multiple(self):
467.         p1 = Person.objects.create(name="Chris", gender=1, alive=True)
468.         p2 = Person.objects.create(name="Chris", gender=2, alive=True)
469.         p3 = Person.objects.create(name="Bob", gender=1, alive=True)
470.         link1 = reverse('admin:admin_views_person_change', args=(p1.pk,))
471.         link2 = reverse('admin:admin_views_person_change', args=(p2.pk,))
472.         link3 = reverse('admin:admin_views_person_change', args=(p3.pk,))
473. 
474.         # Sort by name, gender
475.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {'o': '1.2'})
476.         self.assertContentBefore(response, link3, link1)
477.         self.assertContentBefore(response, link1, link2)
478. 
479.         # Sort by gender descending, name
480.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {'o': '-2.1'})
481.         self.assertContentBefore(response, link2, link3)
482.         self.assertContentBefore(response, link3, link1)
483. 
484.     def test_change_list_sorting_preserve_queryset_ordering(self):
485.         """
486.         If no ordering is defined in `ModelAdmin.ordering` or in the query
487.         string, then the underlying order of the queryset should not be
488.         changed, even if it is defined in `Modeladmin.get_queryset()`.
489.         Refs #11868, #7309.
490.         """
491.         p1 = Person.objects.create(name="Amy", gender=1, alive=True, age=80)
492.         p2 = Person.objects.create(name="Bob", gender=1, alive=True, age=70)
493.         p3 = Person.objects.create(name="Chris", gender=2, alive=False, age=60)
494.         link1 = reverse('admin:admin_views_person_change', args=(p1.pk,))
495.         link2 = reverse('admin:admin_views_person_change', args=(p2.pk,))
496.         link3 = reverse('admin:admin_views_person_change', args=(p3.pk,))
497. 
498.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {})
499.         self.assertContentBefore(response, link3, link2)
500.         self.assertContentBefore(response, link2, link1)


File: tests/admin_views/tests.py
Line number range: 1420 - 2417
Content:
1420. @override_settings(
1421.     ROOT_URLCONF='admin_views.urls',
1422.     # Test with the admin's documented list of required context processors.
1423.     TEMPLATES=[{
1424.         'BACKEND': 'django.template.backends.django.DjangoTemplates',
1425.         'APP_DIRS': True,
1426.         'OPTIONS': {
1427.             'context_processors': [
1428.                 'django.contrib.auth.context_processors.auth',
1429.                 'django.contrib.messages.context_processors.messages',
1430.             ],
1431.         },
1432.     }],
1433. )
1434. class AdminViewPermissionsTest(TestCase):
1435.     """Tests for Admin Views Permissions."""
1436. 
1437.     @classmethod
1438.     def setUpTestData(cls):
1439.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
1440.         cls.viewuser = User.objects.create_user(username='viewuser', password='secret', is_staff=True)
1441.         cls.adduser = User.objects.create_user(username='adduser', password='secret', is_staff=True)
1442.         cls.changeuser = User.objects.create_user(username='changeuser', password='secret', is_staff=True)
1443.         cls.deleteuser = User.objects.create_user(username='deleteuser', password='secret', is_staff=True)
1444.         cls.joepublicuser = User.objects.create_user(username='joepublic', password='secret')
1445.         cls.nostaffuser = User.objects.create_user(username='nostaff', password='secret')
1446.         cls.s1 = Section.objects.create(name='Test section')
1447.         cls.a1 = Article.objects.create(
1448.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1,
1449.             another_section=cls.s1,
1450.         )
1451.         cls.a2 = Article.objects.create(
1452.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
1453.         )
1454.         cls.a3 = Article.objects.create(
1455.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
1456.         )
1457.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
1458. 
1459.         # Setup permissions, for our users who can add, change, and delete.
1460.         opts = Article._meta
1461. 
1462.         # User who can view Articles
1463.         cls.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('view', opts)))
1464.         # User who can add Articles
1465.         cls.adduser.user_permissions.add(get_perm(Article, get_permission_codename('add', opts)))
1466.         # User who can change Articles
1467.         cls.changeuser.user_permissions.add(get_perm(Article, get_permission_codename('change', opts)))
1468.         cls.nostaffuser.user_permissions.add(get_perm(Article, get_permission_codename('change', opts)))
1469. 
1470.         # User who can delete Articles
1471.         cls.deleteuser.user_permissions.add(get_perm(Article, get_permission_codename('delete', opts)))
1472.         cls.deleteuser.user_permissions.add(get_perm(Section, get_permission_codename('delete', Section._meta)))
1473. 
1474.         # login POST dicts
1475.         cls.index_url = reverse('admin:index')
1476.         cls.super_login = {
1477.             REDIRECT_FIELD_NAME: cls.index_url,
1478.             'username': 'super',
1479.             'password': 'secret',
1480.         }
1481.         cls.super_email_login = {
1482.             REDIRECT_FIELD_NAME: cls.index_url,
1483.             'username': 'super@example.com',
1484.             'password': 'secret',
1485.         }
1486.         cls.super_email_bad_login = {
1487.             REDIRECT_FIELD_NAME: cls.index_url,
1488.             'username': 'super@example.com',
1489.             'password': 'notsecret',
1490.         }
1491.         cls.adduser_login = {
1492.             REDIRECT_FIELD_NAME: cls.index_url,
1493.             'username': 'adduser',
1494.             'password': 'secret',
1495.         }
1496.         cls.changeuser_login = {
1497.             REDIRECT_FIELD_NAME: cls.index_url,
1498.             'username': 'changeuser',
1499.             'password': 'secret',
1500.         }
1501.         cls.deleteuser_login = {
1502.             REDIRECT_FIELD_NAME: cls.index_url,
1503.             'username': 'deleteuser',
1504.             'password': 'secret',
1505.         }
1506.         cls.nostaff_login = {
1507.             REDIRECT_FIELD_NAME: reverse('has_permission_admin:index'),
1508.             'username': 'nostaff',
1509.             'password': 'secret',
1510.         }
1511.         cls.joepublic_login = {
1512.             REDIRECT_FIELD_NAME: cls.index_url,
1513.             'username': 'joepublic',
1514.             'password': 'secret',
1515.         }
1516.         cls.viewuser_login = {
1517.             REDIRECT_FIELD_NAME: cls.index_url,
1518.             'username': 'viewuser',
1519.             'password': 'secret',
1520.         }
1521.         cls.no_username_login = {
1522.             REDIRECT_FIELD_NAME: cls.index_url,
1523.             'password': 'secret',
1524.         }
1525. 
1526.     def test_login(self):
1527.         """
1528.         Make sure only staff members can log in.
1529. 
1530.         Successful posts to the login page will redirect to the original url.
1531.         Unsuccessful attempts will continue to render the login page with
1532.         a 200 status code.
1533.         """
1534.         login_url = '%s?next=%s' % (reverse('admin:login'), reverse('admin:index'))
1535.         # Super User
1536.         response = self.client.get(self.index_url)
1537.         self.assertRedirects(response, login_url)
1538.         login = self.client.post(login_url, self.super_login)
1539.         self.assertRedirects(login, self.index_url)
1540.         self.assertFalse(login.context)
1541.         self.client.get(reverse('admin:logout'))
1542. 
1543.         # Test if user enters email address
1544.         response = self.client.get(self.index_url)
1545.         self.assertEqual(response.status_code, 302)
1546.         login = self.client.post(login_url, self.super_email_login)
1547.         self.assertContains(login, ERROR_MESSAGE)
1548.         # only correct passwords get a username hint
1549.         login = self.client.post(login_url, self.super_email_bad_login)
1550.         self.assertContains(login, ERROR_MESSAGE)
1551.         new_user = User(username='jondoe', password='secret', email='super@example.com')
1552.         new_user.save()
1553.         # check to ensure if there are multiple email addresses a user doesn't get a 500
1554.         login = self.client.post(login_url, self.super_email_login)
1555.         self.assertContains(login, ERROR_MESSAGE)
1556. 
1557.         # View User
1558.         response = self.client.get(self.index_url)
1559.         self.assertEqual(response.status_code, 302)
1560.         login = self.client.post(login_url, self.viewuser_login)
1561.         self.assertRedirects(login, self.index_url)
1562.         self.assertFalse(login.context)
1563.         self.client.get(reverse('admin:logout'))
1564. 
1565.         # Add User
1566.         response = self.client.get(self.index_url)
1567.         self.assertEqual(response.status_code, 302)
1568.         login = self.client.post(login_url, self.adduser_login)
1569.         self.assertRedirects(login, self.index_url)
1570.         self.assertFalse(login.context)
1571.         self.client.get(reverse('admin:logout'))
1572. 
1573.         # Change User
1574.         response = self.client.get(self.index_url)
1575.         self.assertEqual(response.status_code, 302)
1576.         login = self.client.post(login_url, self.changeuser_login)
1577.         self.assertRedirects(login, self.index_url)
1578.         self.assertFalse(login.context)
1579.         self.client.get(reverse('admin:logout'))
1580. 
1581.         # Delete User
1582.         response = self.client.get(self.index_url)
1583.         self.assertEqual(response.status_code, 302)
1584.         login = self.client.post(login_url, self.deleteuser_login)
1585.         self.assertRedirects(login, self.index_url)
1586.         self.assertFalse(login.context)
1587.         self.client.get(reverse('admin:logout'))
1588. 
1589.         # Regular User should not be able to login.
1590.         response = self.client.get(self.index_url)
1591.         self.assertEqual(response.status_code, 302)
1592.         login = self.client.post(login_url, self.joepublic_login)
1593.         self.assertEqual(login.status_code, 200)
1594.         self.assertContains(login, ERROR_MESSAGE)
1595. 
1596.         # Requests without username should not return 500 errors.
1597.         response = self.client.get(self.index_url)
1598.         self.assertEqual(response.status_code, 302)
1599.         login = self.client.post(login_url, self.no_username_login)
1600.         self.assertEqual(login.status_code, 200)
1601.         self.assertFormError(login, 'form', 'username', ['This field is required.'])
1602. 
1603.     def test_login_redirect_for_direct_get(self):
1604.         """
1605.         Login redirect should be to the admin index page when going directly to
1606.         /admin/login/.
1607.         """
1608.         response = self.client.get(reverse('admin:login'))
1609.         self.assertEqual(response.status_code, 200)
1610.         self.assertEqual(response.context[REDIRECT_FIELD_NAME], reverse('admin:index'))
1611. 
1612.     def test_login_has_permission(self):
1613.         # Regular User should not be able to login.
1614.         response = self.client.get(reverse('has_permission_admin:index'))
1615.         self.assertEqual(response.status_code, 302)
1616.         login = self.client.post(reverse('has_permission_admin:login'), self.joepublic_login)
1617.         self.assertEqual(login.status_code, 200)
1618.         self.assertContains(login, 'permission denied')
1619. 
1620.         # User with permissions should be able to login.
1621.         response = self.client.get(reverse('has_permission_admin:index'))
1622.         self.assertEqual(response.status_code, 302)
1623.         login = self.client.post(reverse('has_permission_admin:login'), self.nostaff_login)
1624.         self.assertRedirects(login, reverse('has_permission_admin:index'))
1625.         self.assertFalse(login.context)
1626.         self.client.get(reverse('has_permission_admin:logout'))
1627. 
1628.         # Staff should be able to login.
1629.         response = self.client.get(reverse('has_permission_admin:index'))
1630.         self.assertEqual(response.status_code, 302)
1631.         login = self.client.post(reverse('has_permission_admin:login'), {
1632.             REDIRECT_FIELD_NAME: reverse('has_permission_admin:index'),
1633.             'username': 'deleteuser',
1634.             'password': 'secret',
1635.         })
1636.         self.assertRedirects(login, reverse('has_permission_admin:index'))
1637.         self.assertFalse(login.context)
1638.         self.client.get(reverse('has_permission_admin:logout'))
1639. 
1640.     def test_login_successfully_redirects_to_original_URL(self):
1641.         response = self.client.get(self.index_url)
1642.         self.assertEqual(response.status_code, 302)
1643.         query_string = 'the-answer=42'
1644.         redirect_url = '%s?%s' % (self.index_url, query_string)
1645.         new_next = {REDIRECT_FIELD_NAME: redirect_url}
1646.         post_data = self.super_login.copy()
1647.         post_data.pop(REDIRECT_FIELD_NAME)
1648.         login = self.client.post(
1649.             '%s?%s' % (reverse('admin:login'), urlencode(new_next)),
1650.             post_data)
1651.         self.assertRedirects(login, redirect_url)
1652. 
1653.     def test_double_login_is_not_allowed(self):
1654.         """Regression test for #19327"""
1655.         login_url = '%s?next=%s' % (reverse('admin:login'), reverse('admin:index'))
1656. 
1657.         response = self.client.get(self.index_url)
1658.         self.assertEqual(response.status_code, 302)
1659. 
1660.         # Establish a valid admin session
1661.         login = self.client.post(login_url, self.super_login)
1662.         self.assertRedirects(login, self.index_url)
1663.         self.assertFalse(login.context)
1664. 
1665.         # Logging in with non-admin user fails
1666.         login = self.client.post(login_url, self.joepublic_login)
1667.         self.assertEqual(login.status_code, 200)
1668.         self.assertContains(login, ERROR_MESSAGE)
1669. 
1670.         # Establish a valid admin session
1671.         login = self.client.post(login_url, self.super_login)
1672.         self.assertRedirects(login, self.index_url)
1673.         self.assertFalse(login.context)
1674. 
1675.         # Logging in with admin user while already logged in
1676.         login = self.client.post(login_url, self.super_login)
1677.         self.assertRedirects(login, self.index_url)
1678.         self.assertFalse(login.context)
1679.         self.client.get(reverse('admin:logout'))
1680. 
1681.     def test_login_page_notice_for_non_staff_users(self):
1682.         """
1683.         A logged-in non-staff user trying to access the admin index should be
1684.         presented with the login page and a hint indicating that the current
1685.         user doesn't have access to it.
1686.         """
1687.         hint_template = 'You are authenticated as {}'
1688. 
1689.         # Anonymous user should not be shown the hint
1690.         response = self.client.get(self.index_url, follow=True)
1691.         self.assertContains(response, 'login-form')
1692.         self.assertNotContains(response, hint_template.format(''), status_code=200)
1693. 
1694.         # Non-staff user should be shown the hint
1695.         self.client.force_login(self.nostaffuser)
1696.         response = self.client.get(self.index_url, follow=True)
1697.         self.assertContains(response, 'login-form')
1698.         self.assertContains(response, hint_template.format(self.nostaffuser.username), status_code=200)
1699. 
1700.     def test_add_view(self):
1701.         """Test add view restricts access and actually adds items."""
1702.         add_dict = {
1703.             'title': 'Døm ikke',
1704.             'content': '<p>great article</p>',
1705.             'date_0': '2008-03-18', 'date_1': '10:54:39',
1706.             'section': self.s1.pk,
1707.         }
1708.         # Change User should not have access to add articles
1709.         self.client.force_login(self.changeuser)
1710.         # make sure the view removes test cookie
1711.         self.assertIs(self.client.session.test_cookie_worked(), False)
1712.         response = self.client.get(reverse('admin:admin_views_article_add'))
1713.         self.assertEqual(response.status_code, 403)
1714.         # Try POST just to make sure
1715.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1716.         self.assertEqual(post.status_code, 403)
1717.         self.assertEqual(Article.objects.count(), 3)
1718.         self.client.get(reverse('admin:logout'))
1719. 
1720.         # View User should not have access to add articles
1721.         self.client.force_login(self.viewuser)
1722.         response = self.client.get(reverse('admin:admin_views_article_add'))
1723.         self.assertEqual(response.status_code, 403)
1724.         # Try POST just to make sure
1725.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1726.         self.assertEqual(post.status_code, 403)
1727.         self.assertEqual(Article.objects.count(), 3)
1728.         # Now give the user permission to add but not change.
1729.         self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('add', Article._meta)))
1730.         response = self.client.get(reverse('admin:admin_views_article_add'))
1731.         self.assertContains(response, '<input type="submit" value="Save and view" name="_continue">')
1732.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict, follow=False)
1733.         self.assertEqual(post.status_code, 302)
1734.         self.assertEqual(Article.objects.count(), 4)
1735.         article = Article.objects.latest('pk')
1736.         response = self.client.get(reverse('admin:admin_views_article_change', args=(article.pk,)))
1737.         self.assertContains(response, '<li class="success">The article “Døm ikke” was added successfully.</li>')
1738.         article.delete()
1739.         self.client.get(reverse('admin:logout'))
1740. 
1741.         # Add user may login and POST to add view, then redirect to admin root
1742.         self.client.force_login(self.adduser)
1743.         addpage = self.client.get(reverse('admin:admin_views_article_add'))
1744.         change_list_link = '&rsaquo; <a href="%s">Articles</a>' % reverse('admin:admin_views_article_changelist')
1745.         self.assertNotContains(
1746.             addpage, change_list_link,
1747.             msg_prefix='User restricted to add permission is given link to change list view in breadcrumbs.'
1748.         )
1749.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1750.         self.assertRedirects(post, self.index_url)
1751.         self.assertEqual(Article.objects.count(), 4)
1752.         self.assertEqual(len(mail.outbox), 2)
1753.         self.assertEqual(mail.outbox[0].subject, 'Greetings from a created object')
1754.         self.client.get(reverse('admin:logout'))
1755. 
1756.         # The addition was logged correctly
1757.         addition_log = LogEntry.objects.all()[0]
1758.         new_article = Article.objects.last()
1759.         article_ct = ContentType.objects.get_for_model(Article)
1760.         self.assertEqual(addition_log.user_id, self.adduser.pk)
1761.         self.assertEqual(addition_log.content_type_id, article_ct.pk)
1762.         self.assertEqual(addition_log.object_id, str(new_article.pk))
1763.         self.assertEqual(addition_log.object_repr, "Døm ikke")
1764.         self.assertEqual(addition_log.action_flag, ADDITION)
1765.         self.assertEqual(addition_log.get_change_message(), "Added.")
1766. 
1767.         # Super can add too, but is redirected to the change list view
1768.         self.client.force_login(self.superuser)
1769.         addpage = self.client.get(reverse('admin:admin_views_article_add'))
1770.         self.assertContains(
1771.             addpage, change_list_link,
1772.             msg_prefix='Unrestricted user is not given link to change list view in breadcrumbs.'
1773.         )
1774.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1775.         self.assertRedirects(post, reverse('admin:admin_views_article_changelist'))
1776.         self.assertEqual(Article.objects.count(), 5)
1777.         self.client.get(reverse('admin:logout'))
1778. 
1779.         # 8509 - if a normal user is already logged in, it is possible
1780.         # to change user into the superuser without error
1781.         self.client.force_login(self.joepublicuser)
1782.         # Check and make sure that if user expires, data still persists
1783.         self.client.force_login(self.superuser)
1784.         # make sure the view removes test cookie
1785.         self.assertIs(self.client.session.test_cookie_worked(), False)
1786. 
1787.     @mock.patch('django.contrib.admin.options.InlineModelAdmin.has_change_permission')
1788.     def test_add_view_with_view_only_inlines(self, has_change_permission):
1789.         """User with add permission to a section but view-only for inlines."""
1790.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('add', Section._meta)))
1791.         self.client.force_login(self.viewuser)
1792.         # Valid POST creates a new section.
1793.         data = {
1794.             'name': 'New obj',
1795.             'article_set-TOTAL_FORMS': 0,
1796.             'article_set-INITIAL_FORMS': 0,
1797.         }
1798.         response = self.client.post(reverse('admin:admin_views_section_add'), data)
1799.         self.assertRedirects(response, reverse('admin:index'))
1800.         self.assertEqual(Section.objects.latest('id').name, data['name'])
1801.         # InlineModelAdmin.has_change_permission()'s obj argument is always
1802.         # None during object add.
1803.         self.assertEqual([obj for (request, obj), _ in has_change_permission.call_args_list], [None, None])
1804. 
1805.     def test_change_view(self):
1806.         """Change view should restrict access and allow users to edit items."""
1807.         change_dict = {
1808.             'title': 'Ikke fordømt',
1809.             'content': '<p>edited article</p>',
1810.             'date_0': '2008-03-18', 'date_1': '10:54:39',
1811.             'section': self.s1.pk,
1812.         }
1813.         article_change_url = reverse('admin:admin_views_article_change', args=(self.a1.pk,))
1814.         article_changelist_url = reverse('admin:admin_views_article_changelist')
1815. 
1816.         # add user should not be able to view the list of article or change any of them
1817.         self.client.force_login(self.adduser)
1818.         response = self.client.get(article_changelist_url)
1819.         self.assertEqual(response.status_code, 403)
1820.         response = self.client.get(article_change_url)
1821.         self.assertEqual(response.status_code, 403)
1822.         post = self.client.post(article_change_url, change_dict)
1823.         self.assertEqual(post.status_code, 403)
1824.         self.client.get(reverse('admin:logout'))
1825. 
1826.         # view user can view articles but not make changes.
1827.         self.client.force_login(self.viewuser)
1828.         response = self.client.get(article_changelist_url)
1829.         self.assertEqual(response.status_code, 200)
1830.         self.assertEqual(response.context['title'], 'Select article to view')
1831.         response = self.client.get(article_change_url)
1832.         self.assertEqual(response.status_code, 200)
1833.         self.assertEqual(response.context['title'], 'View article')
1834.         self.assertContains(response, '<label>Extra form field:</label>')
1835.         self.assertContains(response, '<a href="/test_admin/admin/admin_views/article/" class="closelink">Close</a>')
1836.         post = self.client.post(article_change_url, change_dict)
1837.         self.assertEqual(post.status_code, 403)
1838.         self.assertEqual(Article.objects.get(pk=self.a1.pk).content, '<p>Middle content</p>')
1839.         self.client.get(reverse('admin:logout'))
1840. 
1841.         # change user can view all items and edit them
1842.         self.client.force_login(self.changeuser)
1843.         response = self.client.get(article_changelist_url)
1844.         self.assertEqual(response.status_code, 200)
1845.         self.assertEqual(response.context['title'], 'Select article to change')
1846.         response = self.client.get(article_change_url)
1847.         self.assertEqual(response.status_code, 200)
1848.         self.assertEqual(response.context['title'], 'Change article')
1849.         post = self.client.post(article_change_url, change_dict)
1850.         self.assertRedirects(post, article_changelist_url)
1851.         self.assertEqual(Article.objects.get(pk=self.a1.pk).content, '<p>edited article</p>')
1852. 
1853.         # one error in form should produce singular error message, multiple errors plural
1854.         change_dict['title'] = ''
1855.         post = self.client.post(article_change_url, change_dict)
1856.         self.assertContains(
1857.             post, 'Please correct the error below.',
1858.             msg_prefix='Singular error message not found in response to post with one error'
1859.         )
1860. 
1861.         change_dict['content'] = ''
1862.         post = self.client.post(article_change_url, change_dict)
1863.         self.assertContains(
1864.             post, 'Please correct the errors below.',
1865.             msg_prefix='Plural error message not found in response to post with multiple errors'
1866.         )
1867.         self.client.get(reverse('admin:logout'))
1868. 
1869.         # Test redirection when using row-level change permissions. Refs #11513.
1870.         r1 = RowLevelChangePermissionModel.objects.create(id=1, name="odd id")
1871.         r2 = RowLevelChangePermissionModel.objects.create(id=2, name="even id")
1872.         r3 = RowLevelChangePermissionModel.objects.create(id=3, name='odd id mult 3')
1873.         r6 = RowLevelChangePermissionModel.objects.create(id=6, name='even id mult 3')
1874.         change_url_1 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r1.pk,))
1875.         change_url_2 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r2.pk,))
1876.         change_url_3 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r3.pk,))
1877.         change_url_6 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r6.pk,))
1878.         logins = [self.superuser, self.viewuser, self.adduser, self.changeuser, self.deleteuser]
1879.         for login_user in logins:
1880.             with self.subTest(login_user.username):
1881.                 self.client.force_login(login_user)
1882.                 response = self.client.get(change_url_1)
1883.                 self.assertEqual(response.status_code, 403)
1884.                 response = self.client.post(change_url_1, {'name': 'changed'})
1885.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=1).name, 'odd id')
1886.                 self.assertEqual(response.status_code, 403)
1887.                 response = self.client.get(change_url_2)
1888.                 self.assertEqual(response.status_code, 200)
1889.                 response = self.client.post(change_url_2, {'name': 'changed'})
1890.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=2).name, 'changed')
1891.                 self.assertRedirects(response, self.index_url)
1892.                 response = self.client.get(change_url_3)
1893.                 self.assertEqual(response.status_code, 200)
1894.                 response = self.client.post(change_url_3, {'name': 'changed'})
1895.                 self.assertEqual(response.status_code, 403)
1896.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=3).name, 'odd id mult 3')
1897.                 response = self.client.get(change_url_6)
1898.                 self.assertEqual(response.status_code, 200)
1899.                 response = self.client.post(change_url_6, {'name': 'changed'})
1900.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=6).name, 'changed')
1901.                 self.assertRedirects(response, self.index_url)
1902. 
1903.                 self.client.get(reverse('admin:logout'))
1904. 
1905.         for login_user in [self.joepublicuser, self.nostaffuser]:
1906.             with self.subTest(login_user.username):
1907.                 self.client.force_login(login_user)
1908.                 response = self.client.get(change_url_1, follow=True)
1909.                 self.assertContains(response, 'login-form')
1910.                 response = self.client.post(change_url_1, {'name': 'changed'}, follow=True)
1911.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=1).name, 'odd id')
1912.                 self.assertContains(response, 'login-form')
1913.                 response = self.client.get(change_url_2, follow=True)
1914.                 self.assertContains(response, 'login-form')
1915.                 response = self.client.post(change_url_2, {'name': 'changed again'}, follow=True)
1916.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=2).name, 'changed')
1917.                 self.assertContains(response, 'login-form')
1918.                 self.client.get(reverse('admin:logout'))
1919. 
1920.     def test_change_view_without_object_change_permission(self):
1921.         """
1922.         The object should be read-only if the user has permission to view it
1923.         and change objects of that type but not to change the current object.
1924.         """
1925.         change_url = reverse('admin9:admin_views_article_change', args=(self.a1.pk,))
1926.         self.client.force_login(self.viewuser)
1927.         response = self.client.get(change_url)
1928.         self.assertEqual(response.status_code, 200)
1929.         self.assertEqual(response.context['title'], 'View article')
1930.         self.assertContains(response, '<a href="/test_admin/admin9/admin_views/article/" class="closelink">Close</a>')
1931. 
1932.     def test_change_view_save_as_new(self):
1933.         """
1934.         'Save as new' should raise PermissionDenied for users without the 'add'
1935.         permission.
1936.         """
1937.         change_dict_save_as_new = {
1938.             '_saveasnew': 'Save as new',
1939.             'title': 'Ikke fordømt',
1940.             'content': '<p>edited article</p>',
1941.             'date_0': '2008-03-18', 'date_1': '10:54:39',
1942.             'section': self.s1.pk,
1943.         }
1944.         article_change_url = reverse('admin:admin_views_article_change', args=(self.a1.pk,))
1945. 
1946.         # Add user can perform "Save as new".
1947.         article_count = Article.objects.count()
1948.         self.client.force_login(self.adduser)
1949.         post = self.client.post(article_change_url, change_dict_save_as_new)
1950.         self.assertRedirects(post, self.index_url)
1951.         self.assertEqual(Article.objects.count(), article_count + 1)
1952.         self.client.logout()
1953. 
1954.         # Change user cannot perform "Save as new" (no 'add' permission).
1955.         article_count = Article.objects.count()
1956.         self.client.force_login(self.changeuser)
1957.         post = self.client.post(article_change_url, change_dict_save_as_new)
1958.         self.assertEqual(post.status_code, 403)
1959.         self.assertEqual(Article.objects.count(), article_count)
1960. 
1961.         # User with both add and change permissions should be redirected to the
1962.         # change page for the newly created object.
1963.         article_count = Article.objects.count()
1964.         self.client.force_login(self.superuser)
1965.         post = self.client.post(article_change_url, change_dict_save_as_new)
1966.         self.assertEqual(Article.objects.count(), article_count + 1)
1967.         new_article = Article.objects.latest('id')
1968.         self.assertRedirects(post, reverse('admin:admin_views_article_change', args=(new_article.pk,)))
1969. 
1970.     def test_change_view_with_view_only_inlines(self):
1971.         """
1972.         User with change permission to a section but view-only for inlines.
1973.         """
1974.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
1975.         self.client.force_login(self.viewuser)
1976.         # GET shows inlines.
1977.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
1978.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
1979.         formset = response.context['inline_admin_formsets'][0]
1980.         self.assertEqual(len(formset.forms), 3)
1981.         # Valid POST changes the name.
1982.         data = {
1983.             'name': 'Can edit name with view-only inlines',
1984.             'article_set-TOTAL_FORMS': 3,
1985.             'article_set-INITIAL_FORMS': 3
1986.         }
1987.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
1988.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
1989.         self.assertEqual(Section.objects.get(pk=self.s1.pk).name, data['name'])
1990.         # Invalid POST reshows inlines.
1991.         del data['name']
1992.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
1993.         self.assertEqual(response.status_code, 200)
1994.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
1995.         formset = response.context['inline_admin_formsets'][0]
1996.         self.assertEqual(len(formset.forms), 3)
1997. 
1998.     def test_change_view_with_view_and_add_inlines(self):
1999.         """User has view and add permissions on the inline model."""
2000.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
2001.         self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('add', Article._meta)))
2002.         self.client.force_login(self.viewuser)
2003.         # GET shows inlines.
2004.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
2005.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
2006.         formset = response.context['inline_admin_formsets'][0]
2007.         self.assertEqual(len(formset.forms), 6)
2008.         # Valid POST creates a new article.
2009.         data = {
2010.             'name': 'Can edit name with view-only inlines',
2011.             'article_set-TOTAL_FORMS': 6,
2012.             'article_set-INITIAL_FORMS': 3,
2013.             'article_set-3-id': [''],
2014.             'article_set-3-title': ['A title'],
2015.             'article_set-3-content': ['Added content'],
2016.             'article_set-3-date_0': ['2008-3-18'],
2017.             'article_set-3-date_1': ['11:54:58'],
2018.             'article_set-3-section': [str(self.s1.pk)],
2019.         }
2020.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2021.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
2022.         self.assertEqual(Section.objects.get(pk=self.s1.pk).name, data['name'])
2023.         self.assertEqual(Article.objects.count(), 4)
2024.         # Invalid POST reshows inlines.
2025.         del data['name']
2026.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2027.         self.assertEqual(response.status_code, 200)
2028.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
2029.         formset = response.context['inline_admin_formsets'][0]
2030.         self.assertEqual(len(formset.forms), 6)
2031. 
2032.     def test_change_view_with_view_and_delete_inlines(self):
2033.         """User has view and delete permissions on the inline model."""
2034.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
2035.         self.client.force_login(self.viewuser)
2036.         data = {
2037.             'name': 'Name is required.',
2038.             'article_set-TOTAL_FORMS': 6,
2039.             'article_set-INITIAL_FORMS': 3,
2040.             'article_set-0-id': [str(self.a1.pk)],
2041.             'article_set-0-DELETE': ['on'],
2042.         }
2043.         # Inline POST details are ignored without delete permission.
2044.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2045.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
2046.         self.assertEqual(Article.objects.count(), 3)
2047.         # Deletion successful when delete permission is added.
2048.         self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('delete', Article._meta)))
2049.         data = {
2050.             'name': 'Name is required.',
2051.             'article_set-TOTAL_FORMS': 6,
2052.             'article_set-INITIAL_FORMS': 3,
2053.             'article_set-0-id': [str(self.a1.pk)],
2054.             'article_set-0-DELETE': ['on'],
2055.         }
2056.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2057.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
2058.         self.assertEqual(Article.objects.count(), 2)
2059. 
2060.     def test_delete_view(self):
2061.         """Delete view should restrict access and actually delete items."""
2062.         delete_dict = {'post': 'yes'}
2063.         delete_url = reverse('admin:admin_views_article_delete', args=(self.a1.pk,))
2064. 
2065.         # add user should not be able to delete articles
2066.         self.client.force_login(self.adduser)
2067.         response = self.client.get(delete_url)
2068.         self.assertEqual(response.status_code, 403)
2069.         post = self.client.post(delete_url, delete_dict)
2070.         self.assertEqual(post.status_code, 403)
2071.         self.assertEqual(Article.objects.count(), 3)
2072.         self.client.logout()
2073. 
2074.         # view user should not be able to delete articles
2075.         self.client.force_login(self.viewuser)
2076.         response = self.client.get(delete_url)
2077.         self.assertEqual(response.status_code, 403)
2078.         post = self.client.post(delete_url, delete_dict)
2079.         self.assertEqual(post.status_code, 403)
2080.         self.assertEqual(Article.objects.count(), 3)
2081.         self.client.logout()
2082. 
2083.         # Delete user can delete
2084.         self.client.force_login(self.deleteuser)
2085.         response = self.client.get(reverse('admin:admin_views_section_delete', args=(self.s1.pk,)))
2086.         self.assertContains(response, "<h2>Summary</h2>")
2087.         self.assertContains(response, "<li>Articles: 3</li>")
2088.         # test response contains link to related Article
2089.         self.assertContains(response, "admin_views/article/%s/" % self.a1.pk)
2090. 
2091.         response = self.client.get(delete_url)
2092.         self.assertContains(response, "admin_views/article/%s/" % self.a1.pk)
2093.         self.assertContains(response, "<h2>Summary</h2>")
2094.         self.assertContains(response, "<li>Articles: 1</li>")
2095.         self.assertEqual(response.status_code, 200)
2096.         post = self.client.post(delete_url, delete_dict)
2097.         self.assertRedirects(post, self.index_url)
2098.         self.assertEqual(Article.objects.count(), 2)
2099.         self.assertEqual(len(mail.outbox), 1)
2100.         self.assertEqual(mail.outbox[0].subject, 'Greetings from a deleted object')
2101.         article_ct = ContentType.objects.get_for_model(Article)
2102.         logged = LogEntry.objects.get(content_type=article_ct, action_flag=DELETION)
2103.         self.assertEqual(logged.object_id, str(self.a1.pk))
2104. 
2105.     def test_delete_view_with_no_default_permissions(self):
2106.         """
2107.         The delete view allows users to delete collected objects without a
2108.         'delete' permission (ReadOnlyPizza.Meta.default_permissions is empty).
2109.         """
2110.         pizza = ReadOnlyPizza.objects.create(name='Double Cheese')
2111.         delete_url = reverse('admin:admin_views_readonlypizza_delete', args=(pizza.pk,))
2112.         self.client.force_login(self.adduser)
2113.         response = self.client.get(delete_url)
2114.         self.assertContains(response, 'admin_views/readonlypizza/%s/' % pizza.pk)
2115.         self.assertContains(response, '<h2>Summary</h2>')
2116.         self.assertContains(response, '<li>Read only pizzas: 1</li>')
2117.         self.assertEqual(response.status_code, 200)
2118.         post = self.client.post(delete_url, {'post': 'yes'})
2119.         self.assertRedirects(post, reverse('admin:admin_views_readonlypizza_changelist'))
2120.         self.assertEqual(ReadOnlyPizza.objects.count(), 0)
2121. 
2122.     def test_delete_view_nonexistent_obj(self):
2123.         self.client.force_login(self.deleteuser)
2124.         url = reverse('admin:admin_views_article_delete', args=('nonexistent',))
2125.         response = self.client.get(url, follow=True)
2126.         self.assertRedirects(response, reverse('admin:index'))
2127.         self.assertEqual(
2128.             [m.message for m in response.context['messages']],
2129.             ['article with ID “nonexistent” doesn’t exist. Perhaps it was deleted?']
2130.         )
2131. 
2132.     def test_history_view(self):
2133.         """History view should restrict access."""
2134.         # add user should not be able to view the list of article or change any of them
2135.         self.client.force_login(self.adduser)
2136.         response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
2137.         self.assertEqual(response.status_code, 403)
2138.         self.client.get(reverse('admin:logout'))
2139. 
2140.         # view user can view all items
2141.         self.client.force_login(self.viewuser)
2142.         response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
2143.         self.assertEqual(response.status_code, 200)
2144.         self.client.get(reverse('admin:logout'))
2145. 
2146.         # change user can view all items and edit them
2147.         self.client.force_login(self.changeuser)
2148.         response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
2149.         self.assertEqual(response.status_code, 200)
2150. 
2151.         # Test redirection when using row-level change permissions. Refs #11513.
2152.         rl1 = RowLevelChangePermissionModel.objects.create(name="odd id")
2153.         rl2 = RowLevelChangePermissionModel.objects.create(name="even id")
2154.         logins = [self.superuser, self.viewuser, self.adduser, self.changeuser, self.deleteuser]
2155.         for login_user in logins:
2156.             with self.subTest(login_user.username):
2157.                 self.client.force_login(login_user)
2158.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl1.pk,))
2159.                 response = self.client.get(url)
2160.                 self.assertEqual(response.status_code, 403)
2161. 
2162.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl2.pk,))
2163.                 response = self.client.get(url)
2164.                 self.assertEqual(response.status_code, 200)
2165. 
2166.                 self.client.get(reverse('admin:logout'))
2167. 
2168.         for login_user in [self.joepublicuser, self.nostaffuser]:
2169.             with self.subTest(login_user.username):
2170.                 self.client.force_login(login_user)
2171.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl1.pk,))
2172.                 response = self.client.get(url, follow=True)
2173.                 self.assertContains(response, 'login-form')
2174.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl2.pk,))
2175.                 response = self.client.get(url, follow=True)
2176.                 self.assertContains(response, 'login-form')
2177. 
2178.                 self.client.get(reverse('admin:logout'))
2179. 
2180.     def test_history_view_bad_url(self):
2181.         self.client.force_login(self.changeuser)
2182.         response = self.client.get(reverse('admin:admin_views_article_history', args=('foo',)), follow=True)
2183.         self.assertRedirects(response, reverse('admin:index'))
2184.         self.assertEqual(
2185.             [m.message for m in response.context['messages']],
2186.             ['article with ID “foo” doesn’t exist. Perhaps it was deleted?']
2187.         )
2188. 
2189.     def test_conditionally_show_add_section_link(self):
2190.         """
2191.         The foreign key widget should only show the "add related" button if the
2192.         user has permission to add that related item.
2193.         """
2194.         self.client.force_login(self.adduser)
2195.         # The user can't add sections yet, so they shouldn't see the "add section" link.
2196.         url = reverse('admin:admin_views_article_add')
2197.         add_link_text = 'add_id_section'
2198.         response = self.client.get(url)
2199.         self.assertNotContains(response, add_link_text)
2200.         # Allow the user to add sections too. Now they can see the "add section" link.
2201.         user = User.objects.get(username='adduser')
2202.         perm = get_perm(Section, get_permission_codename('add', Section._meta))
2203.         user.user_permissions.add(perm)
2204.         response = self.client.get(url)
2205.         self.assertContains(response, add_link_text)
2206. 
2207.     def test_conditionally_show_change_section_link(self):
2208.         """
2209.         The foreign key widget should only show the "change related" button if
2210.         the user has permission to change that related item.
2211.         """
2212.         def get_change_related(response):
2213.             return response.context['adminform'].form.fields['section'].widget.can_change_related
2214. 
2215.         self.client.force_login(self.adduser)
2216.         # The user can't change sections yet, so they shouldn't see the "change section" link.
2217.         url = reverse('admin:admin_views_article_add')
2218.         change_link_text = 'change_id_section'
2219.         response = self.client.get(url)
2220.         self.assertFalse(get_change_related(response))
2221.         self.assertNotContains(response, change_link_text)
2222.         # Allow the user to change sections too. Now they can see the "change section" link.
2223.         user = User.objects.get(username='adduser')
2224.         perm = get_perm(Section, get_permission_codename('change', Section._meta))
2225.         user.user_permissions.add(perm)
2226.         response = self.client.get(url)
2227.         self.assertTrue(get_change_related(response))
2228.         self.assertContains(response, change_link_text)
2229. 
2230.     def test_conditionally_show_delete_section_link(self):
2231.         """
2232.         The foreign key widget should only show the "delete related" button if
2233.         the user has permission to delete that related item.
2234.         """
2235.         def get_delete_related(response):
2236.             return response.context['adminform'].form.fields['sub_section'].widget.can_delete_related
2237. 
2238.         self.client.force_login(self.adduser)
2239.         # The user can't delete sections yet, so they shouldn't see the "delete section" link.
2240.         url = reverse('admin:admin_views_article_add')
2241.         delete_link_text = 'delete_id_sub_section'
2242.         response = self.client.get(url)
2243.         self.assertFalse(get_delete_related(response))
2244.         self.assertNotContains(response, delete_link_text)
2245.         # Allow the user to delete sections too. Now they can see the "delete section" link.
2246.         user = User.objects.get(username='adduser')
2247.         perm = get_perm(Section, get_permission_codename('delete', Section._meta))
2248.         user.user_permissions.add(perm)
2249.         response = self.client.get(url)
2250.         self.assertTrue(get_delete_related(response))
2251.         self.assertContains(response, delete_link_text)
2252. 
2253.     def test_disabled_permissions_when_logged_in(self):
2254.         self.client.force_login(self.superuser)
2255.         superuser = User.objects.get(username='super')
2256.         superuser.is_active = False
2257.         superuser.save()
2258. 
2259.         response = self.client.get(self.index_url, follow=True)
2260.         self.assertContains(response, 'id="login-form"')
2261.         self.assertNotContains(response, 'Log out')
2262. 
2263.         response = self.client.get(reverse('secure_view'), follow=True)
2264.         self.assertContains(response, 'id="login-form"')
2265. 
2266.     def test_disabled_staff_permissions_when_logged_in(self):
2267.         self.client.force_login(self.superuser)
2268.         superuser = User.objects.get(username='super')
2269.         superuser.is_staff = False
2270.         superuser.save()
2271. 
2272.         response = self.client.get(self.index_url, follow=True)
2273.         self.assertContains(response, 'id="login-form"')
2274.         self.assertNotContains(response, 'Log out')
2275. 
2276.         response = self.client.get(reverse('secure_view'), follow=True)
2277.         self.assertContains(response, 'id="login-form"')
2278. 
2279.     def test_app_list_permissions(self):
2280.         """
2281.         If a user has no module perms, the app list returns a 404.
2282.         """
2283.         opts = Article._meta
2284.         change_user = User.objects.get(username='changeuser')
2285.         permission = get_perm(Article, get_permission_codename('change', opts))
2286. 
2287.         self.client.force_login(self.changeuser)
2288. 
2289.         # the user has no module permissions
2290.         change_user.user_permissions.remove(permission)
2291.         response = self.client.get(reverse('admin:app_list', args=('admin_views',)))
2292.         self.assertEqual(response.status_code, 404)
2293. 
2294.         # the user now has module permissions
2295.         change_user.user_permissions.add(permission)
2296.         response = self.client.get(reverse('admin:app_list', args=('admin_views',)))
2297.         self.assertEqual(response.status_code, 200)
2298. 
2299.     def test_shortcut_view_only_available_to_staff(self):
2300.         """
2301.         Only admin users should be able to use the admin shortcut view.
2302.         """
2303.         model_ctype = ContentType.objects.get_for_model(ModelWithStringPrimaryKey)
2304.         obj = ModelWithStringPrimaryKey.objects.create(string_pk='foo')
2305.         shortcut_url = reverse('admin:view_on_site', args=(model_ctype.pk, obj.pk))
2306. 
2307.         # Not logged in: we should see the login page.
2308.         response = self.client.get(shortcut_url, follow=True)
2309.         self.assertTemplateUsed(response, 'admin/login.html')
2310. 
2311.         # Logged in? Redirect.
2312.         self.client.force_login(self.superuser)
2313.         response = self.client.get(shortcut_url, follow=False)
2314.         # Can't use self.assertRedirects() because User.get_absolute_url() is silly.
2315.         self.assertEqual(response.status_code, 302)
2316.         # Domain may depend on contrib.sites tests also run
2317.         self.assertRegex(response.url, 'http://(testserver|example.com)/dummy/foo/')
2318. 
2319.     def test_has_module_permission(self):
2320.         """
2321.         has_module_permission() returns True for all users who
2322.         have any permission for that module (add, change, or delete), so that
2323.         the module is displayed on the admin index page.
2324.         """
2325.         self.client.force_login(self.superuser)
2326.         response = self.client.get(self.index_url)
2327.         self.assertContains(response, 'admin_views')
2328.         self.assertContains(response, 'Articles')
2329.         self.client.logout()
2330. 
2331.         self.client.force_login(self.viewuser)
2332.         response = self.client.get(self.index_url)
2333.         self.assertContains(response, 'admin_views')
2334.         self.assertContains(response, 'Articles')
2335.         self.client.logout()
2336. 
2337.         self.client.force_login(self.adduser)
2338.         response = self.client.get(self.index_url)
2339.         self.assertContains(response, 'admin_views')
2340.         self.assertContains(response, 'Articles')
2341.         self.client.logout()
2342. 
2343.         self.client.force_login(self.changeuser)
2344.         response = self.client.get(self.index_url)
2345.         self.assertContains(response, 'admin_views')
2346.         self.assertContains(response, 'Articles')
2347.         self.client.logout()
2348. 
2349.         self.client.force_login(self.deleteuser)
2350.         response = self.client.get(self.index_url)
2351.         self.assertContains(response, 'admin_views')
2352.         self.assertContains(response, 'Articles')
2353. 
2354.     def test_overriding_has_module_permission(self):
2355.         """
2356.         If has_module_permission() always returns False, the module shouldn't
2357.         be displayed on the admin index page for any users.
2358.         """
2359.         articles = Article._meta.verbose_name_plural.title()
2360.         sections = Section._meta.verbose_name_plural.title()
2361.         index_url = reverse('admin7:index')
2362. 
2363.         self.client.force_login(self.superuser)
2364.         response = self.client.get(index_url)
2365.         self.assertContains(response, sections)
2366.         self.assertNotContains(response, articles)
2367.         self.client.logout()
2368. 
2369.         self.client.force_login(self.viewuser)
2370.         response = self.client.get(index_url)
2371.         self.assertNotContains(response, 'admin_views')
2372.         self.assertNotContains(response, articles)
2373.         self.client.logout()
2374. 
2375.         self.client.force_login(self.adduser)
2376.         response = self.client.get(index_url)
2377.         self.assertNotContains(response, 'admin_views')
2378.         self.assertNotContains(response, articles)
2379.         self.client.logout()
2380. 
2381.         self.client.force_login(self.changeuser)
2382.         response = self.client.get(index_url)
2383.         self.assertNotContains(response, 'admin_views')
2384.         self.assertNotContains(response, articles)
2385.         self.client.logout()
2386. 
2387.         self.client.force_login(self.deleteuser)
2388.         response = self.client.get(index_url)
2389.         self.assertNotContains(response, articles)
2390. 
2391.         # The app list displays Sections but not Articles as the latter has
2392.         # ModelAdmin.has_module_permission() = False.
2393.         self.client.force_login(self.superuser)
2394.         response = self.client.get(reverse('admin7:app_list', args=('admin_views',)))
2395.         self.assertContains(response, sections)
2396.         self.assertNotContains(response, articles)
2397. 
2398.     def test_post_save_message_no_forbidden_links_visible(self):
2399.         """
2400.         Post-save message shouldn't contain a link to the change form if the
2401.         user doesn't have the change permission.
2402.         """
2403.         self.client.force_login(self.adduser)
2404.         # Emulate Article creation for user with add-only permission.
2405.         post_data = {
2406.             "title": "Fun & games",
2407.             "content": "Some content",
2408.             "date_0": "2015-10-31",
2409.             "date_1": "16:35:00",
2410.             "_save": "Save",
2411.         }
2412.         response = self.client.post(reverse('admin:admin_views_article_add'), post_data, follow=True)
2413.         self.assertContains(
2414.             response,
2415.             '<li class="success">The article “Fun &amp; games” was added successfully.</li>',
2416.             html=True
2417.         )


File: tests/admin_views/tests.py
Line number range: 3982 - 4302
Content:
3982. @override_settings(ROOT_URLCONF='admin_views.urls')
3983. class AdminInlineTests(TestCase):
3984. 
3985.     @classmethod
3986.     def setUpTestData(cls):
3987.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3988.         cls.collector = Collector.objects.create(pk=1, name='John Fowles')
3989. 
3990.     def setUp(self):
3991.         self.post_data = {
3992.             "name": "Test Name",
3993. 
3994.             "widget_set-TOTAL_FORMS": "3",
3995.             "widget_set-INITIAL_FORMS": "0",
3996.             "widget_set-MAX_NUM_FORMS": "0",
3997.             "widget_set-0-id": "",
3998.             "widget_set-0-owner": "1",
3999.             "widget_set-0-name": "",
4000.             "widget_set-1-id": "",
4001.             "widget_set-1-owner": "1",
4002.             "widget_set-1-name": "",
4003.             "widget_set-2-id": "",
4004.             "widget_set-2-owner": "1",
4005.             "widget_set-2-name": "",
4006. 
4007.             "doohickey_set-TOTAL_FORMS": "3",
4008.             "doohickey_set-INITIAL_FORMS": "0",
4009.             "doohickey_set-MAX_NUM_FORMS": "0",
4010.             "doohickey_set-0-owner": "1",
4011.             "doohickey_set-0-code": "",
4012.             "doohickey_set-0-name": "",
4013.             "doohickey_set-1-owner": "1",
4014.             "doohickey_set-1-code": "",
4015.             "doohickey_set-1-name": "",
4016.             "doohickey_set-2-owner": "1",
4017.             "doohickey_set-2-code": "",
4018.             "doohickey_set-2-name": "",
4019. 
4020.             "grommet_set-TOTAL_FORMS": "3",
4021.             "grommet_set-INITIAL_FORMS": "0",
4022.             "grommet_set-MAX_NUM_FORMS": "0",
4023.             "grommet_set-0-code": "",
4024.             "grommet_set-0-owner": "1",
4025.             "grommet_set-0-name": "",
4026.             "grommet_set-1-code": "",
4027.             "grommet_set-1-owner": "1",
4028.             "grommet_set-1-name": "",
4029.             "grommet_set-2-code": "",
4030.             "grommet_set-2-owner": "1",
4031.             "grommet_set-2-name": "",
4032. 
4033.             "whatsit_set-TOTAL_FORMS": "3",
4034.             "whatsit_set-INITIAL_FORMS": "0",
4035.             "whatsit_set-MAX_NUM_FORMS": "0",
4036.             "whatsit_set-0-owner": "1",
4037.             "whatsit_set-0-index": "",
4038.             "whatsit_set-0-name": "",
4039.             "whatsit_set-1-owner": "1",
4040.             "whatsit_set-1-index": "",
4041.             "whatsit_set-1-name": "",
4042.             "whatsit_set-2-owner": "1",
4043.             "whatsit_set-2-index": "",
4044.             "whatsit_set-2-name": "",
4045. 
4046.             "fancydoodad_set-TOTAL_FORMS": "3",
4047.             "fancydoodad_set-INITIAL_FORMS": "0",
4048.             "fancydoodad_set-MAX_NUM_FORMS": "0",
4049.             "fancydoodad_set-0-doodad_ptr": "",
4050.             "fancydoodad_set-0-owner": "1",
4051.             "fancydoodad_set-0-name": "",
4052.             "fancydoodad_set-0-expensive": "on",
4053.             "fancydoodad_set-1-doodad_ptr": "",
4054.             "fancydoodad_set-1-owner": "1",
4055.             "fancydoodad_set-1-name": "",
4056.             "fancydoodad_set-1-expensive": "on",
4057.             "fancydoodad_set-2-doodad_ptr": "",
4058.             "fancydoodad_set-2-owner": "1",
4059.             "fancydoodad_set-2-name": "",
4060.             "fancydoodad_set-2-expensive": "on",
4061. 
4062.             "category_set-TOTAL_FORMS": "3",
4063.             "category_set-INITIAL_FORMS": "0",
4064.             "category_set-MAX_NUM_FORMS": "0",
4065.             "category_set-0-order": "",
4066.             "category_set-0-id": "",
4067.             "category_set-0-collector": "1",
4068.             "category_set-1-order": "",
4069.             "category_set-1-id": "",
4070.             "category_set-1-collector": "1",
4071.             "category_set-2-order": "",
4072.             "category_set-2-id": "",
4073.             "category_set-2-collector": "1",
4074.         }
4075. 
4076.         self.client.force_login(self.superuser)
4077. 
4078.     def test_simple_inline(self):
4079.         "A simple model can be saved as inlines"
4080.         # First add a new inline
4081.         self.post_data['widget_set-0-name'] = "Widget 1"
4082.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4083.         response = self.client.post(collector_url, self.post_data)
4084.         self.assertEqual(response.status_code, 302)
4085.         self.assertEqual(Widget.objects.count(), 1)
4086.         self.assertEqual(Widget.objects.all()[0].name, "Widget 1")
4087.         widget_id = Widget.objects.all()[0].id
4088. 
4089.         # The PK link exists on the rendered form
4090.         response = self.client.get(collector_url)
4091.         self.assertContains(response, 'name="widget_set-0-id"')
4092. 
4093.         # No file or image fields, no enctype on the forms
4094.         self.assertIs(response.context['has_file_field'], False)
4095.         self.assertNotContains(response, MULTIPART_ENCTYPE)
4096. 
4097.         # Now resave that inline
4098.         self.post_data['widget_set-INITIAL_FORMS'] = "1"
4099.         self.post_data['widget_set-0-id'] = str(widget_id)
4100.         self.post_data['widget_set-0-name'] = "Widget 1"
4101.         response = self.client.post(collector_url, self.post_data)
4102.         self.assertEqual(response.status_code, 302)
4103.         self.assertEqual(Widget.objects.count(), 1)
4104.         self.assertEqual(Widget.objects.all()[0].name, "Widget 1")
4105. 
4106.         # Now modify that inline
4107.         self.post_data['widget_set-INITIAL_FORMS'] = "1"
4108.         self.post_data['widget_set-0-id'] = str(widget_id)
4109.         self.post_data['widget_set-0-name'] = "Widget 1 Updated"
4110.         response = self.client.post(collector_url, self.post_data)
4111.         self.assertEqual(response.status_code, 302)
4112.         self.assertEqual(Widget.objects.count(), 1)
4113.         self.assertEqual(Widget.objects.all()[0].name, "Widget 1 Updated")
4114. 
4115.     def test_explicit_autofield_inline(self):
4116.         "A model with an explicit autofield primary key can be saved as inlines. Regression for #8093"
4117.         # First add a new inline
4118.         self.post_data['grommet_set-0-name'] = "Grommet 1"
4119.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4120.         response = self.client.post(collector_url, self.post_data)
4121.         self.assertEqual(response.status_code, 302)
4122.         self.assertEqual(Grommet.objects.count(), 1)
4123.         self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1")
4124. 
4125.         # The PK link exists on the rendered form
4126.         response = self.client.get(collector_url)
4127.         self.assertContains(response, 'name="grommet_set-0-code"')
4128. 
4129.         # Now resave that inline
4130.         self.post_data['grommet_set-INITIAL_FORMS'] = "1"
4131.         self.post_data['grommet_set-0-code'] = str(Grommet.objects.all()[0].code)
4132.         self.post_data['grommet_set-0-name'] = "Grommet 1"
4133.         response = self.client.post(collector_url, self.post_data)
4134.         self.assertEqual(response.status_code, 302)
4135.         self.assertEqual(Grommet.objects.count(), 1)
4136.         self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1")
4137. 
4138.         # Now modify that inline
4139.         self.post_data['grommet_set-INITIAL_FORMS'] = "1"
4140.         self.post_data['grommet_set-0-code'] = str(Grommet.objects.all()[0].code)
4141.         self.post_data['grommet_set-0-name'] = "Grommet 1 Updated"
4142.         response = self.client.post(collector_url, self.post_data)
4143.         self.assertEqual(response.status_code, 302)
4144.         self.assertEqual(Grommet.objects.count(), 1)
4145.         self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1 Updated")
4146. 
4147.     def test_char_pk_inline(self):
4148.         "A model with a character PK can be saved as inlines. Regression for #10992"
4149.         # First add a new inline
4150.         self.post_data['doohickey_set-0-code'] = "DH1"
4151.         self.post_data['doohickey_set-0-name'] = "Doohickey 1"
4152.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4153.         response = self.client.post(collector_url, self.post_data)
4154.         self.assertEqual(response.status_code, 302)
4155.         self.assertEqual(DooHickey.objects.count(), 1)
4156.         self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1")
4157. 
4158.         # The PK link exists on the rendered form
4159.         response = self.client.get(collector_url)
4160.         self.assertContains(response, 'name="doohickey_set-0-code"')
4161. 
4162.         # Now resave that inline
4163.         self.post_data['doohickey_set-INITIAL_FORMS'] = "1"
4164.         self.post_data['doohickey_set-0-code'] = "DH1"
4165.         self.post_data['doohickey_set-0-name'] = "Doohickey 1"
4166.         response = self.client.post(collector_url, self.post_data)
4167.         self.assertEqual(response.status_code, 302)
4168.         self.assertEqual(DooHickey.objects.count(), 1)
4169.         self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1")
4170. 
4171.         # Now modify that inline
4172.         self.post_data['doohickey_set-INITIAL_FORMS'] = "1"
4173.         self.post_data['doohickey_set-0-code'] = "DH1"
4174.         self.post_data['doohickey_set-0-name'] = "Doohickey 1 Updated"
4175.         response = self.client.post(collector_url, self.post_data)
4176.         self.assertEqual(response.status_code, 302)
4177.         self.assertEqual(DooHickey.objects.count(), 1)
4178.         self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1 Updated")
4179. 
4180.     def test_integer_pk_inline(self):
4181.         "A model with an integer PK can be saved as inlines. Regression for #10992"
4182.         # First add a new inline
4183.         self.post_data['whatsit_set-0-index'] = "42"
4184.         self.post_data['whatsit_set-0-name'] = "Whatsit 1"
4185.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4186.         response = self.client.post(collector_url, self.post_data)
4187.         self.assertEqual(response.status_code, 302)
4188.         self.assertEqual(Whatsit.objects.count(), 1)
4189.         self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1")
4190. 
4191.         # The PK link exists on the rendered form
4192.         response = self.client.get(collector_url)
4193.         self.assertContains(response, 'name="whatsit_set-0-index"')
4194. 
4195.         # Now resave that inline
4196.         self.post_data['whatsit_set-INITIAL_FORMS'] = "1"
4197.         self.post_data['whatsit_set-0-index'] = "42"
4198.         self.post_data['whatsit_set-0-name'] = "Whatsit 1"
4199.         response = self.client.post(collector_url, self.post_data)
4200.         self.assertEqual(response.status_code, 302)
4201.         self.assertEqual(Whatsit.objects.count(), 1)
4202.         self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1")
4203. 
4204.         # Now modify that inline
4205.         self.post_data['whatsit_set-INITIAL_FORMS'] = "1"
4206.         self.post_data['whatsit_set-0-index'] = "42"
4207.         self.post_data['whatsit_set-0-name'] = "Whatsit 1 Updated"
4208.         response = self.client.post(collector_url, self.post_data)
4209.         self.assertEqual(response.status_code, 302)
4210.         self.assertEqual(Whatsit.objects.count(), 1)
4211.         self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1 Updated")
4212. 
4213.     def test_inherited_inline(self):
4214.         "An inherited model can be saved as inlines. Regression for #11042"
4215.         # First add a new inline
4216.         self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1"
4217.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4218.         response = self.client.post(collector_url, self.post_data)
4219.         self.assertEqual(response.status_code, 302)
4220.         self.assertEqual(FancyDoodad.objects.count(), 1)
4221.         self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1")
4222.         doodad_pk = FancyDoodad.objects.all()[0].pk
4223. 
4224.         # The PK link exists on the rendered form
4225.         response = self.client.get(collector_url)
4226.         self.assertContains(response, 'name="fancydoodad_set-0-doodad_ptr"')
4227. 
4228.         # Now resave that inline
4229.         self.post_data['fancydoodad_set-INITIAL_FORMS'] = "1"
4230.         self.post_data['fancydoodad_set-0-doodad_ptr'] = str(doodad_pk)
4231.         self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1"
4232.         response = self.client.post(collector_url, self.post_data)
4233.         self.assertEqual(response.status_code, 302)
4234.         self.assertEqual(FancyDoodad.objects.count(), 1)
4235.         self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1")
4236. 
4237.         # Now modify that inline
4238.         self.post_data['fancydoodad_set-INITIAL_FORMS'] = "1"
4239.         self.post_data['fancydoodad_set-0-doodad_ptr'] = str(doodad_pk)
4240.         self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1 Updated"
4241.         response = self.client.post(collector_url, self.post_data)
4242.         self.assertEqual(response.status_code, 302)
4243.         self.assertEqual(FancyDoodad.objects.count(), 1)
4244.         self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1 Updated")
4245. 
4246.     def test_ordered_inline(self):
4247.         """
4248.         An inline with an editable ordering fields is updated correctly.
4249.         """
4250.         # Create some objects with an initial ordering
4251.         Category.objects.create(id=1, order=1, collector=self.collector)
4252.         Category.objects.create(id=2, order=2, collector=self.collector)
4253.         Category.objects.create(id=3, order=0, collector=self.collector)
4254.         Category.objects.create(id=4, order=0, collector=self.collector)
4255. 
4256.         # NB: The order values must be changed so that the items are reordered.
4257.         self.post_data.update({
4258.             "name": "Frederick Clegg",
4259. 
4260.             "category_set-TOTAL_FORMS": "7",
4261.             "category_set-INITIAL_FORMS": "4",
4262.             "category_set-MAX_NUM_FORMS": "0",
4263. 
4264.             "category_set-0-order": "14",
4265.             "category_set-0-id": "1",
4266.             "category_set-0-collector": "1",
4267. 
4268.             "category_set-1-order": "13",
4269.             "category_set-1-id": "2",
4270.             "category_set-1-collector": "1",
4271. 
4272.             "category_set-2-order": "1",
4273.             "category_set-2-id": "3",
4274.             "category_set-2-collector": "1",
4275. 
4276.             "category_set-3-order": "0",
4277.             "category_set-3-id": "4",
4278.             "category_set-3-collector": "1",
4279. 
4280.             "category_set-4-order": "",
4281.             "category_set-4-id": "",
4282.             "category_set-4-collector": "1",
4283. 
4284.             "category_set-5-order": "",
4285.             "category_set-5-id": "",
4286.             "category_set-5-collector": "1",
4287. 
4288.             "category_set-6-order": "",
4289.             "category_set-6-id": "",
4290.             "category_set-6-collector": "1",
4291.         })
4292.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4293.         response = self.client.post(collector_url, self.post_data)
4294.         # Successful post will redirect
4295.         self.assertEqual(response.status_code, 302)
4296. 
4297.         # The order values have been applied to the right objects
4298.         self.assertEqual(self.collector.category_set.count(), 4)
4299.         self.assertEqual(Category.objects.get(id=1).order, 14)
4300.         self.assertEqual(Category.objects.get(id=2).order, 13)
4301.         self.assertEqual(Category.objects.get(id=3).order, 1)
4302.         self.assertEqual(Category.objects.get(id=4).order, 0)


File: tests/admin_views/tests.py
Line number range: 4435 - 4804
Content:
4435. @override_settings(ROOT_URLCONF='admin_views.urls')
4436. class SeleniumTests(AdminSeleniumTestCase):
4437. 
4438.     available_apps = ['admin_views'] + AdminSeleniumTestCase.available_apps
4439. 
4440.     def setUp(self):
4441.         self.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
4442.         self.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
4443. 
4444.     def test_prepopulated_fields(self):
4445.         """
4446.         The JavaScript-automated prepopulated fields work with the main form
4447.         and with stacked and tabular inlines.
4448.         Refs #13068, #9264, #9983, #9784.
4449.         """
4450.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4451.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_mainprepopulated_add'))
4452.         self.wait_for('.select2')
4453. 
4454.         # Main form ----------------------------------------------------------
4455.         self.selenium.find_element_by_id('id_pubdate').send_keys('2012-02-18')
4456.         self.select_option('#id_status', 'option two')
4457.         self.selenium.find_element_by_id('id_name').send_keys(' this is the mAin nÀMë and it\'s awεšomeıııİ')
4458.         slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
4459.         slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
4460.         slug3 = self.selenium.find_element_by_id('id_slug3').get_attribute('value')
4461.         self.assertEqual(slug1, 'main-name-and-its-awesomeiiii-2012-02-18')
4462.         self.assertEqual(slug2, 'option-two-main-name-and-its-awesomeiiii')
4463.         self.assertEqual(slug3, 'this-is-the-main-n\xe0m\xeb-and-its-aw\u03b5\u0161ome\u0131\u0131\u0131i')
4464. 
4465.         # Stacked inlines ----------------------------------------------------
4466.         # Initial inline
4467.         self.selenium.find_element_by_id('id_relatedprepopulated_set-0-pubdate').send_keys('2011-12-17')
4468.         self.select_option('#id_relatedprepopulated_set-0-status', 'option one')
4469.         self.selenium.find_element_by_id('id_relatedprepopulated_set-0-name').send_keys(
4470.             ' here is a sŤāÇkeð   inline !  '
4471.         )
4472.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-0-slug1').get_attribute('value')
4473.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-0-slug2').get_attribute('value')
4474.         self.assertEqual(slug1, 'here-stacked-inline-2011-12-17')
4475.         self.assertEqual(slug2, 'option-one-here-stacked-inline')
4476.         initial_select2_inputs = self.selenium.find_elements_by_class_name('select2-selection')
4477.         # Inline formsets have empty/invisible forms.
4478.         # Only the 4 visible select2 inputs are initialized.
4479.         num_initial_select2_inputs = len(initial_select2_inputs)
4480.         self.assertEqual(num_initial_select2_inputs, 4)
4481. 
4482.         # Add an inline
4483.         self.selenium.find_elements_by_link_text('Add another Related prepopulated')[0].click()
4484.         self.assertEqual(
4485.             len(self.selenium.find_elements_by_class_name('select2-selection')),
4486.             num_initial_select2_inputs + 2
4487.         )
4488.         self.selenium.find_element_by_id('id_relatedprepopulated_set-1-pubdate').send_keys('1999-01-25')
4489.         self.select_option('#id_relatedprepopulated_set-1-status', 'option two')
4490.         self.selenium.find_element_by_id('id_relatedprepopulated_set-1-name').send_keys(
4491.             ' now you haVe anöther   sŤāÇkeð  inline with a very ... '
4492.             'loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog text... '
4493.         )
4494.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-1-slug1').get_attribute('value')
4495.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-1-slug2').get_attribute('value')
4496.         # 50 characters maximum for slug1 field
4497.         self.assertEqual(slug1, 'now-you-have-another-stacked-inline-very-loooooooo')
4498.         # 60 characters maximum for slug2 field
4499.         self.assertEqual(slug2, 'option-two-now-you-have-another-stacked-inline-very-looooooo')
4500. 
4501.         # Tabular inlines ----------------------------------------------------
4502.         # Initial inline
4503.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-pubdate').send_keys('1234-12-07')
4504.         self.select_option('#id_relatedprepopulated_set-2-0-status', 'option two')
4505.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-name').send_keys(
4506.             'And now, with a tÃbűlaŘ inline !!!'
4507.         )
4508.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-slug1').get_attribute('value')
4509.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-slug2').get_attribute('value')
4510.         self.assertEqual(slug1, 'and-now-tabular-inline-1234-12-07')
4511.         self.assertEqual(slug2, 'option-two-and-now-tabular-inline')
4512. 
4513.         # Add an inline
4514.         # Button may be outside the browser frame.
4515.         element = self.selenium.find_elements_by_link_text('Add another Related prepopulated')[1]
4516.         self.selenium.execute_script('window.scrollTo(0, %s);' % element.location['y'])
4517.         element.click()
4518.         self.assertEqual(
4519.             len(self.selenium.find_elements_by_class_name('select2-selection')),
4520.             num_initial_select2_inputs + 4
4521.         )
4522.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-pubdate').send_keys('1981-08-22')
4523.         self.select_option('#id_relatedprepopulated_set-2-1-status', 'option one')
4524.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-name').send_keys(
4525.             r'a tÃbűlaŘ inline with ignored ;"&*^\%$#@-/`~ characters'
4526.         )
4527.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-slug1').get_attribute('value')
4528.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-slug2').get_attribute('value')
4529.         self.assertEqual(slug1, 'tabular-inline-ignored-characters-1981-08-22')
4530.         self.assertEqual(slug2, 'option-one-tabular-inline-ignored-characters')
4531.         # Add an inline without an initial inline.
4532.         # The button is outside of the browser frame.
4533.         self.selenium.execute_script("window.scrollTo(0, document.body.scrollHeight);")
4534.         self.selenium.find_elements_by_link_text('Add another Related prepopulated')[2].click()
4535.         self.assertEqual(
4536.             len(self.selenium.find_elements_by_class_name('select2-selection')),
4537.             num_initial_select2_inputs + 6
4538.         )
4539.         # Save and check that everything is properly stored in the database
4540.         with self.wait_page_loaded():
4541.             self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4542.         self.assertEqual(MainPrepopulated.objects.all().count(), 1)
4543.         MainPrepopulated.objects.get(
4544.             name=' this is the mAin nÀMë and it\'s awεšomeıııİ',
4545.             pubdate='2012-02-18',
4546.             status='option two',
4547.             slug1='main-name-and-its-awesomeiiii-2012-02-18',
4548.             slug2='option-two-main-name-and-its-awesomeiiii',
4549.             slug3='this-is-the-main-nàmë-and-its-awεšomeıııi',
4550.         )
4551.         self.assertEqual(RelatedPrepopulated.objects.all().count(), 4)
4552.         RelatedPrepopulated.objects.get(
4553.             name=' here is a sŤāÇkeð   inline !  ',
4554.             pubdate='2011-12-17',
4555.             status='option one',
4556.             slug1='here-stacked-inline-2011-12-17',
4557.             slug2='option-one-here-stacked-inline',
4558.         )
4559.         RelatedPrepopulated.objects.get(
4560.             # 75 characters in name field
4561.             name=' now you haVe anöther   sŤāÇkeð  inline with a very ... loooooooooooooooooo',
4562.             pubdate='1999-01-25',
4563.             status='option two',
4564.             slug1='now-you-have-another-stacked-inline-very-loooooooo',
4565.             slug2='option-two-now-you-have-another-stacked-inline-very-looooooo',
4566.         )
4567.         RelatedPrepopulated.objects.get(
4568.             name='And now, with a tÃbűlaŘ inline !!!',
4569.             pubdate='1234-12-07',
4570.             status='option two',
4571.             slug1='and-now-tabular-inline-1234-12-07',
4572.             slug2='option-two-and-now-tabular-inline',
4573.         )
4574.         RelatedPrepopulated.objects.get(
4575.             name=r'a tÃbűlaŘ inline with ignored ;"&*^\%$#@-/`~ characters',
4576.             pubdate='1981-08-22',
4577.             status='option one',
4578.             slug1='tabular-inline-ignored-characters-1981-08-22',
4579.             slug2='option-one-tabular-inline-ignored-characters',
4580.         )
4581. 
4582.     def test_populate_existing_object(self):
4583.         """
4584.         The prepopulation works for existing objects too, as long as
4585.         the original field is empty (#19082).
4586.         """
4587.         # Slugs are empty to start with.
4588.         item = MainPrepopulated.objects.create(
4589.             name=' this is the mAin nÀMë',
4590.             pubdate='2012-02-18',
4591.             status='option two',
4592.             slug1='',
4593.             slug2='',
4594.         )
4595.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4596. 
4597.         object_url = self.live_server_url + reverse('admin:admin_views_mainprepopulated_change', args=(item.id,))
4598. 
4599.         self.selenium.get(object_url)
4600.         self.selenium.find_element_by_id('id_name').send_keys(' the best')
4601. 
4602.         # The slugs got prepopulated since they were originally empty
4603.         slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
4604.         slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
4605.         self.assertEqual(slug1, 'main-name-best-2012-02-18')
4606.         self.assertEqual(slug2, 'option-two-main-name-best')
4607. 
4608.         # Save the object
4609.         with self.wait_page_loaded():
4610.             self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4611. 
4612.         self.selenium.get(object_url)
4613.         self.selenium.find_element_by_id('id_name').send_keys(' hello')
4614. 
4615.         # The slugs got prepopulated didn't change since they were originally not empty
4616.         slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
4617.         slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
4618.         self.assertEqual(slug1, 'main-name-best-2012-02-18')
4619.         self.assertEqual(slug2, 'option-two-main-name-best')
4620. 
4621.     def test_collapsible_fieldset(self):
4622.         """
4623.         The 'collapse' class in fieldsets definition allows to
4624.         show/hide the appropriate field section.
4625.         """
4626.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4627.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_article_add'))
4628.         self.assertFalse(self.selenium.find_element_by_id('id_title').is_displayed())
4629.         self.selenium.find_elements_by_link_text('Show')[0].click()
4630.         self.assertTrue(self.selenium.find_element_by_id('id_title').is_displayed())
4631.         self.assertEqual(self.selenium.find_element_by_id('fieldsetcollapser0').text, "Hide")
4632. 
4633.     def test_first_field_focus(self):
4634.         """JavaScript-assisted auto-focus on first usable form field."""
4635.         # First form field has a single widget
4636.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4637.         with self.wait_page_loaded():
4638.             self.selenium.get(self.live_server_url + reverse('admin:admin_views_picture_add'))
4639.         self.assertEqual(
4640.             self.selenium.switch_to.active_element,
4641.             self.selenium.find_element_by_id('id_name')
4642.         )
4643. 
4644.         # First form field has a MultiWidget
4645.         with self.wait_page_loaded():
4646.             self.selenium.get(self.live_server_url + reverse('admin:admin_views_reservation_add'))
4647.         self.assertEqual(
4648.             self.selenium.switch_to.active_element,
4649.             self.selenium.find_element_by_id('id_start_date_0')
4650.         )
4651. 
4652.     def test_cancel_delete_confirmation(self):
4653.         "Cancelling the deletion of an object takes the user back one page."
4654.         pizza = Pizza.objects.create(name="Double Cheese")
4655.         url = reverse('admin:admin_views_pizza_change', args=(pizza.id,))
4656.         full_url = self.live_server_url + url
4657.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4658.         self.selenium.get(full_url)
4659.         self.selenium.find_element_by_class_name('deletelink').click()
4660.         # Click 'cancel' on the delete page.
4661.         self.selenium.find_element_by_class_name('cancel-link').click()
4662.         # Wait until we're back on the change page.
4663.         self.wait_for_text('#content h1', 'Change pizza')
4664.         self.assertEqual(self.selenium.current_url, full_url)
4665.         self.assertEqual(Pizza.objects.count(), 1)
4666. 
4667.     def test_cancel_delete_related_confirmation(self):
4668.         """
4669.         Cancelling the deletion of an object with relations takes the user back
4670.         one page.
4671.         """
4672.         pizza = Pizza.objects.create(name="Double Cheese")
4673.         topping1 = Topping.objects.create(name="Cheddar")
4674.         topping2 = Topping.objects.create(name="Mozzarella")
4675.         pizza.toppings.add(topping1, topping2)
4676.         url = reverse('admin:admin_views_pizza_change', args=(pizza.id,))
4677.         full_url = self.live_server_url + url
4678.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4679.         self.selenium.get(full_url)
4680.         self.selenium.find_element_by_class_name('deletelink').click()
4681.         # Click 'cancel' on the delete page.
4682.         self.selenium.find_element_by_class_name('cancel-link').click()
4683.         # Wait until we're back on the change page.
4684.         self.wait_for_text('#content h1', 'Change pizza')
4685.         self.assertEqual(self.selenium.current_url, full_url)
4686.         self.assertEqual(Pizza.objects.count(), 1)
4687.         self.assertEqual(Topping.objects.count(), 2)
4688. 
4689.     def test_list_editable_popups(self):
4690.         """
4691.         list_editable foreign keys have add/change popups.
4692.         """
4693.         from selenium.webdriver.support.ui import Select
4694.         s1 = Section.objects.create(name='Test section')
4695.         Article.objects.create(
4696.             title='foo',
4697.             content='<p>Middle content</p>',
4698.             date=datetime.datetime(2008, 3, 18, 11, 54, 58),
4699.             section=s1,
4700.         )
4701.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4702.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_article_changelist'))
4703.         # Change popup
4704.         self.selenium.find_element_by_id('change_id_form-0-section').click()
4705.         self.wait_for_and_switch_to_popup()
4706.         self.wait_for_text('#content h1', 'Change section')
4707.         name_input = self.selenium.find_element_by_id('id_name')
4708.         name_input.clear()
4709.         name_input.send_keys('<i>edited section</i>')
4710.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4711.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4712.         select = Select(self.selenium.find_element_by_id('id_form-0-section'))
4713.         self.assertEqual(select.first_selected_option.text, '<i>edited section</i>')
4714.         # Rendered select2 input.
4715.         select2_display = self.selenium.find_element_by_class_name('select2-selection__rendered')
4716.         # Clear button (×\n) is included in text.
4717.         self.assertEqual(select2_display.text, '×\n<i>edited section</i>')
4718. 
4719.         # Add popup
4720.         self.selenium.find_element_by_id('add_id_form-0-section').click()
4721.         self.wait_for_and_switch_to_popup()
4722.         self.wait_for_text('#content h1', 'Add section')
4723.         self.selenium.find_element_by_id('id_name').send_keys('new section')
4724.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4725.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4726.         select = Select(self.selenium.find_element_by_id('id_form-0-section'))
4727.         self.assertEqual(select.first_selected_option.text, 'new section')
4728.         select2_display = self.selenium.find_element_by_class_name('select2-selection__rendered')
4729.         # Clear button (×\n) is included in text.
4730.         self.assertEqual(select2_display.text, '×\nnew section')
4731. 
4732.     def test_inline_uuid_pk_edit_with_popup(self):
4733.         from selenium.webdriver.support.ui import Select
4734.         parent = ParentWithUUIDPK.objects.create(title='test')
4735.         related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
4736.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4737.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
4738.         self.selenium.get(self.live_server_url + change_url)
4739.         self.selenium.find_element_by_id('change_id_parent').click()
4740.         self.wait_for_and_switch_to_popup()
4741.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4742.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4743.         select = Select(self.selenium.find_element_by_id('id_parent'))
4744.         self.assertEqual(select.first_selected_option.text, str(parent.id))
4745.         self.assertEqual(select.first_selected_option.get_attribute('value'), str(parent.id))
4746. 
4747.     def test_inline_uuid_pk_add_with_popup(self):
4748.         from selenium.webdriver.support.ui import Select
4749.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4750.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_relatedwithuuidpkmodel_add'))
4751.         self.selenium.find_element_by_id('add_id_parent').click()
4752.         self.wait_for_and_switch_to_popup()
4753.         self.selenium.find_element_by_id('id_title').send_keys('test')
4754.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4755.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4756.         select = Select(self.selenium.find_element_by_id('id_parent'))
4757.         uuid_id = str(ParentWithUUIDPK.objects.first().id)
4758.         self.assertEqual(select.first_selected_option.text, uuid_id)
4759.         self.assertEqual(select.first_selected_option.get_attribute('value'), uuid_id)
4760. 
4761.     def test_inline_uuid_pk_delete_with_popup(self):
4762.         from selenium.webdriver.support.ui import Select
4763.         parent = ParentWithUUIDPK.objects.create(title='test')
4764.         related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
4765.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4766.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
4767.         self.selenium.get(self.live_server_url + change_url)
4768.         self.selenium.find_element_by_id('delete_id_parent').click()
4769.         self.wait_for_and_switch_to_popup()
4770.         self.selenium.find_element_by_xpath('//input[@value="Yes, I’m sure"]').click()
4771.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4772.         select = Select(self.selenium.find_element_by_id('id_parent'))
4773.         self.assertEqual(ParentWithUUIDPK.objects.count(), 0)
4774.         self.assertEqual(select.first_selected_option.text, '---------')
4775.         self.assertEqual(select.first_selected_option.get_attribute('value'), '')
4776. 
4777.     def test_inline_with_popup_cancel_delete(self):
4778.         """Clicking ""No, take me back" on a delete popup closes the window."""
4779.         parent = ParentWithUUIDPK.objects.create(title='test')
4780.         related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
4781.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4782.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
4783.         self.selenium.get(self.live_server_url + change_url)
4784.         self.selenium.find_element_by_id('delete_id_parent').click()
4785.         self.wait_for_and_switch_to_popup()
4786.         self.selenium.find_element_by_xpath('//a[text()="No, take me back"]').click()
4787.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4788.         self.assertEqual(len(self.selenium.window_handles), 1)
4789. 
4790.     def test_list_editable_raw_id_fields(self):
4791.         parent = ParentWithUUIDPK.objects.create(title='test')
4792.         parent2 = ParentWithUUIDPK.objects.create(title='test2')
4793.         RelatedWithUUIDPKModel.objects.create(parent=parent)
4794.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4795.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_changelist', current_app=site2.name)
4796.         self.selenium.get(self.live_server_url + change_url)
4797.         self.selenium.find_element_by_id('lookup_id_form-0-parent').click()
4798.         self.wait_for_and_switch_to_popup()
4799.         # Select "parent2" in the popup.
4800.         self.selenium.find_element_by_link_text(str(parent2.pk)).click()
4801.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4802.         # The newly selected pk should appear in the raw id input.
4803.         value = self.selenium.find_element_by_id('id_form-0-parent').get_attribute('value')
4804.         self.assertEqual(value, str(parent2.pk))


File: tests/admin_views/tests.py
Line number range: 5099 - 5259
Content:
5099. @override_settings(ROOT_URLCONF='admin_views.urls')
5100. class UserAdminTest(TestCase):
5101.     """
5102.     Tests user CRUD functionality.
5103.     """
5104. 
5105.     @classmethod
5106.     def setUpTestData(cls):
5107.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
5108.         cls.adduser = User.objects.create_user(username='adduser', password='secret', is_staff=True)
5109.         cls.changeuser = User.objects.create_user(username='changeuser', password='secret', is_staff=True)
5110.         cls.s1 = Section.objects.create(name='Test section')
5111.         cls.a1 = Article.objects.create(
5112.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
5113.         )
5114.         cls.a2 = Article.objects.create(
5115.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
5116.         )
5117.         cls.a3 = Article.objects.create(
5118.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
5119.         )
5120.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
5121. 
5122.         cls.per1 = Person.objects.create(name='John Mauchly', gender=1, alive=True)
5123.         cls.per2 = Person.objects.create(name='Grace Hopper', gender=1, alive=False)
5124.         cls.per3 = Person.objects.create(name='Guido van Rossum', gender=1, alive=True)
5125. 
5126.     def setUp(self):
5127.         self.client.force_login(self.superuser)
5128. 
5129.     def test_save_button(self):
5130.         user_count = User.objects.count()
5131.         response = self.client.post(reverse('admin:auth_user_add'), {
5132.             'username': 'newuser',
5133.             'password1': 'newpassword',
5134.             'password2': 'newpassword',
5135.         })
5136.         new_user = User.objects.get(username='newuser')
5137.         self.assertRedirects(response, reverse('admin:auth_user_change', args=(new_user.pk,)))
5138.         self.assertEqual(User.objects.count(), user_count + 1)
5139.         self.assertTrue(new_user.has_usable_password())
5140. 
5141.     def test_save_continue_editing_button(self):
5142.         user_count = User.objects.count()
5143.         response = self.client.post(reverse('admin:auth_user_add'), {
5144.             'username': 'newuser',
5145.             'password1': 'newpassword',
5146.             'password2': 'newpassword',
5147.             '_continue': '1',
5148.         })
5149.         new_user = User.objects.get(username='newuser')
5150.         new_user_url = reverse('admin:auth_user_change', args=(new_user.pk,))
5151.         self.assertRedirects(response, new_user_url, fetch_redirect_response=False)
5152.         self.assertEqual(User.objects.count(), user_count + 1)
5153.         self.assertTrue(new_user.has_usable_password())
5154.         response = self.client.get(new_user_url)
5155.         self.assertContains(
5156.             response,
5157.             '<li class="success">The user “<a href="%s">'
5158.             '%s</a>” was added successfully. You may edit it again below.</li>'
5159.             % (new_user_url, new_user),
5160.             html=True,
5161.         )
5162. 
5163.     def test_password_mismatch(self):
5164.         response = self.client.post(reverse('admin:auth_user_add'), {
5165.             'username': 'newuser',
5166.             'password1': 'newpassword',
5167.             'password2': 'mismatch',
5168.         })
5169.         self.assertEqual(response.status_code, 200)
5170.         self.assertFormError(response, 'adminform', 'password', [])
5171.         self.assertFormError(response, 'adminform', 'password2', ['The two password fields didn’t match.'])
5172. 
5173.     def test_user_fk_add_popup(self):
5174.         """User addition through a FK popup should return the appropriate JavaScript response."""
5175.         response = self.client.get(reverse('admin:admin_views_album_add'))
5176.         self.assertContains(response, reverse('admin:auth_user_add'))
5177.         self.assertContains(response, 'class="related-widget-wrapper-link add-related" id="add_id_owner"')
5178.         response = self.client.get(reverse('admin:auth_user_add') + '?_popup=1')
5179.         self.assertNotContains(response, 'name="_continue"')
5180.         self.assertNotContains(response, 'name="_addanother"')
5181.         data = {
5182.             'username': 'newuser',
5183.             'password1': 'newpassword',
5184.             'password2': 'newpassword',
5185.             '_popup': '1',
5186.             '_save': '1',
5187.         }
5188.         response = self.client.post(reverse('admin:auth_user_add') + '?_popup=1', data, follow=True)
5189.         self.assertContains(response, '&quot;obj&quot;: &quot;newuser&quot;')
5190. 
5191.     def test_user_fk_change_popup(self):
5192.         """User change through a FK popup should return the appropriate JavaScript response."""
5193.         response = self.client.get(reverse('admin:admin_views_album_add'))
5194.         self.assertContains(response, reverse('admin:auth_user_change', args=('__fk__',)))
5195.         self.assertContains(response, 'class="related-widget-wrapper-link change-related" id="change_id_owner"')
5196.         user = User.objects.get(username='changeuser')
5197.         url = reverse('admin:auth_user_change', args=(user.pk,)) + '?_popup=1'
5198.         response = self.client.get(url)
5199.         self.assertNotContains(response, 'name="_continue"')
5200.         self.assertNotContains(response, 'name="_addanother"')
5201.         data = {
5202.             'username': 'newuser',
5203.             'password1': 'newpassword',
5204.             'password2': 'newpassword',
5205.             'last_login_0': '2007-05-30',
5206.             'last_login_1': '13:20:10',
5207.             'date_joined_0': '2007-05-30',
5208.             'date_joined_1': '13:20:10',
5209.             '_popup': '1',
5210.             '_save': '1',
5211.         }
5212.         response = self.client.post(url, data, follow=True)
5213.         self.assertContains(response, '&quot;obj&quot;: &quot;newuser&quot;')
5214.         self.assertContains(response, '&quot;action&quot;: &quot;change&quot;')
5215. 
5216.     def test_user_fk_delete_popup(self):
5217.         """User deletion through a FK popup should return the appropriate JavaScript response."""
5218.         response = self.client.get(reverse('admin:admin_views_album_add'))
5219.         self.assertContains(response, reverse('admin:auth_user_delete', args=('__fk__',)))
5220.         self.assertContains(response, 'class="related-widget-wrapper-link change-related" id="change_id_owner"')
5221.         user = User.objects.get(username='changeuser')
5222.         url = reverse('admin:auth_user_delete', args=(user.pk,)) + '?_popup=1'
5223.         response = self.client.get(url)
5224.         self.assertEqual(response.status_code, 200)
5225.         data = {
5226.             'post': 'yes',
5227.             '_popup': '1',
5228.         }
5229.         response = self.client.post(url, data, follow=True)
5230.         self.assertContains(response, '&quot;action&quot;: &quot;delete&quot;')
5231. 
5232.     def test_save_add_another_button(self):
5233.         user_count = User.objects.count()
5234.         response = self.client.post(reverse('admin:auth_user_add'), {
5235.             'username': 'newuser',
5236.             'password1': 'newpassword',
5237.             'password2': 'newpassword',
5238.             '_addanother': '1',
5239.         })
5240.         new_user = User.objects.order_by('-id')[0]
5241.         self.assertRedirects(response, reverse('admin:auth_user_add'))
5242.         self.assertEqual(User.objects.count(), user_count + 1)
5243.         self.assertTrue(new_user.has_usable_password())
5244. 
5245.     def test_user_permission_performance(self):
5246.         u = User.objects.all()[0]
5247. 
5248.         # Don't depend on a warm cache, see #17377.
5249.         ContentType.objects.clear_cache()
5250. 
5251.         with self.assertNumQueries(10):
5252.             response = self.client.get(reverse('admin:auth_user_change', args=(u.pk,)))
5253.             self.assertEqual(response.status_code, 200)
5254. 
5255.     def test_form_url_present_in_context(self):
5256.         u = User.objects.all()[0]
5257.         response = self.client.get(reverse('admin3:auth_user_password_change', args=(u.pk,)))
5258.         self.assertEqual(response.status_code, 200)
5259.         self.assertEqual(response.context['form_url'], 'pony')


File: tests/modeladmin/tests.py
Line number range: 1 - 500
Content:
1. from datetime import date
2. 
3. from django import forms
4. from django.contrib.admin.models import ADDITION, CHANGE, DELETION, LogEntry
5. from django.contrib.admin.options import (
6.     HORIZONTAL, VERTICAL, ModelAdmin, TabularInline,
7.     get_content_type_for_model,
8. )
9. from django.contrib.admin.sites import AdminSite
10. from django.contrib.admin.widgets import (
11.     AdminDateWidget, AdminRadioSelect, AutocompleteSelect,
12.     AutocompleteSelectMultiple,
13. )
14. from django.contrib.auth.models import User
15. from django.db import models
16. from django.forms.widgets import Select
17. from django.test import SimpleTestCase, TestCase
18. from django.test.utils import isolate_apps
19. 
20. from .models import Band, Concert, Song
21. 
22. 
23. class MockRequest:
24.     pass
25. 
26. 
27. class MockSuperUser:
28.     def has_perm(self, perm):
29.         return True
30. 
31. 
32. request = MockRequest()
33. request.user = MockSuperUser()
34. 
35. 
36. class ModelAdminTests(TestCase):
37. 
38.     def setUp(self):
39.         self.band = Band.objects.create(
40.             name='The Doors',
41.             bio='',
42.             sign_date=date(1965, 1, 1),
43.         )
44.         self.site = AdminSite()
45. 
46.     def test_modeladmin_str(self):
47.         ma = ModelAdmin(Band, self.site)
48.         self.assertEqual(str(ma), 'modeladmin.ModelAdmin')
49. 
50.     # form/fields/fieldsets interaction ##############################
51. 
52.     def test_default_fields(self):
53.         ma = ModelAdmin(Band, self.site)
54.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date'])
55.         self.assertEqual(list(ma.get_fields(request)), ['name', 'bio', 'sign_date'])
56.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name', 'bio', 'sign_date'])
57.         self.assertIsNone(ma.get_exclude(request, self.band))
58. 
59.     def test_default_fieldsets(self):
60.         # fieldsets_add and fieldsets_change should return a special data structure that
61.         # is used in the templates. They should generate the "right thing" whether we
62.         # have specified a custom form, the fields argument, or nothing at all.
63.         #
64.         # Here's the default case. There are no custom form_add/form_change methods,
65.         # no fields argument, and no fieldsets argument.
66.         ma = ModelAdmin(Band, self.site)
67.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name', 'bio', 'sign_date']})])
68.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name', 'bio', 'sign_date']})])
69. 
70.     def test_get_fieldsets(self):
71.         # get_fieldsets() is called when figuring out form fields (#18681).
72.         class BandAdmin(ModelAdmin):
73.             def get_fieldsets(self, request, obj=None):
74.                 return [(None, {'fields': ['name', 'bio']})]
75. 
76.         ma = BandAdmin(Band, self.site)
77.         form = ma.get_form(None)
78.         self.assertEqual(form._meta.fields, ['name', 'bio'])
79. 
80.         class InlineBandAdmin(TabularInline):
81.             model = Concert
82.             fk_name = 'main_band'
83.             can_delete = False
84. 
85.             def get_fieldsets(self, request, obj=None):
86.                 return [(None, {'fields': ['day', 'transport']})]
87. 
88.         ma = InlineBandAdmin(Band, self.site)
89.         form = ma.get_formset(None).form
90.         self.assertEqual(form._meta.fields, ['day', 'transport'])
91. 
92.     def test_lookup_allowed_allows_nonexistent_lookup(self):
93.         """
94.         A lookup_allowed allows a parameter whose field lookup doesn't exist.
95.         (#21129).
96.         """
97.         class BandAdmin(ModelAdmin):
98.             fields = ['name']
99. 
100.         ma = BandAdmin(Band, self.site)
101.         self.assertTrue(ma.lookup_allowed('name__nonexistent', 'test_value'))
102. 
103.     @isolate_apps('modeladmin')
104.     def test_lookup_allowed_onetoone(self):
105.         class Department(models.Model):
106.             code = models.CharField(max_length=4, unique=True)
107. 
108.         class Employee(models.Model):
109.             department = models.ForeignKey(Department, models.CASCADE, to_field="code")
110. 
111.         class EmployeeProfile(models.Model):
112.             employee = models.OneToOneField(Employee, models.CASCADE)
113. 
114.         class EmployeeInfo(models.Model):
115.             employee = models.OneToOneField(Employee, models.CASCADE)
116.             description = models.CharField(max_length=100)
117. 
118.         class EmployeeProfileAdmin(ModelAdmin):
119.             list_filter = [
120.                 'employee__employeeinfo__description',
121.                 'employee__department__code',
122.             ]
123. 
124.         ma = EmployeeProfileAdmin(EmployeeProfile, self.site)
125.         # Reverse OneToOneField
126.         self.assertIs(ma.lookup_allowed('employee__employeeinfo__description', 'test_value'), True)
127.         # OneToOneField and ForeignKey
128.         self.assertIs(ma.lookup_allowed('employee__department__code', 'test_value'), True)
129. 
130.     def test_field_arguments(self):
131.         # If fields is specified, fieldsets_add and fieldsets_change should
132.         # just stick the fields into a formsets structure and return it.
133.         class BandAdmin(ModelAdmin):
134.             fields = ['name']
135. 
136.         ma = BandAdmin(Band, self.site)
137. 
138.         self.assertEqual(list(ma.get_fields(request)), ['name'])
139.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name'])
140.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name']})])
141.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name']})])
142. 
143.     def test_field_arguments_restricted_on_form(self):
144.         # If fields or fieldsets is specified, it should exclude fields on the
145.         # Form class to the fields specified. This may cause errors to be
146.         # raised in the db layer if required model fields aren't in fields/
147.         # fieldsets, but that's preferable to ghost errors where a field in the
148.         # Form class isn't being displayed because it's not in fields/fieldsets.
149. 
150.         # Using `fields`.
151.         class BandAdmin(ModelAdmin):
152.             fields = ['name']
153. 
154.         ma = BandAdmin(Band, self.site)
155.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
156.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
157. 
158.         # Using `fieldsets`.
159.         class BandAdmin(ModelAdmin):
160.             fieldsets = [(None, {'fields': ['name']})]
161. 
162.         ma = BandAdmin(Band, self.site)
163.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
164.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
165. 
166.         # Using `exclude`.
167.         class BandAdmin(ModelAdmin):
168.             exclude = ['bio']
169. 
170.         ma = BandAdmin(Band, self.site)
171.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
172. 
173.         # You can also pass a tuple to `exclude`.
174.         class BandAdmin(ModelAdmin):
175.             exclude = ('bio',)
176. 
177.         ma = BandAdmin(Band, self.site)
178.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
179. 
180.         # Using `fields` and `exclude`.
181.         class BandAdmin(ModelAdmin):
182.             fields = ['name', 'bio']
183.             exclude = ['bio']
184. 
185.         ma = BandAdmin(Band, self.site)
186.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
187. 
188.     def test_custom_form_meta_exclude_with_readonly(self):
189.         """
190.         The custom ModelForm's `Meta.exclude` is respected when used in
191.         conjunction with `ModelAdmin.readonly_fields` and when no
192.         `ModelAdmin.exclude` is defined (#14496).
193.         """
194.         # With ModelAdmin
195.         class AdminBandForm(forms.ModelForm):
196.             class Meta:
197.                 model = Band
198.                 exclude = ['bio']
199. 
200.         class BandAdmin(ModelAdmin):
201.             readonly_fields = ['name']
202.             form = AdminBandForm
203. 
204.         ma = BandAdmin(Band, self.site)
205.         self.assertEqual(list(ma.get_form(request).base_fields), ['sign_date'])
206. 
207.         # With InlineModelAdmin
208.         class AdminConcertForm(forms.ModelForm):
209.             class Meta:
210.                 model = Concert
211.                 exclude = ['day']
212. 
213.         class ConcertInline(TabularInline):
214.             readonly_fields = ['transport']
215.             form = AdminConcertForm
216.             fk_name = 'main_band'
217.             model = Concert
218. 
219.         class BandAdmin(ModelAdmin):
220.             inlines = [ConcertInline]
221. 
222.         ma = BandAdmin(Band, self.site)
223.         self.assertEqual(
224.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
225.             ['main_band', 'opening_band', 'id', 'DELETE'])
226. 
227.     def test_custom_formfield_override_readonly(self):
228.         class AdminBandForm(forms.ModelForm):
229.             name = forms.CharField()
230. 
231.             class Meta:
232.                 exclude = ()
233.                 model = Band
234. 
235.         class BandAdmin(ModelAdmin):
236.             form = AdminBandForm
237.             readonly_fields = ['name']
238. 
239.         ma = BandAdmin(Band, self.site)
240. 
241.         # `name` shouldn't appear in base_fields because it's part of
242.         # readonly_fields.
243.         self.assertEqual(
244.             list(ma.get_form(request).base_fields),
245.             ['bio', 'sign_date']
246.         )
247.         # But it should appear in get_fields()/fieldsets() so it can be
248.         # displayed as read-only.
249.         self.assertEqual(
250.             list(ma.get_fields(request)),
251.             ['bio', 'sign_date', 'name']
252.         )
253.         self.assertEqual(
254.             list(ma.get_fieldsets(request)),
255.             [(None, {'fields': ['bio', 'sign_date', 'name']})]
256.         )
257. 
258.     def test_custom_form_meta_exclude(self):
259.         """
260.         The custom ModelForm's `Meta.exclude` is overridden if
261.         `ModelAdmin.exclude` or `InlineModelAdmin.exclude` are defined (#14496).
262.         """
263.         # With ModelAdmin
264.         class AdminBandForm(forms.ModelForm):
265.             class Meta:
266.                 model = Band
267.                 exclude = ['bio']
268. 
269.         class BandAdmin(ModelAdmin):
270.             exclude = ['name']
271.             form = AdminBandForm
272. 
273.         ma = BandAdmin(Band, self.site)
274.         self.assertEqual(list(ma.get_form(request).base_fields), ['bio', 'sign_date'])
275. 
276.         # With InlineModelAdmin
277.         class AdminConcertForm(forms.ModelForm):
278.             class Meta:
279.                 model = Concert
280.                 exclude = ['day']
281. 
282.         class ConcertInline(TabularInline):
283.             exclude = ['transport']
284.             form = AdminConcertForm
285.             fk_name = 'main_band'
286.             model = Concert
287. 
288.         class BandAdmin(ModelAdmin):
289.             inlines = [ConcertInline]
290. 
291.         ma = BandAdmin(Band, self.site)
292.         self.assertEqual(
293.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
294.             ['main_band', 'opening_band', 'day', 'id', 'DELETE']
295.         )
296. 
297.     def test_overriding_get_exclude(self):
298.         class BandAdmin(ModelAdmin):
299.             def get_exclude(self, request, obj=None):
300.                 return ['name']
301. 
302.         self.assertEqual(
303.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
304.             ['bio', 'sign_date']
305.         )
306. 
307.     def test_get_exclude_overrides_exclude(self):
308.         class BandAdmin(ModelAdmin):
309.             exclude = ['bio']
310. 
311.             def get_exclude(self, request, obj=None):
312.                 return ['name']
313. 
314.         self.assertEqual(
315.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
316.             ['bio', 'sign_date']
317.         )
318. 
319.     def test_get_exclude_takes_obj(self):
320.         class BandAdmin(ModelAdmin):
321.             def get_exclude(self, request, obj=None):
322.                 if obj:
323.                     return ['sign_date']
324.                 return ['name']
325. 
326.         self.assertEqual(
327.             list(BandAdmin(Band, self.site).get_form(request, self.band).base_fields),
328.             ['name', 'bio']
329.         )
330. 
331.     def test_custom_form_validation(self):
332.         # If a form is specified, it should use it allowing custom validation
333.         # to work properly. This won't break any of the admin widgets or media.
334.         class AdminBandForm(forms.ModelForm):
335.             delete = forms.BooleanField()
336. 
337.         class BandAdmin(ModelAdmin):
338.             form = AdminBandForm
339. 
340.         ma = BandAdmin(Band, self.site)
341.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date', 'delete'])
342.         self.assertEqual(type(ma.get_form(request).base_fields['sign_date'].widget), AdminDateWidget)
343. 
344.     def test_form_exclude_kwarg_override(self):
345.         """
346.         The `exclude` kwarg passed to `ModelAdmin.get_form()` overrides all
347.         other declarations (#8999).
348.         """
349.         class AdminBandForm(forms.ModelForm):
350.             class Meta:
351.                 model = Band
352.                 exclude = ['name']
353. 
354.         class BandAdmin(ModelAdmin):
355.             exclude = ['sign_date']
356.             form = AdminBandForm
357. 
358.             def get_form(self, request, obj=None, **kwargs):
359.                 kwargs['exclude'] = ['bio']
360.                 return super().get_form(request, obj, **kwargs)
361. 
362.         ma = BandAdmin(Band, self.site)
363.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
364. 
365.     def test_formset_exclude_kwarg_override(self):
366.         """
367.         The `exclude` kwarg passed to `InlineModelAdmin.get_formset()`
368.         overrides all other declarations (#8999).
369.         """
370.         class AdminConcertForm(forms.ModelForm):
371.             class Meta:
372.                 model = Concert
373.                 exclude = ['day']
374. 
375.         class ConcertInline(TabularInline):
376.             exclude = ['transport']
377.             form = AdminConcertForm
378.             fk_name = 'main_band'
379.             model = Concert
380. 
381.             def get_formset(self, request, obj=None, **kwargs):
382.                 kwargs['exclude'] = ['opening_band']
383.                 return super().get_formset(request, obj, **kwargs)
384. 
385.         class BandAdmin(ModelAdmin):
386.             inlines = [ConcertInline]
387. 
388.         ma = BandAdmin(Band, self.site)
389.         self.assertEqual(
390.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
391.             ['main_band', 'day', 'transport', 'id', 'DELETE']
392.         )
393. 
394.     def test_formset_overriding_get_exclude_with_form_fields(self):
395.         class AdminConcertForm(forms.ModelForm):
396.             class Meta:
397.                 model = Concert
398.                 fields = ['main_band', 'opening_band', 'day', 'transport']
399. 
400.         class ConcertInline(TabularInline):
401.             form = AdminConcertForm
402.             fk_name = 'main_band'
403.             model = Concert
404. 
405.             def get_exclude(self, request, obj=None):
406.                 return ['opening_band']
407. 
408.         class BandAdmin(ModelAdmin):
409.             inlines = [ConcertInline]
410. 
411.         ma = BandAdmin(Band, self.site)
412.         self.assertEqual(
413.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
414.             ['main_band', 'day', 'transport', 'id', 'DELETE']
415.         )
416. 
417.     def test_formset_overriding_get_exclude_with_form_exclude(self):
418.         class AdminConcertForm(forms.ModelForm):
419.             class Meta:
420.                 model = Concert
421.                 exclude = ['day']
422. 
423.         class ConcertInline(TabularInline):
424.             form = AdminConcertForm
425.             fk_name = 'main_band'
426.             model = Concert
427. 
428.             def get_exclude(self, request, obj=None):
429.                 return ['opening_band']
430. 
431.         class BandAdmin(ModelAdmin):
432.             inlines = [ConcertInline]
433. 
434.         ma = BandAdmin(Band, self.site)
435.         self.assertEqual(
436.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
437.             ['main_band', 'day', 'transport', 'id', 'DELETE']
438.         )
439. 
440.     def test_raw_id_fields_widget_override(self):
441.         """
442.         The autocomplete_fields, raw_id_fields, and radio_fields widgets may
443.         overridden by specifying a widget in get_formset().
444.         """
445.         class ConcertInline(TabularInline):
446.             model = Concert
447.             fk_name = 'main_band'
448.             raw_id_fields = ('opening_band',)
449. 
450.             def get_formset(self, request, obj=None, **kwargs):
451.                 kwargs['widgets'] = {'opening_band': Select}
452.                 return super().get_formset(request, obj, **kwargs)
453. 
454.         class BandAdmin(ModelAdmin):
455.             inlines = [ConcertInline]
456. 
457.         ma = BandAdmin(Band, self.site)
458.         band_widget = list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields['opening_band'].widget
459.         # Without the override this would be ForeignKeyRawIdWidget.
460.         self.assertIsInstance(band_widget, Select)
461. 
462.     def test_queryset_override(self):
463.         # If the queryset of a ModelChoiceField in a custom form is overridden,
464.         # RelatedFieldWidgetWrapper doesn't mess that up.
465.         band2 = Band.objects.create(name='The Beatles', bio='', sign_date=date(1962, 1, 1))
466. 
467.         ma = ModelAdmin(Concert, self.site)
468.         form = ma.get_form(request)()
469. 
470.         self.assertHTMLEqual(
471.             str(form["main_band"]),
472.             '<div class="related-widget-wrapper">'
473.             '<select name="main_band" id="id_main_band" required>'
474.             '<option value="" selected>---------</option>'
475.             '<option value="%d">The Beatles</option>'
476.             '<option value="%d">The Doors</option>'
477.             '</select></div>' % (band2.id, self.band.id)
478.         )
479. 
480.         class AdminConcertForm(forms.ModelForm):
481.             def __init__(self, *args, **kwargs):
482.                 super().__init__(*args, **kwargs)
483.                 self.fields["main_band"].queryset = Band.objects.filter(name='The Doors')
484. 
485.         class ConcertAdminWithForm(ModelAdmin):
486.             form = AdminConcertForm
487. 
488.         ma = ConcertAdminWithForm(Concert, self.site)
489.         form = ma.get_form(request)()
490. 
491.         self.assertHTMLEqual(
492.             str(form["main_band"]),
493.             '<div class="related-widget-wrapper">'
494.             '<select name="main_band" id="id_main_band" required>'
495.             '<option value="" selected>---------</option>'
496.             '<option value="%d">The Doors</option>'
497.             '</select></div>' % self.band.id
498.         )
499. 
500.     def test_regression_for_ticket_15820(self):


File: tests/modeladmin/tests.py
Line number range: 36 - 720
Content:
36. class ModelAdminTests(TestCase):
37. 
38.     def setUp(self):
39.         self.band = Band.objects.create(
40.             name='The Doors',
41.             bio='',
42.             sign_date=date(1965, 1, 1),
43.         )
44.         self.site = AdminSite()
45. 
46.     def test_modeladmin_str(self):
47.         ma = ModelAdmin(Band, self.site)
48.         self.assertEqual(str(ma), 'modeladmin.ModelAdmin')
49. 
50.     # form/fields/fieldsets interaction ##############################
51. 
52.     def test_default_fields(self):
53.         ma = ModelAdmin(Band, self.site)
54.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date'])
55.         self.assertEqual(list(ma.get_fields(request)), ['name', 'bio', 'sign_date'])
56.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name', 'bio', 'sign_date'])
57.         self.assertIsNone(ma.get_exclude(request, self.band))
58. 
59.     def test_default_fieldsets(self):
60.         # fieldsets_add and fieldsets_change should return a special data structure that
61.         # is used in the templates. They should generate the "right thing" whether we
62.         # have specified a custom form, the fields argument, or nothing at all.
63.         #
64.         # Here's the default case. There are no custom form_add/form_change methods,
65.         # no fields argument, and no fieldsets argument.
66.         ma = ModelAdmin(Band, self.site)
67.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name', 'bio', 'sign_date']})])
68.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name', 'bio', 'sign_date']})])
69. 
70.     def test_get_fieldsets(self):
71.         # get_fieldsets() is called when figuring out form fields (#18681).
72.         class BandAdmin(ModelAdmin):
73.             def get_fieldsets(self, request, obj=None):
74.                 return [(None, {'fields': ['name', 'bio']})]
75. 
76.         ma = BandAdmin(Band, self.site)
77.         form = ma.get_form(None)
78.         self.assertEqual(form._meta.fields, ['name', 'bio'])
79. 
80.         class InlineBandAdmin(TabularInline):
81.             model = Concert
82.             fk_name = 'main_band'
83.             can_delete = False
84. 
85.             def get_fieldsets(self, request, obj=None):
86.                 return [(None, {'fields': ['day', 'transport']})]
87. 
88.         ma = InlineBandAdmin(Band, self.site)
89.         form = ma.get_formset(None).form
90.         self.assertEqual(form._meta.fields, ['day', 'transport'])
91. 
92.     def test_lookup_allowed_allows_nonexistent_lookup(self):
93.         """
94.         A lookup_allowed allows a parameter whose field lookup doesn't exist.
95.         (#21129).
96.         """
97.         class BandAdmin(ModelAdmin):
98.             fields = ['name']
99. 
100.         ma = BandAdmin(Band, self.site)
101.         self.assertTrue(ma.lookup_allowed('name__nonexistent', 'test_value'))
102. 
103.     @isolate_apps('modeladmin')
104.     def test_lookup_allowed_onetoone(self):
105.         class Department(models.Model):
106.             code = models.CharField(max_length=4, unique=True)
107. 
108.         class Employee(models.Model):
109.             department = models.ForeignKey(Department, models.CASCADE, to_field="code")
110. 
111.         class EmployeeProfile(models.Model):
112.             employee = models.OneToOneField(Employee, models.CASCADE)
113. 
114.         class EmployeeInfo(models.Model):
115.             employee = models.OneToOneField(Employee, models.CASCADE)
116.             description = models.CharField(max_length=100)
117. 
118.         class EmployeeProfileAdmin(ModelAdmin):
119.             list_filter = [
120.                 'employee__employeeinfo__description',
121.                 'employee__department__code',
122.             ]
123. 
124.         ma = EmployeeProfileAdmin(EmployeeProfile, self.site)
125.         # Reverse OneToOneField
126.         self.assertIs(ma.lookup_allowed('employee__employeeinfo__description', 'test_value'), True)
127.         # OneToOneField and ForeignKey
128.         self.assertIs(ma.lookup_allowed('employee__department__code', 'test_value'), True)
129. 
130.     def test_field_arguments(self):
131.         # If fields is specified, fieldsets_add and fieldsets_change should
132.         # just stick the fields into a formsets structure and return it.
133.         class BandAdmin(ModelAdmin):
134.             fields = ['name']
135. 
136.         ma = BandAdmin(Band, self.site)
137. 
138.         self.assertEqual(list(ma.get_fields(request)), ['name'])
139.         self.assertEqual(list(ma.get_fields(request, self.band)), ['name'])
140.         self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name']})])
141.         self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name']})])
142. 
143.     def test_field_arguments_restricted_on_form(self):
144.         # If fields or fieldsets is specified, it should exclude fields on the
145.         # Form class to the fields specified. This may cause errors to be
146.         # raised in the db layer if required model fields aren't in fields/
147.         # fieldsets, but that's preferable to ghost errors where a field in the
148.         # Form class isn't being displayed because it's not in fields/fieldsets.
149. 
150.         # Using `fields`.
151.         class BandAdmin(ModelAdmin):
152.             fields = ['name']
153. 
154.         ma = BandAdmin(Band, self.site)
155.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
156.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
157. 
158.         # Using `fieldsets`.
159.         class BandAdmin(ModelAdmin):
160.             fieldsets = [(None, {'fields': ['name']})]
161. 
162.         ma = BandAdmin(Band, self.site)
163.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
164.         self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])
165. 
166.         # Using `exclude`.
167.         class BandAdmin(ModelAdmin):
168.             exclude = ['bio']
169. 
170.         ma = BandAdmin(Band, self.site)
171.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
172. 
173.         # You can also pass a tuple to `exclude`.
174.         class BandAdmin(ModelAdmin):
175.             exclude = ('bio',)
176. 
177.         ma = BandAdmin(Band, self.site)
178.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
179. 
180.         # Using `fields` and `exclude`.
181.         class BandAdmin(ModelAdmin):
182.             fields = ['name', 'bio']
183.             exclude = ['bio']
184. 
185.         ma = BandAdmin(Band, self.site)
186.         self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
187. 
188.     def test_custom_form_meta_exclude_with_readonly(self):
189.         """
190.         The custom ModelForm's `Meta.exclude` is respected when used in
191.         conjunction with `ModelAdmin.readonly_fields` and when no
192.         `ModelAdmin.exclude` is defined (#14496).
193.         """
194.         # With ModelAdmin
195.         class AdminBandForm(forms.ModelForm):
196.             class Meta:
197.                 model = Band
198.                 exclude = ['bio']
199. 
200.         class BandAdmin(ModelAdmin):
201.             readonly_fields = ['name']
202.             form = AdminBandForm
203. 
204.         ma = BandAdmin(Band, self.site)
205.         self.assertEqual(list(ma.get_form(request).base_fields), ['sign_date'])
206. 
207.         # With InlineModelAdmin
208.         class AdminConcertForm(forms.ModelForm):
209.             class Meta:
210.                 model = Concert
211.                 exclude = ['day']
212. 
213.         class ConcertInline(TabularInline):
214.             readonly_fields = ['transport']
215.             form = AdminConcertForm
216.             fk_name = 'main_band'
217.             model = Concert
218. 
219.         class BandAdmin(ModelAdmin):
220.             inlines = [ConcertInline]
221. 
222.         ma = BandAdmin(Band, self.site)
223.         self.assertEqual(
224.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
225.             ['main_band', 'opening_band', 'id', 'DELETE'])
226. 
227.     def test_custom_formfield_override_readonly(self):
228.         class AdminBandForm(forms.ModelForm):
229.             name = forms.CharField()
230. 
231.             class Meta:
232.                 exclude = ()
233.                 model = Band
234. 
235.         class BandAdmin(ModelAdmin):
236.             form = AdminBandForm
237.             readonly_fields = ['name']
238. 
239.         ma = BandAdmin(Band, self.site)
240. 
241.         # `name` shouldn't appear in base_fields because it's part of
242.         # readonly_fields.
243.         self.assertEqual(
244.             list(ma.get_form(request).base_fields),
245.             ['bio', 'sign_date']
246.         )
247.         # But it should appear in get_fields()/fieldsets() so it can be
248.         # displayed as read-only.
249.         self.assertEqual(
250.             list(ma.get_fields(request)),
251.             ['bio', 'sign_date', 'name']
252.         )
253.         self.assertEqual(
254.             list(ma.get_fieldsets(request)),
255.             [(None, {'fields': ['bio', 'sign_date', 'name']})]
256.         )
257. 
258.     def test_custom_form_meta_exclude(self):
259.         """
260.         The custom ModelForm's `Meta.exclude` is overridden if
261.         `ModelAdmin.exclude` or `InlineModelAdmin.exclude` are defined (#14496).
262.         """
263.         # With ModelAdmin
264.         class AdminBandForm(forms.ModelForm):
265.             class Meta:
266.                 model = Band
267.                 exclude = ['bio']
268. 
269.         class BandAdmin(ModelAdmin):
270.             exclude = ['name']
271.             form = AdminBandForm
272. 
273.         ma = BandAdmin(Band, self.site)
274.         self.assertEqual(list(ma.get_form(request).base_fields), ['bio', 'sign_date'])
275. 
276.         # With InlineModelAdmin
277.         class AdminConcertForm(forms.ModelForm):
278.             class Meta:
279.                 model = Concert
280.                 exclude = ['day']
281. 
282.         class ConcertInline(TabularInline):
283.             exclude = ['transport']
284.             form = AdminConcertForm
285.             fk_name = 'main_band'
286.             model = Concert
287. 
288.         class BandAdmin(ModelAdmin):
289.             inlines = [ConcertInline]
290. 
291.         ma = BandAdmin(Band, self.site)
292.         self.assertEqual(
293.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
294.             ['main_band', 'opening_band', 'day', 'id', 'DELETE']
295.         )
296. 
297.     def test_overriding_get_exclude(self):
298.         class BandAdmin(ModelAdmin):
299.             def get_exclude(self, request, obj=None):
300.                 return ['name']
301. 
302.         self.assertEqual(
303.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
304.             ['bio', 'sign_date']
305.         )
306. 
307.     def test_get_exclude_overrides_exclude(self):
308.         class BandAdmin(ModelAdmin):
309.             exclude = ['bio']
310. 
311.             def get_exclude(self, request, obj=None):
312.                 return ['name']
313. 
314.         self.assertEqual(
315.             list(BandAdmin(Band, self.site).get_form(request).base_fields),
316.             ['bio', 'sign_date']
317.         )
318. 
319.     def test_get_exclude_takes_obj(self):
320.         class BandAdmin(ModelAdmin):
321.             def get_exclude(self, request, obj=None):
322.                 if obj:
323.                     return ['sign_date']
324.                 return ['name']
325. 
326.         self.assertEqual(
327.             list(BandAdmin(Band, self.site).get_form(request, self.band).base_fields),
328.             ['name', 'bio']
329.         )
330. 
331.     def test_custom_form_validation(self):
332.         # If a form is specified, it should use it allowing custom validation
333.         # to work properly. This won't break any of the admin widgets or media.
334.         class AdminBandForm(forms.ModelForm):
335.             delete = forms.BooleanField()
336. 
337.         class BandAdmin(ModelAdmin):
338.             form = AdminBandForm
339. 
340.         ma = BandAdmin(Band, self.site)
341.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date', 'delete'])
342.         self.assertEqual(type(ma.get_form(request).base_fields['sign_date'].widget), AdminDateWidget)
343. 
344.     def test_form_exclude_kwarg_override(self):
345.         """
346.         The `exclude` kwarg passed to `ModelAdmin.get_form()` overrides all
347.         other declarations (#8999).
348.         """
349.         class AdminBandForm(forms.ModelForm):
350.             class Meta:
351.                 model = Band
352.                 exclude = ['name']
353. 
354.         class BandAdmin(ModelAdmin):
355.             exclude = ['sign_date']
356.             form = AdminBandForm
357. 
358.             def get_form(self, request, obj=None, **kwargs):
359.                 kwargs['exclude'] = ['bio']
360.                 return super().get_form(request, obj, **kwargs)
361. 
362.         ma = BandAdmin(Band, self.site)
363.         self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])
364. 
365.     def test_formset_exclude_kwarg_override(self):
366.         """
367.         The `exclude` kwarg passed to `InlineModelAdmin.get_formset()`
368.         overrides all other declarations (#8999).
369.         """
370.         class AdminConcertForm(forms.ModelForm):
371.             class Meta:
372.                 model = Concert
373.                 exclude = ['day']
374. 
375.         class ConcertInline(TabularInline):
376.             exclude = ['transport']
377.             form = AdminConcertForm
378.             fk_name = 'main_band'
379.             model = Concert
380. 
381.             def get_formset(self, request, obj=None, **kwargs):
382.                 kwargs['exclude'] = ['opening_band']
383.                 return super().get_formset(request, obj, **kwargs)
384. 
385.         class BandAdmin(ModelAdmin):
386.             inlines = [ConcertInline]
387. 
388.         ma = BandAdmin(Band, self.site)
389.         self.assertEqual(
390.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
391.             ['main_band', 'day', 'transport', 'id', 'DELETE']
392.         )
393. 
394.     def test_formset_overriding_get_exclude_with_form_fields(self):
395.         class AdminConcertForm(forms.ModelForm):
396.             class Meta:
397.                 model = Concert
398.                 fields = ['main_band', 'opening_band', 'day', 'transport']
399. 
400.         class ConcertInline(TabularInline):
401.             form = AdminConcertForm
402.             fk_name = 'main_band'
403.             model = Concert
404. 
405.             def get_exclude(self, request, obj=None):
406.                 return ['opening_band']
407. 
408.         class BandAdmin(ModelAdmin):
409.             inlines = [ConcertInline]
410. 
411.         ma = BandAdmin(Band, self.site)
412.         self.assertEqual(
413.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
414.             ['main_band', 'day', 'transport', 'id', 'DELETE']
415.         )
416. 
417.     def test_formset_overriding_get_exclude_with_form_exclude(self):
418.         class AdminConcertForm(forms.ModelForm):
419.             class Meta:
420.                 model = Concert
421.                 exclude = ['day']
422. 
423.         class ConcertInline(TabularInline):
424.             form = AdminConcertForm
425.             fk_name = 'main_band'
426.             model = Concert
427. 
428.             def get_exclude(self, request, obj=None):
429.                 return ['opening_band']
430. 
431.         class BandAdmin(ModelAdmin):
432.             inlines = [ConcertInline]
433. 
434.         ma = BandAdmin(Band, self.site)
435.         self.assertEqual(
436.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
437.             ['main_band', 'day', 'transport', 'id', 'DELETE']
438.         )
439. 
440.     def test_raw_id_fields_widget_override(self):
441.         """
442.         The autocomplete_fields, raw_id_fields, and radio_fields widgets may
443.         overridden by specifying a widget in get_formset().
444.         """
445.         class ConcertInline(TabularInline):
446.             model = Concert
447.             fk_name = 'main_band'
448.             raw_id_fields = ('opening_band',)
449. 
450.             def get_formset(self, request, obj=None, **kwargs):
451.                 kwargs['widgets'] = {'opening_band': Select}
452.                 return super().get_formset(request, obj, **kwargs)
453. 
454.         class BandAdmin(ModelAdmin):
455.             inlines = [ConcertInline]
456. 
457.         ma = BandAdmin(Band, self.site)
458.         band_widget = list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields['opening_band'].widget
459.         # Without the override this would be ForeignKeyRawIdWidget.
460.         self.assertIsInstance(band_widget, Select)
461. 
462.     def test_queryset_override(self):
463.         # If the queryset of a ModelChoiceField in a custom form is overridden,
464.         # RelatedFieldWidgetWrapper doesn't mess that up.
465.         band2 = Band.objects.create(name='The Beatles', bio='', sign_date=date(1962, 1, 1))
466. 
467.         ma = ModelAdmin(Concert, self.site)
468.         form = ma.get_form(request)()
469. 
470.         self.assertHTMLEqual(
471.             str(form["main_band"]),
472.             '<div class="related-widget-wrapper">'
473.             '<select name="main_band" id="id_main_band" required>'
474.             '<option value="" selected>---------</option>'
475.             '<option value="%d">The Beatles</option>'
476.             '<option value="%d">The Doors</option>'
477.             '</select></div>' % (band2.id, self.band.id)
478.         )
479. 
480.         class AdminConcertForm(forms.ModelForm):
481.             def __init__(self, *args, **kwargs):
482.                 super().__init__(*args, **kwargs)
483.                 self.fields["main_band"].queryset = Band.objects.filter(name='The Doors')
484. 
485.         class ConcertAdminWithForm(ModelAdmin):
486.             form = AdminConcertForm
487. 
488.         ma = ConcertAdminWithForm(Concert, self.site)
489.         form = ma.get_form(request)()
490. 
491.         self.assertHTMLEqual(
492.             str(form["main_band"]),
493.             '<div class="related-widget-wrapper">'
494.             '<select name="main_band" id="id_main_band" required>'
495.             '<option value="" selected>---------</option>'
496.             '<option value="%d">The Doors</option>'
497.             '</select></div>' % self.band.id
498.         )
499. 
500.     def test_regression_for_ticket_15820(self):
501.         """
502.         `obj` is passed from `InlineModelAdmin.get_fieldsets()` to
503.         `InlineModelAdmin.get_formset()`.
504.         """
505.         class CustomConcertForm(forms.ModelForm):
506.             class Meta:
507.                 model = Concert
508.                 fields = ['day']
509. 
510.         class ConcertInline(TabularInline):
511.             model = Concert
512.             fk_name = 'main_band'
513. 
514.             def get_formset(self, request, obj=None, **kwargs):
515.                 if obj:
516.                     kwargs['form'] = CustomConcertForm
517.                 return super().get_formset(request, obj, **kwargs)
518. 
519.         class BandAdmin(ModelAdmin):
520.             inlines = [ConcertInline]
521. 
522.         Concert.objects.create(main_band=self.band, opening_band=self.band, day=1)
523.         ma = BandAdmin(Band, self.site)
524.         inline_instances = ma.get_inline_instances(request)
525.         fieldsets = list(inline_instances[0].get_fieldsets(request))
526.         self.assertEqual(fieldsets[0][1]['fields'], ['main_band', 'opening_band', 'day', 'transport'])
527.         fieldsets = list(inline_instances[0].get_fieldsets(request, inline_instances[0].model))
528.         self.assertEqual(fieldsets[0][1]['fields'], ['day'])
529. 
530.     # radio_fields behavior ###########################################
531. 
532.     def test_default_foreign_key_widget(self):
533.         # First, without any radio_fields specified, the widgets for ForeignKey
534.         # and fields with choices specified ought to be a basic Select widget.
535.         # ForeignKey widgets in the admin are wrapped with RelatedFieldWidgetWrapper so
536.         # they need to be handled properly when type checking. For Select fields, all of
537.         # the choices lists have a first entry of dashes.
538.         cma = ModelAdmin(Concert, self.site)
539.         cmafa = cma.get_form(request)
540. 
541.         self.assertEqual(type(cmafa.base_fields['main_band'].widget.widget), Select)
542.         self.assertEqual(
543.             list(cmafa.base_fields['main_band'].widget.choices),
544.             [('', '---------'), (self.band.id, 'The Doors')])
545. 
546.         self.assertEqual(type(cmafa.base_fields['opening_band'].widget.widget), Select)
547.         self.assertEqual(
548.             list(cmafa.base_fields['opening_band'].widget.choices),
549.             [('', '---------'), (self.band.id, 'The Doors')]
550.         )
551.         self.assertEqual(type(cmafa.base_fields['day'].widget), Select)
552.         self.assertEqual(
553.             list(cmafa.base_fields['day'].widget.choices),
554.             [('', '---------'), (1, 'Fri'), (2, 'Sat')]
555.         )
556.         self.assertEqual(type(cmafa.base_fields['transport'].widget), Select)
557.         self.assertEqual(
558.             list(cmafa.base_fields['transport'].widget.choices),
559.             [('', '---------'), (1, 'Plane'), (2, 'Train'), (3, 'Bus')])
560. 
561.     def test_foreign_key_as_radio_field(self):
562.         # Now specify all the fields as radio_fields.  Widgets should now be
563.         # RadioSelect, and the choices list should have a first entry of 'None' if
564.         # blank=True for the model field.  Finally, the widget should have the
565.         # 'radiolist' attr, and 'inline' as well if the field is specified HORIZONTAL.
566.         class ConcertAdmin(ModelAdmin):
567.             radio_fields = {
568.                 'main_band': HORIZONTAL,
569.                 'opening_band': VERTICAL,
570.                 'day': VERTICAL,
571.                 'transport': HORIZONTAL,
572.             }
573. 
574.         cma = ConcertAdmin(Concert, self.site)
575.         cmafa = cma.get_form(request)
576. 
577.         self.assertEqual(type(cmafa.base_fields['main_band'].widget.widget), AdminRadioSelect)
578.         self.assertEqual(cmafa.base_fields['main_band'].widget.attrs, {'class': 'radiolist inline'})
579.         self.assertEqual(
580.             list(cmafa.base_fields['main_band'].widget.choices),
581.             [(self.band.id, 'The Doors')]
582.         )
583. 
584.         self.assertEqual(type(cmafa.base_fields['opening_band'].widget.widget), AdminRadioSelect)
585.         self.assertEqual(cmafa.base_fields['opening_band'].widget.attrs, {'class': 'radiolist'})
586.         self.assertEqual(
587.             list(cmafa.base_fields['opening_band'].widget.choices),
588.             [('', 'None'), (self.band.id, 'The Doors')]
589.         )
590.         self.assertEqual(type(cmafa.base_fields['day'].widget), AdminRadioSelect)
591.         self.assertEqual(cmafa.base_fields['day'].widget.attrs, {'class': 'radiolist'})
592.         self.assertEqual(list(cmafa.base_fields['day'].widget.choices), [(1, 'Fri'), (2, 'Sat')])
593. 
594.         self.assertEqual(type(cmafa.base_fields['transport'].widget), AdminRadioSelect)
595.         self.assertEqual(cmafa.base_fields['transport'].widget.attrs, {'class': 'radiolist inline'})
596.         self.assertEqual(
597.             list(cmafa.base_fields['transport'].widget.choices),
598.             [('', 'None'), (1, 'Plane'), (2, 'Train'), (3, 'Bus')]
599.         )
600. 
601.         class AdminConcertForm(forms.ModelForm):
602.             class Meta:
603.                 model = Concert
604.                 exclude = ('transport',)
605. 
606.         class ConcertAdmin(ModelAdmin):
607.             form = AdminConcertForm
608. 
609.         ma = ConcertAdmin(Concert, self.site)
610.         self.assertEqual(list(ma.get_form(request).base_fields), ['main_band', 'opening_band', 'day'])
611. 
612.         class AdminConcertForm(forms.ModelForm):
613.             extra = forms.CharField()
614. 
615.             class Meta:
616.                 model = Concert
617.                 fields = ['extra', 'transport']
618. 
619.         class ConcertAdmin(ModelAdmin):
620.             form = AdminConcertForm
621. 
622.         ma = ConcertAdmin(Concert, self.site)
623.         self.assertEqual(list(ma.get_form(request).base_fields), ['extra', 'transport'])
624. 
625.         class ConcertInline(TabularInline):
626.             form = AdminConcertForm
627.             model = Concert
628.             fk_name = 'main_band'
629.             can_delete = True
630. 
631.         class BandAdmin(ModelAdmin):
632.             inlines = [ConcertInline]
633. 
634.         ma = BandAdmin(Band, self.site)
635.         self.assertEqual(
636.             list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
637.             ['extra', 'transport', 'id', 'DELETE', 'main_band']
638.         )
639. 
640.     def test_log_actions(self):
641.         ma = ModelAdmin(Band, self.site)
642.         mock_request = MockRequest()
643.         mock_request.user = User.objects.create(username='bill')
644.         content_type = get_content_type_for_model(self.band)
645.         tests = (
646.             (ma.log_addition, ADDITION, {'added': {}}),
647.             (ma.log_change, CHANGE, {'changed': {'fields': ['name', 'bio']}}),
648.             (ma.log_deletion, DELETION, str(self.band)),
649.         )
650.         for method, flag, message in tests:
651.             with self.subTest(name=method.__name__):
652.                 created = method(mock_request, self.band, message)
653.                 fetched = LogEntry.objects.filter(action_flag=flag).latest('id')
654.                 self.assertEqual(created, fetched)
655.                 self.assertEqual(fetched.action_flag, flag)
656.                 self.assertEqual(fetched.content_type, content_type)
657.                 self.assertEqual(fetched.object_id, str(self.band.pk))
658.                 self.assertEqual(fetched.user, mock_request.user)
659.                 if flag == DELETION:
660.                     self.assertEqual(fetched.change_message, '')
661.                     self.assertEqual(fetched.object_repr, message)
662.                 else:
663.                     self.assertEqual(fetched.change_message, str(message))
664.                     self.assertEqual(fetched.object_repr, str(self.band))
665. 
666.     def test_get_autocomplete_fields(self):
667.         class NameAdmin(ModelAdmin):
668.             search_fields = ['name']
669. 
670.         class SongAdmin(ModelAdmin):
671.             autocomplete_fields = ['featuring']
672.             fields = ['featuring', 'band']
673. 
674.         class OtherSongAdmin(SongAdmin):
675.             def get_autocomplete_fields(self, request):
676.                 return ['band']
677. 
678.         self.site.register(Band, NameAdmin)
679.         try:
680.             # Uses autocomplete_fields if not overridden.
681.             model_admin = SongAdmin(Song, self.site)
682.             form = model_admin.get_form(request)()
683.             self.assertIsInstance(form.fields['featuring'].widget.widget, AutocompleteSelectMultiple)
684.             # Uses overridden get_autocomplete_fields
685.             model_admin = OtherSongAdmin(Song, self.site)
686.             form = model_admin.get_form(request)()
687.             self.assertIsInstance(form.fields['band'].widget.widget, AutocompleteSelect)
688.         finally:
689.             self.site.unregister(Band)
690. 
691.     def test_get_deleted_objects(self):
692.         mock_request = MockRequest()
693.         mock_request.user = User.objects.create_superuser(username='bob', email='bob@test.com', password='test')
694.         self.site.register(Band, ModelAdmin)
695.         ma = self.site._registry[Band]
696.         deletable_objects, model_count, perms_needed, protected = ma.get_deleted_objects([self.band], request)
697.         self.assertEqual(deletable_objects, ['Band: The Doors'])
698.         self.assertEqual(model_count, {'bands': 1})
699.         self.assertEqual(perms_needed, set())
700.         self.assertEqual(protected, [])
701. 
702.     def test_get_deleted_objects_with_custom_has_delete_permission(self):
703.         """
704.         ModelAdmin.get_deleted_objects() uses ModelAdmin.has_delete_permission()
705.         for permissions checking.
706.         """
707.         mock_request = MockRequest()
708.         mock_request.user = User.objects.create_superuser(username='bob', email='bob@test.com', password='test')
709. 
710.         class TestModelAdmin(ModelAdmin):
711.             def has_delete_permission(self, request, obj=None):
712.                 return False
713. 
714.         self.site.register(Band, TestModelAdmin)
715.         ma = self.site._registry[Band]
716.         deletable_objects, model_count, perms_needed, protected = ma.get_deleted_objects([self.band], request)
717.         self.assertEqual(deletable_objects, ['Band: The Doors'])
718.         self.assertEqual(model_count, {'bands': 1})
719.         self.assertEqual(perms_needed, {'band'})
720.         self.assertEqual(protected, [])

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 19:10:45,173 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find test cases related to overriding widgets for `ManyToManyField` in the Django admin. The provided context contains some tests from `tests/modeladmin/tests.py` and `tests/admin_views/tests.py`, but they are not directly testing the scenario described in the bug report. Specifically, I'm looking for tests that show how to override `formfield_for_manytomany` or `formfield_for_foreignkey` to provide a custom widget. The patch mentions `AutocompleteSelectMultiple`, `ManyToManyRawIdWidget`, and `FilteredSelectMultiple`, which are all admin widgets. Therefore, the test files for admin widgets are highly relevant. I will request `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py` to find examples of how these widgets are tested and customized." query='Please provide the full content of `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py`.' extra_requirements='' purpose="I need to find test cases that demonstrate how to customize or override admin widgets for `ManyToManyField`, which will serve as relevant examples for the user's issue."
2025-12-23 19:10:45,175 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py`.
2025-12-23 19:10:45,175 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 19:10:45,176 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 19:10:45,176 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 19:10:45,177 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py`.
Purpose: I need to find test cases that demonstrate how to customize or override admin widgets for `ManyToManyField`, which will serve as relevant examples for the user's issue.
2025-12-23 19:10:47,754 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I will read the full content of `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py` to find test cases related to customizing admin widgets for `ManyToManyField`. This will help identify relevant examples for the user's problem." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/admin_widgets/test_autocomplete_widget.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2121, 'candidates_token_count': 110, 'total_token_count': 2308, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2121}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 110}], 'thoughts_token_count': 77, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.06560480377890847, 'model_name': 'gemini-2.5-pro'} id='run--5df561a4-5752-43c7-b0fa-6394f394f6cc-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_widgets/tests.py'}, 'id': 'b10c1585-694e-4ec5-a29a-c9bcb36876c1', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_widgets/test_autocomplete_widget.py'}, 'id': '2b0db0a2-8fe1-4b96-a068-0962954640c2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2121, 'output_tokens': 110, 'total_tokens': 2308, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 77}}
2025-12-23 19:10:51,684 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the full content of `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py`. These files contain various test cases that demonstrate the usage and customization of admin widgets, including those for `ManyToManyField` relationships. I will now proceed to analyze these tests to identify the most relevant examples that can help address the user's issue." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 13086, 'candidates_token_count': 83, 'total_token_count': 13407, 'cached_content_token_count': 1846, 'prompt_tokens_details': [{'modality': 1, 'token_count': 13086}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1846}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 83}], 'thoughts_token_count': 238}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3064838087702372, 'model_name': 'gemini-2.5-pro'} id='run--9cafdd69-8d82-4492-9145-a3a5ca242da3-0' usage_metadata={'input_tokens': 13086, 'output_tokens': 83, 'total_tokens': 13407, 'input_token_details': {'cache_read': 1846}, 'output_token_details': {'reasoning': 238}}
2025-12-23 19:10:51,685 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases that demonstrate how to customize or override admin widgets for `ManyToManyField`, which will serve as relevant examples for the user's issue.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_widgets/test_autocomplete_widget.py
Line number range: 1 - 143
Content:
1. from django import forms
2. from django.contrib import admin
3. from django.contrib.admin.widgets import AutocompleteSelect
4. from django.forms import ModelChoiceField
5. from django.test import TestCase, override_settings
6. from django.utils import translation
7. 
8. from .models import Album, Band
9. 
10. 
11. class AlbumForm(forms.ModelForm):
12.     class Meta:
13.         model = Album
14.         fields = ['band', 'featuring']
15.         widgets = {
16.             'band': AutocompleteSelect(
17.                 Album._meta.get_field('band').remote_field,
18.                 admin.site,
19.                 attrs={'class': 'my-class'},
20.             ),
21.             'featuring': AutocompleteSelect(
22.                 Album._meta.get_field('featuring').remote_field,
23.                 admin.site,
24.             )
25.         }
26. 
27. 
28. class NotRequiredBandForm(forms.Form):
29.     band = ModelChoiceField(
30.         queryset=Album.objects.all(),
31.         widget=AutocompleteSelect(Album._meta.get_field('band').remote_field, admin.site),
32.         required=False,
33.     )
34. 
35. 
36. class RequiredBandForm(forms.Form):
37.     band = ModelChoiceField(
38.         queryset=Album.objects.all(),
39.         widget=AutocompleteSelect(Album._meta.get_field('band').remote_field, admin.site),
40.         required=True,
41.     )
42. 
43. 
44. @override_settings(ROOT_URLCONF='admin_widgets.urls')
45. class AutocompleteMixinTests(TestCase):
46.     empty_option = '<option value=""></option>'
47.     maxDiff = 1000
48. 
49.     def test_build_attrs(self):
50.         form = AlbumForm()
51.         attrs = form['band'].field.widget.get_context(name='my_field', value=None, attrs={})['widget']['attrs']
52.         self.assertEqual(attrs, {
53.             'class': 'my-class admin-autocomplete',
54.             'data-ajax--cache': 'true',
55.             'data-ajax--delay': 250,
56.             'data-ajax--type': 'GET',
57.             'data-ajax--url': '/admin_widgets/band/autocomplete/',
58.             'data-theme': 'admin-autocomplete',
59.             'data-allow-clear': 'false',
60.             'data-placeholder': ''
61.         })
62. 
63.     def test_build_attrs_no_custom_class(self):
64.         form = AlbumForm()
65.         attrs = form['featuring'].field.widget.get_context(name='name', value=None, attrs={})['widget']['attrs']
66.         self.assertEqual(attrs['class'], 'admin-autocomplete')
67. 
68.     def test_build_attrs_not_required_field(self):
69.         form = NotRequiredBandForm()
70.         attrs = form['band'].field.widget.build_attrs({})
71.         self.assertJSONEqual(attrs['data-allow-clear'], True)
72. 
73.     def test_build_attrs_required_field(self):
74.         form = RequiredBandForm()
75.         attrs = form['band'].field.widget.build_attrs({})
76.         self.assertJSONEqual(attrs['data-allow-clear'], False)
77. 
78.     def test_get_url(self):
79.         rel = Album._meta.get_field('band').remote_field
80.         w = AutocompleteSelect(rel, admin.site)
81.         url = w.get_url()
82.         self.assertEqual(url, '/admin_widgets/band/autocomplete/')
83. 
84.     def test_render_options(self):
85.         beatles = Band.objects.create(name='The Beatles', style='rock')
86.         who = Band.objects.create(name='The Who', style='rock')
87.         # With 'band', a ForeignKey.
88.         form = AlbumForm(initial={'band': beatles.pk})
89.         output = form.as_table()
90.         selected_option = '<option value="%s" selected>The Beatles</option>' % beatles.pk
91.         option = '<option value="%s">The Who</option>' % who.pk
92.         self.assertIn(selected_option, output)
93.         self.assertNotIn(option, output)
94.         # With 'featuring', a ManyToManyField.
95.         form = AlbumForm(initial={'featuring': [beatles.pk, who.pk]})
96.         output = form.as_table()
97.         selected_option = '<option value="%s" selected>The Beatles</option>' % beatles.pk
98.         option = '<option value="%s" selected>The Who</option>' % who.pk
99.         self.assertIn(selected_option, output)
100.         self.assertIn(option, output)
101. 
102.     def test_render_options_required_field(self):
103.         """Empty option is present if the field isn't required."""
104.         form = NotRequiredBandForm()
105.         output = form.as_table()
106.         self.assertIn(self.empty_option, output)
107. 
108.     def test_render_options_not_required_field(self):
109.         """Empty option isn't present if the field isn't required."""
110.         form = RequiredBandForm()
111.         output = form.as_table()
112.         self.assertNotIn(self.empty_option, output)
113. 
114.     def test_media(self):
115.         rel = Album._meta.get_field('band').remote_field
116.         base_files = (
117.             'admin/js/vendor/jquery/jquery.min.js',
118.             'admin/js/vendor/select2/select2.full.min.js',
119.             # Language file is inserted here.
120.             'admin/js/jquery.init.js',
121.             'admin/js/autocomplete.js',
122.         )
123.         languages = (
124.             ('de', 'de'),
125.             # Language with code 00 does not exist.
126.             ('00', None),
127.             # Language files are case sensitive.
128.             ('sr-cyrl', 'sr-Cyrl'),
129.             ('zh-hans', 'zh-CN'),
130.             ('zh-hant', 'zh-TW'),
131.         )
132.         for lang, select_lang in languages:
133.             with self.subTest(lang=lang):
134.                 if select_lang:
135.                     expected_files = (
136.                         base_files[:2] +
137.                         (('admin/js/vendor/select2/i18n/%s.js' % select_lang),) +
138.                         base_files[2:]
139.                     )
140.                 else:
141.                     expected_files = base_files
142.                 with translation.override(lang):
143.                     self.assertEqual(AutocompleteSelect(rel, admin.site).media._js, list(expected_files))


File: tests/admin_widgets/tests.py
Line number range: 1 - 500
Content:
1. import gettext
2. import os
3. import re
4. from datetime import datetime, timedelta
5. from importlib import import_module
6. 
7. import pytz
8. 
9. from django import forms
10. from django.conf import settings
11. from django.contrib import admin
12. from django.contrib.admin import widgets
13. from django.contrib.admin.tests import AdminSeleniumTestCase
14. from django.contrib.auth.models import User
15. from django.core.files.storage import default_storage
16. from django.core.files.uploadedfile import SimpleUploadedFile
17. from django.db.models import CharField, DateField, DateTimeField, UUIDField
18. from django.test import SimpleTestCase, TestCase, override_settings
19. from django.urls import reverse
20. from django.utils import translation
21. 
22. from .models import (
23.     Advisor, Album, Band, Bee, Car, Company, Event, Honeycomb, Individual,
24.     Inventory, Member, MyFileField, Profile, School, Student,
25. )
26. from .widgetadmin import site as widget_admin_site
27. 
28. 
29. class TestDataMixin:
30. 
31.     @classmethod
32.     def setUpTestData(cls):
33.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email=None)
34.         cls.u2 = User.objects.create_user(username='testser', password='secret')
35.         Car.objects.create(owner=cls.superuser, make='Volkswagen', model='Passat')
36.         Car.objects.create(owner=cls.u2, make='BMW', model='M3')
37. 
38. 
39. class AdminFormfieldForDBFieldTests(SimpleTestCase):
40.     """
41.     Tests for correct behavior of ModelAdmin.formfield_for_dbfield
42.     """
43. 
44.     def assertFormfield(self, model, fieldname, widgetclass, **admin_overrides):
45.         """
46.         Helper to call formfield_for_dbfield for a given model and field name
47.         and verify that the returned formfield is appropriate.
48.         """
49.         # Override any settings on the model admin
50.         class MyModelAdmin(admin.ModelAdmin):
51.             pass
52.         for k in admin_overrides:
53.             setattr(MyModelAdmin, k, admin_overrides[k])
54. 
55.         # Construct the admin, and ask it for a formfield
56.         ma = MyModelAdmin(model, admin.site)
57.         ff = ma.formfield_for_dbfield(model._meta.get_field(fieldname), request=None)
58. 
59.         # "unwrap" the widget wrapper, if needed
60.         if isinstance(ff.widget, widgets.RelatedFieldWidgetWrapper):
61.             widget = ff.widget.widget
62.         else:
63.             widget = ff.widget
64. 
65.         self.assertIsInstance(widget, widgetclass)
66. 
67.         # Return the formfield so that other tests can continue
68.         return ff
69. 
70.     def test_DateField(self):
71.         self.assertFormfield(Event, 'start_date', widgets.AdminDateWidget)
72. 
73.     def test_DateTimeField(self):
74.         self.assertFormfield(Member, 'birthdate', widgets.AdminSplitDateTime)
75. 
76.     def test_TimeField(self):
77.         self.assertFormfield(Event, 'start_time', widgets.AdminTimeWidget)
78. 
79.     def test_TextField(self):
80.         self.assertFormfield(Event, 'description', widgets.AdminTextareaWidget)
81. 
82.     def test_URLField(self):
83.         self.assertFormfield(Event, 'link', widgets.AdminURLFieldWidget)
84. 
85.     def test_IntegerField(self):
86.         self.assertFormfield(Event, 'min_age', widgets.AdminIntegerFieldWidget)
87. 
88.     def test_CharField(self):
89.         self.assertFormfield(Member, 'name', widgets.AdminTextInputWidget)
90. 
91.     def test_EmailField(self):
92.         self.assertFormfield(Member, 'email', widgets.AdminEmailInputWidget)
93. 
94.     def test_FileField(self):
95.         self.assertFormfield(Album, 'cover_art', widgets.AdminFileWidget)
96. 
97.     def test_ForeignKey(self):
98.         self.assertFormfield(Event, 'main_band', forms.Select)
99. 
100.     def test_raw_id_ForeignKey(self):
101.         self.assertFormfield(Event, 'main_band', widgets.ForeignKeyRawIdWidget,
102.                              raw_id_fields=['main_band'])
103. 
104.     def test_radio_fields_ForeignKey(self):
105.         ff = self.assertFormfield(Event, 'main_band', widgets.AdminRadioSelect,
106.                                   radio_fields={'main_band': admin.VERTICAL})
107.         self.assertIsNone(ff.empty_label)
108. 
109.     def test_many_to_many(self):
110.         self.assertFormfield(Band, 'members', forms.SelectMultiple)
111. 
112.     def test_raw_id_many_to_many(self):
113.         self.assertFormfield(Band, 'members', widgets.ManyToManyRawIdWidget,
114.                              raw_id_fields=['members'])
115. 
116.     def test_filtered_many_to_many(self):
117.         self.assertFormfield(Band, 'members', widgets.FilteredSelectMultiple,
118.                              filter_vertical=['members'])
119. 
120.     def test_formfield_overrides(self):
121.         self.assertFormfield(Event, 'start_date', forms.TextInput,
122.                              formfield_overrides={DateField: {'widget': forms.TextInput}})
123. 
124.     def test_formfield_overrides_widget_instances(self):
125.         """
126.         Widget instances in formfield_overrides are not shared between
127.         different fields. (#19423)
128.         """
129.         class BandAdmin(admin.ModelAdmin):
130.             formfield_overrides = {
131.                 CharField: {'widget': forms.TextInput(attrs={'size': '10'})}
132.             }
133.         ma = BandAdmin(Band, admin.site)
134.         f1 = ma.formfield_for_dbfield(Band._meta.get_field('name'), request=None)
135.         f2 = ma.formfield_for_dbfield(Band._meta.get_field('style'), request=None)
136.         self.assertNotEqual(f1.widget, f2.widget)
137.         self.assertEqual(f1.widget.attrs['maxlength'], '100')
138.         self.assertEqual(f2.widget.attrs['maxlength'], '20')
139.         self.assertEqual(f2.widget.attrs['size'], '10')
140. 
141.     def test_formfield_overrides_for_datetime_field(self):
142.         """
143.         Overriding the widget for DateTimeField doesn't overrides the default
144.         form_class for that field (#26449).
145.         """
146.         class MemberAdmin(admin.ModelAdmin):
147.             formfield_overrides = {DateTimeField: {'widget': widgets.AdminSplitDateTime}}
148.         ma = MemberAdmin(Member, admin.site)
149.         f1 = ma.formfield_for_dbfield(Member._meta.get_field('birthdate'), request=None)
150.         self.assertIsInstance(f1.widget, widgets.AdminSplitDateTime)
151.         self.assertIsInstance(f1, forms.SplitDateTimeField)
152. 
153.     def test_formfield_overrides_for_custom_field(self):
154.         """
155.         formfield_overrides works for a custom field class.
156.         """
157.         class AlbumAdmin(admin.ModelAdmin):
158.             formfield_overrides = {MyFileField: {'widget': forms.TextInput()}}
159.         ma = AlbumAdmin(Member, admin.site)
160.         f1 = ma.formfield_for_dbfield(Album._meta.get_field('backside_art'), request=None)
161.         self.assertIsInstance(f1.widget, forms.TextInput)
162. 
163.     def test_field_with_choices(self):
164.         self.assertFormfield(Member, 'gender', forms.Select)
165. 
166.     def test_choices_with_radio_fields(self):
167.         self.assertFormfield(Member, 'gender', widgets.AdminRadioSelect,
168.                              radio_fields={'gender': admin.VERTICAL})
169. 
170.     def test_inheritance(self):
171.         self.assertFormfield(Album, 'backside_art', widgets.AdminFileWidget)
172. 
173.     def test_m2m_widgets(self):
174.         """m2m fields help text as it applies to admin app (#9321)."""
175.         class AdvisorAdmin(admin.ModelAdmin):
176.             filter_vertical = ['companies']
177. 
178.         self.assertFormfield(Advisor, 'companies', widgets.FilteredSelectMultiple,
179.                              filter_vertical=['companies'])
180.         ma = AdvisorAdmin(Advisor, admin.site)
181.         f = ma.formfield_for_dbfield(Advisor._meta.get_field('companies'), request=None)
182.         self.assertEqual(
183.             f.help_text,
184.             'Hold down “Control”, or “Command” on a Mac, to select more than one.'
185.         )
186. 
187. 
188. @override_settings(ROOT_URLCONF='admin_widgets.urls')
189. class AdminFormfieldForDBFieldWithRequestTests(TestDataMixin, TestCase):
190. 
191.     def test_filter_choices_by_request_user(self):
192.         """
193.         Ensure the user can only see their own cars in the foreign key dropdown.
194.         """
195.         self.client.force_login(self.superuser)
196.         response = self.client.get(reverse('admin:admin_widgets_cartire_add'))
197.         self.assertNotContains(response, "BMW M3")
198.         self.assertContains(response, "Volkswagen Passat")
199. 
200. 
201. @override_settings(ROOT_URLCONF='admin_widgets.urls')
202. class AdminForeignKeyWidgetChangeList(TestDataMixin, TestCase):
203. 
204.     def setUp(self):
205.         self.client.force_login(self.superuser)
206. 
207.     def test_changelist_ForeignKey(self):
208.         response = self.client.get(reverse('admin:admin_widgets_car_changelist'))
209.         self.assertContains(response, '/auth/user/add/')
210. 
211. 
212. @override_settings(ROOT_URLCONF='admin_widgets.urls')
213. class AdminForeignKeyRawIdWidget(TestDataMixin, TestCase):
214. 
215.     def setUp(self):
216.         self.client.force_login(self.superuser)
217. 
218.     def test_nonexistent_target_id(self):
219.         band = Band.objects.create(name='Bogey Blues')
220.         pk = band.pk
221.         band.delete()
222.         post_data = {
223.             "main_band": '%s' % pk,
224.         }
225.         # Try posting with a nonexistent pk in a raw id field: this
226.         # should result in an error message, not a server exception.
227.         response = self.client.post(reverse('admin:admin_widgets_event_add'), post_data)
228.         self.assertContains(response, 'Select a valid choice. That choice is not one of the available choices.')
229. 
230.     def test_invalid_target_id(self):
231. 
232.         for test_str in ('Iñtërnâtiônàlizætiøn', "1234'", -1234):
233.             # This should result in an error message, not a server exception.
234.             response = self.client.post(reverse('admin:admin_widgets_event_add'), {"main_band": test_str})
235. 
236.             self.assertContains(response, 'Select a valid choice. That choice is not one of the available choices.')
237. 
238.     def test_url_params_from_lookup_dict_any_iterable(self):
239.         lookup1 = widgets.url_params_from_lookup_dict({'color__in': ('red', 'blue')})
240.         lookup2 = widgets.url_params_from_lookup_dict({'color__in': ['red', 'blue']})
241.         self.assertEqual(lookup1, {'color__in': 'red,blue'})
242.         self.assertEqual(lookup1, lookup2)
243. 
244.     def test_url_params_from_lookup_dict_callable(self):
245.         def my_callable():
246.             return 'works'
247.         lookup1 = widgets.url_params_from_lookup_dict({'myfield': my_callable})
248.         lookup2 = widgets.url_params_from_lookup_dict({'myfield': my_callable()})
249.         self.assertEqual(lookup1, lookup2)
250. 
251.     def test_label_and_url_for_value_invalid_uuid(self):
252.         field = Bee._meta.get_field('honeycomb')
253.         self.assertIsInstance(field.target_field, UUIDField)
254.         widget = widgets.ForeignKeyRawIdWidget(field.remote_field, admin.site)
255.         self.assertEqual(widget.label_and_url_for_value('invalid-uuid'), ('', ''))
256. 
257. 
258. class FilteredSelectMultipleWidgetTest(SimpleTestCase):
259.     def test_render(self):
260.         # Backslash in verbose_name to ensure it is JavaScript escaped.
261.         w = widgets.FilteredSelectMultiple('test\\', False)
262.         self.assertHTMLEqual(
263.             w.render('test', 'test'),
264.             '<select multiple name="test" class="selectfilter" '
265.             'data-field-name="test\\" data-is-stacked="0">\n</select>'
266.         )
267. 
268.     def test_stacked_render(self):
269.         # Backslash in verbose_name to ensure it is JavaScript escaped.
270.         w = widgets.FilteredSelectMultiple('test\\', True)
271.         self.assertHTMLEqual(
272.             w.render('test', 'test'),
273.             '<select multiple name="test" class="selectfilterstacked" '
274.             'data-field-name="test\\" data-is-stacked="1">\n</select>'
275.         )
276. 
277. 
278. class AdminDateWidgetTest(SimpleTestCase):
279.     def test_attrs(self):
280.         w = widgets.AdminDateWidget()
281.         self.assertHTMLEqual(
282.             w.render('test', datetime(2007, 12, 1, 9, 30)),
283.             '<input value="2007-12-01" type="text" class="vDateField" name="test" size="10">',
284.         )
285.         # pass attrs to widget
286.         w = widgets.AdminDateWidget(attrs={'size': 20, 'class': 'myDateField'})
287.         self.assertHTMLEqual(
288.             w.render('test', datetime(2007, 12, 1, 9, 30)),
289.             '<input value="2007-12-01" type="text" class="myDateField" name="test" size="20">',
290.         )
291. 
292. 
293. class AdminTimeWidgetTest(SimpleTestCase):
294.     def test_attrs(self):
295.         w = widgets.AdminTimeWidget()
296.         self.assertHTMLEqual(
297.             w.render('test', datetime(2007, 12, 1, 9, 30)),
298.             '<input value="09:30:00" type="text" class="vTimeField" name="test" size="8">',
299.         )
300.         # pass attrs to widget
301.         w = widgets.AdminTimeWidget(attrs={'size': 20, 'class': 'myTimeField'})
302.         self.assertHTMLEqual(
303.             w.render('test', datetime(2007, 12, 1, 9, 30)),
304.             '<input value="09:30:00" type="text" class="myTimeField" name="test" size="20">',
305.         )
306. 
307. 
308. class AdminSplitDateTimeWidgetTest(SimpleTestCase):
309.     def test_render(self):
310.         w = widgets.AdminSplitDateTime()
311.         self.assertHTMLEqual(
312.             w.render('test', datetime(2007, 12, 1, 9, 30)),
313.             '<p class="datetime">'
314.             'Date: <input value="2007-12-01" type="text" class="vDateField" '
315.             'name="test_0" size="10"><br>'
316.             'Time: <input value="09:30:00" type="text" class="vTimeField" '
317.             'name="test_1" size="8"></p>'
318.         )
319. 
320.     def test_localization(self):
321.         w = widgets.AdminSplitDateTime()
322. 
323.         with self.settings(USE_L10N=True), translation.override('de-at'):
324.             w.is_localized = True
325.             self.assertHTMLEqual(
326.                 w.render('test', datetime(2007, 12, 1, 9, 30)),
327.                 '<p class="datetime">'
328.                 'Datum: <input value="01.12.2007" type="text" '
329.                 'class="vDateField" name="test_0"size="10"><br>'
330.                 'Zeit: <input value="09:30:00" type="text" class="vTimeField" '
331.                 'name="test_1" size="8"></p>'
332.             )
333. 
334. 
335. class AdminURLWidgetTest(SimpleTestCase):
336.     def test_get_context_validates_url(self):
337.         w = widgets.AdminURLFieldWidget()
338.         for invalid in ['', '/not/a/full/url/', 'javascript:alert("Danger XSS!")']:
339.             with self.subTest(url=invalid):
340.                 self.assertFalse(w.get_context('name', invalid, {})['url_valid'])
341.         self.assertTrue(w.get_context('name', 'http://example.com', {})['url_valid'])
342. 
343.     def test_render(self):
344.         w = widgets.AdminURLFieldWidget()
345.         self.assertHTMLEqual(
346.             w.render('test', ''),
347.             '<input class="vURLField" name="test" type="url">'
348.         )
349.         self.assertHTMLEqual(
350.             w.render('test', 'http://example.com'),
351.             '<p class="url">Currently:<a href="http://example.com">'
352.             'http://example.com</a><br>'
353.             'Change:<input class="vURLField" name="test" type="url" '
354.             'value="http://example.com"></p>'
355.         )
356. 
357.     def test_render_idn(self):
358.         w = widgets.AdminURLFieldWidget()
359.         self.assertHTMLEqual(
360.             w.render('test', 'http://example-äüö.com'),
361.             '<p class="url">Currently: <a href="http://xn--example--7za4pnc.com">'
362.             'http://example-äüö.com</a><br>'
363.             'Change:<input class="vURLField" name="test" type="url" '
364.             'value="http://example-äüö.com"></p>'
365.         )
366. 
367.     def test_render_quoting(self):
368.         """
369.         WARNING: This test doesn't use assertHTMLEqual since it will get rid
370.         of some escapes which are tested here!
371.         """
372.         HREF_RE = re.compile('href="([^"]+)"')
373.         VALUE_RE = re.compile('value="([^"]+)"')
374.         TEXT_RE = re.compile('<a[^>]+>([^>]+)</a>')
375.         w = widgets.AdminURLFieldWidget()
376.         output = w.render('test', 'http://example.com/<sometag>some-text</sometag>')
377.         self.assertEqual(
378.             HREF_RE.search(output).groups()[0],
379.             'http://example.com/%3Csometag%3Esome-text%3C/sometag%3E',
380.         )
381.         self.assertEqual(
382.             TEXT_RE.search(output).groups()[0],
383.             'http://example.com/&lt;sometag&gt;some-text&lt;/sometag&gt;',
384.         )
385.         self.assertEqual(
386.             VALUE_RE.search(output).groups()[0],
387.             'http://example.com/&lt;sometag&gt;some-text&lt;/sometag&gt;',
388.         )
389.         output = w.render('test', 'http://example-äüö.com/<sometag>some-text</sometag>')
390.         self.assertEqual(
391.             HREF_RE.search(output).groups()[0],
392.             'http://xn--example--7za4pnc.com/%3Csometag%3Esome-text%3C/sometag%3E',
393.         )
394.         self.assertEqual(
395.             TEXT_RE.search(output).groups()[0],
396.             'http://example-äüö.com/&lt;sometag&gt;some-text&lt;/sometag&gt;',
397.         )
398.         self.assertEqual(
399.             VALUE_RE.search(output).groups()[0],
400.             'http://example-äüö.com/&lt;sometag&gt;some-text&lt;/sometag&gt;',
401.         )
402.         output = w.render('test', 'http://www.example.com/%C3%A4"><script>alert("XSS!")</script>"')
403.         self.assertEqual(
404.             HREF_RE.search(output).groups()[0],
405.             'http://www.example.com/%C3%A4%22%3E%3Cscript%3Ealert(%22XSS!%22)%3C/script%3E%22',
406.         )
407.         self.assertEqual(
408.             TEXT_RE.search(output).groups()[0],
409.             'http://www.example.com/%C3%A4&quot;&gt;&lt;script&gt;'
410.             'alert(&quot;XSS!&quot;)&lt;/script&gt;&quot;'
411.         )
412.         self.assertEqual(
413.             VALUE_RE.search(output).groups()[0],
414.             'http://www.example.com/%C3%A4&quot;&gt;&lt;script&gt;alert(&quot;XSS!&quot;)&lt;/script&gt;&quot;',
415.         )
416. 
417. 
418. class AdminUUIDWidgetTests(SimpleTestCase):
419.     def test_attrs(self):
420.         w = widgets.AdminUUIDInputWidget()
421.         self.assertHTMLEqual(
422.             w.render('test', '550e8400-e29b-41d4-a716-446655440000'),
423.             '<input value="550e8400-e29b-41d4-a716-446655440000" type="text" class="vUUIDField" name="test">',
424.         )
425.         w = widgets.AdminUUIDInputWidget(attrs={'class': 'myUUIDInput'})
426.         self.assertHTMLEqual(
427.             w.render('test', '550e8400-e29b-41d4-a716-446655440000'),
428.             '<input value="550e8400-e29b-41d4-a716-446655440000" type="text" class="myUUIDInput" name="test">',
429.         )
430. 
431. 
432. @override_settings(ROOT_URLCONF='admin_widgets.urls')
433. class AdminFileWidgetTests(TestDataMixin, TestCase):
434. 
435.     @classmethod
436.     def setUpTestData(cls):
437.         super().setUpTestData()
438.         band = Band.objects.create(name='Linkin Park')
439.         cls.album = band.album_set.create(
440.             name='Hybrid Theory', cover_art=r'albums\hybrid_theory.jpg'
441.         )
442. 
443.     def test_render(self):
444.         w = widgets.AdminFileWidget()
445.         self.assertHTMLEqual(
446.             w.render('test', self.album.cover_art),
447.             '<p class="file-upload">Currently: <a href="%(STORAGE_URL)salbums/'
448.             r'hybrid_theory.jpg">albums\hybrid_theory.jpg</a> '
449.             '<span class="clearable-file-input">'
450.             '<input type="checkbox" name="test-clear" id="test-clear_id"> '
451.             '<label for="test-clear_id">Clear</label></span><br>'
452.             'Change: <input type="file" name="test"></p>' % {
453.                 'STORAGE_URL': default_storage.url(''),
454.             },
455.         )
456.         self.assertHTMLEqual(
457.             w.render('test', SimpleUploadedFile('test', b'content')),
458.             '<input type="file" name="test">',
459.         )
460. 
461.     def test_render_required(self):
462.         widget = widgets.AdminFileWidget()
463.         widget.is_required = True
464.         self.assertHTMLEqual(
465.             widget.render('test', self.album.cover_art),
466.             '<p class="file-upload">Currently: <a href="%(STORAGE_URL)salbums/'
467.             r'hybrid_theory.jpg">albums\hybrid_theory.jpg</a><br>'
468.             'Change: <input type="file" name="test"></p>' % {
469.                 'STORAGE_URL': default_storage.url(''),
470.             },
471.         )
472. 
473.     def test_readonly_fields(self):
474.         """
475.         File widgets should render as a link when they're marked "read only."
476.         """
477.         self.client.force_login(self.superuser)
478.         response = self.client.get(reverse('admin:admin_widgets_album_change', args=(self.album.id,)))
479.         self.assertContains(
480.             response,
481.             '<div class="readonly"><a href="%(STORAGE_URL)salbums/hybrid_theory.jpg">'
482.             r'albums\hybrid_theory.jpg</a></div>' % {'STORAGE_URL': default_storage.url('')},
483.             html=True,
484.         )
485.         self.assertNotContains(
486.             response,
487.             '<input type="file" name="cover_art" id="id_cover_art">',
488.             html=True,
489.         )
490.         response = self.client.get(reverse('admin:admin_widgets_album_add'))
491.         self.assertContains(
492.             response,
493.             '<div class="readonly"></div>',
494.             html=True,
495.         )
496. 
497. 
498. @override_settings(ROOT_URLCONF='admin_widgets.urls')
499. class ForeignKeyRawIdWidgetTest(TestCase):
500.

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 19:10:57,075 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of the file `tests/admin_widgets/tests.py`.', relative_path='tests/admin_widgets/tests.py', start_line=1, end_line=500), ContextOutput(reasoning='The user requested the full content of the file `tests/admin_widgets/test_autocomplete_widget.py`.', relative_path='tests/admin_widgets/test_autocomplete_widget.py', start_line=1, end_line=143)]
2025-12-23 19:10:57,077 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/admin_widgets/tests.py` and `tests/admin_widgets/test_autocomplete_widget.py`.
2025-12-23 19:10:57,077 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 19:10:57,077 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 19:10:57,078 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 8 existing contexts
2025-12-23 19:10:57,079 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 10 total contexts (removed 0 duplicates)
2025-12-23 19:10:57,079 - thread-139454836635328.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-23 19:10:57,080 - thread-139454836635328.prometheus_context_collector - INFO - Successfully retrieved 10 context snippets
