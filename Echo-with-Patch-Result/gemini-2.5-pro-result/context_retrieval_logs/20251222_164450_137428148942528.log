2025-12-22 16:44:50,913 - thread-137428148942528.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Description: Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Patch information:
diff --git a/django/db/models/query.py b/django/db/models/query.py
index d9c9b0db04..336741f126 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -689,8 +689,19 @@ class QuerySet:
         """
         assert not self.query.is_sliced, \
             "Cannot use 'limit' or 'offset' with in_bulk"
-        if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
-            raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
+        if field_name != 'pk':
+            field = self.model._meta.get_field(field_name)
+            is_unique = field.unique
+            
+            # Also check for single-field UniqueConstraints
+            if not is_unique:
+                for constraint in self.model._meta.total_unique_constraints:
+                    if len(constraint.fields) == 1 and constraint.fields[0] == field_name:
+                        is_unique = True
+                        break
+            
+            if not is_unique:
+                raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
         if id_list is not None:
             if not id_list:
                 return {}
diff --git a/test_in_bulk_unique_constraint.py b/test_in_bulk_unique_constraint.py
new file mode 100644
index 0000000000..0cbd029f19
--- /dev/null
+++ b/test_in_bulk_unique_constraint.py
@@ -0,0 +1,43 @@
+from django.db import models
+from django.test import TestCase
+
+class Article(models.Model):
+    slug = models.CharField(max_length=255)
+    
+    class Meta:
+        constraints = [
+            models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
+        ]
+
+class TestInBulkWithUniqueConstraint(TestCase):
+    def setUp(self):
+        # Create some test articles
+        self.article1 = Article.objects.create(slug="article-1")
+        self.article2 = Article.objects.create(slug="article-2")
+        self.article3 = Article.objects.create(slug="article-3")
+    
+    def test_in_bulk_with_unique_constraint(self):
+        # Test that in_bulk works with a field that has a UniqueConstraint
+        slug_list = ["article-1", "article-2", "article-3"]
+        result = Article.objects.in_bulk(field_name="slug", id_list=slug_list)
+        
+        # Verify that we get the expected results
+        self.assertEqual(len(result), 3)
+        self.assertEqual(result["article-1"].pk, self.article1.pk)
+        self.assertEqual(result["article-2"].pk, self.article2.pk)
+        self.assertEqual(result["article-3"].pk, self.article3.pk)
+    
+    def test_in_bulk_without_id_list(self):
+        # Test that in_bulk works without providing an id_list
+        result = Article.objects.in_bulk(field_name="slug")
+        
+        # Verify that we get all articles
+        self.assertEqual(len(result), 3)
+        self.assertIn("article-1", result)
+        self.assertIn("article-2", result)
+        self.assertIn("article-3", result)
+    
+    def test_in_bulk_with_empty_list(self):
+        # Test that in_bulk returns an empty dict when given an empty list
+        result = Article.objects.in_bulk(field_name="slug", id_list=[])
+        self.assertEqual(result, {})
\ No newline at end of file


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

2025-12-22 16:44:51,011 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Description: Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Patch information:
diff --git a/django/db/models/query.py b/django/db/models/query.py
index d9c9b0db04..336741f126 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -689,8 +689,19 @@ class QuerySet:
         """
         assert not self.query.is_sliced, \
             "Cannot use 'limit' or 'offset' with in_bulk"
-        if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
-            raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
+        if field_name != 'pk':
+            field = self.model._meta.get_field(field_name)
+            is_unique = field.unique
+            
+            # Also check for single-field UniqueConstraints
+            if not is_unique:
+                for constraint in self.model._meta.total_unique_constraints:
+                    if len(constraint.fields) == 1 and constraint.fields[0] == field_name:
+                        is_unique = True
+                        break
+            
+            if not is_unique:
+                raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
         if id_list is not None:
             if not id_list:
                 return {}
diff --git a/test_in_bulk_unique_constraint.py b/test_in_bulk_unique_constraint.py
new file mode 100644
index 0000000000..0cbd029f19
--- /dev/null
+++ b/test_in_bulk_unique_constraint.py
@@ -0,0 +1,43 @@
+from django.db import models
+from django.test import TestCase
+
+class Article(models.Model):
+    slug = models.CharField(max_length=255)
+    
+    class Meta:
+        constraints = [
+            models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
+        ]
+
+class TestInBulkWithUniqueConstraint(TestCase):
+    def setUp(self):
+        # Create some test articles
+        self.article1 = Article.objects.create(slug="article-1")
+        self.article2 = Article.objects.create(slug="article-2")
+        self.article3 = Article.objects.create(slug="article-3")
+    
+    def test_in_bulk_with_unique_constraint(self):
+        # Test that in_bulk works with a field that has a UniqueConstraint
+        slug_list = ["article-1", "article-2", "article-3"]
+        result = Article.objects.in_bulk(field_name="slug", id_list=slug_list)
+        
+        # Verify that we get the expected results
+        self.assertEqual(len(result), 3)
+        self.assertEqual(result["article-1"].pk, self.article1.pk)
+        self.assertEqual(result["article-2"].pk, self.article2.pk)
+        self.assertEqual(result["article-3"].pk, self.article3.pk)
+    
+    def test_in_bulk_without_id_list(self):
+        # Test that in_bulk works without providing an id_list
+        result = Article.objects.in_bulk(field_name="slug")
+        
+        # Verify that we get all articles
+        self.assertEqual(len(result), 3)
+        self.assertIn("article-1", result)
+        self.assertIn("article-2", result)
+        self.assertIn("article-3", result)
+    
+    def test_in_bulk_with_empty_list(self):
+        # Test that in_bulk returns an empty dict when given an empty list
+        result = Article.objects.in_bulk(field_name="slug", id_list=[])
+        self.assertEqual(result, {})
\ No newline at end of file


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-22 16:45:33,937 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to fix a bug in `QuerySet.in_bulk()` where it doesn't recognize fields that are unique due to a `UniqueConstraint`. The provided patch modifies `django/db/models/query.py`. To understand the context of the change and verify the fix, I need to see the full implementation of the `in_bulk` method and the `QuerySet` class it belongs to." query='Please provide the full content of the file django/db/models/query.py.' extra_requirements='' purpose='This file contains the `QuerySet.in_bulk()` method that needs to be modified, and seeing its full content is essential to understanding the existing implementation and the impact of the proposed change.'
2025-12-22 16:45:33,939 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file django/db/models/query.py.
2025-12-22 16:45:33,939 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-22 16:45:33,939 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-22 16:45:33,940 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-22 16:45:33,940 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file django/db/models/query.py.
Purpose: This file contains the `QuerySet.in_bulk()` method that needs to be modified, and seeing its full content is essential to understanding the existing implementation and the impact of the proposed change.
2025-12-22 16:45:36,609 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the `django/db/models/query.py` file as requested. This will allow you to examine the existing implementation of the `QuerySet.in_bulk()` method and understand the context for the proposed changes.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/query.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2113, 'candidates_token_count': 75, 'total_token_count': 2360, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2113}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 75}], 'thoughts_token_count': 172, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15329079945882162, 'model_name': 'gemini-2.5-pro'} id='run--0c2f55ef-5aa3-4ca0-8b0c-dbefe0bbba74-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/query.py'}, 'id': '6b06fffb-47b7-4f9c-969b-becece388d88', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2113, 'output_tokens': 75, 'total_tokens': 2360, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 172}}
2025-12-22 16:45:39,495 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the `django/db/models/query.py` file as requested. This will allow you to examine the existing implementation of the `QuerySet.in_bulk()` method and understand the context for the proposed changes.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 2000.0, "relative_path": "django/db/models/query.py", "start_line": 501.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9593, 'candidates_token_count': 81, 'total_token_count': 9833, 'cached_content_token_count': 1844, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9593}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1844}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 81}], 'thoughts_token_count': 159}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1599806915094823, 'model_name': 'gemini-2.5-pro'} id='run--87383680-fc0f-4819-bc51-54874b7ba65f-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 2000.0, 'relative_path': 'django/db/models/query.py', 'start_line': 501.0}, 'id': '17d0c19d-4730-4b71-80f2-95d68662c4ff', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9593, 'output_tokens': 81, 'total_tokens': 9833, 'input_token_details': {'cache_read': 1844}, 'output_token_details': {'reasoning': 159}}
2025-12-22 16:45:42,133 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the entire content of the file `django/db/models/query.py`. The file's content was fetched in two parts to ensure the full file was read and has been displayed. You can now review the code to understand the implementation of the `QuerySet.in_bulk()` method and its surrounding context." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 33429, 'candidates_token_count': 69, 'total_token_count': 33554, 'prompt_tokens_details': [{'modality': 1, 'token_count': 33429}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 69}], 'thoughts_token_count': 56, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.31259232673092163, 'model_name': 'gemini-2.5-pro'} id='run--6a967b08-e7e2-4992-b9d1-8129c6ff0681-0' usage_metadata={'input_tokens': 33429, 'output_tokens': 69, 'total_tokens': 33554, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 56}}
2025-12-22 16:45:42,136 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file django/db/models/query.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
This file contains the `QuerySet.in_bulk()` method that needs to be modified, and seeing its full content is essential to understanding the existing implementation and the impact of the proposed change.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/query.py
Line number range: 1 - 500
Content:
1. """
2. The main QuerySet implementation. This provides the public API for the ORM.
3. """
4. 
5. import copy
6. import operator
7. import warnings
8. from collections import namedtuple
9. from functools import lru_cache
10. from itertools import chain
11. 
12. from django.conf import settings
13. from django.core import exceptions
14. from django.db import (
15.     DJANGO_VERSION_PICKLE_KEY, IntegrityError, NotSupportedError, connections,
16.     router, transaction,
17. )
18. from django.db.models import AutoField, DateField, DateTimeField, sql
19. from django.db.models.constants import LOOKUP_SEP
20. from django.db.models.deletion import Collector
21. from django.db.models.expressions import Case, Expression, F, Value, When
22. from django.db.models.functions import Cast, Trunc
23. from django.db.models.query_utils import FilteredRelation, Q
24. from django.db.models.sql.constants import CURSOR, GET_ITERATOR_CHUNK_SIZE
25. from django.db.models.utils import resolve_callables
26. from django.utils import timezone
27. from django.utils.functional import cached_property, partition
28. from django.utils.version import get_version
29. 
30. # The maximum number of results to fetch in a get() query.
31. MAX_GET_RESULTS = 21
32. 
33. # The maximum number of items to display in a QuerySet.__repr__
34. REPR_OUTPUT_SIZE = 20
35. 
36. 
37. class BaseIterable:
38.     def __init__(self, queryset, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
39.         self.queryset = queryset
40.         self.chunked_fetch = chunked_fetch
41.         self.chunk_size = chunk_size
42. 
43. 
44. class ModelIterable(BaseIterable):
45.     """Iterable that yields a model instance for each row."""
46. 
47.     def __iter__(self):
48.         queryset = self.queryset
49.         db = queryset.db
50.         compiler = queryset.query.get_compiler(using=db)
51.         # Execute the query. This will also fill compiler.select, klass_info,
52.         # and annotations.
53.         results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
54.         select, klass_info, annotation_col_map = (compiler.select, compiler.klass_info,
55.                                                   compiler.annotation_col_map)
56.         model_cls = klass_info['model']
57.         select_fields = klass_info['select_fields']
58.         model_fields_start, model_fields_end = select_fields[0], select_fields[-1] + 1
59.         init_list = [f[0].target.attname
60.                      for f in select[model_fields_start:model_fields_end]]
61.         related_populators = get_related_populators(klass_info, select, db)
62.         known_related_objects = [
63.             (field, related_objs, operator.attrgetter(*[
64.                 field.attname
65.                 if from_field == 'self' else
66.                 queryset.model._meta.get_field(from_field).attname
67.                 for from_field in field.from_fields
68.             ])) for field, related_objs in queryset._known_related_objects.items()
69.         ]
70.         for row in compiler.results_iter(results):
71.             obj = model_cls.from_db(db, init_list, row[model_fields_start:model_fields_end])
72.             for rel_populator in related_populators:
73.                 rel_populator.populate(row, obj)
74.             if annotation_col_map:
75.                 for attr_name, col_pos in annotation_col_map.items():
76.                     setattr(obj, attr_name, row[col_pos])
77. 
78.             # Add the known related objects to the model.
79.             for field, rel_objs, rel_getter in known_related_objects:
80.                 # Avoid overwriting objects loaded by, e.g., select_related().
81.                 if field.is_cached(obj):
82.                     continue
83.                 rel_obj_id = rel_getter(obj)
84.                 try:
85.                     rel_obj = rel_objs[rel_obj_id]
86.                 except KeyError:
87.                     pass  # May happen in qs1 | qs2 scenarios.
88.                 else:
89.                     setattr(obj, field.name, rel_obj)
90. 
91.             yield obj
92. 
93. 
94. class ValuesIterable(BaseIterable):
95.     """
96.     Iterable returned by QuerySet.values() that yields a dict for each row.
97.     """
98. 
99.     def __iter__(self):
100.         queryset = self.queryset
101.         query = queryset.query
102.         compiler = query.get_compiler(queryset.db)
103. 
104.         # extra(select=...) cols are always at the start of the row.
105.         names = [
106.             *query.extra_select,
107.             *query.values_select,
108.             *query.annotation_select,
109.         ]
110.         indexes = range(len(names))
111.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
112.             yield {names[i]: row[i] for i in indexes}
113. 
114. 
115. class ValuesListIterable(BaseIterable):
116.     """
117.     Iterable returned by QuerySet.values_list(flat=False) that yields a tuple
118.     for each row.
119.     """
120. 
121.     def __iter__(self):
122.         queryset = self.queryset
123.         query = queryset.query
124.         compiler = query.get_compiler(queryset.db)
125. 
126.         if queryset._fields:
127.             # extra(select=...) cols are always at the start of the row.
128.             names = [
129.                 *query.extra_select,
130.                 *query.values_select,
131.                 *query.annotation_select,
132.             ]
133.             fields = [*queryset._fields, *(f for f in query.annotation_select if f not in queryset._fields)]
134.             if fields != names:
135.                 # Reorder according to fields.
136.                 index_map = {name: idx for idx, name in enumerate(names)}
137.                 rowfactory = operator.itemgetter(*[index_map[f] for f in fields])
138.                 return map(
139.                     rowfactory,
140.                     compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
141.                 )
142.         return compiler.results_iter(tuple_expected=True, chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
143. 
144. 
145. class NamedValuesListIterable(ValuesListIterable):
146.     """
147.     Iterable returned by QuerySet.values_list(named=True) that yields a
148.     namedtuple for each row.
149.     """
150. 
151.     @staticmethod
152.     @lru_cache()
153.     def create_namedtuple_class(*names):
154.         # Cache namedtuple() with @lru_cache() since it's too slow to be
155.         # called for every QuerySet evaluation.
156.         return namedtuple('Row', names)
157. 
158.     def __iter__(self):
159.         queryset = self.queryset
160.         if queryset._fields:
161.             names = queryset._fields
162.         else:
163.             query = queryset.query
164.             names = [*query.extra_select, *query.values_select, *query.annotation_select]
165.         tuple_class = self.create_namedtuple_class(*names)
166.         new = tuple.__new__
167.         for row in super().__iter__():
168.             yield new(tuple_class, row)
169. 
170. 
171. class FlatValuesListIterable(BaseIterable):
172.     """
173.     Iterable returned by QuerySet.values_list(flat=True) that yields single
174.     values.
175.     """
176. 
177.     def __iter__(self):
178.         queryset = self.queryset
179.         compiler = queryset.query.get_compiler(queryset.db)
180.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
181.             yield row[0]
182. 
183. 
184. class QuerySet:
185.     """Represent a lazy database lookup for a set of objects."""
186. 
187.     def __init__(self, model=None, query=None, using=None, hints=None):
188.         self.model = model
189.         self._db = using
190.         self._hints = hints or {}
191.         self._query = query or sql.Query(self.model)
192.         self._result_cache = None
193.         self._sticky_filter = False
194.         self._for_write = False
195.         self._prefetch_related_lookups = ()
196.         self._prefetch_done = False
197.         self._known_related_objects = {}  # {rel_field: {pk: rel_obj}}
198.         self._iterable_class = ModelIterable
199.         self._fields = None
200.         self._defer_next_filter = False
201.         self._deferred_filter = None
202. 
203.     @property
204.     def query(self):
205.         if self._deferred_filter:
206.             negate, args, kwargs = self._deferred_filter
207.             self._filter_or_exclude_inplace(negate, *args, **kwargs)
208.             self._deferred_filter = None
209.         return self._query
210. 
211.     @query.setter
212.     def query(self, value):
213.         self._query = value
214. 
215.     def as_manager(cls):
216.         # Address the circular dependency between `Queryset` and `Manager`.
217.         from django.db.models.manager import Manager
218.         manager = Manager.from_queryset(cls)()
219.         manager._built_with_as_manager = True
220.         return manager
221.     as_manager.queryset_only = True
222.     as_manager = classmethod(as_manager)
223. 
224.     ########################
225.     # PYTHON MAGIC METHODS #
226.     ########################
227. 
228.     def __deepcopy__(self, memo):
229.         """Don't populate the QuerySet's cache."""
230.         obj = self.__class__()
231.         for k, v in self.__dict__.items():
232.             if k == '_result_cache':
233.                 obj.__dict__[k] = None
234.             else:
235.                 obj.__dict__[k] = copy.deepcopy(v, memo)
236.         return obj
237. 
238.     def __getstate__(self):
239.         # Force the cache to be fully populated.
240.         self._fetch_all()
241.         return {**self.__dict__, DJANGO_VERSION_PICKLE_KEY: get_version()}
242. 
243.     def __setstate__(self, state):
244.         msg = None
245.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
246.         if pickled_version:
247.             current_version = get_version()
248.             if current_version != pickled_version:
249.                 msg = (
250.                     "Pickled queryset instance's Django version %s does not "
251.                     "match the current version %s." % (pickled_version, current_version)
252.                 )
253.         else:
254.             msg = "Pickled queryset instance's Django version is not specified."
255. 
256.         if msg:
257.             warnings.warn(msg, RuntimeWarning, stacklevel=2)
258. 
259.         self.__dict__.update(state)
260. 
261.     def __repr__(self):
262.         data = list(self[:REPR_OUTPUT_SIZE + 1])
263.         if len(data) > REPR_OUTPUT_SIZE:
264.             data[-1] = "...(remaining elements truncated)..."
265.         return '<%s %r>' % (self.__class__.__name__, data)
266. 
267.     def __len__(self):
268.         self._fetch_all()
269.         return len(self._result_cache)
270. 
271.     def __iter__(self):
272.         """
273.         The queryset iterator protocol uses three nested iterators in the
274.         default case:
275.             1. sql.compiler.execute_sql()
276.                - Returns 100 rows at time (constants.GET_ITERATOR_CHUNK_SIZE)
277.                  using cursor.fetchmany(). This part is responsible for
278.                  doing some column masking, and returning the rows in chunks.
279.             2. sql.compiler.results_iter()
280.                - Returns one row at time. At this point the rows are still just
281.                  tuples. In some cases the return values are converted to
282.                  Python values at this location.
283.             3. self.iterator()
284.                - Responsible for turning the rows into model objects.
285.         """
286.         self._fetch_all()
287.         return iter(self._result_cache)
288. 
289.     def __bool__(self):
290.         self._fetch_all()
291.         return bool(self._result_cache)
292. 
293.     def __getitem__(self, k):
294.         """Retrieve an item or slice from the set of results."""
295.         if not isinstance(k, (int, slice)):
296.             raise TypeError(
297.                 'QuerySet indices must be integers or slices, not %s.'
298.                 % type(k).__name__
299.             )
300.         assert ((not isinstance(k, slice) and (k >= 0)) or
301.                 (isinstance(k, slice) and (k.start is None or k.start >= 0) and
302.                  (k.stop is None or k.stop >= 0))), \
303.             "Negative indexing is not supported."
304. 
305.         if self._result_cache is not None:
306.             return self._result_cache[k]
307. 
308.         if isinstance(k, slice):
309.             qs = self._chain()
310.             if k.start is not None:
311.                 start = int(k.start)
312.             else:
313.                 start = None
314.             if k.stop is not None:
315.                 stop = int(k.stop)
316.             else:
317.                 stop = None
318.             qs.query.set_limits(start, stop)
319.             return list(qs)[::k.step] if k.step else qs
320. 
321.         qs = self._chain()
322.         qs.query.set_limits(k, k + 1)
323.         qs._fetch_all()
324.         return qs._result_cache[0]
325. 
326.     def __class_getitem__(cls, *args, **kwargs):
327.         return cls
328. 
329.     def __and__(self, other):
330.         self._merge_sanity_check(other)
331.         if isinstance(other, EmptyQuerySet):
332.             return other
333.         if isinstance(self, EmptyQuerySet):
334.             return self
335.         combined = self._chain()
336.         combined._merge_known_related_objects(other)
337.         combined.query.combine(other.query, sql.AND)
338.         return combined
339. 
340.     def __or__(self, other):
341.         self._merge_sanity_check(other)
342.         if isinstance(self, EmptyQuerySet):
343.             return other
344.         if isinstance(other, EmptyQuerySet):
345.             return self
346.         query = self if self.query.can_filter() else self.model._base_manager.filter(pk__in=self.values('pk'))
347.         combined = query._chain()
348.         combined._merge_known_related_objects(other)
349.         if not other.query.can_filter():
350.             other = other.model._base_manager.filter(pk__in=other.values('pk'))
351.         combined.query.combine(other.query, sql.OR)
352.         return combined
353. 
354.     ####################################
355.     # METHODS THAT DO DATABASE QUERIES #
356.     ####################################
357. 
358.     def _iterator(self, use_chunked_fetch, chunk_size):
359.         yield from self._iterable_class(self, chunked_fetch=use_chunked_fetch, chunk_size=chunk_size)
360. 
361.     def iterator(self, chunk_size=2000):
362.         """
363.         An iterator over the results from applying this QuerySet to the
364.         database.
365.         """
366.         if chunk_size <= 0:
367.             raise ValueError('Chunk size must be strictly positive.')
368.         use_chunked_fetch = not connections[self.db].settings_dict.get('DISABLE_SERVER_SIDE_CURSORS')
369.         return self._iterator(use_chunked_fetch, chunk_size)
370. 
371.     def aggregate(self, *args, **kwargs):
372.         """
373.         Return a dictionary containing the calculations (aggregation)
374.         over the current queryset.
375. 
376.         If args is present the expression is passed as a kwarg using
377.         the Aggregate object's default alias.
378.         """
379.         if self.query.distinct_fields:
380.             raise NotImplementedError("aggregate() + distinct(fields) not implemented.")
381.         self._validate_values_are_expressions((*args, *kwargs.values()), method_name='aggregate')
382.         for arg in args:
383.             # The default_alias property raises TypeError if default_alias
384.             # can't be set automatically or AttributeError if it isn't an
385.             # attribute.
386.             try:
387.                 arg.default_alias
388.             except (AttributeError, TypeError):
389.                 raise TypeError("Complex aggregates require an alias")
390.             kwargs[arg.default_alias] = arg
391. 
392.         query = self.query.chain()
393.         for (alias, aggregate_expr) in kwargs.items():
394.             query.add_annotation(aggregate_expr, alias, is_summary=True)
395.             if not query.annotations[alias].contains_aggregate:
396.                 raise TypeError("%s is not an aggregate expression" % alias)
397.         return query.get_aggregation(self.db, kwargs)
398. 
399.     def count(self):
400.         """
401.         Perform a SELECT COUNT() and return the number of records as an
402.         integer.
403. 
404.         If the QuerySet is already fully cached, return the length of the
405.         cached results set to avoid multiple SELECT COUNT(*) calls.
406.         """
407.         if self._result_cache is not None:
408.             return len(self._result_cache)
409. 
410.         return self.query.get_count(using=self.db)
411. 
412.     def get(self, *args, **kwargs):
413.         """
414.         Perform the query and return a single object matching the given
415.         keyword arguments.
416.         """
417.         clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
418.         if self.query.can_filter() and not self.query.distinct_fields:
419.             clone = clone.order_by()
420.         limit = None
421.         if not clone.query.select_for_update or connections[clone.db].features.supports_select_for_update_with_limit:
422.             limit = MAX_GET_RESULTS
423.             clone.query.set_limits(high=limit)
424.         num = len(clone)
425.         if num == 1:
426.             return clone._result_cache[0]
427.         if not num:
428.             raise self.model.DoesNotExist(
429.                 "%s matching query does not exist." %
430.                 self.model._meta.object_name
431.             )
432.         raise self.model.MultipleObjectsReturned(
433.             'get() returned more than one %s -- it returned %s!' % (
434.                 self.model._meta.object_name,
435.                 num if not limit or num < limit else 'more than %s' % (limit - 1),
436.             )
437.         )
438. 
439.     def create(self, **kwargs):
440.         """
441.         Create a new object with the given kwargs, saving it to the database
442.         and returning the created object.
443.         """
444.         obj = self.model(**kwargs)
445.         self._for_write = True
446.         obj.save(force_insert=True, using=self.db)
447.         return obj
448. 
449.     def _populate_pk_values(self, objs):
450.         for obj in objs:
451.             if obj.pk is None:
452.                 obj.pk = obj._meta.pk.get_pk_value_on_save(obj)
453. 
454.     def bulk_create(self, objs, batch_size=None, ignore_conflicts=False):
455.         """
456.         Insert each of the instances into the database. Do *not* call
457.         save() on each of the instances, do not send any pre/post_save
458.         signals, and do not set the primary key attribute if it is an
459.         autoincrement field (except if features.can_return_rows_from_bulk_insert=True).
460.         Multi-table models are not supported.
461.         """
462.         # When you bulk insert you don't get the primary keys back (if it's an
463.         # autoincrement, except if can_return_rows_from_bulk_insert=True), so
464.         # you can't insert into the child tables which references this. There
465.         # are two workarounds:
466.         # 1) This could be implemented if you didn't have an autoincrement pk
467.         # 2) You could do it by doing O(n) normal inserts into the parent
468.         #    tables to get the primary keys back and then doing a single bulk
469.         #    insert into the childmost table.
470.         # We currently set the primary keys on the objects when using
471.         # PostgreSQL via the RETURNING ID clause. It should be possible for
472.         # Oracle as well, but the semantics for extracting the primary keys is
473.         # trickier so it's not done yet.
474.         assert batch_size is None or batch_size > 0
475.         # Check that the parents share the same concrete model with the our
476.         # model to detect the inheritance pattern ConcreteGrandParent ->
477.         # MultiTableParent -> ProxyChild. Simply checking self.model._meta.proxy
478.         # would not identify that case as involving multiple tables.
479.         for parent in self.model._meta.get_parent_list():
480.             if parent._meta.concrete_model is not self.model._meta.concrete_model:
481.                 raise ValueError("Can't bulk create a multi-table inherited model")
482.         if not objs:
483.             return objs
484.         self._for_write = True
485.         connection = connections[self.db]
486.         opts = self.model._meta
487.         fields = opts.concrete_fields
488.         objs = list(objs)
489.         self._populate_pk_values(objs)
490.         with transaction.atomic(using=self.db, savepoint=False):
491.             objs_with_pk, objs_without_pk = partition(lambda o: o.pk is None, objs)
492.             if objs_with_pk:
493.                 returned_columns = self._batched_insert(
494.                     objs_with_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
495.                 )
496.                 for obj_with_pk, results in zip(objs_with_pk, returned_columns):
497.                     for result, field in zip(results, opts.db_returning_fields):
498.                         if field != opts.pk:
499.                             setattr(obj_with_pk, field.attname, result)
500.                 for obj_with_pk in objs_with_pk:


File: django/db/models/query.py
Line number range: 501 - 2000
Content:
501.                     obj_with_pk._state.adding = False
502.                     obj_with_pk._state.db = self.db
503.             if objs_without_pk:
504.                 fields = [f for f in fields if not isinstance(f, AutoField)]
505.                 returned_columns = self._batched_insert(
506.                     objs_without_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
507.                 )
508.                 if connection.features.can_return_rows_from_bulk_insert and not ignore_conflicts:
509.                     assert len(returned_columns) == len(objs_without_pk)
510.                 for obj_without_pk, results in zip(objs_without_pk, returned_columns):
511.                     for result, field in zip(results, opts.db_returning_fields):
512.                         setattr(obj_without_pk, field.attname, result)
513.                     obj_without_pk._state.adding = False
514.                     obj_without_pk._state.db = self.db
515. 
516.         return objs
517. 
518.     def bulk_update(self, objs, fields, batch_size=None):
519.         """
520.         Update the given fields in each of the given objects in the database.
521.         """
522.         if batch_size is not None and batch_size < 0:
523.             raise ValueError('Batch size must be a positive integer.')
524.         if not fields:
525.             raise ValueError('Field names must be given to bulk_update().')
526.         objs = tuple(objs)
527.         if any(obj.pk is None for obj in objs):
528.             raise ValueError('All bulk_update() objects must have a primary key set.')
529.         fields = [self.model._meta.get_field(name) for name in fields]
530.         if any(not f.concrete or f.many_to_many for f in fields):
531.             raise ValueError('bulk_update() can only be used with concrete fields.')
532.         if any(f.primary_key for f in fields):
533.             raise ValueError('bulk_update() cannot be used with primary key fields.')
534.         if not objs:
535.             return
536.         # PK is used twice in the resulting update query, once in the filter
537.         # and once in the WHEN. Each field will also have one CAST.
538.         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
539.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
540.         requires_casting = connections[self.db].features.requires_casted_case_in_updates
541.         batches = (objs[i:i + batch_size] for i in range(0, len(objs), batch_size))
542.         updates = []
543.         for batch_objs in batches:
544.             update_kwargs = {}
545.             for field in fields:
546.                 when_statements = []
547.                 for obj in batch_objs:
548.                     attr = getattr(obj, field.attname)
549.                     if not isinstance(attr, Expression):
550.                         attr = Value(attr, output_field=field)
551.                     when_statements.append(When(pk=obj.pk, then=attr))
552.                 case_statement = Case(*when_statements, output_field=field)
553.                 if requires_casting:
554.                     case_statement = Cast(case_statement, output_field=field)
555.                 update_kwargs[field.attname] = case_statement
556.             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
557.         with transaction.atomic(using=self.db, savepoint=False):
558.             for pks, update_kwargs in updates:
559.                 self.filter(pk__in=pks).update(**update_kwargs)
560.     bulk_update.alters_data = True
561. 
562.     def get_or_create(self, defaults=None, **kwargs):
563.         """
564.         Look up an object with the given kwargs, creating one if necessary.
565.         Return a tuple of (object, created), where created is a boolean
566.         specifying whether an object was created.
567.         """
568.         # The get() needs to be targeted at the write database in order
569.         # to avoid potential transaction consistency problems.
570.         self._for_write = True
571.         try:
572.             return self.get(**kwargs), False
573.         except self.model.DoesNotExist:
574.             params = self._extract_model_params(defaults, **kwargs)
575.             return self._create_object_from_params(kwargs, params)
576. 
577.     def update_or_create(self, defaults=None, **kwargs):
578.         """
579.         Look up an object with the given kwargs, updating one with defaults
580.         if it exists, otherwise create a new one.
581.         Return a tuple (object, created), where created is a boolean
582.         specifying whether an object was created.
583.         """
584.         defaults = defaults or {}
585.         self._for_write = True
586.         with transaction.atomic(using=self.db):
587.             try:
588.                 obj = self.select_for_update().get(**kwargs)
589.             except self.model.DoesNotExist:
590.                 params = self._extract_model_params(defaults, **kwargs)
591.                 # Lock the row so that a concurrent update is blocked until
592.                 # after update_or_create() has performed its save.
593.                 obj, created = self._create_object_from_params(kwargs, params, lock=True)
594.                 if created:
595.                     return obj, created
596.             for k, v in resolve_callables(defaults):
597.                 setattr(obj, k, v)
598.             obj.save(using=self.db)
599.         return obj, False
600. 
601.     def _create_object_from_params(self, lookup, params, lock=False):
602.         """
603.         Try to create an object using passed params. Used by get_or_create()
604.         and update_or_create().
605.         """
606.         try:
607.             with transaction.atomic(using=self.db):
608.                 params = dict(resolve_callables(params))
609.                 obj = self.create(**params)
610.             return obj, True
611.         except IntegrityError:
612.             try:
613.                 qs = self.select_for_update() if lock else self
614.                 return qs.get(**lookup), False
615.             except self.model.DoesNotExist:
616.                 pass
617.             raise
618. 
619.     def _extract_model_params(self, defaults, **kwargs):
620.         """
621.         Prepare `params` for creating a model instance based on the given
622.         kwargs; for use by get_or_create() and update_or_create().
623.         """
624.         defaults = defaults or {}
625.         params = {k: v for k, v in kwargs.items() if LOOKUP_SEP not in k}
626.         params.update(defaults)
627.         property_names = self.model._meta._property_names
628.         invalid_params = []
629.         for param in params:
630.             try:
631.                 self.model._meta.get_field(param)
632.             except exceptions.FieldDoesNotExist:
633.                 # It's okay to use a model's property if it has a setter.
634.                 if not (param in property_names and getattr(self.model, param).fset):
635.                     invalid_params.append(param)
636.         if invalid_params:
637.             raise exceptions.FieldError(
638.                 "Invalid field name(s) for model %s: '%s'." % (
639.                     self.model._meta.object_name,
640.                     "', '".join(sorted(invalid_params)),
641.                 ))
642.         return params
643. 
644.     def _earliest(self, *fields):
645.         """
646.         Return the earliest object according to fields (if given) or by the
647.         model's Meta.get_latest_by.
648.         """
649.         if fields:
650.             order_by = fields
651.         else:
652.             order_by = getattr(self.model._meta, 'get_latest_by')
653.             if order_by and not isinstance(order_by, (tuple, list)):
654.                 order_by = (order_by,)
655.         if order_by is None:
656.             raise ValueError(
657.                 "earliest() and latest() require either fields as positional "
658.                 "arguments or 'get_latest_by' in the model's Meta."
659.             )
660. 
661.         assert not self.query.is_sliced, \
662.             "Cannot change a query once a slice has been taken."
663.         obj = self._chain()
664.         obj.query.set_limits(high=1)
665.         obj.query.clear_ordering(force_empty=True)
666.         obj.query.add_ordering(*order_by)
667.         return obj.get()
668. 
669.     def earliest(self, *fields):
670.         return self._earliest(*fields)
671. 
672.     def latest(self, *fields):
673.         return self.reverse()._earliest(*fields)
674. 
675.     def first(self):
676.         """Return the first object of a query or None if no match is found."""
677.         for obj in (self if self.ordered else self.order_by('pk'))[:1]:
678.             return obj
679. 
680.     def last(self):
681.         """Return the last object of a query or None if no match is found."""
682.         for obj in (self.reverse() if self.ordered else self.order_by('-pk'))[:1]:
683.             return obj
684. 
685.     def in_bulk(self, id_list=None, *, field_name='pk'):
686.         """
687.         Return a dictionary mapping each of the given IDs to the object with
688.         that ID. If `id_list` isn't provided, evaluate the entire QuerySet.
689.         """
690.         assert not self.query.is_sliced, \
691.             "Cannot use 'limit' or 'offset' with in_bulk"
692.         if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
693.             raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
694.         if id_list is not None:
695.             if not id_list:
696.                 return {}
697.             filter_key = '{}__in'.format(field_name)
698.             batch_size = connections[self.db].features.max_query_params
699.             id_list = tuple(id_list)
700.             # If the database has a limit on the number of query parameters
701.             # (e.g. SQLite), retrieve objects in batches if necessary.
702.             if batch_size and batch_size < len(id_list):
703.                 qs = ()
704.                 for offset in range(0, len(id_list), batch_size):
705.                     batch = id_list[offset:offset + batch_size]
706.                     qs += tuple(self.filter(**{filter_key: batch}).order_by())
707.             else:
708.                 qs = self.filter(**{filter_key: id_list}).order_by()
709.         else:
710.             qs = self._chain()
711.         return {getattr(obj, field_name): obj for obj in qs}
712. 
713.     def delete(self):
714.         """Delete the records in the current QuerySet."""
715.         self._not_support_combined_queries('delete')
716.         assert not self.query.is_sliced, \
717.             "Cannot use 'limit' or 'offset' with delete."
718. 
719.         if self._fields is not None:
720.             raise TypeError("Cannot call delete() after .values() or .values_list()")
721. 
722.         del_query = self._chain()
723. 
724.         # The delete is actually 2 queries - one to find related objects,
725.         # and one to delete. Make sure that the discovery of related
726.         # objects is performed on the same database as the deletion.
727.         del_query._for_write = True
728. 
729.         # Disable non-supported fields.
730.         del_query.query.select_for_update = False
731.         del_query.query.select_related = False
732.         del_query.query.clear_ordering(force_empty=True)
733. 
734.         collector = Collector(using=del_query.db)
735.         collector.collect(del_query)
736.         deleted, _rows_count = collector.delete()
737. 
738.         # Clear the result cache, in case this QuerySet gets reused.
739.         self._result_cache = None
740.         return deleted, _rows_count
741. 
742.     delete.alters_data = True
743.     delete.queryset_only = True
744. 
745.     def _raw_delete(self, using):
746.         """
747.         Delete objects found from the given queryset in single direct SQL
748.         query. No signals are sent and there is no protection for cascades.
749.         """
750.         query = self.query.clone()
751.         query.__class__ = sql.DeleteQuery
752.         cursor = query.get_compiler(using).execute_sql(CURSOR)
753.         if cursor:
754.             with cursor:
755.                 return cursor.rowcount
756.         return 0
757.     _raw_delete.alters_data = True
758. 
759.     def update(self, **kwargs):
760.         """
761.         Update all elements in the current QuerySet, setting all the given
762.         fields to the appropriate values.
763.         """
764.         self._not_support_combined_queries('update')
765.         assert not self.query.is_sliced, \
766.             "Cannot update a query once a slice has been taken."
767.         self._for_write = True
768.         query = self.query.chain(sql.UpdateQuery)
769.         query.add_update_values(kwargs)
770.         # Clear any annotations so that they won't be present in subqueries.
771.         query.annotations = {}
772.         with transaction.mark_for_rollback_on_error(using=self.db):
773.             rows = query.get_compiler(self.db).execute_sql(CURSOR)
774.         self._result_cache = None
775.         return rows
776.     update.alters_data = True
777. 
778.     def _update(self, values):
779.         """
780.         A version of update() that accepts field objects instead of field names.
781.         Used primarily for model saving and not intended for use by general
782.         code (it requires too much poking around at model internals to be
783.         useful at that level).
784.         """
785.         assert not self.query.is_sliced, \
786.             "Cannot update a query once a slice has been taken."
787.         query = self.query.chain(sql.UpdateQuery)
788.         query.add_update_fields(values)
789.         # Clear any annotations so that they won't be present in subqueries.
790.         query.annotations = {}
791.         self._result_cache = None
792.         return query.get_compiler(self.db).execute_sql(CURSOR)
793.     _update.alters_data = True
794.     _update.queryset_only = False
795. 
796.     def exists(self):
797.         if self._result_cache is None:
798.             return self.query.has_results(using=self.db)
799.         return bool(self._result_cache)
800. 
801.     def _prefetch_related_objects(self):
802.         # This method can only be called once the result cache has been filled.
803.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
804.         self._prefetch_done = True
805. 
806.     def explain(self, *, format=None, **options):
807.         return self.query.explain(using=self.db, format=format, **options)
808. 
809.     ##################################################
810.     # PUBLIC METHODS THAT RETURN A QUERYSET SUBCLASS #
811.     ##################################################
812. 
813.     def raw(self, raw_query, params=None, translations=None, using=None):
814.         if using is None:
815.             using = self.db
816.         qs = RawQuerySet(raw_query, model=self.model, params=params, translations=translations, using=using)
817.         qs._prefetch_related_lookups = self._prefetch_related_lookups[:]
818.         return qs
819. 
820.     def _values(self, *fields, **expressions):
821.         clone = self._chain()
822.         if expressions:
823.             clone = clone.annotate(**expressions)
824.         clone._fields = fields
825.         clone.query.set_values(fields)
826.         return clone
827. 
828.     def values(self, *fields, **expressions):
829.         fields += tuple(expressions)
830.         clone = self._values(*fields, **expressions)
831.         clone._iterable_class = ValuesIterable
832.         return clone
833. 
834.     def values_list(self, *fields, flat=False, named=False):
835.         if flat and named:
836.             raise TypeError("'flat' and 'named' can't be used together.")
837.         if flat and len(fields) > 1:
838.             raise TypeError("'flat' is not valid when values_list is called with more than one field.")
839. 
840.         field_names = {f for f in fields if not hasattr(f, 'resolve_expression')}
841.         _fields = []
842.         expressions = {}
843.         counter = 1
844.         for field in fields:
845.             if hasattr(field, 'resolve_expression'):
846.                 field_id_prefix = getattr(field, 'default_alias', field.__class__.__name__.lower())
847.                 while True:
848.                     field_id = field_id_prefix + str(counter)
849.                     counter += 1
850.                     if field_id not in field_names:
851.                         break
852.                 expressions[field_id] = field
853.                 _fields.append(field_id)
854.             else:
855.                 _fields.append(field)
856. 
857.         clone = self._values(*_fields, **expressions)
858.         clone._iterable_class = (
859.             NamedValuesListIterable if named
860.             else FlatValuesListIterable if flat
861.             else ValuesListIterable
862.         )
863.         return clone
864. 
865.     def dates(self, field_name, kind, order='ASC'):
866.         """
867.         Return a list of date objects representing all available dates for
868.         the given field_name, scoped to 'kind'.
869.         """
870.         assert kind in ('year', 'month', 'week', 'day'), \
871.             "'kind' must be one of 'year', 'month', 'week', or 'day'."
872.         assert order in ('ASC', 'DESC'), \
873.             "'order' must be either 'ASC' or 'DESC'."
874.         return self.annotate(
875.             datefield=Trunc(field_name, kind, output_field=DateField()),
876.             plain_field=F(field_name)
877.         ).values_list(
878.             'datefield', flat=True
879.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datefield')
880. 
881.     def datetimes(self, field_name, kind, order='ASC', tzinfo=None, is_dst=None):
882.         """
883.         Return a list of datetime objects representing all available
884.         datetimes for the given field_name, scoped to 'kind'.
885.         """
886.         assert kind in ('year', 'month', 'week', 'day', 'hour', 'minute', 'second'), \
887.             "'kind' must be one of 'year', 'month', 'week', 'day', 'hour', 'minute', or 'second'."
888.         assert order in ('ASC', 'DESC'), \
889.             "'order' must be either 'ASC' or 'DESC'."
890.         if settings.USE_TZ:
891.             if tzinfo is None:
892.                 tzinfo = timezone.get_current_timezone()
893.         else:
894.             tzinfo = None
895.         return self.annotate(
896.             datetimefield=Trunc(
897.                 field_name,
898.                 kind,
899.                 output_field=DateTimeField(),
900.                 tzinfo=tzinfo,
901.                 is_dst=is_dst,
902.             ),
903.             plain_field=F(field_name)
904.         ).values_list(
905.             'datetimefield', flat=True
906.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datetimefield')
907. 
908.     def none(self):
909.         """Return an empty QuerySet."""
910.         clone = self._chain()
911.         clone.query.set_empty()
912.         return clone
913. 
914.     ##################################################################
915.     # PUBLIC METHODS THAT ALTER ATTRIBUTES AND RETURN A NEW QUERYSET #
916.     ##################################################################
917. 
918.     def all(self):
919.         """
920.         Return a new QuerySet that is a copy of the current one. This allows a
921.         QuerySet to proxy for a model manager in some cases.
922.         """
923.         return self._chain()
924. 
925.     def filter(self, *args, **kwargs):
926.         """
927.         Return a new QuerySet instance with the args ANDed to the existing
928.         set.
929.         """
930.         self._not_support_combined_queries('filter')
931.         return self._filter_or_exclude(False, *args, **kwargs)
932. 
933.     def exclude(self, *args, **kwargs):
934.         """
935.         Return a new QuerySet instance with NOT (args) ANDed to the existing
936.         set.
937.         """
938.         self._not_support_combined_queries('exclude')
939.         return self._filter_or_exclude(True, *args, **kwargs)
940. 
941.     def _filter_or_exclude(self, negate, *args, **kwargs):
942.         if args or kwargs:
943.             assert not self.query.is_sliced, \
944.                 "Cannot filter a query once a slice has been taken."
945. 
946.         clone = self._chain()
947.         if self._defer_next_filter:
948.             self._defer_next_filter = False
949.             clone._deferred_filter = negate, args, kwargs
950.         else:
951.             clone._filter_or_exclude_inplace(negate, *args, **kwargs)
952.         return clone
953. 
954.     def _filter_or_exclude_inplace(self, negate, *args, **kwargs):
955.         if negate:
956.             self._query.add_q(~Q(*args, **kwargs))
957.         else:
958.             self._query.add_q(Q(*args, **kwargs))
959. 
960.     def complex_filter(self, filter_obj):
961.         """
962.         Return a new QuerySet instance with filter_obj added to the filters.
963. 
964.         filter_obj can be a Q object or a dictionary of keyword lookup
965.         arguments.
966. 
967.         This exists to support framework features such as 'limit_choices_to',
968.         and usually it will be more natural to use other methods.
969.         """
970.         if isinstance(filter_obj, Q):
971.             clone = self._chain()
972.             clone.query.add_q(filter_obj)
973.             return clone
974.         else:
975.             return self._filter_or_exclude(False, **filter_obj)
976. 
977.     def _combinator_query(self, combinator, *other_qs, all=False):
978.         # Clone the query to inherit the select list and everything
979.         clone = self._chain()
980.         # Clear limits and ordering so they can be reapplied
981.         clone.query.clear_ordering(True)
982.         clone.query.clear_limits()
983.         clone.query.combined_queries = (self.query,) + tuple(qs.query for qs in other_qs)
984.         clone.query.combinator = combinator
985.         clone.query.combinator_all = all
986.         return clone
987. 
988.     def union(self, *other_qs, all=False):
989.         # If the query is an EmptyQuerySet, combine all nonempty querysets.
990.         if isinstance(self, EmptyQuerySet):
991.             qs = [q for q in other_qs if not isinstance(q, EmptyQuerySet)]
992.             return qs[0]._combinator_query('union', *qs[1:], all=all) if qs else self
993.         return self._combinator_query('union', *other_qs, all=all)
994. 
995.     def intersection(self, *other_qs):
996.         # If any query is an EmptyQuerySet, return it.
997.         if isinstance(self, EmptyQuerySet):
998.             return self
999.         for other in other_qs:
1000.             if isinstance(other, EmptyQuerySet):
1001.                 return other
1002.         return self._combinator_query('intersection', *other_qs)
1003. 
1004.     def difference(self, *other_qs):
1005.         # If the query is an EmptyQuerySet, return it.
1006.         if isinstance(self, EmptyQuerySet):
1007.             return self
1008.         return self._combinator_query('difference', *other_qs)
1009. 
1010.     def select_for_update(self, nowait=False, skip_locked=False, of=()):
1011.         """
1012.         Return a new QuerySet instance that will select objects with a
1013.         FOR UPDATE lock.
1014.         """
1015.         if nowait and skip_locked:
1016.             raise ValueError('The nowait option cannot be used with skip_locked.')
1017.         obj = self._chain()
1018.         obj._for_write = True
1019.         obj.query.select_for_update = True
1020.         obj.query.select_for_update_nowait = nowait
1021.         obj.query.select_for_update_skip_locked = skip_locked
1022.         obj.query.select_for_update_of = of
1023.         return obj
1024. 
1025.     def select_related(self, *fields):
1026.         """
1027.         Return a new QuerySet instance that will select related objects.
1028. 
1029.         If fields are specified, they must be ForeignKey fields and only those
1030.         related objects are included in the selection.
1031. 
1032.         If select_related(None) is called, clear the list.
1033.         """
1034.         self._not_support_combined_queries('select_related')
1035.         if self._fields is not None:
1036.             raise TypeError("Cannot call select_related() after .values() or .values_list()")
1037. 
1038.         obj = self._chain()
1039.         if fields == (None,):
1040.             obj.query.select_related = False
1041.         elif fields:
1042.             obj.query.add_select_related(fields)
1043.         else:
1044.             obj.query.select_related = True
1045.         return obj
1046. 
1047.     def prefetch_related(self, *lookups):
1048.         """
1049.         Return a new QuerySet instance that will prefetch the specified
1050.         Many-To-One and Many-To-Many related objects when the QuerySet is
1051.         evaluated.
1052. 
1053.         When prefetch_related() is called more than once, append to the list of
1054.         prefetch lookups. If prefetch_related(None) is called, clear the list.
1055.         """
1056.         self._not_support_combined_queries('prefetch_related')
1057.         clone = self._chain()
1058.         if lookups == (None,):
1059.             clone._prefetch_related_lookups = ()
1060.         else:
1061.             for lookup in lookups:
1062.                 if isinstance(lookup, Prefetch):
1063.                     lookup = lookup.prefetch_to
1064.                 lookup = lookup.split(LOOKUP_SEP, 1)[0]
1065.                 if lookup in self.query._filtered_relations:
1066.                     raise ValueError('prefetch_related() is not supported with FilteredRelation.')
1067.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1068.         return clone
1069. 
1070.     def annotate(self, *args, **kwargs):
1071.         """
1072.         Return a query set in which the returned objects have been annotated
1073.         with extra data or aggregations.
1074.         """
1075.         self._not_support_combined_queries('annotate')
1076.         self._validate_values_are_expressions(args + tuple(kwargs.values()), method_name='annotate')
1077.         annotations = {}
1078.         for arg in args:
1079.             # The default_alias property may raise a TypeError.
1080.             try:
1081.                 if arg.default_alias in kwargs:
1082.                     raise ValueError("The named annotation '%s' conflicts with the "
1083.                                      "default name for another annotation."
1084.                                      % arg.default_alias)
1085.             except TypeError:
1086.                 raise TypeError("Complex annotations require an alias")
1087.             annotations[arg.default_alias] = arg
1088.         annotations.update(kwargs)
1089. 
1090.         clone = self._chain()
1091.         names = self._fields
1092.         if names is None:
1093.             names = set(chain.from_iterable(
1094.                 (field.name, field.attname) if hasattr(field, 'attname') else (field.name,)
1095.                 for field in self.model._meta.get_fields()
1096.             ))
1097. 
1098.         for alias, annotation in annotations.items():
1099.             if alias in names:
1100.                 raise ValueError("The annotation '%s' conflicts with a field on "
1101.                                  "the model." % alias)
1102.             if isinstance(annotation, FilteredRelation):
1103.                 clone.query.add_filtered_relation(annotation, alias)
1104.             else:
1105.                 clone.query.add_annotation(annotation, alias, is_summary=False)
1106. 
1107.         for alias, annotation in clone.query.annotations.items():
1108.             if alias in annotations and annotation.contains_aggregate:
1109.                 if clone._fields is None:
1110.                     clone.query.group_by = True
1111.                 else:
1112.                     clone.query.set_group_by()
1113.                 break
1114. 
1115.         return clone
1116. 
1117.     def order_by(self, *field_names):
1118.         """Return a new QuerySet instance with the ordering changed."""
1119.         assert not self.query.is_sliced, \
1120.             "Cannot reorder a query once a slice has been taken."
1121.         obj = self._chain()
1122.         obj.query.clear_ordering(force_empty=False)
1123.         obj.query.add_ordering(*field_names)
1124.         return obj
1125. 
1126.     def distinct(self, *field_names):
1127.         """
1128.         Return a new QuerySet instance that will select only distinct results.
1129.         """
1130.         assert not self.query.is_sliced, \
1131.             "Cannot create distinct fields once a slice has been taken."
1132.         obj = self._chain()
1133.         obj.query.add_distinct_fields(*field_names)
1134.         return obj
1135. 
1136.     def extra(self, select=None, where=None, params=None, tables=None,
1137.               order_by=None, select_params=None):
1138.         """Add extra SQL fragments to the query."""
1139.         self._not_support_combined_queries('extra')
1140.         assert not self.query.is_sliced, \
1141.             "Cannot change a query once a slice has been taken"
1142.         clone = self._chain()
1143.         clone.query.add_extra(select, select_params, where, params, tables, order_by)
1144.         return clone
1145. 
1146.     def reverse(self):
1147.         """Reverse the ordering of the QuerySet."""
1148.         if self.query.is_sliced:
1149.             raise TypeError('Cannot reverse a query once a slice has been taken.')
1150.         clone = self._chain()
1151.         clone.query.standard_ordering = not clone.query.standard_ordering
1152.         return clone
1153. 
1154.     def defer(self, *fields):
1155.         """
1156.         Defer the loading of data for certain fields until they are accessed.
1157.         Add the set of deferred fields to any existing set of deferred fields.
1158.         The only exception to this is if None is passed in as the only
1159.         parameter, in which case removal all deferrals.
1160.         """
1161.         self._not_support_combined_queries('defer')
1162.         if self._fields is not None:
1163.             raise TypeError("Cannot call defer() after .values() or .values_list()")
1164.         clone = self._chain()
1165.         if fields == (None,):
1166.             clone.query.clear_deferred_loading()
1167.         else:
1168.             clone.query.add_deferred_loading(fields)
1169.         return clone
1170. 
1171.     def only(self, *fields):
1172.         """
1173.         Essentially, the opposite of defer(). Only the fields passed into this
1174.         method and that are not already specified as deferred are loaded
1175.         immediately when the queryset is evaluated.
1176.         """
1177.         self._not_support_combined_queries('only')
1178.         if self._fields is not None:
1179.             raise TypeError("Cannot call only() after .values() or .values_list()")
1180.         if fields == (None,):
1181.             # Can only pass None to defer(), not only(), as the rest option.
1182.             # That won't stop people trying to do this, so let's be explicit.
1183.             raise TypeError("Cannot pass None as an argument to only().")
1184.         for field in fields:
1185.             field = field.split(LOOKUP_SEP, 1)[0]
1186.             if field in self.query._filtered_relations:
1187.                 raise ValueError('only() is not supported with FilteredRelation.')
1188.         clone = self._chain()
1189.         clone.query.add_immediate_loading(fields)
1190.         return clone
1191. 
1192.     def using(self, alias):
1193.         """Select which database this QuerySet should execute against."""
1194.         clone = self._chain()
1195.         clone._db = alias
1196.         return clone
1197. 
1198.     ###################################
1199.     # PUBLIC INTROSPECTION ATTRIBUTES #
1200.     ###################################
1201. 
1202.     @property
1203.     def ordered(self):
1204.         """
1205.         Return True if the QuerySet is ordered -- i.e. has an order_by()
1206.         clause or a default ordering on the model (or is empty).
1207.         """
1208.         if isinstance(self, EmptyQuerySet):
1209.             return True
1210.         if self.query.extra_order_by or self.query.order_by:
1211.             return True
1212.         elif self.query.default_ordering and self.query.get_meta().ordering:
1213.             return True
1214.         else:
1215.             return False
1216. 
1217.     @property
1218.     def db(self):
1219.         """Return the database used if this query is executed now."""
1220.         if self._for_write:
1221.             return self._db or router.db_for_write(self.model, **self._hints)
1222.         return self._db or router.db_for_read(self.model, **self._hints)
1223. 
1224.     ###################
1225.     # PRIVATE METHODS #
1226.     ###################
1227. 
1228.     def _insert(self, objs, fields, returning_fields=None, raw=False, using=None, ignore_conflicts=False):
1229.         """
1230.         Insert a new record for the given model. This provides an interface to
1231.         the InsertQuery class and is how Model.save() is implemented.
1232.         """
1233.         self._for_write = True
1234.         if using is None:
1235.             using = self.db
1236.         query = sql.InsertQuery(self.model, ignore_conflicts=ignore_conflicts)
1237.         query.insert_values(fields, objs, raw=raw)
1238.         return query.get_compiler(using=using).execute_sql(returning_fields)
1239.     _insert.alters_data = True
1240.     _insert.queryset_only = False
1241. 
1242.     def _batched_insert(self, objs, fields, batch_size, ignore_conflicts=False):
1243.         """
1244.         Helper method for bulk_create() to insert objs one batch at a time.
1245.         """
1246.         if ignore_conflicts and not connections[self.db].features.supports_ignore_conflicts:
1247.             raise NotSupportedError('This database backend does not support ignoring conflicts.')
1248.         ops = connections[self.db].ops
1249.         max_batch_size = max(ops.bulk_batch_size(fields, objs), 1)
1250.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
1251.         inserted_rows = []
1252.         bulk_return = connections[self.db].features.can_return_rows_from_bulk_insert
1253.         for item in [objs[i:i + batch_size] for i in range(0, len(objs), batch_size)]:
1254.             if bulk_return and not ignore_conflicts:
1255.                 inserted_rows.extend(self._insert(
1256.                     item, fields=fields, using=self.db,
1257.                     returning_fields=self.model._meta.db_returning_fields,
1258.                     ignore_conflicts=ignore_conflicts,
1259.                 ))
1260.             else:
1261.                 self._insert(item, fields=fields, using=self.db, ignore_conflicts=ignore_conflicts)
1262.         return inserted_rows
1263. 
1264.     def _chain(self, **kwargs):
1265.         """
1266.         Return a copy of the current QuerySet that's ready for another
1267.         operation.
1268.         """
1269.         obj = self._clone()
1270.         if obj._sticky_filter:
1271.             obj.query.filter_is_sticky = True
1272.             obj._sticky_filter = False
1273.         obj.__dict__.update(kwargs)
1274.         return obj
1275. 
1276.     def _clone(self):
1277.         """
1278.         Return a copy of the current QuerySet. A lightweight alternative
1279.         to deepcopy().
1280.         """
1281.         c = self.__class__(model=self.model, query=self.query.chain(), using=self._db, hints=self._hints)
1282.         c._sticky_filter = self._sticky_filter
1283.         c._for_write = self._for_write
1284.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1285.         c._known_related_objects = self._known_related_objects
1286.         c._iterable_class = self._iterable_class
1287.         c._fields = self._fields
1288.         return c
1289. 
1290.     def _fetch_all(self):
1291.         if self._result_cache is None:
1292.             self._result_cache = list(self._iterable_class(self))
1293.         if self._prefetch_related_lookups and not self._prefetch_done:
1294.             self._prefetch_related_objects()
1295. 
1296.     def _next_is_sticky(self):
1297.         """
1298.         Indicate that the next filter call and the one following that should
1299.         be treated as a single filter. This is only important when it comes to
1300.         determining when to reuse tables for many-to-many filters. Required so
1301.         that we can filter naturally on the results of related managers.
1302. 
1303.         This doesn't return a clone of the current QuerySet (it returns
1304.         "self"). The method is only used internally and should be immediately
1305.         followed by a filter() that does create a clone.
1306.         """
1307.         self._sticky_filter = True
1308.         return self
1309. 
1310.     def _merge_sanity_check(self, other):
1311.         """Check that two QuerySet classes may be merged."""
1312.         if self._fields is not None and (
1313.                 set(self.query.values_select) != set(other.query.values_select) or
1314.                 set(self.query.extra_select) != set(other.query.extra_select) or
1315.                 set(self.query.annotation_select) != set(other.query.annotation_select)):
1316.             raise TypeError(
1317.                 "Merging '%s' classes must involve the same values in each case."
1318.                 % self.__class__.__name__
1319.             )
1320. 
1321.     def _merge_known_related_objects(self, other):
1322.         """
1323.         Keep track of all known related objects from either QuerySet instance.
1324.         """
1325.         for field, objects in other._known_related_objects.items():
1326.             self._known_related_objects.setdefault(field, {}).update(objects)
1327. 
1328.     def resolve_expression(self, *args, **kwargs):
1329.         if self._fields and len(self._fields) > 1:
1330.             # values() queryset can only be used as nested queries
1331.             # if they are set up to select only a single field.
1332.             raise TypeError('Cannot use multi-field values as a filter value.')
1333.         query = self.query.resolve_expression(*args, **kwargs)
1334.         query._db = self._db
1335.         return query
1336.     resolve_expression.queryset_only = True
1337. 
1338.     def _add_hints(self, **hints):
1339.         """
1340.         Update hinting information for use by routers. Add new key/values or
1341.         overwrite existing key/values.
1342.         """
1343.         self._hints.update(hints)
1344. 
1345.     def _has_filters(self):
1346.         """
1347.         Check if this QuerySet has any filtering going on. This isn't
1348.         equivalent with checking if all objects are present in results, for
1349.         example, qs[1:]._has_filters() -> False.
1350.         """
1351.         return self.query.has_filters()
1352. 
1353.     @staticmethod
1354.     def _validate_values_are_expressions(values, method_name):
1355.         invalid_args = sorted(str(arg) for arg in values if not hasattr(arg, 'resolve_expression'))
1356.         if invalid_args:
1357.             raise TypeError(
1358.                 'QuerySet.%s() received non-expression(s): %s.' % (
1359.                     method_name,
1360.                     ', '.join(invalid_args),
1361.                 )
1362.             )
1363. 
1364.     def _not_support_combined_queries(self, operation_name):
1365.         if self.query.combinator:
1366.             raise NotSupportedError(
1367.                 'Calling QuerySet.%s() after %s() is not supported.'
1368.                 % (operation_name, self.query.combinator)
1369.             )
1370. 
1371. 
1372. class InstanceCheckMeta(type):
1373.     def __instancecheck__(self, instance):
1374.         return isinstance(instance, QuerySet) and instance.query.is_empty()
1375. 
1376. 
1377. class EmptyQuerySet(metaclass=InstanceCheckMeta):
1378.     """
1379.     Marker class to checking if a queryset is empty by .none():
1380.         isinstance(qs.none(), EmptyQuerySet) -> True
1381.     """
1382. 
1383.     def __init__(self, *args, **kwargs):
1384.         raise TypeError("EmptyQuerySet can't be instantiated")
1385. 
1386. 
1387. class RawQuerySet:
1388.     """
1389.     Provide an iterator which converts the results of raw SQL queries into
1390.     annotated model instances.
1391.     """
1392.     def __init__(self, raw_query, model=None, query=None, params=None,
1393.                  translations=None, using=None, hints=None):
1394.         self.raw_query = raw_query
1395.         self.model = model
1396.         self._db = using
1397.         self._hints = hints or {}
1398.         self.query = query or sql.RawQuery(sql=raw_query, using=self.db, params=params)
1399.         self.params = params or ()
1400.         self.translations = translations or {}
1401.         self._result_cache = None
1402.         self._prefetch_related_lookups = ()
1403.         self._prefetch_done = False
1404. 
1405.     def resolve_model_init_order(self):
1406.         """Resolve the init field names and value positions."""
1407.         converter = connections[self.db].introspection.identifier_converter
1408.         model_init_fields = [f for f in self.model._meta.fields if converter(f.column) in self.columns]
1409.         annotation_fields = [(column, pos) for pos, column in enumerate(self.columns)
1410.                              if column not in self.model_fields]
1411.         model_init_order = [self.columns.index(converter(f.column)) for f in model_init_fields]
1412.         model_init_names = [f.attname for f in model_init_fields]
1413.         return model_init_names, model_init_order, annotation_fields
1414. 
1415.     def prefetch_related(self, *lookups):
1416.         """Same as QuerySet.prefetch_related()"""
1417.         clone = self._clone()
1418.         if lookups == (None,):
1419.             clone._prefetch_related_lookups = ()
1420.         else:
1421.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1422.         return clone
1423. 
1424.     def _prefetch_related_objects(self):
1425.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
1426.         self._prefetch_done = True
1427. 
1428.     def _clone(self):
1429.         """Same as QuerySet._clone()"""
1430.         c = self.__class__(
1431.             self.raw_query, model=self.model, query=self.query, params=self.params,
1432.             translations=self.translations, using=self._db, hints=self._hints
1433.         )
1434.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1435.         return c
1436. 
1437.     def _fetch_all(self):
1438.         if self._result_cache is None:
1439.             self._result_cache = list(self.iterator())
1440.         if self._prefetch_related_lookups and not self._prefetch_done:
1441.             self._prefetch_related_objects()
1442. 
1443.     def __len__(self):
1444.         self._fetch_all()
1445.         return len(self._result_cache)
1446. 
1447.     def __bool__(self):
1448.         self._fetch_all()
1449.         return bool(self._result_cache)
1450. 
1451.     def __iter__(self):
1452.         self._fetch_all()
1453.         return iter(self._result_cache)
1454. 
1455.     def iterator(self):
1456.         # Cache some things for performance reasons outside the loop.
1457.         db = self.db
1458.         compiler = connections[db].ops.compiler('SQLCompiler')(
1459.             self.query, connections[db], db
1460.         )
1461. 
1462.         query = iter(self.query)
1463. 
1464.         try:
1465.             model_init_names, model_init_pos, annotation_fields = self.resolve_model_init_order()
1466.             if self.model._meta.pk.attname not in model_init_names:
1467.                 raise exceptions.FieldDoesNotExist(
1468.                     'Raw query must include the primary key'
1469.                 )
1470.             model_cls = self.model
1471.             fields = [self.model_fields.get(c) for c in self.columns]
1472.             converters = compiler.get_converters([
1473.                 f.get_col(f.model._meta.db_table) if f else None for f in fields
1474.             ])
1475.             if converters:
1476.                 query = compiler.apply_converters(query, converters)
1477.             for values in query:
1478.                 # Associate fields to values
1479.                 model_init_values = [values[pos] for pos in model_init_pos]
1480.                 instance = model_cls.from_db(db, model_init_names, model_init_values)
1481.                 if annotation_fields:
1482.                     for column, pos in annotation_fields:
1483.                         setattr(instance, column, values[pos])
1484.                 yield instance
1485.         finally:
1486.             # Done iterating the Query. If it has its own cursor, close it.
1487.             if hasattr(self.query, 'cursor') and self.query.cursor:
1488.                 self.query.cursor.close()
1489. 
1490.     def __repr__(self):
1491.         return "<%s: %s>" % (self.__class__.__name__, self.query)
1492. 
1493.     def __getitem__(self, k):
1494.         return list(self)[k]
1495. 
1496.     @property
1497.     def db(self):
1498.         """Return the database used if this query is executed now."""
1499.         return self._db or router.db_for_read(self.model, **self._hints)
1500. 
1501.     def using(self, alias):
1502.         """Select the database this RawQuerySet should execute against."""
1503.         return RawQuerySet(
1504.             self.raw_query, model=self.model,
1505.             query=self.query.chain(using=alias),
1506.             params=self.params, translations=self.translations,
1507.             using=alias,
1508.         )
1509. 
1510.     @cached_property
1511.     def columns(self):
1512.         """
1513.         A list of model field names in the order they'll appear in the
1514.         query results.
1515.         """
1516.         columns = self.query.get_columns()
1517.         # Adjust any column names which don't match field names
1518.         for (query_name, model_name) in self.translations.items():
1519.             # Ignore translations for nonexistent column names
1520.             try:
1521.                 index = columns.index(query_name)
1522.             except ValueError:
1523.                 pass
1524.             else:
1525.                 columns[index] = model_name
1526.         return columns
1527. 
1528.     @cached_property
1529.     def model_fields(self):
1530.         """A dict mapping column names to model field names."""
1531.         converter = connections[self.db].introspection.identifier_converter
1532.         model_fields = {}
1533.         for field in self.model._meta.fields:
1534.             name, column = field.get_attname_column()
1535.             model_fields[converter(column)] = field
1536.         return model_fields
1537. 
1538. 
1539. class Prefetch:
1540.     def __init__(self, lookup, queryset=None, to_attr=None):
1541.         # `prefetch_through` is the path we traverse to perform the prefetch.
1542.         self.prefetch_through = lookup
1543.         # `prefetch_to` is the path to the attribute that stores the result.
1544.         self.prefetch_to = lookup
1545.         if queryset is not None and (
1546.             isinstance(queryset, RawQuerySet) or (
1547.                 hasattr(queryset, '_iterable_class') and
1548.                 not issubclass(queryset._iterable_class, ModelIterable)
1549.             )
1550.         ):
1551.             raise ValueError(
1552.                 'Prefetch querysets cannot use raw(), values(), and '
1553.                 'values_list().'
1554.             )
1555.         if to_attr:
1556.             self.prefetch_to = LOOKUP_SEP.join(lookup.split(LOOKUP_SEP)[:-1] + [to_attr])
1557. 
1558.         self.queryset = queryset
1559.         self.to_attr = to_attr
1560. 
1561.     def __getstate__(self):
1562.         obj_dict = self.__dict__.copy()
1563.         if self.queryset is not None:
1564.             # Prevent the QuerySet from being evaluated
1565.             obj_dict['queryset'] = self.queryset._chain(
1566.                 _result_cache=[],
1567.                 _prefetch_done=True,
1568.             )
1569.         return obj_dict
1570. 
1571.     def add_prefix(self, prefix):
1572.         self.prefetch_through = prefix + LOOKUP_SEP + self.prefetch_through
1573.         self.prefetch_to = prefix + LOOKUP_SEP + self.prefetch_to
1574. 
1575.     def get_current_prefetch_to(self, level):
1576.         return LOOKUP_SEP.join(self.prefetch_to.split(LOOKUP_SEP)[:level + 1])
1577. 
1578.     def get_current_to_attr(self, level):
1579.         parts = self.prefetch_to.split(LOOKUP_SEP)
1580.         to_attr = parts[level]
1581.         as_attr = self.to_attr and level == len(parts) - 1
1582.         return to_attr, as_attr
1583. 
1584.     def get_current_queryset(self, level):
1585.         if self.get_current_prefetch_to(level) == self.prefetch_to:
1586.             return self.queryset
1587.         return None
1588. 
1589.     def __eq__(self, other):
1590.         if not isinstance(other, Prefetch):
1591.             return NotImplemented
1592.         return self.prefetch_to == other.prefetch_to
1593. 
1594.     def __hash__(self):
1595.         return hash((self.__class__, self.prefetch_to))
1596. 
1597. 
1598. def normalize_prefetch_lookups(lookups, prefix=None):
1599.     """Normalize lookups into Prefetch objects."""
1600.     ret = []
1601.     for lookup in lookups:
1602.         if not isinstance(lookup, Prefetch):
1603.             lookup = Prefetch(lookup)
1604.         if prefix:
1605.             lookup.add_prefix(prefix)
1606.         ret.append(lookup)
1607.     return ret
1608. 
1609. 
1610. def prefetch_related_objects(model_instances, *related_lookups):
1611.     """
1612.     Populate prefetched object caches for a list of model instances based on
1613.     the lookups/Prefetch instances given.
1614.     """
1615.     if not model_instances:
1616.         return  # nothing to do
1617. 
1618.     # We need to be able to dynamically add to the list of prefetch_related
1619.     # lookups that we look up (see below).  So we need some book keeping to
1620.     # ensure we don't do duplicate work.
1621.     done_queries = {}    # dictionary of things like 'foo__bar': [results]
1622. 
1623.     auto_lookups = set()  # we add to this as we go through.
1624.     followed_descriptors = set()  # recursion protection
1625. 
1626.     all_lookups = normalize_prefetch_lookups(reversed(related_lookups))
1627.     while all_lookups:
1628.         lookup = all_lookups.pop()
1629.         if lookup.prefetch_to in done_queries:
1630.             if lookup.queryset is not None:
1631.                 raise ValueError("'%s' lookup was already seen with a different queryset. "
1632.                                  "You may need to adjust the ordering of your lookups." % lookup.prefetch_to)
1633. 
1634.             continue
1635. 
1636.         # Top level, the list of objects to decorate is the result cache
1637.         # from the primary QuerySet. It won't be for deeper levels.
1638.         obj_list = model_instances
1639. 
1640.         through_attrs = lookup.prefetch_through.split(LOOKUP_SEP)
1641.         for level, through_attr in enumerate(through_attrs):
1642.             # Prepare main instances
1643.             if not obj_list:
1644.                 break
1645. 
1646.             prefetch_to = lookup.get_current_prefetch_to(level)
1647.             if prefetch_to in done_queries:
1648.                 # Skip any prefetching, and any object preparation
1649.                 obj_list = done_queries[prefetch_to]
1650.                 continue
1651. 
1652.             # Prepare objects:
1653.             good_objects = True
1654.             for obj in obj_list:
1655.                 # Since prefetching can re-use instances, it is possible to have
1656.                 # the same instance multiple times in obj_list, so obj might
1657.                 # already be prepared.
1658.                 if not hasattr(obj, '_prefetched_objects_cache'):
1659.                     try:
1660.                         obj._prefetched_objects_cache = {}
1661.                     except (AttributeError, TypeError):
1662.                         # Must be an immutable object from
1663.                         # values_list(flat=True), for example (TypeError) or
1664.                         # a QuerySet subclass that isn't returning Model
1665.                         # instances (AttributeError), either in Django or a 3rd
1666.                         # party. prefetch_related() doesn't make sense, so quit.
1667.                         good_objects = False
1668.                         break
1669.             if not good_objects:
1670.                 break
1671. 
1672.             # Descend down tree
1673. 
1674.             # We assume that objects retrieved are homogeneous (which is the premise
1675.             # of prefetch_related), so what applies to first object applies to all.
1676.             first_obj = obj_list[0]
1677.             to_attr = lookup.get_current_to_attr(level)[0]
1678.             prefetcher, descriptor, attr_found, is_fetched = get_prefetcher(first_obj, through_attr, to_attr)
1679. 
1680.             if not attr_found:
1681.                 raise AttributeError("Cannot find '%s' on %s object, '%s' is an invalid "
1682.                                      "parameter to prefetch_related()" %
1683.                                      (through_attr, first_obj.__class__.__name__, lookup.prefetch_through))
1684. 
1685.             if level == len(through_attrs) - 1 and prefetcher is None:
1686.                 # Last one, this *must* resolve to something that supports
1687.                 # prefetching, otherwise there is no point adding it and the
1688.                 # developer asking for it has made a mistake.
1689.                 raise ValueError("'%s' does not resolve to an item that supports "
1690.                                  "prefetching - this is an invalid parameter to "
1691.                                  "prefetch_related()." % lookup.prefetch_through)
1692. 
1693.             if prefetcher is not None and not is_fetched:
1694.                 obj_list, additional_lookups = prefetch_one_level(obj_list, prefetcher, lookup, level)
1695.                 # We need to ensure we don't keep adding lookups from the
1696.                 # same relationships to stop infinite recursion. So, if we
1697.                 # are already on an automatically added lookup, don't add
1698.                 # the new lookups from relationships we've seen already.
1699.                 if not (prefetch_to in done_queries and lookup in auto_lookups and descriptor in followed_descriptors):
1700.                     done_queries[prefetch_to] = obj_list
1701.                     new_lookups = normalize_prefetch_lookups(reversed(additional_lookups), prefetch_to)
1702.                     auto_lookups.update(new_lookups)
1703.                     all_lookups.extend(new_lookups)
1704.                 followed_descriptors.add(descriptor)
1705.             else:
1706.                 # Either a singly related object that has already been fetched
1707.                 # (e.g. via select_related), or hopefully some other property
1708.                 # that doesn't support prefetching but needs to be traversed.
1709. 
1710.                 # We replace the current list of parent objects with the list
1711.                 # of related objects, filtering out empty or missing values so
1712.                 # that we can continue with nullable or reverse relations.
1713.                 new_obj_list = []
1714.                 for obj in obj_list:
1715.                     if through_attr in getattr(obj, '_prefetched_objects_cache', ()):
1716.                         # If related objects have been prefetched, use the
1717.                         # cache rather than the object's through_attr.
1718.                         new_obj = list(obj._prefetched_objects_cache.get(through_attr))
1719.                     else:
1720.                         try:
1721.                             new_obj = getattr(obj, through_attr)
1722.                         except exceptions.ObjectDoesNotExist:
1723.                             continue
1724.                     if new_obj is None:
1725.                         continue
1726.                     # We special-case `list` rather than something more generic
1727.                     # like `Iterable` because we don't want to accidentally match
1728.                     # user models that define __iter__.
1729.                     if isinstance(new_obj, list):
1730.                         new_obj_list.extend(new_obj)
1731.                     else:
1732.                         new_obj_list.append(new_obj)
1733.                 obj_list = new_obj_list
1734. 
1735. 
1736. def get_prefetcher(instance, through_attr, to_attr):
1737.     """
1738.     For the attribute 'through_attr' on the given instance, find
1739.     an object that has a get_prefetch_queryset().
1740.     Return a 4 tuple containing:
1741.     (the object with get_prefetch_queryset (or None),
1742.      the descriptor object representing this relationship (or None),
1743.      a boolean that is False if the attribute was not found at all,
1744.      a boolean that is True if the attribute has already been fetched)
1745.     """
1746.     prefetcher = None
1747.     is_fetched = False
1748. 
1749.     # For singly related objects, we have to avoid getting the attribute
1750.     # from the object, as this will trigger the query. So we first try
1751.     # on the class, in order to get the descriptor object.
1752.     rel_obj_descriptor = getattr(instance.__class__, through_attr, None)
1753.     if rel_obj_descriptor is None:
1754.         attr_found = hasattr(instance, through_attr)
1755.     else:
1756.         attr_found = True
1757.         if rel_obj_descriptor:
1758.             # singly related object, descriptor object has the
1759.             # get_prefetch_queryset() method.
1760.             if hasattr(rel_obj_descriptor, 'get_prefetch_queryset'):
1761.                 prefetcher = rel_obj_descriptor
1762.                 if rel_obj_descriptor.is_cached(instance):
1763.                     is_fetched = True
1764.             else:
1765.                 # descriptor doesn't support prefetching, so we go ahead and get
1766.                 # the attribute on the instance rather than the class to
1767.                 # support many related managers
1768.                 rel_obj = getattr(instance, through_attr)
1769.                 if hasattr(rel_obj, 'get_prefetch_queryset'):
1770.                     prefetcher = rel_obj
1771.                 if through_attr != to_attr:
1772.                     # Special case cached_property instances because hasattr
1773.                     # triggers attribute computation and assignment.
1774.                     if isinstance(getattr(instance.__class__, to_attr, None), cached_property):
1775.                         is_fetched = to_attr in instance.__dict__
1776.                     else:
1777.                         is_fetched = hasattr(instance, to_attr)
1778.                 else:
1779.                     is_fetched = through_attr in instance._prefetched_objects_cache
1780.     return prefetcher, rel_obj_descriptor, attr_found, is_fetched
1781. 
1782. 
1783. def prefetch_one_level(instances, prefetcher, lookup, level):
1784.     """
1785.     Helper function for prefetch_related_objects().
1786. 
1787.     Run prefetches on all instances using the prefetcher object,
1788.     assigning results to relevant caches in instance.
1789. 
1790.     Return the prefetched objects along with any additional prefetches that
1791.     must be done due to prefetch_related lookups found from default managers.
1792.     """
1793.     # prefetcher must have a method get_prefetch_queryset() which takes a list
1794.     # of instances, and returns a tuple:
1795. 
1796.     # (queryset of instances of self.model that are related to passed in instances,
1797.     #  callable that gets value to be matched for returned instances,
1798.     #  callable that gets value to be matched for passed in instances,
1799.     #  boolean that is True for singly related objects,
1800.     #  cache or field name to assign to,
1801.     #  boolean that is True when the previous argument is a cache name vs a field name).
1802. 
1803.     # The 'values to be matched' must be hashable as they will be used
1804.     # in a dictionary.
1805. 
1806.     rel_qs, rel_obj_attr, instance_attr, single, cache_name, is_descriptor = (
1807.         prefetcher.get_prefetch_queryset(instances, lookup.get_current_queryset(level)))
1808.     # We have to handle the possibility that the QuerySet we just got back
1809.     # contains some prefetch_related lookups. We don't want to trigger the
1810.     # prefetch_related functionality by evaluating the query. Rather, we need
1811.     # to merge in the prefetch_related lookups.
1812.     # Copy the lookups in case it is a Prefetch object which could be reused
1813.     # later (happens in nested prefetch_related).
1814.     additional_lookups = [
1815.         copy.copy(additional_lookup) for additional_lookup
1816.         in getattr(rel_qs, '_prefetch_related_lookups', ())
1817.     ]
1818.     if additional_lookups:
1819.         # Don't need to clone because the manager should have given us a fresh
1820.         # instance, so we access an internal instead of using public interface
1821.         # for performance reasons.
1822.         rel_qs._prefetch_related_lookups = ()
1823. 
1824.     all_related_objects = list(rel_qs)
1825. 
1826.     rel_obj_cache = {}
1827.     for rel_obj in all_related_objects:
1828.         rel_attr_val = rel_obj_attr(rel_obj)
1829.         rel_obj_cache.setdefault(rel_attr_val, []).append(rel_obj)
1830. 
1831.     to_attr, as_attr = lookup.get_current_to_attr(level)
1832.     # Make sure `to_attr` does not conflict with a field.
1833.     if as_attr and instances:
1834.         # We assume that objects retrieved are homogeneous (which is the premise
1835.         # of prefetch_related), so what applies to first object applies to all.
1836.         model = instances[0].__class__
1837.         try:
1838.             model._meta.get_field(to_attr)
1839.         except exceptions.FieldDoesNotExist:
1840.             pass
1841.         else:
1842.             msg = 'to_attr={} conflicts with a field on the {} model.'
1843.             raise ValueError(msg.format(to_attr, model.__name__))
1844. 
1845.     # Whether or not we're prefetching the last part of the lookup.
1846.     leaf = len(lookup.prefetch_through.split(LOOKUP_SEP)) - 1 == level
1847. 
1848.     for obj in instances:
1849.         instance_attr_val = instance_attr(obj)
1850.         vals = rel_obj_cache.get(instance_attr_val, [])
1851. 
1852.         if single:
1853.             val = vals[0] if vals else None
1854.             if as_attr:
1855.                 # A to_attr has been given for the prefetch.
1856.                 setattr(obj, to_attr, val)
1857.             elif is_descriptor:
1858.                 # cache_name points to a field name in obj.
1859.                 # This field is a descriptor for a related object.
1860.                 setattr(obj, cache_name, val)
1861.             else:
1862.                 # No to_attr has been given for this prefetch operation and the
1863.                 # cache_name does not point to a descriptor. Store the value of
1864.                 # the field in the object's field cache.
1865.                 obj._state.fields_cache[cache_name] = val
1866.         else:
1867.             if as_attr:
1868.                 setattr(obj, to_attr, vals)
1869.             else:
1870.                 manager = getattr(obj, to_attr)
1871.                 if leaf and lookup.queryset is not None:
1872.                     qs = manager._apply_rel_filters(lookup.queryset)
1873.                 else:
1874.                     qs = manager.get_queryset()
1875.                 qs._result_cache = vals
1876.                 # We don't want the individual qs doing prefetch_related now,
1877.                 # since we have merged this into the current work.
1878.                 qs._prefetch_done = True
1879.                 obj._prefetched_objects_cache[cache_name] = qs
1880.     return all_related_objects, additional_lookups
1881. 
1882. 
1883. class RelatedPopulator:
1884.     """
1885.     RelatedPopulator is used for select_related() object instantiation.
1886. 
1887.     The idea is that each select_related() model will be populated by a
1888.     different RelatedPopulator instance. The RelatedPopulator instances get
1889.     klass_info and select (computed in SQLCompiler) plus the used db as
1890.     input for initialization. That data is used to compute which columns
1891.     to use, how to instantiate the model, and how to populate the links
1892.     between the objects.
1893. 
1894.     The actual creation of the objects is done in populate() method. This
1895.     method gets row and from_obj as input and populates the select_related()
1896.     model instance.
1897.     """
1898.     def __init__(self, klass_info, select, db):
1899.         self.db = db
1900.         # Pre-compute needed attributes. The attributes are:
1901.         #  - model_cls: the possibly deferred model class to instantiate
1902.         #  - either:
1903.         #    - cols_start, cols_end: usually the columns in the row are
1904.         #      in the same order model_cls.__init__ expects them, so we
1905.         #      can instantiate by model_cls(*row[cols_start:cols_end])
1906.         #    - reorder_for_init: When select_related descends to a child
1907.         #      class, then we want to reuse the already selected parent
1908.         #      data. However, in this case the parent data isn't necessarily
1909.         #      in the same order that Model.__init__ expects it to be, so
1910.         #      we have to reorder the parent data. The reorder_for_init
1911.         #      attribute contains a function used to reorder the field data
1912.         #      in the order __init__ expects it.
1913.         #  - pk_idx: the index of the primary key field in the reordered
1914.         #    model data. Used to check if a related object exists at all.
1915.         #  - init_list: the field attnames fetched from the database. For
1916.         #    deferred models this isn't the same as all attnames of the
1917.         #    model's fields.
1918.         #  - related_populators: a list of RelatedPopulator instances if
1919.         #    select_related() descends to related models from this model.
1920.         #  - local_setter, remote_setter: Methods to set cached values on
1921.         #    the object being populated and on the remote object. Usually
1922.         #    these are Field.set_cached_value() methods.
1923.         select_fields = klass_info['select_fields']
1924.         from_parent = klass_info['from_parent']
1925.         if not from_parent:
1926.             self.cols_start = select_fields[0]
1927.             self.cols_end = select_fields[-1] + 1
1928.             self.init_list = [
1929.                 f[0].target.attname for f in select[self.cols_start:self.cols_end]
1930.             ]
1931.             self.reorder_for_init = None
1932.         else:
1933.             attname_indexes = {select[idx][0].target.attname: idx for idx in select_fields}
1934.             model_init_attnames = (f.attname for f in klass_info['model']._meta.concrete_fields)
1935.             self.init_list = [attname for attname in model_init_attnames if attname in attname_indexes]
1936.             self.reorder_for_init = operator.itemgetter(*[attname_indexes[attname] for attname in self.init_list])
1937. 
1938.         self.model_cls = klass_info['model']
1939.         self.pk_idx = self.init_list.index(self.model_cls._meta.pk.attname)
1940.         self.related_populators = get_related_populators(klass_info, select, self.db)
1941.         self.local_setter = klass_info['local_setter']
1942.         self.remote_setter = klass_info['remote_setter']
1943. 
1944.     def populate(self, row, from_obj):
1945.         if self.reorder_for_init:
1946.             obj_data = self.reorder_for_init(row)
1947.         else:
1948.             obj_data = row[self.cols_start:self.cols_end]
1949.         if obj_data[self.pk_idx] is None:
1950.             obj = None
1951.         else:
1952.             obj = self.model_cls.from_db(self.db, self.init_list, obj_data)
1953.             for rel_iter in self.related_populators:
1954.                 rel_iter.populate(row, obj)
1955.         self.local_setter(from_obj, obj)
1956.         if obj is not None:
1957.             self.remote_setter(obj, from_obj)
1958. 
1959. 
1960. def get_related_populators(klass_info, select, db):
1961.     iterators = []
1962.     related_klass_infos = klass_info.get('related_klass_infos', [])
1963.     for rel_klass_info in related_klass_infos:
1964.         rel_cls = RelatedPopulator(rel_klass_info, select, db)
1965.         iterators.append(rel_cls)
1966.     return iterators

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-22 16:45:48,442 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user has requested the full content of the file 'django/db/models/query.py'. The provided context contains the content of this file from line 1 to 1966. Therefore, to fulfill the request, the entire content of the file is extracted.", relative_path='django/db/models/query.py', start_line=1, end_line=1966)]
2025-12-22 16:45:48,451 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file django/db/models/query.py.
2025-12-22 16:45:48,451 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-22 16:45:48,451 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-22 16:45:48,451 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-22 16:45:48,452 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-22 16:45:48,453 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Description: Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Patch information:
diff --git a/django/db/models/query.py b/django/db/models/query.py
index d9c9b0db04..336741f126 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -689,8 +689,19 @@ class QuerySet:
         """
         assert not self.query.is_sliced, \
             "Cannot use 'limit' or 'offset' with in_bulk"
-        if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
-            raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
+        if field_name != 'pk':
+            field = self.model._meta.get_field(field_name)
+            is_unique = field.unique
+            
+            # Also check for single-field UniqueConstraints
+            if not is_unique:
+                for constraint in self.model._meta.total_unique_constraints:
+                    if len(constraint.fields) == 1 and constraint.fields[0] == field_name:
+                        is_unique = True
+                        break
+            
+            if not is_unique:
+                raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
         if id_list is not None:
             if not id_list:
                 return {}
diff --git a/test_in_bulk_unique_constraint.py b/test_in_bulk_unique_constraint.py
new file mode 100644
index 0000000000..0cbd029f19
--- /dev/null
+++ b/test_in_bulk_unique_constraint.py
@@ -0,0 +1,43 @@
+from django.db import models
+from django.test import TestCase
+
+class Article(models.Model):
+    slug = models.CharField(max_length=255)
+    
+    class Meta:
+        constraints = [
+            models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
+        ]
+
+class TestInBulkWithUniqueConstraint(TestCase):
+    def setUp(self):
+        # Create some test articles
+        self.article1 = Article.objects.create(slug="article-1")
+        self.article2 = Article.objects.create(slug="article-2")
+        self.article3 = Article.objects.create(slug="article-3")
+    
+    def test_in_bulk_with_unique_constraint(self):
+        # Test that in_bulk works with a field that has a UniqueConstraint
+        slug_list = ["article-1", "article-2", "article-3"]
+        result = Article.objects.in_bulk(field_name="slug", id_list=slug_list)
+        
+        # Verify that we get the expected results
+        self.assertEqual(len(result), 3)
+        self.assertEqual(result["article-1"].pk, self.article1.pk)
+        self.assertEqual(result["article-2"].pk, self.article2.pk)
+        self.assertEqual(result["article-3"].pk, self.article3.pk)
+    
+    def test_in_bulk_without_id_list(self):
+        # Test that in_bulk works without providing an id_list
+        result = Article.objects.in_bulk(field_name="slug")
+        
+        # Verify that we get all articles
+        self.assertEqual(len(result), 3)
+        self.assertIn("article-1", result)
+        self.assertIn("article-2", result)
+        self.assertIn("article-3", result)
+    
+    def test_in_bulk_with_empty_list(self):
+        # Test that in_bulk returns an empty dict when given an empty list
+        result = Article.objects.in_bulk(field_name="slug", id_list=[])
+        self.assertEqual(result, {})
\ No newline at end of file


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file django/db/models/query.py.
Extra Requirements: 
Purpose: This file contains the `QuerySet.in_bulk()` method that needs to be modified, and seeing its full content is essential to understanding the existing implementation and the impact of the proposed change.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/query.py
Line number range: 1 - 1966
Content:
1. """
2. The main QuerySet implementation. This provides the public API for the ORM.
3. """
4. 
5. import copy
6. import operator
7. import warnings
8. from collections import namedtuple
9. from functools import lru_cache
10. from itertools import chain
11. 
12. from django.conf import settings
13. from django.core import exceptions
14. from django.db import (
15.     DJANGO_VERSION_PICKLE_KEY, IntegrityError, NotSupportedError, connections,
16.     router, transaction,
17. )
18. from django.db.models import AutoField, DateField, DateTimeField, sql
19. from django.db.models.constants import LOOKUP_SEP
20. from django.db.models.deletion import Collector
21. from django.db.models.expressions import Case, Expression, F, Value, When
22. from django.db.models.functions import Cast, Trunc
23. from django.db.models.query_utils import FilteredRelation, Q
24. from django.db.models.sql.constants import CURSOR, GET_ITERATOR_CHUNK_SIZE
25. from django.db.models.utils import resolve_callables
26. from django.utils import timezone
27. from django.utils.functional import cached_property, partition
28. from django.utils.version import get_version
29. 
30. # The maximum number of results to fetch in a get() query.
31. MAX_GET_RESULTS = 21
32. 
33. # The maximum number of items to display in a QuerySet.__repr__
34. REPR_OUTPUT_SIZE = 20
35. 
36. 
37. class BaseIterable:
38.     def __init__(self, queryset, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
39.         self.queryset = queryset
40.         self.chunked_fetch = chunked_fetch
41.         self.chunk_size = chunk_size
42. 
43. 
44. class ModelIterable(BaseIterable):
45.     """Iterable that yields a model instance for each row."""
46. 
47.     def __iter__(self):
48.         queryset = self.queryset
49.         db = queryset.db
50.         compiler = queryset.query.get_compiler(using=db)
51.         # Execute the query. This will also fill compiler.select, klass_info,
52.         # and annotations.
53.         results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
54.         select, klass_info, annotation_col_map = (compiler.select, compiler.klass_info,
55.                                                   compiler.annotation_col_map)
56.         model_cls = klass_info['model']
57.         select_fields = klass_info['select_fields']
58.         model_fields_start, model_fields_end = select_fields[0], select_fields[-1] + 1
59.         init_list = [f[0].target.attname
60.                      for f in select[model_fields_start:model_fields_end]]
61.         related_populators = get_related_populators(klass_info, select, db)
62.         known_related_objects = [
63.             (field, related_objs, operator.attrgetter(*[
64.                 field.attname
65.                 if from_field == 'self' else
66.                 queryset.model._meta.get_field(from_field).attname
67.                 for from_field in field.from_fields
68.             ])) for field, related_objs in queryset._known_related_objects.items()
69.         ]
70.         for row in compiler.results_iter(results):
71.             obj = model_cls.from_db(db, init_list, row[model_fields_start:model_fields_end])
72.             for rel_populator in related_populators:
73.                 rel_populator.populate(row, obj)
74.             if annotation_col_map:
75.                 for attr_name, col_pos in annotation_col_map.items():
76.                     setattr(obj, attr_name, row[col_pos])
77. 
78.             # Add the known related objects to the model.
79.             for field, rel_objs, rel_getter in known_related_objects:
80.                 # Avoid overwriting objects loaded by, e.g., select_related().
81.                 if field.is_cached(obj):
82.                     continue
83.                 rel_obj_id = rel_getter(obj)
84.                 try:
85.                     rel_obj = rel_objs[rel_obj_id]
86.                 except KeyError:
87.                     pass  # May happen in qs1 | qs2 scenarios.
88.                 else:
89.                     setattr(obj, field.name, rel_obj)
90. 
91.             yield obj
92. 
93. 
94. class ValuesIterable(BaseIterable):
95.     """
96.     Iterable returned by QuerySet.values() that yields a dict for each row.
97.     """
98. 
99.     def __iter__(self):
100.         queryset = self.queryset
101.         query = queryset.query
102.         compiler = query.get_compiler(queryset.db)
103. 
104.         # extra(select=...) cols are always at the start of the row.
105.         names = [
106.             *query.extra_select,
107.             *query.values_select,
108.             *query.annotation_select,
109.         ]
110.         indexes = range(len(names))
111.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
112.             yield {names[i]: row[i] for i in indexes}
113. 
114. 
115. class ValuesListIterable(BaseIterable):
116.     """
117.     Iterable returned by QuerySet.values_list(flat=False) that yields a tuple
118.     for each row.
119.     """
120. 
121.     def __iter__(self):
122.         queryset = self.queryset
123.         query = queryset.query
124.         compiler = query.get_compiler(queryset.db)
125. 
126.         if queryset._fields:
127.             # extra(select=...) cols are always at the start of the row.
128.             names = [
129.                 *query.extra_select,
130.                 *query.values_select,
131.                 *query.annotation_select,
132.             ]
133.             fields = [*queryset._fields, *(f for f in query.annotation_select if f not in queryset._fields)]
134.             if fields != names:
135.                 # Reorder according to fields.
136.                 index_map = {name: idx for idx, name in enumerate(names)}
137.                 rowfactory = operator.itemgetter(*[index_map[f] for f in fields])
138.                 return map(
139.                     rowfactory,
140.                     compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
141.                 )
142.         return compiler.results_iter(tuple_expected=True, chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
143. 
144. 
145. class NamedValuesListIterable(ValuesListIterable):
146.     """
147.     Iterable returned by QuerySet.values_list(named=True) that yields a
148.     namedtuple for each row.
149.     """
150. 
151.     @staticmethod
152.     @lru_cache()
153.     def create_namedtuple_class(*names):
154.         # Cache namedtuple() with @lru_cache() since it's too slow to be
155.         # called for every QuerySet evaluation.
156.         return namedtuple('Row', names)
157. 
158.     def __iter__(self):
159.         queryset = self.queryset
160.         if queryset._fields:
161.             names = queryset._fields
162.         else:
163.             query = queryset.query
164.             names = [*query.extra_select, *query.values_select, *query.annotation_select]
165.         tuple_class = self.create_namedtuple_class(*names)
166.         new = tuple.__new__
167.         for row in super().__iter__():
168.             yield new(tuple_class, row)
169. 
170. 
171. class FlatValuesListIterable(BaseIterable):
172.     """
173.     Iterable returned by QuerySet.values_list(flat=True) that yields single
174.     values.
175.     """
176. 
177.     def __iter__(self):
178.         queryset = self.queryset
179.         compiler = queryset.query.get_compiler(queryset.db)
180.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
181.             yield row[0]
182. 
183. 
184. class QuerySet:
185.     """Represent a lazy database lookup for a set of objects."""
186. 
187.     def __init__(self, model=None, query=None, using=None, hints=None):
188.         self.model = model
189.         self._db = using
190.         self._hints = hints or {}
191.         self._query = query or sql.Query(self.model)
192.         self._result_cache = None
193.         self._sticky_filter = False
194.         self._for_write = False
195.         self._prefetch_related_lookups = ()
196.         self._prefetch_done = False
197.         self._known_related_objects = {}  # {rel_field: {pk: rel_obj}}
198.         self._iterable_class = ModelIterable
199.         self._fields = None
200.         self._defer_next_filter = False
201.         self._deferred_filter = None
202. 
203.     @property
204.     def query(self):
205.         if self._deferred_filter:
206.             negate, args, kwargs = self._deferred_filter
207.             self._filter_or_exclude_inplace(negate, *args, **kwargs)
208.             self._deferred_filter = None
209.         return self._query
210. 
211.     @query.setter
212.     def query(self, value):
213.         self._query = value
214. 
215.     def as_manager(cls):
216.         # Address the circular dependency between `Queryset` and `Manager`.
217.         from django.db.models.manager import Manager
218.         manager = Manager.from_queryset(cls)()
219.         manager._built_with_as_manager = True
220.         return manager
221.     as_manager.queryset_only = True
222.     as_manager = classmethod(as_manager)
223. 
224.     ########################
225.     # PYTHON MAGIC METHODS #
226.     ########################
227. 
228.     def __deepcopy__(self, memo):
229.         """Don't populate the QuerySet's cache."""
230.         obj = self.__class__()
231.         for k, v in self.__dict__.items():
232.             if k == '_result_cache':
233.                 obj.__dict__[k] = None
234.             else:
235.                 obj.__dict__[k] = copy.deepcopy(v, memo)
236.         return obj
237. 
238.     def __getstate__(self):
239.         # Force the cache to be fully populated.
240.         self._fetch_all()
241.         return {**self.__dict__, DJANGO_VERSION_PICKLE_KEY: get_version()}
242. 
243.     def __setstate__(self, state):
244.         msg = None
245.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
246.         if pickled_version:
247.             current_version = get_version()
248.             if current_version != pickled_version:
249.                 msg = (
250.                     "Pickled queryset instance's Django version %s does not "
251.                     "match the current version %s." % (pickled_version, current_version)
252.                 )
253.         else:
254.             msg = "Pickled queryset instance's Django version is not specified."
255. 
256.         if msg:
257.             warnings.warn(msg, RuntimeWarning, stacklevel=2)
258. 
259.         self.__dict__.update(state)
260. 
261.     def __repr__(self):
262.         data = list(self[:REPR_OUTPUT_SIZE + 1])
263.         if len(data) > REPR_OUTPUT_SIZE:
264.             data[-1] = "...(remaining elements truncated)..."
265.         return '<%s %r>' % (self.__class__.__name__, data)
266. 
267.     def __len__(self):
268.         self._fetch_all()
269.         return len(self._result_cache)
270. 
271.     def __iter__(self):
272.         """
273.         The queryset iterator protocol uses three nested iterators in the
274.         default case:
275.             1. sql.compiler.execute_sql()
276.                - Returns 100 rows at time (constants.GET_ITERATOR_CHUNK_SIZE)
277.                  using cursor.fetchmany(). This part is responsible for
278.                  doing some column masking, and returning the rows in chunks.
279.             2. sql.compiler.results_iter()
280.                - Returns one row at time. At this point the rows are still just
281.                  tuples. In some cases the return values are converted to
282.                  Python values at this location.
283.             3. self.iterator()
284.                - Responsible for turning the rows into model objects.
285.         """
286.         self._fetch_all()
287.         return iter(self._result_cache)
288. 
289.     def __bool__(self):
290.         self._fetch_all()
291.         return bool(self._result_cache)
292. 
293.     def __getitem__(self, k):
294.         """Retrieve an item or slice from the set of results."""
295.         if not isinstance(k, (int, slice)):
296.             raise TypeError(
297.                 'QuerySet indices must be integers or slices, not %s.'
298.                 % type(k).__name__
299.             )
300.         assert ((not isinstance(k, slice) and (k >= 0)) or
301.                 (isinstance(k, slice) and (k.start is None or k.start >= 0) and
302.                  (k.stop is None or k.stop >= 0))), \
303.             "Negative indexing is not supported."
304. 
305.         if self._result_cache is not None:
306.             return self._result_cache[k]
307. 
308.         if isinstance(k, slice):
309.             qs = self._chain()
310.             if k.start is not None:
311.                 start = int(k.start)
312.             else:
313.                 start = None
314.             if k.stop is not None:
315.                 stop = int(k.stop)
316.             else:
317.                 stop = None
318.             qs.query.set_limits(start, stop)
319.             return list(qs)[::k.step] if k.step else qs
320. 
321.         qs = self._chain()
322.         qs.query.set_limits(k, k + 1)
323.         qs._fetch_all()
324.         return qs._result_cache[0]
325. 
326.     def __class_getitem__(cls, *args, **kwargs):
327.         return cls
328. 
329.     def __and__(self, other):
330.         self._merge_sanity_check(other)
331.         if isinstance(other, EmptyQuerySet):
332.             return other
333.         if isinstance(self, EmptyQuerySet):
334.             return self
335.         combined = self._chain()
336.         combined._merge_known_related_objects(other)
337.         combined.query.combine(other.query, sql.AND)
338.         return combined
339. 
340.     def __or__(self, other):
341.         self._merge_sanity_check(other)
342.         if isinstance(self, EmptyQuerySet):
343.             return other
344.         if isinstance(other, EmptyQuerySet):
345.             return self
346.         query = self if self.query.can_filter() else self.model._base_manager.filter(pk__in=self.values('pk'))
347.         combined = query._chain()
348.         combined._merge_known_related_objects(other)
349.         if not other.query.can_filter():
350.             other = other.model._base_manager.filter(pk__in=other.values('pk'))
351.         combined.query.combine(other.query, sql.OR)
352.         return combined
353. 
354.     ####################################
355.     # METHODS THAT DO DATABASE QUERIES #
356.     ####################################
357. 
358.     def _iterator(self, use_chunked_fetch, chunk_size):
359.         yield from self._iterable_class(self, chunked_fetch=use_chunked_fetch, chunk_size=chunk_size)
360. 
361.     def iterator(self, chunk_size=2000):
362.         """
363.         An iterator over the results from applying this QuerySet to the
364.         database.
365.         """
366.         if chunk_size <= 0:
367.             raise ValueError('Chunk size must be strictly positive.')
368.         use_chunked_fetch = not connections[self.db].settings_dict.get('DISABLE_SERVER_SIDE_CURSORS')
369.         return self._iterator(use_chunked_fetch, chunk_size)
370. 
371.     def aggregate(self, *args, **kwargs):
372.         """
373.         Return a dictionary containing the calculations (aggregation)
374.         over the current queryset.
375. 
376.         If args is present the expression is passed as a kwarg using
377.         the Aggregate object's default alias.
378.         """
379.         if self.query.distinct_fields:
380.             raise NotImplementedError("aggregate() + distinct(fields) not implemented.")
381.         self._validate_values_are_expressions((*args, *kwargs.values()), method_name='aggregate')
382.         for arg in args:
383.             # The default_alias property raises TypeError if default_alias
384.             # can't be set automatically or AttributeError if it isn't an
385.             # attribute.
386.             try:
387.                 arg.default_alias
388.             except (AttributeError, TypeError):
389.                 raise TypeError("Complex aggregates require an alias")
390.             kwargs[arg.default_alias] = arg
391. 
392.         query = self.query.chain()
393.         for (alias, aggregate_expr) in kwargs.items():
394.             query.add_annotation(aggregate_expr, alias, is_summary=True)
395.             if not query.annotations[alias].contains_aggregate:
396.                 raise TypeError("%s is not an aggregate expression" % alias)
397.         return query.get_aggregation(self.db, kwargs)
398. 
399.     def count(self):
400.         """
401.         Perform a SELECT COUNT() and return the number of records as an
402.         integer.
403. 
404.         If the QuerySet is already fully cached, return the length of the
405.         cached results set to avoid multiple SELECT COUNT(*) calls.
406.         """
407.         if self._result_cache is not None:
408.             return len(self._result_cache)
409. 
410.         return self.query.get_count(using=self.db)
411. 
412.     def get(self, *args, **kwargs):
413.         """
414.         Perform the query and return a single object matching the given
415.         keyword arguments.
416.         """
417.         clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
418.         if self.query.can_filter() and not self.query.distinct_fields:
419.             clone = clone.order_by()
420.         limit = None
421.         if not clone.query.select_for_update or connections[clone.db].features.supports_select_for_update_with_limit:
422.             limit = MAX_GET_RESULTS
423.             clone.query.set_limits(high=limit)
424.         num = len(clone)
425.         if num == 1:
426.             return clone._result_cache[0]
427.         if not num:
428.             raise self.model.DoesNotExist(
429.                 "%s matching query does not exist." %
430.                 self.model._meta.object_name
431.             )
432.         raise self.model.MultipleObjectsReturned(
433.             'get() returned more than one %s -- it returned %s!' % (
434.                 self.model._meta.object_name,
435.                 num if not limit or num < limit else 'more than %s' % (limit - 1),
436.             )
437.         )
438. 
439.     def create(self, **kwargs):
440.         """
441.         Create a new object with the given kwargs, saving it to the database
442.         and returning the created object.
443.         """
444.         obj = self.model(**kwargs)
445.         self._for_write = True
446.         obj.save(force_insert=True, using=self.db)
447.         return obj
448. 
449.     def _populate_pk_values(self, objs):
450.         for obj in objs:
451.             if obj.pk is None:
452.                 obj.pk = obj._meta.pk.get_pk_value_on_save(obj)
453. 
454.     def bulk_create(self, objs, batch_size=None, ignore_conflicts=False):
455.         """
456.         Insert each of the instances into the database. Do *not* call
457.         save() on each of the instances, do not send any pre/post_save
458.         signals, and do not set the primary key attribute if it is an
459.         autoincrement field (except if features.can_return_rows_from_bulk_insert=True).
460.         Multi-table models are not supported.
461.         """
462.         # When you bulk insert you don't get the primary keys back (if it's an
463.         # autoincrement, except if can_return_rows_from_bulk_insert=True), so
464.         # you can't insert into the child tables which references this. There
465.         # are two workarounds:
466.         # 1) This could be implemented if you didn't have an autoincrement pk
467.         # 2) You could do it by doing O(n) normal inserts into the parent
468.         #    tables to get the primary keys back and then doing a single bulk
469.         #    insert into the childmost table.
470.         # We currently set the primary keys on the objects when using
471.         # PostgreSQL via the RETURNING ID clause. It should be possible for
472.         # Oracle as well, but the semantics for extracting the primary keys is
473.         # trickier so it's not done yet.
474.         assert batch_size is None or batch_size > 0
475.         # Check that the parents share the same concrete model with the our
476.         # model to detect the inheritance pattern ConcreteGrandParent ->
477.         # MultiTableParent -> ProxyChild. Simply checking self.model._meta.proxy
478.         # would not identify that case as involving multiple tables.
479.         for parent in self.model._meta.get_parent_list():
480.             if parent._meta.concrete_model is not self.model._meta.concrete_model:
481.                 raise ValueError("Can't bulk create a multi-table inherited model")
482.         if not objs:
483.             return objs
484.         self._for_write = True
485.         connection = connections[self.db]
486.         opts = self.model._meta
487.         fields = opts.concrete_fields
488.         objs = list(objs)
489.         self._populate_pk_values(objs)
490.         with transaction.atomic(using=self.db, savepoint=False):
491.             objs_with_pk, objs_without_pk = partition(lambda o: o.pk is None, objs)
492.             if objs_with_pk:
493.                 returned_columns = self._batched_insert(
494.                     objs_with_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
495.                 )
496.                 for obj_with_pk, results in zip(objs_with_pk, returned_columns):
497.                     for result, field in zip(results, opts.db_returning_fields):
498.                         if field != opts.pk:
499.                             setattr(obj_with_pk, field.attname, result)
500.                 for obj_with_pk in objs_with_pk:
501.                     obj_with_pk._state.adding = False
502.                     obj_with_pk._state.db = self.db
503.             if objs_without_pk:
504.                 fields = [f for f in fields if not isinstance(f, AutoField)]
505.                 returned_columns = self._batched_insert(
506.                     objs_without_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
507.                 )
508.                 if connection.features.can_return_rows_from_bulk_insert and not ignore_conflicts:
509.                     assert len(returned_columns) == len(objs_without_pk)
510.                 for obj_without_pk, results in zip(objs_without_pk, returned_columns):
511.                     for result, field in zip(results, opts.db_returning_fields):
512.                         setattr(obj_without_pk, field.attname, result)
513.                     obj_without_pk._state.adding = False
514.                     obj_without_pk._state.db = self.db
515. 
516.         return objs
517. 
518.     def bulk_update(self, objs, fields, batch_size=None):
519.         """
520.         Update the given fields in each of the given objects in the database.
521.         """
522.         if batch_size is not None and batch_size < 0:
523.             raise ValueError('Batch size must be a positive integer.')
524.         if not fields:
525.             raise ValueError('Field names must be given to bulk_update().')
526.         objs = tuple(objs)
527.         if any(obj.pk is None for obj in objs):
528.             raise ValueError('All bulk_update() objects must have a primary key set.')
529.         fields = [self.model._meta.get_field(name) for name in fields]
530.         if any(not f.concrete or f.many_to_many for f in fields):
531.             raise ValueError('bulk_update() can only be used with concrete fields.')
532.         if any(f.primary_key for f in fields):
533.             raise ValueError('bulk_update() cannot be used with primary key fields.')
534.         if not objs:
535.             return
536.         # PK is used twice in the resulting update query, once in the filter
537.         # and once in the WHEN. Each field will also have one CAST.
538.         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
539.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
540.         requires_casting = connections[self.db].features.requires_casted_case_in_updates
541.         batches = (objs[i:i + batch_size] for i in range(0, len(objs), batch_size))
542.         updates = []
543.         for batch_objs in batches:
544.             update_kwargs = {}
545.             for field in fields:
546.                 when_statements = []
547.                 for obj in batch_objs:
548.                     attr = getattr(obj, field.attname)
549.                     if not isinstance(attr, Expression):
550.                         attr = Value(attr, output_field=field)
551.                     when_statements.append(When(pk=obj.pk, then=attr))
552.                 case_statement = Case(*when_statements, output_field=field)
553.                 if requires_casting:
554.                     case_statement = Cast(case_statement, output_field=field)
555.                 update_kwargs[field.attname] = case_statement
556.             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
557.         with transaction.atomic(using=self.db, savepoint=False):
558.             for pks, update_kwargs in updates:
559.                 self.filter(pk__in=pks).update(**update_kwargs)
560.     bulk_update.alters_data = True
561. 
562.     def get_or_create(self, defaults=None, **kwargs):
563.         """
564.         Look up an object with the given kwargs, creating one if necessary.
565.         Return a tuple of (object, created), where created is a boolean
566.         specifying whether an object was created.
567.         """
568.         # The get() needs to be targeted at the write database in order
569.         # to avoid potential transaction consistency problems.
570.         self._for_write = True
571.         try:
572.             return self.get(**kwargs), False
573.         except self.model.DoesNotExist:
574.             params = self._extract_model_params(defaults, **kwargs)
575.             return self._create_object_from_params(kwargs, params)
576. 
577.     def update_or_create(self, defaults=None, **kwargs):
578.         """
579.         Look up an object with the given kwargs, updating one with defaults
580.         if it exists, otherwise create a new one.
581.         Return a tuple (object, created), where created is a boolean
582.         specifying whether an object was created.
583.         """
584.         defaults = defaults or {}
585.         self._for_write = True
586.         with transaction.atomic(using=self.db):
587.             try:
588.                 obj = self.select_for_update().get(**kwargs)
589.             except self.model.DoesNotExist:
590.                 params = self._extract_model_params(defaults, **kwargs)
591.                 # Lock the row so that a concurrent update is blocked until
592.                 # after update_or_create() has performed its save.
593.                 obj, created = self._create_object_from_params(kwargs, params, lock=True)
594.                 if created:
595.                     return obj, created
596.             for k, v in resolve_callables(defaults):
597.                 setattr(obj, k, v)
598.             obj.save(using=self.db)
599.         return obj, False
600. 
601.     def _create_object_from_params(self, lookup, params, lock=False):
602.         """
603.         Try to create an object using passed params. Used by get_or_create()
604.         and update_or_create().
605.         """
606.         try:
607.             with transaction.atomic(using=self.db):
608.                 params = dict(resolve_callables(params))
609.                 obj = self.create(**params)
610.             return obj, True
611.         except IntegrityError:
612.             try:
613.                 qs = self.select_for_update() if lock else self
614.                 return qs.get(**lookup), False
615.             except self.model.DoesNotExist:
616.                 pass
617.             raise
618. 
619.     def _extract_model_params(self, defaults, **kwargs):
620.         """
621.         Prepare `params` for creating a model instance based on the given
622.         kwargs; for use by get_or_create() and update_or_create().
623.         """
624.         defaults = defaults or {}
625.         params = {k: v for k, v in kwargs.items() if LOOKUP_SEP not in k}
626.         params.update(defaults)
627.         property_names = self.model._meta._property_names
628.         invalid_params = []
629.         for param in params:
630.             try:
631.                 self.model._meta.get_field(param)
632.             except exceptions.FieldDoesNotExist:
633.                 # It's okay to use a model's property if it has a setter.
634.                 if not (param in property_names and getattr(self.model, param).fset):
635.                     invalid_params.append(param)
636.         if invalid_params:
637.             raise exceptions.FieldError(
638.                 "Invalid field name(s) for model %s: '%s'." % (
639.                     self.model._meta.object_name,
640.                     "', '".join(sorted(invalid_params)),
641.                 ))
642.         return params
643. 
644.     def _earliest(self, *fields):
645.         """
646.         Return the earliest object according to fields (if given) or by the
647.         model's Meta.get_latest_by.
648.         """
649.         if fields:
650.             order_by = fields
651.         else:
652.             order_by = getattr(self.model._meta, 'get_latest_by')
653.             if order_by and not isinstance(order_by, (tuple, list)):
654.                 order_by = (order_by,)
655.         if order_by is None:
656.             raise ValueError(
657.                 "earliest() and latest() require either fields as positional "
658.                 "arguments or 'get_latest_by' in the model's Meta."
659.             )
660. 
661.         assert not self.query.is_sliced, \
662.             "Cannot change a query once a slice has been taken."
663.         obj = self._chain()
664.         obj.query.set_limits(high=1)
665.         obj.query.clear_ordering(force_empty=True)
666.         obj.query.add_ordering(*order_by)
667.         return obj.get()
668. 
669.     def earliest(self, *fields):
670.         return self._earliest(*fields)
671. 
672.     def latest(self, *fields):
673.         return self.reverse()._earliest(*fields)
674. 
675.     def first(self):
676.         """Return the first object of a query or None if no match is found."""
677.         for obj in (self if self.ordered else self.order_by('pk'))[:1]:
678.             return obj
679. 
680.     def last(self):
681.         """Return the last object of a query or None if no match is found."""
682.         for obj in (self.reverse() if self.ordered else self.order_by('-pk'))[:1]:
683.             return obj
684. 
685.     def in_bulk(self, id_list=None, *, field_name='pk'):
686.         """
687.         Return a dictionary mapping each of the given IDs to the object with
688.         that ID. If `id_list` isn't provided, evaluate the entire QuerySet.
689.         """
690.         assert not self.query.is_sliced, \
691.             "Cannot use 'limit' or 'offset' with in_bulk"
692.         if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
693.             raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
694.         if id_list is not None:
695.             if not id_list:
696.                 return {}
697.             filter_key = '{}__in'.format(field_name)
698.             batch_size = connections[self.db].features.max_query_params
699.             id_list = tuple(id_list)
700.             # If the database has a limit on the number of query parameters
701.             # (e.g. SQLite), retrieve objects in batches if necessary.
702.             if batch_size and batch_size < len(id_list):
703.                 qs = ()
704.                 for offset in range(0, len(id_list), batch_size):
705.                     batch = id_list[offset:offset + batch_size]
706.                     qs += tuple(self.filter(**{filter_key: batch}).order_by())
707.             else:
708.                 qs = self.filter(**{filter_key: id_list}).order_by()
709.         else:
710.             qs = self._chain()
711.         return {getattr(obj, field_name): obj for obj in qs}
712. 
713.     def delete(self):
714.         """Delete the records in the current QuerySet."""
715.         self._not_support_combined_queries('delete')
716.         assert not self.query.is_sliced, \
717.             "Cannot use 'limit' or 'offset' with delete."
718. 
719.         if self._fields is not None:
720.             raise TypeError("Cannot call delete() after .values() or .values_list()")
721. 
722.         del_query = self._chain()
723. 
724.         # The delete is actually 2 queries - one to find related objects,
725.         # and one to delete. Make sure that the discovery of related
726.         # objects is performed on the same database as the deletion.
727.         del_query._for_write = True
728. 
729.         # Disable non-supported fields.
730.         del_query.query.select_for_update = False
731.         del_query.query.select_related = False
732.         del_query.query.clear_ordering(force_empty=True)
733. 
734.         collector = Collector(using=del_query.db)
735.         collector.collect(del_query)
736.         deleted, _rows_count = collector.delete()
737. 
738.         # Clear the result cache, in case this QuerySet gets reused.
739.         self._result_cache = None
740.         return deleted, _rows_count
741. 
742.     delete.alters_data = True
743.     delete.queryset_only = True
744. 
745.     def _raw_delete(self, using):
746.         """
747.         Delete objects found from the given queryset in single direct SQL
748.         query. No signals are sent and there is no protection for cascades.
749.         """
750.         query = self.query.clone()
751.         query.__class__ = sql.DeleteQuery
752.         cursor = query.get_compiler(using).execute_sql(CURSOR)
753.         if cursor:
754.             with cursor:
755.                 return cursor.rowcount
756.         return 0
757.     _raw_delete.alters_data = True
758. 
759.     def update(self, **kwargs):
760.         """
761.         Update all elements in the current QuerySet, setting all the given
762.         fields to the appropriate values.
763.         """
764.         self._not_support_combined_queries('update')
765.         assert not self.query.is_sliced, \
766.             "Cannot update a query once a slice has been taken."
767.         self._for_write = True
768.         query = self.query.chain(sql.UpdateQuery)
769.         query.add_update_values(kwargs)
770.         # Clear any annotations so that they won't be present in subqueries.
771.         query.annotations = {}
772.         with transaction.mark_for_rollback_on_error(using=self.db):
773.             rows = query.get_compiler(self.db).execute_sql(CURSOR)
774.         self._result_cache = None
775.         return rows
776.     update.alters_data = True
777. 
778.     def _update(self, values):
779.         """
780.         A version of update() that accepts field objects instead of field names.
781.         Used primarily for model saving and not intended for use by general
782.         code (it requires too much poking around at model internals to be
783.         useful at that level).
784.         """
785.         assert not self.query.is_sliced, \
786.             "Cannot update a query once a slice has been taken."
787.         query = self.query.chain(sql.UpdateQuery)
788.         query.add_update_fields(values)
789.         # Clear any annotations so that they won't be present in subqueries.
790.         query.annotations = {}
791.         self._result_cache = None
792.         return query.get_compiler(self.db).execute_sql(CURSOR)
793.     _update.alters_data = True
794.     _update.queryset_only = False
795. 
796.     def exists(self):
797.         if self._result_cache is None:
798.             return self.query.has_results(using=self.db)
799.         return bool(self._result_cache)
800. 
801.     def _prefetch_related_objects(self):
802.         # This method can only be called once the result cache has been filled.
803.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
804.         self._prefetch_done = True
805. 
806.     def explain(self, *, format=None, **options):
807.         return self.query.explain(using=self.db, format=format, **options)
808. 
809.     ##################################################
810.     # PUBLIC METHODS THAT RETURN A QUERYSET SUBCLASS #
811.     ##################################################
812. 
813.     def raw(self, raw_query, params=None, translations=None, using=None):
814.         if using is None:
815.             using = self.db
816.         qs = RawQuerySet(raw_query, model=self.model, params=params, translations=translations, using=using)
817.         qs._prefetch_related_lookups = self._prefetch_related_lookups[:]
818.         return qs
819. 
820.     def _values(self, *fields, **expressions):
821.         clone = self._chain()
822.         if expressions:
823.             clone = clone.annotate(**expressions)
824.         clone._fields = fields
825.         clone.query.set_values(fields)
826.         return clone
827. 
828.     def values(self, *fields, **expressions):
829.         fields += tuple(expressions)
830.         clone = self._values(*fields, **expressions)
831.         clone._iterable_class = ValuesIterable
832.         return clone
833. 
834.     def values_list(self, *fields, flat=False, named=False):
835.         if flat and named:
836.             raise TypeError("'flat' and 'named' can't be used together.")
837.         if flat and len(fields) > 1:
838.             raise TypeError("'flat' is not valid when values_list is called with more than one field.")
839. 
840.         field_names = {f for f in fields if not hasattr(f, 'resolve_expression')}
841.         _fields = []
842.         expressions = {}
843.         counter = 1
844.         for field in fields:
845.             if hasattr(field, 'resolve_expression'):
846.                 field_id_prefix = getattr(field, 'default_alias', field.__class__.__name__.lower())
847.                 while True:
848.                     field_id = field_id_prefix + str(counter)
849.                     counter += 1
850.                     if field_id not in field_names:
851.                         break
852.                 expressions[field_id] = field
853.                 _fields.append(field_id)
854.             else:
855.                 _fields.append(field)
856. 
857.         clone = self._values(*_fields, **expressions)
858.         clone._iterable_class = (
859.             NamedValuesListIterable if named
860.             else FlatValuesListIterable if flat
861.             else ValuesListIterable
862.         )
863.         return clone
864. 
865.     def dates(self, field_name, kind, order='ASC'):
866.         """
867.         Return a list of date objects representing all available dates for
868.         the given field_name, scoped to 'kind'.
869.         """
870.         assert kind in ('year', 'month', 'week', 'day'), \
871.             "'kind' must be one of 'year', 'month', 'week', or 'day'."
872.         assert order in ('ASC', 'DESC'), \
873.             "'order' must be either 'ASC' or 'DESC'."
874.         return self.annotate(
875.             datefield=Trunc(field_name, kind, output_field=DateField()),
876.             plain_field=F(field_name)
877.         ).values_list(
878.             'datefield', flat=True
879.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datefield')
880. 
881.     def datetimes(self, field_name, kind, order='ASC', tzinfo=None, is_dst=None):
882.         """
883.         Return a list of datetime objects representing all available
884.         datetimes for the given field_name, scoped to 'kind'.
885.         """
886.         assert kind in ('year', 'month', 'week', 'day', 'hour', 'minute', 'second'), \
887.             "'kind' must be one of 'year', 'month', 'week', 'day', 'hour', 'minute', or 'second'."
888.         assert order in ('ASC', 'DESC'), \
889.             "'order' must be either 'ASC' or 'DESC'."
890.         if settings.USE_TZ:
891.             if tzinfo is None:
892.                 tzinfo = timezone.get_current_timezone()
893.         else:
894.             tzinfo = None
895.         return self.annotate(
896.             datetimefield=Trunc(
897.                 field_name,
898.                 kind,
899.                 output_field=DateTimeField(),
900.                 tzinfo=tzinfo,
901.                 is_dst=is_dst,
902.             ),
903.             plain_field=F(field_name)
904.         ).values_list(
905.             'datetimefield', flat=True
906.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datetimefield')
907. 
908.     def none(self):
909.         """Return an empty QuerySet."""
910.         clone = self._chain()
911.         clone.query.set_empty()
912.         return clone
913. 
914.     ##################################################################
915.     # PUBLIC METHODS THAT ALTER ATTRIBUTES AND RETURN A NEW QUERYSET #
916.     ##################################################################
917. 
918.     def all(self):
919.         """
920.         Return a new QuerySet that is a copy of the current one. This allows a
921.         QuerySet to proxy for a model manager in some cases.
922.         """
923.         return self._chain()
924. 
925.     def filter(self, *args, **kwargs):
926.         """
927.         Return a new QuerySet instance with the args ANDed to the existing
928.         set.
929.         """
930.         self._not_support_combined_queries('filter')
931.         return self._filter_or_exclude(False, *args, **kwargs)
932. 
933.     def exclude(self, *args, **kwargs):
934.         """
935.         Return a new QuerySet instance with NOT (args) ANDed to the existing
936.         set.
937.         """
938.         self._not_support_combined_queries('exclude')
939.         return self._filter_or_exclude(True, *args, **kwargs)
940. 
941.     def _filter_or_exclude(self, negate, *args, **kwargs):
942.         if args or kwargs:
943.             assert not self.query.is_sliced, \
944.                 "Cannot filter a query once a slice has been taken."
945. 
946.         clone = self._chain()
947.         if self._defer_next_filter:
948.             self._defer_next_filter = False
949.             clone._deferred_filter = negate, args, kwargs
950.         else:
951.             clone._filter_or_exclude_inplace(negate, *args, **kwargs)
952.         return clone
953. 
954.     def _filter_or_exclude_inplace(self, negate, *args, **kwargs):
955.         if negate:
956.             self._query.add_q(~Q(*args, **kwargs))
957.         else:
958.             self._query.add_q(Q(*args, **kwargs))
959. 
960.     def complex_filter(self, filter_obj):
961.         """
962.         Return a new QuerySet instance with filter_obj added to the filters.
963. 
964.         filter_obj can be a Q object or a dictionary of keyword lookup
965.         arguments.
966. 
967.         This exists to support framework features such as 'limit_choices_to',
968.         and usually it will be more natural to use other methods.
969.         """
970.         if isinstance(filter_obj, Q):
971.             clone = self._chain()
972.             clone.query.add_q(filter_obj)
973.             return clone
974.         else:
975.             return self._filter_or_exclude(False, **filter_obj)
976. 
977.     def _combinator_query(self, combinator, *other_qs, all=False):
978.         # Clone the query to inherit the select list and everything
979.         clone = self._chain()
980.         # Clear limits and ordering so they can be reapplied
981.         clone.query.clear_ordering(True)
982.         clone.query.clear_limits()
983.         clone.query.combined_queries = (self.query,) + tuple(qs.query for qs in other_qs)
984.         clone.query.combinator = combinator
985.         clone.query.combinator_all = all
986.         return clone
987. 
988.     def union(self, *other_qs, all=False):
989.         # If the query is an EmptyQuerySet, combine all nonempty querysets.
990.         if isinstance(self, EmptyQuerySet):
991.             qs = [q for q in other_qs if not isinstance(q, EmptyQuerySet)]
992.             return qs[0]._combinator_query('union', *qs[1:], all=all) if qs else self
993.         return self._combinator_query('union', *other_qs, all=all)
994. 
995.     def intersection(self, *other_qs):
996.         # If any query is an EmptyQuerySet, return it.
997.         if isinstance(self, EmptyQuerySet):
998.             return self
999.         for other in other_qs:
1000.             if isinstance(other, EmptyQuerySet):
1001.                 return other
1002.         return self._combinator_query('intersection', *other_qs)
1003. 
1004.     def difference(self, *other_qs):
1005.         # If the query is an EmptyQuerySet, return it.
1006.         if isinstance(self, EmptyQuerySet):
1007.             return self
1008.         return self._combinator_query('difference', *other_qs)
1009. 
1010.     def select_for_update(self, nowait=False, skip_locked=False, of=()):
1011.         """
1012.         Return a new QuerySet instance that will select objects with a
1013.         FOR UPDATE lock.
1014.         """
1015.         if nowait and skip_locked:
1016.             raise ValueError('The nowait option cannot be used with skip_locked.')
1017.         obj = self._chain()
1018.         obj._for_write = True
1019.         obj.query.select_for_update = True
1020.         obj.query.select_for_update_nowait = nowait
1021.         obj.query.select_for_update_skip_locked = skip_locked
1022.         obj.query.select_for_update_of = of
1023.         return obj
1024. 
1025.     def select_related(self, *fields):
1026.         """
1027.         Return a new QuerySet instance that will select related objects.
1028. 
1029.         If fields are specified, they must be ForeignKey fields and only those
1030.         related objects are included in the selection.
1031. 
1032.         If select_related(None) is called, clear the list.
1033.         """
1034.         self._not_support_combined_queries('select_related')
1035.         if self._fields is not None:
1036.             raise TypeError("Cannot call select_related() after .values() or .values_list()")
1037. 
1038.         obj = self._chain()
1039.         if fields == (None,):
1040.             obj.query.select_related = False
1041.         elif fields:
1042.             obj.query.add_select_related(fields)
1043.         else:
1044.             obj.query.select_related = True
1045.         return obj
1046. 
1047.     def prefetch_related(self, *lookups):
1048.         """
1049.         Return a new QuerySet instance that will prefetch the specified
1050.         Many-To-One and Many-To-Many related objects when the QuerySet is
1051.         evaluated.
1052. 
1053.         When prefetch_related() is called more than once, append to the list of
1054.         prefetch lookups. If prefetch_related(None) is called, clear the list.
1055.         """
1056.         self._not_support_combined_queries('prefetch_related')
1057.         clone = self._chain()
1058.         if lookups == (None,):
1059.             clone._prefetch_related_lookups = ()
1060.         else:
1061.             for lookup in lookups:
1062.                 if isinstance(lookup, Prefetch):
1063.                     lookup = lookup.prefetch_to
1064.                 lookup = lookup.split(LOOKUP_SEP, 1)[0]
1065.                 if lookup in self.query._filtered_relations:
1066.                     raise ValueError('prefetch_related() is not supported with FilteredRelation.')
1067.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1068.         return clone
1069. 
1070.     def annotate(self, *args, **kwargs):
1071.         """
1072.         Return a query set in which the returned objects have been annotated
1073.         with extra data or aggregations.
1074.         """
1075.         self._not_support_combined_queries('annotate')
1076.         self._validate_values_are_expressions(args + tuple(kwargs.values()), method_name='annotate')
1077.         annotations = {}
1078.         for arg in args:
1079.             # The default_alias property may raise a TypeError.
1080.             try:
1081.                 if arg.default_alias in kwargs:
1082.                     raise ValueError("The named annotation '%s' conflicts with the "
1083.                                      "default name for another annotation."
1084.                                      % arg.default_alias)
1085.             except TypeError:
1086.                 raise TypeError("Complex annotations require an alias")
1087.             annotations[arg.default_alias] = arg
1088.         annotations.update(kwargs)
1089. 
1090.         clone = self._chain()
1091.         names = self._fields
1092.         if names is None:
1093.             names = set(chain.from_iterable(
1094.                 (field.name, field.attname) if hasattr(field, 'attname') else (field.name,)
1095.                 for field in self.model._meta.get_fields()
1096.             ))
1097. 
1098.         for alias, annotation in annotations.items():
1099.             if alias in names:
1100.                 raise ValueError("The annotation '%s' conflicts with a field on "
1101.                                  "the model." % alias)
1102.             if isinstance(annotation, FilteredRelation):
1103.                 clone.query.add_filtered_relation(annotation, alias)
1104.             else:
1105.                 clone.query.add_annotation(annotation, alias, is_summary=False)
1106. 
1107.         for alias, annotation in clone.query.annotations.items():
1108.             if alias in annotations and annotation.contains_aggregate:
1109.                 if clone._fields is None:
1110.                     clone.query.group_by = True
1111.                 else:
1112.                     clone.query.set_group_by()
1113.                 break
1114. 
1115.         return clone
1116. 
1117.     def order_by(self, *field_names):
1118.         """Return a new QuerySet instance with the ordering changed."""
1119.         assert not self.query.is_sliced, \
1120.             "Cannot reorder a query once a slice has been taken."
1121.         obj = self._chain()
1122.         obj.query.clear_ordering(force_empty=False)
1123.         obj.query.add_ordering(*field_names)
1124.         return obj
1125. 
1126.     def distinct(self, *field_names):
1127.         """
1128.         Return a new QuerySet instance that will select only distinct results.
1129.         """
1130.         assert not self.query.is_sliced, \
1131.             "Cannot create distinct fields once a slice has been taken."
1132.         obj = self._chain()
1133.         obj.query.add_distinct_fields(*field_names)
1134.         return obj
1135. 
1136.     def extra(self, select=None, where=None, params=None, tables=None,
1137.               order_by=None, select_params=None):
1138.         """Add extra SQL fragments to the query."""
1139.         self._not_support_combined_queries('extra')
1140.         assert not self.query.is_sliced, \
1141.             "Cannot change a query once a slice has been taken"
1142.         clone = self._chain()
1143.         clone.query.add_extra(select, select_params, where, params, tables, order_by)
1144.         return clone
1145. 
1146.     def reverse(self):
1147.         """Reverse the ordering of the QuerySet."""
1148.         if self.query.is_sliced:
1149.             raise TypeError('Cannot reverse a query once a slice has been taken.')
1150.         clone = self._chain()
1151.         clone.query.standard_ordering = not clone.query.standard_ordering
1152.         return clone
1153. 
1154.     def defer(self, *fields):
1155.         """
1156.         Defer the loading of data for certain fields until they are accessed.
1157.         Add the set of deferred fields to any existing set of deferred fields.
1158.         The only exception to this is if None is passed in as the only
1159.         parameter, in which case removal all deferrals.
1160.         """
1161.         self._not_support_combined_queries('defer')
1162.         if self._fields is not None:
1163.             raise TypeError("Cannot call defer() after .values() or .values_list()")
1164.         clone = self._chain()
1165.         if fields == (None,):
1166.             clone.query.clear_deferred_loading()
1167.         else:
1168.             clone.query.add_deferred_loading(fields)
1169.         return clone
1170. 
1171.     def only(self, *fields):
1172.         """
1173.         Essentially, the opposite of defer(). Only the fields passed into this
1174.         method and that are not already specified as deferred are loaded
1175.         immediately when the queryset is evaluated.
1176.         """
1177.         self._not_support_combined_queries('only')
1178.         if self._fields is not None:
1179.             raise TypeError("Cannot call only() after .values() or .values_list()")
1180.         if fields == (None,):
1181.             # Can only pass None to defer(), not only(), as the rest option.
1182.             # That won't stop people trying to do this, so let's be explicit.
1183.             raise TypeError("Cannot pass None as an argument to only().")
1184.         for field in fields:
1185.             field = field.split(LOOKUP_SEP, 1)[0]
1186.             if field in self.query._filtered_relations:
1187.                 raise ValueError('only() is not supported with FilteredRelation.')
1188.         clone = self._chain()
1189.         clone.query.add_immediate_loading(fields)
1190.         return clone
1191. 
1192.     def using(self, alias):
1193.         """Select which database this QuerySet should execute against."""
1194.         clone = self._chain()
1195.         clone._db = alias
1196.         return clone
1197. 
1198.     ###################################
1199.     # PUBLIC INTROSPECTION ATTRIBUTES #
1200.     ###################################
1201. 
1202.     @property
1203.     def ordered(self):
1204.         """
1205.         Return True if the QuerySet is ordered -- i.e. has an order_by()
1206.         clause or a default ordering on the model (or is empty).
1207.         """
1208.         if isinstance(self, EmptyQuerySet):
1209.             return True
1210.         if self.query.extra_order_by or self.query.order_by:
1211.             return True
1212.         elif self.query.default_ordering and self.query.get_meta().ordering:
1213.             return True
1214.         else:
1215.             return False
1216. 
1217.     @property
1218.     def db(self):
1219.         """Return the database used if this query is executed now."""
1220.         if self._for_write:
1221.             return self._db or router.db_for_write(self.model, **self._hints)
1222.         return self._db or router.db_for_read(self.model, **self._hints)
1223. 
1224.     ###################
1225.     # PRIVATE METHODS #
1226.     ###################
1227. 
1228.     def _insert(self, objs, fields, returning_fields=None, raw=False, using=None, ignore_conflicts=False):
1229.         """
1230.         Insert a new record for the given model. This provides an interface to
1231.         the InsertQuery class and is how Model.save() is implemented.
1232.         """
1233.         self._for_write = True
1234.         if using is None:
1235.             using = self.db
1236.         query = sql.InsertQuery(self.model, ignore_conflicts=ignore_conflicts)
1237.         query.insert_values(fields, objs, raw=raw)
1238.         return query.get_compiler(using=using).execute_sql(returning_fields)
1239.     _insert.alters_data = True
1240.     _insert.queryset_only = False
1241. 
1242.     def _batched_insert(self, objs, fields, batch_size, ignore_conflicts=False):
1243.         """
1244.         Helper method for bulk_create() to insert objs one batch at a time.
1245.         """
1246.         if ignore_conflicts and not connections[self.db].features.supports_ignore_conflicts:
1247.             raise NotSupportedError('This database backend does not support ignoring conflicts.')
1248.         ops = connections[self.db].ops
1249.         max_batch_size = max(ops.bulk_batch_size(fields, objs), 1)
1250.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
1251.         inserted_rows = []
1252.         bulk_return = connections[self.db].features.can_return_rows_from_bulk_insert
1253.         for item in [objs[i:i + batch_size] for i in range(0, len(objs), batch_size)]:
1254.             if bulk_return and not ignore_conflicts:
1255.                 inserted_rows.extend(self._insert(
1256.                     item, fields=fields, using=self.db,
1257.                     returning_fields=self.model._meta.db_returning_fields,
1258.                     ignore_conflicts=ignore_conflicts,
1259.                 ))
1260.             else:
1261.                 self._insert(item, fields=fields, using=self.db, ignore_conflicts=ignore_conflicts)
1262.         return inserted_rows
1263. 
1264.     def _chain(self, **kwargs):
1265.         """
1266.         Return a copy of the current QuerySet that's ready for another
1267.         operation.
1268.         """
1269.         obj = self._clone()
1270.         if obj._sticky_filter:
1271.             obj.query.filter_is_sticky = True
1272.             obj._sticky_filter = False
1273.         obj.__dict__.update(kwargs)
1274.         return obj
1275. 
1276.     def _clone(self):
1277.         """
1278.         Return a copy of the current QuerySet. A lightweight alternative
1279.         to deepcopy().
1280.         """
1281.         c = self.__class__(model=self.model, query=self.query.chain(), using=self._db, hints=self._hints)
1282.         c._sticky_filter = self._sticky_filter
1283.         c._for_write = self._for_write
1284.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1285.         c._known_related_objects = self._known_related_objects
1286.         c._iterable_class = self._iterable_class
1287.         c._fields = self._fields
1288.         return c
1289. 
1290.     def _fetch_all(self):
1291.         if self._result_cache is None:
1292.             self._result_cache = list(self._iterable_class(self))
1293.         if self._prefetch_related_lookups and not self._prefetch_done:
1294.             self._prefetch_related_objects()
1295. 
1296.     def _next_is_sticky(self):
1297.         """
1298.         Indicate that the next filter call and the one following that should
1299.         be treated as a single filter. This is only important when it comes to
1300.         determining when to reuse tables for many-to-many filters. Required so
1301.         that we can filter naturally on the results of related managers.
1302. 
1303.         This doesn't return a clone of the current QuerySet (it returns
1304.         "self"). The method is only used internally and should be immediately
1305.         followed by a filter() that does create a clone.
1306.         """
1307.         self._sticky_filter = True
1308.         return self
1309. 
1310.     def _merge_sanity_check(self, other):
1311.         """Check that two QuerySet classes may be merged."""
1312.         if self._fields is not None and (
1313.                 set(self.query.values_select) != set(other.query.values_select) or
1314.                 set(self.query.extra_select) != set(other.query.extra_select) or
1315.                 set(self.query.annotation_select) != set(other.query.annotation_select)):
1316.             raise TypeError(
1317.                 "Merging '%s' classes must involve the same values in each case."
1318.                 % self.__class__.__name__
1319.             )
1320. 
1321.     def _merge_known_related_objects(self, other):
1322.         """
1323.         Keep track of all known related objects from either QuerySet instance.
1324.         """
1325.         for field, objects in other._known_related_objects.items():
1326.             self._known_related_objects.setdefault(field, {}).update(objects)
1327. 
1328.     def resolve_expression(self, *args, **kwargs):
1329.         if self._fields and len(self._fields) > 1:
1330.             # values() queryset can only be used as nested queries
1331.             # if they are set up to select only a single field.
1332.             raise TypeError('Cannot use multi-field values as a filter value.')
1333.         query = self.query.resolve_expression(*args, **kwargs)
1334.         query._db = self._db
1335.         return query
1336.     resolve_expression.queryset_only = True
1337. 
1338.     def _add_hints(self, **hints):
1339.         """
1340.         Update hinting information for use by routers. Add new key/values or
1341.         overwrite existing key/values.
1342.         """
1343.         self._hints.update(hints)
1344. 
1345.     def _has_filters(self):
1346.         """
1347.         Check if this QuerySet has any filtering going on. This isn't
1348.         equivalent with checking if all objects are present in results, for
1349.         example, qs[1:]._has_filters() -> False.
1350.         """
1351.         return self.query.has_filters()
1352. 
1353.     @staticmethod
1354.     def _validate_values_are_expressions(values, method_name):
1355.         invalid_args = sorted(str(arg) for arg in values if not hasattr(arg, 'resolve_expression'))
1356.         if invalid_args:
1357.             raise TypeError(
1358.                 'QuerySet.%s() received non-expression(s): %s.' % (
1359.                     method_name,
1360.                     ', '.join(invalid_args),
1361.                 )
1362.             )
1363. 
1364.     def _not_support_combined_queries(self, operation_name):
1365.         if self.query.combinator:
1366.             raise NotSupportedError(
1367.                 'Calling QuerySet.%s() after %s() is not supported.'
1368.                 % (operation_name, self.query.combinator)
1369.             )
1370. 
1371. 
1372. class InstanceCheckMeta(type):
1373.     def __instancecheck__(self, instance):
1374.         return isinstance(instance, QuerySet) and instance.query.is_empty()
1375. 
1376. 
1377. class EmptyQuerySet(metaclass=InstanceCheckMeta):
1378.     """
1379.     Marker class to checking if a queryset is empty by .none():
1380.         isinstance(qs.none(), EmptyQuerySet) -> True
1381.     """
1382. 
1383.     def __init__(self, *args, **kwargs):
1384.         raise TypeError("EmptyQuerySet can't be instantiated")
1385. 
1386. 
1387. class RawQuerySet:
1388.     """
1389.     Provide an iterator which converts the results of raw SQL queries into
1390.     annotated model instances.
1391.     """
1392.     def __init__(self, raw_query, model=None, query=None, params=None,
1393.                  translations=None, using=None, hints=None):
1394.         self.raw_query = raw_query
1395.         self.model = model
1396.         self._db = using
1397.         self._hints = hints or {}
1398.         self.query = query or sql.RawQuery(sql=raw_query, using=self.db, params=params)
1399.         self.params = params or ()
1400.         self.translations = translations or {}
1401.         self._result_cache = None
1402.         self._prefetch_related_lookups = ()
1403.         self._prefetch_done = False
1404. 
1405.     def resolve_model_init_order(self):
1406.         """Resolve the init field names and value positions."""
1407.         converter = connections[self.db].introspection.identifier_converter
1408.         model_init_fields = [f for f in self.model._meta.fields if converter(f.column) in self.columns]
1409.         annotation_fields = [(column, pos) for pos, column in enumerate(self.columns)
1410.                              if column not in self.model_fields]
1411.         model_init_order = [self.columns.index(converter(f.column)) for f in model_init_fields]
1412.         model_init_names = [f.attname for f in model_init_fields]
1413.         return model_init_names, model_init_order, annotation_fields
1414. 
1415.     def prefetch_related(self, *lookups):
1416.         """Same as QuerySet.prefetch_related()"""
1417.         clone = self._clone()
1418.         if lookups == (None,):
1419.             clone._prefetch_related_lookups = ()
1420.         else:
1421.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1422.         return clone
1423. 
1424.     def _prefetch_related_objects(self):
1425.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
1426.         self._prefetch_done = True
1427. 
1428.     def _clone(self):
1429.         """Same as QuerySet._clone()"""
1430.         c = self.__class__(
1431.             self.raw_query, model=self.model, query=self.query, params=self.params,
1432.             translations=self.translations, using=self._db, hints=self._hints
1433.         )
1434.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1435.         return c
1436. 
1437.     def _fetch_all(self):
1438.         if self._result_cache is None:
1439.             self._result_cache = list(self.iterator())
1440.         if self._prefetch_related_lookups and not self._prefetch_done:
1441.             self._prefetch_related_objects()
1442. 
1443.     def __len__(self):
1444.         self._fetch_all()
1445.         return len(self._result_cache)
1446. 
1447.     def __bool__(self):
1448.         self._fetch_all()
1449.         return bool(self._result_cache)
1450. 
1451.     def __iter__(self):
1452.         self._fetch_all()
1453.         return iter(self._result_cache)
1454. 
1455.     def iterator(self):
1456.         # Cache some things for performance reasons outside the loop.
1457.         db = self.db
1458.         compiler = connections[db].ops.compiler('SQLCompiler')(
1459.             self.query, connections[db], db
1460.         )
1461. 
1462.         query = iter(self.query)
1463. 
1464.         try:
1465.             model_init_names, model_init_pos, annotation_fields = self.resolve_model_init_order()
1466.             if self.model._meta.pk.attname not in model_init_names:
1467.                 raise exceptions.FieldDoesNotExist(
1468.                     'Raw query must include the primary key'
1469.                 )
1470.             model_cls = self.model
1471.             fields = [self.model_fields.get(c) for c in self.columns]
1472.             converters = compiler.get_converters([
1473.                 f.get_col(f.model._meta.db_table) if f else None for f in fields
1474.             ])
1475.             if converters:
1476.                 query = compiler.apply_converters(query, converters)
1477.             for values in query:
1478.                 # Associate fields to values
1479.                 model_init_values = [values[pos] for pos in model_init_pos]
1480.                 instance = model_cls.from_db(db, model_init_names, model_init_values)
1481.                 if annotation_fields:
1482.                     for column, pos in annotation_fields:
1483.                         setattr(instance, column, values[pos])
1484.                 yield instance
1485.         finally:
1486.             # Done iterating the Query. If it has its own cursor, close it.
1487.             if hasattr(self.query, 'cursor') and self.query.cursor:
1488.                 self.query.cursor.close()
1489. 
1490.     def __repr__(self):
1491.         return "<%s: %s>" % (self.__class__.__name__, self.query)
1492. 
1493.     def __getitem__(self, k):
1494.         return list(self)[k]
1495. 
1496.     @property
1497.     def db(self):
1498.         """Return the database used if this query is executed now."""
1499.         return self._db or router.db_for_read(self.model, **self._hints)
1500. 
1501.     def using(self, alias):
1502.         """Select the database this RawQuerySet should execute against."""
1503.         return RawQuerySet(
1504.             self.raw_query, model=self.model,
1505.             query=self.query.chain(using=alias),
1506.             params=self.params, translations=self.translations,
1507.             using=alias,
1508.         )
1509. 
1510.     @cached_property
1511.     def columns(self):
1512.         """
1513.         A list of model field names in the order they'll appear in the
1514.         query results.
1515.         """
1516.         columns = self.query.get_columns()
1517.         # Adjust any column names which don't match field names
1518.         for (query_name, model_name) in self.translations.items():
1519.             # Ignore translations for nonexistent column names
1520.             try:
1521.                 index = columns.index(query_name)
1522.             except ValueError:
1523.                 pass
1524.             else:
1525.                 columns[index] = model_name
1526.         return columns
1527. 
1528.     @cached_property
1529.     def model_fields(self):
1530.         """A dict mapping column names to model field names."""
1531.         converter = connections[self.db].introspection.identifier_converter
1532.         model_fields = {}
1533.         for field in self.model._meta.fields:
1534.             name, column = field.get_attname_column()
1535.             model_fields[converter(column)] = field
1536.         return model_fields
1537. 
1538. 
1539. class Prefetch:
1540.     def __init__(self, lookup, queryset=None, to_attr=None):
1541.         # `prefetch_through` is the path we traverse to perform the prefetch.
1542.         self.prefetch_through = lookup
1543.         # `prefetch_to` is the path to the attribute that stores the result.
1544.         self.prefetch_to = lookup
1545.         if queryset is not None and (
1546.             isinstance(queryset, RawQuerySet) or (
1547.                 hasattr(queryset, '_iterable_class') and
1548.                 not issubclass(queryset._iterable_class, ModelIterable)
1549.             )
1550.         ):
1551.             raise ValueError(
1552.                 'Prefetch querysets cannot use raw(), values(), and '
1553.                 'values_list().'
1554.             )
1555.         if to_attr:
1556.             self.prefetch_to = LOOKUP_SEP.join(lookup.split(LOOKUP_SEP)[:-1] + [to_attr])
1557. 
1558.         self.queryset = queryset
1559.         self.to_attr = to_attr
1560. 
1561.     def __getstate__(self):
1562.         obj_dict = self.__dict__.copy()
1563.         if self.queryset is not None:
1564.             # Prevent the QuerySet from being evaluated
1565.             obj_dict['queryset'] = self.queryset._chain(
1566.                 _result_cache=[],
1567.                 _prefetch_done=True,
1568.             )
1569.         return obj_dict
1570. 
1571.     def add_prefix(self, prefix):
1572.         self.prefetch_through = prefix + LOOKUP_SEP + self.prefetch_through
1573.         self.prefetch_to = prefix + LOOKUP_SEP + self.prefetch_to
1574. 
1575.     def get_current_prefetch_to(self, level):
1576.         return LOOKUP_SEP.join(self.prefetch_to.split(LOOKUP_SEP)[:level + 1])
1577. 
1578.     def get_current_to_attr(self, level):
1579.         parts = self.prefetch_to.split(LOOKUP_SEP)
1580.         to_attr = parts[level]
1581.         as_attr = self.to_attr and level == len(parts) - 1
1582.         return to_attr, as_attr
1583. 
1584.     def get_current_queryset(self, level):
1585.         if self.get_current_prefetch_to(level) == self.prefetch_to:
1586.             return self.queryset
1587.         return None
1588. 
1589.     def __eq__(self, other):
1590.         if not isinstance(other, Prefetch):
1591.             return NotImplemented
1592.         return self.prefetch_to == other.prefetch_to
1593. 
1594.     def __hash__(self):
1595.         return hash((self.__class__, self.prefetch_to))
1596. 
1597. 
1598. def normalize_prefetch_lookups(lookups, prefix=None):
1599.     """Normalize lookups into Prefetch objects."""
1600.     ret = []
1601.     for lookup in lookups:
1602.         if not isinstance(lookup, Prefetch):
1603.             lookup = Prefetch(lookup)
1604.         if prefix:
1605.             lookup.add_prefix(prefix)
1606.         ret.append(lookup)
1607.     return ret
1608. 
1609. 
1610. def prefetch_related_objects(model_instances, *related_lookups):
1611.     """
1612.     Populate prefetched object caches for a list of model instances based on
1613.     the lookups/Prefetch instances given.
1614.     """
1615.     if not model_instances:
1616.         return  # nothing to do
1617. 
1618.     # We need to be able to dynamically add to the list of prefetch_related
1619.     # lookups that we look up (see below).  So we need some book keeping to
1620.     # ensure we don't do duplicate work.
1621.     done_queries = {}    # dictionary of things like 'foo__bar': [results]
1622. 
1623.     auto_lookups = set()  # we add to this as we go through.
1624.     followed_descriptors = set()  # recursion protection
1625. 
1626.     all_lookups = normalize_prefetch_lookups(reversed(related_lookups))
1627.     while all_lookups:
1628.         lookup = all_lookups.pop()
1629.         if lookup.prefetch_to in done_queries:
1630.             if lookup.queryset is not None:
1631.                 raise ValueError("'%s' lookup was already seen with a different queryset. "
1632.                                  "You may need to adjust the ordering of your lookups." % lookup.prefetch_to)
1633. 
1634.             continue
1635. 
1636.         # Top level, the list of objects to decorate is the result cache
1637.         # from the primary QuerySet. It won't be for deeper levels.
1638.         obj_list = model_instances
1639. 
1640.         through_attrs = lookup.prefetch_through.split(LOOKUP_SEP)
1641.         for level, through_attr in enumerate(through_attrs):
1642.             # Prepare main instances
1643.             if not obj_list:
1644.                 break
1645. 
1646.             prefetch_to = lookup.get_current_prefetch_to(level)
1647.             if prefetch_to in done_queries:
1648.                 # Skip any prefetching, and any object preparation
1649.                 obj_list = done_queries[prefetch_to]
1650.                 continue
1651. 
1652.             # Prepare objects:
1653.             good_objects = True
1654.             for obj in obj_list:
1655.                 # Since prefetching can re-use instances, it is possible to have
1656.                 # the same instance multiple times in obj_list, so obj might
1657.                 # already be prepared.
1658.                 if not hasattr(obj, '_prefetched_objects_cache'):
1659.                     try:
1660.                         obj._prefetched_objects_cache = {}
1661.                     except (AttributeError, TypeError):
1662.                         # Must be an immutable object from
1663.                         # values_list(flat=True), for example (TypeError) or
1664.                         # a QuerySet subclass that isn't returning Model
1665.                         # instances (AttributeError), either in Django or a 3rd
1666.                         # party. prefetch_related() doesn't make sense, so quit.
1667.                         good_objects = False
1668.                         break
1669.             if not good_objects:
1670.                 break
1671. 
1672.             # Descend down tree
1673. 
1674.             # We assume that objects retrieved are homogeneous (which is the premise
1675.             # of prefetch_related), so what applies to first object applies to all.
1676.             first_obj = obj_list[0]
1677.             to_attr = lookup.get_current_to_attr(level)[0]
1678.             prefetcher, descriptor, attr_found, is_fetched = get_prefetcher(first_obj, through_attr, to_attr)
1679. 
1680.             if not attr_found:
1681.                 raise AttributeError("Cannot find '%s' on %s object, '%s' is an invalid "
1682.                                      "parameter to prefetch_related()" %
1683.                                      (through_attr, first_obj.__class__.__name__, lookup.prefetch_through))
1684. 
1685.             if level == len(through_attrs) - 1 and prefetcher is None:
1686.                 # Last one, this *must* resolve to something that supports
1687.                 # prefetching, otherwise there is no point adding it and the
1688.                 # developer asking for it has made a mistake.
1689.                 raise ValueError("'%s' does not resolve to an item that supports "
1690.                                  "prefetching - this is an invalid parameter to "
1691.                                  "prefetch_related()." % lookup.prefetch_through)
1692. 
1693.             if prefetcher is not None and not is_fetched:
1694.                 obj_list, additional_lookups = prefetch_one_level(obj_list, prefetcher, lookup, level)
1695.                 # We need to ensure we don't keep adding lookups from the
1696.                 # same relationships to stop infinite recursion. So, if we
1697.                 # are already on an automatically added lookup, don't add
1698.                 # the new lookups from relationships we've seen already.
1699.                 if not (prefetch_to in done_queries and lookup in auto_lookups and descriptor in followed_descriptors):
1700.                     done_queries[prefetch_to] = obj_list
1701.                     new_lookups = normalize_prefetch_lookups(reversed(additional_lookups), prefetch_to)
1702.                     auto_lookups.update(new_lookups)
1703.                     all_lookups.extend(new_lookups)
1704.                 followed_descriptors.add(descriptor)
1705.             else:
1706.                 # Either a singly related object that has already been fetched
1707.                 # (e.g. via select_related), or hopefully some other property
1708.                 # that doesn't support prefetching but needs to be traversed.
1709. 
1710.                 # We replace the current list of parent objects with the list
1711.                 # of related objects, filtering out empty or missing values so
1712.                 # that we can continue with nullable or reverse relations.
1713.                 new_obj_list = []
1714.                 for obj in obj_list:
1715.                     if through_attr in getattr(obj, '_prefetched_objects_cache', ()):
1716.                         # If related objects have been prefetched, use the
1717.                         # cache rather than the object's through_attr.
1718.                         new_obj = list(obj._prefetched_objects_cache.get(through_attr))
1719.                     else:
1720.                         try:
1721.                             new_obj = getattr(obj, through_attr)
1722.                         except exceptions.ObjectDoesNotExist:
1723.                             continue
1724.                     if new_obj is None:
1725.                         continue
1726.                     # We special-case `list` rather than something more generic
1727.                     # like `Iterable` because we don't want to accidentally match
1728.                     # user models that define __iter__.
1729.                     if isinstance(new_obj, list):
1730.                         new_obj_list.extend(new_obj)
1731.                     else:
1732.                         new_obj_list.append(new_obj)
1733.                 obj_list = new_obj_list
1734. 
1735. 
1736. def get_prefetcher(instance, through_attr, to_attr):
1737.     """
1738.     For the attribute 'through_attr' on the given instance, find
1739.     an object that has a get_prefetch_queryset().
1740.     Return a 4 tuple containing:
1741.     (the object with get_prefetch_queryset (or None),
1742.      the descriptor object representing this relationship (or None),
1743.      a boolean that is False if the attribute was not found at all,
1744.      a boolean that is True if the attribute has already been fetched)
1745.     """
1746.     prefetcher = None
1747.     is_fetched = False
1748. 
1749.     # For singly related objects, we have to avoid getting the attribute
1750.     # from the object, as this will trigger the query. So we first try
1751.     # on the class, in order to get the descriptor object.
1752.     rel_obj_descriptor = getattr(instance.__class__, through_attr, None)
1753.     if rel_obj_descriptor is None:
1754.         attr_found = hasattr(instance, through_attr)
1755.     else:
1756.         attr_found = True
1757.         if rel_obj_descriptor:
1758.             # singly related object, descriptor object has the
1759.             # get_prefetch_queryset() method.
1760.             if hasattr(rel_obj_descriptor, 'get_prefetch_queryset'):
1761.                 prefetcher = rel_obj_descriptor
1762.                 if rel_obj_descriptor.is_cached(instance):
1763.                     is_fetched = True
1764.             else:
1765.                 # descriptor doesn't support prefetching, so we go ahead and get
1766.                 # the attribute on the instance rather than the class to
1767.                 # support many related managers
1768.                 rel_obj = getattr(instance, through_attr)
1769.                 if hasattr(rel_obj, 'get_prefetch_queryset'):
1770.                     prefetcher = rel_obj
1771.                 if through_attr != to_attr:
1772.                     # Special case cached_property instances because hasattr
1773.                     # triggers attribute computation and assignment.
1774.                     if isinstance(getattr(instance.__class__, to_attr, None), cached_property):
1775.                         is_fetched = to_attr in instance.__dict__
1776.                     else:
1777.                         is_fetched = hasattr(instance, to_attr)
1778.                 else:
1779.                     is_fetched = through_attr in instance._prefetched_objects_cache
1780.     return prefetcher, rel_obj_descriptor, attr_found, is_fetched
1781. 
1782. 
1783. def prefetch_one_level(instances, prefetcher, lookup, level):
1784.     """
1785.     Helper function for prefetch_related_objects().
1786. 
1787.     Run prefetches on all instances using the prefetcher object,
1788.     assigning results to relevant caches in instance.
1789. 
1790.     Return the prefetched objects along with any additional prefetches that
1791.     must be done due to prefetch_related lookups found from default managers.
1792.     """
1793.     # prefetcher must have a method get_prefetch_queryset() which takes a list
1794.     # of instances, and returns a tuple:
1795. 
1796.     # (queryset of instances of self.model that are related to passed in instances,
1797.     #  callable that gets value to be matched for returned instances,
1798.     #  callable that gets value to be matched for passed in instances,
1799.     #  boolean that is True for singly related objects,
1800.     #  cache or field name to assign to,
1801.     #  boolean that is True when the previous argument is a cache name vs a field name).
1802. 
1803.     # The 'values to be matched' must be hashable as they will be used
1804.     # in a dictionary.
1805. 
1806.     rel_qs, rel_obj_attr, instance_attr, single, cache_name, is_descriptor = (
1807.         prefetcher.get_prefetch_queryset(instances, lookup.get_current_queryset(level)))
1808.     # We have to handle the possibility that the QuerySet we just got back
1809.     # contains some prefetch_related lookups. We don't want to trigger the
1810.     # prefetch_related functionality by evaluating the query. Rather, we need
1811.     # to merge in the prefetch_related lookups.
1812.     # Copy the lookups in case it is a Prefetch object which could be reused
1813.     # later (happens in nested prefetch_related).
1814.     additional_lookups = [
1815.         copy.copy(additional_lookup) for additional_lookup
1816.         in getattr(rel_qs, '_prefetch_related_lookups', ())
1817.     ]
1818.     if additional_lookups:
1819.         # Don't need to clone because the manager should have given us a fresh
1820.         # instance, so we access an internal instead of using public interface
1821.         # for performance reasons.
1822.         rel_qs._prefetch_related_lookups = ()
1823. 
1824.     all_related_objects = list(rel_qs)
1825. 
1826.     rel_obj_cache = {}
1827.     for rel_obj in all_related_objects:
1828.         rel_attr_val = rel_obj_attr(rel_obj)
1829.         rel_obj_cache.setdefault(rel_attr_val, []).append(rel_obj)
1830. 
1831.     to_attr, as_attr = lookup.get_current_to_attr(level)
1832.     # Make sure `to_attr` does not conflict with a field.
1833.     if as_attr and instances:
1834.         # We assume that objects retrieved are homogeneous (which is the premise
1835.         # of prefetch_related), so what applies to first object applies to all.
1836.         model = instances[0].__class__
1837.         try:
1838.             model._meta.get_field(to_attr)
1839.         except exceptions.FieldDoesNotExist:
1840.             pass
1841.         else:
1842.             msg = 'to_attr={} conflicts with a field on the {} model.'
1843.             raise ValueError(msg.format(to_attr, model.__name__))
1844. 
1845.     # Whether or not we're prefetching the last part of the lookup.
1846.     leaf = len(lookup.prefetch_through.split(LOOKUP_SEP)) - 1 == level
1847. 
1848.     for obj in instances:
1849.         instance_attr_val = instance_attr(obj)
1850.         vals = rel_obj_cache.get(instance_attr_val, [])
1851. 
1852.         if single:
1853.             val = vals[0] if vals else None
1854.             if as_attr:
1855.                 # A to_attr has been given for the prefetch.
1856.                 setattr(obj, to_attr, val)
1857.             elif is_descriptor:
1858.                 # cache_name points to a field name in obj.
1859.                 # This field is a descriptor for a related object.
1860.                 setattr(obj, cache_name, val)
1861.             else:
1862.                 # No to_attr has been given for this prefetch operation and the
1863.                 # cache_name does not point to a descriptor. Store the value of
1864.                 # the field in the object's field cache.
1865.                 obj._state.fields_cache[cache_name] = val
1866.         else:
1867.             if as_attr:
1868.                 setattr(obj, to_attr, vals)
1869.             else:
1870.                 manager = getattr(obj, to_attr)
1871.                 if leaf and lookup.queryset is not None:
1872.                     qs = manager._apply_rel_filters(lookup.queryset)
1873.                 else:
1874.                     qs = manager.get_queryset()
1875.                 qs._result_cache = vals
1876.                 # We don't want the individual qs doing prefetch_related now,
1877.                 # since we have merged this into the current work.
1878.                 qs._prefetch_done = True
1879.                 obj._prefetched_objects_cache[cache_name] = qs
1880.     return all_related_objects, additional_lookups
1881. 
1882. 
1883. class RelatedPopulator:
1884.     """
1885.     RelatedPopulator is used for select_related() object instantiation.
1886. 
1887.     The idea is that each select_related() model will be populated by a
1888.     different RelatedPopulator instance. The RelatedPopulator instances get
1889.     klass_info and select (computed in SQLCompiler) plus the used db as
1890.     input for initialization. That data is used to compute which columns
1891.     to use, how to instantiate the model, and how to populate the links
1892.     between the objects.
1893. 
1894.     The actual creation of the objects is done in populate() method. This
1895.     method gets row and from_obj as input and populates the select_related()
1896.     model instance.
1897.     """
1898.     def __init__(self, klass_info, select, db):
1899.         self.db = db
1900.         # Pre-compute needed attributes. The attributes are:
1901.         #  - model_cls: the possibly deferred model class to instantiate
1902.         #  - either:
1903.         #    - cols_start, cols_end: usually the columns in the row are
1904.         #      in the same order model_cls.__init__ expects them, so we
1905.         #      can instantiate by model_cls(*row[cols_start:cols_end])
1906.         #    - reorder_for_init: When select_related descends to a child
1907.         #      class, then we want to reuse the already selected parent
1908.         #      data. However, in this case the parent data isn't necessarily
1909.         #      in the same order that Model.__init__ expects it to be, so
1910.         #      we have to reorder the parent data. The reorder_for_init
1911.         #      attribute contains a function used to reorder the field data
1912.         #      in the order __init__ expects it.
1913.         #  - pk_idx: the index of the primary key field in the reordered
1914.         #    model data. Used to check if a related object exists at all.
1915.         #  - init_list: the field attnames fetched from the database. For
1916.         #    deferred models this isn't the same as all attnames of the
1917.         #    model's fields.
1918.         #  - related_populators: a list of RelatedPopulator instances if
1919.         #    select_related() descends to related models from this model.
1920.         #  - local_setter, remote_setter: Methods to set cached values on
1921.         #    the object being populated and on the remote object. Usually
1922.         #    these are Field.set_cached_value() methods.
1923.         select_fields = klass_info['select_fields']
1924.         from_parent = klass_info['from_parent']
1925.         if not from_parent:
1926.             self.cols_start = select_fields[0]
1927.             self.cols_end = select_fields[-1] + 1
1928.             self.init_list = [
1929.                 f[0].target.attname for f in select[self.cols_start:self.cols_end]
1930.             ]
1931.             self.reorder_for_init = None
1932.         else:
1933.             attname_indexes = {select[idx][0].target.attname: idx for idx in select_fields}
1934.             model_init_attnames = (f.attname for f in klass_info['model']._meta.concrete_fields)
1935.             self.init_list = [attname for attname in model_init_attnames if attname in attname_indexes]
1936.             self.reorder_for_init = operator.itemgetter(*[attname_indexes[attname] for attname in self.init_list])
1937. 
1938.         self.model_cls = klass_info['model']
1939.         self.pk_idx = self.init_list.index(self.model_cls._meta.pk.attname)
1940.         self.related_populators = get_related_populators(klass_info, select, self.db)
1941.         self.local_setter = klass_info['local_setter']
1942.         self.remote_setter = klass_info['remote_setter']
1943. 
1944.     def populate(self, row, from_obj):
1945.         if self.reorder_for_init:
1946.             obj_data = self.reorder_for_init(row)
1947.         else:
1948.             obj_data = row[self.cols_start:self.cols_end]
1949.         if obj_data[self.pk_idx] is None:
1950.             obj = None
1951.         else:
1952.             obj = self.model_cls.from_db(self.db, self.init_list, obj_data)
1953.             for rel_iter in self.related_populators:
1954.                 rel_iter.populate(row, obj)
1955.         self.local_setter(from_obj, obj)
1956.         if obj is not None:
1957.             self.remote_setter(obj, from_obj)
1958. 
1959. 
1960. def get_related_populators(klass_info, select, db):
1961.     iterators = []
1962.     related_klass_infos = klass_info.get('related_klass_infos', [])
1963.     for rel_klass_info in related_klass_infos:
1964.         rel_cls = RelatedPopulator(rel_klass_info, select, db)
1965.         iterators.append(rel_cls)
1966.     return iterators

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-22 16:46:21,007 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's patch for `QuerySet.in_bulk` relies on `self.model._meta.total_unique_constraints` to identify fields with a unique constraint. To understand how this property is populated and what it contains, I need the definition of the `Options` class (the `_meta` attribute), which is in `django/db/models/options.py`. This will clarify how constraints are collected and made available on the model's meta options. I also need to see the definition of `UniqueConstraint` from `django/db/models/constraints.py` to understand the objects being iterated over in the patch." query='Please provide the full content of the file `django/db/models/options.py` and `django/db/models/constraints.py`.' extra_requirements='' purpose='I need to understand the `Options` class, specifically the `total_unique_constraints` property, and the `UniqueConstraint` class to validate the logic in the provided patch.'
2025-12-22 16:46:21,008 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/models/options.py` and `django/db/models/constraints.py`.
2025-12-22 16:46:21,008 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-22 16:46:21,009 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-22 16:46:21,009 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-22 16:46:21,009 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/models/options.py` and `django/db/models/constraints.py`.
Purpose: I need to understand the `Options` class, specifically the `total_unique_constraints` property, and the `UniqueConstraint` class to validate the logic in the provided patch.
2025-12-22 16:46:24,815 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first read the full content of the file `django/db/models/options.py` to understand the `Options` class and its `total_unique_constraints` property. Next, I will read the file `django/db/models/constraints.py` to understand the implementation of the `UniqueConstraint` class. This will allow me to validate the logic in the provided patch as requested by the user.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/constraints.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2124, 'candidates_token_count': 133, 'total_token_count': 2449, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2124}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 133}], 'thoughts_token_count': 192, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07672667682619023, 'model_name': 'gemini-2.5-pro'} id='run--cf0dd57b-f05a-4076-8510-25012bfab2d1-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/options.py'}, 'id': '16f7e8ac-005c-4da4-b78b-a77576ebdac4', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/constraints.py'}, 'id': '42a6eb2d-458c-43ac-a7d5-a2bf0469d396', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2124, 'output_tokens': 133, 'total_tokens': 2449, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 192}}
2025-12-22 16:46:34,030 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the full contents of `django/db/models/options.py` and `django/db/models/constraints.py`. This provides the necessary context to understand the `Options` class, including its handling of constraints, and the implementation of the `UniqueConstraint` class. I can now proceed to analyze these files to address the user's query about the `total_unique_constraints` property and validate the logic of their patch." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11608, 'candidates_token_count': 94, 'total_token_count': 12456, 'cached_content_token_count': 1856, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11608}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1856}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 94}], 'thoughts_token_count': 754}, 'finish_reason': 'STOP', 'avg_logprobs': -0.8642684449540808, 'model_name': 'gemini-2.5-pro'} id='run--e34520ac-e4d4-4aea-bcc0-6b27c1bfdd88-0' usage_metadata={'input_tokens': 11608, 'output_tokens': 94, 'total_tokens': 12456, 'input_token_details': {'cache_read': 1856}, 'output_token_details': {'reasoning': 754}}
2025-12-22 16:46:34,032 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/models/options.py` and `django/db/models/constraints.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to understand the `Options` class, specifically the `total_unique_constraints` property, and the `UniqueConstraint` class to validate the logic in the provided patch.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/constraints.py
Line number range: 1 - 125
Content:
1. from django.db.models.query_utils import Q
2. from django.db.models.sql.query import Query
3. 
4. __all__ = ['CheckConstraint', 'UniqueConstraint']
5. 
6. 
7. class BaseConstraint:
8.     def __init__(self, name):
9.         self.name = name
10. 
11.     def constraint_sql(self, model, schema_editor):
12.         raise NotImplementedError('This method must be implemented by a subclass.')
13. 
14.     def create_sql(self, model, schema_editor):
15.         raise NotImplementedError('This method must be implemented by a subclass.')
16. 
17.     def remove_sql(self, model, schema_editor):
18.         raise NotImplementedError('This method must be implemented by a subclass.')
19. 
20.     def deconstruct(self):
21.         path = '%s.%s' % (self.__class__.__module__, self.__class__.__name__)
22.         path = path.replace('django.db.models.constraints', 'django.db.models')
23.         return (path, (), {'name': self.name})
24. 
25.     def clone(self):
26.         _, args, kwargs = self.deconstruct()
27.         return self.__class__(*args, **kwargs)
28. 
29. 
30. class CheckConstraint(BaseConstraint):
31.     def __init__(self, *, check, name):
32.         self.check = check
33.         if not getattr(check, 'conditional', False):
34.             raise TypeError(
35.                 'CheckConstraint.check must be a Q instance or boolean '
36.                 'expression.'
37.             )
38.         super().__init__(name)
39. 
40.     def _get_check_sql(self, model, schema_editor):
41.         query = Query(model=model, alias_cols=False)
42.         where = query.build_where(self.check)
43.         compiler = query.get_compiler(connection=schema_editor.connection)
44.         sql, params = where.as_sql(compiler, schema_editor.connection)
45.         return sql % tuple(schema_editor.quote_value(p) for p in params)
46. 
47.     def constraint_sql(self, model, schema_editor):
48.         check = self._get_check_sql(model, schema_editor)
49.         return schema_editor._check_sql(self.name, check)
50. 
51.     def create_sql(self, model, schema_editor):
52.         check = self._get_check_sql(model, schema_editor)
53.         return schema_editor._create_check_sql(model, self.name, check)
54. 
55.     def remove_sql(self, model, schema_editor):
56.         return schema_editor._delete_check_sql(model, self.name)
57. 
58.     def __repr__(self):
59.         return "<%s: check='%s' name=%r>" % (self.__class__.__name__, self.check, self.name)
60. 
61.     def __eq__(self, other):
62.         if isinstance(other, CheckConstraint):
63.             return self.name == other.name and self.check == other.check
64.         return super().__eq__(other)
65. 
66.     def deconstruct(self):
67.         path, args, kwargs = super().deconstruct()
68.         kwargs['check'] = self.check
69.         return path, args, kwargs
70. 
71. 
72. class UniqueConstraint(BaseConstraint):
73.     def __init__(self, *, fields, name, condition=None):
74.         if not fields:
75.             raise ValueError('At least one field is required to define a unique constraint.')
76.         if not isinstance(condition, (type(None), Q)):
77.             raise ValueError('UniqueConstraint.condition must be a Q instance.')
78.         self.fields = tuple(fields)
79.         self.condition = condition
80.         super().__init__(name)
81. 
82.     def _get_condition_sql(self, model, schema_editor):
83.         if self.condition is None:
84.             return None
85.         query = Query(model=model, alias_cols=False)
86.         where = query.build_where(self.condition)
87.         compiler = query.get_compiler(connection=schema_editor.connection)
88.         sql, params = where.as_sql(compiler, schema_editor.connection)
89.         return sql % tuple(schema_editor.quote_value(p) for p in params)
90. 
91.     def constraint_sql(self, model, schema_editor):
92.         fields = [model._meta.get_field(field_name).column for field_name in self.fields]
93.         condition = self._get_condition_sql(model, schema_editor)
94.         return schema_editor._unique_sql(model, fields, self.name, condition=condition)
95. 
96.     def create_sql(self, model, schema_editor):
97.         fields = [model._meta.get_field(field_name).column for field_name in self.fields]
98.         condition = self._get_condition_sql(model, schema_editor)
99.         return schema_editor._create_unique_sql(model, fields, self.name, condition=condition)
100. 
101.     def remove_sql(self, model, schema_editor):
102.         condition = self._get_condition_sql(model, schema_editor)
103.         return schema_editor._delete_unique_sql(model, self.name, condition=condition)
104. 
105.     def __repr__(self):
106.         return '<%s: fields=%r name=%r%s>' % (
107.             self.__class__.__name__, self.fields, self.name,
108.             '' if self.condition is None else ' condition=%s' % self.condition,
109.         )
110. 
111.     def __eq__(self, other):
112.         if isinstance(other, UniqueConstraint):
113.             return (
114.                 self.name == other.name and
115.                 self.fields == other.fields and
116.                 self.condition == other.condition
117.             )
118.         return super().__eq__(other)
119. 
120.     def deconstruct(self):
121.         path, args, kwargs = super().deconstruct()
122.         kwargs['fields'] = self.fields
123.         if self.condition:
124.             kwargs['condition'] = self.condition
125.         return path, args, kwargs


File: django/db/models/options.py
Line number range: 1 - 500
Content:
1. import bisect
2. import copy
3. import inspect
4. from collections import defaultdict
5. 
6. from django.apps import apps
7. from django.conf import settings
8. from django.core.exceptions import FieldDoesNotExist
9. from django.db import connections
10. from django.db.models import AutoField, Manager, OrderWrt, UniqueConstraint
11. from django.db.models.query_utils import PathInfo
12. from django.utils.datastructures import ImmutableList, OrderedSet
13. from django.utils.functional import cached_property
14. from django.utils.text import camel_case_to_spaces, format_lazy
15. from django.utils.translation import override
16. 
17. PROXY_PARENTS = object()
18. 
19. EMPTY_RELATION_TREE = ()
20. 
21. IMMUTABLE_WARNING = (
22.     "The return type of '%s' should never be mutated. If you want to manipulate this list "
23.     "for your own use, make a copy first."
24. )
25. 
26. DEFAULT_NAMES = (
27.     'verbose_name', 'verbose_name_plural', 'db_table', 'ordering',
28.     'unique_together', 'permissions', 'get_latest_by', 'order_with_respect_to',
29.     'app_label', 'db_tablespace', 'abstract', 'managed', 'proxy', 'swappable',
30.     'auto_created', 'index_together', 'apps', 'default_permissions',
31.     'select_on_save', 'default_related_name', 'required_db_features',
32.     'required_db_vendor', 'base_manager_name', 'default_manager_name',
33.     'indexes', 'constraints',
34. )
35. 
36. 
37. def normalize_together(option_together):
38.     """
39.     option_together can be either a tuple of tuples, or a single
40.     tuple of two strings. Normalize it to a tuple of tuples, so that
41.     calling code can uniformly expect that.
42.     """
43.     try:
44.         if not option_together:
45.             return ()
46.         if not isinstance(option_together, (tuple, list)):
47.             raise TypeError
48.         first_element = option_together[0]
49.         if not isinstance(first_element, (tuple, list)):
50.             option_together = (option_together,)
51.         # Normalize everything to tuples
52.         return tuple(tuple(ot) for ot in option_together)
53.     except TypeError:
54.         # If the value of option_together isn't valid, return it
55.         # verbatim; this will be picked up by the check framework later.
56.         return option_together
57. 
58. 
59. def make_immutable_fields_list(name, data):
60.     return ImmutableList(data, warning=IMMUTABLE_WARNING % name)
61. 
62. 
63. class Options:
64.     FORWARD_PROPERTIES = {
65.         'fields', 'many_to_many', 'concrete_fields', 'local_concrete_fields',
66.         '_forward_fields_map', 'managers', 'managers_map', 'base_manager',
67.         'default_manager',
68.     }
69.     REVERSE_PROPERTIES = {'related_objects', 'fields_map', '_relation_tree'}
70. 
71.     default_apps = apps
72. 
73.     def __init__(self, meta, app_label=None):
74.         self._get_fields_cache = {}
75.         self.local_fields = []
76.         self.local_many_to_many = []
77.         self.private_fields = []
78.         self.local_managers = []
79.         self.base_manager_name = None
80.         self.default_manager_name = None
81.         self.model_name = None
82.         self.verbose_name = None
83.         self.verbose_name_plural = None
84.         self.db_table = ''
85.         self.ordering = []
86.         self._ordering_clash = False
87.         self.indexes = []
88.         self.constraints = []
89.         self.unique_together = []
90.         self.index_together = []
91.         self.select_on_save = False
92.         self.default_permissions = ('add', 'change', 'delete', 'view')
93.         self.permissions = []
94.         self.object_name = None
95.         self.app_label = app_label
96.         self.get_latest_by = None
97.         self.order_with_respect_to = None
98.         self.db_tablespace = settings.DEFAULT_TABLESPACE
99.         self.required_db_features = []
100.         self.required_db_vendor = None
101.         self.meta = meta
102.         self.pk = None
103.         self.auto_field = None
104.         self.abstract = False
105.         self.managed = True
106.         self.proxy = False
107.         # For any class that is a proxy (including automatically created
108.         # classes for deferred object loading), proxy_for_model tells us
109.         # which class this model is proxying. Note that proxy_for_model
110.         # can create a chain of proxy models. For non-proxy models, the
111.         # variable is always None.
112.         self.proxy_for_model = None
113.         # For any non-abstract class, the concrete class is the model
114.         # in the end of the proxy_for_model chain. In particular, for
115.         # concrete models, the concrete_model is always the class itself.
116.         self.concrete_model = None
117.         self.swappable = None
118.         self.parents = {}
119.         self.auto_created = False
120. 
121.         # List of all lookups defined in ForeignKey 'limit_choices_to' options
122.         # from *other* models. Needed for some admin checks. Internal use only.
123.         self.related_fkey_lookups = []
124. 
125.         # A custom app registry to use, if you're making a separate model set.
126.         self.apps = self.default_apps
127. 
128.         self.default_related_name = None
129. 
130.     @property
131.     def label(self):
132.         return '%s.%s' % (self.app_label, self.object_name)
133. 
134.     @property
135.     def label_lower(self):
136.         return '%s.%s' % (self.app_label, self.model_name)
137. 
138.     @property
139.     def app_config(self):
140.         # Don't go through get_app_config to avoid triggering imports.
141.         return self.apps.app_configs.get(self.app_label)
142. 
143.     @property
144.     def installed(self):
145.         return self.app_config is not None
146. 
147.     def contribute_to_class(self, cls, name):
148.         from django.db import connection
149.         from django.db.backends.utils import truncate_name
150. 
151.         cls._meta = self
152.         self.model = cls
153.         # First, construct the default values for these options.
154.         self.object_name = cls.__name__
155.         self.model_name = self.object_name.lower()
156.         self.verbose_name = camel_case_to_spaces(self.object_name)
157. 
158.         # Store the original user-defined values for each option,
159.         # for use when serializing the model definition
160.         self.original_attrs = {}
161. 
162.         # Next, apply any overridden values from 'class Meta'.
163.         if self.meta:
164.             meta_attrs = self.meta.__dict__.copy()
165.             for name in self.meta.__dict__:
166.                 # Ignore any private attributes that Django doesn't care about.
167.                 # NOTE: We can't modify a dictionary's contents while looping
168.                 # over it, so we loop over the *original* dictionary instead.
169.                 if name.startswith('_'):
170.                     del meta_attrs[name]
171.             for attr_name in DEFAULT_NAMES:
172.                 if attr_name in meta_attrs:
173.                     setattr(self, attr_name, meta_attrs.pop(attr_name))
174.                     self.original_attrs[attr_name] = getattr(self, attr_name)
175.                 elif hasattr(self.meta, attr_name):
176.                     setattr(self, attr_name, getattr(self.meta, attr_name))
177.                     self.original_attrs[attr_name] = getattr(self, attr_name)
178. 
179.             self.unique_together = normalize_together(self.unique_together)
180.             self.index_together = normalize_together(self.index_together)
181.             # App label/class name interpolation for names of constraints and
182.             # indexes.
183.             if not getattr(cls._meta, 'abstract', False):
184.                 for attr_name in {'constraints', 'indexes'}:
185.                     objs = getattr(self, attr_name, [])
186.                     setattr(self, attr_name, self._format_names_with_class(cls, objs))
187. 
188.             # verbose_name_plural is a special case because it uses a 's'
189.             # by default.
190.             if self.verbose_name_plural is None:
191.                 self.verbose_name_plural = format_lazy('{}s', self.verbose_name)
192. 
193.             # order_with_respect_and ordering are mutually exclusive.
194.             self._ordering_clash = bool(self.ordering and self.order_with_respect_to)
195. 
196.             # Any leftover attributes must be invalid.
197.             if meta_attrs != {}:
198.                 raise TypeError("'class Meta' got invalid attribute(s): %s" % ','.join(meta_attrs))
199.         else:
200.             self.verbose_name_plural = format_lazy('{}s', self.verbose_name)
201.         del self.meta
202. 
203.         # If the db_table wasn't provided, use the app_label + model_name.
204.         if not self.db_table:
205.             self.db_table = "%s_%s" % (self.app_label, self.model_name)
206.             self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())
207. 
208.     def _format_names_with_class(self, cls, objs):
209.         """App label/class name interpolation for object names."""
210.         new_objs = []
211.         for obj in objs:
212.             obj = obj.clone()
213.             obj.name = obj.name % {
214.                 'app_label': cls._meta.app_label.lower(),
215.                 'class': cls.__name__.lower(),
216.             }
217.             new_objs.append(obj)
218.         return new_objs
219. 
220.     def _prepare(self, model):
221.         if self.order_with_respect_to:
222.             # The app registry will not be ready at this point, so we cannot
223.             # use get_field().
224.             query = self.order_with_respect_to
225.             try:
226.                 self.order_with_respect_to = next(
227.                     f for f in self._get_fields(reverse=False)
228.                     if f.name == query or f.attname == query
229.                 )
230.             except StopIteration:
231.                 raise FieldDoesNotExist("%s has no field named '%s'" % (self.object_name, query))
232. 
233.             self.ordering = ('_order',)
234.             if not any(isinstance(field, OrderWrt) for field in model._meta.local_fields):
235.                 model.add_to_class('_order', OrderWrt())
236.         else:
237.             self.order_with_respect_to = None
238. 
239.         if self.pk is None:
240.             if self.parents:
241.                 # Promote the first parent link in lieu of adding yet another
242.                 # field.
243.                 field = next(iter(self.parents.values()))
244.                 # Look for a local field with the same name as the
245.                 # first parent link. If a local field has already been
246.                 # created, use it instead of promoting the parent
247.                 already_created = [fld for fld in self.local_fields if fld.name == field.name]
248.                 if already_created:
249.                     field = already_created[0]
250.                 field.primary_key = True
251.                 self.setup_pk(field)
252.             else:
253.                 auto = AutoField(verbose_name='ID', primary_key=True, auto_created=True)
254.                 model.add_to_class('id', auto)
255. 
256.     def add_manager(self, manager):
257.         self.local_managers.append(manager)
258.         self._expire_cache()
259. 
260.     def add_field(self, field, private=False):
261.         # Insert the given field in the order in which it was created, using
262.         # the "creation_counter" attribute of the field.
263.         # Move many-to-many related fields from self.fields into
264.         # self.many_to_many.
265.         if private:
266.             self.private_fields.append(field)
267.         elif field.is_relation and field.many_to_many:
268.             bisect.insort(self.local_many_to_many, field)
269.         else:
270.             bisect.insort(self.local_fields, field)
271.             self.setup_pk(field)
272. 
273.         # If the field being added is a relation to another known field,
274.         # expire the cache on this field and the forward cache on the field
275.         # being referenced, because there will be new relationships in the
276.         # cache. Otherwise, expire the cache of references *to* this field.
277.         # The mechanism for getting at the related model is slightly odd -
278.         # ideally, we'd just ask for field.related_model. However, related_model
279.         # is a cached property, and all the models haven't been loaded yet, so
280.         # we need to make sure we don't cache a string reference.
281.         if field.is_relation and hasattr(field.remote_field, 'model') and field.remote_field.model:
282.             try:
283.                 field.remote_field.model._meta._expire_cache(forward=False)
284.             except AttributeError:
285.                 pass
286.             self._expire_cache()
287.         else:
288.             self._expire_cache(reverse=False)
289. 
290.     def setup_pk(self, field):
291.         if not self.pk and field.primary_key:
292.             self.pk = field
293.             field.serialize = False
294. 
295.     def setup_proxy(self, target):
296.         """
297.         Do the internal setup so that the current model is a proxy for
298.         "target".
299.         """
300.         self.pk = target._meta.pk
301.         self.proxy_for_model = target
302.         self.db_table = target._meta.db_table
303. 
304.     def __repr__(self):
305.         return '<Options for %s>' % self.object_name
306. 
307.     def __str__(self):
308.         return self.label_lower
309. 
310.     def can_migrate(self, connection):
311.         """
312.         Return True if the model can/should be migrated on the `connection`.
313.         `connection` can be either a real connection or a connection alias.
314.         """
315.         if self.proxy or self.swapped or not self.managed:
316.             return False
317.         if isinstance(connection, str):
318.             connection = connections[connection]
319.         if self.required_db_vendor:
320.             return self.required_db_vendor == connection.vendor
321.         if self.required_db_features:
322.             return all(getattr(connection.features, feat, False)
323.                        for feat in self.required_db_features)
324.         return True
325. 
326.     @property
327.     def verbose_name_raw(self):
328.         """Return the untranslated verbose name."""
329.         with override(None):
330.             return str(self.verbose_name)
331. 
332.     @property
333.     def swapped(self):
334.         """
335.         Has this model been swapped out for another? If so, return the model
336.         name of the replacement; otherwise, return None.
337. 
338.         For historical reasons, model name lookups using get_model() are
339.         case insensitive, so we make sure we are case insensitive here.
340.         """
341.         if self.swappable:
342.             swapped_for = getattr(settings, self.swappable, None)
343.             if swapped_for:
344.                 try:
345.                     swapped_label, swapped_object = swapped_for.split('.')
346.                 except ValueError:
347.                     # setting not in the format app_label.model_name
348.                     # raising ImproperlyConfigured here causes problems with
349.                     # test cleanup code - instead it is raised in get_user_model
350.                     # or as part of validation.
351.                     return swapped_for
352. 
353.                 if '%s.%s' % (swapped_label, swapped_object.lower()) != self.label_lower:
354.                     return swapped_for
355.         return None
356. 
357.     @cached_property
358.     def managers(self):
359.         managers = []
360.         seen_managers = set()
361.         bases = (b for b in self.model.mro() if hasattr(b, '_meta'))
362.         for depth, base in enumerate(bases):
363.             for manager in base._meta.local_managers:
364.                 if manager.name in seen_managers:
365.                     continue
366. 
367.                 manager = copy.copy(manager)
368.                 manager.model = self.model
369.                 seen_managers.add(manager.name)
370.                 managers.append((depth, manager.creation_counter, manager))
371. 
372.         return make_immutable_fields_list(
373.             "managers",
374.             (m[2] for m in sorted(managers)),
375.         )
376. 
377.     @cached_property
378.     def managers_map(self):
379.         return {manager.name: manager for manager in self.managers}
380. 
381.     @cached_property
382.     def base_manager(self):
383.         base_manager_name = self.base_manager_name
384.         if not base_manager_name:
385.             # Get the first parent's base_manager_name if there's one.
386.             for parent in self.model.mro()[1:]:
387.                 if hasattr(parent, '_meta'):
388.                     if parent._base_manager.name != '_base_manager':
389.                         base_manager_name = parent._base_manager.name
390.                     break
391. 
392.         if base_manager_name:
393.             try:
394.                 return self.managers_map[base_manager_name]
395.             except KeyError:
396.                 raise ValueError(
397.                     "%s has no manager named %r" % (
398.                         self.object_name,
399.                         base_manager_name,
400.                     )
401.                 )
402. 
403.         manager = Manager()
404.         manager.name = '_base_manager'
405.         manager.model = self.model
406.         manager.auto_created = True
407.         return manager
408. 
409.     @cached_property
410.     def default_manager(self):
411.         default_manager_name = self.default_manager_name
412.         if not default_manager_name and not self.local_managers:
413.             # Get the first parent's default_manager_name if there's one.
414.             for parent in self.model.mro()[1:]:
415.                 if hasattr(parent, '_meta'):
416.                     default_manager_name = parent._meta.default_manager_name
417.                     break
418. 
419.         if default_manager_name:
420.             try:
421.                 return self.managers_map[default_manager_name]
422.             except KeyError:
423.                 raise ValueError(
424.                     "%s has no manager named %r" % (
425.                         self.object_name,
426.                         default_manager_name,
427.                     )
428.                 )
429. 
430.         if self.managers:
431.             return self.managers[0]
432. 
433.     @cached_property
434.     def fields(self):
435.         """
436.         Return a list of all forward fields on the model and its parents,
437.         excluding ManyToManyFields.
438. 
439.         Private API intended only to be used by Django itself; get_fields()
440.         combined with filtering of field properties is the public API for
441.         obtaining this field list.
442.         """
443.         # For legacy reasons, the fields property should only contain forward
444.         # fields that are not private or with a m2m cardinality. Therefore we
445.         # pass these three filters as filters to the generator.
446.         # The third lambda is a longwinded way of checking f.related_model - we don't
447.         # use that property directly because related_model is a cached property,
448.         # and all the models may not have been loaded yet; we don't want to cache
449.         # the string reference to the related_model.
450.         def is_not_an_m2m_field(f):
451.             return not (f.is_relation and f.many_to_many)
452. 
453.         def is_not_a_generic_relation(f):
454.             return not (f.is_relation and f.one_to_many)
455. 
456.         def is_not_a_generic_foreign_key(f):
457.             return not (
458.                 f.is_relation and f.many_to_one and not (hasattr(f.remote_field, 'model') and f.remote_field.model)
459.             )
460. 
461.         return make_immutable_fields_list(
462.             "fields",
463.             (f for f in self._get_fields(reverse=False)
464.              if is_not_an_m2m_field(f) and is_not_a_generic_relation(f) and is_not_a_generic_foreign_key(f))
465.         )
466. 
467.     @cached_property
468.     def concrete_fields(self):
469.         """
470.         Return a list of all concrete fields on the model and its parents.
471. 
472.         Private API intended only to be used by Django itself; get_fields()
473.         combined with filtering of field properties is the public API for
474.         obtaining this field list.
475.         """
476.         return make_immutable_fields_list(
477.             "concrete_fields", (f for f in self.fields if f.concrete)
478.         )
479. 
480.     @cached_property
481.     def local_concrete_fields(self):
482.         """
483.         Return a list of all concrete fields on the model.
484. 
485.         Private API intended only to be used by Django itself; get_fields()
486.         combined with filtering of field properties is the public API for
487.         obtaining this field list.
488.         """
489.         return make_immutable_fields_list(
490.             "local_concrete_fields", (f for f in self.local_fields if f.concrete)
491.         )
492. 
493.     @cached_property
494.     def many_to_many(self):
495.         """
496.         Return a list of all many to many fields on the model and its parents.
497. 
498.         Private API intended only to be used by Django itself; get_fields()
499.         combined with filtering of field properties is the public API for
500.         obtaining this list.

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-22 16:46:43,443 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user requested the full content of the file `django/db/models/constraints.py`. This file contains the definition of the `UniqueConstraint` class, which is explicitly mentioned in the user's purpose for the query.", relative_path='django/db/models/constraints.py', start_line=1, end_line=125), ContextOutput(reasoning="The user requested the full content of the file `django/db/models/options.py`. This file contains the `Options` class, which is a key part of the user's query and purpose.", relative_path='django/db/models/options.py', start_line=1, end_line=500)]
2025-12-22 16:46:43,445 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of the file `django/db/models/options.py` and `django/db/models/constraints.py`.
2025-12-22 16:46:43,445 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-22 16:46:43,445 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-22 16:46:43,445 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 1 existing contexts
2025-12-22 16:46:43,445 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-22 16:46:43,447 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Description: Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Patch information:
diff --git a/django/db/models/query.py b/django/db/models/query.py
index d9c9b0db04..336741f126 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -689,8 +689,19 @@ class QuerySet:
         """
         assert not self.query.is_sliced, \
             "Cannot use 'limit' or 'offset' with in_bulk"
-        if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
-            raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
+        if field_name != 'pk':
+            field = self.model._meta.get_field(field_name)
+            is_unique = field.unique
+            
+            # Also check for single-field UniqueConstraints
+            if not is_unique:
+                for constraint in self.model._meta.total_unique_constraints:
+                    if len(constraint.fields) == 1 and constraint.fields[0] == field_name:
+                        is_unique = True
+                        break
+            
+            if not is_unique:
+                raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
         if id_list is not None:
             if not id_list:
                 return {}
diff --git a/test_in_bulk_unique_constraint.py b/test_in_bulk_unique_constraint.py
new file mode 100644
index 0000000000..0cbd029f19
--- /dev/null
+++ b/test_in_bulk_unique_constraint.py
@@ -0,0 +1,43 @@
+from django.db import models
+from django.test import TestCase
+
+class Article(models.Model):
+    slug = models.CharField(max_length=255)
+    
+    class Meta:
+        constraints = [
+            models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
+        ]
+
+class TestInBulkWithUniqueConstraint(TestCase):
+    def setUp(self):
+        # Create some test articles
+        self.article1 = Article.objects.create(slug="article-1")
+        self.article2 = Article.objects.create(slug="article-2")
+        self.article3 = Article.objects.create(slug="article-3")
+    
+    def test_in_bulk_with_unique_constraint(self):
+        # Test that in_bulk works with a field that has a UniqueConstraint
+        slug_list = ["article-1", "article-2", "article-3"]
+        result = Article.objects.in_bulk(field_name="slug", id_list=slug_list)
+        
+        # Verify that we get the expected results
+        self.assertEqual(len(result), 3)
+        self.assertEqual(result["article-1"].pk, self.article1.pk)
+        self.assertEqual(result["article-2"].pk, self.article2.pk)
+        self.assertEqual(result["article-3"].pk, self.article3.pk)
+    
+    def test_in_bulk_without_id_list(self):
+        # Test that in_bulk works without providing an id_list
+        result = Article.objects.in_bulk(field_name="slug")
+        
+        # Verify that we get all articles
+        self.assertEqual(len(result), 3)
+        self.assertIn("article-1", result)
+        self.assertIn("article-2", result)
+        self.assertIn("article-3", result)
+    
+    def test_in_bulk_with_empty_list(self):
+        # Test that in_bulk returns an empty dict when given an empty list
+        result = Article.objects.in_bulk(field_name="slug", id_list=[])
+        self.assertEqual(result, {})
\ No newline at end of file


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file django/db/models/query.py.
Extra Requirements: 
Purpose: This file contains the `QuerySet.in_bulk()` method that needs to be modified, and seeing its full content is essential to understanding the existing implementation and the impact of the proposed change.

Previous refined query 2:
Essential Query: Please provide the full content of the file `django/db/models/options.py` and `django/db/models/constraints.py`.
Extra Requirements: 
Purpose: I need to understand the `Options` class, specifically the `total_unique_constraints` property, and the `UniqueConstraint` class to validate the logic in the provided patch.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/constraints.py
Line number range: 1 - 125
Content:
1. from django.db.models.query_utils import Q
2. from django.db.models.sql.query import Query
3. 
4. __all__ = ['CheckConstraint', 'UniqueConstraint']
5. 
6. 
7. class BaseConstraint:
8.     def __init__(self, name):
9.         self.name = name
10. 
11.     def constraint_sql(self, model, schema_editor):
12.         raise NotImplementedError('This method must be implemented by a subclass.')
13. 
14.     def create_sql(self, model, schema_editor):
15.         raise NotImplementedError('This method must be implemented by a subclass.')
16. 
17.     def remove_sql(self, model, schema_editor):
18.         raise NotImplementedError('This method must be implemented by a subclass.')
19. 
20.     def deconstruct(self):
21.         path = '%s.%s' % (self.__class__.__module__, self.__class__.__name__)
22.         path = path.replace('django.db.models.constraints', 'django.db.models')
23.         return (path, (), {'name': self.name})
24. 
25.     def clone(self):
26.         _, args, kwargs = self.deconstruct()
27.         return self.__class__(*args, **kwargs)
28. 
29. 
30. class CheckConstraint(BaseConstraint):
31.     def __init__(self, *, check, name):
32.         self.check = check
33.         if not getattr(check, 'conditional', False):
34.             raise TypeError(
35.                 'CheckConstraint.check must be a Q instance or boolean '
36.                 'expression.'
37.             )
38.         super().__init__(name)
39. 
40.     def _get_check_sql(self, model, schema_editor):
41.         query = Query(model=model, alias_cols=False)
42.         where = query.build_where(self.check)
43.         compiler = query.get_compiler(connection=schema_editor.connection)
44.         sql, params = where.as_sql(compiler, schema_editor.connection)
45.         return sql % tuple(schema_editor.quote_value(p) for p in params)
46. 
47.     def constraint_sql(self, model, schema_editor):
48.         check = self._get_check_sql(model, schema_editor)
49.         return schema_editor._check_sql(self.name, check)
50. 
51.     def create_sql(self, model, schema_editor):
52.         check = self._get_check_sql(model, schema_editor)
53.         return schema_editor._create_check_sql(model, self.name, check)
54. 
55.     def remove_sql(self, model, schema_editor):
56.         return schema_editor._delete_check_sql(model, self.name)
57. 
58.     def __repr__(self):
59.         return "<%s: check='%s' name=%r>" % (self.__class__.__name__, self.check, self.name)
60. 
61.     def __eq__(self, other):
62.         if isinstance(other, CheckConstraint):
63.             return self.name == other.name and self.check == other.check
64.         return super().__eq__(other)
65. 
66.     def deconstruct(self):
67.         path, args, kwargs = super().deconstruct()
68.         kwargs['check'] = self.check
69.         return path, args, kwargs
70. 
71. 
72. class UniqueConstraint(BaseConstraint):
73.     def __init__(self, *, fields, name, condition=None):
74.         if not fields:
75.             raise ValueError('At least one field is required to define a unique constraint.')
76.         if not isinstance(condition, (type(None), Q)):
77.             raise ValueError('UniqueConstraint.condition must be a Q instance.')
78.         self.fields = tuple(fields)
79.         self.condition = condition
80.         super().__init__(name)
81. 
82.     def _get_condition_sql(self, model, schema_editor):
83.         if self.condition is None:
84.             return None
85.         query = Query(model=model, alias_cols=False)
86.         where = query.build_where(self.condition)
87.         compiler = query.get_compiler(connection=schema_editor.connection)
88.         sql, params = where.as_sql(compiler, schema_editor.connection)
89.         return sql % tuple(schema_editor.quote_value(p) for p in params)
90. 
91.     def constraint_sql(self, model, schema_editor):
92.         fields = [model._meta.get_field(field_name).column for field_name in self.fields]
93.         condition = self._get_condition_sql(model, schema_editor)
94.         return schema_editor._unique_sql(model, fields, self.name, condition=condition)
95. 
96.     def create_sql(self, model, schema_editor):
97.         fields = [model._meta.get_field(field_name).column for field_name in self.fields]
98.         condition = self._get_condition_sql(model, schema_editor)
99.         return schema_editor._create_unique_sql(model, fields, self.name, condition=condition)
100. 
101.     def remove_sql(self, model, schema_editor):
102.         condition = self._get_condition_sql(model, schema_editor)
103.         return schema_editor._delete_unique_sql(model, self.name, condition=condition)
104. 
105.     def __repr__(self):
106.         return '<%s: fields=%r name=%r%s>' % (
107.             self.__class__.__name__, self.fields, self.name,
108.             '' if self.condition is None else ' condition=%s' % self.condition,
109.         )
110. 
111.     def __eq__(self, other):
112.         if isinstance(other, UniqueConstraint):
113.             return (
114.                 self.name == other.name and
115.                 self.fields == other.fields and
116.                 self.condition == other.condition
117.             )
118.         return super().__eq__(other)
119. 
120.     def deconstruct(self):
121.         path, args, kwargs = super().deconstruct()
122.         kwargs['fields'] = self.fields
123.         if self.condition:
124.             kwargs['condition'] = self.condition
125.         return path, args, kwargs


File: django/db/models/options.py
Line number range: 1 - 500
Content:
1. import bisect
2. import copy
3. import inspect
4. from collections import defaultdict
5. 
6. from django.apps import apps
7. from django.conf import settings
8. from django.core.exceptions import FieldDoesNotExist
9. from django.db import connections
10. from django.db.models import AutoField, Manager, OrderWrt, UniqueConstraint
11. from django.db.models.query_utils import PathInfo
12. from django.utils.datastructures import ImmutableList, OrderedSet
13. from django.utils.functional import cached_property
14. from django.utils.text import camel_case_to_spaces, format_lazy
15. from django.utils.translation import override
16. 
17. PROXY_PARENTS = object()
18. 
19. EMPTY_RELATION_TREE = ()
20. 
21. IMMUTABLE_WARNING = (
22.     "The return type of '%s' should never be mutated. If you want to manipulate this list "
23.     "for your own use, make a copy first."
24. )
25. 
26. DEFAULT_NAMES = (
27.     'verbose_name', 'verbose_name_plural', 'db_table', 'ordering',
28.     'unique_together', 'permissions', 'get_latest_by', 'order_with_respect_to',
29.     'app_label', 'db_tablespace', 'abstract', 'managed', 'proxy', 'swappable',
30.     'auto_created', 'index_together', 'apps', 'default_permissions',
31.     'select_on_save', 'default_related_name', 'required_db_features',
32.     'required_db_vendor', 'base_manager_name', 'default_manager_name',
33.     'indexes', 'constraints',
34. )
35. 
36. 
37. def normalize_together(option_together):
38.     """
39.     option_together can be either a tuple of tuples, or a single
40.     tuple of two strings. Normalize it to a tuple of tuples, so that
41.     calling code can uniformly expect that.
42.     """
43.     try:
44.         if not option_together:
45.             return ()
46.         if not isinstance(option_together, (tuple, list)):
47.             raise TypeError
48.         first_element = option_together[0]
49.         if not isinstance(first_element, (tuple, list)):
50.             option_together = (option_together,)
51.         # Normalize everything to tuples
52.         return tuple(tuple(ot) for ot in option_together)
53.     except TypeError:
54.         # If the value of option_together isn't valid, return it
55.         # verbatim; this will be picked up by the check framework later.
56.         return option_together
57. 
58. 
59. def make_immutable_fields_list(name, data):
60.     return ImmutableList(data, warning=IMMUTABLE_WARNING % name)
61. 
62. 
63. class Options:
64.     FORWARD_PROPERTIES = {
65.         'fields', 'many_to_many', 'concrete_fields', 'local_concrete_fields',
66.         '_forward_fields_map', 'managers', 'managers_map', 'base_manager',
67.         'default_manager',
68.     }
69.     REVERSE_PROPERTIES = {'related_objects', 'fields_map', '_relation_tree'}
70. 
71.     default_apps = apps
72. 
73.     def __init__(self, meta, app_label=None):
74.         self._get_fields_cache = {}
75.         self.local_fields = []
76.         self.local_many_to_many = []
77.         self.private_fields = []
78.         self.local_managers = []
79.         self.base_manager_name = None
80.         self.default_manager_name = None
81.         self.model_name = None
82.         self.verbose_name = None
83.         self.verbose_name_plural = None
84.         self.db_table = ''
85.         self.ordering = []
86.         self._ordering_clash = False
87.         self.indexes = []
88.         self.constraints = []
89.         self.unique_together = []
90.         self.index_together = []
91.         self.select_on_save = False
92.         self.default_permissions = ('add', 'change', 'delete', 'view')
93.         self.permissions = []
94.         self.object_name = None
95.         self.app_label = app_label
96.         self.get_latest_by = None
97.         self.order_with_respect_to = None
98.         self.db_tablespace = settings.DEFAULT_TABLESPACE
99.         self.required_db_features = []
100.         self.required_db_vendor = None
101.         self.meta = meta
102.         self.pk = None
103.         self.auto_field = None
104.         self.abstract = False
105.         self.managed = True
106.         self.proxy = False
107.         # For any class that is a proxy (including automatically created
108.         # classes for deferred object loading), proxy_for_model tells us
109.         # which class this model is proxying. Note that proxy_for_model
110.         # can create a chain of proxy models. For non-proxy models, the
111.         # variable is always None.
112.         self.proxy_for_model = None
113.         # For any non-abstract class, the concrete class is the model
114.         # in the end of the proxy_for_model chain. In particular, for
115.         # concrete models, the concrete_model is always the class itself.
116.         self.concrete_model = None
117.         self.swappable = None
118.         self.parents = {}
119.         self.auto_created = False
120. 
121.         # List of all lookups defined in ForeignKey 'limit_choices_to' options
122.         # from *other* models. Needed for some admin checks. Internal use only.
123.         self.related_fkey_lookups = []
124. 
125.         # A custom app registry to use, if you're making a separate model set.
126.         self.apps = self.default_apps
127. 
128.         self.default_related_name = None
129. 
130.     @property
131.     def label(self):
132.         return '%s.%s' % (self.app_label, self.object_name)
133. 
134.     @property
135.     def label_lower(self):
136.         return '%s.%s' % (self.app_label, self.model_name)
137. 
138.     @property
139.     def app_config(self):
140.         # Don't go through get_app_config to avoid triggering imports.
141.         return self.apps.app_configs.get(self.app_label)
142. 
143.     @property
144.     def installed(self):
145.         return self.app_config is not None
146. 
147.     def contribute_to_class(self, cls, name):
148.         from django.db import connection
149.         from django.db.backends.utils import truncate_name
150. 
151.         cls._meta = self
152.         self.model = cls
153.         # First, construct the default values for these options.
154.         self.object_name = cls.__name__
155.         self.model_name = self.object_name.lower()
156.         self.verbose_name = camel_case_to_spaces(self.object_name)
157. 
158.         # Store the original user-defined values for each option,
159.         # for use when serializing the model definition
160.         self.original_attrs = {}
161. 
162.         # Next, apply any overridden values from 'class Meta'.
163.         if self.meta:
164.             meta_attrs = self.meta.__dict__.copy()
165.             for name in self.meta.__dict__:
166.                 # Ignore any private attributes that Django doesn't care about.
167.                 # NOTE: We can't modify a dictionary's contents while looping
168.                 # over it, so we loop over the *original* dictionary instead.
169.                 if name.startswith('_'):
170.                     del meta_attrs[name]
171.             for attr_name in DEFAULT_NAMES:
172.                 if attr_name in meta_attrs:
173.                     setattr(self, attr_name, meta_attrs.pop(attr_name))
174.                     self.original_attrs[attr_name] = getattr(self, attr_name)
175.                 elif hasattr(self.meta, attr_name):
176.                     setattr(self, attr_name, getattr(self.meta, attr_name))
177.                     self.original_attrs[attr_name] = getattr(self, attr_name)
178. 
179.             self.unique_together = normalize_together(self.unique_together)
180.             self.index_together = normalize_together(self.index_together)
181.             # App label/class name interpolation for names of constraints and
182.             # indexes.
183.             if not getattr(cls._meta, 'abstract', False):
184.                 for attr_name in {'constraints', 'indexes'}:
185.                     objs = getattr(self, attr_name, [])
186.                     setattr(self, attr_name, self._format_names_with_class(cls, objs))
187. 
188.             # verbose_name_plural is a special case because it uses a 's'
189.             # by default.
190.             if self.verbose_name_plural is None:
191.                 self.verbose_name_plural = format_lazy('{}s', self.verbose_name)
192. 
193.             # order_with_respect_and ordering are mutually exclusive.
194.             self._ordering_clash = bool(self.ordering and self.order_with_respect_to)
195. 
196.             # Any leftover attributes must be invalid.
197.             if meta_attrs != {}:
198.                 raise TypeError("'class Meta' got invalid attribute(s): %s" % ','.join(meta_attrs))
199.         else:
200.             self.verbose_name_plural = format_lazy('{}s', self.verbose_name)
201.         del self.meta
202. 
203.         # If the db_table wasn't provided, use the app_label + model_name.
204.         if not self.db_table:
205.             self.db_table = "%s_%s" % (self.app_label, self.model_name)
206.             self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())
207. 
208.     def _format_names_with_class(self, cls, objs):
209.         """App label/class name interpolation for object names."""
210.         new_objs = []
211.         for obj in objs:
212.             obj = obj.clone()
213.             obj.name = obj.name % {
214.                 'app_label': cls._meta.app_label.lower(),
215.                 'class': cls.__name__.lower(),
216.             }
217.             new_objs.append(obj)
218.         return new_objs
219. 
220.     def _prepare(self, model):
221.         if self.order_with_respect_to:
222.             # The app registry will not be ready at this point, so we cannot
223.             # use get_field().
224.             query = self.order_with_respect_to
225.             try:
226.                 self.order_with_respect_to = next(
227.                     f for f in self._get_fields(reverse=False)
228.                     if f.name == query or f.attname == query
229.                 )
230.             except StopIteration:
231.                 raise FieldDoesNotExist("%s has no field named '%s'" % (self.object_name, query))
232. 
233.             self.ordering = ('_order',)
234.             if not any(isinstance(field, OrderWrt) for field in model._meta.local_fields):
235.                 model.add_to_class('_order', OrderWrt())
236.         else:
237.             self.order_with_respect_to = None
238. 
239.         if self.pk is None:
240.             if self.parents:
241.                 # Promote the first parent link in lieu of adding yet another
242.                 # field.
243.                 field = next(iter(self.parents.values()))
244.                 # Look for a local field with the same name as the
245.                 # first parent link. If a local field has already been
246.                 # created, use it instead of promoting the parent
247.                 already_created = [fld for fld in self.local_fields if fld.name == field.name]
248.                 if already_created:
249.                     field = already_created[0]
250.                 field.primary_key = True
251.                 self.setup_pk(field)
252.             else:
253.                 auto = AutoField(verbose_name='ID', primary_key=True, auto_created=True)
254.                 model.add_to_class('id', auto)
255. 
256.     def add_manager(self, manager):
257.         self.local_managers.append(manager)
258.         self._expire_cache()
259. 
260.     def add_field(self, field, private=False):
261.         # Insert the given field in the order in which it was created, using
262.         # the "creation_counter" attribute of the field.
263.         # Move many-to-many related fields from self.fields into
264.         # self.many_to_many.
265.         if private:
266.             self.private_fields.append(field)
267.         elif field.is_relation and field.many_to_many:
268.             bisect.insort(self.local_many_to_many, field)
269.         else:
270.             bisect.insort(self.local_fields, field)
271.             self.setup_pk(field)
272. 
273.         # If the field being added is a relation to another known field,
274.         # expire the cache on this field and the forward cache on the field
275.         # being referenced, because there will be new relationships in the
276.         # cache. Otherwise, expire the cache of references *to* this field.
277.         # The mechanism for getting at the related model is slightly odd -
278.         # ideally, we'd just ask for field.related_model. However, related_model
279.         # is a cached property, and all the models haven't been loaded yet, so
280.         # we need to make sure we don't cache a string reference.
281.         if field.is_relation and hasattr(field.remote_field, 'model') and field.remote_field.model:
282.             try:
283.                 field.remote_field.model._meta._expire_cache(forward=False)
284.             except AttributeError:
285.                 pass
286.             self._expire_cache()
287.         else:
288.             self._expire_cache(reverse=False)
289. 
290.     def setup_pk(self, field):
291.         if not self.pk and field.primary_key:
292.             self.pk = field
293.             field.serialize = False
294. 
295.     def setup_proxy(self, target):
296.         """
297.         Do the internal setup so that the current model is a proxy for
298.         "target".
299.         """
300.         self.pk = target._meta.pk
301.         self.proxy_for_model = target
302.         self.db_table = target._meta.db_table
303. 
304.     def __repr__(self):
305.         return '<Options for %s>' % self.object_name
306. 
307.     def __str__(self):
308.         return self.label_lower
309. 
310.     def can_migrate(self, connection):
311.         """
312.         Return True if the model can/should be migrated on the `connection`.
313.         `connection` can be either a real connection or a connection alias.
314.         """
315.         if self.proxy or self.swapped or not self.managed:
316.             return False
317.         if isinstance(connection, str):
318.             connection = connections[connection]
319.         if self.required_db_vendor:
320.             return self.required_db_vendor == connection.vendor
321.         if self.required_db_features:
322.             return all(getattr(connection.features, feat, False)
323.                        for feat in self.required_db_features)
324.         return True
325. 
326.     @property
327.     def verbose_name_raw(self):
328.         """Return the untranslated verbose name."""
329.         with override(None):
330.             return str(self.verbose_name)
331. 
332.     @property
333.     def swapped(self):
334.         """
335.         Has this model been swapped out for another? If so, return the model
336.         name of the replacement; otherwise, return None.
337. 
338.         For historical reasons, model name lookups using get_model() are
339.         case insensitive, so we make sure we are case insensitive here.
340.         """
341.         if self.swappable:
342.             swapped_for = getattr(settings, self.swappable, None)
343.             if swapped_for:
344.                 try:
345.                     swapped_label, swapped_object = swapped_for.split('.')
346.                 except ValueError:
347.                     # setting not in the format app_label.model_name
348.                     # raising ImproperlyConfigured here causes problems with
349.                     # test cleanup code - instead it is raised in get_user_model
350.                     # or as part of validation.
351.                     return swapped_for
352. 
353.                 if '%s.%s' % (swapped_label, swapped_object.lower()) != self.label_lower:
354.                     return swapped_for
355.         return None
356. 
357.     @cached_property
358.     def managers(self):
359.         managers = []
360.         seen_managers = set()
361.         bases = (b for b in self.model.mro() if hasattr(b, '_meta'))
362.         for depth, base in enumerate(bases):
363.             for manager in base._meta.local_managers:
364.                 if manager.name in seen_managers:
365.                     continue
366. 
367.                 manager = copy.copy(manager)
368.                 manager.model = self.model
369.                 seen_managers.add(manager.name)
370.                 managers.append((depth, manager.creation_counter, manager))
371. 
372.         return make_immutable_fields_list(
373.             "managers",
374.             (m[2] for m in sorted(managers)),
375.         )
376. 
377.     @cached_property
378.     def managers_map(self):
379.         return {manager.name: manager for manager in self.managers}
380. 
381.     @cached_property
382.     def base_manager(self):
383.         base_manager_name = self.base_manager_name
384.         if not base_manager_name:
385.             # Get the first parent's base_manager_name if there's one.
386.             for parent in self.model.mro()[1:]:
387.                 if hasattr(parent, '_meta'):
388.                     if parent._base_manager.name != '_base_manager':
389.                         base_manager_name = parent._base_manager.name
390.                     break
391. 
392.         if base_manager_name:
393.             try:
394.                 return self.managers_map[base_manager_name]
395.             except KeyError:
396.                 raise ValueError(
397.                     "%s has no manager named %r" % (
398.                         self.object_name,
399.                         base_manager_name,
400.                     )
401.                 )
402. 
403.         manager = Manager()
404.         manager.name = '_base_manager'
405.         manager.model = self.model
406.         manager.auto_created = True
407.         return manager
408. 
409.     @cached_property
410.     def default_manager(self):
411.         default_manager_name = self.default_manager_name
412.         if not default_manager_name and not self.local_managers:
413.             # Get the first parent's default_manager_name if there's one.
414.             for parent in self.model.mro()[1:]:
415.                 if hasattr(parent, '_meta'):
416.                     default_manager_name = parent._meta.default_manager_name
417.                     break
418. 
419.         if default_manager_name:
420.             try:
421.                 return self.managers_map[default_manager_name]
422.             except KeyError:
423.                 raise ValueError(
424.                     "%s has no manager named %r" % (
425.                         self.object_name,
426.                         default_manager_name,
427.                     )
428.                 )
429. 
430.         if self.managers:
431.             return self.managers[0]
432. 
433.     @cached_property
434.     def fields(self):
435.         """
436.         Return a list of all forward fields on the model and its parents,
437.         excluding ManyToManyFields.
438. 
439.         Private API intended only to be used by Django itself; get_fields()
440.         combined with filtering of field properties is the public API for
441.         obtaining this field list.
442.         """
443.         # For legacy reasons, the fields property should only contain forward
444.         # fields that are not private or with a m2m cardinality. Therefore we
445.         # pass these three filters as filters to the generator.
446.         # The third lambda is a longwinded way of checking f.related_model - we don't
447.         # use that property directly because related_model is a cached property,
448.         # and all the models may not have been loaded yet; we don't want to cache
449.         # the string reference to the related_model.
450.         def is_not_an_m2m_field(f):
451.             return not (f.is_relation and f.many_to_many)
452. 
453.         def is_not_a_generic_relation(f):
454.             return not (f.is_relation and f.one_to_many)
455. 
456.         def is_not_a_generic_foreign_key(f):
457.             return not (
458.                 f.is_relation and f.many_to_one and not (hasattr(f.remote_field, 'model') and f.remote_field.model)
459.             )
460. 
461.         return make_immutable_fields_list(
462.             "fields",
463.             (f for f in self._get_fields(reverse=False)
464.              if is_not_an_m2m_field(f) and is_not_a_generic_relation(f) and is_not_a_generic_foreign_key(f))
465.         )
466. 
467.     @cached_property
468.     def concrete_fields(self):
469.         """
470.         Return a list of all concrete fields on the model and its parents.
471. 
472.         Private API intended only to be used by Django itself; get_fields()
473.         combined with filtering of field properties is the public API for
474.         obtaining this field list.
475.         """
476.         return make_immutable_fields_list(
477.             "concrete_fields", (f for f in self.fields if f.concrete)
478.         )
479. 
480.     @cached_property
481.     def local_concrete_fields(self):
482.         """
483.         Return a list of all concrete fields on the model.
484. 
485.         Private API intended only to be used by Django itself; get_fields()
486.         combined with filtering of field properties is the public API for
487.         obtaining this field list.
488.         """
489.         return make_immutable_fields_list(
490.             "local_concrete_fields", (f for f in self.local_fields if f.concrete)
491.         )
492. 
493.     @cached_property
494.     def many_to_many(self):
495.         """
496.         Return a list of all many to many fields on the model and its parents.
497. 
498.         Private API intended only to be used by Django itself; get_fields()
499.         combined with filtering of field properties is the public API for
500.         obtaining this list.


File: django/db/models/query.py
Line number range: 1 - 1966
Content:
1. """
2. The main QuerySet implementation. This provides the public API for the ORM.
3. """
4. 
5. import copy
6. import operator
7. import warnings
8. from collections import namedtuple
9. from functools import lru_cache
10. from itertools import chain
11. 
12. from django.conf import settings
13. from django.core import exceptions
14. from django.db import (
15.     DJANGO_VERSION_PICKLE_KEY, IntegrityError, NotSupportedError, connections,
16.     router, transaction,
17. )
18. from django.db.models import AutoField, DateField, DateTimeField, sql
19. from django.db.models.constants import LOOKUP_SEP
20. from django.db.models.deletion import Collector
21. from django.db.models.expressions import Case, Expression, F, Value, When
22. from django.db.models.functions import Cast, Trunc
23. from django.db.models.query_utils import FilteredRelation, Q
24. from django.db.models.sql.constants import CURSOR, GET_ITERATOR_CHUNK_SIZE
25. from django.db.models.utils import resolve_callables
26. from django.utils import timezone
27. from django.utils.functional import cached_property, partition
28. from django.utils.version import get_version
29. 
30. # The maximum number of results to fetch in a get() query.
31. MAX_GET_RESULTS = 21
32. 
33. # The maximum number of items to display in a QuerySet.__repr__
34. REPR_OUTPUT_SIZE = 20
35. 
36. 
37. class BaseIterable:
38.     def __init__(self, queryset, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
39.         self.queryset = queryset
40.         self.chunked_fetch = chunked_fetch
41.         self.chunk_size = chunk_size
42. 
43. 
44. class ModelIterable(BaseIterable):
45.     """Iterable that yields a model instance for each row."""
46. 
47.     def __iter__(self):
48.         queryset = self.queryset
49.         db = queryset.db
50.         compiler = queryset.query.get_compiler(using=db)
51.         # Execute the query. This will also fill compiler.select, klass_info,
52.         # and annotations.
53.         results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
54.         select, klass_info, annotation_col_map = (compiler.select, compiler.klass_info,
55.                                                   compiler.annotation_col_map)
56.         model_cls = klass_info['model']
57.         select_fields = klass_info['select_fields']
58.         model_fields_start, model_fields_end = select_fields[0], select_fields[-1] + 1
59.         init_list = [f[0].target.attname
60.                      for f in select[model_fields_start:model_fields_end]]
61.         related_populators = get_related_populators(klass_info, select, db)
62.         known_related_objects = [
63.             (field, related_objs, operator.attrgetter(*[
64.                 field.attname
65.                 if from_field == 'self' else
66.                 queryset.model._meta.get_field(from_field).attname
67.                 for from_field in field.from_fields
68.             ])) for field, related_objs in queryset._known_related_objects.items()
69.         ]
70.         for row in compiler.results_iter(results):
71.             obj = model_cls.from_db(db, init_list, row[model_fields_start:model_fields_end])
72.             for rel_populator in related_populators:
73.                 rel_populator.populate(row, obj)
74.             if annotation_col_map:
75.                 for attr_name, col_pos in annotation_col_map.items():
76.                     setattr(obj, attr_name, row[col_pos])
77. 
78.             # Add the known related objects to the model.
79.             for field, rel_objs, rel_getter in known_related_objects:
80.                 # Avoid overwriting objects loaded by, e.g., select_related().
81.                 if field.is_cached(obj):
82.                     continue
83.                 rel_obj_id = rel_getter(obj)
84.                 try:
85.                     rel_obj = rel_objs[rel_obj_id]
86.                 except KeyError:
87.                     pass  # May happen in qs1 | qs2 scenarios.
88.                 else:
89.                     setattr(obj, field.name, rel_obj)
90. 
91.             yield obj
92. 
93. 
94. class ValuesIterable(BaseIterable):
95.     """
96.     Iterable returned by QuerySet.values() that yields a dict for each row.
97.     """
98. 
99.     def __iter__(self):
100.         queryset = self.queryset
101.         query = queryset.query
102.         compiler = query.get_compiler(queryset.db)
103. 
104.         # extra(select=...) cols are always at the start of the row.
105.         names = [
106.             *query.extra_select,
107.             *query.values_select,
108.             *query.annotation_select,
109.         ]
110.         indexes = range(len(names))
111.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
112.             yield {names[i]: row[i] for i in indexes}
113. 
114. 
115. class ValuesListIterable(BaseIterable):
116.     """
117.     Iterable returned by QuerySet.values_list(flat=False) that yields a tuple
118.     for each row.
119.     """
120. 
121.     def __iter__(self):
122.         queryset = self.queryset
123.         query = queryset.query
124.         compiler = query.get_compiler(queryset.db)
125. 
126.         if queryset._fields:
127.             # extra(select=...) cols are always at the start of the row.
128.             names = [
129.                 *query.extra_select,
130.                 *query.values_select,
131.                 *query.annotation_select,
132.             ]
133.             fields = [*queryset._fields, *(f for f in query.annotation_select if f not in queryset._fields)]
134.             if fields != names:
135.                 # Reorder according to fields.
136.                 index_map = {name: idx for idx, name in enumerate(names)}
137.                 rowfactory = operator.itemgetter(*[index_map[f] for f in fields])
138.                 return map(
139.                     rowfactory,
140.                     compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
141.                 )
142.         return compiler.results_iter(tuple_expected=True, chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
143. 
144. 
145. class NamedValuesListIterable(ValuesListIterable):
146.     """
147.     Iterable returned by QuerySet.values_list(named=True) that yields a
148.     namedtuple for each row.
149.     """
150. 
151.     @staticmethod
152.     @lru_cache()
153.     def create_namedtuple_class(*names):
154.         # Cache namedtuple() with @lru_cache() since it's too slow to be
155.         # called for every QuerySet evaluation.
156.         return namedtuple('Row', names)
157. 
158.     def __iter__(self):
159.         queryset = self.queryset
160.         if queryset._fields:
161.             names = queryset._fields
162.         else:
163.             query = queryset.query
164.             names = [*query.extra_select, *query.values_select, *query.annotation_select]
165.         tuple_class = self.create_namedtuple_class(*names)
166.         new = tuple.__new__
167.         for row in super().__iter__():
168.             yield new(tuple_class, row)
169. 
170. 
171. class FlatValuesListIterable(BaseIterable):
172.     """
173.     Iterable returned by QuerySet.values_list(flat=True) that yields single
174.     values.
175.     """
176. 
177.     def __iter__(self):
178.         queryset = self.queryset
179.         compiler = queryset.query.get_compiler(queryset.db)
180.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
181.             yield row[0]
182. 
183. 
184. class QuerySet:
185.     """Represent a lazy database lookup for a set of objects."""
186. 
187.     def __init__(self, model=None, query=None, using=None, hints=None):
188.         self.model = model
189.         self._db = using
190.         self._hints = hints or {}
191.         self._query = query or sql.Query(self.model)
192.         self._result_cache = None
193.         self._sticky_filter = False
194.         self._for_write = False
195.         self._prefetch_related_lookups = ()
196.         self._prefetch_done = False
197.         self._known_related_objects = {}  # {rel_field: {pk: rel_obj}}
198.         self._iterable_class = ModelIterable
199.         self._fields = None
200.         self._defer_next_filter = False
201.         self._deferred_filter = None
202. 
203.     @property
204.     def query(self):
205.         if self._deferred_filter:
206.             negate, args, kwargs = self._deferred_filter
207.             self._filter_or_exclude_inplace(negate, *args, **kwargs)
208.             self._deferred_filter = None
209.         return self._query
210. 
211.     @query.setter
212.     def query(self, value):
213.         self._query = value
214. 
215.     def as_manager(cls):
216.         # Address the circular dependency between `Queryset` and `Manager`.
217.         from django.db.models.manager import Manager
218.         manager = Manager.from_queryset(cls)()
219.         manager._built_with_as_manager = True
220.         return manager
221.     as_manager.queryset_only = True
222.     as_manager = classmethod(as_manager)
223. 
224.     ########################
225.     # PYTHON MAGIC METHODS #
226.     ########################
227. 
228.     def __deepcopy__(self, memo):
229.         """Don't populate the QuerySet's cache."""
230.         obj = self.__class__()
231.         for k, v in self.__dict__.items():
232.             if k == '_result_cache':
233.                 obj.__dict__[k] = None
234.             else:
235.                 obj.__dict__[k] = copy.deepcopy(v, memo)
236.         return obj
237. 
238.     def __getstate__(self):
239.         # Force the cache to be fully populated.
240.         self._fetch_all()
241.         return {**self.__dict__, DJANGO_VERSION_PICKLE_KEY: get_version()}
242. 
243.     def __setstate__(self, state):
244.         msg = None
245.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
246.         if pickled_version:
247.             current_version = get_version()
248.             if current_version != pickled_version:
249.                 msg = (
250.                     "Pickled queryset instance's Django version %s does not "
251.                     "match the current version %s." % (pickled_version, current_version)
252.                 )
253.         else:
254.             msg = "Pickled queryset instance's Django version is not specified."
255. 
256.         if msg:
257.             warnings.warn(msg, RuntimeWarning, stacklevel=2)
258. 
259.         self.__dict__.update(state)
260. 
261.     def __repr__(self):
262.         data = list(self[:REPR_OUTPUT_SIZE + 1])
263.         if len(data) > REPR_OUTPUT_SIZE:
264.             data[-1] = "...(remaining elements truncated)..."
265.         return '<%s %r>' % (self.__class__.__name__, data)
266. 
267.     def __len__(self):
268.         self._fetch_all()
269.         return len(self._result_cache)
270. 
271.     def __iter__(self):
272.         """
273.         The queryset iterator protocol uses three nested iterators in the
274.         default case:
275.             1. sql.compiler.execute_sql()
276.                - Returns 100 rows at time (constants.GET_ITERATOR_CHUNK_SIZE)
277.                  using cursor.fetchmany(). This part is responsible for
278.                  doing some column masking, and returning the rows in chunks.
279.             2. sql.compiler.results_iter()
280.                - Returns one row at time. At this point the rows are still just
281.                  tuples. In some cases the return values are converted to
282.                  Python values at this location.
283.             3. self.iterator()
284.                - Responsible for turning the rows into model objects.
285.         """
286.         self._fetch_all()
287.         return iter(self._result_cache)
288. 
289.     def __bool__(self):
290.         self._fetch_all()
291.         return bool(self._result_cache)
292. 
293.     def __getitem__(self, k):
294.         """Retrieve an item or slice from the set of results."""
295.         if not isinstance(k, (int, slice)):
296.             raise TypeError(
297.                 'QuerySet indices must be integers or slices, not %s.'
298.                 % type(k).__name__
299.             )
300.         assert ((not isinstance(k, slice) and (k >= 0)) or
301.                 (isinstance(k, slice) and (k.start is None or k.start >= 0) and
302.                  (k.stop is None or k.stop >= 0))), \
303.             "Negative indexing is not supported."
304. 
305.         if self._result_cache is not None:
306.             return self._result_cache[k]
307. 
308.         if isinstance(k, slice):
309.             qs = self._chain()
310.             if k.start is not None:
311.                 start = int(k.start)
312.             else:
313.                 start = None
314.             if k.stop is not None:
315.                 stop = int(k.stop)
316.             else:
317.                 stop = None
318.             qs.query.set_limits(start, stop)
319.             return list(qs)[::k.step] if k.step else qs
320. 
321.         qs = self._chain()
322.         qs.query.set_limits(k, k + 1)
323.         qs._fetch_all()
324.         return qs._result_cache[0]
325. 
326.     def __class_getitem__(cls, *args, **kwargs):
327.         return cls
328. 
329.     def __and__(self, other):
330.         self._merge_sanity_check(other)
331.         if isinstance(other, EmptyQuerySet):
332.             return other
333.         if isinstance(self, EmptyQuerySet):
334.             return self
335.         combined = self._chain()
336.         combined._merge_known_related_objects(other)
337.         combined.query.combine(other.query, sql.AND)
338.         return combined
339. 
340.     def __or__(self, other):
341.         self._merge_sanity_check(other)
342.         if isinstance(self, EmptyQuerySet):
343.             return other
344.         if isinstance(other, EmptyQuerySet):
345.             return self
346.         query = self if self.query.can_filter() else self.model._base_manager.filter(pk__in=self.values('pk'))
347.         combined = query._chain()
348.         combined._merge_known_related_objects(other)
349.         if not other.query.can_filter():
350.             other = other.model._base_manager.filter(pk__in=other.values('pk'))
351.         combined.query.combine(other.query, sql.OR)
352.         return combined
353. 
354.     ####################################
355.     # METHODS THAT DO DATABASE QUERIES #
356.     ####################################
357. 
358.     def _iterator(self, use_chunked_fetch, chunk_size):
359.         yield from self._iterable_class(self, chunked_fetch=use_chunked_fetch, chunk_size=chunk_size)
360. 
361.     def iterator(self, chunk_size=2000):
362.         """
363.         An iterator over the results from applying this QuerySet to the
364.         database.
365.         """
366.         if chunk_size <= 0:
367.             raise ValueError('Chunk size must be strictly positive.')
368.         use_chunked_fetch = not connections[self.db].settings_dict.get('DISABLE_SERVER_SIDE_CURSORS')
369.         return self._iterator(use_chunked_fetch, chunk_size)
370. 
371.     def aggregate(self, *args, **kwargs):
372.         """
373.         Return a dictionary containing the calculations (aggregation)
374.         over the current queryset.
375. 
376.         If args is present the expression is passed as a kwarg using
377.         the Aggregate object's default alias.
378.         """
379.         if self.query.distinct_fields:
380.             raise NotImplementedError("aggregate() + distinct(fields) not implemented.")
381.         self._validate_values_are_expressions((*args, *kwargs.values()), method_name='aggregate')
382.         for arg in args:
383.             # The default_alias property raises TypeError if default_alias
384.             # can't be set automatically or AttributeError if it isn't an
385.             # attribute.
386.             try:
387.                 arg.default_alias
388.             except (AttributeError, TypeError):
389.                 raise TypeError("Complex aggregates require an alias")
390.             kwargs[arg.default_alias] = arg
391. 
392.         query = self.query.chain()
393.         for (alias, aggregate_expr) in kwargs.items():
394.             query.add_annotation(aggregate_expr, alias, is_summary=True)
395.             if not query.annotations[alias].contains_aggregate:
396.                 raise TypeError("%s is not an aggregate expression" % alias)
397.         return query.get_aggregation(self.db, kwargs)
398. 
399.     def count(self):
400.         """
401.         Perform a SELECT COUNT() and return the number of records as an
402.         integer.
403. 
404.         If the QuerySet is already fully cached, return the length of the
405.         cached results set to avoid multiple SELECT COUNT(*) calls.
406.         """
407.         if self._result_cache is not None:
408.             return len(self._result_cache)
409. 
410.         return self.query.get_count(using=self.db)
411. 
412.     def get(self, *args, **kwargs):
413.         """
414.         Perform the query and return a single object matching the given
415.         keyword arguments.
416.         """
417.         clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
418.         if self.query.can_filter() and not self.query.distinct_fields:
419.             clone = clone.order_by()
420.         limit = None
421.         if not clone.query.select_for_update or connections[clone.db].features.supports_select_for_update_with_limit:
422.             limit = MAX_GET_RESULTS
423.             clone.query.set_limits(high=limit)
424.         num = len(clone)
425.         if num == 1:
426.             return clone._result_cache[0]
427.         if not num:
428.             raise self.model.DoesNotExist(
429.                 "%s matching query does not exist." %
430.                 self.model._meta.object_name
431.             )
432.         raise self.model.MultipleObjectsReturned(
433.             'get() returned more than one %s -- it returned %s!' % (
434.                 self.model._meta.object_name,
435.                 num if not limit or num < limit else 'more than %s' % (limit - 1),
436.             )
437.         )
438. 
439.     def create(self, **kwargs):
440.         """
441.         Create a new object with the given kwargs, saving it to the database
442.         and returning the created object.
443.         """
444.         obj = self.model(**kwargs)
445.         self._for_write = True
446.         obj.save(force_insert=True, using=self.db)
447.         return obj
448. 
449.     def _populate_pk_values(self, objs):
450.         for obj in objs:
451.             if obj.pk is None:
452.                 obj.pk = obj._meta.pk.get_pk_value_on_save(obj)
453. 
454.     def bulk_create(self, objs, batch_size=None, ignore_conflicts=False):
455.         """
456.         Insert each of the instances into the database. Do *not* call
457.         save() on each of the instances, do not send any pre/post_save
458.         signals, and do not set the primary key attribute if it is an
459.         autoincrement field (except if features.can_return_rows_from_bulk_insert=True).
460.         Multi-table models are not supported.
461.         """
462.         # When you bulk insert you don't get the primary keys back (if it's an
463.         # autoincrement, except if can_return_rows_from_bulk_insert=True), so
464.         # you can't insert into the child tables which references this. There
465.         # are two workarounds:
466.         # 1) This could be implemented if you didn't have an autoincrement pk
467.         # 2) You could do it by doing O(n) normal inserts into the parent
468.         #    tables to get the primary keys back and then doing a single bulk
469.         #    insert into the childmost table.
470.         # We currently set the primary keys on the objects when using
471.         # PostgreSQL via the RETURNING ID clause. It should be possible for
472.         # Oracle as well, but the semantics for extracting the primary keys is
473.         # trickier so it's not done yet.
474.         assert batch_size is None or batch_size > 0
475.         # Check that the parents share the same concrete model with the our
476.         # model to detect the inheritance pattern ConcreteGrandParent ->
477.         # MultiTableParent -> ProxyChild. Simply checking self.model._meta.proxy
478.         # would not identify that case as involving multiple tables.
479.         for parent in self.model._meta.get_parent_list():
480.             if parent._meta.concrete_model is not self.model._meta.concrete_model:
481.                 raise ValueError("Can't bulk create a multi-table inherited model")
482.         if not objs:
483.             return objs
484.         self._for_write = True
485.         connection = connections[self.db]
486.         opts = self.model._meta
487.         fields = opts.concrete_fields
488.         objs = list(objs)
489.         self._populate_pk_values(objs)
490.         with transaction.atomic(using=self.db, savepoint=False):
491.             objs_with_pk, objs_without_pk = partition(lambda o: o.pk is None, objs)
492.             if objs_with_pk:
493.                 returned_columns = self._batched_insert(
494.                     objs_with_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
495.                 )
496.                 for obj_with_pk, results in zip(objs_with_pk, returned_columns):
497.                     for result, field in zip(results, opts.db_returning_fields):
498.                         if field != opts.pk:
499.                             setattr(obj_with_pk, field.attname, result)
500.                 for obj_with_pk in objs_with_pk:
501.                     obj_with_pk._state.adding = False
502.                     obj_with_pk._state.db = self.db
503.             if objs_without_pk:
504.                 fields = [f for f in fields if not isinstance(f, AutoField)]
505.                 returned_columns = self._batched_insert(
506.                     objs_without_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
507.                 )
508.                 if connection.features.can_return_rows_from_bulk_insert and not ignore_conflicts:
509.                     assert len(returned_columns) == len(objs_without_pk)
510.                 for obj_without_pk, results in zip(objs_without_pk, returned_columns):
511.                     for result, field in zip(results, opts.db_returning_fields):
512.                         setattr(obj_without_pk, field.attname, result)
513.                     obj_without_pk._state.adding = False
514.                     obj_without_pk._state.db = self.db
515. 
516.         return objs
517. 
518.     def bulk_update(self, objs, fields, batch_size=None):
519.         """
520.         Update the given fields in each of the given objects in the database.
521.         """
522.         if batch_size is not None and batch_size < 0:
523.             raise ValueError('Batch size must be a positive integer.')
524.         if not fields:
525.             raise ValueError('Field names must be given to bulk_update().')
526.         objs = tuple(objs)
527.         if any(obj.pk is None for obj in objs):
528.             raise ValueError('All bulk_update() objects must have a primary key set.')
529.         fields = [self.model._meta.get_field(name) for name in fields]
530.         if any(not f.concrete or f.many_to_many for f in fields):
531.             raise ValueError('bulk_update() can only be used with concrete fields.')
532.         if any(f.primary_key for f in fields):
533.             raise ValueError('bulk_update() cannot be used with primary key fields.')
534.         if not objs:
535.             return
536.         # PK is used twice in the resulting update query, once in the filter
537.         # and once in the WHEN. Each field will also have one CAST.
538.         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
539.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
540.         requires_casting = connections[self.db].features.requires_casted_case_in_updates
541.         batches = (objs[i:i + batch_size] for i in range(0, len(objs), batch_size))
542.         updates = []
543.         for batch_objs in batches:
544.             update_kwargs = {}
545.             for field in fields:
546.                 when_statements = []
547.                 for obj in batch_objs:
548.                     attr = getattr(obj, field.attname)
549.                     if not isinstance(attr, Expression):
550.                         attr = Value(attr, output_field=field)
551.                     when_statements.append(When(pk=obj.pk, then=attr))
552.                 case_statement = Case(*when_statements, output_field=field)
553.                 if requires_casting:
554.                     case_statement = Cast(case_statement, output_field=field)
555.                 update_kwargs[field.attname] = case_statement
556.             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
557.         with transaction.atomic(using=self.db, savepoint=False):
558.             for pks, update_kwargs in updates:
559.                 self.filter(pk__in=pks).update(**update_kwargs)
560.     bulk_update.alters_data = True
561. 
562.     def get_or_create(self, defaults=None, **kwargs):
563.         """
564.         Look up an object with the given kwargs, creating one if necessary.
565.         Return a tuple of (object, created), where created is a boolean
566.         specifying whether an object was created.
567.         """
568.         # The get() needs to be targeted at the write database in order
569.         # to avoid potential transaction consistency problems.
570.         self._for_write = True
571.         try:
572.             return self.get(**kwargs), False
573.         except self.model.DoesNotExist:
574.             params = self._extract_model_params(defaults, **kwargs)
575.             return self._create_object_from_params(kwargs, params)
576. 
577.     def update_or_create(self, defaults=None, **kwargs):
578.         """
579.         Look up an object with the given kwargs, updating one with defaults
580.         if it exists, otherwise create a new one.
581.         Return a tuple (object, created), where created is a boolean
582.         specifying whether an object was created.
583.         """
584.         defaults = defaults or {}
585.         self._for_write = True
586.         with transaction.atomic(using=self.db):
587.             try:
588.                 obj = self.select_for_update().get(**kwargs)
589.             except self.model.DoesNotExist:
590.                 params = self._extract_model_params(defaults, **kwargs)
591.                 # Lock the row so that a concurrent update is blocked until
592.                 # after update_or_create() has performed its save.
593.                 obj, created = self._create_object_from_params(kwargs, params, lock=True)
594.                 if created:
595.                     return obj, created
596.             for k, v in resolve_callables(defaults):
597.                 setattr(obj, k, v)
598.             obj.save(using=self.db)
599.         return obj, False
600. 
601.     def _create_object_from_params(self, lookup, params, lock=False):
602.         """
603.         Try to create an object using passed params. Used by get_or_create()
604.         and update_or_create().
605.         """
606.         try:
607.             with transaction.atomic(using=self.db):
608.                 params = dict(resolve_callables(params))
609.                 obj = self.create(**params)
610.             return obj, True
611.         except IntegrityError:
612.             try:
613.                 qs = self.select_for_update() if lock else self
614.                 return qs.get(**lookup), False
615.             except self.model.DoesNotExist:
616.                 pass
617.             raise
618. 
619.     def _extract_model_params(self, defaults, **kwargs):
620.         """
621.         Prepare `params` for creating a model instance based on the given
622.         kwargs; for use by get_or_create() and update_or_create().
623.         """
624.         defaults = defaults or {}
625.         params = {k: v for k, v in kwargs.items() if LOOKUP_SEP not in k}
626.         params.update(defaults)
627.         property_names = self.model._meta._property_names
628.         invalid_params = []
629.         for param in params:
630.             try:
631.                 self.model._meta.get_field(param)
632.             except exceptions.FieldDoesNotExist:
633.                 # It's okay to use a model's property if it has a setter.
634.                 if not (param in property_names and getattr(self.model, param).fset):
635.                     invalid_params.append(param)
636.         if invalid_params:
637.             raise exceptions.FieldError(
638.                 "Invalid field name(s) for model %s: '%s'." % (
639.                     self.model._meta.object_name,
640.                     "', '".join(sorted(invalid_params)),
641.                 ))
642.         return params
643. 
644.     def _earliest(self, *fields):
645.         """
646.         Return the earliest object according to fields (if given) or by the
647.         model's Meta.get_latest_by.
648.         """
649.         if fields:
650.             order_by = fields
651.         else:
652.             order_by = getattr(self.model._meta, 'get_latest_by')
653.             if order_by and not isinstance(order_by, (tuple, list)):
654.                 order_by = (order_by,)
655.         if order_by is None:
656.             raise ValueError(
657.                 "earliest() and latest() require either fields as positional "
658.                 "arguments or 'get_latest_by' in the model's Meta."
659.             )
660. 
661.         assert not self.query.is_sliced, \
662.             "Cannot change a query once a slice has been taken."
663.         obj = self._chain()
664.         obj.query.set_limits(high=1)
665.         obj.query.clear_ordering(force_empty=True)
666.         obj.query.add_ordering(*order_by)
667.         return obj.get()
668. 
669.     def earliest(self, *fields):
670.         return self._earliest(*fields)
671. 
672.     def latest(self, *fields):
673.         return self.reverse()._earliest(*fields)
674. 
675.     def first(self):
676.         """Return the first object of a query or None if no match is found."""
677.         for obj in (self if self.ordered else self.order_by('pk'))[:1]:
678.             return obj
679. 
680.     def last(self):
681.         """Return the last object of a query or None if no match is found."""
682.         for obj in (self.reverse() if self.ordered else self.order_by('-pk'))[:1]:
683.             return obj
684. 
685.     def in_bulk(self, id_list=None, *, field_name='pk'):
686.         """
687.         Return a dictionary mapping each of the given IDs to the object with
688.         that ID. If `id_list` isn't provided, evaluate the entire QuerySet.
689.         """
690.         assert not self.query.is_sliced, \
691.             "Cannot use 'limit' or 'offset' with in_bulk"
692.         if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
693.             raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
694.         if id_list is not None:
695.             if not id_list:
696.                 return {}
697.             filter_key = '{}__in'.format(field_name)
698.             batch_size = connections[self.db].features.max_query_params
699.             id_list = tuple(id_list)
700.             # If the database has a limit on the number of query parameters
701.             # (e.g. SQLite), retrieve objects in batches if necessary.
702.             if batch_size and batch_size < len(id_list):
703.                 qs = ()
704.                 for offset in range(0, len(id_list), batch_size):
705.                     batch = id_list[offset:offset + batch_size]
706.                     qs += tuple(self.filter(**{filter_key: batch}).order_by())
707.             else:
708.                 qs = self.filter(**{filter_key: id_list}).order_by()
709.         else:
710.             qs = self._chain()
711.         return {getattr(obj, field_name): obj for obj in qs}
712. 
713.     def delete(self):
714.         """Delete the records in the current QuerySet."""
715.         self._not_support_combined_queries('delete')
716.         assert not self.query.is_sliced, \
717.             "Cannot use 'limit' or 'offset' with delete."
718. 
719.         if self._fields is not None:
720.             raise TypeError("Cannot call delete() after .values() or .values_list()")
721. 
722.         del_query = self._chain()
723. 
724.         # The delete is actually 2 queries - one to find related objects,
725.         # and one to delete. Make sure that the discovery of related
726.         # objects is performed on the same database as the deletion.
727.         del_query._for_write = True
728. 
729.         # Disable non-supported fields.
730.         del_query.query.select_for_update = False
731.         del_query.query.select_related = False
732.         del_query.query.clear_ordering(force_empty=True)
733. 
734.         collector = Collector(using=del_query.db)
735.         collector.collect(del_query)
736.         deleted, _rows_count = collector.delete()
737. 
738.         # Clear the result cache, in case this QuerySet gets reused.
739.         self._result_cache = None
740.         return deleted, _rows_count
741. 
742.     delete.alters_data = True
743.     delete.queryset_only = True
744. 
745.     def _raw_delete(self, using):
746.         """
747.         Delete objects found from the given queryset in single direct SQL
748.         query. No signals are sent and there is no protection for cascades.
749.         """
750.         query = self.query.clone()
751.         query.__class__ = sql.DeleteQuery
752.         cursor = query.get_compiler(using).execute_sql(CURSOR)
753.         if cursor:
754.             with cursor:
755.                 return cursor.rowcount
756.         return 0
757.     _raw_delete.alters_data = True
758. 
759.     def update(self, **kwargs):
760.         """
761.         Update all elements in the current QuerySet, setting all the given
762.         fields to the appropriate values.
763.         """
764.         self._not_support_combined_queries('update')
765.         assert not self.query.is_sliced, \
766.             "Cannot update a query once a slice has been taken."
767.         self._for_write = True
768.         query = self.query.chain(sql.UpdateQuery)
769.         query.add_update_values(kwargs)
770.         # Clear any annotations so that they won't be present in subqueries.
771.         query.annotations = {}
772.         with transaction.mark_for_rollback_on_error(using=self.db):
773.             rows = query.get_compiler(self.db).execute_sql(CURSOR)
774.         self._result_cache = None
775.         return rows
776.     update.alters_data = True
777. 
778.     def _update(self, values):
779.         """
780.         A version of update() that accepts field objects instead of field names.
781.         Used primarily for model saving and not intended for use by general
782.         code (it requires too much poking around at model internals to be
783.         useful at that level).
784.         """
785.         assert not self.query.is_sliced, \
786.             "Cannot update a query once a slice has been taken."
787.         query = self.query.chain(sql.UpdateQuery)
788.         query.add_update_fields(values)
789.         # Clear any annotations so that they won't be present in subqueries.
790.         query.annotations = {}
791.         self._result_cache = None
792.         return query.get_compiler(self.db).execute_sql(CURSOR)
793.     _update.alters_data = True
794.     _update.queryset_only = False
795. 
796.     def exists(self):
797.         if self._result_cache is None:
798.             return self.query.has_results(using=self.db)
799.         return bool(self._result_cache)
800. 
801.     def _prefetch_related_objects(self):
802.         # This method can only be called once the result cache has been filled.
803.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
804.         self._prefetch_done = True
805. 
806.     def explain(self, *, format=None, **options):
807.         return self.query.explain(using=self.db, format=format, **options)
808. 
809.     ##################################################
810.     # PUBLIC METHODS THAT RETURN A QUERYSET SUBCLASS #
811.     ##################################################
812. 
813.     def raw(self, raw_query, params=None, translations=None, using=None):
814.         if using is None:
815.             using = self.db
816.         qs = RawQuerySet(raw_query, model=self.model, params=params, translations=translations, using=using)
817.         qs._prefetch_related_lookups = self._prefetch_related_lookups[:]
818.         return qs
819. 
820.     def _values(self, *fields, **expressions):
821.         clone = self._chain()
822.         if expressions:
823.             clone = clone.annotate(**expressions)
824.         clone._fields = fields
825.         clone.query.set_values(fields)
826.         return clone
827. 
828.     def values(self, *fields, **expressions):
829.         fields += tuple(expressions)
830.         clone = self._values(*fields, **expressions)
831.         clone._iterable_class = ValuesIterable
832.         return clone
833. 
834.     def values_list(self, *fields, flat=False, named=False):
835.         if flat and named:
836.             raise TypeError("'flat' and 'named' can't be used together.")
837.         if flat and len(fields) > 1:
838.             raise TypeError("'flat' is not valid when values_list is called with more than one field.")
839. 
840.         field_names = {f for f in fields if not hasattr(f, 'resolve_expression')}
841.         _fields = []
842.         expressions = {}
843.         counter = 1
844.         for field in fields:
845.             if hasattr(field, 'resolve_expression'):
846.                 field_id_prefix = getattr(field, 'default_alias', field.__class__.__name__.lower())
847.                 while True:
848.                     field_id = field_id_prefix + str(counter)
849.                     counter += 1
850.                     if field_id not in field_names:
851.                         break
852.                 expressions[field_id] = field
853.                 _fields.append(field_id)
854.             else:
855.                 _fields.append(field)
856. 
857.         clone = self._values(*_fields, **expressions)
858.         clone._iterable_class = (
859.             NamedValuesListIterable if named
860.             else FlatValuesListIterable if flat
861.             else ValuesListIterable
862.         )
863.         return clone
864. 
865.     def dates(self, field_name, kind, order='ASC'):
866.         """
867.         Return a list of date objects representing all available dates for
868.         the given field_name, scoped to 'kind'.
869.         """
870.         assert kind in ('year', 'month', 'week', 'day'), \
871.             "'kind' must be one of 'year', 'month', 'week', or 'day'."
872.         assert order in ('ASC', 'DESC'), \
873.             "'order' must be either 'ASC' or 'DESC'."
874.         return self.annotate(
875.             datefield=Trunc(field_name, kind, output_field=DateField()),
876.             plain_field=F(field_name)
877.         ).values_list(
878.             'datefield', flat=True
879.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datefield')
880. 
881.     def datetimes(self, field_name, kind, order='ASC', tzinfo=None, is_dst=None):
882.         """
883.         Return a list of datetime objects representing all available
884.         datetimes for the given field_name, scoped to 'kind'.
885.         """
886.         assert kind in ('year', 'month', 'week', 'day', 'hour', 'minute', 'second'), \
887.             "'kind' must be one of 'year', 'month', 'week', 'day', 'hour', 'minute', or 'second'."
888.         assert order in ('ASC', 'DESC'), \
889.             "'order' must be either 'ASC' or 'DESC'."
890.         if settings.USE_TZ:
891.             if tzinfo is None:
892.                 tzinfo = timezone.get_current_timezone()
893.         else:
894.             tzinfo = None
895.         return self.annotate(
896.             datetimefield=Trunc(
897.                 field_name,
898.                 kind,
899.                 output_field=DateTimeField(),
900.                 tzinfo=tzinfo,
901.                 is_dst=is_dst,
902.             ),
903.             plain_field=F(field_name)
904.         ).values_list(
905.             'datetimefield', flat=True
906.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datetimefield')
907. 
908.     def none(self):
909.         """Return an empty QuerySet."""
910.         clone = self._chain()
911.         clone.query.set_empty()
912.         return clone
913. 
914.     ##################################################################
915.     # PUBLIC METHODS THAT ALTER ATTRIBUTES AND RETURN A NEW QUERYSET #
916.     ##################################################################
917. 
918.     def all(self):
919.         """
920.         Return a new QuerySet that is a copy of the current one. This allows a
921.         QuerySet to proxy for a model manager in some cases.
922.         """
923.         return self._chain()
924. 
925.     def filter(self, *args, **kwargs):
926.         """
927.         Return a new QuerySet instance with the args ANDed to the existing
928.         set.
929.         """
930.         self._not_support_combined_queries('filter')
931.         return self._filter_or_exclude(False, *args, **kwargs)
932. 
933.     def exclude(self, *args, **kwargs):
934.         """
935.         Return a new QuerySet instance with NOT (args) ANDed to the existing
936.         set.
937.         """
938.         self._not_support_combined_queries('exclude')
939.         return self._filter_or_exclude(True, *args, **kwargs)
940. 
941.     def _filter_or_exclude(self, negate, *args, **kwargs):
942.         if args or kwargs:
943.             assert not self.query.is_sliced, \
944.                 "Cannot filter a query once a slice has been taken."
945. 
946.         clone = self._chain()
947.         if self._defer_next_filter:
948.             self._defer_next_filter = False
949.             clone._deferred_filter = negate, args, kwargs
950.         else:
951.             clone._filter_or_exclude_inplace(negate, *args, **kwargs)
952.         return clone
953. 
954.     def _filter_or_exclude_inplace(self, negate, *args, **kwargs):
955.         if negate:
956.             self._query.add_q(~Q(*args, **kwargs))
957.         else:
958.             self._query.add_q(Q(*args, **kwargs))
959. 
960.     def complex_filter(self, filter_obj):
961.         """
962.         Return a new QuerySet instance with filter_obj added to the filters.
963. 
964.         filter_obj can be a Q object or a dictionary of keyword lookup
965.         arguments.
966. 
967.         This exists to support framework features such as 'limit_choices_to',
968.         and usually it will be more natural to use other methods.
969.         """
970.         if isinstance(filter_obj, Q):
971.             clone = self._chain()
972.             clone.query.add_q(filter_obj)
973.             return clone
974.         else:
975.             return self._filter_or_exclude(False, **filter_obj)
976. 
977.     def _combinator_query(self, combinator, *other_qs, all=False):
978.         # Clone the query to inherit the select list and everything
979.         clone = self._chain()
980.         # Clear limits and ordering so they can be reapplied
981.         clone.query.clear_ordering(True)
982.         clone.query.clear_limits()
983.         clone.query.combined_queries = (self.query,) + tuple(qs.query for qs in other_qs)
984.         clone.query.combinator = combinator
985.         clone.query.combinator_all = all
986.         return clone
987. 
988.     def union(self, *other_qs, all=False):
989.         # If the query is an EmptyQuerySet, combine all nonempty querysets.
990.         if isinstance(self, EmptyQuerySet):
991.             qs = [q for q in other_qs if not isinstance(q, EmptyQuerySet)]
992.             return qs[0]._combinator_query('union', *qs[1:], all=all) if qs else self
993.         return self._combinator_query('union', *other_qs, all=all)
994. 
995.     def intersection(self, *other_qs):
996.         # If any query is an EmptyQuerySet, return it.
997.         if isinstance(self, EmptyQuerySet):
998.             return self
999.         for other in other_qs:
1000.             if isinstance(other, EmptyQuerySet):
1001.                 return other
1002.         return self._combinator_query('intersection', *other_qs)
1003. 
1004.     def difference(self, *other_qs):
1005.         # If the query is an EmptyQuerySet, return it.
1006.         if isinstance(self, EmptyQuerySet):
1007.             return self
1008.         return self._combinator_query('difference', *other_qs)
1009. 
1010.     def select_for_update(self, nowait=False, skip_locked=False, of=()):
1011.         """
1012.         Return a new QuerySet instance that will select objects with a
1013.         FOR UPDATE lock.
1014.         """
1015.         if nowait and skip_locked:
1016.             raise ValueError('The nowait option cannot be used with skip_locked.')
1017.         obj = self._chain()
1018.         obj._for_write = True
1019.         obj.query.select_for_update = True
1020.         obj.query.select_for_update_nowait = nowait
1021.         obj.query.select_for_update_skip_locked = skip_locked
1022.         obj.query.select_for_update_of = of
1023.         return obj
1024. 
1025.     def select_related(self, *fields):
1026.         """
1027.         Return a new QuerySet instance that will select related objects.
1028. 
1029.         If fields are specified, they must be ForeignKey fields and only those
1030.         related objects are included in the selection.
1031. 
1032.         If select_related(None) is called, clear the list.
1033.         """
1034.         self._not_support_combined_queries('select_related')
1035.         if self._fields is not None:
1036.             raise TypeError("Cannot call select_related() after .values() or .values_list()")
1037. 
1038.         obj = self._chain()
1039.         if fields == (None,):
1040.             obj.query.select_related = False
1041.         elif fields:
1042.             obj.query.add_select_related(fields)
1043.         else:
1044.             obj.query.select_related = True
1045.         return obj
1046. 
1047.     def prefetch_related(self, *lookups):
1048.         """
1049.         Return a new QuerySet instance that will prefetch the specified
1050.         Many-To-One and Many-To-Many related objects when the QuerySet is
1051.         evaluated.
1052. 
1053.         When prefetch_related() is called more than once, append to the list of
1054.         prefetch lookups. If prefetch_related(None) is called, clear the list.
1055.         """
1056.         self._not_support_combined_queries('prefetch_related')
1057.         clone = self._chain()
1058.         if lookups == (None,):
1059.             clone._prefetch_related_lookups = ()
1060.         else:
1061.             for lookup in lookups:
1062.                 if isinstance(lookup, Prefetch):
1063.                     lookup = lookup.prefetch_to
1064.                 lookup = lookup.split(LOOKUP_SEP, 1)[0]
1065.                 if lookup in self.query._filtered_relations:
1066.                     raise ValueError('prefetch_related() is not supported with FilteredRelation.')
1067.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1068.         return clone
1069. 
1070.     def annotate(self, *args, **kwargs):
1071.         """
1072.         Return a query set in which the returned objects have been annotated
1073.         with extra data or aggregations.
1074.         """
1075.         self._not_support_combined_queries('annotate')
1076.         self._validate_values_are_expressions(args + tuple(kwargs.values()), method_name='annotate')
1077.         annotations = {}
1078.         for arg in args:
1079.             # The default_alias property may raise a TypeError.
1080.             try:
1081.                 if arg.default_alias in kwargs:
1082.                     raise ValueError("The named annotation '%s' conflicts with the "
1083.                                      "default name for another annotation."
1084.                                      % arg.default_alias)
1085.             except TypeError:
1086.                 raise TypeError("Complex annotations require an alias")
1087.             annotations[arg.default_alias] = arg
1088.         annotations.update(kwargs)
1089. 
1090.         clone = self._chain()
1091.         names = self._fields
1092.         if names is None:
1093.             names = set(chain.from_iterable(
1094.                 (field.name, field.attname) if hasattr(field, 'attname') else (field.name,)
1095.                 for field in self.model._meta.get_fields()
1096.             ))
1097. 
1098.         for alias, annotation in annotations.items():
1099.             if alias in names:
1100.                 raise ValueError("The annotation '%s' conflicts with a field on "
1101.                                  "the model." % alias)
1102.             if isinstance(annotation, FilteredRelation):
1103.                 clone.query.add_filtered_relation(annotation, alias)
1104.             else:
1105.                 clone.query.add_annotation(annotation, alias, is_summary=False)
1106. 
1107.         for alias, annotation in clone.query.annotations.items():
1108.             if alias in annotations and annotation.contains_aggregate:
1109.                 if clone._fields is None:
1110.                     clone.query.group_by = True
1111.                 else:
1112.                     clone.query.set_group_by()
1113.                 break
1114. 
1115.         return clone
1116. 
1117.     def order_by(self, *field_names):
1118.         """Return a new QuerySet instance with the ordering changed."""
1119.         assert not self.query.is_sliced, \
1120.             "Cannot reorder a query once a slice has been taken."
1121.         obj = self._chain()
1122.         obj.query.clear_ordering(force_empty=False)
1123.         obj.query.add_ordering(*field_names)
1124.         return obj
1125. 
1126.     def distinct(self, *field_names):
1127.         """
1128.         Return a new QuerySet instance that will select only distinct results.
1129.         """
1130.         assert not self.query.is_sliced, \
1131.             "Cannot create distinct fields once a slice has been taken."
1132.         obj = self._chain()
1133.         obj.query.add_distinct_fields(*field_names)
1134.         return obj
1135. 
1136.     def extra(self, select=None, where=None, params=None, tables=None,
1137.               order_by=None, select_params=None):
1138.         """Add extra SQL fragments to the query."""
1139.         self._not_support_combined_queries('extra')
1140.         assert not self.query.is_sliced, \
1141.             "Cannot change a query once a slice has been taken"
1142.         clone = self._chain()
1143.         clone.query.add_extra(select, select_params, where, params, tables, order_by)
1144.         return clone
1145. 
1146.     def reverse(self):
1147.         """Reverse the ordering of the QuerySet."""
1148.         if self.query.is_sliced:
1149.             raise TypeError('Cannot reverse a query once a slice has been taken.')
1150.         clone = self._chain()
1151.         clone.query.standard_ordering = not clone.query.standard_ordering
1152.         return clone
1153. 
1154.     def defer(self, *fields):
1155.         """
1156.         Defer the loading of data for certain fields until they are accessed.
1157.         Add the set of deferred fields to any existing set of deferred fields.
1158.         The only exception to this is if None is passed in as the only
1159.         parameter, in which case removal all deferrals.
1160.         """
1161.         self._not_support_combined_queries('defer')
1162.         if self._fields is not None:
1163.             raise TypeError("Cannot call defer() after .values() or .values_list()")
1164.         clone = self._chain()
1165.         if fields == (None,):
1166.             clone.query.clear_deferred_loading()
1167.         else:
1168.             clone.query.add_deferred_loading(fields)
1169.         return clone
1170. 
1171.     def only(self, *fields):
1172.         """
1173.         Essentially, the opposite of defer(). Only the fields passed into this
1174.         method and that are not already specified as deferred are loaded
1175.         immediately when the queryset is evaluated.
1176.         """
1177.         self._not_support_combined_queries('only')
1178.         if self._fields is not None:
1179.             raise TypeError("Cannot call only() after .values() or .values_list()")
1180.         if fields == (None,):
1181.             # Can only pass None to defer(), not only(), as the rest option.
1182.             # That won't stop people trying to do this, so let's be explicit.
1183.             raise TypeError("Cannot pass None as an argument to only().")
1184.         for field in fields:
1185.             field = field.split(LOOKUP_SEP, 1)[0]
1186.             if field in self.query._filtered_relations:
1187.                 raise ValueError('only() is not supported with FilteredRelation.')
1188.         clone = self._chain()
1189.         clone.query.add_immediate_loading(fields)
1190.         return clone
1191. 
1192.     def using(self, alias):
1193.         """Select which database this QuerySet should execute against."""
1194.         clone = self._chain()
1195.         clone._db = alias
1196.         return clone
1197. 
1198.     ###################################
1199.     # PUBLIC INTROSPECTION ATTRIBUTES #
1200.     ###################################
1201. 
1202.     @property
1203.     def ordered(self):
1204.         """
1205.         Return True if the QuerySet is ordered -- i.e. has an order_by()
1206.         clause or a default ordering on the model (or is empty).
1207.         """
1208.         if isinstance(self, EmptyQuerySet):
1209.             return True
1210.         if self.query.extra_order_by or self.query.order_by:
1211.             return True
1212.         elif self.query.default_ordering and self.query.get_meta().ordering:
1213.             return True
1214.         else:
1215.             return False
1216. 
1217.     @property
1218.     def db(self):
1219.         """Return the database used if this query is executed now."""
1220.         if self._for_write:
1221.             return self._db or router.db_for_write(self.model, **self._hints)
1222.         return self._db or router.db_for_read(self.model, **self._hints)
1223. 
1224.     ###################
1225.     # PRIVATE METHODS #
1226.     ###################
1227. 
1228.     def _insert(self, objs, fields, returning_fields=None, raw=False, using=None, ignore_conflicts=False):
1229.         """
1230.         Insert a new record for the given model. This provides an interface to
1231.         the InsertQuery class and is how Model.save() is implemented.
1232.         """
1233.         self._for_write = True
1234.         if using is None:
1235.             using = self.db
1236.         query = sql.InsertQuery(self.model, ignore_conflicts=ignore_conflicts)
1237.         query.insert_values(fields, objs, raw=raw)
1238.         return query.get_compiler(using=using).execute_sql(returning_fields)
1239.     _insert.alters_data = True
1240.     _insert.queryset_only = False
1241. 
1242.     def _batched_insert(self, objs, fields, batch_size, ignore_conflicts=False):
1243.         """
1244.         Helper method for bulk_create() to insert objs one batch at a time.
1245.         """
1246.         if ignore_conflicts and not connections[self.db].features.supports_ignore_conflicts:
1247.             raise NotSupportedError('This database backend does not support ignoring conflicts.')
1248.         ops = connections[self.db].ops
1249.         max_batch_size = max(ops.bulk_batch_size(fields, objs), 1)
1250.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
1251.         inserted_rows = []
1252.         bulk_return = connections[self.db].features.can_return_rows_from_bulk_insert
1253.         for item in [objs[i:i + batch_size] for i in range(0, len(objs), batch_size)]:
1254.             if bulk_return and not ignore_conflicts:
1255.                 inserted_rows.extend(self._insert(
1256.                     item, fields=fields, using=self.db,
1257.                     returning_fields=self.model._meta.db_returning_fields,
1258.                     ignore_conflicts=ignore_conflicts,
1259.                 ))
1260.             else:
1261.                 self._insert(item, fields=fields, using=self.db, ignore_conflicts=ignore_conflicts)
1262.         return inserted_rows
1263. 
1264.     def _chain(self, **kwargs):
1265.         """
1266.         Return a copy of the current QuerySet that's ready for another
1267.         operation.
1268.         """
1269.         obj = self._clone()
1270.         if obj._sticky_filter:
1271.             obj.query.filter_is_sticky = True
1272.             obj._sticky_filter = False
1273.         obj.__dict__.update(kwargs)
1274.         return obj
1275. 
1276.     def _clone(self):
1277.         """
1278.         Return a copy of the current QuerySet. A lightweight alternative
1279.         to deepcopy().
1280.         """
1281.         c = self.__class__(model=self.model, query=self.query.chain(), using=self._db, hints=self._hints)
1282.         c._sticky_filter = self._sticky_filter
1283.         c._for_write = self._for_write
1284.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1285.         c._known_related_objects = self._known_related_objects
1286.         c._iterable_class = self._iterable_class
1287.         c._fields = self._fields
1288.         return c
1289. 
1290.     def _fetch_all(self):
1291.         if self._result_cache is None:
1292.             self._result_cache = list(self._iterable_class(self))
1293.         if self._prefetch_related_lookups and not self._prefetch_done:
1294.             self._prefetch_related_objects()
1295. 
1296.     def _next_is_sticky(self):
1297.         """
1298.         Indicate that the next filter call and the one following that should
1299.         be treated as a single filter. This is only important when it comes to
1300.         determining when to reuse tables for many-to-many filters. Required so
1301.         that we can filter naturally on the results of related managers.
1302. 
1303.         This doesn't return a clone of the current QuerySet (it returns
1304.         "self"). The method is only used internally and should be immediately
1305.         followed by a filter() that does create a clone.
1306.         """
1307.         self._sticky_filter = True
1308.         return self
1309. 
1310.     def _merge_sanity_check(self, other):
1311.         """Check that two QuerySet classes may be merged."""
1312.         if self._fields is not None and (
1313.                 set(self.query.values_select) != set(other.query.values_select) or
1314.                 set(self.query.extra_select) != set(other.query.extra_select) or
1315.                 set(self.query.annotation_select) != set(other.query.annotation_select)):
1316.             raise TypeError(
1317.                 "Merging '%s' classes must involve the same values in each case."
1318.                 % self.__class__.__name__
1319.             )
1320. 
1321.     def _merge_known_related_objects(self, other):
1322.         """
1323.         Keep track of all known related objects from either QuerySet instance.
1324.         """
1325.         for field, objects in other._known_related_objects.items():
1326.             self._known_related_objects.setdefault(field, {}).update(objects)
1327. 
1328.     def resolve_expression(self, *args, **kwargs):
1329.         if self._fields and len(self._fields) > 1:
1330.             # values() queryset can only be used as nested queries
1331.             # if they are set up to select only a single field.
1332.             raise TypeError('Cannot use multi-field values as a filter value.')
1333.         query = self.query.resolve_expression(*args, **kwargs)
1334.         query._db = self._db
1335.         return query
1336.     resolve_expression.queryset_only = True
1337. 
1338.     def _add_hints(self, **hints):
1339.         """
1340.         Update hinting information for use by routers. Add new key/values or
1341.         overwrite existing key/values.
1342.         """
1343.         self._hints.update(hints)
1344. 
1345.     def _has_filters(self):
1346.         """
1347.         Check if this QuerySet has any filtering going on. This isn't
1348.         equivalent with checking if all objects are present in results, for
1349.         example, qs[1:]._has_filters() -> False.
1350.         """
1351.         return self.query.has_filters()
1352. 
1353.     @staticmethod
1354.     def _validate_values_are_expressions(values, method_name):
1355.         invalid_args = sorted(str(arg) for arg in values if not hasattr(arg, 'resolve_expression'))
1356.         if invalid_args:
1357.             raise TypeError(
1358.                 'QuerySet.%s() received non-expression(s): %s.' % (
1359.                     method_name,
1360.                     ', '.join(invalid_args),
1361.                 )
1362.             )
1363. 
1364.     def _not_support_combined_queries(self, operation_name):
1365.         if self.query.combinator:
1366.             raise NotSupportedError(
1367.                 'Calling QuerySet.%s() after %s() is not supported.'
1368.                 % (operation_name, self.query.combinator)
1369.             )
1370. 
1371. 
1372. class InstanceCheckMeta(type):
1373.     def __instancecheck__(self, instance):
1374.         return isinstance(instance, QuerySet) and instance.query.is_empty()
1375. 
1376. 
1377. class EmptyQuerySet(metaclass=InstanceCheckMeta):
1378.     """
1379.     Marker class to checking if a queryset is empty by .none():
1380.         isinstance(qs.none(), EmptyQuerySet) -> True
1381.     """
1382. 
1383.     def __init__(self, *args, **kwargs):
1384.         raise TypeError("EmptyQuerySet can't be instantiated")
1385. 
1386. 
1387. class RawQuerySet:
1388.     """
1389.     Provide an iterator which converts the results of raw SQL queries into
1390.     annotated model instances.
1391.     """
1392.     def __init__(self, raw_query, model=None, query=None, params=None,
1393.                  translations=None, using=None, hints=None):
1394.         self.raw_query = raw_query
1395.         self.model = model
1396.         self._db = using
1397.         self._hints = hints or {}
1398.         self.query = query or sql.RawQuery(sql=raw_query, using=self.db, params=params)
1399.         self.params = params or ()
1400.         self.translations = translations or {}
1401.         self._result_cache = None
1402.         self._prefetch_related_lookups = ()
1403.         self._prefetch_done = False
1404. 
1405.     def resolve_model_init_order(self):
1406.         """Resolve the init field names and value positions."""
1407.         converter = connections[self.db].introspection.identifier_converter
1408.         model_init_fields = [f for f in self.model._meta.fields if converter(f.column) in self.columns]
1409.         annotation_fields = [(column, pos) for pos, column in enumerate(self.columns)
1410.                              if column not in self.model_fields]
1411.         model_init_order = [self.columns.index(converter(f.column)) for f in model_init_fields]
1412.         model_init_names = [f.attname for f in model_init_fields]
1413.         return model_init_names, model_init_order, annotation_fields
1414. 
1415.     def prefetch_related(self, *lookups):
1416.         """Same as QuerySet.prefetch_related()"""
1417.         clone = self._clone()
1418.         if lookups == (None,):
1419.             clone._prefetch_related_lookups = ()
1420.         else:
1421.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1422.         return clone
1423. 
1424.     def _prefetch_related_objects(self):
1425.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
1426.         self._prefetch_done = True
1427. 
1428.     def _clone(self):
1429.         """Same as QuerySet._clone()"""
1430.         c = self.__class__(
1431.             self.raw_query, model=self.model, query=self.query, params=self.params,
1432.             translations=self.translations, using=self._db, hints=self._hints
1433.         )
1434.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1435.         return c
1436. 
1437.     def _fetch_all(self):
1438.         if self._result_cache is None:
1439.             self._result_cache = list(self.iterator())
1440.         if self._prefetch_related_lookups and not self._prefetch_done:
1441.             self._prefetch_related_objects()
1442. 
1443.     def __len__(self):
1444.         self._fetch_all()
1445.         return len(self._result_cache)
1446. 
1447.     def __bool__(self):
1448.         self._fetch_all()
1449.         return bool(self._result_cache)
1450. 
1451.     def __iter__(self):
1452.         self._fetch_all()
1453.         return iter(self._result_cache)
1454. 
1455.     def iterator(self):
1456.         # Cache some things for performance reasons outside the loop.
1457.         db = self.db
1458.         compiler = connections[db].ops.compiler('SQLCompiler')(
1459.             self.query, connections[db], db
1460.         )
1461. 
1462.         query = iter(self.query)
1463. 
1464.         try:
1465.             model_init_names, model_init_pos, annotation_fields = self.resolve_model_init_order()
1466.             if self.model._meta.pk.attname not in model_init_names:
1467.                 raise exceptions.FieldDoesNotExist(
1468.                     'Raw query must include the primary key'
1469.                 )
1470.             model_cls = self.model
1471.             fields = [self.model_fields.get(c) for c in self.columns]
1472.             converters = compiler.get_converters([
1473.                 f.get_col(f.model._meta.db_table) if f else None for f in fields
1474.             ])
1475.             if converters:
1476.                 query = compiler.apply_converters(query, converters)
1477.             for values in query:
1478.                 # Associate fields to values
1479.                 model_init_values = [values[pos] for pos in model_init_pos]
1480.                 instance = model_cls.from_db(db, model_init_names, model_init_values)
1481.                 if annotation_fields:
1482.                     for column, pos in annotation_fields:
1483.                         setattr(instance, column, values[pos])
1484.                 yield instance
1485.         finally:
1486.             # Done iterating the Query. If it has its own cursor, close it.
1487.             if hasattr(self.query, 'cursor') and self.query.cursor:
1488.                 self.query.cursor.close()
1489. 
1490.     def __repr__(self):
1491.         return "<%s: %s>" % (self.__class__.__name__, self.query)
1492. 
1493.     def __getitem__(self, k):
1494.         return list(self)[k]
1495. 
1496.     @property
1497.     def db(self):
1498.         """Return the database used if this query is executed now."""
1499.         return self._db or router.db_for_read(self.model, **self._hints)
1500. 
1501.     def using(self, alias):
1502.         """Select the database this RawQuerySet should execute against."""
1503.         return RawQuerySet(
1504.             self.raw_query, model=self.model,
1505.             query=self.query.chain(using=alias),
1506.             params=self.params, translations=self.translations,
1507.             using=alias,
1508.         )
1509. 
1510.     @cached_property
1511.     def columns(self):
1512.         """
1513.         A list of model field names in the order they'll appear in the
1514.         query results.
1515.         """
1516.         columns = self.query.get_columns()
1517.         # Adjust any column names which don't match field names
1518.         for (query_name, model_name) in self.translations.items():
1519.             # Ignore translations for nonexistent column names
1520.             try:
1521.                 index = columns.index(query_name)
1522.             except ValueError:
1523.                 pass
1524.             else:
1525.                 columns[index] = model_name
1526.         return columns
1527. 
1528.     @cached_property
1529.     def model_fields(self):
1530.         """A dict mapping column names to model field names."""
1531.         converter = connections[self.db].introspection.identifier_converter
1532.         model_fields = {}
1533.         for field in self.model._meta.fields:
1534.             name, column = field.get_attname_column()
1535.             model_fields[converter(column)] = field
1536.         return model_fields
1537. 
1538. 
1539. class Prefetch:
1540.     def __init__(self, lookup, queryset=None, to_attr=None):
1541.         # `prefetch_through` is the path we traverse to perform the prefetch.
1542.         self.prefetch_through = lookup
1543.         # `prefetch_to` is the path to the attribute that stores the result.
1544.         self.prefetch_to = lookup
1545.         if queryset is not None and (
1546.             isinstance(queryset, RawQuerySet) or (
1547.                 hasattr(queryset, '_iterable_class') and
1548.                 not issubclass(queryset._iterable_class, ModelIterable)
1549.             )
1550.         ):
1551.             raise ValueError(
1552.                 'Prefetch querysets cannot use raw(), values(), and '
1553.                 'values_list().'
1554.             )
1555.         if to_attr:
1556.             self.prefetch_to = LOOKUP_SEP.join(lookup.split(LOOKUP_SEP)[:-1] + [to_attr])
1557. 
1558.         self.queryset = queryset
1559.         self.to_attr = to_attr
1560. 
1561.     def __getstate__(self):
1562.         obj_dict = self.__dict__.copy()
1563.         if self.queryset is not None:
1564.             # Prevent the QuerySet from being evaluated
1565.             obj_dict['queryset'] = self.queryset._chain(
1566.                 _result_cache=[],
1567.                 _prefetch_done=True,
1568.             )
1569.         return obj_dict
1570. 
1571.     def add_prefix(self, prefix):
1572.         self.prefetch_through = prefix + LOOKUP_SEP + self.prefetch_through
1573.         self.prefetch_to = prefix + LOOKUP_SEP + self.prefetch_to
1574. 
1575.     def get_current_prefetch_to(self, level):
1576.         return LOOKUP_SEP.join(self.prefetch_to.split(LOOKUP_SEP)[:level + 1])
1577. 
1578.     def get_current_to_attr(self, level):
1579.         parts = self.prefetch_to.split(LOOKUP_SEP)
1580.         to_attr = parts[level]
1581.         as_attr = self.to_attr and level == len(parts) - 1
1582.         return to_attr, as_attr
1583. 
1584.     def get_current_queryset(self, level):
1585.         if self.get_current_prefetch_to(level) == self.prefetch_to:
1586.             return self.queryset
1587.         return None
1588. 
1589.     def __eq__(self, other):
1590.         if not isinstance(other, Prefetch):
1591.             return NotImplemented
1592.         return self.prefetch_to == other.prefetch_to
1593. 
1594.     def __hash__(self):
1595.         return hash((self.__class__, self.prefetch_to))
1596. 
1597. 
1598. def normalize_prefetch_lookups(lookups, prefix=None):
1599.     """Normalize lookups into Prefetch objects."""
1600.     ret = []
1601.     for lookup in lookups:
1602.         if not isinstance(lookup, Prefetch):
1603.             lookup = Prefetch(lookup)
1604.         if prefix:
1605.             lookup.add_prefix(prefix)
1606.         ret.append(lookup)
1607.     return ret
1608. 
1609. 
1610. def prefetch_related_objects(model_instances, *related_lookups):
1611.     """
1612.     Populate prefetched object caches for a list of model instances based on
1613.     the lookups/Prefetch instances given.
1614.     """
1615.     if not model_instances:
1616.         return  # nothing to do
1617. 
1618.     # We need to be able to dynamically add to the list of prefetch_related
1619.     # lookups that we look up (see below).  So we need some book keeping to
1620.     # ensure we don't do duplicate work.
1621.     done_queries = {}    # dictionary of things like 'foo__bar': [results]
1622. 
1623.     auto_lookups = set()  # we add to this as we go through.
1624.     followed_descriptors = set()  # recursion protection
1625. 
1626.     all_lookups = normalize_prefetch_lookups(reversed(related_lookups))
1627.     while all_lookups:
1628.         lookup = all_lookups.pop()
1629.         if lookup.prefetch_to in done_queries:
1630.             if lookup.queryset is not None:
1631.                 raise ValueError("'%s' lookup was already seen with a different queryset. "
1632.                                  "You may need to adjust the ordering of your lookups." % lookup.prefetch_to)
1633. 
1634.             continue
1635. 
1636.         # Top level, the list of objects to decorate is the result cache
1637.         # from the primary QuerySet. It won't be for deeper levels.
1638.         obj_list = model_instances
1639. 
1640.         through_attrs = lookup.prefetch_through.split(LOOKUP_SEP)
1641.         for level, through_attr in enumerate(through_attrs):
1642.             # Prepare main instances
1643.             if not obj_list:
1644.                 break
1645. 
1646.             prefetch_to = lookup.get_current_prefetch_to(level)
1647.             if prefetch_to in done_queries:
1648.                 # Skip any prefetching, and any object preparation
1649.                 obj_list = done_queries[prefetch_to]
1650.                 continue
1651. 
1652.             # Prepare objects:
1653.             good_objects = True
1654.             for obj in obj_list:
1655.                 # Since prefetching can re-use instances, it is possible to have
1656.                 # the same instance multiple times in obj_list, so obj might
1657.                 # already be prepared.
1658.                 if not hasattr(obj, '_prefetched_objects_cache'):
1659.                     try:
1660.                         obj._prefetched_objects_cache = {}
1661.                     except (AttributeError, TypeError):
1662.                         # Must be an immutable object from
1663.                         # values_list(flat=True), for example (TypeError) or
1664.                         # a QuerySet subclass that isn't returning Model
1665.                         # instances (AttributeError), either in Django or a 3rd
1666.                         # party. prefetch_related() doesn't make sense, so quit.
1667.                         good_objects = False
1668.                         break
1669.             if not good_objects:
1670.                 break
1671. 
1672.             # Descend down tree
1673. 
1674.             # We assume that objects retrieved are homogeneous (which is the premise
1675.             # of prefetch_related), so what applies to first object applies to all.
1676.             first_obj = obj_list[0]
1677.             to_attr = lookup.get_current_to_attr(level)[0]
1678.             prefetcher, descriptor, attr_found, is_fetched = get_prefetcher(first_obj, through_attr, to_attr)
1679. 
1680.             if not attr_found:
1681.                 raise AttributeError("Cannot find '%s' on %s object, '%s' is an invalid "
1682.                                      "parameter to prefetch_related()" %
1683.                                      (through_attr, first_obj.__class__.__name__, lookup.prefetch_through))
1684. 
1685.             if level == len(through_attrs) - 1 and prefetcher is None:
1686.                 # Last one, this *must* resolve to something that supports
1687.                 # prefetching, otherwise there is no point adding it and the
1688.                 # developer asking for it has made a mistake.
1689.                 raise ValueError("'%s' does not resolve to an item that supports "
1690.                                  "prefetching - this is an invalid parameter to "
1691.                                  "prefetch_related()." % lookup.prefetch_through)
1692. 
1693.             if prefetcher is not None and not is_fetched:
1694.                 obj_list, additional_lookups = prefetch_one_level(obj_list, prefetcher, lookup, level)
1695.                 # We need to ensure we don't keep adding lookups from the
1696.                 # same relationships to stop infinite recursion. So, if we
1697.                 # are already on an automatically added lookup, don't add
1698.                 # the new lookups from relationships we've seen already.
1699.                 if not (prefetch_to in done_queries and lookup in auto_lookups and descriptor in followed_descriptors):
1700.                     done_queries[prefetch_to] = obj_list
1701.                     new_lookups = normalize_prefetch_lookups(reversed(additional_lookups), prefetch_to)
1702.                     auto_lookups.update(new_lookups)
1703.                     all_lookups.extend(new_lookups)
1704.                 followed_descriptors.add(descriptor)
1705.             else:
1706.                 # Either a singly related object that has already been fetched
1707.                 # (e.g. via select_related), or hopefully some other property
1708.                 # that doesn't support prefetching but needs to be traversed.
1709. 
1710.                 # We replace the current list of parent objects with the list
1711.                 # of related objects, filtering out empty or missing values so
1712.                 # that we can continue with nullable or reverse relations.
1713.                 new_obj_list = []
1714.                 for obj in obj_list:
1715.                     if through_attr in getattr(obj, '_prefetched_objects_cache', ()):
1716.                         # If related objects have been prefetched, use the
1717.                         # cache rather than the object's through_attr.
1718.                         new_obj = list(obj._prefetched_objects_cache.get(through_attr))
1719.                     else:
1720.                         try:
1721.                             new_obj = getattr(obj, through_attr)
1722.                         except exceptions.ObjectDoesNotExist:
1723.                             continue
1724.                     if new_obj is None:
1725.                         continue
1726.                     # We special-case `list` rather than something more generic
1727.                     # like `Iterable` because we don't want to accidentally match
1728.                     # user models that define __iter__.
1729.                     if isinstance(new_obj, list):
1730.                         new_obj_list.extend(new_obj)
1731.                     else:
1732.                         new_obj_list.append(new_obj)
1733.                 obj_list = new_obj_list
1734. 
1735. 
1736. def get_prefetcher(instance, through_attr, to_attr):
1737.     """
1738.     For the attribute 'through_attr' on the given instance, find
1739.     an object that has a get_prefetch_queryset().
1740.     Return a 4 tuple containing:
1741.     (the object with get_prefetch_queryset (or None),
1742.      the descriptor object representing this relationship (or None),
1743.      a boolean that is False if the attribute was not found at all,
1744.      a boolean that is True if the attribute has already been fetched)
1745.     """
1746.     prefetcher = None
1747.     is_fetched = False
1748. 
1749.     # For singly related objects, we have to avoid getting the attribute
1750.     # from the object, as this will trigger the query. So we first try
1751.     # on the class, in order to get the descriptor object.
1752.     rel_obj_descriptor = getattr(instance.__class__, through_attr, None)
1753.     if rel_obj_descriptor is None:
1754.         attr_found = hasattr(instance, through_attr)
1755.     else:
1756.         attr_found = True
1757.         if rel_obj_descriptor:
1758.             # singly related object, descriptor object has the
1759.             # get_prefetch_queryset() method.
1760.             if hasattr(rel_obj_descriptor, 'get_prefetch_queryset'):
1761.                 prefetcher = rel_obj_descriptor
1762.                 if rel_obj_descriptor.is_cached(instance):
1763.                     is_fetched = True
1764.             else:
1765.                 # descriptor doesn't support prefetching, so we go ahead and get
1766.                 # the attribute on the instance rather than the class to
1767.                 # support many related managers
1768.                 rel_obj = getattr(instance, through_attr)
1769.                 if hasattr(rel_obj, 'get_prefetch_queryset'):
1770.                     prefetcher = rel_obj
1771.                 if through_attr != to_attr:
1772.                     # Special case cached_property instances because hasattr
1773.                     # triggers attribute computation and assignment.
1774.                     if isinstance(getattr(instance.__class__, to_attr, None), cached_property):
1775.                         is_fetched = to_attr in instance.__dict__
1776.                     else:
1777.                         is_fetched = hasattr(instance, to_attr)
1778.                 else:
1779.                     is_fetched = through_attr in instance._prefetched_objects_cache
1780.     return prefetcher, rel_obj_descriptor, attr_found, is_fetched
1781. 
1782. 
1783. def prefetch_one_level(instances, prefetcher, lookup, level):
1784.     """
1785.     Helper function for prefetch_related_objects().
1786. 
1787.     Run prefetches on all instances using the prefetcher object,
1788.     assigning results to relevant caches in instance.
1789. 
1790.     Return the prefetched objects along with any additional prefetches that
1791.     must be done due to prefetch_related lookups found from default managers.
1792.     """
1793.     # prefetcher must have a method get_prefetch_queryset() which takes a list
1794.     # of instances, and returns a tuple:
1795. 
1796.     # (queryset of instances of self.model that are related to passed in instances,
1797.     #  callable that gets value to be matched for returned instances,
1798.     #  callable that gets value to be matched for passed in instances,
1799.     #  boolean that is True for singly related objects,
1800.     #  cache or field name to assign to,
1801.     #  boolean that is True when the previous argument is a cache name vs a field name).
1802. 
1803.     # The 'values to be matched' must be hashable as they will be used
1804.     # in a dictionary.
1805. 
1806.     rel_qs, rel_obj_attr, instance_attr, single, cache_name, is_descriptor = (
1807.         prefetcher.get_prefetch_queryset(instances, lookup.get_current_queryset(level)))
1808.     # We have to handle the possibility that the QuerySet we just got back
1809.     # contains some prefetch_related lookups. We don't want to trigger the
1810.     # prefetch_related functionality by evaluating the query. Rather, we need
1811.     # to merge in the prefetch_related lookups.
1812.     # Copy the lookups in case it is a Prefetch object which could be reused
1813.     # later (happens in nested prefetch_related).
1814.     additional_lookups = [
1815.         copy.copy(additional_lookup) for additional_lookup
1816.         in getattr(rel_qs, '_prefetch_related_lookups', ())
1817.     ]
1818.     if additional_lookups:
1819.         # Don't need to clone because the manager should have given us a fresh
1820.         # instance, so we access an internal instead of using public interface
1821.         # for performance reasons.
1822.         rel_qs._prefetch_related_lookups = ()
1823. 
1824.     all_related_objects = list(rel_qs)
1825. 
1826.     rel_obj_cache = {}
1827.     for rel_obj in all_related_objects:
1828.         rel_attr_val = rel_obj_attr(rel_obj)
1829.         rel_obj_cache.setdefault(rel_attr_val, []).append(rel_obj)
1830. 
1831.     to_attr, as_attr = lookup.get_current_to_attr(level)
1832.     # Make sure `to_attr` does not conflict with a field.
1833.     if as_attr and instances:
1834.         # We assume that objects retrieved are homogeneous (which is the premise
1835.         # of prefetch_related), so what applies to first object applies to all.
1836.         model = instances[0].__class__
1837.         try:
1838.             model._meta.get_field(to_attr)
1839.         except exceptions.FieldDoesNotExist:
1840.             pass
1841.         else:
1842.             msg = 'to_attr={} conflicts with a field on the {} model.'
1843.             raise ValueError(msg.format(to_attr, model.__name__))
1844. 
1845.     # Whether or not we're prefetching the last part of the lookup.
1846.     leaf = len(lookup.prefetch_through.split(LOOKUP_SEP)) - 1 == level
1847. 
1848.     for obj in instances:
1849.         instance_attr_val = instance_attr(obj)
1850.         vals = rel_obj_cache.get(instance_attr_val, [])
1851. 
1852.         if single:
1853.             val = vals[0] if vals else None
1854.             if as_attr:
1855.                 # A to_attr has been given for the prefetch.
1856.                 setattr(obj, to_attr, val)
1857.             elif is_descriptor:
1858.                 # cache_name points to a field name in obj.
1859.                 # This field is a descriptor for a related object.
1860.                 setattr(obj, cache_name, val)
1861.             else:
1862.                 # No to_attr has been given for this prefetch operation and the
1863.                 # cache_name does not point to a descriptor. Store the value of
1864.                 # the field in the object's field cache.
1865.                 obj._state.fields_cache[cache_name] = val
1866.         else:
1867.             if as_attr:
1868.                 setattr(obj, to_attr, vals)
1869.             else:
1870.                 manager = getattr(obj, to_attr)
1871.                 if leaf and lookup.queryset is not None:
1872.                     qs = manager._apply_rel_filters(lookup.queryset)
1873.                 else:
1874.                     qs = manager.get_queryset()
1875.                 qs._result_cache = vals
1876.                 # We don't want the individual qs doing prefetch_related now,
1877.                 # since we have merged this into the current work.
1878.                 qs._prefetch_done = True
1879.                 obj._prefetched_objects_cache[cache_name] = qs
1880.     return all_related_objects, additional_lookups
1881. 
1882. 
1883. class RelatedPopulator:
1884.     """
1885.     RelatedPopulator is used for select_related() object instantiation.
1886. 
1887.     The idea is that each select_related() model will be populated by a
1888.     different RelatedPopulator instance. The RelatedPopulator instances get
1889.     klass_info and select (computed in SQLCompiler) plus the used db as
1890.     input for initialization. That data is used to compute which columns
1891.     to use, how to instantiate the model, and how to populate the links
1892.     between the objects.
1893. 
1894.     The actual creation of the objects is done in populate() method. This
1895.     method gets row and from_obj as input and populates the select_related()
1896.     model instance.
1897.     """
1898.     def __init__(self, klass_info, select, db):
1899.         self.db = db
1900.         # Pre-compute needed attributes. The attributes are:
1901.         #  - model_cls: the possibly deferred model class to instantiate
1902.         #  - either:
1903.         #    - cols_start, cols_end: usually the columns in the row are
1904.         #      in the same order model_cls.__init__ expects them, so we
1905.         #      can instantiate by model_cls(*row[cols_start:cols_end])
1906.         #    - reorder_for_init: When select_related descends to a child
1907.         #      class, then we want to reuse the already selected parent
1908.         #      data. However, in this case the parent data isn't necessarily
1909.         #      in the same order that Model.__init__ expects it to be, so
1910.         #      we have to reorder the parent data. The reorder_for_init
1911.         #      attribute contains a function used to reorder the field data
1912.         #      in the order __init__ expects it.
1913.         #  - pk_idx: the index of the primary key field in the reordered
1914.         #    model data. Used to check if a related object exists at all.
1915.         #  - init_list: the field attnames fetched from the database. For
1916.         #    deferred models this isn't the same as all attnames of the
1917.         #    model's fields.
1918.         #  - related_populators: a list of RelatedPopulator instances if
1919.         #    select_related() descends to related models from this model.
1920.         #  - local_setter, remote_setter: Methods to set cached values on
1921.         #    the object being populated and on the remote object. Usually
1922.         #    these are Field.set_cached_value() methods.
1923.         select_fields = klass_info['select_fields']
1924.         from_parent = klass_info['from_parent']
1925.         if not from_parent:
1926.             self.cols_start = select_fields[0]
1927.             self.cols_end = select_fields[-1] + 1
1928.             self.init_list = [
1929.                 f[0].target.attname for f in select[self.cols_start:self.cols_end]
1930.             ]
1931.             self.reorder_for_init = None
1932.         else:
1933.             attname_indexes = {select[idx][0].target.attname: idx for idx in select_fields}
1934.             model_init_attnames = (f.attname for f in klass_info['model']._meta.concrete_fields)
1935.             self.init_list = [attname for attname in model_init_attnames if attname in attname_indexes]
1936.             self.reorder_for_init = operator.itemgetter(*[attname_indexes[attname] for attname in self.init_list])
1937. 
1938.         self.model_cls = klass_info['model']
1939.         self.pk_idx = self.init_list.index(self.model_cls._meta.pk.attname)
1940.         self.related_populators = get_related_populators(klass_info, select, self.db)
1941.         self.local_setter = klass_info['local_setter']
1942.         self.remote_setter = klass_info['remote_setter']
1943. 
1944.     def populate(self, row, from_obj):
1945.         if self.reorder_for_init:
1946.             obj_data = self.reorder_for_init(row)
1947.         else:
1948.             obj_data = row[self.cols_start:self.cols_end]
1949.         if obj_data[self.pk_idx] is None:
1950.             obj = None
1951.         else:
1952.             obj = self.model_cls.from_db(self.db, self.init_list, obj_data)
1953.             for rel_iter in self.related_populators:
1954.                 rel_iter.populate(row, obj)
1955.         self.local_setter(from_obj, obj)
1956.         if obj is not None:
1957.             self.remote_setter(obj, from_obj)
1958. 
1959. 
1960. def get_related_populators(klass_info, select, db):
1961.     iterators = []
1962.     related_klass_infos = klass_info.get('related_klass_infos', [])
1963.     for rel_klass_info in related_klass_infos:
1964.         rel_cls = RelatedPopulator(rel_klass_info, select, db)
1965.         iterators.append(rel_cls)
1966.     return iterators

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-22 16:47:25,956 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's patch relies on `self.model._meta.total_unique_constraints` and `self.model._meta.get_field()`. The provided context for `django/db/models/options.py` is incomplete and is missing the definitions for this property and this method. To validate the patch, the complete implementation of the `Options` class is required." query='Please provide the full content of `django/db/models/options.py`.' extra_requirements='If the full file is too large, please at least provide the definitions of the `total_unique_constraints` property and the `get_field` method from the `Options` class.' purpose='I need to understand how `total_unique_constraints` is constructed and how `get_field` works to ensure the proposed patch correctly handles all cases of unique constraints.'
2025-12-22 16:47:25,957 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `django/db/models/options.py`.
2025-12-22 16:47:25,957 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-22 16:47:25,957 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-22 16:47:25,958 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-22 16:47:25,958 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `django/db/models/options.py`.
Extra requirements: If the full file is too large, please at least provide the definitions of the `total_unique_constraints` property and the `get_field` method from the `Options` class.
Purpose: I need to understand how `total_unique_constraints` is constructed and how `get_field` works to ensure the proposed patch correctly handles all cases of unique constraints.
2025-12-22 16:47:31,537 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first attempt to retrieve the full content of `django/db/models/options.py`. If the file is too large to be returned in a single call, I will then locate the `Options` class and retrieve the specific definitions of the `total_unique_constraints` property and the `get_field` method as requested.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/options.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2151, 'candidates_token_count': 93, 'total_token_count': 2620, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2151}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 93}], 'thoughts_token_count': 376, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.27887317698488956, 'model_name': 'gemini-2.5-pro'} id='run--327888c4-6e19-43c0-b122-e1a68aac6943-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/options.py'}, 'id': '623bb263-cb19-48ec-9d33-be986b6b5a0c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2151, 'output_tokens': 93, 'total_tokens': 2620, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 376}}
2025-12-22 16:47:35,617 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the first 500 lines of `django/db/models/options.py`. Since the file is too large, I will now search for the `Options` class and then specifically locate the `total_unique_constraints` property and the `get_field` method within that class to provide you with the requested code definitions.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "django/db/models/options.py", "text": "total_unique_constraints"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9682, 'candidates_token_count': 109, 'total_token_count': 9986, 'cached_content_token_count': 1838, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9682}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1838}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 109}], 'thoughts_token_count': 195}, 'finish_reason': 'STOP', 'avg_logprobs': -0.24716622238859123, 'model_name': 'gemini-2.5-pro'} id='run--58bae21f-3ea3-4cd2-bdd2-c87a7942bdb1-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'django/db/models/options.py', 'text': 'total_unique_constraints'}, 'id': '7653ba56-6b5e-4bb2-be91-4c55ad788bec', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9682, 'output_tokens': 109, 'total_tokens': 9986, 'input_token_details': {'cache_read': 1838}, 'output_token_details': {'reasoning': 195}}
2025-12-22 16:47:37,875 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully located the `Options` class within `django/db/models/options.py`. I will now extract the source code for the `total_unique_constraints` property and the `get_field` method as you requested.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 627.0, "relative_path": "django/db/models/options.py", "start_line": 598.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18658, 'candidates_token_count': 108, 'total_token_count': 18766, 'cached_content_token_count': 9505, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18658}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9505}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 108}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1107888486650255, 'model_name': 'gemini-2.5-pro'} id='run--8a96a4af-2897-472e-9f62-c16ed5587bdd-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 862.0, 'relative_path': 'django/db/models/options.py', 'start_line': 850.0}, 'id': 'e790e2f0-f48c-4805-868d-385085f356e4', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'end_line': 627.0, 'relative_path': 'django/db/models/options.py', 'start_line': 598.0}, 'id': '59a73f49-d57e-4182-8ea4-313a0c800aa6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18658, 'output_tokens': 108, 'total_tokens': 18766, 'input_token_details': {'cache_read': 9505}}
2025-12-22 16:47:39,962 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the source code for the `get_field` method, but I made an error in retrieving the `total_unique_constraints` property. I will now fetch the correct code for the `total_unique_constraints` property.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 849.0, "relative_path": "django/db/models/options.py", "start_line": 840.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19547, 'candidates_token_count': 79, 'total_token_count': 19687, 'cached_content_token_count': 17077, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19547}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17077}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 61}, 'finish_reason': 'STOP', 'avg_logprobs': -0.12772707395915744, 'model_name': 'gemini-2.5-pro'} id='run--83c1a59c-a530-4245-b700-40ebadc2dad1-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 849.0, 'relative_path': 'django/db/models/options.py', 'start_line': 840.0}, 'id': '320d0c69-f815-41fb-9076-528df72d9842', 'type': 'tool_call'}] usage_metadata={'input_tokens': 19547, 'output_tokens': 79, 'total_tokens': 19687, 'input_token_details': {'cache_read': 17077}, 'output_token_details': {'reasoning': 61}}
2025-12-22 16:47:47,391 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the definitions of the `total_unique_constraints` property and the `get_field` method from the `Options` class in `django/db/models/options.py`. The `total_unique_constraints` property gathers all unique constraints from the model\'s constraints list, filtering out any that have a condition. The `get_field` method first attempts to find a forward field by the given name and, if that fails, falls back to searching all fields, including reverse relationships.\n\nHere is the requested code:\n\n**`total_unique_constraints` property:**\n```python\n@cached_property\ndef total_unique_constraints(self):\n    """\n    Return a list of total unique constraints. Useful for determining set\n    of fields guaranteed to be unique for all rows.\n    """\n    return [\n        constraint\n        for constraint in self.constraints\n        if isinstance(constraint, UniqueConstraint) and constraint.condition is None\n    ]\n```\n\n**`get_field` method:**\n```python\ndef get_field(self, field_name):\n    """\n    Return a field instance given the name of a forward or reverse field.\n    """\n    try:\n        # In order to avoid premature loading of the relation tree\n        # (expensive) we prefer checking if the field is a forward field.\n        return self._forward_fields_map[field_name]\n    except KeyError:\n        # If the app registry is not ready, reverse fields are\n        # unavailable, therefore we throw a FieldDoesNotExist exception.\n        if not self.apps.models_ready:\n            raise FieldDoesNotExist(\n                f"{self.object_name} has no field named \'{field_name}\'. The app cache isn\'t ready yet, "\n                "so if this is an auto-created related field, it won\'t "\n                "be available yet."\n            )\n\n    try:\n        # Retrieve field instance by name from cached or just-computed\n        # field map.\n        return self.fields_map[field_name]\n    except KeyError:\n        raise FieldDoesNotExist(f"{self.object_name} has no field named \'{field_name}\'")\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 257, 'end_index': 646, 'uri': 'https://github.com/katrid/orun', 'title': '', 'license_': ''}, {'start_index': 714, 'end_index': 1848, 'title': 'Your prompt', 'uri': '', 'license_': ''}, {'start_index': 2491, 'end_index': 2844, 'uri': 'https://github.com/katrid/orun', 'title': '', 'license_': ''}, {'start_index': 2890, 'end_index': 3441, 'uri': 'http://www.hackdig.com/08/hack-433827.htm', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 19848, 'candidates_token_count': 481, 'total_token_count': 20766, 'cached_content_token_count': 18945, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19848}], 'cache_tokens_details': [{'modality': 1, 'token_count': 18945}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 481}], 'thoughts_token_count': 437}, 'finish_reason': 'STOP', 'avg_logprobs': -0.021151344394485568, 'model_name': 'gemini-2.5-pro'} id='run--64789eb2-6d73-4955-add6-ac5b668635e5-0' usage_metadata={'input_tokens': 19848, 'output_tokens': 481, 'total_tokens': 20766, 'input_token_details': {'cache_read': 18945}, 'output_token_details': {'reasoning': 437}}
2025-12-22 16:47:47,393 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `django/db/models/options.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the full file is too large, please at least provide the definitions of the `total_unique_constraints` property and the `get_field` method from the `Options` class.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
I need to understand how `total_unique_constraints` is constructed and how `get_field` works to ensure the proposed patch correctly handles all cases of unique constraints.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/options.py
Line number range: 1 - 500
Content:
1. import bisect
2. import copy
3. import inspect
4. from collections import defaultdict
5. 
6. from django.apps import apps
7. from django.conf import settings
8. from django.core.exceptions import FieldDoesNotExist
9. from django.db import connections
10. from django.db.models import AutoField, Manager, OrderWrt, UniqueConstraint
11. from django.db.models.query_utils import PathInfo
12. from django.utils.datastructures import ImmutableList, OrderedSet
13. from django.utils.functional import cached_property
14. from django.utils.text import camel_case_to_spaces, format_lazy
15. from django.utils.translation import override
16. 
17. PROXY_PARENTS = object()
18. 
19. EMPTY_RELATION_TREE = ()
20. 
21. IMMUTABLE_WARNING = (
22.     "The return type of '%s' should never be mutated. If you want to manipulate this list "
23.     "for your own use, make a copy first."
24. )
25. 
26. DEFAULT_NAMES = (
27.     'verbose_name', 'verbose_name_plural', 'db_table', 'ordering',
28.     'unique_together', 'permissions', 'get_latest_by', 'order_with_respect_to',
29.     'app_label', 'db_tablespace', 'abstract', 'managed', 'proxy', 'swappable',
30.     'auto_created', 'index_together', 'apps', 'default_permissions',
31.     'select_on_save', 'default_related_name', 'required_db_features',
32.     'required_db_vendor', 'base_manager_name', 'default_manager_name',
33.     'indexes', 'constraints',
34. )
35. 
36. 
37. def normalize_together(option_together):
38.     """
39.     option_together can be either a tuple of tuples, or a single
40.     tuple of two strings. Normalize it to a tuple of tuples, so that
41.     calling code can uniformly expect that.
42.     """
43.     try:
44.         if not option_together:
45.             return ()
46.         if not isinstance(option_together, (tuple, list)):
47.             raise TypeError
48.         first_element = option_together[0]
49.         if not isinstance(first_element, (tuple, list)):
50.             option_together = (option_together,)
51.         # Normalize everything to tuples
52.         return tuple(tuple(ot) for ot in option_together)
53.     except TypeError:
54.         # If the value of option_together isn't valid, return it
55.         # verbatim; this will be picked up by the check framework later.
56.         return option_together
57. 
58. 
59. def make_immutable_fields_list(name, data):
60.     return ImmutableList(data, warning=IMMUTABLE_WARNING % name)
61. 
62. 
63. class Options:
64.     FORWARD_PROPERTIES = {
65.         'fields', 'many_to_many', 'concrete_fields', 'local_concrete_fields',
66.         '_forward_fields_map', 'managers', 'managers_map', 'base_manager',
67.         'default_manager',
68.     }
69.     REVERSE_PROPERTIES = {'related_objects', 'fields_map', '_relation_tree'}
70. 
71.     default_apps = apps
72. 
73.     def __init__(self, meta, app_label=None):
74.         self._get_fields_cache = {}
75.         self.local_fields = []
76.         self.local_many_to_many = []
77.         self.private_fields = []
78.         self.local_managers = []
79.         self.base_manager_name = None
80.         self.default_manager_name = None
81.         self.model_name = None
82.         self.verbose_name = None
83.         self.verbose_name_plural = None
84.         self.db_table = ''
85.         self.ordering = []
86.         self._ordering_clash = False
87.         self.indexes = []
88.         self.constraints = []
89.         self.unique_together = []
90.         self.index_together = []
91.         self.select_on_save = False
92.         self.default_permissions = ('add', 'change', 'delete', 'view')
93.         self.permissions = []
94.         self.object_name = None
95.         self.app_label = app_label
96.         self.get_latest_by = None
97.         self.order_with_respect_to = None
98.         self.db_tablespace = settings.DEFAULT_TABLESPACE
99.         self.required_db_features = []
100.         self.required_db_vendor = None
101.         self.meta = meta
102.         self.pk = None
103.         self.auto_field = None
104.         self.abstract = False
105.         self.managed = True
106.         self.proxy = False
107.         # For any class that is a proxy (including automatically created
108.         # classes for deferred object loading), proxy_for_model tells us
109.         # which class this model is proxying. Note that proxy_for_model
110.         # can create a chain of proxy models. For non-proxy models, the
111.         # variable is always None.
112.         self.proxy_for_model = None
113.         # For any non-abstract class, the concrete class is the model
114.         # in the end of the proxy_for_model chain. In particular, for
115.         # concrete models, the concrete_model is always the class itself.
116.         self.concrete_model = None
117.         self.swappable = None
118.         self.parents = {}
119.         self.auto_created = False
120. 
121.         # List of all lookups defined in ForeignKey 'limit_choices_to' options
122.         # from *other* models. Needed for some admin checks. Internal use only.
123.         self.related_fkey_lookups = []
124. 
125.         # A custom app registry to use, if you're making a separate model set.
126.         self.apps = self.default_apps
127. 
128.         self.default_related_name = None
129. 
130.     @property
131.     def label(self):
132.         return '%s.%s' % (self.app_label, self.object_name)
133. 
134.     @property
135.     def label_lower(self):
136.         return '%s.%s' % (self.app_label, self.model_name)
137. 
138.     @property
139.     def app_config(self):
140.         # Don't go through get_app_config to avoid triggering imports.
141.         return self.apps.app_configs.get(self.app_label)
142. 
143.     @property
144.     def installed(self):
145.         return self.app_config is not None
146. 
147.     def contribute_to_class(self, cls, name):
148.         from django.db import connection
149.         from django.db.backends.utils import truncate_name
150. 
151.         cls._meta = self
152.         self.model = cls
153.         # First, construct the default values for these options.
154.         self.object_name = cls.__name__
155.         self.model_name = self.object_name.lower()
156.         self.verbose_name = camel_case_to_spaces(self.object_name)
157. 
158.         # Store the original user-defined values for each option,
159.         # for use when serializing the model definition
160.         self.original_attrs = {}
161. 
162.         # Next, apply any overridden values from 'class Meta'.
163.         if self.meta:
164.             meta_attrs = self.meta.__dict__.copy()
165.             for name in self.meta.__dict__:
166.                 # Ignore any private attributes that Django doesn't care about.
167.                 # NOTE: We can't modify a dictionary's contents while looping
168.                 # over it, so we loop over the *original* dictionary instead.
169.                 if name.startswith('_'):
170.                     del meta_attrs[name]
171.             for attr_name in DEFAULT_NAMES:
172.                 if attr_name in meta_attrs:
173.                     setattr(self, attr_name, meta_attrs.pop(attr_name))
174.                     self.original_attrs[attr_name] = getattr(self, attr_name)
175.                 elif hasattr(self.meta, attr_name):
176.                     setattr(self, attr_name, getattr(self.meta, attr_name))
177.                     self.original_attrs[attr_name] = getattr(self, attr_name)
178. 
179.             self.unique_together = normalize_together(self.unique_together)
180.             self.index_together = normalize_together(self.index_together)
181.             # App label/class name interpolation for names of constraints and
182.             # indexes.
183.             if not getattr(cls._meta, 'abstract', False):
184.                 for attr_name in {'constraints', 'indexes'}:
185.                     objs = getattr(self, attr_name, [])
186.                     setattr(self, attr_name, self._format_names_with_class(cls, objs))
187. 
188.             # verbose_name_plural is a special case because it uses a 's'
189.             # by default.
190.             if self.verbose_name_plural is None:
191.                 self.verbose_name_plural = format_lazy('{}s', self.verbose_name)
192. 
193.             # order_with_respect_and ordering are mutually exclusive.
194.             self._ordering_clash = bool(self.ordering and self.order_with_respect_to)
195. 
196.             # Any leftover attributes must be invalid.
197.             if meta_attrs != {}:
198.                 raise TypeError("'class Meta' got invalid attribute(s): %s" % ','.join(meta_attrs))
199.         else:
200.             self.verbose_name_plural = format_lazy('{}s', self.verbose_name)
201.         del self.meta
202. 
203.         # If the db_table wasn't provided, use the app_label + model_name.
204.         if not self.db_table:
205.             self.db_table = "%s_%s" % (self.app_label, self.model_name)
206.             self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())
207. 
208.     def _format_names_with_class(self, cls, objs):
209.         """App label/class name interpolation for object names."""
210.         new_objs = []
211.         for obj in objs:
212.             obj = obj.clone()
213.             obj.name = obj.name % {
214.                 'app_label': cls._meta.app_label.lower(),
215.                 'class': cls.__name__.lower(),
216.             }
217.             new_objs.append(obj)
218.         return new_objs
219. 
220.     def _prepare(self, model):
221.         if self.order_with_respect_to:
222.             # The app registry will not be ready at this point, so we cannot
223.             # use get_field().
224.             query = self.order_with_respect_to
225.             try:
226.                 self.order_with_respect_to = next(
227.                     f for f in self._get_fields(reverse=False)
228.                     if f.name == query or f.attname == query
229.                 )
230.             except StopIteration:
231.                 raise FieldDoesNotExist("%s has no field named '%s'" % (self.object_name, query))
232. 
233.             self.ordering = ('_order',)
234.             if not any(isinstance(field, OrderWrt) for field in model._meta.local_fields):
235.                 model.add_to_class('_order', OrderWrt())
236.         else:
237.             self.order_with_respect_to = None
238. 
239.         if self.pk is None:
240.             if self.parents:
241.                 # Promote the first parent link in lieu of adding yet another
242.                 # field.
243.                 field = next(iter(self.parents.values()))
244.                 # Look for a local field with the same name as the
245.                 # first parent link. If a local field has already been
246.                 # created, use it instead of promoting the parent
247.                 already_created = [fld for fld in self.local_fields if fld.name == field.name]
248.                 if already_created:
249.                     field = already_created[0]
250.                 field.primary_key = True
251.                 self.setup_pk(field)
252.             else:
253.                 auto = AutoField(verbose_name='ID', primary_key=True, auto_created=True)
254.                 model.add_to_class('id', auto)
255. 
256.     def add_manager(self, manager):
257.         self.local_managers.append(manager)
258.         self._expire_cache()
259. 
260.     def add_field(self, field, private=False):
261.         # Insert the given field in the order in which it was created, using
262.         # the "creation_counter" attribute of the field.
263.         # Move many-to-many related fields from self.fields into
264.         # self.many_to_many.
265.         if private:
266.             self.private_fields.append(field)
267.         elif field.is_relation and field.many_to_many:
268.             bisect.insort(self.local_many_to_many, field)
269.         else:
270.             bisect.insort(self.local_fields, field)
271.             self.setup_pk(field)
272. 
273.         # If the field being added is a relation to another known field,
274.         # expire the cache on this field and the forward cache on the field
275.         # being referenced, because there will be new relationships in the
276.         # cache. Otherwise, expire the cache of references *to* this field.
277.         # The mechanism for getting at the related model is slightly odd -
278.         # ideally, we'd just ask for field.related_model. However, related_model
279.         # is a cached property, and all the models haven't been loaded yet, so
280.         # we need to make sure we don't cache a string reference.
281.         if field.is_relation and hasattr(field.remote_field, 'model') and field.remote_field.model:
282.             try:
283.                 field.remote_field.model._meta._expire_cache(forward=False)
284.             except AttributeError:
285.                 pass
286.             self._expire_cache()
287.         else:
288.             self._expire_cache(reverse=False)
289. 
290.     def setup_pk(self, field):
291.         if not self.pk and field.primary_key:
292.             self.pk = field
293.             field.serialize = False
294. 
295.     def setup_proxy(self, target):
296.         """
297.         Do the internal setup so that the current model is a proxy for
298.         "target".
299.         """
300.         self.pk = target._meta.pk
301.         self.proxy_for_model = target
302.         self.db_table = target._meta.db_table
303. 
304.     def __repr__(self):
305.         return '<Options for %s>' % self.object_name
306. 
307.     def __str__(self):
308.         return self.label_lower
309. 
310.     def can_migrate(self, connection):
311.         """
312.         Return True if the model can/should be migrated on the `connection`.
313.         `connection` can be either a real connection or a connection alias.
314.         """
315.         if self.proxy or self.swapped or not self.managed:
316.             return False
317.         if isinstance(connection, str):
318.             connection = connections[connection]
319.         if self.required_db_vendor:
320.             return self.required_db_vendor == connection.vendor
321.         if self.required_db_features:
322.             return all(getattr(connection.features, feat, False)
323.                        for feat in self.required_db_features)
324.         return True
325. 
326.     @property
327.     def verbose_name_raw(self):
328.         """Return the untranslated verbose name."""
329.         with override(None):
330.             return str(self.verbose_name)
331. 
332.     @property
333.     def swapped(self):
334.         """
335.         Has this model been swapped out for another? If so, return the model
336.         name of the replacement; otherwise, return None.
337. 
338.         For historical reasons, model name lookups using get_model() are
339.         case insensitive, so we make sure we are case insensitive here.
340.         """
341.         if self.swappable:
342.             swapped_for = getattr(settings, self.swappable, None)
343.             if swapped_for:
344.                 try:
345.                     swapped_label, swapped_object = swapped_for.split('.')
346.                 except ValueError:
347.                     # setting not in the format app_label.model_name
348.                     # raising ImproperlyConfigured here causes problems with
349.                     # test cleanup code - instead it is raised in get_user_model
350.                     # or as part of validation.
351.                     return swapped_for
352. 
353.                 if '%s.%s' % (swapped_label, swapped_object.lower()) != self.label_lower:
354.                     return swapped_for
355.         return None
356. 
357.     @cached_property
358.     def managers(self):
359.         managers = []
360.         seen_managers = set()
361.         bases = (b for b in self.model.mro() if hasattr(b, '_meta'))
362.         for depth, base in enumerate(bases):
363.             for manager in base._meta.local_managers:
364.                 if manager.name in seen_managers:
365.                     continue
366. 
367.                 manager = copy.copy(manager)
368.                 manager.model = self.model
369.                 seen_managers.add(manager.name)
370.                 managers.append((depth, manager.creation_counter, manager))
371. 
372.         return make_immutable_fields_list(
373.             "managers",
374.             (m[2] for m in sorted(managers)),
375.         )
376. 
377.     @cached_property
378.     def managers_map(self):
379.         return {manager.name: manager for manager in self.managers}
380. 
381.     @cached_property
382.     def base_manager(self):
383.         base_manager_name = self.base_manager_name
384.         if not base_manager_name:
385.             # Get the first parent's base_manager_name if there's one.
386.             for parent in self.model.mro()[1:]:
387.                 if hasattr(parent, '_meta'):
388.                     if parent._base_manager.name != '_base_manager':
389.                         base_manager_name = parent._base_manager.name
390.                     break
391. 
392.         if base_manager_name:
393.             try:
394.                 return self.managers_map[base_manager_name]
395.             except KeyError:
396.                 raise ValueError(
397.                     "%s has no manager named %r" % (
398.                         self.object_name,
399.                         base_manager_name,
400.                     )
401.                 )
402. 
403.         manager = Manager()
404.         manager.name = '_base_manager'
405.         manager.model = self.model
406.         manager.auto_created = True
407.         return manager
408. 
409.     @cached_property
410.     def default_manager(self):
411.         default_manager_name = self.default_manager_name
412.         if not default_manager_name and not self.local_managers:
413.             # Get the first parent's default_manager_name if there's one.
414.             for parent in self.model.mro()[1:]:
415.                 if hasattr(parent, '_meta'):
416.                     default_manager_name = parent._meta.default_manager_name
417.                     break
418. 
419.         if default_manager_name:
420.             try:
421.                 return self.managers_map[default_manager_name]
422.             except KeyError:
423.                 raise ValueError(
424.                     "%s has no manager named %r" % (
425.                         self.object_name,
426.                         default_manager_name,
427.                     )
428.                 )
429. 
430.         if self.managers:
431.             return self.managers[0]
432. 
433.     @cached_property
434.     def fields(self):
435.         """
436.         Return a list of all forward fields on the model and its parents,
437.         excluding ManyToManyFields.
438. 
439.         Private API intended only to be used by Django itself; get_fields()
440.         combined with filtering of field properties is the public API for
441.         obtaining this field list.
442.         """
443.         # For legacy reasons, the fields property should only contain forward
444.         # fields that are not private or with a m2m cardinality. Therefore we
445.         # pass these three filters as filters to the generator.
446.         # The third lambda is a longwinded way of checking f.related_model - we don't
447.         # use that property directly because related_model is a cached property,
448.         # and all the models may not have been loaded yet; we don't want to cache
449.         # the string reference to the related_model.
450.         def is_not_an_m2m_field(f):
451.             return not (f.is_relation and f.many_to_many)
452. 
453.         def is_not_a_generic_relation(f):
454.             return not (f.is_relation and f.one_to_many)
455. 
456.         def is_not_a_generic_foreign_key(f):
457.             return not (
458.                 f.is_relation and f.many_to_one and not (hasattr(f.remote_field, 'model') and f.remote_field.model)
459.             )
460. 
461.         return make_immutable_fields_list(
462.             "fields",
463.             (f for f in self._get_fields(reverse=False)
464.              if is_not_an_m2m_field(f) and is_not_a_generic_relation(f) and is_not_a_generic_foreign_key(f))
465.         )
466. 
467.     @cached_property
468.     def concrete_fields(self):
469.         """
470.         Return a list of all concrete fields on the model and its parents.
471. 
472.         Private API intended only to be used by Django itself; get_fields()
473.         combined with filtering of field properties is the public API for
474.         obtaining this field list.
475.         """
476.         return make_immutable_fields_list(
477.             "concrete_fields", (f for f in self.fields if f.concrete)
478.         )
479. 
480.     @cached_property
481.     def local_concrete_fields(self):
482.         """
483.         Return a list of all concrete fields on the model.
484. 
485.         Private API intended only to be used by Django itself; get_fields()
486.         combined with filtering of field properties is the public API for
487.         obtaining this field list.
488.         """
489.         return make_immutable_fields_list(
490.             "local_concrete_fields", (f for f in self.local_fields if f.concrete)
491.         )
492. 
493.     @cached_property
494.     def many_to_many(self):
495.         """
496.         Return a list of all many to many fields on the model and its parents.
497. 
498.         Private API intended only to be used by Django itself; get_fields()
499.         combined with filtering of field properties is the public API for
500.         obtaining this list.


File: django/db/models/options.py
Line number range: 63 - 862
Content:
class Options:
    FORWARD_PROPERTIES = {
        'fields', 'many_to_many', 'concrete_fields', 'local_concrete_fields',
        '_forward_fields_map', 'managers', 'managers_map', 'base_manager',
        'default_manager',
    }
    REVERSE_PROPERTIES = {'related_objects', 'fields_map', '_relation_tree'}

    default_apps = apps

    def __init__(self, meta, app_label=None):
        self._get_fields_cache = {}
        self.local_fields = []
        self.local_many_to_many = []
        self.private_fields = []
        self.local_managers = []
        self.base_manager_name = None
        self.default_manager_name = None
        self.model_name = None
        self.verbose_name = None
        self.verbose_name_plural = None
        self.db_table = ''
        self.ordering = []
        self._ordering_clash = False
        self.indexes = []
        self.constraints = []
        self.unique_together = []
        self.index_together = []
        self.select_on_save = False
        self.default_permissions = ('add', 'change', 'delete', 'view')
        self.permissions = []
        self.object_name = None
        self.app_label = app_label
        self.get_latest_by = None
        self.order_with_respect_to = None
        self.db_tablespace = settings.DEFAULT_TABLESPACE
        self.required_db_features = []
        self.required_db_vendor = None
        self.meta = meta
        self.pk = None
        self.auto_field = None
        self.abstract = False
        self.managed = True
        self.proxy = False
        # For any class that is a proxy (including automatically created
        # classes for deferred object loading), proxy_for_model tells us
        # which class this model is proxying. Note that proxy_for_model
        # can create a chain of proxy models. For non-proxy models, the
        # variable is always None.
        self.proxy_for_model = None
        # For any non-abstract class, the concrete class is the model
        # in the end of the proxy_for_model chain. In particular, for
        # concrete models, the concrete_model is always the class itself.
        self.concrete_model = None
        self.swappable = None
        self.parents = {}
        self.auto_created = False

        # List of all lookups defined in ForeignKey 'limit_choices_to' options
        # from *other* models. Needed for some admin checks. Internal use only.
        self.related_fkey_lookups = []

        # A custom app registry to use, if you're making a separate model set.
        self.apps = self.default_apps

        self.default_related_name = None

    @property
    def label(self):
        return '%s.%s' % (self.app_label, self.object_name)

    @property
    def label_lower(self):
        return '%s.%s' % (self.app_label, self.model_name)

    @property
    def app_config(self):
        # Don't go through get_app_config to avoid triggering imports.
        return self.apps.app_configs.get(self.app_label)

    @property
    def installed(self):
        return self.app_config is not None

    def contribute_to_class(self, cls, name):
        from django.db import connection
        from django.db.backends.utils import truncate_name

        cls._meta = self
        self.model = cls
        # First, construct the default values for these options.
        self.object_name = cls.__name__
        self.model_name = self.object_name.lower()
        self.verbose_name = camel_case_to_spaces(self.object_name)

        # Store the original user-defined values for each option,
        # for use when serializing the model definition
        self.original_attrs = {}

        # Next, apply any overridden values from 'class Meta'.
        if self.meta:
            meta_attrs = self.meta.__dict__.copy()
            for name in self.meta.__dict__:
                # Ignore any private attributes that Django doesn't care about.
                # NOTE: We can't modify a dictionary's contents while looping
                # over it, so we loop over the *original* dictionary instead.
                if name.startswith('_'):
                    del meta_attrs[name]
            for attr_name in DEFAULT_NAMES:
                if attr_name in meta_attrs:
                    setattr(self, attr_name, meta_attrs.pop(attr_name))
                    self.original_attrs[attr_name] = getattr(self, attr_name)
                elif hasattr(self.meta, attr_name):
                    setattr(self, attr_name, getattr(self.meta, attr_name))
                    self.original_attrs[attr_name] = getattr(self, attr_name)

            self.unique_together = normalize_together(self.unique_together)
            self.index_together = normalize_together(self.index_together)
            # App label/class name interpolation for names of constraints and
            # indexes.
            if not getattr(cls._meta, 'abstract', False):
                for attr_name in {'constraints', 'indexes'}:
                    objs = getattr(self, attr_name, [])
                    setattr(self, attr_name, self._format_names_with_class(cls, objs))

            # verbose_name_plural is a special case because it uses a 's'
            # by default.
            if self.verbose_name_plural is None:
                self.verbose_name_plural = format_lazy('{}s', self.verbose_name)

            # order_with_respect_and ordering are mutually exclusive.
            self._ordering_clash = bool(self.ordering and self.order_with_respect_to)

            # Any leftover attributes must be invalid.
            if meta_attrs != {}:
                raise TypeError("'class Meta' got invalid attribute(s): %s" % ','.join(meta_attrs))
        else:
            self.verbose_name_plural = format_lazy('{}s', self.verbose_name)
        del self.meta

        # If the db_table wasn't provided, use the app_label + model_name.
        if not self.db_table:
            self.db_table = "%s_%s" % (self.app_label, self.model_name)
            self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())

    def _format_names_with_class(self, cls, objs):
        """App label/class name interpolation for object names."""
        new_objs = []
        for obj in objs:
            obj = obj.clone()
            obj.name = obj.name % {
                'app_label': cls._meta.app_label.lower(),
                'class': cls.__name__.lower(),
            }
            new_objs.append(obj)
        return new_objs

    def _prepare(self, model):
        if self.order_with_respect_to:
            # The app registry will not be ready at this point, so we cannot
            # use get_field().
            query = self.order_with_respect_to
            try:
                self.order_with_respect_to = next(
                    f for f in self._get_fields(reverse=False)
                    if f.name == query or f.attname == query
                )
            except StopIteration:
                raise FieldDoesNotExist("%s has no field named '%s'" % (self.object_name, query))

            self.ordering = ('_order',)
            if not any(isinstance(field, OrderWrt) for field in model._meta.local_fields):
                model.add_to_class('_order', OrderWrt())
        else:
            self.order_with_respect_to = None

        if self.pk is None:
            if self.parents:
                # Promote the first parent link in lieu of adding yet another
                # field.
                field = next(iter(self.parents.values()))
                # Look for a local field with the same name as the
                # first parent link. If a local field has already been
                # created, use it instead of promoting the parent
                already_created = [fld for fld in self.local_fields if fld.name == field.name]
                if already_created:
                    field = already_created[0]
                field.primary_key = True
                self.setup_pk(field)
            else:
                auto = AutoField(verbose_name='ID', primary_key=True, auto_created=True)
                model.add_to_class('id', auto)

    def add_manager(self, manager):
        self.local_managers.append(manager)
        self._expire_cache()

    def add_field(self, field, private=False):
        # Insert the given field in the order in which it was created, using
        # the "creation_counter" attribute of the field.
        # Move many-to-many related fields from self.fields into
        # self.many_to_many.
        if private:
            self.private_fields.append(field)
        elif field.is_relation and field.many_to_many:
            bisect.insort(self.local_many_to_many, field)
        else:
            bisect.insort(self.local_fields, field)
            self.setup_pk(field)

        # If the field being added is a relation to another known field,
        # expire the cache on this field and the forward cache on the field
        # being referenced, because there will be new relationships in the
        # cache. Otherwise, expire the cache of references *to* this field.
        # The mechanism for getting at the related model is slightly odd -
        # ideally, we'd just ask for field.related_model. However, related_model
        # is a cached property, and all the models haven't been loaded yet, so
        # we need to make sure we don't cache a string reference.
        if field.is_relation and hasattr(field.remote_field, 'model') and field.remote_field.model:
            try:
                field.remote_field.model._meta._expire_cache(forward=False)
            except AttributeError:
                pass
            self._expire_cache()
        else:
            self._expire_cache(reverse=False)

    def setup_pk(self, field):
        if not self.pk and field.primary_key:
            self.pk = field
            field.serialize = False

    def setup_proxy(self, target):
        """
        Do the internal setup so that the current model is a proxy for
        "target".
        """
        self.pk = target._meta.pk
        self.proxy_for_model = target
        self.db_table = target._meta.db_table

    def __repr__(self):
        return '<Options for %s>' % self.object_name

    def __str__(self):
        return self.label_lower

    def can_migrate(self, connection):
        """
        Return True if the model can/should be migrated on the `connection`.
        `connection` can be either a real connection or a connection alias.
        """
        if self.proxy or self.swapped or not self.managed:
            return False
        if isinstance(connection, str):
            connection = connections[connection]
        if self.required_db_vendor:
            return self.required_db_vendor == connection.vendor
        if self.required_db_features:
            return all(getattr(connection.features, feat, False)
                       for feat in self.required_db_features)
        return True

    @property
    def verbose_name_raw(self):
        """Return the untranslated verbose name."""
        with override(None):
            return str(self.verbose_name)

    @property
    def swapped(self):
        """
        Has this model been swapped out for another? If so, return the model
        name of the replacement; otherwise, return None.

        For historical reasons, model name lookups using get_model() are
        case insensitive, so we make sure we are case insensitive here.
        """
        if self.swappable:
            swapped_for = getattr(settings, self.swappable, None)
            if swapped_for:
                try:
                    swapped_label, swapped_object = swapped_for.split('.')
                except ValueError:
                    # setting not in the format app_label.model_name
                    # raising ImproperlyConfigured here causes problems with
                    # test cleanup code - instead it is raised in get_user_model
                    # or as part of validation.
                    return swapped_for

                if '%s.%s' % (swapped_label, swapped_object.lower()) != self.label_lower:
                    return swapped_for
        return None

    @cached_property
    def managers(self):
        managers = []
        seen_managers = set()
        bases = (b for b in self.model.mro() if hasattr(b, '_meta'))
        for depth, base in enumerate(bases):
            for manager in base._meta.local_managers:
                if manager.name in seen_managers:
                    continue

                manager = copy.copy(manager)
                manager.model = self.model
                seen_managers.add(manager.name)
                managers.append((depth, manager.creation_counter, manager))

        return make_immutable_fields_list(
            "managers",
            (m[2] for m in sorted(managers)),
        )

    @cached_property
    def managers_map(self):
        return {manager.name: manager for manager in self.managers}

    @cached_property
    def base_manager(self):
        base_manager_name = self.base_manager_name
        if not base_manager_name:
            # Get the first parent's base_manager_name if there's one.
            for parent in self.model.mro()[1:]:
                if hasattr(parent, '_meta'):
                    if parent._base_manager.name != '_base_manager':
                        base_manager_name = parent._base_manager.name
                    break

        if base_manager_name:
            try:
                return self.managers_map[base_manager_name]
            except KeyError:
                raise ValueError(
                    "%s has no manager named %r" % (
                        self.object_name,
                        base_manager_name,
                    )
                )

        manager = Manager()
        manager.name = '_base_manager'
        manager.model = self.model
        manager.auto_created = True
        return manager

    @cached_property
    def default_manager(self):
        default_manager_name = self.default_manager_name
        if not default_manager_name and not self.local_managers:
            # Get the first parent's default_manager_name if there's one.
            for parent in self.model.mro()[1:]:
                if hasattr(parent, '_meta'):
                    default_manager_name = parent._meta.default_manager_name
                    break

        if default_manager_name:
            try:
                return self.managers_map[default_manager_name]
            except KeyError:
                raise ValueError(
                    "%s has no manager named %r" % (
                        self.object_name,
                        default_manager_name,
                    )
                )

        if self.managers:
            return self.managers[0]

    @cached_property
    def fields(self):
        """
        Return a list of all forward fields on the model and its parents,
        excluding ManyToManyFields.

        Private API intended only to be used by Django itself; get_fields()
        combined with filtering of field properties is the public API for
        obtaining this field list.
        """
        # For legacy reasons, the fields property should only contain forward
        # fields that are not private or with a m2m cardinality. Therefore we
        # pass these three filters as filters to the generator.
        # The third lambda is a longwinded way of checking f.related_model - we don't
        # use that property directly because related_model is a cached property,
        # and all the models may not have been loaded yet; we don't want to cache
        # the string reference to the related_model.
        def is_not_an_m2m_field(f):
            return not (f.is_relation and f.many_to_many)

        def is_not_a_generic_relation(f):
            return not (f.is_relation and f.one_to_many)

        def is_not_a_generic_foreign_key(f):
            return not (
                f.is_relation and f.many_to_one and not (hasattr(f.remote_field, 'model') and f.remote_field.model)
            )

        return make_immutable_fields_list(
            "fields",
            (f for f in self._get_fields(reverse=False)
             if is_not_an_m2m_field(f) and is_not_a_generic_relation(f) and is_not_a_generic_foreign_key(f))
        )

    @cached_property
    def concrete_fields(self):
        """
        Return a list of all concrete fields on the model and its parents.

        Private API intended only to be used by Django itself; get_fields()
        combined with filtering of field properties is the public API for
        obtaining this field list.
        """
        return make_immutable_fields_list(
            "concrete_fields", (f for f in self.fields if f.concrete)
        )

    @cached_property
    def local_concrete_fields(self):
        """
        Return a list of all concrete fields on the model.

        Private API intended only to be used by Django itself; get_fields()
        combined with filtering of field properties is the public API for
        obtaining this field list.
        """
        return make_immutable_fields_list(
            "local_concrete_fields", (f for f in self.local_fields if f.concrete)
        )

    @cached_property
    def many_to_many(self):
        """
        Return a list of all many to many fields on the model and its parents.

        Private API intended only to be used by Django itself; get_fields()
        combined with filtering of field properties is the public API for
        obtaining this list.
        """
        return make_immutable_fields_list(
            "many_to_many",
            (f for f in self._get_fields(reverse=False) if f.is_relation and f.many_to_many)
        )

    @cached_property
    def related_objects(self):
        """
        Return all related objects pointing to the current model. The related
        objects can come from a one-to-one, one-to-many, or many-to-many field
        relation type.

        Private API intended only to be used by Django itself; get_fields()
        combined with filtering of field properties is the public API for
        obtaining this field list.
        """
        all_related_fields = self._get_fields(forward=False, reverse=True, include_hidden=True)
        return make_immutable_fields_list(
            "related_objects",
            (obj for obj in all_related_fields if not obj.hidden or obj.field.many_to_many)
        )

    @cached_property
    def _forward_fields_map(self):
        res = {}
        fields = self._get_fields(reverse=False)
        for field in fields:
            res[field.name] = field
            # Due to the way Django's internals work, get_field() should also
            # be able to fetch a field by attname. In the case of a concrete
            # field with relation, includes the *_id name too
            try:
                res[field.attname] = field
            except AttributeError:
                pass
        return res

    @cached_property
    def fields_map(self):
        res = {}
        fields = self._get_fields(forward=False, include_hidden=True)
        for field in fields:
            res[field.name] = field
            # Due to the way Django's internals work, get_field() should also
            # be able to fetch a field by attname. In the case of a concrete
            # field with relation, includes the *_id name too
            try:
                res[field.attname] = field
            except AttributeError:
                pass
        return res

    def get_field(self, field_name):
        """
        Return a field instance given the name of a forward or reverse field.
        """
        try:
            # In order to avoid premature loading of the relation tree
            # (expensive) we prefer checking if the field is a forward field.
            return self._forward_fields_map[field_name]
        except KeyError:
            # If the app registry is not ready, reverse fields are
            # unavailable, therefore we throw a FieldDoesNotExist exception.
            if not self.apps.models_ready:
                raise FieldDoesNotExist(
                    "%s has no field named '%s'. The app cache isn't ready yet, "
                    "so if this is an auto-created related field, it won't "
                    "be available yet." % (self.object_name, field_name)
                )

        try:
            # Retrieve field instance by name from cached or just-computed
            # field map.
            return self.fields_map[field_name]
        except KeyError:
            raise FieldDoesNotExist("%s has no field named '%s'" % (self.object_name, field_name))

    def get_base_chain(self, model):
        """
        Return a list of parent classes leading to `model` (ordered from
        closest to most distant ancestor). This has to handle the case where
        `model` is a grandparent or even more distant relation.
        """
        if not self.parents:
            return []
        if model in self.parents:
            return [model]
        for parent in self.parents:
            res = parent._meta.get_base_chain(model)
            if res:
                res.insert(0, parent)
                return res
        return []

    def get_parent_list(self):
        """
        Return all the ancestors of this model as a list ordered by MRO.
        Useful for determining if something is an ancestor, regardless of lineage.
        """
        result = OrderedSet(self.parents)
        for parent in self.parents:
            for ancestor in parent._meta.get_parent_list():
                result.add(ancestor)
        return list(result)

    def get_ancestor_link(self, ancestor):
        """
        Return the field on the current model which points to the given
        "ancestor". This is possible an indirect link (a pointer to a parent
        model, which points, eventually, to the ancestor). Used when
        constructing table joins for model inheritance.

        Return None if the model isn't an ancestor of this one.
        """
        if ancestor in self.parents:
            return self.parents[ancestor]
        for parent in self.parents:
            # Tries to get a link field from the immediate parent
            parent_link = parent._meta.get_ancestor_link(ancestor)
            if parent_link:
                # In case of a proxied model, the first link
                # of the chain to the ancestor is that parent
                # links
                return self.parents[parent] or parent_link

    def get_path_to_parent(self, parent):
        """
        Return a list of PathInfos containing the path from the current
        model to the parent model, or an empty list if parent is not a
        parent of the current model.
        """
        if self.model is parent:
            return []
        # Skip the chain of proxy to the concrete proxied model.
        proxied_model = self.concrete_model
        path = []
        opts = self
        for int_model in self.get_base_chain(parent):
            if int_model is proxied_model:
                opts = int_model._meta
            else:
                final_field = opts.parents[int_model]
                targets = (final_field.remote_field.get_related_field(),)
                opts = int_model._meta
                path.append(PathInfo(
                    from_opts=final_field.model._meta,
                    to_opts=opts,
                    target_fields=targets,
                    join_field=final_field,
                    m2m=False,
                    direct=True,
                    filtered_relation=None,
                ))
        return path

    def get_path_from_parent(self, parent):
        """
        Return a list of PathInfos containing the path from the parent
        model to the current model, or an empty list if parent is not a
        parent of the current model.
        """
        if self.model is parent:
            return []
        model = self.concrete_model
        # Get a reversed base chain including both the current and parent
        # models.
        chain = model._meta.get_base_chain(parent)
        chain.reverse()
        chain.append(model)
        # Construct a list of the PathInfos between models in chain.
        path = []
        for i, ancestor in enumerate(chain[:-1]):
            child = chain[i + 1]
            link = child._meta.get_ancestor_link(ancestor)
            path.extend(link.get_reverse_path_info())
        return path

    def _populate_directed_relation_graph(self):
        """
        This method is used by each model to find its reverse objects. As this
        method is very expensive and is accessed frequently (it looks up every
        field in a model, in every app), it is computed on first access and then
        is set as a property on every model.
        """
        related_objects_graph = defaultdict(list)

        all_models = self.apps.get_models(include_auto_created=True)
        for model in all_models:
            opts = model._meta
            # Abstract model's fields are copied to child models, hence we will
            # see the fields from the child models.
            if opts.abstract:
                continue
            fields_with_relations = (
                f for f in opts._get_fields(reverse=False, include_parents=False)
                if f.is_relation and f.related_model is not None
            )
            for f in fields_with_relations:
                if not isinstance(f.remote_field.model, str):
                    remote_label = f.remote_field.model._meta.concrete_model._meta.label
                    related_objects_graph[remote_label].append(f)

        for model in all_models:
            # Set the relation_tree using the internal __dict__. In this way
            # we avoid calling the cached property. In attribute lookup,
            # __dict__ takes precedence over a data descriptor (such as
            # @cached_property). This means that the _meta._relation_tree is
            # only called if related_objects is not in __dict__.
            related_objects = related_objects_graph[model._meta.concrete_model._meta.label]
            model._meta.__dict__['_relation_tree'] = related_objects
        # It seems it is possible that self is not in all_models, so guard
        # against that with default for get().
        return self.__dict__.get('_relation_tree', EMPTY_RELATION_TREE)

    @cached_property
    def _relation_tree(self):
        return self._populate_directed_relation_graph()

    def _expire_cache(self, forward=True, reverse=True):
        # This method is usually called by apps.cache_clear(), when the
        # registry is finalized, or when a new field is added.
        if forward:
            for cache_key in self.FORWARD_PROPERTIES:
                if cache_key in self.__dict__:
                    delattr(self, cache_key)
        if reverse and not self.abstract:
            for cache_key in self.REVERSE_PROPERTIES:
                if cache_key in self.__dict__:
                    delattr(self, cache_key)
        self._get_fields_cache = {}

    def get_fields(self, include_parents=True, include_hidden=False):
        """
        Return a list of fields associated to the model. By default, include
        forward and reverse fields, fields derived from inheritance, but not
        hidden fields. The returned fields can be changed using the parameters:

        - include_parents: include fields derived from inheritance
        - include_hidden:  include fields that have a related_name that
                           starts with a "+"
        """
        if include_parents is False:
            include_parents = PROXY_PARENTS
        return self._get_fields(include_parents=include_parents, include_hidden=include_hidden)

    def _get_fields(self, forward=True, reverse=True, include_parents=True, include_hidden=False,
                    seen_models=None):
        """
        Internal helper function to return fields of the model.
        * If forward=True, then fields defined on this model are returned.
        * If reverse=True, then relations pointing to this model are returned.
        * If include_hidden=True, then fields with is_hidden=True are returned.
        * The include_parents argument toggles if fields from parent models
          should be included. It has three values: True, False, and
          PROXY_PARENTS. When set to PROXY_PARENTS, the call will return all
          fields defined for the current model or any of its parents in the
          parent chain to the model's concrete model.
        """
        if include_parents not in (True, False, PROXY_PARENTS):
            raise TypeError("Invalid argument for include_parents: %s" % (include_parents,))
        # This helper function is used to allow recursion in ``get_fields()``
        # implementation and to provide a fast way for Django's internals to
        # access specific subsets of fields.

        # We must keep track of which models we have already seen. Otherwise we
        # could include the same field multiple times from different models.
        topmost_call = seen_models is None
        if topmost_call:
            seen_models = set()
        seen_models.add(self.model)

        # Creates a cache key composed of all arguments
        cache_key = (forward, reverse, include_parents, include_hidden, topmost_call)

        try:
            # In order to avoid list manipulation. Always return a shallow copy
            # of the results.
            return self._get_fields_cache[cache_key]
        except KeyError:
            pass

        fields = []
        # Recursively call _get_fields() on each parent, with the same
        # options provided in this call.
        if include_parents is not False:
            for parent in self.parents:
                # In diamond inheritance it is possible that we see the same
                # model from two different routes. In that case, avoid adding
                # fields from the same parent again.
                if parent in seen_models:
                    continue
                if (parent._meta.concrete_model != self.concrete_model and
                        include_parents == PROXY_PARENTS):
                    continue
                for obj in parent._meta._get_fields(
                        forward=forward, reverse=reverse, include_parents=include_parents,
                        include_hidden=include_hidden, seen_models=seen_models):
                    if not getattr(obj, 'parent_link', False) or obj.model == self.concrete_model:
                        fields.append(obj)
        if reverse and not self.proxy:
            # Tree is computed once and cached until the app cache is expired.
            # It is composed of a list of fields pointing to the current model
            # from other models.
            all_fields = self._relation_tree
            for field in all_fields:
                # If hidden fields should be included or the relation is not
                # intentionally hidden, add to the fields dict.
                if include_hidden or not field.remote_field.hidden:
                    fields.append(field.remote_field)

        if forward:
            fields += self.local_fields
            fields += self.local_many_to_many
            # Private fields are recopied to each child model, and they get a
            # different model as field.model in each child. Hence we have to
            # add the private fields separately from the topmost call. If we
            # did this recursively similar to local_fields, we would get field
            # instances with field.model != self.model.
            if topmost_call:
                fields += self.private_fields

        # In order to avoid list manipulation. Always
        # return a shallow copy of the results
        fields = make_immutable_fields_list("get_fields()", fields)

        # Store result into cache for later access
        self._get_fields_cache[cache_key] = fields
        return fields

    @cached_property
    def total_unique_constraints(self):
        """
        Return a list of total unique constraints. Useful for determining set
        of fields guaranteed to be unique for all rows.
        """
        return [
            constraint
            for constraint in self.constraints
            if isinstance(constraint, UniqueConstraint) and constraint.condition is None
        ]

    @cached_property
    def _property_names(self):
        """Return a set of the names of the properties defined on the model."""
        names = []
        for name in dir(self.model):
            attr = inspect.getattr_static(self.model, name)
            if isinstance(attr, property):
                names.append(name)
        return frozenset(names)

    @cached_property
    def db_returning_fields(self):
        """
        Private API intended only to be used by Django itself.
        Fields to be returned after a database insert.
        """
        return [
            field for field in self._get_fields(forward=True, reverse=False, include_parents=PROXY_PARENTS)
            if getattr(field, 'db_returning', False)
        ]

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-22 16:48:42,767 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants to understand the `get_field` method and the `total_unique_constraints` property.\n2. Extended relevance:\n   - This context provides the import for `FieldDoesNotExist`, an exception raised by `get_field`.\n   - It also imports `UniqueConstraint`, which is fundamental to the `total_unique_constraints` property's logic.", relative_path='django/db/models/options.py', start_line=8, end_line=10), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user wants to understand how `total_unique_constraints` is constructed.\n2. Extended relevance:\n   - This context defines the `Options` class and its `__init__` method, where `self.constraints` is initialized as an empty list. This is the starting point for the data used in `total_unique_constraints`.', relative_path='django/db/models/options.py', start_line=63, end_line=89), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants to understand how `total_unique_constraints` is constructed.\n2. Extended relevance:\n   - This snippet from the `contribute_to_class` method shows how the `self.constraints` list is populated from the model's `Meta` options. This is a critical step before `total_unique_constraints` can be calculated.", relative_path='django/db/models/options.py', start_line=182, end_line=187), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asked for the `get_field` method.\n2. Extended relevance:\n   - This context provides the definition of the `get_field` method. To give a complete picture of its operation, it also includes the `_forward_fields_map` and `fields_map` properties, which are its direct dependencies for resolving field names.', relative_path='django/db/models/options.py', start_line=568, end_line=621), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user wants to understand how `get_field` works.\n2. Extended relevance:\n   - This context provides the `_get_fields` helper method. This method is the core of field discovery in a model and is called by the `_forward_fields_map` and `fields_map` properties that `get_field` relies on. Understanding this method is crucial for a deep understanding of `get_field`.', relative_path='django/db/models/options.py', start_line=799, end_line=849), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asked for the `total_unique_constraints` property.\n2. Extended relevance:\n   - This context provides the exact implementation of the `total_unique_constraints` property, showing how it filters the model's constraints to return only unconditional unique constraints.", relative_path='django/db/models/options.py', start_line=850, end_line=858)]
2025-12-22 16:48:42,769 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 6 contexts to memory for query: Please provide the full content of `django/db/models/options.py`.
2025-12-22 16:48:42,769 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-22 16:48:42,769 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-22 16:48:42,770 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 6 new contexts to 3 existing contexts
2025-12-22 16:48:42,770 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 6 total contexts (removed 3 duplicates)
2025-12-22 16:48:42,771 - thread-137428148942528.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-22 16:48:42,771 - thread-137428148942528.prometheus_context_collector - INFO - Successfully retrieved 6 context snippets
