2025-12-21 12:30:25,376 - thread-136522258974400.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Updating an array passed as the xy parameter to annotate updates the anottation

Description: ### Bug report

**Bug summary**
When an array is used as the _xy_ kwarg for an annotation that includes arrows, changing the array after calling the function changes the arrow position. It is very likely that the same array is kept instead of a copy.

**Code for reproduction**


```python
fig = plt.figure("test")

ax = fig.add_axes([0.13, 0.15, .8, .8])
ax.set_xlim(-5, 5)
ax.set_ylim(-3, 3)

xy_0 =np.array((-4, 1))
xy_f =np.array((-1, 1))
# this annotation is messed by later changing the array passed as xy kwarg
ax.annotate(s='', xy=xy_0, xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3# <--this  updates the arrow position

xy_0 =np.array((1, 1))
xy_f =np.array((4, 1))
# using a copy of the array helps spoting where the problem is
ax.annotate(s='', xy=xy_0.copy(), xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3
```

**Actual outcome**

![bug](https://user-images.githubusercontent.com/45225345/83718413-5d656a80-a60b-11ea-8ef0-a1a18337de28.png)

**Expected outcome**
Both arrows should be horizontal

**Matplotlib version**
  * Operating system: Debian 9
  * Matplotlib version: '3.0.3'
  * Matplotlib backend: Qt5Agg
  * Python version:'3.5.3'
  * Jupyter version (if applicable):
  * Other libraries: Numpy 1.17.3

Matplotlib was installed using pip


Patch information:
diff --git a/lib/matplotlib/patches.py b/lib/matplotlib/patches.py
index 92dc55940b..bc41964e92 100644
--- a/lib/matplotlib/patches.py
+++ b/lib/matplotlib/patches.py
@@ -4147,7 +4147,7 @@ default: 'arc3'
         super().__init__(**kwargs)
 
         if posA is not None and posB is not None and path is None:
-            self._posA_posB = [posA, posB]
+            self._posA_posB = [tuple(posA), tuple(posB)]
 
             if connectionstyle is None:
                 connectionstyle = "arc3"
@@ -4183,9 +4183,9 @@ default: 'arc3'
             `None` use current value.
         """
         if posA is not None:
-            self._posA_posB[0] = posA
+            self._posA_posB[0] = tuple(posA)
         if posB is not None:
-            self._posA_posB[1] = posB
+            self._posA_posB[1] = tuple(posB)
         self.stale = True
 
     def set_patchA(self, patchA):
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index d4922fc517..2951122a51 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -1456,7 +1456,7 @@ class _AnnotationBase:
                  xycoords='data',
                  annotation_clip=None):
 
-        self.xy = xy
+        self.xy = tuple(xy)
         self.xycoords = xycoords
         self.set_annotation_clip(annotation_clip)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-21 12:30:25,446 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   ├── deploy-docs.sh
|   └── fetch_doc_logs.py
├── .devcontainer
|   └── setup.sh
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── cygwin.yml
|       ├── good-first-issue.yml
|       ├── mypy-stubtest.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       ├── stale.yml
|       └── tests.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   ├── codespell-ignore-words.txt
|   ├── export_sdist_name.py
|   └── mypy-stubtest-allowlist.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── image-rotator.js
|   |   ├── markers
|   |   ├── mpl.css
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   ├── autosummary_class_only.rst
|   |   ├── cheatsheet_sidebar.html
|   |   ├── donate_sidebar.html
|   |   ├── function.rst
|   |   ├── pagesource.html
|   |   ├── search.html
|   |   ├── sections
|   |   |   └── announcement.html
|   |   ├── sidebar_announcement.html
|   |   └── sidebar_versions.html
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24661-AAMW.rst
|   |   |   |   ├── 25044-YI.rst
|   |   |   |   ├── 25061-DS.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25112-GG.rst
|   |   |   |   ├── 25192-DS.rst
|   |   |   |   ├── 25247-AL.rst
|   |   |   |   ├── 25255-RR.rst
|   |   |   |   ├── 25361-TAC.rst
|   |   |   |   ├── 25456-AL.rst
|   |   |   |   ├── 25697-AL.rst
|   |   |   |   ├── 25775-HZ.rst
|   |   |   |   ├── 26096-GL.rst
|   |   |   |   └── 26164-OG.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23200-OG.rst
|   |   |   |   ├── 24312-AL.rst
|   |   |   |   ├── 24913-AL.rst
|   |   |   |   ├── 24985-OG.rst
|   |   |   |   ├── 24990-OG.rst
|   |   |   |   ├── 25027-GL.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25138-AL.rst
|   |   |   |   ├── 25247-AL.rst
|   |   |   |   ├── 25282-AL.rst
|   |   |   |   ├── 25352-GL.rst
|   |   |   |   ├── 25427-AL.rst
|   |   |   |   ├── 25469-AL.rst
|   |   |   |   ├── 25484-AL.rst
|   |   |   |   ├── 25557-AL.rst
|   |   |   |   ├── 25559-AL.rst
|   |   |   |   ├── 25584-KS.rst
|   |   |   |   ├── 25588-KS.rst
|   |   |   |   ├── 25651-REC.rst
|   |   |   |   ├── 25708-AL.rst
|   |   |   |   ├── 25728-OG.rst
|   |   |   |   ├── 25742-ES.rst
|   |   |   |   ├── 25774-AL.rst
|   |   |   |   ├── 25781-AL.rst
|   |   |   |   ├── 25841-AL.rst
|   |   |   |   ├── 25859-ES.rst
|   |   |   |   ├── 25889-AL.rst
|   |   |   |   ├── 26056-OG.rst
|   |   |   |   ├── 26190-AL.rst
|   |   |   |   ├── 26241-AL.rst
|   |   |   |   ├── 26294-AL.rst
|   |   |   |   ├── 26295-AL.rst
|   |   |   |   ├── 26329-AL.rst
|   |   |   |   ├── 26399-REC.rst
|   |   |   |   ├── 26444-ES.rst
|   |   |   |   └── 26780-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24919-KS.rst
|   |   |   |   ├── 24976-KS.rst
|   |   |   |   ├── 25363-OG.rst
|   |   |   |   └── 25475-ES.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24923-ES.rst
|   |   |       ├── 24942-OG.rst
|   |   |       ├── 24984-OG.rst
|   |   |       ├── 25456-AL.rst
|   |   |       ├── 25584-KS.rst
|   |   |       └── 25648-TS.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.6.0.rst
|   |   |   ├── api_changes_3.6.1.rst
|   |   |   ├── api_changes_3.7.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.7.0.rst
|   |   ├── projections
|   |   |   ├── geo.rst
|   |   |   └── polar.rst
|   |   ├── projections_api.rst
|   |   ├── pylab.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_figmpl_directive_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── typing_api.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contribute.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── document.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_axis_positions.rst
|       |   ├── 3d_hover_coordinates.rst
|       |   ├── 3d_plots_shareview.rst
|       |   ├── README.rst
|       |   ├── antialiasing_text_annotation.rst
|       |   ├── auto_minor_tick.rst
|       |   ├── axline_setters.rst
|       |   ├── boldsym_mathtext.rst
|       |   ├── contour_clip_path.rst
|       |   ├── ecdf.rst
|       |   ├── get_suptitle.rst
|       |   ├── get_vertices_co_vertices.rst
|       |   ├── legend_shadow_colors.rst
|       |   ├── macosx_windows_tabs.rst
|       |   ├── mathtext_delimiters.rst
|       |   ├── mathtext_features.rst
|       |   ├── mathtext_relation_operators.rst
|       |   ├── mathtext_supports_text.rst
|       |   ├── mpl_toolkit_pep420.rst
|       |   ├── multiplelocator_offset.rst
|       |   ├── new_color_spec_tuple.rst
|       |   ├── pie_shadow_control.rst
|       |   ├── plot_directive_srcset.rst
|       |   ├── polyquadmesh.rst
|       |   ├── rcParams[legend.loc]_supports_float_tuple.rst
|       |   ├── savefig_bbox_layout.rst
|       |   ├── set_loc.rst
|       |   ├── shadow_shade.rst
|       |   ├── spinesproxyset.rst
|       |   ├── tick_labelfont_param.rst
|       |   └── updated_mathtext.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── github_stats_3.6.0.rst
|       |   ├── github_stats_3.6.1.rst
|       |   ├── github_stats_3.6.2.rst
|       |   ├── github_stats_3.6.3.rst
|       |   ├── github_stats_3.7.0.rst
|       |   ├── github_stats_3.7.1.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   ├── whats_new_3.6.0.rst
|       |   └── whats_new_3.7.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── galleries
|   ├── examples
|   |   ├── README.txt
|   |   ├── animation
|   |   |   ├── README.txt
|   |   |   ├── animate_decay.py
|   |   |   ├── animated_histogram.py
|   |   |   ├── animation_demo.py
|   |   |   ├── bayes_update.py
|   |   |   ├── double_pendulum.py
|   |   |   ├── dynamic_image.py
|   |   |   ├── frame_grabbing_sgskip.py
|   |   |   ├── multiple_axes.py
|   |   |   ├── pause_resume.py
|   |   |   ├── rain.py
|   |   |   ├── random_walk.py
|   |   |   ├── simple_anim.py
|   |   |   ├── simple_scatter.py
|   |   |   ├── strip_chart.py
|   |   |   └── unchained.py
|   |   ├── axes_grid1
|   |   |   ├── README.txt
|   |   |   ├── demo_anchored_direction_arrows.py
|   |   |   ├── demo_axes_divider.py
|   |   |   ├── demo_axes_grid.py
|   |   |   ├── demo_axes_grid2.py
|   |   |   ├── demo_axes_hbox_divider.py
|   |   |   ├── demo_axes_rgb.py
|   |   |   ├── demo_colorbar_of_inset_axes.py
|   |   |   ├── demo_colorbar_with_axes_divider.py
|   |   |   ├── demo_colorbar_with_inset_locator.py
|   |   |   ├── demo_edge_colorbar.py
|   |   |   ├── demo_fixed_size_axes.py
|   |   |   ├── demo_imagegrid_aspect.py
|   |   |   ├── inset_locator_demo.py
|   |   |   ├── inset_locator_demo2.py
|   |   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   |   ├── parasite_simple.py
|   |   |   ├── parasite_simple2.py
|   |   |   ├── scatter_hist_locatable_axes.py
|   |   |   ├── simple_anchored_artists.py
|   |   |   ├── simple_axes_divider1.py
|   |   |   ├── simple_axes_divider3.py
|   |   |   ├── simple_axesgrid.py
|   |   |   ├── simple_axesgrid2.py
|   |   |   ├── simple_axisline4.py
|   |   |   └── simple_colorbar.py
|   |   ├── axisartist
|   |   |   ├── README.txt
|   |   |   ├── axis_direction.py
|   |   |   ├── demo_axis_direction.py
|   |   |   ├── demo_axisline_style.py
|   |   |   ├── demo_curvelinear_grid.py
|   |   |   ├── demo_curvelinear_grid2.py
|   |   |   ├── demo_floating_axes.py
|   |   |   ├── demo_floating_axis.py
|   |   |   ├── demo_parasite_axes.py
|   |   |   ├── demo_parasite_axes2.py
|   |   |   ├── demo_ticklabel_alignment.py
|   |   |   ├── demo_ticklabel_direction.py
|   |   |   ├── simple_axis_direction01.py
|   |   |   ├── simple_axis_direction03.py
|   |   |   ├── simple_axis_pad.py
|   |   |   ├── simple_axisartist1.py
|   |   |   ├── simple_axisline.py
|   |   |   └── simple_axisline3.py
|   |   ├── color
|   |   |   ├── README.txt
|   |   |   ├── color_by_yvalue.py
|   |   |   ├── color_cycle_default.py
|   |   |   ├── color_demo.py
|   |   |   ├── colorbar_basics.py
|   |   |   ├── colormap_reference.py
|   |   |   ├── custom_cmap.py
|   |   |   ├── named_colors.py
|   |   |   └── set_alpha.py
|   |   ├── event_handling
|   |   |   ├── README.txt
|   |   |   ├── close_event.py
|   |   |   ├── coords_demo.py
|   |   |   ├── cursor_demo.py
|   |   |   ├── data_browser.py
|   |   |   ├── figure_axes_enter_leave.py
|   |   |   ├── ginput_manual_clabel_sgskip.py
|   |   |   ├── image_slices_viewer.py
|   |   |   ├── keypress_demo.py
|   |   |   ├── lasso_demo.py
|   |   |   ├── legend_picking.py
|   |   |   ├── looking_glass.py
|   |   |   ├── path_editor.py
|   |   |   ├── pick_event_demo.py
|   |   |   ├── pick_event_demo2.py
|   |   |   ├── poly_editor.py
|   |   |   ├── pong_sgskip.py
|   |   |   ├── resample.py
|   |   |   ├── timers.py
|   |   |   ├── trifinder_event_demo.py
|   |   |   ├── viewlims.py
|   |   |   └── zoom_window.py
|   |   ├── images_contours_and_fields
|   |   |   ├── README.txt
|   |   |   ├── affine_image.py
|   |   |   ├── barb_demo.py
|   |   |   ├── barcode_demo.py
|   |   |   ├── colormap_interactive_adjustment.py
|   |   |   ├── colormap_normalizations.py
|   |   |   ├── colormap_normalizations_symlognorm.py
|   |   |   ├── contour_corner_mask.py
|   |   |   ├── contour_demo.py
|   |   |   ├── contour_image.py
|   |   |   ├── contour_label_demo.py
|   |   |   ├── contourf_demo.py
|   |   |   ├── contourf_hatching.py
|   |   |   ├── contourf_log.py
|   |   |   ├── contours_in_optimization_demo.py
|   |   |   ├── demo_bboximage.py
|   |   |   ├── figimage_demo.py
|   |   |   ├── image_annotated_heatmap.py
|   |   |   ├── image_antialiasing.py
|   |   |   ├── image_clip_path.py
|   |   |   ├── image_demo.py
|   |   |   ├── image_masked.py
|   |   |   ├── image_nonuniform.py
|   |   |   ├── image_transparency_blend.py
|   |   |   ├── image_zcoord.py
|   |   |   ├── interpolation_methods.py
|   |   |   ├── irregulardatagrid.py
|   |   |   ├── layer_images.py
|   |   |   ├── matshow.py
|   |   |   ├── multi_image.py
|   |   |   ├── pcolor_demo.py
|   |   |   ├── pcolormesh_grids.py
|   |   |   ├── pcolormesh_levels.py
|   |   |   ├── plot_streamplot.py
|   |   |   ├── quadmesh_demo.py
|   |   |   ├── quiver_demo.py
|   |   |   ├── quiver_simple_demo.py
|   |   |   ├── shading_example.py
|   |   |   ├── specgram_demo.py
|   |   |   ├── spy_demos.py
|   |   |   ├── tricontour_demo.py
|   |   |   ├── tricontour_smooth_delaunay.py
|   |   |   ├── tricontour_smooth_user.py
|   |   |   ├── trigradient_demo.py
|   |   |   ├── triinterp_demo.py
|   |   |   ├── tripcolor_demo.py
|   |   |   ├── triplot_demo.py
|   |   |   └── watermark_image.py
|   |   ├── lines_bars_and_markers
|   |   |   ├── README.txt
|   |   |   ├── bar_colors.py
|   |   |   ├── bar_label_demo.py
|   |   |   ├── bar_stacked.py
|   |   |   ├── barchart.py
|   |   |   ├── barh.py
|   |   |   ├── broken_barh.py
|   |   |   ├── capstyle.py
|   |   |   ├── categorical_variables.py
|   |   |   ├── cohere.py
|   |   |   ├── csd_demo.py
|   |   |   ├── curve_error_band.py
|   |   |   ├── errorbar_limits_simple.py
|   |   |   ├── errorbar_subsample.py
|   |   |   ├── eventcollection_demo.py
|   |   |   ├── eventplot_demo.py
|   |   |   ├── fill.py
|   |   |   ├── fill_between_alpha.py
|   |   |   ├── fill_between_demo.py
|   |   |   ├── fill_betweenx_demo.py
|   |   |   ├── filled_step.py
|   |   |   ├── gradient_bar.py
|   |   |   ├── hat_graph.py
|   |   |   ├── horizontal_barchart_distribution.py
|   |   |   ├── joinstyle.py
|   |   |   ├── line_demo_dash_control.py
|   |   |   ├── lines_with_ticks_demo.py
|   |   |   ├── linestyles.py
|   |   |   ├── marker_reference.py
|   |   |   ├── markevery_demo.py
|   |   |   ├── masked_demo.py
|   |   |   ├── multicolored_line.py
|   |   |   ├── multivariate_marker_plot.py
|   |   |   ├── psd_demo.py
|   |   |   ├── scatter_demo2.py
|   |   |   ├── scatter_hist.py
|   |   |   ├── scatter_masked.py
|   |   |   ├── scatter_star_poly.py
|   |   |   ├── scatter_with_legend.py
|   |   |   ├── simple_plot.py
|   |   |   ├── span_regions.py
|   |   |   ├── spectrum_demo.py
|   |   |   ├── stackplot_demo.py
|   |   |   ├── stairs_demo.py
|   |   |   ├── stem_plot.py
|   |   |   ├── step_demo.py
|   |   |   ├── timeline.py
|   |   |   ├── vline_hline_demo.py
|   |   |   └── xcorr_acorr_demo.py
|   |   ├── misc
|   |   |   ├── README.txt
|   |   |   ├── anchored_artists.py
|   |   |   ├── bbox_intersect.py
|   |   |   ├── contour_manual.py
|   |   |   ├── coords_report.py
|   |   |   ├── custom_projection.py
|   |   |   ├── customize_rc.py
|   |   |   ├── demo_agg_filter.py
|   |   |   ├── demo_ribbon_box.py
|   |   |   ├── fig_x.py
|   |   |   ├── fill_spiral.py
|   |   |   ├── findobj_demo.py
|   |   |   ├── font_indexing.py
|   |   |   ├── ftface_props.py
|   |   |   ├── histogram_path.py
|   |   |   ├── hyperlinks_sgskip.py
|   |   |   ├── image_thumbnail_sgskip.py
|   |   |   ├── keyword_plotting.py
|   |   |   ├── logos2.py
|   |   |   ├── multipage_pdf.py
|   |   |   ├── multiprocess_sgskip.py
|   |   |   ├── packed_bubbles.py
|   |   |   ├── patheffect_demo.py
|   |   |   ├── print_stdout_sgskip.py
|   |   |   ├── rasterization_demo.py
|   |   |   ├── set_and_get.py
|   |   |   ├── svg_filter_line.py
|   |   |   ├── svg_filter_pie.py
|   |   |   ├── table_demo.py
|   |   |   ├── tickedstroke_demo.py
|   |   |   ├── transoffset.py
|   |   |   └── zorder_demo.py
|   |   ├── mplot3d
|   |   |   ├── 2dcollections3d.py
|   |   |   ├── 3d_bars.py
|   |   |   ├── README.txt
|   |   |   ├── bars3d.py
|   |   |   ├── box3d.py
|   |   |   ├── contour3d.py
|   |   |   ├── contour3d_2.py
|   |   |   ├── contour3d_3.py
|   |   |   ├── contourf3d.py
|   |   |   ├── contourf3d_2.py
|   |   |   ├── custom_shaded_3d_surface.py
|   |   |   ├── errorbar3d.py
|   |   |   ├── hist3d.py
|   |   |   ├── lines3d.py
|   |   |   ├── lorenz_attractor.py
|   |   |   ├── mixed_subplots.py
|   |   |   ├── offset.py
|   |   |   ├── pathpatch3d.py
|   |   |   ├── polys3d.py
|   |   |   ├── projections.py
|   |   |   ├── quiver3d.py
|   |   |   ├── rotate_axes3d_sgskip.py
|   |   |   ├── scatter3d.py
|   |   |   ├── stem3d_demo.py
|   |   |   ├── subplot3d.py
|   |   |   ├── surface3d.py
|   |   |   ├── surface3d_2.py
|   |   |   ├── surface3d_3.py
|   |   |   ├── surface3d_radial.py
|   |   |   ├── text3d.py
|   |   |   ├── tricontour3d.py
|   |   |   ├── tricontourf3d.py
|   |   |   ├── trisurf3d.py
|   |   |   ├── trisurf3d_2.py
|   |   |   ├── view_planes_3d.py
|   |   |   ├── voxels.py
|   |   |   ├── voxels_numpy_logo.py
|   |   |   ├── voxels_rgb.py
|   |   |   ├── voxels_torus.py
|   |   |   ├── wire3d.py
|   |   |   ├── wire3d_animation_sgskip.py
|   |   |   └── wire3d_zero_stride.py
|   |   ├── pie_and_polar_charts
|   |   |   ├── README.txt
|   |   |   ├── bar_of_pie.py
|   |   |   ├── nested_pie.py
|   |   |   ├── pie_and_donut_labels.py
|   |   |   ├── pie_features.py
|   |   |   ├── polar_bar.py
|   |   |   ├── polar_demo.py
|   |   |   ├── polar_error_caps.py
|   |   |   ├── polar_legend.py
|   |   |   └── polar_scatter.py
|   |   ├── pyplots
|   |   |   ├── README.txt
|   |   |   ├── axline.py
|   |   |   ├── pyplot_simple.py
|   |   |   ├── pyplot_text.py
|   |   |   ├── pyplot_three.py
|   |   |   └── pyplot_two_subplots.py
|   |   ├── scales
|   |   |   ├── README.txt
|   |   |   ├── asinh_demo.py
|   |   |   ├── aspect_loglog.py
|   |   |   ├── custom_scale.py
|   |   |   ├── log_bar.py
|   |   |   ├── log_demo.py
|   |   |   ├── logit_demo.py
|   |   |   ├── power_norm.py
|   |   |   ├── scales.py
|   |   |   ├── semilogx_demo.py
|   |   |   └── symlog_demo.py
|   |   ├── shapes_and_collections
|   |   |   ├── README.txt
|   |   |   ├── arrow_guide.py
|   |   |   ├── artist_reference.py
|   |   |   ├── collections.py
|   |   |   ├── compound_path.py
|   |   |   ├── dolphin.py
|   |   |   ├── donut.py
|   |   |   ├── ellipse_arrow.py
|   |   |   ├── ellipse_collection.py
|   |   |   ├── ellipse_demo.py
|   |   |   ├── fancybox_demo.py
|   |   |   ├── hatch_demo.py
|   |   |   ├── hatch_style_reference.py
|   |   |   ├── line_collection.py
|   |   |   ├── patch_collection.py
|   |   |   ├── path_patch.py
|   |   |   ├── quad_bezier.py
|   |   |   └── scatter.py
|   |   ├── showcase
|   |   |   ├── README.txt
|   |   |   ├── anatomy.py
|   |   |   ├── firefox.py
|   |   |   ├── integral.py
|   |   |   ├── mandelbrot.py
|   |   |   ├── stock_prices.py
|   |   |   └── xkcd.py
|   |   ├── specialty_plots
|   |   |   ├── README.txt
|   |   |   ├── advanced_hillshading.py
|   |   |   ├── anscombe.py
|   |   |   ├── hinton_demo.py
|   |   |   ├── ishikawa_diagram.py
|   |   |   ├── leftventricle_bullseye.py
|   |   |   ├── mri_with_eeg.py
|   |   |   ├── radar_chart.py
|   |   |   ├── sankey_basics.py
|   |   |   ├── sankey_links.py
|   |   |   ├── sankey_rankine.py
|   |   |   ├── skewt.py
|   |   |   └── topographic_hillshading.py
|   |   ├── spines
|   |   |   ├── README.txt
|   |   |   ├── centered_spines_with_arrows.py
|   |   |   ├── multiple_yaxis_with_spines.py
|   |   |   ├── spine_placement_demo.py
|   |   |   ├── spines.py
|   |   |   └── spines_dropped.py
|   |   ├── statistics
|   |   |   ├── README.txt
|   |   |   ├── barchart_demo.py
|   |   |   ├── boxplot.py
|   |   |   ├── boxplot_color.py
|   |   |   ├── boxplot_demo.py
|   |   |   ├── boxplot_vs_violin.py
|   |   |   ├── bxp.py
|   |   |   ├── confidence_ellipse.py
|   |   |   ├── customized_violin.py
|   |   |   ├── errorbar.py
|   |   |   ├── errorbar_features.py
|   |   |   ├── errorbar_limits.py
|   |   |   ├── errorbars_and_boxes.py
|   |   |   ├── hexbin_demo.py
|   |   |   ├── hist.py
|   |   |   ├── histogram_cumulative.py
|   |   |   ├── histogram_features.py
|   |   |   ├── histogram_histtypes.py
|   |   |   ├── histogram_multihist.py
|   |   |   ├── multiple_histograms_side_by_side.py
|   |   |   ├── time_series_histogram.py
|   |   |   └── violinplot.py
|   |   ├── style_sheets
|   |   |   ├── README.txt
|   |   |   ├── bmh.py
|   |   |   ├── dark_background.py
|   |   |   ├── fivethirtyeight.py
|   |   |   ├── ggplot.py
|   |   |   ├── grayscale.py
|   |   |   ├── plot_solarizedlight2.py
|   |   |   └── style_sheets_reference.py
|   |   ├── subplots_axes_and_figures
|   |   |   ├── README.txt
|   |   |   ├── align_labels_demo.py
|   |   |   ├── auto_subplots_adjust.py
|   |   |   ├── axes_box_aspect.py
|   |   |   ├── axes_demo.py
|   |   |   ├── axes_margins.py
|   |   |   ├── axes_props.py
|   |   |   ├── axes_zoom_effect.py
|   |   |   ├── axhspan_demo.py
|   |   |   ├── axis_equal_demo.py
|   |   |   ├── axis_labels_demo.py
|   |   |   ├── broken_axis.py
|   |   |   ├── custom_figure_class.py
|   |   |   ├── demo_constrained_layout.py
|   |   |   ├── demo_tight_layout.py
|   |   |   ├── fahrenheit_celsius_scales.py
|   |   |   ├── figure_size_units.py
|   |   |   ├── figure_title.py
|   |   |   ├── ganged_plots.py
|   |   |   ├── geo_demo.py
|   |   |   ├── gridspec_and_subplots.py
|   |   |   ├── gridspec_multicolumn.py
|   |   |   ├── gridspec_nested.py
|   |   |   ├── invert_axes.py
|   |   |   ├── multiple_figs_demo.py
|   |   |   ├── secondary_axis.py
|   |   |   ├── share_axis_lims_views.py
|   |   |   ├── shared_axis_demo.py
|   |   |   ├── subfigures.py
|   |   |   ├── subplot.py
|   |   |   ├── subplots_adjust.py
|   |   |   ├── subplots_demo.py
|   |   |   ├── two_scales.py
|   |   |   └── zoom_inset_axes.py
|   |   ├── text_labels_and_annotations
|   |   |   ├── README.txt
|   |   |   ├── accented_text.py
|   |   |   ├── align_ylabels.py
|   |   |   ├── angle_annotation.py
|   |   |   ├── angles_on_bracket_arrows.py
|   |   |   ├── annotate_transform.py
|   |   |   ├── annotation_basic.py
|   |   |   ├── annotation_demo.py
|   |   |   ├── annotation_polar.py
|   |   |   ├── arrow_demo.py
|   |   |   ├── autowrap.py
|   |   |   ├── custom_legends.py
|   |   |   ├── date.py
|   |   |   ├── demo_annotation_box.py
|   |   |   ├── demo_text_path.py
|   |   |   ├── demo_text_rotation_mode.py
|   |   |   ├── dfrac_demo.py
|   |   |   ├── engineering_formatter.py
|   |   |   ├── fancyarrow_demo.py
|   |   |   ├── fancytextbox_demo.py
|   |   |   ├── figlegend_demo.py
|   |   |   ├── font_family_rc.py
|   |   |   ├── font_file.py
|   |   |   ├── font_table.py
|   |   |   ├── fonts_demo.py
|   |   |   ├── fonts_demo_kw.py
|   |   |   ├── label_subplots.py
|   |   |   ├── legend.py
|   |   |   ├── legend_demo.py
|   |   |   ├── line_with_text.py
|   |   |   ├── mathtext_asarray.py
|   |   |   ├── mathtext_demo.py
|   |   |   ├── mathtext_examples.py
|   |   |   ├── mathtext_fontfamily_example.py
|   |   |   ├── multiline.py
|   |   |   ├── placing_text_boxes.py
|   |   |   ├── rainbow_text.py
|   |   |   ├── stix_fonts_demo.py
|   |   |   ├── tex_demo.py
|   |   |   ├── text_alignment.py
|   |   |   ├── text_commands.py
|   |   |   ├── text_fontdict.py
|   |   |   ├── text_rotation_relative_to_line.py
|   |   |   ├── titles_demo.py
|   |   |   ├── unicode_minus.py
|   |   |   ├── usetex_baseline_test.py
|   |   |   ├── usetex_fonteffects.py
|   |   |   └── watermark_text.py
|   |   ├── ticks
|   |   |   ├── README.txt
|   |   |   ├── auto_ticks.py
|   |   |   ├── centered_ticklabels.py
|   |   |   ├── colorbar_tick_labelling_demo.py
|   |   |   ├── custom_ticker1.py
|   |   |   ├── date_concise_formatter.py
|   |   |   ├── date_demo_convert.py
|   |   |   ├── date_demo_rrule.py
|   |   |   ├── date_formatters_locators.py
|   |   |   ├── date_index_formatter.py
|   |   |   ├── date_precision_and_epochs.py
|   |   |   ├── dollar_ticks.py
|   |   |   ├── fig_axes_customize_simple.py
|   |   |   ├── major_minor_demo.py
|   |   |   ├── scalarformatter.py
|   |   |   ├── tick-formatters.py
|   |   |   ├── tick-locators.py
|   |   |   ├── tick_label_right.py
|   |   |   ├── tick_labels_from_values.py
|   |   |   ├── tick_xlabel_top.py
|   |   |   ├── ticklabels_rotation.py
|   |   |   └── ticks_too_many.py
|   |   ├── units
|   |   |   ├── README.txt
|   |   |   ├── annotate_with_units.py
|   |   |   ├── artist_tests.py
|   |   |   ├── bar_demo2.py
|   |   |   ├── bar_unit_demo.py
|   |   |   ├── basic_units.py
|   |   |   ├── ellipse_with_units.py
|   |   |   ├── evans_test.py
|   |   |   ├── radian_demo.py
|   |   |   ├── units_sample.py
|   |   |   └── units_scatter.py
|   |   ├── user_interfaces
|   |   |   ├── README.txt
|   |   |   ├── canvasagg.py
|   |   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk3_sgskip.py
|   |   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk4_sgskip.py
|   |   |   ├── embedding_in_qt_sgskip.py
|   |   |   ├── embedding_in_tk_sgskip.py
|   |   |   ├── embedding_in_wx2_sgskip.py
|   |   |   ├── embedding_in_wx3_sgskip.py
|   |   |   ├── embedding_in_wx4_sgskip.py
|   |   |   ├── embedding_in_wx5_sgskip.py
|   |   |   ├── embedding_webagg_sgskip.py
|   |   |   ├── fourier_demo_wx_sgskip.py
|   |   |   ├── gtk3_spreadsheet_sgskip.py
|   |   |   ├── gtk4_spreadsheet_sgskip.py
|   |   |   ├── images
|   |   |   ├── mathtext_wx_sgskip.py
|   |   |   ├── mpl_with_glade3_sgskip.py
|   |   |   ├── mplcvd.py
|   |   |   ├── pylab_with_gtk3_sgskip.py
|   |   |   ├── pylab_with_gtk4_sgskip.py
|   |   |   ├── svg_histogram_sgskip.py
|   |   |   ├── svg_tooltip_sgskip.py
|   |   |   ├── toolmanager_sgskip.py
|   |   |   ├── web_application_server_sgskip.py
|   |   |   └── wxcursor_demo_sgskip.py
|   |   ├── userdemo
|   |   |   ├── README.txt
|   |   |   ├── annotate_explain.py
|   |   |   ├── annotate_text_arrow.py
|   |   |   ├── connectionstyle_demo.py
|   |   |   ├── custom_boxstyle01.py
|   |   |   ├── demo_gridspec01.py
|   |   |   ├── demo_gridspec03.py
|   |   |   ├── demo_gridspec06.py
|   |   |   ├── pgf_fonts.py
|   |   |   ├── pgf_preamble_sgskip.py
|   |   |   ├── pgf_texsystem.py
|   |   |   ├── simple_annotate01.py
|   |   |   ├── simple_legend01.py
|   |   |   └── simple_legend02.py
|   |   └── widgets
|   |       ├── README.txt
|   |       ├── annotated_cursor.py
|   |       ├── buttons.py
|   |       ├── check_buttons.py
|   |       ├── cursor.py
|   |       ├── lasso_selector_demo_sgskip.py
|   |       ├── menu.py
|   |       ├── mouse_cursor.py
|   |       ├── multicursor.py
|   |       ├── polygon_selector_demo.py
|   |       ├── polygon_selector_simple.py
|   |       ├── radio_buttons.py
|   |       ├── range_slider.py
|   |       ├── rectangle_selector.py
|   |       ├── slider_demo.py
|   |       ├── slider_snap_demo.py
|   |       ├── span_selector.py
|   |       └── textbox.py
|   ├── plot_types
|   |   ├── 3D
|   |   |   ├── README.rst
|   |   |   ├── scatter3d_simple.py
|   |   |   ├── surface3d_simple.py
|   |   |   ├── trisurf3d_simple.py
|   |   |   ├── voxels_simple.py
|   |   |   └── wire3d_simple.py
|   |   ├── README.rst
|   |   ├── arrays
|   |   |   ├── README.rst
|   |   |   ├── barbs.py
|   |   |   ├── contour.py
|   |   |   ├── contourf.py
|   |   |   ├── imshow.py
|   |   |   ├── pcolormesh.py
|   |   |   ├── quiver.py
|   |   |   └── streamplot.py
|   |   ├── basic
|   |   |   ├── README.rst
|   |   |   ├── bar.py
|   |   |   ├── fill_between.py
|   |   |   ├── plot.py
|   |   |   ├── scatter_plot.py
|   |   |   ├── stackplot.py
|   |   |   ├── stairs.py
|   |   |   └── stem.py
|   |   ├── stats
|   |   |   ├── README.rst
|   |   |   ├── boxplot_plot.py
|   |   |   ├── ecdf.py
|   |   |   ├── errorbar_plot.py
|   |   |   ├── eventplot.py
|   |   |   ├── hexbin.py
|   |   |   ├── hist2d.py
|   |   |   ├── hist_plot.py
|   |   |   ├── pie.py
|   |   |   └── violin.py
|   |   └── unstructured
|   |       ├── README.rst
|   |       ├── tricontour.py
|   |       ├── tricontourf.py
|   |       ├── tripcolor.py
|   |       └── triplot.py
|   ├── tutorials
|   |   ├── artists.py
|   |   ├── images.py
|   |   ├── index.rst
|   |   ├── lifecycle.py
|   |   └── pyplot.py
|   └── users_explain
|       ├── animations
|       |   ├── README.txt
|       |   ├── animations.py
|       |   └── blitting.py
|       ├── artists
|       |   ├── artist_intro.rst
|       |   ├── color_cycle.py
|       |   ├── imshow_extent.py
|       |   ├── index.rst
|       |   ├── patheffects_guide.py
|       |   ├── paths.py
|       |   ├── performance.rst
|       |   └── transforms_tutorial.py
|       ├── axes
|       |   ├── arranging_axes.py
|       |   ├── autoscale.py
|       |   ├── axes_intro.rst
|       |   ├── axes_scales.py
|       |   ├── axes_ticks.py
|       |   ├── colorbar_placement.py
|       |   ├── constrainedlayout_guide.py
|       |   ├── index.rst
|       |   ├── legend_guide.py
|       |   ├── mosaic.py
|       |   └── tight_layout_guide.py
|       ├── colors
|       |   ├── README.txt
|       |   ├── colorbar_only.py
|       |   ├── colormap-manipulation.py
|       |   ├── colormapnorms.py
|       |   ├── colormaps.py
|       |   └── colors.py
|       ├── customizing.py
|       ├── figure
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── figure_intro.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── index.rst
|       ├── quick_start.py
|       ├── text
|       |   ├── README.txt
|       |   ├── annotations.py
|       |   ├── fonts.py
|       |   ├── mathtext.py
|       |   ├── pgf.py
|       |   ├── text_intro.py
|       |   ├── text_props.py
|       |   └── usetex.py
|       └── toolkits
|           ├── axes_grid.rst
|           ├── axisartist.rst
|           ├── index.rst
|           └── mplot3d.rst
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── all_figures.html
|   |   |       ├── css
|   |   |       ├── ipython_inline_figure.html
|   |   |       ├── js
|   |   |       └── single_figure.html
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   |   └── plot_directive.css
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── figmpl_directive.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── nestedpage
|   |   |       ├── nestedpage2
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── typing.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           ├── test_axes3d.py
|   |           └── test_legend3d.py
|   └── pylab.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       ├── minver.txt
|       └── mypy.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
└── tools
    ├── README.txt
    ├── boilerplate.py
    ├── cache_zenodo_svg.py
    ├── check_typehints.py
    ├── create_DejaVuDisplay.sh
    ├── embed_js.py
    ├── gh_api.py
    ├── github_stats.py
    ├── make_icons.py
    ├── memleak.py
    ├── run_examples.py
    ├── subset.py
    ├── triage_tests.py
    └── visualize_tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Updating an array passed as the xy parameter to annotate updates the anottation

Description: ### Bug report

**Bug summary**
When an array is used as the _xy_ kwarg for an annotation that includes arrows, changing the array after calling the function changes the arrow position. It is very likely that the same array is kept instead of a copy.

**Code for reproduction**


```python
fig = plt.figure("test")

ax = fig.add_axes([0.13, 0.15, .8, .8])
ax.set_xlim(-5, 5)
ax.set_ylim(-3, 3)

xy_0 =np.array((-4, 1))
xy_f =np.array((-1, 1))
# this annotation is messed by later changing the array passed as xy kwarg
ax.annotate(s='', xy=xy_0, xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3# <--this  updates the arrow position

xy_0 =np.array((1, 1))
xy_f =np.array((4, 1))
# using a copy of the array helps spoting where the problem is
ax.annotate(s='', xy=xy_0.copy(), xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3
```

**Actual outcome**

![bug](https://user-images.githubusercontent.com/45225345/83718413-5d656a80-a60b-11ea-8ef0-a1a18337de28.png)

**Expected outcome**
Both arrows should be horizontal

**Matplotlib version**
  * Operating system: Debian 9
  * Matplotlib version: '3.0.3'
  * Matplotlib backend: Qt5Agg
  * Python version:'3.5.3'
  * Jupyter version (if applicable):
  * Other libraries: Numpy 1.17.3

Matplotlib was installed using pip


Patch information:
diff --git a/lib/matplotlib/patches.py b/lib/matplotlib/patches.py
index 92dc55940b..bc41964e92 100644
--- a/lib/matplotlib/patches.py
+++ b/lib/matplotlib/patches.py
@@ -4147,7 +4147,7 @@ default: 'arc3'
         super().__init__(**kwargs)
 
         if posA is not None and posB is not None and path is None:
-            self._posA_posB = [posA, posB]
+            self._posA_posB = [tuple(posA), tuple(posB)]
 
             if connectionstyle is None:
                 connectionstyle = "arc3"
@@ -4183,9 +4183,9 @@ default: 'arc3'
             `None` use current value.
         """
         if posA is not None:
-            self._posA_posB[0] = posA
+            self._posA_posB[0] = tuple(posA)
         if posB is not None:
-            self._posA_posB[1] = posB
+            self._posA_posB[1] = tuple(posB)
         self.stale = True
 
     def set_patchA(self, patchA):
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index d4922fc517..2951122a51 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -1456,7 +1456,7 @@ class _AnnotationBase:
                  xycoords='data',
                  annotation_clip=None):
 
-        self.xy = xy
+        self.xy = tuple(xy)
         self.xycoords = xycoords
         self.set_annotation_clip(annotation_clip)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 12:30:38,304 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a bug in `ax.annotate`. The bug is caused by `matplotlib` not creating a copy of the coordinates array. The provided patch modifies `lib/matplotlib/text.py`. Therefore, the most relevant test cases are likely in `lib/matplotlib/tests/test_text.py`. I need the content of this file to identify and extract the most relevant tests.' query='Please provide the full content of lib/matplotlib/tests/test_text.py.' extra_requirements='' purpose='I need the content of `lib/matplotlib/tests/test_text.py` to find existing tests for `ax.annotate` that can be used to demonstrate the reported bug or similar functionality.'
2025-12-21 12:30:38,305 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of lib/matplotlib/tests/test_text.py.
2025-12-21 12:30:38,305 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 12:30:38,305 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 12:30:38,306 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 12:30:38,306 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of lib/matplotlib/tests/test_text.py.
Purpose: I need the content of `lib/matplotlib/tests/test_text.py` to find existing tests for `ax.annotate` that can be used to demonstrate the reported bug or similar functionality.
2025-12-21 12:30:41,024 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `lib/matplotlib/tests/test_text.py` for you to examine. This will help you find existing tests for `ax.annotate` and understand how to demonstrate the bug or similar functionality.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_text.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2160, 'candidates_token_count': 74, 'total_token_count': 2354, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2160}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 74}], 'thoughts_token_count': 120, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.14022056476489916, 'model_name': 'gemini-2.5-pro'} id='run--26f63e95-8568-4988-93bc-a2f46d71a068-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_text.py'}, 'id': '67e3bdcf-b368-489a-b147-996c1bb90265', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2160, 'output_tokens': 74, 'total_tokens': 2354, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 120}}
2025-12-21 12:30:46,301 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have read the content of `lib/matplotlib/tests/test_text.py` and am now searching for occurrences of `ax.annotate` within the file to identify relevant tests. This will help locate examples of how `ax.annotate` is used and tested, which can be used to demonstrate the bug you reported.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "ax.annotate", "relative_path": "lib/matplotlib/tests/test_text.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10363, 'candidates_token_count': 104, 'total_token_count': 10847, 'cached_content_token_count': 1853, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10363}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1853}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 104}], 'thoughts_token_count': 380}, 'finish_reason': 'STOP', 'avg_logprobs': -0.37053845478938174, 'model_name': 'gemini-2.5-pro'} id='run--b6a25d4b-b14b-4b36-bba9-ec6aa937cc1f-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'ax.annotate', 'relative_path': 'lib/matplotlib/tests/test_text.py'}, 'id': 'a3d76fbf-3d1a-40c6-842c-af1945f7b703', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10363, 'output_tokens': 104, 'total_tokens': 10847, 'input_token_details': {'cache_read': 1853}, 'output_token_details': {'reasoning': 380}}
2025-12-21 12:30:49,182 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified several tests that use `ax.annotate` within `lib/matplotlib/tests/test_text.py`. I will now retrieve the content of the `test_annotation_negative_ax_coords` and `test_annotation_negative_fig_coords` functions, as they seem most relevant to demonstrating the bug you reported. These tests explore edge cases with negative coordinates, which may be helpful.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 492.0, "start_line": 437.0, "relative_path": "lib/matplotlib/tests/test_text.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11891, 'candidates_token_count': 116, 'total_token_count': 12098, 'cached_content_token_count': 9257, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11891}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9257}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 116}], 'thoughts_token_count': 91}, 'finish_reason': 'STOP', 'avg_logprobs': -0.17693958611323915, 'model_name': 'gemini-2.5-pro'} id='run--d1e76537-0b17-4845-b3d7-ac80b4e0af19-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 492.0, 'start_line': 437.0, 'relative_path': 'lib/matplotlib/tests/test_text.py'}, 'id': '54fe5002-5881-41fd-a2fb-e7c85ed0f4cb', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11891, 'output_tokens': 116, 'total_tokens': 12098, 'input_token_details': {'cache_read': 9257}, 'output_token_details': {'reasoning': 91}}
2025-12-21 12:30:53,404 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `lib/matplotlib/tests/test_text.py` and located several tests that use `ax.annotate`. I have also extracted the code for the `test_annotation_negative_ax_coords` and `test_annotation_negative_fig_coords` functions, which appear to be the most relevant to your goal of demonstrating the bug. These tests should provide a good starting point for understanding how to use `ax.annotate` with various coordinate systems and for creating a new test case.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 13066, 'candidates_token_count': 109, 'total_token_count': 13404, 'cached_content_token_count': 11076, 'prompt_tokens_details': [{'modality': 1, 'token_count': 13066}], 'cache_tokens_details': [{'modality': 1, 'token_count': 11076}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 109}], 'thoughts_token_count': 229}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3590958621523796, 'model_name': 'gemini-2.5-pro'} id='run--9a5ed164-87de-4834-a321-f57050e16ca6-0' usage_metadata={'input_tokens': 13066, 'output_tokens': 109, 'total_tokens': 13404, 'input_token_details': {'cache_read': 11076}, 'output_token_details': {'reasoning': 229}}
2025-12-21 12:30:53,406 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of lib/matplotlib/tests/test_text.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need the content of `lib/matplotlib/tests/test_text.py` to find existing tests for `ax.annotate` that can be used to demonstrate the reported bug or similar functionality.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: lib/matplotlib/tests/test_text.py
Line number range: 1 - 500
Content:
1. from datetime import datetime
2. import io
3. import warnings
4. 
5. import numpy as np
6. from numpy.testing import assert_almost_equal
7. from packaging.version import parse as parse_version
8. import pyparsing
9. import pytest
10. 
11. import matplotlib as mpl
12. from matplotlib.backend_bases import MouseEvent
13. from matplotlib.font_manager import FontProperties
14. import matplotlib.patches as mpatches
15. import matplotlib.pyplot as plt
16. import matplotlib.transforms as mtransforms
17. from matplotlib.testing.decorators import check_figures_equal, image_comparison
18. from matplotlib.testing._markers import needs_usetex
19. from matplotlib.text import Text, Annotation
20. 
21. pyparsing_version = parse_version(pyparsing.__version__)
22. 
23. 
24. @image_comparison(['font_styles'])
25. def test_font_styles():
26. 
27.     def find_matplotlib_font(**kw):
28.         prop = FontProperties(**kw)
29.         path = findfont(prop, directory=mpl.get_data_path())
30.         return FontProperties(fname=path)
31. 
32.     from matplotlib.font_manager import FontProperties, findfont
33.     warnings.filterwarnings(
34.         'ignore',
35.         r"findfont: Font family \[u?'Foo'\] not found. Falling back to .",
36.         UserWarning,
37.         module='matplotlib.font_manager')
38. 
39.     fig, ax = plt.subplots()
40. 
41.     normal_font = find_matplotlib_font(
42.         family="sans-serif",
43.         style="normal",
44.         variant="normal",
45.         size=14)
46.     a = ax.annotate(
47.         "Normal Font",
48.         (0.1, 0.1),
49.         xycoords='axes fraction',
50.         fontproperties=normal_font)
51.     assert a.get_fontname() == 'DejaVu Sans'
52.     assert a.get_fontstyle() == 'normal'
53.     assert a.get_fontvariant() == 'normal'
54.     assert a.get_weight() == 'normal'
55.     assert a.get_stretch() == 'normal'
56. 
57.     bold_font = find_matplotlib_font(
58.         family="Foo",
59.         style="normal",
60.         variant="normal",
61.         weight="bold",
62.         stretch=500,
63.         size=14)
64.     ax.annotate(
65.         "Bold Font",
66.         (0.1, 0.2),
67.         xycoords='axes fraction',
68.         fontproperties=bold_font)
69. 
70.     bold_italic_font = find_matplotlib_font(
71.         family="sans serif",
72.         style="italic",
73.         variant="normal",
74.         weight=750,
75.         stretch=500,
76.         size=14)
77.     ax.annotate(
78.         "Bold Italic Font",
79.         (0.1, 0.3),
80.         xycoords='axes fraction',
81.         fontproperties=bold_italic_font)
82. 
83.     light_font = find_matplotlib_font(
84.         family="sans-serif",
85.         style="normal",
86.         variant="normal",
87.         weight=200,
88.         stretch=500,
89.         size=14)
90.     ax.annotate(
91.         "Light Font",
92.         (0.1, 0.4),
93.         xycoords='axes fraction',
94.         fontproperties=light_font)
95. 
96.     condensed_font = find_matplotlib_font(
97.         family="sans-serif",
98.         style="normal",
99.         variant="normal",
100.         weight=500,
101.         stretch=100,
102.         size=14)
103.     ax.annotate(
104.         "Condensed Font",
105.         (0.1, 0.5),
106.         xycoords='axes fraction',
107.         fontproperties=condensed_font)
108. 
109.     ax.set_xticks([])
110.     ax.set_yticks([])
111. 
112. 
113. @image_comparison(['multiline'])
114. def test_multiline():
115.     plt.figure()
116.     ax = plt.subplot(1, 1, 1)
117.     ax.set_title("multiline\ntext alignment")
118. 
119.     plt.text(
120.         0.2, 0.5, "TpTpTp\n$M$\nTpTpTp", size=20, ha="center", va="top")
121. 
122.     plt.text(
123.         0.5, 0.5, "TpTpTp\n$M^{M^{M^{M}}}$\nTpTpTp", size=20,
124.         ha="center", va="top")
125. 
126.     plt.text(
127.         0.8, 0.5, "TpTpTp\n$M_{q_{q_{q}}}$\nTpTpTp", size=20,
128.         ha="center", va="top")
129. 
130.     plt.xlim(0, 1)
131.     plt.ylim(0, 0.8)
132. 
133.     ax.set_xticks([])
134.     ax.set_yticks([])
135. 
136. 
137. @image_comparison(['multiline2'], style='mpl20')
138. def test_multiline2():
139.     # Remove this line when this test image is regenerated.
140.     plt.rcParams['text.kerning_factor'] = 6
141. 
142.     fig, ax = plt.subplots()
143. 
144.     ax.set_xlim([0, 1.4])
145.     ax.set_ylim([0, 2])
146.     ax.axhline(0.5, color='C2', linewidth=0.3)
147.     sts = ['Line', '2 Lineg\n 2 Lg', '$\\sum_i x $', 'hi $\\sum_i x $\ntest',
148.            'test\n $\\sum_i x $', '$\\sum_i x $\n $\\sum_i x $']
149.     renderer = fig.canvas.get_renderer()
150. 
151.     def draw_box(ax, tt):
152.         r = mpatches.Rectangle((0, 0), 1, 1, clip_on=False,
153.                                transform=ax.transAxes)
154.         r.set_bounds(
155.             tt.get_window_extent(renderer)
156.             .transformed(ax.transAxes.inverted())
157.             .bounds)
158.         ax.add_patch(r)
159. 
160.     horal = 'left'
161.     for nn, st in enumerate(sts):
162.         tt = ax.text(0.2 * nn + 0.1, 0.5, st, horizontalalignment=horal,
163.                      verticalalignment='bottom')
164.         draw_box(ax, tt)
165.     ax.text(1.2, 0.5, 'Bottom align', color='C2')
166. 
167.     ax.axhline(1.3, color='C2', linewidth=0.3)
168.     for nn, st in enumerate(sts):
169.         tt = ax.text(0.2 * nn + 0.1, 1.3, st, horizontalalignment=horal,
170.                      verticalalignment='top')
171.         draw_box(ax, tt)
172.     ax.text(1.2, 1.3, 'Top align', color='C2')
173. 
174.     ax.axhline(1.8, color='C2', linewidth=0.3)
175.     for nn, st in enumerate(sts):
176.         tt = ax.text(0.2 * nn + 0.1, 1.8, st, horizontalalignment=horal,
177.                      verticalalignment='baseline')
178.         draw_box(ax, tt)
179.     ax.text(1.2, 1.8, 'Baseline align', color='C2')
180. 
181.     ax.axhline(0.1, color='C2', linewidth=0.3)
182.     for nn, st in enumerate(sts):
183.         tt = ax.text(0.2 * nn + 0.1, 0.1, st, horizontalalignment=horal,
184.                      verticalalignment='bottom', rotation=20)
185.         draw_box(ax, tt)
186.     ax.text(1.2, 0.1, 'Bot align, rot20', color='C2')
187. 
188. 
189. @image_comparison(['antialiased.png'])
190. def test_antialiasing():
191.     mpl.rcParams['text.antialiased'] = True
192. 
193.     fig = plt.figure(figsize=(5.25, 0.75))
194.     fig.text(0.5, 0.75, "antialiased", horizontalalignment='center',
195.              verticalalignment='center')
196.     fig.text(0.5, 0.25, r"$\sqrt{x}$", horizontalalignment='center',
197.              verticalalignment='center')
198.     # NOTE: We don't need to restore the rcParams here, because the
199.     # test cleanup will do it for us.  In fact, if we do it here, it
200.     # will turn antialiasing back off before the images are actually
201.     # rendered.
202. 
203. 
204. def test_afm_kerning():
205.     fn = mpl.font_manager.findfont("Helvetica", fontext="afm")
206.     with open(fn, 'rb') as fh:
207.         afm = mpl._afm.AFM(fh)
208.     assert afm.string_width_height('VAVAVAVAVAVA') == (7174.0, 718)
209. 
210. 
211. @image_comparison(['text_contains.png'])
212. def test_contains():
213.     fig = plt.figure()
214.     ax = plt.axes()
215. 
216.     mevent = MouseEvent('button_press_event', fig.canvas, 0.5, 0.5, 1, None)
217. 
218.     xs = np.linspace(0.25, 0.75, 30)
219.     ys = np.linspace(0.25, 0.75, 30)
220.     xs, ys = np.meshgrid(xs, ys)
221. 
222.     txt = plt.text(
223.         0.5, 0.4, 'hello world', ha='center', fontsize=30, rotation=30)
224.     # uncomment to draw the text's bounding box
225.     # txt.set_bbox(dict(edgecolor='black', facecolor='none'))
226. 
227.     # draw the text. This is important, as the contains method can only work
228.     # when a renderer exists.
229.     fig.canvas.draw()
230. 
231.     for x, y in zip(xs.flat, ys.flat):
232.         mevent.x, mevent.y = plt.gca().transAxes.transform([x, y])
233.         contains, _ = txt.contains(mevent)
234.         color = 'yellow' if contains else 'red'
235. 
236.         # capture the viewLim, plot a point, and reset the viewLim
237.         vl = ax.viewLim.frozen()
238.         ax.plot(x, y, 'o', color=color)
239.         ax.viewLim.set(vl)
240. 
241. 
242. def test_annotation_contains():
243.     # Check that Annotation.contains looks at the bboxes of the text and the
244.     # arrow separately, not at the joint bbox.
245.     fig, ax = plt.subplots()
246.     ann = ax.annotate(
247.         "hello", xy=(.4, .4), xytext=(.6, .6), arrowprops={"arrowstyle": "->"})
248.     fig.canvas.draw()  # Needed for the same reason as in test_contains.
249.     event = MouseEvent(
250.         "button_press_event", fig.canvas, *ax.transData.transform((.5, .6)))
251.     assert ann.contains(event) == (False, {})
252. 
253. 
254. @pytest.mark.parametrize('err, xycoords, match', (
255.     (TypeError, print, "xycoords callable must return a BboxBase or Transform, not a"),
256.     (TypeError, [0, 0], r"'xycoords' must be an instance of str, tuple"),
257.     (ValueError, "foo", "'foo' is not a valid coordinate"),
258.     (ValueError, "foo bar", "'foo bar' is not a valid coordinate"),
259.     (ValueError, "offset foo", "xycoords cannot be an offset coordinate"),
260.     (ValueError, "axes foo", "'foo' is not a recognized unit"),
261. ))
262. def test_annotate_errors(err, xycoords, match):
263.     fig, ax = plt.subplots()
264.     with pytest.raises(err, match=match):
265.         ax.annotate('xy', (0, 0), xytext=(0.5, 0.5), xycoords=xycoords)
266.         fig.canvas.draw()
267. 
268. 
269. @image_comparison(['titles'])
270. def test_titles():
271.     # left and right side titles
272.     plt.figure()
273.     ax = plt.subplot(1, 1, 1)
274.     ax.set_title("left title", loc="left")
275.     ax.set_title("right title", loc="right")
276.     ax.set_xticks([])
277.     ax.set_yticks([])
278. 
279. 
280. @image_comparison(['text_alignment'], style='mpl20')
281. def test_alignment():
282.     plt.figure()
283.     ax = plt.subplot(1, 1, 1)
284. 
285.     x = 0.1
286.     for rotation in (0, 30):
287.         for alignment in ('top', 'bottom', 'baseline', 'center'):
288.             ax.text(
289.                 x, 0.5, alignment + " Tj", va=alignment, rotation=rotation,
290.                 bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.5))
291.             ax.text(
292.                 x, 1.0, r'$\sum_{i=0}^{j}$', va=alignment, rotation=rotation)
293.             x += 0.1
294. 
295.     ax.plot([0, 1], [0.5, 0.5])
296.     ax.plot([0, 1], [1.0, 1.0])
297. 
298.     ax.set_xlim(0, 1)
299.     ax.set_ylim(0, 1.5)
300.     ax.set_xticks([])
301.     ax.set_yticks([])
302. 
303. 
304. @image_comparison(['axes_titles.png'])
305. def test_axes_titles():
306.     # Related to issue #3327
307.     plt.figure()
308.     ax = plt.subplot(1, 1, 1)
309.     ax.set_title('center', loc='center', fontsize=20, fontweight=700)
310.     ax.set_title('left', loc='left', fontsize=12, fontweight=400)
311.     ax.set_title('right', loc='right', fontsize=12, fontweight=400)
312. 
313. 
314. def test_set_position():
315.     fig, ax = plt.subplots()
316. 
317.     # test set_position
318.     ann = ax.annotate(
319.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
320.     fig.canvas.draw()
321. 
322.     init_pos = ann.get_window_extent(fig.canvas.renderer)
323.     shift_val = 15
324.     ann.set_position((shift_val, shift_val))
325.     fig.canvas.draw()
326.     post_pos = ann.get_window_extent(fig.canvas.renderer)
327. 
328.     for a, b in zip(init_pos.min, post_pos.min):
329.         assert a + shift_val == b
330. 
331.     # test xyann
332.     ann = ax.annotate(
333.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
334.     fig.canvas.draw()
335. 
336.     init_pos = ann.get_window_extent(fig.canvas.renderer)
337.     shift_val = 15
338.     ann.xyann = (shift_val, shift_val)
339.     fig.canvas.draw()
340.     post_pos = ann.get_window_extent(fig.canvas.renderer)
341. 
342.     for a, b in zip(init_pos.min, post_pos.min):
343.         assert a + shift_val == b
344. 
345. 
346. def test_char_index_at():
347.     fig = plt.figure()
348.     text = fig.text(0.1, 0.9, "")
349. 
350.     text.set_text("i")
351.     bbox = text.get_window_extent()
352.     size_i = bbox.x1 - bbox.x0
353. 
354.     text.set_text("m")
355.     bbox = text.get_window_extent()
356.     size_m = bbox.x1 - bbox.x0
357. 
358.     text.set_text("iiiimmmm")
359.     bbox = text.get_window_extent()
360.     origin = bbox.x0
361. 
362.     assert text._char_index_at(origin - size_i) == 0  # left of first char
363.     assert text._char_index_at(origin) == 0
364.     assert text._char_index_at(origin + 0.499*size_i) == 0
365.     assert text._char_index_at(origin + 0.501*size_i) == 1
366.     assert text._char_index_at(origin + size_i*3) == 3
367.     assert text._char_index_at(origin + size_i*4 + size_m*3) == 7
368.     assert text._char_index_at(origin + size_i*4 + size_m*4) == 8
369.     assert text._char_index_at(origin + size_i*4 + size_m*10) == 8
370. 
371. 
372. @pytest.mark.parametrize('text', ['', 'O'], ids=['empty', 'non-empty'])
373. def test_non_default_dpi(text):
374.     fig, ax = plt.subplots()
375. 
376.     t1 = ax.text(0.5, 0.5, text, ha='left', va='bottom')
377.     fig.canvas.draw()
378.     dpi = fig.dpi
379. 
380.     bbox1 = t1.get_window_extent()
381.     bbox2 = t1.get_window_extent(dpi=dpi * 10)
382.     np.testing.assert_allclose(bbox2.get_points(), bbox1.get_points() * 10,
383.                                rtol=5e-2)
384.     # Text.get_window_extent should not permanently change dpi.
385.     assert fig.dpi == dpi
386. 
387. 
388. def test_get_rotation_string():
389.     assert Text(rotation='horizontal').get_rotation() == 0.
390.     assert Text(rotation='vertical').get_rotation() == 90.
391. 
392. 
393. def test_get_rotation_float():
394.     for i in [15., 16.70, 77.4]:
395.         assert Text(rotation=i).get_rotation() == i
396. 
397. 
398. def test_get_rotation_int():
399.     for i in [67, 16, 41]:
400.         assert Text(rotation=i).get_rotation() == float(i)
401. 
402. 
403. def test_get_rotation_raises():
404.     with pytest.raises(ValueError):
405.         Text(rotation='hozirontal')
406. 
407. 
408. def test_get_rotation_none():
409.     assert Text(rotation=None).get_rotation() == 0.0
410. 
411. 
412. def test_get_rotation_mod360():
413.     for i, j in zip([360., 377., 720+177.2], [0., 17., 177.2]):
414.         assert_almost_equal(Text(rotation=i).get_rotation(), j)
415. 
416. 
417. @pytest.mark.parametrize("ha", ["center", "right", "left"])
418. @pytest.mark.parametrize("va", ["center", "top", "bottom",
419.                                 "baseline", "center_baseline"])
420. def test_null_rotation_with_rotation_mode(ha, va):
421.     fig, ax = plt.subplots()
422.     kw = dict(rotation=0, va=va, ha=ha)
423.     t0 = ax.text(.5, .5, 'test', rotation_mode='anchor', **kw)
424.     t1 = ax.text(.5, .5, 'test', rotation_mode='default', **kw)
425.     fig.canvas.draw()
426.     assert_almost_equal(t0.get_window_extent(fig.canvas.renderer).get_points(),
427.                         t1.get_window_extent(fig.canvas.renderer).get_points())
428. 
429. 
430. @image_comparison(['text_bboxclip'])
431. def test_bbox_clipping():
432.     plt.text(0.9, 0.2, 'Is bbox clipped?', backgroundcolor='r', clip_on=True)
433.     t = plt.text(0.9, 0.5, 'Is fancy bbox clipped?', clip_on=True)
434.     t.set_bbox({"boxstyle": "round, pad=0.1"})
435. 
436. 
437. @image_comparison(['annotation_negative_ax_coords.png'])
438. def test_annotation_negative_ax_coords():
439.     fig, ax = plt.subplots()
440. 
441.     ax.annotate('+ pts',
442.                 xytext=[30, 20], textcoords='axes points',
443.                 xy=[30, 20], xycoords='axes points', fontsize=32)
444.     ax.annotate('- pts',
445.                 xytext=[30, -20], textcoords='axes points',
446.                 xy=[30, -20], xycoords='axes points', fontsize=32,
447.                 va='top')
448.     ax.annotate('+ frac',
449.                 xytext=[0.75, 0.05], textcoords='axes fraction',
450.                 xy=[0.75, 0.05], xycoords='axes fraction', fontsize=32)
451.     ax.annotate('- frac',
452.                 xytext=[0.75, -0.05], textcoords='axes fraction',
453.                 xy=[0.75, -0.05], xycoords='axes fraction', fontsize=32,
454.                 va='top')
455. 
456.     ax.annotate('+ pixels',
457.                 xytext=[160, 25], textcoords='axes pixels',
458.                 xy=[160, 25], xycoords='axes pixels', fontsize=32)
459.     ax.annotate('- pixels',
460.                 xytext=[160, -25], textcoords='axes pixels',
461.                 xy=[160, -25], xycoords='axes pixels', fontsize=32,
462.                 va='top')
463. 
464. 
465. @image_comparison(['annotation_negative_fig_coords.png'])
466. def test_annotation_negative_fig_coords():
467.     fig, ax = plt.subplots()
468. 
469.     ax.annotate('+ pts',
470.                 xytext=[10, 120], textcoords='figure points',
471.                 xy=[10, 120], xycoords='figure points', fontsize=32)
472.     ax.annotate('- pts',
473.                 xytext=[-10, 180], textcoords='figure points',
474.                 xy=[-10, 180], xycoords='figure points', fontsize=32,
475.                 va='top')
476.     ax.annotate('+ frac',
477.                 xytext=[0.05, 0.55], textcoords='figure fraction',
478.                 xy=[0.05, 0.55], xycoords='figure fraction', fontsize=32)
479.     ax.annotate('- frac',
480.                 xytext=[-0.05, 0.5], textcoords='figure fraction',
481.                 xy=[-0.05, 0.5], xycoords='figure fraction', fontsize=32,
482.                 va='top')
483. 
484.     ax.annotate('+ pixels',
485.                 xytext=[50, 50], textcoords='figure pixels',
486.                 xy=[50, 50], xycoords='figure pixels', fontsize=32)
487.     ax.annotate('- pixels',
488.                 xytext=[-50, 100], textcoords='figure pixels',
489.                 xy=[-50, 100], xycoords='figure pixels', fontsize=32,
490.                 va='top')
491. 
492. 
493. def test_text_stale():
494.     fig, (ax1, ax2) = plt.subplots(1, 2)
495.     plt.draw_all()
496.     assert not ax1.stale
497.     assert not ax2.stale
498.     assert not fig.stale
499. 
500.     txt1 = ax1.text(.5, .5, 'aardvark')


File: lib/matplotlib/tests/test_text.py
Line number range: 656 - 664
Content:
def test_annotation_update():
    fig, ax = plt.subplots(1, 1)
    an = ax.annotate('annotation', xy=(0.5, 0.5))
    extent1 = an.get_window_extent(fig.canvas.get_renderer())
    fig.tight_layout()
    extent2 = an.get_window_extent(fig.canvas.get_renderer())

    assert not np.allclose(extent1.get_points(), extent2.get_points(),
                           rtol=1e-6)


File: lib/matplotlib/tests/test_text.py
Line number range: 667 - 676
Content:
@check_figures_equal(extensions=["png"])
def test_annotation_units(fig_test, fig_ref):
    ax = fig_test.add_subplot()
    ax.plot(datetime.now(), 1, "o")  # Implicitly set axes extents.
    ax.annotate("x", (datetime.now(), 0.5), xycoords=("data", "axes fraction"),
                # This used to crash before.
                xytext=(0, 0), textcoords="offset points")
    ax = fig_ref.add_subplot()
    ax.plot(datetime.now(), 1, "o")
    ax.annotate("x", (datetime.now(), 0.5), xycoords=("data", "axes fraction"))


File: lib/matplotlib/tests/test_text.py
Line number range: 901 - 914
Content:
def test_annotate_offset_fontsize():
    # Test that offset_fontsize parameter works and uses accurate values
    fig, ax = plt.subplots()
    text_coords = ['offset points', 'offset fontsize']
    # 10 points should be equal to 1 fontsize unit at fontsize=10
    xy_text = [(10, 10), (1, 1)]
    anns = [ax.annotate('test', xy=(0.5, 0.5),
                        xytext=xy_text[i],
                        fontsize='10',
                        xycoords='data',
                        textcoords=text_coords[i]) for i in range(2)]
    points_coords, fontsize_coords = [ann.get_window_extent() for ann in anns]
    fig.canvas.draw()
    assert str(points_coords) == str(fontsize_coords)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 12:31:30,756 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user query asks for the 'full content' of the file 'lib/matplotlib/tests/test_text.py'.\n2. Extended relevance:\n   - This context is a large portion of the requested file. Providing all available content from the file is necessary to answer the user's query.", relative_path='lib/matplotlib/tests/test_text.py', start_line=1, end_line=500), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user query asks for the 'full content' of the file 'lib/matplotlib/tests/test_text.py'.\n2. Extended relevance:\n   - This context is a portion of the requested file, containing the 'test_annotation_update' function which is relevant to the user's interest in 'ax.annotate'. Providing all available content from the file is necessary to answer the user's query.", relative_path='lib/matplotlib/tests/test_text.py', start_line=656, end_line=664), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user query asks for the 'full content' of the file 'lib/matplotlib/tests/test_text.py'.\n2. Extended relevance:\n   - This context is a portion of the requested file, containing the 'test_annotation_units' function which is relevant to the user's interest in 'ax.annotate'. Providing all available content from the file is necessary to answer the user's query.", relative_path='lib/matplotlib/tests/test_text.py', start_line=667, end_line=676), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user query asks for the 'full content' of the file 'lib/matplotlib/tests/test_text.py'.\n2. Extended relevance:\n   - This context is a portion of the requested file, containing the 'test_annotate_offset_fontsize' function which is relevant to the user's interest in 'ax.annotate'. Providing all available content from the file is necessary to answer the user's query.", relative_path='lib/matplotlib/tests/test_text.py', start_line=901, end_line=914)]
2025-12-21 12:31:30,777 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 4 contexts to memory for query: Please provide the full content of lib/matplotlib/tests/test_text.py.
2025-12-21 12:31:30,778 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 12:31:30,778 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 12:31:30,779 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 4 new contexts to 0 existing contexts
2025-12-21 12:31:30,779 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-21 12:31:30,780 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   ├── deploy-docs.sh
|   └── fetch_doc_logs.py
├── .devcontainer
|   └── setup.sh
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── cygwin.yml
|       ├── good-first-issue.yml
|       ├── mypy-stubtest.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       ├── stale.yml
|       └── tests.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   ├── codespell-ignore-words.txt
|   ├── export_sdist_name.py
|   └── mypy-stubtest-allowlist.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── image-rotator.js
|   |   ├── markers
|   |   ├── mpl.css
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   ├── autosummary_class_only.rst
|   |   ├── cheatsheet_sidebar.html
|   |   ├── donate_sidebar.html
|   |   ├── function.rst
|   |   ├── pagesource.html
|   |   ├── search.html
|   |   ├── sections
|   |   |   └── announcement.html
|   |   ├── sidebar_announcement.html
|   |   └── sidebar_versions.html
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24661-AAMW.rst
|   |   |   |   ├── 25044-YI.rst
|   |   |   |   ├── 25061-DS.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25112-GG.rst
|   |   |   |   ├── 25192-DS.rst
|   |   |   |   ├── 25247-AL.rst
|   |   |   |   ├── 25255-RR.rst
|   |   |   |   ├── 25361-TAC.rst
|   |   |   |   ├── 25456-AL.rst
|   |   |   |   ├── 25697-AL.rst
|   |   |   |   ├── 25775-HZ.rst
|   |   |   |   ├── 26096-GL.rst
|   |   |   |   └── 26164-OG.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23200-OG.rst
|   |   |   |   ├── 24312-AL.rst
|   |   |   |   ├── 24913-AL.rst
|   |   |   |   ├── 24985-OG.rst
|   |   |   |   ├── 24990-OG.rst
|   |   |   |   ├── 25027-GL.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25138-AL.rst
|   |   |   |   ├── 25247-AL.rst
|   |   |   |   ├── 25282-AL.rst
|   |   |   |   ├── 25352-GL.rst
|   |   |   |   ├── 25427-AL.rst
|   |   |   |   ├── 25469-AL.rst
|   |   |   |   ├── 25484-AL.rst
|   |   |   |   ├── 25557-AL.rst
|   |   |   |   ├── 25559-AL.rst
|   |   |   |   ├── 25584-KS.rst
|   |   |   |   ├── 25588-KS.rst
|   |   |   |   ├── 25651-REC.rst
|   |   |   |   ├── 25708-AL.rst
|   |   |   |   ├── 25728-OG.rst
|   |   |   |   ├── 25742-ES.rst
|   |   |   |   ├── 25774-AL.rst
|   |   |   |   ├── 25781-AL.rst
|   |   |   |   ├── 25841-AL.rst
|   |   |   |   ├── 25859-ES.rst
|   |   |   |   ├── 25889-AL.rst
|   |   |   |   ├── 26056-OG.rst
|   |   |   |   ├── 26190-AL.rst
|   |   |   |   ├── 26241-AL.rst
|   |   |   |   ├── 26294-AL.rst
|   |   |   |   ├── 26295-AL.rst
|   |   |   |   ├── 26329-AL.rst
|   |   |   |   ├── 26399-REC.rst
|   |   |   |   ├── 26444-ES.rst
|   |   |   |   └── 26780-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24919-KS.rst
|   |   |   |   ├── 24976-KS.rst
|   |   |   |   ├── 25363-OG.rst
|   |   |   |   └── 25475-ES.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24923-ES.rst
|   |   |       ├── 24942-OG.rst
|   |   |       ├── 24984-OG.rst
|   |   |       ├── 25456-AL.rst
|   |   |       ├── 25584-KS.rst
|   |   |       └── 25648-TS.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.6.0.rst
|   |   |   ├── api_changes_3.6.1.rst
|   |   |   ├── api_changes_3.7.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.7.0.rst
|   |   ├── projections
|   |   |   ├── geo.rst
|   |   |   └── polar.rst
|   |   ├── projections_api.rst
|   |   ├── pylab.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_figmpl_directive_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── typing_api.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contribute.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── document.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_axis_positions.rst
|       |   ├── 3d_hover_coordinates.rst
|       |   ├── 3d_plots_shareview.rst
|       |   ├── README.rst
|       |   ├── antialiasing_text_annotation.rst
|       |   ├── auto_minor_tick.rst
|       |   ├── axline_setters.rst
|       |   ├── boldsym_mathtext.rst
|       |   ├── contour_clip_path.rst
|       |   ├── ecdf.rst
|       |   ├── get_suptitle.rst
|       |   ├── get_vertices_co_vertices.rst
|       |   ├── legend_shadow_colors.rst
|       |   ├── macosx_windows_tabs.rst
|       |   ├── mathtext_delimiters.rst
|       |   ├── mathtext_features.rst
|       |   ├── mathtext_relation_operators.rst
|       |   ├── mathtext_supports_text.rst
|       |   ├── mpl_toolkit_pep420.rst
|       |   ├── multiplelocator_offset.rst
|       |   ├── new_color_spec_tuple.rst
|       |   ├── pie_shadow_control.rst
|       |   ├── plot_directive_srcset.rst
|       |   ├── polyquadmesh.rst
|       |   ├── rcParams[legend.loc]_supports_float_tuple.rst
|       |   ├── savefig_bbox_layout.rst
|       |   ├── set_loc.rst
|       |   ├── shadow_shade.rst
|       |   ├── spinesproxyset.rst
|       |   ├── tick_labelfont_param.rst
|       |   └── updated_mathtext.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── github_stats_3.6.0.rst
|       |   ├── github_stats_3.6.1.rst
|       |   ├── github_stats_3.6.2.rst
|       |   ├── github_stats_3.6.3.rst
|       |   ├── github_stats_3.7.0.rst
|       |   ├── github_stats_3.7.1.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   ├── whats_new_3.6.0.rst
|       |   └── whats_new_3.7.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── galleries
|   ├── examples
|   |   ├── README.txt
|   |   ├── animation
|   |   |   ├── README.txt
|   |   |   ├── animate_decay.py
|   |   |   ├── animated_histogram.py
|   |   |   ├── animation_demo.py
|   |   |   ├── bayes_update.py
|   |   |   ├── double_pendulum.py
|   |   |   ├── dynamic_image.py
|   |   |   ├── frame_grabbing_sgskip.py
|   |   |   ├── multiple_axes.py
|   |   |   ├── pause_resume.py
|   |   |   ├── rain.py
|   |   |   ├── random_walk.py
|   |   |   ├── simple_anim.py
|   |   |   ├── simple_scatter.py
|   |   |   ├── strip_chart.py
|   |   |   └── unchained.py
|   |   ├── axes_grid1
|   |   |   ├── README.txt
|   |   |   ├── demo_anchored_direction_arrows.py
|   |   |   ├── demo_axes_divider.py
|   |   |   ├── demo_axes_grid.py
|   |   |   ├── demo_axes_grid2.py
|   |   |   ├── demo_axes_hbox_divider.py
|   |   |   ├── demo_axes_rgb.py
|   |   |   ├── demo_colorbar_of_inset_axes.py
|   |   |   ├── demo_colorbar_with_axes_divider.py
|   |   |   ├── demo_colorbar_with_inset_locator.py
|   |   |   ├── demo_edge_colorbar.py
|   |   |   ├── demo_fixed_size_axes.py
|   |   |   ├── demo_imagegrid_aspect.py
|   |   |   ├── inset_locator_demo.py
|   |   |   ├── inset_locator_demo2.py
|   |   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   |   ├── parasite_simple.py
|   |   |   ├── parasite_simple2.py
|   |   |   ├── scatter_hist_locatable_axes.py
|   |   |   ├── simple_anchored_artists.py
|   |   |   ├── simple_axes_divider1.py
|   |   |   ├── simple_axes_divider3.py
|   |   |   ├── simple_axesgrid.py
|   |   |   ├── simple_axesgrid2.py
|   |   |   ├── simple_axisline4.py
|   |   |   └── simple_colorbar.py
|   |   ├── axisartist
|   |   |   ├── README.txt
|   |   |   ├── axis_direction.py
|   |   |   ├── demo_axis_direction.py
|   |   |   ├── demo_axisline_style.py
|   |   |   ├── demo_curvelinear_grid.py
|   |   |   ├── demo_curvelinear_grid2.py
|   |   |   ├── demo_floating_axes.py
|   |   |   ├── demo_floating_axis.py
|   |   |   ├── demo_parasite_axes.py
|   |   |   ├── demo_parasite_axes2.py
|   |   |   ├── demo_ticklabel_alignment.py
|   |   |   ├── demo_ticklabel_direction.py
|   |   |   ├── simple_axis_direction01.py
|   |   |   ├── simple_axis_direction03.py
|   |   |   ├── simple_axis_pad.py
|   |   |   ├── simple_axisartist1.py
|   |   |   ├── simple_axisline.py
|   |   |   └── simple_axisline3.py
|   |   ├── color
|   |   |   ├── README.txt
|   |   |   ├── color_by_yvalue.py
|   |   |   ├── color_cycle_default.py
|   |   |   ├── color_demo.py
|   |   |   ├── colorbar_basics.py
|   |   |   ├── colormap_reference.py
|   |   |   ├── custom_cmap.py
|   |   |   ├── named_colors.py
|   |   |   └── set_alpha.py
|   |   ├── event_handling
|   |   |   ├── README.txt
|   |   |   ├── close_event.py
|   |   |   ├── coords_demo.py
|   |   |   ├── cursor_demo.py
|   |   |   ├── data_browser.py
|   |   |   ├── figure_axes_enter_leave.py
|   |   |   ├── ginput_manual_clabel_sgskip.py
|   |   |   ├── image_slices_viewer.py
|   |   |   ├── keypress_demo.py
|   |   |   ├── lasso_demo.py
|   |   |   ├── legend_picking.py
|   |   |   ├── looking_glass.py
|   |   |   ├── path_editor.py
|   |   |   ├── pick_event_demo.py
|   |   |   ├── pick_event_demo2.py
|   |   |   ├── poly_editor.py
|   |   |   ├── pong_sgskip.py
|   |   |   ├── resample.py
|   |   |   ├── timers.py
|   |   |   ├── trifinder_event_demo.py
|   |   |   ├── viewlims.py
|   |   |   └── zoom_window.py
|   |   ├── images_contours_and_fields
|   |   |   ├── README.txt
|   |   |   ├── affine_image.py
|   |   |   ├── barb_demo.py
|   |   |   ├── barcode_demo.py
|   |   |   ├── colormap_interactive_adjustment.py
|   |   |   ├── colormap_normalizations.py
|   |   |   ├── colormap_normalizations_symlognorm.py
|   |   |   ├── contour_corner_mask.py
|   |   |   ├── contour_demo.py
|   |   |   ├── contour_image.py
|   |   |   ├── contour_label_demo.py
|   |   |   ├── contourf_demo.py
|   |   |   ├── contourf_hatching.py
|   |   |   ├── contourf_log.py
|   |   |   ├── contours_in_optimization_demo.py
|   |   |   ├── demo_bboximage.py
|   |   |   ├── figimage_demo.py
|   |   |   ├── image_annotated_heatmap.py
|   |   |   ├── image_antialiasing.py
|   |   |   ├── image_clip_path.py
|   |   |   ├── image_demo.py
|   |   |   ├── image_masked.py
|   |   |   ├── image_nonuniform.py
|   |   |   ├── image_transparency_blend.py
|   |   |   ├── image_zcoord.py
|   |   |   ├── interpolation_methods.py
|   |   |   ├── irregulardatagrid.py
|   |   |   ├── layer_images.py
|   |   |   ├── matshow.py
|   |   |   ├── multi_image.py
|   |   |   ├── pcolor_demo.py
|   |   |   ├── pcolormesh_grids.py
|   |   |   ├── pcolormesh_levels.py
|   |   |   ├── plot_streamplot.py
|   |   |   ├── quadmesh_demo.py
|   |   |   ├── quiver_demo.py
|   |   |   ├── quiver_simple_demo.py
|   |   |   ├── shading_example.py
|   |   |   ├── specgram_demo.py
|   |   |   ├── spy_demos.py
|   |   |   ├── tricontour_demo.py
|   |   |   ├── tricontour_smooth_delaunay.py
|   |   |   ├── tricontour_smooth_user.py
|   |   |   ├── trigradient_demo.py
|   |   |   ├── triinterp_demo.py
|   |   |   ├── tripcolor_demo.py
|   |   |   ├── triplot_demo.py
|   |   |   └── watermark_image.py
|   |   ├── lines_bars_and_markers
|   |   |   ├── README.txt
|   |   |   ├── bar_colors.py
|   |   |   ├── bar_label_demo.py
|   |   |   ├── bar_stacked.py
|   |   |   ├── barchart.py
|   |   |   ├── barh.py
|   |   |   ├── broken_barh.py
|   |   |   ├── capstyle.py
|   |   |   ├── categorical_variables.py
|   |   |   ├── cohere.py
|   |   |   ├── csd_demo.py
|   |   |   ├── curve_error_band.py
|   |   |   ├── errorbar_limits_simple.py
|   |   |   ├── errorbar_subsample.py
|   |   |   ├── eventcollection_demo.py
|   |   |   ├── eventplot_demo.py
|   |   |   ├── fill.py
|   |   |   ├── fill_between_alpha.py
|   |   |   ├── fill_between_demo.py
|   |   |   ├── fill_betweenx_demo.py
|   |   |   ├── filled_step.py
|   |   |   ├── gradient_bar.py
|   |   |   ├── hat_graph.py
|   |   |   ├── horizontal_barchart_distribution.py
|   |   |   ├── joinstyle.py
|   |   |   ├── line_demo_dash_control.py
|   |   |   ├── lines_with_ticks_demo.py
|   |   |   ├── linestyles.py
|   |   |   ├── marker_reference.py
|   |   |   ├── markevery_demo.py
|   |   |   ├── masked_demo.py
|   |   |   ├── multicolored_line.py
|   |   |   ├── multivariate_marker_plot.py
|   |   |   ├── psd_demo.py
|   |   |   ├── scatter_demo2.py
|   |   |   ├── scatter_hist.py
|   |   |   ├── scatter_masked.py
|   |   |   ├── scatter_star_poly.py
|   |   |   ├── scatter_with_legend.py
|   |   |   ├── simple_plot.py
|   |   |   ├── span_regions.py
|   |   |   ├── spectrum_demo.py
|   |   |   ├── stackplot_demo.py
|   |   |   ├── stairs_demo.py
|   |   |   ├── stem_plot.py
|   |   |   ├── step_demo.py
|   |   |   ├── timeline.py
|   |   |   ├── vline_hline_demo.py
|   |   |   └── xcorr_acorr_demo.py
|   |   ├── misc
|   |   |   ├── README.txt
|   |   |   ├── anchored_artists.py
|   |   |   ├── bbox_intersect.py
|   |   |   ├── contour_manual.py
|   |   |   ├── coords_report.py
|   |   |   ├── custom_projection.py
|   |   |   ├── customize_rc.py
|   |   |   ├── demo_agg_filter.py
|   |   |   ├── demo_ribbon_box.py
|   |   |   ├── fig_x.py
|   |   |   ├── fill_spiral.py
|   |   |   ├── findobj_demo.py
|   |   |   ├── font_indexing.py
|   |   |   ├── ftface_props.py
|   |   |   ├── histogram_path.py
|   |   |   ├── hyperlinks_sgskip.py
|   |   |   ├── image_thumbnail_sgskip.py
|   |   |   ├── keyword_plotting.py
|   |   |   ├── logos2.py
|   |   |   ├── multipage_pdf.py
|   |   |   ├── multiprocess_sgskip.py
|   |   |   ├── packed_bubbles.py
|   |   |   ├── patheffect_demo.py
|   |   |   ├── print_stdout_sgskip.py
|   |   |   ├── rasterization_demo.py
|   |   |   ├── set_and_get.py
|   |   |   ├── svg_filter_line.py
|   |   |   ├── svg_filter_pie.py
|   |   |   ├── table_demo.py
|   |   |   ├── tickedstroke_demo.py
|   |   |   ├── transoffset.py
|   |   |   └── zorder_demo.py
|   |   ├── mplot3d
|   |   |   ├── 2dcollections3d.py
|   |   |   ├── 3d_bars.py
|   |   |   ├── README.txt
|   |   |   ├── bars3d.py
|   |   |   ├── box3d.py
|   |   |   ├── contour3d.py
|   |   |   ├── contour3d_2.py
|   |   |   ├── contour3d_3.py
|   |   |   ├── contourf3d.py
|   |   |   ├── contourf3d_2.py
|   |   |   ├── custom_shaded_3d_surface.py
|   |   |   ├── errorbar3d.py
|   |   |   ├── hist3d.py
|   |   |   ├── lines3d.py
|   |   |   ├── lorenz_attractor.py
|   |   |   ├── mixed_subplots.py
|   |   |   ├── offset.py
|   |   |   ├── pathpatch3d.py
|   |   |   ├── polys3d.py
|   |   |   ├── projections.py
|   |   |   ├── quiver3d.py
|   |   |   ├── rotate_axes3d_sgskip.py
|   |   |   ├── scatter3d.py
|   |   |   ├── stem3d_demo.py
|   |   |   ├── subplot3d.py
|   |   |   ├── surface3d.py
|   |   |   ├── surface3d_2.py
|   |   |   ├── surface3d_3.py
|   |   |   ├── surface3d_radial.py
|   |   |   ├── text3d.py
|   |   |   ├── tricontour3d.py
|   |   |   ├── tricontourf3d.py
|   |   |   ├── trisurf3d.py
|   |   |   ├── trisurf3d_2.py
|   |   |   ├── view_planes_3d.py
|   |   |   ├── voxels.py
|   |   |   ├── voxels_numpy_logo.py
|   |   |   ├── voxels_rgb.py
|   |   |   ├── voxels_torus.py
|   |   |   ├── wire3d.py
|   |   |   ├── wire3d_animation_sgskip.py
|   |   |   └── wire3d_zero_stride.py
|   |   ├── pie_and_polar_charts
|   |   |   ├── README.txt
|   |   |   ├── bar_of_pie.py
|   |   |   ├── nested_pie.py
|   |   |   ├── pie_and_donut_labels.py
|   |   |   ├── pie_features.py
|   |   |   ├── polar_bar.py
|   |   |   ├── polar_demo.py
|   |   |   ├── polar_error_caps.py
|   |   |   ├── polar_legend.py
|   |   |   └── polar_scatter.py
|   |   ├── pyplots
|   |   |   ├── README.txt
|   |   |   ├── axline.py
|   |   |   ├── pyplot_simple.py
|   |   |   ├── pyplot_text.py
|   |   |   ├── pyplot_three.py
|   |   |   └── pyplot_two_subplots.py
|   |   ├── scales
|   |   |   ├── README.txt
|   |   |   ├── asinh_demo.py
|   |   |   ├── aspect_loglog.py
|   |   |   ├── custom_scale.py
|   |   |   ├── log_bar.py
|   |   |   ├── log_demo.py
|   |   |   ├── logit_demo.py
|   |   |   ├── power_norm.py
|   |   |   ├── scales.py
|   |   |   ├── semilogx_demo.py
|   |   |   └── symlog_demo.py
|   |   ├── shapes_and_collections
|   |   |   ├── README.txt
|   |   |   ├── arrow_guide.py
|   |   |   ├── artist_reference.py
|   |   |   ├── collections.py
|   |   |   ├── compound_path.py
|   |   |   ├── dolphin.py
|   |   |   ├── donut.py
|   |   |   ├── ellipse_arrow.py
|   |   |   ├── ellipse_collection.py
|   |   |   ├── ellipse_demo.py
|   |   |   ├── fancybox_demo.py
|   |   |   ├── hatch_demo.py
|   |   |   ├── hatch_style_reference.py
|   |   |   ├── line_collection.py
|   |   |   ├── patch_collection.py
|   |   |   ├── path_patch.py
|   |   |   ├── quad_bezier.py
|   |   |   └── scatter.py
|   |   ├── showcase
|   |   |   ├── README.txt
|   |   |   ├── anatomy.py
|   |   |   ├── firefox.py
|   |   |   ├── integral.py
|   |   |   ├── mandelbrot.py
|   |   |   ├── stock_prices.py
|   |   |   └── xkcd.py
|   |   ├── specialty_plots
|   |   |   ├── README.txt
|   |   |   ├── advanced_hillshading.py
|   |   |   ├── anscombe.py
|   |   |   ├── hinton_demo.py
|   |   |   ├── ishikawa_diagram.py
|   |   |   ├── leftventricle_bullseye.py
|   |   |   ├── mri_with_eeg.py
|   |   |   ├── radar_chart.py
|   |   |   ├── sankey_basics.py
|   |   |   ├── sankey_links.py
|   |   |   ├── sankey_rankine.py
|   |   |   ├── skewt.py
|   |   |   └── topographic_hillshading.py
|   |   ├── spines
|   |   |   ├── README.txt
|   |   |   ├── centered_spines_with_arrows.py
|   |   |   ├── multiple_yaxis_with_spines.py
|   |   |   ├── spine_placement_demo.py
|   |   |   ├── spines.py
|   |   |   └── spines_dropped.py
|   |   ├── statistics
|   |   |   ├── README.txt
|   |   |   ├── barchart_demo.py
|   |   |   ├── boxplot.py
|   |   |   ├── boxplot_color.py
|   |   |   ├── boxplot_demo.py
|   |   |   ├── boxplot_vs_violin.py
|   |   |   ├── bxp.py
|   |   |   ├── confidence_ellipse.py
|   |   |   ├── customized_violin.py
|   |   |   ├── errorbar.py
|   |   |   ├── errorbar_features.py
|   |   |   ├── errorbar_limits.py
|   |   |   ├── errorbars_and_boxes.py
|   |   |   ├── hexbin_demo.py
|   |   |   ├── hist.py
|   |   |   ├── histogram_cumulative.py
|   |   |   ├── histogram_features.py
|   |   |   ├── histogram_histtypes.py
|   |   |   ├── histogram_multihist.py
|   |   |   ├── multiple_histograms_side_by_side.py
|   |   |   ├── time_series_histogram.py
|   |   |   └── violinplot.py
|   |   ├── style_sheets
|   |   |   ├── README.txt
|   |   |   ├── bmh.py
|   |   |   ├── dark_background.py
|   |   |   ├── fivethirtyeight.py
|   |   |   ├── ggplot.py
|   |   |   ├── grayscale.py
|   |   |   ├── plot_solarizedlight2.py
|   |   |   └── style_sheets_reference.py
|   |   ├── subplots_axes_and_figures
|   |   |   ├── README.txt
|   |   |   ├── align_labels_demo.py
|   |   |   ├── auto_subplots_adjust.py
|   |   |   ├── axes_box_aspect.py
|   |   |   ├── axes_demo.py
|   |   |   ├── axes_margins.py
|   |   |   ├── axes_props.py
|   |   |   ├── axes_zoom_effect.py
|   |   |   ├── axhspan_demo.py
|   |   |   ├── axis_equal_demo.py
|   |   |   ├── axis_labels_demo.py
|   |   |   ├── broken_axis.py
|   |   |   ├── custom_figure_class.py
|   |   |   ├── demo_constrained_layout.py
|   |   |   ├── demo_tight_layout.py
|   |   |   ├── fahrenheit_celsius_scales.py
|   |   |   ├── figure_size_units.py
|   |   |   ├── figure_title.py
|   |   |   ├── ganged_plots.py
|   |   |   ├── geo_demo.py
|   |   |   ├── gridspec_and_subplots.py
|   |   |   ├── gridspec_multicolumn.py
|   |   |   ├── gridspec_nested.py
|   |   |   ├── invert_axes.py
|   |   |   ├── multiple_figs_demo.py
|   |   |   ├── secondary_axis.py
|   |   |   ├── share_axis_lims_views.py
|   |   |   ├── shared_axis_demo.py
|   |   |   ├── subfigures.py
|   |   |   ├── subplot.py
|   |   |   ├── subplots_adjust.py
|   |   |   ├── subplots_demo.py
|   |   |   ├── two_scales.py
|   |   |   └── zoom_inset_axes.py
|   |   ├── text_labels_and_annotations
|   |   |   ├── README.txt
|   |   |   ├── accented_text.py
|   |   |   ├── align_ylabels.py
|   |   |   ├── angle_annotation.py
|   |   |   ├── angles_on_bracket_arrows.py
|   |   |   ├── annotate_transform.py
|   |   |   ├── annotation_basic.py
|   |   |   ├── annotation_demo.py
|   |   |   ├── annotation_polar.py
|   |   |   ├── arrow_demo.py
|   |   |   ├── autowrap.py
|   |   |   ├── custom_legends.py
|   |   |   ├── date.py
|   |   |   ├── demo_annotation_box.py
|   |   |   ├── demo_text_path.py
|   |   |   ├── demo_text_rotation_mode.py
|   |   |   ├── dfrac_demo.py
|   |   |   ├── engineering_formatter.py
|   |   |   ├── fancyarrow_demo.py
|   |   |   ├── fancytextbox_demo.py
|   |   |   ├── figlegend_demo.py
|   |   |   ├── font_family_rc.py
|   |   |   ├── font_file.py
|   |   |   ├── font_table.py
|   |   |   ├── fonts_demo.py
|   |   |   ├── fonts_demo_kw.py
|   |   |   ├── label_subplots.py
|   |   |   ├── legend.py
|   |   |   ├── legend_demo.py
|   |   |   ├── line_with_text.py
|   |   |   ├── mathtext_asarray.py
|   |   |   ├── mathtext_demo.py
|   |   |   ├── mathtext_examples.py
|   |   |   ├── mathtext_fontfamily_example.py
|   |   |   ├── multiline.py
|   |   |   ├── placing_text_boxes.py
|   |   |   ├── rainbow_text.py
|   |   |   ├── stix_fonts_demo.py
|   |   |   ├── tex_demo.py
|   |   |   ├── text_alignment.py
|   |   |   ├── text_commands.py
|   |   |   ├── text_fontdict.py
|   |   |   ├── text_rotation_relative_to_line.py
|   |   |   ├── titles_demo.py
|   |   |   ├── unicode_minus.py
|   |   |   ├── usetex_baseline_test.py
|   |   |   ├── usetex_fonteffects.py
|   |   |   └── watermark_text.py
|   |   ├── ticks
|   |   |   ├── README.txt
|   |   |   ├── auto_ticks.py
|   |   |   ├── centered_ticklabels.py
|   |   |   ├── colorbar_tick_labelling_demo.py
|   |   |   ├── custom_ticker1.py
|   |   |   ├── date_concise_formatter.py
|   |   |   ├── date_demo_convert.py
|   |   |   ├── date_demo_rrule.py
|   |   |   ├── date_formatters_locators.py
|   |   |   ├── date_index_formatter.py
|   |   |   ├── date_precision_and_epochs.py
|   |   |   ├── dollar_ticks.py
|   |   |   ├── fig_axes_customize_simple.py
|   |   |   ├── major_minor_demo.py
|   |   |   ├── scalarformatter.py
|   |   |   ├── tick-formatters.py
|   |   |   ├── tick-locators.py
|   |   |   ├── tick_label_right.py
|   |   |   ├── tick_labels_from_values.py
|   |   |   ├── tick_xlabel_top.py
|   |   |   ├── ticklabels_rotation.py
|   |   |   └── ticks_too_many.py
|   |   ├── units
|   |   |   ├── README.txt
|   |   |   ├── annotate_with_units.py
|   |   |   ├── artist_tests.py
|   |   |   ├── bar_demo2.py
|   |   |   ├── bar_unit_demo.py
|   |   |   ├── basic_units.py
|   |   |   ├── ellipse_with_units.py
|   |   |   ├── evans_test.py
|   |   |   ├── radian_demo.py
|   |   |   ├── units_sample.py
|   |   |   └── units_scatter.py
|   |   ├── user_interfaces
|   |   |   ├── README.txt
|   |   |   ├── canvasagg.py
|   |   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk3_sgskip.py
|   |   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk4_sgskip.py
|   |   |   ├── embedding_in_qt_sgskip.py
|   |   |   ├── embedding_in_tk_sgskip.py
|   |   |   ├── embedding_in_wx2_sgskip.py
|   |   |   ├── embedding_in_wx3_sgskip.py
|   |   |   ├── embedding_in_wx4_sgskip.py
|   |   |   ├── embedding_in_wx5_sgskip.py
|   |   |   ├── embedding_webagg_sgskip.py
|   |   |   ├── fourier_demo_wx_sgskip.py
|   |   |   ├── gtk3_spreadsheet_sgskip.py
|   |   |   ├── gtk4_spreadsheet_sgskip.py
|   |   |   ├── images
|   |   |   ├── mathtext_wx_sgskip.py
|   |   |   ├── mpl_with_glade3_sgskip.py
|   |   |   ├── mplcvd.py
|   |   |   ├── pylab_with_gtk3_sgskip.py
|   |   |   ├── pylab_with_gtk4_sgskip.py
|   |   |   ├── svg_histogram_sgskip.py
|   |   |   ├── svg_tooltip_sgskip.py
|   |   |   ├── toolmanager_sgskip.py
|   |   |   ├── web_application_server_sgskip.py
|   |   |   └── wxcursor_demo_sgskip.py
|   |   ├── userdemo
|   |   |   ├── README.txt
|   |   |   ├── annotate_explain.py
|   |   |   ├── annotate_text_arrow.py
|   |   |   ├── connectionstyle_demo.py
|   |   |   ├── custom_boxstyle01.py
|   |   |   ├── demo_gridspec01.py
|   |   |   ├── demo_gridspec03.py
|   |   |   ├── demo_gridspec06.py
|   |   |   ├── pgf_fonts.py
|   |   |   ├── pgf_preamble_sgskip.py
|   |   |   ├── pgf_texsystem.py
|   |   |   ├── simple_annotate01.py
|   |   |   ├── simple_legend01.py
|   |   |   └── simple_legend02.py
|   |   └── widgets
|   |       ├── README.txt
|   |       ├── annotated_cursor.py
|   |       ├── buttons.py
|   |       ├── check_buttons.py
|   |       ├── cursor.py
|   |       ├── lasso_selector_demo_sgskip.py
|   |       ├── menu.py
|   |       ├── mouse_cursor.py
|   |       ├── multicursor.py
|   |       ├── polygon_selector_demo.py
|   |       ├── polygon_selector_simple.py
|   |       ├── radio_buttons.py
|   |       ├── range_slider.py
|   |       ├── rectangle_selector.py
|   |       ├── slider_demo.py
|   |       ├── slider_snap_demo.py
|   |       ├── span_selector.py
|   |       └── textbox.py
|   ├── plot_types
|   |   ├── 3D
|   |   |   ├── README.rst
|   |   |   ├── scatter3d_simple.py
|   |   |   ├── surface3d_simple.py
|   |   |   ├── trisurf3d_simple.py
|   |   |   ├── voxels_simple.py
|   |   |   └── wire3d_simple.py
|   |   ├── README.rst
|   |   ├── arrays
|   |   |   ├── README.rst
|   |   |   ├── barbs.py
|   |   |   ├── contour.py
|   |   |   ├── contourf.py
|   |   |   ├── imshow.py
|   |   |   ├── pcolormesh.py
|   |   |   ├── quiver.py
|   |   |   └── streamplot.py
|   |   ├── basic
|   |   |   ├── README.rst
|   |   |   ├── bar.py
|   |   |   ├── fill_between.py
|   |   |   ├── plot.py
|   |   |   ├── scatter_plot.py
|   |   |   ├── stackplot.py
|   |   |   ├── stairs.py
|   |   |   └── stem.py
|   |   ├── stats
|   |   |   ├── README.rst
|   |   |   ├── boxplot_plot.py
|   |   |   ├── ecdf.py
|   |   |   ├── errorbar_plot.py
|   |   |   ├── eventplot.py
|   |   |   ├── hexbin.py
|   |   |   ├── hist2d.py
|   |   |   ├── hist_plot.py
|   |   |   ├── pie.py
|   |   |   └── violin.py
|   |   └── unstructured
|   |       ├── README.rst
|   |       ├── tricontour.py
|   |       ├── tricontourf.py
|   |       ├── tripcolor.py
|   |       └── triplot.py
|   ├── tutorials
|   |   ├── artists.py
|   |   ├── images.py
|   |   ├── index.rst
|   |   ├── lifecycle.py
|   |   └── pyplot.py
|   └── users_explain
|       ├── animations
|       |   ├── README.txt
|       |   ├── animations.py
|       |   └── blitting.py
|       ├── artists
|       |   ├── artist_intro.rst
|       |   ├── color_cycle.py
|       |   ├── imshow_extent.py
|       |   ├── index.rst
|       |   ├── patheffects_guide.py
|       |   ├── paths.py
|       |   ├── performance.rst
|       |   └── transforms_tutorial.py
|       ├── axes
|       |   ├── arranging_axes.py
|       |   ├── autoscale.py
|       |   ├── axes_intro.rst
|       |   ├── axes_scales.py
|       |   ├── axes_ticks.py
|       |   ├── colorbar_placement.py
|       |   ├── constrainedlayout_guide.py
|       |   ├── index.rst
|       |   ├── legend_guide.py
|       |   ├── mosaic.py
|       |   └── tight_layout_guide.py
|       ├── colors
|       |   ├── README.txt
|       |   ├── colorbar_only.py
|       |   ├── colormap-manipulation.py
|       |   ├── colormapnorms.py
|       |   ├── colormaps.py
|       |   └── colors.py
|       ├── customizing.py
|       ├── figure
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── figure_intro.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── index.rst
|       ├── quick_start.py
|       ├── text
|       |   ├── README.txt
|       |   ├── annotations.py
|       |   ├── fonts.py
|       |   ├── mathtext.py
|       |   ├── pgf.py
|       |   ├── text_intro.py
|       |   ├── text_props.py
|       |   └── usetex.py
|       └── toolkits
|           ├── axes_grid.rst
|           ├── axisartist.rst
|           ├── index.rst
|           └── mplot3d.rst
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── all_figures.html
|   |   |       ├── css
|   |   |       ├── ipython_inline_figure.html
|   |   |       ├── js
|   |   |       └── single_figure.html
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   |   └── plot_directive.css
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── figmpl_directive.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── nestedpage
|   |   |       ├── nestedpage2
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── typing.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           ├── test_axes3d.py
|   |           └── test_legend3d.py
|   └── pylab.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       ├── minver.txt
|       └── mypy.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
└── tools
    ├── README.txt
    ├── boilerplate.py
    ├── cache_zenodo_svg.py
    ├── check_typehints.py
    ├── create_DejaVuDisplay.sh
    ├── embed_js.py
    ├── gh_api.py
    ├── github_stats.py
    ├── make_icons.py
    ├── memleak.py
    ├── run_examples.py
    ├── subset.py
    ├── triage_tests.py
    └── visualize_tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Updating an array passed as the xy parameter to annotate updates the anottation

Description: ### Bug report

**Bug summary**
When an array is used as the _xy_ kwarg for an annotation that includes arrows, changing the array after calling the function changes the arrow position. It is very likely that the same array is kept instead of a copy.

**Code for reproduction**


```python
fig = plt.figure("test")

ax = fig.add_axes([0.13, 0.15, .8, .8])
ax.set_xlim(-5, 5)
ax.set_ylim(-3, 3)

xy_0 =np.array((-4, 1))
xy_f =np.array((-1, 1))
# this annotation is messed by later changing the array passed as xy kwarg
ax.annotate(s='', xy=xy_0, xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3# <--this  updates the arrow position

xy_0 =np.array((1, 1))
xy_f =np.array((4, 1))
# using a copy of the array helps spoting where the problem is
ax.annotate(s='', xy=xy_0.copy(), xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3
```

**Actual outcome**

![bug](https://user-images.githubusercontent.com/45225345/83718413-5d656a80-a60b-11ea-8ef0-a1a18337de28.png)

**Expected outcome**
Both arrows should be horizontal

**Matplotlib version**
  * Operating system: Debian 9
  * Matplotlib version: '3.0.3'
  * Matplotlib backend: Qt5Agg
  * Python version:'3.5.3'
  * Jupyter version (if applicable):
  * Other libraries: Numpy 1.17.3

Matplotlib was installed using pip


Patch information:
diff --git a/lib/matplotlib/patches.py b/lib/matplotlib/patches.py
index 92dc55940b..bc41964e92 100644
--- a/lib/matplotlib/patches.py
+++ b/lib/matplotlib/patches.py
@@ -4147,7 +4147,7 @@ default: 'arc3'
         super().__init__(**kwargs)
 
         if posA is not None and posB is not None and path is None:
-            self._posA_posB = [posA, posB]
+            self._posA_posB = [tuple(posA), tuple(posB)]
 
             if connectionstyle is None:
                 connectionstyle = "arc3"
@@ -4183,9 +4183,9 @@ default: 'arc3'
             `None` use current value.
         """
         if posA is not None:
-            self._posA_posB[0] = posA
+            self._posA_posB[0] = tuple(posA)
         if posB is not None:
-            self._posA_posB[1] = posB
+            self._posA_posB[1] = tuple(posB)
         self.stale = True
 
     def set_patchA(self, patchA):
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index d4922fc517..2951122a51 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -1456,7 +1456,7 @@ class _AnnotationBase:
                  xycoords='data',
                  annotation_clip=None):
 
-        self.xy = xy
+        self.xy = tuple(xy)
         self.xycoords = xycoords
         self.set_annotation_clip(annotation_clip)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of lib/matplotlib/tests/test_text.py.
Extra Requirements: 
Purpose: I need the content of `lib/matplotlib/tests/test_text.py` to find existing tests for `ax.annotate` that can be used to demonstrate the reported bug or similar functionality.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: lib/matplotlib/tests/test_text.py
Line number range: 1 - 500
Content:
1. from datetime import datetime
2. import io
3. import warnings
4. 
5. import numpy as np
6. from numpy.testing import assert_almost_equal
7. from packaging.version import parse as parse_version
8. import pyparsing
9. import pytest
10. 
11. import matplotlib as mpl
12. from matplotlib.backend_bases import MouseEvent
13. from matplotlib.font_manager import FontProperties
14. import matplotlib.patches as mpatches
15. import matplotlib.pyplot as plt
16. import matplotlib.transforms as mtransforms
17. from matplotlib.testing.decorators import check_figures_equal, image_comparison
18. from matplotlib.testing._markers import needs_usetex
19. from matplotlib.text import Text, Annotation
20. 
21. pyparsing_version = parse_version(pyparsing.__version__)
22. 
23. 
24. @image_comparison(['font_styles'])
25. def test_font_styles():
26. 
27.     def find_matplotlib_font(**kw):
28.         prop = FontProperties(**kw)
29.         path = findfont(prop, directory=mpl.get_data_path())
30.         return FontProperties(fname=path)
31. 
32.     from matplotlib.font_manager import FontProperties, findfont
33.     warnings.filterwarnings(
34.         'ignore',
35.         r"findfont: Font family \[u?'Foo'\] not found. Falling back to .",
36.         UserWarning,
37.         module='matplotlib.font_manager')
38. 
39.     fig, ax = plt.subplots()
40. 
41.     normal_font = find_matplotlib_font(
42.         family="sans-serif",
43.         style="normal",
44.         variant="normal",
45.         size=14)
46.     a = ax.annotate(
47.         "Normal Font",
48.         (0.1, 0.1),
49.         xycoords='axes fraction',
50.         fontproperties=normal_font)
51.     assert a.get_fontname() == 'DejaVu Sans'
52.     assert a.get_fontstyle() == 'normal'
53.     assert a.get_fontvariant() == 'normal'
54.     assert a.get_weight() == 'normal'
55.     assert a.get_stretch() == 'normal'
56. 
57.     bold_font = find_matplotlib_font(
58.         family="Foo",
59.         style="normal",
60.         variant="normal",
61.         weight="bold",
62.         stretch=500,
63.         size=14)
64.     ax.annotate(
65.         "Bold Font",
66.         (0.1, 0.2),
67.         xycoords='axes fraction',
68.         fontproperties=bold_font)
69. 
70.     bold_italic_font = find_matplotlib_font(
71.         family="sans serif",
72.         style="italic",
73.         variant="normal",
74.         weight=750,
75.         stretch=500,
76.         size=14)
77.     ax.annotate(
78.         "Bold Italic Font",
79.         (0.1, 0.3),
80.         xycoords='axes fraction',
81.         fontproperties=bold_italic_font)
82. 
83.     light_font = find_matplotlib_font(
84.         family="sans-serif",
85.         style="normal",
86.         variant="normal",
87.         weight=200,
88.         stretch=500,
89.         size=14)
90.     ax.annotate(
91.         "Light Font",
92.         (0.1, 0.4),
93.         xycoords='axes fraction',
94.         fontproperties=light_font)
95. 
96.     condensed_font = find_matplotlib_font(
97.         family="sans-serif",
98.         style="normal",
99.         variant="normal",
100.         weight=500,
101.         stretch=100,
102.         size=14)
103.     ax.annotate(
104.         "Condensed Font",
105.         (0.1, 0.5),
106.         xycoords='axes fraction',
107.         fontproperties=condensed_font)
108. 
109.     ax.set_xticks([])
110.     ax.set_yticks([])
111. 
112. 
113. @image_comparison(['multiline'])
114. def test_multiline():
115.     plt.figure()
116.     ax = plt.subplot(1, 1, 1)
117.     ax.set_title("multiline\ntext alignment")
118. 
119.     plt.text(
120.         0.2, 0.5, "TpTpTp\n$M$\nTpTpTp", size=20, ha="center", va="top")
121. 
122.     plt.text(
123.         0.5, 0.5, "TpTpTp\n$M^{M^{M^{M}}}$\nTpTpTp", size=20,
124.         ha="center", va="top")
125. 
126.     plt.text(
127.         0.8, 0.5, "TpTpTp\n$M_{q_{q_{q}}}$\nTpTpTp", size=20,
128.         ha="center", va="top")
129. 
130.     plt.xlim(0, 1)
131.     plt.ylim(0, 0.8)
132. 
133.     ax.set_xticks([])
134.     ax.set_yticks([])
135. 
136. 
137. @image_comparison(['multiline2'], style='mpl20')
138. def test_multiline2():
139.     # Remove this line when this test image is regenerated.
140.     plt.rcParams['text.kerning_factor'] = 6
141. 
142.     fig, ax = plt.subplots()
143. 
144.     ax.set_xlim([0, 1.4])
145.     ax.set_ylim([0, 2])
146.     ax.axhline(0.5, color='C2', linewidth=0.3)
147.     sts = ['Line', '2 Lineg\n 2 Lg', '$\\sum_i x $', 'hi $\\sum_i x $\ntest',
148.            'test\n $\\sum_i x $', '$\\sum_i x $\n $\\sum_i x $']
149.     renderer = fig.canvas.get_renderer()
150. 
151.     def draw_box(ax, tt):
152.         r = mpatches.Rectangle((0, 0), 1, 1, clip_on=False,
153.                                transform=ax.transAxes)
154.         r.set_bounds(
155.             tt.get_window_extent(renderer)
156.             .transformed(ax.transAxes.inverted())
157.             .bounds)
158.         ax.add_patch(r)
159. 
160.     horal = 'left'
161.     for nn, st in enumerate(sts):
162.         tt = ax.text(0.2 * nn + 0.1, 0.5, st, horizontalalignment=horal,
163.                      verticalalignment='bottom')
164.         draw_box(ax, tt)
165.     ax.text(1.2, 0.5, 'Bottom align', color='C2')
166. 
167.     ax.axhline(1.3, color='C2', linewidth=0.3)
168.     for nn, st in enumerate(sts):
169.         tt = ax.text(0.2 * nn + 0.1, 1.3, st, horizontalalignment=horal,
170.                      verticalalignment='top')
171.         draw_box(ax, tt)
172.     ax.text(1.2, 1.3, 'Top align', color='C2')
173. 
174.     ax.axhline(1.8, color='C2', linewidth=0.3)
175.     for nn, st in enumerate(sts):
176.         tt = ax.text(0.2 * nn + 0.1, 1.8, st, horizontalalignment=horal,
177.                      verticalalignment='baseline')
178.         draw_box(ax, tt)
179.     ax.text(1.2, 1.8, 'Baseline align', color='C2')
180. 
181.     ax.axhline(0.1, color='C2', linewidth=0.3)
182.     for nn, st in enumerate(sts):
183.         tt = ax.text(0.2 * nn + 0.1, 0.1, st, horizontalalignment=horal,
184.                      verticalalignment='bottom', rotation=20)
185.         draw_box(ax, tt)
186.     ax.text(1.2, 0.1, 'Bot align, rot20', color='C2')
187. 
188. 
189. @image_comparison(['antialiased.png'])
190. def test_antialiasing():
191.     mpl.rcParams['text.antialiased'] = True
192. 
193.     fig = plt.figure(figsize=(5.25, 0.75))
194.     fig.text(0.5, 0.75, "antialiased", horizontalalignment='center',
195.              verticalalignment='center')
196.     fig.text(0.5, 0.25, r"$\sqrt{x}$", horizontalalignment='center',
197.              verticalalignment='center')
198.     # NOTE: We don't need to restore the rcParams here, because the
199.     # test cleanup will do it for us.  In fact, if we do it here, it
200.     # will turn antialiasing back off before the images are actually
201.     # rendered.
202. 
203. 
204. def test_afm_kerning():
205.     fn = mpl.font_manager.findfont("Helvetica", fontext="afm")
206.     with open(fn, 'rb') as fh:
207.         afm = mpl._afm.AFM(fh)
208.     assert afm.string_width_height('VAVAVAVAVAVA') == (7174.0, 718)
209. 
210. 
211. @image_comparison(['text_contains.png'])
212. def test_contains():
213.     fig = plt.figure()
214.     ax = plt.axes()
215. 
216.     mevent = MouseEvent('button_press_event', fig.canvas, 0.5, 0.5, 1, None)
217. 
218.     xs = np.linspace(0.25, 0.75, 30)
219.     ys = np.linspace(0.25, 0.75, 30)
220.     xs, ys = np.meshgrid(xs, ys)
221. 
222.     txt = plt.text(
223.         0.5, 0.4, 'hello world', ha='center', fontsize=30, rotation=30)
224.     # uncomment to draw the text's bounding box
225.     # txt.set_bbox(dict(edgecolor='black', facecolor='none'))
226. 
227.     # draw the text. This is important, as the contains method can only work
228.     # when a renderer exists.
229.     fig.canvas.draw()
230. 
231.     for x, y in zip(xs.flat, ys.flat):
232.         mevent.x, mevent.y = plt.gca().transAxes.transform([x, y])
233.         contains, _ = txt.contains(mevent)
234.         color = 'yellow' if contains else 'red'
235. 
236.         # capture the viewLim, plot a point, and reset the viewLim
237.         vl = ax.viewLim.frozen()
238.         ax.plot(x, y, 'o', color=color)
239.         ax.viewLim.set(vl)
240. 
241. 
242. def test_annotation_contains():
243.     # Check that Annotation.contains looks at the bboxes of the text and the
244.     # arrow separately, not at the joint bbox.
245.     fig, ax = plt.subplots()
246.     ann = ax.annotate(
247.         "hello", xy=(.4, .4), xytext=(.6, .6), arrowprops={"arrowstyle": "->"})
248.     fig.canvas.draw()  # Needed for the same reason as in test_contains.
249.     event = MouseEvent(
250.         "button_press_event", fig.canvas, *ax.transData.transform((.5, .6)))
251.     assert ann.contains(event) == (False, {})
252. 
253. 
254. @pytest.mark.parametrize('err, xycoords, match', (
255.     (TypeError, print, "xycoords callable must return a BboxBase or Transform, not a"),
256.     (TypeError, [0, 0], r"'xycoords' must be an instance of str, tuple"),
257.     (ValueError, "foo", "'foo' is not a valid coordinate"),
258.     (ValueError, "foo bar", "'foo bar' is not a valid coordinate"),
259.     (ValueError, "offset foo", "xycoords cannot be an offset coordinate"),
260.     (ValueError, "axes foo", "'foo' is not a recognized unit"),
261. ))
262. def test_annotate_errors(err, xycoords, match):
263.     fig, ax = plt.subplots()
264.     with pytest.raises(err, match=match):
265.         ax.annotate('xy', (0, 0), xytext=(0.5, 0.5), xycoords=xycoords)
266.         fig.canvas.draw()
267. 
268. 
269. @image_comparison(['titles'])
270. def test_titles():
271.     # left and right side titles
272.     plt.figure()
273.     ax = plt.subplot(1, 1, 1)
274.     ax.set_title("left title", loc="left")
275.     ax.set_title("right title", loc="right")
276.     ax.set_xticks([])
277.     ax.set_yticks([])
278. 
279. 
280. @image_comparison(['text_alignment'], style='mpl20')
281. def test_alignment():
282.     plt.figure()
283.     ax = plt.subplot(1, 1, 1)
284. 
285.     x = 0.1
286.     for rotation in (0, 30):
287.         for alignment in ('top', 'bottom', 'baseline', 'center'):
288.             ax.text(
289.                 x, 0.5, alignment + " Tj", va=alignment, rotation=rotation,
290.                 bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.5))
291.             ax.text(
292.                 x, 1.0, r'$\sum_{i=0}^{j}$', va=alignment, rotation=rotation)
293.             x += 0.1
294. 
295.     ax.plot([0, 1], [0.5, 0.5])
296.     ax.plot([0, 1], [1.0, 1.0])
297. 
298.     ax.set_xlim(0, 1)
299.     ax.set_ylim(0, 1.5)
300.     ax.set_xticks([])
301.     ax.set_yticks([])
302. 
303. 
304. @image_comparison(['axes_titles.png'])
305. def test_axes_titles():
306.     # Related to issue #3327
307.     plt.figure()
308.     ax = plt.subplot(1, 1, 1)
309.     ax.set_title('center', loc='center', fontsize=20, fontweight=700)
310.     ax.set_title('left', loc='left', fontsize=12, fontweight=400)
311.     ax.set_title('right', loc='right', fontsize=12, fontweight=400)
312. 
313. 
314. def test_set_position():
315.     fig, ax = plt.subplots()
316. 
317.     # test set_position
318.     ann = ax.annotate(
319.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
320.     fig.canvas.draw()
321. 
322.     init_pos = ann.get_window_extent(fig.canvas.renderer)
323.     shift_val = 15
324.     ann.set_position((shift_val, shift_val))
325.     fig.canvas.draw()
326.     post_pos = ann.get_window_extent(fig.canvas.renderer)
327. 
328.     for a, b in zip(init_pos.min, post_pos.min):
329.         assert a + shift_val == b
330. 
331.     # test xyann
332.     ann = ax.annotate(
333.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
334.     fig.canvas.draw()
335. 
336.     init_pos = ann.get_window_extent(fig.canvas.renderer)
337.     shift_val = 15
338.     ann.xyann = (shift_val, shift_val)
339.     fig.canvas.draw()
340.     post_pos = ann.get_window_extent(fig.canvas.renderer)
341. 
342.     for a, b in zip(init_pos.min, post_pos.min):
343.         assert a + shift_val == b
344. 
345. 
346. def test_char_index_at():
347.     fig = plt.figure()
348.     text = fig.text(0.1, 0.9, "")
349. 
350.     text.set_text("i")
351.     bbox = text.get_window_extent()
352.     size_i = bbox.x1 - bbox.x0
353. 
354.     text.set_text("m")
355.     bbox = text.get_window_extent()
356.     size_m = bbox.x1 - bbox.x0
357. 
358.     text.set_text("iiiimmmm")
359.     bbox = text.get_window_extent()
360.     origin = bbox.x0
361. 
362.     assert text._char_index_at(origin - size_i) == 0  # left of first char
363.     assert text._char_index_at(origin) == 0
364.     assert text._char_index_at(origin + 0.499*size_i) == 0
365.     assert text._char_index_at(origin + 0.501*size_i) == 1
366.     assert text._char_index_at(origin + size_i*3) == 3
367.     assert text._char_index_at(origin + size_i*4 + size_m*3) == 7
368.     assert text._char_index_at(origin + size_i*4 + size_m*4) == 8
369.     assert text._char_index_at(origin + size_i*4 + size_m*10) == 8
370. 
371. 
372. @pytest.mark.parametrize('text', ['', 'O'], ids=['empty', 'non-empty'])
373. def test_non_default_dpi(text):
374.     fig, ax = plt.subplots()
375. 
376.     t1 = ax.text(0.5, 0.5, text, ha='left', va='bottom')
377.     fig.canvas.draw()
378.     dpi = fig.dpi
379. 
380.     bbox1 = t1.get_window_extent()
381.     bbox2 = t1.get_window_extent(dpi=dpi * 10)
382.     np.testing.assert_allclose(bbox2.get_points(), bbox1.get_points() * 10,
383.                                rtol=5e-2)
384.     # Text.get_window_extent should not permanently change dpi.
385.     assert fig.dpi == dpi
386. 
387. 
388. def test_get_rotation_string():
389.     assert Text(rotation='horizontal').get_rotation() == 0.
390.     assert Text(rotation='vertical').get_rotation() == 90.
391. 
392. 
393. def test_get_rotation_float():
394.     for i in [15., 16.70, 77.4]:
395.         assert Text(rotation=i).get_rotation() == i
396. 
397. 
398. def test_get_rotation_int():
399.     for i in [67, 16, 41]:
400.         assert Text(rotation=i).get_rotation() == float(i)
401. 
402. 
403. def test_get_rotation_raises():
404.     with pytest.raises(ValueError):
405.         Text(rotation='hozirontal')
406. 
407. 
408. def test_get_rotation_none():
409.     assert Text(rotation=None).get_rotation() == 0.0
410. 
411. 
412. def test_get_rotation_mod360():
413.     for i, j in zip([360., 377., 720+177.2], [0., 17., 177.2]):
414.         assert_almost_equal(Text(rotation=i).get_rotation(), j)
415. 
416. 
417. @pytest.mark.parametrize("ha", ["center", "right", "left"])
418. @pytest.mark.parametrize("va", ["center", "top", "bottom",
419.                                 "baseline", "center_baseline"])
420. def test_null_rotation_with_rotation_mode(ha, va):
421.     fig, ax = plt.subplots()
422.     kw = dict(rotation=0, va=va, ha=ha)
423.     t0 = ax.text(.5, .5, 'test', rotation_mode='anchor', **kw)
424.     t1 = ax.text(.5, .5, 'test', rotation_mode='default', **kw)
425.     fig.canvas.draw()
426.     assert_almost_equal(t0.get_window_extent(fig.canvas.renderer).get_points(),
427.                         t1.get_window_extent(fig.canvas.renderer).get_points())
428. 
429. 
430. @image_comparison(['text_bboxclip'])
431. def test_bbox_clipping():
432.     plt.text(0.9, 0.2, 'Is bbox clipped?', backgroundcolor='r', clip_on=True)
433.     t = plt.text(0.9, 0.5, 'Is fancy bbox clipped?', clip_on=True)
434.     t.set_bbox({"boxstyle": "round, pad=0.1"})
435. 
436. 
437. @image_comparison(['annotation_negative_ax_coords.png'])
438. def test_annotation_negative_ax_coords():
439.     fig, ax = plt.subplots()
440. 
441.     ax.annotate('+ pts',
442.                 xytext=[30, 20], textcoords='axes points',
443.                 xy=[30, 20], xycoords='axes points', fontsize=32)
444.     ax.annotate('- pts',
445.                 xytext=[30, -20], textcoords='axes points',
446.                 xy=[30, -20], xycoords='axes points', fontsize=32,
447.                 va='top')
448.     ax.annotate('+ frac',
449.                 xytext=[0.75, 0.05], textcoords='axes fraction',
450.                 xy=[0.75, 0.05], xycoords='axes fraction', fontsize=32)
451.     ax.annotate('- frac',
452.                 xytext=[0.75, -0.05], textcoords='axes fraction',
453.                 xy=[0.75, -0.05], xycoords='axes fraction', fontsize=32,
454.                 va='top')
455. 
456.     ax.annotate('+ pixels',
457.                 xytext=[160, 25], textcoords='axes pixels',
458.                 xy=[160, 25], xycoords='axes pixels', fontsize=32)
459.     ax.annotate('- pixels',
460.                 xytext=[160, -25], textcoords='axes pixels',
461.                 xy=[160, -25], xycoords='axes pixels', fontsize=32,
462.                 va='top')
463. 
464. 
465. @image_comparison(['annotation_negative_fig_coords.png'])
466. def test_annotation_negative_fig_coords():
467.     fig, ax = plt.subplots()
468. 
469.     ax.annotate('+ pts',
470.                 xytext=[10, 120], textcoords='figure points',
471.                 xy=[10, 120], xycoords='figure points', fontsize=32)
472.     ax.annotate('- pts',
473.                 xytext=[-10, 180], textcoords='figure points',
474.                 xy=[-10, 180], xycoords='figure points', fontsize=32,
475.                 va='top')
476.     ax.annotate('+ frac',
477.                 xytext=[0.05, 0.55], textcoords='figure fraction',
478.                 xy=[0.05, 0.55], xycoords='figure fraction', fontsize=32)
479.     ax.annotate('- frac',
480.                 xytext=[-0.05, 0.5], textcoords='figure fraction',
481.                 xy=[-0.05, 0.5], xycoords='figure fraction', fontsize=32,
482.                 va='top')
483. 
484.     ax.annotate('+ pixels',
485.                 xytext=[50, 50], textcoords='figure pixels',
486.                 xy=[50, 50], xycoords='figure pixels', fontsize=32)
487.     ax.annotate('- pixels',
488.                 xytext=[-50, 100], textcoords='figure pixels',
489.                 xy=[-50, 100], xycoords='figure pixels', fontsize=32,
490.                 va='top')
491. 
492. 
493. def test_text_stale():
494.     fig, (ax1, ax2) = plt.subplots(1, 2)
495.     plt.draw_all()
496.     assert not ax1.stale
497.     assert not ax2.stale
498.     assert not fig.stale
499. 
500.     txt1 = ax1.text(.5, .5, 'aardvark')


File: lib/matplotlib/tests/test_text.py
Line number range: 656 - 664
Content:
656. def test_annotation_update():
657.     fig, ax = plt.subplots(1, 1)
658.     an = ax.annotate('annotation', xy=(0.5, 0.5))
659.     extent1 = an.get_window_extent(fig.canvas.get_renderer())
660.     fig.tight_layout()
661.     extent2 = an.get_window_extent(fig.canvas.get_renderer())
662. 
663.     assert not np.allclose(extent1.get_points(), extent2.get_points(),
664.                            rtol=1e-6)


File: lib/matplotlib/tests/test_text.py
Line number range: 667 - 676
Content:
667. @check_figures_equal(extensions=["png"])
668. def test_annotation_units(fig_test, fig_ref):
669.     ax = fig_test.add_subplot()
670.     ax.plot(datetime.now(), 1, "o")  # Implicitly set axes extents.
671.     ax.annotate("x", (datetime.now(), 0.5), xycoords=("data", "axes fraction"),
672.                 # This used to crash before.
673.                 xytext=(0, 0), textcoords="offset points")
674.     ax = fig_ref.add_subplot()
675.     ax.plot(datetime.now(), 1, "o")
676.     ax.annotate("x", (datetime.now(), 0.5), xycoords=("data", "axes fraction"))


File: lib/matplotlib/tests/test_text.py
Line number range: 901 - 914
Content:
901. def test_annotate_offset_fontsize():
902.     # Test that offset_fontsize parameter works and uses accurate values
903.     fig, ax = plt.subplots()
904.     text_coords = ['offset points', 'offset fontsize']
905.     # 10 points should be equal to 1 fontsize unit at fontsize=10
906.     xy_text = [(10, 10), (1, 1)]
907.     anns = [ax.annotate('test', xy=(0.5, 0.5),
908.                         xytext=xy_text[i],
909.                         fontsize='10',
910.                         xycoords='data',
911.                         textcoords=text_coords[i]) for i in range(2)]
912.     points_coords, fontsize_coords = [ann.get_window_extent() for ann in anns]
913.     fig.canvas.draw()
914.     assert str(points_coords) == str(fontsize_coords)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 12:31:56,696 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's bug report involves using `arrowprops` with `annotate`, which creates a `FancyArrowPatch`. The provided patch modifies `lib/matplotlib/patches.py`, indicating that the bug is related to how patch positions are handled. The current context only contains tests for `matplotlib.text`, which is not sufficient to find relevant tests for `FancyArrowPatch`. To find tests that cover the creation and updating of arrow patches, I need to inspect the test file for patches." query='Please provide the full content of lib/matplotlib/tests/test_patches.py.' extra_requirements='' purpose="I need to find test cases related to `FancyArrowPatch` to identify tests that are relevant to the user's bug report concerning annotations with arrows."
2025-12-21 12:31:56,697 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
2025-12-21 12:31:56,697 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 12:31:56,698 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 12:31:56,698 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 12:31:56,698 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
Purpose: I need to find test cases related to `FancyArrowPatch` to identify tests that are relevant to the user's bug report concerning annotations with arrows.
2025-12-21 12:31:59,786 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of the file `lib/matplotlib/tests/test_patches.py` as requested. This will allow you to examine the test cases related to `FancyArrowPatch` and identify those relevant to the user's bug report." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_patches.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2150, 'candidates_token_count': 78, 'total_token_count': 2449, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2150}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 78}], 'thoughts_token_count': 221, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.12275063685881786, 'model_name': 'gemini-2.5-pro'} id='run--e5f5c7ea-5634-49f0-930c-68745ca020ff-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_patches.py'}, 'id': '14619647-af12-4946-a1e9-7f9004e7523c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2150, 'output_tokens': 78, 'total_tokens': 2449, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 221}}
2025-12-21 12:32:03,022 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have read the beginning of the file `lib/matplotlib/tests/test_patches.py`. Since the file is longer than 500 lines, I will now read the remaining content to provide you with the complete file.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 2000.0, "start_line": 501.0, "relative_path": "lib/matplotlib/tests/test_patches.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10561, 'candidates_token_count': 79, 'total_token_count': 10833, 'cached_content_token_count': 1870, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10561}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1870}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 193}, 'finish_reason': 'STOP', 'avg_logprobs': -0.308777772927586, 'model_name': 'gemini-2.5-pro'} id='run--b32b7707-be58-4afc-8c5d-1e94e3201a16-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 2000.0, 'start_line': 501.0, 'relative_path': 'lib/matplotlib/tests/test_patches.py'}, 'id': '676c5cc6-f0d3-45b6-8048-4ea126068523', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10561, 'output_tokens': 79, 'total_tokens': 10833, 'input_token_details': {'cache_read': 1870}, 'output_token_details': {'reasoning': 193}}
2025-12-21 12:32:07,292 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the entire content of `lib/matplotlib/tests/test_patches.py`. I will proceed to find the test cases related to `FancyArrowPatch` to help you identify tests relevant to the bug report.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 722.0, "start_line": 684.0, "relative_path": "lib/matplotlib/tests/test_patches.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18259, 'candidates_token_count': 78, 'total_token_count': 18617, 'cached_content_token_count': 9603, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18259}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9603}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 78}], 'thoughts_token_count': 280}, 'finish_reason': 'STOP', 'avg_logprobs': -0.603846916785607, 'model_name': 'gemini-2.5-pro'} id='run--e04538c9-bd01-4613-ba6f-8f79bfe76a2c-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 722.0, 'start_line': 684.0, 'relative_path': 'lib/matplotlib/tests/test_patches.py'}, 'id': '85d019ec-34f8-44a0-a016-0c2d2ace6ff8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18259, 'output_tokens': 78, 'total_tokens': 18617, 'input_token_details': {'cache_read': 9603}, 'output_token_details': {'reasoning': 280}}
2025-12-21 12:32:17,243 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the entire content of `lib/matplotlib/tests/test_patches.py` for you. Within this file, I have located the test cases specifically for `FancyArrowPatch`. The relevant tests are `test_fancyarrow_units`, `test_fancyarrow_setdata`, and `test_fancyarrow_shape_error`, and I have provided the code for these tests.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19085, 'candidates_token_count': 82, 'total_token_count': 20083, 'cached_content_token_count': 17270, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19085}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17270}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 82}], 'thoughts_token_count': 916}, 'finish_reason': 'STOP', 'avg_logprobs': -2.2114570431592986, 'model_name': 'gemini-2.5-pro'} id='run--c6c3e399-f74c-415a-a139-f49269f11e11-0' usage_metadata={'input_tokens': 19085, 'output_tokens': 82, 'total_tokens': 20083, 'input_token_details': {'cache_read': 17270}, 'output_token_details': {'reasoning': 916}}
2025-12-21 12:32:17,245 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of lib/matplotlib/tests/test_patches.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases related to `FancyArrowPatch` to identify tests that are relevant to the user's bug report concerning annotations with arrows.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: lib/matplotlib/tests/test_patches.py
Line number range: 1 - 500
Content:
1. """
2. Tests specific to the patches module.
3. """
4. import numpy as np
5. from numpy.testing import assert_almost_equal, assert_array_equal
6. import pytest
7. 
8. import matplotlib as mpl
9. from matplotlib.patches import (Annulus, Ellipse, Patch, Polygon, Rectangle,
10.                                 FancyArrowPatch, FancyArrow, BoxStyle, Arc)
11. from matplotlib.testing.decorators import image_comparison, check_figures_equal
12. from matplotlib.transforms import Bbox
13. import matplotlib.pyplot as plt
14. from matplotlib import (
15.     collections as mcollections, colors as mcolors, patches as mpatches,
16.     path as mpath, transforms as mtransforms, rcParams)
17. 
18. import sys
19. on_win = (sys.platform == 'win32')
20. 
21. 
22. def test_Polygon_close():
23.     #: GitHub issue #1018 identified a bug in the Polygon handling
24.     #: of the closed attribute; the path was not getting closed
25.     #: when set_xy was used to set the vertices.
26. 
27.     # open set of vertices:
28.     xy = [[0, 0], [0, 1], [1, 1]]
29.     # closed set:
30.     xyclosed = xy + [[0, 0]]
31. 
32.     # start with open path and close it:
33.     p = Polygon(xy, closed=True)
34.     assert p.get_closed()
35.     assert_array_equal(p.get_xy(), xyclosed)
36.     p.set_xy(xy)
37.     assert_array_equal(p.get_xy(), xyclosed)
38. 
39.     # start with closed path and open it:
40.     p = Polygon(xyclosed, closed=False)
41.     assert_array_equal(p.get_xy(), xy)
42.     p.set_xy(xyclosed)
43.     assert_array_equal(p.get_xy(), xy)
44. 
45.     # start with open path and leave it open:
46.     p = Polygon(xy, closed=False)
47.     assert not p.get_closed()
48.     assert_array_equal(p.get_xy(), xy)
49.     p.set_xy(xy)
50.     assert_array_equal(p.get_xy(), xy)
51. 
52.     # start with closed path and leave it closed:
53.     p = Polygon(xyclosed, closed=True)
54.     assert_array_equal(p.get_xy(), xyclosed)
55.     p.set_xy(xyclosed)
56.     assert_array_equal(p.get_xy(), xyclosed)
57. 
58. 
59. def test_corner_center():
60.     loc = [10, 20]
61.     width = 1
62.     height = 2
63. 
64.     # Rectangle
65.     # No rotation
66.     corners = ((10, 20), (11, 20), (11, 22), (10, 22))
67.     rect = Rectangle(loc, width, height)
68.     assert_array_equal(rect.get_corners(), corners)
69.     assert_array_equal(rect.get_center(), (10.5, 21))
70. 
71.     # 90 deg rotation
72.     corners_rot = ((10, 20), (10, 21), (8, 21), (8, 20))
73.     rect.set_angle(90)
74.     assert_array_equal(rect.get_corners(), corners_rot)
75.     assert_array_equal(rect.get_center(), (9, 20.5))
76. 
77.     # Rotation not a multiple of 90 deg
78.     theta = 33
79.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
80.     corners_rot = t.transform(corners)
81.     rect.set_angle(theta)
82.     assert_almost_equal(rect.get_corners(), corners_rot)
83. 
84.     # Ellipse
85.     loc = [loc[0] + width / 2,
86.            loc[1] + height / 2]
87.     ellipse = Ellipse(loc, width, height)
88. 
89.     # No rotation
90.     assert_array_equal(ellipse.get_corners(), corners)
91. 
92.     # 90 deg rotation
93.     corners_rot = ((11.5, 20.5), (11.5, 21.5), (9.5, 21.5), (9.5, 20.5))
94.     ellipse.set_angle(90)
95.     assert_array_equal(ellipse.get_corners(), corners_rot)
96.     # Rotation shouldn't change ellipse center
97.     assert_array_equal(ellipse.get_center(), loc)
98. 
99.     # Rotation not a multiple of 90 deg
100.     theta = 33
101.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
102.     corners_rot = t.transform(corners)
103.     ellipse.set_angle(theta)
104.     assert_almost_equal(ellipse.get_corners(), corners_rot)
105. 
106. 
107. def test_ellipse_vertices():
108.     # expect 0 for 0 ellipse width, height
109.     ellipse = Ellipse(xy=(0, 0), width=0, height=0, angle=0)
110.     assert_almost_equal(
111.         ellipse.get_vertices(),
112.         [(0.0, 0.0), (0.0, 0.0)],
113.     )
114.     assert_almost_equal(
115.         ellipse.get_co_vertices(),
116.         [(0.0, 0.0), (0.0, 0.0)],
117.     )
118. 
119.     ellipse = Ellipse(xy=(0, 0), width=2, height=1, angle=30)
120.     assert_almost_equal(
121.         ellipse.get_vertices(),
122.         [
123.             (
124.                 ellipse.center[0] + ellipse.width / 4 * np.sqrt(3),
125.                 ellipse.center[1] + ellipse.width / 4,
126.             ),
127.             (
128.                 ellipse.center[0] - ellipse.width / 4 * np.sqrt(3),
129.                 ellipse.center[1] - ellipse.width / 4,
130.             ),
131.         ],
132.     )
133.     assert_almost_equal(
134.         ellipse.get_co_vertices(),
135.         [
136.             (
137.                 ellipse.center[0] - ellipse.height / 4,
138.                 ellipse.center[1] + ellipse.height / 4 * np.sqrt(3),
139.             ),
140.             (
141.                 ellipse.center[0] + ellipse.height / 4,
142.                 ellipse.center[1] - ellipse.height / 4 * np.sqrt(3),
143.             ),
144.         ],
145.     )
146.     v1, v2 = np.array(ellipse.get_vertices())
147.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
148.     v1, v2 = np.array(ellipse.get_co_vertices())
149.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
150. 
151.     ellipse = Ellipse(xy=(2.252, -10.859), width=2.265, height=1.98, angle=68.78)
152.     v1, v2 = np.array(ellipse.get_vertices())
153.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
154.     v1, v2 = np.array(ellipse.get_co_vertices())
155.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
156. 
157. 
158. def test_rotate_rect():
159.     loc = np.asarray([1.0, 2.0])
160.     width = 2
161.     height = 3
162.     angle = 30.0
163. 
164.     # A rotated rectangle
165.     rect1 = Rectangle(loc, width, height, angle=angle)
166. 
167.     # A non-rotated rectangle
168.     rect2 = Rectangle(loc, width, height)
169. 
170.     # Set up an explicit rotation matrix (in radians)
171.     angle_rad = np.pi * angle / 180.0
172.     rotation_matrix = np.array([[np.cos(angle_rad), -np.sin(angle_rad)],
173.                                 [np.sin(angle_rad),  np.cos(angle_rad)]])
174. 
175.     # Translate to origin, rotate each vertex, and then translate back
176.     new_verts = np.inner(rotation_matrix, rect2.get_verts() - loc).T + loc
177. 
178.     # They should be the same
179.     assert_almost_equal(rect1.get_verts(), new_verts)
180. 
181. 
182. @check_figures_equal(extensions=['png'])
183. def test_rotate_rect_draw(fig_test, fig_ref):
184.     ax_test = fig_test.add_subplot()
185.     ax_ref = fig_ref.add_subplot()
186. 
187.     loc = (0, 0)
188.     width, height = (1, 1)
189.     angle = 30
190.     rect_ref = Rectangle(loc, width, height, angle=angle)
191.     ax_ref.add_patch(rect_ref)
192.     assert rect_ref.get_angle() == angle
193. 
194.     # Check that when the angle is updated after adding to an Axes, that the
195.     # patch is marked stale and redrawn in the correct location
196.     rect_test = Rectangle(loc, width, height)
197.     assert rect_test.get_angle() == 0
198.     ax_test.add_patch(rect_test)
199.     rect_test.set_angle(angle)
200.     assert rect_test.get_angle() == angle
201. 
202. 
203. @check_figures_equal(extensions=['png'])
204. def test_dash_offset_patch_draw(fig_test, fig_ref):
205.     ax_test = fig_test.add_subplot()
206.     ax_ref = fig_ref.add_subplot()
207. 
208.     loc = (0.1, 0.1)
209.     width, height = (0.8, 0.8)
210.     rect_ref = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
211.                                                 linestyle=(0, [6, 6]))
212.     # fill the line gaps using a linestyle (0, [0, 6, 6, 0]), which is
213.     # equivalent to (6, [6, 6]) but has 0 dash offset
214.     rect_ref2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
215.                                             linestyle=(0, [0, 6, 6, 0]))
216.     assert rect_ref.get_linestyle() == (0, [6, 6])
217.     assert rect_ref2.get_linestyle() == (0, [0, 6, 6, 0])
218. 
219.     ax_ref.add_patch(rect_ref)
220.     ax_ref.add_patch(rect_ref2)
221. 
222.     # Check that the dash offset of the rect is the same if we pass it in the
223.     # init method and if we create two rects with appropriate onoff sequence
224.     # of linestyle.
225. 
226.     rect_test = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
227.                                                     linestyle=(0, [6, 6]))
228.     rect_test2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
229.                                                     linestyle=(6, [6, 6]))
230.     assert rect_test.get_linestyle() == (0, [6, 6])
231.     assert rect_test2.get_linestyle() == (6, [6, 6])
232. 
233.     ax_test.add_patch(rect_test)
234.     ax_test.add_patch(rect_test2)
235. 
236. 
237. def test_negative_rect():
238.     # These two rectangles have the same vertices, but starting from a
239.     # different point.  (We also drop the last vertex, which is a duplicate.)
240.     pos_vertices = Rectangle((-3, -2), 3, 2).get_verts()[:-1]
241.     neg_vertices = Rectangle((0, 0), -3, -2).get_verts()[:-1]
242.     assert_array_equal(np.roll(neg_vertices, 2, 0), pos_vertices)
243. 
244. 
245. @image_comparison(['clip_to_bbox'])
246. def test_clip_to_bbox():
247.     fig, ax = plt.subplots()
248.     ax.set_xlim([-18, 20])
249.     ax.set_ylim([-150, 100])
250. 
251.     path = mpath.Path.unit_regular_star(8).deepcopy()
252.     path.vertices *= [10, 100]
253.     path.vertices -= [5, 25]
254. 
255.     path2 = mpath.Path.unit_circle().deepcopy()
256.     path2.vertices *= [10, 100]
257.     path2.vertices += [10, -25]
258. 
259.     combined = mpath.Path.make_compound_path(path, path2)
260. 
261.     patch = mpatches.PathPatch(
262.         combined, alpha=0.5, facecolor='coral', edgecolor='none')
263.     ax.add_patch(patch)
264. 
265.     bbox = mtransforms.Bbox([[-12, -77.5], [50, -110]])
266.     result_path = combined.clip_to_bbox(bbox)
267.     result_patch = mpatches.PathPatch(
268.         result_path, alpha=0.5, facecolor='green', lw=4, edgecolor='black')
269. 
270.     ax.add_patch(result_patch)
271. 
272. 
273. @image_comparison(['patch_alpha_coloring'], remove_text=True)
274. def test_patch_alpha_coloring():
275.     """
276.     Test checks that the patch and collection are rendered with the specified
277.     alpha values in their facecolor and edgecolor.
278.     """
279.     star = mpath.Path.unit_regular_star(6)
280.     circle = mpath.Path.unit_circle()
281.     # concatenate the star with an internal cutout of the circle
282.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
283.     codes = np.concatenate([circle.codes, star.codes])
284.     cut_star1 = mpath.Path(verts, codes)
285.     cut_star2 = mpath.Path(verts + 1, codes)
286. 
287.     ax = plt.axes()
288.     col = mcollections.PathCollection([cut_star2],
289.                                       linewidth=5, linestyles='dashdot',
290.                                       facecolor=(1, 0, 0, 0.5),
291.                                       edgecolor=(0, 0, 1, 0.75))
292.     ax.add_collection(col)
293. 
294.     patch = mpatches.PathPatch(cut_star1,
295.                                linewidth=5, linestyle='dashdot',
296.                                facecolor=(1, 0, 0, 0.5),
297.                                edgecolor=(0, 0, 1, 0.75))
298.     ax.add_patch(patch)
299. 
300.     ax.set_xlim(-1, 2)
301.     ax.set_ylim(-1, 2)
302. 
303. 
304. @image_comparison(['patch_alpha_override'], remove_text=True)
305. def test_patch_alpha_override():
306.     #: Test checks that specifying an alpha attribute for a patch or
307.     #: collection will override any alpha component of the facecolor
308.     #: or edgecolor.
309.     star = mpath.Path.unit_regular_star(6)
310.     circle = mpath.Path.unit_circle()
311.     # concatenate the star with an internal cutout of the circle
312.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
313.     codes = np.concatenate([circle.codes, star.codes])
314.     cut_star1 = mpath.Path(verts, codes)
315.     cut_star2 = mpath.Path(verts + 1, codes)
316. 
317.     ax = plt.axes()
318.     col = mcollections.PathCollection([cut_star2],
319.                                       linewidth=5, linestyles='dashdot',
320.                                       alpha=0.25,
321.                                       facecolor=(1, 0, 0, 0.5),
322.                                       edgecolor=(0, 0, 1, 0.75))
323.     ax.add_collection(col)
324. 
325.     patch = mpatches.PathPatch(cut_star1,
326.                                linewidth=5, linestyle='dashdot',
327.                                alpha=0.25,
328.                                facecolor=(1, 0, 0, 0.5),
329.                                edgecolor=(0, 0, 1, 0.75))
330.     ax.add_patch(patch)
331. 
332.     ax.set_xlim(-1, 2)
333.     ax.set_ylim(-1, 2)
334. 
335. 
336. @mpl.style.context('default')
337. def test_patch_color_none():
338.     # Make sure the alpha kwarg does not override 'none' facecolor.
339.     # Addresses issue #7478.
340.     c = plt.Circle((0, 0), 1, facecolor='none', alpha=1)
341.     assert c.get_facecolor()[0] == 0
342. 
343. 
344. @image_comparison(['patch_custom_linestyle'], remove_text=True)
345. def test_patch_custom_linestyle():
346.     #: A test to check that patches and collections accept custom dash
347.     #: patterns as linestyle and that they display correctly.
348.     star = mpath.Path.unit_regular_star(6)
349.     circle = mpath.Path.unit_circle()
350.     # concatenate the star with an internal cutout of the circle
351.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
352.     codes = np.concatenate([circle.codes, star.codes])
353.     cut_star1 = mpath.Path(verts, codes)
354.     cut_star2 = mpath.Path(verts + 1, codes)
355. 
356.     ax = plt.axes()
357.     col = mcollections.PathCollection(
358.         [cut_star2],
359.         linewidth=5, linestyles=[(0, (5, 7, 10, 7))],
360.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
361.     ax.add_collection(col)
362. 
363.     patch = mpatches.PathPatch(
364.         cut_star1,
365.         linewidth=5, linestyle=(0, (5, 7, 10, 7)),
366.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
367.     ax.add_patch(patch)
368. 
369.     ax.set_xlim(-1, 2)
370.     ax.set_ylim(-1, 2)
371. 
372. 
373. def test_patch_linestyle_accents():
374.     #: Test if linestyle can also be specified with short mnemonics like "--"
375.     #: c.f. GitHub issue #2136
376.     star = mpath.Path.unit_regular_star(6)
377.     circle = mpath.Path.unit_circle()
378.     # concatenate the star with an internal cutout of the circle
379.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
380.     codes = np.concatenate([circle.codes, star.codes])
381. 
382.     linestyles = ["-", "--", "-.", ":",
383.                   "solid", "dashed", "dashdot", "dotted"]
384. 
385.     fig, ax = plt.subplots()
386.     for i, ls in enumerate(linestyles):
387.         star = mpath.Path(verts + i, codes)
388.         patch = mpatches.PathPatch(star,
389.                                    linewidth=3, linestyle=ls,
390.                                    facecolor=(1, 0, 0),
391.                                    edgecolor=(0, 0, 1))
392.         ax.add_patch(patch)
393. 
394.     ax.set_xlim([-1, i + 1])
395.     ax.set_ylim([-1, i + 1])
396.     fig.canvas.draw()
397. 
398. 
399. @check_figures_equal(extensions=['png'])
400. def test_patch_linestyle_none(fig_test, fig_ref):
401.     circle = mpath.Path.unit_circle()
402. 
403.     ax_test = fig_test.add_subplot()
404.     ax_ref = fig_ref.add_subplot()
405.     for i, ls in enumerate(['none', 'None', ' ', '']):
406.         path = mpath.Path(circle.vertices + i, circle.codes)
407.         patch = mpatches.PathPatch(path,
408.                                    linewidth=3, linestyle=ls,
409.                                    facecolor=(1, 0, 0),
410.                                    edgecolor=(0, 0, 1))
411.         ax_test.add_patch(patch)
412. 
413.         patch = mpatches.PathPatch(path,
414.                                    linewidth=3, linestyle='-',
415.                                    facecolor=(1, 0, 0),
416.                                    edgecolor='none')
417.         ax_ref.add_patch(patch)
418. 
419.     ax_test.set_xlim([-1, i + 1])
420.     ax_test.set_ylim([-1, i + 1])
421.     ax_ref.set_xlim([-1, i + 1])
422.     ax_ref.set_ylim([-1, i + 1])
423. 
424. 
425. def test_wedge_movement():
426.     param_dict = {'center': ((0, 0), (1, 1), 'set_center'),
427.                   'r': (5, 8, 'set_radius'),
428.                   'width': (2, 3, 'set_width'),
429.                   'theta1': (0, 30, 'set_theta1'),
430.                   'theta2': (45, 50, 'set_theta2')}
431. 
432.     init_args = {k: v[0] for k, v in param_dict.items()}
433. 
434.     w = mpatches.Wedge(**init_args)
435.     for attr, (old_v, new_v, func) in param_dict.items():
436.         assert getattr(w, attr) == old_v
437.         getattr(w, func)(new_v)
438.         assert getattr(w, attr) == new_v
439. 
440. 
441. # png needs tol>=0.06, pdf tol>=1.617
442. @image_comparison(['wedge_range'], remove_text=True, tol=1.65 if on_win else 0)
443. def test_wedge_range():
444.     ax = plt.axes()
445. 
446.     t1 = 2.313869244286224
447. 
448.     args = [[52.31386924, 232.31386924],
449.             [52.313869244286224, 232.31386924428622],
450.             [t1, t1 + 180.0],
451.             [0, 360],
452.             [90, 90 + 360],
453.             [-180, 180],
454.             [0, 380],
455.             [45, 46],
456.             [46, 45]]
457. 
458.     for i, (theta1, theta2) in enumerate(args):
459.         x = i % 3
460.         y = i // 3
461. 
462.         wedge = mpatches.Wedge((x * 3, y * 3), 1, theta1, theta2,
463.                                facecolor='none', edgecolor='k', lw=3)
464. 
465.         ax.add_artist(wedge)
466. 
467.     ax.set_xlim(-2, 8)
468.     ax.set_ylim(-2, 9)
469. 
470. 
471. def test_patch_str():
472.     """
473.     Check that patches have nice and working `str` representation.
474. 
475.     Note that the logic is that `__str__` is defined such that:
476.     str(eval(str(p))) == str(p)
477.     """
478.     p = mpatches.Circle(xy=(1, 2), radius=3)
479.     assert str(p) == 'Circle(xy=(1, 2), radius=3)'
480. 
481.     p = mpatches.Ellipse(xy=(1, 2), width=3, height=4, angle=5)
482.     assert str(p) == 'Ellipse(xy=(1, 2), width=3, height=4, angle=5)'
483. 
484.     p = mpatches.Rectangle(xy=(1, 2), width=3, height=4, angle=5)
485.     assert str(p) == 'Rectangle(xy=(1, 2), width=3, height=4, angle=5)'
486. 
487.     p = mpatches.Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)
488.     assert str(p) == 'Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)'
489. 
490.     p = mpatches.Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)
491.     expected = 'Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)'
492.     assert str(p) == expected
493. 
494.     p = mpatches.Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)
495.     expected = "Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)"
496.     assert str(p) == expected
497. 
498.     p = mpatches.RegularPolygon((1, 2), 20, radius=5)
499.     assert str(p) == "RegularPolygon((1, 2), 20, radius=5, orientation=0)"
500.


File: lib/matplotlib/tests/test_patches.py
Line number range: 501 - 2000
Content:
501.     p = mpatches.CirclePolygon(xy=(1, 2), radius=5, resolution=20)
502.     assert str(p) == "CirclePolygon((1, 2), radius=5, resolution=20)"
503. 
504.     p = mpatches.FancyBboxPatch((1, 2), width=3, height=4)
505.     assert str(p) == "FancyBboxPatch((1, 2), width=3, height=4)"
506. 
507.     # Further nice __str__ which cannot be `eval`uated:
508.     path = mpath.Path([(1, 2), (2, 2), (1, 2)], closed=True)
509.     p = mpatches.PathPatch(path)
510.     assert str(p) == "PathPatch3((1, 2) ...)"
511. 
512.     p = mpatches.Polygon(np.empty((0, 2)))
513.     assert str(p) == "Polygon0()"
514. 
515.     data = [[1, 2], [2, 2], [1, 2]]
516.     p = mpatches.Polygon(data)
517.     assert str(p) == "Polygon3((1, 2) ...)"
518. 
519.     p = mpatches.FancyArrowPatch(path=path)
520.     assert str(p)[:27] == "FancyArrowPatch(Path(array("
521. 
522.     p = mpatches.FancyArrowPatch((1, 2), (3, 4))
523.     assert str(p) == "FancyArrowPatch((1, 2)->(3, 4))"
524. 
525.     p = mpatches.ConnectionPatch((1, 2), (3, 4), 'data')
526.     assert str(p) == "ConnectionPatch((1, 2), (3, 4))"
527. 
528.     s = mpatches.Shadow(p, 1, 1)
529.     assert str(s) == "Shadow(ConnectionPatch((1, 2), (3, 4)))"
530. 
531.     # Not testing Arrow, FancyArrow here
532.     # because they seem to exist only for historical reasons.
533. 
534. 
535. @image_comparison(['multi_color_hatch'], remove_text=True, style='default')
536. def test_multi_color_hatch():
537.     fig, ax = plt.subplots()
538. 
539.     rects = ax.bar(range(5), range(1, 6))
540.     for i, rect in enumerate(rects):
541.         rect.set_facecolor('none')
542.         rect.set_edgecolor(f'C{i}')
543.         rect.set_hatch('/')
544. 
545.     ax.autoscale_view()
546.     ax.autoscale(False)
547. 
548.     for i in range(5):
549.         with mpl.style.context({'hatch.color': f'C{i}'}):
550.             r = Rectangle((i - .8 / 2, 5), .8, 1, hatch='//', fc='none')
551.         ax.add_patch(r)
552. 
553. 
554. @image_comparison(['units_rectangle.png'])
555. def test_units_rectangle():
556.     import matplotlib.testing.jpl_units as U
557.     U.register()
558. 
559.     p = mpatches.Rectangle((5*U.km, 6*U.km), 1*U.km, 2*U.km)
560. 
561.     fig, ax = plt.subplots()
562.     ax.add_patch(p)
563.     ax.set_xlim([4*U.km, 7*U.km])
564.     ax.set_ylim([5*U.km, 9*U.km])
565. 
566. 
567. @image_comparison(['connection_patch.png'], style='mpl20', remove_text=True)
568. def test_connection_patch():
569.     fig, (ax1, ax2) = plt.subplots(1, 2)
570. 
571.     con = mpatches.ConnectionPatch(xyA=(0.1, 0.1), xyB=(0.9, 0.9),
572.                                    coordsA='data', coordsB='data',
573.                                    axesA=ax2, axesB=ax1,
574.                                    arrowstyle="->")
575.     ax2.add_artist(con)
576. 
577.     xyA = (0.6, 1.0)  # in axes coordinates
578.     xyB = (0.0, 0.2)  # x in axes coordinates, y in data coordinates
579.     coordsA = "axes fraction"
580.     coordsB = ax2.get_yaxis_transform()
581.     con = mpatches.ConnectionPatch(xyA=xyA, xyB=xyB, coordsA=coordsA,
582.                                    coordsB=coordsB, arrowstyle="-")
583.     ax2.add_artist(con)
584. 
585. 
586. @check_figures_equal(extensions=["png"])
587. def test_connection_patch_fig(fig_test, fig_ref):
588.     # Test that connection patch can be added as figure artist, and that figure
589.     # pixels count negative values from the top right corner (this API may be
590.     # changed in the future).
591.     ax1, ax2 = fig_test.subplots(1, 2)
592.     con = mpatches.ConnectionPatch(
593.         xyA=(.3, .2), coordsA="data", axesA=ax1,
594.         xyB=(-30, -20), coordsB="figure pixels",
595.         arrowstyle="->", shrinkB=5)
596.     fig_test.add_artist(con)
597. 
598.     ax1, ax2 = fig_ref.subplots(1, 2)
599.     bb = fig_ref.bbox
600.     # Necessary so that pixel counts match on both sides.
601.     plt.rcParams["savefig.dpi"] = plt.rcParams["figure.dpi"]
602.     con = mpatches.ConnectionPatch(
603.         xyA=(.3, .2), coordsA="data", axesA=ax1,
604.         xyB=(bb.width - 30, bb.height - 20), coordsB="figure pixels",
605.         arrowstyle="->", shrinkB=5)
606.     fig_ref.add_artist(con)
607. 
608. 
609. def test_datetime_rectangle():
610.     # Check that creating a rectangle with timedeltas doesn't fail
611.     from datetime import datetime, timedelta
612. 
613.     start = datetime(2017, 1, 1, 0, 0, 0)
614.     delta = timedelta(seconds=16)
615.     patch = mpatches.Rectangle((start, 0), delta, 1)
616. 
617.     fig, ax = plt.subplots()
618.     ax.add_patch(patch)
619. 
620. 
621. def test_datetime_datetime_fails():
622.     from datetime import datetime
623. 
624.     start = datetime(2017, 1, 1, 0, 0, 0)
625.     dt_delta = datetime(1970, 1, 5)  # Will be 5 days if units are done wrong.
626. 
627.     with pytest.raises(TypeError):
628.         mpatches.Rectangle((start, 0), dt_delta, 1)
629. 
630.     with pytest.raises(TypeError):
631.         mpatches.Rectangle((0, start), 1, dt_delta)
632. 
633. 
634. def test_contains_point():
635.     ell = mpatches.Ellipse((0.5, 0.5), 0.5, 1.0)
636.     points = [(0.0, 0.5), (0.2, 0.5), (0.25, 0.5), (0.5, 0.5)]
637.     path = ell.get_path()
638.     transform = ell.get_transform()
639.     radius = ell._process_radius(None)
640.     expected = np.array([path.contains_point(point,
641.                                              transform,
642.                                              radius) for point in points])
643.     result = np.array([ell.contains_point(point) for point in points])
644.     assert np.all(result == expected)
645. 
646. 
647. def test_contains_points():
648.     ell = mpatches.Ellipse((0.5, 0.5), 0.5, 1.0)
649.     points = [(0.0, 0.5), (0.2, 0.5), (0.25, 0.5), (0.5, 0.5)]
650.     path = ell.get_path()
651.     transform = ell.get_transform()
652.     radius = ell._process_radius(None)
653.     expected = path.contains_points(points, transform, radius)
654.     result = ell.contains_points(points)
655.     assert np.all(result == expected)
656. 
657. 
658. # Currently fails with pdf/svg, probably because some parts assume a dpi of 72.
659. @check_figures_equal(extensions=["png"])
660. def test_shadow(fig_test, fig_ref):
661.     xy = np.array([.2, .3])
662.     dxy = np.array([.1, .2])
663.     # We need to work around the nonsensical (dpi-dependent) interpretation of
664.     # offsets by the Shadow class...
665.     plt.rcParams["savefig.dpi"] = "figure"
666.     # Test image.
667.     a1 = fig_test.subplots()
668.     rect = mpatches.Rectangle(xy=xy, width=.5, height=.5)
669.     shadow = mpatches.Shadow(rect, ox=dxy[0], oy=dxy[1])
670.     a1.add_patch(rect)
671.     a1.add_patch(shadow)
672.     # Reference image.
673.     a2 = fig_ref.subplots()
674.     rect = mpatches.Rectangle(xy=xy, width=.5, height=.5)
675.     shadow = mpatches.Rectangle(
676.         xy=xy + fig_ref.dpi / 72 * dxy, width=.5, height=.5,
677.         fc=np.asarray(mcolors.to_rgb(rect.get_facecolor())) * .3,
678.         ec=np.asarray(mcolors.to_rgb(rect.get_facecolor())) * .3,
679.         alpha=.5)
680.     a2.add_patch(shadow)
681.     a2.add_patch(rect)
682. 
683. 
684. def test_fancyarrow_units():
685.     from datetime import datetime
686.     # Smoke test to check that FancyArrowPatch works with units
687.     dtime = datetime(2000, 1, 1)
688.     fig, ax = plt.subplots()
689.     arrow = FancyArrowPatch((0, dtime), (0.01, dtime))
690. 
691. 
692. def test_fancyarrow_setdata():
693.     fig, ax = plt.subplots()
694.     arrow = ax.arrow(0, 0, 10, 10, head_length=5, head_width=1, width=.5)
695.     expected1 = np.array(
696.       [[13.54, 13.54],
697.        [10.35,  9.65],
698.        [10.18,  9.82],
699.        [0.18, -0.18],
700.        [-0.18,  0.18],
701.        [9.82, 10.18],
702.        [9.65, 10.35],
703.        [13.54, 13.54]]
704.     )
705.     assert np.allclose(expected1, np.round(arrow.verts, 2))
706. 
707.     expected2 = np.array(
708.       [[16.71, 16.71],
709.        [16.71, 15.29],
710.        [16.71, 15.29],
711.        [1.71,  0.29],
712.        [0.29,  1.71],
713.        [15.29, 16.71],
714.        [15.29, 16.71],
715.        [16.71, 16.71]]
716.     )
717.     arrow.set_data(
718.         x=1, y=1, dx=15, dy=15, width=2, head_width=2, head_length=1
719.     )
720.     assert np.allclose(expected2, np.round(arrow.verts, 2))
721. 
722. 
723. @image_comparison(["large_arc.svg"], style="mpl20")
724. def test_large_arc():
725.     fig, (ax1, ax2) = plt.subplots(1, 2)
726.     x = 210
727.     y = -2115
728.     diameter = 4261
729.     for ax in [ax1, ax2]:
730.         a = Arc((x, y), diameter, diameter, lw=2, color='k')
731.         ax.add_patch(a)
732.         ax.set_axis_off()
733.         ax.set_aspect('equal')
734.     # force the high accuracy case
735.     ax1.set_xlim(7, 8)
736.     ax1.set_ylim(5, 6)
737. 
738.     # force the low accuracy case
739.     ax2.set_xlim(-25000, 18000)
740.     ax2.set_ylim(-20000, 6600)
741. 
742. 
743. @image_comparison(["all_quadrants_arcs.svg"], style="mpl20")
744. def test_rotated_arcs():
745.     fig, ax_arr = plt.subplots(2, 2, squeeze=False, figsize=(10, 10))
746. 
747.     scale = 10_000_000
748.     diag_centers = ((-1, -1), (-1, 1), (1, 1), (1, -1))
749.     on_axis_centers = ((0, 1), (1, 0), (0, -1), (-1, 0))
750.     skews = ((2, 2), (2, 1/10), (2,  1/100), (2, 1/1000))
751. 
752.     for ax, (sx, sy) in zip(ax_arr.ravel(), skews):
753.         k = 0
754.         for prescale, centers in zip((1 - .0001, (1 - .0001) / np.sqrt(2)),
755.                                       (on_axis_centers, diag_centers)):
756.             for j, (x_sign, y_sign) in enumerate(centers, start=k):
757.                 a = Arc(
758.                     (x_sign * scale * prescale,
759.                      y_sign * scale * prescale),
760.                     scale * sx,
761.                     scale * sy,
762.                     lw=4,
763.                     color=f"C{j}",
764.                     zorder=1 + j,
765.                     angle=np.rad2deg(np.arctan2(y_sign, x_sign)) % 360,
766.                     label=f'big {j}',
767.                     gid=f'big {j}'
768.                 )
769.                 ax.add_patch(a)
770. 
771.             k = j+1
772.         ax.set_xlim(-scale / 4000, scale / 4000)
773.         ax.set_ylim(-scale / 4000, scale / 4000)
774.         ax.axhline(0, color="k")
775.         ax.axvline(0, color="k")
776.         ax.set_axis_off()
777.         ax.set_aspect("equal")
778. 
779. 
780. def test_fancyarrow_shape_error():
781.     with pytest.raises(ValueError, match="Got unknown shape: 'foo'"):
782.         FancyArrow(0, 0, 0.2, 0.2, shape='foo')
783. 
784. 
785. @pytest.mark.parametrize('fmt, match', (
786.     ("foo", "Unknown style: 'foo'"),
787.     ("Round,foo", "Incorrect style argument: 'Round,foo'"),
788. ))
789. def test_boxstyle_errors(fmt, match):
790.     with pytest.raises(ValueError, match=match):
791.         BoxStyle(fmt)
792. 
793. 
794. @image_comparison(baseline_images=['annulus'], extensions=['png'])
795. def test_annulus():
796. 
797.     fig, ax = plt.subplots()
798.     cir = Annulus((0.5, 0.5), 0.2, 0.05, fc='g')        # circular annulus
799.     ell = Annulus((0.5, 0.5), (0.5, 0.3), 0.1, 45,      # elliptical
800.                   fc='m', ec='b', alpha=0.5, hatch='xxx')
801.     ax.add_patch(cir)
802.     ax.add_patch(ell)
803.     ax.set_aspect('equal')
804. 
805. 
806. @image_comparison(baseline_images=['annulus'], extensions=['png'])
807. def test_annulus_setters():
808. 
809.     fig, ax = plt.subplots()
810.     cir = Annulus((0., 0.), 0.2, 0.01, fc='g')   # circular annulus
811.     ell = Annulus((0., 0.), (1, 2), 0.1, 0,      # elliptical
812.                   fc='m', ec='b', alpha=0.5, hatch='xxx')
813.     ax.add_patch(cir)
814.     ax.add_patch(ell)
815.     ax.set_aspect('equal')
816. 
817.     cir.center = (0.5, 0.5)
818.     cir.radii = 0.2
819.     cir.width = 0.05
820. 
821.     ell.center = (0.5, 0.5)
822.     ell.radii = (0.5, 0.3)
823.     ell.width = 0.1
824.     ell.angle = 45
825. 
826. 
827. @image_comparison(baseline_images=['annulus'], extensions=['png'])
828. def test_annulus_setters2():
829. 
830.     fig, ax = plt.subplots()
831.     cir = Annulus((0., 0.), 0.2, 0.01, fc='g')   # circular annulus
832.     ell = Annulus((0., 0.), (1, 2), 0.1, 0,      # elliptical
833.                   fc='m', ec='b', alpha=0.5, hatch='xxx')
834.     ax.add_patch(cir)
835.     ax.add_patch(ell)
836.     ax.set_aspect('equal')
837. 
838.     cir.center = (0.5, 0.5)
839.     cir.set_semimajor(0.2)
840.     cir.set_semiminor(0.2)
841.     assert cir.radii == (0.2, 0.2)
842.     cir.width = 0.05
843. 
844.     ell.center = (0.5, 0.5)
845.     ell.set_semimajor(0.5)
846.     ell.set_semiminor(0.3)
847.     assert ell.radii == (0.5, 0.3)
848.     ell.width = 0.1
849.     ell.angle = 45
850. 
851. 
852. def test_degenerate_polygon():
853.     point = [0, 0]
854.     correct_extents = Bbox([point, point]).extents
855.     assert np.all(Polygon([point]).get_extents().extents == correct_extents)
856. 
857. 
858. @pytest.mark.parametrize('kwarg', ('edgecolor', 'facecolor'))
859. def test_color_override_warning(kwarg):
860.     with pytest.warns(UserWarning,
861.                       match="Setting the 'color' property will override "
862.                             "the edgecolor or facecolor properties."):
863.         Patch(color='black', **{kwarg: 'black'})
864. 
865. 
866. def test_empty_verts():
867.     poly = Polygon(np.zeros((0, 2)))
868.     assert poly.get_verts() == []
869. 
870. 
871. def test_default_antialiased():
872.     patch = Patch()
873. 
874.     patch.set_antialiased(not rcParams['patch.antialiased'])
875.     assert patch.get_antialiased() == (not rcParams['patch.antialiased'])
876.     # Check that None resets the state
877.     patch.set_antialiased(None)
878.     assert patch.get_antialiased() == rcParams['patch.antialiased']
879. 
880. 
881. def test_default_linestyle():
882.     patch = Patch()
883.     patch.set_linestyle('--')
884.     patch.set_linestyle(None)
885.     assert patch.get_linestyle() == 'solid'
886. 
887. 
888. def test_default_capstyle():
889.     patch = Patch()
890.     assert patch.get_capstyle() == 'butt'
891. 
892. 
893. def test_default_joinstyle():
894.     patch = Patch()
895.     assert patch.get_joinstyle() == 'miter'
896. 
897. 
898. @image_comparison(["autoscale_arc"], extensions=['png', 'svg'],
899.                   style="mpl20", remove_text=True)
900. def test_autoscale_arc():
901.     fig, axs = plt.subplots(1, 3, figsize=(4, 1))
902.     arc_lists = (
903.         [Arc((0, 0), 1, 1, theta1=0, theta2=90)],
904.         [Arc((0.5, 0.5), 1.5, 0.5, theta1=10, theta2=20)],
905.         [Arc((0.5, 0.5), 1.5, 0.5, theta1=10, theta2=20),
906.          Arc((0.5, 0.5), 2.5, 0.5, theta1=110, theta2=120),
907.          Arc((0.5, 0.5), 3.5, 0.5, theta1=210, theta2=220),
908.          Arc((0.5, 0.5), 4.5, 0.5, theta1=310, theta2=320)])
909. 
910.     for ax, arcs in zip(axs, arc_lists):
911.         for arc in arcs:
912.             ax.add_patch(arc)
913.         ax.autoscale()
914. 
915. 
916. @check_figures_equal(extensions=["png", 'svg', 'pdf', 'eps'])
917. def test_arc_in_collection(fig_test, fig_ref):
918.     arc1 = Arc([.5, .5], .5, 1, theta1=0, theta2=60, angle=20)
919.     arc2 = Arc([.5, .5], .5, 1, theta1=0, theta2=60, angle=20)
920.     col = mcollections.PatchCollection(patches=[arc2], facecolors='none',
921.                                        edgecolors='k')
922.     fig_ref.subplots().add_patch(arc1)
923.     fig_test.subplots().add_collection(col)
924. 
925. 
926. @check_figures_equal(extensions=["png", 'svg', 'pdf', 'eps'])
927. def test_modifying_arc(fig_test, fig_ref):
928.     arc1 = Arc([.5, .5], .5, 1, theta1=0, theta2=60, angle=20)
929.     arc2 = Arc([.5, .5], 1.5, 1, theta1=0, theta2=60, angle=10)
930.     fig_ref.subplots().add_patch(arc1)
931.     fig_test.subplots().add_patch(arc2)
932.     arc2.set_width(.5)
933.     arc2.set_angle(20)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 12:32:36,295 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the 'full content' of the file 'lib/matplotlib/tests/test_patches.py'.\n2. Extended relevance:\n   - Providing the entire file content directly and completely answers the user's query.", relative_path='lib/matplotlib/tests/test_patches.py', start_line=1, end_line=933)]
2025-12-21 12:32:36,298 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
2025-12-21 12:32:36,298 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 12:32:36,298 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 12:32:36,298 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 4 existing contexts
2025-12-21 12:32:36,298 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 5 total contexts (removed 0 duplicates)
2025-12-21 12:32:36,299 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   ├── deploy-docs.sh
|   └── fetch_doc_logs.py
├── .devcontainer
|   └── setup.sh
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── cygwin.yml
|       ├── good-first-issue.yml
|       ├── mypy-stubtest.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       ├── stale.yml
|       └── tests.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   ├── codespell-ignore-words.txt
|   ├── export_sdist_name.py
|   └── mypy-stubtest-allowlist.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── image-rotator.js
|   |   ├── markers
|   |   ├── mpl.css
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   ├── autosummary_class_only.rst
|   |   ├── cheatsheet_sidebar.html
|   |   ├── donate_sidebar.html
|   |   ├── function.rst
|   |   ├── pagesource.html
|   |   ├── search.html
|   |   ├── sections
|   |   |   └── announcement.html
|   |   ├── sidebar_announcement.html
|   |   └── sidebar_versions.html
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24661-AAMW.rst
|   |   |   |   ├── 25044-YI.rst
|   |   |   |   ├── 25061-DS.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25112-GG.rst
|   |   |   |   ├── 25192-DS.rst
|   |   |   |   ├── 25247-AL.rst
|   |   |   |   ├── 25255-RR.rst
|   |   |   |   ├── 25361-TAC.rst
|   |   |   |   ├── 25456-AL.rst
|   |   |   |   ├── 25697-AL.rst
|   |   |   |   ├── 25775-HZ.rst
|   |   |   |   ├── 26096-GL.rst
|   |   |   |   └── 26164-OG.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23200-OG.rst
|   |   |   |   ├── 24312-AL.rst
|   |   |   |   ├── 24913-AL.rst
|   |   |   |   ├── 24985-OG.rst
|   |   |   |   ├── 24990-OG.rst
|   |   |   |   ├── 25027-GL.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25138-AL.rst
|   |   |   |   ├── 25247-AL.rst
|   |   |   |   ├── 25282-AL.rst
|   |   |   |   ├── 25352-GL.rst
|   |   |   |   ├── 25427-AL.rst
|   |   |   |   ├── 25469-AL.rst
|   |   |   |   ├── 25484-AL.rst
|   |   |   |   ├── 25557-AL.rst
|   |   |   |   ├── 25559-AL.rst
|   |   |   |   ├── 25584-KS.rst
|   |   |   |   ├── 25588-KS.rst
|   |   |   |   ├── 25651-REC.rst
|   |   |   |   ├── 25708-AL.rst
|   |   |   |   ├── 25728-OG.rst
|   |   |   |   ├── 25742-ES.rst
|   |   |   |   ├── 25774-AL.rst
|   |   |   |   ├── 25781-AL.rst
|   |   |   |   ├── 25841-AL.rst
|   |   |   |   ├── 25859-ES.rst
|   |   |   |   ├── 25889-AL.rst
|   |   |   |   ├── 26056-OG.rst
|   |   |   |   ├── 26190-AL.rst
|   |   |   |   ├── 26241-AL.rst
|   |   |   |   ├── 26294-AL.rst
|   |   |   |   ├── 26295-AL.rst
|   |   |   |   ├── 26329-AL.rst
|   |   |   |   ├── 26399-REC.rst
|   |   |   |   ├── 26444-ES.rst
|   |   |   |   └── 26780-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24919-KS.rst
|   |   |   |   ├── 24976-KS.rst
|   |   |   |   ├── 25363-OG.rst
|   |   |   |   └── 25475-ES.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24923-ES.rst
|   |   |       ├── 24942-OG.rst
|   |   |       ├── 24984-OG.rst
|   |   |       ├── 25456-AL.rst
|   |   |       ├── 25584-KS.rst
|   |   |       └── 25648-TS.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.6.0.rst
|   |   |   ├── api_changes_3.6.1.rst
|   |   |   ├── api_changes_3.7.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.7.0.rst
|   |   ├── projections
|   |   |   ├── geo.rst
|   |   |   └── polar.rst
|   |   ├── projections_api.rst
|   |   ├── pylab.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_figmpl_directive_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── typing_api.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contribute.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── document.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_axis_positions.rst
|       |   ├── 3d_hover_coordinates.rst
|       |   ├── 3d_plots_shareview.rst
|       |   ├── README.rst
|       |   ├── antialiasing_text_annotation.rst
|       |   ├── auto_minor_tick.rst
|       |   ├── axline_setters.rst
|       |   ├── boldsym_mathtext.rst
|       |   ├── contour_clip_path.rst
|       |   ├── ecdf.rst
|       |   ├── get_suptitle.rst
|       |   ├── get_vertices_co_vertices.rst
|       |   ├── legend_shadow_colors.rst
|       |   ├── macosx_windows_tabs.rst
|       |   ├── mathtext_delimiters.rst
|       |   ├── mathtext_features.rst
|       |   ├── mathtext_relation_operators.rst
|       |   ├── mathtext_supports_text.rst
|       |   ├── mpl_toolkit_pep420.rst
|       |   ├── multiplelocator_offset.rst
|       |   ├── new_color_spec_tuple.rst
|       |   ├── pie_shadow_control.rst
|       |   ├── plot_directive_srcset.rst
|       |   ├── polyquadmesh.rst
|       |   ├── rcParams[legend.loc]_supports_float_tuple.rst
|       |   ├── savefig_bbox_layout.rst
|       |   ├── set_loc.rst
|       |   ├── shadow_shade.rst
|       |   ├── spinesproxyset.rst
|       |   ├── tick_labelfont_param.rst
|       |   └── updated_mathtext.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── github_stats_3.6.0.rst
|       |   ├── github_stats_3.6.1.rst
|       |   ├── github_stats_3.6.2.rst
|       |   ├── github_stats_3.6.3.rst
|       |   ├── github_stats_3.7.0.rst
|       |   ├── github_stats_3.7.1.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   ├── whats_new_3.6.0.rst
|       |   └── whats_new_3.7.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── galleries
|   ├── examples
|   |   ├── README.txt
|   |   ├── animation
|   |   |   ├── README.txt
|   |   |   ├── animate_decay.py
|   |   |   ├── animated_histogram.py
|   |   |   ├── animation_demo.py
|   |   |   ├── bayes_update.py
|   |   |   ├── double_pendulum.py
|   |   |   ├── dynamic_image.py
|   |   |   ├── frame_grabbing_sgskip.py
|   |   |   ├── multiple_axes.py
|   |   |   ├── pause_resume.py
|   |   |   ├── rain.py
|   |   |   ├── random_walk.py
|   |   |   ├── simple_anim.py
|   |   |   ├── simple_scatter.py
|   |   |   ├── strip_chart.py
|   |   |   └── unchained.py
|   |   ├── axes_grid1
|   |   |   ├── README.txt
|   |   |   ├── demo_anchored_direction_arrows.py
|   |   |   ├── demo_axes_divider.py
|   |   |   ├── demo_axes_grid.py
|   |   |   ├── demo_axes_grid2.py
|   |   |   ├── demo_axes_hbox_divider.py
|   |   |   ├── demo_axes_rgb.py
|   |   |   ├── demo_colorbar_of_inset_axes.py
|   |   |   ├── demo_colorbar_with_axes_divider.py
|   |   |   ├── demo_colorbar_with_inset_locator.py
|   |   |   ├── demo_edge_colorbar.py
|   |   |   ├── demo_fixed_size_axes.py
|   |   |   ├── demo_imagegrid_aspect.py
|   |   |   ├── inset_locator_demo.py
|   |   |   ├── inset_locator_demo2.py
|   |   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   |   ├── parasite_simple.py
|   |   |   ├── parasite_simple2.py
|   |   |   ├── scatter_hist_locatable_axes.py
|   |   |   ├── simple_anchored_artists.py
|   |   |   ├── simple_axes_divider1.py
|   |   |   ├── simple_axes_divider3.py
|   |   |   ├── simple_axesgrid.py
|   |   |   ├── simple_axesgrid2.py
|   |   |   ├── simple_axisline4.py
|   |   |   └── simple_colorbar.py
|   |   ├── axisartist
|   |   |   ├── README.txt
|   |   |   ├── axis_direction.py
|   |   |   ├── demo_axis_direction.py
|   |   |   ├── demo_axisline_style.py
|   |   |   ├── demo_curvelinear_grid.py
|   |   |   ├── demo_curvelinear_grid2.py
|   |   |   ├── demo_floating_axes.py
|   |   |   ├── demo_floating_axis.py
|   |   |   ├── demo_parasite_axes.py
|   |   |   ├── demo_parasite_axes2.py
|   |   |   ├── demo_ticklabel_alignment.py
|   |   |   ├── demo_ticklabel_direction.py
|   |   |   ├── simple_axis_direction01.py
|   |   |   ├── simple_axis_direction03.py
|   |   |   ├── simple_axis_pad.py
|   |   |   ├── simple_axisartist1.py
|   |   |   ├── simple_axisline.py
|   |   |   └── simple_axisline3.py
|   |   ├── color
|   |   |   ├── README.txt
|   |   |   ├── color_by_yvalue.py
|   |   |   ├── color_cycle_default.py
|   |   |   ├── color_demo.py
|   |   |   ├── colorbar_basics.py
|   |   |   ├── colormap_reference.py
|   |   |   ├── custom_cmap.py
|   |   |   ├── named_colors.py
|   |   |   └── set_alpha.py
|   |   ├── event_handling
|   |   |   ├── README.txt
|   |   |   ├── close_event.py
|   |   |   ├── coords_demo.py
|   |   |   ├── cursor_demo.py
|   |   |   ├── data_browser.py
|   |   |   ├── figure_axes_enter_leave.py
|   |   |   ├── ginput_manual_clabel_sgskip.py
|   |   |   ├── image_slices_viewer.py
|   |   |   ├── keypress_demo.py
|   |   |   ├── lasso_demo.py
|   |   |   ├── legend_picking.py
|   |   |   ├── looking_glass.py
|   |   |   ├── path_editor.py
|   |   |   ├── pick_event_demo.py
|   |   |   ├── pick_event_demo2.py
|   |   |   ├── poly_editor.py
|   |   |   ├── pong_sgskip.py
|   |   |   ├── resample.py
|   |   |   ├── timers.py
|   |   |   ├── trifinder_event_demo.py
|   |   |   ├── viewlims.py
|   |   |   └── zoom_window.py
|   |   ├── images_contours_and_fields
|   |   |   ├── README.txt
|   |   |   ├── affine_image.py
|   |   |   ├── barb_demo.py
|   |   |   ├── barcode_demo.py
|   |   |   ├── colormap_interactive_adjustment.py
|   |   |   ├── colormap_normalizations.py
|   |   |   ├── colormap_normalizations_symlognorm.py
|   |   |   ├── contour_corner_mask.py
|   |   |   ├── contour_demo.py
|   |   |   ├── contour_image.py
|   |   |   ├── contour_label_demo.py
|   |   |   ├── contourf_demo.py
|   |   |   ├── contourf_hatching.py
|   |   |   ├── contourf_log.py
|   |   |   ├── contours_in_optimization_demo.py
|   |   |   ├── demo_bboximage.py
|   |   |   ├── figimage_demo.py
|   |   |   ├── image_annotated_heatmap.py
|   |   |   ├── image_antialiasing.py
|   |   |   ├── image_clip_path.py
|   |   |   ├── image_demo.py
|   |   |   ├── image_masked.py
|   |   |   ├── image_nonuniform.py
|   |   |   ├── image_transparency_blend.py
|   |   |   ├── image_zcoord.py
|   |   |   ├── interpolation_methods.py
|   |   |   ├── irregulardatagrid.py
|   |   |   ├── layer_images.py
|   |   |   ├── matshow.py
|   |   |   ├── multi_image.py
|   |   |   ├── pcolor_demo.py
|   |   |   ├── pcolormesh_grids.py
|   |   |   ├── pcolormesh_levels.py
|   |   |   ├── plot_streamplot.py
|   |   |   ├── quadmesh_demo.py
|   |   |   ├── quiver_demo.py
|   |   |   ├── quiver_simple_demo.py
|   |   |   ├── shading_example.py
|   |   |   ├── specgram_demo.py
|   |   |   ├── spy_demos.py
|   |   |   ├── tricontour_demo.py
|   |   |   ├── tricontour_smooth_delaunay.py
|   |   |   ├── tricontour_smooth_user.py
|   |   |   ├── trigradient_demo.py
|   |   |   ├── triinterp_demo.py
|   |   |   ├── tripcolor_demo.py
|   |   |   ├── triplot_demo.py
|   |   |   └── watermark_image.py
|   |   ├── lines_bars_and_markers
|   |   |   ├── README.txt
|   |   |   ├── bar_colors.py
|   |   |   ├── bar_label_demo.py
|   |   |   ├── bar_stacked.py
|   |   |   ├── barchart.py
|   |   |   ├── barh.py
|   |   |   ├── broken_barh.py
|   |   |   ├── capstyle.py
|   |   |   ├── categorical_variables.py
|   |   |   ├── cohere.py
|   |   |   ├── csd_demo.py
|   |   |   ├── curve_error_band.py
|   |   |   ├── errorbar_limits_simple.py
|   |   |   ├── errorbar_subsample.py
|   |   |   ├── eventcollection_demo.py
|   |   |   ├── eventplot_demo.py
|   |   |   ├── fill.py
|   |   |   ├── fill_between_alpha.py
|   |   |   ├── fill_between_demo.py
|   |   |   ├── fill_betweenx_demo.py
|   |   |   ├── filled_step.py
|   |   |   ├── gradient_bar.py
|   |   |   ├── hat_graph.py
|   |   |   ├── horizontal_barchart_distribution.py
|   |   |   ├── joinstyle.py
|   |   |   ├── line_demo_dash_control.py
|   |   |   ├── lines_with_ticks_demo.py
|   |   |   ├── linestyles.py
|   |   |   ├── marker_reference.py
|   |   |   ├── markevery_demo.py
|   |   |   ├── masked_demo.py
|   |   |   ├── multicolored_line.py
|   |   |   ├── multivariate_marker_plot.py
|   |   |   ├── psd_demo.py
|   |   |   ├── scatter_demo2.py
|   |   |   ├── scatter_hist.py
|   |   |   ├── scatter_masked.py
|   |   |   ├── scatter_star_poly.py
|   |   |   ├── scatter_with_legend.py
|   |   |   ├── simple_plot.py
|   |   |   ├── span_regions.py
|   |   |   ├── spectrum_demo.py
|   |   |   ├── stackplot_demo.py
|   |   |   ├── stairs_demo.py
|   |   |   ├── stem_plot.py
|   |   |   ├── step_demo.py
|   |   |   ├── timeline.py
|   |   |   ├── vline_hline_demo.py
|   |   |   └── xcorr_acorr_demo.py
|   |   ├── misc
|   |   |   ├── README.txt
|   |   |   ├── anchored_artists.py
|   |   |   ├── bbox_intersect.py
|   |   |   ├── contour_manual.py
|   |   |   ├── coords_report.py
|   |   |   ├── custom_projection.py
|   |   |   ├── customize_rc.py
|   |   |   ├── demo_agg_filter.py
|   |   |   ├── demo_ribbon_box.py
|   |   |   ├── fig_x.py
|   |   |   ├── fill_spiral.py
|   |   |   ├── findobj_demo.py
|   |   |   ├── font_indexing.py
|   |   |   ├── ftface_props.py
|   |   |   ├── histogram_path.py
|   |   |   ├── hyperlinks_sgskip.py
|   |   |   ├── image_thumbnail_sgskip.py
|   |   |   ├── keyword_plotting.py
|   |   |   ├── logos2.py
|   |   |   ├── multipage_pdf.py
|   |   |   ├── multiprocess_sgskip.py
|   |   |   ├── packed_bubbles.py
|   |   |   ├── patheffect_demo.py
|   |   |   ├── print_stdout_sgskip.py
|   |   |   ├── rasterization_demo.py
|   |   |   ├── set_and_get.py
|   |   |   ├── svg_filter_line.py
|   |   |   ├── svg_filter_pie.py
|   |   |   ├── table_demo.py
|   |   |   ├── tickedstroke_demo.py
|   |   |   ├── transoffset.py
|   |   |   └── zorder_demo.py
|   |   ├── mplot3d
|   |   |   ├── 2dcollections3d.py
|   |   |   ├── 3d_bars.py
|   |   |   ├── README.txt
|   |   |   ├── bars3d.py
|   |   |   ├── box3d.py
|   |   |   ├── contour3d.py
|   |   |   ├── contour3d_2.py
|   |   |   ├── contour3d_3.py
|   |   |   ├── contourf3d.py
|   |   |   ├── contourf3d_2.py
|   |   |   ├── custom_shaded_3d_surface.py
|   |   |   ├── errorbar3d.py
|   |   |   ├── hist3d.py
|   |   |   ├── lines3d.py
|   |   |   ├── lorenz_attractor.py
|   |   |   ├── mixed_subplots.py
|   |   |   ├── offset.py
|   |   |   ├── pathpatch3d.py
|   |   |   ├── polys3d.py
|   |   |   ├── projections.py
|   |   |   ├── quiver3d.py
|   |   |   ├── rotate_axes3d_sgskip.py
|   |   |   ├── scatter3d.py
|   |   |   ├── stem3d_demo.py
|   |   |   ├── subplot3d.py
|   |   |   ├── surface3d.py
|   |   |   ├── surface3d_2.py
|   |   |   ├── surface3d_3.py
|   |   |   ├── surface3d_radial.py
|   |   |   ├── text3d.py
|   |   |   ├── tricontour3d.py
|   |   |   ├── tricontourf3d.py
|   |   |   ├── trisurf3d.py
|   |   |   ├── trisurf3d_2.py
|   |   |   ├── view_planes_3d.py
|   |   |   ├── voxels.py
|   |   |   ├── voxels_numpy_logo.py
|   |   |   ├── voxels_rgb.py
|   |   |   ├── voxels_torus.py
|   |   |   ├── wire3d.py
|   |   |   ├── wire3d_animation_sgskip.py
|   |   |   └── wire3d_zero_stride.py
|   |   ├── pie_and_polar_charts
|   |   |   ├── README.txt
|   |   |   ├── bar_of_pie.py
|   |   |   ├── nested_pie.py
|   |   |   ├── pie_and_donut_labels.py
|   |   |   ├── pie_features.py
|   |   |   ├── polar_bar.py
|   |   |   ├── polar_demo.py
|   |   |   ├── polar_error_caps.py
|   |   |   ├── polar_legend.py
|   |   |   └── polar_scatter.py
|   |   ├── pyplots
|   |   |   ├── README.txt
|   |   |   ├── axline.py
|   |   |   ├── pyplot_simple.py
|   |   |   ├── pyplot_text.py
|   |   |   ├── pyplot_three.py
|   |   |   └── pyplot_two_subplots.py
|   |   ├── scales
|   |   |   ├── README.txt
|   |   |   ├── asinh_demo.py
|   |   |   ├── aspect_loglog.py
|   |   |   ├── custom_scale.py
|   |   |   ├── log_bar.py
|   |   |   ├── log_demo.py
|   |   |   ├── logit_demo.py
|   |   |   ├── power_norm.py
|   |   |   ├── scales.py
|   |   |   ├── semilogx_demo.py
|   |   |   └── symlog_demo.py
|   |   ├── shapes_and_collections
|   |   |   ├── README.txt
|   |   |   ├── arrow_guide.py
|   |   |   ├── artist_reference.py
|   |   |   ├── collections.py
|   |   |   ├── compound_path.py
|   |   |   ├── dolphin.py
|   |   |   ├── donut.py
|   |   |   ├── ellipse_arrow.py
|   |   |   ├── ellipse_collection.py
|   |   |   ├── ellipse_demo.py
|   |   |   ├── fancybox_demo.py
|   |   |   ├── hatch_demo.py
|   |   |   ├── hatch_style_reference.py
|   |   |   ├── line_collection.py
|   |   |   ├── patch_collection.py
|   |   |   ├── path_patch.py
|   |   |   ├── quad_bezier.py
|   |   |   └── scatter.py
|   |   ├── showcase
|   |   |   ├── README.txt
|   |   |   ├── anatomy.py
|   |   |   ├── firefox.py
|   |   |   ├── integral.py
|   |   |   ├── mandelbrot.py
|   |   |   ├── stock_prices.py
|   |   |   └── xkcd.py
|   |   ├── specialty_plots
|   |   |   ├── README.txt
|   |   |   ├── advanced_hillshading.py
|   |   |   ├── anscombe.py
|   |   |   ├── hinton_demo.py
|   |   |   ├── ishikawa_diagram.py
|   |   |   ├── leftventricle_bullseye.py
|   |   |   ├── mri_with_eeg.py
|   |   |   ├── radar_chart.py
|   |   |   ├── sankey_basics.py
|   |   |   ├── sankey_links.py
|   |   |   ├── sankey_rankine.py
|   |   |   ├── skewt.py
|   |   |   └── topographic_hillshading.py
|   |   ├── spines
|   |   |   ├── README.txt
|   |   |   ├── centered_spines_with_arrows.py
|   |   |   ├── multiple_yaxis_with_spines.py
|   |   |   ├── spine_placement_demo.py
|   |   |   ├── spines.py
|   |   |   └── spines_dropped.py
|   |   ├── statistics
|   |   |   ├── README.txt
|   |   |   ├── barchart_demo.py
|   |   |   ├── boxplot.py
|   |   |   ├── boxplot_color.py
|   |   |   ├── boxplot_demo.py
|   |   |   ├── boxplot_vs_violin.py
|   |   |   ├── bxp.py
|   |   |   ├── confidence_ellipse.py
|   |   |   ├── customized_violin.py
|   |   |   ├── errorbar.py
|   |   |   ├── errorbar_features.py
|   |   |   ├── errorbar_limits.py
|   |   |   ├── errorbars_and_boxes.py
|   |   |   ├── hexbin_demo.py
|   |   |   ├── hist.py
|   |   |   ├── histogram_cumulative.py
|   |   |   ├── histogram_features.py
|   |   |   ├── histogram_histtypes.py
|   |   |   ├── histogram_multihist.py
|   |   |   ├── multiple_histograms_side_by_side.py
|   |   |   ├── time_series_histogram.py
|   |   |   └── violinplot.py
|   |   ├── style_sheets
|   |   |   ├── README.txt
|   |   |   ├── bmh.py
|   |   |   ├── dark_background.py
|   |   |   ├── fivethirtyeight.py
|   |   |   ├── ggplot.py
|   |   |   ├── grayscale.py
|   |   |   ├── plot_solarizedlight2.py
|   |   |   └── style_sheets_reference.py
|   |   ├── subplots_axes_and_figures
|   |   |   ├── README.txt
|   |   |   ├── align_labels_demo.py
|   |   |   ├── auto_subplots_adjust.py
|   |   |   ├── axes_box_aspect.py
|   |   |   ├── axes_demo.py
|   |   |   ├── axes_margins.py
|   |   |   ├── axes_props.py
|   |   |   ├── axes_zoom_effect.py
|   |   |   ├── axhspan_demo.py
|   |   |   ├── axis_equal_demo.py
|   |   |   ├── axis_labels_demo.py
|   |   |   ├── broken_axis.py
|   |   |   ├── custom_figure_class.py
|   |   |   ├── demo_constrained_layout.py
|   |   |   ├── demo_tight_layout.py
|   |   |   ├── fahrenheit_celsius_scales.py
|   |   |   ├── figure_size_units.py
|   |   |   ├── figure_title.py
|   |   |   ├── ganged_plots.py
|   |   |   ├── geo_demo.py
|   |   |   ├── gridspec_and_subplots.py
|   |   |   ├── gridspec_multicolumn.py
|   |   |   ├── gridspec_nested.py
|   |   |   ├── invert_axes.py
|   |   |   ├── multiple_figs_demo.py
|   |   |   ├── secondary_axis.py
|   |   |   ├── share_axis_lims_views.py
|   |   |   ├── shared_axis_demo.py
|   |   |   ├── subfigures.py
|   |   |   ├── subplot.py
|   |   |   ├── subplots_adjust.py
|   |   |   ├── subplots_demo.py
|   |   |   ├── two_scales.py
|   |   |   └── zoom_inset_axes.py
|   |   ├── text_labels_and_annotations
|   |   |   ├── README.txt
|   |   |   ├── accented_text.py
|   |   |   ├── align_ylabels.py
|   |   |   ├── angle_annotation.py
|   |   |   ├── angles_on_bracket_arrows.py
|   |   |   ├── annotate_transform.py
|   |   |   ├── annotation_basic.py
|   |   |   ├── annotation_demo.py
|   |   |   ├── annotation_polar.py
|   |   |   ├── arrow_demo.py
|   |   |   ├── autowrap.py
|   |   |   ├── custom_legends.py
|   |   |   ├── date.py
|   |   |   ├── demo_annotation_box.py
|   |   |   ├── demo_text_path.py
|   |   |   ├── demo_text_rotation_mode.py
|   |   |   ├── dfrac_demo.py
|   |   |   ├── engineering_formatter.py
|   |   |   ├── fancyarrow_demo.py
|   |   |   ├── fancytextbox_demo.py
|   |   |   ├── figlegend_demo.py
|   |   |   ├── font_family_rc.py
|   |   |   ├── font_file.py
|   |   |   ├── font_table.py
|   |   |   ├── fonts_demo.py
|   |   |   ├── fonts_demo_kw.py
|   |   |   ├── label_subplots.py
|   |   |   ├── legend.py
|   |   |   ├── legend_demo.py
|   |   |   ├── line_with_text.py
|   |   |   ├── mathtext_asarray.py
|   |   |   ├── mathtext_demo.py
|   |   |   ├── mathtext_examples.py
|   |   |   ├── mathtext_fontfamily_example.py
|   |   |   ├── multiline.py
|   |   |   ├── placing_text_boxes.py
|   |   |   ├── rainbow_text.py
|   |   |   ├── stix_fonts_demo.py
|   |   |   ├── tex_demo.py
|   |   |   ├── text_alignment.py
|   |   |   ├── text_commands.py
|   |   |   ├── text_fontdict.py
|   |   |   ├── text_rotation_relative_to_line.py
|   |   |   ├── titles_demo.py
|   |   |   ├── unicode_minus.py
|   |   |   ├── usetex_baseline_test.py
|   |   |   ├── usetex_fonteffects.py
|   |   |   └── watermark_text.py
|   |   ├── ticks
|   |   |   ├── README.txt
|   |   |   ├── auto_ticks.py
|   |   |   ├── centered_ticklabels.py
|   |   |   ├── colorbar_tick_labelling_demo.py
|   |   |   ├── custom_ticker1.py
|   |   |   ├── date_concise_formatter.py
|   |   |   ├── date_demo_convert.py
|   |   |   ├── date_demo_rrule.py
|   |   |   ├── date_formatters_locators.py
|   |   |   ├── date_index_formatter.py
|   |   |   ├── date_precision_and_epochs.py
|   |   |   ├── dollar_ticks.py
|   |   |   ├── fig_axes_customize_simple.py
|   |   |   ├── major_minor_demo.py
|   |   |   ├── scalarformatter.py
|   |   |   ├── tick-formatters.py
|   |   |   ├── tick-locators.py
|   |   |   ├── tick_label_right.py
|   |   |   ├── tick_labels_from_values.py
|   |   |   ├── tick_xlabel_top.py
|   |   |   ├── ticklabels_rotation.py
|   |   |   └── ticks_too_many.py
|   |   ├── units
|   |   |   ├── README.txt
|   |   |   ├── annotate_with_units.py
|   |   |   ├── artist_tests.py
|   |   |   ├── bar_demo2.py
|   |   |   ├── bar_unit_demo.py
|   |   |   ├── basic_units.py
|   |   |   ├── ellipse_with_units.py
|   |   |   ├── evans_test.py
|   |   |   ├── radian_demo.py
|   |   |   ├── units_sample.py
|   |   |   └── units_scatter.py
|   |   ├── user_interfaces
|   |   |   ├── README.txt
|   |   |   ├── canvasagg.py
|   |   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk3_sgskip.py
|   |   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk4_sgskip.py
|   |   |   ├── embedding_in_qt_sgskip.py
|   |   |   ├── embedding_in_tk_sgskip.py
|   |   |   ├── embedding_in_wx2_sgskip.py
|   |   |   ├── embedding_in_wx3_sgskip.py
|   |   |   ├── embedding_in_wx4_sgskip.py
|   |   |   ├── embedding_in_wx5_sgskip.py
|   |   |   ├── embedding_webagg_sgskip.py
|   |   |   ├── fourier_demo_wx_sgskip.py
|   |   |   ├── gtk3_spreadsheet_sgskip.py
|   |   |   ├── gtk4_spreadsheet_sgskip.py
|   |   |   ├── images
|   |   |   ├── mathtext_wx_sgskip.py
|   |   |   ├── mpl_with_glade3_sgskip.py
|   |   |   ├── mplcvd.py
|   |   |   ├── pylab_with_gtk3_sgskip.py
|   |   |   ├── pylab_with_gtk4_sgskip.py
|   |   |   ├── svg_histogram_sgskip.py
|   |   |   ├── svg_tooltip_sgskip.py
|   |   |   ├── toolmanager_sgskip.py
|   |   |   ├── web_application_server_sgskip.py
|   |   |   └── wxcursor_demo_sgskip.py
|   |   ├── userdemo
|   |   |   ├── README.txt
|   |   |   ├── annotate_explain.py
|   |   |   ├── annotate_text_arrow.py
|   |   |   ├── connectionstyle_demo.py
|   |   |   ├── custom_boxstyle01.py
|   |   |   ├── demo_gridspec01.py
|   |   |   ├── demo_gridspec03.py
|   |   |   ├── demo_gridspec06.py
|   |   |   ├── pgf_fonts.py
|   |   |   ├── pgf_preamble_sgskip.py
|   |   |   ├── pgf_texsystem.py
|   |   |   ├── simple_annotate01.py
|   |   |   ├── simple_legend01.py
|   |   |   └── simple_legend02.py
|   |   └── widgets
|   |       ├── README.txt
|   |       ├── annotated_cursor.py
|   |       ├── buttons.py
|   |       ├── check_buttons.py
|   |       ├── cursor.py
|   |       ├── lasso_selector_demo_sgskip.py
|   |       ├── menu.py
|   |       ├── mouse_cursor.py
|   |       ├── multicursor.py
|   |       ├── polygon_selector_demo.py
|   |       ├── polygon_selector_simple.py
|   |       ├── radio_buttons.py
|   |       ├── range_slider.py
|   |       ├── rectangle_selector.py
|   |       ├── slider_demo.py
|   |       ├── slider_snap_demo.py
|   |       ├── span_selector.py
|   |       └── textbox.py
|   ├── plot_types
|   |   ├── 3D
|   |   |   ├── README.rst
|   |   |   ├── scatter3d_simple.py
|   |   |   ├── surface3d_simple.py
|   |   |   ├── trisurf3d_simple.py
|   |   |   ├── voxels_simple.py
|   |   |   └── wire3d_simple.py
|   |   ├── README.rst
|   |   ├── arrays
|   |   |   ├── README.rst
|   |   |   ├── barbs.py
|   |   |   ├── contour.py
|   |   |   ├── contourf.py
|   |   |   ├── imshow.py
|   |   |   ├── pcolormesh.py
|   |   |   ├── quiver.py
|   |   |   └── streamplot.py
|   |   ├── basic
|   |   |   ├── README.rst
|   |   |   ├── bar.py
|   |   |   ├── fill_between.py
|   |   |   ├── plot.py
|   |   |   ├── scatter_plot.py
|   |   |   ├── stackplot.py
|   |   |   ├── stairs.py
|   |   |   └── stem.py
|   |   ├── stats
|   |   |   ├── README.rst
|   |   |   ├── boxplot_plot.py
|   |   |   ├── ecdf.py
|   |   |   ├── errorbar_plot.py
|   |   |   ├── eventplot.py
|   |   |   ├── hexbin.py
|   |   |   ├── hist2d.py
|   |   |   ├── hist_plot.py
|   |   |   ├── pie.py
|   |   |   └── violin.py
|   |   └── unstructured
|   |       ├── README.rst
|   |       ├── tricontour.py
|   |       ├── tricontourf.py
|   |       ├── tripcolor.py
|   |       └── triplot.py
|   ├── tutorials
|   |   ├── artists.py
|   |   ├── images.py
|   |   ├── index.rst
|   |   ├── lifecycle.py
|   |   └── pyplot.py
|   └── users_explain
|       ├── animations
|       |   ├── README.txt
|       |   ├── animations.py
|       |   └── blitting.py
|       ├── artists
|       |   ├── artist_intro.rst
|       |   ├── color_cycle.py
|       |   ├── imshow_extent.py
|       |   ├── index.rst
|       |   ├── patheffects_guide.py
|       |   ├── paths.py
|       |   ├── performance.rst
|       |   └── transforms_tutorial.py
|       ├── axes
|       |   ├── arranging_axes.py
|       |   ├── autoscale.py
|       |   ├── axes_intro.rst
|       |   ├── axes_scales.py
|       |   ├── axes_ticks.py
|       |   ├── colorbar_placement.py
|       |   ├── constrainedlayout_guide.py
|       |   ├── index.rst
|       |   ├── legend_guide.py
|       |   ├── mosaic.py
|       |   └── tight_layout_guide.py
|       ├── colors
|       |   ├── README.txt
|       |   ├── colorbar_only.py
|       |   ├── colormap-manipulation.py
|       |   ├── colormapnorms.py
|       |   ├── colormaps.py
|       |   └── colors.py
|       ├── customizing.py
|       ├── figure
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── figure_intro.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── index.rst
|       ├── quick_start.py
|       ├── text
|       |   ├── README.txt
|       |   ├── annotations.py
|       |   ├── fonts.py
|       |   ├── mathtext.py
|       |   ├── pgf.py
|       |   ├── text_intro.py
|       |   ├── text_props.py
|       |   └── usetex.py
|       └── toolkits
|           ├── axes_grid.rst
|           ├── axisartist.rst
|           ├── index.rst
|           └── mplot3d.rst
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── all_figures.html
|   |   |       ├── css
|   |   |       ├── ipython_inline_figure.html
|   |   |       ├── js
|   |   |       └── single_figure.html
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   |   └── plot_directive.css
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── figmpl_directive.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── nestedpage
|   |   |       ├── nestedpage2
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── typing.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           ├── test_axes3d.py
|   |           └── test_legend3d.py
|   └── pylab.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       ├── minver.txt
|       └── mypy.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
└── tools
    ├── README.txt
    ├── boilerplate.py
    ├── cache_zenodo_svg.py
    ├── check_typehints.py
    ├── create_DejaVuDisplay.sh
    ├── embed_js.py
    ├── gh_api.py
    ├── github_stats.py
    ├── make_icons.py
    ├── memleak.py
    ├── run_examples.py
    ├── subset.py
    ├── triage_tests.py
    └── visualize_tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Updating an array passed as the xy parameter to annotate updates the anottation

Description: ### Bug report

**Bug summary**
When an array is used as the _xy_ kwarg for an annotation that includes arrows, changing the array after calling the function changes the arrow position. It is very likely that the same array is kept instead of a copy.

**Code for reproduction**


```python
fig = plt.figure("test")

ax = fig.add_axes([0.13, 0.15, .8, .8])
ax.set_xlim(-5, 5)
ax.set_ylim(-3, 3)

xy_0 =np.array((-4, 1))
xy_f =np.array((-1, 1))
# this annotation is messed by later changing the array passed as xy kwarg
ax.annotate(s='', xy=xy_0, xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3# <--this  updates the arrow position

xy_0 =np.array((1, 1))
xy_f =np.array((4, 1))
# using a copy of the array helps spoting where the problem is
ax.annotate(s='', xy=xy_0.copy(), xytext=xy_f, arrowprops=dict(arrowstyle='<->'))
xy_0[1] = 3
```

**Actual outcome**

![bug](https://user-images.githubusercontent.com/45225345/83718413-5d656a80-a60b-11ea-8ef0-a1a18337de28.png)

**Expected outcome**
Both arrows should be horizontal

**Matplotlib version**
  * Operating system: Debian 9
  * Matplotlib version: '3.0.3'
  * Matplotlib backend: Qt5Agg
  * Python version:'3.5.3'
  * Jupyter version (if applicable):
  * Other libraries: Numpy 1.17.3

Matplotlib was installed using pip


Patch information:
diff --git a/lib/matplotlib/patches.py b/lib/matplotlib/patches.py
index 92dc55940b..bc41964e92 100644
--- a/lib/matplotlib/patches.py
+++ b/lib/matplotlib/patches.py
@@ -4147,7 +4147,7 @@ default: 'arc3'
         super().__init__(**kwargs)
 
         if posA is not None and posB is not None and path is None:
-            self._posA_posB = [posA, posB]
+            self._posA_posB = [tuple(posA), tuple(posB)]
 
             if connectionstyle is None:
                 connectionstyle = "arc3"
@@ -4183,9 +4183,9 @@ default: 'arc3'
             `None` use current value.
         """
         if posA is not None:
-            self._posA_posB[0] = posA
+            self._posA_posB[0] = tuple(posA)
         if posB is not None:
-            self._posA_posB[1] = posB
+            self._posA_posB[1] = tuple(posB)
         self.stale = True
 
     def set_patchA(self, patchA):
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index d4922fc517..2951122a51 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -1456,7 +1456,7 @@ class _AnnotationBase:
                  xycoords='data',
                  annotation_clip=None):
 
-        self.xy = xy
+        self.xy = tuple(xy)
         self.xycoords = xycoords
         self.set_annotation_clip(annotation_clip)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of lib/matplotlib/tests/test_text.py.
Extra Requirements: 
Purpose: I need the content of `lib/matplotlib/tests/test_text.py` to find existing tests for `ax.annotate` that can be used to demonstrate the reported bug or similar functionality.

Previous refined query 2:
Essential Query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
Extra Requirements: 
Purpose: I need to find test cases related to `FancyArrowPatch` to identify tests that are relevant to the user's bug report concerning annotations with arrows.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: lib/matplotlib/tests/test_patches.py
Line number range: 1 - 933
Content:
1. """
2. Tests specific to the patches module.
3. """
4. import numpy as np
5. from numpy.testing import assert_almost_equal, assert_array_equal
6. import pytest
7. 
8. import matplotlib as mpl
9. from matplotlib.patches import (Annulus, Ellipse, Patch, Polygon, Rectangle,
10.                                 FancyArrowPatch, FancyArrow, BoxStyle, Arc)
11. from matplotlib.testing.decorators import image_comparison, check_figures_equal
12. from matplotlib.transforms import Bbox
13. import matplotlib.pyplot as plt
14. from matplotlib import (
15.     collections as mcollections, colors as mcolors, patches as mpatches,
16.     path as mpath, transforms as mtransforms, rcParams)
17. 
18. import sys
19. on_win = (sys.platform == 'win32')
20. 
21. 
22. def test_Polygon_close():
23.     #: GitHub issue #1018 identified a bug in the Polygon handling
24.     #: of the closed attribute; the path was not getting closed
25.     #: when set_xy was used to set the vertices.
26. 
27.     # open set of vertices:
28.     xy = [[0, 0], [0, 1], [1, 1]]
29.     # closed set:
30.     xyclosed = xy + [[0, 0]]
31. 
32.     # start with open path and close it:
33.     p = Polygon(xy, closed=True)
34.     assert p.get_closed()
35.     assert_array_equal(p.get_xy(), xyclosed)
36.     p.set_xy(xy)
37.     assert_array_equal(p.get_xy(), xyclosed)
38. 
39.     # start with closed path and open it:
40.     p = Polygon(xyclosed, closed=False)
41.     assert_array_equal(p.get_xy(), xy)
42.     p.set_xy(xyclosed)
43.     assert_array_equal(p.get_xy(), xy)
44. 
45.     # start with open path and leave it open:
46.     p = Polygon(xy, closed=False)
47.     assert not p.get_closed()
48.     assert_array_equal(p.get_xy(), xy)
49.     p.set_xy(xy)
50.     assert_array_equal(p.get_xy(), xy)
51. 
52.     # start with closed path and leave it closed:
53.     p = Polygon(xyclosed, closed=True)
54.     assert_array_equal(p.get_xy(), xyclosed)
55.     p.set_xy(xyclosed)
56.     assert_array_equal(p.get_xy(), xyclosed)
57. 
58. 
59. def test_corner_center():
60.     loc = [10, 20]
61.     width = 1
62.     height = 2
63. 
64.     # Rectangle
65.     # No rotation
66.     corners = ((10, 20), (11, 20), (11, 22), (10, 22))
67.     rect = Rectangle(loc, width, height)
68.     assert_array_equal(rect.get_corners(), corners)
69.     assert_array_equal(rect.get_center(), (10.5, 21))
70. 
71.     # 90 deg rotation
72.     corners_rot = ((10, 20), (10, 21), (8, 21), (8, 20))
73.     rect.set_angle(90)
74.     assert_array_equal(rect.get_corners(), corners_rot)
75.     assert_array_equal(rect.get_center(), (9, 20.5))
76. 
77.     # Rotation not a multiple of 90 deg
78.     theta = 33
79.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
80.     corners_rot = t.transform(corners)
81.     rect.set_angle(theta)
82.     assert_almost_equal(rect.get_corners(), corners_rot)
83. 
84.     # Ellipse
85.     loc = [loc[0] + width / 2,
86.            loc[1] + height / 2]
87.     ellipse = Ellipse(loc, width, height)
88. 
89.     # No rotation
90.     assert_array_equal(ellipse.get_corners(), corners)
91. 
92.     # 90 deg rotation
93.     corners_rot = ((11.5, 20.5), (11.5, 21.5), (9.5, 21.5), (9.5, 20.5))
94.     ellipse.set_angle(90)
95.     assert_array_equal(ellipse.get_corners(), corners_rot)
96.     # Rotation shouldn't change ellipse center
97.     assert_array_equal(ellipse.get_center(), loc)
98. 
99.     # Rotation not a multiple of 90 deg
100.     theta = 33
101.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
102.     corners_rot = t.transform(corners)
103.     ellipse.set_angle(theta)
104.     assert_almost_equal(ellipse.get_corners(), corners_rot)
105. 
106. 
107. def test_ellipse_vertices():
108.     # expect 0 for 0 ellipse width, height
109.     ellipse = Ellipse(xy=(0, 0), width=0, height=0, angle=0)
110.     assert_almost_equal(
111.         ellipse.get_vertices(),
112.         [(0.0, 0.0), (0.0, 0.0)],
113.     )
114.     assert_almost_equal(
115.         ellipse.get_co_vertices(),
116.         [(0.0, 0.0), (0.0, 0.0)],
117.     )
118. 
119.     ellipse = Ellipse(xy=(0, 0), width=2, height=1, angle=30)
120.     assert_almost_equal(
121.         ellipse.get_vertices(),
122.         [
123.             (
124.                 ellipse.center[0] + ellipse.width / 4 * np.sqrt(3),
125.                 ellipse.center[1] + ellipse.width / 4,
126.             ),
127.             (
128.                 ellipse.center[0] - ellipse.width / 4 * np.sqrt(3),
129.                 ellipse.center[1] - ellipse.width / 4,
130.             ),
131.         ],
132.     )
133.     assert_almost_equal(
134.         ellipse.get_co_vertices(),
135.         [
136.             (
137.                 ellipse.center[0] - ellipse.height / 4,
138.                 ellipse.center[1] + ellipse.height / 4 * np.sqrt(3),
139.             ),
140.             (
141.                 ellipse.center[0] + ellipse.height / 4,
142.                 ellipse.center[1] - ellipse.height / 4 * np.sqrt(3),
143.             ),
144.         ],
145.     )
146.     v1, v2 = np.array(ellipse.get_vertices())
147.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
148.     v1, v2 = np.array(ellipse.get_co_vertices())
149.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
150. 
151.     ellipse = Ellipse(xy=(2.252, -10.859), width=2.265, height=1.98, angle=68.78)
152.     v1, v2 = np.array(ellipse.get_vertices())
153.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
154.     v1, v2 = np.array(ellipse.get_co_vertices())
155.     np.testing.assert_almost_equal((v1 + v2) / 2, ellipse.center)
156. 
157. 
158. def test_rotate_rect():
159.     loc = np.asarray([1.0, 2.0])
160.     width = 2
161.     height = 3
162.     angle = 30.0
163. 
164.     # A rotated rectangle
165.     rect1 = Rectangle(loc, width, height, angle=angle)
166. 
167.     # A non-rotated rectangle
168.     rect2 = Rectangle(loc, width, height)
169. 
170.     # Set up an explicit rotation matrix (in radians)
171.     angle_rad = np.pi * angle / 180.0
172.     rotation_matrix = np.array([[np.cos(angle_rad), -np.sin(angle_rad)],
173.                                 [np.sin(angle_rad),  np.cos(angle_rad)]])
174. 
175.     # Translate to origin, rotate each vertex, and then translate back
176.     new_verts = np.inner(rotation_matrix, rect2.get_verts() - loc).T + loc
177. 
178.     # They should be the same
179.     assert_almost_equal(rect1.get_verts(), new_verts)
180. 
181. 
182. @check_figures_equal(extensions=['png'])
183. def test_rotate_rect_draw(fig_test, fig_ref):
184.     ax_test = fig_test.add_subplot()
185.     ax_ref = fig_ref.add_subplot()
186. 
187.     loc = (0, 0)
188.     width, height = (1, 1)
189.     angle = 30
190.     rect_ref = Rectangle(loc, width, height, angle=angle)
191.     ax_ref.add_patch(rect_ref)
192.     assert rect_ref.get_angle() == angle
193. 
194.     # Check that when the angle is updated after adding to an Axes, that the
195.     # patch is marked stale and redrawn in the correct location
196.     rect_test = Rectangle(loc, width, height)
197.     assert rect_test.get_angle() == 0
198.     ax_test.add_patch(rect_test)
199.     rect_test.set_angle(angle)
200.     assert rect_test.get_angle() == angle
201. 
202. 
203. @check_figures_equal(extensions=['png'])
204. def test_dash_offset_patch_draw(fig_test, fig_ref):
205.     ax_test = fig_test.add_subplot()
206.     ax_ref = fig_ref.add_subplot()
207. 
208.     loc = (0.1, 0.1)
209.     width, height = (0.8, 0.8)
210.     rect_ref = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
211.                                                 linestyle=(0, [6, 6]))
212.     # fill the line gaps using a linestyle (0, [0, 6, 6, 0]), which is
213.     # equivalent to (6, [6, 6]) but has 0 dash offset
214.     rect_ref2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
215.                                             linestyle=(0, [0, 6, 6, 0]))
216.     assert rect_ref.get_linestyle() == (0, [6, 6])
217.     assert rect_ref2.get_linestyle() == (0, [0, 6, 6, 0])
218. 
219.     ax_ref.add_patch(rect_ref)
220.     ax_ref.add_patch(rect_ref2)
221. 
222.     # Check that the dash offset of the rect is the same if we pass it in the
223.     # init method and if we create two rects with appropriate onoff sequence
224.     # of linestyle.
225. 
226.     rect_test = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
227.                                                     linestyle=(0, [6, 6]))
228.     rect_test2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
229.                                                     linestyle=(6, [6, 6]))
230.     assert rect_test.get_linestyle() == (0, [6, 6])
231.     assert rect_test2.get_linestyle() == (6, [6, 6])
232. 
233.     ax_test.add_patch(rect_test)
234.     ax_test.add_patch(rect_test2)
235. 
236. 
237. def test_negative_rect():
238.     # These two rectangles have the same vertices, but starting from a
239.     # different point.  (We also drop the last vertex, which is a duplicate.)
240.     pos_vertices = Rectangle((-3, -2), 3, 2).get_verts()[:-1]
241.     neg_vertices = Rectangle((0, 0), -3, -2).get_verts()[:-1]
242.     assert_array_equal(np.roll(neg_vertices, 2, 0), pos_vertices)
243. 
244. 
245. @image_comparison(['clip_to_bbox'])
246. def test_clip_to_bbox():
247.     fig, ax = plt.subplots()
248.     ax.set_xlim([-18, 20])
249.     ax.set_ylim([-150, 100])
250. 
251.     path = mpath.Path.unit_regular_star(8).deepcopy()
252.     path.vertices *= [10, 100]
253.     path.vertices -= [5, 25]
254. 
255.     path2 = mpath.Path.unit_circle().deepcopy()
256.     path2.vertices *= [10, 100]
257.     path2.vertices += [10, -25]
258. 
259.     combined = mpath.Path.make_compound_path(path, path2)
260. 
261.     patch = mpatches.PathPatch(
262.         combined, alpha=0.5, facecolor='coral', edgecolor='none')
263.     ax.add_patch(patch)
264. 
265.     bbox = mtransforms.Bbox([[-12, -77.5], [50, -110]])
266.     result_path = combined.clip_to_bbox(bbox)
267.     result_patch = mpatches.PathPatch(
268.         result_path, alpha=0.5, facecolor='green', lw=4, edgecolor='black')
269. 
270.     ax.add_patch(result_patch)
271. 
272. 
273. @image_comparison(['patch_alpha_coloring'], remove_text=True)
274. def test_patch_alpha_coloring():
275.     """
276.     Test checks that the patch and collection are rendered with the specified
277.     alpha values in their facecolor and edgecolor.
278.     """
279.     star = mpath.Path.unit_regular_star(6)
280.     circle = mpath.Path.unit_circle()
281.     # concatenate the star with an internal cutout of the circle
282.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
283.     codes = np.concatenate([circle.codes, star.codes])
284.     cut_star1 = mpath.Path(verts, codes)
285.     cut_star2 = mpath.Path(verts + 1, codes)
286. 
287.     ax = plt.axes()
288.     col = mcollections.PathCollection([cut_star2],
289.                                       linewidth=5, linestyles='dashdot',
290.                                       facecolor=(1, 0, 0, 0.5),
291.                                       edgecolor=(0, 0, 1, 0.75))
292.     ax.add_collection(col)
293. 
294.     patch = mpatches.PathPatch(cut_star1,
295.                                linewidth=5, linestyle='dashdot',
296.                                facecolor=(1, 0, 0, 0.5),
297.                                edgecolor=(0, 0, 1, 0.75))
298.     ax.add_patch(patch)
299. 
300.     ax.set_xlim(-1, 2)
301.     ax.set_ylim(-1, 2)
302. 
303. 
304. @image_comparison(['patch_alpha_override'], remove_text=True)
305. def test_patch_alpha_override():
306.     #: Test checks that specifying an alpha attribute for a patch or
307.     #: collection will override any alpha component of the facecolor
308.     #: or edgecolor.
309.     star = mpath.Path.unit_regular_star(6)
310.     circle = mpath.Path.unit_circle()
311.     # concatenate the star with an internal cutout of the circle
312.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
313.     codes = np.concatenate([circle.codes, star.codes])
314.     cut_star1 = mpath.Path(verts, codes)
315.     cut_star2 = mpath.Path(verts + 1, codes)
316. 
317.     ax = plt.axes()
318.     col = mcollections.PathCollection([cut_star2],
319.                                       linewidth=5, linestyles='dashdot',
320.                                       alpha=0.25,
321.                                       facecolor=(1, 0, 0, 0.5),
322.                                       edgecolor=(0, 0, 1, 0.75))
323.     ax.add_collection(col)
324. 
325.     patch = mpatches.PathPatch(cut_star1,
326.                                linewidth=5, linestyle='dashdot',
327.                                alpha=0.25,
328.                                facecolor=(1, 0, 0, 0.5),
329.                                edgecolor=(0, 0, 1, 0.75))
330.     ax.add_patch(patch)
331. 
332.     ax.set_xlim(-1, 2)
333.     ax.set_ylim(-1, 2)
334. 
335. 
336. @mpl.style.context('default')
337. def test_patch_color_none():
338.     # Make sure the alpha kwarg does not override 'none' facecolor.
339.     # Addresses issue #7478.
340.     c = plt.Circle((0, 0), 1, facecolor='none', alpha=1)
341.     assert c.get_facecolor()[0] == 0
342. 
343. 
344. @image_comparison(['patch_custom_linestyle'], remove_text=True)
345. def test_patch_custom_linestyle():
346.     #: A test to check that patches and collections accept custom dash
347.     #: patterns as linestyle and that they display correctly.
348.     star = mpath.Path.unit_regular_star(6)
349.     circle = mpath.Path.unit_circle()
350.     # concatenate the star with an internal cutout of the circle
351.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
352.     codes = np.concatenate([circle.codes, star.codes])
353.     cut_star1 = mpath.Path(verts, codes)
354.     cut_star2 = mpath.Path(verts + 1, codes)
355. 
356.     ax = plt.axes()
357.     col = mcollections.PathCollection(
358.         [cut_star2],
359.         linewidth=5, linestyles=[(0, (5, 7, 10, 7))],
360.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
361.     ax.add_collection(col)
362. 
363.     patch = mpatches.PathPatch(
364.         cut_star1,
365.         linewidth=5, linestyle=(0, (5, 7, 10, 7)),
366.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
367.     ax.add_patch(patch)
368. 
369.     ax.set_xlim(-1, 2)
370.     ax.set_ylim(-1, 2)
371. 
372. 
373. def test_patch_linestyle_accents():
374.     #: Test if linestyle can also be specified with short mnemonics like "--"
375.     #: c.f. GitHub issue #2136
376.     star = mpath.Path.unit_regular_star(6)
377.     circle = mpath.Path.unit_circle()
378.     # concatenate the star with an internal cutout of the circle
379.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
380.     codes = np.concatenate([circle.codes, star.codes])
381. 
382.     linestyles = ["-", "--", "-.", ":",
383.                   "solid", "dashed", "dashdot", "dotted"]
384. 
385.     fig, ax = plt.subplots()
386.     for i, ls in enumerate(linestyles):
387.         star = mpath.Path(verts + i, codes)
388.         patch = mpatches.PathPatch(star,
389.                                    linewidth=3, linestyle=ls,
390.                                    facecolor=(1, 0, 0),
391.                                    edgecolor=(0, 0, 1))
392.         ax.add_patch(patch)
393. 
394.     ax.set_xlim([-1, i + 1])
395.     ax.set_ylim([-1, i + 1])
396.     fig.canvas.draw()
397. 
398. 
399. @check_figures_equal(extensions=['png'])
400. def test_patch_linestyle_none(fig_test, fig_ref):
401.     circle = mpath.Path.unit_circle()
402. 
403.     ax_test = fig_test.add_subplot()
404.     ax_ref = fig_ref.add_subplot()
405.     for i, ls in enumerate(['none', 'None', ' ', '']):
406.         path = mpath.Path(circle.vertices + i, circle.codes)
407.         patch = mpatches.PathPatch(path,
408.                                    linewidth=3, linestyle=ls,
409.                                    facecolor=(1, 0, 0),
410.                                    edgecolor=(0, 0, 1))
411.         ax_test.add_patch(patch)
412. 
413.         patch = mpatches.PathPatch(path,
414.                                    linewidth=3, linestyle='-',
415.                                    facecolor=(1, 0, 0),
416.                                    edgecolor='none')
417.         ax_ref.add_patch(patch)
418. 
419.     ax_test.set_xlim([-1, i + 1])
420.     ax_test.set_ylim([-1, i + 1])
421.     ax_ref.set_xlim([-1, i + 1])
422.     ax_ref.set_ylim([-1, i + 1])
423. 
424. 
425. def test_wedge_movement():
426.     param_dict = {'center': ((0, 0), (1, 1), 'set_center'),
427.                   'r': (5, 8, 'set_radius'),
428.                   'width': (2, 3, 'set_width'),
429.                   'theta1': (0, 30, 'set_theta1'),
430.                   'theta2': (45, 50, 'set_theta2')}
431. 
432.     init_args = {k: v[0] for k, v in param_dict.items()}
433. 
434.     w = mpatches.Wedge(**init_args)
435.     for attr, (old_v, new_v, func) in param_dict.items():
436.         assert getattr(w, attr) == old_v
437.         getattr(w, func)(new_v)
438.         assert getattr(w, attr) == new_v
439. 
440. 
441. # png needs tol>=0.06, pdf tol>=1.617
442. @image_comparison(['wedge_range'], remove_text=True, tol=1.65 if on_win else 0)
443. def test_wedge_range():
444.     ax = plt.axes()
445. 
446.     t1 = 2.313869244286224
447. 
448.     args = [[52.31386924, 232.31386924],
449.             [52.313869244286224, 232.31386924428622],
450.             [t1, t1 + 180.0],
451.             [0, 360],
452.             [90, 90 + 360],
453.             [-180, 180],
454.             [0, 380],
455.             [45, 46],
456.             [46, 45]]
457. 
458.     for i, (theta1, theta2) in enumerate(args):
459.         x = i % 3
460.         y = i // 3
461. 
462.         wedge = mpatches.Wedge((x * 3, y * 3), 1, theta1, theta2,
463.                                facecolor='none', edgecolor='k', lw=3)
464. 
465.         ax.add_artist(wedge)
466. 
467.     ax.set_xlim(-2, 8)
468.     ax.set_ylim(-2, 9)
469. 
470. 
471. def test_patch_str():
472.     """
473.     Check that patches have nice and working `str` representation.
474. 
475.     Note that the logic is that `__str__` is defined such that:
476.     str(eval(str(p))) == str(p)
477.     """
478.     p = mpatches.Circle(xy=(1, 2), radius=3)
479.     assert str(p) == 'Circle(xy=(1, 2), radius=3)'
480. 
481.     p = mpatches.Ellipse(xy=(1, 2), width=3, height=4, angle=5)
482.     assert str(p) == 'Ellipse(xy=(1, 2), width=3, height=4, angle=5)'
483. 
484.     p = mpatches.Rectangle(xy=(1, 2), width=3, height=4, angle=5)
485.     assert str(p) == 'Rectangle(xy=(1, 2), width=3, height=4, angle=5)'
486. 
487.     p = mpatches.Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)
488.     assert str(p) == 'Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)'
489. 
490.     p = mpatches.Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)
491.     expected = 'Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)'
492.     assert str(p) == expected
493. 
494.     p = mpatches.Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)
495.     expected = "Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)"
496.     assert str(p) == expected
497. 
498.     p = mpatches.RegularPolygon((1, 2), 20, radius=5)
499.     assert str(p) == "RegularPolygon((1, 2), 20, radius=5, orientation=0)"
500. 
501.     p = mpatches.CirclePolygon(xy=(1, 2), radius=5, resolution=20)
502.     assert str(p) == "CirclePolygon((1, 2), radius=5, resolution=20)"
503. 
504.     p = mpatches.FancyBboxPatch((1, 2), width=3, height=4)
505.     assert str(p) == "FancyBboxPatch((1, 2), width=3, height=4)"
506. 
507.     # Further nice __str__ which cannot be `eval`uated:
508.     path = mpath.Path([(1, 2), (2, 2), (1, 2)], closed=True)
509.     p = mpatches.PathPatch(path)
510.     assert str(p) == "PathPatch3((1, 2) ...)"
511. 
512.     p = mpatches.Polygon(np.empty((0, 2)))
513.     assert str(p) == "Polygon0()"
514. 
515.     data = [[1, 2], [2, 2], [1, 2]]
516.     p = mpatches.Polygon(data)
517.     assert str(p) == "Polygon3((1, 2) ...)"
518. 
519.     p = mpatches.FancyArrowPatch(path=path)
520.     assert str(p)[:27] == "FancyArrowPatch(Path(array("
521. 
522.     p = mpatches.FancyArrowPatch((1, 2), (3, 4))
523.     assert str(p) == "FancyArrowPatch((1, 2)->(3, 4))"
524. 
525.     p = mpatches.ConnectionPatch((1, 2), (3, 4), 'data')
526.     assert str(p) == "ConnectionPatch((1, 2), (3, 4))"
527. 
528.     s = mpatches.Shadow(p, 1, 1)
529.     assert str(s) == "Shadow(ConnectionPatch((1, 2), (3, 4)))"
530. 
531.     # Not testing Arrow, FancyArrow here
532.     # because they seem to exist only for historical reasons.
533. 
534. 
535. @image_comparison(['multi_color_hatch'], remove_text=True, style='default')
536. def test_multi_color_hatch():
537.     fig, ax = plt.subplots()
538. 
539.     rects = ax.bar(range(5), range(1, 6))
540.     for i, rect in enumerate(rects):
541.         rect.set_facecolor('none')
542.         rect.set_edgecolor(f'C{i}')
543.         rect.set_hatch('/')
544. 
545.     ax.autoscale_view()
546.     ax.autoscale(False)
547. 
548.     for i in range(5):
549.         with mpl.style.context({'hatch.color': f'C{i}'}):
550.             r = Rectangle((i - .8 / 2, 5), .8, 1, hatch='//', fc='none')
551.         ax.add_patch(r)
552. 
553. 
554. @image_comparison(['units_rectangle.png'])
555. def test_units_rectangle():
556.     import matplotlib.testing.jpl_units as U
557.     U.register()
558. 
559.     p = mpatches.Rectangle((5*U.km, 6*U.km), 1*U.km, 2*U.km)
560. 
561.     fig, ax = plt.subplots()
562.     ax.add_patch(p)
563.     ax.set_xlim([4*U.km, 7*U.km])
564.     ax.set_ylim([5*U.km, 9*U.km])
565. 
566. 
567. @image_comparison(['connection_patch.png'], style='mpl20', remove_text=True)
568. def test_connection_patch():
569.     fig, (ax1, ax2) = plt.subplots(1, 2)
570. 
571.     con = mpatches.ConnectionPatch(xyA=(0.1, 0.1), xyB=(0.9, 0.9),
572.                                    coordsA='data', coordsB='data',
573.                                    axesA=ax2, axesB=ax1,
574.                                    arrowstyle="->")
575.     ax2.add_artist(con)
576. 
577.     xyA = (0.6, 1.0)  # in axes coordinates
578.     xyB = (0.0, 0.2)  # x in axes coordinates, y in data coordinates
579.     coordsA = "axes fraction"
580.     coordsB = ax2.get_yaxis_transform()
581.     con = mpatches.ConnectionPatch(xyA=xyA, xyB=xyB, coordsA=coordsA,
582.                                    coordsB=coordsB, arrowstyle="-")
583.     ax2.add_artist(con)
584. 
585. 
586. @check_figures_equal(extensions=["png"])
587. def test_connection_patch_fig(fig_test, fig_ref):
588.     # Test that connection patch can be added as figure artist, and that figure
589.     # pixels count negative values from the top right corner (this API may be
590.     # changed in the future).
591.     ax1, ax2 = fig_test.subplots(1, 2)
592.     con = mpatches.ConnectionPatch(
593.         xyA=(.3, .2), coordsA="data", axesA=ax1,
594.         xyB=(-30, -20), coordsB="figure pixels",
595.         arrowstyle="->", shrinkB=5)
596.     fig_test.add_artist(con)
597. 
598.     ax1, ax2 = fig_ref.subplots(1, 2)
599.     bb = fig_ref.bbox
600.     # Necessary so that pixel counts match on both sides.
601.     plt.rcParams["savefig.dpi"] = plt.rcParams["figure.dpi"]
602.     con = mpatches.ConnectionPatch(
603.         xyA=(.3, .2), coordsA="data", axesA=ax1,
604.         xyB=(bb.width - 30, bb.height - 20), coordsB="figure pixels",
605.         arrowstyle="->", shrinkB=5)
606.     fig_ref.add_artist(con)
607. 
608. 
609. def test_datetime_rectangle():
610.     # Check that creating a rectangle with timedeltas doesn't fail
611.     from datetime import datetime, timedelta
612. 
613.     start = datetime(2017, 1, 1, 0, 0, 0)
614.     delta = timedelta(seconds=16)
615.     patch = mpatches.Rectangle((start, 0), delta, 1)
616. 
617.     fig, ax = plt.subplots()
618.     ax.add_patch(patch)
619. 
620. 
621. def test_datetime_datetime_fails():
622.     from datetime import datetime
623. 
624.     start = datetime(2017, 1, 1, 0, 0, 0)
625.     dt_delta = datetime(1970, 1, 5)  # Will be 5 days if units are done wrong.
626. 
627.     with pytest.raises(TypeError):
628.         mpatches.Rectangle((start, 0), dt_delta, 1)
629. 
630.     with pytest.raises(TypeError):
631.         mpatches.Rectangle((0, start), 1, dt_delta)
632. 
633. 
634. def test_contains_point():
635.     ell = mpatches.Ellipse((0.5, 0.5), 0.5, 1.0)
636.     points = [(0.0, 0.5), (0.2, 0.5), (0.25, 0.5), (0.5, 0.5)]
637.     path = ell.get_path()
638.     transform = ell.get_transform()
639.     radius = ell._process_radius(None)
640.     expected = np.array([path.contains_point(point,
641.                                              transform,
642.                                              radius) for point in points])
643.     result = np.array([ell.contains_point(point) for point in points])
644.     assert np.all(result == expected)
645. 
646. 
647. def test_contains_points():
648.     ell = mpatches.Ellipse((0.5, 0.5), 0.5, 1.0)
649.     points = [(0.0, 0.5), (0.2, 0.5), (0.25, 0.5), (0.5, 0.5)]
650.     path = ell.get_path()
651.     transform = ell.get_transform()
652.     radius = ell._process_radius(None)
653.     expected = path.contains_points(points, transform, radius)
654.     result = ell.contains_points(points)
655.     assert np.all(result == expected)
656. 
657. 
658. # Currently fails with pdf/svg, probably because some parts assume a dpi of 72.
659. @check_figures_equal(extensions=["png"])
660. def test_shadow(fig_test, fig_ref):
661.     xy = np.array([.2, .3])
662.     dxy = np.array([.1, .2])
663.     # We need to work around the nonsensical (dpi-dependent) interpretation of
664.     # offsets by the Shadow class...
665.     plt.rcParams["savefig.dpi"] = "figure"
666.     # Test image.
667.     a1 = fig_test.subplots()
668.     rect = mpatches.Rectangle(xy=xy, width=.5, height=.5)
669.     shadow = mpatches.Shadow(rect, ox=dxy[0], oy=dxy[1])
670.     a1.add_patch(rect)
671.     a1.add_patch(shadow)
672.     # Reference image.
673.     a2 = fig_ref.subplots()
674.     rect = mpatches.Rectangle(xy=xy, width=.5, height=.5)
675.     shadow = mpatches.Rectangle(
676.         xy=xy + fig_ref.dpi / 72 * dxy, width=.5, height=.5,
677.         fc=np.asarray(mcolors.to_rgb(rect.get_facecolor())) * .3,
678.         ec=np.asarray(mcolors.to_rgb(rect.get_facecolor())) * .3,
679.         alpha=.5)
680.     a2.add_patch(shadow)
681.     a2.add_patch(rect)
682. 
683. 
684. def test_fancyarrow_units():
685.     from datetime import datetime
686.     # Smoke test to check that FancyArrowPatch works with units
687.     dtime = datetime(2000, 1, 1)
688.     fig, ax = plt.subplots()
689.     arrow = FancyArrowPatch((0, dtime), (0.01, dtime))
690. 
691. 
692. def test_fancyarrow_setdata():
693.     fig, ax = plt.subplots()
694.     arrow = ax.arrow(0, 0, 10, 10, head_length=5, head_width=1, width=.5)
695.     expected1 = np.array(
696.       [[13.54, 13.54],
697.        [10.35,  9.65],
698.        [10.18,  9.82],
699.        [0.18, -0.18],
700.        [-0.18,  0.18],
701.        [9.82, 10.18],
702.        [9.65, 10.35],
703.        [13.54, 13.54]]
704.     )
705.     assert np.allclose(expected1, np.round(arrow.verts, 2))
706. 
707.     expected2 = np.array(
708.       [[16.71, 16.71],
709.        [16.71, 15.29],
710.        [16.71, 15.29],
711.        [1.71,  0.29],
712.        [0.29,  1.71],
713.        [15.29, 16.71],
714.        [15.29, 16.71],
715.        [16.71, 16.71]]
716.     )
717.     arrow.set_data(
718.         x=1, y=1, dx=15, dy=15, width=2, head_width=2, head_length=1
719.     )
720.     assert np.allclose(expected2, np.round(arrow.verts, 2))
721. 
722. 
723. @image_comparison(["large_arc.svg"], style="mpl20")
724. def test_large_arc():
725.     fig, (ax1, ax2) = plt.subplots(1, 2)
726.     x = 210
727.     y = -2115
728.     diameter = 4261
729.     for ax in [ax1, ax2]:
730.         a = Arc((x, y), diameter, diameter, lw=2, color='k')
731.         ax.add_patch(a)
732.         ax.set_axis_off()
733.         ax.set_aspect('equal')
734.     # force the high accuracy case
735.     ax1.set_xlim(7, 8)
736.     ax1.set_ylim(5, 6)
737. 
738.     # force the low accuracy case
739.     ax2.set_xlim(-25000, 18000)
740.     ax2.set_ylim(-20000, 6600)
741. 
742. 
743. @image_comparison(["all_quadrants_arcs.svg"], style="mpl20")
744. def test_rotated_arcs():
745.     fig, ax_arr = plt.subplots(2, 2, squeeze=False, figsize=(10, 10))
746. 
747.     scale = 10_000_000
748.     diag_centers = ((-1, -1), (-1, 1), (1, 1), (1, -1))
749.     on_axis_centers = ((0, 1), (1, 0), (0, -1), (-1, 0))
750.     skews = ((2, 2), (2, 1/10), (2,  1/100), (2, 1/1000))
751. 
752.     for ax, (sx, sy) in zip(ax_arr.ravel(), skews):
753.         k = 0
754.         for prescale, centers in zip((1 - .0001, (1 - .0001) / np.sqrt(2)),
755.                                       (on_axis_centers, diag_centers)):
756.             for j, (x_sign, y_sign) in enumerate(centers, start=k):
757.                 a = Arc(
758.                     (x_sign * scale * prescale,
759.                      y_sign * scale * prescale),
760.                     scale * sx,
761.                     scale * sy,
762.                     lw=4,
763.                     color=f"C{j}",
764.                     zorder=1 + j,
765.                     angle=np.rad2deg(np.arctan2(y_sign, x_sign)) % 360,
766.                     label=f'big {j}',
767.                     gid=f'big {j}'
768.                 )
769.                 ax.add_patch(a)
770. 
771.             k = j+1
772.         ax.set_xlim(-scale / 4000, scale / 4000)
773.         ax.set_ylim(-scale / 4000, scale / 4000)
774.         ax.axhline(0, color="k")
775.         ax.axvline(0, color="k")
776.         ax.set_axis_off()
777.         ax.set_aspect("equal")
778. 
779. 
780. def test_fancyarrow_shape_error():
781.     with pytest.raises(ValueError, match="Got unknown shape: 'foo'"):
782.         FancyArrow(0, 0, 0.2, 0.2, shape='foo')
783. 
784. 
785. @pytest.mark.parametrize('fmt, match', (
786.     ("foo", "Unknown style: 'foo'"),
787.     ("Round,foo", "Incorrect style argument: 'Round,foo'"),
788. ))
789. def test_boxstyle_errors(fmt, match):
790.     with pytest.raises(ValueError, match=match):
791.         BoxStyle(fmt)
792. 
793. 
794. @image_comparison(baseline_images=['annulus'], extensions=['png'])
795. def test_annulus():
796. 
797.     fig, ax = plt.subplots()
798.     cir = Annulus((0.5, 0.5), 0.2, 0.05, fc='g')        # circular annulus
799.     ell = Annulus((0.5, 0.5), (0.5, 0.3), 0.1, 45,      # elliptical
800.                   fc='m', ec='b', alpha=0.5, hatch='xxx')
801.     ax.add_patch(cir)
802.     ax.add_patch(ell)
803.     ax.set_aspect('equal')
804. 
805. 
806. @image_comparison(baseline_images=['annulus'], extensions=['png'])
807. def test_annulus_setters():
808. 
809.     fig, ax = plt.subplots()
810.     cir = Annulus((0., 0.), 0.2, 0.01, fc='g')   # circular annulus
811.     ell = Annulus((0., 0.), (1, 2), 0.1, 0,      # elliptical
812.                   fc='m', ec='b', alpha=0.5, hatch='xxx')
813.     ax.add_patch(cir)
814.     ax.add_patch(ell)
815.     ax.set_aspect('equal')
816. 
817.     cir.center = (0.5, 0.5)
818.     cir.radii = 0.2
819.     cir.width = 0.05
820. 
821.     ell.center = (0.5, 0.5)
822.     ell.radii = (0.5, 0.3)
823.     ell.width = 0.1
824.     ell.angle = 45
825. 
826. 
827. @image_comparison(baseline_images=['annulus'], extensions=['png'])
828. def test_annulus_setters2():
829. 
830.     fig, ax = plt.subplots()
831.     cir = Annulus((0., 0.), 0.2, 0.01, fc='g')   # circular annulus
832.     ell = Annulus((0., 0.), (1, 2), 0.1, 0,      # elliptical
833.                   fc='m', ec='b', alpha=0.5, hatch='xxx')
834.     ax.add_patch(cir)
835.     ax.add_patch(ell)
836.     ax.set_aspect('equal')
837. 
838.     cir.center = (0.5, 0.5)
839.     cir.set_semimajor(0.2)
840.     cir.set_semiminor(0.2)
841.     assert cir.radii == (0.2, 0.2)
842.     cir.width = 0.05
843. 
844.     ell.center = (0.5, 0.5)
845.     ell.set_semimajor(0.5)
846.     ell.set_semiminor(0.3)
847.     assert ell.radii == (0.5, 0.3)
848.     ell.width = 0.1
849.     ell.angle = 45
850. 
851. 
852. def test_degenerate_polygon():
853.     point = [0, 0]
854.     correct_extents = Bbox([point, point]).extents
855.     assert np.all(Polygon([point]).get_extents().extents == correct_extents)
856. 
857. 
858. @pytest.mark.parametrize('kwarg', ('edgecolor', 'facecolor'))
859. def test_color_override_warning(kwarg):
860.     with pytest.warns(UserWarning,
861.                       match="Setting the 'color' property will override "
862.                             "the edgecolor or facecolor properties."):
863.         Patch(color='black', **{kwarg: 'black'})
864. 
865. 
866. def test_empty_verts():
867.     poly = Polygon(np.zeros((0, 2)))
868.     assert poly.get_verts() == []
869. 
870. 
871. def test_default_antialiased():
872.     patch = Patch()
873. 
874.     patch.set_antialiased(not rcParams['patch.antialiased'])
875.     assert patch.get_antialiased() == (not rcParams['patch.antialiased'])
876.     # Check that None resets the state
877.     patch.set_antialiased(None)
878.     assert patch.get_antialiased() == rcParams['patch.antialiased']
879. 
880. 
881. def test_default_linestyle():
882.     patch = Patch()
883.     patch.set_linestyle('--')
884.     patch.set_linestyle(None)
885.     assert patch.get_linestyle() == 'solid'
886. 
887. 
888. def test_default_capstyle():
889.     patch = Patch()
890.     assert patch.get_capstyle() == 'butt'
891. 
892. 
893. def test_default_joinstyle():
894.     patch = Patch()
895.     assert patch.get_joinstyle() == 'miter'
896. 
897. 
898. @image_comparison(["autoscale_arc"], extensions=['png', 'svg'],
899.                   style="mpl20", remove_text=True)
900. def test_autoscale_arc():
901.     fig, axs = plt.subplots(1, 3, figsize=(4, 1))
902.     arc_lists = (
903.         [Arc((0, 0), 1, 1, theta1=0, theta2=90)],
904.         [Arc((0.5, 0.5), 1.5, 0.5, theta1=10, theta2=20)],
905.         [Arc((0.5, 0.5), 1.5, 0.5, theta1=10, theta2=20),
906.          Arc((0.5, 0.5), 2.5, 0.5, theta1=110, theta2=120),
907.          Arc((0.5, 0.5), 3.5, 0.5, theta1=210, theta2=220),
908.          Arc((0.5, 0.5), 4.5, 0.5, theta1=310, theta2=320)])
909. 
910.     for ax, arcs in zip(axs, arc_lists):
911.         for arc in arcs:
912.             ax.add_patch(arc)
913.         ax.autoscale()
914. 
915. 
916. @check_figures_equal(extensions=["png", 'svg', 'pdf', 'eps'])
917. def test_arc_in_collection(fig_test, fig_ref):
918.     arc1 = Arc([.5, .5], .5, 1, theta1=0, theta2=60, angle=20)
919.     arc2 = Arc([.5, .5], .5, 1, theta1=0, theta2=60, angle=20)
920.     col = mcollections.PatchCollection(patches=[arc2], facecolors='none',
921.                                        edgecolors='k')
922.     fig_ref.subplots().add_patch(arc1)
923.     fig_test.subplots().add_collection(col)
924. 
925. 
926. @check_figures_equal(extensions=["png", 'svg', 'pdf', 'eps'])
927. def test_modifying_arc(fig_test, fig_ref):
928.     arc1 = Arc([.5, .5], .5, 1, theta1=0, theta2=60, angle=20)
929.     arc2 = Arc([.5, .5], 1.5, 1, theta1=0, theta2=60, angle=10)
930.     fig_ref.subplots().add_patch(arc1)
931.     fig_test.subplots().add_patch(arc2)
932.     arc2.set_width(.5)
933.     arc2.set_angle(20)


File: lib/matplotlib/tests/test_text.py
Line number range: 1 - 500
Content:
1. from datetime import datetime
2. import io
3. import warnings
4. 
5. import numpy as np
6. from numpy.testing import assert_almost_equal
7. from packaging.version import parse as parse_version
8. import pyparsing
9. import pytest
10. 
11. import matplotlib as mpl
12. from matplotlib.backend_bases import MouseEvent
13. from matplotlib.font_manager import FontProperties
14. import matplotlib.patches as mpatches
15. import matplotlib.pyplot as plt
16. import matplotlib.transforms as mtransforms
17. from matplotlib.testing.decorators import check_figures_equal, image_comparison
18. from matplotlib.testing._markers import needs_usetex
19. from matplotlib.text import Text, Annotation
20. 
21. pyparsing_version = parse_version(pyparsing.__version__)
22. 
23. 
24. @image_comparison(['font_styles'])
25. def test_font_styles():
26. 
27.     def find_matplotlib_font(**kw):
28.         prop = FontProperties(**kw)
29.         path = findfont(prop, directory=mpl.get_data_path())
30.         return FontProperties(fname=path)
31. 
32.     from matplotlib.font_manager import FontProperties, findfont
33.     warnings.filterwarnings(
34.         'ignore',
35.         r"findfont: Font family \[u?'Foo'\] not found. Falling back to .",
36.         UserWarning,
37.         module='matplotlib.font_manager')
38. 
39.     fig, ax = plt.subplots()
40. 
41.     normal_font = find_matplotlib_font(
42.         family="sans-serif",
43.         style="normal",
44.         variant="normal",
45.         size=14)
46.     a = ax.annotate(
47.         "Normal Font",
48.         (0.1, 0.1),
49.         xycoords='axes fraction',
50.         fontproperties=normal_font)
51.     assert a.get_fontname() == 'DejaVu Sans'
52.     assert a.get_fontstyle() == 'normal'
53.     assert a.get_fontvariant() == 'normal'
54.     assert a.get_weight() == 'normal'
55.     assert a.get_stretch() == 'normal'
56. 
57.     bold_font = find_matplotlib_font(
58.         family="Foo",
59.         style="normal",
60.         variant="normal",
61.         weight="bold",
62.         stretch=500,
63.         size=14)
64.     ax.annotate(
65.         "Bold Font",
66.         (0.1, 0.2),
67.         xycoords='axes fraction',
68.         fontproperties=bold_font)
69. 
70.     bold_italic_font = find_matplotlib_font(
71.         family="sans serif",
72.         style="italic",
73.         variant="normal",
74.         weight=750,
75.         stretch=500,
76.         size=14)
77.     ax.annotate(
78.         "Bold Italic Font",
79.         (0.1, 0.3),
80.         xycoords='axes fraction',
81.         fontproperties=bold_italic_font)
82. 
83.     light_font = find_matplotlib_font(
84.         family="sans-serif",
85.         style="normal",
86.         variant="normal",
87.         weight=200,
88.         stretch=500,
89.         size=14)
90.     ax.annotate(
91.         "Light Font",
92.         (0.1, 0.4),
93.         xycoords='axes fraction',
94.         fontproperties=light_font)
95. 
96.     condensed_font = find_matplotlib_font(
97.         family="sans-serif",
98.         style="normal",
99.         variant="normal",
100.         weight=500,
101.         stretch=100,
102.         size=14)
103.     ax.annotate(
104.         "Condensed Font",
105.         (0.1, 0.5),
106.         xycoords='axes fraction',
107.         fontproperties=condensed_font)
108. 
109.     ax.set_xticks([])
110.     ax.set_yticks([])
111. 
112. 
113. @image_comparison(['multiline'])
114. def test_multiline():
115.     plt.figure()
116.     ax = plt.subplot(1, 1, 1)
117.     ax.set_title("multiline\ntext alignment")
118. 
119.     plt.text(
120.         0.2, 0.5, "TpTpTp\n$M$\nTpTpTp", size=20, ha="center", va="top")
121. 
122.     plt.text(
123.         0.5, 0.5, "TpTpTp\n$M^{M^{M^{M}}}$\nTpTpTp", size=20,
124.         ha="center", va="top")
125. 
126.     plt.text(
127.         0.8, 0.5, "TpTpTp\n$M_{q_{q_{q}}}$\nTpTpTp", size=20,
128.         ha="center", va="top")
129. 
130.     plt.xlim(0, 1)
131.     plt.ylim(0, 0.8)
132. 
133.     ax.set_xticks([])
134.     ax.set_yticks([])
135. 
136. 
137. @image_comparison(['multiline2'], style='mpl20')
138. def test_multiline2():
139.     # Remove this line when this test image is regenerated.
140.     plt.rcParams['text.kerning_factor'] = 6
141. 
142.     fig, ax = plt.subplots()
143. 
144.     ax.set_xlim([0, 1.4])
145.     ax.set_ylim([0, 2])
146.     ax.axhline(0.5, color='C2', linewidth=0.3)
147.     sts = ['Line', '2 Lineg\n 2 Lg', '$\\sum_i x $', 'hi $\\sum_i x $\ntest',
148.            'test\n $\\sum_i x $', '$\\sum_i x $\n $\\sum_i x $']
149.     renderer = fig.canvas.get_renderer()
150. 
151.     def draw_box(ax, tt):
152.         r = mpatches.Rectangle((0, 0), 1, 1, clip_on=False,
153.                                transform=ax.transAxes)
154.         r.set_bounds(
155.             tt.get_window_extent(renderer)
156.             .transformed(ax.transAxes.inverted())
157.             .bounds)
158.         ax.add_patch(r)
159. 
160.     horal = 'left'
161.     for nn, st in enumerate(sts):
162.         tt = ax.text(0.2 * nn + 0.1, 0.5, st, horizontalalignment=horal,
163.                      verticalalignment='bottom')
164.         draw_box(ax, tt)
165.     ax.text(1.2, 0.5, 'Bottom align', color='C2')
166. 
167.     ax.axhline(1.3, color='C2', linewidth=0.3)
168.     for nn, st in enumerate(sts):
169.         tt = ax.text(0.2 * nn + 0.1, 1.3, st, horizontalalignment=horal,
170.                      verticalalignment='top')
171.         draw_box(ax, tt)
172.     ax.text(1.2, 1.3, 'Top align', color='C2')
173. 
174.     ax.axhline(1.8, color='C2', linewidth=0.3)
175.     for nn, st in enumerate(sts):
176.         tt = ax.text(0.2 * nn + 0.1, 1.8, st, horizontalalignment=horal,
177.                      verticalalignment='baseline')
178.         draw_box(ax, tt)
179.     ax.text(1.2, 1.8, 'Baseline align', color='C2')
180. 
181.     ax.axhline(0.1, color='C2', linewidth=0.3)
182.     for nn, st in enumerate(sts):
183.         tt = ax.text(0.2 * nn + 0.1, 0.1, st, horizontalalignment=horal,
184.                      verticalalignment='bottom', rotation=20)
185.         draw_box(ax, tt)
186.     ax.text(1.2, 0.1, 'Bot align, rot20', color='C2')
187. 
188. 
189. @image_comparison(['antialiased.png'])
190. def test_antialiasing():
191.     mpl.rcParams['text.antialiased'] = True
192. 
193.     fig = plt.figure(figsize=(5.25, 0.75))
194.     fig.text(0.5, 0.75, "antialiased", horizontalalignment='center',
195.              verticalalignment='center')
196.     fig.text(0.5, 0.25, r"$\sqrt{x}$", horizontalalignment='center',
197.              verticalalignment='center')
198.     # NOTE: We don't need to restore the rcParams here, because the
199.     # test cleanup will do it for us.  In fact, if we do it here, it
200.     # will turn antialiasing back off before the images are actually
201.     # rendered.
202. 
203. 
204. def test_afm_kerning():
205.     fn = mpl.font_manager.findfont("Helvetica", fontext="afm")
206.     with open(fn, 'rb') as fh:
207.         afm = mpl._afm.AFM(fh)
208.     assert afm.string_width_height('VAVAVAVAVAVA') == (7174.0, 718)
209. 
210. 
211. @image_comparison(['text_contains.png'])
212. def test_contains():
213.     fig = plt.figure()
214.     ax = plt.axes()
215. 
216.     mevent = MouseEvent('button_press_event', fig.canvas, 0.5, 0.5, 1, None)
217. 
218.     xs = np.linspace(0.25, 0.75, 30)
219.     ys = np.linspace(0.25, 0.75, 30)
220.     xs, ys = np.meshgrid(xs, ys)
221. 
222.     txt = plt.text(
223.         0.5, 0.4, 'hello world', ha='center', fontsize=30, rotation=30)
224.     # uncomment to draw the text's bounding box
225.     # txt.set_bbox(dict(edgecolor='black', facecolor='none'))
226. 
227.     # draw the text. This is important, as the contains method can only work
228.     # when a renderer exists.
229.     fig.canvas.draw()
230. 
231.     for x, y in zip(xs.flat, ys.flat):
232.         mevent.x, mevent.y = plt.gca().transAxes.transform([x, y])
233.         contains, _ = txt.contains(mevent)
234.         color = 'yellow' if contains else 'red'
235. 
236.         # capture the viewLim, plot a point, and reset the viewLim
237.         vl = ax.viewLim.frozen()
238.         ax.plot(x, y, 'o', color=color)
239.         ax.viewLim.set(vl)
240. 
241. 
242. def test_annotation_contains():
243.     # Check that Annotation.contains looks at the bboxes of the text and the
244.     # arrow separately, not at the joint bbox.
245.     fig, ax = plt.subplots()
246.     ann = ax.annotate(
247.         "hello", xy=(.4, .4), xytext=(.6, .6), arrowprops={"arrowstyle": "->"})
248.     fig.canvas.draw()  # Needed for the same reason as in test_contains.
249.     event = MouseEvent(
250.         "button_press_event", fig.canvas, *ax.transData.transform((.5, .6)))
251.     assert ann.contains(event) == (False, {})
252. 
253. 
254. @pytest.mark.parametrize('err, xycoords, match', (
255.     (TypeError, print, "xycoords callable must return a BboxBase or Transform, not a"),
256.     (TypeError, [0, 0], r"'xycoords' must be an instance of str, tuple"),
257.     (ValueError, "foo", "'foo' is not a valid coordinate"),
258.     (ValueError, "foo bar", "'foo bar' is not a valid coordinate"),
259.     (ValueError, "offset foo", "xycoords cannot be an offset coordinate"),
260.     (ValueError, "axes foo", "'foo' is not a recognized unit"),
261. ))
262. def test_annotate_errors(err, xycoords, match):
263.     fig, ax = plt.subplots()
264.     with pytest.raises(err, match=match):
265.         ax.annotate('xy', (0, 0), xytext=(0.5, 0.5), xycoords=xycoords)
266.         fig.canvas.draw()
267. 
268. 
269. @image_comparison(['titles'])
270. def test_titles():
271.     # left and right side titles
272.     plt.figure()
273.     ax = plt.subplot(1, 1, 1)
274.     ax.set_title("left title", loc="left")
275.     ax.set_title("right title", loc="right")
276.     ax.set_xticks([])
277.     ax.set_yticks([])
278. 
279. 
280. @image_comparison(['text_alignment'], style='mpl20')
281. def test_alignment():
282.     plt.figure()
283.     ax = plt.subplot(1, 1, 1)
284. 
285.     x = 0.1
286.     for rotation in (0, 30):
287.         for alignment in ('top', 'bottom', 'baseline', 'center'):
288.             ax.text(
289.                 x, 0.5, alignment + " Tj", va=alignment, rotation=rotation,
290.                 bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.5))
291.             ax.text(
292.                 x, 1.0, r'$\sum_{i=0}^{j}$', va=alignment, rotation=rotation)
293.             x += 0.1
294. 
295.     ax.plot([0, 1], [0.5, 0.5])
296.     ax.plot([0, 1], [1.0, 1.0])
297. 
298.     ax.set_xlim(0, 1)
299.     ax.set_ylim(0, 1.5)
300.     ax.set_xticks([])
301.     ax.set_yticks([])
302. 
303. 
304. @image_comparison(['axes_titles.png'])
305. def test_axes_titles():
306.     # Related to issue #3327
307.     plt.figure()
308.     ax = plt.subplot(1, 1, 1)
309.     ax.set_title('center', loc='center', fontsize=20, fontweight=700)
310.     ax.set_title('left', loc='left', fontsize=12, fontweight=400)
311.     ax.set_title('right', loc='right', fontsize=12, fontweight=400)
312. 
313. 
314. def test_set_position():
315.     fig, ax = plt.subplots()
316. 
317.     # test set_position
318.     ann = ax.annotate(
319.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
320.     fig.canvas.draw()
321. 
322.     init_pos = ann.get_window_extent(fig.canvas.renderer)
323.     shift_val = 15
324.     ann.set_position((shift_val, shift_val))
325.     fig.canvas.draw()
326.     post_pos = ann.get_window_extent(fig.canvas.renderer)
327. 
328.     for a, b in zip(init_pos.min, post_pos.min):
329.         assert a + shift_val == b
330. 
331.     # test xyann
332.     ann = ax.annotate(
333.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
334.     fig.canvas.draw()
335. 
336.     init_pos = ann.get_window_extent(fig.canvas.renderer)
337.     shift_val = 15
338.     ann.xyann = (shift_val, shift_val)
339.     fig.canvas.draw()
340.     post_pos = ann.get_window_extent(fig.canvas.renderer)
341. 
342.     for a, b in zip(init_pos.min, post_pos.min):
343.         assert a + shift_val == b
344. 
345. 
346. def test_char_index_at():
347.     fig = plt.figure()
348.     text = fig.text(0.1, 0.9, "")
349. 
350.     text.set_text("i")
351.     bbox = text.get_window_extent()
352.     size_i = bbox.x1 - bbox.x0
353. 
354.     text.set_text("m")
355.     bbox = text.get_window_extent()
356.     size_m = bbox.x1 - bbox.x0
357. 
358.     text.set_text("iiiimmmm")
359.     bbox = text.get_window_extent()
360.     origin = bbox.x0
361. 
362.     assert text._char_index_at(origin - size_i) == 0  # left of first char
363.     assert text._char_index_at(origin) == 0
364.     assert text._char_index_at(origin + 0.499*size_i) == 0
365.     assert text._char_index_at(origin + 0.501*size_i) == 1
366.     assert text._char_index_at(origin + size_i*3) == 3
367.     assert text._char_index_at(origin + size_i*4 + size_m*3) == 7
368.     assert text._char_index_at(origin + size_i*4 + size_m*4) == 8
369.     assert text._char_index_at(origin + size_i*4 + size_m*10) == 8
370. 
371. 
372. @pytest.mark.parametrize('text', ['', 'O'], ids=['empty', 'non-empty'])
373. def test_non_default_dpi(text):
374.     fig, ax = plt.subplots()
375. 
376.     t1 = ax.text(0.5, 0.5, text, ha='left', va='bottom')
377.     fig.canvas.draw()
378.     dpi = fig.dpi
379. 
380.     bbox1 = t1.get_window_extent()
381.     bbox2 = t1.get_window_extent(dpi=dpi * 10)
382.     np.testing.assert_allclose(bbox2.get_points(), bbox1.get_points() * 10,
383.                                rtol=5e-2)
384.     # Text.get_window_extent should not permanently change dpi.
385.     assert fig.dpi == dpi
386. 
387. 
388. def test_get_rotation_string():
389.     assert Text(rotation='horizontal').get_rotation() == 0.
390.     assert Text(rotation='vertical').get_rotation() == 90.
391. 
392. 
393. def test_get_rotation_float():
394.     for i in [15., 16.70, 77.4]:
395.         assert Text(rotation=i).get_rotation() == i
396. 
397. 
398. def test_get_rotation_int():
399.     for i in [67, 16, 41]:
400.         assert Text(rotation=i).get_rotation() == float(i)
401. 
402. 
403. def test_get_rotation_raises():
404.     with pytest.raises(ValueError):
405.         Text(rotation='hozirontal')
406. 
407. 
408. def test_get_rotation_none():
409.     assert Text(rotation=None).get_rotation() == 0.0
410. 
411. 
412. def test_get_rotation_mod360():
413.     for i, j in zip([360., 377., 720+177.2], [0., 17., 177.2]):
414.         assert_almost_equal(Text(rotation=i).get_rotation(), j)
415. 
416. 
417. @pytest.mark.parametrize("ha", ["center", "right", "left"])
418. @pytest.mark.parametrize("va", ["center", "top", "bottom",
419.                                 "baseline", "center_baseline"])
420. def test_null_rotation_with_rotation_mode(ha, va):
421.     fig, ax = plt.subplots()
422.     kw = dict(rotation=0, va=va, ha=ha)
423.     t0 = ax.text(.5, .5, 'test', rotation_mode='anchor', **kw)
424.     t1 = ax.text(.5, .5, 'test', rotation_mode='default', **kw)
425.     fig.canvas.draw()
426.     assert_almost_equal(t0.get_window_extent(fig.canvas.renderer).get_points(),
427.                         t1.get_window_extent(fig.canvas.renderer).get_points())
428. 
429. 
430. @image_comparison(['text_bboxclip'])
431. def test_bbox_clipping():
432.     plt.text(0.9, 0.2, 'Is bbox clipped?', backgroundcolor='r', clip_on=True)
433.     t = plt.text(0.9, 0.5, 'Is fancy bbox clipped?', clip_on=True)
434.     t.set_bbox({"boxstyle": "round, pad=0.1"})
435. 
436. 
437. @image_comparison(['annotation_negative_ax_coords.png'])
438. def test_annotation_negative_ax_coords():
439.     fig, ax = plt.subplots()
440. 
441.     ax.annotate('+ pts',
442.                 xytext=[30, 20], textcoords='axes points',
443.                 xy=[30, 20], xycoords='axes points', fontsize=32)
444.     ax.annotate('- pts',
445.                 xytext=[30, -20], textcoords='axes points',
446.                 xy=[30, -20], xycoords='axes points', fontsize=32,
447.                 va='top')
448.     ax.annotate('+ frac',
449.                 xytext=[0.75, 0.05], textcoords='axes fraction',
450.                 xy=[0.75, 0.05], xycoords='axes fraction', fontsize=32)
451.     ax.annotate('- frac',
452.                 xytext=[0.75, -0.05], textcoords='axes fraction',
453.                 xy=[0.75, -0.05], xycoords='axes fraction', fontsize=32,
454.                 va='top')
455. 
456.     ax.annotate('+ pixels',
457.                 xytext=[160, 25], textcoords='axes pixels',
458.                 xy=[160, 25], xycoords='axes pixels', fontsize=32)
459.     ax.annotate('- pixels',
460.                 xytext=[160, -25], textcoords='axes pixels',
461.                 xy=[160, -25], xycoords='axes pixels', fontsize=32,
462.                 va='top')
463. 
464. 
465. @image_comparison(['annotation_negative_fig_coords.png'])
466. def test_annotation_negative_fig_coords():
467.     fig, ax = plt.subplots()
468. 
469.     ax.annotate('+ pts',
470.                 xytext=[10, 120], textcoords='figure points',
471.                 xy=[10, 120], xycoords='figure points', fontsize=32)
472.     ax.annotate('- pts',
473.                 xytext=[-10, 180], textcoords='figure points',
474.                 xy=[-10, 180], xycoords='figure points', fontsize=32,
475.                 va='top')
476.     ax.annotate('+ frac',
477.                 xytext=[0.05, 0.55], textcoords='figure fraction',
478.                 xy=[0.05, 0.55], xycoords='figure fraction', fontsize=32)
479.     ax.annotate('- frac',
480.                 xytext=[-0.05, 0.5], textcoords='figure fraction',
481.                 xy=[-0.05, 0.5], xycoords='figure fraction', fontsize=32,
482.                 va='top')
483. 
484.     ax.annotate('+ pixels',
485.                 xytext=[50, 50], textcoords='figure pixels',
486.                 xy=[50, 50], xycoords='figure pixels', fontsize=32)
487.     ax.annotate('- pixels',
488.                 xytext=[-50, 100], textcoords='figure pixels',
489.                 xy=[-50, 100], xycoords='figure pixels', fontsize=32,
490.                 va='top')
491. 
492. 
493. def test_text_stale():
494.     fig, (ax1, ax2) = plt.subplots(1, 2)
495.     plt.draw_all()
496.     assert not ax1.stale
497.     assert not ax2.stale
498.     assert not fig.stale
499. 
500.     txt1 = ax1.text(.5, .5, 'aardvark')


File: lib/matplotlib/tests/test_text.py
Line number range: 656 - 664
Content:
656. def test_annotation_update():
657.     fig, ax = plt.subplots(1, 1)
658.     an = ax.annotate('annotation', xy=(0.5, 0.5))
659.     extent1 = an.get_window_extent(fig.canvas.get_renderer())
660.     fig.tight_layout()
661.     extent2 = an.get_window_extent(fig.canvas.get_renderer())
662. 
663.     assert not np.allclose(extent1.get_points(), extent2.get_points(),
664.                            rtol=1e-6)


File: lib/matplotlib/tests/test_text.py
Line number range: 667 - 676
Content:
667. @check_figures_equal(extensions=["png"])
668. def test_annotation_units(fig_test, fig_ref):
669.     ax = fig_test.add_subplot()
670.     ax.plot(datetime.now(), 1, "o")  # Implicitly set axes extents.
671.     ax.annotate("x", (datetime.now(), 0.5), xycoords=("data", "axes fraction"),
672.                 # This used to crash before.
673.                 xytext=(0, 0), textcoords="offset points")
674.     ax = fig_ref.add_subplot()
675.     ax.plot(datetime.now(), 1, "o")
676.     ax.annotate("x", (datetime.now(), 0.5), xycoords=("data", "axes fraction"))


File: lib/matplotlib/tests/test_text.py
Line number range: 901 - 914
Content:
901. def test_annotate_offset_fontsize():
902.     # Test that offset_fontsize parameter works and uses accurate values
903.     fig, ax = plt.subplots()
904.     text_coords = ['offset points', 'offset fontsize']
905.     # 10 points should be equal to 1 fontsize unit at fontsize=10
906.     xy_text = [(10, 10), (1, 1)]
907.     anns = [ax.annotate('test', xy=(0.5, 0.5),
908.                         xytext=xy_text[i],
909.                         fontsize='10',
910.                         xycoords='data',
911.                         textcoords=text_coords[i]) for i in range(2)]
912.     points_coords, fontsize_coords = [ann.get_window_extent() for ann in anns]
913.     fig.canvas.draw()
914.     assert str(points_coords) == str(fontsize_coords)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 12:33:20,965 - thread-136522258974400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="I have analyzed the user's request and the provided codebase context. The user wants to find three relevant test cases for a bug related to `ax.annotate` where modifying a mutable input array affects the annotation. The provided context includes `lib/matplotlib/tests/test_text.py` and `lib/matplotlib/tests/test_patches.py`, which are the most relevant files for testing annotations and patches. I have identified three suitable test cases within these files: `test_set_position` and `test_annotation_contains` from `test_text.py`, and `test_connection_patch` from `test_patches.py`. These tests cover annotation position updates, annotation with arrows, and the underlying connection patch functionality, which are all relevant to the user's bug report. The full source code for these tests and their required imports are available in the provided context. Therefore, I have sufficient information and do not need to request additional context." query='' extra_requirements='' purpose=''
2025-12-21 12:33:20,967 - thread-136522258974400.prometheus_context_collector - INFO - Successfully retrieved 5 context snippets
