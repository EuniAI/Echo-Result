2025-12-25 07:14:18,989 - thread-128180010612416.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Inherited classes not correctly documented when mocked

Description: ### Describe the bug

We're experiencing an issue when documenting classes that inherit mocked classes. However, classes which inherit other classes from our own package are ok.

This issue appears to be dependent on the `sphinx` version:

- `sphinx<3.0`: Everything is OK. 
- `sphinx>=3.0 < 3.4.2`: Classes that inherit mocked classes are not documented. (see [sphinx #8164](https://github.com/sphinx-doc/sphinx/issues/8164)). This is fixed in `sphinx 3.4.2`. 
- `sphinx>=3.4.2`: The previously missing classes are now documented, but there is a problem with the "Bases" section in the docs. 
 
Example: In the docs for `alibi_detect.utils.pytorch.kernels.DeepKernel` in this readthedocs build https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html, the base class is listed as "Bases: `torch.nn.`" instead of "Bases: `torch.nn.Module`". 


### How to Reproduce

```
$ git clone https://github.com/ascillitoe/alibi-detect.git
$ cd alibi-detect
$ pip install -r requirements/docs.txt
$ make build_docs
$ # open doc/_build/html/api/alibi_detect.utils.pytorch.kernels.html and see "Bases" section.
```


### Expected behavior

The "Bases" section should report `torch.nn.Module` not `torch.nn.`. 

i.e. see
https://seldon--325.org.readthedocs.build/projects/alibi-detect/en/325/api/alibi_detect.utils.pytorch.kernels.html

### Your project

https://github.com/ascillitoe/alibi-detect/tree/feature_sphinx4

### Screenshots

### Screenshot with `sphinx==4.2`
![sphinx_problem](https://user-images.githubusercontent.com/32061685/133816582-ca162b07-41c7-4b8e-98ea-781e7c659229.png)

### Screenshot with `sphinx<3.0`
![sphinx_working](https://user-images.githubusercontent.com/32061685/133816065-6291ce1b-96cf-4b0f-9648-7f993fc15611.png)



### OS

Ubuntu 18.04 (used by readthedocs/build:6.0)

### Python version

3.8.11

### Sphinx version

`>=3.4.2`

### Sphinx extensions

    ["sphinx.ext.autodoc",
    "sphinx.ext.doctest",
    "sphinx.ext.intersphinx",
    "sphinx.ext.todo",
    "sphinx.ext.coverage",
    "sphinx.ext.mathjax",
    "sphinx.ext.ifconfig",
    "sphinx.ext.viewcode",
    "sphinx.ext.napoleon",
    "sphinx_autodoc_typehints",
    "sphinxcontrib.apidoc", 
    "nbsphinx",
    "nbsphinx_link",  
    "myst_parser"]


### Extra tools

_No response_

### Additional context

demo PR:
https://github.com/SeldonIO/alibi-detect/pull/338

readthedocs demo build:
https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html



Patch information:
diff --git a/doc/usage/extensions/autodoc.rst b/doc/usage/extensions/autodoc.rst
index 5ac3cd171..717981aab 100644
--- a/doc/usage/extensions/autodoc.rst
+++ b/doc/usage/extensions/autodoc.rst
@@ -773,6 +773,11 @@ needed docstring processing in event :event:`autodoc-process-docstring`:
    modify **in place** to change what Sphinx puts into the output.  It's
    emitted only if ``show-inheritance`` option given.
 
+   The list is normalized to contain class objects (or strings) even when
+   modules are mocked via ``autodoc_mock_imports``. In particular, mocked
+   base entries are converted to their classes for consistent downstream
+   processing and correct display in the "Bases" section.
+
    :param app: the Sphinx application object
    :param name: the fully qualified name of the object
    :param obj: the object itself
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index a255c0691..e2243134a 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1661,6 +1661,9 @@ class ClassDocumenter(DocstringSignatureMixin, ModuleLevelDocumenter):  # type:
             else:
                 bases = []
 
+            # Normalize mocked base entries to their classes for display
+            bases = [b.__class__ if ismock(b) else b for b in bases]
+
             self.env.events.emit('autodoc-process-bases',
                                  self.fullname, self.object, self.options, bases)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-25 07:14:19,050 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Inherited classes not correctly documented when mocked

Description: ### Describe the bug

We're experiencing an issue when documenting classes that inherit mocked classes. However, classes which inherit other classes from our own package are ok.

This issue appears to be dependent on the `sphinx` version:

- `sphinx<3.0`: Everything is OK. 
- `sphinx>=3.0 < 3.4.2`: Classes that inherit mocked classes are not documented. (see [sphinx #8164](https://github.com/sphinx-doc/sphinx/issues/8164)). This is fixed in `sphinx 3.4.2`. 
- `sphinx>=3.4.2`: The previously missing classes are now documented, but there is a problem with the "Bases" section in the docs. 
 
Example: In the docs for `alibi_detect.utils.pytorch.kernels.DeepKernel` in this readthedocs build https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html, the base class is listed as "Bases: `torch.nn.`" instead of "Bases: `torch.nn.Module`". 


### How to Reproduce

```
$ git clone https://github.com/ascillitoe/alibi-detect.git
$ cd alibi-detect
$ pip install -r requirements/docs.txt
$ make build_docs
$ # open doc/_build/html/api/alibi_detect.utils.pytorch.kernels.html and see "Bases" section.
```


### Expected behavior

The "Bases" section should report `torch.nn.Module` not `torch.nn.`. 

i.e. see
https://seldon--325.org.readthedocs.build/projects/alibi-detect/en/325/api/alibi_detect.utils.pytorch.kernels.html

### Your project

https://github.com/ascillitoe/alibi-detect/tree/feature_sphinx4

### Screenshots

### Screenshot with `sphinx==4.2`
![sphinx_problem](https://user-images.githubusercontent.com/32061685/133816582-ca162b07-41c7-4b8e-98ea-781e7c659229.png)

### Screenshot with `sphinx<3.0`
![sphinx_working](https://user-images.githubusercontent.com/32061685/133816065-6291ce1b-96cf-4b0f-9648-7f993fc15611.png)



### OS

Ubuntu 18.04 (used by readthedocs/build:6.0)

### Python version

3.8.11

### Sphinx version

`>=3.4.2`

### Sphinx extensions

    ["sphinx.ext.autodoc",
    "sphinx.ext.doctest",
    "sphinx.ext.intersphinx",
    "sphinx.ext.todo",
    "sphinx.ext.coverage",
    "sphinx.ext.mathjax",
    "sphinx.ext.ifconfig",
    "sphinx.ext.viewcode",
    "sphinx.ext.napoleon",
    "sphinx_autodoc_typehints",
    "sphinxcontrib.apidoc", 
    "nbsphinx",
    "nbsphinx_link",  
    "myst_parser"]


### Extra tools

_No response_

### Additional context

demo PR:
https://github.com/SeldonIO/alibi-detect/pull/338

readthedocs demo build:
https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html



Patch information:
diff --git a/doc/usage/extensions/autodoc.rst b/doc/usage/extensions/autodoc.rst
index 5ac3cd171..717981aab 100644
--- a/doc/usage/extensions/autodoc.rst
+++ b/doc/usage/extensions/autodoc.rst
@@ -773,6 +773,11 @@ needed docstring processing in event :event:`autodoc-process-docstring`:
    modify **in place** to change what Sphinx puts into the output.  It's
    emitted only if ``show-inheritance`` option given.
 
+   The list is normalized to contain class objects (or strings) even when
+   modules are mocked via ``autodoc_mock_imports``. In particular, mocked
+   base entries are converted to their classes for consistent downstream
+   processing and correct display in the "Bases" section.
+
    :param app: the Sphinx application object
    :param name: the fully qualified name of the object
    :param obj: the object itself
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index a255c0691..e2243134a 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1661,6 +1661,9 @@ class ClassDocumenter(DocstringSignatureMixin, ModuleLevelDocumenter):  # type:
             else:
                 bases = []
 
+            # Normalize mocked base entries to their classes for display
+            bases = [b.__class__ if ismock(b) else b for b in bases]
+
             self.env.events.emit('autodoc-process-bases',
                                  self.fullname, self.object, self.options, bases)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-25 07:15:03,426 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user is reporting a bug in `sphinx.ext.autodoc` related to documenting classes that inherit from mocked classes. To find relevant test cases, I need to examine the tests for autodoc's mocking functionality. The most relevant test file is `tests/test_ext_autodoc_mock.py`. To understand how mocks are identified and handled, I also need the content of `sphinx/ext/autodoc/mock.py`, which likely defines the `ismock` function and the mock objects used by `autodoc`." query='Please provide the content of `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`.' extra_requirements='' purpose="This will allow me to identify test cases that cover the scenario of documenting inherited mocked classes and verify how the base classes are rendered, which is the core of the user's issue."
2025-12-25 07:15:03,427 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the content of `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`.
2025-12-25 07:15:03,428 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-25 07:15:03,428 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-25 07:15:03,429 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-25 07:15:03,429 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the content of `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`.
Purpose: This will allow me to identify test cases that cover the scenario of documenting inherited mocked classes and verify how the base classes are rendered, which is the core of the user's issue.
2025-12-25 07:15:06,305 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have fetched the content of both `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`. This will help in understanding the test cases related to mocked classes and how base classes are handled in the autodoc extension.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sphinx/ext/autodoc/mock.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2105, 'candidates_token_count': 108, 'total_token_count': 2342, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2105}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 108}], 'thoughts_token_count': 129, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.051661813700640644, 'model_name': 'gemini-2.5-pro'} id='run--bfe30de1-1dbf-4083-8899-ecc193d96c5e-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_ext_autodoc_mock.py'}, 'id': 'fc592cfc-dd59-4d2e-9ccb-25ff0c8dec62', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sphinx/ext/autodoc/mock.py'}, 'id': '52f6879c-fd31-4d68-9b2e-33318b6d9bf4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2105, 'output_tokens': 108, 'total_tokens': 2342, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 129}}
2025-12-25 07:15:24,403 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the content of both `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`. Analyzing these files has provided insight into the testing procedures for mocked classes and the underlying implementation of how base classes are handled within the autodoc extension. This information will be instrumental in addressing the user's issue regarding the rendering of inherited mocked classes." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 1543, 'end_index': 2392, 'uri': 'https://sources.debian.org/src/sphinx/3.2.1-1/tests/test_ext_autodoc_mock.py/', 'title': '', 'license_': ''}, {'start_index': 2630, 'end_index': 3040, 'uri': 'https://sources.debian.org/src/sphinx/3.2.1-1/tests/test_ext_autodoc_mock.py/', 'title': '', 'license_': ''}, {'start_index': 3304, 'end_index': 3938, 'uri': 'https://github.com/makinteract/vscode-microbit-micropython', 'title': '', 'license_': ''}, {'start_index': 4346, 'end_index': 4649, 'uri': 'https://github.com/Adix82/sphinx', 'title': '', 'license_': ''}, {'start_index': 5147, 'end_index': 5490, 'uri': 'https://github.com/neuro-ml/deep_pipe', 'title': '', 'license_': ''}, {'start_index': 5664, 'end_index': 6040, 'uri': 'https://github.com/makinteract/vscode-microbit-micropython', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 6586, 'candidates_token_count': 84, 'total_token_count': 8613, 'cached_content_token_count': 1771, 'prompt_tokens_details': [{'modality': 1, 'token_count': 6586}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1771}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 84}], 'thoughts_token_count': 1943}, 'finish_reason': 'STOP', 'avg_logprobs': -1.8273359026227678, 'model_name': 'gemini-2.5-pro'} id='run--dd0a2078-f9cb-457d-ad5b-17f4a840845f-0' usage_metadata={'input_tokens': 6586, 'output_tokens': 84, 'total_tokens': 8613, 'input_token_details': {'cache_read': 1771}, 'output_token_details': {'reasoning': 1943}}
2025-12-25 07:15:24,404 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the content of `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This will allow me to identify test cases that cover the scenario of documenting inherited mocked classes and verify how the base classes are rendered, which is the core of the user's issue.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sphinx/ext/autodoc/mock.py
Line number range: 1 - 187
Content:
1. """
2.     sphinx.ext.autodoc.mock
3.     ~~~~~~~~~~~~~~~~~~~~~~~
4. 
5.     mock for autodoc
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import contextlib
12. import os
13. import sys
14. from importlib.abc import Loader, MetaPathFinder
15. from importlib.machinery import ModuleSpec
16. from types import ModuleType
17. from typing import Any, Generator, Iterator, List, Optional, Sequence, Tuple, Union
18. 
19. from sphinx.util import logging
20. from sphinx.util.inspect import safe_getattr
21. 
22. logger = logging.getLogger(__name__)
23. 
24. 
25. class _MockObject:
26.     """Used by autodoc_mock_imports."""
27. 
28.     __display_name__ = '_MockObject'
29.     __sphinx_mock__ = True
30.     __sphinx_decorator_args__: Tuple[Any, ...] = ()
31. 
32.     def __new__(cls, *args: Any, **kwargs: Any) -> Any:
33.         if len(args) == 3 and isinstance(args[1], tuple):
34.             superclass = args[1][-1].__class__
35.             if superclass is cls:
36.                 # subclassing MockObject
37.                 return _make_subclass(args[0], superclass.__display_name__,
38.                                       superclass=superclass, attributes=args[2])
39. 
40.         return super().__new__(cls)
41. 
42.     def __init__(self, *args: Any, **kwargs: Any) -> None:
43.         self.__qualname__ = ''
44. 
45.     def __len__(self) -> int:
46.         return 0
47. 
48.     def __contains__(self, key: str) -> bool:
49.         return False
50. 
51.     def __iter__(self) -> Iterator:
52.         return iter([])
53. 
54.     def __mro_entries__(self, bases: Tuple) -> Tuple:
55.         return (self.__class__,)
56. 
57.     def __getitem__(self, key: Any) -> "_MockObject":
58.         return _make_subclass(str(key), self.__display_name__, self.__class__)()
59. 
60.     def __getattr__(self, key: str) -> "_MockObject":
61.         return _make_subclass(key, self.__display_name__, self.__class__)()
62. 
63.     def __call__(self, *args: Any, **kwargs: Any) -> Any:
64.         call = self.__class__()
65.         call.__sphinx_decorator_args__ = args
66.         return call
67. 
68.     def __repr__(self) -> str:
69.         return self.__display_name__
70. 
71. 
72. def _make_subclass(name: str, module: str, superclass: Any = _MockObject,
73.                    attributes: Any = None, decorator_args: Tuple = ()) -> Any:
74.     attrs = {'__module__': module,
75.              '__display_name__': module + '.' + name,
76.              '__sphinx_decorator_args__': decorator_args}
77.     attrs.update(attributes or {})
78. 
79.     return type(name, (superclass,), attrs)
80. 
81. 
82. class _MockModule(ModuleType):
83.     """Used by autodoc_mock_imports."""
84.     __file__ = os.devnull
85.     __sphinx_mock__ = True
86. 
87.     def __init__(self, name: str) -> None:
88.         super().__init__(name)
89.         self.__all__: List[str] = []
90.         self.__path__: List[str] = []
91. 
92.     def __getattr__(self, name: str) -> _MockObject:
93.         return _make_subclass(name, self.__name__)()
94. 
95.     def __repr__(self) -> str:
96.         return self.__name__
97. 
98. 
99. class MockLoader(Loader):
100.     """A loader for mocking."""
101.     def __init__(self, finder: "MockFinder") -> None:
102.         super().__init__()
103.         self.finder = finder
104. 
105.     def create_module(self, spec: ModuleSpec) -> ModuleType:
106.         logger.debug('[autodoc] adding a mock module as %s!', spec.name)
107.         self.finder.mocked_modules.append(spec.name)
108.         return _MockModule(spec.name)
109. 
110.     def exec_module(self, module: ModuleType) -> None:
111.         pass  # nothing to do
112. 
113. 
114. class MockFinder(MetaPathFinder):
115.     """A finder for mocking."""
116. 
117.     def __init__(self, modnames: List[str]) -> None:
118.         super().__init__()
119.         self.modnames = modnames
120.         self.loader = MockLoader(self)
121.         self.mocked_modules: List[str] = []
122. 
123.     def find_spec(self, fullname: str, path: Optional[Sequence[Union[bytes, str]]],
124.                   target: ModuleType = None) -> Optional[ModuleSpec]:
125.         for modname in self.modnames:
126.             # check if fullname is (or is a descendant of) one of our targets
127.             if modname == fullname or fullname.startswith(modname + '.'):
128.                 return ModuleSpec(fullname, self.loader)
129. 
130.         return None
131. 
132.     def invalidate_caches(self) -> None:
133.         """Invalidate mocked modules on sys.modules."""
134.         for modname in self.mocked_modules:
135.             sys.modules.pop(modname, None)
136. 
137. 
138. @contextlib.contextmanager
139. def mock(modnames: List[str]) -> Generator[None, None, None]:
140.     """Insert mock modules during context::
141. 
142.         with mock(['target.module.name']):
143.             # mock modules are enabled here
144.             ...
145.     """
146.     try:
147.         finder = MockFinder(modnames)
148.         sys.meta_path.insert(0, finder)
149.         yield
150.     finally:
151.         sys.meta_path.remove(finder)
152.         finder.invalidate_caches()
153. 
154. 
155. def ismock(subject: Any) -> bool:
156.     """Check if the object is mocked."""
157.     # check the object has '__sphinx_mock__' attribute
158.     try:
159.         if safe_getattr(subject, '__sphinx_mock__', None) is None:
160.             return False
161.     except AttributeError:
162.         return False
163. 
164.     # check the object is mocked module
165.     if isinstance(subject, _MockModule):
166.         return True
167. 
168.     try:
169.         # check the object is mocked object
170.         __mro__ = safe_getattr(type(subject), '__mro__', [])
171.         if len(__mro__) > 2 and __mro__[1] is _MockObject:
172.             return True
173.     except AttributeError:
174.         pass
175. 
176.     return False
177. 
178. 
179. def undecorate(subject: _MockObject) -> Any:
180.     """Unwrap mock if *subject* is decorated by mocked object.
181. 
182.     If not decorated, returns given *subject* itself.
183.     """
184.     if ismock(subject) and subject.__sphinx_decorator_args__:
185.         return subject.__sphinx_decorator_args__[0]
186.     else:
187.         return subject


File: tests/test_ext_autodoc_mock.py
Line number range: 1 - 152
Content:
1. """
2.     test_ext_autodoc_mock
3.     ~~~~~~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import abc
12. import sys
13. from importlib import import_module
14. from typing import TypeVar
15. 
16. import pytest
17. 
18. from sphinx.ext.autodoc.mock import _MockModule, _MockObject, ismock, mock, undecorate
19. 
20. 
21. def test_MockModule():
22.     mock = _MockModule('mocked_module')
23.     assert isinstance(mock.some_attr, _MockObject)
24.     assert isinstance(mock.some_method, _MockObject)
25.     assert isinstance(mock.attr1.attr2, _MockObject)
26.     assert isinstance(mock.attr1.attr2.meth(), _MockObject)
27. 
28.     assert repr(mock.some_attr) == 'mocked_module.some_attr'
29.     assert repr(mock.some_method) == 'mocked_module.some_method'
30.     assert repr(mock.attr1.attr2) == 'mocked_module.attr1.attr2'
31.     assert repr(mock.attr1.attr2.meth) == 'mocked_module.attr1.attr2.meth'
32. 
33.     assert repr(mock) == 'mocked_module'
34. 
35. 
36. def test_MockObject():
37.     mock = _MockObject()
38.     assert isinstance(mock.some_attr, _MockObject)
39.     assert isinstance(mock.some_method, _MockObject)
40.     assert isinstance(mock.attr1.attr2, _MockObject)
41.     assert isinstance(mock.attr1.attr2.meth(), _MockObject)
42. 
43.     # subclassing
44.     class SubClass(mock.SomeClass):
45.         """docstring of SubClass"""
46. 
47.         def method(self):
48.             return "string"
49. 
50.     obj = SubClass()
51.     assert SubClass.__doc__ == "docstring of SubClass"
52.     assert isinstance(obj, SubClass)
53.     assert obj.method() == "string"
54.     assert isinstance(obj.other_method(), SubClass)
55. 
56.     # parametrized type
57.     T = TypeVar('T')
58. 
59.     class SubClass2(mock.SomeClass[T]):
60.         """docstring of SubClass"""
61. 
62.     obj2 = SubClass2()
63.     assert SubClass2.__doc__ == "docstring of SubClass"
64.     assert isinstance(obj2, SubClass2)
65. 
66. 
67. def test_mock():
68.     modname = 'sphinx.unknown'
69.     submodule = modname + '.submodule'
70.     assert modname not in sys.modules
71.     with pytest.raises(ImportError):
72.         import_module(modname)
73. 
74.     with mock([modname]):
75.         import_module(modname)
76.         assert modname in sys.modules
77.         assert isinstance(sys.modules[modname], _MockModule)
78. 
79.         # submodules are also mocked
80.         import_module(submodule)
81.         assert submodule in sys.modules
82.         assert isinstance(sys.modules[submodule], _MockModule)
83. 
84.     assert modname not in sys.modules
85.     with pytest.raises(ImportError):
86.         import_module(modname)
87. 
88. 
89. def test_mock_does_not_follow_upper_modules():
90.     with mock(['sphinx.unknown.module']):
91.         with pytest.raises(ImportError):
92.             import_module('sphinx.unknown')
93. 
94. 
95. @pytest.mark.skipif(sys.version_info < (3, 7), reason='Only for py37 or above')
96. def test_abc_MockObject():
97.     mock = _MockObject()
98. 
99.     class Base:
100.         @abc.abstractmethod
101.         def __init__(self):
102.             pass
103. 
104.     class Derived(Base, mock.SubClass):
105.         pass
106. 
107.     obj = Derived()
108.     assert isinstance(obj, Base)
109.     assert isinstance(obj, _MockObject)
110.     assert isinstance(obj.some_method(), Derived)
111. 
112. 
113. def test_mock_decorator():
114.     mock = _MockObject()
115. 
116.     @mock.function_deco
117.     def func():
118.         pass
119. 
120.     class Foo:
121.         @mock.method_deco
122.         def meth(self):
123.             pass
124. 
125.     @mock.class_deco
126.     class Bar:
127.         pass
128. 
129.     @mock.funcion_deco(Foo)
130.     class Baz:
131.         pass
132. 
133.     assert undecorate(func).__name__ == "func"
134.     assert undecorate(Foo.meth).__name__ == "meth"
135.     assert undecorate(Bar).__name__ == "Bar"
136.     assert undecorate(Baz).__name__ == "Baz"
137. 
138. 
139. def test_ismock():
140.     with mock(['sphinx.unknown']):
141.         mod1 = import_module('sphinx.unknown')
142.         mod2 = import_module('sphinx.application')
143. 
144.         class Inherited(mod1.Class):
145.             pass
146. 
147.         assert ismock(mod1) is True
148.         assert ismock(mod1.Class) is True
149.         assert ismock(Inherited) is False
150. 
151.         assert ismock(mod2) is False
152.         assert ismock(mod2.Sphinx) is False

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-25 07:15:30,235 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asked for the content of `sphinx/ext/autodoc/mock.py`.\n\n2. Extended relevance:\n   - This context provides the entire content of the requested file, which is necessary to fulfill the user's request.", relative_path='sphinx/ext/autodoc/mock.py', start_line=1, end_line=187), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asked for the content of `tests/test_ext_autodoc_mock.py`.\n\n2. Extended relevance:\n   - This context provides the entire content of the requested file, which is necessary to fulfill the user's request.", relative_path='tests/test_ext_autodoc_mock.py', start_line=1, end_line=152)]
2025-12-25 07:15:30,236 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the content of `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`.
2025-12-25 07:15:30,237 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-25 07:15:30,237 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-25 07:15:30,237 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-25 07:15:30,237 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-25 07:15:30,238 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Inherited classes not correctly documented when mocked

Description: ### Describe the bug

We're experiencing an issue when documenting classes that inherit mocked classes. However, classes which inherit other classes from our own package are ok.

This issue appears to be dependent on the `sphinx` version:

- `sphinx<3.0`: Everything is OK. 
- `sphinx>=3.0 < 3.4.2`: Classes that inherit mocked classes are not documented. (see [sphinx #8164](https://github.com/sphinx-doc/sphinx/issues/8164)). This is fixed in `sphinx 3.4.2`. 
- `sphinx>=3.4.2`: The previously missing classes are now documented, but there is a problem with the "Bases" section in the docs. 
 
Example: In the docs for `alibi_detect.utils.pytorch.kernels.DeepKernel` in this readthedocs build https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html, the base class is listed as "Bases: `torch.nn.`" instead of "Bases: `torch.nn.Module`". 


### How to Reproduce

```
$ git clone https://github.com/ascillitoe/alibi-detect.git
$ cd alibi-detect
$ pip install -r requirements/docs.txt
$ make build_docs
$ # open doc/_build/html/api/alibi_detect.utils.pytorch.kernels.html and see "Bases" section.
```


### Expected behavior

The "Bases" section should report `torch.nn.Module` not `torch.nn.`. 

i.e. see
https://seldon--325.org.readthedocs.build/projects/alibi-detect/en/325/api/alibi_detect.utils.pytorch.kernels.html

### Your project

https://github.com/ascillitoe/alibi-detect/tree/feature_sphinx4

### Screenshots

### Screenshot with `sphinx==4.2`
![sphinx_problem](https://user-images.githubusercontent.com/32061685/133816582-ca162b07-41c7-4b8e-98ea-781e7c659229.png)

### Screenshot with `sphinx<3.0`
![sphinx_working](https://user-images.githubusercontent.com/32061685/133816065-6291ce1b-96cf-4b0f-9648-7f993fc15611.png)



### OS

Ubuntu 18.04 (used by readthedocs/build:6.0)

### Python version

3.8.11

### Sphinx version

`>=3.4.2`

### Sphinx extensions

    ["sphinx.ext.autodoc",
    "sphinx.ext.doctest",
    "sphinx.ext.intersphinx",
    "sphinx.ext.todo",
    "sphinx.ext.coverage",
    "sphinx.ext.mathjax",
    "sphinx.ext.ifconfig",
    "sphinx.ext.viewcode",
    "sphinx.ext.napoleon",
    "sphinx_autodoc_typehints",
    "sphinxcontrib.apidoc", 
    "nbsphinx",
    "nbsphinx_link",  
    "myst_parser"]


### Extra tools

_No response_

### Additional context

demo PR:
https://github.com/SeldonIO/alibi-detect/pull/338

readthedocs demo build:
https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html



Patch information:
diff --git a/doc/usage/extensions/autodoc.rst b/doc/usage/extensions/autodoc.rst
index 5ac3cd171..717981aab 100644
--- a/doc/usage/extensions/autodoc.rst
+++ b/doc/usage/extensions/autodoc.rst
@@ -773,6 +773,11 @@ needed docstring processing in event :event:`autodoc-process-docstring`:
    modify **in place** to change what Sphinx puts into the output.  It's
    emitted only if ``show-inheritance`` option given.
 
+   The list is normalized to contain class objects (or strings) even when
+   modules are mocked via ``autodoc_mock_imports``. In particular, mocked
+   base entries are converted to their classes for consistent downstream
+   processing and correct display in the "Bases" section.
+
    :param app: the Sphinx application object
    :param name: the fully qualified name of the object
    :param obj: the object itself
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index a255c0691..e2243134a 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1661,6 +1661,9 @@ class ClassDocumenter(DocstringSignatureMixin, ModuleLevelDocumenter):  # type:
             else:
                 bases = []
 
+            # Normalize mocked base entries to their classes for display
+            bases = [b.__class__ if ismock(b) else b for b in bases]
+
             self.env.events.emit('autodoc-process-bases',
                                  self.fullname, self.object, self.options, bases)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the content of `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`.
Extra Requirements: 
Purpose: This will allow me to identify test cases that cover the scenario of documenting inherited mocked classes and verify how the base classes are rendered, which is the core of the user's issue.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sphinx/ext/autodoc/mock.py
Line number range: 1 - 187
Content:
1. """
2.     sphinx.ext.autodoc.mock
3.     ~~~~~~~~~~~~~~~~~~~~~~~
4. 
5.     mock for autodoc
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import contextlib
12. import os
13. import sys
14. from importlib.abc import Loader, MetaPathFinder
15. from importlib.machinery import ModuleSpec
16. from types import ModuleType
17. from typing import Any, Generator, Iterator, List, Optional, Sequence, Tuple, Union
18. 
19. from sphinx.util import logging
20. from sphinx.util.inspect import safe_getattr
21. 
22. logger = logging.getLogger(__name__)
23. 
24. 
25. class _MockObject:
26.     """Used by autodoc_mock_imports."""
27. 
28.     __display_name__ = '_MockObject'
29.     __sphinx_mock__ = True
30.     __sphinx_decorator_args__: Tuple[Any, ...] = ()
31. 
32.     def __new__(cls, *args: Any, **kwargs: Any) -> Any:
33.         if len(args) == 3 and isinstance(args[1], tuple):
34.             superclass = args[1][-1].__class__
35.             if superclass is cls:
36.                 # subclassing MockObject
37.                 return _make_subclass(args[0], superclass.__display_name__,
38.                                       superclass=superclass, attributes=args[2])
39. 
40.         return super().__new__(cls)
41. 
42.     def __init__(self, *args: Any, **kwargs: Any) -> None:
43.         self.__qualname__ = ''
44. 
45.     def __len__(self) -> int:
46.         return 0
47. 
48.     def __contains__(self, key: str) -> bool:
49.         return False
50. 
51.     def __iter__(self) -> Iterator:
52.         return iter([])
53. 
54.     def __mro_entries__(self, bases: Tuple) -> Tuple:
55.         return (self.__class__,)
56. 
57.     def __getitem__(self, key: Any) -> "_MockObject":
58.         return _make_subclass(str(key), self.__display_name__, self.__class__)()
59. 
60.     def __getattr__(self, key: str) -> "_MockObject":
61.         return _make_subclass(key, self.__display_name__, self.__class__)()
62. 
63.     def __call__(self, *args: Any, **kwargs: Any) -> Any:
64.         call = self.__class__()
65.         call.__sphinx_decorator_args__ = args
66.         return call
67. 
68.     def __repr__(self) -> str:
69.         return self.__display_name__
70. 
71. 
72. def _make_subclass(name: str, module: str, superclass: Any = _MockObject,
73.                    attributes: Any = None, decorator_args: Tuple = ()) -> Any:
74.     attrs = {'__module__': module,
75.              '__display_name__': module + '.' + name,
76.              '__sphinx_decorator_args__': decorator_args}
77.     attrs.update(attributes or {})
78. 
79.     return type(name, (superclass,), attrs)
80. 
81. 
82. class _MockModule(ModuleType):
83.     """Used by autodoc_mock_imports."""
84.     __file__ = os.devnull
85.     __sphinx_mock__ = True
86. 
87.     def __init__(self, name: str) -> None:
88.         super().__init__(name)
89.         self.__all__: List[str] = []
90.         self.__path__: List[str] = []
91. 
92.     def __getattr__(self, name: str) -> _MockObject:
93.         return _make_subclass(name, self.__name__)()
94. 
95.     def __repr__(self) -> str:
96.         return self.__name__
97. 
98. 
99. class MockLoader(Loader):
100.     """A loader for mocking."""
101.     def __init__(self, finder: "MockFinder") -> None:
102.         super().__init__()
103.         self.finder = finder
104. 
105.     def create_module(self, spec: ModuleSpec) -> ModuleType:
106.         logger.debug('[autodoc] adding a mock module as %s!', spec.name)
107.         self.finder.mocked_modules.append(spec.name)
108.         return _MockModule(spec.name)
109. 
110.     def exec_module(self, module: ModuleType) -> None:
111.         pass  # nothing to do
112. 
113. 
114. class MockFinder(MetaPathFinder):
115.     """A finder for mocking."""
116. 
117.     def __init__(self, modnames: List[str]) -> None:
118.         super().__init__()
119.         self.modnames = modnames
120.         self.loader = MockLoader(self)
121.         self.mocked_modules: List[str] = []
122. 
123.     def find_spec(self, fullname: str, path: Optional[Sequence[Union[bytes, str]]],
124.                   target: ModuleType = None) -> Optional[ModuleSpec]:
125.         for modname in self.modnames:
126.             # check if fullname is (or is a descendant of) one of our targets
127.             if modname == fullname or fullname.startswith(modname + '.'):
128.                 return ModuleSpec(fullname, self.loader)
129. 
130.         return None
131. 
132.     def invalidate_caches(self) -> None:
133.         """Invalidate mocked modules on sys.modules."""
134.         for modname in self.mocked_modules:
135.             sys.modules.pop(modname, None)
136. 
137. 
138. @contextlib.contextmanager
139. def mock(modnames: List[str]) -> Generator[None, None, None]:
140.     """Insert mock modules during context::
141. 
142.         with mock(['target.module.name']):
143.             # mock modules are enabled here
144.             ...
145.     """
146.     try:
147.         finder = MockFinder(modnames)
148.         sys.meta_path.insert(0, finder)
149.         yield
150.     finally:
151.         sys.meta_path.remove(finder)
152.         finder.invalidate_caches()
153. 
154. 
155. def ismock(subject: Any) -> bool:
156.     """Check if the object is mocked."""
157.     # check the object has '__sphinx_mock__' attribute
158.     try:
159.         if safe_getattr(subject, '__sphinx_mock__', None) is None:
160.             return False
161.     except AttributeError:
162.         return False
163. 
164.     # check the object is mocked module
165.     if isinstance(subject, _MockModule):
166.         return True
167. 
168.     try:
169.         # check the object is mocked object
170.         __mro__ = safe_getattr(type(subject), '__mro__', [])
171.         if len(__mro__) > 2 and __mro__[1] is _MockObject:
172.             return True
173.     except AttributeError:
174.         pass
175. 
176.     return False
177. 
178. 
179. def undecorate(subject: _MockObject) -> Any:
180.     """Unwrap mock if *subject* is decorated by mocked object.
181. 
182.     If not decorated, returns given *subject* itself.
183.     """
184.     if ismock(subject) and subject.__sphinx_decorator_args__:
185.         return subject.__sphinx_decorator_args__[0]
186.     else:
187.         return subject


File: tests/test_ext_autodoc_mock.py
Line number range: 1 - 152
Content:
1. """
2.     test_ext_autodoc_mock
3.     ~~~~~~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import abc
12. import sys
13. from importlib import import_module
14. from typing import TypeVar
15. 
16. import pytest
17. 
18. from sphinx.ext.autodoc.mock import _MockModule, _MockObject, ismock, mock, undecorate
19. 
20. 
21. def test_MockModule():
22.     mock = _MockModule('mocked_module')
23.     assert isinstance(mock.some_attr, _MockObject)
24.     assert isinstance(mock.some_method, _MockObject)
25.     assert isinstance(mock.attr1.attr2, _MockObject)
26.     assert isinstance(mock.attr1.attr2.meth(), _MockObject)
27. 
28.     assert repr(mock.some_attr) == 'mocked_module.some_attr'
29.     assert repr(mock.some_method) == 'mocked_module.some_method'
30.     assert repr(mock.attr1.attr2) == 'mocked_module.attr1.attr2'
31.     assert repr(mock.attr1.attr2.meth) == 'mocked_module.attr1.attr2.meth'
32. 
33.     assert repr(mock) == 'mocked_module'
34. 
35. 
36. def test_MockObject():
37.     mock = _MockObject()
38.     assert isinstance(mock.some_attr, _MockObject)
39.     assert isinstance(mock.some_method, _MockObject)
40.     assert isinstance(mock.attr1.attr2, _MockObject)
41.     assert isinstance(mock.attr1.attr2.meth(), _MockObject)
42. 
43.     # subclassing
44.     class SubClass(mock.SomeClass):
45.         """docstring of SubClass"""
46. 
47.         def method(self):
48.             return "string"
49. 
50.     obj = SubClass()
51.     assert SubClass.__doc__ == "docstring of SubClass"
52.     assert isinstance(obj, SubClass)
53.     assert obj.method() == "string"
54.     assert isinstance(obj.other_method(), SubClass)
55. 
56.     # parametrized type
57.     T = TypeVar('T')
58. 
59.     class SubClass2(mock.SomeClass[T]):
60.         """docstring of SubClass"""
61. 
62.     obj2 = SubClass2()
63.     assert SubClass2.__doc__ == "docstring of SubClass"
64.     assert isinstance(obj2, SubClass2)
65. 
66. 
67. def test_mock():
68.     modname = 'sphinx.unknown'
69.     submodule = modname + '.submodule'
70.     assert modname not in sys.modules
71.     with pytest.raises(ImportError):
72.         import_module(modname)
73. 
74.     with mock([modname]):
75.         import_module(modname)
76.         assert modname in sys.modules
77.         assert isinstance(sys.modules[modname], _MockModule)
78. 
79.         # submodules are also mocked
80.         import_module(submodule)
81.         assert submodule in sys.modules
82.         assert isinstance(sys.modules[submodule], _MockModule)
83. 
84.     assert modname not in sys.modules
85.     with pytest.raises(ImportError):
86.         import_module(modname)
87. 
88. 
89. def test_mock_does_not_follow_upper_modules():
90.     with mock(['sphinx.unknown.module']):
91.         with pytest.raises(ImportError):
92.             import_module('sphinx.unknown')
93. 
94. 
95. @pytest.mark.skipif(sys.version_info < (3, 7), reason='Only for py37 or above')
96. def test_abc_MockObject():
97.     mock = _MockObject()
98. 
99.     class Base:
100.         @abc.abstractmethod
101.         def __init__(self):
102.             pass
103. 
104.     class Derived(Base, mock.SubClass):
105.         pass
106. 
107.     obj = Derived()
108.     assert isinstance(obj, Base)
109.     assert isinstance(obj, _MockObject)
110.     assert isinstance(obj.some_method(), Derived)
111. 
112. 
113. def test_mock_decorator():
114.     mock = _MockObject()
115. 
116.     @mock.function_deco
117.     def func():
118.         pass
119. 
120.     class Foo:
121.         @mock.method_deco
122.         def meth(self):
123.             pass
124. 
125.     @mock.class_deco
126.     class Bar:
127.         pass
128. 
129.     @mock.funcion_deco(Foo)
130.     class Baz:
131.         pass
132. 
133.     assert undecorate(func).__name__ == "func"
134.     assert undecorate(Foo.meth).__name__ == "meth"
135.     assert undecorate(Bar).__name__ == "Bar"
136.     assert undecorate(Baz).__name__ == "Baz"
137. 
138. 
139. def test_ismock():
140.     with mock(['sphinx.unknown']):
141.         mod1 = import_module('sphinx.unknown')
142.         mod2 = import_module('sphinx.application')
143. 
144.         class Inherited(mod1.Class):
145.             pass
146. 
147.         assert ismock(mod1) is True
148.         assert ismock(mod1.Class) is True
149.         assert ismock(Inherited) is False
150. 
151.         assert ismock(mod2) is False
152.         assert ismock(mod2.Sphinx) is False

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-25 07:16:20,216 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a bug in documenting inherited classes where the base class is mocked. The current context provides `sphinx/ext/autodoc/mock.py` and its unit tests `tests/test_ext_autodoc_mock.py`. This is insufficient because it only shows the mocking mechanism, not its integration with the autodoc extension, which is where the bug occurs. To find relevant test cases, I need to examine the tests for the autodoc extension itself, especially those that involve mocking and inheritance, and check the generated documentation. The file `tests/test_ext_autodoc.py` and its corresponding test root files are essential for this.' query='Please provide the content of `tests/test_ext_autodoc.py`, `tests/roots/test-ext-autodoc/conf.py`, `tests/roots/test-ext-autodoc/target/inheritance.py`, and `tests/roots/test-ext-autodoc/target/need_mocks.py`.' extra_requirements='' purpose="These files are needed to find complete test cases that demonstrate how autodoc handles inheritance from mocked classes, which is central to the user's bug report."
2025-12-25 07:16:20,217 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the content of `tests/test_ext_autodoc.py`, `tests/roots/test-ext-autodoc/conf.py`, `tests/roots/test-ext-autodoc/target/inheritance.py`, and `tests/roots/test-ext-autodoc/target/need_mocks.py`.
2025-12-25 07:16:20,217 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-25 07:16:20,218 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-25 07:16:20,218 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-25 07:16:20,218 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the content of `tests/test_ext_autodoc.py`, `tests/roots/test-ext-autodoc/conf.py`, `tests/roots/test-ext-autodoc/target/inheritance.py`, and `tests/roots/test-ext-autodoc/target/need_mocks.py`.
Purpose: These files are needed to find complete test cases that demonstrate how autodoc handles inheritance from mocked classes, which is central to the user's bug report.
2025-12-25 07:16:22,890 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have started by reading the content of `tests/test_ext_autodoc.py` to understand the overall test setup. Next, I will proceed to read the other three files to get a complete picture of the test cases related to autodoc and inheritance from mocked classes.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/roots/test-ext-autodoc/target/need_mocks.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2139, 'candidates_token_count': 171, 'total_token_count': 2343, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2139}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 171}], 'thoughts_token_count': 33, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07544545960008052, 'model_name': 'gemini-2.5-pro'} id='run--b912b698-f7f0-4e53-8779-de1337da7a5d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_ext_autodoc.py'}, 'id': '323a2bf9-ae56-4465-97fe-068a747c387f', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/conf.py'}, 'id': 'f5644da3-044b-46c4-b204-35132630dc20', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/target/inheritance.py'}, 'id': '64061095-58ce-416b-aa02-15bb5de62d8a', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/target/need_mocks.py'}, 'id': '4f2d5731-83f5-48b0-a658-521038cb6869', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2139, 'output_tokens': 171, 'total_tokens': 2343, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 33}}
2025-12-25 07:16:27,143 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the contents of the four requested files: `tests/test_ext_autodoc.py`, `tests/roots/test-ext-autodoc/conf.py`, `tests/roots/test-ext-autodoc/target/inheritance.py`, and `tests/roots/test-ext-autodoc/target/need_mocks.py`. These files provide the necessary context to analyze the test cases related to autodoc's handling of inheritance and mocked classes. I will now proceed to examine the code to understand the existing test coverage and identify any potential gaps related to the user's issue." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10657, 'candidates_token_count': 130, 'total_token_count': 11052, 'cached_content_token_count': 1805, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10657}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1805}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 130}], 'thoughts_token_count': 265}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16788275792048526, 'model_name': 'gemini-2.5-pro'} id='run--0b85b7f7-fb54-404c-a532-d5c9d9b0eea9-0' usage_metadata={'input_tokens': 10657, 'output_tokens': 130, 'total_tokens': 11052, 'input_token_details': {'cache_read': 1805}, 'output_token_details': {'reasoning': 265}}
2025-12-25 07:16:27,145 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the content of `tests/test_ext_autodoc.py`, `tests/roots/test-ext-autodoc/conf.py`, `tests/roots/test-ext-autodoc/target/inheritance.py`, and `tests/roots/test-ext-autodoc/target/need_mocks.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
These files are needed to find complete test cases that demonstrate how autodoc handles inheritance from mocked classes, which is central to the user's bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/roots/test-ext-autodoc/conf.py
Line number range: 1 - 15
Content:
1. import os
2. import sys
3. 
4. sys.path.insert(0, os.path.abspath('.'))
5. 
6. extensions = ['sphinx.ext.autodoc']
7. 
8. # The suffix of source filenames.
9. source_suffix = '.rst'
10. 
11. autodoc_mock_imports = [
12.     'dummy'
13. ]
14. 
15. nitpicky = True


File: tests/roots/test-ext-autodoc/target/inheritance.py
Line number range: 1 - 17
Content:
1. class Base(object):
2.     def inheritedmeth(self):
3.         """Inherited function."""
4. 
5.     @classmethod
6.     def inheritedclassmeth(cls):
7.         """Inherited class method."""
8. 
9.     @staticmethod
10.     def inheritedstaticmeth(cls):
11.         """Inherited static method."""
12. 
13. 
14. class Derived(Base):
15.     def inheritedmeth(self):
16.         # no docstring here
17.         pass


File: tests/roots/test-ext-autodoc/target/need_mocks.py
Line number range: 1 - 36
Content:
1. 
2. import missing_module  # NOQA
3. import missing_package1.missing_module1  # NOQA
4. from missing_module import missing_name  # NOQA
5. from missing_package2 import missing_module2  # NOQA
6. from missing_package3.missing_module3 import missing_name  # NOQA
7. 
8. import sphinx.missing_module4  # NOQA
9. from sphinx.missing_module4 import missing_name2  # NOQA
10. 
11. 
12. @missing_name(int)
13. def decoratedFunction():
14.     """decoratedFunction docstring"""
15.     return None
16. 
17. 
18. def func(arg: missing_module.Class):
19.     """a function takes mocked object as an argument"""
20.     pass
21. 
22. 
23. class TestAutodoc(object):
24.     """TestAutodoc docstring."""
25.     @missing_name
26.     def decoratedMethod(self):
27.         """TestAutodoc::decoratedMethod docstring"""
28.         return None
29. 
30. 
31. class Inherited(missing_module.Class):
32.     """docstring"""
33.     pass
34. 
35. 
36. sphinx.missing_module4.missing_function(len(missing_name2))


File: tests/test_ext_autodoc.py
Line number range: 1 - 500
Content:
1. """
2.     test_ext_autodoc
3.     ~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.  This tests mainly the Documenters; the auto
6.     directives are tested in a test source file translated by test_build.
7. 
8.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import sys
13. from unittest.mock import Mock
14. from warnings import catch_warnings
15. 
16. import pytest
17. from docutils.statemachine import ViewList
18. 
19. from sphinx import addnodes
20. from sphinx.ext.autodoc import ALL, ModuleLevelDocumenter, Options
21. from sphinx.ext.autodoc.directive import DocumenterBridge, process_documenter_options
22. from sphinx.testing.util import SphinxTestApp, Struct  # NOQA
23. from sphinx.util.docutils import LoggingReporter
24. 
25. try:
26.     # Enable pyximport to test cython module
27.     import pyximport
28.     pyximport.install()
29. except ImportError:
30.     pyximport = None
31. 
32. 
33. def do_autodoc(app, objtype, name, options=None):
34.     if options is None:
35.         options = {}
36.     app.env.temp_data.setdefault('docname', 'index')  # set dummy docname
37.     doccls = app.registry.documenters[objtype]
38.     docoptions = process_documenter_options(doccls, app.config, options)
39.     state = Mock()
40.     state.document.settings.tab_width = 8
41.     bridge = DocumenterBridge(app.env, LoggingReporter(''), docoptions, 1, state)
42.     documenter = doccls(bridge, name)
43.     documenter.generate()
44. 
45.     return bridge.result
46. 
47. 
48. def make_directive_bridge(env):
49.     options = Options(
50.         inherited_members = False,
51.         undoc_members = False,
52.         private_members = False,
53.         special_members = False,
54.         imported_members = False,
55.         show_inheritance = False,
56.         noindex = False,
57.         annotation = None,
58.         synopsis = '',
59.         platform = '',
60.         deprecated = False,
61.         members = [],
62.         member_order = 'alphabetical',
63.         exclude_members = set(),
64.         ignore_module_all = False,
65.     )
66. 
67.     directive = Struct(
68.         env = env,
69.         genopt = options,
70.         result = ViewList(),
71.         record_dependencies = set(),
72.         state = Mock(),
73.     )
74.     directive.state.document.settings.tab_width = 8
75. 
76.     return directive
77. 
78. 
79. processed_signatures = []
80. 
81. 
82. def process_signature(app, what, name, obj, options, args, retann):
83.     processed_signatures.append((what, name))
84.     if name == 'bar':
85.         return '42', None
86. 
87. 
88. def skip_member(app, what, name, obj, skip, options):
89.     if name in ('__special1__', '__special2__'):
90.         return skip
91.     if name.startswith('__'):
92.         return True
93.     if name == 'skipmeth':
94.         return True
95. 
96. 
97. def test_parse_name(app):
98.     def verify(objtype, name, result):
99.         inst = app.registry.documenters[objtype](directive, name)
100.         assert inst.parse_name()
101.         assert (inst.modname, inst.objpath, inst.args, inst.retann) == result
102. 
103.     directive = make_directive_bridge(app.env)
104. 
105.     # for modules
106.     verify('module', 'test_ext_autodoc', ('test_ext_autodoc', [], None, None))
107.     verify('module', 'test.test_ext_autodoc', ('test.test_ext_autodoc', [], None, None))
108.     verify('module', 'test(arg)', ('test', [], 'arg', None))
109.     assert 'signature arguments' in app._warning.getvalue()
110. 
111.     # for functions/classes
112.     verify('function', 'test_ext_autodoc.raises',
113.            ('test_ext_autodoc', ['raises'], None, None))
114.     verify('function', 'test_ext_autodoc.raises(exc) -> None',
115.            ('test_ext_autodoc', ['raises'], 'exc', 'None'))
116.     directive.env.temp_data['autodoc:module'] = 'test_ext_autodoc'
117.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
118.     del directive.env.temp_data['autodoc:module']
119.     directive.env.ref_context['py:module'] = 'test_ext_autodoc'
120.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
121.     verify('class', 'Base', ('test_ext_autodoc', ['Base'], None, None))
122. 
123.     # for members
124.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
125.     verify('method', 'SphinxTestApp.cleanup',
126.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
127.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
128.     directive.env.ref_context['py:class'] = 'Foo'
129.     directive.env.temp_data['autodoc:class'] = 'SphinxTestApp'
130.     verify('method', 'cleanup',
131.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
132.     verify('method', 'SphinxTestApp.cleanup',
133.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
134. 
135. 
136. def test_format_signature(app):
137.     app.connect('autodoc-process-signature', process_signature)
138.     app.connect('autodoc-skip-member', skip_member)
139. 
140.     directive = make_directive_bridge(app.env)
141. 
142.     def formatsig(objtype, name, obj, args, retann):
143.         inst = app.registry.documenters[objtype](directive, name)
144.         inst.fullname = name
145.         inst.doc_as_attr = False  # for class objtype
146.         inst.parent = object  # dummy
147.         inst.object = obj
148.         inst.objpath = [name]
149.         inst.args = args
150.         inst.retann = retann
151.         res = inst.format_signature()
152.         print(res)
153.         return res
154. 
155.     # no signatures for modules
156.     assert formatsig('module', 'test', None, None, None) == ''
157. 
158.     # test for functions
159.     def f(a, b, c=1, **d):
160.         pass
161. 
162.     def g(a='\n'):
163.         pass
164.     assert formatsig('function', 'f', f, None, None) == '(a, b, c=1, **d)'
165.     assert formatsig('function', 'f', f, 'a, b, c, d', None) == '(a, b, c, d)'
166.     assert formatsig('function', 'g', g, None, None) == r"(a='\n')"
167. 
168.     # test for classes
169.     class D:
170.         pass
171. 
172.     class E:
173.         def __init__(self):
174.             pass
175. 
176.     # an empty init and no init are the same
177.     for C in (D, E):
178.         assert formatsig('class', 'D', C, None, None) == '()'
179. 
180.     class SomeMeta(type):
181.         def __call__(cls, a, b=None):
182.             return type.__call__(cls, a, b)
183. 
184.     # these three are all equivalent
185.     class F:
186.         def __init__(self, a, b=None):
187.             pass
188. 
189.     class FNew:
190.         def __new__(cls, a, b=None):
191.             return super().__new__(cls)
192. 
193.     class FMeta(metaclass=SomeMeta):
194.         pass
195. 
196.     # and subclasses should always inherit
197.     class G(F):
198.         pass
199. 
200.     class GNew(FNew):
201.         pass
202. 
203.     class GMeta(FMeta):
204.         pass
205. 
206.     # subclasses inherit
207.     for C in (F, FNew, FMeta, G, GNew, GMeta):
208.         assert formatsig('class', 'C', C, None, None) == '(a, b=None)'
209.     assert formatsig('class', 'C', D, 'a, b', 'X') == '(a, b) -> X'
210. 
211.     class ListSubclass(list):
212.         pass
213. 
214.     # only supported if the python implementation decides to document it
215.     if getattr(list, '__text_signature__', None) is not None:
216.         assert formatsig('class', 'C', ListSubclass, None, None) == '(iterable=(), /)'
217.     else:
218.         assert formatsig('class', 'C', ListSubclass, None, None) == ''
219. 
220.     class ExceptionSubclass(Exception):
221.         pass
222. 
223.     # Exception has no __text_signature__ at least in Python 3.8
224.     if getattr(Exception, '__text_signature__', None) is None:
225.         assert formatsig('class', 'C', ExceptionSubclass, None, None) == ''
226. 
227.     # __init__ have signature at first line of docstring
228.     directive.env.config.autoclass_content = 'both'
229. 
230.     class F2:
231.         '''some docstring for F2.'''
232.         def __init__(self, *args, **kw):
233.             '''
234.             __init__(a1, a2, kw1=True, kw2=False)
235. 
236.             some docstring for __init__.
237.             '''
238.     class G2(F2):
239.         pass
240. 
241.     assert formatsig('class', 'F2', F2, None, None) == \
242.         '(a1, a2, kw1=True, kw2=False)'
243.     assert formatsig('class', 'G2', G2, None, None) == \
244.         '(a1, a2, kw1=True, kw2=False)'
245. 
246.     # test for methods
247.     class H:
248.         def foo1(self, b, *c):
249.             pass
250. 
251.         def foo2(b, *c):
252.             pass
253. 
254.         def foo3(self, d='\n'):
255.             pass
256.     assert formatsig('method', 'H.foo', H.foo1, None, None) == '(b, *c)'
257.     assert formatsig('method', 'H.foo', H.foo1, 'a', None) == '(a)'
258.     assert formatsig('method', 'H.foo', H.foo2, None, None) == '(*c)'
259.     assert formatsig('method', 'H.foo', H.foo3, None, None) == r"(d='\n')"
260. 
261.     # test bound methods interpreted as functions
262.     assert formatsig('function', 'foo', H().foo1, None, None) == '(b, *c)'
263.     assert formatsig('function', 'foo', H().foo2, None, None) == '(*c)'
264.     assert formatsig('function', 'foo', H().foo3, None, None) == r"(d='\n')"
265. 
266.     # test exception handling (exception is caught and args is '')
267.     directive.env.config.autodoc_docstring_signature = False
268.     assert formatsig('function', 'int', int, None, None) == ''
269. 
270.     # test processing by event handler
271.     assert formatsig('method', 'bar', H.foo1, None, None) == '42'
272. 
273.     # test functions created via functools.partial
274.     from functools import partial
275.     curried1 = partial(lambda a, b, c: None, 'A')
276.     assert formatsig('function', 'curried1', curried1, None, None) == \
277.         '(b, c)'
278.     curried2 = partial(lambda a, b, c=42: None, 'A')
279.     assert formatsig('function', 'curried2', curried2, None, None) == \
280.         '(b, c=42)'
281.     curried3 = partial(lambda a, b, *c: None, 'A')
282.     assert formatsig('function', 'curried3', curried3, None, None) == \
283.         '(b, *c)'
284.     curried4 = partial(lambda a, b, c=42, *d, **e: None, 'A')
285.     assert formatsig('function', 'curried4', curried4, None, None) == \
286.         '(b, c=42, *d, **e)'
287. 
288. 
289. @pytest.mark.sphinx('html', testroot='ext-autodoc')
290. def test_autodoc_process_signature_typing_generic(app):
291.     actual = do_autodoc(app, 'class', 'target.generic_class.A', {})
292. 
293.     assert list(actual) == [
294.         '',
295.         '.. py:class:: A(a, b=None)',
296.         '   :module: target.generic_class',
297.         '',
298.         '   docstring for A',
299.         '',
300.     ]
301. 
302. 
303. def test_autodoc_process_signature_typehints(app):
304.     captured = []
305. 
306.     def process_signature(*args):
307.         captured.append(args)
308. 
309.     app.connect('autodoc-process-signature', process_signature)
310. 
311.     def func(x: int, y: int) -> int:
312.         pass
313. 
314.     directive = make_directive_bridge(app.env)
315.     inst = app.registry.documenters['function'](directive, 'func')
316.     inst.fullname = 'func'
317.     inst.object = func
318.     inst.objpath = ['func']
319.     inst.format_signature()
320.     assert captured == [(app, 'function', 'func', func,
321.                          directive.genopt, '(x: int, y: int)', 'int')]
322. 
323. 
324. def test_get_doc(app):
325.     directive = make_directive_bridge(app.env)
326. 
327.     def getdocl(objtype, obj):
328.         inst = app.registry.documenters[objtype](directive, 'tmp')
329.         inst.parent = object  # dummy
330.         inst.object = obj
331.         inst.objpath = [obj.__name__]
332.         inst.doc_as_attr = False
333.         inst.format_signature()  # handle docstring signatures!
334.         ds = inst.get_doc()
335.         # for testing purposes, concat them and strip the empty line at the end
336.         res = sum(ds, [])[:-1]
337.         print(res)
338.         return res
339. 
340.     # objects without docstring
341.     def f():
342.         pass
343.     assert getdocl('function', f) == []
344. 
345.     # standard function, diverse docstring styles...
346.     def f():
347.         """Docstring"""
348.     def g():
349.         """
350.         Docstring
351.         """
352.     for func in (f, g):
353.         assert getdocl('function', func) == ['Docstring']
354. 
355.     # first line vs. other lines indentation
356.     def f():
357.         """First line
358. 
359.         Other
360.           lines
361.         """
362.     assert getdocl('function', f) == ['First line', '', 'Other', '  lines']
363. 
364.     # charset guessing (this module is encoded in utf-8)
365.     def f():
366.         """Döcstring"""
367.     assert getdocl('function', f) == ['Döcstring']
368. 
369.     # verify that method docstrings get extracted in both normal case
370.     # and in case of bound method posing as a function
371.     class J:  # NOQA
372.         def foo(self):
373.             """Method docstring"""
374.     assert getdocl('method', J.foo) == ['Method docstring']
375.     assert getdocl('function', J().foo) == ['Method docstring']
376. 
377. 
378. @pytest.mark.sphinx('html', testroot='ext-autodoc')
379. def test_new_documenter(app):
380.     class MyDocumenter(ModuleLevelDocumenter):
381.         objtype = 'integer'
382.         directivetype = 'integer'
383.         priority = 100
384. 
385.         @classmethod
386.         def can_document_member(cls, member, membername, isattr, parent):
387.             return isinstance(member, int)
388. 
389.         def document_members(self, all_members=False):
390.             return
391. 
392.     app.add_autodocumenter(MyDocumenter)
393. 
394.     options = {"members": 'integer'}
395.     actual = do_autodoc(app, 'module', 'target', options)
396.     assert list(actual) == [
397.         '',
398.         '.. py:module:: target',
399.         '',
400.         '',
401.         '.. py:integer:: integer',
402.         '   :module: target',
403.         '',
404.         '   documentation for the integer',
405.         '',
406.     ]
407. 
408. 
409. def test_attrgetter_using(app):
410.     from target import Class
411.     from target.inheritance import Derived
412. 
413.     directive = make_directive_bridge(app.env)
414. 
415.     def assert_getter_works(objtype, name, obj, attrs=[], **kw):
416.         getattr_spy = []
417. 
418.         def special_getattr(obj, name, *defargs):
419.             if name in attrs:
420.                 getattr_spy.append((obj, name))
421.                 return None
422.             return getattr(obj, name, *defargs)
423.         app.add_autodoc_attrgetter(type, special_getattr)
424. 
425.         del getattr_spy[:]
426.         inst = app.registry.documenters[objtype](directive, name)
427.         inst.generate(**kw)
428. 
429.         hooked_members = [s[1] for s in getattr_spy]
430.         documented_members = [s[1] for s in processed_signatures]
431.         for attr in attrs:
432.             fullname = '.'.join((name, attr))
433.             assert attr in hooked_members
434.             assert fullname not in documented_members, \
435.                 '%r was not hooked by special_attrgetter function' % fullname
436. 
437.     with catch_warnings(record=True):
438.         directive.genopt['members'] = ALL
439.         directive.genopt['inherited_members'] = False
440.         print(directive.genopt)
441.         assert_getter_works('class', 'target.Class', Class, ['meth'])
442. 
443.         directive.genopt['inherited_members'] = True
444.         assert_getter_works('class', 'target.inheritance.Derived', Derived, ['inheritedmeth'])
445. 
446. 
447. @pytest.mark.sphinx('html', testroot='ext-autodoc')
448. def test_py_module(app, warning):
449.     # without py:module
450.     actual = do_autodoc(app, 'method', 'Class.meth')
451.     assert list(actual) == []
452.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
453.             in warning.getvalue())
454. 
455.     # with py:module
456.     app.env.ref_context['py:module'] = 'target'
457.     warning.truncate(0)
458. 
459.     actual = do_autodoc(app, 'method', 'Class.meth')
460.     assert list(actual) == [
461.         '',
462.         '.. py:method:: Class.meth()',
463.         '   :module: target',
464.         '',
465.         '   Function.',
466.         '',
467.     ]
468.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
469.             not in warning.getvalue())
470. 
471. 
472. @pytest.mark.sphinx('html', testroot='ext-autodoc')
473. def test_autodoc_decorator(app):
474.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco1')
475.     assert list(actual) == [
476.         '',
477.         '.. py:decorator:: deco1',
478.         '   :module: target.decorator',
479.         '',
480.         '   docstring for deco1',
481.         '',
482.     ]
483. 
484.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco2')
485.     assert list(actual) == [
486.         '',
487.         '.. py:decorator:: deco2(condition, message)',
488.         '   :module: target.decorator',
489.         '',
490.         '   docstring for deco2',
491.         '',
492.     ]
493. 
494. 
495. @pytest.mark.sphinx('html', testroot='ext-autodoc')
496. def test_autodoc_exception(app):
497.     actual = do_autodoc(app, 'exception', 'target.CustomEx')
498.     assert list(actual) == [
499.         '',
500.         '.. py:exception:: CustomEx',

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-25 07:16:53,099 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user explicitly requested the content of this file. This file contains the test suite for the autodoc extension, which is relevant to the user's query.", relative_path='tests/test_ext_autodoc.py', start_line=1, end_line=500), ContextOutput(reasoning='The user explicitly requested the content of this file. This is a configuration file for the autodoc test root, and its content is necessary to understand the test setup.', relative_path='tests/roots/test-ext-autodoc/conf.py', start_line=1, end_line=15), ContextOutput(reasoning="The user explicitly requested the content of this file. This file defines classes used in autodoc tests, specifically for testing inheritance, which is relevant to the user's query.", relative_path='tests/roots/test-ext-autodoc/target/inheritance.py', start_line=1, end_line=17), ContextOutput(reasoning="The user explicitly requested the content of this file. This file contains python code that depends on modules that need to be mocked, which is central to testing autodoc's mock handling.", relative_path='tests/roots/test-ext-autodoc/target/need_mocks.py', start_line=1, end_line=36)]
2025-12-25 07:16:53,101 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 4 contexts to memory for query: Please provide the content of `tests/test_ext_autodoc.py`, `tests/roots/test-ext-autodoc/conf.py`, `tests/roots/test-ext-autodoc/target/inheritance.py`, and `tests/roots/test-ext-autodoc/target/need_mocks.py`.
2025-12-25 07:16:53,101 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-25 07:16:53,101 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-25 07:16:53,102 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 4 new contexts to 2 existing contexts
2025-12-25 07:16:53,102 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 6 total contexts (removed 0 duplicates)
2025-12-25 07:16:53,103 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Inherited classes not correctly documented when mocked

Description: ### Describe the bug

We're experiencing an issue when documenting classes that inherit mocked classes. However, classes which inherit other classes from our own package are ok.

This issue appears to be dependent on the `sphinx` version:

- `sphinx<3.0`: Everything is OK. 
- `sphinx>=3.0 < 3.4.2`: Classes that inherit mocked classes are not documented. (see [sphinx #8164](https://github.com/sphinx-doc/sphinx/issues/8164)). This is fixed in `sphinx 3.4.2`. 
- `sphinx>=3.4.2`: The previously missing classes are now documented, but there is a problem with the "Bases" section in the docs. 
 
Example: In the docs for `alibi_detect.utils.pytorch.kernels.DeepKernel` in this readthedocs build https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html, the base class is listed as "Bases: `torch.nn.`" instead of "Bases: `torch.nn.Module`". 


### How to Reproduce

```
$ git clone https://github.com/ascillitoe/alibi-detect.git
$ cd alibi-detect
$ pip install -r requirements/docs.txt
$ make build_docs
$ # open doc/_build/html/api/alibi_detect.utils.pytorch.kernels.html and see "Bases" section.
```


### Expected behavior

The "Bases" section should report `torch.nn.Module` not `torch.nn.`. 

i.e. see
https://seldon--325.org.readthedocs.build/projects/alibi-detect/en/325/api/alibi_detect.utils.pytorch.kernels.html

### Your project

https://github.com/ascillitoe/alibi-detect/tree/feature_sphinx4

### Screenshots

### Screenshot with `sphinx==4.2`
![sphinx_problem](https://user-images.githubusercontent.com/32061685/133816582-ca162b07-41c7-4b8e-98ea-781e7c659229.png)

### Screenshot with `sphinx<3.0`
![sphinx_working](https://user-images.githubusercontent.com/32061685/133816065-6291ce1b-96cf-4b0f-9648-7f993fc15611.png)



### OS

Ubuntu 18.04 (used by readthedocs/build:6.0)

### Python version

3.8.11

### Sphinx version

`>=3.4.2`

### Sphinx extensions

    ["sphinx.ext.autodoc",
    "sphinx.ext.doctest",
    "sphinx.ext.intersphinx",
    "sphinx.ext.todo",
    "sphinx.ext.coverage",
    "sphinx.ext.mathjax",
    "sphinx.ext.ifconfig",
    "sphinx.ext.viewcode",
    "sphinx.ext.napoleon",
    "sphinx_autodoc_typehints",
    "sphinxcontrib.apidoc", 
    "nbsphinx",
    "nbsphinx_link",  
    "myst_parser"]


### Extra tools

_No response_

### Additional context

demo PR:
https://github.com/SeldonIO/alibi-detect/pull/338

readthedocs demo build:
https://seldon--338.org.readthedocs.build/projects/alibi-detect/en/338/api/alibi_detect.utils.pytorch.kernels.html



Patch information:
diff --git a/doc/usage/extensions/autodoc.rst b/doc/usage/extensions/autodoc.rst
index 5ac3cd171..717981aab 100644
--- a/doc/usage/extensions/autodoc.rst
+++ b/doc/usage/extensions/autodoc.rst
@@ -773,6 +773,11 @@ needed docstring processing in event :event:`autodoc-process-docstring`:
    modify **in place** to change what Sphinx puts into the output.  It's
    emitted only if ``show-inheritance`` option given.
 
+   The list is normalized to contain class objects (or strings) even when
+   modules are mocked via ``autodoc_mock_imports``. In particular, mocked
+   base entries are converted to their classes for consistent downstream
+   processing and correct display in the "Bases" section.
+
    :param app: the Sphinx application object
    :param name: the fully qualified name of the object
    :param obj: the object itself
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index a255c0691..e2243134a 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1661,6 +1661,9 @@ class ClassDocumenter(DocstringSignatureMixin, ModuleLevelDocumenter):  # type:
             else:
                 bases = []
 
+            # Normalize mocked base entries to their classes for display
+            bases = [b.__class__ if ismock(b) else b for b in bases]
+
             self.env.events.emit('autodoc-process-bases',
                                  self.fullname, self.object, self.options, bases)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the content of `tests/test_ext_autodoc_mock.py` and `sphinx/ext/autodoc/mock.py`.
Extra Requirements: 
Purpose: This will allow me to identify test cases that cover the scenario of documenting inherited mocked classes and verify how the base classes are rendered, which is the core of the user's issue.

Previous refined query 2:
Essential Query: Please provide the content of `tests/test_ext_autodoc.py`, `tests/roots/test-ext-autodoc/conf.py`, `tests/roots/test-ext-autodoc/target/inheritance.py`, and `tests/roots/test-ext-autodoc/target/need_mocks.py`.
Extra Requirements: 
Purpose: These files are needed to find complete test cases that demonstrate how autodoc handles inheritance from mocked classes, which is central to the user's bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sphinx/ext/autodoc/mock.py
Line number range: 1 - 187
Content:
1. """
2.     sphinx.ext.autodoc.mock
3.     ~~~~~~~~~~~~~~~~~~~~~~~
4. 
5.     mock for autodoc
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import contextlib
12. import os
13. import sys
14. from importlib.abc import Loader, MetaPathFinder
15. from importlib.machinery import ModuleSpec
16. from types import ModuleType
17. from typing import Any, Generator, Iterator, List, Optional, Sequence, Tuple, Union
18. 
19. from sphinx.util import logging
20. from sphinx.util.inspect import safe_getattr
21. 
22. logger = logging.getLogger(__name__)
23. 
24. 
25. class _MockObject:
26.     """Used by autodoc_mock_imports."""
27. 
28.     __display_name__ = '_MockObject'
29.     __sphinx_mock__ = True
30.     __sphinx_decorator_args__: Tuple[Any, ...] = ()
31. 
32.     def __new__(cls, *args: Any, **kwargs: Any) -> Any:
33.         if len(args) == 3 and isinstance(args[1], tuple):
34.             superclass = args[1][-1].__class__
35.             if superclass is cls:
36.                 # subclassing MockObject
37.                 return _make_subclass(args[0], superclass.__display_name__,
38.                                       superclass=superclass, attributes=args[2])
39. 
40.         return super().__new__(cls)
41. 
42.     def __init__(self, *args: Any, **kwargs: Any) -> None:
43.         self.__qualname__ = ''
44. 
45.     def __len__(self) -> int:
46.         return 0
47. 
48.     def __contains__(self, key: str) -> bool:
49.         return False
50. 
51.     def __iter__(self) -> Iterator:
52.         return iter([])
53. 
54.     def __mro_entries__(self, bases: Tuple) -> Tuple:
55.         return (self.__class__,)
56. 
57.     def __getitem__(self, key: Any) -> "_MockObject":
58.         return _make_subclass(str(key), self.__display_name__, self.__class__)()
59. 
60.     def __getattr__(self, key: str) -> "_MockObject":
61.         return _make_subclass(key, self.__display_name__, self.__class__)()
62. 
63.     def __call__(self, *args: Any, **kwargs: Any) -> Any:
64.         call = self.__class__()
65.         call.__sphinx_decorator_args__ = args
66.         return call
67. 
68.     def __repr__(self) -> str:
69.         return self.__display_name__
70. 
71. 
72. def _make_subclass(name: str, module: str, superclass: Any = _MockObject,
73.                    attributes: Any = None, decorator_args: Tuple = ()) -> Any:
74.     attrs = {'__module__': module,
75.              '__display_name__': module + '.' + name,
76.              '__sphinx_decorator_args__': decorator_args}
77.     attrs.update(attributes or {})
78. 
79.     return type(name, (superclass,), attrs)
80. 
81. 
82. class _MockModule(ModuleType):
83.     """Used by autodoc_mock_imports."""
84.     __file__ = os.devnull
85.     __sphinx_mock__ = True
86. 
87.     def __init__(self, name: str) -> None:
88.         super().__init__(name)
89.         self.__all__: List[str] = []
90.         self.__path__: List[str] = []
91. 
92.     def __getattr__(self, name: str) -> _MockObject:
93.         return _make_subclass(name, self.__name__)()
94. 
95.     def __repr__(self) -> str:
96.         return self.__name__
97. 
98. 
99. class MockLoader(Loader):
100.     """A loader for mocking."""
101.     def __init__(self, finder: "MockFinder") -> None:
102.         super().__init__()
103.         self.finder = finder
104. 
105.     def create_module(self, spec: ModuleSpec) -> ModuleType:
106.         logger.debug('[autodoc] adding a mock module as %s!', spec.name)
107.         self.finder.mocked_modules.append(spec.name)
108.         return _MockModule(spec.name)
109. 
110.     def exec_module(self, module: ModuleType) -> None:
111.         pass  # nothing to do
112. 
113. 
114. class MockFinder(MetaPathFinder):
115.     """A finder for mocking."""
116. 
117.     def __init__(self, modnames: List[str]) -> None:
118.         super().__init__()
119.         self.modnames = modnames
120.         self.loader = MockLoader(self)
121.         self.mocked_modules: List[str] = []
122. 
123.     def find_spec(self, fullname: str, path: Optional[Sequence[Union[bytes, str]]],
124.                   target: ModuleType = None) -> Optional[ModuleSpec]:
125.         for modname in self.modnames:
126.             # check if fullname is (or is a descendant of) one of our targets
127.             if modname == fullname or fullname.startswith(modname + '.'):
128.                 return ModuleSpec(fullname, self.loader)
129. 
130.         return None
131. 
132.     def invalidate_caches(self) -> None:
133.         """Invalidate mocked modules on sys.modules."""
134.         for modname in self.mocked_modules:
135.             sys.modules.pop(modname, None)
136. 
137. 
138. @contextlib.contextmanager
139. def mock(modnames: List[str]) -> Generator[None, None, None]:
140.     """Insert mock modules during context::
141. 
142.         with mock(['target.module.name']):
143.             # mock modules are enabled here
144.             ...
145.     """
146.     try:
147.         finder = MockFinder(modnames)
148.         sys.meta_path.insert(0, finder)
149.         yield
150.     finally:
151.         sys.meta_path.remove(finder)
152.         finder.invalidate_caches()
153. 
154. 
155. def ismock(subject: Any) -> bool:
156.     """Check if the object is mocked."""
157.     # check the object has '__sphinx_mock__' attribute
158.     try:
159.         if safe_getattr(subject, '__sphinx_mock__', None) is None:
160.             return False
161.     except AttributeError:
162.         return False
163. 
164.     # check the object is mocked module
165.     if isinstance(subject, _MockModule):
166.         return True
167. 
168.     try:
169.         # check the object is mocked object
170.         __mro__ = safe_getattr(type(subject), '__mro__', [])
171.         if len(__mro__) > 2 and __mro__[1] is _MockObject:
172.             return True
173.     except AttributeError:
174.         pass
175. 
176.     return False
177. 
178. 
179. def undecorate(subject: _MockObject) -> Any:
180.     """Unwrap mock if *subject* is decorated by mocked object.
181. 
182.     If not decorated, returns given *subject* itself.
183.     """
184.     if ismock(subject) and subject.__sphinx_decorator_args__:
185.         return subject.__sphinx_decorator_args__[0]
186.     else:
187.         return subject


File: tests/roots/test-ext-autodoc/conf.py
Line number range: 1 - 15
Content:
1. import os
2. import sys
3. 
4. sys.path.insert(0, os.path.abspath('.'))
5. 
6. extensions = ['sphinx.ext.autodoc']
7. 
8. # The suffix of source filenames.
9. source_suffix = '.rst'
10. 
11. autodoc_mock_imports = [
12.     'dummy'
13. ]
14. 
15. nitpicky = True


File: tests/roots/test-ext-autodoc/target/inheritance.py
Line number range: 1 - 17
Content:
1. class Base(object):
2.     def inheritedmeth(self):
3.         """Inherited function."""
4. 
5.     @classmethod
6.     def inheritedclassmeth(cls):
7.         """Inherited class method."""
8. 
9.     @staticmethod
10.     def inheritedstaticmeth(cls):
11.         """Inherited static method."""
12. 
13. 
14. class Derived(Base):
15.     def inheritedmeth(self):
16.         # no docstring here
17.         pass


File: tests/roots/test-ext-autodoc/target/need_mocks.py
Line number range: 1 - 36
Content:
1. 
2. import missing_module  # NOQA
3. import missing_package1.missing_module1  # NOQA
4. from missing_module import missing_name  # NOQA
5. from missing_package2 import missing_module2  # NOQA
6. from missing_package3.missing_module3 import missing_name  # NOQA
7. 
8. import sphinx.missing_module4  # NOQA
9. from sphinx.missing_module4 import missing_name2  # NOQA
10. 
11. 
12. @missing_name(int)
13. def decoratedFunction():
14.     """decoratedFunction docstring"""
15.     return None
16. 
17. 
18. def func(arg: missing_module.Class):
19.     """a function takes mocked object as an argument"""
20.     pass
21. 
22. 
23. class TestAutodoc(object):
24.     """TestAutodoc docstring."""
25.     @missing_name
26.     def decoratedMethod(self):
27.         """TestAutodoc::decoratedMethod docstring"""
28.         return None
29. 
30. 
31. class Inherited(missing_module.Class):
32.     """docstring"""
33.     pass
34. 
35. 
36. sphinx.missing_module4.missing_function(len(missing_name2))


File: tests/test_ext_autodoc.py
Line number range: 1 - 500
Content:
1. """
2.     test_ext_autodoc
3.     ~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.  This tests mainly the Documenters; the auto
6.     directives are tested in a test source file translated by test_build.
7. 
8.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import sys
13. from unittest.mock import Mock
14. from warnings import catch_warnings
15. 
16. import pytest
17. from docutils.statemachine import ViewList
18. 
19. from sphinx import addnodes
20. from sphinx.ext.autodoc import ALL, ModuleLevelDocumenter, Options
21. from sphinx.ext.autodoc.directive import DocumenterBridge, process_documenter_options
22. from sphinx.testing.util import SphinxTestApp, Struct  # NOQA
23. from sphinx.util.docutils import LoggingReporter
24. 
25. try:
26.     # Enable pyximport to test cython module
27.     import pyximport
28.     pyximport.install()
29. except ImportError:
30.     pyximport = None
31. 
32. 
33. def do_autodoc(app, objtype, name, options=None):
34.     if options is None:
35.         options = {}
36.     app.env.temp_data.setdefault('docname', 'index')  # set dummy docname
37.     doccls = app.registry.documenters[objtype]
38.     docoptions = process_documenter_options(doccls, app.config, options)
39.     state = Mock()
40.     state.document.settings.tab_width = 8
41.     bridge = DocumenterBridge(app.env, LoggingReporter(''), docoptions, 1, state)
42.     documenter = doccls(bridge, name)
43.     documenter.generate()
44. 
45.     return bridge.result
46. 
47. 
48. def make_directive_bridge(env):
49.     options = Options(
50.         inherited_members = False,
51.         undoc_members = False,
52.         private_members = False,
53.         special_members = False,
54.         imported_members = False,
55.         show_inheritance = False,
56.         noindex = False,
57.         annotation = None,
58.         synopsis = '',
59.         platform = '',
60.         deprecated = False,
61.         members = [],
62.         member_order = 'alphabetical',
63.         exclude_members = set(),
64.         ignore_module_all = False,
65.     )
66. 
67.     directive = Struct(
68.         env = env,
69.         genopt = options,
70.         result = ViewList(),
71.         record_dependencies = set(),
72.         state = Mock(),
73.     )
74.     directive.state.document.settings.tab_width = 8
75. 
76.     return directive
77. 
78. 
79. processed_signatures = []
80. 
81. 
82. def process_signature(app, what, name, obj, options, args, retann):
83.     processed_signatures.append((what, name))
84.     if name == 'bar':
85.         return '42', None
86. 
87. 
88. def skip_member(app, what, name, obj, skip, options):
89.     if name in ('__special1__', '__special2__'):
90.         return skip
91.     if name.startswith('__'):
92.         return True
93.     if name == 'skipmeth':
94.         return True
95. 
96. 
97. def test_parse_name(app):
98.     def verify(objtype, name, result):
99.         inst = app.registry.documenters[objtype](directive, name)
100.         assert inst.parse_name()
101.         assert (inst.modname, inst.objpath, inst.args, inst.retann) == result
102. 
103.     directive = make_directive_bridge(app.env)
104. 
105.     # for modules
106.     verify('module', 'test_ext_autodoc', ('test_ext_autodoc', [], None, None))
107.     verify('module', 'test.test_ext_autodoc', ('test.test_ext_autodoc', [], None, None))
108.     verify('module', 'test(arg)', ('test', [], 'arg', None))
109.     assert 'signature arguments' in app._warning.getvalue()
110. 
111.     # for functions/classes
112.     verify('function', 'test_ext_autodoc.raises',
113.            ('test_ext_autodoc', ['raises'], None, None))
114.     verify('function', 'test_ext_autodoc.raises(exc) -> None',
115.            ('test_ext_autodoc', ['raises'], 'exc', 'None'))
116.     directive.env.temp_data['autodoc:module'] = 'test_ext_autodoc'
117.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
118.     del directive.env.temp_data['autodoc:module']
119.     directive.env.ref_context['py:module'] = 'test_ext_autodoc'
120.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
121.     verify('class', 'Base', ('test_ext_autodoc', ['Base'], None, None))
122. 
123.     # for members
124.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
125.     verify('method', 'SphinxTestApp.cleanup',
126.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
127.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
128.     directive.env.ref_context['py:class'] = 'Foo'
129.     directive.env.temp_data['autodoc:class'] = 'SphinxTestApp'
130.     verify('method', 'cleanup',
131.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
132.     verify('method', 'SphinxTestApp.cleanup',
133.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
134. 
135. 
136. def test_format_signature(app):
137.     app.connect('autodoc-process-signature', process_signature)
138.     app.connect('autodoc-skip-member', skip_member)
139. 
140.     directive = make_directive_bridge(app.env)
141. 
142.     def formatsig(objtype, name, obj, args, retann):
143.         inst = app.registry.documenters[objtype](directive, name)
144.         inst.fullname = name
145.         inst.doc_as_attr = False  # for class objtype
146.         inst.parent = object  # dummy
147.         inst.object = obj
148.         inst.objpath = [name]
149.         inst.args = args
150.         inst.retann = retann
151.         res = inst.format_signature()
152.         print(res)
153.         return res
154. 
155.     # no signatures for modules
156.     assert formatsig('module', 'test', None, None, None) == ''
157. 
158.     # test for functions
159.     def f(a, b, c=1, **d):
160.         pass
161. 
162.     def g(a='\n'):
163.         pass
164.     assert formatsig('function', 'f', f, None, None) == '(a, b, c=1, **d)'
165.     assert formatsig('function', 'f', f, 'a, b, c, d', None) == '(a, b, c, d)'
166.     assert formatsig('function', 'g', g, None, None) == r"(a='\n')"
167. 
168.     # test for classes
169.     class D:
170.         pass
171. 
172.     class E:
173.         def __init__(self):
174.             pass
175. 
176.     # an empty init and no init are the same
177.     for C in (D, E):
178.         assert formatsig('class', 'D', C, None, None) == '()'
179. 
180.     class SomeMeta(type):
181.         def __call__(cls, a, b=None):
182.             return type.__call__(cls, a, b)
183. 
184.     # these three are all equivalent
185.     class F:
186.         def __init__(self, a, b=None):
187.             pass
188. 
189.     class FNew:
190.         def __new__(cls, a, b=None):
191.             return super().__new__(cls)
192. 
193.     class FMeta(metaclass=SomeMeta):
194.         pass
195. 
196.     # and subclasses should always inherit
197.     class G(F):
198.         pass
199. 
200.     class GNew(FNew):
201.         pass
202. 
203.     class GMeta(FMeta):
204.         pass
205. 
206.     # subclasses inherit
207.     for C in (F, FNew, FMeta, G, GNew, GMeta):
208.         assert formatsig('class', 'C', C, None, None) == '(a, b=None)'
209.     assert formatsig('class', 'C', D, 'a, b', 'X') == '(a, b) -> X'
210. 
211.     class ListSubclass(list):
212.         pass
213. 
214.     # only supported if the python implementation decides to document it
215.     if getattr(list, '__text_signature__', None) is not None:
216.         assert formatsig('class', 'C', ListSubclass, None, None) == '(iterable=(), /)'
217.     else:
218.         assert formatsig('class', 'C', ListSubclass, None, None) == ''
219. 
220.     class ExceptionSubclass(Exception):
221.         pass
222. 
223.     # Exception has no __text_signature__ at least in Python 3.8
224.     if getattr(Exception, '__text_signature__', None) is None:
225.         assert formatsig('class', 'C', ExceptionSubclass, None, None) == ''
226. 
227.     # __init__ have signature at first line of docstring
228.     directive.env.config.autoclass_content = 'both'
229. 
230.     class F2:
231.         '''some docstring for F2.'''
232.         def __init__(self, *args, **kw):
233.             '''
234.             __init__(a1, a2, kw1=True, kw2=False)
235. 
236.             some docstring for __init__.
237.             '''
238.     class G2(F2):
239.         pass
240. 
241.     assert formatsig('class', 'F2', F2, None, None) == \
242.         '(a1, a2, kw1=True, kw2=False)'
243.     assert formatsig('class', 'G2', G2, None, None) == \
244.         '(a1, a2, kw1=True, kw2=False)'
245. 
246.     # test for methods
247.     class H:
248.         def foo1(self, b, *c):
249.             pass
250. 
251.         def foo2(b, *c):
252.             pass
253. 
254.         def foo3(self, d='\n'):
255.             pass
256.     assert formatsig('method', 'H.foo', H.foo1, None, None) == '(b, *c)'
257.     assert formatsig('method', 'H.foo', H.foo1, 'a', None) == '(a)'
258.     assert formatsig('method', 'H.foo', H.foo2, None, None) == '(*c)'
259.     assert formatsig('method', 'H.foo', H.foo3, None, None) == r"(d='\n')"
260. 
261.     # test bound methods interpreted as functions
262.     assert formatsig('function', 'foo', H().foo1, None, None) == '(b, *c)'
263.     assert formatsig('function', 'foo', H().foo2, None, None) == '(*c)'
264.     assert formatsig('function', 'foo', H().foo3, None, None) == r"(d='\n')"
265. 
266.     # test exception handling (exception is caught and args is '')
267.     directive.env.config.autodoc_docstring_signature = False
268.     assert formatsig('function', 'int', int, None, None) == ''
269. 
270.     # test processing by event handler
271.     assert formatsig('method', 'bar', H.foo1, None, None) == '42'
272. 
273.     # test functions created via functools.partial
274.     from functools import partial
275.     curried1 = partial(lambda a, b, c: None, 'A')
276.     assert formatsig('function', 'curried1', curried1, None, None) == \
277.         '(b, c)'
278.     curried2 = partial(lambda a, b, c=42: None, 'A')
279.     assert formatsig('function', 'curried2', curried2, None, None) == \
280.         '(b, c=42)'
281.     curried3 = partial(lambda a, b, *c: None, 'A')
282.     assert formatsig('function', 'curried3', curried3, None, None) == \
283.         '(b, *c)'
284.     curried4 = partial(lambda a, b, c=42, *d, **e: None, 'A')
285.     assert formatsig('function', 'curried4', curried4, None, None) == \
286.         '(b, c=42, *d, **e)'
287. 
288. 
289. @pytest.mark.sphinx('html', testroot='ext-autodoc')
290. def test_autodoc_process_signature_typing_generic(app):
291.     actual = do_autodoc(app, 'class', 'target.generic_class.A', {})
292. 
293.     assert list(actual) == [
294.         '',
295.         '.. py:class:: A(a, b=None)',
296.         '   :module: target.generic_class',
297.         '',
298.         '   docstring for A',
299.         '',
300.     ]
301. 
302. 
303. def test_autodoc_process_signature_typehints(app):
304.     captured = []
305. 
306.     def process_signature(*args):
307.         captured.append(args)
308. 
309.     app.connect('autodoc-process-signature', process_signature)
310. 
311.     def func(x: int, y: int) -> int:
312.         pass
313. 
314.     directive = make_directive_bridge(app.env)
315.     inst = app.registry.documenters['function'](directive, 'func')
316.     inst.fullname = 'func'
317.     inst.object = func
318.     inst.objpath = ['func']
319.     inst.format_signature()
320.     assert captured == [(app, 'function', 'func', func,
321.                          directive.genopt, '(x: int, y: int)', 'int')]
322. 
323. 
324. def test_get_doc(app):
325.     directive = make_directive_bridge(app.env)
326. 
327.     def getdocl(objtype, obj):
328.         inst = app.registry.documenters[objtype](directive, 'tmp')
329.         inst.parent = object  # dummy
330.         inst.object = obj
331.         inst.objpath = [obj.__name__]
332.         inst.doc_as_attr = False
333.         inst.format_signature()  # handle docstring signatures!
334.         ds = inst.get_doc()
335.         # for testing purposes, concat them and strip the empty line at the end
336.         res = sum(ds, [])[:-1]
337.         print(res)
338.         return res
339. 
340.     # objects without docstring
341.     def f():
342.         pass
343.     assert getdocl('function', f) == []
344. 
345.     # standard function, diverse docstring styles...
346.     def f():
347.         """Docstring"""
348.     def g():
349.         """
350.         Docstring
351.         """
352.     for func in (f, g):
353.         assert getdocl('function', func) == ['Docstring']
354. 
355.     # first line vs. other lines indentation
356.     def f():
357.         """First line
358. 
359.         Other
360.           lines
361.         """
362.     assert getdocl('function', f) == ['First line', '', 'Other', '  lines']
363. 
364.     # charset guessing (this module is encoded in utf-8)
365.     def f():
366.         """Döcstring"""
367.     assert getdocl('function', f) == ['Döcstring']
368. 
369.     # verify that method docstrings get extracted in both normal case
370.     # and in case of bound method posing as a function
371.     class J:  # NOQA
372.         def foo(self):
373.             """Method docstring"""
374.     assert getdocl('method', J.foo) == ['Method docstring']
375.     assert getdocl('function', J().foo) == ['Method docstring']
376. 
377. 
378. @pytest.mark.sphinx('html', testroot='ext-autodoc')
379. def test_new_documenter(app):
380.     class MyDocumenter(ModuleLevelDocumenter):
381.         objtype = 'integer'
382.         directivetype = 'integer'
383.         priority = 100
384. 
385.         @classmethod
386.         def can_document_member(cls, member, membername, isattr, parent):
387.             return isinstance(member, int)
388. 
389.         def document_members(self, all_members=False):
390.             return
391. 
392.     app.add_autodocumenter(MyDocumenter)
393. 
394.     options = {"members": 'integer'}
395.     actual = do_autodoc(app, 'module', 'target', options)
396.     assert list(actual) == [
397.         '',
398.         '.. py:module:: target',
399.         '',
400.         '',
401.         '.. py:integer:: integer',
402.         '   :module: target',
403.         '',
404.         '   documentation for the integer',
405.         '',
406.     ]
407. 
408. 
409. def test_attrgetter_using(app):
410.     from target import Class
411.     from target.inheritance import Derived
412. 
413.     directive = make_directive_bridge(app.env)
414. 
415.     def assert_getter_works(objtype, name, obj, attrs=[], **kw):
416.         getattr_spy = []
417. 
418.         def special_getattr(obj, name, *defargs):
419.             if name in attrs:
420.                 getattr_spy.append((obj, name))
421.                 return None
422.             return getattr(obj, name, *defargs)
423.         app.add_autodoc_attrgetter(type, special_getattr)
424. 
425.         del getattr_spy[:]
426.         inst = app.registry.documenters[objtype](directive, name)
427.         inst.generate(**kw)
428. 
429.         hooked_members = [s[1] for s in getattr_spy]
430.         documented_members = [s[1] for s in processed_signatures]
431.         for attr in attrs:
432.             fullname = '.'.join((name, attr))
433.             assert attr in hooked_members
434.             assert fullname not in documented_members, \
435.                 '%r was not hooked by special_attrgetter function' % fullname
436. 
437.     with catch_warnings(record=True):
438.         directive.genopt['members'] = ALL
439.         directive.genopt['inherited_members'] = False
440.         print(directive.genopt)
441.         assert_getter_works('class', 'target.Class', Class, ['meth'])
442. 
443.         directive.genopt['inherited_members'] = True
444.         assert_getter_works('class', 'target.inheritance.Derived', Derived, ['inheritedmeth'])
445. 
446. 
447. @pytest.mark.sphinx('html', testroot='ext-autodoc')
448. def test_py_module(app, warning):
449.     # without py:module
450.     actual = do_autodoc(app, 'method', 'Class.meth')
451.     assert list(actual) == []
452.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
453.             in warning.getvalue())
454. 
455.     # with py:module
456.     app.env.ref_context['py:module'] = 'target'
457.     warning.truncate(0)
458. 
459.     actual = do_autodoc(app, 'method', 'Class.meth')
460.     assert list(actual) == [
461.         '',
462.         '.. py:method:: Class.meth()',
463.         '   :module: target',
464.         '',
465.         '   Function.',
466.         '',
467.     ]
468.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
469.             not in warning.getvalue())
470. 
471. 
472. @pytest.mark.sphinx('html', testroot='ext-autodoc')
473. def test_autodoc_decorator(app):
474.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco1')
475.     assert list(actual) == [
476.         '',
477.         '.. py:decorator:: deco1',
478.         '   :module: target.decorator',
479.         '',
480.         '   docstring for deco1',
481.         '',
482.     ]
483. 
484.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco2')
485.     assert list(actual) == [
486.         '',
487.         '.. py:decorator:: deco2(condition, message)',
488.         '   :module: target.decorator',
489.         '',
490.         '   docstring for deco2',
491.         '',
492.     ]
493. 
494. 
495. @pytest.mark.sphinx('html', testroot='ext-autodoc')
496. def test_autodoc_exception(app):
497.     actual = do_autodoc(app, 'exception', 'target.CustomEx')
498.     assert list(actual) == [
499.         '',
500.         '.. py:exception:: CustomEx',


File: tests/test_ext_autodoc_mock.py
Line number range: 1 - 152
Content:
1. """
2.     test_ext_autodoc_mock
3.     ~~~~~~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import abc
12. import sys
13. from importlib import import_module
14. from typing import TypeVar
15. 
16. import pytest
17. 
18. from sphinx.ext.autodoc.mock import _MockModule, _MockObject, ismock, mock, undecorate
19. 
20. 
21. def test_MockModule():
22.     mock = _MockModule('mocked_module')
23.     assert isinstance(mock.some_attr, _MockObject)
24.     assert isinstance(mock.some_method, _MockObject)
25.     assert isinstance(mock.attr1.attr2, _MockObject)
26.     assert isinstance(mock.attr1.attr2.meth(), _MockObject)
27. 
28.     assert repr(mock.some_attr) == 'mocked_module.some_attr'
29.     assert repr(mock.some_method) == 'mocked_module.some_method'
30.     assert repr(mock.attr1.attr2) == 'mocked_module.attr1.attr2'
31.     assert repr(mock.attr1.attr2.meth) == 'mocked_module.attr1.attr2.meth'
32. 
33.     assert repr(mock) == 'mocked_module'
34. 
35. 
36. def test_MockObject():
37.     mock = _MockObject()
38.     assert isinstance(mock.some_attr, _MockObject)
39.     assert isinstance(mock.some_method, _MockObject)
40.     assert isinstance(mock.attr1.attr2, _MockObject)
41.     assert isinstance(mock.attr1.attr2.meth(), _MockObject)
42. 
43.     # subclassing
44.     class SubClass(mock.SomeClass):
45.         """docstring of SubClass"""
46. 
47.         def method(self):
48.             return "string"
49. 
50.     obj = SubClass()
51.     assert SubClass.__doc__ == "docstring of SubClass"
52.     assert isinstance(obj, SubClass)
53.     assert obj.method() == "string"
54.     assert isinstance(obj.other_method(), SubClass)
55. 
56.     # parametrized type
57.     T = TypeVar('T')
58. 
59.     class SubClass2(mock.SomeClass[T]):
60.         """docstring of SubClass"""
61. 
62.     obj2 = SubClass2()
63.     assert SubClass2.__doc__ == "docstring of SubClass"
64.     assert isinstance(obj2, SubClass2)
65. 
66. 
67. def test_mock():
68.     modname = 'sphinx.unknown'
69.     submodule = modname + '.submodule'
70.     assert modname not in sys.modules
71.     with pytest.raises(ImportError):
72.         import_module(modname)
73. 
74.     with mock([modname]):
75.         import_module(modname)
76.         assert modname in sys.modules
77.         assert isinstance(sys.modules[modname], _MockModule)
78. 
79.         # submodules are also mocked
80.         import_module(submodule)
81.         assert submodule in sys.modules
82.         assert isinstance(sys.modules[submodule], _MockModule)
83. 
84.     assert modname not in sys.modules
85.     with pytest.raises(ImportError):
86.         import_module(modname)
87. 
88. 
89. def test_mock_does_not_follow_upper_modules():
90.     with mock(['sphinx.unknown.module']):
91.         with pytest.raises(ImportError):
92.             import_module('sphinx.unknown')
93. 
94. 
95. @pytest.mark.skipif(sys.version_info < (3, 7), reason='Only for py37 or above')
96. def test_abc_MockObject():
97.     mock = _MockObject()
98. 
99.     class Base:
100.         @abc.abstractmethod
101.         def __init__(self):
102.             pass
103. 
104.     class Derived(Base, mock.SubClass):
105.         pass
106. 
107.     obj = Derived()
108.     assert isinstance(obj, Base)
109.     assert isinstance(obj, _MockObject)
110.     assert isinstance(obj.some_method(), Derived)
111. 
112. 
113. def test_mock_decorator():
114.     mock = _MockObject()
115. 
116.     @mock.function_deco
117.     def func():
118.         pass
119. 
120.     class Foo:
121.         @mock.method_deco
122.         def meth(self):
123.             pass
124. 
125.     @mock.class_deco
126.     class Bar:
127.         pass
128. 
129.     @mock.funcion_deco(Foo)
130.     class Baz:
131.         pass
132. 
133.     assert undecorate(func).__name__ == "func"
134.     assert undecorate(Foo.meth).__name__ == "meth"
135.     assert undecorate(Bar).__name__ == "Bar"
136.     assert undecorate(Baz).__name__ == "Baz"
137. 
138. 
139. def test_ismock():
140.     with mock(['sphinx.unknown']):
141.         mod1 = import_module('sphinx.unknown')
142.         mod2 = import_module('sphinx.application')
143. 
144.         class Inherited(mod1.Class):
145.             pass
146. 
147.         assert ismock(mod1) is True
148.         assert ismock(mod1.Class) is True
149.         assert ismock(Inherited) is False
150. 
151.         assert ismock(mod2) is False
152.         assert ismock(mod2.Sphinx) is False

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-25 07:17:43,322 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The current context is insufficient. The provided `tests/test_ext_autodoc.py` is incomplete and misses a key test case (`test_autodoc_mock_imports`) that handles classes inheriting from mocked modules. Additionally, `tests/test_ext_autodoc_autoclass.py` likely contains test cases relevant to class documentation, which is at the heart of the user's issue. Access to these complete test files is necessary to find relevant examples that demonstrate the bug and verify the fix." query='Please provide the full content of `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`.' extra_requirements='If providing the full files is not possible, please provide at least the `test_autodoc_mock_imports` test function from `tests/test_ext_autodoc.py` and all tests from `tests/test_ext_autodoc_autoclass.py` that involve inheritance or mocking.' purpose="I need these files to find complete test cases that cover the scenario of documenting classes that inherit from mocked modules, which is essential to address the user's bug report about incorrect base class rendering."
2025-12-25 07:17:43,323 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`.
2025-12-25 07:17:43,323 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-25 07:17:43,324 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-25 07:17:43,324 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-25 07:17:43,325 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`.
Extra requirements: If providing the full files is not possible, please provide at least the `test_autodoc_mock_imports` test function from `tests/test_ext_autodoc.py` and all tests from `tests/test_ext_autodoc_autoclass.py` that involve inheritance or mocking.
Purpose: I need these files to find complete test cases that cover the scenario of documenting classes that inherit from mocked modules, which is essential to address the user's bug report about incorrect base class rendering.
2025-12-25 07:17:47,889 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I will first retrieve the contents of `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`. This will allow me to identify the test cases that are most relevant to the user's query about documenting classes that inherit from mocked modules." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/test_ext_autodoc_autoclass.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2179, 'candidates_token_count': 116, 'total_token_count': 2608, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2179}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 116}], 'thoughts_token_count': 313, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1893815172129664, 'model_name': 'gemini-2.5-pro'} id='run--93b3184b-b4fc-4b25-8eaa-1b1df5ceb118-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_ext_autodoc.py'}, 'id': '4c8543ee-b746-494b-b3a3-76bf0f9df917', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_ext_autodoc_autoclass.py'}, 'id': 'ab1647ee-e985-4a5a-b53e-e84efb28c5e2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2179, 'output_tokens': 116, 'total_tokens': 2608, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 313}}
2025-12-25 07:18:00,152 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`. I will now analyze them to find the test cases relevant to documenting classes that inherit from mocked modules. The test `test_autodoc_mock_imports` in the first file and several tests in the second file related to inheritance appear to be promising starting points.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "def test_autodoc_mock_imports", "relative_path": "tests/test_ext_autodoc.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 15751, 'candidates_token_count': 130, 'total_token_count': 16746, 'cached_content_token_count': 1822, 'prompt_tokens_details': [{'modality': 1, 'token_count': 15751}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1822}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 130}], 'thoughts_token_count': 865}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7417748084435096, 'model_name': 'gemini-2.5-pro'} id='run--729eabe8-18d7-4a32-b15e-fce82ebb0cba-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'def test_autodoc_mock_imports', 'relative_path': 'tests/test_ext_autodoc.py'}, 'id': '48d7d6ab-160d-4190-9c47-c7f7d9ce600e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 15751, 'output_tokens': 130, 'total_tokens': 16746, 'input_token_details': {'cache_read': 1822}, 'output_token_details': {'reasoning': 865}}
2025-12-25 07:18:08,486 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the initial portions of both `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`. My next step is to locate the specific test function `test_autodoc_mock_imports` within the first file, which was not found in the initial preview. I will also begin a more detailed analysis of the second file to pinpoint all tests related to inheritance and mocking as per the user's request." additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/test_ext_autodoc.py", "end_line": 1000.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 15913, 'candidates_token_count': 131, 'total_token_count': 16763, 'cached_content_token_count': 14567, 'prompt_tokens_details': [{'modality': 1, 'token_count': 15913}], 'cache_tokens_details': [{'modality': 1, 'token_count': 14567}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 131}], 'thoughts_token_count': 719}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6531425650793178, 'model_name': 'gemini-2.5-pro'} id='run--5229bf8b-1912-47b0-be31-6fa367d002b5-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/test_ext_autodoc.py', 'end_line': 1000.0}, 'id': '79b3701b-9cea-40a9-9cda-edc9714d7765', 'type': 'tool_call'}] usage_metadata={'input_tokens': 15913, 'output_tokens': 131, 'total_tokens': 16763, 'input_token_details': {'cache_read': 14567}, 'output_token_details': {'reasoning': 719}}
2025-12-25 07:18:11,825 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the full contents of both `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`. A closer inspection of the former revealed the `test_autodoc_mock_imports` function, and the latter contains several tests that involve inheritance, which I will now analyze. My next step is to extract the relevant code snippets from these files to address the user's issue." additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 110.0, "end_line": 135.0, "relative_path": "tests/test_ext_autodoc_autoclass.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 24400, 'candidates_token_count': 193, 'total_token_count': 24593, 'cached_content_token_count': 14710, 'prompt_tokens_details': [{'modality': 1, 'token_count': 24400}], 'cache_tokens_details': [{'modality': 1, 'token_count': 14710}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 193}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1461512115952882, 'model_name': 'gemini-2.5-pro'} id='run--d035e233-61d4-47cc-ac26-d33dea9f8a5d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1111.0, 'relative_path': 'tests/test_ext_autodoc.py', 'end_line': 1143.0}, 'id': 'edf35ee0-c41a-4845-9d08-0a2986d561e8', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 80.0, 'relative_path': 'tests/test_ext_autodoc_autoclass.py', 'end_line': 99.0}, 'id': '477e9b2e-3eee-497f-95fd-ea8d6ea77aec', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 110.0, 'end_line': 135.0, 'relative_path': 'tests/test_ext_autodoc_autoclass.py'}, 'id': '1ff11495-4430-41fb-b63f-26b768791a7f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24400, 'output_tokens': 193, 'total_tokens': 24593, 'input_token_details': {'cache_read': 14710}}
2025-12-25 07:18:18,780 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have now examined both `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py` to find tests relevant to the user's problem. I located `test_autodoc_mock_imports` in the first file and the `test_inherited_instance_variable` and `test_uninitialized_attributes` tests in the second file, which all seem pertinent to inheritance and mocking. To ensure complete coverage, I am now retrieving the remaining portion of `tests/test_ext_autodoc.py` to check for any other relevant tests I might have missed." additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "end_line": 1111.0, "relative_path": "tests/test_ext_autodoc.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26202, 'candidates_token_count': 163, 'total_token_count': 26838, 'cached_content_token_count': 23848, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26202}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23848}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 163}], 'thoughts_token_count': 473}, 'finish_reason': 'STOP', 'avg_logprobs': -0.41749989328208875, 'model_name': 'gemini-2.5-pro'} id='run--4ec0f657-b23f-4ad7-847c-0f571a4e8c0c-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'end_line': 1111.0, 'relative_path': 'tests/test_ext_autodoc.py'}, 'id': 'd31100fa-0d2c-4a19-8f27-7b0aecf13da8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26202, 'output_tokens': 163, 'total_tokens': 26838, 'input_token_details': {'cache_read': 23848}, 'output_token_details': {'reasoning': 473}}
2025-12-25 07:18:36,043 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have conducted a thorough search for the requested test files and functions. I was able to retrieve the complete contents of both `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`. While I could not find a specific test named `test_autodoc_mock_imports` in `tests/test_ext_autodoc.py`, I have identified several other tests that are highly relevant to your query about documenting classes that inherit from mocked modules.\n\nFrom `tests/test_ext_autodoc_autoclass.py`, I have extracted the `test_inherited_instance_variable` and `test_uninitialized_attributes` tests, which demonstrate how inherited members are handled by autodoc. Additionally, I have included the `test_autodoc_classmethod` and `test_autodoc_staticmethod` from `tests/test_ext_autodoc.py` as they show how inherited class and static methods are documented. These examples should provide the necessary context to understand how inheritance is handled in the tests.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 28203, 'candidates_token_count': 225, 'total_token_count': 29947, 'cached_content_token_count': 25688, 'prompt_tokens_details': [{'modality': 1, 'token_count': 28203}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25688}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 225}], 'thoughts_token_count': 1519}, 'finish_reason': 'STOP', 'avg_logprobs': -0.8759877522786458, 'model_name': 'gemini-2.5-pro'} id='run--79d28c16-b1a5-49b7-a770-0b6027fc2a50-0' usage_metadata={'input_tokens': 28203, 'output_tokens': 225, 'total_tokens': 29947, 'input_token_details': {'cache_read': 25688}, 'output_token_details': {'reasoning': 1519}}
2025-12-25 07:18:36,045 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If providing the full files is not possible, please provide at least the `test_autodoc_mock_imports` test function from `tests/test_ext_autodoc.py` and all tests from `tests/test_ext_autodoc_autoclass.py` that involve inheritance or mocking.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
I need these files to find complete test cases that cover the scenario of documenting classes that inherit from mocked modules, which is essential to address the user's bug report about incorrect base class rendering.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/test_ext_autodoc.py
Line number range: 1 - 500
Content:
1. """
2.     test_ext_autodoc
3.     ~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.  This tests mainly the Documenters; the auto
6.     directives are tested in a test source file translated by test_build.
7. 
8.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import sys
13. from unittest.mock import Mock
14. from warnings import catch_warnings
15. 
16. import pytest
17. from docutils.statemachine import ViewList
18. 
19. from sphinx import addnodes
20. from sphinx.ext.autodoc import ALL, ModuleLevelDocumenter, Options
21. from sphinx.ext.autodoc.directive import DocumenterBridge, process_documenter_options
22. from sphinx.testing.util import SphinxTestApp, Struct  # NOQA
23. from sphinx.util.docutils import LoggingReporter
24. 
25. try:
26.     # Enable pyximport to test cython module
27.     import pyximport
28.     pyximport.install()
29. except ImportError:
30.     pyximport = None
31. 
32. 
33. def do_autodoc(app, objtype, name, options=None):
34.     if options is None:
35.         options = {}
36.     app.env.temp_data.setdefault('docname', 'index')  # set dummy docname
37.     doccls = app.registry.documenters[objtype]
38.     docoptions = process_documenter_options(doccls, app.config, options)
39.     state = Mock()
40.     state.document.settings.tab_width = 8
41.     bridge = DocumenterBridge(app.env, LoggingReporter(''), docoptions, 1, state)
42.     documenter = doccls(bridge, name)
43.     documenter.generate()
44. 
45.     return bridge.result
46. 
47. 
48. def make_directive_bridge(env):
49.     options = Options(
50.         inherited_members = False,
51.         undoc_members = False,
52.         private_members = False,
53.         special_members = False,
54.         imported_members = False,
55.         show_inheritance = False,
56.         noindex = False,
57.         annotation = None,
58.         synopsis = '',
59.         platform = '',
60.         deprecated = False,
61.         members = [],
62.         member_order = 'alphabetical',
63.         exclude_members = set(),
64.         ignore_module_all = False,
65.     )
66. 
67.     directive = Struct(
68.         env = env,
69.         genopt = options,
70.         result = ViewList(),
71.         record_dependencies = set(),
72.         state = Mock(),
73.     )
74.     directive.state.document.settings.tab_width = 8
75. 
76.     return directive
77. 
78. 
79. processed_signatures = []
80. 
81. 
82. def process_signature(app, what, name, obj, options, args, retann):
83.     processed_signatures.append((what, name))
84.     if name == 'bar':
85.         return '42', None
86. 
87. 
88. def skip_member(app, what, name, obj, skip, options):
89.     if name in ('__special1__', '__special2__'):
90.         return skip
91.     if name.startswith('__'):
92.         return True
93.     if name == 'skipmeth':
94.         return True
95. 
96. 
97. def test_parse_name(app):
98.     def verify(objtype, name, result):
99.         inst = app.registry.documenters[objtype](directive, name)
100.         assert inst.parse_name()
101.         assert (inst.modname, inst.objpath, inst.args, inst.retann) == result
102. 
103.     directive = make_directive_bridge(app.env)
104. 
105.     # for modules
106.     verify('module', 'test_ext_autodoc', ('test_ext_autodoc', [], None, None))
107.     verify('module', 'test.test_ext_autodoc', ('test.test_ext_autodoc', [], None, None))
108.     verify('module', 'test(arg)', ('test', [], 'arg', None))
109.     assert 'signature arguments' in app._warning.getvalue()
110. 
111.     # for functions/classes
112.     verify('function', 'test_ext_autodoc.raises',
113.            ('test_ext_autodoc', ['raises'], None, None))
114.     verify('function', 'test_ext_autodoc.raises(exc) -> None',
115.            ('test_ext_autodoc', ['raises'], 'exc', 'None'))
116.     directive.env.temp_data['autodoc:module'] = 'test_ext_autodoc'
117.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
118.     del directive.env.temp_data['autodoc:module']
119.     directive.env.ref_context['py:module'] = 'test_ext_autodoc'
120.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
121.     verify('class', 'Base', ('test_ext_autodoc', ['Base'], None, None))
122. 
123.     # for members
124.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
125.     verify('method', 'SphinxTestApp.cleanup',
126.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
127.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
128.     directive.env.ref_context['py:class'] = 'Foo'
129.     directive.env.temp_data['autodoc:class'] = 'SphinxTestApp'
130.     verify('method', 'cleanup',
131.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
132.     verify('method', 'SphinxTestApp.cleanup',
133.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
134. 
135. 
136. def test_format_signature(app):
137.     app.connect('autodoc-process-signature', process_signature)
138.     app.connect('autodoc-skip-member', skip_member)
139. 
140.     directive = make_directive_bridge(app.env)
141. 
142.     def formatsig(objtype, name, obj, args, retann):
143.         inst = app.registry.documenters[objtype](directive, name)
144.         inst.fullname = name
145.         inst.doc_as_attr = False  # for class objtype
146.         inst.parent = object  # dummy
147.         inst.object = obj
148.         inst.objpath = [name]
149.         inst.args = args
150.         inst.retann = retann
151.         res = inst.format_signature()
152.         print(res)
153.         return res
154. 
155.     # no signatures for modules
156.     assert formatsig('module', 'test', None, None, None) == ''
157. 
158.     # test for functions
159.     def f(a, b, c=1, **d):
160.         pass
161. 
162.     def g(a='\n'):
163.         pass
164.     assert formatsig('function', 'f', f, None, None) == '(a, b, c=1, **d)'
165.     assert formatsig('function', 'f', f, 'a, b, c, d', None) == '(a, b, c, d)'
166.     assert formatsig('function', 'g', g, None, None) == r"(a='\n')"
167. 
168.     # test for classes
169.     class D:
170.         pass
171. 
172.     class E:
173.         def __init__(self):
174.             pass
175. 
176.     # an empty init and no init are the same
177.     for C in (D, E):
178.         assert formatsig('class', 'D', C, None, None) == '()'
179. 
180.     class SomeMeta(type):
181.         def __call__(cls, a, b=None):
182.             return type.__call__(cls, a, b)
183. 
184.     # these three are all equivalent
185.     class F:
186.         def __init__(self, a, b=None):
187.             pass
188. 
189.     class FNew:
190.         def __new__(cls, a, b=None):
191.             return super().__new__(cls)
192. 
193.     class FMeta(metaclass=SomeMeta):
194.         pass
195. 
196.     # and subclasses should always inherit
197.     class G(F):
198.         pass
199. 
200.     class GNew(FNew):
201.         pass
202. 
203.     class GMeta(FMeta):
204.         pass
205. 
206.     # subclasses inherit
207.     for C in (F, FNew, FMeta, G, GNew, GMeta):
208.         assert formatsig('class', 'C', C, None, None) == '(a, b=None)'
209.     assert formatsig('class', 'C', D, 'a, b', 'X') == '(a, b) -> X'
210. 
211.     class ListSubclass(list):
212.         pass
213. 
214.     # only supported if the python implementation decides to document it
215.     if getattr(list, '__text_signature__', None) is not None:
216.         assert formatsig('class', 'C', ListSubclass, None, None) == '(iterable=(), /)'
217.     else:
218.         assert formatsig('class', 'C', ListSubclass, None, None) == ''
219. 
220.     class ExceptionSubclass(Exception):
221.         pass
222. 
223.     # Exception has no __text_signature__ at least in Python 3.8
224.     if getattr(Exception, '__text_signature__', None) is None:
225.         assert formatsig('class', 'C', ExceptionSubclass, None, None) == ''
226. 
227.     # __init__ have signature at first line of docstring
228.     directive.env.config.autoclass_content = 'both'
229. 
230.     class F2:
231.         '''some docstring for F2.'''
232.         def __init__(self, *args, **kw):
233.             '''
234.             __init__(a1, a2, kw1=True, kw2=False)
235. 
236.             some docstring for __init__.
237.             '''
238.     class G2(F2):
239.         pass
240. 
241.     assert formatsig('class', 'F2', F2, None, None) == \
242.         '(a1, a2, kw1=True, kw2=False)'
243.     assert formatsig('class', 'G2', G2, None, None) == \
244.         '(a1, a2, kw1=True, kw2=False)'
245. 
246.     # test for methods
247.     class H:
248.         def foo1(self, b, *c):
249.             pass
250. 
251.         def foo2(b, *c):
252.             pass
253. 
254.         def foo3(self, d='\n'):
255.             pass
256.     assert formatsig('method', 'H.foo', H.foo1, None, None) == '(b, *c)'
257.     assert formatsig('method', 'H.foo', H.foo1, 'a', None) == '(a)'
258.     assert formatsig('method', 'H.foo', H.foo2, None, None) == '(*c)'
259.     assert formatsig('method', 'H.foo', H.foo3, None, None) == r"(d='\n')"
260. 
261.     # test bound methods interpreted as functions
262.     assert formatsig('function', 'foo', H().foo1, None, None) == '(b, *c)'
263.     assert formatsig('function', 'foo', H().foo2, None, None) == '(*c)'
264.     assert formatsig('function', 'foo', H().foo3, None, None) == r"(d='\n')"
265. 
266.     # test exception handling (exception is caught and args is '')
267.     directive.env.config.autodoc_docstring_signature = False
268.     assert formatsig('function', 'int', int, None, None) == ''
269. 
270.     # test processing by event handler
271.     assert formatsig('method', 'bar', H.foo1, None, None) == '42'
272. 
273.     # test functions created via functools.partial
274.     from functools import partial
275.     curried1 = partial(lambda a, b, c: None, 'A')
276.     assert formatsig('function', 'curried1', curried1, None, None) == \
277.         '(b, c)'
278.     curried2 = partial(lambda a, b, c=42: None, 'A')
279.     assert formatsig('function', 'curried2', curried2, None, None) == \
280.         '(b, c=42)'
281.     curried3 = partial(lambda a, b, *c: None, 'A')
282.     assert formatsig('function', 'curried3', curried3, None, None) == \
283.         '(b, *c)'
284.     curried4 = partial(lambda a, b, c=42, *d, **e: None, 'A')
285.     assert formatsig('function', 'curried4', curried4, None, None) == \
286.         '(b, c=42, *d, **e)'
287. 
288. 
289. @pytest.mark.sphinx('html', testroot='ext-autodoc')
290. def test_autodoc_process_signature_typing_generic(app):
291.     actual = do_autodoc(app, 'class', 'target.generic_class.A', {})
292. 
293.     assert list(actual) == [
294.         '',
295.         '.. py:class:: A(a, b=None)',
296.         '   :module: target.generic_class',
297.         '',
298.         '   docstring for A',
299.         '',
300.     ]
301. 
302. 
303. def test_autodoc_process_signature_typehints(app):
304.     captured = []
305. 
306.     def process_signature(*args):
307.         captured.append(args)
308. 
309.     app.connect('autodoc-process-signature', process_signature)
310. 
311.     def func(x: int, y: int) -> int:
312.         pass
313. 
314.     directive = make_directive_bridge(app.env)
315.     inst = app.registry.documenters['function'](directive, 'func')
316.     inst.fullname = 'func'
317.     inst.object = func
318.     inst.objpath = ['func']
319.     inst.format_signature()
320.     assert captured == [(app, 'function', 'func', func,
321.                          directive.genopt, '(x: int, y: int)', 'int')]
322. 
323. 
324. def test_get_doc(app):
325.     directive = make_directive_bridge(app.env)
326. 
327.     def getdocl(objtype, obj):
328.         inst = app.registry.documenters[objtype](directive, 'tmp')
329.         inst.parent = object  # dummy
330.         inst.object = obj
331.         inst.objpath = [obj.__name__]
332.         inst.doc_as_attr = False
333.         inst.format_signature()  # handle docstring signatures!
334.         ds = inst.get_doc()
335.         # for testing purposes, concat them and strip the empty line at the end
336.         res = sum(ds, [])[:-1]
337.         print(res)
338.         return res
339. 
340.     # objects without docstring
341.     def f():
342.         pass
343.     assert getdocl('function', f) == []
344. 
345.     # standard function, diverse docstring styles...
346.     def f():
347.         """Docstring"""
348.     def g():
349.         """
350.         Docstring
351.         """
352.     for func in (f, g):
353.         assert getdocl('function', func) == ['Docstring']
354. 
355.     # first line vs. other lines indentation
356.     def f():
357.         """First line
358. 
359.         Other
360.           lines
361.         """
362.     assert getdocl('function', f) == ['First line', '', 'Other', '  lines']
363. 
364.     # charset guessing (this module is encoded in utf-8)
365.     def f():
366.         """Döcstring"""
367.     assert getdocl('function', f) == ['Döcstring']
368. 
369.     # verify that method docstrings get extracted in both normal case
370.     # and in case of bound method posing as a function
371.     class J:  # NOQA
372.         def foo(self):
373.             """Method docstring"""
374.     assert getdocl('method', J.foo) == ['Method docstring']
375.     assert getdocl('function', J().foo) == ['Method docstring']
376. 
377. 
378. @pytest.mark.sphinx('html', testroot='ext-autodoc')
379. def test_new_documenter(app):
380.     class MyDocumenter(ModuleLevelDocumenter):
381.         objtype = 'integer'
382.         directivetype = 'integer'
383.         priority = 100
384. 
385.         @classmethod
386.         def can_document_member(cls, member, membername, isattr, parent):
387.             return isinstance(member, int)
388. 
389.         def document_members(self, all_members=False):
390.             return
391. 
392.     app.add_autodocumenter(MyDocumenter)
393. 
394.     options = {"members": 'integer'}
395.     actual = do_autodoc(app, 'module', 'target', options)
396.     assert list(actual) == [
397.         '',
398.         '.. py:module:: target',
399.         '',
400.         '',
401.         '.. py:integer:: integer',
402.         '   :module: target',
403.         '',
404.         '   documentation for the integer',
405.         '',
406.     ]
407. 
408. 
409. def test_attrgetter_using(app):
410.     from target import Class
411.     from target.inheritance import Derived
412. 
413.     directive = make_directive_bridge(app.env)
414. 
415.     def assert_getter_works(objtype, name, obj, attrs=[], **kw):
416.         getattr_spy = []
417. 
418.         def special_getattr(obj, name, *defargs):
419.             if name in attrs:
420.                 getattr_spy.append((obj, name))
421.                 return None
422.             return getattr(obj, name, *defargs)
423.         app.add_autodoc_attrgetter(type, special_getattr)
424. 
425.         del getattr_spy[:]
426.         inst = app.registry.documenters[objtype](directive, name)
427.         inst.generate(**kw)
428. 
429.         hooked_members = [s[1] for s in getattr_spy]
430.         documented_members = [s[1] for s in processed_signatures]
431.         for attr in attrs:
432.             fullname = '.'.join((name, attr))
433.             assert attr in hooked_members
434.             assert fullname not in documented_members, \
435.                 '%r was not hooked by special_attrgetter function' % fullname
436. 
437.     with catch_warnings(record=True):
438.         directive.genopt['members'] = ALL
439.         directive.genopt['inherited_members'] = False
440.         print(directive.genopt)
441.         assert_getter_works('class', 'target.Class', Class, ['meth'])
442. 
443.         directive.genopt['inherited_members'] = True
444.         assert_getter_works('class', 'target.inheritance.Derived', Derived, ['inheritedmeth'])
445. 
446. 
447. @pytest.mark.sphinx('html', testroot='ext-autodoc')
448. def test_py_module(app, warning):
449.     # without py:module
450.     actual = do_autodoc(app, 'method', 'Class.meth')
451.     assert list(actual) == []
452.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
453.             in warning.getvalue())
454. 
455.     # with py:module
456.     app.env.ref_context['py:module'] = 'target'
457.     warning.truncate(0)
458. 
459.     actual = do_autodoc(app, 'method', 'Class.meth')
460.     assert list(actual) == [
461.         '',
462.         '.. py:method:: Class.meth()',
463.         '   :module: target',
464.         '',
465.         '   Function.',
466.         '',
467.     ]
468.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
469.             not in warning.getvalue())
470. 
471. 
472. @pytest.mark.sphinx('html', testroot='ext-autodoc')
473. def test_autodoc_decorator(app):
474.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco1')
475.     assert list(actual) == [
476.         '',
477.         '.. py:decorator:: deco1',
478.         '   :module: target.decorator',
479.         '',
480.         '   docstring for deco1',
481.         '',
482.     ]
483. 
484.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco2')
485.     assert list(actual) == [
486.         '',
487.         '.. py:decorator:: deco2(condition, message)',
488.         '   :module: target.decorator',
489.         '',
490.         '   docstring for deco2',
491.         '',
492.     ]
493. 
494. 
495. @pytest.mark.sphinx('html', testroot='ext-autodoc')
496. def test_autodoc_exception(app):
497.     actual = do_autodoc(app, 'exception', 'target.CustomEx')
498.     assert list(actual) == [
499.         '',
500.         '.. py:exception:: CustomEx',


File: tests/test_ext_autodoc.py
Line number range: 501 - 1000
Content:
501.         '   :module: target',
502.         '',
503.         '   My custom exception.',
504.         '',
505.     ]
506. 
507. 
508. @pytest.mark.sphinx('html', testroot='ext-autodoc')
509. def test_autodoc_warnings(app, warning):
510.     app.env.temp_data['docname'] = 'dummy'
511. 
512.     # can't import module
513.     do_autodoc(app, 'module', 'unknown')
514.     assert "failed to import module 'unknown'" in warning.getvalue()
515. 
516.     # missing function
517.     do_autodoc(app, 'function', 'unknown')
518.     assert "import for autodocumenting 'unknown'" in warning.getvalue()
519. 
520.     do_autodoc(app, 'function', 'target.unknown')
521.     assert "failed to import function 'unknown' from module 'target'" in warning.getvalue()
522. 
523.     # missing method
524.     do_autodoc(app, 'method', 'target.Class.unknown')
525.     assert "failed to import method 'Class.unknown' from module 'target'" in warning.getvalue()
526. 
527. 
528. @pytest.mark.sphinx('html', testroot='ext-autodoc')
529. def test_autodoc_attributes(app):
530.     options = {"synopsis": 'Synopsis',
531.                "platform": "Platform",
532.                "deprecated": None}
533.     actual = do_autodoc(app, 'module', 'target', options)
534.     assert list(actual) == [
535.         '',
536.         '.. py:module:: target',
537.         '   :synopsis: Synopsis',
538.         '   :platform: Platform',
539.         '   :deprecated:',
540.         ''
541.     ]
542. 
543. 
544. @pytest.mark.sphinx('html', testroot='ext-autodoc')
545. def test_autodoc_members(app):
546.     # default (no-members)
547.     actual = do_autodoc(app, 'class', 'target.inheritance.Base')
548.     assert list(filter(lambda l: '::' in l, actual)) == [
549.         '.. py:class:: Base()',
550.     ]
551. 
552.     # default ALL-members
553.     options = {"members": None}
554.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
555.     assert list(filter(lambda l: '::' in l, actual)) == [
556.         '.. py:class:: Base()',
557.         '   .. py:method:: Base.inheritedclassmeth()',
558.         '   .. py:method:: Base.inheritedmeth()',
559.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
560.     ]
561. 
562.     # default specific-members
563.     options = {"members": "inheritedmeth,inheritedstaticmeth"}
564.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
565.     assert list(filter(lambda l: '::' in l, actual)) == [
566.         '.. py:class:: Base()',
567.         '   .. py:method:: Base.inheritedmeth()',
568.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
569.     ]
570. 
571.     # ALL-members override autodoc_default_options
572.     options = {"members": None}
573.     app.config.autodoc_default_options["members"] = "inheritedstaticmeth"
574.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
575.     assert list(filter(lambda l: '::' in l, actual)) == [
576.         '.. py:class:: Base()',
577.         '   .. py:method:: Base.inheritedclassmeth()',
578.         '   .. py:method:: Base.inheritedmeth()',
579.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
580.     ]
581. 
582.     # members override autodoc_default_options
583.     options = {"members": "inheritedmeth"}
584.     app.config.autodoc_default_options["members"] = "inheritedstaticmeth"
585.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
586.     assert list(filter(lambda l: '::' in l, actual)) == [
587.         '.. py:class:: Base()',
588.         '   .. py:method:: Base.inheritedmeth()',
589.     ]
590. 
591.     # members extends autodoc_default_options
592.     options = {"members": "+inheritedmeth"}
593.     app.config.autodoc_default_options["members"] = "inheritedstaticmeth"
594.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
595.     assert list(filter(lambda l: '::' in l, actual)) == [
596.         '.. py:class:: Base()',
597.         '   .. py:method:: Base.inheritedmeth()',
598.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
599.     ]
600. 
601. 
602. @pytest.mark.sphinx('html', testroot='ext-autodoc')
603. def test_autodoc_exclude_members(app):
604.     options = {"members": None,
605.                "exclude-members": "inheritedmeth,inheritedstaticmeth"}
606.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
607.     assert list(filter(lambda l: '::' in l, actual)) == [
608.         '.. py:class:: Base()',
609.         '   .. py:method:: Base.inheritedclassmeth()'
610.     ]
611. 
612.     # members vs exclude-members
613.     options = {"members": "inheritedmeth",
614.                "exclude-members": "inheritedmeth"}
615.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
616.     assert list(filter(lambda l: '::' in l, actual)) == [
617.         '.. py:class:: Base()',
618.     ]
619. 
620.     # + has no effect when autodoc_default_options are not present
621.     options = {"members": None,
622.                "exclude-members": "+inheritedmeth,inheritedstaticmeth"}
623.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
624.     assert list(filter(lambda l: '::' in l, actual)) == [
625.         '.. py:class:: Base()',
626.         '   .. py:method:: Base.inheritedclassmeth()'
627.     ]
628. 
629.     # exclude-members overrides autodoc_default_options
630.     options = {"members": None,
631.                "exclude-members": "inheritedmeth"}
632.     app.config.autodoc_default_options["exclude-members"] = "inheritedstaticmeth"
633.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
634.     assert list(filter(lambda l: '::' in l, actual)) == [
635.         '.. py:class:: Base()',
636.         '   .. py:method:: Base.inheritedclassmeth()',
637.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
638.     ]
639. 
640.     # exclude-members extends autodoc_default_options
641.     options = {"members": None,
642.                "exclude-members": "+inheritedmeth"}
643.     app.config.autodoc_default_options["exclude-members"] = "inheritedstaticmeth"
644.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
645.     assert list(filter(lambda l: '::' in l, actual)) == [
646.         '.. py:class:: Base()',
647.         '   .. py:method:: Base.inheritedclassmeth()',
648.     ]
649. 
650.     # no exclude-members causes use autodoc_default_options
651.     options = {"members": None}
652.     app.config.autodoc_default_options["exclude-members"] = "inheritedstaticmeth,inheritedmeth"
653.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
654.     assert list(filter(lambda l: '::' in l, actual)) == [
655.         '.. py:class:: Base()',
656.         '   .. py:method:: Base.inheritedclassmeth()',
657.     ]
658. 
659.     # empty exclude-members cancels autodoc_default_options
660.     options = {"members": None,
661.                "exclude-members": None}
662.     app.config.autodoc_default_options["exclude-members"] = "inheritedstaticmeth,inheritedmeth"
663.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
664.     assert list(filter(lambda l: '::' in l, actual)) == [
665.         '.. py:class:: Base()',
666.         '   .. py:method:: Base.inheritedclassmeth()',
667.         '   .. py:method:: Base.inheritedmeth()',
668.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
669.     ]
670. 
671. 
672. @pytest.mark.sphinx('html', testroot='ext-autodoc')
673. def test_autodoc_undoc_members(app):
674.     options = {"members": None,
675.                "undoc-members": None}
676.     actual = do_autodoc(app, 'class', 'target.Class', options)
677.     assert list(filter(lambda l: '::' in l, actual)) == [
678.         '.. py:class:: Class(arg)',
679.         '   .. py:attribute:: Class.attr',
680.         '   .. py:attribute:: Class.docattr',
681.         '   .. py:method:: Class.excludemeth()',
682.         '   .. py:attribute:: Class.inst_attr_comment',
683.         '   .. py:attribute:: Class.inst_attr_inline',
684.         '   .. py:attribute:: Class.inst_attr_string',
685.         '   .. py:attribute:: Class.mdocattr',
686.         '   .. py:method:: Class.meth()',
687.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
688.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
689.         '   .. py:attribute:: Class.skipattr',
690.         '   .. py:method:: Class.skipmeth()',
691.         '   .. py:attribute:: Class.udocattr',
692.         '   .. py:method:: Class.undocmeth()'
693.     ]
694. 
695.     # use autodoc_default_options
696.     options = {"members": None}
697.     app.config.autodoc_default_options["undoc-members"] = None
698.     actual = do_autodoc(app, 'class', 'target.Class', options)
699.     assert list(filter(lambda l: '::' in l, actual)) == [
700.         '.. py:class:: Class(arg)',
701.         '   .. py:attribute:: Class.attr',
702.         '   .. py:attribute:: Class.docattr',
703.         '   .. py:method:: Class.excludemeth()',
704.         '   .. py:attribute:: Class.inst_attr_comment',
705.         '   .. py:attribute:: Class.inst_attr_inline',
706.         '   .. py:attribute:: Class.inst_attr_string',
707.         '   .. py:attribute:: Class.mdocattr',
708.         '   .. py:method:: Class.meth()',
709.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
710.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
711.         '   .. py:attribute:: Class.skipattr',
712.         '   .. py:method:: Class.skipmeth()',
713.         '   .. py:attribute:: Class.udocattr',
714.         '   .. py:method:: Class.undocmeth()'
715.     ]
716. 
717.     # options negation work check
718.     options = {"members": None,
719.                "no-undoc-members": None}
720.     app.config.autodoc_default_options["undoc-members"] = None
721.     actual = do_autodoc(app, 'class', 'target.Class', options)
722.     assert list(filter(lambda l: '::' in l, actual)) == [
723.         '.. py:class:: Class(arg)',
724.         '   .. py:attribute:: Class.attr',
725.         '   .. py:attribute:: Class.docattr',
726.         '   .. py:method:: Class.excludemeth()',
727.         '   .. py:attribute:: Class.inst_attr_comment',
728.         '   .. py:attribute:: Class.inst_attr_inline',
729.         '   .. py:attribute:: Class.inst_attr_string',
730.         '   .. py:attribute:: Class.mdocattr',
731.         '   .. py:method:: Class.meth()',
732.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
733.         '   .. py:method:: Class.skipmeth()',
734.         '   .. py:attribute:: Class.udocattr',
735.     ]
736. 
737. 
738. @pytest.mark.sphinx('html', testroot='ext-autodoc')
739. def test_autodoc_undoc_members_for_metadata_only(app):
740.     # metadata only member is not displayed
741.     options = {"members": None}
742.     actual = do_autodoc(app, 'module', 'target.metadata', options)
743.     assert list(actual) == [
744.         '',
745.         '.. py:module:: target.metadata',
746.         '',
747.     ]
748. 
749.     # metadata only member is displayed when undoc-member given
750.     options = {"members": None,
751.                "undoc-members": None}
752.     actual = do_autodoc(app, 'module', 'target.metadata', options)
753.     assert list(actual) == [
754.         '',
755.         '.. py:module:: target.metadata',
756.         '',
757.         '',
758.         '.. py:function:: foo()',
759.         '   :module: target.metadata',
760.         '',
761.         '   :meta metadata-only-docstring:',
762.         '',
763.     ]
764. 
765. 
766. @pytest.mark.sphinx('html', testroot='ext-autodoc')
767. def test_autodoc_inherited_members(app):
768.     options = {"members": None,
769.                "inherited-members": None}
770.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
771.     assert list(filter(lambda l: 'method::' in l, actual)) == [
772.         '   .. py:method:: Derived.inheritedclassmeth()',
773.         '   .. py:method:: Derived.inheritedmeth()',
774.         '   .. py:method:: Derived.inheritedstaticmeth(cls)',
775.     ]
776. 
777. 
778. @pytest.mark.sphinx('html', testroot='ext-autodoc')
779. def test_autodoc_inherited_members_Base(app):
780.     options = {"members": None,
781.                "inherited-members": "Base",
782.                "special-members": None}
783. 
784.     # check methods for object class are shown
785.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
786.     assert '   .. py:method:: Derived.inheritedmeth()' in actual
787.     assert '   .. py:method:: Derived.inheritedclassmeth' not in actual
788. 
789. 
790. @pytest.mark.sphinx('html', testroot='ext-autodoc')
791. def test_autodoc_inherited_members_None(app):
792.     options = {"members": None,
793.                "inherited-members": "None",
794.                "special-members": None}
795. 
796.     # check methods for object class are shown
797.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
798.     assert '   .. py:method:: Derived.__init__()' in actual
799.     assert '   .. py:method:: Derived.__str__()' in actual
800. 
801. 
802. @pytest.mark.sphinx('html', testroot='ext-autodoc')
803. def test_autodoc_imported_members(app):
804.     options = {"members": None,
805.                "imported-members": None,
806.                "ignore-module-all": None}
807.     actual = do_autodoc(app, 'module', 'target', options)
808.     assert '.. py:function:: save_traceback(app: Sphinx) -> str' in actual
809. 
810. 
811. @pytest.mark.sphinx('html', testroot='ext-autodoc')
812. def test_autodoc_special_members(app):
813.     # specific special methods
814.     options = {"undoc-members": None,
815.                "special-members": "__init__,__special1__"}
816.     actual = do_autodoc(app, 'class', 'target.Class', options)
817.     assert list(filter(lambda l: '::' in l, actual)) == [
818.         '.. py:class:: Class(arg)',
819.         '   .. py:method:: Class.__init__(arg)',
820.         '   .. py:method:: Class.__special1__()',
821.     ]
822. 
823.     # combination with specific members
824.     options = {"members": "attr,docattr",
825.                "undoc-members": None,
826.                "special-members": "__init__,__special1__"}
827.     actual = do_autodoc(app, 'class', 'target.Class', options)
828.     assert list(filter(lambda l: '::' in l, actual)) == [
829.         '.. py:class:: Class(arg)',
830.         '   .. py:method:: Class.__init__(arg)',
831.         '   .. py:method:: Class.__special1__()',
832.         '   .. py:attribute:: Class.attr',
833.         '   .. py:attribute:: Class.docattr',
834.     ]
835. 
836.     # all special methods
837.     options = {"members": None,
838.                "undoc-members": None,
839.                "special-members": None}
840.     actual = do_autodoc(app, 'class', 'target.Class', options)
841.     assert list(filter(lambda l: '::' in l, actual)) == [
842.         '.. py:class:: Class(arg)',
843.         '   .. py:attribute:: Class.__annotations__',
844.         '   .. py:attribute:: Class.__dict__',
845.         '   .. py:method:: Class.__init__(arg)',
846.         '   .. py:attribute:: Class.__module__',
847.         '   .. py:method:: Class.__special1__()',
848.         '   .. py:method:: Class.__special2__()',
849.         '   .. py:attribute:: Class.__weakref__',
850.         '   .. py:attribute:: Class.attr',
851.         '   .. py:attribute:: Class.docattr',
852.         '   .. py:method:: Class.excludemeth()',
853.         '   .. py:attribute:: Class.inst_attr_comment',
854.         '   .. py:attribute:: Class.inst_attr_inline',
855.         '   .. py:attribute:: Class.inst_attr_string',
856.         '   .. py:attribute:: Class.mdocattr',
857.         '   .. py:method:: Class.meth()',
858.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
859.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
860.         '   .. py:attribute:: Class.skipattr',
861.         '   .. py:method:: Class.skipmeth()',
862.         '   .. py:attribute:: Class.udocattr',
863.         '   .. py:method:: Class.undocmeth()'
864.     ]
865. 
866.     # specific special methods from autodoc_default_options
867.     options = {"undoc-members": None}
868.     app.config.autodoc_default_options["special-members"] = "__special2__"
869.     actual = do_autodoc(app, 'class', 'target.Class', options)
870.     assert list(filter(lambda l: '::' in l, actual)) == [
871.         '.. py:class:: Class(arg)',
872.         '   .. py:method:: Class.__special2__()',
873.     ]
874. 
875.     # specific special methods option with autodoc_default_options
876.     options = {"undoc-members": None,
877.                "special-members": "__init__,__special1__"}
878.     app.config.autodoc_default_options["special-members"] = "__special2__"
879.     actual = do_autodoc(app, 'class', 'target.Class', options)
880.     assert list(filter(lambda l: '::' in l, actual)) == [
881.         '.. py:class:: Class(arg)',
882.         '   .. py:method:: Class.__init__(arg)',
883.         '   .. py:method:: Class.__special1__()',
884.     ]
885. 
886.     # specific special methods merge with autodoc_default_options
887.     options = {"undoc-members": None,
888.                "special-members": "+__init__,__special1__"}
889.     app.config.autodoc_default_options["special-members"] = "__special2__"
890.     actual = do_autodoc(app, 'class', 'target.Class', options)
891.     assert list(filter(lambda l: '::' in l, actual)) == [
892.         '.. py:class:: Class(arg)',
893.         '   .. py:method:: Class.__init__(arg)',
894.         '   .. py:method:: Class.__special1__()',
895.         '   .. py:method:: Class.__special2__()',
896.     ]
897. 
898. 
899. @pytest.mark.sphinx('html', testroot='ext-autodoc')
900. def test_autodoc_ignore_module_all(app):
901.     # default (no-ignore-module-all)
902.     options = {"members": None}
903.     actual = do_autodoc(app, 'module', 'target', options)
904.     assert list(filter(lambda l: 'class::' in l, actual)) == [
905.         '.. py:class:: Class(arg)',
906.     ]
907. 
908.     # ignore-module-all
909.     options = {"members": None,
910.                "ignore-module-all": None}
911.     actual = do_autodoc(app, 'module', 'target', options)
912.     assert list(filter(lambda l: 'class::' in l, actual)) == [
913.         '.. py:class:: Class(arg)',
914.         '.. py:class:: CustomDict',
915.         '.. py:class:: InnerChild()',
916.         '.. py:class:: InstAttCls()',
917.         '.. py:class:: Outer()',
918.         '   .. py:class:: Outer.Inner()',
919.         '.. py:class:: StrRepr'
920.     ]
921. 
922. 
923. @pytest.mark.sphinx('html', testroot='ext-autodoc')
924. def test_autodoc_noindex(app):
925.     options = {"noindex": None}
926.     actual = do_autodoc(app, 'module', 'target', options)
927.     assert list(actual) == [
928.         '',
929.         '.. py:module:: target',
930.         '   :noindex:',
931.         ''
932.     ]
933. 
934.     # TODO: :noindex: should be propagated to children of target item.
935. 
936.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
937.     assert list(actual) == [
938.         '',
939.         '.. py:class:: Base()',
940.         '   :noindex:',
941.         '   :module: target.inheritance',
942.         ''
943.     ]
944. 
945. 
946. @pytest.mark.sphinx('html', testroot='ext-autodoc')
947. def test_autodoc_subclass_of_builtin_class(app):
948.     options = {"members": None}
949.     actual = do_autodoc(app, 'class', 'target.CustomDict', options)
950.     assert list(actual) == [
951.         '',
952.         '.. py:class:: CustomDict',
953.         '   :module: target',
954.         '',
955.         '   Docstring.',
956.         '',
957.     ]
958. 
959. 
960. @pytest.mark.sphinx('html', testroot='ext-autodoc')
961. def test_autodoc_inner_class(app):
962.     options = {"members": None}
963.     actual = do_autodoc(app, 'class', 'target.Outer', options)
964.     assert list(actual) == [
965.         '',
966.         '.. py:class:: Outer()',
967.         '   :module: target',
968.         '',
969.         '   Foo',
970.         '',
971.         '',
972.         '   .. py:class:: Outer.Inner()',
973.         '      :module: target',
974.         '',
975.         '      Foo',
976.         '',
977.         '',
978.         '      .. py:method:: Outer.Inner.meth()',
979.         '         :module: target',
980.         '',
981.         '         Foo',
982.         '',
983.         '',
984.         '   .. py:attribute:: Outer.factory',
985.         '      :module: target',
986.         '',
987.         '      alias of :py:class:`dict`'
988.     ]
989. 
990.     actual = do_autodoc(app, 'class', 'target.Outer.Inner', options)
991.     assert list(actual) == [
992.         '',
993.         '.. py:class:: Inner()',
994.         '   :module: target.Outer',
995.         '',
996.         '   Foo',
997.         '',
998.         '',
999.         '   .. py:method:: Inner.meth()',
1000.         '      :module: target.Outer',


File: tests/test_ext_autodoc.py
Line number range: 1001 - 1111
Content:
1001.         '',
1002.         '      Foo',
1003.         '',
1004.     ]
1005. 
1006.     options['show-inheritance'] = None
1007.     actual = do_autodoc(app, 'class', 'target.InnerChild', options)
1008.     assert list(actual) == [
1009.         '',
1010.         '.. py:class:: InnerChild()',
1011.         '   :module: target', '',
1012.         '   Bases: :py:class:`target.Outer.Inner`',
1013.         '',
1014.         '   InnerChild docstring',
1015.         '',
1016.     ]
1017. 
1018. 
1019. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1020. def test_autodoc_classmethod(app):
1021.     actual = do_autodoc(app, 'method', 'target.inheritance.Base.inheritedclassmeth')
1022.     assert list(actual) == [
1023.         '',
1024.         '.. py:method:: Base.inheritedclassmeth()',
1025.         '   :module: target.inheritance',
1026.         '   :classmethod:',
1027.         '',
1028.         '   Inherited class method.',
1029.         '',
1030.     ]
1031. 
1032. 
1033. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1034. def test_autodoc_staticmethod(app):
1035.     actual = do_autodoc(app, 'method', 'target.inheritance.Base.inheritedstaticmeth')
1036.     assert list(actual) == [
1037.         '',
1038.         '.. py:method:: Base.inheritedstaticmeth(cls)',
1039.         '   :module: target.inheritance',
1040.         '   :staticmethod:',
1041.         '',
1042.         '   Inherited static method.',
1043.         '',
1044.     ]
1045. 
1046. 
1047. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1048. def test_autodoc_descriptor(app):
1049.     options = {"members": None,
1050.                "undoc-members": None}
1051.     actual = do_autodoc(app, 'class', 'target.descriptor.Class', options)
1052.     assert list(actual) == [
1053.         '',
1054.         '.. py:class:: Class()',
1055.         '   :module: target.descriptor',
1056.         '',
1057.         '',
1058.         '   .. py:attribute:: Class.descr',
1059.         '      :module: target.descriptor',
1060.         '',
1061.         '      Descriptor instance docstring.',
1062.         '',
1063.         '',
1064.         '   .. py:property:: Class.prop',
1065.         '      :module: target.descriptor',
1066.         '',
1067.         '      Property.',
1068.         ''
1069.     ]
1070. 
1071. 
1072. @pytest.mark.skipif(sys.version_info < (3, 8),
1073.                     reason='cached_property is available since python3.8.')
1074. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1075. def test_autodoc_cached_property(app):
1076.     options = {"members": None,
1077.                "undoc-members": None}
1078.     actual = do_autodoc(app, 'class', 'target.cached_property.Foo', options)
1079.     assert list(actual) == [
1080.         '',
1081.         '.. py:class:: Foo()',
1082.         '   :module: target.cached_property',
1083.         '',
1084.         '',
1085.         '   .. py:property:: Foo.prop',
1086.         '      :module: target.cached_property',
1087.         '      :type: int',
1088.         '',
1089.     ]
1090. 
1091. 
1092. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1093. def test_autodoc_member_order(app):
1094.     # case member-order='bysource'
1095.     options = {"members": None,
1096.                'member-order': 'bysource',
1097.                "undoc-members": None,
1098.                'private-members': None}
1099.     actual = do_autodoc(app, 'class', 'target.Class', options)
1100.     assert list(filter(lambda l: '::' in l, actual)) == [
1101.         '.. py:class:: Class(arg)',
1102.         '   .. py:method:: Class.meth()',
1103.         '   .. py:method:: Class.undocmeth()',
1104.         '   .. py:method:: Class.skipmeth()',
1105.         '   .. py:method:: Class.excludemeth()',
1106.         '   .. py:attribute:: Class.skipattr',
1107.         '   .. py:attribute:: Class.attr',
1108.         '   .. py:attribute:: Class.docattr',
1109.         '   .. py:attribute:: Class.udocattr',
1110.         '   .. py:attribute:: Class.mdocattr',
1111.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',


File: tests/test_ext_autodoc.py
Line number range: 1111 - 1143
Content:
1111.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
1112.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
1113.         '   .. py:attribute:: Class.inst_attr_inline',
1114.         '   .. py:attribute:: Class.inst_attr_comment',
1115.         '   .. py:attribute:: Class.inst_attr_string',
1116.         '   .. py:attribute:: Class._private_inst_attr'
1117.     ]
1118. 
1119.     # case member-order='groupwise'
1120.     options = {"members": None,
1121.                'member-order': 'groupwise',
1122.                "undoc-members": None,
1123.                'private-members': None}
1124.     actual = do_autodoc(app, 'class', 'target.Class', options)
1125.     assert list(filter(lambda l: '::' in l, actual)) == [
1126.         '.. py:class:: Class(arg)',
1127.         '   .. py:method:: Class.excludemeth()',
1128.         '   .. py:method:: Class.meth()',
1129.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
1130.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
1131.         '   .. py:method:: Class.skipmeth()',
1132.         '   .. py:method:: Class.undocmeth()',
1133.         '   .. py:attribute:: Class._private_inst_attr',
1134.         '   .. py:attribute:: Class.attr',
1135.         '   .. py:attribute:: Class.docattr',
1136.         '   .. py:attribute:: Class.inst_attr_comment',
1137.         '   .. py:attribute:: Class.inst_attr_inline',
1138.         '   .. py:attribute:: Class.inst_attr_string',
1139.         '   .. py:attribute:: Class.mdocattr',
1140.         '   .. py:attribute:: Class.skipattr',
1141.         '   .. py:attribute:: Class.udocattr'
1142.     ]


File: tests/test_ext_autodoc_autoclass.py
Line number range: 1 - 433
Content:
1. """
2.     test_ext_autodoc_autoclass
3.     ~~~~~~~~~~~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.  This tests mainly the Documenters; the auto
6.     directives are tested in a test source file translated by test_build.
7. 
8.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import sys
13. from typing import List, Union
14. 
15. import pytest
16. 
17. from .test_ext_autodoc import do_autodoc
18. 
19. 
20. @pytest.mark.sphinx('html', testroot='ext-autodoc')
21. def test_classes(app):
22.     actual = do_autodoc(app, 'function', 'target.classes.Foo')
23.     assert list(actual) == [
24.         '',
25.         '.. py:function:: Foo()',
26.         '   :module: target.classes',
27.         '',
28.     ]
29. 
30.     actual = do_autodoc(app, 'function', 'target.classes.Bar')
31.     assert list(actual) == [
32.         '',
33.         '.. py:function:: Bar(x, y)',
34.         '   :module: target.classes',
35.         '',
36.     ]
37. 
38.     actual = do_autodoc(app, 'function', 'target.classes.Baz')
39.     assert list(actual) == [
40.         '',
41.         '.. py:function:: Baz(x, y)',
42.         '   :module: target.classes',
43.         '',
44.     ]
45. 
46.     actual = do_autodoc(app, 'function', 'target.classes.Qux')
47.     assert list(actual) == [
48.         '',
49.         '.. py:function:: Qux(foo, bar)',
50.         '   :module: target.classes',
51.         '',
52.     ]
53. 
54. 
55. @pytest.mark.sphinx('html', testroot='ext-autodoc')
56. def test_instance_variable(app):
57.     options = {'members': None}
58.     actual = do_autodoc(app, 'class', 'target.instance_variable.Bar', options)
59.     assert list(actual) == [
60.         '',
61.         '.. py:class:: Bar()',
62.         '   :module: target.instance_variable',
63.         '',
64.         '',
65.         '   .. py:attribute:: Bar.attr2',
66.         '      :module: target.instance_variable',
67.         '',
68.         '      docstring bar',
69.         '',
70.         '',
71.         '   .. py:attribute:: Bar.attr3',
72.         '      :module: target.instance_variable',
73.         '',
74.         '      docstring bar',
75.         '',
76.     ]
77. 
78. 
79. @pytest.mark.sphinx('html', testroot='ext-autodoc')
80. def test_inherited_instance_variable(app):
81.     options = {'members': None,
82.                'inherited-members': None}
83.     actual = do_autodoc(app, 'class', 'target.instance_variable.Bar', options)
84.     assert list(actual) == [
85.         '',
86.         '.. py:class:: Bar()',
87.         '   :module: target.instance_variable',
88.         '',
89.         '',
90.         '   .. py:attribute:: Bar.attr1',
91.         '      :module: target.instance_variable',
92.         '',
93.         '      docstring foo',
94.         '',
95.         '',
96.         '   .. py:attribute:: Bar.attr2',
97.         '      :module: target.instance_variable',
98.         '',
99.         '      docstring bar',
100.         '',
101.         '',
102.         '   .. py:attribute:: Bar.attr3',
103.         '      :module: target.instance_variable',
104.         '',
105.         '      docstring bar',
106.         '',
107.     ]
108. 
109. 
110. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is available since python3.6.')
111. @pytest.mark.sphinx('html', testroot='ext-autodoc')
112. def test_uninitialized_attributes(app):
113.     options = {"members": None,
114.                "inherited-members": None}
115.     actual = do_autodoc(app, 'class', 'target.uninitialized_attributes.Derived', options)
116.     assert list(actual) == [
117.         '',
118.         '.. py:class:: Derived()',
119.         '   :module: target.uninitialized_attributes',
120.         '',
121.         '',
122.         '   .. py:attribute:: Derived.attr1',
123.         '      :module: target.uninitialized_attributes',
124.         '      :type: int',
125.         '',
126.         '      docstring',
127.         '',
128.         '',
129.         '   .. py:attribute:: Derived.attr3',
130.         '      :module: target.uninitialized_attributes',
131.         '      :type: int',
132.         '',
133.         '      docstring',
134.         '',
135.     ]
136. 
137. 
138. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is available since python3.6.')
139. @pytest.mark.sphinx('html', testroot='ext-autodoc')
140. def test_undocumented_uninitialized_attributes(app):
141.     options = {"members": None,
142.                "inherited-members": None,
143.                "undoc-members": None}
144.     actual = do_autodoc(app, 'class', 'target.uninitialized_attributes.Derived', options)
145.     assert list(actual) == [
146.         '',
147.         '.. py:class:: Derived()',
148.         '   :module: target.uninitialized_attributes',
149.         '',
150.         '',
151.         '   .. py:attribute:: Derived.attr1',
152.         '      :module: target.uninitialized_attributes',
153.         '      :type: int',
154.         '',
155.         '      docstring',
156.         '',
157.         '',
158.         '   .. py:attribute:: Derived.attr2',
159.         '      :module: target.uninitialized_attributes',
160.         '      :type: str',
161.         '',
162.         '',
163.         '   .. py:attribute:: Derived.attr3',
164.         '      :module: target.uninitialized_attributes',
165.         '      :type: int',
166.         '',
167.         '      docstring',
168.         '',
169.         '',
170.         '   .. py:attribute:: Derived.attr4',
171.         '      :module: target.uninitialized_attributes',
172.         '      :type: str',
173.         '',
174.     ]
175. 
176. 
177. def test_decorators(app):
178.     actual = do_autodoc(app, 'class', 'target.decorator.Baz')
179.     assert list(actual) == [
180.         '',
181.         '.. py:class:: Baz(name=None, age=None)',
182.         '   :module: target.decorator',
183.         '',
184.     ]
185. 
186.     actual = do_autodoc(app, 'class', 'target.decorator.Qux')
187.     assert list(actual) == [
188.         '',
189.         '.. py:class:: Qux(name=None, age=None)',
190.         '   :module: target.decorator',
191.         '',
192.     ]
193. 
194.     actual = do_autodoc(app, 'class', 'target.decorator.Quux')
195.     assert list(actual) == [
196.         '',
197.         '.. py:class:: Quux(name=None, age=None)',
198.         '   :module: target.decorator',
199.         '',
200.     ]
201. 
202. 
203. @pytest.mark.sphinx('html', testroot='ext-autodoc')
204. def test_properties(app):
205.     options = {"members": None}
206.     actual = do_autodoc(app, 'class', 'target.properties.Foo', options)
207.     assert list(actual) == [
208.         '',
209.         '.. py:class:: Foo()',
210.         '   :module: target.properties',
211.         '',
212.         '   docstring',
213.         '',
214.         '',
215.         '   .. py:property:: Foo.prop1',
216.         '      :module: target.properties',
217.         '      :type: int',
218.         '',
219.         '      docstring',
220.         '',
221.         '',
222.         '   .. py:property:: Foo.prop2',
223.         '      :module: target.properties',
224.         '      :classmethod:',
225.         '      :type: int',
226.         '',
227.         '      docstring',
228.         '',
229.     ]
230. 
231. 
232. @pytest.mark.sphinx('html', testroot='ext-autodoc')
233. def test_slots_attribute(app):
234.     options = {"members": None}
235.     actual = do_autodoc(app, 'class', 'target.slots.Bar', options)
236.     assert list(actual) == [
237.         '',
238.         '.. py:class:: Bar()',
239.         '   :module: target.slots',
240.         '',
241.         '   docstring',
242.         '',
243.         '',
244.         '   .. py:attribute:: Bar.attr1',
245.         '      :module: target.slots',
246.         '',
247.         '      docstring of attr1',
248.         '',
249.         '',
250.         '   .. py:attribute:: Bar.attr2',
251.         '      :module: target.slots',
252.         '',
253.         '      docstring of instance attr2',
254.         '',
255.     ]
256. 
257. 
258. @pytest.mark.skipif(sys.version_info < (3, 7), reason='python 3.7+ is required.')
259. @pytest.mark.sphinx('html', testroot='ext-autodoc')
260. def test_show_inheritance_for_subclass_of_generic_type(app):
261.     options = {'show-inheritance': None}
262.     actual = do_autodoc(app, 'class', 'target.classes.Quux', options)
263.     assert list(actual) == [
264.         '',
265.         '.. py:class:: Quux(iterable=(), /)',
266.         '   :module: target.classes',
267.         '',
268.         '   Bases: :py:class:`~typing.List`\\ '
269.         '[:py:obj:`~typing.Union`\\ [:py:class:`int`, :py:class:`float`]]',
270.         '',
271.         '   A subclass of List[Union[int, float]]',
272.         '',
273.     ]
274. 
275. 
276. @pytest.mark.sphinx('html', testroot='ext-autodoc')
277. def test_autodoc_process_bases(app):
278.     def autodoc_process_bases(app, name, obj, options, bases):
279.         assert name == 'target.classes.Quux'
280.         assert obj.__module__ == 'target.classes'
281.         assert obj.__name__ == 'Quux'
282.         assert options == {'show-inheritance': True,
283.                            'members': []}
284.         assert bases == [List[Union[int, float]]]
285. 
286.         bases.pop()
287.         bases.extend([int, str])
288. 
289.     app.connect('autodoc-process-bases', autodoc_process_bases)
290. 
291.     options = {'show-inheritance': None}
292.     actual = do_autodoc(app, 'class', 'target.classes.Quux', options)
293.     if sys.version_info < (3, 7):
294.         assert list(actual) == [
295.             '',
296.             '.. py:class:: Quux(*args, **kwds)',
297.             '   :module: target.classes',
298.             '',
299.             '   Bases: :py:class:`int`, :py:class:`str`',
300.             '',
301.             '   A subclass of List[Union[int, float]]',
302.             '',
303.         ]
304.     else:
305.         assert list(actual) == [
306.             '',
307.             '.. py:class:: Quux(iterable=(), /)',
308.             '   :module: target.classes',
309.             '',
310.             '   Bases: :py:class:`int`, :py:class:`str`',
311.             '',
312.             '   A subclass of List[Union[int, float]]',
313.             '',
314.         ]
315. 
316. 
317. @pytest.mark.sphinx('html', testroot='ext-autodoc')
318. def test_class_doc_from_class(app):
319.     options = {"members": None,
320.                "class-doc-from": "class"}
321.     actual = do_autodoc(app, 'class', 'target.autoclass_content.C', options)
322.     assert list(actual) == [
323.         '',
324.         '.. py:class:: C()',
325.         '   :module: target.autoclass_content',
326.         '',
327.         '   A class having __init__, no __new__',
328.         '',
329.     ]
330. 
331. 
332. @pytest.mark.sphinx('html', testroot='ext-autodoc')
333. def test_class_doc_from_init(app):
334.     options = {"members": None,
335.                "class-doc-from": "init"}
336.     actual = do_autodoc(app, 'class', 'target.autoclass_content.C', options)
337.     assert list(actual) == [
338.         '',
339.         '.. py:class:: C()',
340.         '   :module: target.autoclass_content',
341.         '',
342.         '   __init__ docstring',
343.         '',
344.     ]
345. 
346. 
347. @pytest.mark.sphinx('html', testroot='ext-autodoc')
348. def test_class_doc_from_both(app):
349.     options = {"members": None,
350.                "class-doc-from": "both"}
351.     actual = do_autodoc(app, 'class', 'target.autoclass_content.C', options)
352.     assert list(actual) == [
353.         '',
354.         '.. py:class:: C()',
355.         '   :module: target.autoclass_content',
356.         '',
357.         '   A class having __init__, no __new__',
358.         '',
359.         '   __init__ docstring',
360.         '',
361.     ]
362. 
363. 
364. def test_class_alias(app):
365.     def autodoc_process_docstring(*args):
366.         """A handler always raises an error.
367.         This confirms this handler is never called for class aliases.
368.         """
369.         raise
370. 
371.     app.connect('autodoc-process-docstring', autodoc_process_docstring)
372.     actual = do_autodoc(app, 'class', 'target.classes.Alias')
373.     assert list(actual) == [
374.         '',
375.         '.. py:attribute:: Alias',
376.         '   :module: target.classes',
377.         '',
378.         '   alias of :py:class:`target.classes.Foo`',
379.     ]
380. 
381. 
382. def test_class_alias_having_doccomment(app):
383.     actual = do_autodoc(app, 'class', 'target.classes.OtherAlias')
384.     assert list(actual) == [
385.         '',
386.         '.. py:attribute:: OtherAlias',
387.         '   :module: target.classes',
388.         '',
389.         '   docstring',
390.         '',
391.     ]
392. 
393. 
394. @pytest.mark.sphinx('html', testroot='ext-autodoc')
395. def test_coroutine(app):
396.     options = {"members": None}
397.     actual = do_autodoc(app, 'class', 'target.coroutine.AsyncClass', options)
398.     assert list(actual) == [
399.         '',
400.         '.. py:class:: AsyncClass()',
401.         '   :module: target.coroutine',
402.         '',
403.         '',
404.         '   .. py:method:: AsyncClass.do_asyncgen()',
405.         '      :module: target.coroutine',
406.         '      :async:',
407.         '',
408.         '      A documented async generator',
409.         '',
410.         '',
411.         '   .. py:method:: AsyncClass.do_coroutine()',
412.         '      :module: target.coroutine',
413.         '      :async:',
414.         '',
415.         '      A documented coroutine function',
416.         '',
417.         '',
418.         '   .. py:method:: AsyncClass.do_coroutine2()',
419.         '      :module: target.coroutine',
420.         '      :async:',
421.         '      :classmethod:',
422.         '',
423.         '      A documented coroutine classmethod',
424.         '',
425.         '',
426.         '   .. py:method:: AsyncClass.do_coroutine3()',
427.         '      :module: target.coroutine',
428.         '      :async:',
429.         '      :staticmethod:',
430.         '',
431.         '      A documented coroutine staticmethod',
432.         '',
433.     ]

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-25 07:18:57,361 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/test_ext_autodoc.py`.\n   - The user's purpose is to find test cases covering mocked modules and inheritance.\n\n2. Extended relevance:\n   - This file contains numerous tests for the autodoc extension, including tests for inheritance (`test_autodoc_inherited_members`), and uses mocking (`unittest.mock`), which is directly relevant to the user's goal of finding test cases for classes inheriting from mocked modules.", relative_path='tests/test_ext_autodoc.py', start_line=1, end_line=1143), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asks for the full content of `tests/test_ext_autodoc_autoclass.py`.\n   - The user's secondary request asks for all tests from this file involving inheritance or mocking.\n\n2. Extended relevance:\n   - This file is critical as it contains specific tests for `autoclass` behavior. Several tests like `test_inherited_instance_variable`, `test_uninitialized_attributes`, and `test_show_inheritance_for_subclass_of_generic_type` directly address class inheritance scenarios, which aligns with the user's purpose of investigating an issue with base class rendering.", relative_path='tests/test_ext_autodoc_autoclass.py', start_line=1, end_line=433)]
2025-12-25 07:18:57,364 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/test_ext_autodoc_autoclass.py`.
2025-12-25 07:18:57,364 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-25 07:18:57,364 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-25 07:18:57,365 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 6 existing contexts
2025-12-25 07:18:57,365 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 7 total contexts (removed 1 duplicates)
2025-12-25 07:18:57,366 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-25 07:18:57,366 - thread-128180010612416.prometheus_context_collector - INFO - Successfully retrieved 7 context snippets
