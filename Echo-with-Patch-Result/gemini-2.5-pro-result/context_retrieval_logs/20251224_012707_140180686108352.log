2025-12-24 01:27:07,058 - thread-140180686108352.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: RenameIndex() crashes when unnamed index is moving backward and forward.

Description: Description
	
RenameIndex() should restore the old auto-generated name when an unnamed index for unique_together is moving backward. Now re-applying RenameIndex() crashes. For example:
tests/migrations/test_operations.py
diff --git a/tests/migrations/test_operations.py b/tests/migrations/test_operations.py
index cfd28b1b39..c0a55023bb 100644
					
					 a
				 
					
					 b
				 
 class OperationTests(OperationTestBase): 
29882988        with connection.schema_editor() as editor, self.assertNumQueries(0):
29892989            operation.database_backwards(app_label, editor, new_state, project_state)
29902990        self.assertIndexNameExists(table_name, "new_pony_test_idx")
 2991        # Re-apply renaming.
 2992        with connection.schema_editor() as editor:
 2993            operation.database_forwards(app_label, editor, project_state, new_state)
 2994        self.assertIndexNameExists(table_name, "new_pony_test_idx")
29912995        # Deconstruction.
29922996        definition = operation.deconstruct()
29932997        self.assertEqual(definition[0], "RenameIndex")
crashes on PostgreSQL:
django.db.utils.ProgrammingError: relation "new_pony_test_idx" already exists

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index d17232e4ec..3c8208e0d8 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -963,11 +963,27 @@ class RenameIndex(IndexOperation):
 
         to_model_state = to_state.models[app_label, self.model_name_lower]
         new_index = to_model_state.get_index_by_name(self.new_name)
+        # Skip renaming if the resolved index names are identical.
+        if old_index.name == new_index.name:
+            return
         schema_editor.rename_index(model, old_index, new_index)
 
     def database_backwards(self, app_label, schema_editor, from_state, to_state):
         if self.old_fields:
-            # Backward operation with unnamed index is a no-op.
+            # Restore the auto-generated name for the unnamed index when reversing.
+            model = to_state.apps.get_model(app_label, self.model_name)
+            if not self.allow_migrate_model(schema_editor.connection.alias, model):
+                return
+            # Compute the expected auto-generated index name for the historical model.
+            to_model = to_state.apps.get_model(app_label, self.model_name)
+            auto_index = models.Index(fields=self.old_fields)
+            auto_index.set_name_with_model(to_model)
+            # Current index in the database is expected to have the explicit new name.
+            current_index = models.Index(fields=self.old_fields, name=self.new_name)
+            # Skip if names already match.
+            if current_index.name == auto_index.name:
+                return
+            schema_editor.rename_index(model, current_index, auto_index)
             return
 
         self.new_name_lower, self.old_name_lower = (


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

2025-12-24 01:27:07,220 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       ├── schedule_tests.yml
|       ├── schedules.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── optimizemigration.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _functions.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── csrf.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.26.txt
|   |   ├── 2.2.27.txt
|   |   ├── 2.2.28.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.11.txt
|   |   ├── 3.2.12.txt
|   |   ├── 3.2.13.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.2.txt
|   |   ├── 4.0.3.txt
|   |   ├── 4.0.4.txt
|   |   ├── 4.0.5.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_prevent_double_submission.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── async_queryset
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   ├── with_many_to_many.py
    |   |   └── with_unique_constraint.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_functions.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_migrations.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_csrf_cookie_masked.py
    |   ├── test_middleware_mixin.py
    |   ├── test_use_l10n.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       ├── custom_widget.html
    |   |       ├── cyclic_context_boundfield_render.html
    |   |       ├── error.html
    |   |       ├── form_snippet.html
    |   |       ├── legend_test.html
    |   |       └── use_fieldset.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_deprecation_forms.py
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoadmin_deprecated
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_manual_porting
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_noop
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_no_replaces
    |   |   ├── 0001_squashed_0002.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   ├── custom_sitemap_index.xml
    |   |   └── custom_sitemap_lastmod_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_debug.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: RenameIndex() crashes when unnamed index is moving backward and forward.

Description: Description
	
RenameIndex() should restore the old auto-generated name when an unnamed index for unique_together is moving backward. Now re-applying RenameIndex() crashes. For example:
tests/migrations/test_operations.py
diff --git a/tests/migrations/test_operations.py b/tests/migrations/test_operations.py
index cfd28b1b39..c0a55023bb 100644
					
					 a
				 
					
					 b
				 
 class OperationTests(OperationTestBase): 
29882988        with connection.schema_editor() as editor, self.assertNumQueries(0):
29892989            operation.database_backwards(app_label, editor, new_state, project_state)
29902990        self.assertIndexNameExists(table_name, "new_pony_test_idx")
 2991        # Re-apply renaming.
 2992        with connection.schema_editor() as editor:
 2993            operation.database_forwards(app_label, editor, project_state, new_state)
 2994        self.assertIndexNameExists(table_name, "new_pony_test_idx")
29912995        # Deconstruction.
29922996        definition = operation.deconstruct()
29932997        self.assertEqual(definition[0], "RenameIndex")
crashes on PostgreSQL:
django.db.utils.ProgrammingError: relation "new_pony_test_idx" already exists

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index d17232e4ec..3c8208e0d8 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -963,11 +963,27 @@ class RenameIndex(IndexOperation):
 
         to_model_state = to_state.models[app_label, self.model_name_lower]
         new_index = to_model_state.get_index_by_name(self.new_name)
+        # Skip renaming if the resolved index names are identical.
+        if old_index.name == new_index.name:
+            return
         schema_editor.rename_index(model, old_index, new_index)
 
     def database_backwards(self, app_label, schema_editor, from_state, to_state):
         if self.old_fields:
-            # Backward operation with unnamed index is a no-op.
+            # Restore the auto-generated name for the unnamed index when reversing.
+            model = to_state.apps.get_model(app_label, self.model_name)
+            if not self.allow_migrate_model(schema_editor.connection.alias, model):
+                return
+            # Compute the expected auto-generated index name for the historical model.
+            to_model = to_state.apps.get_model(app_label, self.model_name)
+            auto_index = models.Index(fields=self.old_fields)
+            auto_index.set_name_with_model(to_model)
+            # Current index in the database is expected to have the explicit new name.
+            current_index = models.Index(fields=self.old_fields, name=self.new_name)
+            # Skip if names already match.
+            if current_index.name == auto_index.name:
+                return
+            schema_editor.rename_index(model, current_index, auto_index)
             return
 
         self.new_name_lower, self.old_name_lower = (


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 01:27:39,908 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="1. The user has reported an issue with the `RenameIndex` migration operation, and the provided patch modifies `django/db/migrations/operations/models.py`. To understand the `RenameIndex` class, its base classes, and its methods (`database_forwards`, `database_backwards`, `deconstruct`), I need the full content of this file.\n2. The `RenameIndex` operation utilizes `schema_editor.rename_index()`. Since the error occurs on PostgreSQL, it's crucial to examine both the generic implementation in `django/db/backends/base/schema.py` and the specific implementation for PostgreSQL in `django/db/backends/postgresql/schema.py`.\n3. The logic in the patch involves `models.Index` and the generation of index names, particularly with `auto_index.set_name_with_model(to_model)`. To understand this behavior, I need the source code for the `Index` class from `django/db/models/indexes.py`." query='Please provide the full content of the files `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`.' extra_requirements='' purpose='I need these files to understand the implementation of the `RenameIndex` operation and its dependencies to analyze and fix the reported bug.'
2025-12-24 01:27:39,909 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the files `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`.
2025-12-24 01:27:39,909 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 01:27:39,910 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 01:27:39,910 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 01:27:39,910 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the files `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`.
Purpose: I need these files to understand the implementation of the `RenameIndex` operation and its dependencies to analyze and fix the reported bug.
2025-12-24 01:27:42,446 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have started by reading the first file, `django/db/migrations/operations/models.py`, to begin gathering the context needed to understand the `RenameIndex` operation. The contents of this file are now available for your review. I will proceed with fetching the remaining files you requested.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/migrations/operations/models.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2141, 'candidates_token_count': 85, 'total_token_count': 2318, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2141}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 92, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.13043051326976102, 'model_name': 'gemini-2.5-pro'} id='run--80bd4485-2688-4bb8-b6fe-37508c2998dc-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/migrations/operations/models.py'}, 'id': 'fec9713f-2ff4-4cd7-ba7b-c8e456594e14', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2141, 'output_tokens': 85, 'total_tokens': 2318, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 92}}
2025-12-24 01:27:46,200 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the content of `django/db/models/indexes.py`, the second of the four requested files. This file is now available for your review. I will now proceed to fetch the remaining two files to provide the complete context for your analysis.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/indexes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8934, 'candidates_token_count': 77, 'total_token_count': 9252, 'cached_content_token_count': 1834, 'prompt_tokens_details': [{'modality': 1, 'token_count': 8934}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1834}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 77}], 'thoughts_token_count': 241}, 'finish_reason': 'STOP', 'avg_logprobs': -0.270327208878158, 'model_name': 'gemini-2.5-pro'} id='run--f49019b9-7a72-446e-a832-2393e7c6df9d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/indexes.py'}, 'id': '52571502-5872-4bed-8702-8d0fbd642649', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8934, 'output_tokens': 77, 'total_tokens': 9252, 'input_token_details': {'cache_read': 1834}, 'output_token_details': {'reasoning': 241}}
2025-12-24 01:27:50,203 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the content of `django/db/backends/base/schema.py`, which is the third of the four files you requested. I will now fetch the final file, `django/db/backends/postgresql/schema.py`, to complete your request.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/backends/base/schema.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 13273, 'candidates_token_count': 82, 'total_token_count': 13483, 'cached_content_token_count': 7517, 'prompt_tokens_details': [{'modality': 1, 'token_count': 13273}], 'cache_tokens_details': [{'modality': 1, 'token_count': 7517}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 82}], 'thoughts_token_count': 128}, 'finish_reason': 'STOP', 'avg_logprobs': -0.223848622019698, 'model_name': 'gemini-2.5-pro'} id='run--51d89a34-f907-4bf7-ace4-5bd6112af88b-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/backends/base/schema.py'}, 'id': '5e059e09-8182-4b0f-8d9a-c900306715e1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 13273, 'output_tokens': 82, 'total_tokens': 13483, 'input_token_details': {'cache_read': 7517}, 'output_token_details': {'reasoning': 128}}
2025-12-24 01:27:53,627 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the contents of all four requested files: `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`. This completes the data gathering phase of your request. You now have all the necessary information to analyze the `RenameIndex` operation and its dependencies to address the reported bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/backends/postgresql/schema.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20533, 'candidates_token_count': 122, 'total_token_count': 20768, 'cached_content_token_count': 13394, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20533}], 'cache_tokens_details': [{'modality': 1, 'token_count': 13394}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 122}], 'thoughts_token_count': 113}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15357536566062052, 'model_name': 'gemini-2.5-pro'} id='run--ff974c0a-6fc0-4f95-a368-206c985d0287-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/backends/postgresql/schema.py'}, 'id': '76207997-c626-4467-82f5-f80b1f53a2ce', 'type': 'tool_call'}] usage_metadata={'input_tokens': 20533, 'output_tokens': 122, 'total_tokens': 20768, 'input_token_details': {'cache_read': 13394}, 'output_token_details': {'reasoning': 113}}
2025-12-24 01:27:59,405 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have already provided the full content of the requested files: `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`. You should have access to the content of these files from our previous interactions. Please let me know if you need anything else.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 24874, 'candidates_token_count': 88, 'total_token_count': 25409, 'cached_content_token_count': 19243, 'prompt_tokens_details': [{'modality': 1, 'token_count': 24874}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19243}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 88}], 'thoughts_token_count': 447}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5264422676780007, 'model_name': 'gemini-2.5-pro'} id='run--79aa8cce-d1ee-45c0-8ad3-a41e97bc7c8a-0' usage_metadata={'input_tokens': 24874, 'output_tokens': 88, 'total_tokens': 25409, 'input_token_details': {'cache_read': 19243}, 'output_token_details': {'reasoning': 447}}
2025-12-24 01:27:59,407 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the files `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need these files to understand the implementation of the `RenameIndex` operation and its dependencies to analyze and fix the reported bug.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/backends/base/schema.py
Line number range: 1 - 500
Content:
1. import logging
2. import operator
3. from datetime import datetime
4. 
5. from django.db.backends.ddl_references import (
6.     Columns,
7.     Expressions,
8.     ForeignKeyName,
9.     IndexName,
10.     Statement,
11.     Table,
12. )
13. from django.db.backends.utils import names_digest, split_identifier
14. from django.db.models import Deferrable, Index
15. from django.db.models.sql import Query
16. from django.db.transaction import TransactionManagementError, atomic
17. from django.utils import timezone
18. 
19. logger = logging.getLogger("django.db.backends.schema")
20. 
21. 
22. def _is_relevant_relation(relation, altered_field):
23.     """
24.     When altering the given field, must constraints on its model from the given
25.     relation be temporarily dropped?
26.     """
27.     field = relation.field
28.     if field.many_to_many:
29.         # M2M reverse field
30.         return False
31.     if altered_field.primary_key and field.to_fields == [None]:
32.         # Foreign key constraint on the primary key, which is being altered.
33.         return True
34.     # Is the constraint targeting the field being altered?
35.     return altered_field.name in field.to_fields
36. 
37. 
38. def _all_related_fields(model):
39.     # Related fields must be returned in a deterministic order.
40.     return sorted(
41.         model._meta._get_fields(
42.             forward=False,
43.             reverse=True,
44.             include_hidden=True,
45.             include_parents=False,
46.         ),
47.         key=operator.attrgetter("name"),
48.     )
49. 
50. 
51. def _related_non_m2m_objects(old_field, new_field):
52.     # Filter out m2m objects from reverse relations.
53.     # Return (old_relation, new_relation) tuples.
54.     related_fields = zip(
55.         (
56.             obj
57.             for obj in _all_related_fields(old_field.model)
58.             if _is_relevant_relation(obj, old_field)
59.         ),
60.         (
61.             obj
62.             for obj in _all_related_fields(new_field.model)
63.             if _is_relevant_relation(obj, new_field)
64.         ),
65.     )
66.     for old_rel, new_rel in related_fields:
67.         yield old_rel, new_rel
68.         yield from _related_non_m2m_objects(
69.             old_rel.remote_field,
70.             new_rel.remote_field,
71.         )
72. 
73. 
74. class BaseDatabaseSchemaEditor:
75.     """
76.     This class and its subclasses are responsible for emitting schema-changing
77.     statements to the databases - model creation/removal/alteration, field
78.     renaming, index fiddling, and so on.
79.     """
80. 
81.     # Overrideable SQL templates
82.     sql_create_table = "CREATE TABLE %(table)s (%(definition)s)"
83.     sql_rename_table = "ALTER TABLE %(old_table)s RENAME TO %(new_table)s"
84.     sql_retablespace_table = "ALTER TABLE %(table)s SET TABLESPACE %(new_tablespace)s"
85.     sql_delete_table = "DROP TABLE %(table)s CASCADE"
86. 
87.     sql_create_column = "ALTER TABLE %(table)s ADD COLUMN %(column)s %(definition)s"
88.     sql_alter_column = "ALTER TABLE %(table)s %(changes)s"
89.     sql_alter_column_type = "ALTER COLUMN %(column)s TYPE %(type)s"
90.     sql_alter_column_null = "ALTER COLUMN %(column)s DROP NOT NULL"
91.     sql_alter_column_not_null = "ALTER COLUMN %(column)s SET NOT NULL"
92.     sql_alter_column_default = "ALTER COLUMN %(column)s SET DEFAULT %(default)s"
93.     sql_alter_column_no_default = "ALTER COLUMN %(column)s DROP DEFAULT"
94.     sql_alter_column_no_default_null = sql_alter_column_no_default
95.     sql_alter_column_collate = "ALTER COLUMN %(column)s TYPE %(type)s%(collation)s"
96.     sql_delete_column = "ALTER TABLE %(table)s DROP COLUMN %(column)s CASCADE"
97.     sql_rename_column = (
98.         "ALTER TABLE %(table)s RENAME COLUMN %(old_column)s TO %(new_column)s"
99.     )
100.     sql_update_with_default = (
101.         "UPDATE %(table)s SET %(column)s = %(default)s WHERE %(column)s IS NULL"
102.     )
103. 
104.     sql_unique_constraint = "UNIQUE (%(columns)s)%(deferrable)s"
105.     sql_check_constraint = "CHECK (%(check)s)"
106.     sql_delete_constraint = "ALTER TABLE %(table)s DROP CONSTRAINT %(name)s"
107.     sql_constraint = "CONSTRAINT %(name)s %(constraint)s"
108. 
109.     sql_create_check = "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s CHECK (%(check)s)"
110.     sql_delete_check = sql_delete_constraint
111. 
112.     sql_create_unique = (
113.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s "
114.         "UNIQUE (%(columns)s)%(deferrable)s"
115.     )
116.     sql_delete_unique = sql_delete_constraint
117. 
118.     sql_create_fk = (
119.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s FOREIGN KEY (%(column)s) "
120.         "REFERENCES %(to_table)s (%(to_column)s)%(deferrable)s"
121.     )
122.     sql_create_inline_fk = None
123.     sql_create_column_inline_fk = None
124.     sql_delete_fk = sql_delete_constraint
125. 
126.     sql_create_index = (
127.         "CREATE INDEX %(name)s ON %(table)s "
128.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
129.     )
130.     sql_create_unique_index = (
131.         "CREATE UNIQUE INDEX %(name)s ON %(table)s "
132.         "(%(columns)s)%(include)s%(condition)s"
133.     )
134.     sql_rename_index = "ALTER INDEX %(old_name)s RENAME TO %(new_name)s"
135.     sql_delete_index = "DROP INDEX %(name)s"
136. 
137.     sql_create_pk = (
138.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s PRIMARY KEY (%(columns)s)"
139.     )
140.     sql_delete_pk = sql_delete_constraint
141. 
142.     sql_delete_procedure = "DROP PROCEDURE %(procedure)s"
143. 
144.     def __init__(self, connection, collect_sql=False, atomic=True):
145.         self.connection = connection
146.         self.collect_sql = collect_sql
147.         if self.collect_sql:
148.             self.collected_sql = []
149.         self.atomic_migration = self.connection.features.can_rollback_ddl and atomic
150. 
151.     # State-managing methods
152. 
153.     def __enter__(self):
154.         self.deferred_sql = []
155.         if self.atomic_migration:
156.             self.atomic = atomic(self.connection.alias)
157.             self.atomic.__enter__()
158.         return self
159. 
160.     def __exit__(self, exc_type, exc_value, traceback):
161.         if exc_type is None:
162.             for sql in self.deferred_sql:
163.                 self.execute(sql)
164.         if self.atomic_migration:
165.             self.atomic.__exit__(exc_type, exc_value, traceback)
166. 
167.     # Core utility functions
168. 
169.     def execute(self, sql, params=()):
170.         """Execute the given SQL statement, with optional parameters."""
171.         # Don't perform the transactional DDL check if SQL is being collected
172.         # as it's not going to be executed anyway.
173.         if (
174.             not self.collect_sql
175.             and self.connection.in_atomic_block
176.             and not self.connection.features.can_rollback_ddl
177.         ):
178.             raise TransactionManagementError(
179.                 "Executing DDL statements while in a transaction on databases "
180.                 "that can't perform a rollback is prohibited."
181.             )
182.         # Account for non-string statement objects.
183.         sql = str(sql)
184.         # Log the command we're running, then run it
185.         logger.debug(
186.             "%s; (params %r)", sql, params, extra={"params": params, "sql": sql}
187.         )
188.         if self.collect_sql:
189.             ending = "" if sql.rstrip().endswith(";") else ";"
190.             if params is not None:
191.                 self.collected_sql.append(
192.                     (sql % tuple(map(self.quote_value, params))) + ending
193.                 )
194.             else:
195.                 self.collected_sql.append(sql + ending)
196.         else:
197.             with self.connection.cursor() as cursor:
198.                 cursor.execute(sql, params)
199. 
200.     def quote_name(self, name):
201.         return self.connection.ops.quote_name(name)
202. 
203.     def table_sql(self, model):
204.         """Take a model and return its table definition."""
205.         # Add any unique_togethers (always deferred, as some fields might be
206.         # created afterward, like geometry fields with some backends).
207.         for field_names in model._meta.unique_together:
208.             fields = [model._meta.get_field(field) for field in field_names]
209.             self.deferred_sql.append(self._create_unique_sql(model, fields))
210.         # Create column SQL, add FK deferreds if needed.
211.         column_sqls = []
212.         params = []
213.         for field in model._meta.local_fields:
214.             # SQL.
215.             definition, extra_params = self.column_sql(model, field)
216.             if definition is None:
217.                 continue
218.             # Check constraints can go on the column SQL here.
219.             db_params = field.db_parameters(connection=self.connection)
220.             if db_params["check"]:
221.                 definition += " " + self.sql_check_constraint % db_params
222.             # Autoincrement SQL (for backends with inline variant).
223.             col_type_suffix = field.db_type_suffix(connection=self.connection)
224.             if col_type_suffix:
225.                 definition += " %s" % col_type_suffix
226.             params.extend(extra_params)
227.             # FK.
228.             if field.remote_field and field.db_constraint:
229.                 to_table = field.remote_field.model._meta.db_table
230.                 to_column = field.remote_field.model._meta.get_field(
231.                     field.remote_field.field_name
232.                 ).column
233.                 if self.sql_create_inline_fk:
234.                     definition += " " + self.sql_create_inline_fk % {
235.                         "to_table": self.quote_name(to_table),
236.                         "to_column": self.quote_name(to_column),
237.                     }
238.                 elif self.connection.features.supports_foreign_keys:
239.                     self.deferred_sql.append(
240.                         self._create_fk_sql(
241.                             model, field, "_fk_%(to_table)s_%(to_column)s"
242.                         )
243.                     )
244.             # Add the SQL to our big list.
245.             column_sqls.append(
246.                 "%s %s"
247.                 % (
248.                     self.quote_name(field.column),
249.                     definition,
250.                 )
251.             )
252.             # Autoincrement SQL (for backends with post table definition
253.             # variant).
254.             if field.get_internal_type() in (
255.                 "AutoField",
256.                 "BigAutoField",
257.                 "SmallAutoField",
258.             ):
259.                 autoinc_sql = self.connection.ops.autoinc_sql(
260.                     model._meta.db_table, field.column
261.                 )
262.                 if autoinc_sql:
263.                     self.deferred_sql.extend(autoinc_sql)
264.         constraints = [
265.             constraint.constraint_sql(model, self)
266.             for constraint in model._meta.constraints
267.         ]
268.         sql = self.sql_create_table % {
269.             "table": self.quote_name(model._meta.db_table),
270.             "definition": ", ".join(
271.                 constraint for constraint in (*column_sqls, *constraints) if constraint
272.             ),
273.         }
274.         if model._meta.db_tablespace:
275.             tablespace_sql = self.connection.ops.tablespace_sql(
276.                 model._meta.db_tablespace
277.             )
278.             if tablespace_sql:
279.                 sql += " " + tablespace_sql
280.         return sql, params
281. 
282.     # Field <-> database mapping functions
283. 
284.     def _iter_column_sql(
285.         self, column_db_type, params, model, field, field_db_params, include_default
286.     ):
287.         yield column_db_type
288.         if collation := field_db_params.get("collation"):
289.             yield self._collate_sql(collation)
290.         # Work out nullability.
291.         null = field.null
292.         # Include a default value, if requested.
293.         include_default = (
294.             include_default
295.             and not self.skip_default(field)
296.             and
297.             # Don't include a default value if it's a nullable field and the
298.             # default cannot be dropped in the ALTER COLUMN statement (e.g.
299.             # MySQL longtext and longblob).
300.             not (null and self.skip_default_on_alter(field))
301.         )
302.         if include_default:
303.             default_value = self.effective_default(field)
304.             if default_value is not None:
305.                 column_default = "DEFAULT " + self._column_default_sql(field)
306.                 if self.connection.features.requires_literal_defaults:
307.                     # Some databases can't take defaults as a parameter (Oracle).
308.                     # If this is the case, the individual schema backend should
309.                     # implement prepare_default().
310.                     yield column_default % self.prepare_default(default_value)
311.                 else:
312.                     yield column_default
313.                     params.append(default_value)
314.         # Oracle treats the empty string ('') as null, so coerce the null
315.         # option whenever '' is a possible value.
316.         if (
317.             field.empty_strings_allowed
318.             and not field.primary_key
319.             and self.connection.features.interprets_empty_strings_as_nulls
320.         ):
321.             null = True
322.         if not null:
323.             yield "NOT NULL"
324.         elif not self.connection.features.implied_column_null:
325.             yield "NULL"
326.         if field.primary_key:
327.             yield "PRIMARY KEY"
328.         elif field.unique:
329.             yield "UNIQUE"
330.         # Optionally add the tablespace if it's an implicitly indexed column.
331.         tablespace = field.db_tablespace or model._meta.db_tablespace
332.         if (
333.             tablespace
334.             and self.connection.features.supports_tablespaces
335.             and field.unique
336.         ):
337.             yield self.connection.ops.tablespace_sql(tablespace, inline=True)
338. 
339.     def column_sql(self, model, field, include_default=False):
340.         """
341.         Return the column definition for a field. The field must already have
342.         had set_attributes_from_name() called.
343.         """
344.         # Get the column's type and use that as the basis of the SQL.
345.         field_db_params = field.db_parameters(connection=self.connection)
346.         column_db_type = field_db_params["type"]
347.         # Check for fields that aren't actually columns (e.g. M2M).
348.         if column_db_type is None:
349.             return None, None
350.         params = []
351.         return (
352.             " ".join(
353.                 # This appends to the params being returned.
354.                 self._iter_column_sql(
355.                     column_db_type,
356.                     params,
357.                     model,
358.                     field,
359.                     field_db_params,
360.                     include_default,
361.                 )
362.             ),
363.             params,
364.         )
365. 
366.     def skip_default(self, field):
367.         """
368.         Some backends don't accept default values for certain columns types
369.         (i.e. MySQL longtext and longblob).
370.         """
371.         return False
372. 
373.     def skip_default_on_alter(self, field):
374.         """
375.         Some backends don't accept default values for certain columns types
376.         (i.e. MySQL longtext and longblob) in the ALTER COLUMN statement.
377.         """
378.         return False
379. 
380.     def prepare_default(self, value):
381.         """
382.         Only used for backends which have requires_literal_defaults feature
383.         """
384.         raise NotImplementedError(
385.             "subclasses of BaseDatabaseSchemaEditor for backends which have "
386.             "requires_literal_defaults must provide a prepare_default() method"
387.         )
388. 
389.     def _column_default_sql(self, field):
390.         """
391.         Return the SQL to use in a DEFAULT clause. The resulting string should
392.         contain a '%s' placeholder for a default value.
393.         """
394.         return "%s"
395. 
396.     @staticmethod
397.     def _effective_default(field):
398.         # This method allows testing its logic without a connection.
399.         if field.has_default():
400.             default = field.get_default()
401.         elif not field.null and field.blank and field.empty_strings_allowed:
402.             if field.get_internal_type() == "BinaryField":
403.                 default = b""
404.             else:
405.                 default = ""
406.         elif getattr(field, "auto_now", False) or getattr(field, "auto_now_add", False):
407.             internal_type = field.get_internal_type()
408.             if internal_type == "DateTimeField":
409.                 default = timezone.now()
410.             else:
411.                 default = datetime.now()
412.                 if internal_type == "DateField":
413.                     default = default.date()
414.                 elif internal_type == "TimeField":
415.                     default = default.time()
416.         else:
417.             default = None
418.         return default
419. 
420.     def effective_default(self, field):
421.         """Return a field's effective database default value."""
422.         return field.get_db_prep_save(self._effective_default(field), self.connection)
423. 
424.     def quote_value(self, value):
425.         """
426.         Return a quoted version of the value so it's safe to use in an SQL
427.         string. This is not safe against injection from user code; it is
428.         intended only for use in making SQL scripts or preparing default values
429.         for particularly tricky backends (defaults are not user-defined, though,
430.         so this is safe).
431.         """
432.         raise NotImplementedError()
433. 
434.     # Actions
435. 
436.     def create_model(self, model):
437.         """
438.         Create a table and any accompanying indexes or unique constraints for
439.         the given `model`.
440.         """
441.         sql, params = self.table_sql(model)
442.         # Prevent using [] as params, in the case a literal '%' is used in the
443.         # definition.
444.         self.execute(sql, params or None)
445. 
446.         # Add any field index and index_together's (deferred as SQLite
447.         # _remake_table needs it).
448.         self.deferred_sql.extend(self._model_indexes_sql(model))
449. 
450.         # Make M2M tables
451.         for field in model._meta.local_many_to_many:
452.             if field.remote_field.through._meta.auto_created:
453.                 self.create_model(field.remote_field.through)
454. 
455.     def delete_model(self, model):
456.         """Delete a model from the database."""
457.         # Handle auto-created intermediary models
458.         for field in model._meta.local_many_to_many:
459.             if field.remote_field.through._meta.auto_created:
460.                 self.delete_model(field.remote_field.through)
461. 
462.         # Delete the table
463.         self.execute(
464.             self.sql_delete_table
465.             % {
466.                 "table": self.quote_name(model._meta.db_table),
467.             }
468.         )
469.         # Remove all deferred statements referencing the deleted table.
470.         for sql in list(self.deferred_sql):
471.             if isinstance(sql, Statement) and sql.references_table(
472.                 model._meta.db_table
473.             ):
474.                 self.deferred_sql.remove(sql)
475. 
476.     def add_index(self, model, index):
477.         """Add an index on a model."""
478.         if (
479.             index.contains_expressions
480.             and not self.connection.features.supports_expression_indexes
481.         ):
482.             return None
483.         # Index.create_sql returns interpolated SQL which makes params=None a
484.         # necessity to avoid escaping attempts on execution.
485.         self.execute(index.create_sql(model, self), params=None)
486. 
487.     def remove_index(self, model, index):
488.         """Remove an index from a model."""
489.         if (
490.             index.contains_expressions
491.             and not self.connection.features.supports_expression_indexes
492.         ):
493.             return None
494.         self.execute(index.remove_sql(model, self))
495. 
496.     def rename_index(self, model, old_index, new_index):
497.         if self.connection.features.can_rename_index:
498.             self.execute(
499.                 self._rename_index_sql(model, old_index.name, new_index.name),
500.                 params=None,


File: django/db/backends/postgresql/schema.py
Line number range: 1 - 299
Content:
1. import psycopg2
2. 
3. from django.db.backends.base.schema import BaseDatabaseSchemaEditor
4. from django.db.backends.ddl_references import IndexColumns
5. from django.db.backends.utils import strip_quotes
6. 
7. 
8. class DatabaseSchemaEditor(BaseDatabaseSchemaEditor):
9. 
10.     # Setting all constraints to IMMEDIATE to allow changing data in the same
11.     # transaction.
12.     sql_update_with_default = (
13.         "UPDATE %(table)s SET %(column)s = %(default)s WHERE %(column)s IS NULL"
14.         "; SET CONSTRAINTS ALL IMMEDIATE"
15.     )
16. 
17.     sql_delete_sequence = "DROP SEQUENCE IF EXISTS %(sequence)s CASCADE"
18. 
19.     sql_create_index = (
20.         "CREATE INDEX %(name)s ON %(table)s%(using)s "
21.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
22.     )
23.     sql_create_index_concurrently = (
24.         "CREATE INDEX CONCURRENTLY %(name)s ON %(table)s%(using)s "
25.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
26.     )
27.     sql_delete_index = "DROP INDEX IF EXISTS %(name)s"
28.     sql_delete_index_concurrently = "DROP INDEX CONCURRENTLY IF EXISTS %(name)s"
29. 
30.     # Setting the constraint to IMMEDIATE to allow changing data in the same
31.     # transaction.
32.     sql_create_column_inline_fk = (
33.         "CONSTRAINT %(name)s REFERENCES %(to_table)s(%(to_column)s)%(deferrable)s"
34.         "; SET CONSTRAINTS %(namespace)s%(name)s IMMEDIATE"
35.     )
36.     # Setting the constraint to IMMEDIATE runs any deferred checks to allow
37.     # dropping it in the same transaction.
38.     sql_delete_fk = (
39.         "SET CONSTRAINTS %(name)s IMMEDIATE; "
40.         "ALTER TABLE %(table)s DROP CONSTRAINT %(name)s"
41.     )
42.     sql_delete_procedure = "DROP FUNCTION %(procedure)s(%(param_types)s)"
43. 
44.     sql_add_identity = (
45.         "ALTER TABLE %(table)s ALTER COLUMN %(column)s ADD "
46.         "GENERATED BY DEFAULT AS IDENTITY"
47.     )
48.     sql_drop_indentity = (
49.         "ALTER TABLE %(table)s ALTER COLUMN %(column)s DROP IDENTITY IF EXISTS"
50.     )
51. 
52.     def quote_value(self, value):
53.         if isinstance(value, str):
54.             value = value.replace("%", "%%")
55.         adapted = psycopg2.extensions.adapt(value)
56.         if hasattr(adapted, "encoding"):
57.             adapted.encoding = "utf8"
58.         # getquoted() returns a quoted bytestring of the adapted value.
59.         return adapted.getquoted().decode()
60. 
61.     def _field_indexes_sql(self, model, field):
62.         output = super()._field_indexes_sql(model, field)
63.         like_index_statement = self._create_like_index_sql(model, field)
64.         if like_index_statement is not None:
65.             output.append(like_index_statement)
66.         return output
67. 
68.     def _field_data_type(self, field):
69.         if field.is_relation:
70.             return field.rel_db_type(self.connection)
71.         return self.connection.data_types.get(
72.             field.get_internal_type(),
73.             field.db_type(self.connection),
74.         )
75. 
76.     def _field_base_data_types(self, field):
77.         # Yield base data types for array fields.
78.         if field.base_field.get_internal_type() == "ArrayField":
79.             yield from self._field_base_data_types(field.base_field)
80.         else:
81.             yield self._field_data_type(field.base_field)
82. 
83.     def _create_like_index_sql(self, model, field):
84.         """
85.         Return the statement to create an index with varchar operator pattern
86.         when the column type is 'varchar' or 'text', otherwise return None.
87.         """
88.         db_type = field.db_type(connection=self.connection)
89.         if db_type is not None and (field.db_index or field.unique):
90.             # Fields with database column types of `varchar` and `text` need
91.             # a second index that specifies their operator class, which is
92.             # needed when performing correct LIKE queries outside the
93.             # C locale. See #12234.
94.             #
95.             # The same doesn't apply to array fields such as varchar[size]
96.             # and text[size], so skip them.
97.             if "[" in db_type:
98.                 return None
99.             if db_type.startswith("varchar"):
100.                 return self._create_index_sql(
101.                     model,
102.                     fields=[field],
103.                     suffix="_like",
104.                     opclasses=["varchar_pattern_ops"],
105.                 )
106.             elif db_type.startswith("text"):
107.                 return self._create_index_sql(
108.                     model,
109.                     fields=[field],
110.                     suffix="_like",
111.                     opclasses=["text_pattern_ops"],
112.                 )
113.         return None
114. 
115.     def _alter_column_type_sql(self, model, old_field, new_field, new_type):
116.         self.sql_alter_column_type = "ALTER COLUMN %(column)s TYPE %(type)s"
117.         # Cast when data type changed.
118.         using_sql = " USING %(column)s::%(type)s"
119.         new_internal_type = new_field.get_internal_type()
120.         old_internal_type = old_field.get_internal_type()
121.         if new_internal_type == "ArrayField" and new_internal_type == old_internal_type:
122.             # Compare base data types for array fields.
123.             if list(self._field_base_data_types(old_field)) != list(
124.                 self._field_base_data_types(new_field)
125.             ):
126.                 self.sql_alter_column_type += using_sql
127.         elif self._field_data_type(old_field) != self._field_data_type(new_field):
128.             self.sql_alter_column_type += using_sql
129.         # Make ALTER TYPE with IDENTITY make sense.
130.         table = strip_quotes(model._meta.db_table)
131.         auto_field_types = {
132.             "AutoField",
133.             "BigAutoField",
134.             "SmallAutoField",
135.         }
136.         old_is_auto = old_internal_type in auto_field_types
137.         new_is_auto = new_internal_type in auto_field_types
138.         if new_is_auto and not old_is_auto:
139.             column = strip_quotes(new_field.column)
140.             return (
141.                 (
142.                     self.sql_alter_column_type
143.                     % {
144.                         "column": self.quote_name(column),
145.                         "type": new_type,
146.                     },
147.                     [],
148.                 ),
149.                 [
150.                     (
151.                         self.sql_add_identity
152.                         % {
153.                             "table": self.quote_name(table),
154.                             "column": self.quote_name(column),
155.                         },
156.                         [],
157.                     ),
158.                 ],
159.             )
160.         elif old_is_auto and not new_is_auto:
161.             # Drop IDENTITY if exists (pre-Django 4.1 serial columns don't have
162.             # it).
163.             self.execute(
164.                 self.sql_drop_indentity
165.                 % {
166.                     "table": self.quote_name(table),
167.                     "column": self.quote_name(strip_quotes(old_field.column)),
168.                 }
169.             )
170.             column = strip_quotes(new_field.column)
171.             sequence_name = "%s_%s_seq" % (table, column)
172.             fragment, _ = super()._alter_column_type_sql(
173.                 model, old_field, new_field, new_type
174.             )
175.             return fragment, [
176.                 (
177.                     # Drop the sequence if exists (Django 4.1+ identity columns
178.                     # don't have it).
179.                     self.sql_delete_sequence
180.                     % {
181.                         "sequence": self.quote_name(sequence_name),
182.                     },
183.                     [],
184.                 ),
185.             ]
186.         else:
187.             return super()._alter_column_type_sql(model, old_field, new_field, new_type)
188. 
189.     def _alter_field(
190.         self,
191.         model,
192.         old_field,
193.         new_field,
194.         old_type,
195.         new_type,
196.         old_db_params,
197.         new_db_params,
198.         strict=False,
199.     ):
200.         # Drop indexes on varchar/text/citext columns that are changing to a
201.         # different type.
202.         if (old_field.db_index or old_field.unique) and (
203.             (old_type.startswith("varchar") and not new_type.startswith("varchar"))
204.             or (old_type.startswith("text") and not new_type.startswith("text"))
205.             or (old_type.startswith("citext") and not new_type.startswith("citext"))
206.         ):
207.             index_name = self._create_index_name(
208.                 model._meta.db_table, [old_field.column], suffix="_like"
209.             )
210.             self.execute(self._delete_index_sql(model, index_name))
211. 
212.         super()._alter_field(
213.             model,
214.             old_field,
215.             new_field,
216.             old_type,
217.             new_type,
218.             old_db_params,
219.             new_db_params,
220.             strict,
221.         )
222.         # Added an index? Create any PostgreSQL-specific indexes.
223.         if (not (old_field.db_index or old_field.unique) and new_field.db_index) or (
224.             not old_field.unique and new_field.unique
225.         ):
226.             like_index_statement = self._create_like_index_sql(model, new_field)
227.             if like_index_statement is not None:
228.                 self.execute(like_index_statement)
229. 
230.         # Removed an index? Drop any PostgreSQL-specific indexes.
231.         if old_field.unique and not (new_field.db_index or new_field.unique):
232.             index_to_remove = self._create_index_name(
233.                 model._meta.db_table, [old_field.column], suffix="_like"
234.             )
235.             self.execute(self._delete_index_sql(model, index_to_remove))
236. 
237.     def _index_columns(self, table, columns, col_suffixes, opclasses):
238.         if opclasses:
239.             return IndexColumns(
240.                 table,
241.                 columns,
242.                 self.quote_name,
243.                 col_suffixes=col_suffixes,
244.                 opclasses=opclasses,
245.             )
246.         return super()._index_columns(table, columns, col_suffixes, opclasses)
247. 
248.     def add_index(self, model, index, concurrently=False):
249.         self.execute(
250.             index.create_sql(model, self, concurrently=concurrently), params=None
251.         )
252. 
253.     def remove_index(self, model, index, concurrently=False):
254.         self.execute(index.remove_sql(model, self, concurrently=concurrently))
255. 
256.     def _delete_index_sql(self, model, name, sql=None, concurrently=False):
257.         sql = (
258.             self.sql_delete_index_concurrently
259.             if concurrently
260.             else self.sql_delete_index
261.         )
262.         return super()._delete_index_sql(model, name, sql)
263. 
264.     def _create_index_sql(
265.         self,
266.         model,
267.         *,
268.         fields=None,
269.         name=None,
270.         suffix="",
271.         using="",
272.         db_tablespace=None,
273.         col_suffixes=(),
274.         sql=None,
275.         opclasses=(),
276.         condition=None,
277.         concurrently=False,
278.         include=None,
279.         expressions=None,
280.     ):
281.         sql = (
282.             self.sql_create_index
283.             if not concurrently
284.             else self.sql_create_index_concurrently
285.         )
286.         return super()._create_index_sql(
287.             model,
288.             fields=fields,
289.             name=name,
290.             suffix=suffix,
291.             using=using,
292.             db_tablespace=db_tablespace,
293.             col_suffixes=col_suffixes,
294.             sql=sql,
295.             opclasses=opclasses,
296.             condition=condition,
297.             include=include,
298.             expressions=expressions,
299.         )


File: django/db/migrations/operations/models.py
Line number range: 1 - 500
Content:
1. from django.db import models
2. from django.db.migrations.operations.base import Operation
3. from django.db.migrations.state import ModelState
4. from django.db.migrations.utils import field_references, resolve_relation
5. from django.db.models.options import normalize_together
6. from django.utils.functional import cached_property
7. 
8. from .fields import AddField, AlterField, FieldOperation, RemoveField, RenameField
9. 
10. 
11. def _check_for_duplicates(arg_name, objs):
12.     used_vals = set()
13.     for val in objs:
14.         if val in used_vals:
15.             raise ValueError(
16.                 "Found duplicate value %s in CreateModel %s argument." % (val, arg_name)
17.             )
18.         used_vals.add(val)
19. 
20. 
21. class ModelOperation(Operation):
22.     def __init__(self, name):
23.         self.name = name
24. 
25.     @cached_property
26.     def name_lower(self):
27.         return self.name.lower()
28. 
29.     def references_model(self, name, app_label):
30.         return name.lower() == self.name_lower
31. 
32.     def reduce(self, operation, app_label):
33.         return super().reduce(operation, app_label) or self.can_reduce_through(
34.             operation, app_label
35.         )
36. 
37.     def can_reduce_through(self, operation, app_label):
38.         return not operation.references_model(self.name, app_label)
39. 
40. 
41. class CreateModel(ModelOperation):
42.     """Create a model's table."""
43. 
44.     serialization_expand_args = ["fields", "options", "managers"]
45. 
46.     def __init__(self, name, fields, options=None, bases=None, managers=None):
47.         self.fields = fields
48.         self.options = options or {}
49.         self.bases = bases or (models.Model,)
50.         self.managers = managers or []
51.         super().__init__(name)
52.         # Sanity-check that there are no duplicated field names, bases, or
53.         # manager names
54.         _check_for_duplicates("fields", (name for name, _ in self.fields))
55.         _check_for_duplicates(
56.             "bases",
57.             (
58.                 base._meta.label_lower
59.                 if hasattr(base, "_meta")
60.                 else base.lower()
61.                 if isinstance(base, str)
62.                 else base
63.                 for base in self.bases
64.             ),
65.         )
66.         _check_for_duplicates("managers", (name for name, _ in self.managers))
67. 
68.     def deconstruct(self):
69.         kwargs = {
70.             "name": self.name,
71.             "fields": self.fields,
72.         }
73.         if self.options:
74.             kwargs["options"] = self.options
75.         if self.bases and self.bases != (models.Model,):
76.             kwargs["bases"] = self.bases
77.         if self.managers and self.managers != [("objects", models.Manager())]:
78.             kwargs["managers"] = self.managers
79.         return (self.__class__.__qualname__, [], kwargs)
80. 
81.     def state_forwards(self, app_label, state):
82.         state.add_model(
83.             ModelState(
84.                 app_label,
85.                 self.name,
86.                 list(self.fields),
87.                 dict(self.options),
88.                 tuple(self.bases),
89.                 list(self.managers),
90.             )
91.         )
92. 
93.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
94.         model = to_state.apps.get_model(app_label, self.name)
95.         if self.allow_migrate_model(schema_editor.connection.alias, model):
96.             schema_editor.create_model(model)
97. 
98.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
99.         model = from_state.apps.get_model(app_label, self.name)
100.         if self.allow_migrate_model(schema_editor.connection.alias, model):
101.             schema_editor.delete_model(model)
102. 
103.     def describe(self):
104.         return "Create %smodel %s" % (
105.             "proxy " if self.options.get("proxy", False) else "",
106.             self.name,
107.         )
108. 
109.     @property
110.     def migration_name_fragment(self):
111.         return self.name_lower
112. 
113.     def references_model(self, name, app_label):
114.         name_lower = name.lower()
115.         if name_lower == self.name_lower:
116.             return True
117. 
118.         # Check we didn't inherit from the model
119.         reference_model_tuple = (app_label, name_lower)
120.         for base in self.bases:
121.             if (
122.                 base is not models.Model
123.                 and isinstance(base, (models.base.ModelBase, str))
124.                 and resolve_relation(base, app_label) == reference_model_tuple
125.             ):
126.                 return True
127. 
128.         # Check we have no FKs/M2Ms with it
129.         for _name, field in self.fields:
130.             if field_references(
131.                 (app_label, self.name_lower), field, reference_model_tuple
132.             ):
133.                 return True
134.         return False
135. 
136.     def reduce(self, operation, app_label):
137.         if (
138.             isinstance(operation, DeleteModel)
139.             and self.name_lower == operation.name_lower
140.             and not self.options.get("proxy", False)
141.         ):
142.             return []
143.         elif (
144.             isinstance(operation, RenameModel)
145.             and self.name_lower == operation.old_name_lower
146.         ):
147.             return [
148.                 CreateModel(
149.                     operation.new_name,
150.                     fields=self.fields,
151.                     options=self.options,
152.                     bases=self.bases,
153.                     managers=self.managers,
154.                 ),
155.             ]
156.         elif (
157.             isinstance(operation, AlterModelOptions)
158.             and self.name_lower == operation.name_lower
159.         ):
160.             options = {**self.options, **operation.options}
161.             for key in operation.ALTER_OPTION_KEYS:
162.                 if key not in operation.options:
163.                     options.pop(key, None)
164.             return [
165.                 CreateModel(
166.                     self.name,
167.                     fields=self.fields,
168.                     options=options,
169.                     bases=self.bases,
170.                     managers=self.managers,
171.                 ),
172.             ]
173.         elif (
174.             isinstance(operation, AlterModelManagers)
175.             and self.name_lower == operation.name_lower
176.         ):
177.             return [
178.                 CreateModel(
179.                     self.name,
180.                     fields=self.fields,
181.                     options=self.options,
182.                     bases=self.bases,
183.                     managers=operation.managers,
184.                 ),
185.             ]
186.         elif (
187.             isinstance(operation, AlterTogetherOptionOperation)
188.             and self.name_lower == operation.name_lower
189.         ):
190.             return [
191.                 CreateModel(
192.                     self.name,
193.                     fields=self.fields,
194.                     options={
195.                         **self.options,
196.                         **{operation.option_name: operation.option_value},
197.                     },
198.                     bases=self.bases,
199.                     managers=self.managers,
200.                 ),
201.             ]
202.         elif (
203.             isinstance(operation, AlterOrderWithRespectTo)
204.             and self.name_lower == operation.name_lower
205.         ):
206.             return [
207.                 CreateModel(
208.                     self.name,
209.                     fields=self.fields,
210.                     options={
211.                         **self.options,
212.                         "order_with_respect_to": operation.order_with_respect_to,
213.                     },
214.                     bases=self.bases,
215.                     managers=self.managers,
216.                 ),
217.             ]
218.         elif (
219.             isinstance(operation, FieldOperation)
220.             and self.name_lower == operation.model_name_lower
221.         ):
222.             if isinstance(operation, AddField):
223.                 return [
224.                     CreateModel(
225.                         self.name,
226.                         fields=self.fields + [(operation.name, operation.field)],
227.                         options=self.options,
228.                         bases=self.bases,
229.                         managers=self.managers,
230.                     ),
231.                 ]
232.             elif isinstance(operation, AlterField):
233.                 return [
234.                     CreateModel(
235.                         self.name,
236.                         fields=[
237.                             (n, operation.field if n == operation.name else v)
238.                             for n, v in self.fields
239.                         ],
240.                         options=self.options,
241.                         bases=self.bases,
242.                         managers=self.managers,
243.                     ),
244.                 ]
245.             elif isinstance(operation, RemoveField):
246.                 options = self.options.copy()
247.                 for option_name in ("unique_together", "index_together"):
248.                     option = options.pop(option_name, None)
249.                     if option:
250.                         option = set(
251.                             filter(
252.                                 bool,
253.                                 (
254.                                     tuple(
255.                                         f for f in fields if f != operation.name_lower
256.                                     )
257.                                     for fields in option
258.                                 ),
259.                             )
260.                         )
261.                         if option:
262.                             options[option_name] = option
263.                 order_with_respect_to = options.get("order_with_respect_to")
264.                 if order_with_respect_to == operation.name_lower:
265.                     del options["order_with_respect_to"]
266.                 return [
267.                     CreateModel(
268.                         self.name,
269.                         fields=[
270.                             (n, v)
271.                             for n, v in self.fields
272.                             if n.lower() != operation.name_lower
273.                         ],
274.                         options=options,
275.                         bases=self.bases,
276.                         managers=self.managers,
277.                     ),
278.                 ]
279.             elif isinstance(operation, RenameField):
280.                 options = self.options.copy()
281.                 for option_name in ("unique_together", "index_together"):
282.                     option = options.get(option_name)
283.                     if option:
284.                         options[option_name] = {
285.                             tuple(
286.                                 operation.new_name if f == operation.old_name else f
287.                                 for f in fields
288.                             )
289.                             for fields in option
290.                         }
291.                 order_with_respect_to = options.get("order_with_respect_to")
292.                 if order_with_respect_to == operation.old_name:
293.                     options["order_with_respect_to"] = operation.new_name
294.                 return [
295.                     CreateModel(
296.                         self.name,
297.                         fields=[
298.                             (operation.new_name if n == operation.old_name else n, v)
299.                             for n, v in self.fields
300.                         ],
301.                         options=options,
302.                         bases=self.bases,
303.                         managers=self.managers,
304.                     ),
305.                 ]
306.         return super().reduce(operation, app_label)
307. 
308. 
309. class DeleteModel(ModelOperation):
310.     """Drop a model's table."""
311. 
312.     def deconstruct(self):
313.         kwargs = {
314.             "name": self.name,
315.         }
316.         return (self.__class__.__qualname__, [], kwargs)
317. 
318.     def state_forwards(self, app_label, state):
319.         state.remove_model(app_label, self.name_lower)
320. 
321.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
322.         model = from_state.apps.get_model(app_label, self.name)
323.         if self.allow_migrate_model(schema_editor.connection.alias, model):
324.             schema_editor.delete_model(model)
325. 
326.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
327.         model = to_state.apps.get_model(app_label, self.name)
328.         if self.allow_migrate_model(schema_editor.connection.alias, model):
329.             schema_editor.create_model(model)
330. 
331.     def references_model(self, name, app_label):
332.         # The deleted model could be referencing the specified model through
333.         # related fields.
334.         return True
335. 
336.     def describe(self):
337.         return "Delete model %s" % self.name
338. 
339.     @property
340.     def migration_name_fragment(self):
341.         return "delete_%s" % self.name_lower
342. 
343. 
344. class RenameModel(ModelOperation):
345.     """Rename a model."""
346. 
347.     def __init__(self, old_name, new_name):
348.         self.old_name = old_name
349.         self.new_name = new_name
350.         super().__init__(old_name)
351. 
352.     @cached_property
353.     def old_name_lower(self):
354.         return self.old_name.lower()
355. 
356.     @cached_property
357.     def new_name_lower(self):
358.         return self.new_name.lower()
359. 
360.     def deconstruct(self):
361.         kwargs = {
362.             "old_name": self.old_name,
363.             "new_name": self.new_name,
364.         }
365.         return (self.__class__.__qualname__, [], kwargs)
366. 
367.     def state_forwards(self, app_label, state):
368.         state.rename_model(app_label, self.old_name, self.new_name)
369. 
370.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
371.         new_model = to_state.apps.get_model(app_label, self.new_name)
372.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
373.             old_model = from_state.apps.get_model(app_label, self.old_name)
374.             old_db_table = old_model._meta.db_table
375.             new_db_table = new_model._meta.db_table
376.             # Don't alter when a table name is not changed.
377.             if old_db_table == new_db_table:
378.                 return
379.             # Move the main table
380.             schema_editor.alter_db_table(new_model, old_db_table, new_db_table)
381.             # Alter the fields pointing to us
382.             for related_object in old_model._meta.related_objects:
383.                 if related_object.related_model == old_model:
384.                     model = new_model
385.                     related_key = (app_label, self.new_name_lower)
386.                 else:
387.                     model = related_object.related_model
388.                     related_key = (
389.                         related_object.related_model._meta.app_label,
390.                         related_object.related_model._meta.model_name,
391.                     )
392.                 to_field = to_state.apps.get_model(*related_key)._meta.get_field(
393.                     related_object.field.name
394.                 )
395.                 schema_editor.alter_field(
396.                     model,
397.                     related_object.field,
398.                     to_field,
399.                 )
400.             # Rename M2M fields whose name is based on this model's name.
401.             fields = zip(
402.                 old_model._meta.local_many_to_many, new_model._meta.local_many_to_many
403.             )
404.             for (old_field, new_field) in fields:
405.                 # Skip self-referential fields as these are renamed above.
406.                 if (
407.                     new_field.model == new_field.related_model
408.                     or not new_field.remote_field.through._meta.auto_created
409.                 ):
410.                     continue
411.                 # Rename the M2M table that's based on this model's name.
412.                 old_m2m_model = old_field.remote_field.through
413.                 new_m2m_model = new_field.remote_field.through
414.                 schema_editor.alter_db_table(
415.                     new_m2m_model,
416.                     old_m2m_model._meta.db_table,
417.                     new_m2m_model._meta.db_table,
418.                 )
419.                 # Rename the column in the M2M table that's based on this
420.                 # model's name.
421.                 schema_editor.alter_field(
422.                     new_m2m_model,
423.                     old_m2m_model._meta.get_field(old_model._meta.model_name),
424.                     new_m2m_model._meta.get_field(new_model._meta.model_name),
425.                 )
426. 
427.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
428.         self.new_name_lower, self.old_name_lower = (
429.             self.old_name_lower,
430.             self.new_name_lower,
431.         )
432.         self.new_name, self.old_name = self.old_name, self.new_name
433. 
434.         self.database_forwards(app_label, schema_editor, from_state, to_state)
435. 
436.         self.new_name_lower, self.old_name_lower = (
437.             self.old_name_lower,
438.             self.new_name_lower,
439.         )
440.         self.new_name, self.old_name = self.old_name, self.new_name
441. 
442.     def references_model(self, name, app_label):
443.         return (
444.             name.lower() == self.old_name_lower or name.lower() == self.new_name_lower
445.         )
446. 
447.     def describe(self):
448.         return "Rename model %s to %s" % (self.old_name, self.new_name)
449. 
450.     @property
451.     def migration_name_fragment(self):
452.         return "rename_%s_%s" % (self.old_name_lower, self.new_name_lower)
453. 
454.     def reduce(self, operation, app_label):
455.         if (
456.             isinstance(operation, RenameModel)
457.             and self.new_name_lower == operation.old_name_lower
458.         ):
459.             return [
460.                 RenameModel(
461.                     self.old_name,
462.                     operation.new_name,
463.                 ),
464.             ]
465.         # Skip `ModelOperation.reduce` as we want to run `references_model`
466.         # against self.new_name.
467.         return super(ModelOperation, self).reduce(
468.             operation, app_label
469.         ) or not operation.references_model(self.new_name, app_label)
470. 
471. 
472. class ModelOptionOperation(ModelOperation):
473.     def reduce(self, operation, app_label):
474.         if (
475.             isinstance(operation, (self.__class__, DeleteModel))
476.             and self.name_lower == operation.name_lower
477.         ):
478.             return [operation]
479.         return super().reduce(operation, app_label)
480. 
481. 
482. class AlterModelTable(ModelOptionOperation):
483.     """Rename a model's table."""
484. 
485.     def __init__(self, name, table):
486.         self.table = table
487.         super().__init__(name)
488. 
489.     def deconstruct(self):
490.         kwargs = {
491.             "name": self.name,
492.             "table": self.table,
493.         }
494.         return (self.__class__.__qualname__, [], kwargs)
495. 
496.     def state_forwards(self, app_label, state):
497.         state.alter_model_options(app_label, self.name_lower, {"db_table": self.table})
498. 
499.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
500.         new_model = to_state.apps.get_model(app_label, self.name)


File: django/db/models/indexes.py
Line number range: 1 - 295
Content:
1. from django.db.backends.utils import names_digest, split_identifier
2. from django.db.models.expressions import Col, ExpressionList, F, Func, OrderBy
3. from django.db.models.functions import Collate
4. from django.db.models.query_utils import Q
5. from django.db.models.sql import Query
6. from django.utils.functional import partition
7. 
8. __all__ = ["Index"]
9. 
10. 
11. class Index:
12.     suffix = "idx"
13.     # The max length of the name of the index (restricted to 30 for
14.     # cross-database compatibility with Oracle)
15.     max_name_length = 30
16. 
17.     def __init__(
18.         self,
19.         *expressions,
20.         fields=(),
21.         name=None,
22.         db_tablespace=None,
23.         opclasses=(),
24.         condition=None,
25.         include=None,
26.     ):
27.         if opclasses and not name:
28.             raise ValueError("An index must be named to use opclasses.")
29.         if not isinstance(condition, (type(None), Q)):
30.             raise ValueError("Index.condition must be a Q instance.")
31.         if condition and not name:
32.             raise ValueError("An index must be named to use condition.")
33.         if not isinstance(fields, (list, tuple)):
34.             raise ValueError("Index.fields must be a list or tuple.")
35.         if not isinstance(opclasses, (list, tuple)):
36.             raise ValueError("Index.opclasses must be a list or tuple.")
37.         if not expressions and not fields:
38.             raise ValueError(
39.                 "At least one field or expression is required to define an index."
40.             )
41.         if expressions and fields:
42.             raise ValueError(
43.                 "Index.fields and expressions are mutually exclusive.",
44.             )
45.         if expressions and not name:
46.             raise ValueError("An index must be named to use expressions.")
47.         if expressions and opclasses:
48.             raise ValueError(
49.                 "Index.opclasses cannot be used with expressions. Use "
50.                 "django.contrib.postgres.indexes.OpClass() instead."
51.             )
52.         if opclasses and len(fields) != len(opclasses):
53.             raise ValueError(
54.                 "Index.fields and Index.opclasses must have the same number of "
55.                 "elements."
56.             )
57.         if fields and not all(isinstance(field, str) for field in fields):
58.             raise ValueError("Index.fields must contain only strings with field names.")
59.         if include and not name:
60.             raise ValueError("A covering index must be named.")
61.         if not isinstance(include, (type(None), list, tuple)):
62.             raise ValueError("Index.include must be a list or tuple.")
63.         self.fields = list(fields)
64.         # A list of 2-tuple with the field name and ordering ('' or 'DESC').
65.         self.fields_orders = [
66.             (field_name[1:], "DESC") if field_name.startswith("-") else (field_name, "")
67.             for field_name in self.fields
68.         ]
69.         self.name = name or ""
70.         self.db_tablespace = db_tablespace
71.         self.opclasses = opclasses
72.         self.condition = condition
73.         self.include = tuple(include) if include else ()
74.         self.expressions = tuple(
75.             F(expression) if isinstance(expression, str) else expression
76.             for expression in expressions
77.         )
78. 
79.     @property
80.     def contains_expressions(self):
81.         return bool(self.expressions)
82. 
83.     def _get_condition_sql(self, model, schema_editor):
84.         if self.condition is None:
85.             return None
86.         query = Query(model=model, alias_cols=False)
87.         where = query.build_where(self.condition)
88.         compiler = query.get_compiler(connection=schema_editor.connection)
89.         sql, params = where.as_sql(compiler, schema_editor.connection)
90.         return sql % tuple(schema_editor.quote_value(p) for p in params)
91. 
92.     def create_sql(self, model, schema_editor, using="", **kwargs):
93.         include = [
94.             model._meta.get_field(field_name).column for field_name in self.include
95.         ]
96.         condition = self._get_condition_sql(model, schema_editor)
97.         if self.expressions:
98.             index_expressions = []
99.             for expression in self.expressions:
100.                 index_expression = IndexExpression(expression)
101.                 index_expression.set_wrapper_classes(schema_editor.connection)
102.                 index_expressions.append(index_expression)
103.             expressions = ExpressionList(*index_expressions).resolve_expression(
104.                 Query(model, alias_cols=False),
105.             )
106.             fields = None
107.             col_suffixes = None
108.         else:
109.             fields = [
110.                 model._meta.get_field(field_name)
111.                 for field_name, _ in self.fields_orders
112.             ]
113.             if schema_editor.connection.features.supports_index_column_ordering:
114.                 col_suffixes = [order[1] for order in self.fields_orders]
115.             else:
116.                 col_suffixes = [""] * len(self.fields_orders)
117.             expressions = None
118.         return schema_editor._create_index_sql(
119.             model,
120.             fields=fields,
121.             name=self.name,
122.             using=using,
123.             db_tablespace=self.db_tablespace,
124.             col_suffixes=col_suffixes,
125.             opclasses=self.opclasses,
126.             condition=condition,
127.             include=include,
128.             expressions=expressions,
129.             **kwargs,
130.         )
131. 
132.     def remove_sql(self, model, schema_editor, **kwargs):
133.         return schema_editor._delete_index_sql(model, self.name, **kwargs)
134. 
135.     def deconstruct(self):
136.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__name__)
137.         path = path.replace("django.db.models.indexes", "django.db.models")
138.         kwargs = {"name": self.name}
139.         if self.fields:
140.             kwargs["fields"] = self.fields
141.         if self.db_tablespace is not None:
142.             kwargs["db_tablespace"] = self.db_tablespace
143.         if self.opclasses:
144.             kwargs["opclasses"] = self.opclasses
145.         if self.condition:
146.             kwargs["condition"] = self.condition
147.         if self.include:
148.             kwargs["include"] = self.include
149.         return (path, self.expressions, kwargs)
150. 
151.     def clone(self):
152.         """Create a copy of this Index."""
153.         _, args, kwargs = self.deconstruct()
154.         return self.__class__(*args, **kwargs)
155. 
156.     def set_name_with_model(self, model):
157.         """
158.         Generate a unique name for the index.
159. 
160.         The name is divided into 3 parts - table name (12 chars), field name
161.         (8 chars) and unique hash + suffix (10 chars). Each part is made to
162.         fit its size by truncating the excess length.
163.         """
164.         _, table_name = split_identifier(model._meta.db_table)
165.         column_names = [
166.             model._meta.get_field(field_name).column
167.             for field_name, order in self.fields_orders
168.         ]
169.         column_names_with_order = [
170.             (("-%s" if order else "%s") % column_name)
171.             for column_name, (field_name, order) in zip(
172.                 column_names, self.fields_orders
173.             )
174.         ]
175.         # The length of the parts of the name is based on the default max
176.         # length of 30 characters.
177.         hash_data = [table_name] + column_names_with_order + [self.suffix]
178.         self.name = "%s_%s_%s" % (
179.             table_name[:11],
180.             column_names[0][:7],
181.             "%s_%s" % (names_digest(*hash_data, length=6), self.suffix),
182.         )
183.         if len(self.name) > self.max_name_length:
184.             raise ValueError(
185.                 "Index too long for multiple database support. Is self.suffix "
186.                 "longer than 3 characters?"
187.             )
188.         if self.name[0] == "_" or self.name[0].isdigit():
189.             self.name = "D%s" % self.name[1:]
190. 
191.     def __repr__(self):
192.         return "<%s:%s%s%s%s%s%s%s>" % (
193.             self.__class__.__qualname__,
194.             "" if not self.fields else " fields=%s" % repr(self.fields),
195.             "" if not self.expressions else " expressions=%s" % repr(self.expressions),
196.             "" if not self.name else " name=%s" % repr(self.name),
197.             ""
198.             if self.db_tablespace is None
199.             else " db_tablespace=%s" % repr(self.db_tablespace),
200.             "" if self.condition is None else " condition=%s" % self.condition,
201.             "" if not self.include else " include=%s" % repr(self.include),
202.             "" if not self.opclasses else " opclasses=%s" % repr(self.opclasses),
203.         )
204. 
205.     def __eq__(self, other):
206.         if self.__class__ == other.__class__:
207.             return self.deconstruct() == other.deconstruct()
208.         return NotImplemented
209. 
210. 
211. class IndexExpression(Func):
212.     """Order and wrap expressions for CREATE INDEX statements."""
213. 
214.     template = "%(expressions)s"
215.     wrapper_classes = (OrderBy, Collate)
216. 
217.     def set_wrapper_classes(self, connection=None):
218.         # Some databases (e.g. MySQL) treats COLLATE as an indexed expression.
219.         if connection and connection.features.collate_as_index_expression:
220.             self.wrapper_classes = tuple(
221.                 [
222.                     wrapper_cls
223.                     for wrapper_cls in self.wrapper_classes
224.                     if wrapper_cls is not Collate
225.                 ]
226.             )
227. 
228.     @classmethod
229.     def register_wrappers(cls, *wrapper_classes):
230.         cls.wrapper_classes = wrapper_classes
231. 
232.     def resolve_expression(
233.         self,
234.         query=None,
235.         allow_joins=True,
236.         reuse=None,
237.         summarize=False,
238.         for_save=False,
239.     ):
240.         expressions = list(self.flatten())
241.         # Split expressions and wrappers.
242.         index_expressions, wrappers = partition(
243.             lambda e: isinstance(e, self.wrapper_classes),
244.             expressions,
245.         )
246.         wrapper_types = [type(wrapper) for wrapper in wrappers]
247.         if len(wrapper_types) != len(set(wrapper_types)):
248.             raise ValueError(
249.                 "Multiple references to %s can't be used in an indexed "
250.                 "expression."
251.                 % ", ".join(
252.                     [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]
253.                 )
254.             )
255.         if expressions[1 : len(wrappers) + 1] != wrappers:
256.             raise ValueError(
257.                 "%s must be topmost expressions in an indexed expression."
258.                 % ", ".join(
259.                     [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]
260.                 )
261.             )
262.         # Wrap expressions in parentheses if they are not column references.
263.         root_expression = index_expressions[1]
264.         resolve_root_expression = root_expression.resolve_expression(
265.             query,
266.             allow_joins,
267.             reuse,
268.             summarize,
269.             for_save,
270.         )
271.         if not isinstance(resolve_root_expression, Col):
272.             root_expression = Func(root_expression, template="(%(expressions)s)")
273. 
274.         if wrappers:
275.             # Order wrappers and set their expressions.
276.             wrappers = sorted(
277.                 wrappers,
278.                 key=lambda w: self.wrapper_classes.index(type(w)),
279.             )
280.             wrappers = [wrapper.copy() for wrapper in wrappers]
281.             for i, wrapper in enumerate(wrappers[:-1]):
282.                 wrapper.set_source_expressions([wrappers[i + 1]])
283.             # Set the root expression on the deepest wrapper.
284.             wrappers[-1].set_source_expressions([root_expression])
285.             self.set_source_expressions([wrappers[0]])
286.         else:
287.             # Use the root expression, if there are no wrappers.
288.             self.set_source_expressions([root_expression])
289.         return super().resolve_expression(
290.             query, allow_joins, reuse, summarize, for_save
291.         )
292. 
293.     def as_sqlite(self, compiler, connection, **extra_context):
294.         # Casting to numeric is unnecessary.
295.         return self.as_sql(compiler, connection, **extra_context)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 01:28:05,914 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of this file to understand the implementation of the `RenameIndex` operation and its dependencies.', relative_path='django/db/backends/base/schema.py', start_line=1, end_line=500), ContextOutput(reasoning='The user requested the full content of this file to understand the implementation of the `RenameIndex` operation and its dependencies.', relative_path='django/db/backends/postgresql/schema.py', start_line=1, end_line=299), ContextOutput(reasoning='The user requested the full content of this file to understand the implementation of the `RenameIndex` operation and its dependencies.', relative_path='django/db/migrations/operations/models.py', start_line=1, end_line=500), ContextOutput(reasoning='The user requested the full content of this file to understand the implementation of the `RenameIndex` operation and its dependencies.', relative_path='django/db/models/indexes.py', start_line=1, end_line=295)]
2025-12-24 01:28:05,917 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 4 contexts to memory for query: Please provide the full content of the files `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`.
2025-12-24 01:28:05,917 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 01:28:05,917 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 01:28:05,917 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 4 new contexts to 0 existing contexts
2025-12-24 01:28:05,917 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-24 01:28:05,918 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       ├── schedule_tests.yml
|       ├── schedules.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── optimizemigration.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _functions.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── csrf.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.26.txt
|   |   ├── 2.2.27.txt
|   |   ├── 2.2.28.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.11.txt
|   |   ├── 3.2.12.txt
|   |   ├── 3.2.13.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.2.txt
|   |   ├── 4.0.3.txt
|   |   ├── 4.0.4.txt
|   |   ├── 4.0.5.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_prevent_double_submission.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── async_queryset
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   ├── with_many_to_many.py
    |   |   └── with_unique_constraint.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_functions.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_migrations.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_csrf_cookie_masked.py
    |   ├── test_middleware_mixin.py
    |   ├── test_use_l10n.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       ├── custom_widget.html
    |   |       ├── cyclic_context_boundfield_render.html
    |   |       ├── error.html
    |   |       ├── form_snippet.html
    |   |       ├── legend_test.html
    |   |       └── use_fieldset.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_deprecation_forms.py
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoadmin_deprecated
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_manual_porting
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_noop
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_no_replaces
    |   |   ├── 0001_squashed_0002.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   ├── custom_sitemap_index.xml
    |   |   └── custom_sitemap_lastmod_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_debug.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: RenameIndex() crashes when unnamed index is moving backward and forward.

Description: Description
	
RenameIndex() should restore the old auto-generated name when an unnamed index for unique_together is moving backward. Now re-applying RenameIndex() crashes. For example:
tests/migrations/test_operations.py
diff --git a/tests/migrations/test_operations.py b/tests/migrations/test_operations.py
index cfd28b1b39..c0a55023bb 100644
					
					 a
				 
					
					 b
				 
 class OperationTests(OperationTestBase): 
29882988        with connection.schema_editor() as editor, self.assertNumQueries(0):
29892989            operation.database_backwards(app_label, editor, new_state, project_state)
29902990        self.assertIndexNameExists(table_name, "new_pony_test_idx")
 2991        # Re-apply renaming.
 2992        with connection.schema_editor() as editor:
 2993            operation.database_forwards(app_label, editor, project_state, new_state)
 2994        self.assertIndexNameExists(table_name, "new_pony_test_idx")
29912995        # Deconstruction.
29922996        definition = operation.deconstruct()
29932997        self.assertEqual(definition[0], "RenameIndex")
crashes on PostgreSQL:
django.db.utils.ProgrammingError: relation "new_pony_test_idx" already exists

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index d17232e4ec..3c8208e0d8 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -963,11 +963,27 @@ class RenameIndex(IndexOperation):
 
         to_model_state = to_state.models[app_label, self.model_name_lower]
         new_index = to_model_state.get_index_by_name(self.new_name)
+        # Skip renaming if the resolved index names are identical.
+        if old_index.name == new_index.name:
+            return
         schema_editor.rename_index(model, old_index, new_index)
 
     def database_backwards(self, app_label, schema_editor, from_state, to_state):
         if self.old_fields:
-            # Backward operation with unnamed index is a no-op.
+            # Restore the auto-generated name for the unnamed index when reversing.
+            model = to_state.apps.get_model(app_label, self.model_name)
+            if not self.allow_migrate_model(schema_editor.connection.alias, model):
+                return
+            # Compute the expected auto-generated index name for the historical model.
+            to_model = to_state.apps.get_model(app_label, self.model_name)
+            auto_index = models.Index(fields=self.old_fields)
+            auto_index.set_name_with_model(to_model)
+            # Current index in the database is expected to have the explicit new name.
+            current_index = models.Index(fields=self.old_fields, name=self.new_name)
+            # Skip if names already match.
+            if current_index.name == auto_index.name:
+                return
+            schema_editor.rename_index(model, current_index, auto_index)
             return
 
         self.new_name_lower, self.old_name_lower = (


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the files `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`.
Extra Requirements: 
Purpose: I need these files to understand the implementation of the `RenameIndex` operation and its dependencies to analyze and fix the reported bug.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/backends/base/schema.py
Line number range: 1 - 500
Content:
1. import logging
2. import operator
3. from datetime import datetime
4. 
5. from django.db.backends.ddl_references import (
6.     Columns,
7.     Expressions,
8.     ForeignKeyName,
9.     IndexName,
10.     Statement,
11.     Table,
12. )
13. from django.db.backends.utils import names_digest, split_identifier
14. from django.db.models import Deferrable, Index
15. from django.db.models.sql import Query
16. from django.db.transaction import TransactionManagementError, atomic
17. from django.utils import timezone
18. 
19. logger = logging.getLogger("django.db.backends.schema")
20. 
21. 
22. def _is_relevant_relation(relation, altered_field):
23.     """
24.     When altering the given field, must constraints on its model from the given
25.     relation be temporarily dropped?
26.     """
27.     field = relation.field
28.     if field.many_to_many:
29.         # M2M reverse field
30.         return False
31.     if altered_field.primary_key and field.to_fields == [None]:
32.         # Foreign key constraint on the primary key, which is being altered.
33.         return True
34.     # Is the constraint targeting the field being altered?
35.     return altered_field.name in field.to_fields
36. 
37. 
38. def _all_related_fields(model):
39.     # Related fields must be returned in a deterministic order.
40.     return sorted(
41.         model._meta._get_fields(
42.             forward=False,
43.             reverse=True,
44.             include_hidden=True,
45.             include_parents=False,
46.         ),
47.         key=operator.attrgetter("name"),
48.     )
49. 
50. 
51. def _related_non_m2m_objects(old_field, new_field):
52.     # Filter out m2m objects from reverse relations.
53.     # Return (old_relation, new_relation) tuples.
54.     related_fields = zip(
55.         (
56.             obj
57.             for obj in _all_related_fields(old_field.model)
58.             if _is_relevant_relation(obj, old_field)
59.         ),
60.         (
61.             obj
62.             for obj in _all_related_fields(new_field.model)
63.             if _is_relevant_relation(obj, new_field)
64.         ),
65.     )
66.     for old_rel, new_rel in related_fields:
67.         yield old_rel, new_rel
68.         yield from _related_non_m2m_objects(
69.             old_rel.remote_field,
70.             new_rel.remote_field,
71.         )
72. 
73. 
74. class BaseDatabaseSchemaEditor:
75.     """
76.     This class and its subclasses are responsible for emitting schema-changing
77.     statements to the databases - model creation/removal/alteration, field
78.     renaming, index fiddling, and so on.
79.     """
80. 
81.     # Overrideable SQL templates
82.     sql_create_table = "CREATE TABLE %(table)s (%(definition)s)"
83.     sql_rename_table = "ALTER TABLE %(old_table)s RENAME TO %(new_table)s"
84.     sql_retablespace_table = "ALTER TABLE %(table)s SET TABLESPACE %(new_tablespace)s"
85.     sql_delete_table = "DROP TABLE %(table)s CASCADE"
86. 
87.     sql_create_column = "ALTER TABLE %(table)s ADD COLUMN %(column)s %(definition)s"
88.     sql_alter_column = "ALTER TABLE %(table)s %(changes)s"
89.     sql_alter_column_type = "ALTER COLUMN %(column)s TYPE %(type)s"
90.     sql_alter_column_null = "ALTER COLUMN %(column)s DROP NOT NULL"
91.     sql_alter_column_not_null = "ALTER COLUMN %(column)s SET NOT NULL"
92.     sql_alter_column_default = "ALTER COLUMN %(column)s SET DEFAULT %(default)s"
93.     sql_alter_column_no_default = "ALTER COLUMN %(column)s DROP DEFAULT"
94.     sql_alter_column_no_default_null = sql_alter_column_no_default
95.     sql_alter_column_collate = "ALTER COLUMN %(column)s TYPE %(type)s%(collation)s"
96.     sql_delete_column = "ALTER TABLE %(table)s DROP COLUMN %(column)s CASCADE"
97.     sql_rename_column = (
98.         "ALTER TABLE %(table)s RENAME COLUMN %(old_column)s TO %(new_column)s"
99.     )
100.     sql_update_with_default = (
101.         "UPDATE %(table)s SET %(column)s = %(default)s WHERE %(column)s IS NULL"
102.     )
103. 
104.     sql_unique_constraint = "UNIQUE (%(columns)s)%(deferrable)s"
105.     sql_check_constraint = "CHECK (%(check)s)"
106.     sql_delete_constraint = "ALTER TABLE %(table)s DROP CONSTRAINT %(name)s"
107.     sql_constraint = "CONSTRAINT %(name)s %(constraint)s"
108. 
109.     sql_create_check = "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s CHECK (%(check)s)"
110.     sql_delete_check = sql_delete_constraint
111. 
112.     sql_create_unique = (
113.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s "
114.         "UNIQUE (%(columns)s)%(deferrable)s"
115.     )
116.     sql_delete_unique = sql_delete_constraint
117. 
118.     sql_create_fk = (
119.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s FOREIGN KEY (%(column)s) "
120.         "REFERENCES %(to_table)s (%(to_column)s)%(deferrable)s"
121.     )
122.     sql_create_inline_fk = None
123.     sql_create_column_inline_fk = None
124.     sql_delete_fk = sql_delete_constraint
125. 
126.     sql_create_index = (
127.         "CREATE INDEX %(name)s ON %(table)s "
128.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
129.     )
130.     sql_create_unique_index = (
131.         "CREATE UNIQUE INDEX %(name)s ON %(table)s "
132.         "(%(columns)s)%(include)s%(condition)s"
133.     )
134.     sql_rename_index = "ALTER INDEX %(old_name)s RENAME TO %(new_name)s"
135.     sql_delete_index = "DROP INDEX %(name)s"
136. 
137.     sql_create_pk = (
138.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s PRIMARY KEY (%(columns)s)"
139.     )
140.     sql_delete_pk = sql_delete_constraint
141. 
142.     sql_delete_procedure = "DROP PROCEDURE %(procedure)s"
143. 
144.     def __init__(self, connection, collect_sql=False, atomic=True):
145.         self.connection = connection
146.         self.collect_sql = collect_sql
147.         if self.collect_sql:
148.             self.collected_sql = []
149.         self.atomic_migration = self.connection.features.can_rollback_ddl and atomic
150. 
151.     # State-managing methods
152. 
153.     def __enter__(self):
154.         self.deferred_sql = []
155.         if self.atomic_migration:
156.             self.atomic = atomic(self.connection.alias)
157.             self.atomic.__enter__()
158.         return self
159. 
160.     def __exit__(self, exc_type, exc_value, traceback):
161.         if exc_type is None:
162.             for sql in self.deferred_sql:
163.                 self.execute(sql)
164.         if self.atomic_migration:
165.             self.atomic.__exit__(exc_type, exc_value, traceback)
166. 
167.     # Core utility functions
168. 
169.     def execute(self, sql, params=()):
170.         """Execute the given SQL statement, with optional parameters."""
171.         # Don't perform the transactional DDL check if SQL is being collected
172.         # as it's not going to be executed anyway.
173.         if (
174.             not self.collect_sql
175.             and self.connection.in_atomic_block
176.             and not self.connection.features.can_rollback_ddl
177.         ):
178.             raise TransactionManagementError(
179.                 "Executing DDL statements while in a transaction on databases "
180.                 "that can't perform a rollback is prohibited."
181.             )
182.         # Account for non-string statement objects.
183.         sql = str(sql)
184.         # Log the command we're running, then run it
185.         logger.debug(
186.             "%s; (params %r)", sql, params, extra={"params": params, "sql": sql}
187.         )
188.         if self.collect_sql:
189.             ending = "" if sql.rstrip().endswith(";") else ";"
190.             if params is not None:
191.                 self.collected_sql.append(
192.                     (sql % tuple(map(self.quote_value, params))) + ending
193.                 )
194.             else:
195.                 self.collected_sql.append(sql + ending)
196.         else:
197.             with self.connection.cursor() as cursor:
198.                 cursor.execute(sql, params)
199. 
200.     def quote_name(self, name):
201.         return self.connection.ops.quote_name(name)
202. 
203.     def table_sql(self, model):
204.         """Take a model and return its table definition."""
205.         # Add any unique_togethers (always deferred, as some fields might be
206.         # created afterward, like geometry fields with some backends).
207.         for field_names in model._meta.unique_together:
208.             fields = [model._meta.get_field(field) for field in field_names]
209.             self.deferred_sql.append(self._create_unique_sql(model, fields))
210.         # Create column SQL, add FK deferreds if needed.
211.         column_sqls = []
212.         params = []
213.         for field in model._meta.local_fields:
214.             # SQL.
215.             definition, extra_params = self.column_sql(model, field)
216.             if definition is None:
217.                 continue
218.             # Check constraints can go on the column SQL here.
219.             db_params = field.db_parameters(connection=self.connection)
220.             if db_params["check"]:
221.                 definition += " " + self.sql_check_constraint % db_params
222.             # Autoincrement SQL (for backends with inline variant).
223.             col_type_suffix = field.db_type_suffix(connection=self.connection)
224.             if col_type_suffix:
225.                 definition += " %s" % col_type_suffix
226.             params.extend(extra_params)
227.             # FK.
228.             if field.remote_field and field.db_constraint:
229.                 to_table = field.remote_field.model._meta.db_table
230.                 to_column = field.remote_field.model._meta.get_field(
231.                     field.remote_field.field_name
232.                 ).column
233.                 if self.sql_create_inline_fk:
234.                     definition += " " + self.sql_create_inline_fk % {
235.                         "to_table": self.quote_name(to_table),
236.                         "to_column": self.quote_name(to_column),
237.                     }
238.                 elif self.connection.features.supports_foreign_keys:
239.                     self.deferred_sql.append(
240.                         self._create_fk_sql(
241.                             model, field, "_fk_%(to_table)s_%(to_column)s"
242.                         )
243.                     )
244.             # Add the SQL to our big list.
245.             column_sqls.append(
246.                 "%s %s"
247.                 % (
248.                     self.quote_name(field.column),
249.                     definition,
250.                 )
251.             )
252.             # Autoincrement SQL (for backends with post table definition
253.             # variant).
254.             if field.get_internal_type() in (
255.                 "AutoField",
256.                 "BigAutoField",
257.                 "SmallAutoField",
258.             ):
259.                 autoinc_sql = self.connection.ops.autoinc_sql(
260.                     model._meta.db_table, field.column
261.                 )
262.                 if autoinc_sql:
263.                     self.deferred_sql.extend(autoinc_sql)
264.         constraints = [
265.             constraint.constraint_sql(model, self)
266.             for constraint in model._meta.constraints
267.         ]
268.         sql = self.sql_create_table % {
269.             "table": self.quote_name(model._meta.db_table),
270.             "definition": ", ".join(
271.                 constraint for constraint in (*column_sqls, *constraints) if constraint
272.             ),
273.         }
274.         if model._meta.db_tablespace:
275.             tablespace_sql = self.connection.ops.tablespace_sql(
276.                 model._meta.db_tablespace
277.             )
278.             if tablespace_sql:
279.                 sql += " " + tablespace_sql
280.         return sql, params
281. 
282.     # Field <-> database mapping functions
283. 
284.     def _iter_column_sql(
285.         self, column_db_type, params, model, field, field_db_params, include_default
286.     ):
287.         yield column_db_type
288.         if collation := field_db_params.get("collation"):
289.             yield self._collate_sql(collation)
290.         # Work out nullability.
291.         null = field.null
292.         # Include a default value, if requested.
293.         include_default = (
294.             include_default
295.             and not self.skip_default(field)
296.             and
297.             # Don't include a default value if it's a nullable field and the
298.             # default cannot be dropped in the ALTER COLUMN statement (e.g.
299.             # MySQL longtext and longblob).
300.             not (null and self.skip_default_on_alter(field))
301.         )
302.         if include_default:
303.             default_value = self.effective_default(field)
304.             if default_value is not None:
305.                 column_default = "DEFAULT " + self._column_default_sql(field)
306.                 if self.connection.features.requires_literal_defaults:
307.                     # Some databases can't take defaults as a parameter (Oracle).
308.                     # If this is the case, the individual schema backend should
309.                     # implement prepare_default().
310.                     yield column_default % self.prepare_default(default_value)
311.                 else:
312.                     yield column_default
313.                     params.append(default_value)
314.         # Oracle treats the empty string ('') as null, so coerce the null
315.         # option whenever '' is a possible value.
316.         if (
317.             field.empty_strings_allowed
318.             and not field.primary_key
319.             and self.connection.features.interprets_empty_strings_as_nulls
320.         ):
321.             null = True
322.         if not null:
323.             yield "NOT NULL"
324.         elif not self.connection.features.implied_column_null:
325.             yield "NULL"
326.         if field.primary_key:
327.             yield "PRIMARY KEY"
328.         elif field.unique:
329.             yield "UNIQUE"
330.         # Optionally add the tablespace if it's an implicitly indexed column.
331.         tablespace = field.db_tablespace or model._meta.db_tablespace
332.         if (
333.             tablespace
334.             and self.connection.features.supports_tablespaces
335.             and field.unique
336.         ):
337.             yield self.connection.ops.tablespace_sql(tablespace, inline=True)
338. 
339.     def column_sql(self, model, field, include_default=False):
340.         """
341.         Return the column definition for a field. The field must already have
342.         had set_attributes_from_name() called.
343.         """
344.         # Get the column's type and use that as the basis of the SQL.
345.         field_db_params = field.db_parameters(connection=self.connection)
346.         column_db_type = field_db_params["type"]
347.         # Check for fields that aren't actually columns (e.g. M2M).
348.         if column_db_type is None:
349.             return None, None
350.         params = []
351.         return (
352.             " ".join(
353.                 # This appends to the params being returned.
354.                 self._iter_column_sql(
355.                     column_db_type,
356.                     params,
357.                     model,
358.                     field,
359.                     field_db_params,
360.                     include_default,
361.                 )
362.             ),
363.             params,
364.         )
365. 
366.     def skip_default(self, field):
367.         """
368.         Some backends don't accept default values for certain columns types
369.         (i.e. MySQL longtext and longblob).
370.         """
371.         return False
372. 
373.     def skip_default_on_alter(self, field):
374.         """
375.         Some backends don't accept default values for certain columns types
376.         (i.e. MySQL longtext and longblob) in the ALTER COLUMN statement.
377.         """
378.         return False
379. 
380.     def prepare_default(self, value):
381.         """
382.         Only used for backends which have requires_literal_defaults feature
383.         """
384.         raise NotImplementedError(
385.             "subclasses of BaseDatabaseSchemaEditor for backends which have "
386.             "requires_literal_defaults must provide a prepare_default() method"
387.         )
388. 
389.     def _column_default_sql(self, field):
390.         """
391.         Return the SQL to use in a DEFAULT clause. The resulting string should
392.         contain a '%s' placeholder for a default value.
393.         """
394.         return "%s"
395. 
396.     @staticmethod
397.     def _effective_default(field):
398.         # This method allows testing its logic without a connection.
399.         if field.has_default():
400.             default = field.get_default()
401.         elif not field.null and field.blank and field.empty_strings_allowed:
402.             if field.get_internal_type() == "BinaryField":
403.                 default = b""
404.             else:
405.                 default = ""
406.         elif getattr(field, "auto_now", False) or getattr(field, "auto_now_add", False):
407.             internal_type = field.get_internal_type()
408.             if internal_type == "DateTimeField":
409.                 default = timezone.now()
410.             else:
411.                 default = datetime.now()
412.                 if internal_type == "DateField":
413.                     default = default.date()
414.                 elif internal_type == "TimeField":
415.                     default = default.time()
416.         else:
417.             default = None
418.         return default
419. 
420.     def effective_default(self, field):
421.         """Return a field's effective database default value."""
422.         return field.get_db_prep_save(self._effective_default(field), self.connection)
423. 
424.     def quote_value(self, value):
425.         """
426.         Return a quoted version of the value so it's safe to use in an SQL
427.         string. This is not safe against injection from user code; it is
428.         intended only for use in making SQL scripts or preparing default values
429.         for particularly tricky backends (defaults are not user-defined, though,
430.         so this is safe).
431.         """
432.         raise NotImplementedError()
433. 
434.     # Actions
435. 
436.     def create_model(self, model):
437.         """
438.         Create a table and any accompanying indexes or unique constraints for
439.         the given `model`.
440.         """
441.         sql, params = self.table_sql(model)
442.         # Prevent using [] as params, in the case a literal '%' is used in the
443.         # definition.
444.         self.execute(sql, params or None)
445. 
446.         # Add any field index and index_together's (deferred as SQLite
447.         # _remake_table needs it).
448.         self.deferred_sql.extend(self._model_indexes_sql(model))
449. 
450.         # Make M2M tables
451.         for field in model._meta.local_many_to_many:
452.             if field.remote_field.through._meta.auto_created:
453.                 self.create_model(field.remote_field.through)
454. 
455.     def delete_model(self, model):
456.         """Delete a model from the database."""
457.         # Handle auto-created intermediary models
458.         for field in model._meta.local_many_to_many:
459.             if field.remote_field.through._meta.auto_created:
460.                 self.delete_model(field.remote_field.through)
461. 
462.         # Delete the table
463.         self.execute(
464.             self.sql_delete_table
465.             % {
466.                 "table": self.quote_name(model._meta.db_table),
467.             }
468.         )
469.         # Remove all deferred statements referencing the deleted table.
470.         for sql in list(self.deferred_sql):
471.             if isinstance(sql, Statement) and sql.references_table(
472.                 model._meta.db_table
473.             ):
474.                 self.deferred_sql.remove(sql)
475. 
476.     def add_index(self, model, index):
477.         """Add an index on a model."""
478.         if (
479.             index.contains_expressions
480.             and not self.connection.features.supports_expression_indexes
481.         ):
482.             return None
483.         # Index.create_sql returns interpolated SQL which makes params=None a
484.         # necessity to avoid escaping attempts on execution.
485.         self.execute(index.create_sql(model, self), params=None)
486. 
487.     def remove_index(self, model, index):
488.         """Remove an index from a model."""
489.         if (
490.             index.contains_expressions
491.             and not self.connection.features.supports_expression_indexes
492.         ):
493.             return None
494.         self.execute(index.remove_sql(model, self))
495. 
496.     def rename_index(self, model, old_index, new_index):
497.         if self.connection.features.can_rename_index:
498.             self.execute(
499.                 self._rename_index_sql(model, old_index.name, new_index.name),
500.                 params=None,


File: django/db/backends/postgresql/schema.py
Line number range: 1 - 299
Content:
1. import psycopg2
2. 
3. from django.db.backends.base.schema import BaseDatabaseSchemaEditor
4. from django.db.backends.ddl_references import IndexColumns
5. from django.db.backends.utils import strip_quotes
6. 
7. 
8. class DatabaseSchemaEditor(BaseDatabaseSchemaEditor):
9. 
10.     # Setting all constraints to IMMEDIATE to allow changing data in the same
11.     # transaction.
12.     sql_update_with_default = (
13.         "UPDATE %(table)s SET %(column)s = %(default)s WHERE %(column)s IS NULL"
14.         "; SET CONSTRAINTS ALL IMMEDIATE"
15.     )
16. 
17.     sql_delete_sequence = "DROP SEQUENCE IF EXISTS %(sequence)s CASCADE"
18. 
19.     sql_create_index = (
20.         "CREATE INDEX %(name)s ON %(table)s%(using)s "
21.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
22.     )
23.     sql_create_index_concurrently = (
24.         "CREATE INDEX CONCURRENTLY %(name)s ON %(table)s%(using)s "
25.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
26.     )
27.     sql_delete_index = "DROP INDEX IF EXISTS %(name)s"
28.     sql_delete_index_concurrently = "DROP INDEX CONCURRENTLY IF EXISTS %(name)s"
29. 
30.     # Setting the constraint to IMMEDIATE to allow changing data in the same
31.     # transaction.
32.     sql_create_column_inline_fk = (
33.         "CONSTRAINT %(name)s REFERENCES %(to_table)s(%(to_column)s)%(deferrable)s"
34.         "; SET CONSTRAINTS %(namespace)s%(name)s IMMEDIATE"
35.     )
36.     # Setting the constraint to IMMEDIATE runs any deferred checks to allow
37.     # dropping it in the same transaction.
38.     sql_delete_fk = (
39.         "SET CONSTRAINTS %(name)s IMMEDIATE; "
40.         "ALTER TABLE %(table)s DROP CONSTRAINT %(name)s"
41.     )
42.     sql_delete_procedure = "DROP FUNCTION %(procedure)s(%(param_types)s)"
43. 
44.     sql_add_identity = (
45.         "ALTER TABLE %(table)s ALTER COLUMN %(column)s ADD "
46.         "GENERATED BY DEFAULT AS IDENTITY"
47.     )
48.     sql_drop_indentity = (
49.         "ALTER TABLE %(table)s ALTER COLUMN %(column)s DROP IDENTITY IF EXISTS"
50.     )
51. 
52.     def quote_value(self, value):
53.         if isinstance(value, str):
54.             value = value.replace("%", "%%")
55.         adapted = psycopg2.extensions.adapt(value)
56.         if hasattr(adapted, "encoding"):
57.             adapted.encoding = "utf8"
58.         # getquoted() returns a quoted bytestring of the adapted value.
59.         return adapted.getquoted().decode()
60. 
61.     def _field_indexes_sql(self, model, field):
62.         output = super()._field_indexes_sql(model, field)
63.         like_index_statement = self._create_like_index_sql(model, field)
64.         if like_index_statement is not None:
65.             output.append(like_index_statement)
66.         return output
67. 
68.     def _field_data_type(self, field):
69.         if field.is_relation:
70.             return field.rel_db_type(self.connection)
71.         return self.connection.data_types.get(
72.             field.get_internal_type(),
73.             field.db_type(self.connection),
74.         )
75. 
76.     def _field_base_data_types(self, field):
77.         # Yield base data types for array fields.
78.         if field.base_field.get_internal_type() == "ArrayField":
79.             yield from self._field_base_data_types(field.base_field)
80.         else:
81.             yield self._field_data_type(field.base_field)
82. 
83.     def _create_like_index_sql(self, model, field):
84.         """
85.         Return the statement to create an index with varchar operator pattern
86.         when the column type is 'varchar' or 'text', otherwise return None.
87.         """
88.         db_type = field.db_type(connection=self.connection)
89.         if db_type is not None and (field.db_index or field.unique):
90.             # Fields with database column types of `varchar` and `text` need
91.             # a second index that specifies their operator class, which is
92.             # needed when performing correct LIKE queries outside the
93.             # C locale. See #12234.
94.             #
95.             # The same doesn't apply to array fields such as varchar[size]
96.             # and text[size], so skip them.
97.             if "[" in db_type:
98.                 return None
99.             if db_type.startswith("varchar"):
100.                 return self._create_index_sql(
101.                     model,
102.                     fields=[field],
103.                     suffix="_like",
104.                     opclasses=["varchar_pattern_ops"],
105.                 )
106.             elif db_type.startswith("text"):
107.                 return self._create_index_sql(
108.                     model,
109.                     fields=[field],
110.                     suffix="_like",
111.                     opclasses=["text_pattern_ops"],
112.                 )
113.         return None
114. 
115.     def _alter_column_type_sql(self, model, old_field, new_field, new_type):
116.         self.sql_alter_column_type = "ALTER COLUMN %(column)s TYPE %(type)s"
117.         # Cast when data type changed.
118.         using_sql = " USING %(column)s::%(type)s"
119.         new_internal_type = new_field.get_internal_type()
120.         old_internal_type = old_field.get_internal_type()
121.         if new_internal_type == "ArrayField" and new_internal_type == old_internal_type:
122.             # Compare base data types for array fields.
123.             if list(self._field_base_data_types(old_field)) != list(
124.                 self._field_base_data_types(new_field)
125.             ):
126.                 self.sql_alter_column_type += using_sql
127.         elif self._field_data_type(old_field) != self._field_data_type(new_field):
128.             self.sql_alter_column_type += using_sql
129.         # Make ALTER TYPE with IDENTITY make sense.
130.         table = strip_quotes(model._meta.db_table)
131.         auto_field_types = {
132.             "AutoField",
133.             "BigAutoField",
134.             "SmallAutoField",
135.         }
136.         old_is_auto = old_internal_type in auto_field_types
137.         new_is_auto = new_internal_type in auto_field_types
138.         if new_is_auto and not old_is_auto:
139.             column = strip_quotes(new_field.column)
140.             return (
141.                 (
142.                     self.sql_alter_column_type
143.                     % {
144.                         "column": self.quote_name(column),
145.                         "type": new_type,
146.                     },
147.                     [],
148.                 ),
149.                 [
150.                     (
151.                         self.sql_add_identity
152.                         % {
153.                             "table": self.quote_name(table),
154.                             "column": self.quote_name(column),
155.                         },
156.                         [],
157.                     ),
158.                 ],
159.             )
160.         elif old_is_auto and not new_is_auto:
161.             # Drop IDENTITY if exists (pre-Django 4.1 serial columns don't have
162.             # it).
163.             self.execute(
164.                 self.sql_drop_indentity
165.                 % {
166.                     "table": self.quote_name(table),
167.                     "column": self.quote_name(strip_quotes(old_field.column)),
168.                 }
169.             )
170.             column = strip_quotes(new_field.column)
171.             sequence_name = "%s_%s_seq" % (table, column)
172.             fragment, _ = super()._alter_column_type_sql(
173.                 model, old_field, new_field, new_type
174.             )
175.             return fragment, [
176.                 (
177.                     # Drop the sequence if exists (Django 4.1+ identity columns
178.                     # don't have it).
179.                     self.sql_delete_sequence
180.                     % {
181.                         "sequence": self.quote_name(sequence_name),
182.                     },
183.                     [],
184.                 ),
185.             ]
186.         else:
187.             return super()._alter_column_type_sql(model, old_field, new_field, new_type)
188. 
189.     def _alter_field(
190.         self,
191.         model,
192.         old_field,
193.         new_field,
194.         old_type,
195.         new_type,
196.         old_db_params,
197.         new_db_params,
198.         strict=False,
199.     ):
200.         # Drop indexes on varchar/text/citext columns that are changing to a
201.         # different type.
202.         if (old_field.db_index or old_field.unique) and (
203.             (old_type.startswith("varchar") and not new_type.startswith("varchar"))
204.             or (old_type.startswith("text") and not new_type.startswith("text"))
205.             or (old_type.startswith("citext") and not new_type.startswith("citext"))
206.         ):
207.             index_name = self._create_index_name(
208.                 model._meta.db_table, [old_field.column], suffix="_like"
209.             )
210.             self.execute(self._delete_index_sql(model, index_name))
211. 
212.         super()._alter_field(
213.             model,
214.             old_field,
215.             new_field,
216.             old_type,
217.             new_type,
218.             old_db_params,
219.             new_db_params,
220.             strict,
221.         )
222.         # Added an index? Create any PostgreSQL-specific indexes.
223.         if (not (old_field.db_index or old_field.unique) and new_field.db_index) or (
224.             not old_field.unique and new_field.unique
225.         ):
226.             like_index_statement = self._create_like_index_sql(model, new_field)
227.             if like_index_statement is not None:
228.                 self.execute(like_index_statement)
229. 
230.         # Removed an index? Drop any PostgreSQL-specific indexes.
231.         if old_field.unique and not (new_field.db_index or new_field.unique):
232.             index_to_remove = self._create_index_name(
233.                 model._meta.db_table, [old_field.column], suffix="_like"
234.             )
235.             self.execute(self._delete_index_sql(model, index_to_remove))
236. 
237.     def _index_columns(self, table, columns, col_suffixes, opclasses):
238.         if opclasses:
239.             return IndexColumns(
240.                 table,
241.                 columns,
242.                 self.quote_name,
243.                 col_suffixes=col_suffixes,
244.                 opclasses=opclasses,
245.             )
246.         return super()._index_columns(table, columns, col_suffixes, opclasses)
247. 
248.     def add_index(self, model, index, concurrently=False):
249.         self.execute(
250.             index.create_sql(model, self, concurrently=concurrently), params=None
251.         )
252. 
253.     def remove_index(self, model, index, concurrently=False):
254.         self.execute(index.remove_sql(model, self, concurrently=concurrently))
255. 
256.     def _delete_index_sql(self, model, name, sql=None, concurrently=False):
257.         sql = (
258.             self.sql_delete_index_concurrently
259.             if concurrently
260.             else self.sql_delete_index
261.         )
262.         return super()._delete_index_sql(model, name, sql)
263. 
264.     def _create_index_sql(
265.         self,
266.         model,
267.         *,
268.         fields=None,
269.         name=None,
270.         suffix="",
271.         using="",
272.         db_tablespace=None,
273.         col_suffixes=(),
274.         sql=None,
275.         opclasses=(),
276.         condition=None,
277.         concurrently=False,
278.         include=None,
279.         expressions=None,
280.     ):
281.         sql = (
282.             self.sql_create_index
283.             if not concurrently
284.             else self.sql_create_index_concurrently
285.         )
286.         return super()._create_index_sql(
287.             model,
288.             fields=fields,
289.             name=name,
290.             suffix=suffix,
291.             using=using,
292.             db_tablespace=db_tablespace,
293.             col_suffixes=col_suffixes,
294.             sql=sql,
295.             opclasses=opclasses,
296.             condition=condition,
297.             include=include,
298.             expressions=expressions,
299.         )


File: django/db/migrations/operations/models.py
Line number range: 1 - 500
Content:
1. from django.db import models
2. from django.db.migrations.operations.base import Operation
3. from django.db.migrations.state import ModelState
4. from django.db.migrations.utils import field_references, resolve_relation
5. from django.db.models.options import normalize_together
6. from django.utils.functional import cached_property
7. 
8. from .fields import AddField, AlterField, FieldOperation, RemoveField, RenameField
9. 
10. 
11. def _check_for_duplicates(arg_name, objs):
12.     used_vals = set()
13.     for val in objs:
14.         if val in used_vals:
15.             raise ValueError(
16.                 "Found duplicate value %s in CreateModel %s argument." % (val, arg_name)
17.             )
18.         used_vals.add(val)
19. 
20. 
21. class ModelOperation(Operation):
22.     def __init__(self, name):
23.         self.name = name
24. 
25.     @cached_property
26.     def name_lower(self):
27.         return self.name.lower()
28. 
29.     def references_model(self, name, app_label):
30.         return name.lower() == self.name_lower
31. 
32.     def reduce(self, operation, app_label):
33.         return super().reduce(operation, app_label) or self.can_reduce_through(
34.             operation, app_label
35.         )
36. 
37.     def can_reduce_through(self, operation, app_label):
38.         return not operation.references_model(self.name, app_label)
39. 
40. 
41. class CreateModel(ModelOperation):
42.     """Create a model's table."""
43. 
44.     serialization_expand_args = ["fields", "options", "managers"]
45. 
46.     def __init__(self, name, fields, options=None, bases=None, managers=None):
47.         self.fields = fields
48.         self.options = options or {}
49.         self.bases = bases or (models.Model,)
50.         self.managers = managers or []
51.         super().__init__(name)
52.         # Sanity-check that there are no duplicated field names, bases, or
53.         # manager names
54.         _check_for_duplicates("fields", (name for name, _ in self.fields))
55.         _check_for_duplicates(
56.             "bases",
57.             (
58.                 base._meta.label_lower
59.                 if hasattr(base, "_meta")
60.                 else base.lower()
61.                 if isinstance(base, str)
62.                 else base
63.                 for base in self.bases
64.             ),
65.         )
66.         _check_for_duplicates("managers", (name for name, _ in self.managers))
67. 
68.     def deconstruct(self):
69.         kwargs = {
70.             "name": self.name,
71.             "fields": self.fields,
72.         }
73.         if self.options:
74.             kwargs["options"] = self.options
75.         if self.bases and self.bases != (models.Model,):
76.             kwargs["bases"] = self.bases
77.         if self.managers and self.managers != [("objects", models.Manager())]:
78.             kwargs["managers"] = self.managers
79.         return (self.__class__.__qualname__, [], kwargs)
80. 
81.     def state_forwards(self, app_label, state):
82.         state.add_model(
83.             ModelState(
84.                 app_label,
85.                 self.name,
86.                 list(self.fields),
87.                 dict(self.options),
88.                 tuple(self.bases),
89.                 list(self.managers),
90.             )
91.         )
92. 
93.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
94.         model = to_state.apps.get_model(app_label, self.name)
95.         if self.allow_migrate_model(schema_editor.connection.alias, model):
96.             schema_editor.create_model(model)
97. 
98.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
99.         model = from_state.apps.get_model(app_label, self.name)
100.         if self.allow_migrate_model(schema_editor.connection.alias, model):
101.             schema_editor.delete_model(model)
102. 
103.     def describe(self):
104.         return "Create %smodel %s" % (
105.             "proxy " if self.options.get("proxy", False) else "",
106.             self.name,
107.         )
108. 
109.     @property
110.     def migration_name_fragment(self):
111.         return self.name_lower
112. 
113.     def references_model(self, name, app_label):
114.         name_lower = name.lower()
115.         if name_lower == self.name_lower:
116.             return True
117. 
118.         # Check we didn't inherit from the model
119.         reference_model_tuple = (app_label, name_lower)
120.         for base in self.bases:
121.             if (
122.                 base is not models.Model
123.                 and isinstance(base, (models.base.ModelBase, str))
124.                 and resolve_relation(base, app_label) == reference_model_tuple
125.             ):
126.                 return True
127. 
128.         # Check we have no FKs/M2Ms with it
129.         for _name, field in self.fields:
130.             if field_references(
131.                 (app_label, self.name_lower), field, reference_model_tuple
132.             ):
133.                 return True
134.         return False
135. 
136.     def reduce(self, operation, app_label):
137.         if (
138.             isinstance(operation, DeleteModel)
139.             and self.name_lower == operation.name_lower
140.             and not self.options.get("proxy", False)
141.         ):
142.             return []
143.         elif (
144.             isinstance(operation, RenameModel)
145.             and self.name_lower == operation.old_name_lower
146.         ):
147.             return [
148.                 CreateModel(
149.                     operation.new_name,
150.                     fields=self.fields,
151.                     options=self.options,
152.                     bases=self.bases,
153.                     managers=self.managers,
154.                 ),
155.             ]
156.         elif (
157.             isinstance(operation, AlterModelOptions)
158.             and self.name_lower == operation.name_lower
159.         ):
160.             options = {**self.options, **operation.options}
161.             for key in operation.ALTER_OPTION_KEYS:
162.                 if key not in operation.options:
163.                     options.pop(key, None)
164.             return [
165.                 CreateModel(
166.                     self.name,
167.                     fields=self.fields,
168.                     options=options,
169.                     bases=self.bases,
170.                     managers=self.managers,
171.                 ),
172.             ]
173.         elif (
174.             isinstance(operation, AlterModelManagers)
175.             and self.name_lower == operation.name_lower
176.         ):
177.             return [
178.                 CreateModel(
179.                     self.name,
180.                     fields=self.fields,
181.                     options=self.options,
182.                     bases=self.bases,
183.                     managers=operation.managers,
184.                 ),
185.             ]
186.         elif (
187.             isinstance(operation, AlterTogetherOptionOperation)
188.             and self.name_lower == operation.name_lower
189.         ):
190.             return [
191.                 CreateModel(
192.                     self.name,
193.                     fields=self.fields,
194.                     options={
195.                         **self.options,
196.                         **{operation.option_name: operation.option_value},
197.                     },
198.                     bases=self.bases,
199.                     managers=self.managers,
200.                 ),
201.             ]
202.         elif (
203.             isinstance(operation, AlterOrderWithRespectTo)
204.             and self.name_lower == operation.name_lower
205.         ):
206.             return [
207.                 CreateModel(
208.                     self.name,
209.                     fields=self.fields,
210.                     options={
211.                         **self.options,
212.                         "order_with_respect_to": operation.order_with_respect_to,
213.                     },
214.                     bases=self.bases,
215.                     managers=self.managers,
216.                 ),
217.             ]
218.         elif (
219.             isinstance(operation, FieldOperation)
220.             and self.name_lower == operation.model_name_lower
221.         ):
222.             if isinstance(operation, AddField):
223.                 return [
224.                     CreateModel(
225.                         self.name,
226.                         fields=self.fields + [(operation.name, operation.field)],
227.                         options=self.options,
228.                         bases=self.bases,
229.                         managers=self.managers,
230.                     ),
231.                 ]
232.             elif isinstance(operation, AlterField):
233.                 return [
234.                     CreateModel(
235.                         self.name,
236.                         fields=[
237.                             (n, operation.field if n == operation.name else v)
238.                             for n, v in self.fields
239.                         ],
240.                         options=self.options,
241.                         bases=self.bases,
242.                         managers=self.managers,
243.                     ),
244.                 ]
245.             elif isinstance(operation, RemoveField):
246.                 options = self.options.copy()
247.                 for option_name in ("unique_together", "index_together"):
248.                     option = options.pop(option_name, None)
249.                     if option:
250.                         option = set(
251.                             filter(
252.                                 bool,
253.                                 (
254.                                     tuple(
255.                                         f for f in fields if f != operation.name_lower
256.                                     )
257.                                     for fields in option
258.                                 ),
259.                             )
260.                         )
261.                         if option:
262.                             options[option_name] = option
263.                 order_with_respect_to = options.get("order_with_respect_to")
264.                 if order_with_respect_to == operation.name_lower:
265.                     del options["order_with_respect_to"]
266.                 return [
267.                     CreateModel(
268.                         self.name,
269.                         fields=[
270.                             (n, v)
271.                             for n, v in self.fields
272.                             if n.lower() != operation.name_lower
273.                         ],
274.                         options=options,
275.                         bases=self.bases,
276.                         managers=self.managers,
277.                     ),
278.                 ]
279.             elif isinstance(operation, RenameField):
280.                 options = self.options.copy()
281.                 for option_name in ("unique_together", "index_together"):
282.                     option = options.get(option_name)
283.                     if option:
284.                         options[option_name] = {
285.                             tuple(
286.                                 operation.new_name if f == operation.old_name else f
287.                                 for f in fields
288.                             )
289.                             for fields in option
290.                         }
291.                 order_with_respect_to = options.get("order_with_respect_to")
292.                 if order_with_respect_to == operation.old_name:
293.                     options["order_with_respect_to"] = operation.new_name
294.                 return [
295.                     CreateModel(
296.                         self.name,
297.                         fields=[
298.                             (operation.new_name if n == operation.old_name else n, v)
299.                             for n, v in self.fields
300.                         ],
301.                         options=options,
302.                         bases=self.bases,
303.                         managers=self.managers,
304.                     ),
305.                 ]
306.         return super().reduce(operation, app_label)
307. 
308. 
309. class DeleteModel(ModelOperation):
310.     """Drop a model's table."""
311. 
312.     def deconstruct(self):
313.         kwargs = {
314.             "name": self.name,
315.         }
316.         return (self.__class__.__qualname__, [], kwargs)
317. 
318.     def state_forwards(self, app_label, state):
319.         state.remove_model(app_label, self.name_lower)
320. 
321.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
322.         model = from_state.apps.get_model(app_label, self.name)
323.         if self.allow_migrate_model(schema_editor.connection.alias, model):
324.             schema_editor.delete_model(model)
325. 
326.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
327.         model = to_state.apps.get_model(app_label, self.name)
328.         if self.allow_migrate_model(schema_editor.connection.alias, model):
329.             schema_editor.create_model(model)
330. 
331.     def references_model(self, name, app_label):
332.         # The deleted model could be referencing the specified model through
333.         # related fields.
334.         return True
335. 
336.     def describe(self):
337.         return "Delete model %s" % self.name
338. 
339.     @property
340.     def migration_name_fragment(self):
341.         return "delete_%s" % self.name_lower
342. 
343. 
344. class RenameModel(ModelOperation):
345.     """Rename a model."""
346. 
347.     def __init__(self, old_name, new_name):
348.         self.old_name = old_name
349.         self.new_name = new_name
350.         super().__init__(old_name)
351. 
352.     @cached_property
353.     def old_name_lower(self):
354.         return self.old_name.lower()
355. 
356.     @cached_property
357.     def new_name_lower(self):
358.         return self.new_name.lower()
359. 
360.     def deconstruct(self):
361.         kwargs = {
362.             "old_name": self.old_name,
363.             "new_name": self.new_name,
364.         }
365.         return (self.__class__.__qualname__, [], kwargs)
366. 
367.     def state_forwards(self, app_label, state):
368.         state.rename_model(app_label, self.old_name, self.new_name)
369. 
370.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
371.         new_model = to_state.apps.get_model(app_label, self.new_name)
372.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
373.             old_model = from_state.apps.get_model(app_label, self.old_name)
374.             old_db_table = old_model._meta.db_table
375.             new_db_table = new_model._meta.db_table
376.             # Don't alter when a table name is not changed.
377.             if old_db_table == new_db_table:
378.                 return
379.             # Move the main table
380.             schema_editor.alter_db_table(new_model, old_db_table, new_db_table)
381.             # Alter the fields pointing to us
382.             for related_object in old_model._meta.related_objects:
383.                 if related_object.related_model == old_model:
384.                     model = new_model
385.                     related_key = (app_label, self.new_name_lower)
386.                 else:
387.                     model = related_object.related_model
388.                     related_key = (
389.                         related_object.related_model._meta.app_label,
390.                         related_object.related_model._meta.model_name,
391.                     )
392.                 to_field = to_state.apps.get_model(*related_key)._meta.get_field(
393.                     related_object.field.name
394.                 )
395.                 schema_editor.alter_field(
396.                     model,
397.                     related_object.field,
398.                     to_field,
399.                 )
400.             # Rename M2M fields whose name is based on this model's name.
401.             fields = zip(
402.                 old_model._meta.local_many_to_many, new_model._meta.local_many_to_many
403.             )
404.             for (old_field, new_field) in fields:
405.                 # Skip self-referential fields as these are renamed above.
406.                 if (
407.                     new_field.model == new_field.related_model
408.                     or not new_field.remote_field.through._meta.auto_created
409.                 ):
410.                     continue
411.                 # Rename the M2M table that's based on this model's name.
412.                 old_m2m_model = old_field.remote_field.through
413.                 new_m2m_model = new_field.remote_field.through
414.                 schema_editor.alter_db_table(
415.                     new_m2m_model,
416.                     old_m2m_model._meta.db_table,
417.                     new_m2m_model._meta.db_table,
418.                 )
419.                 # Rename the column in the M2M table that's based on this
420.                 # model's name.
421.                 schema_editor.alter_field(
422.                     new_m2m_model,
423.                     old_m2m_model._meta.get_field(old_model._meta.model_name),
424.                     new_m2m_model._meta.get_field(new_model._meta.model_name),
425.                 )
426. 
427.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
428.         self.new_name_lower, self.old_name_lower = (
429.             self.old_name_lower,
430.             self.new_name_lower,
431.         )
432.         self.new_name, self.old_name = self.old_name, self.new_name
433. 
434.         self.database_forwards(app_label, schema_editor, from_state, to_state)
435. 
436.         self.new_name_lower, self.old_name_lower = (
437.             self.old_name_lower,
438.             self.new_name_lower,
439.         )
440.         self.new_name, self.old_name = self.old_name, self.new_name
441. 
442.     def references_model(self, name, app_label):
443.         return (
444.             name.lower() == self.old_name_lower or name.lower() == self.new_name_lower
445.         )
446. 
447.     def describe(self):
448.         return "Rename model %s to %s" % (self.old_name, self.new_name)
449. 
450.     @property
451.     def migration_name_fragment(self):
452.         return "rename_%s_%s" % (self.old_name_lower, self.new_name_lower)
453. 
454.     def reduce(self, operation, app_label):
455.         if (
456.             isinstance(operation, RenameModel)
457.             and self.new_name_lower == operation.old_name_lower
458.         ):
459.             return [
460.                 RenameModel(
461.                     self.old_name,
462.                     operation.new_name,
463.                 ),
464.             ]
465.         # Skip `ModelOperation.reduce` as we want to run `references_model`
466.         # against self.new_name.
467.         return super(ModelOperation, self).reduce(
468.             operation, app_label
469.         ) or not operation.references_model(self.new_name, app_label)
470. 
471. 
472. class ModelOptionOperation(ModelOperation):
473.     def reduce(self, operation, app_label):
474.         if (
475.             isinstance(operation, (self.__class__, DeleteModel))
476.             and self.name_lower == operation.name_lower
477.         ):
478.             return [operation]
479.         return super().reduce(operation, app_label)
480. 
481. 
482. class AlterModelTable(ModelOptionOperation):
483.     """Rename a model's table."""
484. 
485.     def __init__(self, name, table):
486.         self.table = table
487.         super().__init__(name)
488. 
489.     def deconstruct(self):
490.         kwargs = {
491.             "name": self.name,
492.             "table": self.table,
493.         }
494.         return (self.__class__.__qualname__, [], kwargs)
495. 
496.     def state_forwards(self, app_label, state):
497.         state.alter_model_options(app_label, self.name_lower, {"db_table": self.table})
498. 
499.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
500.         new_model = to_state.apps.get_model(app_label, self.name)


File: django/db/models/indexes.py
Line number range: 1 - 295
Content:
1. from django.db.backends.utils import names_digest, split_identifier
2. from django.db.models.expressions import Col, ExpressionList, F, Func, OrderBy
3. from django.db.models.functions import Collate
4. from django.db.models.query_utils import Q
5. from django.db.models.sql import Query
6. from django.utils.functional import partition
7. 
8. __all__ = ["Index"]
9. 
10. 
11. class Index:
12.     suffix = "idx"
13.     # The max length of the name of the index (restricted to 30 for
14.     # cross-database compatibility with Oracle)
15.     max_name_length = 30
16. 
17.     def __init__(
18.         self,
19.         *expressions,
20.         fields=(),
21.         name=None,
22.         db_tablespace=None,
23.         opclasses=(),
24.         condition=None,
25.         include=None,
26.     ):
27.         if opclasses and not name:
28.             raise ValueError("An index must be named to use opclasses.")
29.         if not isinstance(condition, (type(None), Q)):
30.             raise ValueError("Index.condition must be a Q instance.")
31.         if condition and not name:
32.             raise ValueError("An index must be named to use condition.")
33.         if not isinstance(fields, (list, tuple)):
34.             raise ValueError("Index.fields must be a list or tuple.")
35.         if not isinstance(opclasses, (list, tuple)):
36.             raise ValueError("Index.opclasses must be a list or tuple.")
37.         if not expressions and not fields:
38.             raise ValueError(
39.                 "At least one field or expression is required to define an index."
40.             )
41.         if expressions and fields:
42.             raise ValueError(
43.                 "Index.fields and expressions are mutually exclusive.",
44.             )
45.         if expressions and not name:
46.             raise ValueError("An index must be named to use expressions.")
47.         if expressions and opclasses:
48.             raise ValueError(
49.                 "Index.opclasses cannot be used with expressions. Use "
50.                 "django.contrib.postgres.indexes.OpClass() instead."
51.             )
52.         if opclasses and len(fields) != len(opclasses):
53.             raise ValueError(
54.                 "Index.fields and Index.opclasses must have the same number of "
55.                 "elements."
56.             )
57.         if fields and not all(isinstance(field, str) for field in fields):
58.             raise ValueError("Index.fields must contain only strings with field names.")
59.         if include and not name:
60.             raise ValueError("A covering index must be named.")
61.         if not isinstance(include, (type(None), list, tuple)):
62.             raise ValueError("Index.include must be a list or tuple.")
63.         self.fields = list(fields)
64.         # A list of 2-tuple with the field name and ordering ('' or 'DESC').
65.         self.fields_orders = [
66.             (field_name[1:], "DESC") if field_name.startswith("-") else (field_name, "")
67.             for field_name in self.fields
68.         ]
69.         self.name = name or ""
70.         self.db_tablespace = db_tablespace
71.         self.opclasses = opclasses
72.         self.condition = condition
73.         self.include = tuple(include) if include else ()
74.         self.expressions = tuple(
75.             F(expression) if isinstance(expression, str) else expression
76.             for expression in expressions
77.         )
78. 
79.     @property
80.     def contains_expressions(self):
81.         return bool(self.expressions)
82. 
83.     def _get_condition_sql(self, model, schema_editor):
84.         if self.condition is None:
85.             return None
86.         query = Query(model=model, alias_cols=False)
87.         where = query.build_where(self.condition)
88.         compiler = query.get_compiler(connection=schema_editor.connection)
89.         sql, params = where.as_sql(compiler, schema_editor.connection)
90.         return sql % tuple(schema_editor.quote_value(p) for p in params)
91. 
92.     def create_sql(self, model, schema_editor, using="", **kwargs):
93.         include = [
94.             model._meta.get_field(field_name).column for field_name in self.include
95.         ]
96.         condition = self._get_condition_sql(model, schema_editor)
97.         if self.expressions:
98.             index_expressions = []
99.             for expression in self.expressions:
100.                 index_expression = IndexExpression(expression)
101.                 index_expression.set_wrapper_classes(schema_editor.connection)
102.                 index_expressions.append(index_expression)
103.             expressions = ExpressionList(*index_expressions).resolve_expression(
104.                 Query(model, alias_cols=False),
105.             )
106.             fields = None
107.             col_suffixes = None
108.         else:
109.             fields = [
110.                 model._meta.get_field(field_name)
111.                 for field_name, _ in self.fields_orders
112.             ]
113.             if schema_editor.connection.features.supports_index_column_ordering:
114.                 col_suffixes = [order[1] for order in self.fields_orders]
115.             else:
116.                 col_suffixes = [""] * len(self.fields_orders)
117.             expressions = None
118.         return schema_editor._create_index_sql(
119.             model,
120.             fields=fields,
121.             name=self.name,
122.             using=using,
123.             db_tablespace=self.db_tablespace,
124.             col_suffixes=col_suffixes,
125.             opclasses=self.opclasses,
126.             condition=condition,
127.             include=include,
128.             expressions=expressions,
129.             **kwargs,
130.         )
131. 
132.     def remove_sql(self, model, schema_editor, **kwargs):
133.         return schema_editor._delete_index_sql(model, self.name, **kwargs)
134. 
135.     def deconstruct(self):
136.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__name__)
137.         path = path.replace("django.db.models.indexes", "django.db.models")
138.         kwargs = {"name": self.name}
139.         if self.fields:
140.             kwargs["fields"] = self.fields
141.         if self.db_tablespace is not None:
142.             kwargs["db_tablespace"] = self.db_tablespace
143.         if self.opclasses:
144.             kwargs["opclasses"] = self.opclasses
145.         if self.condition:
146.             kwargs["condition"] = self.condition
147.         if self.include:
148.             kwargs["include"] = self.include
149.         return (path, self.expressions, kwargs)
150. 
151.     def clone(self):
152.         """Create a copy of this Index."""
153.         _, args, kwargs = self.deconstruct()
154.         return self.__class__(*args, **kwargs)
155. 
156.     def set_name_with_model(self, model):
157.         """
158.         Generate a unique name for the index.
159. 
160.         The name is divided into 3 parts - table name (12 chars), field name
161.         (8 chars) and unique hash + suffix (10 chars). Each part is made to
162.         fit its size by truncating the excess length.
163.         """
164.         _, table_name = split_identifier(model._meta.db_table)
165.         column_names = [
166.             model._meta.get_field(field_name).column
167.             for field_name, order in self.fields_orders
168.         ]
169.         column_names_with_order = [
170.             (("-%s" if order else "%s") % column_name)
171.             for column_name, (field_name, order) in zip(
172.                 column_names, self.fields_orders
173.             )
174.         ]
175.         # The length of the parts of the name is based on the default max
176.         # length of 30 characters.
177.         hash_data = [table_name] + column_names_with_order + [self.suffix]
178.         self.name = "%s_%s_%s" % (
179.             table_name[:11],
180.             column_names[0][:7],
181.             "%s_%s" % (names_digest(*hash_data, length=6), self.suffix),
182.         )
183.         if len(self.name) > self.max_name_length:
184.             raise ValueError(
185.                 "Index too long for multiple database support. Is self.suffix "
186.                 "longer than 3 characters?"
187.             )
188.         if self.name[0] == "_" or self.name[0].isdigit():
189.             self.name = "D%s" % self.name[1:]
190. 
191.     def __repr__(self):
192.         return "<%s:%s%s%s%s%s%s%s>" % (
193.             self.__class__.__qualname__,
194.             "" if not self.fields else " fields=%s" % repr(self.fields),
195.             "" if not self.expressions else " expressions=%s" % repr(self.expressions),
196.             "" if not self.name else " name=%s" % repr(self.name),
197.             ""
198.             if self.db_tablespace is None
199.             else " db_tablespace=%s" % repr(self.db_tablespace),
200.             "" if self.condition is None else " condition=%s" % self.condition,
201.             "" if not self.include else " include=%s" % repr(self.include),
202.             "" if not self.opclasses else " opclasses=%s" % repr(self.opclasses),
203.         )
204. 
205.     def __eq__(self, other):
206.         if self.__class__ == other.__class__:
207.             return self.deconstruct() == other.deconstruct()
208.         return NotImplemented
209. 
210. 
211. class IndexExpression(Func):
212.     """Order and wrap expressions for CREATE INDEX statements."""
213. 
214.     template = "%(expressions)s"
215.     wrapper_classes = (OrderBy, Collate)
216. 
217.     def set_wrapper_classes(self, connection=None):
218.         # Some databases (e.g. MySQL) treats COLLATE as an indexed expression.
219.         if connection and connection.features.collate_as_index_expression:
220.             self.wrapper_classes = tuple(
221.                 [
222.                     wrapper_cls
223.                     for wrapper_cls in self.wrapper_classes
224.                     if wrapper_cls is not Collate
225.                 ]
226.             )
227. 
228.     @classmethod
229.     def register_wrappers(cls, *wrapper_classes):
230.         cls.wrapper_classes = wrapper_classes
231. 
232.     def resolve_expression(
233.         self,
234.         query=None,
235.         allow_joins=True,
236.         reuse=None,
237.         summarize=False,
238.         for_save=False,
239.     ):
240.         expressions = list(self.flatten())
241.         # Split expressions and wrappers.
242.         index_expressions, wrappers = partition(
243.             lambda e: isinstance(e, self.wrapper_classes),
244.             expressions,
245.         )
246.         wrapper_types = [type(wrapper) for wrapper in wrappers]
247.         if len(wrapper_types) != len(set(wrapper_types)):
248.             raise ValueError(
249.                 "Multiple references to %s can't be used in an indexed "
250.                 "expression."
251.                 % ", ".join(
252.                     [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]
253.                 )
254.             )
255.         if expressions[1 : len(wrappers) + 1] != wrappers:
256.             raise ValueError(
257.                 "%s must be topmost expressions in an indexed expression."
258.                 % ", ".join(
259.                     [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]
260.                 )
261.             )
262.         # Wrap expressions in parentheses if they are not column references.
263.         root_expression = index_expressions[1]
264.         resolve_root_expression = root_expression.resolve_expression(
265.             query,
266.             allow_joins,
267.             reuse,
268.             summarize,
269.             for_save,
270.         )
271.         if not isinstance(resolve_root_expression, Col):
272.             root_expression = Func(root_expression, template="(%(expressions)s)")
273. 
274.         if wrappers:
275.             # Order wrappers and set their expressions.
276.             wrappers = sorted(
277.                 wrappers,
278.                 key=lambda w: self.wrapper_classes.index(type(w)),
279.             )
280.             wrappers = [wrapper.copy() for wrapper in wrappers]
281.             for i, wrapper in enumerate(wrappers[:-1]):
282.                 wrapper.set_source_expressions([wrappers[i + 1]])
283.             # Set the root expression on the deepest wrapper.
284.             wrappers[-1].set_source_expressions([root_expression])
285.             self.set_source_expressions([wrappers[0]])
286.         else:
287.             # Use the root expression, if there are no wrappers.
288.             self.set_source_expressions([root_expression])
289.         return super().resolve_expression(
290.             query, allow_joins, reuse, summarize, for_save
291.         )
292. 
293.     def as_sqlite(self, compiler, connection, **extra_context):
294.         # Casting to numeric is unnecessary.
295.         return self.as_sql(compiler, connection, **extra_context)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 01:30:10,437 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's issue appears to be related to the `RenameIndex` operation, specifically its `database_backwards` method. The provided patch aims to fix this. My analysis suggests the error `relation ... already exists` likely occurs if the database backend lacks direct index renaming support, falling back to `remove_index` and `add_index`. For PostgreSQL, the `can_rename_index` feature flag controls this behavior. To confirm my hypothesis, I need to check the PostgreSQL backend's feature flags. The patch also references `self.allow_migrate_model`, defined in the base `Operation` class, which is essential for understanding the operation's full behavior." query='Please provide the content of `django/db/backends/postgresql/features.py` and `django/db/migrations/operations/base.py`.' extra_requirements='' purpose='This will confirm whether the PostgreSQL backend renames indexes by dropping and recreating them, explaining the error, and provide the base `Operation` class implementation for a complete understanding of the `RenameIndex` operation.'
2025-12-24 01:30:10,438 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the content of `django/db/backends/postgresql/features.py` and `django/db/migrations/operations/base.py`.
2025-12-24 01:30:10,438 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 01:30:10,439 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 01:30:10,439 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 01:30:10,439 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the content of `django/db/backends/postgresql/features.py` and `django/db/migrations/operations/base.py`.
Purpose: This will confirm whether the PostgreSQL backend renames indexes by dropping and recreating them, explaining the error, and provide the base `Operation` class implementation for a complete understanding of the `RenameIndex` operation.
2025-12-24 01:30:12,323 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/migrations/operations/base.py"}'}, '__gemini_function_call_thought_signatures__': {'7203f9e0-bb84-4033-8845-89cebcd62182': 'CsgDAY89a1+oRhEoWYyKkeldRR07wvx3tAp4lZGeB+GRDGnDziq1ZCKbeDsQwPaybJPRK/+UaMDtCwj6yKZEMBDy0CI3YlYoJNNDauEu/JspLZ8QIvivdlDYwJgjn8EMHD2CiXyLgjf7lkoBa+O0GMWzax6FEmAzVSpb99WNrqw1Rp+LzNpOfLHvW0p5TYcBbaU/FmnMLFtyRSCrEuH5X8vd+qfZdjPW4IVBs6/qGla+ngT1r+fl8w+FPO7if5LF4Zi+IGyhlqVLBgNbwEZZmJ5xFL+h4xBL0vMy3A5a5I4ODrCI8aqKDRGAVq5boqgPqvtuDHPCAPhNnVUyVwWU9xoihXLArHQl8jgkWE7KObCD8b9lgwdrnLL4GwaZp3EKczDB5w2OADa5DmcPzInCtKeTFPz1oWo7yLwvNlCELeslCmb/beD4k89A7nsPK+X526FQPM0c0o7loOLqIOFmL/RcL29fXnCpvLO5v7PIEm/3gNenNi4pTYggB9qkbOe41c168zhGc/VDs/7Mmou/RrnMr/xZTdKz8Y4GZ9BY32LlKDqh5y1DWToUm8HGJ/2zICqLvtBMneAfRMeJU8KkX7udtp9SQ/8sQqjt'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2129, 'candidates_token_count': 50, 'total_token_count': 2308, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2129}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 50}], 'thoughts_token_count': 129, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.03421944618225098, 'model_name': 'gemini-2.5-pro'} id='run--7d69485c-cb8b-44f5-b6ea-c4aff72404d0-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/backends/postgresql/features.py'}, 'id': '7203f9e0-bb84-4033-8845-89cebcd62182', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/migrations/operations/base.py'}, 'id': 'eea4a651-e75e-4acf-b725-10d67b017c18', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2129, 'output_tokens': 50, 'total_tokens': 2308, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 129}}
2025-12-24 01:30:14,363 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of `django/db/backends/postgresql/features.py` and `django/db/migrations/operations/base.py`. The first file indicates whether the PostgreSQL backend supports renaming indexes directly. The second file provides the base `Operation` class, which is essential for understanding the structure and behavior of migration operations like `RenameIndex`.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 5573, 'candidates_token_count': 74, 'total_token_count': 5694, 'cached_content_token_count': 1736, 'prompt_tokens_details': [{'modality': 1, 'token_count': 5702}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1736}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 74}], 'thoughts_token_count': 47}, 'finish_reason': 'STOP', 'avg_logprobs': -0.06336796605909192, 'model_name': 'gemini-2.5-pro'} id='run--a0ba74af-d671-4e6f-bf2f-2637ca875989-0' usage_metadata={'input_tokens': 5573, 'output_tokens': 74, 'total_tokens': 5694, 'input_token_details': {'cache_read': 1736}, 'output_token_details': {'reasoning': 47}}
2025-12-24 01:30:14,364 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the content of `django/db/backends/postgresql/features.py` and `django/db/migrations/operations/base.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This will confirm whether the PostgreSQL backend renames indexes by dropping and recreating them, explaining the error, and provide the base `Operation` class implementation for a complete understanding of the `RenameIndex` operation.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/backends/postgresql/features.py
Line number range: 1 - 103
Content:
1. import operator
2. 
3. from django.db import InterfaceError
4. from django.db.backends.base.features import BaseDatabaseFeatures
5. from django.utils.functional import cached_property
6. 
7. 
8. class DatabaseFeatures(BaseDatabaseFeatures):
9.     minimum_database_version = (11,)
10.     allows_group_by_selected_pks = True
11.     can_return_columns_from_insert = True
12.     can_return_rows_from_bulk_insert = True
13.     has_real_datatype = True
14.     has_native_uuid_field = True
15.     has_native_duration_field = True
16.     has_native_json_field = True
17.     can_defer_constraint_checks = True
18.     has_select_for_update = True
19.     has_select_for_update_nowait = True
20.     has_select_for_update_of = True
21.     has_select_for_update_skip_locked = True
22.     has_select_for_no_key_update = True
23.     can_release_savepoints = True
24.     supports_tablespaces = True
25.     supports_transactions = True
26.     can_introspect_materialized_views = True
27.     can_distinct_on_fields = True
28.     can_rollback_ddl = True
29.     supports_combined_alters = True
30.     nulls_order_largest = True
31.     closed_cursor_error_class = InterfaceError
32.     greatest_least_ignores_nulls = True
33.     can_clone_databases = True
34.     supports_temporal_subtraction = True
35.     supports_slicing_ordering_in_compound = True
36.     create_test_procedure_without_params_sql = """
37.         CREATE FUNCTION test_procedure () RETURNS void AS $$
38.         DECLARE
39.             V_I INTEGER;
40.         BEGIN
41.             V_I := 1;
42.         END;
43.     $$ LANGUAGE plpgsql;"""
44.     create_test_procedure_with_int_param_sql = """
45.         CREATE FUNCTION test_procedure (P_I INTEGER) RETURNS void AS $$
46.         DECLARE
47.             V_I INTEGER;
48.         BEGIN
49.             V_I := P_I;
50.         END;
51.     $$ LANGUAGE plpgsql;"""
52.     requires_casted_case_in_updates = True
53.     supports_over_clause = True
54.     only_supports_unbounded_with_preceding_and_following = True
55.     supports_aggregate_filter_clause = True
56.     supported_explain_formats = {"JSON", "TEXT", "XML", "YAML"}
57.     supports_deferrable_unique_constraints = True
58.     has_json_operators = True
59.     json_key_contains_list_matching_requires_list = True
60.     supports_update_conflicts = True
61.     supports_update_conflicts_with_target = True
62.     supports_covering_indexes = True
63.     can_rename_index = True
64.     test_collations = {
65.         "non_default": "sv-x-icu",
66.         "swedish_ci": "sv-x-icu",
67.     }
68.     test_now_utc_template = "STATEMENT_TIMESTAMP() AT TIME ZONE 'UTC'"
69. 
70.     django_test_skips = {
71.         "opclasses are PostgreSQL only.": {
72.             "indexes.tests.SchemaIndexesNotPostgreSQLTests."
73.             "test_create_index_ignores_opclasses",
74.         },
75.     }
76. 
77.     @cached_property
78.     def introspected_field_types(self):
79.         return {
80.             **super().introspected_field_types,
81.             "PositiveBigIntegerField": "BigIntegerField",
82.             "PositiveIntegerField": "IntegerField",
83.             "PositiveSmallIntegerField": "SmallIntegerField",
84.         }
85. 
86.     @cached_property
87.     def is_postgresql_12(self):
88.         return self.connection.pg_version >= 120000
89. 
90.     @cached_property
91.     def is_postgresql_13(self):
92.         return self.connection.pg_version >= 130000
93. 
94.     @cached_property
95.     def is_postgresql_14(self):
96.         return self.connection.pg_version >= 140000
97. 
98.     has_bit_xor = property(operator.attrgetter("is_postgresql_14"))
99.     supports_covering_gist_indexes = property(operator.attrgetter("is_postgresql_12"))
100.     supports_covering_spgist_indexes = property(operator.attrgetter("is_postgresql_14"))
101.     supports_non_deterministic_collations = property(
102.         operator.attrgetter("is_postgresql_12")
103.     )


File: django/db/migrations/operations/base.py
Line number range: 1 - 146
Content:
1. from django.db import router
2. 
3. 
4. class Operation:
5.     """
6.     Base class for migration operations.
7. 
8.     It's responsible for both mutating the in-memory model state
9.     (see db/migrations/state.py) to represent what it performs, as well
10.     as actually performing it against a live database.
11. 
12.     Note that some operations won't modify memory state at all (e.g. data
13.     copying operations), and some will need their modifications to be
14.     optionally specified by the user (e.g. custom Python code snippets)
15. 
16.     Due to the way this class deals with deconstruction, it should be
17.     considered immutable.
18.     """
19. 
20.     # If this migration can be run in reverse.
21.     # Some operations are impossible to reverse, like deleting data.
22.     reversible = True
23. 
24.     # Can this migration be represented as SQL? (things like RunPython cannot)
25.     reduces_to_sql = True
26. 
27.     # Should this operation be forced as atomic even on backends with no
28.     # DDL transaction support (i.e., does it have no DDL, like RunPython)
29.     atomic = False
30. 
31.     # Should this operation be considered safe to elide and optimize across?
32.     elidable = False
33. 
34.     serialization_expand_args = []
35. 
36.     def __new__(cls, *args, **kwargs):
37.         # We capture the arguments to make returning them trivial
38.         self = object.__new__(cls)
39.         self._constructor_args = (args, kwargs)
40.         return self
41. 
42.     def deconstruct(self):
43.         """
44.         Return a 3-tuple of class import path (or just name if it lives
45.         under django.db.migrations), positional arguments, and keyword
46.         arguments.
47.         """
48.         return (
49.             self.__class__.__name__,
50.             self._constructor_args[0],
51.             self._constructor_args[1],
52.         )
53. 
54.     def state_forwards(self, app_label, state):
55.         """
56.         Take the state from the previous migration, and mutate it
57.         so that it matches what this migration would perform.
58.         """
59.         raise NotImplementedError(
60.             "subclasses of Operation must provide a state_forwards() method"
61.         )
62. 
63.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
64.         """
65.         Perform the mutation on the database schema in the normal
66.         (forwards) direction.
67.         """
68.         raise NotImplementedError(
69.             "subclasses of Operation must provide a database_forwards() method"
70.         )
71. 
72.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
73.         """
74.         Perform the mutation on the database schema in the reverse
75.         direction - e.g. if this were CreateModel, it would in fact
76.         drop the model's table.
77.         """
78.         raise NotImplementedError(
79.             "subclasses of Operation must provide a database_backwards() method"
80.         )
81. 
82.     def describe(self):
83.         """
84.         Output a brief summary of what the action does.
85.         """
86.         return "%s: %s" % (self.__class__.__name__, self._constructor_args)
87. 
88.     @property
89.     def migration_name_fragment(self):
90.         """
91.         A filename part suitable for automatically naming a migration
92.         containing this operation, or None if not applicable.
93.         """
94.         return None
95. 
96.     def references_model(self, name, app_label):
97.         """
98.         Return True if there is a chance this operation references the given
99.         model name (as a string), with an app label for accuracy.
100. 
101.         Used for optimization. If in doubt, return True;
102.         returning a false positive will merely make the optimizer a little
103.         less efficient, while returning a false negative may result in an
104.         unusable optimized migration.
105.         """
106.         return True
107. 
108.     def references_field(self, model_name, name, app_label):
109.         """
110.         Return True if there is a chance this operation references the given
111.         field name, with an app label for accuracy.
112. 
113.         Used for optimization. If in doubt, return True.
114.         """
115.         return self.references_model(model_name, app_label)
116. 
117.     def allow_migrate_model(self, connection_alias, model):
118.         """
119.         Return whether or not a model may be migrated.
120. 
121.         This is a thin wrapper around router.allow_migrate_model() that
122.         preemptively rejects any proxy, swapped out, or unmanaged model.
123.         """
124.         if not model._meta.can_migrate(connection_alias):
125.             return False
126. 
127.         return router.allow_migrate_model(connection_alias, model)
128. 
129.     def reduce(self, operation, app_label):
130.         """
131.         Return either a list of operations the actual operation should be
132.         replaced with or a boolean that indicates whether or not the specified
133.         operation can be optimized across.
134.         """
135.         if self.elidable:
136.             return [operation]
137.         elif operation.elidable:
138.             return [self]
139.         return False
140. 
141.     def __repr__(self):
142.         return "<%s %s%s>" % (
143.             self.__class__.__name__,
144.             ", ".join(map(repr, self._constructor_args[0])),
145.             ",".join(" %s=%r" % x for x in self._constructor_args[1].items()),
146.         )

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 01:30:19,626 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly asked for the content of the file `django/db/backends/postgresql/features.py`. This context provides the full content of that file.', relative_path='django/db/backends/postgresql/features.py', start_line=1, end_line=103), ContextOutput(reasoning='The user explicitly asked for the content of the file `django/db/migrations/operations/base.py`. This context provides the full content of that file.', relative_path='django/db/migrations/operations/base.py', start_line=1, end_line=146)]
2025-12-24 01:30:19,627 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the content of `django/db/backends/postgresql/features.py` and `django/db/migrations/operations/base.py`.
2025-12-24 01:30:19,628 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 01:30:19,628 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 01:30:19,628 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 4 existing contexts
2025-12-24 01:30:19,628 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 6 total contexts (removed 0 duplicates)
2025-12-24 01:30:19,629 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       ├── schedule_tests.yml
|       ├── schedules.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── optimizemigration.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _functions.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── csrf.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.26.txt
|   |   ├── 2.2.27.txt
|   |   ├── 2.2.28.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.11.txt
|   |   ├── 3.2.12.txt
|   |   ├── 3.2.13.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.2.txt
|   |   ├── 4.0.3.txt
|   |   ├── 4.0.4.txt
|   |   ├── 4.0.5.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_prevent_double_submission.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── async_queryset
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   ├── with_many_to_many.py
    |   |   └── with_unique_constraint.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_functions.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_migrations.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_csrf_cookie_masked.py
    |   ├── test_middleware_mixin.py
    |   ├── test_use_l10n.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       ├── custom_widget.html
    |   |       ├── cyclic_context_boundfield_render.html
    |   |       ├── error.html
    |   |       ├── form_snippet.html
    |   |       ├── legend_test.html
    |   |       └── use_fieldset.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_deprecation_forms.py
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoadmin_deprecated
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_manual_porting
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_noop
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_no_replaces
    |   |   ├── 0001_squashed_0002.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   ├── custom_sitemap_index.xml
    |   |   └── custom_sitemap_lastmod_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_debug.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: RenameIndex() crashes when unnamed index is moving backward and forward.

Description: Description
	
RenameIndex() should restore the old auto-generated name when an unnamed index for unique_together is moving backward. Now re-applying RenameIndex() crashes. For example:
tests/migrations/test_operations.py
diff --git a/tests/migrations/test_operations.py b/tests/migrations/test_operations.py
index cfd28b1b39..c0a55023bb 100644
					
					 a
				 
					
					 b
				 
 class OperationTests(OperationTestBase): 
29882988        with connection.schema_editor() as editor, self.assertNumQueries(0):
29892989            operation.database_backwards(app_label, editor, new_state, project_state)
29902990        self.assertIndexNameExists(table_name, "new_pony_test_idx")
 2991        # Re-apply renaming.
 2992        with connection.schema_editor() as editor:
 2993            operation.database_forwards(app_label, editor, project_state, new_state)
 2994        self.assertIndexNameExists(table_name, "new_pony_test_idx")
29912995        # Deconstruction.
29922996        definition = operation.deconstruct()
29932997        self.assertEqual(definition[0], "RenameIndex")
crashes on PostgreSQL:
django.db.utils.ProgrammingError: relation "new_pony_test_idx" already exists

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index d17232e4ec..3c8208e0d8 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -963,11 +963,27 @@ class RenameIndex(IndexOperation):
 
         to_model_state = to_state.models[app_label, self.model_name_lower]
         new_index = to_model_state.get_index_by_name(self.new_name)
+        # Skip renaming if the resolved index names are identical.
+        if old_index.name == new_index.name:
+            return
         schema_editor.rename_index(model, old_index, new_index)
 
     def database_backwards(self, app_label, schema_editor, from_state, to_state):
         if self.old_fields:
-            # Backward operation with unnamed index is a no-op.
+            # Restore the auto-generated name for the unnamed index when reversing.
+            model = to_state.apps.get_model(app_label, self.model_name)
+            if not self.allow_migrate_model(schema_editor.connection.alias, model):
+                return
+            # Compute the expected auto-generated index name for the historical model.
+            to_model = to_state.apps.get_model(app_label, self.model_name)
+            auto_index = models.Index(fields=self.old_fields)
+            auto_index.set_name_with_model(to_model)
+            # Current index in the database is expected to have the explicit new name.
+            current_index = models.Index(fields=self.old_fields, name=self.new_name)
+            # Skip if names already match.
+            if current_index.name == auto_index.name:
+                return
+            schema_editor.rename_index(model, current_index, auto_index)
             return
 
         self.new_name_lower, self.old_name_lower = (


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the files `django/db/migrations/operations/models.py`, `django/db/models/indexes.py`, `django/db/backends/base/schema.py`, and `django/db/backends/postgresql/schema.py`.
Extra Requirements: 
Purpose: I need these files to understand the implementation of the `RenameIndex` operation and its dependencies to analyze and fix the reported bug.

Previous refined query 2:
Essential Query: Please provide the content of `django/db/backends/postgresql/features.py` and `django/db/migrations/operations/base.py`.
Extra Requirements: 
Purpose: This will confirm whether the PostgreSQL backend renames indexes by dropping and recreating them, explaining the error, and provide the base `Operation` class implementation for a complete understanding of the `RenameIndex` operation.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/backends/base/schema.py
Line number range: 1 - 500
Content:
1. import logging
2. import operator
3. from datetime import datetime
4. 
5. from django.db.backends.ddl_references import (
6.     Columns,
7.     Expressions,
8.     ForeignKeyName,
9.     IndexName,
10.     Statement,
11.     Table,
12. )
13. from django.db.backends.utils import names_digest, split_identifier
14. from django.db.models import Deferrable, Index
15. from django.db.models.sql import Query
16. from django.db.transaction import TransactionManagementError, atomic
17. from django.utils import timezone
18. 
19. logger = logging.getLogger("django.db.backends.schema")
20. 
21. 
22. def _is_relevant_relation(relation, altered_field):
23.     """
24.     When altering the given field, must constraints on its model from the given
25.     relation be temporarily dropped?
26.     """
27.     field = relation.field
28.     if field.many_to_many:
29.         # M2M reverse field
30.         return False
31.     if altered_field.primary_key and field.to_fields == [None]:
32.         # Foreign key constraint on the primary key, which is being altered.
33.         return True
34.     # Is the constraint targeting the field being altered?
35.     return altered_field.name in field.to_fields
36. 
37. 
38. def _all_related_fields(model):
39.     # Related fields must be returned in a deterministic order.
40.     return sorted(
41.         model._meta._get_fields(
42.             forward=False,
43.             reverse=True,
44.             include_hidden=True,
45.             include_parents=False,
46.         ),
47.         key=operator.attrgetter("name"),
48.     )
49. 
50. 
51. def _related_non_m2m_objects(old_field, new_field):
52.     # Filter out m2m objects from reverse relations.
53.     # Return (old_relation, new_relation) tuples.
54.     related_fields = zip(
55.         (
56.             obj
57.             for obj in _all_related_fields(old_field.model)
58.             if _is_relevant_relation(obj, old_field)
59.         ),
60.         (
61.             obj
62.             for obj in _all_related_fields(new_field.model)
63.             if _is_relevant_relation(obj, new_field)
64.         ),
65.     )
66.     for old_rel, new_rel in related_fields:
67.         yield old_rel, new_rel
68.         yield from _related_non_m2m_objects(
69.             old_rel.remote_field,
70.             new_rel.remote_field,
71.         )
72. 
73. 
74. class BaseDatabaseSchemaEditor:
75.     """
76.     This class and its subclasses are responsible for emitting schema-changing
77.     statements to the databases - model creation/removal/alteration, field
78.     renaming, index fiddling, and so on.
79.     """
80. 
81.     # Overrideable SQL templates
82.     sql_create_table = "CREATE TABLE %(table)s (%(definition)s)"
83.     sql_rename_table = "ALTER TABLE %(old_table)s RENAME TO %(new_table)s"
84.     sql_retablespace_table = "ALTER TABLE %(table)s SET TABLESPACE %(new_tablespace)s"
85.     sql_delete_table = "DROP TABLE %(table)s CASCADE"
86. 
87.     sql_create_column = "ALTER TABLE %(table)s ADD COLUMN %(column)s %(definition)s"
88.     sql_alter_column = "ALTER TABLE %(table)s %(changes)s"
89.     sql_alter_column_type = "ALTER COLUMN %(column)s TYPE %(type)s"
90.     sql_alter_column_null = "ALTER COLUMN %(column)s DROP NOT NULL"
91.     sql_alter_column_not_null = "ALTER COLUMN %(column)s SET NOT NULL"
92.     sql_alter_column_default = "ALTER COLUMN %(column)s SET DEFAULT %(default)s"
93.     sql_alter_column_no_default = "ALTER COLUMN %(column)s DROP DEFAULT"
94.     sql_alter_column_no_default_null = sql_alter_column_no_default
95.     sql_alter_column_collate = "ALTER COLUMN %(column)s TYPE %(type)s%(collation)s"
96.     sql_delete_column = "ALTER TABLE %(table)s DROP COLUMN %(column)s CASCADE"
97.     sql_rename_column = (
98.         "ALTER TABLE %(table)s RENAME COLUMN %(old_column)s TO %(new_column)s"
99.     )
100.     sql_update_with_default = (
101.         "UPDATE %(table)s SET %(column)s = %(default)s WHERE %(column)s IS NULL"
102.     )
103. 
104.     sql_unique_constraint = "UNIQUE (%(columns)s)%(deferrable)s"
105.     sql_check_constraint = "CHECK (%(check)s)"
106.     sql_delete_constraint = "ALTER TABLE %(table)s DROP CONSTRAINT %(name)s"
107.     sql_constraint = "CONSTRAINT %(name)s %(constraint)s"
108. 
109.     sql_create_check = "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s CHECK (%(check)s)"
110.     sql_delete_check = sql_delete_constraint
111. 
112.     sql_create_unique = (
113.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s "
114.         "UNIQUE (%(columns)s)%(deferrable)s"
115.     )
116.     sql_delete_unique = sql_delete_constraint
117. 
118.     sql_create_fk = (
119.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s FOREIGN KEY (%(column)s) "
120.         "REFERENCES %(to_table)s (%(to_column)s)%(deferrable)s"
121.     )
122.     sql_create_inline_fk = None
123.     sql_create_column_inline_fk = None
124.     sql_delete_fk = sql_delete_constraint
125. 
126.     sql_create_index = (
127.         "CREATE INDEX %(name)s ON %(table)s "
128.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
129.     )
130.     sql_create_unique_index = (
131.         "CREATE UNIQUE INDEX %(name)s ON %(table)s "
132.         "(%(columns)s)%(include)s%(condition)s"
133.     )
134.     sql_rename_index = "ALTER INDEX %(old_name)s RENAME TO %(new_name)s"
135.     sql_delete_index = "DROP INDEX %(name)s"
136. 
137.     sql_create_pk = (
138.         "ALTER TABLE %(table)s ADD CONSTRAINT %(name)s PRIMARY KEY (%(columns)s)"
139.     )
140.     sql_delete_pk = sql_delete_constraint
141. 
142.     sql_delete_procedure = "DROP PROCEDURE %(procedure)s"
143. 
144.     def __init__(self, connection, collect_sql=False, atomic=True):
145.         self.connection = connection
146.         self.collect_sql = collect_sql
147.         if self.collect_sql:
148.             self.collected_sql = []
149.         self.atomic_migration = self.connection.features.can_rollback_ddl and atomic
150. 
151.     # State-managing methods
152. 
153.     def __enter__(self):
154.         self.deferred_sql = []
155.         if self.atomic_migration:
156.             self.atomic = atomic(self.connection.alias)
157.             self.atomic.__enter__()
158.         return self
159. 
160.     def __exit__(self, exc_type, exc_value, traceback):
161.         if exc_type is None:
162.             for sql in self.deferred_sql:
163.                 self.execute(sql)
164.         if self.atomic_migration:
165.             self.atomic.__exit__(exc_type, exc_value, traceback)
166. 
167.     # Core utility functions
168. 
169.     def execute(self, sql, params=()):
170.         """Execute the given SQL statement, with optional parameters."""
171.         # Don't perform the transactional DDL check if SQL is being collected
172.         # as it's not going to be executed anyway.
173.         if (
174.             not self.collect_sql
175.             and self.connection.in_atomic_block
176.             and not self.connection.features.can_rollback_ddl
177.         ):
178.             raise TransactionManagementError(
179.                 "Executing DDL statements while in a transaction on databases "
180.                 "that can't perform a rollback is prohibited."
181.             )
182.         # Account for non-string statement objects.
183.         sql = str(sql)
184.         # Log the command we're running, then run it
185.         logger.debug(
186.             "%s; (params %r)", sql, params, extra={"params": params, "sql": sql}
187.         )
188.         if self.collect_sql:
189.             ending = "" if sql.rstrip().endswith(";") else ";"
190.             if params is not None:
191.                 self.collected_sql.append(
192.                     (sql % tuple(map(self.quote_value, params))) + ending
193.                 )
194.             else:
195.                 self.collected_sql.append(sql + ending)
196.         else:
197.             with self.connection.cursor() as cursor:
198.                 cursor.execute(sql, params)
199. 
200.     def quote_name(self, name):
201.         return self.connection.ops.quote_name(name)
202. 
203.     def table_sql(self, model):
204.         """Take a model and return its table definition."""
205.         # Add any unique_togethers (always deferred, as some fields might be
206.         # created afterward, like geometry fields with some backends).
207.         for field_names in model._meta.unique_together:
208.             fields = [model._meta.get_field(field) for field in field_names]
209.             self.deferred_sql.append(self._create_unique_sql(model, fields))
210.         # Create column SQL, add FK deferreds if needed.
211.         column_sqls = []
212.         params = []
213.         for field in model._meta.local_fields:
214.             # SQL.
215.             definition, extra_params = self.column_sql(model, field)
216.             if definition is None:
217.                 continue
218.             # Check constraints can go on the column SQL here.
219.             db_params = field.db_parameters(connection=self.connection)
220.             if db_params["check"]:
221.                 definition += " " + self.sql_check_constraint % db_params
222.             # Autoincrement SQL (for backends with inline variant).
223.             col_type_suffix = field.db_type_suffix(connection=self.connection)
224.             if col_type_suffix:
225.                 definition += " %s" % col_type_suffix
226.             params.extend(extra_params)
227.             # FK.
228.             if field.remote_field and field.db_constraint:
229.                 to_table = field.remote_field.model._meta.db_table
230.                 to_column = field.remote_field.model._meta.get_field(
231.                     field.remote_field.field_name
232.                 ).column
233.                 if self.sql_create_inline_fk:
234.                     definition += " " + self.sql_create_inline_fk % {
235.                         "to_table": self.quote_name(to_table),
236.                         "to_column": self.quote_name(to_column),
237.                     }
238.                 elif self.connection.features.supports_foreign_keys:
239.                     self.deferred_sql.append(
240.                         self._create_fk_sql(
241.                             model, field, "_fk_%(to_table)s_%(to_column)s"
242.                         )
243.                     )
244.             # Add the SQL to our big list.
245.             column_sqls.append(
246.                 "%s %s"
247.                 % (
248.                     self.quote_name(field.column),
249.                     definition,
250.                 )
251.             )
252.             # Autoincrement SQL (for backends with post table definition
253.             # variant).
254.             if field.get_internal_type() in (
255.                 "AutoField",
256.                 "BigAutoField",
257.                 "SmallAutoField",
258.             ):
259.                 autoinc_sql = self.connection.ops.autoinc_sql(
260.                     model._meta.db_table, field.column
261.                 )
262.                 if autoinc_sql:
263.                     self.deferred_sql.extend(autoinc_sql)
264.         constraints = [
265.             constraint.constraint_sql(model, self)
266.             for constraint in model._meta.constraints
267.         ]
268.         sql = self.sql_create_table % {
269.             "table": self.quote_name(model._meta.db_table),
270.             "definition": ", ".join(
271.                 constraint for constraint in (*column_sqls, *constraints) if constraint
272.             ),
273.         }
274.         if model._meta.db_tablespace:
275.             tablespace_sql = self.connection.ops.tablespace_sql(
276.                 model._meta.db_tablespace
277.             )
278.             if tablespace_sql:
279.                 sql += " " + tablespace_sql
280.         return sql, params
281. 
282.     # Field <-> database mapping functions
283. 
284.     def _iter_column_sql(
285.         self, column_db_type, params, model, field, field_db_params, include_default
286.     ):
287.         yield column_db_type
288.         if collation := field_db_params.get("collation"):
289.             yield self._collate_sql(collation)
290.         # Work out nullability.
291.         null = field.null
292.         # Include a default value, if requested.
293.         include_default = (
294.             include_default
295.             and not self.skip_default(field)
296.             and
297.             # Don't include a default value if it's a nullable field and the
298.             # default cannot be dropped in the ALTER COLUMN statement (e.g.
299.             # MySQL longtext and longblob).
300.             not (null and self.skip_default_on_alter(field))
301.         )
302.         if include_default:
303.             default_value = self.effective_default(field)
304.             if default_value is not None:
305.                 column_default = "DEFAULT " + self._column_default_sql(field)
306.                 if self.connection.features.requires_literal_defaults:
307.                     # Some databases can't take defaults as a parameter (Oracle).
308.                     # If this is the case, the individual schema backend should
309.                     # implement prepare_default().
310.                     yield column_default % self.prepare_default(default_value)
311.                 else:
312.                     yield column_default
313.                     params.append(default_value)
314.         # Oracle treats the empty string ('') as null, so coerce the null
315.         # option whenever '' is a possible value.
316.         if (
317.             field.empty_strings_allowed
318.             and not field.primary_key
319.             and self.connection.features.interprets_empty_strings_as_nulls
320.         ):
321.             null = True
322.         if not null:
323.             yield "NOT NULL"
324.         elif not self.connection.features.implied_column_null:
325.             yield "NULL"
326.         if field.primary_key:
327.             yield "PRIMARY KEY"
328.         elif field.unique:
329.             yield "UNIQUE"
330.         # Optionally add the tablespace if it's an implicitly indexed column.
331.         tablespace = field.db_tablespace or model._meta.db_tablespace
332.         if (
333.             tablespace
334.             and self.connection.features.supports_tablespaces
335.             and field.unique
336.         ):
337.             yield self.connection.ops.tablespace_sql(tablespace, inline=True)
338. 
339.     def column_sql(self, model, field, include_default=False):
340.         """
341.         Return the column definition for a field. The field must already have
342.         had set_attributes_from_name() called.
343.         """
344.         # Get the column's type and use that as the basis of the SQL.
345.         field_db_params = field.db_parameters(connection=self.connection)
346.         column_db_type = field_db_params["type"]
347.         # Check for fields that aren't actually columns (e.g. M2M).
348.         if column_db_type is None:
349.             return None, None
350.         params = []
351.         return (
352.             " ".join(
353.                 # This appends to the params being returned.
354.                 self._iter_column_sql(
355.                     column_db_type,
356.                     params,
357.                     model,
358.                     field,
359.                     field_db_params,
360.                     include_default,
361.                 )
362.             ),
363.             params,
364.         )
365. 
366.     def skip_default(self, field):
367.         """
368.         Some backends don't accept default values for certain columns types
369.         (i.e. MySQL longtext and longblob).
370.         """
371.         return False
372. 
373.     def skip_default_on_alter(self, field):
374.         """
375.         Some backends don't accept default values for certain columns types
376.         (i.e. MySQL longtext and longblob) in the ALTER COLUMN statement.
377.         """
378.         return False
379. 
380.     def prepare_default(self, value):
381.         """
382.         Only used for backends which have requires_literal_defaults feature
383.         """
384.         raise NotImplementedError(
385.             "subclasses of BaseDatabaseSchemaEditor for backends which have "
386.             "requires_literal_defaults must provide a prepare_default() method"
387.         )
388. 
389.     def _column_default_sql(self, field):
390.         """
391.         Return the SQL to use in a DEFAULT clause. The resulting string should
392.         contain a '%s' placeholder for a default value.
393.         """
394.         return "%s"
395. 
396.     @staticmethod
397.     def _effective_default(field):
398.         # This method allows testing its logic without a connection.
399.         if field.has_default():
400.             default = field.get_default()
401.         elif not field.null and field.blank and field.empty_strings_allowed:
402.             if field.get_internal_type() == "BinaryField":
403.                 default = b""
404.             else:
405.                 default = ""
406.         elif getattr(field, "auto_now", False) or getattr(field, "auto_now_add", False):
407.             internal_type = field.get_internal_type()
408.             if internal_type == "DateTimeField":
409.                 default = timezone.now()
410.             else:
411.                 default = datetime.now()
412.                 if internal_type == "DateField":
413.                     default = default.date()
414.                 elif internal_type == "TimeField":
415.                     default = default.time()
416.         else:
417.             default = None
418.         return default
419. 
420.     def effective_default(self, field):
421.         """Return a field's effective database default value."""
422.         return field.get_db_prep_save(self._effective_default(field), self.connection)
423. 
424.     def quote_value(self, value):
425.         """
426.         Return a quoted version of the value so it's safe to use in an SQL
427.         string. This is not safe against injection from user code; it is
428.         intended only for use in making SQL scripts or preparing default values
429.         for particularly tricky backends (defaults are not user-defined, though,
430.         so this is safe).
431.         """
432.         raise NotImplementedError()
433. 
434.     # Actions
435. 
436.     def create_model(self, model):
437.         """
438.         Create a table and any accompanying indexes or unique constraints for
439.         the given `model`.
440.         """
441.         sql, params = self.table_sql(model)
442.         # Prevent using [] as params, in the case a literal '%' is used in the
443.         # definition.
444.         self.execute(sql, params or None)
445. 
446.         # Add any field index and index_together's (deferred as SQLite
447.         # _remake_table needs it).
448.         self.deferred_sql.extend(self._model_indexes_sql(model))
449. 
450.         # Make M2M tables
451.         for field in model._meta.local_many_to_many:
452.             if field.remote_field.through._meta.auto_created:
453.                 self.create_model(field.remote_field.through)
454. 
455.     def delete_model(self, model):
456.         """Delete a model from the database."""
457.         # Handle auto-created intermediary models
458.         for field in model._meta.local_many_to_many:
459.             if field.remote_field.through._meta.auto_created:
460.                 self.delete_model(field.remote_field.through)
461. 
462.         # Delete the table
463.         self.execute(
464.             self.sql_delete_table
465.             % {
466.                 "table": self.quote_name(model._meta.db_table),
467.             }
468.         )
469.         # Remove all deferred statements referencing the deleted table.
470.         for sql in list(self.deferred_sql):
471.             if isinstance(sql, Statement) and sql.references_table(
472.                 model._meta.db_table
473.             ):
474.                 self.deferred_sql.remove(sql)
475. 
476.     def add_index(self, model, index):
477.         """Add an index on a model."""
478.         if (
479.             index.contains_expressions
480.             and not self.connection.features.supports_expression_indexes
481.         ):
482.             return None
483.         # Index.create_sql returns interpolated SQL which makes params=None a
484.         # necessity to avoid escaping attempts on execution.
485.         self.execute(index.create_sql(model, self), params=None)
486. 
487.     def remove_index(self, model, index):
488.         """Remove an index from a model."""
489.         if (
490.             index.contains_expressions
491.             and not self.connection.features.supports_expression_indexes
492.         ):
493.             return None
494.         self.execute(index.remove_sql(model, self))
495. 
496.     def rename_index(self, model, old_index, new_index):
497.         if self.connection.features.can_rename_index:
498.             self.execute(
499.                 self._rename_index_sql(model, old_index.name, new_index.name),
500.                 params=None,


File: django/db/backends/postgresql/features.py
Line number range: 1 - 103
Content:
1. import operator
2. 
3. from django.db import InterfaceError
4. from django.db.backends.base.features import BaseDatabaseFeatures
5. from django.utils.functional import cached_property
6. 
7. 
8. class DatabaseFeatures(BaseDatabaseFeatures):
9.     minimum_database_version = (11,)
10.     allows_group_by_selected_pks = True
11.     can_return_columns_from_insert = True
12.     can_return_rows_from_bulk_insert = True
13.     has_real_datatype = True
14.     has_native_uuid_field = True
15.     has_native_duration_field = True
16.     has_native_json_field = True
17.     can_defer_constraint_checks = True
18.     has_select_for_update = True
19.     has_select_for_update_nowait = True
20.     has_select_for_update_of = True
21.     has_select_for_update_skip_locked = True
22.     has_select_for_no_key_update = True
23.     can_release_savepoints = True
24.     supports_tablespaces = True
25.     supports_transactions = True
26.     can_introspect_materialized_views = True
27.     can_distinct_on_fields = True
28.     can_rollback_ddl = True
29.     supports_combined_alters = True
30.     nulls_order_largest = True
31.     closed_cursor_error_class = InterfaceError
32.     greatest_least_ignores_nulls = True
33.     can_clone_databases = True
34.     supports_temporal_subtraction = True
35.     supports_slicing_ordering_in_compound = True
36.     create_test_procedure_without_params_sql = """
37.         CREATE FUNCTION test_procedure () RETURNS void AS $$
38.         DECLARE
39.             V_I INTEGER;
40.         BEGIN
41.             V_I := 1;
42.         END;
43.     $$ LANGUAGE plpgsql;"""
44.     create_test_procedure_with_int_param_sql = """
45.         CREATE FUNCTION test_procedure (P_I INTEGER) RETURNS void AS $$
46.         DECLARE
47.             V_I INTEGER;
48.         BEGIN
49.             V_I := P_I;
50.         END;
51.     $$ LANGUAGE plpgsql;"""
52.     requires_casted_case_in_updates = True
53.     supports_over_clause = True
54.     only_supports_unbounded_with_preceding_and_following = True
55.     supports_aggregate_filter_clause = True
56.     supported_explain_formats = {"JSON", "TEXT", "XML", "YAML"}
57.     supports_deferrable_unique_constraints = True
58.     has_json_operators = True
59.     json_key_contains_list_matching_requires_list = True
60.     supports_update_conflicts = True
61.     supports_update_conflicts_with_target = True
62.     supports_covering_indexes = True
63.     can_rename_index = True
64.     test_collations = {
65.         "non_default": "sv-x-icu",
66.         "swedish_ci": "sv-x-icu",
67.     }
68.     test_now_utc_template = "STATEMENT_TIMESTAMP() AT TIME ZONE 'UTC'"
69. 
70.     django_test_skips = {
71.         "opclasses are PostgreSQL only.": {
72.             "indexes.tests.SchemaIndexesNotPostgreSQLTests."
73.             "test_create_index_ignores_opclasses",
74.         },
75.     }
76. 
77.     @cached_property
78.     def introspected_field_types(self):
79.         return {
80.             **super().introspected_field_types,
81.             "PositiveBigIntegerField": "BigIntegerField",
82.             "PositiveIntegerField": "IntegerField",
83.             "PositiveSmallIntegerField": "SmallIntegerField",
84.         }
85. 
86.     @cached_property
87.     def is_postgresql_12(self):
88.         return self.connection.pg_version >= 120000
89. 
90.     @cached_property
91.     def is_postgresql_13(self):
92.         return self.connection.pg_version >= 130000
93. 
94.     @cached_property
95.     def is_postgresql_14(self):
96.         return self.connection.pg_version >= 140000
97. 
98.     has_bit_xor = property(operator.attrgetter("is_postgresql_14"))
99.     supports_covering_gist_indexes = property(operator.attrgetter("is_postgresql_12"))
100.     supports_covering_spgist_indexes = property(operator.attrgetter("is_postgresql_14"))
101.     supports_non_deterministic_collations = property(
102.         operator.attrgetter("is_postgresql_12")
103.     )


File: django/db/backends/postgresql/schema.py
Line number range: 1 - 299
Content:
1. import psycopg2
2. 
3. from django.db.backends.base.schema import BaseDatabaseSchemaEditor
4. from django.db.backends.ddl_references import IndexColumns
5. from django.db.backends.utils import strip_quotes
6. 
7. 
8. class DatabaseSchemaEditor(BaseDatabaseSchemaEditor):
9. 
10.     # Setting all constraints to IMMEDIATE to allow changing data in the same
11.     # transaction.
12.     sql_update_with_default = (
13.         "UPDATE %(table)s SET %(column)s = %(default)s WHERE %(column)s IS NULL"
14.         "; SET CONSTRAINTS ALL IMMEDIATE"
15.     )
16. 
17.     sql_delete_sequence = "DROP SEQUENCE IF EXISTS %(sequence)s CASCADE"
18. 
19.     sql_create_index = (
20.         "CREATE INDEX %(name)s ON %(table)s%(using)s "
21.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
22.     )
23.     sql_create_index_concurrently = (
24.         "CREATE INDEX CONCURRENTLY %(name)s ON %(table)s%(using)s "
25.         "(%(columns)s)%(include)s%(extra)s%(condition)s"
26.     )
27.     sql_delete_index = "DROP INDEX IF EXISTS %(name)s"
28.     sql_delete_index_concurrently = "DROP INDEX CONCURRENTLY IF EXISTS %(name)s"
29. 
30.     # Setting the constraint to IMMEDIATE to allow changing data in the same
31.     # transaction.
32.     sql_create_column_inline_fk = (
33.         "CONSTRAINT %(name)s REFERENCES %(to_table)s(%(to_column)s)%(deferrable)s"
34.         "; SET CONSTRAINTS %(namespace)s%(name)s IMMEDIATE"
35.     )
36.     # Setting the constraint to IMMEDIATE runs any deferred checks to allow
37.     # dropping it in the same transaction.
38.     sql_delete_fk = (
39.         "SET CONSTRAINTS %(name)s IMMEDIATE; "
40.         "ALTER TABLE %(table)s DROP CONSTRAINT %(name)s"
41.     )
42.     sql_delete_procedure = "DROP FUNCTION %(procedure)s(%(param_types)s)"
43. 
44.     sql_add_identity = (
45.         "ALTER TABLE %(table)s ALTER COLUMN %(column)s ADD "
46.         "GENERATED BY DEFAULT AS IDENTITY"
47.     )
48.     sql_drop_indentity = (
49.         "ALTER TABLE %(table)s ALTER COLUMN %(column)s DROP IDENTITY IF EXISTS"
50.     )
51. 
52.     def quote_value(self, value):
53.         if isinstance(value, str):
54.             value = value.replace("%", "%%")
55.         adapted = psycopg2.extensions.adapt(value)
56.         if hasattr(adapted, "encoding"):
57.             adapted.encoding = "utf8"
58.         # getquoted() returns a quoted bytestring of the adapted value.
59.         return adapted.getquoted().decode()
60. 
61.     def _field_indexes_sql(self, model, field):
62.         output = super()._field_indexes_sql(model, field)
63.         like_index_statement = self._create_like_index_sql(model, field)
64.         if like_index_statement is not None:
65.             output.append(like_index_statement)
66.         return output
67. 
68.     def _field_data_type(self, field):
69.         if field.is_relation:
70.             return field.rel_db_type(self.connection)
71.         return self.connection.data_types.get(
72.             field.get_internal_type(),
73.             field.db_type(self.connection),
74.         )
75. 
76.     def _field_base_data_types(self, field):
77.         # Yield base data types for array fields.
78.         if field.base_field.get_internal_type() == "ArrayField":
79.             yield from self._field_base_data_types(field.base_field)
80.         else:
81.             yield self._field_data_type(field.base_field)
82. 
83.     def _create_like_index_sql(self, model, field):
84.         """
85.         Return the statement to create an index with varchar operator pattern
86.         when the column type is 'varchar' or 'text', otherwise return None.
87.         """
88.         db_type = field.db_type(connection=self.connection)
89.         if db_type is not None and (field.db_index or field.unique):
90.             # Fields with database column types of `varchar` and `text` need
91.             # a second index that specifies their operator class, which is
92.             # needed when performing correct LIKE queries outside the
93.             # C locale. See #12234.
94.             #
95.             # The same doesn't apply to array fields such as varchar[size]
96.             # and text[size], so skip them.
97.             if "[" in db_type:
98.                 return None
99.             if db_type.startswith("varchar"):
100.                 return self._create_index_sql(
101.                     model,
102.                     fields=[field],
103.                     suffix="_like",
104.                     opclasses=["varchar_pattern_ops"],
105.                 )
106.             elif db_type.startswith("text"):
107.                 return self._create_index_sql(
108.                     model,
109.                     fields=[field],
110.                     suffix="_like",
111.                     opclasses=["text_pattern_ops"],
112.                 )
113.         return None
114. 
115.     def _alter_column_type_sql(self, model, old_field, new_field, new_type):
116.         self.sql_alter_column_type = "ALTER COLUMN %(column)s TYPE %(type)s"
117.         # Cast when data type changed.
118.         using_sql = " USING %(column)s::%(type)s"
119.         new_internal_type = new_field.get_internal_type()
120.         old_internal_type = old_field.get_internal_type()
121.         if new_internal_type == "ArrayField" and new_internal_type == old_internal_type:
122.             # Compare base data types for array fields.
123.             if list(self._field_base_data_types(old_field)) != list(
124.                 self._field_base_data_types(new_field)
125.             ):
126.                 self.sql_alter_column_type += using_sql
127.         elif self._field_data_type(old_field) != self._field_data_type(new_field):
128.             self.sql_alter_column_type += using_sql
129.         # Make ALTER TYPE with IDENTITY make sense.
130.         table = strip_quotes(model._meta.db_table)
131.         auto_field_types = {
132.             "AutoField",
133.             "BigAutoField",
134.             "SmallAutoField",
135.         }
136.         old_is_auto = old_internal_type in auto_field_types
137.         new_is_auto = new_internal_type in auto_field_types
138.         if new_is_auto and not old_is_auto:
139.             column = strip_quotes(new_field.column)
140.             return (
141.                 (
142.                     self.sql_alter_column_type
143.                     % {
144.                         "column": self.quote_name(column),
145.                         "type": new_type,
146.                     },
147.                     [],
148.                 ),
149.                 [
150.                     (
151.                         self.sql_add_identity
152.                         % {
153.                             "table": self.quote_name(table),
154.                             "column": self.quote_name(column),
155.                         },
156.                         [],
157.                     ),
158.                 ],
159.             )
160.         elif old_is_auto and not new_is_auto:
161.             # Drop IDENTITY if exists (pre-Django 4.1 serial columns don't have
162.             # it).
163.             self.execute(
164.                 self.sql_drop_indentity
165.                 % {
166.                     "table": self.quote_name(table),
167.                     "column": self.quote_name(strip_quotes(old_field.column)),
168.                 }
169.             )
170.             column = strip_quotes(new_field.column)
171.             sequence_name = "%s_%s_seq" % (table, column)
172.             fragment, _ = super()._alter_column_type_sql(
173.                 model, old_field, new_field, new_type
174.             )
175.             return fragment, [
176.                 (
177.                     # Drop the sequence if exists (Django 4.1+ identity columns
178.                     # don't have it).
179.                     self.sql_delete_sequence
180.                     % {
181.                         "sequence": self.quote_name(sequence_name),
182.                     },
183.                     [],
184.                 ),
185.             ]
186.         else:
187.             return super()._alter_column_type_sql(model, old_field, new_field, new_type)
188. 
189.     def _alter_field(
190.         self,
191.         model,
192.         old_field,
193.         new_field,
194.         old_type,
195.         new_type,
196.         old_db_params,
197.         new_db_params,
198.         strict=False,
199.     ):
200.         # Drop indexes on varchar/text/citext columns that are changing to a
201.         # different type.
202.         if (old_field.db_index or old_field.unique) and (
203.             (old_type.startswith("varchar") and not new_type.startswith("varchar"))
204.             or (old_type.startswith("text") and not new_type.startswith("text"))
205.             or (old_type.startswith("citext") and not new_type.startswith("citext"))
206.         ):
207.             index_name = self._create_index_name(
208.                 model._meta.db_table, [old_field.column], suffix="_like"
209.             )
210.             self.execute(self._delete_index_sql(model, index_name))
211. 
212.         super()._alter_field(
213.             model,
214.             old_field,
215.             new_field,
216.             old_type,
217.             new_type,
218.             old_db_params,
219.             new_db_params,
220.             strict,
221.         )
222.         # Added an index? Create any PostgreSQL-specific indexes.
223.         if (not (old_field.db_index or old_field.unique) and new_field.db_index) or (
224.             not old_field.unique and new_field.unique
225.         ):
226.             like_index_statement = self._create_like_index_sql(model, new_field)
227.             if like_index_statement is not None:
228.                 self.execute(like_index_statement)
229. 
230.         # Removed an index? Drop any PostgreSQL-specific indexes.
231.         if old_field.unique and not (new_field.db_index or new_field.unique):
232.             index_to_remove = self._create_index_name(
233.                 model._meta.db_table, [old_field.column], suffix="_like"
234.             )
235.             self.execute(self._delete_index_sql(model, index_to_remove))
236. 
237.     def _index_columns(self, table, columns, col_suffixes, opclasses):
238.         if opclasses:
239.             return IndexColumns(
240.                 table,
241.                 columns,
242.                 self.quote_name,
243.                 col_suffixes=col_suffixes,
244.                 opclasses=opclasses,
245.             )
246.         return super()._index_columns(table, columns, col_suffixes, opclasses)
247. 
248.     def add_index(self, model, index, concurrently=False):
249.         self.execute(
250.             index.create_sql(model, self, concurrently=concurrently), params=None
251.         )
252. 
253.     def remove_index(self, model, index, concurrently=False):
254.         self.execute(index.remove_sql(model, self, concurrently=concurrently))
255. 
256.     def _delete_index_sql(self, model, name, sql=None, concurrently=False):
257.         sql = (
258.             self.sql_delete_index_concurrently
259.             if concurrently
260.             else self.sql_delete_index
261.         )
262.         return super()._delete_index_sql(model, name, sql)
263. 
264.     def _create_index_sql(
265.         self,
266.         model,
267.         *,
268.         fields=None,
269.         name=None,
270.         suffix="",
271.         using="",
272.         db_tablespace=None,
273.         col_suffixes=(),
274.         sql=None,
275.         opclasses=(),
276.         condition=None,
277.         concurrently=False,
278.         include=None,
279.         expressions=None,
280.     ):
281.         sql = (
282.             self.sql_create_index
283.             if not concurrently
284.             else self.sql_create_index_concurrently
285.         )
286.         return super()._create_index_sql(
287.             model,
288.             fields=fields,
289.             name=name,
290.             suffix=suffix,
291.             using=using,
292.             db_tablespace=db_tablespace,
293.             col_suffixes=col_suffixes,
294.             sql=sql,
295.             opclasses=opclasses,
296.             condition=condition,
297.             include=include,
298.             expressions=expressions,
299.         )


File: django/db/migrations/operations/base.py
Line number range: 1 - 146
Content:
1. from django.db import router
2. 
3. 
4. class Operation:
5.     """
6.     Base class for migration operations.
7. 
8.     It's responsible for both mutating the in-memory model state
9.     (see db/migrations/state.py) to represent what it performs, as well
10.     as actually performing it against a live database.
11. 
12.     Note that some operations won't modify memory state at all (e.g. data
13.     copying operations), and some will need their modifications to be
14.     optionally specified by the user (e.g. custom Python code snippets)
15. 
16.     Due to the way this class deals with deconstruction, it should be
17.     considered immutable.
18.     """
19. 
20.     # If this migration can be run in reverse.
21.     # Some operations are impossible to reverse, like deleting data.
22.     reversible = True
23. 
24.     # Can this migration be represented as SQL? (things like RunPython cannot)
25.     reduces_to_sql = True
26. 
27.     # Should this operation be forced as atomic even on backends with no
28.     # DDL transaction support (i.e., does it have no DDL, like RunPython)
29.     atomic = False
30. 
31.     # Should this operation be considered safe to elide and optimize across?
32.     elidable = False
33. 
34.     serialization_expand_args = []
35. 
36.     def __new__(cls, *args, **kwargs):
37.         # We capture the arguments to make returning them trivial
38.         self = object.__new__(cls)
39.         self._constructor_args = (args, kwargs)
40.         return self
41. 
42.     def deconstruct(self):
43.         """
44.         Return a 3-tuple of class import path (or just name if it lives
45.         under django.db.migrations), positional arguments, and keyword
46.         arguments.
47.         """
48.         return (
49.             self.__class__.__name__,
50.             self._constructor_args[0],
51.             self._constructor_args[1],
52.         )
53. 
54.     def state_forwards(self, app_label, state):
55.         """
56.         Take the state from the previous migration, and mutate it
57.         so that it matches what this migration would perform.
58.         """
59.         raise NotImplementedError(
60.             "subclasses of Operation must provide a state_forwards() method"
61.         )
62. 
63.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
64.         """
65.         Perform the mutation on the database schema in the normal
66.         (forwards) direction.
67.         """
68.         raise NotImplementedError(
69.             "subclasses of Operation must provide a database_forwards() method"
70.         )
71. 
72.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
73.         """
74.         Perform the mutation on the database schema in the reverse
75.         direction - e.g. if this were CreateModel, it would in fact
76.         drop the model's table.
77.         """
78.         raise NotImplementedError(
79.             "subclasses of Operation must provide a database_backwards() method"
80.         )
81. 
82.     def describe(self):
83.         """
84.         Output a brief summary of what the action does.
85.         """
86.         return "%s: %s" % (self.__class__.__name__, self._constructor_args)
87. 
88.     @property
89.     def migration_name_fragment(self):
90.         """
91.         A filename part suitable for automatically naming a migration
92.         containing this operation, or None if not applicable.
93.         """
94.         return None
95. 
96.     def references_model(self, name, app_label):
97.         """
98.         Return True if there is a chance this operation references the given
99.         model name (as a string), with an app label for accuracy.
100. 
101.         Used for optimization. If in doubt, return True;
102.         returning a false positive will merely make the optimizer a little
103.         less efficient, while returning a false negative may result in an
104.         unusable optimized migration.
105.         """
106.         return True
107. 
108.     def references_field(self, model_name, name, app_label):
109.         """
110.         Return True if there is a chance this operation references the given
111.         field name, with an app label for accuracy.
112. 
113.         Used for optimization. If in doubt, return True.
114.         """
115.         return self.references_model(model_name, app_label)
116. 
117.     def allow_migrate_model(self, connection_alias, model):
118.         """
119.         Return whether or not a model may be migrated.
120. 
121.         This is a thin wrapper around router.allow_migrate_model() that
122.         preemptively rejects any proxy, swapped out, or unmanaged model.
123.         """
124.         if not model._meta.can_migrate(connection_alias):
125.             return False
126. 
127.         return router.allow_migrate_model(connection_alias, model)
128. 
129.     def reduce(self, operation, app_label):
130.         """
131.         Return either a list of operations the actual operation should be
132.         replaced with or a boolean that indicates whether or not the specified
133.         operation can be optimized across.
134.         """
135.         if self.elidable:
136.             return [operation]
137.         elif operation.elidable:
138.             return [self]
139.         return False
140. 
141.     def __repr__(self):
142.         return "<%s %s%s>" % (
143.             self.__class__.__name__,
144.             ", ".join(map(repr, self._constructor_args[0])),
145.             ",".join(" %s=%r" % x for x in self._constructor_args[1].items()),
146.         )


File: django/db/migrations/operations/models.py
Line number range: 1 - 500
Content:
1. from django.db import models
2. from django.db.migrations.operations.base import Operation
3. from django.db.migrations.state import ModelState
4. from django.db.migrations.utils import field_references, resolve_relation
5. from django.db.models.options import normalize_together
6. from django.utils.functional import cached_property
7. 
8. from .fields import AddField, AlterField, FieldOperation, RemoveField, RenameField
9. 
10. 
11. def _check_for_duplicates(arg_name, objs):
12.     used_vals = set()
13.     for val in objs:
14.         if val in used_vals:
15.             raise ValueError(
16.                 "Found duplicate value %s in CreateModel %s argument." % (val, arg_name)
17.             )
18.         used_vals.add(val)
19. 
20. 
21. class ModelOperation(Operation):
22.     def __init__(self, name):
23.         self.name = name
24. 
25.     @cached_property
26.     def name_lower(self):
27.         return self.name.lower()
28. 
29.     def references_model(self, name, app_label):
30.         return name.lower() == self.name_lower
31. 
32.     def reduce(self, operation, app_label):
33.         return super().reduce(operation, app_label) or self.can_reduce_through(
34.             operation, app_label
35.         )
36. 
37.     def can_reduce_through(self, operation, app_label):
38.         return not operation.references_model(self.name, app_label)
39. 
40. 
41. class CreateModel(ModelOperation):
42.     """Create a model's table."""
43. 
44.     serialization_expand_args = ["fields", "options", "managers"]
45. 
46.     def __init__(self, name, fields, options=None, bases=None, managers=None):
47.         self.fields = fields
48.         self.options = options or {}
49.         self.bases = bases or (models.Model,)
50.         self.managers = managers or []
51.         super().__init__(name)
52.         # Sanity-check that there are no duplicated field names, bases, or
53.         # manager names
54.         _check_for_duplicates("fields", (name for name, _ in self.fields))
55.         _check_for_duplicates(
56.             "bases",
57.             (
58.                 base._meta.label_lower
59.                 if hasattr(base, "_meta")
60.                 else base.lower()
61.                 if isinstance(base, str)
62.                 else base
63.                 for base in self.bases
64.             ),
65.         )
66.         _check_for_duplicates("managers", (name for name, _ in self.managers))
67. 
68.     def deconstruct(self):
69.         kwargs = {
70.             "name": self.name,
71.             "fields": self.fields,
72.         }
73.         if self.options:
74.             kwargs["options"] = self.options
75.         if self.bases and self.bases != (models.Model,):
76.             kwargs["bases"] = self.bases
77.         if self.managers and self.managers != [("objects", models.Manager())]:
78.             kwargs["managers"] = self.managers
79.         return (self.__class__.__qualname__, [], kwargs)
80. 
81.     def state_forwards(self, app_label, state):
82.         state.add_model(
83.             ModelState(
84.                 app_label,
85.                 self.name,
86.                 list(self.fields),
87.                 dict(self.options),
88.                 tuple(self.bases),
89.                 list(self.managers),
90.             )
91.         )
92. 
93.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
94.         model = to_state.apps.get_model(app_label, self.name)
95.         if self.allow_migrate_model(schema_editor.connection.alias, model):
96.             schema_editor.create_model(model)
97. 
98.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
99.         model = from_state.apps.get_model(app_label, self.name)
100.         if self.allow_migrate_model(schema_editor.connection.alias, model):
101.             schema_editor.delete_model(model)
102. 
103.     def describe(self):
104.         return "Create %smodel %s" % (
105.             "proxy " if self.options.get("proxy", False) else "",
106.             self.name,
107.         )
108. 
109.     @property
110.     def migration_name_fragment(self):
111.         return self.name_lower
112. 
113.     def references_model(self, name, app_label):
114.         name_lower = name.lower()
115.         if name_lower == self.name_lower:
116.             return True
117. 
118.         # Check we didn't inherit from the model
119.         reference_model_tuple = (app_label, name_lower)
120.         for base in self.bases:
121.             if (
122.                 base is not models.Model
123.                 and isinstance(base, (models.base.ModelBase, str))
124.                 and resolve_relation(base, app_label) == reference_model_tuple
125.             ):
126.                 return True
127. 
128.         # Check we have no FKs/M2Ms with it
129.         for _name, field in self.fields:
130.             if field_references(
131.                 (app_label, self.name_lower), field, reference_model_tuple
132.             ):
133.                 return True
134.         return False
135. 
136.     def reduce(self, operation, app_label):
137.         if (
138.             isinstance(operation, DeleteModel)
139.             and self.name_lower == operation.name_lower
140.             and not self.options.get("proxy", False)
141.         ):
142.             return []
143.         elif (
144.             isinstance(operation, RenameModel)
145.             and self.name_lower == operation.old_name_lower
146.         ):
147.             return [
148.                 CreateModel(
149.                     operation.new_name,
150.                     fields=self.fields,
151.                     options=self.options,
152.                     bases=self.bases,
153.                     managers=self.managers,
154.                 ),
155.             ]
156.         elif (
157.             isinstance(operation, AlterModelOptions)
158.             and self.name_lower == operation.name_lower
159.         ):
160.             options = {**self.options, **operation.options}
161.             for key in operation.ALTER_OPTION_KEYS:
162.                 if key not in operation.options:
163.                     options.pop(key, None)
164.             return [
165.                 CreateModel(
166.                     self.name,
167.                     fields=self.fields,
168.                     options=options,
169.                     bases=self.bases,
170.                     managers=self.managers,
171.                 ),
172.             ]
173.         elif (
174.             isinstance(operation, AlterModelManagers)
175.             and self.name_lower == operation.name_lower
176.         ):
177.             return [
178.                 CreateModel(
179.                     self.name,
180.                     fields=self.fields,
181.                     options=self.options,
182.                     bases=self.bases,
183.                     managers=operation.managers,
184.                 ),
185.             ]
186.         elif (
187.             isinstance(operation, AlterTogetherOptionOperation)
188.             and self.name_lower == operation.name_lower
189.         ):
190.             return [
191.                 CreateModel(
192.                     self.name,
193.                     fields=self.fields,
194.                     options={
195.                         **self.options,
196.                         **{operation.option_name: operation.option_value},
197.                     },
198.                     bases=self.bases,
199.                     managers=self.managers,
200.                 ),
201.             ]
202.         elif (
203.             isinstance(operation, AlterOrderWithRespectTo)
204.             and self.name_lower == operation.name_lower
205.         ):
206.             return [
207.                 CreateModel(
208.                     self.name,
209.                     fields=self.fields,
210.                     options={
211.                         **self.options,
212.                         "order_with_respect_to": operation.order_with_respect_to,
213.                     },
214.                     bases=self.bases,
215.                     managers=self.managers,
216.                 ),
217.             ]
218.         elif (
219.             isinstance(operation, FieldOperation)
220.             and self.name_lower == operation.model_name_lower
221.         ):
222.             if isinstance(operation, AddField):
223.                 return [
224.                     CreateModel(
225.                         self.name,
226.                         fields=self.fields + [(operation.name, operation.field)],
227.                         options=self.options,
228.                         bases=self.bases,
229.                         managers=self.managers,
230.                     ),
231.                 ]
232.             elif isinstance(operation, AlterField):
233.                 return [
234.                     CreateModel(
235.                         self.name,
236.                         fields=[
237.                             (n, operation.field if n == operation.name else v)
238.                             for n, v in self.fields
239.                         ],
240.                         options=self.options,
241.                         bases=self.bases,
242.                         managers=self.managers,
243.                     ),
244.                 ]
245.             elif isinstance(operation, RemoveField):
246.                 options = self.options.copy()
247.                 for option_name in ("unique_together", "index_together"):
248.                     option = options.pop(option_name, None)
249.                     if option:
250.                         option = set(
251.                             filter(
252.                                 bool,
253.                                 (
254.                                     tuple(
255.                                         f for f in fields if f != operation.name_lower
256.                                     )
257.                                     for fields in option
258.                                 ),
259.                             )
260.                         )
261.                         if option:
262.                             options[option_name] = option
263.                 order_with_respect_to = options.get("order_with_respect_to")
264.                 if order_with_respect_to == operation.name_lower:
265.                     del options["order_with_respect_to"]
266.                 return [
267.                     CreateModel(
268.                         self.name,
269.                         fields=[
270.                             (n, v)
271.                             for n, v in self.fields
272.                             if n.lower() != operation.name_lower
273.                         ],
274.                         options=options,
275.                         bases=self.bases,
276.                         managers=self.managers,
277.                     ),
278.                 ]
279.             elif isinstance(operation, RenameField):
280.                 options = self.options.copy()
281.                 for option_name in ("unique_together", "index_together"):
282.                     option = options.get(option_name)
283.                     if option:
284.                         options[option_name] = {
285.                             tuple(
286.                                 operation.new_name if f == operation.old_name else f
287.                                 for f in fields
288.                             )
289.                             for fields in option
290.                         }
291.                 order_with_respect_to = options.get("order_with_respect_to")
292.                 if order_with_respect_to == operation.old_name:
293.                     options["order_with_respect_to"] = operation.new_name
294.                 return [
295.                     CreateModel(
296.                         self.name,
297.                         fields=[
298.                             (operation.new_name if n == operation.old_name else n, v)
299.                             for n, v in self.fields
300.                         ],
301.                         options=options,
302.                         bases=self.bases,
303.                         managers=self.managers,
304.                     ),
305.                 ]
306.         return super().reduce(operation, app_label)
307. 
308. 
309. class DeleteModel(ModelOperation):
310.     """Drop a model's table."""
311. 
312.     def deconstruct(self):
313.         kwargs = {
314.             "name": self.name,
315.         }
316.         return (self.__class__.__qualname__, [], kwargs)
317. 
318.     def state_forwards(self, app_label, state):
319.         state.remove_model(app_label, self.name_lower)
320. 
321.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
322.         model = from_state.apps.get_model(app_label, self.name)
323.         if self.allow_migrate_model(schema_editor.connection.alias, model):
324.             schema_editor.delete_model(model)
325. 
326.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
327.         model = to_state.apps.get_model(app_label, self.name)
328.         if self.allow_migrate_model(schema_editor.connection.alias, model):
329.             schema_editor.create_model(model)
330. 
331.     def references_model(self, name, app_label):
332.         # The deleted model could be referencing the specified model through
333.         # related fields.
334.         return True
335. 
336.     def describe(self):
337.         return "Delete model %s" % self.name
338. 
339.     @property
340.     def migration_name_fragment(self):
341.         return "delete_%s" % self.name_lower
342. 
343. 
344. class RenameModel(ModelOperation):
345.     """Rename a model."""
346. 
347.     def __init__(self, old_name, new_name):
348.         self.old_name = old_name
349.         self.new_name = new_name
350.         super().__init__(old_name)
351. 
352.     @cached_property
353.     def old_name_lower(self):
354.         return self.old_name.lower()
355. 
356.     @cached_property
357.     def new_name_lower(self):
358.         return self.new_name.lower()
359. 
360.     def deconstruct(self):
361.         kwargs = {
362.             "old_name": self.old_name,
363.             "new_name": self.new_name,
364.         }
365.         return (self.__class__.__qualname__, [], kwargs)
366. 
367.     def state_forwards(self, app_label, state):
368.         state.rename_model(app_label, self.old_name, self.new_name)
369. 
370.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
371.         new_model = to_state.apps.get_model(app_label, self.new_name)
372.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
373.             old_model = from_state.apps.get_model(app_label, self.old_name)
374.             old_db_table = old_model._meta.db_table
375.             new_db_table = new_model._meta.db_table
376.             # Don't alter when a table name is not changed.
377.             if old_db_table == new_db_table:
378.                 return
379.             # Move the main table
380.             schema_editor.alter_db_table(new_model, old_db_table, new_db_table)
381.             # Alter the fields pointing to us
382.             for related_object in old_model._meta.related_objects:
383.                 if related_object.related_model == old_model:
384.                     model = new_model
385.                     related_key = (app_label, self.new_name_lower)
386.                 else:
387.                     model = related_object.related_model
388.                     related_key = (
389.                         related_object.related_model._meta.app_label,
390.                         related_object.related_model._meta.model_name,
391.                     )
392.                 to_field = to_state.apps.get_model(*related_key)._meta.get_field(
393.                     related_object.field.name
394.                 )
395.                 schema_editor.alter_field(
396.                     model,
397.                     related_object.field,
398.                     to_field,
399.                 )
400.             # Rename M2M fields whose name is based on this model's name.
401.             fields = zip(
402.                 old_model._meta.local_many_to_many, new_model._meta.local_many_to_many
403.             )
404.             for (old_field, new_field) in fields:
405.                 # Skip self-referential fields as these are renamed above.
406.                 if (
407.                     new_field.model == new_field.related_model
408.                     or not new_field.remote_field.through._meta.auto_created
409.                 ):
410.                     continue
411.                 # Rename the M2M table that's based on this model's name.
412.                 old_m2m_model = old_field.remote_field.through
413.                 new_m2m_model = new_field.remote_field.through
414.                 schema_editor.alter_db_table(
415.                     new_m2m_model,
416.                     old_m2m_model._meta.db_table,
417.                     new_m2m_model._meta.db_table,
418.                 )
419.                 # Rename the column in the M2M table that's based on this
420.                 # model's name.
421.                 schema_editor.alter_field(
422.                     new_m2m_model,
423.                     old_m2m_model._meta.get_field(old_model._meta.model_name),
424.                     new_m2m_model._meta.get_field(new_model._meta.model_name),
425.                 )
426. 
427.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
428.         self.new_name_lower, self.old_name_lower = (
429.             self.old_name_lower,
430.             self.new_name_lower,
431.         )
432.         self.new_name, self.old_name = self.old_name, self.new_name
433. 
434.         self.database_forwards(app_label, schema_editor, from_state, to_state)
435. 
436.         self.new_name_lower, self.old_name_lower = (
437.             self.old_name_lower,
438.             self.new_name_lower,
439.         )
440.         self.new_name, self.old_name = self.old_name, self.new_name
441. 
442.     def references_model(self, name, app_label):
443.         return (
444.             name.lower() == self.old_name_lower or name.lower() == self.new_name_lower
445.         )
446. 
447.     def describe(self):
448.         return "Rename model %s to %s" % (self.old_name, self.new_name)
449. 
450.     @property
451.     def migration_name_fragment(self):
452.         return "rename_%s_%s" % (self.old_name_lower, self.new_name_lower)
453. 
454.     def reduce(self, operation, app_label):
455.         if (
456.             isinstance(operation, RenameModel)
457.             and self.new_name_lower == operation.old_name_lower
458.         ):
459.             return [
460.                 RenameModel(
461.                     self.old_name,
462.                     operation.new_name,
463.                 ),
464.             ]
465.         # Skip `ModelOperation.reduce` as we want to run `references_model`
466.         # against self.new_name.
467.         return super(ModelOperation, self).reduce(
468.             operation, app_label
469.         ) or not operation.references_model(self.new_name, app_label)
470. 
471. 
472. class ModelOptionOperation(ModelOperation):
473.     def reduce(self, operation, app_label):
474.         if (
475.             isinstance(operation, (self.__class__, DeleteModel))
476.             and self.name_lower == operation.name_lower
477.         ):
478.             return [operation]
479.         return super().reduce(operation, app_label)
480. 
481. 
482. class AlterModelTable(ModelOptionOperation):
483.     """Rename a model's table."""
484. 
485.     def __init__(self, name, table):
486.         self.table = table
487.         super().__init__(name)
488. 
489.     def deconstruct(self):
490.         kwargs = {
491.             "name": self.name,
492.             "table": self.table,
493.         }
494.         return (self.__class__.__qualname__, [], kwargs)
495. 
496.     def state_forwards(self, app_label, state):
497.         state.alter_model_options(app_label, self.name_lower, {"db_table": self.table})
498. 
499.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
500.         new_model = to_state.apps.get_model(app_label, self.name)


File: django/db/models/indexes.py
Line number range: 1 - 295
Content:
1. from django.db.backends.utils import names_digest, split_identifier
2. from django.db.models.expressions import Col, ExpressionList, F, Func, OrderBy
3. from django.db.models.functions import Collate
4. from django.db.models.query_utils import Q
5. from django.db.models.sql import Query
6. from django.utils.functional import partition
7. 
8. __all__ = ["Index"]
9. 
10. 
11. class Index:
12.     suffix = "idx"
13.     # The max length of the name of the index (restricted to 30 for
14.     # cross-database compatibility with Oracle)
15.     max_name_length = 30
16. 
17.     def __init__(
18.         self,
19.         *expressions,
20.         fields=(),
21.         name=None,
22.         db_tablespace=None,
23.         opclasses=(),
24.         condition=None,
25.         include=None,
26.     ):
27.         if opclasses and not name:
28.             raise ValueError("An index must be named to use opclasses.")
29.         if not isinstance(condition, (type(None), Q)):
30.             raise ValueError("Index.condition must be a Q instance.")
31.         if condition and not name:
32.             raise ValueError("An index must be named to use condition.")
33.         if not isinstance(fields, (list, tuple)):
34.             raise ValueError("Index.fields must be a list or tuple.")
35.         if not isinstance(opclasses, (list, tuple)):
36.             raise ValueError("Index.opclasses must be a list or tuple.")
37.         if not expressions and not fields:
38.             raise ValueError(
39.                 "At least one field or expression is required to define an index."
40.             )
41.         if expressions and fields:
42.             raise ValueError(
43.                 "Index.fields and expressions are mutually exclusive.",
44.             )
45.         if expressions and not name:
46.             raise ValueError("An index must be named to use expressions.")
47.         if expressions and opclasses:
48.             raise ValueError(
49.                 "Index.opclasses cannot be used with expressions. Use "
50.                 "django.contrib.postgres.indexes.OpClass() instead."
51.             )
52.         if opclasses and len(fields) != len(opclasses):
53.             raise ValueError(
54.                 "Index.fields and Index.opclasses must have the same number of "
55.                 "elements."
56.             )
57.         if fields and not all(isinstance(field, str) for field in fields):
58.             raise ValueError("Index.fields must contain only strings with field names.")
59.         if include and not name:
60.             raise ValueError("A covering index must be named.")
61.         if not isinstance(include, (type(None), list, tuple)):
62.             raise ValueError("Index.include must be a list or tuple.")
63.         self.fields = list(fields)
64.         # A list of 2-tuple with the field name and ordering ('' or 'DESC').
65.         self.fields_orders = [
66.             (field_name[1:], "DESC") if field_name.startswith("-") else (field_name, "")
67.             for field_name in self.fields
68.         ]
69.         self.name = name or ""
70.         self.db_tablespace = db_tablespace
71.         self.opclasses = opclasses
72.         self.condition = condition
73.         self.include = tuple(include) if include else ()
74.         self.expressions = tuple(
75.             F(expression) if isinstance(expression, str) else expression
76.             for expression in expressions
77.         )
78. 
79.     @property
80.     def contains_expressions(self):
81.         return bool(self.expressions)
82. 
83.     def _get_condition_sql(self, model, schema_editor):
84.         if self.condition is None:
85.             return None
86.         query = Query(model=model, alias_cols=False)
87.         where = query.build_where(self.condition)
88.         compiler = query.get_compiler(connection=schema_editor.connection)
89.         sql, params = where.as_sql(compiler, schema_editor.connection)
90.         return sql % tuple(schema_editor.quote_value(p) for p in params)
91. 
92.     def create_sql(self, model, schema_editor, using="", **kwargs):
93.         include = [
94.             model._meta.get_field(field_name).column for field_name in self.include
95.         ]
96.         condition = self._get_condition_sql(model, schema_editor)
97.         if self.expressions:
98.             index_expressions = []
99.             for expression in self.expressions:
100.                 index_expression = IndexExpression(expression)
101.                 index_expression.set_wrapper_classes(schema_editor.connection)
102.                 index_expressions.append(index_expression)
103.             expressions = ExpressionList(*index_expressions).resolve_expression(
104.                 Query(model, alias_cols=False),
105.             )
106.             fields = None
107.             col_suffixes = None
108.         else:
109.             fields = [
110.                 model._meta.get_field(field_name)
111.                 for field_name, _ in self.fields_orders
112.             ]
113.             if schema_editor.connection.features.supports_index_column_ordering:
114.                 col_suffixes = [order[1] for order in self.fields_orders]
115.             else:
116.                 col_suffixes = [""] * len(self.fields_orders)
117.             expressions = None
118.         return schema_editor._create_index_sql(
119.             model,
120.             fields=fields,
121.             name=self.name,
122.             using=using,
123.             db_tablespace=self.db_tablespace,
124.             col_suffixes=col_suffixes,
125.             opclasses=self.opclasses,
126.             condition=condition,
127.             include=include,
128.             expressions=expressions,
129.             **kwargs,
130.         )
131. 
132.     def remove_sql(self, model, schema_editor, **kwargs):
133.         return schema_editor._delete_index_sql(model, self.name, **kwargs)
134. 
135.     def deconstruct(self):
136.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__name__)
137.         path = path.replace("django.db.models.indexes", "django.db.models")
138.         kwargs = {"name": self.name}
139.         if self.fields:
140.             kwargs["fields"] = self.fields
141.         if self.db_tablespace is not None:
142.             kwargs["db_tablespace"] = self.db_tablespace
143.         if self.opclasses:
144.             kwargs["opclasses"] = self.opclasses
145.         if self.condition:
146.             kwargs["condition"] = self.condition
147.         if self.include:
148.             kwargs["include"] = self.include
149.         return (path, self.expressions, kwargs)
150. 
151.     def clone(self):
152.         """Create a copy of this Index."""
153.         _, args, kwargs = self.deconstruct()
154.         return self.__class__(*args, **kwargs)
155. 
156.     def set_name_with_model(self, model):
157.         """
158.         Generate a unique name for the index.
159. 
160.         The name is divided into 3 parts - table name (12 chars), field name
161.         (8 chars) and unique hash + suffix (10 chars). Each part is made to
162.         fit its size by truncating the excess length.
163.         """
164.         _, table_name = split_identifier(model._meta.db_table)
165.         column_names = [
166.             model._meta.get_field(field_name).column
167.             for field_name, order in self.fields_orders
168.         ]
169.         column_names_with_order = [
170.             (("-%s" if order else "%s") % column_name)
171.             for column_name, (field_name, order) in zip(
172.                 column_names, self.fields_orders
173.             )
174.         ]
175.         # The length of the parts of the name is based on the default max
176.         # length of 30 characters.
177.         hash_data = [table_name] + column_names_with_order + [self.suffix]
178.         self.name = "%s_%s_%s" % (
179.             table_name[:11],
180.             column_names[0][:7],
181.             "%s_%s" % (names_digest(*hash_data, length=6), self.suffix),
182.         )
183.         if len(self.name) > self.max_name_length:
184.             raise ValueError(
185.                 "Index too long for multiple database support. Is self.suffix "
186.                 "longer than 3 characters?"
187.             )
188.         if self.name[0] == "_" or self.name[0].isdigit():
189.             self.name = "D%s" % self.name[1:]
190. 
191.     def __repr__(self):
192.         return "<%s:%s%s%s%s%s%s%s>" % (
193.             self.__class__.__qualname__,
194.             "" if not self.fields else " fields=%s" % repr(self.fields),
195.             "" if not self.expressions else " expressions=%s" % repr(self.expressions),
196.             "" if not self.name else " name=%s" % repr(self.name),
197.             ""
198.             if self.db_tablespace is None
199.             else " db_tablespace=%s" % repr(self.db_tablespace),
200.             "" if self.condition is None else " condition=%s" % self.condition,
201.             "" if not self.include else " include=%s" % repr(self.include),
202.             "" if not self.opclasses else " opclasses=%s" % repr(self.opclasses),
203.         )
204. 
205.     def __eq__(self, other):
206.         if self.__class__ == other.__class__:
207.             return self.deconstruct() == other.deconstruct()
208.         return NotImplemented
209. 
210. 
211. class IndexExpression(Func):
212.     """Order and wrap expressions for CREATE INDEX statements."""
213. 
214.     template = "%(expressions)s"
215.     wrapper_classes = (OrderBy, Collate)
216. 
217.     def set_wrapper_classes(self, connection=None):
218.         # Some databases (e.g. MySQL) treats COLLATE as an indexed expression.
219.         if connection and connection.features.collate_as_index_expression:
220.             self.wrapper_classes = tuple(
221.                 [
222.                     wrapper_cls
223.                     for wrapper_cls in self.wrapper_classes
224.                     if wrapper_cls is not Collate
225.                 ]
226.             )
227. 
228.     @classmethod
229.     def register_wrappers(cls, *wrapper_classes):
230.         cls.wrapper_classes = wrapper_classes
231. 
232.     def resolve_expression(
233.         self,
234.         query=None,
235.         allow_joins=True,
236.         reuse=None,
237.         summarize=False,
238.         for_save=False,
239.     ):
240.         expressions = list(self.flatten())
241.         # Split expressions and wrappers.
242.         index_expressions, wrappers = partition(
243.             lambda e: isinstance(e, self.wrapper_classes),
244.             expressions,
245.         )
246.         wrapper_types = [type(wrapper) for wrapper in wrappers]
247.         if len(wrapper_types) != len(set(wrapper_types)):
248.             raise ValueError(
249.                 "Multiple references to %s can't be used in an indexed "
250.                 "expression."
251.                 % ", ".join(
252.                     [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]
253.                 )
254.             )
255.         if expressions[1 : len(wrappers) + 1] != wrappers:
256.             raise ValueError(
257.                 "%s must be topmost expressions in an indexed expression."
258.                 % ", ".join(
259.                     [wrapper_cls.__qualname__ for wrapper_cls in self.wrapper_classes]
260.                 )
261.             )
262.         # Wrap expressions in parentheses if they are not column references.
263.         root_expression = index_expressions[1]
264.         resolve_root_expression = root_expression.resolve_expression(
265.             query,
266.             allow_joins,
267.             reuse,
268.             summarize,
269.             for_save,
270.         )
271.         if not isinstance(resolve_root_expression, Col):
272.             root_expression = Func(root_expression, template="(%(expressions)s)")
273. 
274.         if wrappers:
275.             # Order wrappers and set their expressions.
276.             wrappers = sorted(
277.                 wrappers,
278.                 key=lambda w: self.wrapper_classes.index(type(w)),
279.             )
280.             wrappers = [wrapper.copy() for wrapper in wrappers]
281.             for i, wrapper in enumerate(wrappers[:-1]):
282.                 wrapper.set_source_expressions([wrappers[i + 1]])
283.             # Set the root expression on the deepest wrapper.
284.             wrappers[-1].set_source_expressions([root_expression])
285.             self.set_source_expressions([wrappers[0]])
286.         else:
287.             # Use the root expression, if there are no wrappers.
288.             self.set_source_expressions([root_expression])
289.         return super().resolve_expression(
290.             query, allow_joins, reuse, summarize, for_save
291.         )
292. 
293.     def as_sqlite(self, compiler, connection, **extra_context):
294.         # Casting to numeric is unnecessary.
295.         return self.as_sql(compiler, connection, **extra_context)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 01:31:19,639 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants me to analyze a bug fix for the `RenameIndex` migration operation. The provided context is missing the implementation of the `RenameIndex` class and its base class `IndexOperation`, which are essential for understanding the bug and the proposed fix. The file `django/db/migrations/operations/models.py` that contains these classes was only partially provided in a previous step. I need the complete content of this file, or at least the definitions for `IndexOperation` and `RenameIndex` to understand the operation's `__init__` method and the original `database_forwards` implementation." query='Please provide the full content of the file `django/db/migrations/operations/models.py`.' extra_requirements='If the full file is too large, please provide at least the full class definitions for `IndexOperation` and `RenameIndex`.' purpose='This will provide the necessary context of how `RenameIndex` is implemented, including its initialization and how it handles named and unnamed indexes, which is central to the bug.'
2025-12-24 01:31:19,640 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/migrations/operations/models.py`.
2025-12-24 01:31:19,640 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 01:31:19,641 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 01:31:19,641 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 01:31:19,641 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/migrations/operations/models.py`.
Extra requirements: If the full file is too large, please provide at least the full class definitions for `IndexOperation` and `RenameIndex`.
Purpose: This will provide the necessary context of how `RenameIndex` is implemented, including its initialization and how it handles named and unnamed indexes, which is central to the bug.
2025-12-24 01:31:24,320 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first attempt to retrieve the entire content of `django/db/migrations/operations/models.py`. If the file is too large, I will then specifically locate and provide the complete class definitions for `IndexOperation` and `RenameIndex` to ensure you have the necessary code for your investigation.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/migrations/operations/models.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2141, 'candidates_token_count': 87, 'total_token_count': 2539, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2141}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 87}], 'thoughts_token_count': 311, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.26378289584455816, 'model_name': 'gemini-2.5-pro'} id='run--e71b99cf-2ba2-4178-b6bf-0cac14ed3d67-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/migrations/operations/models.py'}, 'id': '6c1fc2bf-5815-46d1-94f6-42af6ee02104', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2141, 'output_tokens': 87, 'total_tokens': 2539, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 311}}
2025-12-24 01:31:35,732 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the content of `django/db/migrations/operations/models.py`. Since the file is larger than 500 lines, I will now fetch the remaining content and then extract the class definitions for `IndexOperation` and `RenameIndex` for you.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 1000.0, "relative_path": "django/db/migrations/operations/models.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8936, 'candidates_token_count': 88, 'total_token_count': 9846, 'cached_content_token_count': 1834, 'prompt_tokens_details': [{'modality': 1, 'token_count': 8936}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1834}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 88}], 'thoughts_token_count': 822}, 'finish_reason': 'STOP', 'avg_logprobs': -1.3375613472678445, 'model_name': 'gemini-2.5-pro'} id='run--4ec34c1c-37bb-4ac9-8d8f-a2f1c56f6054-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 1000.0, 'relative_path': 'django/db/migrations/operations/models.py'}, 'id': '95c3e97a-d8c5-4f5d-a684-791fdb660e8d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8936, 'output_tokens': 88, 'total_tokens': 9846, 'input_token_details': {'cache_read': 1834}, 'output_token_details': {'reasoning': 822}}
2025-12-24 01:31:56,837 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of `django/db/migrations/operations/models.py`. As requested, here are the full class definitions for `IndexOperation` and `RenameIndex`, which should provide the necessary context for understanding the bug related to renaming indexes.\n\n```python\nclass IndexOperation(Operation):\n    option_name = "indexes"\n\n    @cached_property\n    def model_name_lower(self):\n        return self.model_name.lower()\n\n\nclass RenameIndex(IndexOperation):\n    """Rename an index."""\n\n    def __init__(self, model_name, new_name, old_name=None, old_fields=None):\n        if not old_name and not old_fields:\n            raise ValueError(\n                "RenameIndex requires one of old_name and old_fields arguments to be "\n                "set."\n            )\n        if old_name and old_fields:\n            raise ValueError(\n                "RenameIndex.old_name and old_fields are mutually exclusive."\n            )\n        self.model_name = model_name\n        self.new_name = new_name\n        self.old_name = old_name\n        self.old_fields = old_fields\n\n    @cached_property\n    def old_name_lower(self):\n        return self.old_name.lower()\n\n    @cached_property\n    def new_name_lower(self):\n        return self.new_name.lower()\n\n    def deconstruct(self):\n        kwargs = {\n            "model_name": self.model_name,\n            "new_name": self.new_name,\n        }\n        if self.old_name:\n            kwargs["old_name"] = self.old_name\n        if self.old_fields:\n            kwargs["old_fields"] = self.old_fields\n        return (self.__class__.__qualname__, [], kwargs)\n\n    def state_forwards(self, app_label, state):\n        if self.old_fields:\n            state.add_index(\n                app_label,\n                self.model_name_lower,\n                models.Index(fields=self.old_fields, name=self.new_name),\n            )\n            state.remove_model_options(\n                app_label,\n                self.model_name_lower,\n                AlterIndexTogether.option_name,\n                self.old_fields,\n            )\n        else:\n            state.rename_index(\n                app_label, self.model_name_lower, self.old_name, self.new_name\n            )\n\n    def database_forwards(self, app_label, schema_editor, from_state, to_state):\n        model = to_state.apps.get_model(app_label, self.model_name)\n        if not self.allow_migrate_model(schema_editor.connection.alias, model):\n            return\n\n        if self.old_fields:\n            from_model = from_state.apps.get_model(app_label, self.model_name)\n            columns = [\n                from_model._meta.get_field(field).column for field in self.old_fields\n            ]\n            matching_index_name = schema_editor._constraint_names(\n                from_model, column_names=columns, index=True\n            )\n            if len(matching_index_name) != 1:\n                raise ValueError(\n                    "Found wrong number (%s) of indexes for %s(%s)."\n                    % (\n                        len(matching_index_name),\n                        from_model._meta.db_table,\n                        ", ".join(columns),\n                    )\n                )\n            old_index = models.Index(\n                fields=self.old_fields,\n                name=matching_index_name[0],\n            )\n        else:\n            from_model_state = from_state.models[app_label, self.model_name_lower]\n            old_index = from_model_state.get_index_by_name(self.old_name)\n\n        to_model_state = to_state.models[app_label, self.model_name_lower]\n        new_index = to_model_state.get_index_by_name(self.new_name)\n        schema_editor.rename_index(model, old_index, new_index)\n\n    def database_backwards(self, app_label, schema_editor, from_state, to_state):\n        if self.old_fields:\n            # Backward operation with unnamed index is a no-op.\n            return\n\n        self.new_name_lower, self.old_name_lower = (\n            self.old_name_lower,\n            self.new_name_lower,\n        )\n        self.new_name, self.old_name = self.old_name, self.new_name\n\n        self.database_forwards(app_label, schema_editor, from_state, to_state)\n\n        self.new_name_lower, self.old_name_lower = (\n            self.old_name_lower,\n            self.new_name_lower,\n        )\n        self.new_name, self.old_name = self.old_name, self.new_name\n\n    def describe(self):\n        if self.old_name:\n            return (\n                f"Rename index {self.old_name} on {self.model_name} to {self.new_name}"\n            )\n        return (\n            f"Rename unnamed index for {self.old_fields} on {self.model_name} to "\n            f"{self.new_name}"\n        )\n\n    @property\n    def migration_name_fragment(self):\n        if self.old_name:\n            return "rename_%s_%s" % (self.old_name_lower, self.new_name_lower)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 561, 'end_index': 1368, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 1315, 'end_index': 2472, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 2451, 'end_index': 3626, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 3637, 'end_index': 4204, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 4039, 'end_index': 4515, 'uri': 'https://github.com/sametmax/Django--an-app-at-a-time', 'title': '', 'license_': ''}, {'start_index': 4343, 'end_index': 4977, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 5428, 'end_index': 6235, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 6182, 'end_index': 7339, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 7318, 'end_index': 8493, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 8504, 'end_index': 9071, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}, {'start_index': 8906, 'end_index': 9382, 'uri': 'https://github.com/sametmax/Django--an-app-at-a-time', 'title': '', 'license_': ''}, {'start_index': 9210, 'end_index': 9844, 'uri': 'https://github.com/JakeMurrayMcGuirk/SDEV-CA2', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 16287, 'candidates_token_count': 1363, 'total_token_count': 19055, 'cached_content_token_count': 7600, 'prompt_tokens_details': [{'modality': 1, 'token_count': 16287}], 'cache_tokens_details': [{'modality': 1, 'token_count': 7600}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 1363}], 'thoughts_token_count': 1405}, 'finish_reason': 'STOP', 'avg_logprobs': -0.00874706024819232, 'model_name': 'gemini-2.5-pro'} id='run--3241d70a-8212-4245-8844-200d6f871845-0' usage_metadata={'input_tokens': 16287, 'output_tokens': 1363, 'total_tokens': 19055, 'input_token_details': {'cache_read': 7600}, 'output_token_details': {'reasoning': 1405}}
2025-12-24 01:31:56,839 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/migrations/operations/models.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the full file is too large, please provide at least the full class definitions for `IndexOperation` and `RenameIndex`.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This will provide the necessary context of how `RenameIndex` is implemented, including its initialization and how it handles named and unnamed indexes, which is central to the bug.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/migrations/operations/models.py
Line number range: 1 - 500
Content:
1. from django.db import models
2. from django.db.migrations.operations.base import Operation
3. from django.db.migrations.state import ModelState
4. from django.db.migrations.utils import field_references, resolve_relation
5. from django.db.models.options import normalize_together
6. from django.utils.functional import cached_property
7. 
8. from .fields import AddField, AlterField, FieldOperation, RemoveField, RenameField
9. 
10. 
11. def _check_for_duplicates(arg_name, objs):
12.     used_vals = set()
13.     for val in objs:
14.         if val in used_vals:
15.             raise ValueError(
16.                 "Found duplicate value %s in CreateModel %s argument." % (val, arg_name)
17.             )
18.         used_vals.add(val)
19. 
20. 
21. class ModelOperation(Operation):
22.     def __init__(self, name):
23.         self.name = name
24. 
25.     @cached_property
26.     def name_lower(self):
27.         return self.name.lower()
28. 
29.     def references_model(self, name, app_label):
30.         return name.lower() == self.name_lower
31. 
32.     def reduce(self, operation, app_label):
33.         return super().reduce(operation, app_label) or self.can_reduce_through(
34.             operation, app_label
35.         )
36. 
37.     def can_reduce_through(self, operation, app_label):
38.         return not operation.references_model(self.name, app_label)
39. 
40. 
41. class CreateModel(ModelOperation):
42.     """Create a model's table."""
43. 
44.     serialization_expand_args = ["fields", "options", "managers"]
45. 
46.     def __init__(self, name, fields, options=None, bases=None, managers=None):
47.         self.fields = fields
48.         self.options = options or {}
49.         self.bases = bases or (models.Model,)
50.         self.managers = managers or []
51.         super().__init__(name)
52.         # Sanity-check that there are no duplicated field names, bases, or
53.         # manager names
54.         _check_for_duplicates("fields", (name for name, _ in self.fields))
55.         _check_for_duplicates(
56.             "bases",
57.             (
58.                 base._meta.label_lower
59.                 if hasattr(base, "_meta")
60.                 else base.lower()
61.                 if isinstance(base, str)
62.                 else base
63.                 for base in self.bases
64.             ),
65.         )
66.         _check_for_duplicates("managers", (name for name, _ in self.managers))
67. 
68.     def deconstruct(self):
69.         kwargs = {
70.             "name": self.name,
71.             "fields": self.fields,
72.         }
73.         if self.options:
74.             kwargs["options"] = self.options
75.         if self.bases and self.bases != (models.Model,):
76.             kwargs["bases"] = self.bases
77.         if self.managers and self.managers != [("objects", models.Manager())]:
78.             kwargs["managers"] = self.managers
79.         return (self.__class__.__qualname__, [], kwargs)
80. 
81.     def state_forwards(self, app_label, state):
82.         state.add_model(
83.             ModelState(
84.                 app_label,
85.                 self.name,
86.                 list(self.fields),
87.                 dict(self.options),
88.                 tuple(self.bases),
89.                 list(self.managers),
90.             )
91.         )
92. 
93.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
94.         model = to_state.apps.get_model(app_label, self.name)
95.         if self.allow_migrate_model(schema_editor.connection.alias, model):
96.             schema_editor.create_model(model)
97. 
98.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
99.         model = from_state.apps.get_model(app_label, self.name)
100.         if self.allow_migrate_model(schema_editor.connection.alias, model):
101.             schema_editor.delete_model(model)
102. 
103.     def describe(self):
104.         return "Create %smodel %s" % (
105.             "proxy " if self.options.get("proxy", False) else "",
106.             self.name,
107.         )
108. 
109.     @property
110.     def migration_name_fragment(self):
111.         return self.name_lower
112. 
113.     def references_model(self, name, app_label):
114.         name_lower = name.lower()
115.         if name_lower == self.name_lower:
116.             return True
117. 
118.         # Check we didn't inherit from the model
119.         reference_model_tuple = (app_label, name_lower)
120.         for base in self.bases:
121.             if (
122.                 base is not models.Model
123.                 and isinstance(base, (models.base.ModelBase, str))
124.                 and resolve_relation(base, app_label) == reference_model_tuple
125.             ):
126.                 return True
127. 
128.         # Check we have no FKs/M2Ms with it
129.         for _name, field in self.fields:
130.             if field_references(
131.                 (app_label, self.name_lower), field, reference_model_tuple
132.             ):
133.                 return True
134.         return False
135. 
136.     def reduce(self, operation, app_label):
137.         if (
138.             isinstance(operation, DeleteModel)
139.             and self.name_lower == operation.name_lower
140.             and not self.options.get("proxy", False)
141.         ):
142.             return []
143.         elif (
144.             isinstance(operation, RenameModel)
145.             and self.name_lower == operation.old_name_lower
146.         ):
147.             return [
148.                 CreateModel(
149.                     operation.new_name,
150.                     fields=self.fields,
151.                     options=self.options,
152.                     bases=self.bases,
153.                     managers=self.managers,
154.                 ),
155.             ]
156.         elif (
157.             isinstance(operation, AlterModelOptions)
158.             and self.name_lower == operation.name_lower
159.         ):
160.             options = {**self.options, **operation.options}
161.             for key in operation.ALTER_OPTION_KEYS:
162.                 if key not in operation.options:
163.                     options.pop(key, None)
164.             return [
165.                 CreateModel(
166.                     self.name,
167.                     fields=self.fields,
168.                     options=options,
169.                     bases=self.bases,
170.                     managers=self.managers,
171.                 ),
172.             ]
173.         elif (
174.             isinstance(operation, AlterModelManagers)
175.             and self.name_lower == operation.name_lower
176.         ):
177.             return [
178.                 CreateModel(
179.                     self.name,
180.                     fields=self.fields,
181.                     options=self.options,
182.                     bases=self.bases,
183.                     managers=operation.managers,
184.                 ),
185.             ]
186.         elif (
187.             isinstance(operation, AlterTogetherOptionOperation)
188.             and self.name_lower == operation.name_lower
189.         ):
190.             return [
191.                 CreateModel(
192.                     self.name,
193.                     fields=self.fields,
194.                     options={
195.                         **self.options,
196.                         **{operation.option_name: operation.option_value},
197.                     },
198.                     bases=self.bases,
199.                     managers=self.managers,
200.                 ),
201.             ]
202.         elif (
203.             isinstance(operation, AlterOrderWithRespectTo)
204.             and self.name_lower == operation.name_lower
205.         ):
206.             return [
207.                 CreateModel(
208.                     self.name,
209.                     fields=self.fields,
210.                     options={
211.                         **self.options,
212.                         "order_with_respect_to": operation.order_with_respect_to,
213.                     },
214.                     bases=self.bases,
215.                     managers=self.managers,
216.                 ),
217.             ]
218.         elif (
219.             isinstance(operation, FieldOperation)
220.             and self.name_lower == operation.model_name_lower
221.         ):
222.             if isinstance(operation, AddField):
223.                 return [
224.                     CreateModel(
225.                         self.name,
226.                         fields=self.fields + [(operation.name, operation.field)],
227.                         options=self.options,
228.                         bases=self.bases,
229.                         managers=self.managers,
230.                     ),
231.                 ]
232.             elif isinstance(operation, AlterField):
233.                 return [
234.                     CreateModel(
235.                         self.name,
236.                         fields=[
237.                             (n, operation.field if n == operation.name else v)
238.                             for n, v in self.fields
239.                         ],
240.                         options=self.options,
241.                         bases=self.bases,
242.                         managers=self.managers,
243.                     ),
244.                 ]
245.             elif isinstance(operation, RemoveField):
246.                 options = self.options.copy()
247.                 for option_name in ("unique_together", "index_together"):
248.                     option = options.pop(option_name, None)
249.                     if option:
250.                         option = set(
251.                             filter(
252.                                 bool,
253.                                 (
254.                                     tuple(
255.                                         f for f in fields if f != operation.name_lower
256.                                     )
257.                                     for fields in option
258.                                 ),
259.                             )
260.                         )
261.                         if option:
262.                             options[option_name] = option
263.                 order_with_respect_to = options.get("order_with_respect_to")
264.                 if order_with_respect_to == operation.name_lower:
265.                     del options["order_with_respect_to"]
266.                 return [
267.                     CreateModel(
268.                         self.name,
269.                         fields=[
270.                             (n, v)
271.                             for n, v in self.fields
272.                             if n.lower() != operation.name_lower
273.                         ],
274.                         options=options,
275.                         bases=self.bases,
276.                         managers=self.managers,
277.                     ),
278.                 ]
279.             elif isinstance(operation, RenameField):
280.                 options = self.options.copy()
281.                 for option_name in ("unique_together", "index_together"):
282.                     option = options.get(option_name)
283.                     if option:
284.                         options[option_name] = {
285.                             tuple(
286.                                 operation.new_name if f == operation.old_name else f
287.                                 for f in fields
288.                             )
289.                             for fields in option
290.                         }
291.                 order_with_respect_to = options.get("order_with_respect_to")
292.                 if order_with_respect_to == operation.old_name:
293.                     options["order_with_respect_to"] = operation.new_name
294.                 return [
295.                     CreateModel(
296.                         self.name,
297.                         fields=[
298.                             (operation.new_name if n == operation.old_name else n, v)
299.                             for n, v in self.fields
300.                         ],
301.                         options=options,
302.                         bases=self.bases,
303.                         managers=self.managers,
304.                     ),
305.                 ]
306.         return super().reduce(operation, app_label)
307. 
308. 
309. class DeleteModel(ModelOperation):
310.     """Drop a model's table."""
311. 
312.     def deconstruct(self):
313.         kwargs = {
314.             "name": self.name,
315.         }
316.         return (self.__class__.__qualname__, [], kwargs)
317. 
318.     def state_forwards(self, app_label, state):
319.         state.remove_model(app_label, self.name_lower)
320. 
321.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
322.         model = from_state.apps.get_model(app_label, self.name)
323.         if self.allow_migrate_model(schema_editor.connection.alias, model):
324.             schema_editor.delete_model(model)
325. 
326.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
327.         model = to_state.apps.get_model(app_label, self.name)
328.         if self.allow_migrate_model(schema_editor.connection.alias, model):
329.             schema_editor.create_model(model)
330. 
331.     def references_model(self, name, app_label):
332.         # The deleted model could be referencing the specified model through
333.         # related fields.
334.         return True
335. 
336.     def describe(self):
337.         return "Delete model %s" % self.name
338. 
339.     @property
340.     def migration_name_fragment(self):
341.         return "delete_%s" % self.name_lower
342. 
343. 
344. class RenameModel(ModelOperation):
345.     """Rename a model."""
346. 
347.     def __init__(self, old_name, new_name):
348.         self.old_name = old_name
349.         self.new_name = new_name
350.         super().__init__(old_name)
351. 
352.     @cached_property
353.     def old_name_lower(self):
354.         return self.old_name.lower()
355. 
356.     @cached_property
357.     def new_name_lower(self):
358.         return self.new_name.lower()
359. 
360.     def deconstruct(self):
361.         kwargs = {
362.             "old_name": self.old_name,
363.             "new_name": self.new_name,
364.         }
365.         return (self.__class__.__qualname__, [], kwargs)
366. 
367.     def state_forwards(self, app_label, state):
368.         state.rename_model(app_label, self.old_name, self.new_name)
369. 
370.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
371.         new_model = to_state.apps.get_model(app_label, self.new_name)
372.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
373.             old_model = from_state.apps.get_model(app_label, self.old_name)
374.             old_db_table = old_model._meta.db_table
375.             new_db_table = new_model._meta.db_table
376.             # Don't alter when a table name is not changed.
377.             if old_db_table == new_db_table:
378.                 return
379.             # Move the main table
380.             schema_editor.alter_db_table(new_model, old_db_table, new_db_table)
381.             # Alter the fields pointing to us
382.             for related_object in old_model._meta.related_objects:
383.                 if related_object.related_model == old_model:
384.                     model = new_model
385.                     related_key = (app_label, self.new_name_lower)
386.                 else:
387.                     model = related_object.related_model
388.                     related_key = (
389.                         related_object.related_model._meta.app_label,
390.                         related_object.related_model._meta.model_name,
391.                     )
392.                 to_field = to_state.apps.get_model(*related_key)._meta.get_field(
393.                     related_object.field.name
394.                 )
395.                 schema_editor.alter_field(
396.                     model,
397.                     related_object.field,
398.                     to_field,
399.                 )
400.             # Rename M2M fields whose name is based on this model's name.
401.             fields = zip(
402.                 old_model._meta.local_many_to_many, new_model._meta.local_many_to_many
403.             )
404.             for (old_field, new_field) in fields:
405.                 # Skip self-referential fields as these are renamed above.
406.                 if (
407.                     new_field.model == new_field.related_model
408.                     or not new_field.remote_field.through._meta.auto_created
409.                 ):
410.                     continue
411.                 # Rename the M2M table that's based on this model's name.
412.                 old_m2m_model = old_field.remote_field.through
413.                 new_m2m_model = new_field.remote_field.through
414.                 schema_editor.alter_db_table(
415.                     new_m2m_model,
416.                     old_m2m_model._meta.db_table,
417.                     new_m2m_model._meta.db_table,
418.                 )
419.                 # Rename the column in the M2M table that's based on this
420.                 # model's name.
421.                 schema_editor.alter_field(
422.                     new_m2m_model,
423.                     old_m2m_model._meta.get_field(old_model._meta.model_name),
424.                     new_m2m_model._meta.get_field(new_model._meta.model_name),
425.                 )
426. 
427.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
428.         self.new_name_lower, self.old_name_lower = (
429.             self.old_name_lower,
430.             self.new_name_lower,
431.         )
432.         self.new_name, self.old_name = self.old_name, self.new_name
433. 
434.         self.database_forwards(app_label, schema_editor, from_state, to_state)
435. 
436.         self.new_name_lower, self.old_name_lower = (
437.             self.old_name_lower,
438.             self.new_name_lower,
439.         )
440.         self.new_name, self.old_name = self.old_name, self.new_name
441. 
442.     def references_model(self, name, app_label):
443.         return (
444.             name.lower() == self.old_name_lower or name.lower() == self.new_name_lower
445.         )
446. 
447.     def describe(self):
448.         return "Rename model %s to %s" % (self.old_name, self.new_name)
449. 
450.     @property
451.     def migration_name_fragment(self):
452.         return "rename_%s_%s" % (self.old_name_lower, self.new_name_lower)
453. 
454.     def reduce(self, operation, app_label):
455.         if (
456.             isinstance(operation, RenameModel)
457.             and self.new_name_lower == operation.old_name_lower
458.         ):
459.             return [
460.                 RenameModel(
461.                     self.old_name,
462.                     operation.new_name,
463.                 ),
464.             ]
465.         # Skip `ModelOperation.reduce` as we want to run `references_model`
466.         # against self.new_name.
467.         return super(ModelOperation, self).reduce(
468.             operation, app_label
469.         ) or not operation.references_model(self.new_name, app_label)
470. 
471. 
472. class ModelOptionOperation(ModelOperation):
473.     def reduce(self, operation, app_label):
474.         if (
475.             isinstance(operation, (self.__class__, DeleteModel))
476.             and self.name_lower == operation.name_lower
477.         ):
478.             return [operation]
479.         return super().reduce(operation, app_label)
480. 
481. 
482. class AlterModelTable(ModelOptionOperation):
483.     """Rename a model's table."""
484. 
485.     def __init__(self, name, table):
486.         self.table = table
487.         super().__init__(name)
488. 
489.     def deconstruct(self):
490.         kwargs = {
491.             "name": self.name,
492.             "table": self.table,
493.         }
494.         return (self.__class__.__qualname__, [], kwargs)
495. 
496.     def state_forwards(self, app_label, state):
497.         state.alter_model_options(app_label, self.name_lower, {"db_table": self.table})
498. 
499.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
500.         new_model = to_state.apps.get_model(app_label, self.name)


File: django/db/migrations/operations/models.py
Line number range: 501 - 1000
Content:
501.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
502.             old_model = from_state.apps.get_model(app_label, self.name)
503.             schema_editor.alter_db_table(
504.                 new_model,
505.                 old_model._meta.db_table,
506.                 new_model._meta.db_table,
507.             )
508.             # Rename M2M fields whose name is based on this model's db_table
509.             for (old_field, new_field) in zip(
510.                 old_model._meta.local_many_to_many, new_model._meta.local_many_to_many
511.             ):
512.                 if new_field.remote_field.through._meta.auto_created:
513.                     schema_editor.alter_db_table(
514.                         new_field.remote_field.through,
515.                         old_field.remote_field.through._meta.db_table,
516.                         new_field.remote_field.through._meta.db_table,
517.                     )
518. 
519.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
520.         return self.database_forwards(app_label, schema_editor, from_state, to_state)
521. 
522.     def describe(self):
523.         return "Rename table for %s to %s" % (
524.             self.name,
525.             self.table if self.table is not None else "(default)",
526.         )
527. 
528.     @property
529.     def migration_name_fragment(self):
530.         return "alter_%s_table" % self.name_lower
531. 
532. 
533. class AlterTogetherOptionOperation(ModelOptionOperation):
534.     option_name = None
535. 
536.     def __init__(self, name, option_value):
537.         if option_value:
538.             option_value = set(normalize_together(option_value))
539.         setattr(self, self.option_name, option_value)
540.         super().__init__(name)
541. 
542.     @cached_property
543.     def option_value(self):
544.         return getattr(self, self.option_name)
545. 
546.     def deconstruct(self):
547.         kwargs = {
548.             "name": self.name,
549.             self.option_name: self.option_value,
550.         }
551.         return (self.__class__.__qualname__, [], kwargs)
552. 
553.     def state_forwards(self, app_label, state):
554.         state.alter_model_options(
555.             app_label,
556.             self.name_lower,
557.             {self.option_name: self.option_value},
558.         )
559. 
560.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
561.         new_model = to_state.apps.get_model(app_label, self.name)
562.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
563.             old_model = from_state.apps.get_model(app_label, self.name)
564.             alter_together = getattr(schema_editor, "alter_%s" % self.option_name)
565.             alter_together(
566.                 new_model,
567.                 getattr(old_model._meta, self.option_name, set()),
568.                 getattr(new_model._meta, self.option_name, set()),
569.             )
570. 
571.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
572.         return self.database_forwards(app_label, schema_editor, from_state, to_state)
573. 
574.     def references_field(self, model_name, name, app_label):
575.         return self.references_model(model_name, app_label) and (
576.             not self.option_value
577.             or any((name in fields) for fields in self.option_value)
578.         )
579. 
580.     def describe(self):
581.         return "Alter %s for %s (%s constraint(s))" % (
582.             self.option_name,
583.             self.name,
584.             len(self.option_value or ""),
585.         )
586. 
587.     @property
588.     def migration_name_fragment(self):
589.         return "alter_%s_%s" % (self.name_lower, self.option_name)
590. 
591.     def can_reduce_through(self, operation, app_label):
592.         return super().can_reduce_through(operation, app_label) or (
593.             isinstance(operation, AlterTogetherOptionOperation)
594.             and type(operation) is not type(self)
595.         )
596. 
597. 
598. class AlterUniqueTogether(AlterTogetherOptionOperation):
599.     """
600.     Change the value of unique_together to the target one.
601.     Input value of unique_together must be a set of tuples.
602.     """
603. 
604.     option_name = "unique_together"
605. 
606.     def __init__(self, name, unique_together):
607.         super().__init__(name, unique_together)
608. 
609. 
610. class AlterIndexTogether(AlterTogetherOptionOperation):
611.     """
612.     Change the value of index_together to the target one.
613.     Input value of index_together must be a set of tuples.
614.     """
615. 
616.     option_name = "index_together"
617. 
618.     def __init__(self, name, index_together):
619.         super().__init__(name, index_together)
620. 
621. 
622. class AlterOrderWithRespectTo(ModelOptionOperation):
623.     """Represent a change with the order_with_respect_to option."""
624. 
625.     option_name = "order_with_respect_to"
626. 
627.     def __init__(self, name, order_with_respect_to):
628.         self.order_with_respect_to = order_with_respect_to
629.         super().__init__(name)
630. 
631.     def deconstruct(self):
632.         kwargs = {
633.             "name": self.name,
634.             "order_with_respect_to": self.order_with_respect_to,
635.         }
636.         return (self.__class__.__qualname__, [], kwargs)
637. 
638.     def state_forwards(self, app_label, state):
639.         state.alter_model_options(
640.             app_label,
641.             self.name_lower,
642.             {self.option_name: self.order_with_respect_to},
643.         )
644. 
645.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
646.         to_model = to_state.apps.get_model(app_label, self.name)
647.         if self.allow_migrate_model(schema_editor.connection.alias, to_model):
648.             from_model = from_state.apps.get_model(app_label, self.name)
649.             # Remove a field if we need to
650.             if (
651.                 from_model._meta.order_with_respect_to
652.                 and not to_model._meta.order_with_respect_to
653.             ):
654.                 schema_editor.remove_field(
655.                     from_model, from_model._meta.get_field("_order")
656.                 )
657.             # Add a field if we need to (altering the column is untouched as
658.             # it's likely a rename)
659.             elif (
660.                 to_model._meta.order_with_respect_to
661.                 and not from_model._meta.order_with_respect_to
662.             ):
663.                 field = to_model._meta.get_field("_order")
664.                 if not field.has_default():
665.                     field.default = 0
666.                 schema_editor.add_field(
667.                     from_model,
668.                     field,
669.                 )
670. 
671.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
672.         self.database_forwards(app_label, schema_editor, from_state, to_state)
673. 
674.     def references_field(self, model_name, name, app_label):
675.         return self.references_model(model_name, app_label) and (
676.             self.order_with_respect_to is None or name == self.order_with_respect_to
677.         )
678. 
679.     def describe(self):
680.         return "Set order_with_respect_to on %s to %s" % (
681.             self.name,
682.             self.order_with_respect_to,
683.         )
684. 
685.     @property
686.     def migration_name_fragment(self):
687.         return "alter_%s_order_with_respect_to" % self.name_lower
688. 
689. 
690. class AlterModelOptions(ModelOptionOperation):
691.     """
692.     Set new model options that don't directly affect the database schema
693.     (like verbose_name, permissions, ordering). Python code in migrations
694.     may still need them.
695.     """
696. 
697.     # Model options we want to compare and preserve in an AlterModelOptions op
698.     ALTER_OPTION_KEYS = [
699.         "base_manager_name",
700.         "default_manager_name",
701.         "default_related_name",
702.         "get_latest_by",
703.         "managed",
704.         "ordering",
705.         "permissions",
706.         "default_permissions",
707.         "select_on_save",
708.         "verbose_name",
709.         "verbose_name_plural",
710.     ]
711. 
712.     def __init__(self, name, options):
713.         self.options = options
714.         super().__init__(name)
715. 
716.     def deconstruct(self):
717.         kwargs = {
718.             "name": self.name,
719.             "options": self.options,
720.         }
721.         return (self.__class__.__qualname__, [], kwargs)
722. 
723.     def state_forwards(self, app_label, state):
724.         state.alter_model_options(
725.             app_label,
726.             self.name_lower,
727.             self.options,
728.             self.ALTER_OPTION_KEYS,
729.         )
730. 
731.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
732.         pass
733. 
734.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
735.         pass
736. 
737.     def describe(self):
738.         return "Change Meta options on %s" % self.name
739. 
740.     @property
741.     def migration_name_fragment(self):
742.         return "alter_%s_options" % self.name_lower
743. 
744. 
745. class AlterModelManagers(ModelOptionOperation):
746.     """Alter the model's managers."""
747. 
748.     serialization_expand_args = ["managers"]
749. 
750.     def __init__(self, name, managers):
751.         self.managers = managers
752.         super().__init__(name)
753. 
754.     def deconstruct(self):
755.         return (self.__class__.__qualname__, [self.name, self.managers], {})
756. 
757.     def state_forwards(self, app_label, state):
758.         state.alter_model_managers(app_label, self.name_lower, self.managers)
759. 
760.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
761.         pass
762. 
763.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
764.         pass
765. 
766.     def describe(self):
767.         return "Change managers on %s" % self.name
768. 
769.     @property
770.     def migration_name_fragment(self):
771.         return "alter_%s_managers" % self.name_lower
772. 
773. 
774. class IndexOperation(Operation):
775.     option_name = "indexes"
776. 
777.     @cached_property
778.     def model_name_lower(self):
779.         return self.model_name.lower()
780. 
781. 
782. class AddIndex(IndexOperation):
783.     """Add an index on a model."""
784. 
785.     def __init__(self, model_name, index):
786.         self.model_name = model_name
787.         if not index.name:
788.             raise ValueError(
789.                 "Indexes passed to AddIndex operations require a name "
790.                 "argument. %r doesn't have one." % index
791.             )
792.         self.index = index
793. 
794.     def state_forwards(self, app_label, state):
795.         state.add_index(app_label, self.model_name_lower, self.index)
796. 
797.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
798.         model = to_state.apps.get_model(app_label, self.model_name)
799.         if self.allow_migrate_model(schema_editor.connection.alias, model):
800.             schema_editor.add_index(model, self.index)
801. 
802.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
803.         model = from_state.apps.get_model(app_label, self.model_name)
804.         if self.allow_migrate_model(schema_editor.connection.alias, model):
805.             schema_editor.remove_index(model, self.index)
806. 
807.     def deconstruct(self):
808.         kwargs = {
809.             "model_name": self.model_name,
810.             "index": self.index,
811.         }
812.         return (
813.             self.__class__.__qualname__,
814.             [],
815.             kwargs,
816.         )
817. 
818.     def describe(self):
819.         if self.index.expressions:
820.             return "Create index %s on %s on model %s" % (
821.                 self.index.name,
822.                 ", ".join([str(expression) for expression in self.index.expressions]),
823.                 self.model_name,
824.             )
825.         return "Create index %s on field(s) %s of model %s" % (
826.             self.index.name,
827.             ", ".join(self.index.fields),
828.             self.model_name,
829.         )
830. 
831.     @property
832.     def migration_name_fragment(self):
833.         return "%s_%s" % (self.model_name_lower, self.index.name.lower())
834. 
835. 
836. class RemoveIndex(IndexOperation):
837.     """Remove an index from a model."""
838. 
839.     def __init__(self, model_name, name):
840.         self.model_name = model_name
841.         self.name = name
842. 
843.     def state_forwards(self, app_label, state):
844.         state.remove_index(app_label, self.model_name_lower, self.name)
845. 
846.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
847.         model = from_state.apps.get_model(app_label, self.model_name)
848.         if self.allow_migrate_model(schema_editor.connection.alias, model):
849.             from_model_state = from_state.models[app_label, self.model_name_lower]
850.             index = from_model_state.get_index_by_name(self.name)
851.             schema_editor.remove_index(model, index)
852. 
853.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
854.         model = to_state.apps.get_model(app_label, self.model_name)
855.         if self.allow_migrate_model(schema_editor.connection.alias, model):
856.             to_model_state = to_state.models[app_label, self.model_name_lower]
857.             index = to_model_state.get_index_by_name(self.name)
858.             schema_editor.add_index(model, index)
859. 
860.     def deconstruct(self):
861.         kwargs = {
862.             "model_name": self.model_name,
863.             "name": self.name,
864.         }
865.         return (
866.             self.__class__.__qualname__,
867.             [],
868.             kwargs,
869.         )
870. 
871.     def describe(self):
872.         return "Remove index %s from %s" % (self.name, self.model_name)
873. 
874.     @property
875.     def migration_name_fragment(self):
876.         return "remove_%s_%s" % (self.model_name_lower, self.name.lower())
877. 
878. 
879. class RenameIndex(IndexOperation):
880.     """Rename an index."""
881. 
882.     def __init__(self, model_name, new_name, old_name=None, old_fields=None):
883.         if not old_name and not old_fields:
884.             raise ValueError(
885.                 "RenameIndex requires one of old_name and old_fields arguments to be "
886.                 "set."
887.             )
888.         if old_name and old_fields:
889.             raise ValueError(
890.                 "RenameIndex.old_name and old_fields are mutually exclusive."
891.             )
892.         self.model_name = model_name
893.         self.new_name = new_name
894.         self.old_name = old_name
895.         self.old_fields = old_fields
896. 
897.     @cached_property
898.     def old_name_lower(self):
899.         return self.old_name.lower()
900. 
901.     @cached_property
902.     def new_name_lower(self):
903.         return self.new_name.lower()
904. 
905.     def deconstruct(self):
906.         kwargs = {
907.             "model_name": self.model_name,
908.             "new_name": self.new_name,
909.         }
910.         if self.old_name:
911.             kwargs["old_name"] = self.old_name
912.         if self.old_fields:
913.             kwargs["old_fields"] = self.old_fields
914.         return (self.__class__.__qualname__, [], kwargs)
915. 
916.     def state_forwards(self, app_label, state):
917.         if self.old_fields:
918.             state.add_index(
919.                 app_label,
920.                 self.model_name_lower,
921.                 models.Index(fields=self.old_fields, name=self.new_name),
922.             )
923.             state.remove_model_options(
924.                 app_label,
925.                 self.model_name_lower,
926.                 AlterIndexTogether.option_name,
927.                 self.old_fields,
928.             )
929.         else:
930.             state.rename_index(
931.                 app_label, self.model_name_lower, self.old_name, self.new_name
932.             )
933. 
934.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
935.         model = to_state.apps.get_model(app_label, self.model_name)
936.         if not self.allow_migrate_model(schema_editor.connection.alias, model):
937.             return
938. 
939.         if self.old_fields:
940.             from_model = from_state.apps.get_model(app_label, self.model_name)
941.             columns = [
942.                 from_model._meta.get_field(field).column for field in self.old_fields
943.             ]
944.             matching_index_name = schema_editor._constraint_names(
945.                 from_model, column_names=columns, index=True
946.             )
947.             if len(matching_index_name) != 1:
948.                 raise ValueError(
949.                     "Found wrong number (%s) of indexes for %s(%s)."
950.                     % (
951.                         len(matching_index_name),
952.                         from_model._meta.db_table,
953.                         ", ".join(columns),
954.                     )
955.                 )
956.             old_index = models.Index(
957.                 fields=self.old_fields,
958.                 name=matching_index_name[0],
959.             )
960.         else:
961.             from_model_state = from_state.models[app_label, self.model_name_lower]
962.             old_index = from_model_state.get_index_by_name(self.old_name)
963. 
964.         to_model_state = to_state.models[app_label, self.model_name_lower]
965.         new_index = to_model_state.get_index_by_name(self.new_name)
966.         schema_editor.rename_index(model, old_index, new_index)
967. 
968.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
969.         if self.old_fields:
970.             # Backward operation with unnamed index is a no-op.
971.             return
972. 
973.         self.new_name_lower, self.old_name_lower = (
974.             self.old_name_lower,
975.             self.new_name_lower,
976.         )
977.         self.new_name, self.old_name = self.old_name, self.new_name
978. 
979.         self.database_forwards(app_label, schema_editor, from_state, to_state)
980. 
981.         self.new_name_lower, self.old_name_lower = (
982.             self.old_name_lower,
983.             self.new_name_lower,
984.         )
985.         self.new_name, self.old_name = self.old_name, self.new_name
986. 
987.     def describe(self):
988.         if self.old_name:
989.             return (
990.                 f"Rename index {self.old_name} on {self.model_name} to {self.new_name}"
991.             )
992.         return (
993.             f"Rename unnamed index for {self.old_fields} on {self.model_name} to "
994.             f"{self.new_name}"
995.         )
996. 
997.     @property
998.     def migration_name_fragment(self):
999.         if self.old_name:
1000.             return "rename_%s_%s" % (self.old_name_lower, self.new_name_lower)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 01:32:11,300 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full content of the file `django/db/migrations/operations/models.py`.\n2. Extended relevance:\n   - The provided context contains what appears to be the full content of the requested file.\n   - This file includes the class definitions for `IndexOperation` and `RenameIndex`, which were specifically mentioned in the user's extra requirements as being important for understanding the implementation of `RenameIndex`.", relative_path='django/db/migrations/operations/models.py', start_line=1, end_line=1000)]
2025-12-24 01:32:11,301 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file `django/db/migrations/operations/models.py`.
2025-12-24 01:32:11,302 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 01:32:11,302 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 01:32:11,302 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 6 existing contexts
2025-12-24 01:32:11,302 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 6 total contexts (removed 1 duplicates)
2025-12-24 01:32:11,303 - thread-140180686108352.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-24 01:32:11,304 - thread-140180686108352.prometheus_context_collector - INFO - Successfully retrieved 6 context snippets
