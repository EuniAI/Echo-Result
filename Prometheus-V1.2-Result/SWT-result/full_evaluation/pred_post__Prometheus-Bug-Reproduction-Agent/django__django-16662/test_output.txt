+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z '' ']'
+++ export CONDA_SHLVL=0
+++ CONDA_SHLVL=0
+++ '[' -n '' ']'
+++++ dirname /opt/miniconda3/bin/conda
++++ dirname /opt/miniconda3/bin
+++ PATH=/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export PATH
+++ '[' -z '' ']'
+++ PS1=
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1=
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=1
+++ CONDA_SHLVL=1
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=2
++ CONDA_SHLVL=2
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_1=/opt/miniconda3
++ CONDA_PREFIX_1=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ cd /testbed
+ git diff HEAD 0eb3e9bd754e4c9fac8b616b705178727fc8031e
+ git config --global --add safe.directory /testbed
+ cd /testbed
+ git status
On branch main
nothing to commit, working tree clean
+ git show
commit 0eb3e9bd754e4c9fac8b616b705178727fc8031e
Author: Mariusz Felisiak <felisiak.mariusz@gmail.com>
Date:   Mon Mar 20 05:59:41 2023 +0100

    Updated source translation catalogs.
    
    Forwardport of 7e79fb35d4aebced5eda2f14f8d4314c73f558d2 from stable/4.2.x.

diff --git a/django/contrib/admin/locale/en/LC_MESSAGES/djangojs.po b/django/contrib/admin/locale/en/LC_MESSAGES/djangojs.po
index 6b3d92dd28..434e10f94d 100644
--- a/django/contrib/admin/locale/en/LC_MESSAGES/djangojs.po
+++ b/django/contrib/admin/locale/en/LC_MESSAGES/djangojs.po
@@ -4,7 +4,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Django\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2023-01-17 02:13-0600\n"
+"POT-Creation-Date: 2023-03-17 03:19-0500\n"
 "PO-Revision-Date: 2010-05-13 15:35+0200\n"
 "Last-Translator: Django team\n"
 "Language-Team: English <en@li.org>\n"
@@ -78,10 +78,12 @@ msgstr ""
 msgid "Click to remove all chosen %s at once."
 msgstr ""
 
-#: contrib/admin/static/admin/js/SelectFilter2.js:210
+#: contrib/admin/static/admin/js/SelectFilter2.js:211
 #, javascript-format
-msgid "%s selected options not visible"
-msgstr ""
+msgid "%s selected option not visible"
+msgid_plural "%s selected options not visible"
+msgstr[0] ""
+msgstr[1] ""
 
 #: contrib/admin/static/admin/js/actions.js:67
 msgid "%(sel)s of %(cnt)s selected"
diff --git a/django/contrib/auth/locale/en/LC_MESSAGES/django.po b/django/contrib/auth/locale/en/LC_MESSAGES/django.po
index b3849f6411..bc6eff91dd 100644
--- a/django/contrib/auth/locale/en/LC_MESSAGES/django.po
+++ b/django/contrib/auth/locale/en/LC_MESSAGES/django.po
@@ -4,7 +4,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: Django\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2023-01-17 02:13-0600\n"
+"POT-Creation-Date: 2023-03-17 03:19-0500\n"
 "PO-Revision-Date: 2010-05-13 15:35+0200\n"
 "Last-Translator: Django team\n"
 "Language-Team: English <en@li.org>\n"
@@ -44,11 +44,11 @@ msgstr ""
 msgid "Authentication and Authorization"
 msgstr ""
 
-#: contrib/auth/base_user.py:57
+#: contrib/auth/base_user.py:58
 msgid "password"
 msgstr ""
 
-#: contrib/auth/base_user.py:58
+#: contrib/auth/base_user.py:59
 msgid "last login"
 msgstr ""
 
@@ -332,8 +332,8 @@ msgstr ""
 
 #: contrib/auth/validators.py:12
 msgid ""
-"Enter a valid username. This value may contain only ASCII letters, numbers, "
-"and @/./+/-/_ characters."
+"Enter a valid username. This value may contain only unaccented lowercase a-z "
+"and uppercase A-Z letters, numbers, and @/./+/-/_ characters."
 msgstr ""
 
 #: contrib/auth/validators.py:22
+ git diff 0eb3e9bd754e4c9fac8b616b705178727fc8031e
+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z x ']'
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1='(testbed) '
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=3
+++ CONDA_SHLVL=3
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=4
++ CONDA_SHLVL=4
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_3=/opt/miniconda3
++ CONDA_PREFIX_3=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ python -m pip install -e .
Obtaining file:///testbed
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: asgiref>=3.6.0 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from Django==5.0.dev20230320050210) (3.10.0)
Requirement already satisfied: sqlparse>=0.3.1 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from Django==5.0.dev20230320050210) (0.5.3)
Building wheels for collected packages: Django
  Building editable for Django (pyproject.toml): started
  Building editable for Django (pyproject.toml): finished with status 'done'
  Created wheel for Django: filename=django-5.0.dev20230320050210-0.editable-py3-none-any.whl size=27430 sha256=2581698a965b9df8760daefb68ff15303f29ff287b3a34507be62cf75d5af5fb
  Stored in directory: /tmp/pip-ephem-wheel-cache-ic128m8m/wheels/49/5f/4f/01b7d31ea6ddac9643da788242d33e5fd3467d95d17b032c6b
Successfully built Django
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 5.0.dev20230320050210
    Uninstalling Django-5.0.dev20230320050210:
      Successfully uninstalled Django-5.0.dev20230320050210
Successfully installed Django-5.0.dev20230320050210
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
+ git apply -v -
Checking patch django/db/migrations/writer.py...
Applied patch django/db/migrations/writer.py cleanly.
+ git apply -v -
Checking patch tests/migrations/test_writer_regressions.py...
Applied patch tests/migrations/test_writer_regressions.py cleanly.
+ python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(django/db/migrations/writer\.py)' ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 migrations.test_writer_regressions
['--count', '-C', 'coverage.cover', '--include-pattern', '/testbed/(django/db/migrations/writer\\.py)']
Testing against Django installed in '/testbed/django'
Importing application migrations
Found 53 test(s).
Skipping setup of unused database(s): default, other.
System check identified no issues (0 silenced).
test_args_kwargs_signature (migrations.test_writer_regressions.OperationWriterTests.test_args_kwargs_signature) ... ok
test_args_signature (migrations.test_writer_regressions.OperationWriterTests.test_args_signature) ... ok
test_empty_signature (migrations.test_writer_regressions.OperationWriterTests.test_empty_signature) ... ok
test_expand_args_signature (migrations.test_writer_regressions.OperationWriterTests.test_expand_args_signature) ... ok
test_kwargs_signature (migrations.test_writer_regressions.OperationWriterTests.test_kwargs_signature) ... ok
test_multiline_args_signature (migrations.test_writer_regressions.OperationWriterTests.test_multiline_args_signature) ... ok
test_nested_args_signature (migrations.test_writer_regressions.OperationWriterTests.test_nested_args_signature) ... ok
test_nested_operation_expand_args_signature (migrations.test_writer_regressions.OperationWriterTests.test_nested_operation_expand_args_signature) ... ok
test_custom_operation (migrations.test_writer_regressions.WriterTests.test_custom_operation) ... ok
test_deconstruct_class_arguments (migrations.test_writer_regressions.WriterTests.test_deconstruct_class_arguments) ... FAIL
test_migration_file_header_comments (migrations.test_writer_regressions.WriterTests.test_migration_file_header_comments)
Test comments at top of file. ... ok
test_migration_path (migrations.test_writer_regressions.WriterTests.test_migration_path) ... ok
test_models_import_omitted (migrations.test_writer_regressions.WriterTests.test_models_import_omitted)
django.db.models shouldn't be imported if unused. ... ok
test_register_non_serializer (migrations.test_writer_regressions.WriterTests.test_register_non_serializer) ... ok
test_register_serializer (migrations.test_writer_regressions.WriterTests.test_register_serializer) ... ok
test_serialize_builtin_types (migrations.test_writer_regressions.WriterTests.test_serialize_builtin_types) ... ok
test_serialize_builtins (migrations.test_writer_regressions.WriterTests.test_serialize_builtins) ... ok
test_serialize_choices (migrations.test_writer_regressions.WriterTests.test_serialize_choices) ... ok
test_serialize_class_based_validators (migrations.test_writer_regressions.WriterTests.test_serialize_class_based_validators)
Ticket #22943: Test serialization of class-based validators, including ... ok
test_serialize_collections (migrations.test_writer_regressions.WriterTests.test_serialize_collections) ... ok
test_serialize_compiled_regex (migrations.test_writer_regressions.WriterTests.test_serialize_compiled_regex)
Make sure compiled regex can be serialized. ... ok
test_serialize_complex_func_index (migrations.test_writer_regressions.WriterTests.test_serialize_complex_func_index) ... ok
test_serialize_constants (migrations.test_writer_regressions.WriterTests.test_serialize_constants) ... ok
test_serialize_datetime (migrations.test_writer_regressions.WriterTests.test_serialize_datetime) ... ok
test_serialize_empty_nonempty_tuple (migrations.test_writer_regressions.WriterTests.test_serialize_empty_nonempty_tuple)
Ticket #22679: makemigrations generates invalid code for (an empty ... ok
test_serialize_enum_flags (migrations.test_writer_regressions.WriterTests.test_serialize_enum_flags) ... FAIL
test_serialize_enums (migrations.test_writer_regressions.WriterTests.test_serialize_enums) ... FAIL
test_serialize_fields (migrations.test_writer_regressions.WriterTests.test_serialize_fields) ... ok
test_serialize_frozensets (migrations.test_writer_regressions.WriterTests.test_serialize_frozensets) ... ok
test_serialize_functions (migrations.test_writer_regressions.WriterTests.test_serialize_functions) ... ok
test_serialize_functools_partial (migrations.test_writer_regressions.WriterTests.test_serialize_functools_partial) ... ok
test_serialize_functools_partialmethod (migrations.test_writer_regressions.WriterTests.test_serialize_functools_partialmethod) ... ok
test_serialize_iterators (migrations.test_writer_regressions.WriterTests.test_serialize_iterators) ... ok
test_serialize_lazy_objects (migrations.test_writer_regressions.WriterTests.test_serialize_lazy_objects) ... ok
test_serialize_local_function_reference (migrations.test_writer_regressions.WriterTests.test_serialize_local_function_reference)
A reference in a local scope can't be serialized. ... ok
test_serialize_managers (migrations.test_writer_regressions.WriterTests.test_serialize_managers) ... ok
test_serialize_multiline_strings (migrations.test_writer_regressions.WriterTests.test_serialize_multiline_strings) ... ok
test_serialize_nested_class (migrations.test_writer_regressions.WriterTests.test_serialize_nested_class) ... 
  test_serialize_nested_class (migrations.test_writer_regressions.WriterTests.test_serialize_nested_class) [NestedEnum] ... FAIL
  test_serialize_nested_class (migrations.test_writer_regressions.WriterTests.test_serialize_nested_class) [NestedChoices] ... FAIL
test_serialize_numbers (migrations.test_writer_regressions.WriterTests.test_serialize_numbers) ... FAIL
test_serialize_path_like (migrations.test_writer_regressions.WriterTests.test_serialize_path_like) ... ok
test_serialize_pathlib (migrations.test_writer_regressions.WriterTests.test_serialize_pathlib) ... ok
test_serialize_range (migrations.test_writer_regressions.WriterTests.test_serialize_range) ... ok
test_serialize_set (migrations.test_writer_regressions.WriterTests.test_serialize_set) ... ok
test_serialize_settings (migrations.test_writer_regressions.WriterTests.test_serialize_settings) ... ok
test_serialize_strings (migrations.test_writer_regressions.WriterTests.test_serialize_strings) ... ok
test_serialize_timedelta (migrations.test_writer_regressions.WriterTests.test_serialize_timedelta) ... ok
test_serialize_type_model (migrations.test_writer_regressions.WriterTests.test_serialize_type_model) ... ok
test_serialize_type_none (migrations.test_writer_regressions.WriterTests.test_serialize_type_none) ... ok
test_serialize_unbound_method_reference (migrations.test_writer_regressions.WriterTests.test_serialize_unbound_method_reference)
An unbound method used within a class body can be serialized. ... ok
test_serialize_uuid (migrations.test_writer_regressions.WriterTests.test_serialize_uuid) ... ok
test_simple_migration (migrations.test_writer_regressions.WriterTests.test_simple_migration)
Tests serializing a simple migration. ... ok
test_sorted_imports (migrations.test_writer_regressions.WriterTests.test_sorted_imports)
#24155 - Tests ordering of imports. ... ok
test_sorted_imports_isort_compliant (migrations.test_writer_regressions.WriterTests.test_sorted_imports_isort_compliant)
Imports are sorted according to isort standards. ... FAIL

======================================================================
FAIL: test_deconstruct_class_arguments (migrations.test_writer_regressions.WriterTests.test_deconstruct_class_arguments)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 1009, in test_deconstruct_class_arguments
    self.assertEqual(
AssertionError: 'mode[19 chars]t=migrations.test_writer_regressions.DeconstructibleInstances)' != 'mode[19 chars]t=migrations.test_writer.DeconstructibleInstances)'
- models.CharField(default=migrations.test_writer_regressions.DeconstructibleInstances)
?                                                ------------
+ models.CharField(default=migrations.test_writer.DeconstructibleInstances)


======================================================================
FAIL: test_serialize_enum_flags (migrations.test_writer_regressions.WriterTests.test_serialize_enum_flags)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 382, in test_serialize_enum_flags
    self.assertSerializedResultEqual(
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 236, in assertSerializedResultEqual
    self.assertEqual(MigrationWriter.serialize(value), target)
AssertionError: Tuples differ: ("mig[14 chars]riter_regressions.IntFlagEnum['A']", {'import [32 chars]ns'}) != ("mig[14 chars]riter.IntFlagEnum['A']", {'import migrations.test_writer'})

First differing element 0:
"migrations.test_writer_regressions.IntFlagEnum['A']"
"migrations.test_writer.IntFlagEnum['A']"

+ ("migrations.test_writer.IntFlagEnum['A']", {'import migrations.test_writer'})
- ("migrations.test_writer_regressions.IntFlagEnum['A']",
-  {'import migrations.test_writer_regressions'})

======================================================================
FAIL: test_serialize_enums (migrations.test_writer_regressions.WriterTests.test_serialize_enums)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 304, in test_serialize_enums
    self.assertSerializedResultEqual(
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 236, in assertSerializedResultEqual
    self.assertEqual(MigrationWriter.serialize(value), target)
AssertionError: Tuples differ: ("mig[14 chars]riter_regressions.TextEnum['A']", {'import mig[29 chars]ns'}) != ("mig[14 chars]riter.TextEnum['A']", {'import migrations.test_writer'})

First differing element 0:
"migrations.test_writer_regressions.TextEnum['A']"
"migrations.test_writer.TextEnum['A']"

+ ("migrations.test_writer.TextEnum['A']", {'import migrations.test_writer'})
- ("migrations.test_writer_regressions.TextEnum['A']",
-  {'import migrations.test_writer_regressions'})

======================================================================
FAIL: test_serialize_nested_class (migrations.test_writer_regressions.WriterTests.test_serialize_nested_class) [NestedEnum]
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 466, in test_serialize_nested_class
    self.assertSerializedResultEqual(
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 236, in assertSerializedResultEqual
    self.assertEqual(MigrationWriter.serialize(value), target)
AssertionError: Tuples differ: ('mig[14 chars]riter_regressions.WriterTests.NestedEnum', {'i[38 chars]ns'}) != ('mig[14 chars]riter.WriterTests.NestedEnum', {'import migrat[14 chars]er'})

First differing element 0:
'migrations.test_writer_regressions.WriterTests.NestedEnum'
'migrations.test_writer.WriterTests.NestedEnum'

- ('migrations.test_writer_regressions.WriterTests.NestedEnum',
?                         ------------

+ ('migrations.test_writer.WriterTests.NestedEnum',
-  {'import migrations.test_writer_regressions'})
?                                 ------------

+  {'import migrations.test_writer'})

======================================================================
FAIL: test_serialize_nested_class (migrations.test_writer_regressions.WriterTests.test_serialize_nested_class) [NestedChoices]
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 466, in test_serialize_nested_class
    self.assertSerializedResultEqual(
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 236, in assertSerializedResultEqual
    self.assertEqual(MigrationWriter.serialize(value), target)
AssertionError: Tuples differ: ('mig[14 chars]riter_regressions.WriterTests.NestedChoices', [41 chars]ns'}) != ('mig[14 chars]riter.WriterTests.NestedChoices', {'import mig[17 chars]er'})

First differing element 0:
'migrations.test_writer_regressions.WriterTests.NestedChoices'
'migrations.test_writer.WriterTests.NestedChoices'

- ('migrations.test_writer_regressions.WriterTests.NestedChoices',
?                         ------------

+ ('migrations.test_writer.WriterTests.NestedChoices',
-  {'import migrations.test_writer_regressions'})
?                                 ------------

+  {'import migrations.test_writer'})

======================================================================
FAIL: test_serialize_numbers (migrations.test_writer_regressions.WriterTests.test_serialize_numbers)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 258, in test_serialize_numbers
    self.assertSerializedResultEqual(
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 236, in assertSerializedResultEqual
    self.assertEqual(MigrationWriter.serialize(value), target)
AssertionError: Tuples differ: ("mig[14 chars]riter_regressions.Money('1.3')", {'import migr[28 chars]ns'}) != ("mig[14 chars]riter.Money('1.3')", {'import migrations.test_writer'})

First differing element 0:
"migrations.test_writer_regressions.Money('1.3')"
"migrations.test_writer.Money('1.3')"

+ ("migrations.test_writer.Money('1.3')", {'import migrations.test_writer'})
- ("migrations.test_writer_regressions.Money('1.3')",
-  {'import migrations.test_writer_regressions'})

======================================================================
FAIL: test_sorted_imports_isort_compliant (migrations.test_writer_regressions.WriterTests.test_sorted_imports_isort_compliant)
Imports are sorted according to isort standards.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/migrations/test_writer_regressions.py", line 948, in test_sorted_imports_isort_compliant
    self.assertIn(
AssertionError: 'import zoneinfo\nfrom django.db import migrations, models' not found in "# Generated by Django 5.0.dev20230320050210 on 2025-12-07 08:40\n\nimport datetime\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='mymodel',\n            name='myfield',\n            field=models.DateTimeField(default=datetime.datetime(2012, 1, 1, 1, 1, tzinfo=datetime.timezone.utc)),\n        ),\n    ]\n"

----------------------------------------------------------------------
Ran 53 tests in 0.086s

FAILED (failures=7)
+ cat coverage.cover
{"/testbed/django/db/migrations/writer.py": {"0": 0, "1": 1, "2": 1, "3": 1, "5": 1, "6": 1, "9": 1, "10": 1, "11": 1, "12": 1, "13": 1, "14": 1, "15": 1, "18": 2, "118": 2, "296": 1, "302": 1, "19": 1, "24": 1, "105": 1, "108": 1, "111": 1, "114": 1, "20": 23, "21": 23, "22": 23, "25": 23, "74": 23, "75": 23, "76": 23, "81": 23, "82": 9, "84": 14, "85": 14, "87": 23, "89": 35, "90": 12, "91": 12, "92": 12, "94": 23, "96": 66, "97": 43, "98": 28, "99": 28, "101": 23, "102": 23, "103": 23, "26": 48, "27": 8, "29": 8, "30": 2, "31": 2, "32": 6, "33": 4, "34": 4, "35": 4, "36": 4, "37": 0, "38": 0, "39": 0, "40": 0, "42": 4, "43": 4, "44": 4, "45": 2, "46": 2, "48": 6, "49": 6, "50": 15, "51": 9, "52": 9, "53": 9, "54": 4, "55": 3, "56": 1, "58": 8, "59": 9, "60": 6, "61": 6, "63": 32, "64": 32, "65": 32, "66": 2, "67": 6, "68": 4, "69": 2, "71": 30, "72": 32, "106": 31, "109": 31, "112": 116, "115": 23, "124": 1, "129": 1, "209": 2, "210": 2, "275": 2, "276": 2, "279": 2, "280": 2, "283": 2, "284": 2, "287": 2, "288": 2, "291": 2, "292": 2, "125": 10, "126": 10, "127": 10, "132": 7, "133": 7, "131": 7, "136": 7, "139": 7, "140": 19, "141": 12, "142": 12, "143": 12, "144": 7, "147": 7, "148": 8, "149": 1, "150": 0, "151": 0, "152": 0, "154": 0, "156": 1, "157": 7, "161": 7, "162": 15, "163": 8, "164": 0, "165": 0, "166": 0, "170": 7, "171": 3, "172": 3, "174": 4, "179": 14, "180": 19, "182": 7, "183": 7, "184": 0, "185": 0, "189": 0, "191": 7, "193": 0, "192": 0, "196": 7, "197": 12, "198": 6, "199": 6, "202": 1, "204": 7, "205": 0, "207": 7, "211": 6, "212": 3, "215": 3, "216": 0, "217": 0, "219": 0, "223": 3, "224": 3, "228": 1, "229": 1, "230": 0, "231": 0, "225": 2, "226": 2, "234": 2, "239": 2, "235": 2, "236": 2, "237": 2, "238": 2, "240": 2, "241": 2, "245": 0, "246": 0, "247": 0, "248": 0, "249": 0, "253": 0, "254": 0, "258": 0, "255": 0, "256": 0, "250": 0, "251": 0, "260": 0, "261": 0, "263": 0, "266": 0, "267": 0, "268": 0, "269": 0, "270": 0, "271": 0, "273": 0, "277": 3, "281": 3, "285": 168, "289": 2, "293": 1}}
+ git checkout 0eb3e9bd754e4c9fac8b616b705178727fc8031e
Note: switching to '0eb3e9bd754e4c9fac8b616b705178727fc8031e'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c <new-branch-name>

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at 0eb3e9bd75 Updated source translation catalogs.
M	django/db/migrations/writer.py
+ git apply /root/pre_state.patch
error: unrecognized input
