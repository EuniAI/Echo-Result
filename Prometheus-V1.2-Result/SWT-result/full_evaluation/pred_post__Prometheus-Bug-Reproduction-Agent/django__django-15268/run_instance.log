2025-12-07 14:10:15,511 - WARNING - Starting evaluation at 1765116615.5113075
2025-12-07 14:10:15,560 - INFO - Creating container for django__django-15268...
2025-12-07 14:10:15,582 - INFO - Container for django__django-15268 created: ebf0dbcbc345ee1e55245d00d44ddb50ab0b578cb758594c4f97be86fb0a3119
2025-12-07 14:10:15,746 - INFO - Container for django__django-15268 started: ebf0dbcbc345ee1e55245d00d44ddb50ab0b578cb758594c4f97be86fb0a3119
2025-12-07 14:10:16,884 - INFO - Git diff before:

2025-12-07 14:10:16,885 - INFO - Eval script for django__django-15268 written to eval.sh, now applying to container...
2025-12-07 14:10:26,733 - INFO - Test output for django__django-15268 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-15268/test_output.txt
2025-12-07 14:10:26,818 - INFO - Git diff after:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index c120f5d32d..01c44a9a26 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -34,9 +34,12 @@ class ModelOperation(Operation):
     def reduce(self, operation, app_label):
         return (
             super().reduce(operation, app_label) or
-            not operation.references_model(self.name, app_label)
+            self.can_reduce_through(operation, app_label)
         )
 
+    def can_reduce_through(self, operation, app_label):
+        return not operation.references_model(self.name, app_label)
+
 
 class CreateModel(ModelOperation):
     """Create a model's table."""
@@ -528,6 +531,14 @@ class AlterTogetherOptionOperation(ModelOptionOperation):
     def migration_name_fragment(self):
         return 'alter_%s_%s' % (self.name_lower, self.option_name)
 
+    def can_reduce_through(self, operation, app_label):
+        return (
+            super().can_reduce_through(operation, app_label) or (
+                isinstance(operation, AlterTogetherOptionOperation) and
+                type(operation) is not type(self)
+            )
+        )
+
 
 class AlterUniqueTogether(AlterTogetherOptionOperation):
     """
2025-12-07 14:10:26,818 - INFO - Git diff changed after running eval script
2025-12-07 14:10:26,818 - INFO - Attempting to stop container exec.eval.x86_64.6b24dca158642bd6288384.b7ecebeb55217254e5a1ff.124396453812400...
2025-12-07 14:10:42,056 - INFO - Attempting to remove container exec.eval.x86_64.6b24dca158642bd6288384.b7ecebeb55217254e5a1ff.124396453812400...
2025-12-07 14:10:42,084 - INFO - Container exec.eval.x86_64.6b24dca158642bd6288384.b7ecebeb55217254e5a1ff.124396453812400 removed.
2025-12-07 14:10:42,084 - WARNING - End of eval at 1765116642.0843046
