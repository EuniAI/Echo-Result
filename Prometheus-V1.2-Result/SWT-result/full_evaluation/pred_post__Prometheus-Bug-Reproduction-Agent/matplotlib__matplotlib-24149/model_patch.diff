diff --git a/lib/matplotlib/tests/test_bar.py b/lib/matplotlib/tests/test_bar.py
new file mode 100644
index 0000000000..f03805c9af
--- /dev/null
+++ b/lib/matplotlib/tests/test_bar.py
@@ -0,0 +1,17 @@
+import numpy as np
+import matplotlib.pyplot as plt
+
+
+def test_bar_all_nan():
+    """
+    Test that drawing a bar with nan-only data does not raise an error.
+
+    This is a regression test for issue #24125, where ax.bar would raise
+    a StopIteration error for all-NaN data on matplotlib 3.6.1.
+    The expected behavior is to create a bar, even if it's not visible.
+    """
+    fig, ax = plt.subplots()
+    # This call should not raise an exception.
+    container = ax.bar([np.nan], [np.nan])
+    # A BarContainer should be returned with one patch.
+    assert len(container.patches) == 1
