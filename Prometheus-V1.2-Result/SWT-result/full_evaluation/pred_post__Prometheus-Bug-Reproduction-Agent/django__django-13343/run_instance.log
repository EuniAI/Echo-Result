2025-12-07 13:38:14,342 - WARNING - Starting evaluation at 1765114694.3424923
2025-12-07 13:38:14,390 - INFO - Creating container for django__django-13343...
2025-12-07 13:38:14,414 - INFO - Container for django__django-13343 created: f542a48dbfecc12bf0bdba35df05e74e7a0154279fd0cabac4d8cfdf31b911ca
2025-12-07 13:38:14,593 - INFO - Container for django__django-13343 started: f542a48dbfecc12bf0bdba35df05e74e7a0154279fd0cabac4d8cfdf31b911ca
2025-12-07 13:38:15,770 - INFO - Git diff before:

2025-12-07 13:38:15,770 - INFO - Eval script for django__django-13343 written to eval.sh, now applying to container...
2025-12-07 13:38:25,181 - INFO - Test output for django__django-13343 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-13343/test_output.txt
2025-12-07 13:38:25,265 - INFO - Git diff after:
diff --git a/django/db/models/fields/files.py b/django/db/models/fields/files.py
index e10a5bb6d9..db2450a738 100644
--- a/django/db/models/fields/files.py
+++ b/django/db/models/fields/files.py
@@ -229,6 +229,8 @@ class FileField(Field):
 
         self.storage = storage or default_storage
         if callable(self.storage):
+            # Hold a reference to the callable for deconstruct().
+            self._storage_callable = self.storage
             self.storage = self.storage()
             if not isinstance(self.storage, Storage):
                 raise TypeError(
@@ -279,7 +281,7 @@ class FileField(Field):
             del kwargs["max_length"]
         kwargs['upload_to'] = self.upload_to
         if self.storage is not default_storage:
-            kwargs['storage'] = self.storage
+            kwargs['storage'] = getattr(self, '_storage_callable', self.storage)
         return name, path, args, kwargs
 
     def get_internal_type(self):
2025-12-07 13:38:25,265 - INFO - Git diff changed after running eval script
2025-12-07 13:38:25,265 - INFO - Attempting to stop container exec.eval.x86_64.f904a9d2e0f61fc0d70077.ea4f8064e4fc6613973669.124396453763968...
2025-12-07 13:38:40,513 - INFO - Attempting to remove container exec.eval.x86_64.f904a9d2e0f61fc0d70077.ea4f8064e4fc6613973669.124396453763968...
2025-12-07 13:38:40,545 - INFO - Container exec.eval.x86_64.f904a9d2e0f61fc0d70077.ea4f8064e4fc6613973669.124396453763968 removed.
2025-12-07 13:38:40,545 - WARNING - End of eval at 1765114720.545321
