{"instance_id": "sympy__sympy-20916", "repo": "sympy/sympy", "version": "1.8", "environment_setup_commit": "3ac1464b8840d5f8b618a654f9fbf09c452fe969", "patch_list": ["diff --git a/sympy/printing/conventions.py b/sympy/printing/conventions.py\n--- a/sympy/printing/conventions.py\n+++ b/sympy/printing/conventions.py\n@@ -7,7 +7,7 @@\n from collections.abc import Iterable\n from sympy import Derivative\n \n-_name_with_digits_p = re.compile(r'^([a-zA-Z]+)([0-9]+)$')\n+_name_with_digits_p = re.compile(r'^([^\\W\\d_]+)(\\d+)$', re.U)\n \n \n def split_super_sub(text):\n@@ -60,7 +60,7 @@ def split_super_sub(text):\n         else:\n             raise RuntimeError(\"This should never happen.\")\n \n-    # make a little exception when a name ends with digits, i.e. treat them\n+    # Make a little exception when a name ends with digits, i.e. treat them\n     # as a subscript too.\n     m = _name_with_digits_p.match(name)\n     if m:\n", "diff --git a/sympy/printing/pretty/tests/test_pprint_bug.py b/sympy/printing/pretty/tests/test_pprint_bug.py\nnew file mode 100644\nindex 0000000000..c6087e6398\n--- /dev/null\n+++ b/sympy/printing/pretty/tests/test_pprint_bug.py\n@@ -0,0 +1,38 @@\n+# -*- coding: utf-8 -*-\n+from sympy import Symbol, Matrix, symbols\n+from sympy.printing.pretty import pprint\n+import io\n+import sys\n+\n+def test_pprint_w0_renders_as_w_subscript_0():\n+    \"\"\"\n+    Regression test for a bug where 'w0' is incorrectly rendered as '\u03c90'.\n+\n+    This test directly calls `pprint` to capture its output, ensuring that\n+    the default settings (like line wrapping) which differ from other tests\n+    are used. The bug report indicates that in a matrix context, 'w0' can be\n+    incorrectly pretty-printed as the Greek letter omega '\u03c9' followed by a\n+    digit '0', instead of the correct Latin letter 'w' with a subscript '\u2080'.\n+\n+    This test will fail if the bug is present and pass once it is fixed.\n+    \"\"\"\n+    # Redirect stdout to capture the output of pprint\n+    original_stdout = sys.stdout\n+    captured_output = io.StringIO()\n+    sys.stdout = captured_output\n+\n+    try:\n+        # Construct the expression from the bug report\n+        t0, t1, t2, w0 = symbols('t0, t1, t2, w0')\n+        expr = Matrix([[-t0*w0, -t1*w0, -t2*w0]])\n+\n+        # Call pprint directly to ensure its default settings are used\n+        pprint(expr)\n+        output = captured_output.getvalue()\n+    finally:\n+        # Restore stdout\n+        sys.stdout = original_stdout\n+\n+    # The bug causes 'w0' to be rendered as '\u03c90'. The correct output is 'w\u2080'.\n+    # This assertion checks for the presence of the correct string.\n+    assert 'w\u2080' in output\n"], "arch": "x86_64", "base_commit": "82298df6a51491bfaad0c6d1980e7e3ca808ae93", "test_directives": ["sympy/printing/pretty/tests/test_pprint_bug.py"], "coverage_files": ["sympy/printing/conventions.py"], "env_name": "testbed", "run_id": "full_evaluation", "patch_id": "pred_post__Prometheus-Bug-Reproduction-Agent", "timeout": 1800, "rm_image": false, "force_rebuild": false, "exec_mode": "unit_test", "reproduction_script_name": null, "compute_coverage": true, "install": {"python": "3.9", "packages": "mpmath flake8", "pip_packages": ["mpmath==1.3.0", "flake8-comprehensions"], "install": "python -m pip install -e ."}, "cache_level": "instance", "test_command": "PYTHONWARNINGS='ignore::UserWarning,ignore::SyntaxWarning' python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(sympy/printing/conventions\\.py)' bin/test -C --verbose sympy/printing/pretty/tests/test_pprint_bug.p", "req_install_commands": ["conda create -n testbed python=3.9 mpmath flake8 -y"]}