2025-12-07 17:09:51,450 - WARNING - Starting evaluation at 1765127391.4499667
2025-12-07 17:09:51,498 - INFO - Creating container for sympy__sympy-21379...
2025-12-07 17:09:51,525 - INFO - Container for sympy__sympy-21379 created: 37028a83ae1066fefc175f0ff141f99064037c618833b256d0babe357e28f151
2025-12-07 17:09:51,698 - INFO - Container for sympy__sympy-21379 started: 37028a83ae1066fefc175f0ff141f99064037c618833b256d0babe357e28f151
2025-12-07 17:09:52,359 - INFO - Git diff before:

2025-12-07 17:09:52,359 - INFO - Eval script for sympy__sympy-21379 written to eval.sh, now applying to container...
2025-12-07 17:10:04,442 - INFO - Test output for sympy__sympy-21379 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/sympy__sympy-21379/test_output.txt
2025-12-07 17:10:04,523 - INFO - Git diff after:
diff --git a/sympy/core/mod.py b/sympy/core/mod.py
index b4f3de2523..ebe7862aef 100644
--- a/sympy/core/mod.py
+++ b/sympy/core/mod.py
@@ -40,6 +40,7 @@ def eval(cls, p, q):
         from sympy.core.mul import Mul
         from sympy.core.singleton import S
         from sympy.core.exprtools import gcd_terms
+        from sympy.polys.polyerrors import PolynomialError
         from sympy.polys.polytools import gcd
 
         def doit(p, q):
@@ -166,10 +167,13 @@ def doit(p, q):
         # XXX other possibilities?
 
         # extract gcd; any further simplification should be done by the user
-        G = gcd(p, q)
-        if G != 1:
-            p, q = [
-                gcd_terms(i/G, clear=False, fraction=False) for i in (p, q)]
+        try:
+            G = gcd(p, q)
+            if G != 1:
+                p, q = [gcd_terms(i/G, clear=False, fraction=False)
+                        for i in (p, q)]
+        except PolynomialError:  # issue 21373
+            G = S.One
         pwas, qwas = p, q
 
         # simplify terms
2025-12-07 17:10:04,523 - INFO - Git diff changed after running eval script
2025-12-07 17:10:04,523 - INFO - Attempting to stop container exec.eval.x86_64.deec2122407a414e380748.f7b11b7b20faee421d106a.124396454074784...
2025-12-07 17:10:19,855 - INFO - Attempting to remove container exec.eval.x86_64.deec2122407a414e380748.f7b11b7b20faee421d106a.124396454074784...
2025-12-07 17:10:19,886 - INFO - Container exec.eval.x86_64.deec2122407a414e380748.f7b11b7b20faee421d106a.124396454074784 removed.
2025-12-07 17:10:19,886 - WARNING - End of eval at 1765127419.8861682
