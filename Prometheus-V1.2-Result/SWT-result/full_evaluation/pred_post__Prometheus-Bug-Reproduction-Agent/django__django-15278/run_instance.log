2025-12-07 14:11:03,305 - WARNING - Starting evaluation at 1765116663.3052473
2025-12-07 14:11:03,353 - INFO - Creating container for django__django-15278...
2025-12-07 14:11:03,376 - INFO - Container for django__django-15278 created: d2f6977c74c7116a81fdbf03fcfdb66a9baced1a54cc8c54c4bde8787bba7bf5
2025-12-07 14:11:03,552 - INFO - Container for django__django-15278 started: d2f6977c74c7116a81fdbf03fcfdb66a9baced1a54cc8c54c4bde8787bba7bf5
2025-12-07 14:11:04,702 - INFO - Git diff before:

2025-12-07 14:11:04,702 - INFO - Eval script for django__django-15278 written to eval.sh, now applying to container...
2025-12-07 14:11:15,153 - INFO - Test output for django__django-15278 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-15278/test_output.txt
2025-12-07 14:11:15,242 - INFO - Git diff after:
diff --git a/django/db/backends/sqlite3/schema.py b/django/db/backends/sqlite3/schema.py
index 6752a8e3c0..3ff0a3f7db 100644
--- a/django/db/backends/sqlite3/schema.py
+++ b/django/db/backends/sqlite3/schema.py
@@ -324,10 +324,15 @@ class DatabaseSchemaEditor(BaseDatabaseSchemaEditor):
 
     def add_field(self, model, field):
         """Create a field on a model."""
-        # Fields with default values cannot by handled by ALTER TABLE ADD
-        # COLUMN statement because DROP DEFAULT is not supported in
-        # ALTER TABLE.
-        if not field.null or self.effective_default(field) is not None:
+        if (
+            # Primary keys and unique fields are not supported in ALTER TABLE
+            # ADD COLUMN.
+            field.primary_key or field.unique or
+            # Fields with default values cannot by handled by ALTER TABLE ADD
+            # COLUMN statement because DROP DEFAULT is not supported in
+            # ALTER TABLE.
+            not field.null or self.effective_default(field) is not None
+        ):
             self._remake_table(model, create_field=field)
         else:
             super().add_field(model, field)
2025-12-07 14:11:15,242 - INFO - Git diff changed after running eval script
2025-12-07 14:11:15,242 - INFO - Attempting to stop container exec.eval.x86_64.6b24dca158642bd6288384.b7ecebeb55217254e5a1ff.124396453812880...
2025-12-07 14:11:30,484 - INFO - Attempting to remove container exec.eval.x86_64.6b24dca158642bd6288384.b7ecebeb55217254e5a1ff.124396453812880...
2025-12-07 14:11:30,511 - INFO - Container exec.eval.x86_64.6b24dca158642bd6288384.b7ecebeb55217254e5a1ff.124396453812880 removed.
2025-12-07 14:11:30,511 - WARNING - End of eval at 1765116690.5117707
