2025-12-07 15:47:34,347 - WARNING - Starting evaluation at 1765122454.3477466
2025-12-07 15:47:34,396 - INFO - Creating container for scikit-learn__scikit-learn-13135...
2025-12-07 15:47:34,420 - INFO - Container for scikit-learn__scikit-learn-13135 created: f33030fc143d5a0f46d22aa70030cb69ae063155bf19bc92812dccf55acf7f31
2025-12-07 15:47:34,594 - INFO - Container for scikit-learn__scikit-learn-13135 started: f33030fc143d5a0f46d22aa70030cb69ae063155bf19bc92812dccf55acf7f31
2025-12-07 15:47:34,975 - INFO - Git diff before:

2025-12-07 15:47:34,975 - INFO - Eval script for scikit-learn__scikit-learn-13135 written to eval.sh, now applying to container...
2025-12-07 15:47:41,992 - INFO - Test output for scikit-learn__scikit-learn-13135 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/scikit-learn__scikit-learn-13135/test_output.txt
2025-12-07 15:47:42,067 - INFO - Git diff after:
diff --git a/sklearn/preprocessing/_discretization.py b/sklearn/preprocessing/_discretization.py
index dd969c12b2..35d654399d 100644
--- a/sklearn/preprocessing/_discretization.py
+++ b/sklearn/preprocessing/_discretization.py
@@ -172,6 +172,8 @@ class KBinsDiscretizer(BaseEstimator, TransformerMixin):
                 # 1D k-means procedure
                 km = KMeans(n_clusters=n_bins[jj], init=init, n_init=1)
                 centers = km.fit(column[:, None]).cluster_centers_[:, 0]
+                # Must sort, centers may be unsorted even with sorted init
+                centers.sort()
                 bin_edges[jj] = (centers[1:] + centers[:-1]) * 0.5
                 bin_edges[jj] = np.r_[col_min, bin_edges[jj], col_max]
2025-12-07 15:47:42,068 - INFO - Git diff changed after running eval script
2025-12-07 15:47:42,068 - INFO - Attempting to stop container exec.eval.x86_64.437918b9cd24690e5e9c56.9d5d29456b4c93275e1462.124396453916224...
2025-12-07 15:47:57,257 - INFO - Attempting to remove container exec.eval.x86_64.437918b9cd24690e5e9c56.9d5d29456b4c93275e1462.124396453916224...
2025-12-07 15:47:57,275 - INFO - Container exec.eval.x86_64.437918b9cd24690e5e9c56.9d5d29456b4c93275e1462.124396453916224 removed.
2025-12-07 15:47:57,275 - WARNING - End of eval at 1765122477.2753718
