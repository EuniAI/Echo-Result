2025-12-07 14:10:09,152 - WARNING - Starting evaluation at 1765116609.1526115
2025-12-07 14:10:09,197 - INFO - Creating container for django__django-15252...
2025-12-07 14:10:09,224 - INFO - Container for django__django-15252 created: 394219cebd60acb4ab89a2acd76fb7b8308adb83ed6ab0ca960bd2d600e7941f
2025-12-07 14:10:09,404 - INFO - Container for django__django-15252 started: 394219cebd60acb4ab89a2acd76fb7b8308adb83ed6ab0ca960bd2d600e7941f
2025-12-07 14:10:10,526 - INFO - Git diff before:

2025-12-07 14:10:10,526 - INFO - Eval script for django__django-15252 written to eval.sh, now applying to container...
2025-12-07 14:10:21,033 - INFO - Test output for django__django-15252 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-15252/test_output.txt
2025-12-07 14:10:21,119 - INFO - Git diff after:
diff --git a/django/db/migrations/executor.py b/django/db/migrations/executor.py
index aa2fe0883b..89e9344a68 100644
--- a/django/db/migrations/executor.py
+++ b/django/db/migrations/executor.py
@@ -96,8 +96,12 @@ class MigrationExecutor:
         (un)applied and in a second step run all the database operations.
         """
         # The django_migrations table must be present to record applied
-        # migrations.
-        self.recorder.ensure_schema()
+        # migrations, but don't create it if there are no migrations to apply.
+        if plan == []:
+            if not self.recorder.has_table():
+                return self._create_project_state(with_applied_migrations=False)
+        else:
+            self.recorder.ensure_schema()
 
         if plan is None:
             plan = self.migration_plan(targets)
2025-12-07 14:10:21,119 - INFO - Git diff changed after running eval script
2025-12-07 14:10:21,119 - INFO - Attempting to stop container exec.eval.x86_64.6b24dca158642bd6288384.55e28827f67f781ff3be26.124396453812160...
2025-12-07 14:10:36,356 - INFO - Attempting to remove container exec.eval.x86_64.6b24dca158642bd6288384.55e28827f67f781ff3be26.124396453812160...
2025-12-07 14:10:36,384 - INFO - Container exec.eval.x86_64.6b24dca158642bd6288384.55e28827f67f781ff3be26.124396453812160 removed.
2025-12-07 14:10:36,384 - WARNING - End of eval at 1765116636.384189
