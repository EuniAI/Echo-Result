2025-12-07 14:41:08,046 - WARNING - Starting evaluation at 1765118468.0469084
2025-12-07 14:41:08,096 - INFO - Creating container for django__django-16801...
2025-12-07 14:41:08,120 - INFO - Container for django__django-16801 created: 78b1a105fe63d172c4b4f9d0c359ec4957eb9d0a7e2a8bda8b637b08a9db2b9b
2025-12-07 14:41:08,297 - INFO - Container for django__django-16801 started: 78b1a105fe63d172c4b4f9d0c359ec4957eb9d0a7e2a8bda8b637b08a9db2b9b
2025-12-07 14:41:09,440 - INFO - Git diff before:

2025-12-07 14:41:09,440 - INFO - Eval script for django__django-16801 written to eval.sh, now applying to container...
2025-12-07 14:41:19,282 - INFO - Test output for django__django-16801 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-16801/test_output.txt
2025-12-07 14:41:19,362 - INFO - Git diff after:
diff --git a/django/db/models/fields/files.py b/django/db/models/fields/files.py
index 7f8eb128e1..e10c8cd69a 100644
--- a/django/db/models/fields/files.py
+++ b/django/db/models/fields/files.py
@@ -441,7 +441,8 @@ class ImageField(FileField):
         # after their corresponding image field don't stay cleared by
         # Model.__init__, see bug #11196.
         # Only run post-initialization dimension update on non-abstract models
-        if not cls._meta.abstract:
+        # with width_field/height_field.
+        if not cls._meta.abstract and (self.width_field or self.height_field):
             signals.post_init.connect(self.update_dimension_fields, sender=cls)
 
     def update_dimension_fields(self, instance, force=False, *args, **kwargs):
@@ -457,10 +458,8 @@ class ImageField(FileField):
         Dimensions can be forced to update with force=True, which is how
         ImageFileDescriptor.__set__ calls this method.
         """
-        # Nothing to update if the field doesn't have dimension fields or if
-        # the field is deferred.
-        has_dimension_fields = self.width_field or self.height_field
-        if not has_dimension_fields or self.attname not in instance.__dict__:
+        # Nothing to update if the field is deferred.
+        if self.attname not in instance.__dict__:
             return
 
         # getattr will call the ImageFileDescriptor's __get__ method, which
2025-12-07 14:41:19,362 - INFO - Git diff changed after running eval script
2025-12-07 14:41:19,362 - INFO - Attempting to stop container exec.eval.x86_64.9097b18874f4d0ac315ef2.f438948b36727193651e81.124396453858192...
2025-12-07 14:41:34,601 - INFO - Attempting to remove container exec.eval.x86_64.9097b18874f4d0ac315ef2.f438948b36727193651e81.124396453858192...
2025-12-07 14:41:34,628 - INFO - Container exec.eval.x86_64.9097b18874f4d0ac315ef2.f438948b36727193651e81.124396453858192 removed.
2025-12-07 14:41:34,629 - WARNING - End of eval at 1765118494.6290035
