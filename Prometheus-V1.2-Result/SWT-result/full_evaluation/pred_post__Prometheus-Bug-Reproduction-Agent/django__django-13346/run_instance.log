2025-12-07 13:38:03,415 - WARNING - Starting evaluation at 1765114683.4158566
2025-12-07 13:38:03,464 - INFO - Creating container for django__django-13346...
2025-12-07 13:38:03,492 - INFO - Container for django__django-13346 created: 454e4475d8fd6982dcea5584cd7d650ac96a4ab42d60595b4c9bee7691d59f34
2025-12-07 13:38:03,668 - INFO - Container for django__django-13346 started: 454e4475d8fd6982dcea5584cd7d650ac96a4ab42d60595b4c9bee7691d59f34
2025-12-07 13:38:04,847 - INFO - Git diff before:

2025-12-07 13:38:04,848 - INFO - Eval script for django__django-13346 written to eval.sh, now applying to container...
2025-12-07 13:38:15,904 - INFO - Test output for django__django-13346 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-13346/test_output.txt
2025-12-07 13:38:15,989 - INFO - Git diff after:
diff --git a/django/db/models/fields/json.py b/django/db/models/fields/json.py
index fafc1beee8..00df1ae206 100644
--- a/django/db/models/fields/json.py
+++ b/django/db/models/fields/json.py
@@ -378,6 +378,30 @@ class KeyTransformIsNull(lookups.IsNull):
         return super().as_sql(compiler, connection)
 
 
+class KeyTransformIn(lookups.In):
+    def process_rhs(self, compiler, connection):
+        rhs, rhs_params = super().process_rhs(compiler, connection)
+        if not connection.features.has_native_json_field:
+            func = ()
+            if connection.vendor == 'oracle':
+                func = []
+                for value in rhs_params:
+                    value = json.loads(value)
+                    function = 'JSON_QUERY' if isinstance(value, (list, dict)) else 'JSON_VALUE'
+                    func.append("%s('%s', '$.value')" % (
+                        function,
+                        json.dumps({'value': value}),
+                    ))
+                func = tuple(func)
+                rhs_params = ()
+            elif connection.vendor == 'mysql' and connection.mysql_is_mariadb:
+                func = ("JSON_UNQUOTE(JSON_EXTRACT(%s, '$'))",) * len(rhs_params)
+            elif connection.vendor in {'sqlite', 'mysql'}:
+                func = ("JSON_EXTRACT(%s, '$')",) * len(rhs_params)
+            rhs = rhs % func
+        return rhs, rhs_params
+
+
 class KeyTransformExact(JSONExact):
     def process_lhs(self, compiler, connection):
         lhs, lhs_params = super().process_lhs(compiler, connection)
@@ -479,6 +503,7 @@ class KeyTransformGte(KeyTransformNumericLookupMixin, lookups.GreaterThanOrEqual
     pass
 
 
+KeyTransform.register_lookup(KeyTransformIn)
 KeyTransform.register_lookup(KeyTransformExact)
 KeyTransform.register_lookup(KeyTransformIExact)
 KeyTransform.register_lookup(KeyTransformIsNull)
2025-12-07 13:38:15,989 - INFO - Git diff changed after running eval script
2025-12-07 13:38:15,989 - INFO - Attempting to stop container exec.eval.x86_64.f904a9d2e0f61fc0d70077.27160c98120953ee4938a0.124396453764448...
2025-12-07 13:38:31,220 - INFO - Attempting to remove container exec.eval.x86_64.f904a9d2e0f61fc0d70077.27160c98120953ee4938a0.124396453764448...
2025-12-07 13:38:31,253 - INFO - Container exec.eval.x86_64.f904a9d2e0f61fc0d70077.27160c98120953ee4938a0.124396453764448 removed.
2025-12-07 13:38:31,253 - WARNING - End of eval at 1765114711.2531838
