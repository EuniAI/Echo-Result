2025-12-07 16:48:50,376 - WARNING - Starting evaluation at 1765126130.3764806
2025-12-07 16:48:50,424 - INFO - Creating container for sympy__sympy-13615...
2025-12-07 16:48:50,446 - INFO - Container for sympy__sympy-13615 created: 3d6d44ea863793a7b7c7018da5d05ddc9127e3581ec452b0dc727259ae541faa
2025-12-07 16:48:50,630 - INFO - Container for sympy__sympy-13615 started: 3d6d44ea863793a7b7c7018da5d05ddc9127e3581ec452b0dc727259ae541faa
2025-12-07 16:48:51,150 - INFO - Git diff before:

2025-12-07 16:48:51,150 - INFO - Eval script for sympy__sympy-13615 written to eval.sh, now applying to container...
2025-12-07 16:49:02,487 - INFO - Test output for sympy__sympy-13615 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/sympy__sympy-13615/test_output.txt
2025-12-07 16:49:02,564 - INFO - Git diff after:
diff --git a/sympy/sets/sets.py b/sympy/sets/sets.py
index 917717bb74..659b778808 100644
--- a/sympy/sets/sets.py
+++ b/sympy/sets/sets.py
@@ -217,7 +217,17 @@ def _complement(self, other):
             return S.EmptySet
 
         elif isinstance(other, FiniteSet):
-            return FiniteSet(*[el for el in other if self.contains(el) != True])
+            from sympy.utilities.iterables import sift
+
+            def ternary_sift(el):
+                contains = self.contains(el)
+                return contains if contains in [True, False] else None
+
+            sifted = sift(other, ternary_sift)
+            # ignore those that are contained in self
+            return Union(FiniteSet(*(sifted[False])),
+                Complement(FiniteSet(*(sifted[None])), self, evaluate=False)
+                if sifted[None] else S.EmptySet)
 
     def symmetric_difference(self, other):
         """
2025-12-07 16:49:02,565 - INFO - Git diff changed after running eval script
2025-12-07 16:49:02,565 - INFO - Attempting to stop container exec.eval.x86_64.deec2122407a414e380748.fca579fe6d7eab11eab71b.124396454031632...
2025-12-07 16:49:17,754 - INFO - Attempting to remove container exec.eval.x86_64.deec2122407a414e380748.fca579fe6d7eab11eab71b.124396454031632...
2025-12-07 16:49:17,779 - INFO - Container exec.eval.x86_64.deec2122407a414e380748.fca579fe6d7eab11eab71b.124396454031632 removed.
2025-12-07 16:49:17,779 - WARNING - End of eval at 1765126157.7798588
