+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z '' ']'
+++ export CONDA_SHLVL=0
+++ CONDA_SHLVL=0
+++ '[' -n '' ']'
+++++ dirname /opt/miniconda3/bin/conda
++++ dirname /opt/miniconda3/bin
+++ PATH=/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export PATH
+++ '[' -z '' ']'
+++ PS1=
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1=
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=1
+++ CONDA_SHLVL=1
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=2
++ CONDA_SHLVL=2
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_1=/opt/miniconda3
++ CONDA_PREFIX_1=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ cd /testbed
+ git diff HEAD 447980e72ac01da1594dd3373a03ba40b7ee6f80
+ sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen
+ locale-gen
Generating locales (this might take a while)...
  en_US.UTF-8... done
Generation complete.
+ export LANG=en_US.UTF-8
+ LANG=en_US.UTF-8
+ export LANGUAGE=en_US:en
+ LANGUAGE=en_US:en
+ export LC_ALL=en_US.UTF-8
+ LC_ALL=en_US.UTF-8
+ git config --global --add safe.directory /testbed
+ cd /testbed
+ git status
On branch main
nothing to commit, working tree clean
+ git show
commit 447980e72ac01da1594dd3373a03ba40b7ee6f80
Author: Hannes Ljungberg <hannes@5monkeys.se>
Date:   Wed Apr 22 11:36:03 2020 +0200

    Fixed #31500 -- Fixed detecting of unique fields in QuerySet.in_bulk() when using Meta.constraints.
    
    Detection of unique fields now takes into account non-partial unique
    constraints.

diff --git a/django/db/models/query.py b/django/db/models/query.py
index d9c9b0db04..c1aa352701 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -689,7 +689,17 @@ class QuerySet:
         """
         assert not self.query.is_sliced, \
             "Cannot use 'limit' or 'offset' with in_bulk"
-        if field_name != 'pk' and not self.model._meta.get_field(field_name).unique:
+        opts = self.model._meta
+        unique_fields = [
+            constraint.fields[0]
+            for constraint in opts.total_unique_constraints
+            if len(constraint.fields) == 1
+        ]
+        if (
+            field_name != 'pk' and
+            not opts.get_field(field_name).unique and
+            field_name not in unique_fields
+        ):
             raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
         if id_list is not None:
             if not id_list:
diff --git a/tests/lookup/models.py b/tests/lookup/models.py
index fbc9fa606f..9fd3f14ed3 100644
--- a/tests/lookup/models.py
+++ b/tests/lookup/models.py
@@ -67,6 +67,11 @@ class Season(models.Model):
     gt = models.IntegerField(null=True, blank=True)
     nulled_text_field = NulledTextField(null=True)
 
+    class Meta:
+        constraints = [
+            models.UniqueConstraint(fields=['year'], name='season_year_unique'),
+        ]
+
     def __str__(self):
         return str(self.year)
 
diff --git a/tests/lookup/tests.py b/tests/lookup/tests.py
index baefdf9701..9ed91a6ee0 100644
--- a/tests/lookup/tests.py
+++ b/tests/lookup/tests.py
@@ -4,10 +4,11 @@ from math import ceil
 from operator import attrgetter
 
 from django.core.exceptions import FieldError
-from django.db import connection
+from django.db import connection, models
 from django.db.models import Exists, Max, OuterRef
 from django.db.models.functions import Substr
 from django.test import TestCase, skipUnlessDBFeature
+from django.test.utils import isolate_apps
 from django.utils.deprecation import RemovedInDjango40Warning
 
 from .models import (
@@ -189,11 +190,49 @@ class LookupTests(TestCase):
             }
         )
 
+    def test_in_bulk_meta_constraint(self):
+        season_2011 = Season.objects.create(year=2011)
+        season_2012 = Season.objects.create(year=2012)
+        Season.objects.create(year=2013)
+        self.assertEqual(
+            Season.objects.in_bulk(
+                [season_2011.year, season_2012.year],
+                field_name='year',
+            ),
+            {season_2011.year: season_2011, season_2012.year: season_2012},
+        )
+
     def test_in_bulk_non_unique_field(self):
         msg = "in_bulk()'s field_name must be a unique field but 'author' isn't."
         with self.assertRaisesMessage(ValueError, msg):
             Article.objects.in_bulk([self.au1], field_name='author')
 
+    @isolate_apps('lookup')
+    def test_in_bulk_non_unique_meta_constaint(self):
+        class Model(models.Model):
+            ean = models.CharField(max_length=100)
+            brand = models.CharField(max_length=100)
+            name = models.CharField(max_length=80)
+
+            class Meta:
+                constraints = [
+                    models.UniqueConstraint(
+                        fields=['ean'],
+                        name='partial_ean_unique',
+                        condition=models.Q(is_active=True)
+                    ),
+                    models.UniqueConstraint(
+                        fields=['brand', 'name'],
+                        name='together_brand_name_unique',
+                    ),
+                ]
+
+        msg = "in_bulk()'s field_name must be a unique field but '%s' isn't."
+        for field_name in ['brand', 'ean']:
+            with self.subTest(field_name=field_name):
+                with self.assertRaisesMessage(ValueError, msg % field_name):
+                    Model.objects.in_bulk(field_name=field_name)
+
     def test_values(self):
         # values() returns a list of dictionaries instead of object instances --
         # and you can specify which fields you want to retrieve.
+ git diff 447980e72ac01da1594dd3373a03ba40b7ee6f80
+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z x ']'
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1='(testbed) '
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=3
+++ CONDA_SHLVL=3
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=4
++ CONDA_SHLVL=4
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_3=/opt/miniconda3
++ CONDA_PREFIX_3=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ python -m pip install -e .
Obtaining file:///testbed
Requirement already satisfied: asgiref>=3.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (3.4.1)
Requirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (2025.2)
Requirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (0.4.4)
Requirement already satisfied: typing-extensions in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from asgiref>=3.2->Django==3.1) (4.1.1)
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 3.1
    Uninstalling Django-3.1:
      Successfully uninstalled Django-3.1
  Running setup.py develop for Django
Successfully installed Django-3.1
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
+ git apply -v -
Checking patch django/db/backends/base/schema.py...
Applied patch django/db/backends/base/schema.py cleanly.
+ git apply -v -
Checking patch tests/migrations/test_alter_index_together.py...
Applied patch tests/migrations/test_alter_index_together.py cleanly.
+ python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(django/db/backends/base/schema\.py)' ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 migrations.test_alter_index_together
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
test_remove_index_together_with_unique_together (migrations.test_alter_index_together.MigrationOperationsBugsTest) ... ERROR

======================================================================
ERROR: test_remove_index_together_with_unique_together (migrations.test_alter_index_together.MigrationOperationsBugsTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "./tests/migrations/test_alter_index_together.py", line 40, in test_remove_index_together_with_unique_together
    with connection.schema_editor() as editor:
  File "/testbed/django/db/backends/sqlite3/schema.py", line 26, in __enter__
    'SQLite schema editor cannot be used while foreign key '
django.db.utils.NotSupportedError: SQLite schema editor cannot be used while foreign key constraint checks are enabled. Make sure to disable them before entering a transaction.atomic() context because SQLite does not support disabling them in the middle of a multi-statement transaction.

----------------------------------------------------------------------
Ran 1 test in 0.005s

FAILED (errors=1)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
['--count', '-C', 'coverage.cover', '--include-pattern', '/testbed/(django/db/backends/base/schema\\.py)']
Testing against Django installed in '/testbed/django'
Importing application migrations
Skipping setup of unused database(s): other.
Operations to perform:
  Synchronize unmigrated apps: auth, contenttypes, messages, migrations, sessions, staticfiles
  Apply all migrations: admin, sites
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_content_type
    Creating table auth_permission
    Creating table auth_group
    Creating table auth_user
    Creating table django_session
    Creating table migrations_modelwithcustombase
    Creating table migrations_unmigratedmodel
    Running deferred SQL...
Running migrations:
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying sites.0001_initial... OK
  Applying sites.0002_alter_domain_unique... OK
System check identified no issues (0 silenced).
+ cat coverage.cover
{"/testbed/django/db/backends/base/schema.py": {"1": 1, "2": 1, "4": 1, "7": 1, "8": 1, "9": 1, "10": 1, "12": 1, "15": 1, "31": 1, "35": 1, "44": 2, "20": 0, "21": 0, "23": 0, "24": 0, "26": 0, "28": 0, "32": 0, "38": 0, "39": 0, "40": 0, "52": 1, "53": 1, "54": 1, "55": 1, "57": 1, "58": 1, "59": 1, "60": 1, "61": 1, "62": 1, "63": 1, "64": 1, "65": 1, "66": 1, "68": 1, "69": 1, "70": 1, "71": 1, "73": 1, "74": 1, "76": 1, "77": 1, "80": 1, "83": 1, "84": 1, "85": 1, "87": 1, "88": 1, "89": 1, "91": 1, "92": 1, "94": 1, "96": 1, "105": 1, "112": 1, "121": 1, "144": 1, "147": 1, "206": 1, "255": 1, "262": 1, "271": 1, "278": 1, "301": 1, "305": 1, "317": 1, "334": 1, "350": 1, "354": 1, "358": 1, "364": 1, "370": 1, "386": 1, "407": 1, "423": 1, "438": 1, "446": 1, "501": 1, "531": 1, "573": 1, "820": 1, "842": 1, "873": 1, "894": 1, "915": 1, "944": 1, "954": 1, "955": 1, "956": 1, "983": 1, "990": 1, "993": 1, "1012": 1, "1021": 1, "1024": 1, "1027": 1, "1032": 1, "1040": 1, "1057": 1, "1070": 1, "1073": 1, "1089": 1, "1115": 1, "1123": 1, "1129": 1, "1137": 1, "1140": 1, "1149": 1, "1177": 1, "1187": 1, "1197": 1, "1200": 1, "97": 8, "98": 8, "99": 8, "100": 0, "101": 8, "106": 7, "107": 7, "108": 7, "109": 7, "110": 7, "113": 7, "114": 22, "115": 15, "116": 7, "117": 7, "125": 44, "126": 0, "127": 0, "131": 44, "133": 44, "134": 44, "135": 0, "136": 0, "137": 0, "139": 0, "141": 44, "142": 44, "145": 228, "151": 21, "152": 20, "153": 5, "155": 16, "156": 16, "157": 84, "159": 68, "160": 68, "161": 0, "163": 68, "164": 68, "165": 3, "167": 68, "168": 68, "169": 15, "170": 68, "172": 68, "173": 13, "174": 13, "175": 13, "176": 13, "177": 13, "178": 13, "180": 0, "181": 0, "183": 68, "184": 68, "185": 68, "189": 68, "190": 15, "191": 15, "192": 0, "193": 32, "194": 16, "195": 16, "196": 100, "198": 16, "199": 0, "200": 0, "201": 0, "202": 16, "212": 68, "213": 68, "214": 68, "216": 68, "217": 0, "219": 68, "221": 68, "222": 68, "223": 0, "224": 0, "225": 0, "226": 0, "230": 0, "232": 0, "233": 0, "236": 68, "237": 26, "238": 0, "239": 68, "240": 7, "241": 61, "242": 61, "244": 68, "245": 16, "246": 52, "247": 3, "249": 68, "250": 68, "251": 0, "253": 68, "260": 0, "266": 0, "267": 0, "276": 0, "281": 0, "282": 0, "283": 0, "284": 0, "285": 0, "287": 0, "288": 0, "289": 0, "290": 0, "291": 0, "292": 0, "293": 0, "294": 0, "295": 0, "296": 0, "298": 0, "299": 0, "303": 0, "313": 0, "322": 16, "324": 16, "327": 16, "330": 19, "331": 3, "332": 3, "337": 0, "338": 0, "339": 0, "342": 0, "343": 0, "346": 0, "347": 0, "348": 0, "352": 0, "356": 0, "360": 0, "361": 0, "362": 0, "366": 0, "367": 0, "368": 0, "376": 0, "377": 0, "379": 0, "380": 0, "382": 0, "383": 0, "384": 0, "392": 0, "393": 0, "395": 0, "396": 0, "397": 0, "398": 0, "399": 0, "400": 0, "403": 0, "404": 0, "405": 0, "408": 0, "409": 0, "410": 0, "411": 0, "412": 0, "413": 0, "415": 0, "416": 0, "417": 0, "418": 0, "419": 0, "421": 0, "425": 3, "426": 3, "427": 3, "428": 0, "429": 3, "430": 3, "431": 3, "434": 7, "435": 4, "436": 4, "440": 0, "441": 0, "442": 0, "443": 0, "452": 0, "453": 0, "455": 0, "457": 0, "458": 0, "460": 0, "461": 0, "462": 0, "463": 0, "464": 0, "466": 0, "467": 0, "468": 0, "469": 0, "470": 0, "471": 0, "472": 0, "473": 0, "474": 0, "478": 0, "480": 0, "481": 0, "482": 0, "483": 0, "485": 0, "488": 0, "489": 0, "490": 0, "491": 0, "492": 0, "494": 0, "496": 0, "498": 0, "499": 0, "507": 0, "508": 0, "510": 0, "511": 0, "513": 0, "514": 0, "515": 0, "516": 0, "518": 0, "519": 0, "520": 0, "522": 0, "524": 0, "525": 0, "527": 0, "528": 0, "529": 0, "540": 3, "541": 3, "542": 3, "543": 3, "544": 3, "545": 3, "546": 0, "547": 0, "549": 0, "551": 3, "552": 0, "553": 0, "554": 0, "555": 0, "556": 3, "557": 0, "558": 0, "559": 0, "561": 0, "562": 3, "563": 0, "564": 0, "566": 0, "569": 3, "570": 3, "576": 0, "578": 0, "579": 0, "580": 0, "582": 0, "583": 0, "584": 0, "585": 0, "586": 0, "587": 0, "589": 0, "590": 0, "591": 0, "593": 0, "595": 0, "596": 0, "597": 0, "598": 0, "600": 0, "601": 0, "602": 0, "603": 0, "604": 0, "606": 0, "607": 0, "611": 0, "612": 0, "613": 0, "614": 0, "616": 0, "619": 0, "620": 0, "621": 0, "623": 0, "624": 0, "635": 0, "637": 0, "640": 0, "641": 0, "642": 0, "644": 0, "648": 0, "650": 0, "651": 0, "652": 0, "653": 0, "654": 0, "656": 0, "657": 0, "658": 0, "659": 0, "660": 0, "662": 0, "663": 0, "665": 0, "666": 0, "668": 0, "669": 0, "670": 0, "672": 0, "673": 0, "674": 0, "676": 0, "677": 0, "678": 0, "679": 0, "687": 0, "688": 0, "689": 0, "690": 0, "692": 0, "693": 0, "694": 0, "696": 0, "697": 0, "699": 0, "700": 0, "701": 0, "702": 0, "705": 0, "706": 0, "708": 0, "709": 0, "712": 0, "714": 0, "715": 0, "716": 0, "718": 0, "719": 0, "720": 0, "721": 0, "722": 0, "724": 0, "726": 0, "728": 0, "729": 0, "730": 0, "731": 0, "732": 0, "734": 0, "738": 0, "739": 0, "740": 0, "741": 0, "742": 0, "744": 0, "746": 0, "747": 0, "748": 0, "750": 0, "751": 0, "753": 0, "754": 0, "764": 0, "765": 0, "768": 0, "769": 0, "770": 0, "772": 0, "774": 0, "776": 0, "778": 0, "779": 0, "780": 0, "781": 0, "782": 0, "784": 0, "785": 0, "786": 0, "787": 0, "789": 0, "791": 0, "792": 0, "794": 0, "795": 0, "796": 0, "797": 0, "799": 0, "800": 0, "801": 0, "802": 0, "804": 0, "805": 0, "806": 0, "809": 0, "810": 0, "811": 0, "812": 0, "813": 0, "815": 0, "817": 0, "818": 0, "827": 0, "828": 0, "830": 0, "832": 0, "833": 0, "835": 0, "836": 0, "837": 0, "839": 0, "849": 0, "850": 0, "851": 0, "853": 0, "854": 0, "855": 0, "859": 0, "860": 0, "862": 0, "863": 0, "865": 0, "866": 0, "867": 0, "868": 0, "870": 0, "885": 0, "886": 0, "887": 0, "889": 0, "891": 0, "897": 0, "898": 0, "899": 0, "901": 0, "902": 0, "905": 0, "906": 0, "908": 0, "909": 0, "911": 0, "912": 0, "922": 19, "923": 19, "924": 19, "926": 19, "927": 19, "928": 19, "930": 0, "931": 0, "932": 0, "933": 0, "934": 0, "935": 0, "936": 0, "940": 0, "941": 0, "942": 0, "945": 14, "946": 14, "947": 0, "948": 14, "949": 0, "950": 14, "951": 0, "952": 14, "962": 14, "963": 42, "964": 14, "965": 14, "967": 14, "973": 14, "974": 14, "975": 14, "976": 14, "977": 14, "978": 14, "979": 14, "980": 14, "969": 14, "970": 14, "971": 14, "984": 0, "985": 0, "986": 0, "987": 0, "991": 14, "998": 16, "999": 0, "1000": 16, "1001": 84, "1002": 68, "1004": 16, "1005": 0, "1006": 0, "1008": 16, "1009": 0, "1010": 16, "1016": 68, "1017": 68, "1018": 14, "1019": 68, "1022": 68, "1025": 0, "1028": 0, "1029": 0, "1033": 0, "1034": 0, "1035": 0, "1036": 0, "1037": 0, "1041": 0, "1042": 0, "1043": 0, "1044": 0, "1045": 0, "1046": 0, "1047": 0, "1048": 0, "1049": 0, "1050": 0, "1051": 0, "1052": 0, "1053": 0, "1054": 0, "1058": 0, "1061": 0, "1062": 0, "1063": 0, "1064": 0, "1065": 0, "1066": 0, "1067": 0, "1059": 0, "1071": 0, "1074": 0, "1077": 0, "1078": 0, "1079": 0, "1080": 0, "1081": 0, "1082": 0, "1084": 0, "1085": 0, "1086": 0, "1090": 5, "1093": 5, "1094": 5, "1095": 5, "1097": 0, "1098": 5, "1099": 5, "1106": 0, "1108": 5, "1109": 5, "1110": 5, "1111": 5, "1112": 5, "1091": 5, "1116": 0, "1119": 0, "1121": 0, "1124": 0, "1125": 0, "1126": 0, "1130": 0, "1131": 0, "1132": 0, "1133": 0, "1134": 0, "1138": 0, "1141": 0, "1142": 0, "1143": 0, "1144": 0, "1151": 0, "1153": 0, "1154": 0, "1156": 0, "1157": 0, "1158": 0, "1159": 0, "1160": 0, "1161": 0, "1162": 0, "1163": 0, "1164": 0, "1165": 0, "1166": 0, "1167": 0, "1168": 0, "1169": 0, "1170": 0, "1171": 0, "1172": 0, "1173": 0, "1174": 0, "1175": 0, "1178": 0, "1179": 0, "1180": 0, "1181": 0, "1182": 0, "1184": 0, "1185": 0, "1188": 0, "1189": 0, "1190": 0, "1191": 0, "1192": 0, "1194": 0, "1198": 0, "1201": 0, "1202": 0, "1203": 0, "1205": 0}}
+ git checkout 447980e72ac01da1594dd3373a03ba40b7ee6f80
Note: switching to '447980e72ac01da1594dd3373a03ba40b7ee6f80'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c <new-branch-name>

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at 447980e72a Fixed #31500 -- Fixed detecting of unique fields in QuerySet.in_bulk() when using Meta.constraints.
M	django/db/backends/base/schema.py
+ git apply /root/pre_state.patch
error: unrecognized input
