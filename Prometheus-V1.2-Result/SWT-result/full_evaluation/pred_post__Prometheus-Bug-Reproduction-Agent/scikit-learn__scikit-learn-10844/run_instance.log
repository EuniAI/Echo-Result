2025-12-07 15:46:03,716 - WARNING - Starting evaluation at 1765122363.7160208
2025-12-07 15:46:03,764 - INFO - Creating container for scikit-learn__scikit-learn-10844...
2025-12-07 15:46:03,792 - INFO - Container for scikit-learn__scikit-learn-10844 created: 20b33cc3accd03f99b36d00f83e6bc9aa90acedc96b65630860fe114d8869f57
2025-12-07 15:46:03,974 - INFO - Container for scikit-learn__scikit-learn-10844 started: 20b33cc3accd03f99b36d00f83e6bc9aa90acedc96b65630860fe114d8869f57
2025-12-07 15:46:04,337 - INFO - Git diff before:

2025-12-07 15:46:04,338 - INFO - Eval script for scikit-learn__scikit-learn-10844 written to eval.sh, now applying to container...
2025-12-07 15:46:10,578 - INFO - Test output for scikit-learn__scikit-learn-10844 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/scikit-learn__scikit-learn-10844/test_output.txt
2025-12-07 15:46:10,657 - INFO - Git diff after:
diff --git a/sklearn/metrics/cluster/supervised.py b/sklearn/metrics/cluster/supervised.py
index a987778ae5..a33d0cb25a 100644
--- a/sklearn/metrics/cluster/supervised.py
+++ b/sklearn/metrics/cluster/supervised.py
@@ -852,11 +852,12 @@ def fowlkes_mallows_score(labels_true, labels_pred, sparse=False):
     labels_true, labels_pred = check_clusterings(labels_true, labels_pred)
     n_samples, = labels_true.shape
 
-    c = contingency_matrix(labels_true, labels_pred, sparse=True)
+    c = contingency_matrix(labels_true, labels_pred,
+                           sparse=True).astype(np.int64)
     tk = np.dot(c.data, c.data) - n_samples
     pk = np.sum(np.asarray(c.sum(axis=0)).ravel() ** 2) - n_samples
     qk = np.sum(np.asarray(c.sum(axis=1)).ravel() ** 2) - n_samples
-    return tk / np.sqrt(pk * qk) if tk != 0. else 0.
+    return np.sqrt(tk / pk) * np.sqrt(tk / qk) if tk != 0. else 0.
 
 
 def entropy(labels):
2025-12-07 15:46:10,657 - INFO - Git diff changed after running eval script
2025-12-07 15:46:10,657 - INFO - Attempting to stop container exec.eval.x86_64.437918b9cd24690e5e9c56.1a10b234bdf650b9bf754b.124396453914304...
2025-12-07 15:46:25,887 - INFO - Attempting to remove container exec.eval.x86_64.437918b9cd24690e5e9c56.1a10b234bdf650b9bf754b.124396453914304...
2025-12-07 15:46:25,900 - INFO - Container exec.eval.x86_64.437918b9cd24690e5e9c56.1a10b234bdf650b9bf754b.124396453914304 removed.
2025-12-07 15:46:25,901 - WARNING - End of eval at 1765122385.9010925
