2025-12-07 15:39:35,428 - WARNING - Starting evaluation at 1765121975.4285321
2025-12-07 15:39:35,478 - INFO - Creating container for pytest-dev__pytest-10081...
2025-12-07 15:39:35,501 - INFO - Container for pytest-dev__pytest-10081 created: 384393c8961194e51868c91f34ac811cdf11d7bde33a603d306eb43c1151ef08
2025-12-07 15:39:35,666 - INFO - Container for pytest-dev__pytest-10081 started: 384393c8961194e51868c91f34ac811cdf11d7bde33a603d306eb43c1151ef08
2025-12-07 15:39:35,845 - INFO - Git diff before:

2025-12-07 15:39:35,845 - INFO - Eval script for pytest-dev__pytest-10081 written to eval.sh, now applying to container...
2025-12-07 15:39:42,419 - INFO - Test output for pytest-dev__pytest-10081 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/pytest-dev__pytest-10081/test_output.txt
2025-12-07 15:39:42,496 - INFO - Git diff after:
diff --git a/src/_pytest/unittest.py b/src/_pytest/unittest.py
index 851e4943b..c2df98653 100644
--- a/src/_pytest/unittest.py
+++ b/src/_pytest/unittest.py
@@ -316,7 +316,10 @@ class TestCaseFunction(Function):
             # Arguably we could always postpone tearDown(), but this changes the moment where the
             # TestCase instance interacts with the results object, so better to only do it
             # when absolutely needed.
-            if self.config.getoption("usepdb") and not _is_skipped(self.obj):
+            # We need to consider if the test itself is skipped, or the whole class.
+            assert isinstance(self.parent, UnitTestCase)
+            skipped = _is_skipped(self.obj) or _is_skipped(self.parent.obj)
+            if self.config.getoption("usepdb") and not skipped:
                 self._explicit_tearDown = self._testcase.tearDown
                 setattr(self._testcase, "tearDown", lambda *args: None)
2025-12-07 15:39:42,496 - INFO - Git diff changed after running eval script
2025-12-07 15:39:42,496 - INFO - Attempting to stop container exec.eval.x86_64.f9e979ea7bb33f6751eef5.8de889c7cd5214fcb97fd2.124396453909984...
2025-12-07 15:39:57,685 - INFO - Attempting to remove container exec.eval.x86_64.f9e979ea7bb33f6751eef5.8de889c7cd5214fcb97fd2.124396453909984...
2025-12-07 15:39:57,703 - INFO - Container exec.eval.x86_64.f9e979ea7bb33f6751eef5.8de889c7cd5214fcb97fd2.124396453909984 removed.
2025-12-07 15:39:57,703 - WARNING - End of eval at 1765121997.7032423
