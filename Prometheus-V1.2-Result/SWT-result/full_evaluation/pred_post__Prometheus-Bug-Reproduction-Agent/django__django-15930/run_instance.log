2025-12-07 14:28:05,476 - WARNING - Starting evaluation at 1765117685.4761267
2025-12-07 14:28:05,527 - INFO - Creating container for django__django-15930...
2025-12-07 14:28:05,559 - INFO - Container for django__django-15930 created: e1fc6e8a3a69720182bc44dcb800f1c76d65b3011ec3e8f0ebc9830da10a6de6
2025-12-07 14:28:05,744 - INFO - Container for django__django-15930 started: e1fc6e8a3a69720182bc44dcb800f1c76d65b3011ec3e8f0ebc9830da10a6de6
2025-12-07 14:28:06,859 - INFO - Git diff before:

2025-12-07 14:28:06,859 - INFO - Eval script for django__django-15930 written to eval.sh, now applying to container...
2025-12-07 14:28:16,755 - INFO - Test output for django__django-15930 written to run_instance_swt_logs/full_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-15930/test_output.txt
2025-12-07 14:28:16,849 - INFO - Git diff after:
diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py
index 822968ef56..ba836024e5 100644
--- a/django/db/models/expressions.py
+++ b/django/db/models/expressions.py
@@ -1299,6 +1299,11 @@ class When(Expression):
         template_params = extra_context
         sql_params = []
         condition_sql, condition_params = compiler.compile(self.condition)
+        # Filters that match everything are handled as empty strings in the
+        # WHERE clause, but in a CASE WHEN expression they must use a predicate
+        # that's always True.
+        if condition_sql == "":
+            condition_sql, condition_params = compiler.compile(Value(True))
         template_params["condition"] = condition_sql
         sql_params.extend(condition_params)
         result_sql, result_params = compiler.compile(self.result)
2025-12-07 14:28:16,849 - INFO - Git diff changed after running eval script
2025-12-07 14:28:16,849 - INFO - Attempting to stop container exec.eval.x86_64.8985b3936436978ec949e1.3749dd08aae9cf5be2f35c.124396453818880...
2025-12-07 14:28:32,267 - INFO - Attempting to remove container exec.eval.x86_64.8985b3936436978ec949e1.3749dd08aae9cf5be2f35c.124396453818880...
2025-12-07 14:28:32,297 - INFO - Container exec.eval.x86_64.8985b3936436978ec949e1.3749dd08aae9cf5be2f35c.124396453818880 removed.
2025-12-07 14:28:32,298 - WARNING - End of eval at 1765117712.298053
