{"instance_id": "django__django-10097", "repo": "django/django", "version": "2.2", "environment_setup_commit": "4fc35a9c3efdc9154efce28cb23cb84f8834517e", "patch_list": ["diff --git a/django/core/validators.py b/django/core/validators.py\n--- a/django/core/validators.py\n+++ b/django/core/validators.py\n@@ -94,7 +94,7 @@ class URLValidator(RegexValidator):\n \n     regex = _lazy_re_compile(\n         r'^(?:[a-z0-9\\.\\-\\+]*)://'  # scheme is validated separately\n-        r'(?:\\S+(?::\\S*)?@)?'  # user:pass authentication\n+        r'(?:[^\\s:@/]+(?::[^\\s:@/]*)?@)?'  # user:pass authentication\n         r'(?:' + ipv4_re + '|' + ipv6_re + '|' + host_re + ')'\n         r'(?::\\d{2,5})?'  # port\n         r'(?:[/?#][^\\s]*)?'  # resource path\n", "diff --git a/tests/validators/test_rfc1738.py b/tests/validators/test_rfc1738.py\nnew file mode 100644\nindex 0000000000..c409fe02b6\n--- /dev/null\n+++ b/tests/validators/test_rfc1738.py\n@@ -0,0 +1,22 @@\n+from django.core.exceptions import ValidationError\n+from django.core.validators import URLValidator\n+from django.test import SimpleTestCase\n+\n+\n+class URLValidatorRFC1738Tests(SimpleTestCase):\n+    \"\"\"\n+    Tests for URLValidator to ensure it adheres to RFC 1738 regarding\n+    special characters in the user/password section of a URL.\n+    \"\"\"\n+\n+    def test_rejects_unencoded_special_chars_in_user_info(self):\n+        \"\"\"\n+        Checks that URLValidator rejects URLs with unencoded special\n+        characters (e.g., '/', '@') in the user information part, which is\n+        required by RFC 1738.\n+        \"\"\"\n+        validator = URLValidator()\n+        # This URL is invalid because the '/' in 'foo/bar' must be percent-encoded.\n+        invalid_url = 'http://foo/bar@example.com'\n+        with self.assertRaises(ValidationError):\n+            validator(invalid_url)\n"], "arch": "x86_64", "base_commit": "b9cf764be62e77b4777b3a75ec256f6209a57671", "test_directives": ["validators.test_rfc1738"], "coverage_files": ["django/core/validators.py"], "env_name": "testbed", "run_id": "full_evaluation", "patch_id": "pred_post__Prometheus-Bug-Reproduction-Agent", "timeout": 1800, "rm_image": false, "force_rebuild": false, "exec_mode": "unit_test", "reproduction_script_name": null, "compute_coverage": true, "install": {"python": "3.5", "packages": "requirements.txt", "pre_install": ["apt-get update && apt-get install -y locales", "echo 'en_US UTF-8' > /etc/locale.gen", "locale-gen en_US.UTF-8"], "install": "python setup.py install", "pip_packages": ["setuptools"], "eval_commands": ["export LANG=en_US.UTF-8", "export LC_ALL=en_US.UTF-8", "export PYTHONIOENCODING=utf8", "export LANGUAGE=en_US:en"]}, "cache_level": "instance", "test_command": "python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(django/core/validators\\.py)' ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 validators.test_rfc1738", "req_install_commands": ["conda create -n testbed python=3.5 -y", "cat <<'EOF_59812759871' > $HOME/requirements.txt\nargon2-cffi >= 16.1.0\nbcrypt\ndocutils\ngeoip2\njinja2 >= 2.9.2\nnumpy\nPillow != 5.4.0\npylibmc; sys.platform != 'win32'\npython-memcached >= 1.59\npytz\npywatchman; sys.platform != 'win32'\nPyYAML\nselenium\nsqlparse\ntblib\n\nEOF_59812759871", "conda activate testbed && python -m pip install -r $HOME/requirements.txt", "rm $HOME/requirements.txt"]}