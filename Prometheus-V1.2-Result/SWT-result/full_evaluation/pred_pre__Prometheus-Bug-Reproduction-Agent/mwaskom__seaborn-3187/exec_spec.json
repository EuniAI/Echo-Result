{"instance_id": "mwaskom__seaborn-3187", "repo": "mwaskom/seaborn", "version": "0.12", "environment_setup_commit": "d25872b0fc99dbf7e666a91f59bd4ed125186aa1", "patch_list": ["diff --git a/tests/test_scatterplot_legend.py b/tests/test_scatterplot_legend.py\nnew file mode 100644\nindex 00000000..fa379802\n--- /dev/null\n+++ b/tests/test_scatterplot_legend.py\n@@ -0,0 +1,26 @@\n+import pytest\n+import seaborn as sns\n+import matplotlib as mpl\n+\n+def test_scatterplot_legend_large_range_offset():\n+    \"\"\"\n+    Test that the legend for a numerical variable with a large range\n+    includes the multiplicative offset in its title.\n+    \"\"\"\n+    penguins = sns.load_dataset(\"penguins\")\n+    penguins[\"body_mass_mg\"] = penguins[\"body_mass_g\"] * 1000\n+    \n+    ax = sns.scatterplot(\n+        data=penguins,\n+        x=\"bill_length_mm\",\n+        y=\"bill_depth_mm\",\n+        size=\"body_mass_mg\",\n+    )\n+    \n+    legend = ax.get_legend()\n+    title = legend.get_title().get_text()\n+    \n+    # The legend title should contain the offset string (e.g., \"1e6\")\n+    # generated by the ScalarFormatter, which is missing in the buggy version.\n+    # The presence of \"e\" indicates scientific notation, which is the default.\n+    assert \"e\" in title\n"], "arch": "x86_64", "base_commit": "22cdfb0c93f8ec78492d87edb810f10cb7f57a31", "test_directives": ["tests/test_scatterplot_legend.py"], "coverage_files": ["seaborn/_core/scales.py", "seaborn/utils.py"], "env_name": "testbed", "run_id": "full_evaluation", "patch_id": "pred_pre__Prometheus-Bug-Reproduction-Agent", "timeout": 1800, "rm_image": false, "force_rebuild": false, "exec_mode": "unit_test", "reproduction_script_name": null, "compute_coverage": true, "install": {"python": "3.9", "install": "python -m pip install -e .[dev]", "pip_packages": ["contourpy==1.1.0", "cycler==0.11.0", "fonttools==4.42.1", "importlib-resources==6.0.1", "kiwisolver==1.4.5", "matplotlib==3.7.2", "numpy==1.25.2", "packaging==23.1", "pandas==2.0.0", "pillow==10.0.0", "pyparsing==3.0.9", "pytest", "python-dateutil==2.8.2", "pytz==2023.3.post1", "scipy==1.11.2", "six==1.16.0", "tzdata==2023.1", "zipp==3.16.2"]}, "cache_level": "instance", "test_command": "python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(seaborn/_core/scales\\.py|seaborn/utils\\.py)' -m pytest --no-header -rA tests/test_scatterplot_legend.py", "req_install_commands": ["conda create -n testbed python=3.9  -y"]}