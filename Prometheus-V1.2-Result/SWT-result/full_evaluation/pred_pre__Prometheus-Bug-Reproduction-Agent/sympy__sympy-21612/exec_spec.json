{"instance_id": "sympy__sympy-21612", "repo": "sympy/sympy", "version": "1.9", "environment_setup_commit": "f9a6f50ec0c74d935c50a6e9c9b2cb0469570d91", "patch_list": ["diff --git a/sympy/parsing/tests/test_latex_precedence.py b/sympy/parsing/tests/test_latex_precedence.py\nnew file mode 100644\nindex 0000000000..34877aebfc\n--- /dev/null\n+++ b/sympy/parsing/tests/test_latex_precedence.py\n@@ -0,0 +1,24 @@\n+from sympy.external import import_module\n+from sympy.abc import a, b, c\n+from sympy.parsing.latex import parse_latex\n+\n+# disable tests if antlr4-python*-runtime is not present\n+antlr4 = import_module(\"antlr4\")\n+if not antlr4:\n+    disabled = True\n+\n+\n+def test_nested_fraction_precedence():\n+    \"\"\"\n+    Test for issue of wrong precedence in nested fractions.\n+\n+    A fraction in the denominator of another fraction should be enclosed\n+    in parentheses to maintain the correct order of operations. This test\n+    checks that `parse_latex` correctly groups the denominator.\n+    \"\"\"\n+    latex_expr = r\"\\frac{\\frac{a^3+b}{c}}{\\frac{1}{c^2}}\"\n+    # The buggy output is ((a**3 + b)/c)/1/(c**2), which evaluates to (a**3 + b)/c**3.\n+    # The correct parsing is ((a**3 + b)/c)/(1/(c**2)), which evaluates to c*(a**3 + b).\n+    expected_expr = ((a**3 + b) / c) / (1 / c**2)\n+    parsed_expr = parse_latex(latex_expr)\n+    assert parsed_expr == expected_expr\n"], "arch": "x86_64", "base_commit": "b4777fdcef467b7132c055f8ac2c9a5059e6a145", "test_directives": ["sympy/parsing/tests/test_latex_precedence.py"], "coverage_files": ["sympy/printing/str.py"], "env_name": "testbed", "run_id": "full_evaluation", "patch_id": "pred_pre__Prometheus-Bug-Reproduction-Agent", "timeout": 1800, "rm_image": false, "force_rebuild": false, "exec_mode": "unit_test", "reproduction_script_name": null, "compute_coverage": true, "install": {"python": "3.9", "packages": "mpmath flake8", "pip_packages": ["mpmath==1.3.0", "flake8-comprehensions"], "install": "python -m pip install -e ."}, "cache_level": "instance", "test_command": "PYTHONWARNINGS='ignore::UserWarning,ignore::SyntaxWarning' python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(sympy/printing/str\\.py)' bin/test -C --verbose sympy/parsing/tests/test_latex_precedence.p", "req_install_commands": ["conda create -n testbed python=3.9 mpmath flake8 -y"]}