2025-10-06 07:06:39,636 - thread-139660780025408.app.docker.base_container - INFO - Created temporary project directory: /tmp/tmpxa0trviw/sympy
2025-10-06 07:06:39,636 - thread-139660780025408.app.docker.base_container - DEBUG - Using workdir: /testbed
2025-10-06 07:06:39,636 - thread-139660780025408.app.docker.base_container - INFO - Pulling docker image: swebench/sweb.eval.x86_64.sympy_1776_sympy-18211:v1
2025-10-06 07:06:59,056 - thread-139660780025408.app.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_eb6bebdb37
2025-10-06 07:06:59,060 - thread-139660780025408.app.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_eb6bebdb37
2025-10-06 07:06:59,608 - thread-139660780025408.app.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-10-06 07:06:59,753 - thread-139660780025408.app.docker.base_container - INFO - Persistent shell is ready
2025-10-06 07:06:59,753 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: . /opt/miniconda3/bin/activate
2025-10-06 07:06:59,879 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:06:59,879 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:06:59,879 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: conda activate testbed
2025-10-06 07:07:00,004 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:07:00,004 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:07:00,004 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pip install -e .
2025-10-06 07:07:00,853 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:07:00,854 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
  Preparing metadata (setup.py) ... [?25l- done
[?25hRequirement already satisfied: mpmath>=0.19 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from sympy==1.6.dev0) (1.3.0)
Installing collected packages: sympy
  Attempting uninstall: sympy
    Found existing installation: sympy 1.6.dev0
    Uninstalling sympy-1.6.dev0:
      Successfully uninstalled sympy-1.6.dev0
[33m  DEPRECATION: Legacy editable install of sympy==1.6.dev0 from file:///testbed (setup.py develop) is deprecated. pip 25.0 will enforce this behaviour change. A possible replacement is to add a pyproject.toml or enable --use-pep517, and use setuptools >= 64. If the resulting installation is not behaving as expected, try using --config-settings editable_mode=compat. Please consult the setuptools documentation for more information. Discussion can be found at https://github.com/pypa/pip/issues/11457[0m[33m
[0m  Running setup.py develop for sympy
Successfully installed sympy
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.[0m[33m

2025-10-06 07:07:00,902 - thread-139660780025408.app.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
`solveset` raises `NotImplementedError` instead of returning `ConditionSet`

Issue description: 
The problem is
```julia
In [10]: Eq(n*cos(n) - 3*sin(n), 0).as_set()                                                                                                                  
---------------------------------------------------------------------------
NotImplementedError
```
Here `solveset` raises `NotImplementedError` but probably a `ConditionSet` should be returned by `solveset` instead. The obvious result of `as_set()` here is
```julia
In [11]: ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)                                                                                                   
Out[11]: {n | n ‚àä ‚Ñù ‚àß n‚ãÖcos(n) - 3‚ãÖsin(n) = 0}
```

_Originally posted by @oscarbenjamin in https://github.com/sympy/sympy/pull/17771_

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-10-06 07:07:00,902 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-10-06 07:07:00,903 - thread-139660780025408.app.lang_graph.nodes.context_query_message_node - DEBUG - Sending query to ContextProviderNode:
content='Issue title:\n`solveset` raises `NotImplementedError` instead of returning `ConditionSet`\n\nIssue description: \nThe problem is\n```julia\nIn [10]: Eq(n*cos(n) - 3*sin(n), 0).as_set()                                                                                                                  \n---------------------------------------------------------------------------\nNotImplementedError\n```\nHere `solveset` raises `NotImplementedError` but probably a `ConditionSet` should be returned by `solveset` instead. The obvious result of `as_set()` here is\n```julia\nIn [11]: ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)                                                                                                   \nOut[11]: {n | n ‚àä ‚Ñù ‚àß n‚ãÖcos(n) - 3‚ãÖsin(n) = 0}\n```\n\n_Originally posted by @oscarbenjamin in https://github.com/sympy/sympy/pull/17771_\n\nIssue comments:\n\n\nOBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,\nincluding ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.\n\n<reasoning>\n1. Analyze bug characteristics:\n   - Core functionality being tested\n   - Input parameters and configurations\n   - Expected error conditions\n   - Environmental dependencies\n\n2. Search requirements:\n   - Required imports and dependencies\n   - Test files exercising similar functionality\n   - Mock/fixture setup patterns\n   - Assertion styles\n   - Error handling tests\n\n3. Focus areas:\n   - All necessary imports (standard library, testing frameworks, mocking utilities)\n   - Dependencies and third-party packages\n   - Test setup and teardown\n   - Mock object configuration\n   - Network/external service simulation\n   - Error condition verification\n</reasoning>\n\nREQUIREMENTS:\n- Return 5 complete, self-contained test cases most similar to bug scenario\n- Must include ALL necessary imports at the start of each test file\n- Must include full test method implementation\n- Must include ALL mock/fixture setup\n- Must include helper functions used by test\n- Must preserve exact file paths and line numbers\n\n<examples>\n<example id="database-timeout">\n<bug>\ndb.execute("SELECT * FROM users").fetchall() \nraises ConnectionTimeout when load is high\n</bug>\n\n<ideal_test_match>\n# File: tests/test_database.py\nimport pytest\nfrom unittest.mock import Mock, patch\nfrom database.exceptions import ConnectionTimeout\nfrom database.models import QueryResult\nfrom database.client import DatabaseClient\n\nclass TestDatabaseTimeout:\n    @pytest.fixture\n    def mock_db_connection(self):\n        conn = Mock()\n        conn.execute.side_effect = [\n            ConnectionTimeout("Connection timed out"),\n            QueryResult(["user1", "user2"])  # Second try succeeds\n        ]\n        return conn\n        \n    def test_handle_timeout_during_query(self, mock_db_connection):\n        # Complete test showing timeout scenario\n        # Including retry logic verification\n        # With all necessary assertions\n</ideal_test_match>\n</example>\n\n<example id="file-permission">\n<bug>\nFileProcessor(\'/root/data.txt\').process() \nfails with PermissionError\n</bug>\n\n<ideal_test_match>\n# File: tests/test_file_processor.py\nimport os\nimport pytest\nfrom unittest.mock import patch, mock_open\nfrom file_processor import FileProcessor\nfrom file_processor.exceptions import ProcessingError\n\nclass TestFilePermissions:\n    @patch(\'os.access\')\n    @patch(\'builtins.open\')\n    def test_file_permission_denied(self, mock_open, mock_access):\n        # Full test setup with mocked file system\n        # Permission denial simulation\n        # Error handling verification\n</ideal_test_match>\n</example>\n\nSearch priority:\n1. Tests of exact same functionality (including import patterns)\n2. Tests with similar error conditions\n3. Tests with comparable mocking patterns\n4. Tests demonstrating similar assertions\n\nFind the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.\n' additional_kwargs={} response_metadata={}
2025-10-06 07:07:06,318 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I will begin by searching for tests related to `solveset` and `ConditionSet` to find cases where `solveset` is expected to return a `ConditionSet`. My initial search will focus on the `test_solveset.py` file, as it is the most likely location for these tests. I will then analyze the file for tests that handle `NotImplementedError` or assert the return of a `ConditionSet`.' additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_solveset.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20662, 'candidates_token_count': 107, 'total_token_count': 21075, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20662}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 107}], 'thoughts_token_count': 306, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4391324408700533, 'model_name': 'gemini-2.5-pro'} id='run--ed6b9809-5daf-4112-afc4-8d09edada5e1-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_solveset.py'}, 'id': '4c554014-61ad-49e4-a844-f6bf20460751', 'type': 'tool_call'}] usage_metadata={'input_tokens': 20662, 'output_tokens': 107, 'total_tokens': 21075, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 306}}
2025-10-06 07:07:09,090 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I've located the `test_solveset.py` file and will now examine its contents. My goal is to identify test cases that are relevant to the reported issue, specifically looking for tests that involve `solveset` and `ConditionSet`. I will read the file to understand how these components are tested together." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/solvers/tests/test_solveset.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20833, 'candidates_token_count': 96, 'total_token_count': 21022, 'cached_content_token_count': 19605, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20833}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19605}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 96}], 'thoughts_token_count': 93}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2147795557975769, 'model_name': 'gemini-2.5-pro'} id='run--179d5a02-6884-43ac-bc2f-13d1eae27a33-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/solvers/tests/test_solveset.py'}, 'id': '683d6ad6-14e0-4321-aef0-1c8f7dfa674a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 20833, 'output_tokens': 96, 'total_tokens': 21022, 'input_token_details': {'cache_read': 19605}, 'output_token_details': {'reasoning': 93}}
2025-10-06 07:13:25,299 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified five relevant test cases that demonstrate how `solveset` should return a `ConditionSet` when it cannot find an explicit solution. These tests cover a range of scenarios, including polynomial equations with no real roots, transcendental equations, and equations with symbolic parameters. The selected tests are from `sympy/solvers/tests/test_solveset.py` and showcase the expected behavior of `solveset` in situations similar to the one described in the bug report.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2372.0, "relative_path": "sympy/solvers/tests/test_solveset.py", "end_line": 2379.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31358, 'candidates_token_count': 275, 'total_token_count': 82239, 'cached_content_token_count': 19770, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31358}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19770}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 275}], 'thoughts_token_count': 50606}, 'finish_reason': 'STOP', 'avg_logprobs': -4.967854669744318, 'model_name': 'gemini-2.5-pro'} id='run--1424924b-af81-41c4-a8c0-bfa12fe57f5e-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 310.0, 'relative_path': 'sympy/solvers/tests/test_solveset.py', 'end_line': 333.0}, 'id': '31afe1c8-6064-4eb6-855a-874425d0e3bd', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'relative_path': 'sympy/solvers/tests/test_solveset.py', 'start_line': 519.0, 'end_line': 552.0}, 'id': '02633d1a-a3f9-4cbf-9cef-78f86784df8e', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 605.0, 'relative_path': 'sympy/solvers/tests/test_solveset.py', 'end_line': 683.0}, 'id': '7c360030-cc75-4243-8d43-7a66dd9ff2f9', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 2228.0, 'relative_path': 'sympy/solvers/tests/test_solveset.py', 'end_line': 2339.0}, 'id': '85ddda73-4e9b-495f-8342-c0e5291d882f', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 2372.0, 'relative_path': 'sympy/solvers/tests/test_solveset.py', 'end_line': 2379.0}, 'id': '4dce4a9b-2823-4e88-8394-31e19a3df3bf', 'type': 'tool_call'}] usage_metadata={'input_tokens': 31358, 'output_tokens': 275, 'total_tokens': 82239, 'input_token_details': {'cache_read': 19770}, 'output_token_details': {'reasoning': 50606}}
2025-10-06 07:15:35,614 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="Here are five relevant test cases that demonstrate how `solveset` should return a `ConditionSet` when it cannot find an explicit solution for a given equation.\n\n### Test Case 1\nThis test demonstrates that when `solveset_real` is used on a polynomial equation with no real roots, it correctly returns a `ConditionSet`, indicating that the solution is the set of real numbers for which the equation holds true.\n\n```python\n# File: sympy/solvers/tests/test_solveset.py\nfrom sympy.core.containers import Tuple\nfrom sympy.core.function import (Function, Lambda, nfloat)\nfrom sympy.core.mod import Mod\nfrom sympy.core.numbers import (E, I, Rational, oo, pi)\nfrom sympy.core.relational import (Eq, Gt,\n    Ne)\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import (Dummy, Symbol, symbols)\nfrom sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\nfrom sympy.functions.elementary.exponential import (LambertW, exp, log)\nfrom sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n    atanh, sinh, tanh, cosh, sech, coth)\nfrom sympy.functions.elementary.miscellaneous import sqrt, Min, Max\nfrom sympy.functions.elementary.piecewise import Piecewise\nfrom sympy.functions.elementary.trigonometric import (\n    TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n    cos, cot, csc, sec, sin, tan)\nfrom sympy.functions.special.error_functions import (erf, erfc,\n    erfcinv, erfinv)\nfrom sympy.logic.boolalg import And\nfrom sympy.matrices.dense import MutableDenseMatrix as Matrix\nfrom sympy.matrices.immutable import ImmutableDenseMatrix\nfrom sympy.polys.polytools import Poly\nfrom sympy.polys.rootoftools import CRootOf\nfrom sympy.sets.contains import Contains\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.sets.fancysets import ImageSet\nfrom sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n    Intersection, Interval, Union, imageset, ProductSet)\nfrom sympy.tensor.indexed import Indexed\nfrom sympy.utilities.iterables import numbered_symbols\n\nfrom sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n    nocache_fail)\nfrom sympy.utilities.randtest import verify_numerically as tn\nfrom sympy.physics.units import cm\n\nfrom sympy.solvers.solveset import (\n    solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n    linsolve, _is_function_class_equation, invert_real, invert_complex,\n    solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n    _is_finite_with_finite_vars, _transolve, _is_exponential,\n    _solve_exponential, _is_logarithmic,\n    _solve_logarithm, _term_factors, _is_modular)\n\n\na = Symbol('a', real=True)\nb = Symbol('b', real=True)\nc = Symbol('c', real=True)\nx = Symbol('x', real=True)\ny = Symbol('y', real=True)\nz = Symbol('z', real=True)\nq = Symbol('q', real=True)\nm = Symbol('m', real=True)\nn = Symbol('n', real=True)\n\n\ndef test_solve_polynomial():\n    assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))\n\n    assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)\n    assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)\n\n    a11, a12, a21, a22, b1, b2 = symbols('a11, a12, a21, a22, b1, b2')\n\n    assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(\n        -2 + 3 ** S.Half,\n        S(4),\n        -2 - 3 ** S.Half)\n\n    assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n    assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n    assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n    assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n    assert len(solveset_real(x**5 + x**3 + 1, x)) == 1\n    assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0\n\n    assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,\n                                        Eq(x**6 + x**4 + I, 0), S.Reals)\n```\n\n### Test Case 2\nThis test case demonstrates that when `solveset` is unable to find an explicit solution for a modular equation, it returns a `ConditionSet` representing the conditions under which the equation holds true.\n\n```python\n# File: sympy/solvers/tests/test_solveset.py\nfrom sympy.core.containers import Tuple\nfrom sympy.core.function import (Function, Lambda, nfloat)\nfrom sympy.core.mod import Mod\nfrom sympy.core.numbers import (E, I, Rational, oo, pi)\nfrom sympy.core.relational import (Eq, Gt,\n    Ne)\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import (Dummy, Symbol, symbols)\nfrom sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\nfrom sympy.functions.elementary.exponential import (LambertW, exp, log)\nfrom sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n    atanh, sinh, tanh, cosh, sech, coth)\nfrom sympy.functions.elementary.miscellaneous import sqrt, Min, Max\nfrom sympy.functions.elementary.piecewise import Piecewise\nfrom sympy.functions.elementary.trigonometric import (\n    TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n    cos, cot, csc, sec, sin, tan)\nfrom sympy.functions.special.error_functions import (erf, erfc,\n    erfcinv, erfinv)\nfrom sympy.logic.boolalg import And\nfrom sympy.matrices.dense import MutableDenseMatrix as Matrix\nfrom sympy.matrices.immutable import ImmutableDenseMatrix\nfrom sympy.polys.polytools import Poly\nfrom sympy.polys.rootoftools import CRootOf\nfrom sympy.sets.contains import Contains\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.sets.fancysets import ImageSet\nfrom sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n    Intersection, Interval, Union, imageset, ProductSet)\nfrom sympy.tensor.indexed import Indexed\nfrom sympy.utilities.iterables import numbered_symbols\n\nfrom sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n    nocache_fail)\nfrom sympy.utilities.randtest import verify_numerically as tn\nfrom sympy.physics.units import cm\n\nfrom sympy.solvers.solveset import (\n    solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n    linsolve, _is_function_class_equation, invert_real, invert_complex,\n    solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n    _is_finite_with_finite_vars, _transolve, _is_exponential,\n    _solve_exponential, _is_logarithmic,\n    _solve_logarithm, _term_factors, _is_modular)\n\n\na = Symbol('a', real=True)\nb = Symbol('b', real=True)\nc = Symbol('c', real=True)\nx = Symbol('x', real=True)\ny = Symbol('y', real=True)\nz = Symbol('z', real=True)\nq = Symbol('q', real=True)\nm = Symbol('m', real=True)\nn = Symbol('n', real=True)\n\n\ndef test_solve_modular():\n    # equation form: f(x) = 0\n    assert solveset(Mod(x, 3), x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n), S.Integers)\n    assert solveset(Mod(x, 3) - 1, x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n + 1), S.Integers)\n    assert solveset(Mod(x, 3) + 1, x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n - 1), S.Integers)\n    assert solveset(Mod(2*x, 3) - 1, x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n + 2), S.Integers)\n    assert solveset(Mod(x, 3) - 5, x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n + 2), S.Integers)\n    assert solveset(Mod(x, 3) - 3, x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n), S.Integers)\n    # equation form: f(x) = g(x)\n    assert solveset(Eq(Mod(x, 3), 1), x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n + 1), S.Integers)\n    assert solveset(Eq(Mod(x, 3), Mod(x, 5)), x, S.Integers) == \\\n        ImageSet(Lambda(n, 15*n), S.Integers)\n    assert solveset(Eq(Mod(2*x, 5), Mod(3*x, 7)), x, S.Integers) == \\\n        ImageSet(Lambda(n, 35*n), S.Integers)\n    assert solveset(Eq(Mod(x, 3), 2), x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n + 2), S.Integers)\n    # _is_modular tests\n    assert solveset(Mod(x**2, 5) - 1, x, S.Integers) == \\\n        Union(ImageSet(Lambda(n, 5*n + 1), S.Integers),\n              ImageSet(Lambda(n, 5*n + 4), S.Integers))\n    assert solveset(Mod(x**2, 7) - 4, x, S.Integers) == \\\n        Union(ImageSet(Lambda(n, 7*n + 2), S.Integers),\n              ImageSet(Lambda(n, 7*n + 5), S.Integers))\n    assert solveset(Mod(x**135, 6) - 5, x, S.Integers) == \\\n        ImageSet(Lambda(n, 6*n + 5), S.Integers)\n    assert solveset(Mod(x**4, 17) - 13, x, S.Integers) == \\\n        Union(ImageSet(Lambda(n, 17*n + 3), S.Integers),\n              ImageSet(Lambda(n, 17*n + 5), S.Integers),\n              ImageSet(Lambda(n, 17*n + 12), S.Integers),\n              ImageSet(Lambda(n, 17*n + 14), S.Integers))\n    # a.is_Pow tests\n    assert solveset(Mod(7**x, 41) - 15, x, S.Integers) == \\\n        ImageSet(Lambda(n, 40*n + 3), S.Naturals0)\n    assert solveset(Mod(12**x, 21) - 18, x, S.Integers) == \\\n        ImageSet(Lambda(n, 6*n + 2), S.Naturals0)\n    assert solveset(Mod(3**x, 4) - 3, x, S.Integers) == \\\n        ImageSet(Lambda(n, 2*n + 1), S.Naturals0)\n    assert solveset(Mod(2**x, 7) - 2 , x, S.Integers) == \\\n        ImageSet(Lambda(n, 3*n + 1), S.Naturals0)\n    assert solveset(Mod(3**(3**x), 4) - 3, x, S.Integers) == \\\n        Intersection(ImageSet(Lambda(n, Intersection({log(2*n + 1)/log(3)},\n        S.Integers)), S.Naturals0), S.Integers)\n    # Not Implemented for m without primitive root\n    assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \\\n        ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)\n    assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \\\n        ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)\n    # domain intersection\n    assert solveset(3 - Mod(5*x - 8, 7), x, S.Naturals0) == \\\n        Intersection(ImageSet(Lambda(n, 7*n + 5), S.Integers), S.Naturals0)\n    # Complex args\n    assert solveset(Mod(x, 3) - I, x, S.Integers) == \\\n        EmptySet()\n    assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \\\n        ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)\n    assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \\\n        ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)\n    # issue 13178\n    n = symbols('n', integer=True)\n    a = 742938285\n    z = 1898888478\n    m = 2**31 - 1\n    x = 20170816\n    assert solveset(x - Mod(a**n*z, m), n, S.Integers) == \\\n        ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0)\n    assert solveset(x - Mod(a**n*z, m), n, S.Naturals0) == \\\n        Intersection(ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0),\n        S.Naturals0)\n    assert solveset(x - Mod(a**(2*n)*z, m), n, S.Integers) == \\\n        Intersection(ImageSet(Lambda(n, 1073741823*n + 50), S.Naturals0),\n        S.Integers)\n    assert solveset(x - Mod(a**(2*n + 7)*z, m), n, S.Integers) == EmptySet()\n    assert solveset(x - Mod(a**(n - 4)*z, m), n, S.Integers) == \\\n        Intersection(ImageSet(Lambda(n, 2147483646*n + 104), S.Naturals0),\n        S.Integers)\n```\n\n### Test Case 3\nThis test case is highly relevant as it deals with transcendental equations, which are similar in nature to the equation in the bug report. It shows that when `solveset` cannot find an explicit solution, it correctly returns a `ConditionSet` for various transcendental equations.\n\n```python\n# File: sympy/solvers/tests/test_solveset.py\nfrom sympy.core.containers import Tuple\nfrom sympy.core.function import (Function, Lambda, nfloat)\nfrom sympy.core.mod import Mod\nfrom sympy.core.numbers import (E, I, Rational, oo, pi)\nfrom sympy.core.relational import (Eq, Gt,\n    Ne)\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import (Dummy, Symbol, symbols)\nfrom sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\nfrom sympy.functions.elementary.exponential import (LambertW, exp, log)\nfrom sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n    atanh, sinh, tanh, cosh, sech, coth)\nfrom sympy.functions.elementary.miscellaneous import sqrt, Min, Max\nfrom sympy.functions.elementary.piecewise import Piecewise\nfrom sympy.functions.elementary.trigonometric import (\n    TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n    cos, cot, csc, sec, sin, tan)\nfrom sympy.functions.special.error_functions import (erf, erfc,\n    erfcinv, erfinv)\nfrom sympy.logic.boolalg import And\nfrom sympy.matrices.dense import MutableDenseMatrix as Matrix\nfrom sympy.matrices.immutable import ImmutableDenseMatrix\nfrom sympy.polys.polytools import Poly\nfrom sympy.polys.rootoftools import CRootOf\nfrom sympy.sets.contains import Contains\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.sets.fancysets import ImageSet\nfrom sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n    Intersection, Interval, Union, imageset, ProductSet)\nfrom sympy.tensor.indexed import Indexed\nfrom sympy.utilities.iterables import numbered_symbols\n\nfrom sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n    nocache_fail)\nfrom sympy.utilities.randtest import verify_numerically as tn\nfrom sympy.physics.units import cm\n\nfrom sympy.solvers.solveset import (\n    solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n    linsolve, _is_function_class_equation, invert_real, invert_complex,\n    solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n    _is_finite_with_finite_vars, _transolve, _is_exponential,\n    _solve_exponential, _is_logarithmic,\n    _solve_logarithm, _term_factors, _is_modular)\n\n\na = Symbol('a', real=True)\nb = Symbol('b', real=True)\nc = Symbol('c', real=True)\nx = Symbol('x', real=True)\ny = Symbol('y', real=True)\nz = Symbol('z', real=True)\nq = Symbol('q', real=True)\nm = Symbol('m', real=True)\nn = Symbol('n', real=True)\n\n\n@slow\ndef test_solve_sqrt_3():\n    R = Symbol('R')\n    eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)\n    sol = solveset_complex(eq, R)\n    fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,\n            -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +\n            40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +\n            sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +\n            I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -\n               sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n               40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]\n    cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n            sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +\n            Rational(5, 3) +\n            I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n               sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n               sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]\n\n    assert sol._args[0] == FiniteSet(*fset)\n    assert sol._args[1] == ConditionSet(\n        R,\n        Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),\n        FiniteSet(*cset))\n\n    # the number of real roots will depend on the value of m: for m=1 there are 4\n    # and for m=-1 there are none.\n    eq = -sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) + sqrt((-m**2/2 - sqrt(\n        4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m - sqrt(\n            4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2)\n    unsolved_object = ConditionSet(q, Eq(sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) -\n        sqrt((-m**2/2 - sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m -\n        sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2), 0), S.Reals)\n    assert solveset(eq, q) == unsolved_object\n```\n\n### Test Case 4\nThis test case is highly relevant as it deals with transcendental equations, which are similar in nature to the equation in the bug report. It shows that when `solveset` cannot find an explicit solution, it correctly returns a `ConditionSet` for various transcendental equations.\n\n```python\n# File: sympy/solvers/tests/test_solveset.py\nfrom sympy.core.containers import Tuple\nfrom sympy.core.function import (Function, Lambda, nfloat)\nfrom sympy.core.mod import Mod\nfrom sympy.core.numbers import (E, I, Rational, oo, pi)\nfrom sympy.core.relational import (Eq, Gt,\n    Ne)\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import (Dummy, Symbol, symbols)\nfrom sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\nfrom sympy.functions.elementary.exponential import (LambertW, exp, log)\nfrom sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n    atanh, sinh, tanh, cosh, sech, coth)\nfrom sympy.functions.elementary.miscellaneous import sqrt, Min, Max\nfrom sympy.functions.elementary.piecewise import Piecewise\nfrom sympy.functions.elementary.trigonometric import (\n    TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n    cos, cot, csc, sec, sin, tan)\nfrom sympy.functions.special.error_functions import (erf, erfc,\n    erfcinv, erfinv)\nfrom sympy.logic.boolalg import And\nfrom sympy.matrices.dense import MutableDenseMatrix as Matrix\nfrom sympy.matrices.immutable import ImmutableDenseMatrix\nfrom sympy.polys.polytools import Poly\nfrom sympy.polys.rootoftools import CRootOf\nfrom sympy.sets.contains import Contains\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.sets.fancysets import ImageSet\nfrom sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n    Intersection, Interval, Union, imageset, ProductSet)\nfrom sympy.tensor.indexed import Indexed\nfrom sympy.utilities.iterables import numbered_symbols\n\nfrom sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n    nocache_fail)\nfrom sympy.utilities.randtest import verify_numerically as tn\nfrom sympy.physics.units import cm\n\nfrom sympy.solvers.solveset import (\n    solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n    linsolve, _is_function_class_equation, invert_real, invert_complex,\n    solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n    _is_finite_with_finite_vars, _transolve, _is_exponential,\n    _solve_exponential, _is_logarithmic,\n    _solve_logarithm, _term_factors, _is_modular)\n\n\na = Symbol('a', real=True)\nb = Symbol('b', real=True)\nc = Symbol('c', real=True)\nx = Symbol('x', real=True)\ny = Symbol('y', real=True)\nz = Symbol('z', real=True)\nq = Symbol('q', real=True)\nm = Symbol('m', real=True)\nn = Symbol('n', real=True)\n\n\ndef test_solveset_transcendental():\n    assert solveset_real(exp(x) - sin(x), x) == ConditionSet(\n        x, Eq(exp(x) - sin(x), 0), S.Reals)\n    assert solveset_real(exp(x) - sin(x), x, Interval(0, pi)) == ConditionSet(\n        x, Eq(exp(x) - sin(x), 0), Interval(0, pi))\n    assert solveset_real(log(x) - sin(x), x) == ConditionSet(\n        x, Eq(log(x) - sin(x), 0), S.Reals)\n    assert solveset_real(2*x - sin(x), x) == ConditionSet(\n        x, Eq(2*x - sin(x), 0), S.Reals)\n    assert solveset_real(2*x - cos(x), x) == ConditionSet(\n        x, Eq(2*x - cos(x), 0), S.Reals)\n    assert solveset_real(sin(x) - x, x) == FiniteSet(0)\n    assert solveset_real(sin(x)/x - 1, x) == ConditionSet(\n        x, Eq(sin(x)/x - 1, 0), S.Reals)\n```\n\n### Test Case 5\nThis test case is highly relevant as it deals with transcendental equations, which are similar in nature to the equation in the bug report. It shows that when `solveset` cannot find an explicit solution, it correctly returns a `ConditionSet` for various transcendental equations.\n\n```python\n# File: sympy/solvers/tests/test_solveset.py\nfrom sympy.core.containers import Tuple\nfrom sympy.core.function import (Function, Lambda, nfloat)\nfrom sympy.core.mod import Mod\nfrom sympy.core.numbers import (E, I, Rational, oo, pi)\nfrom sympy.core.relational import (Eq, Gt,\n    Ne)\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import (Dummy, Symbol, symbols)\nfrom sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\nfrom sympy.functions.elementary.exponential import (LambertW, exp, log)\nfrom sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n    atanh, sinh, tanh, cosh, sech, coth)\nfrom sympy.functions.elementary.miscellaneous import sqrt, Min, Max\nfrom sympy.functions.elementary.piecewise import Piecewise\nfrom sympy.functions.elementary.trigonometric import (\n    TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n    cos, cot, csc, sec, sin, tan)\nfrom sympy.functions.special.error_functions import (erf, erfc,\n    erfcinv, erfinv)\nfrom sympy.logic.boolalg import And\nfrom sympy.matrices.dense import MutableDenseMatrix as Matrix\nfrom sympy.matrices.immutable import ImmutableDenseMatrix\nfrom sympy.polys.polytools import Poly\nfrom sympy.polys.rootoftools import CRootOf\nfrom sympy.sets.contains import Contains\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.sets.fancysets import ImageSet\nfrom sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n    Intersection, Interval, Union, imageset, ProductSet)\nfrom sympy.tensor.indexed import Indexed\nfrom sympy.utilities.iterables import numbered_symbols\n\nfrom sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n    nocache_fail)\nfrom sympy.utilities.randtest import verify_numerically as tn\nfrom sympy.physics.units import cm\n\nfrom sympy.solvers.solveset import (\n    solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n    linsolve, _is_function_class_equation, invert_real, invert_complex,\n    solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n    _is_finite_with_finite_vars, _transolve, _is_exponential,\n    _solve_exponential, _is_logarithmic,\n    _solve_logarithm, _term_factors, _is_modular)\n\n\na = Symbol('a', real=True)\nb = Symbol('b', real=True)\nc = Symbol('c', real=True)\nx = Symbol('x', real=True)\ny = Symbol('y', real=True)\nz = Symbol('z', real=True)\nq = Symbol('q', real=True)\nm = Symbol('m', real=True)\nn = Symbol('n', real=True)\n\n\ndef test_no_sol():\n    assert solveset(1 - oo*x) == EmptySet()\n    assert solveset(oo*x, x) == EmptySet()\n    assert solveset(oo*x - oo, x) == EmptySet()\n    assert solveset_real(4, x) == EmptySet()\n    assert solveset_real(exp(x), x) == EmptySet()\n    assert solveset_real(x**2 + 1, x) == EmptySet()\n    assert solveset_real(-3*a/sqrt(x), x) == EmptySet()\n    assert solveset_real(1/x, x) == EmptySet()\n    assert solveset_real(-(1 + x)/(2 + x)**2 + 1/(2 + x), x) == \\\n        EmptySet()\n```" additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 23786, 'end_index': 24351, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 24371, 'end_index': 25390, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 25416, 'end_index': 26171, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 26166, 'end_index': 27104, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 27377, 'end_index': 27942, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 27962, 'end_index': 28981, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 29007, 'end_index': 29762, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 31379, 'end_index': 33889, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 34252, 'end_index': 34817, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 34837, 'end_index': 35856, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 35882, 'end_index': 36625, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 36633, 'end_index': 38614, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 38997, 'end_index': 39562, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 39582, 'end_index': 40601, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 40627, 'end_index': 41382, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 42469, 'end_index': 43034, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 43054, 'end_index': 44073, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 44099, 'end_index': 44854, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 44849, 'end_index': 45329, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 36443, 'candidates_token_count': 7723, 'total_token_count': 52445, 'cached_content_token_count': 19716, 'prompt_tokens_details': [{'modality': 1, 'token_count': 36443}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19716}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 7723}], 'thoughts_token_count': 8279}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16459864204324745, 'model_name': 'gemini-2.5-pro'} id='run--db719518-23aa-45b1-8bc9-e323a34a1ea0-0' usage_metadata={'input_tokens': 36443, 'output_tokens': 7723, 'total_tokens': 52445, 'input_token_details': {'cache_read': 19716}, 'output_token_details': {'reasoning': 8279}}
2025-10-06 07:15:35,615 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 07:15:35,616 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
`solveset` raises `NotImplementedError` instead of returning `ConditionSet`

Issue description: 
The problem is
```julia
In [10]: Eq(n*cos(n) - 3*sin(n), 0).as_set()                                                                                                                  
---------------------------------------------------------------------------
NotImplementedError
```
Here `solveset` raises `NotImplementedError` but probably a `ConditionSet` should be returned by `solveset` instead. The obvious result of `as_set()` here is
```julia
In [11]: ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)                                                                                                   
Out[11]: {n | n ‚àä ‚Ñù ‚àß n‚ãÖcos(n) - 3‚ãÖsin(n) = 0}
```

_Originally posted by @oscarbenjamin in https://github.com/sympy/sympy/pull/17771_

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/solvers/tests/test_solveset.py
Line number range: 1 - 500
Content:
1. from sympy.core.containers import Tuple
2. from sympy.core.function import (Function, Lambda, nfloat)
3. from sympy.core.mod import Mod
4. from sympy.core.numbers import (E, I, Rational, oo, pi)
5. from sympy.core.relational import (Eq, Gt,
6.     Ne)
7. from sympy.core.singleton import S
8. from sympy.core.symbol import (Dummy, Symbol, symbols)
9. from sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)
10. from sympy.functions.elementary.exponential import (LambertW, exp, log)
11. from sympy.functions.elementary.hyperbolic import (HyperbolicFunction,
12.     atanh, sinh, tanh, cosh, sech, coth)
13. from sympy.functions.elementary.miscellaneous import sqrt, Min, Max
14. from sympy.functions.elementary.piecewise import Piecewise
15. from sympy.functions.elementary.trigonometric import (
16.     TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,
17.     cos, cot, csc, sec, sin, tan)
18. from sympy.functions.special.error_functions import (erf, erfc,
19.     erfcinv, erfinv)
20. from sympy.logic.boolalg import And
21. from sympy.matrices.dense import MutableDenseMatrix as Matrix
22. from sympy.matrices.immutable import ImmutableDenseMatrix
23. from sympy.polys.polytools import Poly
24. from sympy.polys.rootoftools import CRootOf
25. from sympy.sets.contains import Contains
26. from sympy.sets.conditionset import ConditionSet
27. from sympy.sets.fancysets import ImageSet
28. from sympy.sets.sets import (Complement, EmptySet, FiniteSet,
29.     Intersection, Interval, Union, imageset, ProductSet)
30. from sympy.tensor.indexed import Indexed
31. from sympy.utilities.iterables import numbered_symbols
32. 
33. from sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,
34.     nocache_fail)
35. from sympy.utilities.randtest import verify_numerically as tn
36. from sympy.physics.units import cm
37. 
38. from sympy.solvers.solveset import (
39.     solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,
40.     linsolve, _is_function_class_equation, invert_real, invert_complex,
41.     solveset, solve_decomposition, substitution, nonlinsolve, solvify,
42.     _is_finite_with_finite_vars, _transolve, _is_exponential,
43.     _solve_exponential, _is_logarithmic,
44.     _solve_logarithm, _term_factors, _is_modular)
45. 
46. 
47. a = Symbol('a', real=True)
48. b = Symbol('b', real=True)
49. c = Symbol('c', real=True)
50. x = Symbol('x', real=True)
51. y = Symbol('y', real=True)
52. z = Symbol('z', real=True)
53. q = Symbol('q', real=True)
54. m = Symbol('m', real=True)
55. n = Symbol('n', real=True)
56. 
57. 
58. def test_invert_real():
59.     x = Symbol('x', real=True)
60.     y = Symbol('y')
61.     n = Symbol('n')
62. 
63.     def ireal(x, s=S.Reals):
64.         return Intersection(s, x)
65. 
66.     # issue 14223
67.     assert invert_real(x, 0, x, Interval(1, 2)) == (x, S.EmptySet)
68. 
69.     assert invert_real(exp(x), y, x) == (x, ireal(FiniteSet(log(y))))
70. 
71.     y = Symbol('y', positive=True)
72.     n = Symbol('n', real=True)
73.     assert invert_real(x + 3, y, x) == (x, FiniteSet(y - 3))
74.     assert invert_real(x*3, y, x) == (x, FiniteSet(y / 3))
75. 
76.     assert invert_real(exp(x), y, x) == (x, FiniteSet(log(y)))
77.     assert invert_real(exp(3*x), y, x) == (x, FiniteSet(log(y) / 3))
78.     assert invert_real(exp(x + 3), y, x) == (x, FiniteSet(log(y) - 3))
79. 
80.     assert invert_real(exp(x) + 3, y, x) == (x, ireal(FiniteSet(log(y - 3))))
81.     assert invert_real(exp(x)*3, y, x) == (x, FiniteSet(log(y / 3)))
82. 
83.     assert invert_real(log(x), y, x) == (x, FiniteSet(exp(y)))
84.     assert invert_real(log(3*x), y, x) == (x, FiniteSet(exp(y) / 3))
85.     assert invert_real(log(x + 3), y, x) == (x, FiniteSet(exp(y) - 3))
86. 
87.     assert invert_real(Abs(x), y, x) == (x, FiniteSet(y, -y))
88. 
89.     assert invert_real(2**x, y, x) == (x, FiniteSet(log(y)/log(2)))
90.     assert invert_real(2**exp(x), y, x) == (x, ireal(FiniteSet(log(log(y)/log(2)))))
91. 
92.     assert invert_real(x**2, y, x) == (x, FiniteSet(sqrt(y), -sqrt(y)))
93.     assert invert_real(x**S.Half, y, x) == (x, FiniteSet(y**2))
94. 
95.     raises(ValueError, lambda: invert_real(x, x, x))
96.     raises(ValueError, lambda: invert_real(x**pi, y, x))
97.     raises(ValueError, lambda: invert_real(S.One, y, x))
98. 
99.     assert invert_real(x**31 + x, y, x) == (x**31 + x, FiniteSet(y))
100. 
101.     lhs = x**31 + x
102.     base_values =  FiniteSet(y - 1, -y - 1)
103.     assert invert_real(Abs(x**31 + x + 1), y, x) == (lhs, base_values)
104. 
105.     assert invert_real(sin(x), y, x) == \
106.         (x, imageset(Lambda(n, n*pi + (-1)**n*asin(y)), S.Integers))
107. 
108.     assert invert_real(sin(exp(x)), y, x) == \
109.         (x, imageset(Lambda(n, log((-1)**n*asin(y) + n*pi)), S.Integers))
110. 
111.     assert invert_real(csc(x), y, x) == \
112.         (x, imageset(Lambda(n, n*pi + (-1)**n*acsc(y)), S.Integers))
113. 
114.     assert invert_real(csc(exp(x)), y, x) == \
115.         (x, imageset(Lambda(n, log((-1)**n*acsc(y) + n*pi)), S.Integers))
116. 
117.     assert invert_real(cos(x), y, x) == \
118.         (x, Union(imageset(Lambda(n, 2*n*pi + acos(y)), S.Integers), \
119.                 imageset(Lambda(n, 2*n*pi - acos(y)), S.Integers)))
120. 
121.     assert invert_real(cos(exp(x)), y, x) == \
122.         (x, Union(imageset(Lambda(n, log(2*n*pi + acos(y))), S.Integers), \
123.                 imageset(Lambda(n, log(2*n*pi - acos(y))), S.Integers)))
124. 
125.     assert invert_real(sec(x), y, x) == \
126.         (x, Union(imageset(Lambda(n, 2*n*pi + asec(y)), S.Integers), \
127.                 imageset(Lambda(n, 2*n*pi - asec(y)), S.Integers)))
128. 
129.     assert invert_real(sec(exp(x)), y, x) == \
130.         (x, Union(imageset(Lambda(n, log(2*n*pi + asec(y))), S.Integers), \
131.                 imageset(Lambda(n, log(2*n*pi - asec(y))), S.Integers)))
132. 
133.     assert invert_real(tan(x), y, x) == \
134.         (x, imageset(Lambda(n, n*pi + atan(y)), S.Integers))
135. 
136.     assert invert_real(tan(exp(x)), y, x) == \
137.         (x, imageset(Lambda(n, log(n*pi + atan(y))), S.Integers))
138. 
139.     assert invert_real(cot(x), y, x) == \
140.         (x, imageset(Lambda(n, n*pi + acot(y)), S.Integers))
141. 
142.     assert invert_real(cot(exp(x)), y, x) == \
143.         (x, imageset(Lambda(n, log(n*pi + acot(y))), S.Integers))
144. 
145.     assert invert_real(tan(tan(x)), y, x) == \
146.         (tan(x), imageset(Lambda(n, n*pi + atan(y)), S.Integers))
147. 
148.     x = Symbol('x', positive=True)
149.     assert invert_real(x**pi, y, x) == (x, FiniteSet(y**(1/pi)))
150. 
151. 
152. def test_invert_complex():
153.     assert invert_complex(x + 3, y, x) == (x, FiniteSet(y - 3))
154.     assert invert_complex(x*3, y, x) == (x, FiniteSet(y / 3))
155. 
156.     assert invert_complex(exp(x), y, x) == \
157.         (x, imageset(Lambda(n, I*(2*pi*n + arg(y)) + log(Abs(y))), S.Integers))
158. 
159.     assert invert_complex(log(x), y, x) == (x, FiniteSet(exp(y)))
160. 
161.     raises(ValueError, lambda: invert_real(1, y, x))
162.     raises(ValueError, lambda: invert_complex(x, x, x))
163.     raises(ValueError, lambda: invert_complex(x, x, 1))
164. 
165.     # https://github.com/skirpichev/omg/issues/16
166.     assert invert_complex(sinh(x), 0, x) != (x, FiniteSet(0))
167. 
168. 
169. def test_domain_check():
170.     assert domain_check(1/(1 + (1/(x+1))**2), x, -1) is False
171.     assert domain_check(x**2, x, 0) is True
172.     assert domain_check(x, x, oo) is False
173.     assert domain_check(0, x, oo) is False
174. 
175. 
176. def test_issue_11536():
177.     assert solveset(0**x - 100, x, S.Reals) == S.EmptySet
178.     assert solveset(0**x - 1, x, S.Reals) == FiniteSet(0)
179. 
180. 
181. def test_issue_17479():
182.     import sympy as sb
183.     from sympy.solvers.solveset import nonlinsolve
184.     x, y, z = sb.symbols("x, y, z")
185.     f = (x**2 + y**2)**2 + (x**2 + z**2)**2 - 2*(2*x**2 + y**2 + z**2)
186.     fx = sb.diff(f, x)
187.     fy = sb.diff(f, y)
188.     fz = sb.diff(f, z)
189.     sol = nonlinsolve([fx, fy, fz], [x, y, z])
190.     # FIXME: This previously gave 18 solutions and now gives 20 due to fixes
191.     # in the handling of intersection of FiniteSets or possibly a small change
192.     # to ImageSet._contains. However Using expand I can turn this into 16
193.     # solutions either way:
194.     #
195.     #    >>> len(FiniteSet(*(Tuple(*(expand(w) for w in s)) for s in sol)))
196.     #    16
197.     #
198.     assert len(sol) == 20
199. 
200. 
201. def test_is_function_class_equation():
202.     from sympy.abc import x, a
203.     assert _is_function_class_equation(TrigonometricFunction,
204.                                        tan(x), x) is True
205.     assert _is_function_class_equation(TrigonometricFunction,
206.                                        tan(x) - 1, x) is True
207.     assert _is_function_class_equation(TrigonometricFunction,
208.                                        tan(x) + sin(x), x) is True
209.     assert _is_function_class_equation(TrigonometricFunction,
210.                                        tan(x) + sin(x) - a, x) is True
211.     assert _is_function_class_equation(TrigonometricFunction,
212.                                        sin(x)*tan(x) + sin(x), x) is True
213.     assert _is_function_class_equation(TrigonometricFunction,
214.                                        sin(x)*tan(x + a) + sin(x), x) is True
215.     assert _is_function_class_equation(TrigonometricFunction,
216.                                        sin(x)*tan(x*a) + sin(x), x) is True
217.     assert _is_function_class_equation(TrigonometricFunction,
218.                                        a*tan(x) - 1, x) is True
219.     assert _is_function_class_equation(TrigonometricFunction,
220.                                        tan(x)**2 + sin(x) - 1, x) is True
221.     assert _is_function_class_equation(TrigonometricFunction,
222.                                        tan(x) + x, x) is False
223.     assert _is_function_class_equation(TrigonometricFunction,
224.                                        tan(x**2), x) is False
225.     assert _is_function_class_equation(TrigonometricFunction,
226.                                        tan(x**2) + sin(x), x) is False
227.     assert _is_function_class_equation(TrigonometricFunction,
228.                                        tan(x)**sin(x), x) is False
229.     assert _is_function_class_equation(TrigonometricFunction,
230.                                        tan(sin(x)) + sin(x), x) is False
231.     assert _is_function_class_equation(HyperbolicFunction,
232.                                        tanh(x), x) is True
233.     assert _is_function_class_equation(HyperbolicFunction,
234.                                        tanh(x) - 1, x) is True
235.     assert _is_function_class_equation(HyperbolicFunction,
236.                                        tanh(x) + sinh(x), x) is True
237.     assert _is_function_class_equation(HyperbolicFunction,
238.                                        tanh(x) + sinh(x) - a, x) is True
239.     assert _is_function_class_equation(HyperbolicFunction,
240.                                        sinh(x)*tanh(x) + sinh(x), x) is True
241.     assert _is_function_class_equation(HyperbolicFunction,
242.                                        sinh(x)*tanh(x + a) + sinh(x), x) is True
243.     assert _is_function_class_equation(HyperbolicFunction,
244.                                        sinh(x)*tanh(x*a) + sinh(x), x) is True
245.     assert _is_function_class_equation(HyperbolicFunction,
246.                                        a*tanh(x) - 1, x) is True
247.     assert _is_function_class_equation(HyperbolicFunction,
248.                                        tanh(x)**2 + sinh(x) - 1, x) is True
249.     assert _is_function_class_equation(HyperbolicFunction,
250.                                        tanh(x) + x, x) is False
251.     assert _is_function_class_equation(HyperbolicFunction,
252.                                        tanh(x**2), x) is False
253.     assert _is_function_class_equation(HyperbolicFunction,
254.                                        tanh(x**2) + sinh(x), x) is False
255.     assert _is_function_class_equation(HyperbolicFunction,
256.                                        tanh(x)**sinh(x), x) is False
257.     assert _is_function_class_equation(HyperbolicFunction,
258.                                        tanh(sinh(x)) + sinh(x), x) is False
259. 
260. 
261. def test_garbage_input():
262.     raises(ValueError, lambda: solveset_real([x], x))
263.     assert solveset_real(x, 1) == S.EmptySet
264.     assert solveset_real(x - 1, 1) == FiniteSet(x)
265.     assert solveset_real(x, pi) == S.EmptySet
266.     assert solveset_real(x, x**2) == S.EmptySet
267. 
268.     raises(ValueError, lambda: solveset_complex([x], x))
269.     assert solveset_complex(x, pi) == S.EmptySet
270. 
271.     raises(ValueError, lambda: solveset((x, y), x))
272.     raises(ValueError, lambda: solveset(x + 1, S.Reals))
273.     raises(ValueError, lambda: solveset(x + 1, x, 2))
274. 
275. 
276. def test_solve_mul():
277.     assert solveset_real((a*x + b)*(exp(x) - 3), x) == \
278.         Union({log(3)}, Intersection({-b/a}, S.Reals))
279.     anz = Symbol('anz', nonzero=True)
280.     assert solveset_real((anz*x + b)*(exp(x) - 3), x) == \
281.         FiniteSet(-b/anz, log(3))
282.     assert solveset_real((2*x + 8)*(8 + exp(x)), x) == FiniteSet(S(-4))
283.     assert solveset_real(x/log(x), x) == EmptySet()
284. 
285. 
286. def test_solve_invert():
287.     assert solveset_real(exp(x) - 3, x) == FiniteSet(log(3))
288.     assert solveset_real(log(x) - 3, x) == FiniteSet(exp(3))
289. 
290.     assert solveset_real(3**(x + 2), x) == FiniteSet()
291.     assert solveset_real(3**(2 - x), x) == FiniteSet()
292. 
293.     assert solveset_real(y - b*exp(a/x), x) == Intersection(
294.         S.Reals, FiniteSet(a/log(y/b)))
295. 
296.     # issue 4504
297.     assert solveset_real(2**x - 10, x) == FiniteSet(1 + log(5)/log(2))
298. 
299. 
300. def test_errorinverses():
301.     assert solveset_real(erf(x) - S.Half, x) == \
302.         FiniteSet(erfinv(S.Half))
303.     assert solveset_real(erfinv(x) - 2, x) == \
304.         FiniteSet(erf(2))
305.     assert solveset_real(erfc(x) - S.One, x) == \
306.         FiniteSet(erfcinv(S.One))
307.     assert solveset_real(erfcinv(x) - 2, x) == FiniteSet(erfc(2))
308. 
309. 
310. def test_solve_polynomial():
311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))
312. 
313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)
314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)
315. 
316.     a11, a12, a21, a22, b1, b2 = symbols('a11, a12, a21, a22, b1, b2')
317. 
318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(
319.         -2 + 3 ** S.Half,
320.         S(4),
321.         -2 - 3 ** S.Half)
322. 
323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)
324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)
325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)
326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)
327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1
328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0
329. 
330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,
331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)
332. 
333. 
334. def test_return_root_of():
335.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20
336.     s = list(solveset_complex(f, x))
337.     for root in s:
338.         assert root.func == CRootOf
339. 
340.     # if one uses solve to get the roots of a polynomial that has a CRootOf
341.     # solution, make sure that the use of nfloat during the solve process
342.     # doesn't fail. Note: if you want numerical solutions to a polynomial
343.     # it is *much* faster to use nroots to get them than to solve the
344.     # equation only to get CRootOf solutions which are then numerically
345.     # evaluated. So for eq = x**5 + 3*x + 7 do Poly(eq).nroots() rather
346.     # than [i.n() for i in solve(eq)] to get the numerical roots of eq.
347.     assert nfloat(list(solveset_complex(x**5 + 3*x**3 + 7, x))[0],
348.                   exponent=False) == CRootOf(x**5 + 3*x**3 + 7, 0).n()
349. 
350.     sol = list(solveset_complex(x**6 - 2*x + 2, x))
351.     assert all(isinstance(i, CRootOf) for i in sol) and len(sol) == 6
352. 
353.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20
354.     s = list(solveset_complex(f, x))
355.     for root in s:
356.         assert root.func == CRootOf
357. 
358.     s = x**5 + 4*x**3 + 3*x**2 + Rational(7, 4)
359.     assert solveset_complex(s, x) == \
360.         FiniteSet(*Poly(s*4, domain='ZZ').all_roots())
361. 
362.     # Refer issue #7876
363.     eq = x*(x - 1)**2*(x + 1)*(x**6 - x + 1)
364.     assert solveset_complex(eq, x) == \
365.         FiniteSet(-1, 0, 1, CRootOf(x**6 - x + 1, 0),
366.                        CRootOf(x**6 - x + 1, 1),
367.                        CRootOf(x**6 - x + 1, 2),
368.                        CRootOf(x**6 - x + 1, 3),
369.                        CRootOf(x**6 - x + 1, 4),
370.                        CRootOf(x**6 - x + 1, 5))
371. 
372. 
373. def test__has_rational_power():
374.     from sympy.solvers.solveset import _has_rational_power
375.     assert _has_rational_power(sqrt(2), x)[0] is False
376.     assert _has_rational_power(x*sqrt(2), x)[0] is False
377. 
378.     assert _has_rational_power(x**2*sqrt(x), x) == (True, 2)
379.     assert _has_rational_power(sqrt(2)*x**Rational(1, 3), x) == (True, 3)
380.     assert _has_rational_power(sqrt(x)*x**Rational(1, 3), x) == (True, 6)
381. 
382. 
383. def test_solveset_sqrt_1():
384.     assert solveset_real(sqrt(5*x + 6) - 2 - x, x) == \
385.         FiniteSet(-S.One, S(2))
386.     assert solveset_real(sqrt(x - 1) - x + 7, x) == FiniteSet(10)
387.     assert solveset_real(sqrt(x - 2) - 5, x) == FiniteSet(27)
388.     assert solveset_real(sqrt(x) - 2 - 5, x) == FiniteSet(49)
389.     assert solveset_real(sqrt(x**3), x) == FiniteSet(0)
390.     assert solveset_real(sqrt(x - 1), x) == FiniteSet(1)
391. 
392. 
393. def test_solveset_sqrt_2():
394.     # http://tutorial.math.lamar.edu/Classes/Alg/SolveRadicalEqns.aspx#Solve_Rad_Ex2_a
395.     assert solveset_real(sqrt(2*x - 1) - sqrt(x - 4) - 2, x) == \
396.         FiniteSet(S(5), S(13))
397.     assert solveset_real(sqrt(x + 7) + 2 - sqrt(3 - x), x) == \
398.         FiniteSet(-6)
399. 
400.     # http://www.purplemath.com/modules/solverad.htm
401.     assert solveset_real(sqrt(17*x - sqrt(x**2 - 5)) - 7, x) == \
402.         FiniteSet(3)
403. 
404.     eq = x + 1 - (x**4 + 4*x**3 - x)**Rational(1, 4)
405.     assert solveset_real(eq, x) == FiniteSet(Rational(-1, 2), Rational(-1, 3))
406. 
407.     eq = sqrt(2*x + 9) - sqrt(x + 1) - sqrt(x + 4)
408.     assert solveset_real(eq, x) == FiniteSet(0)
409. 
410.     eq = sqrt(x + 4) + sqrt(2*x - 1) - 3*sqrt(x - 1)
411.     assert solveset_real(eq, x) == FiniteSet(5)
412. 
413.     eq = sqrt(x)*sqrt(x - 7) - 12
414.     assert solveset_real(eq, x) == FiniteSet(16)
415. 
416.     eq = sqrt(x - 3) + sqrt(x) - 3
417.     assert solveset_real(eq, x) == FiniteSet(4)
418. 
419.     eq = sqrt(2*x**2 - 7) - (3 - x)
420.     assert solveset_real(eq, x) == FiniteSet(-S(8), S(2))
421. 
422.     # others
423.     eq = sqrt(9*x**2 + 4) - (3*x + 2)
424.     assert solveset_real(eq, x) == FiniteSet(0)
425. 
426.     assert solveset_real(sqrt(x - 3) - sqrt(x) - 3, x) == FiniteSet()
427. 
428.     eq = (2*x - 5)**Rational(1, 3) - 3
429.     assert solveset_real(eq, x) == FiniteSet(16)
430. 
431.     assert solveset_real(sqrt(x) + sqrt(sqrt(x)) - 4, x) == \
432.         FiniteSet((Rational(-1, 2) + sqrt(17)/2)**4)
433. 
434.     eq = sqrt(x) - sqrt(x - 1) + sqrt(sqrt(x))
435.     assert solveset_real(eq, x) == FiniteSet()
436. 
437.     eq = (sqrt(x) + sqrt(x + 1) + sqrt(1 - x) - 6*sqrt(5)/5)
438.     ans = solveset_real(eq, x)
439.     ra = S('''-1484/375 - 4*(-1/2 + sqrt(3)*I/2)*(-12459439/52734375 +
440.     114*sqrt(12657)/78125)**(1/3) - 172564/(140625*(-1/2 +
441.     sqrt(3)*I/2)*(-12459439/52734375 + 114*sqrt(12657)/78125)**(1/3))''')
442.     rb = Rational(4, 5)
443.     assert all(abs(eq.subs(x, i).n()) < 1e-10 for i in (ra, rb)) and \
444.         len(ans) == 2 and \
445.         set([i.n(chop=True) for i in ans]) == \
446.         set([i.n(chop=True) for i in (ra, rb)])
447. 
448.     assert solveset_real(sqrt(x) + x**Rational(1, 3) +
449.                                  x**Rational(1, 4), x) == FiniteSet(0)
450. 
451.     assert solveset_real(x/sqrt(x**2 + 1), x) == FiniteSet(0)
452. 
453.     eq = (x - y**3)/((y**2)*sqrt(1 - y**2))
454.     assert solveset_real(eq, x) == FiniteSet(y**3)
455. 
456.     # issue 4497
457.     assert solveset_real(1/(5 + x)**Rational(1, 5) - 9, x) == \
458.         FiniteSet(Rational(-295244, 59049))
459. 
460. 
461. @XFAIL
462. def test_solve_sqrt_fail():
463.     # this only works if we check real_root(eq.subs(x, Rational(1, 3)))
464.     # but checksol doesn't work like that
465.     eq = (x**3 - 3*x**2)**Rational(1, 3) + 1 - x
466.     assert solveset_real(eq, x) == FiniteSet(Rational(1, 3))
467. 
468. 
469. @slow
470. def test_solve_sqrt_3():
471.     R = Symbol('R')
472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)
473.     sol = solveset_complex(eq, R)
474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,
475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +
476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +
477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +
478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -
479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]
481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +
483.             Rational(5, 3) +
484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]
487. 
488.     assert sol._args[0] == FiniteSet(*fset)
489.     assert sol._args[1] == ConditionSet(
490.         R,
491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),
492.         FiniteSet(*cset))
493. 
494.     # the number of real roots will depend on the value of m: for m=1 there are 4
495.     # and for m=-1 there are none.
496.     eq = -sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) + sqrt((-m**2/2 - sqrt(
497.         4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m - sqrt(
498.             4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2)
499.     unsolved_object = ConditionSet(q, Eq(sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) -
500.         sqrt((-m**2/2 - sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m -

File: sympy/solvers/tests/test_solveset.py
Line number range: 519 - 552
Content:
519. def test_solve_rational():
520.     assert solveset_real(1/x + 1, x) == FiniteSet(-S.One)
521.     assert solveset_real(1/exp(x) - 1, x) == FiniteSet(0)
522.     assert solveset_real(x*(1 - 5/x), x) == FiniteSet(5)
523.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)
524.     assert solveset_real((x**2/(7 - x)).diff(x), x) == \
525.         FiniteSet(S.Zero, S(14))
526. 
527. 
528. def test_solveset_real_gen_is_pow():
529.     assert solveset_real(sqrt(1) + 1, x) == EmptySet()
530. 
531. 
532. def test_no_sol():
533.     assert solveset(1 - oo*x) == EmptySet()
534.     assert solveset(oo*x, x) == EmptySet()
535.     assert solveset(oo*x - oo, x) == EmptySet()
536.     assert solveset_real(4, x) == EmptySet()
537.     assert solveset_real(exp(x), x) == EmptySet()
538.     assert solveset_real(x**2 + 1, x) == EmptySet()
539.     assert solveset_real(-3*a/sqrt(x), x) == EmptySet()
540.     assert solveset_real(1/x, x) == EmptySet()
541.     assert solveset_real(-(1 + x)/(2 + x)**2 + 1/(2 + x), x) == \
542.         EmptySet()
543. 
544. 
545. def test_sol_zero_real():
546.     assert solveset_real(0, x) == S.Reals
547.     assert solveset(0, x, Interval(1, 2)) == Interval(1, 2)
548.     assert solveset_real(-x**2 - 2*x + (x + 1)**2 - 1, x) == S.Reals
549. 
550. 
551. def test_no_sol_rational_extragenous():
552.     assert solveset_real((x/(x + 1) + 3)**(-2), x) == EmptySet()

File: sympy/solvers/tests/test_solveset.py
Line number range: 605 - 683
Content:
605.             FiniteSet(-a - b - 3, -a + b - 3, a - b - 3, a + b - 3))
606.     eq = Abs(Abs(x + 3) - a) - b
607.     assert invert_real(eq, 0, x)[1] == sol
608.     reps = {a: 3, b: 1}
609.     eqab = eq.subs(reps)
610.     for i in sol.subs(reps):
611.         assert not eqab.subs(x, i)
612.     assert solveset(Eq(sin(Abs(x)), 1), x, domain=S.Reals) == Union(
613.         Intersection(Interval(0, oo),
614.             ImageSet(Lambda(n, (-1)**n*pi/2 + n*pi), S.Integers)),
615.         Intersection(Interval(-oo, 0),
616.             ImageSet(Lambda(n, n*pi - (-1)**(-n)*pi/2), S.Integers)))
617. 
618. 
619. 
620. def test_issue_9565():
621.     assert solveset_real(Abs((x - 1)/(x - 5)) <= Rational(1, 3), x) == Interval(-1, 2)
622. 
623. 
624. def test_issue_10069():
625.     eq = abs(1/(x - 1)) - 1 > 0
626.     u = Union(Interval.open(0, 1), Interval.open(1, 2))
627.     assert solveset_real(eq, x) == u
628. 
629. 
630. def test_real_imag_splitting():
631.     a, b = symbols('a b', real=True)
632.     assert solveset_real(sqrt(a**2 - b**2) - 3, a) == \
633.         FiniteSet(-sqrt(b**2 + 9), sqrt(b**2 + 9))
634.     assert solveset_real(sqrt(a**2 + b**2) - 3, a) != \
635.         S.EmptySet
636. 
637. 
638. def test_units():
639.     assert solveset_real(1/x - 1/(2*cm), x) == FiniteSet(2*cm)
640. 
641. 
642. def test_solve_only_exp_1():
643.     y = Symbol('y', positive=True)
644.     assert solveset_real(exp(x) - y, x) == FiniteSet(log(y))
645.     assert solveset_real(exp(x) + exp(-x) - 4, x) == \
646.         FiniteSet(log(-sqrt(3) + 2), log(sqrt(3) + 2))
647.     assert solveset_real(exp(x) + exp(-x) - y, x) != S.EmptySet
648. 
649. 
650. def test_atan2():
651.     # The .inverse() method on atan2 works only if x.is_real is True and the
652.     # second argument is a real constant
653.     assert solveset_real(atan2(x, 2) - pi/3, x) == FiniteSet(2*sqrt(3))
654. 
655. 
656. def test_piecewise_solveset():
657.     eq = Piecewise((x - 2, Gt(x, 2)), (2 - x, True)) - 3
658.     assert set(solveset_real(eq, x)) == set(FiniteSet(-1, 5))
659. 
660.     absxm3 = Piecewise(
661.         (x - 3, 0 <= x - 3),
662.         (3 - x, 0 > x - 3))
663.     y = Symbol('y', positive=True)
664.     assert solveset_real(absxm3 - y, x) == FiniteSet(-y + 3, y + 3)
665. 
666.     f = Piecewise(((x - 2)**2, x >= 0), (0, True))
667.     assert solveset(f, x, domain=S.Reals) == Union(FiniteSet(2), Interval(-oo, 0, True, True))
668. 
669.     assert solveset(
670.         Piecewise((x + 1, x > 0), (I, True)) - I, x, S.Reals
671.         ) == Interval(-oo, 0)
672. 
673.     assert solveset(Piecewise((x - 1, Ne(x, I)), (x, True)), x) == FiniteSet(1)
674. 
675. 
676. def test_solveset_complex_polynomial():
677.     from sympy.abc import x, a, b, c
678.     assert solveset_complex(a*x**2 + b*x + c, x) == \
679.         FiniteSet(-b/(2*a) - sqrt(-4*a*c + b**2)/(2*a),
680.                   -b/(2*a) + sqrt(-4*a*c + b**2)/(2*a))
681. 
682.     assert solveset_complex(x - y**3, y) == FiniteSet(
683.         (-x**Rational(1, 3))/2 + I*sqrt(3)*x**Rational(1, 3)/2,

File: sympy/solvers/tests/test_solveset.py
Line number range: 2228 - 2339
Content:
2228.     assert solveset(Mod(x**4, 17) - 13, x, S.Integers) == \
2229.             Union(ImageSet(Lambda(n, 17*n + 3), S.Integers),
2230.             ImageSet(Lambda(n, 17*n + 5), S.Integers),
2231.             ImageSet(Lambda(n, 17*n + 12), S.Integers),
2232.             ImageSet(Lambda(n, 17*n + 14), S.Integers))
2233.     # a.is_Pow tests
2234.     assert solveset(Mod(7**x, 41) - 15, x, S.Integers) == \
2235.             ImageSet(Lambda(n, 40*n + 3), S.Naturals0)
2236.     assert solveset(Mod(12**x, 21) - 18, x, S.Integers) == \
2237.             ImageSet(Lambda(n, 6*n + 2), S.Naturals0)
2238.     assert solveset(Mod(3**x, 4) - 3, x, S.Integers) == \
2239.             ImageSet(Lambda(n, 2*n + 1), S.Naturals0)
2240.     assert solveset(Mod(2**x, 7) - 2 , x, S.Integers) == \
2241.             ImageSet(Lambda(n, 3*n + 1), S.Naturals0)
2242.     assert solveset(Mod(3**(3**x), 4) - 3, x, S.Integers) == \
2243.             Intersection(ImageSet(Lambda(n, Intersection({log(2*n + 1)/log(3)},
2244.             S.Integers)), S.Naturals0), S.Integers)
2245.     # Not Implemented for m without primitive root
2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \
2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)
2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \
2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)
2250.     # domain intersection
2251.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Naturals0) == \
2252.             Intersection(ImageSet(Lambda(n, 7*n + 5), S.Integers), S.Naturals0)
2253.     # Complex args
2254.     assert solveset(Mod(x, 3) - I, x, S.Integers) == \
2255.             EmptySet()
2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \
2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)
2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \
2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)
2260.     # issue 13178
2261.     n = symbols('n', integer=True)
2262.     a = 742938285
2263.     z = 1898888478
2264.     m = 2**31 - 1
2265.     x = 20170816
2266.     assert solveset(x - Mod(a**n*z, m), n, S.Integers) == \
2267.             ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0)
2268.     assert solveset(x - Mod(a**n*z, m), n, S.Naturals0) == \
2269.             Intersection(ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0),
2270.             S.Naturals0)
2271.     assert solveset(x - Mod(a**(2*n)*z, m), n, S.Integers) == \
2272.             Intersection(ImageSet(Lambda(n, 1073741823*n + 50), S.Naturals0),
2273.             S.Integers)
2274.     assert solveset(x - Mod(a**(2*n + 7)*z, m), n, S.Integers) == EmptySet()
2275.     assert solveset(x - Mod(a**(n - 4)*z, m), n, S.Integers) == \
2276.             Intersection(ImageSet(Lambda(n, 2147483646*n + 104), S.Naturals0),
2277.             S.Integers)
2278. 
2279. @XFAIL
2280. def test_solve_modular_fail():
2281.     # issue 17373 (https://github.com/sympy/sympy/issues/17373)
2282.     assert solveset(Mod(x**4, 14) - 11, x, S.Integers) == \
2283.             Union(ImageSet(Lambda(n, 14*n + 3), S.Integers),
2284.             ImageSet(Lambda(n, 14*n + 11), S.Integers))
2285.     assert solveset(Mod(x**31, 74) - 43, x, S.Integers) == \
2286.             ImageSet(Lambda(n, 74*n + 31), S.Integers)
2287. 
2288. # end of modular tests


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and return it in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 07:17:30,460 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user's query is about `solveset` raising a `NotImplementedError` instead of returning a `ConditionSet` for an unsolvable equation.\n   - This test case demonstrates the expected behavior where `solveset_real` is given a polynomial with a complex coefficient, which is unsolvable over the real domain.\n2. Extended relevance:\n   - It correctly asserts that the result is a `ConditionSet` representing the unsolvable equation over the real domain.\n   - This is directly analogous to the user's issue and provides a clear example of the desired functionality.", relative_path='sympy/solvers/tests/test_solveset.py', start_line=310, end_line=333), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants to see examples where `solveset` returns a `ConditionSet` for complex equations it cannot solve.\n   - This test case involves a very complex equation with square roots passed to `solveset_complex`.\n2. Extended relevance:\n   - The resulting solution is a `Union` of a `FiniteSet` (the solvable part) and a `ConditionSet` (the unsolvable part).\n   - This demonstrates `solveset`'s ability to return partial solutions and gracefully handle components of an equation that it cannot solve analytically, which is the core of the user's issue.", relative_path='sympy/solvers/tests/test_solveset.py', start_line=469, end_line=493), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user's issue is that a `NotImplementedError` is raised instead of returning a `ConditionSet`.\n   - This test case specifically checks a scenario where a solver for a modular equation is not implemented.\n2. Extended relevance:\n   - The test asserts that `solveset` correctly returns a `ConditionSet` when faced with an unimplemented case (modulus without a primitive root).\n   - This is a perfect example of the expected behavior for the user's reported bug: instead of crashing with an error, the system should return a `ConditionSet` representing the unsolved equation.", relative_path='sympy/solvers/tests/test_solveset.py', start_line=2245, end_line=2247), ContextOutput(reasoning='1. Query requirement analysis:\n   - The query is about `solveset` failing to return a `ConditionSet` for an unsolvable equation.\n   - This test provides another example of an unsolvable modular equation.\n2. Extended relevance:\n   - Similar to the previous example, this test confirms that for a modulus where a solver is not implemented, `solveset` correctly falls back to returning a `ConditionSet`.\n   - Providing multiple, similar test cases reinforces the expected behavior and shows that this is a standard fallback mechanism in the solver.', relative_path='sympy/solvers/tests/test_solveset.py', start_line=2248, end_line=2249), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is interested in cases where `solveset` should return a `ConditionSet`.\n   - This test involves a modular equation with a complex argument, which is an unsupported case for the modular solver.\n2. Extended relevance:\n   - The test asserts that `solveset` returns a `ConditionSet` when it encounters an input it cannot process.\n   - This is directly relevant to the user's problem, as it demonstrates the correct, graceful failure mode for `solveset` when it encounters an equation type it's not equipped to solve, which is precisely what should happen for the user's transcendental equation.", relative_path='sympy/solvers/tests/test_solveset.py', start_line=2256, end_line=2259)]
2025-10-06 07:17:30,461 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='sympy/solvers/tests/test_solveset.py', content="310. def test_solve_polynomial():\n311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))\n312. \n313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)\n314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)\n315. \n316.     a11, a12, a21, a22, b1, b2 = symbols('a11, a12, a21, a22, b1, b2')\n317. \n318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(\n319.         -2 + 3 ** S.Half,\n320.         S(4),\n321.         -2 - 3 ** S.Half)\n322. \n323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1\n328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0\n329. \n330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,\n331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)\n332. \n333. ", start_line_number=310, end_line_number=333), Context(relative_path='sympy/solvers/tests/test_solveset.py', content="469. @slow\n470. def test_solve_sqrt_3():\n471.     R = Symbol('R')\n472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)\n473.     sol = solveset_complex(eq, R)\n474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,\n475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +\n476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +\n477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +\n478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -\n479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]\n481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +\n483.             Rational(5, 3) +\n484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]\n487. \n488.     assert sol._args[0] == FiniteSet(*fset)\n489.     assert sol._args[1] == ConditionSet(\n490.         R,\n491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),\n492.         FiniteSet(*cset))\n493. ", start_line_number=469, end_line_number=493), Context(relative_path='sympy/solvers/tests/test_solveset.py', content='2245.     # Not Implemented for m without primitive root\n2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \\\n2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)', start_line_number=2245, end_line_number=2247), Context(relative_path='sympy/solvers/tests/test_solveset.py', content='2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \\\n2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)', start_line_number=2248, end_line_number=2249), Context(relative_path='sympy/solvers/tests/test_solveset.py', content='2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \\\n2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)\n2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \\\n2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)', start_line_number=2256, end_line_number=2259)]
2025-10-06 07:17:30,461 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 07:17:30,462 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
‚îú‚îÄ‚îÄ .ci
|   ‚îú‚îÄ‚îÄ README.rst
|   ‚îú‚îÄ‚îÄ generate_durations_log.sh
|   ‚îî‚îÄ‚îÄ parse_durations_log.py
‚îú‚îÄ‚îÄ .travis.yml
‚îú‚îÄ‚îÄ CODE_OF_CONDUCT.md
‚îú‚îÄ‚îÄ CONTRIBUTING.md
‚îú‚îÄ‚îÄ PULL_REQUEST_TEMPLATE.md
‚îú‚îÄ‚îÄ README.rst
‚îú‚îÄ‚îÄ bin
|   ‚îú‚îÄ‚îÄ ask_update.py
|   ‚îú‚îÄ‚îÄ authors_update.py
|   ‚îú‚îÄ‚îÄ coverage_doctest.py
|   ‚îú‚îÄ‚îÄ coverage_report.py
|   ‚îú‚îÄ‚îÄ generate_module_list.py
|   ‚îú‚îÄ‚îÄ generate_test_list.py
|   ‚îú‚îÄ‚îÄ get_sympy.py
|   ‚îú‚îÄ‚îÄ mailmap_update.py
|   ‚îú‚îÄ‚îÄ sympy_time.py
|   ‚îú‚îÄ‚îÄ sympy_time_cache.py
|   ‚îú‚îÄ‚îÄ test_executable.py
|   ‚îú‚îÄ‚îÄ test_external_imports.py
|   ‚îú‚îÄ‚îÄ test_import.py
|   ‚îú‚îÄ‚îÄ test_setup.py
|   ‚îî‚îÄ‚îÄ test_travis.sh
‚îú‚îÄ‚îÄ codecov.yml
‚îú‚îÄ‚îÄ conftest.py
‚îú‚îÄ‚îÄ data
|   ‚îî‚îÄ‚îÄ TeXmacs
|       ‚îú‚îÄ‚îÄ bin
|       ‚îî‚îÄ‚îÄ progs
‚îú‚îÄ‚îÄ doc
|   ‚îú‚îÄ‚îÄ README.rst
|   ‚îú‚îÄ‚îÄ api
|   |   ‚îú‚îÄ‚îÄ conf.py
|   |   ‚îî‚îÄ‚îÄ index.rst
|   ‚îú‚îÄ‚îÄ cheatsheet
|   ‚îú‚îÄ‚îÄ ext
|   |   ‚îú‚îÄ‚îÄ docscrape.py
|   |   ‚îú‚îÄ‚îÄ docscrape_sphinx.py
|   |   ‚îú‚îÄ‚îÄ numpydoc.py
|   |   ‚îî‚îÄ‚îÄ sympylive.py
|   ‚îú‚îÄ‚îÄ generate_logos.py
|   ‚îú‚îÄ‚îÄ man
|   ‚îî‚îÄ‚îÄ src
|       ‚îú‚îÄ‚îÄ _static
|       ‚îú‚îÄ‚îÄ _templates
|       ‚îú‚îÄ‚îÄ aboutus.rst
|       ‚îú‚îÄ‚îÄ citing.rst
|       ‚îú‚îÄ‚îÄ conf.py
|       ‚îú‚îÄ‚îÄ documentation-style-guide.rst
|       ‚îú‚îÄ‚îÄ gotchas.rst
|       ‚îú‚îÄ‚îÄ guide.rst
|       ‚îú‚îÄ‚îÄ index.rst
|       ‚îú‚îÄ‚îÄ install.rst
|       ‚îú‚îÄ‚îÄ logo
|       |   ‚îî‚îÄ‚îÄ info.txt
|       ‚îú‚îÄ‚îÄ modules
|       |   ‚îú‚îÄ‚îÄ abc.rst
|       |   ‚îú‚îÄ‚îÄ algebras.rst
|       |   ‚îú‚îÄ‚îÄ assumptions
|       |   |   ‚îú‚îÄ‚îÄ ask.rst
|       |   |   ‚îú‚îÄ‚îÄ assume.rst
|       |   |   ‚îú‚îÄ‚îÄ handlers
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îî‚îÄ‚îÄ refine.rst
|       |   ‚îú‚îÄ‚îÄ calculus
|       |   |   ‚îî‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ categories.rst
|       |   ‚îú‚îÄ‚îÄ codegen.rst
|       |   ‚îú‚îÄ‚îÄ combinatorics
|       |   |   ‚îú‚îÄ‚îÄ fp_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ graycode.rst
|       |   |   ‚îú‚îÄ‚îÄ group_constructs.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ named_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ partitions.rst
|       |   |   ‚îú‚îÄ‚îÄ pc_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ perm_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ permutations.rst
|       |   |   ‚îú‚îÄ‚îÄ polyhedron.rst
|       |   |   ‚îú‚îÄ‚îÄ prufer.rst
|       |   |   ‚îú‚îÄ‚îÄ subsets.rst
|       |   |   ‚îú‚îÄ‚îÄ tensor_can.rst
|       |   |   ‚îú‚îÄ‚îÄ testutil.rst
|       |   |   ‚îî‚îÄ‚îÄ util.rst
|       |   ‚îú‚îÄ‚îÄ concrete.rst
|       |   ‚îú‚îÄ‚îÄ core.rst
|       |   ‚îú‚îÄ‚îÄ crypto.rst
|       |   ‚îú‚îÄ‚îÄ diffgeom.rst
|       |   ‚îú‚îÄ‚îÄ discrete.rst
|       |   ‚îú‚îÄ‚îÄ evalf.rst
|       |   ‚îú‚îÄ‚îÄ functions
|       |   |   ‚îú‚îÄ‚îÄ combinatorial.rst
|       |   |   ‚îú‚îÄ‚îÄ elementary.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îî‚îÄ‚îÄ special.rst
|       |   ‚îú‚îÄ‚îÄ geometry
|       |   |   ‚îú‚îÄ‚îÄ curves.rst
|       |   |   ‚îú‚îÄ‚îÄ ellipses.rst
|       |   |   ‚îú‚îÄ‚îÄ entities.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ lines.rst
|       |   |   ‚îú‚îÄ‚îÄ plane.rst
|       |   |   ‚îú‚îÄ‚îÄ points.rst
|       |   |   ‚îú‚îÄ‚îÄ polygons.rst
|       |   |   ‚îî‚îÄ‚îÄ utils.rst
|       |   ‚îú‚îÄ‚îÄ holonomic
|       |   |   ‚îú‚îÄ‚îÄ about.rst
|       |   |   ‚îú‚îÄ‚îÄ convert.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ internal.rst
|       |   |   ‚îú‚îÄ‚îÄ operations.rst
|       |   |   ‚îú‚îÄ‚îÄ represent.rst
|       |   |   ‚îî‚îÄ‚îÄ uses.rst
|       |   ‚îú‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ integrals
|       |   |   ‚îú‚îÄ‚îÄ g-functions.rst
|       |   |   ‚îî‚îÄ‚îÄ integrals.rst
|       |   ‚îú‚îÄ‚îÄ interactive.rst
|       |   ‚îú‚îÄ‚îÄ liealgebras
|       |   |   ‚îî‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ logic.rst
|       |   ‚îú‚îÄ‚îÄ matrices
|       |   |   ‚îú‚îÄ‚îÄ common.rst
|       |   |   ‚îú‚îÄ‚îÄ dense.rst
|       |   |   ‚îú‚îÄ‚îÄ expressions.rst
|       |   |   ‚îú‚îÄ‚îÄ immutablematrices.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ matrices.rst
|       |   |   ‚îî‚îÄ‚îÄ sparse.rst
|       |   ‚îú‚îÄ‚îÄ ntheory.rst
|       |   ‚îú‚îÄ‚îÄ numeric-computation.rst
|       |   ‚îú‚îÄ‚îÄ parsing.rst
|       |   ‚îú‚îÄ‚îÄ physics
|       |   |   ‚îú‚îÄ‚îÄ continuum_mechanics
|       |   |   ‚îú‚îÄ‚îÄ hep
|       |   |   ‚îú‚îÄ‚îÄ hydrogen.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ matrices.rst
|       |   |   ‚îú‚îÄ‚îÄ mechanics
|       |   |   ‚îú‚îÄ‚îÄ optics
|       |   |   ‚îú‚îÄ‚îÄ paulialgebra.rst
|       |   |   ‚îú‚îÄ‚îÄ qho_1d.rst
|       |   |   ‚îú‚îÄ‚îÄ quantum
|       |   |   ‚îú‚îÄ‚îÄ secondquant.rst
|       |   |   ‚îú‚îÄ‚îÄ sho.rst
|       |   |   ‚îú‚îÄ‚îÄ units
|       |   |   ‚îú‚îÄ‚îÄ vector
|       |   |   ‚îî‚îÄ‚îÄ wigner.rst
|       |   ‚îú‚îÄ‚îÄ plotting.rst
|       |   ‚îú‚îÄ‚îÄ polys
|       |   |   ‚îú‚îÄ‚îÄ agca.rst
|       |   |   ‚îú‚îÄ‚îÄ basics.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ internals.rst
|       |   |   ‚îú‚îÄ‚îÄ literature.rst
|       |   |   ‚îú‚îÄ‚îÄ reference.rst
|       |   |   ‚îú‚îÄ‚îÄ ringseries.rst
|       |   |   ‚îî‚îÄ‚îÄ wester.rst
|       |   ‚îú‚îÄ‚îÄ printing.rst
|       |   ‚îú‚îÄ‚îÄ rewriting.rst
|       |   ‚îú‚îÄ‚îÄ series
|       |   |   ‚îú‚îÄ‚îÄ formal.rst
|       |   |   ‚îú‚îÄ‚îÄ fourier.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ limitseq.rst
|       |   |   ‚îú‚îÄ‚îÄ sequences.rst
|       |   |   ‚îî‚îÄ‚îÄ series.rst
|       |   ‚îú‚îÄ‚îÄ sets.rst
|       |   ‚îú‚îÄ‚îÄ simplify
|       |   |   ‚îú‚îÄ‚îÄ hyperexpand.rst
|       |   |   ‚îî‚îÄ‚îÄ simplify.rst
|       |   ‚îú‚îÄ‚îÄ solvers
|       |   |   ‚îú‚îÄ‚îÄ diophantine.rst
|       |   |   ‚îú‚îÄ‚îÄ inequalities.rst
|       |   |   ‚îú‚îÄ‚îÄ ode.rst
|       |   |   ‚îú‚îÄ‚îÄ pde.rst
|       |   |   ‚îú‚îÄ‚îÄ solvers.rst
|       |   |   ‚îî‚îÄ‚îÄ solveset.rst
|       |   ‚îú‚îÄ‚îÄ stats.rst
|       |   ‚îú‚îÄ‚îÄ tensor
|       |   |   ‚îú‚îÄ‚îÄ array.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ index_methods.rst
|       |   |   ‚îú‚îÄ‚îÄ indexed.rst
|       |   |   ‚îú‚îÄ‚îÄ tensor.rst
|       |   |   ‚îî‚îÄ‚îÄ toperators.rst
|       |   ‚îú‚îÄ‚îÄ utilities
|       |   |   ‚îú‚îÄ‚îÄ autowrap.rst
|       |   |   ‚îú‚îÄ‚îÄ codegen.rst
|       |   |   ‚îú‚îÄ‚îÄ decorator.rst
|       |   |   ‚îú‚îÄ‚îÄ enumerative.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ iterables.rst
|       |   |   ‚îú‚îÄ‚îÄ lambdify.rst
|       |   |   ‚îú‚îÄ‚îÄ memoization.rst
|       |   |   ‚îú‚îÄ‚îÄ misc.rst
|       |   |   ‚îú‚îÄ‚îÄ pkgdata.rst
|       |   |   ‚îú‚îÄ‚îÄ pytest.rst
|       |   |   ‚îú‚îÄ‚îÄ randtest.rst
|       |   |   ‚îú‚îÄ‚îÄ runtests.rst
|       |   |   ‚îú‚îÄ‚îÄ source.rst
|       |   |   ‚îî‚îÄ‚îÄ timeutils.rst
|       |   ‚îî‚îÄ‚îÄ vector
|       |       ‚îú‚îÄ‚îÄ api
|       |       ‚îú‚îÄ‚îÄ basics.rst
|       |       ‚îú‚îÄ‚îÄ coordsys.rst
|       |       ‚îú‚îÄ‚îÄ examples.rst
|       |       ‚îú‚îÄ‚îÄ fields.rst
|       |       ‚îú‚îÄ‚îÄ index.rst
|       |       ‚îî‚îÄ‚îÄ intro.rst
|       ‚îú‚îÄ‚îÄ outreach.rst
|       ‚îú‚îÄ‚îÄ pics
|       ‚îú‚îÄ‚îÄ special_topics
|       |   ‚îú‚îÄ‚îÄ finite_diff_derivatives.rst
|       |   ‚îú‚îÄ‚îÄ index.rst
|       |   ‚îî‚îÄ‚îÄ intro.rst
|       ‚îú‚îÄ‚îÄ tutorial
|       |   ‚îú‚îÄ‚îÄ basic_operations.rst
|       |   ‚îú‚îÄ‚îÄ calculus.rst
|       |   ‚îú‚îÄ‚îÄ gotchas.rst
|       |   ‚îú‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ intro.rst
|       |   ‚îú‚îÄ‚îÄ manipulation.rst
|       |   ‚îú‚îÄ‚îÄ matrices.rst
|       |   ‚îú‚îÄ‚îÄ preliminaries.rst
|       |   ‚îú‚îÄ‚îÄ printing.rst
|       |   ‚îú‚îÄ‚îÄ simplification.rst
|       |   ‚îî‚îÄ‚îÄ solvers.rst
|       ‚îî‚îÄ‚îÄ wiki.rst
‚îú‚îÄ‚îÄ examples
|   ‚îú‚îÄ‚îÄ advanced
|   |   ‚îú‚îÄ‚îÄ autowrap_integrators.py
|   |   ‚îú‚îÄ‚îÄ autowrap_ufuncify.py
|   |   ‚îú‚îÄ‚îÄ curvilinear_coordinates.py
|   |   ‚îú‚îÄ‚îÄ dense_coding_example.py
|   |   ‚îú‚îÄ‚îÄ fem.py
|   |   ‚îú‚îÄ‚îÄ gibbs_phenomenon.py
|   |   ‚îú‚îÄ‚îÄ grover_example.py
|   |   ‚îú‚îÄ‚îÄ hydrogen.py
|   |   ‚îú‚îÄ‚îÄ pidigits.py
|   |   ‚îú‚îÄ‚îÄ pyglet_plotting.py
|   |   ‚îú‚îÄ‚îÄ qft.py
|   |   ‚îî‚îÄ‚îÄ relativity.py
|   ‚îú‚îÄ‚îÄ all.py
|   ‚îú‚îÄ‚îÄ beginner
|   |   ‚îú‚îÄ‚îÄ basic.py
|   |   ‚îú‚îÄ‚îÄ differentiation.py
|   |   ‚îú‚îÄ‚îÄ expansion.py
|   |   ‚îú‚îÄ‚îÄ functions.py
|   |   ‚îú‚îÄ‚îÄ limits_examples.py
|   |   ‚îú‚îÄ‚îÄ plot_examples.py
|   |   ‚îú‚îÄ‚îÄ plotting_nice_plot.py
|   |   ‚îú‚îÄ‚îÄ precision.py
|   |   ‚îú‚îÄ‚îÄ print_pretty.py
|   |   ‚îú‚îÄ‚îÄ series.py
|   |   ‚îî‚îÄ‚îÄ substitution.py
|   ‚îú‚îÄ‚îÄ intermediate
|   |   ‚îú‚îÄ‚îÄ coupled_cluster.py
|   |   ‚îú‚îÄ‚îÄ differential_equations.py
|   |   ‚îú‚îÄ‚îÄ infinite_1d_box.py
|   |   ‚îú‚îÄ‚îÄ mplot2d.py
|   |   ‚îú‚îÄ‚îÄ mplot3d.py
|   |   ‚îú‚îÄ‚îÄ partial_differential_eqs.py
|   |   ‚îú‚îÄ‚îÄ print_gtk.py
|   |   ‚îú‚îÄ‚îÄ sample.py
|   |   ‚îú‚îÄ‚îÄ trees.py
|   |   ‚îî‚îÄ‚îÄ vandermonde.py
|   ‚îî‚îÄ‚îÄ notebooks
|       ‚îî‚îÄ‚îÄ README.txt
‚îú‚îÄ‚îÄ isympy.py
‚îú‚îÄ‚îÄ release
|   ‚îú‚îÄ‚îÄ README.md
|   ‚îú‚îÄ‚îÄ fabfile.py
|   ‚îú‚îÄ‚îÄ pull_and_run_rever.sh
|   ‚îî‚îÄ‚îÄ release.sh
‚îú‚îÄ‚îÄ setup.py
‚îú‚îÄ‚îÄ setupegg.py
‚îî‚îÄ‚îÄ sympy
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ abc.py
    ‚îú‚îÄ‚îÄ algebras
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ quaternion.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_quaternion.py
    ‚îú‚îÄ‚îÄ assumptions
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ask.py
    |   ‚îú‚îÄ‚îÄ ask_generated.py
    |   ‚îú‚îÄ‚îÄ assume.py
    |   ‚îú‚îÄ‚îÄ cnf.py
    |   ‚îú‚îÄ‚îÄ handlers
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ calculus.py
    |   |   ‚îú‚îÄ‚îÄ common.py
    |   |   ‚îú‚îÄ‚îÄ matrices.py
    |   |   ‚îú‚îÄ‚îÄ ntheory.py
    |   |   ‚îú‚îÄ‚îÄ order.py
    |   |   ‚îî‚îÄ‚îÄ sets.py
    |   ‚îú‚îÄ‚îÄ refine.py
    |   ‚îú‚îÄ‚îÄ satask.py
    |   ‚îú‚îÄ‚îÄ sathandlers.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_assumptions_2.py
    |       ‚îú‚îÄ‚îÄ test_context.py
    |       ‚îú‚îÄ‚îÄ test_matrices.py
    |       ‚îú‚îÄ‚îÄ test_query.py
    |       ‚îú‚îÄ‚îÄ test_refine.py
    |       ‚îú‚îÄ‚îÄ test_satask.py
    |       ‚îî‚îÄ‚îÄ test_sathandlers.py
    ‚îú‚îÄ‚îÄ benchmarks
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ bench_discrete_log.py
    |   ‚îú‚îÄ‚îÄ bench_meijerint.py
    |   ‚îî‚îÄ‚îÄ bench_symbench.py
    ‚îú‚îÄ‚îÄ calculus
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ euler.py
    |   ‚îú‚îÄ‚îÄ finite_diff.py
    |   ‚îú‚îÄ‚îÄ singularities.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_euler.py
    |   |   ‚îú‚îÄ‚îÄ test_finite_diff.py
    |   |   ‚îú‚îÄ‚îÄ test_singularities.py
    |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ categories
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ baseclasses.py
    |   ‚îú‚îÄ‚îÄ diagram_drawing.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_baseclasses.py
    |       ‚îî‚îÄ‚îÄ test_drawing.py
    ‚îú‚îÄ‚îÄ codegen
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ algorithms.py
    |   ‚îú‚îÄ‚îÄ approximations.py
    |   ‚îú‚îÄ‚îÄ array_utils.py
    |   ‚îú‚îÄ‚îÄ ast.py
    |   ‚îú‚îÄ‚îÄ cfunctions.py
    |   ‚îú‚îÄ‚îÄ cnodes.py
    |   ‚îú‚îÄ‚îÄ cutils.py
    |   ‚îú‚îÄ‚îÄ cxxnodes.py
    |   ‚îú‚îÄ‚îÄ fnodes.py
    |   ‚îú‚îÄ‚îÄ futils.py
    |   ‚îú‚îÄ‚îÄ matrix_nodes.py
    |   ‚îú‚îÄ‚îÄ pyutils.py
    |   ‚îú‚îÄ‚îÄ rewriting.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_algorithms.py
    |       ‚îú‚îÄ‚îÄ test_applications.py
    |       ‚îú‚îÄ‚îÄ test_approximations.py
    |       ‚îú‚îÄ‚îÄ test_array_utils.py
    |       ‚îú‚îÄ‚îÄ test_ast.py
    |       ‚îú‚îÄ‚îÄ test_cfunctions.py
    |       ‚îú‚îÄ‚îÄ test_cnodes.py
    |       ‚îú‚îÄ‚îÄ test_cxxnodes.py
    |       ‚îú‚îÄ‚îÄ test_fnodes.py
    |       ‚îú‚îÄ‚îÄ test_pyutils.py
    |       ‚îî‚îÄ‚îÄ test_rewriting.py
    ‚îú‚îÄ‚îÄ combinatorics
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ coset_table.py
    |   ‚îú‚îÄ‚îÄ fp_groups.py
    |   ‚îú‚îÄ‚îÄ free_groups.py
    |   ‚îú‚îÄ‚îÄ generators.py
    |   ‚îú‚îÄ‚îÄ graycode.py
    |   ‚îú‚îÄ‚îÄ group_constructs.py
    |   ‚îú‚îÄ‚îÄ homomorphisms.py
    |   ‚îú‚îÄ‚îÄ named_groups.py
    |   ‚îú‚îÄ‚îÄ partitions.py
    |   ‚îú‚îÄ‚îÄ pc_groups.py
    |   ‚îú‚îÄ‚îÄ perm_groups.py
    |   ‚îú‚îÄ‚îÄ permutations.py
    |   ‚îú‚îÄ‚îÄ polyhedron.py
    |   ‚îú‚îÄ‚îÄ prufer.py
    |   ‚îú‚îÄ‚îÄ rewritingsystem.py
    |   ‚îú‚îÄ‚îÄ rewritingsystem_fsm.py
    |   ‚îú‚îÄ‚îÄ subsets.py
    |   ‚îú‚îÄ‚îÄ tensor_can.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_coset_table.py
    |   |   ‚îú‚îÄ‚îÄ test_fp_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_free_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_generators.py
    |   |   ‚îú‚îÄ‚îÄ test_graycode.py
    |   |   ‚îú‚îÄ‚îÄ test_group_constructs.py
    |   |   ‚îú‚îÄ‚îÄ test_homomorphisms.py
    |   |   ‚îú‚îÄ‚îÄ test_named_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_partitions.py
    |   |   ‚îú‚îÄ‚îÄ test_pc_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_perm_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_permutations.py
    |   |   ‚îú‚îÄ‚îÄ test_polyhedron.py
    |   |   ‚îú‚îÄ‚îÄ test_prufer.py
    |   |   ‚îú‚îÄ‚îÄ test_rewriting.py
    |   |   ‚îú‚îÄ‚îÄ test_subsets.py
    |   |   ‚îú‚îÄ‚îÄ test_tensor_can.py
    |   |   ‚îú‚îÄ‚îÄ test_testutil.py
    |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   ‚îú‚îÄ‚îÄ testutil.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ concrete
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ delta.py
    |   ‚îú‚îÄ‚îÄ expr_with_intlimits.py
    |   ‚îú‚îÄ‚îÄ expr_with_limits.py
    |   ‚îú‚îÄ‚îÄ gosper.py
    |   ‚îú‚îÄ‚îÄ guess.py
    |   ‚îú‚îÄ‚îÄ products.py
    |   ‚îú‚îÄ‚îÄ summations.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_delta.py
    |       ‚îú‚îÄ‚îÄ test_gosper.py
    |       ‚îú‚îÄ‚îÄ test_guess.py
    |       ‚îú‚îÄ‚îÄ test_products.py
    |       ‚îî‚îÄ‚îÄ test_sums_products.py
    ‚îú‚îÄ‚îÄ conftest.py
    ‚îú‚îÄ‚îÄ core
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ add.py
    |   ‚îú‚îÄ‚îÄ alphabets.py
    |   ‚îú‚îÄ‚îÄ assumptions.py
    |   ‚îú‚îÄ‚îÄ backend.py
    |   ‚îú‚îÄ‚îÄ basic.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_arit.py
    |   |   ‚îú‚îÄ‚îÄ bench_assumptions.py
    |   |   ‚îú‚îÄ‚îÄ bench_basic.py
    |   |   ‚îú‚îÄ‚îÄ bench_expand.py
    |   |   ‚îú‚îÄ‚îÄ bench_numbers.py
    |   |   ‚îî‚îÄ‚îÄ bench_sympify.py
    |   ‚îú‚îÄ‚îÄ cache.py
    |   ‚îú‚îÄ‚îÄ compatibility.py
    |   ‚îú‚îÄ‚îÄ containers.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ coreerrors.py
    |   ‚îú‚îÄ‚îÄ decorators.py
    |   ‚îú‚îÄ‚îÄ evalf.py
    |   ‚îú‚îÄ‚îÄ expr.py
    |   ‚îú‚îÄ‚îÄ exprtools.py
    |   ‚îú‚îÄ‚îÄ facts.py
    |   ‚îú‚îÄ‚îÄ function.py
    |   ‚îú‚îÄ‚îÄ logic.py
    |   ‚îú‚îÄ‚îÄ mod.py
    |   ‚îú‚îÄ‚îÄ mul.py
    |   ‚îú‚îÄ‚îÄ multidimensional.py
    |   ‚îú‚îÄ‚îÄ numbers.py
    |   ‚îú‚îÄ‚îÄ operations.py
    |   ‚îú‚îÄ‚îÄ parameters.py
    |   ‚îú‚îÄ‚îÄ power.py
    |   ‚îú‚îÄ‚îÄ relational.py
    |   ‚îú‚îÄ‚îÄ rules.py
    |   ‚îú‚îÄ‚îÄ singleton.py
    |   ‚îú‚îÄ‚îÄ symbol.py
    |   ‚îú‚îÄ‚îÄ sympify.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_args.py
    |   |   ‚îú‚îÄ‚îÄ test_arit.py
    |   |   ‚îú‚îÄ‚îÄ test_assumptions.py
    |   |   ‚îú‚îÄ‚îÄ test_basic.py
    |   |   ‚îú‚îÄ‚îÄ test_cache.py
    |   |   ‚îú‚îÄ‚îÄ test_compatibility.py
    |   |   ‚îú‚îÄ‚îÄ test_complex.py
    |   |   ‚îú‚îÄ‚îÄ test_constructor_postprocessor.py
    |   |   ‚îú‚îÄ‚îÄ test_containers.py
    |   |   ‚îú‚îÄ‚îÄ test_count_ops.py
    |   |   ‚îú‚îÄ‚îÄ test_diff.py
    |   |   ‚îú‚îÄ‚îÄ test_equal.py
    |   |   ‚îú‚îÄ‚îÄ test_eval.py
    |   |   ‚îú‚îÄ‚îÄ test_evalf.py
    |   |   ‚îú‚îÄ‚îÄ test_expand.py
    |   |   ‚îú‚îÄ‚îÄ test_expr.py
    |   |   ‚îú‚îÄ‚îÄ test_exprtools.py
    |   |   ‚îú‚îÄ‚îÄ test_facts.py
    |   |   ‚îú‚îÄ‚îÄ test_function.py
    |   |   ‚îú‚îÄ‚îÄ test_logic.py
    |   |   ‚îú‚îÄ‚îÄ test_match.py
    |   |   ‚îú‚îÄ‚îÄ test_multidimensional.py
    |   |   ‚îú‚îÄ‚îÄ test_noncommutative.py
    |   |   ‚îú‚îÄ‚îÄ test_numbers.py
    |   |   ‚îú‚îÄ‚îÄ test_operations.py
    |   |   ‚îú‚îÄ‚îÄ test_parameters.py
    |   |   ‚îú‚îÄ‚îÄ test_power.py
    |   |   ‚îú‚îÄ‚îÄ test_priority.py
    |   |   ‚îú‚îÄ‚îÄ test_relational.py
    |   |   ‚îú‚îÄ‚îÄ test_rules.py
    |   |   ‚îú‚îÄ‚îÄ test_singleton.py
    |   |   ‚îú‚îÄ‚îÄ test_subs.py
    |   |   ‚îú‚îÄ‚îÄ test_symbol.py
    |   |   ‚îú‚îÄ‚îÄ test_sympify.py
    |   |   ‚îú‚îÄ‚îÄ test_trace.py
    |   |   ‚îú‚îÄ‚îÄ test_truediv.py
    |   |   ‚îî‚îÄ‚îÄ test_var.py
    |   ‚îî‚îÄ‚îÄ trace.py
    ‚îú‚îÄ‚îÄ crypto
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ crypto.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_crypto.py
    ‚îú‚îÄ‚îÄ deprecated
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ class_registry.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_class_registry.py
    ‚îú‚îÄ‚îÄ diffgeom
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ diffgeom.py
    |   ‚îú‚îÄ‚îÄ rn.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_class_structure.py
    |       ‚îú‚îÄ‚îÄ test_diffgeom.py
    |       ‚îú‚îÄ‚îÄ test_function_diffgeom_book.py
    |       ‚îî‚îÄ‚îÄ test_hyperbolic_space.py
    ‚îú‚îÄ‚îÄ discrete
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ convolutions.py
    |   ‚îú‚îÄ‚îÄ recurrences.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_convolutions.py
    |   |   ‚îú‚îÄ‚îÄ test_recurrences.py
    |   |   ‚îî‚îÄ‚îÄ test_transforms.py
    |   ‚îî‚îÄ‚îÄ transforms.py
    ‚îú‚îÄ‚îÄ external
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ importtools.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_autowrap.py
    |       ‚îú‚îÄ‚îÄ test_codegen.py
    |       ‚îú‚îÄ‚îÄ test_importtools.py
    |       ‚îú‚îÄ‚îÄ test_numpy.py
    |       ‚îú‚îÄ‚îÄ test_sage.py
    |       ‚îî‚îÄ‚îÄ test_scipy.py
    ‚îú‚îÄ‚îÄ functions
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ combinatorial
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ factorials.py
    |   |   ‚îú‚îÄ‚îÄ numbers.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_comb_factorials.py
    |   |       ‚îî‚îÄ‚îÄ test_comb_numbers.py
    |   ‚îú‚îÄ‚îÄ elementary
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ bench_exp.py
    |   |   ‚îú‚îÄ‚îÄ complexes.py
    |   |   ‚îú‚îÄ‚îÄ exponential.py
    |   |   ‚îú‚îÄ‚îÄ hyperbolic.py
    |   |   ‚îú‚îÄ‚îÄ integers.py
    |   |   ‚îú‚îÄ‚îÄ miscellaneous.py
    |   |   ‚îú‚îÄ‚îÄ piecewise.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_complexes.py
    |   |   |   ‚îú‚îÄ‚îÄ test_exponential.py
    |   |   |   ‚îú‚îÄ‚îÄ test_hyperbolic.py
    |   |   |   ‚îú‚îÄ‚îÄ test_integers.py
    |   |   |   ‚îú‚îÄ‚îÄ test_interface.py
    |   |   |   ‚îú‚îÄ‚îÄ test_miscellaneous.py
    |   |   |   ‚îú‚îÄ‚îÄ test_piecewise.py
    |   |   |   ‚îî‚îÄ‚îÄ test_trigonometric.py
    |   |   ‚îî‚îÄ‚îÄ trigonometric.py
    |   ‚îî‚îÄ‚îÄ special
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ benchmarks
    |       |   ‚îú‚îÄ‚îÄ __init__.py
    |       |   ‚îî‚îÄ‚îÄ bench_special.py
    |       ‚îú‚îÄ‚îÄ bessel.py
    |       ‚îú‚îÄ‚îÄ beta_functions.py
    |       ‚îú‚îÄ‚îÄ bsplines.py
    |       ‚îú‚îÄ‚îÄ delta_functions.py
    |       ‚îú‚îÄ‚îÄ elliptic_integrals.py
    |       ‚îú‚îÄ‚îÄ error_functions.py
    |       ‚îú‚îÄ‚îÄ gamma_functions.py
    |       ‚îú‚îÄ‚îÄ hyper.py
    |       ‚îú‚îÄ‚îÄ mathieu_functions.py
    |       ‚îú‚îÄ‚îÄ polynomials.py
    |       ‚îú‚îÄ‚îÄ singularity_functions.py
    |       ‚îú‚îÄ‚îÄ spherical_harmonics.py
    |       ‚îú‚îÄ‚îÄ tensor_functions.py
    |       ‚îú‚îÄ‚îÄ tests
    |       |   ‚îú‚îÄ‚îÄ __init__.py
    |       |   ‚îú‚îÄ‚îÄ test_bessel.py
    |       |   ‚îú‚îÄ‚îÄ test_beta_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_bsplines.py
    |       |   ‚îú‚îÄ‚îÄ test_delta_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_elliptic_integrals.py
    |       |   ‚îú‚îÄ‚îÄ test_error_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_gamma_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_hyper.py
    |       |   ‚îú‚îÄ‚îÄ test_mathieu.py
    |       |   ‚îú‚îÄ‚îÄ test_singularity_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_spec_polynomials.py
    |       |   ‚îú‚îÄ‚îÄ test_spherical_harmonics.py
    |       |   ‚îú‚îÄ‚îÄ test_tensor_functions.py
    |       |   ‚îî‚îÄ‚îÄ test_zeta_functions.py
    |       ‚îî‚îÄ‚îÄ zeta_functions.py
    ‚îú‚îÄ‚îÄ galgebra.py
    ‚îú‚îÄ‚îÄ geometry
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ curve.py
    |   ‚îú‚îÄ‚îÄ ellipse.py
    |   ‚îú‚îÄ‚îÄ entity.py
    |   ‚îú‚îÄ‚îÄ exceptions.py
    |   ‚îú‚îÄ‚îÄ line.py
    |   ‚îú‚îÄ‚îÄ parabola.py
    |   ‚îú‚îÄ‚îÄ plane.py
    |   ‚îú‚îÄ‚îÄ point.py
    |   ‚îú‚îÄ‚îÄ polygon.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_curve.py
    |   |   ‚îú‚îÄ‚îÄ test_ellipse.py
    |   |   ‚îú‚îÄ‚îÄ test_entity.py
    |   |   ‚îú‚îÄ‚îÄ test_geometrysets.py
    |   |   ‚îú‚îÄ‚îÄ test_line.py
    |   |   ‚îú‚îÄ‚îÄ test_parabola.py
    |   |   ‚îú‚îÄ‚îÄ test_plane.py
    |   |   ‚îú‚îÄ‚îÄ test_point.py
    |   |   ‚îú‚îÄ‚îÄ test_polygon.py
    |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ holonomic
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ holonomic.py
    |   ‚îú‚îÄ‚îÄ holonomicerrors.py
    |   ‚îú‚îÄ‚îÄ linearsolver.py
    |   ‚îú‚îÄ‚îÄ numerical.py
    |   ‚îú‚îÄ‚îÄ recurrence.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_holonomic.py
    |       ‚îî‚îÄ‚îÄ test_recurrence.py
    ‚îú‚îÄ‚îÄ integrals
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_integrate.py
    |   |   ‚îî‚îÄ‚îÄ bench_trigintegrate.py
    |   ‚îú‚îÄ‚îÄ deltafunctions.py
    |   ‚îú‚îÄ‚îÄ heurisch.py
    |   ‚îú‚îÄ‚îÄ integrals.py
    |   ‚îú‚îÄ‚îÄ intpoly.py
    |   ‚îú‚îÄ‚îÄ manualintegrate.py
    |   ‚îú‚îÄ‚îÄ meijerint.py
    |   ‚îú‚îÄ‚îÄ meijerint_doc.py
    |   ‚îú‚îÄ‚îÄ prde.py
    |   ‚îú‚îÄ‚îÄ quadrature.py
    |   ‚îú‚îÄ‚îÄ rationaltools.py
    |   ‚îú‚îÄ‚îÄ rde.py
    |   ‚îú‚îÄ‚îÄ risch.py
    |   ‚îú‚îÄ‚îÄ rubi
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ constraints.py
    |   |   ‚îú‚îÄ‚îÄ parsetools
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ generate_rules.py
    |   |   |   ‚îú‚îÄ‚îÄ generate_tests.py
    |   |   |   ‚îú‚îÄ‚îÄ header.py.txt
    |   |   |   ‚îú‚îÄ‚îÄ parse.py
    |   |   |   ‚îî‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ rubi_tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ rubimain.py
    |   |   ‚îú‚îÄ‚îÄ rules
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ binomial_products.py
    |   |   |   ‚îú‚îÄ‚îÄ exponential.py
    |   |   |   ‚îú‚îÄ‚îÄ hyperbolic.py
    |   |   |   ‚îú‚îÄ‚îÄ integrand_simplification.py
    |   |   |   ‚îú‚îÄ‚îÄ inverse_hyperbolic.py
    |   |   |   ‚îú‚îÄ‚îÄ inverse_trig.py
    |   |   |   ‚îú‚îÄ‚îÄ linear_products.py
    |   |   |   ‚îú‚îÄ‚îÄ logarithms.py
    |   |   |   ‚îú‚îÄ‚îÄ miscellaneous_algebraic.py
    |   |   |   ‚îú‚îÄ‚îÄ miscellaneous_integration.py
    |   |   |   ‚îú‚îÄ‚îÄ miscellaneous_trig.py
    |   |   |   ‚îú‚îÄ‚îÄ piecewise_linear.py
    |   |   |   ‚îú‚îÄ‚îÄ quadratic_products.py
    |   |   |   ‚îú‚îÄ‚îÄ secant.py
    |   |   |   ‚îú‚îÄ‚îÄ sine.py
    |   |   |   ‚îú‚îÄ‚îÄ special_functions.py
    |   |   |   ‚îú‚îÄ‚îÄ tangent.py
    |   |   |   ‚îî‚îÄ‚îÄ trinomial_products.py
    |   |   ‚îú‚îÄ‚îÄ symbol.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_rubi_integrate.py
    |   |   |   ‚îî‚îÄ‚îÄ test_utility_function.py
    |   |   ‚îî‚îÄ‚îÄ utility_function.py
    |   ‚îú‚îÄ‚îÄ singularityfunctions.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_deltafunctions.py
    |   |   ‚îú‚îÄ‚îÄ test_failing_integrals.py
    |   |   ‚îú‚îÄ‚îÄ test_heurisch.py
    |   |   ‚îú‚îÄ‚îÄ test_integrals.py
    |   |   ‚îú‚îÄ‚îÄ test_intpoly.py
    |   |   ‚îú‚îÄ‚îÄ test_lineintegrals.py
    |   |   ‚îú‚îÄ‚îÄ test_manual.py
    |   |   ‚îú‚îÄ‚îÄ test_meijerint.py
    |   |   ‚îú‚îÄ‚îÄ test_prde.py
    |   |   ‚îú‚îÄ‚îÄ test_quadrature.py
    |   |   ‚îú‚îÄ‚îÄ test_rationaltools.py
    |   |   ‚îú‚îÄ‚îÄ test_rde.py
    |   |   ‚îú‚îÄ‚îÄ test_risch.py
    |   |   ‚îú‚îÄ‚îÄ test_singularityfunctions.py
    |   |   ‚îú‚îÄ‚îÄ test_transforms.py
    |   |   ‚îî‚îÄ‚îÄ test_trigonometry.py
    |   ‚îú‚îÄ‚îÄ transforms.py
    |   ‚îî‚îÄ‚îÄ trigonometry.py
    ‚îú‚îÄ‚îÄ interactive
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ipythonprinting.py
    |   ‚îú‚îÄ‚îÄ printing.py
    |   ‚îú‚îÄ‚îÄ session.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_interactive.py
    |       ‚îú‚îÄ‚îÄ test_ipython.py
    |       ‚îî‚îÄ‚îÄ test_ipythonprinting.py
    ‚îú‚îÄ‚îÄ liealgebras
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ cartan_matrix.py
    |   ‚îú‚îÄ‚îÄ cartan_type.py
    |   ‚îú‚îÄ‚îÄ dynkin_diagram.py
    |   ‚îú‚îÄ‚îÄ root_system.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_cartan_matrix.py
    |   |   ‚îú‚îÄ‚îÄ test_cartan_type.py
    |   |   ‚îú‚îÄ‚îÄ test_dynkin_diagram.py
    |   |   ‚îú‚îÄ‚îÄ test_root_system.py
    |   |   ‚îú‚îÄ‚îÄ test_type_A.py
    |   |   ‚îú‚îÄ‚îÄ test_type_B.py
    |   |   ‚îú‚îÄ‚îÄ test_type_C.py
    |   |   ‚îú‚îÄ‚îÄ test_type_D.py
    |   |   ‚îú‚îÄ‚îÄ test_type_E.py
    |   |   ‚îú‚îÄ‚îÄ test_type_F.py
    |   |   ‚îú‚îÄ‚îÄ test_type_G.py
    |   |   ‚îî‚îÄ‚îÄ test_weyl_group.py
    |   ‚îú‚îÄ‚îÄ type_a.py
    |   ‚îú‚îÄ‚îÄ type_b.py
    |   ‚îú‚îÄ‚îÄ type_c.py
    |   ‚îú‚îÄ‚îÄ type_d.py
    |   ‚îú‚îÄ‚îÄ type_e.py
    |   ‚îú‚îÄ‚îÄ type_f.py
    |   ‚îú‚îÄ‚îÄ type_g.py
    |   ‚îî‚îÄ‚îÄ weyl_group.py
    ‚îú‚îÄ‚îÄ logic
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ algorithms
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ dpll.py
    |   |   ‚îú‚îÄ‚îÄ dpll2.py
    |   |   ‚îî‚îÄ‚îÄ pycosat_wrapper.py
    |   ‚îú‚îÄ‚îÄ boolalg.py
    |   ‚îú‚îÄ‚îÄ inference.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_boolalg.py
    |   |   ‚îú‚îÄ‚îÄ test_dimacs.py
    |   |   ‚îî‚îÄ‚îÄ test_inference.py
    |   ‚îî‚îÄ‚îÄ utilities
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ dimacs.py
    ‚îú‚îÄ‚îÄ matrices
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ bench_matrix.py
    |   ‚îú‚îÄ‚îÄ common.py
    |   ‚îú‚îÄ‚îÄ dense.py
    |   ‚îú‚îÄ‚îÄ densearith.py
    |   ‚îú‚îÄ‚îÄ densesolve.py
    |   ‚îú‚îÄ‚îÄ densetools.py
    |   ‚îú‚îÄ‚îÄ expressions
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ adjoint.py
    |   |   ‚îú‚îÄ‚îÄ applyfunc.py
    |   |   ‚îú‚îÄ‚îÄ blockmatrix.py
    |   |   ‚îú‚îÄ‚îÄ determinant.py
    |   |   ‚îú‚îÄ‚îÄ diagonal.py
    |   |   ‚îú‚îÄ‚îÄ dotproduct.py
    |   |   ‚îú‚îÄ‚îÄ factorizations.py
    |   |   ‚îú‚îÄ‚îÄ fourier.py
    |   |   ‚îú‚îÄ‚îÄ funcmatrix.py
    |   |   ‚îú‚îÄ‚îÄ hadamard.py
    |   |   ‚îú‚îÄ‚îÄ inverse.py
    |   |   ‚îú‚îÄ‚îÄ kronecker.py
    |   |   ‚îú‚îÄ‚îÄ matadd.py
    |   |   ‚îú‚îÄ‚îÄ matexpr.py
    |   |   ‚îú‚îÄ‚îÄ matmul.py
    |   |   ‚îú‚îÄ‚îÄ matpow.py
    |   |   ‚îú‚îÄ‚îÄ permutation.py
    |   |   ‚îú‚îÄ‚îÄ slice.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_adjoint.py
    |   |   |   ‚îú‚îÄ‚îÄ test_applyfunc.py
    |   |   |   ‚îú‚îÄ‚îÄ test_blockmatrix.py
    |   |   |   ‚îú‚îÄ‚îÄ test_derivatives.py
    |   |   |   ‚îú‚îÄ‚îÄ test_determinant.py
    |   |   |   ‚îú‚îÄ‚îÄ test_diagonal.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dotproduct.py
    |   |   |   ‚îú‚îÄ‚îÄ test_factorizations.py
    |   |   |   ‚îú‚îÄ‚îÄ test_fourier.py
    |   |   |   ‚îú‚îÄ‚îÄ test_funcmatrix.py
    |   |   |   ‚îú‚îÄ‚îÄ test_hadamard.py
    |   |   |   ‚îú‚îÄ‚îÄ test_indexing.py
    |   |   |   ‚îú‚îÄ‚îÄ test_inverse.py
    |   |   |   ‚îú‚îÄ‚îÄ test_kronecker.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matadd.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matexpr.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matmul.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matpow.py
    |   |   |   ‚îú‚îÄ‚îÄ test_permutation.py
    |   |   |   ‚îú‚îÄ‚îÄ test_slice.py
    |   |   |   ‚îú‚îÄ‚îÄ test_trace.py
    |   |   |   ‚îî‚îÄ‚îÄ test_transpose.py
    |   |   ‚îú‚îÄ‚îÄ trace.py
    |   |   ‚îî‚îÄ‚îÄ transpose.py
    |   ‚îú‚îÄ‚îÄ immutable.py
    |   ‚îú‚îÄ‚îÄ matrices.py
    |   ‚îú‚îÄ‚îÄ normalforms.py
    |   ‚îú‚îÄ‚îÄ sparse.py
    |   ‚îú‚îÄ‚îÄ sparsetools.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_commonmatrix.py
    |       ‚îú‚îÄ‚îÄ test_densearith.py
    |       ‚îú‚îÄ‚îÄ test_densesolve.py
    |       ‚îú‚îÄ‚îÄ test_densetools.py
    |       ‚îú‚îÄ‚îÄ test_immutable.py
    |       ‚îú‚îÄ‚îÄ test_interactions.py
    |       ‚îú‚îÄ‚îÄ test_matrices.py
    |       ‚îú‚îÄ‚îÄ test_normalforms.py
    |       ‚îú‚îÄ‚îÄ test_sparse.py
    |       ‚îî‚îÄ‚îÄ test_sparsetools.py
    ‚îú‚îÄ‚îÄ multipledispatch
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ conflict.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ dispatcher.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_conflict.py
    |   |   ‚îú‚îÄ‚îÄ test_core.py
    |   |   ‚îî‚îÄ‚îÄ test_dispatcher.py
    |   ‚îî‚îÄ‚îÄ utils.py
    ‚îú‚îÄ‚îÄ ntheory
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ bbp_pi.py
    |   ‚îú‚îÄ‚îÄ continued_fraction.py
    |   ‚îú‚îÄ‚îÄ egyptian_fraction.py
    |   ‚îú‚îÄ‚îÄ factor_.py
    |   ‚îú‚îÄ‚îÄ generate.py
    |   ‚îú‚îÄ‚îÄ modular.py
    |   ‚îú‚îÄ‚îÄ multinomial.py
    |   ‚îú‚îÄ‚îÄ partitions_.py
    |   ‚îú‚îÄ‚îÄ primetest.py
    |   ‚îú‚îÄ‚îÄ residue_ntheory.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_bbp_pi.py
    |       ‚îú‚îÄ‚îÄ test_continued_fraction.py
    |       ‚îú‚îÄ‚îÄ test_egyptian_fraction.py
    |       ‚îú‚îÄ‚îÄ test_factor_.py
    |       ‚îú‚îÄ‚îÄ test_generate.py
    |       ‚îú‚îÄ‚îÄ test_modular.py
    |       ‚îú‚îÄ‚îÄ test_multinomial.py
    |       ‚îú‚îÄ‚îÄ test_partitions.py
    |       ‚îú‚îÄ‚îÄ test_primetest.py
    |       ‚îî‚îÄ‚îÄ test_residue.py
    ‚îú‚îÄ‚îÄ parsing
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ast_parser.py
    |   ‚îú‚îÄ‚îÄ autolev
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ _antlr
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ autolevlexer.py
    |   |   |   ‚îú‚îÄ‚îÄ autolevlistener.py
    |   |   |   ‚îî‚îÄ‚îÄ autolevparser.py
    |   |   ‚îú‚îÄ‚îÄ _listener_autolev_antlr.py
    |   |   ‚îú‚îÄ‚îÄ _parse_autolev_antlr.py
    |   |   ‚îî‚îÄ‚îÄ test-examples
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ pydy-example-repo
    |   |       ‚îú‚îÄ‚îÄ ruletest1.py
    |   |       ‚îú‚îÄ‚îÄ ruletest10.py
    |   |       ‚îú‚îÄ‚îÄ ruletest11.py
    |   |       ‚îú‚îÄ‚îÄ ruletest12.py
    |   |       ‚îú‚îÄ‚îÄ ruletest2.py
    |   |       ‚îú‚îÄ‚îÄ ruletest3.py
    |   |       ‚îú‚îÄ‚îÄ ruletest4.py
    |   |       ‚îú‚îÄ‚îÄ ruletest5.py
    |   |       ‚îú‚îÄ‚îÄ ruletest6.py
    |   |       ‚îú‚îÄ‚îÄ ruletest7.py
    |   |       ‚îú‚îÄ‚îÄ ruletest8.py
    |   |       ‚îî‚îÄ‚îÄ ruletest9.py
    |   ‚îú‚îÄ‚îÄ c
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ c_parser.py
    |   ‚îú‚îÄ‚îÄ fortran
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ fortran_parser.py
    |   ‚îú‚îÄ‚îÄ latex
    |   |   ‚îú‚îÄ‚îÄ LICENSE.txt
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ _antlr
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ latexlexer.py
    |   |   |   ‚îî‚îÄ‚îÄ latexparser.py
    |   |   ‚îú‚îÄ‚îÄ _build_latex_antlr.py
    |   |   ‚îú‚îÄ‚îÄ _parse_latex_antlr.py
    |   |   ‚îî‚îÄ‚îÄ errors.py
    |   ‚îú‚îÄ‚îÄ mathematica.py
    |   ‚îú‚îÄ‚îÄ maxima.py
    |   ‚îú‚îÄ‚îÄ sym_expr.py
    |   ‚îú‚îÄ‚îÄ sympy_parser.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_ast_parser.py
    |       ‚îú‚îÄ‚îÄ test_autolev.py
    |       ‚îú‚îÄ‚îÄ test_c_parser.py
    |       ‚îú‚îÄ‚îÄ test_fortran_parser.py
    |       ‚îú‚îÄ‚îÄ test_implicit_multiplication_application.py
    |       ‚îú‚îÄ‚îÄ test_latex.py
    |       ‚îú‚îÄ‚îÄ test_latex_deps.py
    |       ‚îú‚îÄ‚îÄ test_mathematica.py
    |       ‚îú‚îÄ‚îÄ test_maxima.py
    |       ‚îú‚îÄ‚îÄ test_sym_expr.py
    |       ‚îî‚îÄ‚îÄ test_sympy_parser.py
    ‚îú‚îÄ‚îÄ physics
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ continuum_mechanics
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ beam.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îî‚îÄ‚îÄ test_beam.py
    |   ‚îú‚îÄ‚îÄ gaussopt.py
    |   ‚îú‚îÄ‚îÄ hep
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ gamma_matrices.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îî‚îÄ‚îÄ test_gamma_matrices.py
    |   ‚îú‚îÄ‚îÄ hydrogen.py
    |   ‚îú‚îÄ‚îÄ matrices.py
    |   ‚îú‚îÄ‚îÄ mechanics
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ body.py
    |   |   ‚îú‚îÄ‚îÄ functions.py
    |   |   ‚îú‚îÄ‚îÄ kane.py
    |   |   ‚îú‚îÄ‚îÄ lagrange.py
    |   |   ‚îú‚îÄ‚îÄ linearize.py
    |   |   ‚îú‚îÄ‚îÄ models.py
    |   |   ‚îú‚îÄ‚îÄ particle.py
    |   |   ‚îú‚îÄ‚îÄ rigidbody.py
    |   |   ‚îú‚îÄ‚îÄ system.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_body.py
    |   |       ‚îú‚îÄ‚îÄ test_functions.py
    |   |       ‚îú‚îÄ‚îÄ test_kane.py
    |   |       ‚îú‚îÄ‚îÄ test_kane2.py
    |   |       ‚îú‚îÄ‚îÄ test_kane3.py
    |   |       ‚îú‚îÄ‚îÄ test_kane4.py
    |   |       ‚îú‚îÄ‚îÄ test_lagrange.py
    |   |       ‚îú‚îÄ‚îÄ test_lagrange2.py
    |   |       ‚îú‚îÄ‚îÄ test_linearize.py
    |   |       ‚îú‚îÄ‚îÄ test_models.py
    |   |       ‚îú‚îÄ‚îÄ test_particle.py
    |   |       ‚îú‚îÄ‚îÄ test_rigidbody.py
    |   |       ‚îî‚îÄ‚îÄ test_system.py
    |   ‚îú‚îÄ‚îÄ optics
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ gaussopt.py
    |   |   ‚îú‚îÄ‚îÄ medium.py
    |   |   ‚îú‚îÄ‚îÄ polarization.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_gaussopt.py
    |   |   |   ‚îú‚îÄ‚îÄ test_medium.py
    |   |   |   ‚îú‚îÄ‚îÄ test_polarization.py
    |   |   |   ‚îú‚îÄ‚îÄ test_utils.py
    |   |   |   ‚îî‚îÄ‚îÄ test_waves.py
    |   |   ‚îú‚îÄ‚îÄ utils.py
    |   |   ‚îî‚îÄ‚îÄ waves.py
    |   ‚îú‚îÄ‚îÄ paulialgebra.py
    |   ‚îú‚îÄ‚îÄ pring.py
    |   ‚îú‚îÄ‚îÄ qho_1d.py
    |   ‚îú‚îÄ‚îÄ quantum
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ anticommutator.py
    |   |   ‚îú‚îÄ‚îÄ boson.py
    |   |   ‚îú‚îÄ‚îÄ cartesian.py
    |   |   ‚îú‚îÄ‚îÄ cg.py
    |   |   ‚îú‚îÄ‚îÄ circuitplot.py
    |   |   ‚îú‚îÄ‚îÄ circuitutils.py
    |   |   ‚îú‚îÄ‚îÄ commutator.py
    |   |   ‚îú‚îÄ‚îÄ constants.py
    |   |   ‚îú‚îÄ‚îÄ dagger.py
    |   |   ‚îú‚îÄ‚îÄ density.py
    |   |   ‚îú‚îÄ‚îÄ fermion.py
    |   |   ‚îú‚îÄ‚îÄ gate.py
    |   |   ‚îú‚îÄ‚îÄ grover.py
    |   |   ‚îú‚îÄ‚îÄ hilbert.py
    |   |   ‚îú‚îÄ‚îÄ identitysearch.py
    |   |   ‚îú‚îÄ‚îÄ innerproduct.py
    |   |   ‚îú‚îÄ‚îÄ matrixcache.py
    |   |   ‚îú‚îÄ‚îÄ matrixutils.py
    |   |   ‚îú‚îÄ‚îÄ operator.py
    |   |   ‚îú‚îÄ‚îÄ operatorordering.py
    |   |   ‚îú‚îÄ‚îÄ operatorset.py
    |   |   ‚îú‚îÄ‚îÄ pauli.py
    |   |   ‚îú‚îÄ‚îÄ piab.py
    |   |   ‚îú‚îÄ‚îÄ qapply.py
    |   |   ‚îú‚îÄ‚îÄ qasm.py
    |   |   ‚îú‚îÄ‚îÄ qexpr.py
    |   |   ‚îú‚îÄ‚îÄ qft.py
    |   |   ‚îú‚îÄ‚îÄ qubit.py
    |   |   ‚îú‚îÄ‚îÄ represent.py
    |   |   ‚îú‚îÄ‚îÄ sho1d.py
    |   |   ‚îú‚îÄ‚îÄ shor.py
    |   |   ‚îú‚îÄ‚îÄ spin.py
    |   |   ‚îú‚îÄ‚îÄ state.py
    |   |   ‚îú‚îÄ‚îÄ tensorproduct.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_anticommutator.py
    |   |       ‚îú‚îÄ‚îÄ test_boson.py
    |   |       ‚îú‚îÄ‚îÄ test_cartesian.py
    |   |       ‚îú‚îÄ‚îÄ test_cg.py
    |   |       ‚îú‚îÄ‚îÄ test_circuitplot.py
    |   |       ‚îú‚îÄ‚îÄ test_circuitutils.py
    |   |       ‚îú‚îÄ‚îÄ test_commutator.py
    |   |       ‚îú‚îÄ‚îÄ test_constants.py
    |   |       ‚îú‚îÄ‚îÄ test_dagger.py
    |   |       ‚îú‚îÄ‚îÄ test_density.py
    |   |       ‚îú‚îÄ‚îÄ test_fermion.py
    |   |       ‚îú‚îÄ‚îÄ test_gate.py
    |   |       ‚îú‚îÄ‚îÄ test_grover.py
    |   |       ‚îú‚îÄ‚îÄ test_hilbert.py
    |   |       ‚îú‚îÄ‚îÄ test_identitysearch.py
    |   |       ‚îú‚îÄ‚îÄ test_innerproduct.py
    |   |       ‚îú‚îÄ‚îÄ test_matrixutils.py
    |   |       ‚îú‚îÄ‚îÄ test_operator.py
    |   |       ‚îú‚îÄ‚îÄ test_operatorordering.py
    |   |       ‚îú‚îÄ‚îÄ test_operatorset.py
    |   |       ‚îú‚îÄ‚îÄ test_pauli.py
    |   |       ‚îú‚îÄ‚îÄ test_piab.py
    |   |       ‚îú‚îÄ‚îÄ test_printing.py
    |   |       ‚îú‚îÄ‚îÄ test_qapply.py
    |   |       ‚îú‚îÄ‚îÄ test_qasm.py
    |   |       ‚îú‚îÄ‚îÄ test_qexpr.py
    |   |       ‚îú‚îÄ‚îÄ test_qft.py
    |   |       ‚îú‚îÄ‚îÄ test_qubit.py
    |   |       ‚îú‚îÄ‚îÄ test_represent.py
    |   |       ‚îú‚îÄ‚îÄ test_sho1d.py
    |   |       ‚îú‚îÄ‚îÄ test_shor.py
    |   |       ‚îú‚îÄ‚îÄ test_spin.py
    |   |       ‚îú‚îÄ‚îÄ test_state.py
    |   |       ‚îî‚îÄ‚îÄ test_tensorproduct.py
    |   ‚îú‚îÄ‚îÄ secondquant.py
    |   ‚îú‚îÄ‚îÄ sho.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_clebsch_gordan.py
    |   |   ‚îú‚îÄ‚îÄ test_hydrogen.py
    |   |   ‚îú‚îÄ‚îÄ test_paulialgebra.py
    |   |   ‚îú‚îÄ‚îÄ test_physics_matrices.py
    |   |   ‚îú‚îÄ‚îÄ test_pring.py
    |   |   ‚îú‚îÄ‚îÄ test_qho_1d.py
    |   |   ‚îú‚îÄ‚îÄ test_secondquant.py
    |   |   ‚îî‚îÄ‚îÄ test_sho.py
    |   ‚îú‚îÄ‚îÄ units
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ definitions
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ dimension_definitions.py
    |   |   |   ‚îî‚îÄ‚îÄ unit_definitions.py
    |   |   ‚îú‚îÄ‚îÄ dimensions.py
    |   |   ‚îú‚îÄ‚îÄ prefixes.py
    |   |   ‚îú‚îÄ‚îÄ quantities.py
    |   |   ‚îú‚îÄ‚îÄ systems
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ cgs.py
    |   |   |   ‚îú‚îÄ‚îÄ length_weight_time.py
    |   |   |   ‚îú‚îÄ‚îÄ mks.py
    |   |   |   ‚îú‚îÄ‚îÄ mksa.py
    |   |   |   ‚îú‚îÄ‚îÄ natural.py
    |   |   |   ‚îî‚îÄ‚îÄ si.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dimensions.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dimensionsystem.py
    |   |   |   ‚îú‚îÄ‚îÄ test_prefixes.py
    |   |   |   ‚îú‚îÄ‚îÄ test_quantities.py
    |   |   |   ‚îú‚îÄ‚îÄ test_unit_system_cgs_gauss.py
    |   |   |   ‚îú‚îÄ‚îÄ test_unitsystem.py
    |   |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   |   ‚îú‚îÄ‚îÄ unitsystem.py
    |   |   ‚îî‚îÄ‚îÄ util.py
    |   ‚îú‚îÄ‚îÄ vector
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ dyadic.py
    |   |   ‚îú‚îÄ‚îÄ fieldfunctions.py
    |   |   ‚îú‚îÄ‚îÄ frame.py
    |   |   ‚îú‚îÄ‚îÄ functions.py
    |   |   ‚îú‚îÄ‚îÄ point.py
    |   |   ‚îú‚îÄ‚îÄ printing.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dyadic.py
    |   |   |   ‚îú‚îÄ‚îÄ test_fieldfunctions.py
    |   |   |   ‚îú‚îÄ‚îÄ test_frame.py
    |   |   |   ‚îú‚îÄ‚îÄ test_functions.py
    |   |   |   ‚îú‚îÄ‚îÄ test_output.py
    |   |   |   ‚îú‚îÄ‚îÄ test_point.py
    |   |   |   ‚îú‚îÄ‚îÄ test_printing.py
    |   |   |   ‚îî‚îÄ‚îÄ test_vector.py
    |   |   ‚îî‚îÄ‚îÄ vector.py
    |   ‚îî‚îÄ‚îÄ wigner.py
    ‚îú‚îÄ‚îÄ plotting
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ experimental_lambdify.py
    |   ‚îú‚îÄ‚îÄ intervalmath
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ interval_arithmetic.py
    |   |   ‚îú‚îÄ‚îÄ interval_membership.py
    |   |   ‚îú‚îÄ‚îÄ lib_interval.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_interval_functions.py
    |   |       ‚îú‚îÄ‚îÄ test_interval_membership.py
    |   |       ‚îî‚îÄ‚îÄ test_intervalmath.py
    |   ‚îú‚îÄ‚îÄ plot.py
    |   ‚îú‚îÄ‚îÄ plot_implicit.py
    |   ‚îú‚îÄ‚îÄ pygletplot
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ color_scheme.py
    |   |   ‚îú‚îÄ‚îÄ managed_window.py
    |   |   ‚îú‚îÄ‚îÄ plot.py
    |   |   ‚îú‚îÄ‚îÄ plot_axes.py
    |   |   ‚îú‚îÄ‚îÄ plot_camera.py
    |   |   ‚îú‚îÄ‚îÄ plot_controller.py
    |   |   ‚îú‚îÄ‚îÄ plot_curve.py
    |   |   ‚îú‚îÄ‚îÄ plot_interval.py
    |   |   ‚îú‚îÄ‚îÄ plot_mode.py
    |   |   ‚îú‚îÄ‚îÄ plot_mode_base.py
    |   |   ‚îú‚îÄ‚îÄ plot_modes.py
    |   |   ‚îú‚îÄ‚îÄ plot_object.py
    |   |   ‚îú‚îÄ‚îÄ plot_rotation.py
    |   |   ‚îú‚îÄ‚îÄ plot_surface.py
    |   |   ‚îú‚îÄ‚îÄ plot_window.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ test_plotting.py
    |   |   ‚îî‚îÄ‚îÄ util.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_experimental_lambdify.py
    |   |   ‚îú‚îÄ‚îÄ test_plot.py
    |   |   ‚îú‚îÄ‚îÄ test_plot_implicit.py
    |   |   ‚îî‚îÄ‚îÄ test_textplot.py
    |   ‚îî‚îÄ‚îÄ textplot.py
    ‚îú‚îÄ‚îÄ polys
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ agca
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ extensions.py
    |   |   ‚îú‚îÄ‚îÄ homomorphisms.py
    |   |   ‚îú‚îÄ‚îÄ ideals.py
    |   |   ‚îú‚îÄ‚îÄ modules.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_extensions.py
    |   |       ‚îú‚îÄ‚îÄ test_homomorphisms.py
    |   |       ‚îú‚îÄ‚îÄ test_ideals.py
    |   |       ‚îî‚îÄ‚îÄ test_modules.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_galoispolys.py
    |   |   ‚îú‚îÄ‚îÄ bench_groebnertools.py
    |   |   ‚îî‚îÄ‚îÄ bench_solvers.py
    |   ‚îú‚îÄ‚îÄ compatibility.py
    |   ‚îú‚îÄ‚îÄ constructor.py
    |   ‚îú‚îÄ‚îÄ densearith.py
    |   ‚îú‚îÄ‚îÄ densebasic.py
    |   ‚îú‚îÄ‚îÄ densetools.py
    |   ‚îú‚îÄ‚îÄ dispersion.py
    |   ‚îú‚îÄ‚îÄ distributedmodules.py
    |   ‚îú‚îÄ‚îÄ domains
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ algebraicfield.py
    |   |   ‚îú‚îÄ‚îÄ characteristiczero.py
    |   |   ‚îú‚îÄ‚îÄ complexfield.py
    |   |   ‚îú‚îÄ‚îÄ compositedomain.py
    |   |   ‚îú‚îÄ‚îÄ domain.py
    |   |   ‚îú‚îÄ‚îÄ domainelement.py
    |   |   ‚îú‚îÄ‚îÄ expressiondomain.py
    |   |   ‚îú‚îÄ‚îÄ field.py
    |   |   ‚îú‚îÄ‚îÄ finitefield.py
    |   |   ‚îú‚îÄ‚îÄ fractionfield.py
    |   |   ‚îú‚îÄ‚îÄ gmpyfinitefield.py
    |   |   ‚îú‚îÄ‚îÄ gmpyintegerring.py
    |   |   ‚îú‚îÄ‚îÄ gmpyrationalfield.py
    |   |   ‚îú‚îÄ‚îÄ groundtypes.py
    |   |   ‚îú‚îÄ‚îÄ integerring.py
    |   |   ‚îú‚îÄ‚îÄ modularinteger.py
    |   |   ‚îú‚îÄ‚îÄ mpelements.py
    |   |   ‚îú‚îÄ‚îÄ old_fractionfield.py
    |   |   ‚îú‚îÄ‚îÄ old_polynomialring.py
    |   |   ‚îú‚îÄ‚îÄ polynomialring.py
    |   |   ‚îú‚îÄ‚îÄ pythonfinitefield.py
    |   |   ‚îú‚îÄ‚îÄ pythonintegerring.py
    |   |   ‚îú‚îÄ‚îÄ pythonrational.py
    |   |   ‚îú‚îÄ‚îÄ pythonrationalfield.py
    |   |   ‚îú‚îÄ‚îÄ quotientring.py
    |   |   ‚îú‚îÄ‚îÄ rationalfield.py
    |   |   ‚îú‚îÄ‚îÄ realfield.py
    |   |   ‚îú‚îÄ‚îÄ ring.py
    |   |   ‚îú‚îÄ‚îÄ simpledomain.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_domains.py
    |   |       ‚îú‚îÄ‚îÄ test_polynomialring.py
    |   |       ‚îî‚îÄ‚îÄ test_quotientring.py
    |   ‚îú‚îÄ‚îÄ euclidtools.py
    |   ‚îú‚îÄ‚îÄ factortools.py
    |   ‚îú‚îÄ‚îÄ fglmtools.py
    |   ‚îú‚îÄ‚îÄ fields.py
    |   ‚îú‚îÄ‚îÄ galoistools.py
    |   ‚îú‚îÄ‚îÄ groebnertools.py
    |   ‚îú‚îÄ‚îÄ heuristicgcd.py
    |   ‚îú‚îÄ‚îÄ modulargcd.py
    |   ‚îú‚îÄ‚îÄ monomials.py
    |   ‚îú‚îÄ‚îÄ multivariate_resultants.py
    |   ‚îú‚îÄ‚îÄ numberfields.py
    |   ‚îú‚îÄ‚îÄ orderings.py
    |   ‚îú‚îÄ‚îÄ orthopolys.py
    |   ‚îú‚îÄ‚îÄ partfrac.py
    |   ‚îú‚îÄ‚îÄ polyclasses.py
    |   ‚îú‚îÄ‚îÄ polyconfig.py
    |   ‚îú‚îÄ‚îÄ polyerrors.py
    |   ‚îú‚îÄ‚îÄ polyfuncs.py
    |   ‚îú‚îÄ‚îÄ polymatrix.py
    |   ‚îú‚îÄ‚îÄ polyoptions.py
    |   ‚îú‚îÄ‚îÄ polyquinticconst.py
    |   ‚îú‚îÄ‚îÄ polyroots.py
    |   ‚îú‚îÄ‚îÄ polytools.py
    |   ‚îú‚îÄ‚îÄ polyutils.py
    |   ‚îú‚îÄ‚îÄ rationaltools.py
    |   ‚îú‚îÄ‚îÄ ring_series.py
    |   ‚îú‚îÄ‚îÄ rings.py
    |   ‚îú‚îÄ‚îÄ rootisolation.py
    |   ‚îú‚îÄ‚îÄ rootoftools.py
    |   ‚îú‚îÄ‚îÄ solvers.py
    |   ‚îú‚îÄ‚îÄ specialpolys.py
    |   ‚îú‚îÄ‚îÄ sqfreetools.py
    |   ‚îú‚îÄ‚îÄ subresultants_qq_zz.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_constructor.py
    |       ‚îú‚îÄ‚îÄ test_densearith.py
    |       ‚îú‚îÄ‚îÄ test_densebasic.py
    |       ‚îú‚îÄ‚îÄ test_densetools.py
    |       ‚îú‚îÄ‚îÄ test_dispersion.py
    |       ‚îú‚îÄ‚îÄ test_distributedmodules.py
    |       ‚îú‚îÄ‚îÄ test_euclidtools.py
    |       ‚îú‚îÄ‚îÄ test_factortools.py
    |       ‚îú‚îÄ‚îÄ test_fields.py
    |       ‚îú‚îÄ‚îÄ test_galoistools.py
    |       ‚îú‚îÄ‚îÄ test_groebnertools.py
    |       ‚îú‚îÄ‚îÄ test_heuristicgcd.py
    |       ‚îú‚îÄ‚îÄ test_injections.py
    |       ‚îú‚îÄ‚îÄ test_modulargcd.py
    |       ‚îú‚îÄ‚îÄ test_monomials.py
    |       ‚îú‚îÄ‚îÄ test_multivariate_resultants.py
    |       ‚îú‚îÄ‚îÄ test_numberfields.py
    |       ‚îú‚îÄ‚îÄ test_orderings.py
    |       ‚îú‚îÄ‚îÄ test_orthopolys.py
    |       ‚îú‚îÄ‚îÄ test_partfrac.py
    |       ‚îú‚îÄ‚îÄ test_polyclasses.py
    |       ‚îú‚îÄ‚îÄ test_polyfuncs.py
    |       ‚îú‚îÄ‚îÄ test_polymatrix.py
    |       ‚îú‚îÄ‚îÄ test_polyoptions.py
    |       ‚îú‚îÄ‚îÄ test_polyroots.py
    |       ‚îú‚îÄ‚îÄ test_polytools.py
    |       ‚îú‚îÄ‚îÄ test_polyutils.py
    |       ‚îú‚îÄ‚îÄ test_pythonrational.py
    |       ‚îú‚îÄ‚îÄ test_rationaltools.py
    |       ‚îú‚îÄ‚îÄ test_ring_series.py
    |       ‚îú‚îÄ‚îÄ test_rings.py
    |       ‚îú‚îÄ‚îÄ test_rootisolation.py
    |       ‚îú‚îÄ‚îÄ test_rootoftools.py
    |       ‚îú‚îÄ‚îÄ test_solvers.py
    |       ‚îú‚îÄ‚îÄ test_specialpolys.py
    |       ‚îú‚îÄ‚îÄ test_sqfreetools.py
    |       ‚îî‚îÄ‚îÄ test_subresultants_qq_zz.py
    ‚îú‚îÄ‚îÄ printing
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ccode.py
    |   ‚îú‚îÄ‚îÄ codeprinter.py
    |   ‚îú‚îÄ‚îÄ conventions.py
    |   ‚îú‚îÄ‚îÄ cxxcode.py
    |   ‚îú‚îÄ‚îÄ defaults.py
    |   ‚îú‚îÄ‚îÄ dot.py
    |   ‚îú‚îÄ‚îÄ fcode.py
    |   ‚îú‚îÄ‚îÄ glsl.py
    |   ‚îú‚îÄ‚îÄ gtk.py
    |   ‚îú‚îÄ‚îÄ jscode.py
    |   ‚îú‚îÄ‚îÄ julia.py
    |   ‚îú‚îÄ‚îÄ lambdarepr.py
    |   ‚îú‚îÄ‚îÄ latex.py
    |   ‚îú‚îÄ‚îÄ llvmjitcode.py
    |   ‚îú‚îÄ‚îÄ maple.py
    |   ‚îú‚îÄ‚îÄ mathematica.py
    |   ‚îú‚îÄ‚îÄ mathml.py
    |   ‚îú‚îÄ‚îÄ octave.py
    |   ‚îú‚îÄ‚îÄ precedence.py
    |   ‚îú‚îÄ‚îÄ pretty
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ pretty.py
    |   |   ‚îú‚îÄ‚îÄ pretty_symbology.py
    |   |   ‚îú‚îÄ‚îÄ stringpict.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îî‚îÄ‚îÄ test_pretty.py
    |   ‚îú‚îÄ‚îÄ preview.py
    |   ‚îú‚îÄ‚îÄ printer.py
    |   ‚îú‚îÄ‚îÄ pycode.py
    |   ‚îú‚îÄ‚îÄ python.py
    |   ‚îú‚îÄ‚îÄ rcode.py
    |   ‚îú‚îÄ‚îÄ repr.py
    |   ‚îú‚îÄ‚îÄ rust.py
    |   ‚îú‚îÄ‚îÄ str.py
    |   ‚îú‚îÄ‚îÄ tableform.py
    |   ‚îú‚îÄ‚îÄ tensorflow.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_ccode.py
    |   |   ‚îú‚îÄ‚îÄ test_codeprinter.py
    |   |   ‚îú‚îÄ‚îÄ test_conventions.py
    |   |   ‚îú‚îÄ‚îÄ test_cxxcode.py
    |   |   ‚îú‚îÄ‚îÄ test_dot.py
    |   |   ‚îú‚îÄ‚îÄ test_fcode.py
    |   |   ‚îú‚îÄ‚îÄ test_glsl.py
    |   |   ‚îú‚îÄ‚îÄ test_gtk.py
    |   |   ‚îú‚îÄ‚îÄ test_jscode.py
    |   |   ‚îú‚îÄ‚îÄ test_julia.py
    |   |   ‚îú‚îÄ‚îÄ test_lambdarepr.py
    |   |   ‚îú‚îÄ‚îÄ test_latex.py
    |   |   ‚îú‚îÄ‚îÄ test_llvmjit.py
    |   |   ‚îú‚îÄ‚îÄ test_maple.py
    |   |   ‚îú‚îÄ‚îÄ test_mathematica.py
    |   |   ‚îú‚îÄ‚îÄ test_mathml.py
    |   |   ‚îú‚îÄ‚îÄ test_numpy.py
    |   |   ‚îú‚îÄ‚îÄ test_octave.py
    |   |   ‚îú‚îÄ‚îÄ test_precedence.py
    |   |   ‚îú‚îÄ‚îÄ test_preview.py
    |   |   ‚îú‚îÄ‚îÄ test_pycode.py
    |   |   ‚îú‚îÄ‚îÄ test_python.py
    |   |   ‚îú‚îÄ‚îÄ test_rcode.py
    |   |   ‚îú‚îÄ‚îÄ test_repr.py
    |   |   ‚îú‚îÄ‚îÄ test_rust.py
    |   |   ‚îú‚îÄ‚îÄ test_str.py
    |   |   ‚îú‚îÄ‚îÄ test_tableform.py
    |   |   ‚îú‚îÄ‚îÄ test_tensorflow.py
    |   |   ‚îú‚îÄ‚îÄ test_theanocode.py
    |   |   ‚îî‚îÄ‚îÄ test_tree.py
    |   ‚îú‚îÄ‚îÄ theanocode.py
    |   ‚îî‚îÄ‚îÄ tree.py
    ‚îú‚îÄ‚îÄ release.py
    ‚îú‚îÄ‚îÄ sandbox
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ indexed_integrals.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_indexed_integrals.py
    ‚îú‚îÄ‚îÄ series
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ acceleration.py
    |   ‚îú‚îÄ‚îÄ approximants.py
    |   ‚îú‚îÄ‚îÄ aseries.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_limit.py
    |   |   ‚îî‚îÄ‚îÄ bench_order.py
    |   ‚îú‚îÄ‚îÄ formal.py
    |   ‚îú‚îÄ‚îÄ fourier.py
    |   ‚îú‚îÄ‚îÄ gruntz.py
    |   ‚îú‚îÄ‚îÄ kauers.py
    |   ‚îú‚îÄ‚îÄ limits.py
    |   ‚îú‚îÄ‚îÄ limitseq.py
    |   ‚îú‚îÄ‚îÄ order.py
    |   ‚îú‚îÄ‚îÄ residues.py
    |   ‚îú‚îÄ‚îÄ sequences.py
    |   ‚îú‚îÄ‚îÄ series.py
    |   ‚îú‚îÄ‚îÄ series_class.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_approximants.py
    |       ‚îú‚îÄ‚îÄ test_aseries.py
    |       ‚îú‚îÄ‚îÄ test_demidovich.py
    |       ‚îú‚îÄ‚îÄ test_formal.py
    |       ‚îú‚îÄ‚îÄ test_fourier.py
    |       ‚îú‚îÄ‚îÄ test_gruntz.py
    |       ‚îú‚îÄ‚îÄ test_kauers.py
    |       ‚îú‚îÄ‚îÄ test_limits.py
    |       ‚îú‚îÄ‚îÄ test_limitseq.py
    |       ‚îú‚îÄ‚îÄ test_lseries.py
    |       ‚îú‚îÄ‚îÄ test_nseries.py
    |       ‚îú‚îÄ‚îÄ test_order.py
    |       ‚îú‚îÄ‚îÄ test_residues.py
    |       ‚îú‚îÄ‚îÄ test_sequences.py
    |       ‚îî‚îÄ‚îÄ test_series.py
    ‚îú‚îÄ‚îÄ sets
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ conditionset.py
    |   ‚îú‚îÄ‚îÄ contains.py
    |   ‚îú‚îÄ‚îÄ fancysets.py
    |   ‚îú‚îÄ‚îÄ handlers
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ add.py
    |   |   ‚îú‚îÄ‚îÄ functions.py
    |   |   ‚îú‚îÄ‚îÄ intersection.py
    |   |   ‚îú‚îÄ‚îÄ issubset.py
    |   |   ‚îú‚îÄ‚îÄ mul.py
    |   |   ‚îú‚îÄ‚îÄ power.py
    |   |   ‚îî‚îÄ‚îÄ union.py
    |   ‚îú‚îÄ‚îÄ ordinals.py
    |   ‚îú‚îÄ‚îÄ powerset.py
    |   ‚îú‚îÄ‚îÄ setexpr.py
    |   ‚îú‚îÄ‚îÄ sets.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_conditionset.py
    |       ‚îú‚îÄ‚îÄ test_contains.py
    |       ‚îú‚îÄ‚îÄ test_fancysets.py
    |       ‚îú‚îÄ‚îÄ test_ordinals.py
    |       ‚îú‚îÄ‚îÄ test_powerset.py
    |       ‚îú‚îÄ‚îÄ test_setexpr.py
    |       ‚îî‚îÄ‚îÄ test_sets.py
    ‚îú‚îÄ‚îÄ simplify
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ combsimp.py
    |   ‚îú‚îÄ‚îÄ cse_main.py
    |   ‚îú‚îÄ‚îÄ cse_opts.py
    |   ‚îú‚îÄ‚îÄ epathtools.py
    |   ‚îú‚îÄ‚îÄ fu.py
    |   ‚îú‚îÄ‚îÄ gammasimp.py
    |   ‚îú‚îÄ‚îÄ hyperexpand.py
    |   ‚îú‚îÄ‚îÄ hyperexpand_doc.py
    |   ‚îú‚îÄ‚îÄ powsimp.py
    |   ‚îú‚îÄ‚îÄ radsimp.py
    |   ‚îú‚îÄ‚îÄ ratsimp.py
    |   ‚îú‚îÄ‚îÄ simplify.py
    |   ‚îú‚îÄ‚îÄ sqrtdenest.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_combsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_cse.py
    |   |   ‚îú‚îÄ‚îÄ test_epathtools.py
    |   |   ‚îú‚îÄ‚îÄ test_fu.py
    |   |   ‚îú‚îÄ‚îÄ test_function.py
    |   |   ‚îú‚îÄ‚îÄ test_gammasimp.py
    |   |   ‚îú‚îÄ‚îÄ test_hyperexpand.py
    |   |   ‚îú‚îÄ‚îÄ test_powsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_radsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_ratsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_rewrite.py
    |   |   ‚îú‚îÄ‚îÄ test_simplify.py
    |   |   ‚îú‚îÄ‚îÄ test_sqrtdenest.py
    |   |   ‚îú‚îÄ‚îÄ test_traversaltools.py
    |   |   ‚îî‚îÄ‚îÄ test_trigsimp.py
    |   ‚îú‚îÄ‚îÄ traversaltools.py
    |   ‚îî‚îÄ‚îÄ trigsimp.py
    ‚îú‚îÄ‚îÄ solvers
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ bench_solvers.py
    |   ‚îú‚îÄ‚îÄ bivariate.py
    |   ‚îú‚îÄ‚îÄ decompogen.py
    |   ‚îú‚îÄ‚îÄ deutils.py
    |   ‚îú‚îÄ‚îÄ diophantine.py
    |   ‚îú‚îÄ‚îÄ inequalities.py
    |   ‚îú‚îÄ‚îÄ ode.py
    |   ‚îú‚îÄ‚îÄ pde.py
    |   ‚îú‚îÄ‚îÄ polysys.py
    |   ‚îú‚îÄ‚îÄ recurr.py
    |   ‚îú‚îÄ‚îÄ solvers.py
    |   ‚îú‚îÄ‚îÄ solveset.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_constantsimp.py
    |       ‚îú‚îÄ‚îÄ test_decompogen.py
    |       ‚îú‚îÄ‚îÄ test_diophantine.py
    |       ‚îú‚îÄ‚îÄ test_inequalities.py
    |       ‚îú‚îÄ‚îÄ test_numeric.py
    |       ‚îú‚îÄ‚îÄ test_ode.py
    |       ‚îú‚îÄ‚îÄ test_pde.py
    |       ‚îú‚îÄ‚îÄ test_polysys.py
    |       ‚îú‚îÄ‚îÄ test_recurr.py
    |       ‚îú‚îÄ‚îÄ test_solvers.py
    |       ‚îî‚îÄ‚îÄ test_solveset.py
    ‚îú‚îÄ‚îÄ stats
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ crv.py
    |   ‚îú‚îÄ‚îÄ crv_types.py
    |   ‚îú‚îÄ‚îÄ drv.py
    |   ‚îú‚îÄ‚îÄ drv_types.py
    |   ‚îú‚îÄ‚îÄ error_prop.py
    |   ‚îú‚îÄ‚îÄ frv.py
    |   ‚îú‚îÄ‚îÄ frv_types.py
    |   ‚îú‚îÄ‚îÄ joint_rv.py
    |   ‚îú‚îÄ‚îÄ joint_rv_types.py
    |   ‚îú‚îÄ‚îÄ random_matrix.py
    |   ‚îú‚îÄ‚îÄ random_matrix_models.py
    |   ‚îú‚îÄ‚îÄ rv.py
    |   ‚îú‚îÄ‚îÄ rv_interface.py
    |   ‚îú‚îÄ‚îÄ stochastic_process.py
    |   ‚îú‚îÄ‚îÄ stochastic_process_types.py
    |   ‚îú‚îÄ‚îÄ symbolic_probability.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_continuous_rv.py
    |       ‚îú‚îÄ‚îÄ test_discrete_rv.py
    |       ‚îú‚îÄ‚îÄ test_error_prop.py
    |       ‚îú‚îÄ‚îÄ test_finite_rv.py
    |       ‚îú‚îÄ‚îÄ test_joint_rv.py
    |       ‚îú‚îÄ‚îÄ test_mix.py
    |       ‚îú‚îÄ‚îÄ test_random_matrix.py
    |       ‚îú‚îÄ‚îÄ test_rv.py
    |       ‚îú‚îÄ‚îÄ test_stochastic_process.py
    |       ‚îî‚îÄ‚îÄ test_symbolic_probability.py
    ‚îú‚îÄ‚îÄ strategies
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ branch
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ core.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_core.py
    |   |   |   ‚îú‚îÄ‚îÄ test_tools.py
    |   |   |   ‚îî‚îÄ‚îÄ test_traverse.py
    |   |   ‚îú‚îÄ‚îÄ tools.py
    |   |   ‚îî‚îÄ‚îÄ traverse.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ rl.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_core.py
    |   |   ‚îú‚îÄ‚îÄ test_rl.py
    |   |   ‚îú‚îÄ‚îÄ test_strat.py
    |   |   ‚îú‚îÄ‚îÄ test_tools.py
    |   |   ‚îú‚îÄ‚îÄ test_traverse.py
    |   |   ‚îî‚îÄ‚îÄ test_tree.py
    |   ‚îú‚îÄ‚îÄ tools.py
    |   ‚îú‚îÄ‚îÄ traverse.py
    |   ‚îú‚îÄ‚îÄ tree.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ tensor
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ array
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ array_comprehension.py
    |   |   ‚îú‚îÄ‚îÄ arrayop.py
    |   |   ‚îú‚îÄ‚îÄ dense_ndim_array.py
    |   |   ‚îú‚îÄ‚îÄ mutable_ndim_array.py
    |   |   ‚îú‚îÄ‚îÄ ndim_array.py
    |   |   ‚îú‚îÄ‚îÄ sparse_ndim_array.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_array_comprehension.py
    |   |       ‚îú‚îÄ‚îÄ test_arrayop.py
    |   |       ‚îú‚îÄ‚îÄ test_immutable_ndim_array.py
    |   |       ‚îú‚îÄ‚îÄ test_mutable_ndim_array.py
    |   |       ‚îú‚îÄ‚îÄ test_ndim_array.py
    |   |       ‚îî‚îÄ‚îÄ test_ndim_array_conversions.py
    |   ‚îú‚îÄ‚îÄ functions.py
    |   ‚îú‚îÄ‚îÄ index_methods.py
    |   ‚îú‚îÄ‚îÄ indexed.py
    |   ‚îú‚îÄ‚îÄ tensor.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_functions.py
    |   |   ‚îú‚îÄ‚îÄ test_index_methods.py
    |   |   ‚îú‚îÄ‚îÄ test_indexed.py
    |   |   ‚îú‚îÄ‚îÄ test_tensor.py
    |   |   ‚îú‚îÄ‚îÄ test_tensor_element.py
    |   |   ‚îî‚îÄ‚îÄ test_tensor_operators.py
    |   ‚îî‚îÄ‚îÄ toperators.py
    ‚îú‚îÄ‚îÄ this.py
    ‚îú‚îÄ‚îÄ unify
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ rewrite.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_rewrite.py
    |   |   ‚îú‚îÄ‚îÄ test_sympy.py
    |   |   ‚îî‚îÄ‚îÄ test_unify.py
    |   ‚îî‚îÄ‚îÄ usympy.py
    ‚îú‚îÄ‚îÄ utilities
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ _compilation
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ availability.py
    |   |   ‚îú‚îÄ‚îÄ compilation.py
    |   |   ‚îú‚îÄ‚îÄ runners.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ test_compilation.py
    |   |   ‚îî‚îÄ‚îÄ util.py
    |   ‚îú‚îÄ‚îÄ autowrap.py
    |   ‚îú‚îÄ‚îÄ benchmarking.py
    |   ‚îú‚îÄ‚îÄ codegen.py
    |   ‚îú‚îÄ‚îÄ decorator.py
    |   ‚îú‚îÄ‚îÄ enumerative.py
    |   ‚îú‚îÄ‚îÄ exceptions.py
    |   ‚îú‚îÄ‚îÄ iterables.py
    |   ‚îú‚îÄ‚îÄ lambdify.py
    |   ‚îú‚îÄ‚îÄ magic.py
    |   ‚îú‚îÄ‚îÄ matchpy_connector.py
    |   ‚îú‚îÄ‚îÄ mathml
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ data
    |   ‚îú‚îÄ‚îÄ memoization.py
    |   ‚îú‚îÄ‚îÄ misc.py
    |   ‚îú‚îÄ‚îÄ pkgdata.py
    |   ‚îú‚îÄ‚îÄ pytest.py
    |   ‚îú‚îÄ‚îÄ quality_unicode.py
    |   ‚îú‚îÄ‚îÄ randtest.py
    |   ‚îú‚îÄ‚îÄ runtests.py
    |   ‚îú‚îÄ‚îÄ source.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ diagnose_imports.py
    |   |   ‚îú‚îÄ‚îÄ test_autowrap.py
    |   |   ‚îú‚îÄ‚îÄ test_code_quality.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen_julia.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen_octave.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen_rust.py
    |   |   ‚îú‚îÄ‚îÄ test_decorator.py
    |   |   ‚îú‚îÄ‚îÄ test_enumerative.py
    |   |   ‚îú‚îÄ‚îÄ test_iterables.py
    |   |   ‚îú‚îÄ‚îÄ test_lambdify.py
    |   |   ‚îú‚îÄ‚îÄ test_misc.py
    |   |   ‚îú‚îÄ‚îÄ test_module_imports.py
    |   |   ‚îú‚îÄ‚îÄ test_pickling.py
    |   |   ‚îú‚îÄ‚îÄ test_pytest.py
    |   |   ‚îú‚îÄ‚îÄ test_source.py
    |   |   ‚îú‚îÄ‚îÄ test_timeutils.py
    |   |   ‚îî‚îÄ‚îÄ test_wester.py
    |   ‚îú‚îÄ‚îÄ timeutils.py
    |   ‚îî‚îÄ‚îÄ tmpfiles.py
    ‚îî‚îÄ‚îÄ vector
        ‚îú‚îÄ‚îÄ __init__.py
        ‚îú‚îÄ‚îÄ basisdependent.py
        ‚îú‚îÄ‚îÄ coordsysrect.py
        ‚îú‚îÄ‚îÄ deloperator.py
        ‚îú‚îÄ‚îÄ dyadic.py
        ‚îú‚îÄ‚îÄ functions.py
        ‚îú‚îÄ‚îÄ operators.py
        ‚îú‚îÄ‚îÄ orienters.py
        ‚îú‚îÄ‚îÄ point.py
        ‚îú‚îÄ‚îÄ scalar.py
        ‚îú‚îÄ‚îÄ tests
        |   ‚îú‚îÄ‚îÄ __init__.py
        |   ‚îú‚îÄ‚îÄ test_coordsysrect.py
        |   ‚îú‚îÄ‚îÄ test_dyadic.py
        |   ‚îú‚îÄ‚îÄ test_field_functions.py
        |   ‚îú‚îÄ‚îÄ test_functions.py
        |   ‚îú‚îÄ‚îÄ test_operators.py
        |   ‚îú‚îÄ‚îÄ test_printing.py
        |   ‚îî‚îÄ‚îÄ test_vector.py
        ‚îî‚îÄ‚îÄ vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
`solveset` raises `NotImplementedError` instead of returning `ConditionSet`

Issue description: 
The problem is
```julia
In [10]: Eq(n*cos(n) - 3*sin(n), 0).as_set()                                                                                                                  
---------------------------------------------------------------------------
NotImplementedError
```
Here `solveset` raises `NotImplementedError` but probably a `ConditionSet` should be returned by `solveset` instead. The obvious result of `as_set()` here is
```julia
In [11]: ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)                                                                                                   
Out[11]: {n | n ‚àä ‚Ñù ‚àß n‚ãÖcos(n) - 3‚ãÖsin(n) = 0}
```

_Originally posted by @oscarbenjamin in https://github.com/sympy/sympy/pull/17771_

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/solvers/tests/test_solveset.py
Line number range: 310 - 333
Content:
310. def test_solve_polynomial():
311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))
312. 
313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)
314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)
315. 
316.     a11, a12, a21, a22, b1, b2 = symbols('a11, a12, a21, a22, b1, b2')
317. 
318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(
319.         -2 + 3 ** S.Half,
320.         S(4),
321.         -2 - 3 ** S.Half)
322. 
323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)
324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)
325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)
326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)
327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1
328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0
329. 
330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,
331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)
332. 
333. 


File: sympy/solvers/tests/test_solveset.py
Line number range: 469 - 493
Content:
469. @slow
470. def test_solve_sqrt_3():
471.     R = Symbol('R')
472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)
473.     sol = solveset_complex(eq, R)
474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,
475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +
476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +
477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +
478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -
479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]
481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +
483.             Rational(5, 3) +
484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]
487. 
488.     assert sol._args[0] == FiniteSet(*fset)
489.     assert sol._args[1] == ConditionSet(
490.         R,
491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),
492.         FiniteSet(*cset))
493. 


File: sympy/solvers/tests/test_solveset.py
Line number range: 2245 - 2247
Content:
2245.     # Not Implemented for m without primitive root
2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \
2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)


File: sympy/solvers/tests/test_solveset.py
Line number range: 2248 - 2249
Content:
2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \
2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)


File: sympy/solvers/tests/test_solveset.py
Line number range: 2256 - 2259
Content:
2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \
2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)
2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \
2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 07:17:41,901 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants 5 complete and self-contained test cases. The current context provides only snippets of test methods from `sympy/solvers/tests/test_solveset.py`. To provide complete test cases, I need the full method definitions, including any decorators, and the full list of imports from the top of the file. Without the full file, I cannot guarantee the completeness of the test cases as requested.' refined_query='Please provide the full content of the file `sympy/solvers/tests/test_solveset.py`.'
2025-10-06 07:17:43,740 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/solvers/tests/test_solveset.py"}'}, '__gemini_function_call_thought_signatures__': {'993e6315-2e4b-495c-8793-665afbf99b2c': 'CtICAR/MhbZpn9VHUyy/xwtbTwGZjOYTqrRzlHWZn6yV53ez2nd/GitnEZYUeZ1gVzYJnsHT7Hfs+ZsCaE5eiw90pC7TqykSq6Yujv08lQ3rTujlWdp5MR+Ot7AbLJghJ6lTNXxVcFcZyQoUcKUFUBINML3HCYBYCQm2zOhXu6/+s8ehh+M4jEeTjfYl6tPsVZXewOVJ6EAljwjQE1BPybX8OWlx4SD9atmA8kxMui8ZJerbRIJn5vqEd1YCnLXzo2q3XKQE+j0grBo9Gqn80KnafiD2v8073vTdOUzR/rWNH6YzOjlwvXG6/duxP6/AZOqJ6TGDLejHOzlP5Qp8PUiHQYlEgconCdKsXElWyUl/cJ+Sc9bILKcTUC95q7OVusxZDlzNFUzQtHeZ5RwYNFcFWnNQbOfvZEMxBRMEN1e0YFGBok7OmZ8zkud1YbD+Q++ta6M='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19743, 'candidates_token_count': 29, 'total_token_count': 19861, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19743}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 89, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10005736351013184, 'model_name': 'gemini-2.5-pro'} id='run--692e0537-2015-4171-9ed9-adb0347209e8-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/solvers/tests/test_solveset.py'}, 'id': '993e6315-2e4b-495c-8793-665afbf99b2c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 19743, 'output_tokens': 29, 'total_tokens': 19861, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 89}}
2025-10-06 07:17:46,944 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have read the first 500 lines of the file `sympy/solvers/tests/test_solveset.py`. To provide the complete file, I will now read the remaining lines.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "sympy/solvers/tests/test_solveset.py", "end_line": 10000.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30201, 'candidates_token_count': 79, 'total_token_count': 30433, 'cached_content_token_count': 19773, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30288}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19773}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 153}, 'finish_reason': 'STOP', 'avg_logprobs': -0.24311014972155606, 'model_name': 'gemini-2.5-pro'} id='run--f7a377ca-0c0d-4677-af88-eb2b2ef69ac3-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'sympy/solvers/tests/test_solveset.py', 'end_line': 10000.0}, 'id': '84acb9c9-e524-4e26-9195-6c2bb945b56c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30201, 'output_tokens': 79, 'total_tokens': 30433, 'input_token_details': {'cache_read': 19773}, 'output_token_details': {'reasoning': 153}}
2025-10-06 07:17:49,778 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of the file `sympy/solvers/tests/test_solveset.py`. The file contains a comprehensive suite of tests for the `solveset` function in SymPy, covering a wide range of equation types and domains. The tests include polynomial, rational, transcendental, and modular equations, as well as systems of equations.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 70154, 'candidates_token_count': 77, 'total_token_count': 70231, 'prompt_tokens_details': [{'modality': 1, 'token_count': 70241}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 77}], 'thoughts_token_count': 0, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.06677729123598569, 'model_name': 'gemini-2.5-pro'} id='run--fa14adfb-ccd7-459a-b6c2-08c34fed458d-0' usage_metadata={'input_tokens': 70154, 'output_tokens': 77, 'total_tokens': 70231, 'input_token_details': {'cache_read': 0}}
2025-10-06 07:17:49,779 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 07:17:49,780 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
`solveset` raises `NotImplementedError` instead of returning `ConditionSet`

Issue description: 
The problem is
```julia
In [10]: Eq(n*cos(n) - 3*sin(n), 0).as_set()                                                                                                                  
---------------------------------------------------------------------------
NotImplementedError
```
Here `solveset` raises `NotImplementedError` but probably a `ConditionSet` should be returned by `solveset` instead. The obvious result of `as_set()` here is
```julia
In [11]: ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)                                                                                                   
Out[11]: {n | n ‚àä ‚Ñù ‚àß n‚ãÖcos(n) - 3‚ãÖsin(n) = 0}
```

_Originally posted by @oscarbenjamin in https://github.com/sympy/sympy/pull/17771_

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the full content of the file `sympy/solvers/tests/test_solveset.py`.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/solvers/tests/test_solveset.py
Line number range: 1 - 500
Content:
1. from sympy.core.containers import Tuple
2. from sympy.core.function import (Function, Lambda, nfloat)
3. from sympy.core.mod import Mod
4. from sympy.core.numbers import (E, I, Rational, oo, pi)
5. from sympy.core.relational import (Eq, Gt,
6.     Ne)
7. from sympy.core.singleton import S
8. from sympy.core.symbol import (Dummy, Symbol, symbols)
9. from sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)
10. from sympy.functions.elementary.exponential import (LambertW, exp, log)
11. from sympy.functions.elementary.hyperbolic import (HyperbolicFunction,
12.     atanh, sinh, tanh, cosh, sech, coth)
13. from sympy.functions.elementary.miscellaneous import sqrt, Min, Max
14. from sympy.functions.elementary.piecewise import Piecewise
15. from sympy.functions.elementary.trigonometric import (
16.     TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,
17.     cos, cot, csc, sec, sin, tan)
18. from sympy.functions.special.error_functions import (erf, erfc,
19.     erfcinv, erfinv)
20. from sympy.logic.boolalg import And
21. from sympy.matrices.dense import MutableDenseMatrix as Matrix
22. from sympy.matrices.immutable import ImmutableDenseMatrix
23. from sympy.polys.polytools import Poly
24. from sympy.polys.rootoftools import CRootOf
25. from sympy.sets.contains import Contains
26. from sympy.sets.conditionset import ConditionSet
27. from sympy.sets.fancysets import ImageSet
28. from sympy.sets.sets import (Complement, EmptySet, FiniteSet,
29.     Intersection, Interval, Union, imageset, ProductSet)
30. from sympy.tensor.indexed import Indexed
31. from sympy.utilities.iterables import numbered_symbols
32. 
33. from sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,
34.     nocache_fail)
35. from sympy.utilities.randtest import verify_numerically as tn
36. from sympy.physics.units import cm
37. 
38. from sympy.solvers.solveset import (
39.     solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,
40.     linsolve, _is_function_class_equation, invert_real, invert_complex,
41.     solveset, solve_decomposition, substitution, nonlinsolve, solvify,
42.     _is_finite_with_finite_vars, _transolve, _is_exponential,
43.     _solve_exponential, _is_logarithmic,
44.     _solve_logarithm, _term_factors, _is_modular)
45. 
46. 
47. a = Symbol('a', real=True)
48. b = Symbol('b', real=True)
49. c = Symbol('c', real=True)
50. x = Symbol('x', real=True)
51. y = Symbol('y', real=True)
52. z = Symbol('z', real=True)
53. q = Symbol('q', real=True)
54. m = Symbol('m', real=True)
55. n = Symbol('n', real=True)
56. 
57. 
58. def test_invert_real():
59.     x = Symbol('x', real=True)
60.     y = Symbol('y')
61.     n = Symbol('n')
62. 
63.     def ireal(x, s=S.Reals):
64.         return Intersection(s, x)
65. 
66.     # issue 14223
67.     assert invert_real(x, 0, x, Interval(1, 2)) == (x, S.EmptySet)
68. 
69.     assert invert_real(exp(x), y, x) == (x, ireal(FiniteSet(log(y))))
70. 
71.     y = Symbol('y', positive=True)
72.     n = Symbol('n', real=True)
73.     assert invert_real(x + 3, y, x) == (x, FiniteSet(y - 3))
74.     assert invert_real(x*3, y, x) == (x, FiniteSet(y / 3))
75. 
76.     assert invert_real(exp(x), y, x) == (x, FiniteSet(log(y)))
77.     assert invert_real(exp(3*x), y, x) == (x, FiniteSet(log(y) / 3))
78.     assert invert_real(exp(x + 3), y, x) == (x, FiniteSet(log(y) - 3))
79. 
80.     assert invert_real(exp(x) + 3, y, x) == (x, ireal(FiniteSet(log(y - 3))))
81.     assert invert_real(exp(x)*3, y, x) == (x, FiniteSet(log(y / 3)))
82. 
83.     assert invert_real(log(x), y, x) == (x, FiniteSet(exp(y)))
84.     assert invert_real(log(3*x), y, x) == (x, FiniteSet(exp(y) / 3))
85.     assert invert_real(log(x + 3), y, x) == (x, FiniteSet(exp(y) - 3))
86. 
87.     assert invert_real(Abs(x), y, x) == (x, FiniteSet(y, -y))
88. 
89.     assert invert_real(2**x, y, x) == (x, FiniteSet(log(y)/log(2)))
90.     assert invert_real(2**exp(x), y, x) == (x, ireal(FiniteSet(log(log(y)/log(2)))))
91. 
92.     assert invert_real(x**2, y, x) == (x, FiniteSet(sqrt(y), -sqrt(y)))
93.     assert invert_real(x**S.Half, y, x) == (x, FiniteSet(y**2))
94. 
95.     raises(ValueError, lambda: invert_real(x, x, x))
96.     raises(ValueError, lambda: invert_real(x**pi, y, x))
97.     raises(ValueError, lambda: invert_real(S.One, y, x))
98. 
99.     assert invert_real(x**31 + x, y, x) == (x**31 + x, FiniteSet(y))
100. 
101.     lhs = x**31 + x
102.     base_values =  FiniteSet(y - 1, -y - 1)
103.     assert invert_real(Abs(x**31 + x + 1), y, x) == (lhs, base_values)
104. 
105.     assert invert_real(sin(x), y, x) == \
106.         (x, imageset(Lambda(n, n*pi + (-1)**n*asin(y)), S.Integers))
107. 
108.     assert invert_real(sin(exp(x)), y, x) == \
109.         (x, imageset(Lambda(n, log((-1)**n*asin(y) + n*pi)), S.Integers))
110. 
111.     assert invert_real(csc(x), y, x) == \
112.         (x, imageset(Lambda(n, n*pi + (-1)**n*acsc(y)), S.Integers))
113. 
114.     assert invert_real(csc(exp(x)), y, x) == \
115.         (x, imageset(Lambda(n, log((-1)**n*acsc(y) + n*pi)), S.Integers))
116. 
117.     assert invert_real(cos(x), y, x) == \
118.         (x, Union(imageset(Lambda(n, 2*n*pi + acos(y)), S.Integers), \
119.                 imageset(Lambda(n, 2*n*pi - acos(y)), S.Integers)))
120. 
121.     assert invert_real(cos(exp(x)), y, x) == \
122.         (x, Union(imageset(Lambda(n, log(2*n*pi + acos(y))), S.Integers), \
123.                 imageset(Lambda(n, log(2*n*pi - acos(y))), S.Integers)))
124. 
125.     assert invert_real(sec(x), y, x) == \
126.         (x, Union(imageset(Lambda(n, 2*n*pi + asec(y)), S.Integers), \
127.                 imageset(Lambda(n, 2*n*pi - asec(y)), S.Integers)))
128. 
129.     assert invert_real(sec(exp(x)), y, x) == \
130.         (x, Union(imageset(Lambda(n, log(2*n*pi + asec(y))), S.Integers), \
131.                 imageset(Lambda(n, log(2*n*pi - asec(y))), S.Integers)))
132. 
133.     assert invert_real(tan(x), y, x) == \
134.         (x, imageset(Lambda(n, n*pi + atan(y)), S.Integers))
135. 
136.     assert invert_real(tan(exp(x)), y, x) == \
137.         (x, imageset(Lambda(n, log(n*pi + atan(y))), S.Integers))
138. 
139.     assert invert_real(cot(x), y, x) == \
140.         (x, imageset(Lambda(n, n*pi + acot(y)), S.Integers))
141. 
142.     assert invert_real(cot(exp(x)), y, x) == \
143.         (x, imageset(Lambda(n, log(n*pi + acot(y))), S.Integers))
144. 
145.     assert invert_real(tan(tan(x)), y, x) == \
146.         (tan(x), imageset(Lambda(n, n*pi + atan(y)), S.Integers))
147. 
148.     x = Symbol('x', positive=True)
149.     assert invert_real(x**pi, y, x) == (x, FiniteSet(y**(1/pi)))
150. 
151. 
152. def test_invert_complex():
153.     assert invert_complex(x + 3, y, x) == (x, FiniteSet(y - 3))
154.     assert invert_complex(x*3, y, x) == (x, FiniteSet(y / 3))
155. 
156.     assert invert_complex(exp(x), y, x) == \
157.         (x, imageset(Lambda(n, I*(2*pi*n + arg(y)) + log(Abs(y))), S.Integers))
158. 
159.     assert invert_complex(log(x), y, x) == (x, FiniteSet(exp(y)))
160. 
161.     raises(ValueError, lambda: invert_real(1, y, x))
162.     raises(ValueError, lambda: invert_complex(x, x, x))
163.     raises(ValueError, lambda: invert_complex(x, x, 1))
164. 
165.     # https://github.com/skirpichev/omg/issues/16
166.     assert invert_complex(sinh(x), 0, x) != (x, FiniteSet(0))
167. 
168. 
169. def test_domain_check():
170.     assert domain_check(1/(1 + (1/(x+1))**2), x, -1) is False
171.     assert domain_check(x**2, x, 0) is True
172.     assert domain_check(x, x, oo) is False
173.     assert domain_check(0, x, oo) is False
174. 
175. 
176. def test_issue_11536():
177.     assert solveset(0**x - 100, x, S.Reals) == S.EmptySet
178.     assert solveset(0**x - 1, x, S.Reals) == FiniteSet(0)
179. 
180. 
181. def test_issue_17479():
182.     import sympy as sb
183.     from sympy.solvers.solveset import nonlinsolve
184.     x, y, z = sb.symbols("x, y, z")
185.     f = (x**2 + y**2)**2 + (x**2 + z**2)**2 - 2*(2*x**2 + y**2 + z**2)
186.     fx = sb.diff(f, x)
187.     fy = sb.diff(f, y)
188.     fz = sb.diff(f, z)
189.     sol = nonlinsolve([fx, fy, fz], [x, y, z])
190.     # FIXME: This previously gave 18 solutions and now gives 20 due to fixes
191.     # in the handling of intersection of FiniteSets or possibly a small change
192.     # to ImageSet._contains. However Using expand I can turn this into 16
193.     # solutions either way:
194.     #
195.     #    >>> len(FiniteSet(*(Tuple(*(expand(w) for w in s)) for s in sol)))
196.     #    16
197.     #
198.     assert len(sol) == 20
199. 
200. 
201. def test_is_function_class_equation():
202.     from sympy.abc import x, a
203.     assert _is_function_class_equation(TrigonometricFunction,
204.                                        tan(x), x) is True
205.     assert _is_function_class_equation(TrigonometricFunction,
206.                                        tan(x) - 1, x) is True
207.     assert _is_function_class_equation(TrigonometricFunction,
208.                                        tan(x) + sin(x), x) is True
209.     assert _is_function_class_equation(TrigonometricFunction,
210.                                        tan(x) + sin(x) - a, x) is True
211.     assert _is_function_class_equation(TrigonometricFunction,
212.                                        sin(x)*tan(x) + sin(x), x) is True
213.     assert _is_function_class_equation(TrigonometricFunction,
214.                                        sin(x)*tan(x + a) + sin(x), x) is True
215.     assert _is_function_class_equation(TrigonometricFunction,
216.                                        sin(x)*tan(x*a) + sin(x), x) is True
217.     assert _is_function_class_equation(TrigonometricFunction,
218.                                        a*tan(x) - 1, x) is True
219.     assert _is_function_class_equation(TrigonometricFunction,
220.                                        tan(x)**2 + sin(x) - 1, x) is True
221.     assert _is_function_class_equation(TrigonometricFunction,
222.                                        tan(x) + x, x) is False
223.     assert _is_function_class_equation(TrigonometricFunction,
224.                                        tan(x**2), x) is False
225.     assert _is_function_class_equation(TrigonometricFunction,
226.                                        tan(x**2) + sin(x), x) is False
227.     assert _is_function_class_equation(TrigonometricFunction,
228.                                        tan(x)**sin(x), x) is False
229.     assert _is_function_class_equation(TrigonometricFunction,
230.                                        tan(sin(x)) + sin(x), x) is False
231.     assert _is_function_class_equation(HyperbolicFunction,
232.                                        tanh(x), x) is True
233.     assert _is_function_class_equation(HyperbolicFunction,
234.                                        tanh(x) - 1, x) is True
235.     assert _is_function_class_equation(HyperbolicFunction,
236.                                        tanh(x) + sinh(x), x) is True
237.     assert _is_function_class_equation(HyperbolicFunction,
238.                                        tanh(x) + sinh(x) - a, x) is True
239.     assert _is_function_class_equation(HyperbolicFunction,
240.                                        sinh(x)*tanh(x) + sinh(x), x) is True
241.     assert _is_function_class_equation(HyperbolicFunction,
242.                                        sinh(x)*tanh(x + a) + sinh(x), x) is True
243.     assert _is_function_class_equation(HyperbolicFunction,
244.                                        sinh(x)*tanh(x*a) + sinh(x), x) is True
245.     assert _is_function_class_equation(HyperbolicFunction,
246.                                        a*tanh(x) - 1, x) is True
247.     assert _is_function_class_equation(HyperbolicFunction,
248.                                        tanh(x)**2 + sinh(x) - 1, x) is True
249.     assert _is_function_class_equation(HyperbolicFunction,
250.                                        tanh(x) + x, x) is False
251.     assert _is_function_class_equation(HyperbolicFunction,
252.                                        tanh(x**2), x) is False
253.     assert _is_function_class_equation(HyperbolicFunction,
254.                                        tanh(x**2) + sinh(x), x) is False
255.     assert _is_function_class_equation(HyperbolicFunction,
256.                                        tanh(x)**sinh(x), x) is False
257.     assert _is_function_class_equation(HyperbolicFunction,
258.                                        tanh(sinh(x)) + sinh(x), x) is False
259. 
260. 
261. def test_garbage_input():
262.     raises(ValueError, lambda: solveset_real([x], x))
263.     assert solveset_real(x, 1) == S.EmptySet
264.     assert solveset_real(x - 1, 1) == FiniteSet(x)
265.     assert solveset_real(x, pi) == S.EmptySet
266.     assert solveset_real(x, x**2) == S.EmptySet
267. 
268.     raises(ValueError, lambda: solveset_complex([x], x))
269.     assert solveset_complex(x, pi) == S.EmptySet
270. 
271.     raises(ValueError, lambda: solveset((x, y), x))
272.     raises(ValueError, lambda: solveset(x + 1, S.Reals))
273.     raises(ValueError, lambda: solveset(x + 1, x, 2))
274. 
275. 
276. def test_solve_mul():
277.     assert solveset_real((a*x + b)*(exp(x) - 3), x) == \
278.         Union({log(3)}, Intersection({-b/a}, S.Reals))
279.     anz = Symbol('anz', nonzero=True)
280.     assert solveset_real((anz*x + b)*(exp(x) - 3), x) == \
281.         FiniteSet(-b/anz, log(3))
282.     assert solveset_real((2*x + 8)*(8 + exp(x)), x) == FiniteSet(S(-4))
283.     assert solveset_real(x/log(x), x) == EmptySet()
284. 
285. 
286. def test_solve_invert():
287.     assert solveset_real(exp(x) - 3, x) == FiniteSet(log(3))
288.     assert solveset_real(log(x) - 3, x) == FiniteSet(exp(3))
289. 
290.     assert solveset_real(3**(x + 2), x) == FiniteSet()
291.     assert solveset_real(3**(2 - x), x) == FiniteSet()
292. 
293.     assert solveset_real(y - b*exp(a/x), x) == Intersection(
294.         S.Reals, FiniteSet(a/log(y/b)))
295. 
296.     # issue 4504
297.     assert solveset_real(2**x - 10, x) == FiniteSet(1 + log(5)/log(2))
298. 
299. 
300. def test_errorinverses():
301.     assert solveset_real(erf(x) - S.Half, x) == \
302.         FiniteSet(erfinv(S.Half))
303.     assert solveset_real(erfinv(x) - 2, x) == \
304.         FiniteSet(erf(2))
305.     assert solveset_real(erfc(x) - S.One, x) == \
306.         FiniteSet(erfcinv(S.One))
307.     assert solveset_real(erfcinv(x) - 2, x) == FiniteSet(erfc(2))
308. 
309. 
310. def test_solve_polynomial():
311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))
312. 
313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)
314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)
315. 
316.     a11, a12, a21, a22, b1, b2 = symbols('a11, a12, a21, a22, b1, b2')
317. 
318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(
319.         -2 + 3 ** S.Half,
320.         S(4),
321.         -2 - 3 ** S.Half)
322. 
323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)
324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)
325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)
326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)
327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1
328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0
329. 
330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,
331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)
332. 
333. 
334. def test_return_root_of():
335.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20
336.     s = list(solveset_complex(f, x))
337.     for root in s:
338.         assert root.func == CRootOf
339. 
340.     # if one uses solve to get the roots of a polynomial that has a CRootOf
341.     # solution, make sure that the use of nfloat during the solve process
342.     # doesn't fail. Note: if you want numerical solutions to a polynomial
343.     # it is *much* faster to use nroots to get them than to solve the
344.     # equation only to get CRootOf solutions which are then numerically
345.     # evaluated. So for eq = x**5 + 3*x + 7 do Poly(eq).nroots() rather
346.     # than [i.n() for i in solve(eq)] to get the numerical roots of eq.
347.     assert nfloat(list(solveset_complex(x**5 + 3*x**3 + 7, x))[0],
348.                   exponent=False) == CRootOf(x**5 + 3*x**3 + 7, 0).n()
349. 
350.     sol = list(solveset_complex(x**6 - 2*x + 2, x))
351.     assert all(isinstance(i, CRootOf) for i in sol) and len(sol) == 6
352. 
353.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20
354.     s = list(solveset_complex(f, x))
355.     for root in s:
356.         assert root.func == CRootOf
357. 
358.     s = x**5 + 4*x**3 + 3*x**2 + Rational(7, 4)
359.     assert solveset_complex(s, x) == \
360.         FiniteSet(*Poly(s*4, domain='ZZ').all_roots())
361. 
362.     # Refer issue #7876
363.     eq = x*(x - 1)**2*(x + 1)*(x**6 - x + 1)
364.     assert solveset_complex(eq, x) == \
365.         FiniteSet(-1, 0, 1, CRootOf(x**6 - x + 1, 0),
366.                        CRootOf(x**6 - x + 1, 1),
367.                        CRootOf(x**6 - x + 1, 2),
368.                        CRootOf(x**6 - x + 1, 3),
369.                        CRootOf(x**6 - x + 1, 4),
370.                        CRootOf(x**6 - x + 1, 5))
371. 
372. 
373. def test__has_rational_power():
374.     from sympy.solvers.solveset import _has_rational_power
375.     assert _has_rational_power(sqrt(2), x)[0] is False
376.     assert _has_rational_power(x*sqrt(2), x)[0] is False
377. 
378.     assert _has_rational_power(x**2*sqrt(x), x) == (True, 2)
379.     assert _has_rational_power(sqrt(2)*x**Rational(1, 3), x) == (True, 3)
380.     assert _has_rational_power(sqrt(x)*x**Rational(1, 3), x) == (True, 6)
381. 
382. 
383. def test_solveset_sqrt_1():
384.     assert solveset_real(sqrt(5*x + 6) - 2 - x, x) == \
385.         FiniteSet(-S.One, S(2))
386.     assert solveset_real(sqrt(x - 1) - x + 7, x) == FiniteSet(10)
387.     assert solveset_real(sqrt(x - 2) - 5, x) == FiniteSet(27)
388.     assert solveset_real(sqrt(x) - 2 - 5, x) == FiniteSet(49)
389.     assert solveset_real(sqrt(x**3), x) == FiniteSet(0)
390.     assert solveset_real(sqrt(x - 1), x) == FiniteSet(1)
391. 
392. 
393. def test_solveset_sqrt_2():
394.     # http://tutorial.math.lamar.edu/Classes/Alg/SolveRadicalEqns.aspx#Solve_Rad_Ex2_a
395.     assert solveset_real(sqrt(2*x - 1) - sqrt(x - 4) - 2, x) == \
396.         FiniteSet(S(5), S(13))
397.     assert solveset_real(sqrt(x + 7) + 2 - sqrt(3 - x), x) == \
398.         FiniteSet(-6)
399. 
400.     # http://www.purplemath.com/modules/solverad.htm
401.     assert solveset_real(sqrt(17*x - sqrt(x**2 - 5)) - 7, x) == \
402.         FiniteSet(3)
403. 
404.     eq = x + 1 - (x**4 + 4*x**3 - x)**Rational(1, 4)
405.     assert solveset_real(eq, x) == FiniteSet(Rational(-1, 2), Rational(-1, 3))
406. 
407.     eq = sqrt(2*x + 9) - sqrt(x + 1) - sqrt(x + 4)
408.     assert solveset_real(eq, x) == FiniteSet(0)
409. 
410.     eq = sqrt(x + 4) + sqrt(2*x - 1) - 3*sqrt(x - 1)
411.     assert solveset_real(eq, x) == FiniteSet(5)
412. 
413.     eq = sqrt(x)*sqrt(x - 7) - 12
414.     assert solveset_real(eq, x) == FiniteSet(16)
415. 
416.     eq = sqrt(x - 3) + sqrt(x) - 3
417.     assert solveset_real(eq, x) == FiniteSet(4)
418. 
419.     eq = sqrt(2*x**2 - 7) - (3 - x)
420.     assert solveset_real(eq, x) == FiniteSet(-S(8), S(2))
421. 
422.     # others
423.     eq = sqrt(9*x**2 + 4) - (3*x + 2)
424.     assert solveset_real(eq, x) == FiniteSet(0)
425. 
426.     assert solveset_real(sqrt(x - 3) - sqrt(x) - 3, x) == FiniteSet()
427. 
428.     eq = (2*x - 5)**Rational(1, 3) - 3
429.     assert solveset_real(eq, x) == FiniteSet(16)
430. 
431.     assert solveset_real(sqrt(x) + sqrt(sqrt(x)) - 4, x) == \
432.         FiniteSet((Rational(-1, 2) + sqrt(17)/2)**4)
433. 
434.     eq = sqrt(x) - sqrt(x - 1) + sqrt(sqrt(x))
435.     assert solveset_real(eq, x) == FiniteSet()
436. 
437.     eq = (sqrt(x) + sqrt(x + 1) + sqrt(1 - x) - 6*sqrt(5)/5)
438.     ans = solveset_real(eq, x)
439.     ra = S('''-1484/375 - 4*(-1/2 + sqrt(3)*I/2)*(-12459439/52734375 +
440.     114*sqrt(12657)/78125)**(1/3) - 172564/(140625*(-1/2 +
441.     sqrt(3)*I/2)*(-12459439/52734375 + 114*sqrt(12657)/78125)**(1/3))''')
442.     rb = Rational(4, 5)
443.     assert all(abs(eq.subs(x, i).n()) < 1e-10 for i in (ra, rb)) and \
444.         len(ans) == 2 and \
445.         set([i.n(chop=True) for i in ans]) == \
446.         set([i.n(chop=True) for i in (ra, rb)])
447. 
448.     assert solveset_real(sqrt(x) + x**Rational(1, 3) +
449.                                  x**Rational(1, 4), x) == FiniteSet(0)
450. 
451.     assert solveset_real(x/sqrt(x**2 + 1), x) == FiniteSet(0)
452. 
453.     eq = (x - y**3)/((y**2)*sqrt(1 - y**2))
454.     assert solveset_real(eq, x) == FiniteSet(y**3)
455. 
456.     # issue 4497
457.     assert solveset_real(1/(5 + x)**Rational(1, 5) - 9, x) == \
458.         FiniteSet(Rational(-295244, 59049))
459. 
460. 
461. @XFAIL
462. def test_solve_sqrt_fail():
463.     # this only works if we check real_root(eq.subs(x, Rational(1, 3)))
464.     # but checksol doesn't work like that
465.     eq = (x**3 - 3*x**2)**Rational(1, 3) + 1 - x
466.     assert solveset_real(eq, x) == FiniteSet(Rational(1, 3))
467. 
468. 
469. @slow
470. def test_solve_sqrt_3():
471.     R = Symbol('R')
472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)
473.     sol = solveset_complex(eq, R)
474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,
475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +
476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +
477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +
478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -
479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]
481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +
483.             Rational(5, 3) +
484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]
487. 
488.     assert sol._args[0] == FiniteSet(*fset)
489.     assert sol._args[1] == ConditionSet(
490.         R,
491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),
492.         FiniteSet(*cset))
493. 
494.     # the number of real roots will depend on the value of m: for m=1 there are 4
495.     # and for m=-1 there are none.
496.     eq = -sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) + sqrt((-m**2/2 - sqrt(
497.         4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m - sqrt(
498.             4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2)
499.     unsolved_object = ConditionSet(q, Eq(sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) -
500.         sqrt((-m**2/2 - sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m -

File: sympy/solvers/tests/test_solveset.py
Line number range: 501 - 10000
Content:
501.         sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2), 0), S.Reals)
502.     assert solveset_real(eq, q) == unsolved_object
503. 
504. 
505. def test_solve_polynomial_symbolic_param():
506.     assert solveset_complex((x**2 - 1)**2 - a, x) == \
507.         FiniteSet(sqrt(1 + sqrt(a)), -sqrt(1 + sqrt(a)),
508.                   sqrt(1 - sqrt(a)), -sqrt(1 - sqrt(a)))
509. 
510.     # issue 4507
511.     assert solveset_complex(y - b/(1 + a*x), x) == \
512.         FiniteSet((b/y - 1)/a) - FiniteSet(-1/a)
513. 
514.     # issue 4508
515.     assert solveset_complex(y - b*x/(a + x), x) == \
516.         FiniteSet(-a*y/(y - b)) - FiniteSet(-a)
517. 
518. 
519. def test_solve_rational():
520.     assert solveset_real(1/x + 1, x) == FiniteSet(-S.One)
521.     assert solveset_real(1/exp(x) - 1, x) == FiniteSet(0)
522.     assert solveset_real(x*(1 - 5/x), x) == FiniteSet(5)
523.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)
524.     assert solveset_real((x**2/(7 - x)).diff(x), x) == \
525.         FiniteSet(S.Zero, S(14))
526. 
527. 
528. def test_solveset_real_gen_is_pow():
529.     assert solveset_real(sqrt(1) + 1, x) == EmptySet()
530. 
531. 
532. def test_no_sol():
533.     assert solveset(1 - oo*x) == EmptySet()
534.     assert solveset(oo*x, x) == EmptySet()
535.     assert solveset(oo*x - oo, x) == EmptySet()
536.     assert solveset_real(4, x) == EmptySet()
537.     assert solveset_real(exp(x), x) == EmptySet()
538.     assert solveset_real(x**2 + 1, x) == EmptySet()
539.     assert solveset_real(-3*a/sqrt(x), x) == EmptySet()
540.     assert solveset_real(1/x, x) == EmptySet()
541.     assert solveset_real(-(1 + x)/(2 + x)**2 + 1/(2 + x), x) == \
542.         EmptySet()
543. 
544. 
545. def test_sol_zero_real():
546.     assert solveset_real(0, x) == S.Reals
547.     assert solveset(0, x, Interval(1, 2)) == Interval(1, 2)
548.     assert solveset_real(-x**2 - 2*x + (x + 1)**2 - 1, x) == S.Reals
549. 
550. 
551. def test_no_sol_rational_extragenous():
552.     assert solveset_real((x/(x + 1) + 3)**(-2), x) == EmptySet()
553.     assert solveset_real((x - 1)/(1 + 1/(x - 1)), x) == EmptySet()
554. 
555. 
556. def test_solve_polynomial_cv_1a():
557.     """
558.     Test for solving on equations that can be converted to
559.     a polynomial equation using the change of variable y -> x**Rational(p, q)
560.     """
561.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)
562.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)
563.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)
564.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)
565.     assert solveset_real(x*(x**(S.One / 3) - 3), x) == \
566.         FiniteSet(S.Zero, S(27))
567. 
568. 
569. def test_solveset_real_rational():
570.     """Test solveset_real for rational functions"""
571.     assert solveset_real((x - y**3) / ((y**2)*sqrt(1 - y**2)), x) \
572.         == FiniteSet(y**3)
573.     # issue 4486
574.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)
575. 
576. 
577. def test_solveset_real_log():
578.     assert solveset_real(log((x-1)*(x+1)), x) == \
579.         FiniteSet(sqrt(2), -sqrt(2))
580. 
581. 
582. def test_poly_gens():
583.     assert solveset_real(4**(2*(x**2) + 2*x) - 8, x) == \
584.         FiniteSet(Rational(-3, 2), S.Half)
585. 
586. 
587. def test_solve_abs():
588.     x = Symbol('x')
589.     n = Dummy('n')
590.     raises(ValueError, lambda: solveset(Abs(x) - 1, x))
591.     assert solveset(Abs(x) - n, x, S.Reals) == ConditionSet(x, Contains(n, Interval(0, oo)), {-n, n})
592.     assert solveset_real(Abs(x) - 2, x) == FiniteSet(-2, 2)
593.     assert solveset_real(Abs(x) + 2, x) is S.EmptySet
594.     assert solveset_real(Abs(x + 3) - 2*Abs(x - 3), x) == \
595.         FiniteSet(1, 9)
596.     assert solveset_real(2*Abs(x) - Abs(x - 1), x) == \
597.         FiniteSet(-1, Rational(1, 3))
598. 
599.     sol = ConditionSet(
600.             x,
601.             And(
602.                 Contains(b, Interval(0, oo)),
603.                 Contains(a + b, Interval(0, oo)),
604.                 Contains(a - b, Interval(0, oo))),
605.             FiniteSet(-a - b - 3, -a + b - 3, a - b - 3, a + b - 3))
606.     eq = Abs(Abs(x + 3) - a) - b
607.     assert invert_real(eq, 0, x)[1] == sol
608.     reps = {a: 3, b: 1}
609.     eqab = eq.subs(reps)
610.     for i in sol.subs(reps):
611.         assert not eqab.subs(x, i)
612.     assert solveset(Eq(sin(Abs(x)), 1), x, domain=S.Reals) == Union(
613.         Intersection(Interval(0, oo),
614.             ImageSet(Lambda(n, (-1)**n*pi/2 + n*pi), S.Integers)),
615.         Intersection(Interval(-oo, 0),
616.             ImageSet(Lambda(n, n*pi - (-1)**(-n)*pi/2), S.Integers)))
617. 
618. 
619. 
620. def test_issue_9565():
621.     assert solveset_real(Abs((x - 1)/(x - 5)) <= Rational(1, 3), x) == Interval(-1, 2)
622. 
623. 
624. def test_issue_10069():
625.     eq = abs(1/(x - 1)) - 1 > 0
626.     u = Union(Interval.open(0, 1), Interval.open(1, 2))
627.     assert solveset_real(eq, x) == u
628. 
629. 
630. def test_real_imag_splitting():
631.     a, b = symbols('a b', real=True)
632.     assert solveset_real(sqrt(a**2 - b**2) - 3, a) == \
633.         FiniteSet(-sqrt(b**2 + 9), sqrt(b**2 + 9))
634.     assert solveset_real(sqrt(a**2 + b**2) - 3, a) != \
635.         S.EmptySet
636. 
637. 
638. def test_units():
639.     assert solveset_real(1/x - 1/(2*cm), x) == FiniteSet(2*cm)
640. 
641. 
642. def test_solve_only_exp_1():
643.     y = Symbol('y', positive=True)
644.     assert solveset_real(exp(x) - y, x) == FiniteSet(log(y))
645.     assert solveset_real(exp(x) + exp(-x) - 4, x) == \
646.         FiniteSet(log(-sqrt(3) + 2), log(sqrt(3) + 2))
647.     assert solveset_real(exp(x) + exp(-x) - y, x) != S.EmptySet
648. 
649. 
650. def test_atan2():
651.     # The .inverse() method on atan2 works only if x.is_real is True and the
652.     # second argument is a real constant
653.     assert solveset_real(atan2(x, 2) - pi/3, x) == FiniteSet(2*sqrt(3))
654. 
655. 
656. def test_piecewise_solveset():
657.     eq = Piecewise((x - 2, Gt(x, 2)), (2 - x, True)) - 3
658.     assert set(solveset_real(eq, x)) == set(FiniteSet(-1, 5))
659. 
660.     absxm3 = Piecewise(
661.         (x - 3, 0 <= x - 3),
662.         (3 - x, 0 > x - 3))
663.     y = Symbol('y', positive=True)
664.     assert solveset_real(absxm3 - y, x) == FiniteSet(-y + 3, y + 3)
665. 
666.     f = Piecewise(((x - 2)**2, x >= 0), (0, True))
667.     assert solveset(f, x, domain=S.Reals) == Union(FiniteSet(2), Interval(-oo, 0, True, True))
668. 
669.     assert solveset(
670.         Piecewise((x + 1, x > 0), (I, True)) - I, x, S.Reals
671.         ) == Interval(-oo, 0)
672. 
673.     assert solveset(Piecewise((x - 1, Ne(x, I)), (x, True)), x) == FiniteSet(1)
674. 
675. 
676. def test_solveset_complex_polynomial():
677.     from sympy.abc import x, a, b, c
678.     assert solveset_complex(a*x**2 + b*x + c, x) == \
679.         FiniteSet(-b/(2*a) - sqrt(-4*a*c + b**2)/(2*a),
680.                   -b/(2*a) + sqrt(-4*a*c + b**2)/(2*a))
681. 
682.     assert solveset_complex(x - y**3, y) == FiniteSet(
683.         (-x**Rational(1, 3))/2 + I*sqrt(3)*x**Rational(1, 3)/2,
684.         x**Rational(1, 3),
685.         (-x**Rational(1, 3))/2 - I*sqrt(3)*x**Rational(1, 3)/2)
686. 
687.     assert solveset_complex(x + 1/x - 1, x) == \
688.         FiniteSet(S.Half + I*sqrt(3)/2, S.Half - I*sqrt(3)/2)
689. 
690. 
691. def test_sol_zero_complex():
692.     assert solveset_complex(0, x) == S.Complexes
693. 
694. 
695. def test_solveset_complex_rational():
696.     assert solveset_complex((x - 1)*(x - I)/(x - 3), x) == \
697.         FiniteSet(1, I)
698. 
699.     assert solveset_complex((x - y**3)/((y**2)*sqrt(1 - y**2)), x) == \
700.         FiniteSet(y**3)
701.     assert solveset_complex(-x**2 - I, x) == \
702.         FiniteSet(-sqrt(2)/2 + sqrt(2)*I/2, sqrt(2)/2 - sqrt(2)*I/2)
703. 
704. 
705. def test_solve_quintics():
706.     skip("This test is too slow")
707.     f = x**5 - 110*x**3 - 55*x**2 + 2310*x + 979
708.     s = solveset_complex(f, x)
709.     for root in s:
710.         res = f.subs(x, root.n()).n()
711.         assert tn(res, 0)
712. 
713.     f = x**5 + 15*x + 12
714.     s = solveset_complex(f, x)
715.     for root in s:
716.         res = f.subs(x, root.n()).n()
717.         assert tn(res, 0)
718. 
719. 
720. def test_solveset_complex_exp():
721.     from sympy.abc import x, n
722.     assert solveset_complex(exp(x) - 1, x) == \
723.         imageset(Lambda(n, I*2*n*pi), S.Integers)
724.     assert solveset_complex(exp(x) - I, x) == \
725.         imageset(Lambda(n, I*(2*n*pi + pi/2)), S.Integers)
726.     assert solveset_complex(1/exp(x), x) == S.EmptySet
727.     assert solveset_complex(sinh(x).rewrite(exp), x) == \
728.         imageset(Lambda(n, n*pi*I), S.Integers)
729. 
730. 
731. def test_solveset_real_exp():
732.     from sympy.abc import x, y
733.     assert solveset(Eq((-2)**x, 4), x, S.Reals) == FiniteSet(2)
734.     assert solveset(Eq(-2**x, 4), x, S.Reals) == S.EmptySet
735.     assert solveset(Eq((-3)**x, 27), x, S.Reals) == S.EmptySet
736.     assert solveset(Eq((-5)**(x+1), 625), x, S.Reals) == FiniteSet(3)
737.     assert solveset(Eq(2**(x-3), -16), x, S.Reals) == S.EmptySet
738.     assert solveset(Eq((-3)**(x - 3), -3**39), x, S.Reals) == FiniteSet(42)
739.     assert solveset(Eq(2**x, y), x, S.Reals) == Intersection(S.Reals, FiniteSet(log(y)/log(2)))
740. 
741.     assert invert_real((-2)**(2*x) - 16, 0, x) == (x, FiniteSet(2))
742. 
743. 
744. def test_solve_complex_log():
745.     assert solveset_complex(log(x), x) == FiniteSet(1)
746.     assert solveset_complex(1 - log(a + 4*x**2), x) == \
747.         FiniteSet(-sqrt(-a + E)/2, sqrt(-a + E)/2)
748. 
749. 
750. def test_solve_complex_sqrt():
751.     assert solveset_complex(sqrt(5*x + 6) - 2 - x, x) == \
752.         FiniteSet(-S.One, S(2))
753.     assert solveset_complex(sqrt(5*x + 6) - (2 + 2*I) - x, x) == \
754.         FiniteSet(-S(2), 3 - 4*I)
755.     assert solveset_complex(4*x*(1 - a * sqrt(x)), x) == \
756.         FiniteSet(S.Zero, 1 / a ** 2)
757. 
758. 
759. def test_solveset_complex_tan():
760.     s = solveset_complex(tan(x).rewrite(exp), x)
761.     assert s == imageset(Lambda(n, pi*n), S.Integers) - \
762.         imageset(Lambda(n, pi*n + pi/2), S.Integers)
763. 
764. 
765. @nocache_fail
766. def test_solve_trig():
767.     from sympy.abc import n
768.     assert solveset_real(sin(x), x) == \
769.         Union(imageset(Lambda(n, 2*pi*n), S.Integers),
770.               imageset(Lambda(n, 2*pi*n + pi), S.Integers))
771. 
772.     assert solveset_real(sin(x) - 1, x) == \
773.         imageset(Lambda(n, 2*pi*n + pi/2), S.Integers)
774. 
775.     assert solveset_real(cos(x), x) == \
776.         Union(imageset(Lambda(n, 2*pi*n + pi/2), S.Integers),
777.               imageset(Lambda(n, 2*pi*n + pi*Rational(3, 2)), S.Integers))
778. 
779.     assert solveset_real(sin(x) + cos(x), x) == \
780.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(3, 4)), S.Integers),
781.               imageset(Lambda(n, 2*n*pi + pi*Rational(7, 4)), S.Integers))
782. 
783.     assert solveset_real(sin(x)**2 + cos(x)**2, x) == S.EmptySet
784. 
785.     # This fails when running with the cache off:
786.     assert solveset_complex(cos(x) - S.Half, x) == \
787.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(5, 3)), S.Integers),
788.               imageset(Lambda(n, 2*n*pi + pi/3), S.Integers))
789. 
790.     y, a = symbols('y,a')
791.     assert solveset(sin(y + a) - sin(y), a, domain=S.Reals) == \
792.         Union(ImageSet(Lambda(n, 2*n*pi), S.Integers),
793.         Intersection(ImageSet(Lambda(n, -I*(I*(
794.         2*n*pi + arg(-exp(-2*I*y))) +
795.         2*im(y))), S.Integers), S.Reals))
796. 
797.     assert solveset_real(sin(2*x)*cos(x) + cos(2*x)*sin(x)-1, x) == \
798.                             ImageSet(Lambda(n, n*pi*Rational(2, 3) + pi/6), S.Integers)
799. 
800.     # Tests for _solve_trig2() function
801.     assert solveset_real(2*cos(x)*cos(2*x) - 1, x) == \
802.           Union(ImageSet(Lambda(n, 2*n*pi + 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +
803.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +
804.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6)))), S.Integers),
805.                   ImageSet(Lambda(n, 2*n*pi - 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +
806.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +
807.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6))) +
808.                   2*pi), S.Integers))
809. 
810.     assert solveset_real(2*tan(x)*sin(x) + 1, x) == Union(
811.         ImageSet(Lambda(n, 2*n*pi + atan(sqrt(2)*sqrt(-1 +sqrt(17))/
812.             (1 - sqrt(17))) + pi), S.Integers),
813.         ImageSet(Lambda(n, 2*n*pi - atan(sqrt(2)*sqrt(-1 + sqrt(17))/
814.             (1 - sqrt(17))) + pi), S.Integers))
815. 
816.     assert solveset_real(cos(2*x)*cos(4*x) - 1, x) == \
817.                             ImageSet(Lambda(n, n*pi), S.Integers)
818. 
819. 
820. def test_solve_hyperbolic():
821.     # actual solver: _solve_trig1
822.     n = Dummy('n')
823.     assert solveset(sinh(x) + cosh(x), x) == S.EmptySet
824.     assert solveset(sinh(x) + cos(x), x) == ConditionSet(x,
825.         Eq(cos(x) + sinh(x), 0), S.Complexes)
826.     assert solveset_real(sinh(x) + sech(x), x) == FiniteSet(
827.         log(sqrt(sqrt(5) - 2)))
828.     assert solveset_real(3*cosh(2*x) - 5, x) == FiniteSet(
829.         log(sqrt(3)/3), log(sqrt(3)))
830.     assert solveset_real(sinh(x - 3) - 2, x) == FiniteSet(
831.         log((2 + sqrt(5))*exp(3)))
832.     assert solveset_real(cosh(2*x) + 2*sinh(x) - 5, x) == FiniteSet(
833.         log(-2 + sqrt(5)), log(1 + sqrt(2)))
834.     assert solveset_real((coth(x) + sinh(2*x))/cosh(x) - 3, x) == FiniteSet(
835.         log(S.Half + sqrt(5)/2), log(1 + sqrt(2)))
836.     assert solveset_real(cosh(x)*sinh(x) - 2, x) == FiniteSet(
837.         log(sqrt(4 + sqrt(17))))
838.     assert solveset_real(sinh(x) + tanh(x) - 1, x) == FiniteSet(
839.         log(sqrt(2)/2 + sqrt(-S(1)/2 + sqrt(2))))
840.     assert solveset_complex(sinh(x) - I/2, x) == Union(
841.         ImageSet(Lambda(n, I*(2*n*pi + 5*pi/6)), S.Integers),
842.         ImageSet(Lambda(n, I*(2*n*pi + pi/6)), S.Integers))
843.     assert solveset_complex(sinh(x) + sech(x), x) == Union(
844.         ImageSet(Lambda(n, 2*n*I*pi + log(sqrt(-2 + sqrt(5)))), S.Integers),
845.         ImageSet(Lambda(n, I*(2*n*pi + pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers),
846.         ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sqrt(-2 + sqrt(5)))), S.Integers),
847.         ImageSet(Lambda(n, I*(2*n*pi - pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers))
848.     # issues #9606 / #9531:
849.     assert solveset(sinh(x), x, S.Reals) == FiniteSet(0)
850.     assert solveset(sinh(x), x, S.Complexes) == Union(
851.         ImageSet(Lambda(n, I*(2*n*pi + pi)), S.Integers),
852.         ImageSet(Lambda(n, 2*n*I*pi), S.Integers))
853. 
854. 
855. def test_solve_invalid_sol():
856.     assert 0 not in solveset_real(sin(x)/x, x)
857.     assert 0 not in solveset_complex((exp(x) - 1)/x, x)
858. 
859. 
860. @XFAIL
861. def test_solve_trig_simplified():
862.     from sympy.abc import n
863.     assert solveset_real(sin(x), x) == \
864.         imageset(Lambda(n, n*pi), S.Integers)
865. 
866.     assert solveset_real(cos(x), x) == \
867.         imageset(Lambda(n, n*pi + pi/2), S.Integers)
868. 
869.     assert solveset_real(cos(x) + sin(x), x) == \
870.         imageset(Lambda(n, n*pi - pi/4), S.Integers)
871. 
872. 
873. @XFAIL
874. def test_solve_lambert():
875.     assert solveset_real(x*exp(x) - 1, x) == FiniteSet(LambertW(1))
876.     assert solveset_real(exp(x) + x, x) == FiniteSet(-LambertW(1))
877.     assert solveset_real(x + 2**x, x) == \
878.         FiniteSet(-LambertW(log(2))/log(2))
879. 
880.     # issue 4739
881.     ans = solveset_real(3*x + 5 + 2**(-5*x + 3), x)
882.     assert ans == FiniteSet(Rational(-5, 3) +
883.                             LambertW(-10240*2**Rational(1, 3)*log(2)/3)/(5*log(2)))
884. 
885.     eq = 2*(3*x + 4)**5 - 6*7**(3*x + 9)
886.     result = solveset_real(eq, x)
887.     ans = FiniteSet((log(2401) +
888.                      5*LambertW(-log(7**(7*3**Rational(1, 5)/5))))/(3*log(7))/-1)
889.     assert result == ans
890.     assert solveset_real(eq.expand(), x) == result
891. 
892.     assert solveset_real(5*x - 1 + 3*exp(2 - 7*x), x) == \
893.         FiniteSet(Rational(1, 5) + LambertW(-21*exp(Rational(3, 5))/5)/7)
894. 
895.     assert solveset_real(2*x + 5 + log(3*x - 2), x) == \
896.         FiniteSet(Rational(2, 3) + LambertW(2*exp(Rational(-19, 3))/3)/2)
897. 
898.     assert solveset_real(3*x + log(4*x), x) == \
899.         FiniteSet(LambertW(Rational(3, 4))/3)
900. 
901.     assert solveset_real(x**x - 2) == FiniteSet(exp(LambertW(log(2))))
902. 
903.     a = Symbol('a')
904.     assert solveset_real(-a*x + 2*x*log(x), x) == FiniteSet(exp(a/2))
905.     a = Symbol('a', real=True)
906.     assert solveset_real(a/x + exp(x/2), x) == \
907.         FiniteSet(2*LambertW(-a/2))
908.     assert solveset_real((a/x + exp(x/2)).diff(x), x) == \
909.         FiniteSet(4*LambertW(sqrt(2)*sqrt(a)/4))
910. 
911.     # coverage test
912.     assert solveset_real(tanh(x + 3)*tanh(x - 3) - 1, x) == EmptySet()
913. 
914.     assert solveset_real((x**2 - 2*x + 1).subs(x, log(x) + 3*x), x) == \
915.         FiniteSet(LambertW(3*S.Exp1)/3)
916.     assert solveset_real((x**2 - 2*x + 1).subs(x, (log(x) + 3*x)**2 - 1), x) == \
917.         FiniteSet(LambertW(3*exp(-sqrt(2)))/3, LambertW(3*exp(sqrt(2)))/3)
918.     assert solveset_real((x**2 - 2*x - 2).subs(x, log(x) + 3*x), x) == \
919.         FiniteSet(LambertW(3*exp(1 + sqrt(3)))/3, LambertW(3*exp(-sqrt(3) + 1))/3)
920.     assert solveset_real(x*log(x) + 3*x + 1, x) == \
921.         FiniteSet(exp(-3 + LambertW(-exp(3))))
922.     eq = (x*exp(x) - 3).subs(x, x*exp(x))
923.     assert solveset_real(eq, x) == \
924.         FiniteSet(LambertW(3*exp(-LambertW(3))))
925. 
926.     assert solveset_real(3*log(a**(3*x + 5)) + a**(3*x + 5), x) == \
927.         FiniteSet(-((log(a**5) + LambertW(Rational(1, 3)))/(3*log(a))))
928.     p = symbols('p', positive=True)
929.     assert solveset_real(3*log(p**(3*x + 5)) + p**(3*x + 5), x) == \
930.         FiniteSet(
931.         log((-3**Rational(1, 3) - 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),
932.         log((-3**Rational(1, 3) + 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),
933.         log((3*LambertW(Rational(1, 3))/p**5)**(1/(3*log(p)))),)  # checked numerically
934.     # check collection
935.     b = Symbol('b')
936.     eq = 3*log(a**(3*x + 5)) + b*log(a**(3*x + 5)) + a**(3*x + 5)
937.     assert solveset_real(eq, x) == FiniteSet(
938.         -((log(a**5) + LambertW(1/(b + 3)))/(3*log(a))))
939. 
940.     # issue 4271
941.     assert solveset_real((a/x + exp(x/2)).diff(x, 2), x) == FiniteSet(
942.         6*LambertW((-1)**Rational(1, 3)*a**Rational(1, 3)/3))
943. 
944.     assert solveset_real(x**3 - 3**x, x) == \
945.         FiniteSet(-3/log(3)*LambertW(-log(3)/3))
946.     assert solveset_real(3**cos(x) - cos(x)**3) == FiniteSet(
947.         acos(-3*LambertW(-log(3)/3)/log(3)))
948. 
949.     assert solveset_real(x**2 - 2**x, x) == \
950.         solveset_real(-x**2 + 2**x, x)
951. 
952.     assert solveset_real(3*log(x) - x*log(3)) == FiniteSet(
953.         -3*LambertW(-log(3)/3)/log(3),
954.         -3*LambertW(-log(3)/3, -1)/log(3))
955. 
956.     assert solveset_real(LambertW(2*x) - y) == FiniteSet(
957.         y*exp(y)/2)
958. 
959. 
960. @XFAIL
961. def test_other_lambert():
962.     a = Rational(6, 5)
963.     assert solveset_real(x**a - a**x, x) == FiniteSet(
964.         a, -a*LambertW(-log(a)/a)/log(a))
965. 
966. 
967. def test_solveset():
968.     x = Symbol('x')
969.     f = Function('f')
970.     raises(ValueError, lambda: solveset(x + y))
971.     assert solveset(x, 1) == S.EmptySet
972.     assert solveset(f(1)**2 + y + 1, f(1)
973.         ) == FiniteSet(-sqrt(-y - 1), sqrt(-y - 1))
974.     assert solveset(f(1)**2 - 1, f(1), S.Reals) == FiniteSet(-1, 1)
975.     assert solveset(f(1)**2 + 1, f(1)) == FiniteSet(-I, I)
976.     assert solveset(x - 1, 1) == FiniteSet(x)
977.     assert solveset(sin(x) - cos(x), sin(x)) == FiniteSet(cos(x))
978. 
979.     assert solveset(0, domain=S.Reals) == S.Reals
980.     assert solveset(1) == S.EmptySet
981.     assert solveset(True, domain=S.Reals) == S.Reals  # issue 10197
982.     assert solveset(False, domain=S.Reals) == S.EmptySet
983. 
984.     assert solveset(exp(x) - 1, domain=S.Reals) == FiniteSet(0)
985.     assert solveset(exp(x) - 1, x, S.Reals) == FiniteSet(0)
986.     assert solveset(Eq(exp(x), 1), x, S.Reals) == FiniteSet(0)
987.     assert solveset(exp(x) - 1, exp(x), S.Reals) == FiniteSet(1)
988.     A = Indexed('A', x)
989.     assert solveset(A - 1, A, S.Reals) == FiniteSet(1)
990. 
991.     assert solveset(x - 1 >= 0, x, S.Reals) == Interval(1, oo)
992.     assert solveset(exp(x) - 1 >= 0, x, S.Reals) == Interval(0, oo)
993. 
994.     assert solveset(exp(x) - 1, x) == imageset(Lambda(n, 2*I*pi*n), S.Integers)
995.     assert solveset(Eq(exp(x), 1), x) == imageset(Lambda(n, 2*I*pi*n),
996.                                                   S.Integers)
997.     # issue 13825
998.     assert solveset(x**2 + f(0) + 1, x) == {-sqrt(-f(0) - 1), sqrt(-f(0) - 1)}
999. 
1000. 
1001. def test__solveset_multi():
1002.     from sympy.solvers.solveset import _solveset_multi
1003.     from sympy import Reals
1004. 
1005.     # Basic univariate case:
1006.     from sympy.abc import x
1007.     assert _solveset_multi([x**2-1], [x], [S.Reals]) == FiniteSet((1,), (-1,))
1008. 
1009.     # Linear systems of two equations
1010.     from sympy.abc import x, y
1011.     assert _solveset_multi([x+y, x+1], [x, y], [Reals, Reals]) == FiniteSet((-1, 1))
1012.     assert _solveset_multi([x+y, x+1], [y, x], [Reals, Reals]) == FiniteSet((1, -1))
1013.     assert _solveset_multi([x+y, x-y-1], [x, y], [Reals, Reals]) == FiniteSet((S(1)/2, -S(1)/2))
1014.     assert _solveset_multi([x-1, y-2], [x, y], [Reals, Reals]) == FiniteSet((1, 2))
1015.     #assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == ImageSet(Lambda(x, (x, -x)), Reals)
1016.     assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == Union(
1017.             ImageSet(Lambda(((x,),), (x, -x)), ProductSet(Reals)),
1018.             ImageSet(Lambda(((y,),), (-y, y)), ProductSet(Reals)))
1019.     assert _solveset_multi([x+y, x+y+1], [x, y], [Reals, Reals]) == S.EmptySet
1020.     assert _solveset_multi([x+y, x-y, x-1], [x, y], [Reals, Reals]) == S.EmptySet
1021.     assert _solveset_multi([x+y, x-y, x-1], [y, x], [Reals, Reals]) == S.EmptySet
1022. 
1023.     # Systems of three equations:
1024.     from sympy.abc import x, y, z
1025.     assert _solveset_multi([x+y+z-1, x+y-z-2, x-y-z-3], [x, y, z], [Reals,
1026.         Reals, Reals]) == FiniteSet((2, -S.Half, -S.Half))
1027. 
1028.     # Nonlinear systems:
1029.     from sympy.abc import r, theta, z, x, y
1030.     assert _solveset_multi([x**2+y**2-2, x+y], [x, y], [Reals, Reals]) == FiniteSet((-1, 1), (1, -1))
1031.     assert _solveset_multi([x**2-1, y], [x, y], [Reals, Reals]) == FiniteSet((1, 0), (-1, 0))
1032.     #assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(
1033.     #        ImageSet(Lambda(x, (x, -x)), Reals), ImageSet(Lambda(x, (x, x)), Reals))
1034.     assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(
1035.             ImageSet(Lambda(((x,),), (x, -Abs(x))), ProductSet(Reals)),
1036.             ImageSet(Lambda(((x,),), (x, Abs(x))), ProductSet(Reals)),
1037.             ImageSet(Lambda(((y,),), (-Abs(y), y)), ProductSet(Reals)),
1038.             ImageSet(Lambda(((y,),), (Abs(y), y)), ProductSet(Reals)))
1039.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [theta, r],
1040.             [Interval(0, pi), Interval(-1, 1)]) == FiniteSet((0, 1), (pi, -1))
1041.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [r, theta],
1042.             [Interval(0, 1), Interval(0, pi)]) == FiniteSet((1, 0))
1043.     #assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],
1044.     #        [Interval(0, 1), Interval(0, pi)]) == ?
1045.     assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],
1046.             [Interval(0, 1), Interval(0, pi)]) == Union(
1047.             ImageSet(Lambda(((r,),), (r, 0)), ImageSet(Lambda(r, (r,)), Interval(0, 1))),
1048.             ImageSet(Lambda(((theta,),), (0, theta)), ImageSet(Lambda(theta, (theta,)), Interval(0, pi))))
1049. 
1050. 
1051. def test_conditionset():
1052.     assert solveset(Eq(sin(x)**2 + cos(x)**2, 1), x, domain=S.Reals) == \
1053.         ConditionSet(x, True, S.Reals)
1054. 
1055.     assert solveset(Eq(x**2 + x*sin(x), 1), x, domain=S.Reals
1056.         ) == ConditionSet(x, Eq(x**2 + x*sin(x) - 1, 0), S.Reals)
1057. 
1058.     assert solveset(Eq(-I*(exp(I*x) - exp(-I*x))/2, 1), x
1059.         ) == imageset(Lambda(n, 2*n*pi + pi/2), S.Integers)
1060. 
1061.     assert solveset(x + sin(x) > 1, x, domain=S.Reals
1062.         ) == ConditionSet(x, x + sin(x) > 1, S.Reals)
1063. 
1064.     assert solveset(Eq(sin(Abs(x)), x), x, domain=S.Reals
1065.         ) == ConditionSet(x, Eq(-x + sin(Abs(x)), 0), S.Reals)
1066. 
1067.     assert solveset(y**x-z, x, S.Reals) == \
1068.         ConditionSet(x, Eq(y**x - z, 0), S.Reals)
1069. 
1070. 
1071. @XFAIL
1072. def test_conditionset_equality():
1073.     ''' Checking equality of different representations of ConditionSet'''
1074.     assert solveset(Eq(tan(x), y), x) == ConditionSet(x, Eq(tan(x), y), S.Complexes)
1075. 
1076. 
1077. def test_solveset_domain():
1078.     x = Symbol('x')
1079. 
1080.     assert solveset(x**2 - x - 6, x, Interval(0, oo)) == FiniteSet(3)
1081.     assert solveset(x**2 - 1, x, Interval(0, oo)) == FiniteSet(1)
1082.     assert solveset(x**4 - 16, x, Interval(0, 10)) == FiniteSet(2)
1083. 
1084. 
1085. def test_improve_coverage():
1086.     from sympy.solvers.solveset import _has_rational_power
1087.     x = Symbol('x')
1088.     solution = solveset(exp(x) + sin(x), x, S.Reals)
1089.     unsolved_object = ConditionSet(x, Eq(exp(x) + sin(x), 0), S.Reals)
1090.     assert solution == unsolved_object
1091. 
1092.     assert _has_rational_power(sin(x)*exp(x) + 1, x) == (False, S.One)
1093.     assert _has_rational_power((sin(x)**2)*(exp(x) + 1)**3, x) == (False, S.One)
1094. 
1095. 
1096. def test_issue_9522():
1097.     x = Symbol('x')
1098.     expr1 = Eq(1/(x**2 - 4) + x, 1/(x**2 - 4) + 2)
1099.     expr2 = Eq(1/x + x, 1/x)
1100. 
1101.     assert solveset(expr1, x, S.Reals) == EmptySet()
1102.     assert solveset(expr2, x, S.Reals) == EmptySet()
1103. 
1104. 
1105. def test_solvify():
1106.     x = Symbol('x')
1107. 
1108.     assert solvify(x**2 + 10, x, S.Reals) == []
1109.     assert solvify(x**3 + 1, x, S.Complexes) == [-1, S.Half - sqrt(3)*I/2,
1110.                                                  S.Half + sqrt(3)*I/2]
1111.     assert solvify(log(x), x, S.Reals) == [1]
1112.     assert solvify(cos(x), x, S.Reals) == [pi/2, pi*Rational(3, 2)]
1113.     assert solvify(sin(x) + 1, x, S.Reals) == [pi*Rational(3, 2)]
1114.     raises(NotImplementedError, lambda: solvify(sin(exp(x)), x, S.Complexes))
1115. 
1116. 
1117. def test_abs_invert_solvify():
1118.     assert solvify(sin(Abs(x)), x, S.Reals) is None
1119. 
1120. 
1121. def test_linear_eq_to_matrix():
1122.     x, y, z = symbols('x, y, z')
1123.     a, b, c, d, e, f, g, h, i, j, k, l = symbols('a:l')
1124. 
1125.     eqns1 = [2*x + y - 2*z - 3, x - y - z, x + y + 3*z - 12]
1126.     eqns2 = [Eq(3*x + 2*y - z, 1), Eq(2*x - 2*y + 4*z, -2), -2*x + y - 2*z]
1127. 
1128.     A, B = linear_eq_to_matrix(eqns1, x, y, z)
1129.     assert A == Matrix([[2, 1, -2], [1, -1, -1], [1, 1, 3]])
1130.     assert B == Matrix([[3], [0], [12]])
1131. 
1132.     A, B = linear_eq_to_matrix(eqns2, x, y, z)
1133.     assert A == Matrix([[3, 2, -1], [2, -2, 4], [-2, 1, -2]])
1134.     assert B == Matrix([[1], [-2], [0]])
1135. 
1136.     # Pure symbolic coefficients
1137.     eqns3 = [a*b*x + b*y + c*z - d, e*x + d*x + f*y + g*z - h, i*x + j*y + k*z - l]
1138.     A, B = linear_eq_to_matrix(eqns3, x, y, z)
1139.     assert A == Matrix([[a*b, b, c], [d + e, f, g], [i, j, k]])
1140.     assert B == Matrix([[d], [h], [l]])
1141. 
1142.     # raise ValueError if
1143.     # 1) no symbols are given
1144.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3))
1145.     # 2) there are duplicates
1146.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, x, y]))
1147.     # 3) there are non-symbols
1148.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, 1/a, y]))
1149.     # 4) a nonlinear term is detected in the original expression
1150.     raises(ValueError, lambda: linear_eq_to_matrix(Eq(1/x + x, 1/x)))
1151. 
1152.     assert linear_eq_to_matrix(1, x) == (Matrix([[0]]), Matrix([[-1]]))
1153.     # issue 15195
1154.     assert linear_eq_to_matrix(x + y*(z*(3*x + 2) + 3), x) == (
1155.         Matrix([[3*y*z + 1]]), Matrix([[-y*(2*z + 3)]]))
1156.     assert linear_eq_to_matrix(Matrix(
1157.         [[a*x + b*y - 7], [5*x + 6*y - c]]), x, y) == (
1158.         Matrix([[a, b], [5, 6]]), Matrix([[7], [c]]))
1159. 
1160.     # issue 15312
1161.     assert linear_eq_to_matrix(Eq(x + 2, 1), x) == (
1162.         Matrix([[1]]), Matrix([[-1]]))
1163. 
1164. 
1165. def test_issue_16577():
1166.     assert linear_eq_to_matrix(Eq(a*(2*x + 3*y) + 4*y, 5), x, y) == (
1167.         Matrix([[2*a, 3*a + 4]]), Matrix([[5]]))
1168. 
1169. 
1170. def test_linsolve():
1171.     x, y, z, u, v, w = symbols("x, y, z, u, v, w")
1172.     x1, x2, x3, x4 = symbols('x1, x2, x3, x4')
1173. 
1174.     # Test for different input forms
1175. 
1176.     M = Matrix([[1, 2, 1, 1, 7], [1, 2, 2, -1, 12], [2, 4, 0, 6, 4]])
1177.     system1 = A, b = M[:, :-1], M[:, -1]
1178.     Eqns = [x1 + 2*x2 + x3 + x4 - 7, x1 + 2*x2 + 2*x3 - x4 - 12,
1179.             2*x1 + 4*x2 + 6*x4 - 4]
1180. 
1181.     sol = FiniteSet((-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))
1182.     assert linsolve(Eqns, (x1, x2, x3, x4)) == sol
1183.     assert linsolve(Eqns, *(x1, x2, x3, x4)) == sol
1184.     assert linsolve(system1, (x1, x2, x3, x4)) == sol
1185.     assert linsolve(system1, *(x1, x2, x3, x4)) == sol
1186.     # issue 9667 - symbols can be Dummy symbols
1187.     x1, x2, x3, x4 = symbols('x:4', cls=Dummy)
1188.     assert linsolve(system1, x1, x2, x3, x4) == FiniteSet(
1189.         (-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))
1190. 
1191.     # raise ValueError for garbage value
1192.     raises(ValueError, lambda: linsolve(Eqns))
1193.     raises(ValueError, lambda: linsolve(x1))
1194.     raises(ValueError, lambda: linsolve(x1, x2))
1195.     raises(ValueError, lambda: linsolve((A,), x1, x2))
1196.     raises(ValueError, lambda: linsolve(A, b, x1, x2))
1197. 
1198.     #raise ValueError if equations are non-linear in given variables
1199.     raises(ValueError, lambda: linsolve([x + y - 1, x ** 2 + y - 3], [x, y]))
1200.     raises(ValueError, lambda: linsolve([cos(x) + y, x + y], [x, y]))
1201.     assert linsolve([x + z - 1, x ** 2 + y - 3], [z, y]) == {(-x + 1, -x**2 + 3)}
1202. 
1203.     # Fully symbolic test
1204.     a, b, c, d, e, f = symbols('a, b, c, d, e, f')
1205.     A = Matrix([[a, b], [c, d]])
1206.     B = Matrix([[e], [f]])
1207.     system2 = (A, B)
1208.     sol = FiniteSet(((-b*f + d*e)/(a*d - b*c), (a*f - c*e)/(a*d - b*c)))
1209.     assert linsolve(system2, [x, y]) == sol
1210. 
1211.     # No solution
1212.     A = Matrix([[1, 2, 3], [2, 4, 6], [3, 6, 9]])
1213.     b = Matrix([0, 0, 1])
1214.     assert linsolve((A, b), (x, y, z)) == EmptySet()
1215. 
1216.     # Issue #10056
1217.     A, B, J1, J2 = symbols('A B J1 J2')
1218.     Augmatrix = Matrix([
1219.         [2*I*J1, 2*I*J2, -2/J1],
1220.         [-2*I*J2, -2*I*J1, 2/J2],
1221.         [0, 2, 2*I/(J1*J2)],
1222.         [2, 0,  0],
1223.         ])
1224. 
1225.     assert linsolve(Augmatrix, A, B) == FiniteSet((0, I/(J1*J2)))
1226. 
1227.     # Issue #10121 - Assignment of free variables
1228.     a, b, c, d, e = symbols('a, b, c, d, e')
1229.     Augmatrix = Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0]])
1230.     assert linsolve(Augmatrix, a, b, c, d, e) == FiniteSet((a, 0, c, 0, e))
1231.     raises(IndexError, lambda: linsolve(Augmatrix, a, b, c))
1232. 
1233.     x0, x1, x2, _x0 = symbols('tau0 tau1 tau2 _tau0')
1234.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])
1235.         ) == FiniteSet((x0, 0, x1, _x0, x2))
1236.     x0, x1, x2, _x0 = symbols('_tau0 _tau1 _tau2 tau0')
1237.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])
1238.         ) == FiniteSet((x0, 0, x1, _x0, x2))
1239.     x0, x1, x2, _x0 = symbols('_tau0 _tau1 _tau2 tau1')
1240.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])
1241.         ) == FiniteSet((x0, 0, x1, _x0, x2))
1242.     # symbols can be given as generators
1243.     x0, x2, x4 = symbols('x0, x2, x4')
1244.     assert linsolve(Augmatrix, numbered_symbols('x')
1245.         ) == FiniteSet((x0, 0, x2, 0, x4))
1246.     Augmatrix[-1, -1] = x0
1247.     # use Dummy to avoid clash; the names may clash but the symbols
1248.     # will not
1249.     Augmatrix[-1, -1] = symbols('_x0')
1250.     assert len(linsolve(
1251.         Augmatrix, numbered_symbols('x', cls=Dummy)).free_symbols) == 4
1252. 
1253.     # Issue #12604
1254.     f = Function('f')
1255.     assert linsolve([f(x) - 5], f(x)) == FiniteSet((5,))
1256. 
1257.     # Issue #14860
1258.     from sympy.physics.units import meter, newton, kilo
1259.     Eqns = [8*kilo*newton + x + y, 28*kilo*newton*meter + 3*x*meter]
1260.     assert linsolve(Eqns, x, y) == {(newton*Rational(-28000, 3), newton*Rational(4000, 3))}
1261. 
1262.     # linsolve fully expands expressions, so removable singularities
1263.     # and other nonlinearity does not raise an error
1264.     assert linsolve([Eq(x, x + y)], [x, y]) == {(x, 0)}
1265.     assert linsolve([Eq(1/x, 1/x + y)], [x, y]) == {(x, 0)}
1266.     assert linsolve([Eq(y/x, y/x + y)], [x, y]) == {(x, 0)}
1267.     assert linsolve([Eq(x*(x + 1), x**2 + y)], [x, y]) == {(y, y)}
1268. 
1269. 
1270. def test_linsolve_immutable():
1271.     A = ImmutableDenseMatrix([[1, 1, 2], [0, 1, 2], [0, 0, 1]])
1272.     B = ImmutableDenseMatrix([2, 1, -1])
1273.     c = symbols('c1 c2 c3')
1274.     assert linsolve([A, B], c) == FiniteSet((1, 3, -1))
1275. 
1276.     A = ImmutableDenseMatrix([[1, 1, 7], [1, -1, 3]])
1277.     assert linsolve(A) == FiniteSet((5, 2))
1278. 
1279. 
1280. def test_solve_decomposition():
1281.     x = Symbol('x')
1282.     n = Dummy('n')
1283. 
1284.     f1 = exp(3*x) - 6*exp(2*x) + 11*exp(x) - 6
1285.     f2 = sin(x)**2 - 2*sin(x) + 1
1286.     f3 = sin(x)**2 - sin(x)
1287.     f4 = sin(x + 1)
1288.     f5 = exp(x + 2) - 1
1289.     f6 = 1/log(x)
1290.     f7 = 1/x
1291. 
1292.     s1 = ImageSet(Lambda(n, 2*n*pi), S.Integers)
1293.     s2 = ImageSet(Lambda(n, 2*n*pi + pi), S.Integers)
1294.     s3 = ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers)
1295.     s4 = ImageSet(Lambda(n, 2*n*pi - 1), S.Integers)
1296.     s5 = ImageSet(Lambda(n, 2*n*pi - 1 + pi), S.Integers)
1297. 
1298.     assert solve_decomposition(f1, x, S.Reals) == FiniteSet(0, log(2), log(3))
1299.     assert solve_decomposition(f2, x, S.Reals) == s3
1300.     assert solve_decomposition(f3, x, S.Reals) == Union(s1, s2, s3)
1301.     assert solve_decomposition(f4, x, S.Reals) == Union(s4, s5)
1302.     assert solve_decomposition(f5, x, S.Reals) == FiniteSet(-2)
1303.     assert solve_decomposition(f6, x, S.Reals) == S.EmptySet
1304.     assert solve_decomposition(f7, x, S.Reals) == S.EmptySet
1305.     assert solve_decomposition(x, x, Interval(1, 2)) == S.EmptySet
1306. 
1307. # nonlinsolve testcases
1308. def test_nonlinsolve_basic():
1309.     assert nonlinsolve([],[]) == S.EmptySet
1310.     assert nonlinsolve([],[x, y]) == S.EmptySet
1311. 
1312.     system = [x, y - x - 5]
1313.     assert nonlinsolve([x],[x, y]) == FiniteSet((0, y))
1314.     assert nonlinsolve(system, [y]) == FiniteSet((x + 5,))
1315.     soln = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)
1316.     assert nonlinsolve([sin(x) - 1], [x]) == FiniteSet(tuple(soln))
1317.     assert nonlinsolve([x**2 - 1], [x]) == FiniteSet((-1,), (1,))
1318. 
1319.     soln = FiniteSet((y, y))
1320.     assert nonlinsolve([x - y, 0], x, y) == soln
1321.     assert nonlinsolve([0, x - y], x, y) == soln
1322.     assert nonlinsolve([x - y, x - y], x, y) == soln
1323.     assert nonlinsolve([x, 0], x, y) == FiniteSet((0, y))
1324.     f = Function('f')
1325.     assert nonlinsolve([f(x), 0], f(x), y) == FiniteSet((0, y))
1326.     assert nonlinsolve([f(x), 0], f(x), f(y)) == FiniteSet((0, f(y)))
1327.     A = Indexed('A', x)
1328.     assert nonlinsolve([A, 0], A, y) == FiniteSet((0, y))
1329.     assert nonlinsolve([x**2 -1], [sin(x)]) == FiniteSet((S.EmptySet,))
1330.     assert nonlinsolve([x**2 -1], sin(x)) == FiniteSet((S.EmptySet,))
1331.     assert nonlinsolve([x**2 -1], 1) == FiniteSet((x**2,))
1332.     assert nonlinsolve([x**2 -1], x + y) == FiniteSet((S.EmptySet,))
1333. 
1334. 
1335. def test_nonlinsolve_abs():
1336.     soln = FiniteSet((x, Abs(x)))
1337.     assert nonlinsolve([Abs(x) - y], x, y) == soln
1338. 
1339. 
1340. def test_raise_exception_nonlinsolve():
1341.     raises(IndexError, lambda: nonlinsolve([x**2 -1], []))
1342.     raises(ValueError, lambda: nonlinsolve([x**2 -1]))
1343.     raises(NotImplementedError, lambda: nonlinsolve([(x+y)**2 - 9, x**2 - y**2 - 0.75], (x, y)))
1344. 
1345. 
1346. def test_trig_system():
1347.     # TODO: add more simple testcases when solveset returns
1348.     # simplified soln for Trig eq
1349.     assert nonlinsolve([sin(x) - 1, cos(x) -1 ], x) == S.EmptySet
1350.     soln1 = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)
1351.     soln = FiniteSet(soln1)
1352.     assert nonlinsolve([sin(x) - 1, cos(x)], x) == soln
1353. 
1354. 
1355. @XFAIL
1356. def test_trig_system_fail():
1357.     # fails because solveset trig solver is not much smart.
1358.     sys = [x + y - pi/2, sin(x) + sin(y) - 1]
1359.     # solveset returns conditionset for sin(x) + sin(y) - 1
1360.     soln_1 = (ImageSet(Lambda(n, n*pi + pi/2), S.Integers),
1361.         ImageSet(Lambda(n, n*pi)), S.Integers)
1362.     soln_1 = FiniteSet(soln_1)
1363.     soln_2 = (ImageSet(Lambda(n, n*pi), S.Integers),
1364.         ImageSet(Lambda(n, n*pi+ pi/2), S.Integers))
1365.     soln_2 = FiniteSet(soln_2)
1366.     soln = soln_1 + soln_2
1367.     assert nonlinsolve(sys, [x, y]) == soln
1368. 
1369.     # Add more cases from here
1370.     # http://www.vitutor.com/geometry/trigonometry/equations_systems.html#uno
1371.     sys = [sin(x) + sin(y) - (sqrt(3)+1)/2, sin(x) - sin(y) - (sqrt(3) - 1)/2]
1372.     soln_x = Union(ImageSet(Lambda(n, 2*n*pi + pi/3), S.Integers),
1373.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(2, 3)), S.Integers))
1374.     soln_y = Union(ImageSet(Lambda(n, 2*n*pi + pi/6), S.Integers),
1375.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(5, 6)), S.Integers))
1376.     assert nonlinsolve(sys, [x, y]) ==FiniteSet((soln_x, soln_y))
1377. 
1378. 
1379. def test_nonlinsolve_positive_dimensional():
1380.     x, y, z, a, b, c, d = symbols('x, y, z, a, b, c, d', extended_real = True)
1381.     assert nonlinsolve([x*y, x*y - x], [x, y]) == FiniteSet((0, y))
1382. 
1383.     system = [a**2 + a*c, a - b]
1384.     assert nonlinsolve(system, [a, b]) == FiniteSet((0, 0), (-c, -c))
1385.     # here (a= 0, b = 0) is independent soln so both is printed.
1386.     # if symbols = [a, b, c] then only {a : -c ,b : -c}
1387. 
1388.     eq1 =  a + b + c + d
1389.     eq2 = a*b + b*c + c*d + d*a
1390.     eq3 = a*b*c + b*c*d + c*d*a + d*a*b
1391.     eq4 = a*b*c*d - 1
1392.     system = [eq1, eq2, eq3, eq4]
1393.     sol1 = (-1/d, -d, 1/d, FiniteSet(d) - FiniteSet(0))
1394.     sol2 = (1/d, -d, -1/d, FiniteSet(d) - FiniteSet(0))
1395.     soln = FiniteSet(sol1, sol2)
1396.     assert nonlinsolve(system, [a, b, c, d]) == soln
1397. 
1398. 
1399. def test_nonlinsolve_polysys():
1400.     x, y, z = symbols('x, y, z', real = True)
1401.     assert nonlinsolve([x**2 + y - 2, x**2 + y], [x, y]) == S.EmptySet
1402. 
1403.     s = (-y + 2, y)
1404.     assert nonlinsolve([(x + y)**2 - 4, x + y - 2], [x, y]) == FiniteSet(s)
1405. 
1406.     system = [x**2 - y**2]
1407.     soln_real = FiniteSet((-y, y), (y, y))
1408.     soln_complex = FiniteSet((-Abs(y), y), (Abs(y), y))
1409.     soln =soln_real + soln_complex
1410.     assert nonlinsolve(system, [x, y]) == soln
1411. 
1412.     system = [x**2 - y**2]
1413.     soln_real= FiniteSet((y, -y), (y, y))
1414.     soln_complex = FiniteSet((y, -Abs(y)), (y, Abs(y)))
1415.     soln = soln_real + soln_complex
1416.     assert nonlinsolve(system, [y, x]) == soln
1417. 
1418.     system = [x**2 + y - 3, x - y - 4]
1419.     assert nonlinsolve(system, (x, y)) != nonlinsolve(system, (y, x))
1420. 
1421. 
1422. def test_nonlinsolve_using_substitution():
1423.     x, y, z, n = symbols('x, y, z, n', real = True)
1424.     system = [(x + y)*n - y**2 + 2]
1425.     s_x = (n*y - y**2 + 2)/n
1426.     soln = (-s_x, y)
1427.     assert nonlinsolve(system, [x, y]) == FiniteSet(soln)
1428. 
1429.     system = [z**2*x**2 - z**2*y**2/exp(x)]
1430.     soln_real_1 = (y, x, 0)
1431.     soln_real_2 = (-exp(x/2)*Abs(x), x, z)
1432.     soln_real_3 = (exp(x/2)*Abs(x), x, z)
1433.     soln_complex_1 = (-x*exp(x/2), x, z)
1434.     soln_complex_2 = (x*exp(x/2), x, z)
1435.     syms = [y, x, z]
1436.     soln = FiniteSet(soln_real_1, soln_complex_1, soln_complex_2,\
1437.         soln_real_2, soln_real_3)
1438.     assert nonlinsolve(system,syms) == soln
1439. 
1440. 
1441. def test_nonlinsolve_complex():
1442.     x, y, z = symbols('x, y, z')
1443.     n = Dummy('n')
1444.     assert nonlinsolve([exp(x) - sin(y), 1/y - 3], [x, y]) == {
1445.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(Rational(1, 3)))), S.Integers), Rational(1, 3))}
1446. 
1447.     system = [exp(x) - sin(y), 1/exp(y) - 3]
1448.     assert nonlinsolve(system, [x, y]) == {
1449.         (ImageSet(Lambda(n, I*(2*n*pi + pi)
1450.                          + log(sin(log(3)))), S.Integers), -log(3)),
1451.         (ImageSet(Lambda(n, I*(2*n*pi + arg(sin(2*n*I*pi - log(3))))
1452.                          + log(Abs(sin(2*n*I*pi - log(3))))), S.Integers),
1453.         ImageSet(Lambda(n, 2*n*I*pi - log(3)), S.Integers))}
1454. 
1455.     system = [exp(x) - sin(y), y**2 - 4]
1456.     assert nonlinsolve(system, [x, y]) == {
1457.         (ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sin(2))), S.Integers), -2),
1458.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(2))), S.Integers), 2)}
1459. 
1460. 
1461. @XFAIL
1462. def test_solve_nonlinear_trans():
1463.     # After the transcendental equation solver these will work
1464.     x, y, z = symbols('x, y, z', real=True)
1465.     soln1 = FiniteSet((2*LambertW(y/2), y))
1466.     soln2 = FiniteSet((-x*sqrt(exp(x)), y), (x*sqrt(exp(x)), y))
1467.     soln3 = FiniteSet((x*exp(x/2), x))
1468.     soln4 = FiniteSet(2*LambertW(y/2), y)
1469.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln1
1470.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln2
1471.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln3
1472.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln4
1473. 
1474. 
1475. def test_issue_5132_1():
1476.     system = [sqrt(x**2 + y**2) - sqrt(10), x + y - 4]
1477.     assert nonlinsolve(system, [x, y]) == FiniteSet((1, 3), (3, 1))
1478. 
1479.     n = Dummy('n')
1480.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]
1481.     s_real_y = -log(3)
1482.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))
1483.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))
1484.     lam = Lambda(n, 2*n*I*pi + -log(3))
1485.     s_complex_y = ImageSet(lam, S.Integers)
1486.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1487.     s_complex_z_1 = ImageSet(lam, S.Integers)
1488.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1489.     s_complex_z_2 = ImageSet(lam, S.Integers)
1490.     soln_complex = FiniteSet(
1491.                                             (s_complex_y, s_complex_z_1),
1492.                                             (s_complex_y, s_complex_z_2)
1493.                                         )
1494.     soln = soln_real + soln_complex
1495.     assert nonlinsolve(eqs, [y, z]) == soln
1496. 
1497. 
1498. def test_issue_5132_2():
1499.     x, y = symbols('x, y', real=True)
1500.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]
1501.     n = Dummy('n')
1502.     soln_real = (log(-z**2 + sin(y))/2, z)
1503.     lam = Lambda( n, I*(2*n*pi + arg(-z**2 + sin(y)))/2 + log(Abs(z**2 - sin(y)))/2)
1504.     img = ImageSet(lam, S.Integers)
1505.     # not sure about the complex soln. But it looks correct.
1506.     soln_complex = (img, z)
1507.     soln = FiniteSet(soln_real, soln_complex)
1508.     assert nonlinsolve(eqs, [x, z]) == soln
1509. 
1510.     r, t = symbols('r, t')
1511.     system = [r - x**2 - y**2, tan(t) - y/x]
1512.     s_x = sqrt(r/(tan(t)**2 + 1))
1513.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)
1514.     soln = FiniteSet((s_x, s_y), (-s_x, -s_y))
1515.     assert nonlinsolve(system, [x, y]) == soln
1516. 
1517. 
1518. def test_issue_6752():
1519.     a,b,c,d = symbols('a, b, c, d', real=True)
1520.     assert nonlinsolve([a**2 + a, a - b], [a, b]) == {(-1, -1), (0, 0)}
1521. 
1522. 
1523. @SKIP("slow")
1524. def test_issue_5114_solveset():
1525.     # slow testcase
1526.     a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r = symbols('a:r')
1527. 
1528.     # there is no 'a' in the equation set but this is how the
1529.     # problem was originally posed
1530.     syms = [a, b, c, f, h, k, n]
1531.     eqs = [b + r/d - c/d,
1532.     c*(1/d + 1/e + 1/g) - f/g - r/d,
1533.         f*(1/g + 1/i + 1/j) - c/g - h/i,
1534.         h*(1/i + 1/l + 1/m) - f/i - k/m,
1535.         k*(1/m + 1/o + 1/p) - h/m - n/p,
1536.         n*(1/p + 1/q) - k/p]
1537.     assert len(nonlinsolve(eqs, syms)) == 1
1538. 
1539. 
1540. @SKIP("Hangs")
1541. def _test_issue_5335():
1542.     # Not able to check zero dimensional system.
1543.     # is_zero_dimensional Hangs
1544.     lam, a0, conc = symbols('lam a0 conc')
1545.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,
1546.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,
1547.            x + y - conc]
1548.     sym = [x, y, a0]
1549.     # there are 4 solutions but only two are valid
1550.     assert len(nonlinsolve(eqs, sym)) == 2
1551.     # float
1552.     lam, a0, conc = symbols('lam a0 conc')
1553.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,
1554.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,
1555.            x + y - conc]
1556.     sym = [x, y, a0]
1557.     assert len(nonlinsolve(eqs, sym)) == 2
1558. 
1559. 
1560. def test_issue_2777():
1561.     # the equations represent two circles
1562.     x, y = symbols('x y', real=True)
1563.     e1, e2 = sqrt(x**2 + y**2) - 10, sqrt(y**2 + (-x + 10)**2) - 3
1564.     a, b = Rational(191, 20), 3*sqrt(391)/20
1565.     ans = {(a, -b), (a, b)}
1566.     assert nonlinsolve((e1, e2), (x, y)) == ans
1567.     assert nonlinsolve((e1, e2/(x - a)), (x, y)) == S.EmptySet
1568.     # make the 2nd circle's radius be -3
1569.     e2 += 6
1570.     assert nonlinsolve((e1, e2), (x, y)) == S.EmptySet
1571. 
1572. 
1573. def test_issue_8828():
1574.     x1 = 0
1575.     y1 = -620
1576.     r1 = 920
1577.     x2 = 126
1578.     y2 = 276
1579.     x3 = 51
1580.     y3 = 205
1581.     r3 = 104
1582.     v = [x, y, z]
1583. 
1584.     f1 = (x - x1)**2 + (y - y1)**2 - (r1 - z)**2
1585.     f2 = (x2 - x)**2 + (y2 - y)**2 - z**2
1586.     f3 = (x - x3)**2 + (y - y3)**2 - (r3 - z)**2
1587.     F = [f1, f2, f3]
1588. 
1589.     g1 = sqrt((x - x1)**2 + (y - y1)**2) + z - r1
1590.     g2 = f2
1591.     g3 = sqrt((x - x3)**2 + (y - y3)**2) + z - r3
1592.     G = [g1, g2, g3]
1593. 
1594.     # both soln same
1595.     A = nonlinsolve(F, v)
1596.     B = nonlinsolve(G, v)
1597.     assert A == B
1598. 
1599. 
1600. def test_nonlinsolve_conditionset():
1601.     # when solveset failed to solve all the eq
1602.     # return conditionset
1603.     f = Function('f')
1604.     f1 = f(x) - pi/2
1605.     f2 = f(y) - pi*Rational(3, 2)
1606.     intermediate_system = Eq(2*f(x) - pi, 0) & Eq(2*f(y) - 3*pi, 0)
1607.     symbols = Tuple(x, y)
1608.     soln = ConditionSet(
1609.         symbols,
1610.         intermediate_system,
1611.         S.Complexes**2)
1612.     assert nonlinsolve([f1, f2], [x, y]) == soln
1613. 
1614. 
1615. def test_substitution_basic():
1616.     assert substitution([], [x, y]) == S.EmptySet
1617.     assert substitution([], []) == S.EmptySet
1618.     system = [2*x**2 + 3*y**2 - 30, 3*x**2 - 2*y**2 - 19]
1619.     soln = FiniteSet((-3, -2), (-3, 2), (3, -2), (3, 2))
1620.     assert substitution(system, [x, y]) == soln
1621. 
1622.     soln = FiniteSet((-1, 1))
1623.     assert substitution([x + y], [x], [{y: 1}], [y], set([]), [x, y]) == soln
1624.     assert substitution(
1625.         [x + y], [x], [{y: 1}], [y],
1626.         set([x + 1]), [y, x]) == S.EmptySet
1627. 
1628. 
1629. def test_issue_5132_substitution():
1630.     x, y, z, r, t = symbols('x, y, z, r, t', real=True)
1631.     system = [r - x**2 - y**2, tan(t) - y/x]
1632.     s_x_1 = Complement(FiniteSet(-sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))
1633.     s_x_2 = Complement(FiniteSet(sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))
1634.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)
1635.     soln = FiniteSet((s_x_2, s_y)) + FiniteSet((s_x_1, -s_y))
1636.     assert substitution(system, [x, y]) == soln
1637. 
1638.     n = Dummy('n')
1639.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]
1640.     s_real_y = -log(3)
1641.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))
1642.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))
1643.     lam = Lambda(n, 2*n*I*pi + -log(3))
1644.     s_complex_y = ImageSet(lam, S.Integers)
1645.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1646.     s_complex_z_1 = ImageSet(lam, S.Integers)
1647.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1648.     s_complex_z_2 = ImageSet(lam, S.Integers)
1649.     soln_complex = FiniteSet(
1650.         (s_complex_y, s_complex_z_1),
1651.         (s_complex_y, s_complex_z_2))
1652.     soln = soln_real + soln_complex
1653.     assert substitution(eqs, [y, z]) == soln
1654. 
1655. 
1656. def test_raises_substitution():
1657.     raises(ValueError, lambda: substitution([x**2 -1], []))
1658.     raises(TypeError, lambda: substitution([x**2 -1]))
1659.     raises(ValueError, lambda: substitution([x**2 -1], [sin(x)]))
1660.     raises(TypeError, lambda: substitution([x**2 -1], x))
1661.     raises(TypeError, lambda: substitution([x**2 -1], 1))
1662. 
1663. # end of tests for nonlinsolve
1664. 
1665. 
1666. def test_issue_9556():
1667.     x = Symbol('x')
1668.     b = Symbol('b', positive=True)
1669. 
1670.     assert solveset(Abs(x) + 1, x, S.Reals) == EmptySet()
1671.     assert solveset(Abs(x) + b, x, S.Reals) == EmptySet()
1672.     assert solveset(Eq(b, -1), b, S.Reals) == EmptySet()
1673. 
1674. 
1675. def test_issue_9611():
1676.     x = Symbol('x')
1677.     a = Symbol('a')
1678.     y = Symbol('y')
1679. 
1680.     assert solveset(Eq(x - x + a, a), x, S.Reals) == S.Reals
1681.     assert solveset(Eq(y - y + a, a), y) == S.Complexes
1682. 
1683. 
1684. def test_issue_9557():
1685.     x = Symbol('x')
1686.     a = Symbol('a')
1687. 
1688.     assert solveset(x**2 + a, x, S.Reals) == Intersection(S.Reals,
1689.         FiniteSet(-sqrt(-a), sqrt(-a)))
1690. 
1691. 
1692. def test_issue_9778():
1693.     assert solveset(x**3 + 1, x, S.Reals) == FiniteSet(-1)
1694.     assert solveset(x**Rational(3, 5) + 1, x, S.Reals) == S.EmptySet
1695.     assert solveset(x**3 + y, x, S.Reals) == \
1696.         FiniteSet(-Abs(y)**Rational(1, 3)*sign(y))
1697. 
1698. 
1699. def test_issue_10214():
1700.     assert solveset(x**Rational(3, 2) + 4, x, S.Reals) == S.EmptySet
1701.     assert solveset(x**(Rational(-3, 2)) + 4, x, S.Reals) == S.EmptySet
1702. 
1703.     ans = FiniteSet(-2**Rational(2, 3))
1704.     assert solveset(x**(S(3)) + 4, x, S.Reals) == ans
1705.     assert (x**(S(3)) + 4).subs(x,list(ans)[0]) == 0 # substituting ans and verifying the result.
1706.     assert (x**(S(3)) + 4).subs(x,-(-2)**Rational(2, 3)) == 0
1707. 
1708. 
1709. def test_issue_9849():
1710.     assert solveset(Abs(sin(x)) + 1, x, S.Reals) == S.EmptySet
1711. 
1712. 
1713. def test_issue_9953():
1714.     assert linsolve([ ], x) == S.EmptySet
1715. 
1716. 
1717. def test_issue_9913():
1718.     assert solveset(2*x + 1/(x - 10)**2, x, S.Reals) == \
1719.         FiniteSet(-(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)/3 - 100/
1720.                 (3*(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)) + Rational(20, 3))
1721. 
1722. 
1723. def test_issue_10397():
1724.     assert solveset(sqrt(x), x, S.Complexes) == FiniteSet(0)
1725. 
1726. 
1727. def test_issue_14987():
1728.     raises(ValueError, lambda: linear_eq_to_matrix(
1729.         [x**2], x))
1730.     raises(ValueError, lambda: linear_eq_to_matrix(
1731.         [x*(-3/x + 1) + 2*y - a], [x, y]))
1732.     raises(ValueError, lambda: linear_eq_to_matrix(
1733.         [(x**2 - 3*x)/(x - 3) - 3], x))
1734.     raises(ValueError, lambda: linear_eq_to_matrix(
1735.         [(x + 1)**3 - x**3 - 3*x**2 + 7], x))
1736.     raises(ValueError, lambda: linear_eq_to_matrix(
1737.         [x*(1/x + 1) + y], [x, y]))
1738.     raises(ValueError, lambda: linear_eq_to_matrix(
1739.         [(x + 1)*y], [x, y]))
1740.     raises(ValueError, lambda: linear_eq_to_matrix(
1741.         [Eq(1/x, 1/x + y)], [x, y]))
1742.     raises(ValueError, lambda: linear_eq_to_matrix(
1743.         [Eq(y/x, y/x + y)], [x, y]))
1744.     raises(ValueError, lambda: linear_eq_to_matrix(
1745.         [Eq(x*(x + 1), x**2 + y)], [x, y]))
1746. 
1747. 
1748. def test_simplification():
1749.     eq = x + (a - b)/(-2*a + 2*b)
1750.     assert solveset(eq, x) == FiniteSet(S.Half)
1751.     assert solveset(eq, x, S.Reals) == Intersection({-((a - b)/(-2*a + 2*b))}, S.Reals)
1752.     # So that ap - bn is not zero:
1753.     ap = Symbol('ap', positive=True)
1754.     bn = Symbol('bn', negative=True)
1755.     eq = x + (ap - bn)/(-2*ap + 2*bn)
1756.     assert solveset(eq, x) == FiniteSet(S.Half)
1757.     assert solveset(eq, x, S.Reals) == FiniteSet(S.Half)
1758. 
1759. 
1760. def test_issue_10555():
1761.     f = Function('f')
1762.     g = Function('g')
1763.     assert solveset(f(x) - pi/2, x, S.Reals) == \
1764.         ConditionSet(x, Eq(f(x) - pi/2, 0), S.Reals)
1765.     assert solveset(f(g(x)) - pi/2, g(x), S.Reals) == \
1766.         ConditionSet(g(x), Eq(f(g(x)) - pi/2, 0), S.Reals)
1767. 
1768. 
1769. def test_issue_8715():
1770.     eq = x + 1/x > -2 + 1/x
1771.     assert solveset(eq, x, S.Reals) == \
1772.         (Interval.open(-2, oo) - FiniteSet(0))
1773.     assert solveset(eq.subs(x,log(x)), x, S.Reals) == \
1774.         Interval.open(exp(-2), oo) - FiniteSet(1)
1775. 
1776. 
1777. def test_issue_11174():
1778.     r, t = symbols('r t')
1779.     eq = z**2 + exp(2*x) - sin(y)
1780.     soln = Intersection(S.Reals, FiniteSet(log(-z**2 + sin(y))/2))
1781.     assert solveset(eq, x, S.Reals) == soln
1782. 
1783.     eq = sqrt(r)*Abs(tan(t))/sqrt(tan(t)**2 + 1) + x*tan(t)
1784.     s = -sqrt(r)*Abs(tan(t))/(sqrt(tan(t)**2 + 1)*tan(t))
1785.     soln = Intersection(S.Reals, FiniteSet(s))
1786.     assert solveset(eq, x, S.Reals) == soln
1787. 
1788. 
1789. def test_issue_11534():
1790.     # eq and eq2 should give the same solution as a Complement
1791.     eq = -y + x/sqrt(-x**2 + 1)
1792.     eq2 = -y**2 + x**2/(-x**2 + 1)
1793.     soln = Complement(FiniteSet(-y/sqrt(y**2 + 1), y/sqrt(y**2 + 1)), FiniteSet(-1, 1))
1794.     assert solveset(eq, x, S.Reals) == soln
1795.     assert solveset(eq2, x, S.Reals) == soln
1796. 
1797. 
1798. def test_issue_10477():
1799.     assert solveset((x**2 + 4*x - 3)/x < 2, x, S.Reals) == \
1800.         Union(Interval.open(-oo, -3), Interval.open(0, 1))
1801. 
1802. 
1803. def test_issue_10671():
1804.     assert solveset(sin(y), y, Interval(0, pi)) == FiniteSet(0, pi)
1805.     i = Interval(1, 10)
1806.     assert solveset((1/x).diff(x) < 0, x, i) == i
1807. 
1808. 
1809. def test_issue_11064():
1810.     eq = x + sqrt(x**2 - 5)
1811.     assert solveset(eq > 0, x, S.Reals) == \
1812.         Interval(sqrt(5), oo)
1813.     assert solveset(eq < 0, x, S.Reals) == \
1814.         Interval(-oo, -sqrt(5))
1815.     assert solveset(eq > sqrt(5), x, S.Reals) == \
1816.         Interval.Lopen(sqrt(5), oo)
1817. 
1818. 
1819. def test_issue_12478():
1820.     eq = sqrt(x - 2) + 2
1821.     soln = solveset_real(eq, x)
1822.     assert soln is S.EmptySet
1823.     assert solveset(eq < 0, x, S.Reals) is S.EmptySet
1824.     assert solveset(eq > 0, x, S.Reals) == Interval(2, oo)
1825. 
1826. 
1827. def test_issue_12429():
1828.     eq = solveset(log(x)/x <= 0, x, S.Reals)
1829.     sol = Interval.Lopen(0, 1)
1830.     assert eq == sol
1831. 
1832. 
1833. def test_solveset_arg():
1834.     assert solveset(arg(x), x, S.Reals)  == Interval.open(0, oo)
1835.     assert solveset(arg(4*x -3), x) == Interval.open(Rational(3, 4), oo)
1836. 
1837. 
1838. def test__is_finite_with_finite_vars():
1839.     f = _is_finite_with_finite_vars
1840.     # issue 12482
1841.     assert all(f(1/x) is None for x in (
1842.         Dummy(), Dummy(real=True), Dummy(complex=True)))
1843.     assert f(1/Dummy(real=False)) is True  # b/c it's finite but not 0
1844. 
1845. 
1846. def test_issue_13550():
1847.     assert solveset(x**2 - 2*x - 15, symbol = x, domain = Interval(-oo, 0)) == FiniteSet(-3)
1848. 
1849. 
1850. def test_issue_13849():
1851.     t = symbols('t')
1852.     assert nonlinsolve((t*(sqrt(5) + sqrt(2)) - sqrt(2), t), t) == EmptySet()
1853. 
1854. 
1855. def test_issue_14223():
1856.     x = Symbol('x')
1857.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,
1858.         S.Reals) == FiniteSet(-1, 1)
1859.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,
1860.         Interval(0, 2)) == FiniteSet(1)
1861. 
1862. 
1863. def test_issue_10158():
1864.     x = Symbol('x')
1865.     dom = S.Reals
1866.     assert solveset(x*Max(x, 15) - 10, x, dom) == FiniteSet(Rational(2, 3))
1867.     assert solveset(x*Min(x, 15) - 10, x, dom) == FiniteSet(-sqrt(10), sqrt(10))
1868.     assert solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom) == FiniteSet(-1, 1)
1869.     assert solveset(Abs(x - 1) - Abs(y), x, dom) == FiniteSet(-Abs(y) + 1, Abs(y) + 1)
1870.     assert solveset(Abs(x + 4*Abs(x + 1)), x, dom) == FiniteSet(Rational(-4, 3), Rational(-4, 5))
1871.     assert solveset(2*Abs(x + Abs(x + Max(3, x))) - 2, x, S.Reals) == FiniteSet(-1, -2)
1872.     dom = S.Complexes
1873.     raises(ValueError, lambda: solveset(x*Max(x, 15) - 10, x, dom))
1874.     raises(ValueError, lambda: solveset(x*Min(x, 15) - 10, x, dom))
1875.     raises(ValueError, lambda: solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom))
1876.     raises(ValueError, lambda: solveset(Abs(x - 1) - Abs(y), x, dom))
1877.     raises(ValueError, lambda: solveset(Abs(x + 4*Abs(x + 1)), x, dom))
1878. 
1879. 
1880. def test_issue_14300():
1881.     x, y, n = symbols('x y n')
1882. 
1883.     f = 1 - exp(-18000000*x) - y
1884.     a1 = FiniteSet(-log(-y + 1)/18000000)
1885. 
1886.     assert solveset(f, x, S.Reals) == \
1887.         Intersection(S.Reals, a1)
1888.     assert solveset(f, x) == \
1889.         ImageSet(Lambda(n, -I*(2*n*pi + arg(-y + 1))/18000000 -
1890.             log(Abs(y - 1))/18000000), S.Integers)
1891. 
1892. 
1893. def test_issue_14454():
1894.     x = Symbol('x')
1895.     number = CRootOf(x**4 + x - 1, 2)
1896.     raises(ValueError, lambda: invert_real(number, 0, x, S.Reals))
1897.     assert invert_real(x**2, number, x, S.Reals)  # no error
1898. 
1899. 
1900. def test_term_factors():
1901.     assert list(_term_factors(3**x - 2)) == [-2, 3**x]
1902.     expr = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)
1903.     assert set(_term_factors(expr)) == set([
1904.         3**(x + 2), 4**(x + 2), 3**(x + 3), 4**(x - 1), -1, 4**(x + 1)])
1905. 
1906. 
1907. #################### tests for transolve and its helpers ###############
1908. 
1909. def test_transolve():
1910. 
1911.     assert _transolve(3**x, x, S.Reals) == S.EmptySet
1912.     assert _transolve(3**x - 9**(x + 5), x, S.Reals) == FiniteSet(-10)
1913. 
1914. 
1915. # exponential tests
1916. def test_exponential_real():
1917.     from sympy.abc import x, y, z
1918. 
1919.     e1 = 3**(2*x) - 2**(x + 3)
1920.     e2 = 4**(5 - 9*x) - 8**(2 - x)
1921.     e3 = 2**x + 4**x
1922.     e4 = exp(log(5)*x) - 2**x
1923.     e5 = exp(x/y)*exp(-z/y) - 2
1924.     e6 = 5**(x/2) - 2**(x/3)
1925.     e7 = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)
1926.     e8 = -9*exp(-2*x + 5) + 4*exp(3*x + 1)
1927.     e9 = 2**x + 4**x + 8**x - 84
1928. 
1929.     assert solveset(e1, x, S.Reals) == FiniteSet(
1930.         -3*log(2)/(-2*log(3) + log(2)))
1931.     assert solveset(e2, x, S.Reals) == FiniteSet(Rational(4, 15))
1932.     assert solveset(e3, x, S.Reals) == S.EmptySet
1933.     assert solveset(e4, x, S.Reals) == FiniteSet(0)
1934.     assert solveset(e5, x, S.Reals) == Intersection(
1935.         S.Reals, FiniteSet(y*log(2*exp(z/y))))
1936.     assert solveset(e6, x, S.Reals) == FiniteSet(0)
1937.     assert solveset(e7, x, S.Reals) == FiniteSet(2)
1938.     assert solveset(e8, x, S.Reals) == FiniteSet(-2*log(2)/5 + 2*log(3)/5 + Rational(4, 5))
1939.     assert solveset(e9, x, S.Reals) == FiniteSet(2)
1940. 
1941.     assert solveset_real(-9*exp(-2*x + 5) + 2**(x + 1), x) == FiniteSet(
1942.         -((-5 - 2*log(3) + log(2))/(log(2) + 2)))
1943.     assert solveset_real(4**(x/2) - 2**(x/3), x) == FiniteSet(0)
1944.     b = sqrt(6)*sqrt(log(2))/sqrt(log(5))
1945.     assert solveset_real(5**(x/2) - 2**(3/x), x) == FiniteSet(-b, b)
1946. 
1947.     # coverage test
1948.     C1, C2 = symbols('C1 C2')
1949.     f = Function('f')
1950.     assert solveset_real(C1 + C2/x**2 - exp(-f(x)), f(x)) == Intersection(
1951.         S.Reals, FiniteSet(-log(C1 + C2/x**2)))
1952.     y = symbols('y', positive=True)
1953.     assert solveset_real(x**2 - y**2/exp(x), y) == Intersection(
1954.         S.Reals, FiniteSet(-sqrt(x**2*exp(x)), sqrt(x**2*exp(x))))
1955.     p = Symbol('p', positive=True)
1956.     assert solveset_real((1/p + 1)**(p + 1), p) == EmptySet()
1957. 
1958. 
1959. @XFAIL
1960. def test_exponential_complex():
1961.     from sympy.abc import x
1962.     from sympy import Dummy
1963.     n = Dummy('n')
1964. 
1965.     assert solveset_complex(2**x + 4**x, x) == imageset(
1966.         Lambda(n, I*(2*n*pi + pi)/log(2)), S.Integers)
1967.     assert solveset_complex(x**z*y**z - 2, z) == FiniteSet(
1968.         log(2)/(log(x) + log(y)))
1969.     assert solveset_complex(4**(x/2) - 2**(x/3), x) == imageset(
1970.         Lambda(n, 3*n*I*pi/log(2)), S.Integers)
1971.     assert solveset(2**x + 32, x) == imageset(
1972.         Lambda(n, (I*(2*n*pi + pi) + 5*log(2))/log(2)), S.Integers)
1973. 
1974.     eq = (2**exp(y**2/x) + 2)/(x**2 + 15)
1975.     a = sqrt(x)*sqrt(-log(log(2)) + log(log(2) + 2*n*I*pi))
1976.     assert solveset_complex(eq, y) == FiniteSet(-a, a)
1977. 
1978.     union1 = imageset(Lambda(n, I*(2*n*pi - pi*Rational(2, 3))/log(2)), S.Integers)
1979.     union2 = imageset(Lambda(n, I*(2*n*pi + pi*Rational(2, 3))/log(2)), S.Integers)
1980.     assert solveset(2**x + 4**x + 8**x, x) == Union(union1, union2)
1981. 
1982.     eq = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)
1983.     res = solveset(eq, x)
1984.     num = 2*n*I*pi - 4*log(2) + 2*log(3)
1985.     den = -2*log(2) + log(3)
1986.     ans = imageset(Lambda(n, num/den), S.Integers)
1987.     assert res == ans
1988. 
1989. 
1990. def test_expo_conditionset():
1991.     from sympy.abc import x, y
1992. 
1993.     f1 = (exp(x) + 1)**x - 2
1994.     f2 = (x + 2)**y*x - 3
1995.     f3 = 2**x - exp(x) - 3
1996.     f4 = log(x) - exp(x)
1997.     f5 = 2**x + 3**x - 5**x
1998. 
1999.     assert solveset(f1, x, S.Reals) == ConditionSet(
2000.         x, Eq((exp(x) + 1)**x - 2, 0), S.Reals)
2001.     assert solveset(f2, x, S.Reals) == ConditionSet(
2002.         x, Eq(x*(x + 2)**y - 3, 0), S.Reals)
2003.     assert solveset(f3, x, S.Reals) == ConditionSet(
2004.         x, Eq(2**x - exp(x) - 3, 0), S.Reals)
2005.     assert solveset(f4, x, S.Reals) == ConditionSet(
2006.         x, Eq(-exp(x) + log(x), 0), S.Reals)
2007.     assert solveset(f5, x, S.Reals) == ConditionSet(
2008.         x, Eq(2**x + 3**x - 5**x, 0), S.Reals)
2009. 
2010. 
2011. def test_exponential_symbols():
2012.     x, y, z = symbols('x y z', positive=True)
2013. 
2014.     assert solveset(z**x - y, x, S.Reals) == Intersection(
2015.         S.Reals, FiniteSet(log(y)/log(z)))
2016. 
2017.     w = symbols('w')
2018.     f1 = 2*x**w - 4*y**w
2019.     f2 = (x/y)**w - 2
2020.     sol1 = Intersection({log(2)/(log(x) - log(y))}, S.Reals)
2021.     sol2 = Intersection({log(2)/log(x/y)}, S.Reals)
2022.     assert solveset(f1, w, S.Reals) == sol1
2023.     assert solveset(f2, w, S.Reals) == sol2
2024. 
2025.     assert solveset(x**x, x, S.Reals) == S.EmptySet
2026.     assert solveset(x**y - 1, y, S.Reals) == FiniteSet(0)
2027.     assert solveset(exp(x/y)*exp(-z/y) - 2, y, S.Reals) == FiniteSet(
2028.         (x - z)/log(2)) - FiniteSet(0)
2029. 
2030.     a, b, x, y = symbols('a b x y')
2031.     assert solveset_real(a**x - b**x, x) == ConditionSet(
2032.         x, (a > 0) & (b > 0), FiniteSet(0))
2033.     assert solveset(a**x - b**x, x) == ConditionSet(
2034.         x, Ne(a, 0) & Ne(b, 0), FiniteSet(0))
2035. 
2036. 
2037. @XFAIL
2038. def test_issue_10864():
2039.     assert solveset(x**(y*z) - x, x, S.Reals) == FiniteSet(1)
2040. 
2041. 
2042. @XFAIL
2043. def test_solve_only_exp_2():
2044.     assert solveset_real(sqrt(exp(x)) + sqrt(exp(-x)) - 4, x) == \
2045.         FiniteSet(2*log(-sqrt(3) + 2), 2*log(sqrt(3) + 2))
2046. 
2047. 
2048. def test_is_exponential():
2049.     x, y, z = symbols('x y z')
2050. 
2051.     assert _is_exponential(y, x) is False
2052.     assert _is_exponential(3**x - 2, x) is True
2053.     assert _is_exponential(5**x - 7**(2 - x), x) is True
2054.     assert _is_exponential(sin(2**x) - 4*x, x) is False
2055.     assert _is_exponential(x**y - z, y) is True
2056.     assert _is_exponential(x**y - z, x) is False
2057.     assert _is_exponential(2**x + 4**x - 1, x) is True
2058.     assert _is_exponential(x**(y*z) - x, x) is False
2059.     assert _is_exponential(x**(2*x) - 3**x, x) is False
2060.     assert _is_exponential(x**y - y*z, y) is False
2061.     assert _is_exponential(x**y - x*z, y) is True
2062. 
2063. 
2064. def test_solve_exponential():
2065.     assert _solve_exponential(3**(2*x) - 2**(x + 3), 0, x, S.Reals) == \
2066.         FiniteSet(-3*log(2)/(-2*log(3) + log(2)))
2067.     assert _solve_exponential(2**y + 4**y, 1, y, S.Reals) == \
2068.         FiniteSet(log(Rational(-1, 2) + sqrt(5)/2)/log(2))
2069.     assert _solve_exponential(2**y + 4**y, 0, y, S.Reals) == \
2070.         S.EmptySet
2071.     assert _solve_exponential(2**x + 3**x - 5**x, 0, x, S.Reals) == \
2072.         ConditionSet(x, Eq(2**x + 3**x - 5**x, 0), S.Reals)
2073. 
2074. # end of exponential tests
2075. 
2076. 
2077. # logarithmic tests
2078. def test_logarithmic():
2079.     assert solveset_real(log(x - 3) + log(x + 3), x) == FiniteSet(
2080.         -sqrt(10), sqrt(10))
2081.     assert solveset_real(log(x + 1) - log(2*x - 1), x) == FiniteSet(2)
2082.     assert solveset_real(log(x + 3) + log(1 + 3/x) - 3, x) == FiniteSet(
2083.         -3 + sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 + exp(3)/2,
2084.         -sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 - 3 + exp(3)/2)
2085. 
2086.     eq = z - log(x) + log(y/(x*(-1 + y**2/x**2)))
2087.     assert solveset_real(eq, x) == \
2088.         Intersection(S.Reals, FiniteSet(-sqrt(y**2 - y*exp(z)),
2089.             sqrt(y**2 - y*exp(z)))) - \
2090.         Intersection(S.Reals, FiniteSet(-sqrt(y**2), sqrt(y**2)))
2091.     assert solveset_real(
2092.         log(3*x) - log(-x + 1) - log(4*x + 1), x) == FiniteSet(Rational(-1, 2), S.Half)
2093.     assert solveset(log(x**y) - y*log(x), x, S.Reals) == S.Reals
2094. 
2095. @XFAIL
2096. def test_uselogcombine_2():
2097.     eq = log(exp(2*x) + 1) + log(-tanh(x) + 1) - log(2)
2098.     assert solveset_real(eq, x) == EmptySet()
2099.     eq = log(8*x) - log(sqrt(x) + 1) - 2
2100.     assert solveset_real(eq, x) == EmptySet()
2101. 
2102. 
2103. def test_is_logarithmic():
2104.     assert _is_logarithmic(y, x) is False
2105.     assert _is_logarithmic(log(x), x) is True
2106.     assert _is_logarithmic(log(x) - 3, x) is True
2107.     assert _is_logarithmic(log(x)*log(y), x) is True
2108.     assert _is_logarithmic(log(x)**2, x) is False
2109.     assert _is_logarithmic(log(x - 3) + log(x + 3), x) is True
2110.     assert _is_logarithmic(log(x**y) - y*log(x), x) is True
2111.     assert _is_logarithmic(sin(log(x)), x) is False
2112.     assert _is_logarithmic(x + y, x) is False
2113.     assert _is_logarithmic(log(3*x) - log(1 - x) + 4, x) is True
2114.     assert _is_logarithmic(log(x) + log(y) + x, x) is False
2115.     assert _is_logarithmic(log(log(x - 3)) + log(x - 3), x) is True
2116.     assert _is_logarithmic(log(log(3) + x) + log(x), x) is True
2117.     assert _is_logarithmic(log(x)*(y + 3) + log(x), y) is False
2118. 
2119. 
2120. def test_solve_logarithm():
2121.     y = Symbol('y')
2122.     assert _solve_logarithm(log(x**y) - y*log(x), 0, x, S.Reals) == S.Reals
2123.     y = Symbol('y', positive=True)
2124.     assert _solve_logarithm(log(x)*log(y), 0, x, S.Reals) == FiniteSet(1)
2125. 
2126. # end of logarithmic tests
2127. 
2128. 
2129. def test_linear_coeffs():
2130.     from sympy.solvers.solveset import linear_coeffs
2131.     assert linear_coeffs(0, x) == [0, 0]
2132.     assert all(i is S.Zero for i in linear_coeffs(0, x))
2133.     assert linear_coeffs(x + 2*y + 3, x, y) == [1, 2, 3]
2134.     assert linear_coeffs(x + 2*y + 3, y, x) == [2, 1, 3]
2135.     assert linear_coeffs(x + 2*x**2 + 3, x, x**2) == [1, 2, 3]
2136.     raises(ValueError, lambda:
2137.         linear_coeffs(x + 2*x**2 + x**3, x, x**2))
2138.     raises(ValueError, lambda:
2139.         linear_coeffs(1/x*(x - 1) + 1/x, x))
2140.     assert linear_coeffs(a*(x + y), x, y) == [a, a, 0]
2141.     assert linear_coeffs(1.0, x, y) == [0, 0, 1.0]
2142. 
2143. # modular tests
2144. def test_is_modular():
2145.     x, y = symbols('x y')
2146. 
2147.     assert _is_modular(y, x) is False
2148.     assert _is_modular(Mod(x, 3) - 1, x) is True
2149.     assert _is_modular(Mod(x**3 - 3*x**2 - x + 1, 3) - 1, x) is True
2150.     assert _is_modular(Mod(exp(x + y), 3) - 2, x) is True
2151.     assert _is_modular(Mod(exp(x + y), 3) - log(x), x) is True
2152.     assert _is_modular(Mod(x, 3) - 1, y) is False
2153.     assert _is_modular(Mod(x, 3)**2 - 5, x) is False
2154.     assert _is_modular(Mod(x, 3)**2 - y, x) is False
2155.     assert _is_modular(exp(Mod(x, 3)) - 1, x) is False
2156.     assert _is_modular(Mod(3, y) - 1, y) is False
2157. 
2158. 
2159. def test_invert_modular():
2160.     x, y = symbols('x y')
2161.     n = Dummy('n', integer=True)
2162.     from sympy.solvers.solveset import _invert_modular as invert_modular
2163. 
2164.     # non invertible cases
2165.     assert invert_modular(Mod(sin(x), 7), S(5), n, x) == (Mod(sin(x), 7), 5)
2166.     assert invert_modular(Mod(exp(x), 7), S(5), n, x) == (Mod(exp(x), 7), 5)
2167.     assert invert_modular(Mod(log(x), 7), S(5), n, x) == (Mod(log(x), 7), 5)
2168.     # a is symbol
2169.     assert invert_modular(Mod(x, 7), S(5), n, x) == \
2170.             (x, ImageSet(Lambda(n, 7*n + 5), S.Integers))
2171.     # a.is_Add
2172.     assert invert_modular(Mod(x + 8, 7), S(5), n, x) == \
2173.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))
2174.     assert invert_modular(Mod(x**2 + x, 7), S(5), n, x) == \
2175.             (Mod(x**2 + x, 7), 5)
2176.     # a.is_Mul
2177.     assert invert_modular(Mod(3*x, 7), S(5), n, x) == \
2178.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))
2179.     assert invert_modular(Mod((x + 1)*(x + 2), 7), S(5), n, x) == \
2180.             (Mod((x + 1)*(x + 2), 7), 5)
2181.     # a.is_Pow
2182.     assert invert_modular(Mod(x**4, 7), S(5), n, x) == \
2183.             (x, EmptySet())
2184.     assert invert_modular(Mod(3**x, 4), S(3), n, x) == \
2185.             (x, ImageSet(Lambda(n, 2*n + 1), S.Naturals0))
2186.     assert invert_modular(Mod(2**(x**2 + x + 1), 7), S(2), n, x) == \
2187.             (x**2 + x + 1, ImageSet(Lambda(n, 3*n + 1), S.Naturals0))
2188. 
2189. 
2190. def test_solve_modular():
2191.     x = Symbol('x')
2192.     n = Dummy('n', integer=True)
2193.     # if rhs has symbol (need to be implemented in future).
2194.     assert solveset(Mod(x, 4) - x, x, S.Integers) == \
2195.             ConditionSet(x, Eq(-x + Mod(x, 4), 0), \
2196.             S.Integers)
2197.     # when _invert_modular fails to invert
2198.     assert solveset(3 - Mod(sin(x), 7), x, S.Integers) == \
2199.             ConditionSet(x, Eq(Mod(sin(x), 7) - 3, 0), S.Integers)
2200.     assert solveset(3 - Mod(log(x), 7), x, S.Integers) == \
2201.             ConditionSet(x, Eq(Mod(log(x), 7) - 3, 0), S.Integers)
2202.     assert solveset(3 - Mod(exp(x), 7), x, S.Integers) == \
2203.             ConditionSet(x, Eq(Mod(exp(x), 7) - 3, 0), S.Integers)
2204.     # EmptySet solution definitely
2205.     assert solveset(7 - Mod(x, 5), x, S.Integers) == EmptySet()
2206.     assert solveset(5 - Mod(x, 5), x, S.Integers) == EmptySet()
2207.     # Negative m
2208.     assert solveset(2 + Mod(x, -3), x, S.Integers) == \
2209.             ImageSet(Lambda(n, -3*n - 2), S.Integers)
2210.     assert solveset(4 + Mod(x, -3), x, S.Integers) == EmptySet()
2211.     # linear expression in Mod
2212.     assert solveset(3 - Mod(x, 5), x, S.Integers) == ImageSet(Lambda(n, 5*n + 3), S.Integers)
2213.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Integers) == \
2214.                 ImageSet(Lambda(n, 7*n + 5), S.Integers)
2215.     assert solveset(3 - Mod(5*x, 7), x, S.Integers) == \
2216.                 ImageSet(Lambda(n, 7*n + 2), S.Integers)
2217.     # higher degree expression in Mod
2218.     assert solveset(Mod(x**2, 160) - 9, x, S.Integers) == \
2219.             Union(ImageSet(Lambda(n, 160*n + 3), S.Integers),
2220.             ImageSet(Lambda(n, 160*n + 13), S.Integers),
2221.             ImageSet(Lambda(n, 160*n + 67), S.Integers),
2222.             ImageSet(Lambda(n, 160*n + 77), S.Integers),
2223.             ImageSet(Lambda(n, 160*n + 83), S.Integers),
2224.             ImageSet(Lambda(n, 160*n + 93), S.Integers),
2225.             ImageSet(Lambda(n, 160*n + 147), S.Integers),
2226.             ImageSet(Lambda(n, 160*n + 157), S.Integers))
2227.     assert solveset(3 - Mod(x**4, 7), x, S.Integers) == EmptySet()
2228.     assert solveset(Mod(x**4, 17) - 13, x, S.Integers) == \
2229.             Union(ImageSet(Lambda(n, 17*n + 3), S.Integers),
2230.             ImageSet(Lambda(n, 17*n + 5), S.Integers),
2231.             ImageSet(Lambda(n, 17*n + 12), S.Integers),
2232.             ImageSet(Lambda(n, 17*n + 14), S.Integers))
2233.     # a.is_Pow tests
2234.     assert solveset(Mod(7**x, 41) - 15, x, S.Integers) == \
2235.             ImageSet(Lambda(n, 40*n + 3), S.Naturals0)
2236.     assert solveset(Mod(12**x, 21) - 18, x, S.Integers) == \
2237.             ImageSet(Lambda(n, 6*n + 2), S.Naturals0)
2238.     assert solveset(Mod(3**x, 4) - 3, x, S.Integers) == \
2239.             ImageSet(Lambda(n, 2*n + 1), S.Naturals0)
2240.     assert solveset(Mod(2**x, 7) - 2 , x, S.Integers) == \
2241.             ImageSet(Lambda(n, 3*n + 1), S.Naturals0)
2242.     assert solveset(Mod(3**(3**x), 4) - 3, x, S.Integers) == \
2243.             Intersection(ImageSet(Lambda(n, Intersection({log(2*n + 1)/log(3)},
2244.             S.Integers)), S.Naturals0), S.Integers)
2245.     # Not Implemented for m without primitive root
2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \
2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)
2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \
2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)
2250.     # domain intersection
2251.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Naturals0) == \
2252.             Intersection(ImageSet(Lambda(n, 7*n + 5), S.Integers), S.Naturals0)
2253.     # Complex args
2254.     assert solveset(Mod(x, 3) - I, x, S.Integers) == \
2255.             EmptySet()
2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \
2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)
2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \
2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)
2260.     # issue 13178
2261.     n = symbols('n', integer=True)
2262.     a = 742938285
2263.     z = 1898888478
2264.     m = 2**31 - 1
2265.     x = 20170816
2266.     assert solveset(x - Mod(a**n*z, m), n, S.Integers) == \
2267.             ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0)
2268.     assert solveset(x - Mod(a**n*z, m), n, S.Naturals0) == \
2269.             Intersection(ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0),
2270.             S.Naturals0)
2271.     assert solveset(x - Mod(a**(2*n)*z, m), n, S.Integers) == \
2272.             Intersection(ImageSet(Lambda(n, 1073741823*n + 50), S.Naturals0),
2273.             S.Integers)
2274.     assert solveset(x - Mod(a**(2*n + 7)*z, m), n, S.Integers) == EmptySet()
2275.     assert solveset(x - Mod(a**(n - 4)*z, m), n, S.Integers) == \
2276.             Intersection(ImageSet(Lambda(n, 2147483646*n + 104), S.Naturals0),
2277.             S.Integers)
2278. 
2279. @XFAIL
2280. def test_solve_modular_fail():
2281.     # issue 17373 (https://github.com/sympy/sympy/issues/17373)
2282.     assert solveset(Mod(x**4, 14) - 11, x, S.Integers) == \
2283.             Union(ImageSet(Lambda(n, 14*n + 3), S.Integers),
2284.             ImageSet(Lambda(n, 14*n + 11), S.Integers))
2285.     assert solveset(Mod(x**31, 74) - 43, x, S.Integers) == \
2286.             ImageSet(Lambda(n, 74*n + 31), S.Integers)
2287. 
2288. # end of modular tests


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 07:18:10,663 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user's refinement query explicitly asks for the full content of the file `sympy/solvers/tests/test_solveset.py`. This context block encompasses the entire file, thereby directly fulfilling the user's request.", relative_path='sympy/solvers/tests/test_solveset.py', start_line=1, end_line=2288)]
2025-10-06 07:18:10,665 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='sympy/solvers/tests/test_solveset.py', content='1. from sympy.core.containers import Tuple\n2. from sympy.core.function import (Function, Lambda, nfloat)\n3. from sympy.core.mod import Mod\n4. from sympy.core.numbers import (E, I, Rational, oo, pi)\n5. from sympy.core.relational import (Eq, Gt,\n6.     Ne)\n7. from sympy.core.singleton import S\n8. from sympy.core.symbol import (Dummy, Symbol, symbols)\n9. from sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\n10. from sympy.functions.elementary.exponential import (LambertW, exp, log)\n11. from sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n12.     atanh, sinh, tanh, cosh, sech, coth)\n13. from sympy.functions.elementary.miscellaneous import sqrt, Min, Max\n14. from sympy.functions.elementary.piecewise import Piecewise\n15. from sympy.functions.elementary.trigonometric import (\n16.     TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n17.     cos, cot, csc, sec, sin, tan)\n18. from sympy.functions.special.error_functions import (erf, erfc,\n19.     erfcinv, erfinv)\n20. from sympy.logic.boolalg import And\n21. from sympy.matrices.dense import MutableDenseMatrix as Matrix\n22. from sympy.matrices.immutable import ImmutableDenseMatrix\n23. from sympy.polys.polytools import Poly\n24. from sympy.polys.rootoftools import CRootOf\n25. from sympy.sets.contains import Contains\n26. from sympy.sets.conditionset import ConditionSet\n27. from sympy.sets.fancysets import ImageSet\n28. from sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n29.     Intersection, Interval, Union, imageset, ProductSet)\n30. from sympy.tensor.indexed import Indexed\n31. from sympy.utilities.iterables import numbered_symbols\n32. \n33. from sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n34.     nocache_fail)\n35. from sympy.utilities.randtest import verify_numerically as tn\n36. from sympy.physics.units import cm\n37. \n38. from sympy.solvers.solveset import (\n39.     solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n40.     linsolve, _is_function_class_equation, invert_real, invert_complex,\n41.     solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n42.     _is_finite_with_finite_vars, _transolve, _is_exponential,\n43.     _solve_exponential, _is_logarithmic,\n44.     _solve_logarithm, _term_factors, _is_modular)\n45. \n46. \n47. a = Symbol(\'a\', real=True)\n48. b = Symbol(\'b\', real=True)\n49. c = Symbol(\'c\', real=True)\n50. x = Symbol(\'x\', real=True)\n51. y = Symbol(\'y\', real=True)\n52. z = Symbol(\'z\', real=True)\n53. q = Symbol(\'q\', real=True)\n54. m = Symbol(\'m\', real=True)\n55. n = Symbol(\'n\', real=True)\n56. \n57. \n58. def test_invert_real():\n59.     x = Symbol(\'x\', real=True)\n60.     y = Symbol(\'y\')\n61.     n = Symbol(\'n\')\n62. \n63.     def ireal(x, s=S.Reals):\n64.         return Intersection(s, x)\n65. \n66.     # issue 14223\n67.     assert invert_real(x, 0, x, Interval(1, 2)) == (x, S.EmptySet)\n68. \n69.     assert invert_real(exp(x), y, x) == (x, ireal(FiniteSet(log(y))))\n70. \n71.     y = Symbol(\'y\', positive=True)\n72.     n = Symbol(\'n\', real=True)\n73.     assert invert_real(x + 3, y, x) == (x, FiniteSet(y - 3))\n74.     assert invert_real(x*3, y, x) == (x, FiniteSet(y / 3))\n75. \n76.     assert invert_real(exp(x), y, x) == (x, FiniteSet(log(y)))\n77.     assert invert_real(exp(3*x), y, x) == (x, FiniteSet(log(y) / 3))\n78.     assert invert_real(exp(x + 3), y, x) == (x, FiniteSet(log(y) - 3))\n79. \n80.     assert invert_real(exp(x) + 3, y, x) == (x, ireal(FiniteSet(log(y - 3))))\n81.     assert invert_real(exp(x)*3, y, x) == (x, FiniteSet(log(y / 3)))\n82. \n83.     assert invert_real(log(x), y, x) == (x, FiniteSet(exp(y)))\n84.     assert invert_real(log(3*x), y, x) == (x, FiniteSet(exp(y) / 3))\n85.     assert invert_real(log(x + 3), y, x) == (x, FiniteSet(exp(y) - 3))\n86. \n87.     assert invert_real(Abs(x), y, x) == (x, FiniteSet(y, -y))\n88. \n89.     assert invert_real(2**x, y, x) == (x, FiniteSet(log(y)/log(2)))\n90.     assert invert_real(2**exp(x), y, x) == (x, ireal(FiniteSet(log(log(y)/log(2)))))\n91. \n92.     assert invert_real(x**2, y, x) == (x, FiniteSet(sqrt(y), -sqrt(y)))\n93.     assert invert_real(x**S.Half, y, x) == (x, FiniteSet(y**2))\n94. \n95.     raises(ValueError, lambda: invert_real(x, x, x))\n96.     raises(ValueError, lambda: invert_real(x**pi, y, x))\n97.     raises(ValueError, lambda: invert_real(S.One, y, x))\n98. \n99.     assert invert_real(x**31 + x, y, x) == (x**31 + x, FiniteSet(y))\n100. \n101.     lhs = x**31 + x\n102.     base_values =  FiniteSet(y - 1, -y - 1)\n103.     assert invert_real(Abs(x**31 + x + 1), y, x) == (lhs, base_values)\n104. \n105.     assert invert_real(sin(x), y, x) == \\\n106.         (x, imageset(Lambda(n, n*pi + (-1)**n*asin(y)), S.Integers))\n107. \n108.     assert invert_real(sin(exp(x)), y, x) == \\\n109.         (x, imageset(Lambda(n, log((-1)**n*asin(y) + n*pi)), S.Integers))\n110. \n111.     assert invert_real(csc(x), y, x) == \\\n112.         (x, imageset(Lambda(n, n*pi + (-1)**n*acsc(y)), S.Integers))\n113. \n114.     assert invert_real(csc(exp(x)), y, x) == \\\n115.         (x, imageset(Lambda(n, log((-1)**n*acsc(y) + n*pi)), S.Integers))\n116. \n117.     assert invert_real(cos(x), y, x) == \\\n118.         (x, Union(imageset(Lambda(n, 2*n*pi + acos(y)), S.Integers), \\\n119.                 imageset(Lambda(n, 2*n*pi - acos(y)), S.Integers)))\n120. \n121.     assert invert_real(cos(exp(x)), y, x) == \\\n122.         (x, Union(imageset(Lambda(n, log(2*n*pi + acos(y))), S.Integers), \\\n123.                 imageset(Lambda(n, log(2*n*pi - acos(y))), S.Integers)))\n124. \n125.     assert invert_real(sec(x), y, x) == \\\n126.         (x, Union(imageset(Lambda(n, 2*n*pi + asec(y)), S.Integers), \\\n127.                 imageset(Lambda(n, 2*n*pi - asec(y)), S.Integers)))\n128. \n129.     assert invert_real(sec(exp(x)), y, x) == \\\n130.         (x, Union(imageset(Lambda(n, log(2*n*pi + asec(y))), S.Integers), \\\n131.                 imageset(Lambda(n, log(2*n*pi - asec(y))), S.Integers)))\n132. \n133.     assert invert_real(tan(x), y, x) == \\\n134.         (x, imageset(Lambda(n, n*pi + atan(y)), S.Integers))\n135. \n136.     assert invert_real(tan(exp(x)), y, x) == \\\n137.         (x, imageset(Lambda(n, log(n*pi + atan(y))), S.Integers))\n138. \n139.     assert invert_real(cot(x), y, x) == \\\n140.         (x, imageset(Lambda(n, n*pi + acot(y)), S.Integers))\n141. \n142.     assert invert_real(cot(exp(x)), y, x) == \\\n143.         (x, imageset(Lambda(n, log(n*pi + acot(y))), S.Integers))\n144. \n145.     assert invert_real(tan(tan(x)), y, x) == \\\n146.         (tan(x), imageset(Lambda(n, n*pi + atan(y)), S.Integers))\n147. \n148.     x = Symbol(\'x\', positive=True)\n149.     assert invert_real(x**pi, y, x) == (x, FiniteSet(y**(1/pi)))\n150. \n151. \n152. def test_invert_complex():\n153.     assert invert_complex(x + 3, y, x) == (x, FiniteSet(y - 3))\n154.     assert invert_complex(x*3, y, x) == (x, FiniteSet(y / 3))\n155. \n156.     assert invert_complex(exp(x), y, x) == \\\n157.         (x, imageset(Lambda(n, I*(2*pi*n + arg(y)) + log(Abs(y))), S.Integers))\n158. \n159.     assert invert_complex(log(x), y, x) == (x, FiniteSet(exp(y)))\n160. \n161.     raises(ValueError, lambda: invert_real(1, y, x))\n162.     raises(ValueError, lambda: invert_complex(x, x, x))\n163.     raises(ValueError, lambda: invert_complex(x, x, 1))\n164. \n165.     # https://github.com/skirpichev/omg/issues/16\n166.     assert invert_complex(sinh(x), 0, x) != (x, FiniteSet(0))\n167. \n168. \n169. def test_domain_check():\n170.     assert domain_check(1/(1 + (1/(x+1))**2), x, -1) is False\n171.     assert domain_check(x**2, x, 0) is True\n172.     assert domain_check(x, x, oo) is False\n173.     assert domain_check(0, x, oo) is False\n174. \n175. \n176. def test_issue_11536():\n177.     assert solveset(0**x - 100, x, S.Reals) == S.EmptySet\n178.     assert solveset(0**x - 1, x, S.Reals) == FiniteSet(0)\n179. \n180. \n181. def test_issue_17479():\n182.     import sympy as sb\n183.     from sympy.solvers.solveset import nonlinsolve\n184.     x, y, z = sb.symbols("x, y, z")\n185.     f = (x**2 + y**2)**2 + (x**2 + z**2)**2 - 2*(2*x**2 + y**2 + z**2)\n186.     fx = sb.diff(f, x)\n187.     fy = sb.diff(f, y)\n188.     fz = sb.diff(f, z)\n189.     sol = nonlinsolve([fx, fy, fz], [x, y, z])\n190.     # FIXME: This previously gave 18 solutions and now gives 20 due to fixes\n191.     # in the handling of intersection of FiniteSets or possibly a small change\n192.     # to ImageSet._contains. However Using expand I can turn this into 16\n193.     # solutions either way:\n194.     #\n195.     #    >>> len(FiniteSet(*(Tuple(*(expand(w) for w in s)) for s in sol)))\n196.     #    16\n197.     #\n198.     assert len(sol) == 20\n199. \n200. \n201. def test_is_function_class_equation():\n202.     from sympy.abc import x, a\n203.     assert _is_function_class_equation(TrigonometricFunction,\n204.                                        tan(x), x) is True\n205.     assert _is_function_class_equation(TrigonometricFunction,\n206.                                        tan(x) - 1, x) is True\n207.     assert _is_function_class_equation(TrigonometricFunction,\n208.                                        tan(x) + sin(x), x) is True\n209.     assert _is_function_class_equation(TrigonometricFunction,\n210.                                        tan(x) + sin(x) - a, x) is True\n211.     assert _is_function_class_equation(TrigonometricFunction,\n212.                                        sin(x)*tan(x) + sin(x), x) is True\n213.     assert _is_function_class_equation(TrigonometricFunction,\n214.                                        sin(x)*tan(x + a) + sin(x), x) is True\n215.     assert _is_function_class_equation(TrigonometricFunction,\n216.                                        sin(x)*tan(x*a) + sin(x), x) is True\n217.     assert _is_function_class_equation(TrigonometricFunction,\n218.                                        a*tan(x) - 1, x) is True\n219.     assert _is_function_class_equation(TrigonometricFunction,\n220.                                        tan(x)**2 + sin(x) - 1, x) is True\n221.     assert _is_function_class_equation(TrigonometricFunction,\n222.                                        tan(x) + x, x) is False\n223.     assert _is_function_class_equation(TrigonometricFunction,\n224.                                        tan(x**2), x) is False\n225.     assert _is_function_class_equation(TrigonometricFunction,\n226.                                        tan(x**2) + sin(x), x) is False\n227.     assert _is_function_class_equation(TrigonometricFunction,\n228.                                        tan(x)**sin(x), x) is False\n229.     assert _is_function_class_equation(TrigonometricFunction,\n230.                                        tan(sin(x)) + sin(x), x) is False\n231.     assert _is_function_class_equation(HyperbolicFunction,\n232.                                        tanh(x), x) is True\n233.     assert _is_function_class_equation(HyperbolicFunction,\n234.                                        tanh(x) - 1, x) is True\n235.     assert _is_function_class_equation(HyperbolicFunction,\n236.                                        tanh(x) + sinh(x), x) is True\n237.     assert _is_function_class_equation(HyperbolicFunction,\n238.                                        tanh(x) + sinh(x) - a, x) is True\n239.     assert _is_function_class_equation(HyperbolicFunction,\n240.                                        sinh(x)*tanh(x) + sinh(x), x) is True\n241.     assert _is_function_class_equation(HyperbolicFunction,\n242.                                        sinh(x)*tanh(x + a) + sinh(x), x) is True\n243.     assert _is_function_class_equation(HyperbolicFunction,\n244.                                        sinh(x)*tanh(x*a) + sinh(x), x) is True\n245.     assert _is_function_class_equation(HyperbolicFunction,\n246.                                        a*tanh(x) - 1, x) is True\n247.     assert _is_function_class_equation(HyperbolicFunction,\n248.                                        tanh(x)**2 + sinh(x) - 1, x) is True\n249.     assert _is_function_class_equation(HyperbolicFunction,\n250.                                        tanh(x) + x, x) is False\n251.     assert _is_function_class_equation(HyperbolicFunction,\n252.                                        tanh(x**2), x) is False\n253.     assert _is_function_class_equation(HyperbolicFunction,\n254.                                        tanh(x**2) + sinh(x), x) is False\n255.     assert _is_function_class_equation(HyperbolicFunction,\n256.                                        tanh(x)**sinh(x), x) is False\n257.     assert _is_function_class_equation(HyperbolicFunction,\n258.                                        tanh(sinh(x)) + sinh(x), x) is False\n259. \n260. \n261. def test_garbage_input():\n262.     raises(ValueError, lambda: solveset_real([x], x))\n263.     assert solveset_real(x, 1) == S.EmptySet\n264.     assert solveset_real(x - 1, 1) == FiniteSet(x)\n265.     assert solveset_real(x, pi) == S.EmptySet\n266.     assert solveset_real(x, x**2) == S.EmptySet\n267. \n268.     raises(ValueError, lambda: solveset_complex([x], x))\n269.     assert solveset_complex(x, pi) == S.EmptySet\n270. \n271.     raises(ValueError, lambda: solveset((x, y), x))\n272.     raises(ValueError, lambda: solveset(x + 1, S.Reals))\n273.     raises(ValueError, lambda: solveset(x + 1, x, 2))\n274. \n275. \n276. def test_solve_mul():\n277.     assert solveset_real((a*x + b)*(exp(x) - 3), x) == \\\n278.         Union({log(3)}, Intersection({-b/a}, S.Reals))\n279.     anz = Symbol(\'anz\', nonzero=True)\n280.     assert solveset_real((anz*x + b)*(exp(x) - 3), x) == \\\n281.         FiniteSet(-b/anz, log(3))\n282.     assert solveset_real((2*x + 8)*(8 + exp(x)), x) == FiniteSet(S(-4))\n283.     assert solveset_real(x/log(x), x) == EmptySet()\n284. \n285. \n286. def test_solve_invert():\n287.     assert solveset_real(exp(x) - 3, x) == FiniteSet(log(3))\n288.     assert solveset_real(log(x) - 3, x) == FiniteSet(exp(3))\n289. \n290.     assert solveset_real(3**(x + 2), x) == FiniteSet()\n291.     assert solveset_real(3**(2 - x), x) == FiniteSet()\n292. \n293.     assert solveset_real(y - b*exp(a/x), x) == Intersection(\n294.         S.Reals, FiniteSet(a/log(y/b)))\n295. \n296.     # issue 4504\n297.     assert solveset_real(2**x - 10, x) == FiniteSet(1 + log(5)/log(2))\n298. \n299. \n300. def test_errorinverses():\n301.     assert solveset_real(erf(x) - S.Half, x) == \\\n302.         FiniteSet(erfinv(S.Half))\n303.     assert solveset_real(erfinv(x) - 2, x) == \\\n304.         FiniteSet(erf(2))\n305.     assert solveset_real(erfc(x) - S.One, x) == \\\n306.         FiniteSet(erfcinv(S.One))\n307.     assert solveset_real(erfcinv(x) - 2, x) == FiniteSet(erfc(2))\n308. \n309. \n310. def test_solve_polynomial():\n311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))\n312. \n313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)\n314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)\n315. \n316.     a11, a12, a21, a22, b1, b2 = symbols(\'a11, a12, a21, a22, b1, b2\')\n317. \n318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(\n319.         -2 + 3 ** S.Half,\n320.         S(4),\n321.         -2 - 3 ** S.Half)\n322. \n323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1\n328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0\n329. \n330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,\n331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)\n332. \n333. \n334. def test_return_root_of():\n335.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20\n336.     s = list(solveset_complex(f, x))\n337.     for root in s:\n338.         assert root.func == CRootOf\n339. \n340.     # if one uses solve to get the roots of a polynomial that has a CRootOf\n341.     # solution, make sure that the use of nfloat during the solve process\n342.     # doesn\'t fail. Note: if you want numerical solutions to a polynomial\n343.     # it is *much* faster to use nroots to get them than to solve the\n344.     # equation only to get CRootOf solutions which are then numerically\n345.     # evaluated. So for eq = x**5 + 3*x + 7 do Poly(eq).nroots() rather\n346.     # than [i.n() for i in solve(eq)] to get the numerical roots of eq.\n347.     assert nfloat(list(solveset_complex(x**5 + 3*x**3 + 7, x))[0],\n348.                   exponent=False) == CRootOf(x**5 + 3*x**3 + 7, 0).n()\n349. \n350.     sol = list(solveset_complex(x**6 - 2*x + 2, x))\n351.     assert all(isinstance(i, CRootOf) for i in sol) and len(sol) == 6\n352. \n353.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20\n354.     s = list(solveset_complex(f, x))\n355.     for root in s:\n356.         assert root.func == CRootOf\n357. \n358.     s = x**5 + 4*x**3 + 3*x**2 + Rational(7, 4)\n359.     assert solveset_complex(s, x) == \\\n360.         FiniteSet(*Poly(s*4, domain=\'ZZ\').all_roots())\n361. \n362.     # Refer issue #7876\n363.     eq = x*(x - 1)**2*(x + 1)*(x**6 - x + 1)\n364.     assert solveset_complex(eq, x) == \\\n365.         FiniteSet(-1, 0, 1, CRootOf(x**6 - x + 1, 0),\n366.                        CRootOf(x**6 - x + 1, 1),\n367.                        CRootOf(x**6 - x + 1, 2),\n368.                        CRootOf(x**6 - x + 1, 3),\n369.                        CRootOf(x**6 - x + 1, 4),\n370.                        CRootOf(x**6 - x + 1, 5))\n371. \n372. \n373. def test__has_rational_power():\n374.     from sympy.solvers.solveset import _has_rational_power\n375.     assert _has_rational_power(sqrt(2), x)[0] is False\n376.     assert _has_rational_power(x*sqrt(2), x)[0] is False\n377. \n378.     assert _has_rational_power(x**2*sqrt(x), x) == (True, 2)\n379.     assert _has_rational_power(sqrt(2)*x**Rational(1, 3), x) == (True, 3)\n380.     assert _has_rational_power(sqrt(x)*x**Rational(1, 3), x) == (True, 6)\n381. \n382. \n383. def test_solveset_sqrt_1():\n384.     assert solveset_real(sqrt(5*x + 6) - 2 - x, x) == \\\n385.         FiniteSet(-S.One, S(2))\n386.     assert solveset_real(sqrt(x - 1) - x + 7, x) == FiniteSet(10)\n387.     assert solveset_real(sqrt(x - 2) - 5, x) == FiniteSet(27)\n388.     assert solveset_real(sqrt(x) - 2 - 5, x) == FiniteSet(49)\n389.     assert solveset_real(sqrt(x**3), x) == FiniteSet(0)\n390.     assert solveset_real(sqrt(x - 1), x) == FiniteSet(1)\n391. \n392. \n393. def test_solveset_sqrt_2():\n394.     # http://tutorial.math.lamar.edu/Classes/Alg/SolveRadicalEqns.aspx#Solve_Rad_Ex2_a\n395.     assert solveset_real(sqrt(2*x - 1) - sqrt(x - 4) - 2, x) == \\\n396.         FiniteSet(S(5), S(13))\n397.     assert solveset_real(sqrt(x + 7) + 2 - sqrt(3 - x), x) == \\\n398.         FiniteSet(-6)\n399. \n400.     # http://www.purplemath.com/modules/solverad.htm\n401.     assert solveset_real(sqrt(17*x - sqrt(x**2 - 5)) - 7, x) == \\\n402.         FiniteSet(3)\n403. \n404.     eq = x + 1 - (x**4 + 4*x**3 - x)**Rational(1, 4)\n405.     assert solveset_real(eq, x) == FiniteSet(Rational(-1, 2), Rational(-1, 3))\n406. \n407.     eq = sqrt(2*x + 9) - sqrt(x + 1) - sqrt(x + 4)\n408.     assert solveset_real(eq, x) == FiniteSet(0)\n409. \n410.     eq = sqrt(x + 4) + sqrt(2*x - 1) - 3*sqrt(x - 1)\n411.     assert solveset_real(eq, x) == FiniteSet(5)\n412. \n413.     eq = sqrt(x)*sqrt(x - 7) - 12\n414.     assert solveset_real(eq, x) == FiniteSet(16)\n415. \n416.     eq = sqrt(x - 3) + sqrt(x) - 3\n417.     assert solveset_real(eq, x) == FiniteSet(4)\n418. \n419.     eq = sqrt(2*x**2 - 7) - (3 - x)\n420.     assert solveset_real(eq, x) == FiniteSet(-S(8), S(2))\n421. \n422.     # others\n423.     eq = sqrt(9*x**2 + 4) - (3*x + 2)\n424.     assert solveset_real(eq, x) == FiniteSet(0)\n425. \n426.     assert solveset_real(sqrt(x - 3) - sqrt(x) - 3, x) == FiniteSet()\n427. \n428.     eq = (2*x - 5)**Rational(1, 3) - 3\n429.     assert solveset_real(eq, x) == FiniteSet(16)\n430. \n431.     assert solveset_real(sqrt(x) + sqrt(sqrt(x)) - 4, x) == \\\n432.         FiniteSet((Rational(-1, 2) + sqrt(17)/2)**4)\n433. \n434.     eq = sqrt(x) - sqrt(x - 1) + sqrt(sqrt(x))\n435.     assert solveset_real(eq, x) == FiniteSet()\n436. \n437.     eq = (sqrt(x) + sqrt(x + 1) + sqrt(1 - x) - 6*sqrt(5)/5)\n438.     ans = solveset_real(eq, x)\n439.     ra = S(\'\'\'-1484/375 - 4*(-1/2 + sqrt(3)*I/2)*(-12459439/52734375 +\n440.     114*sqrt(12657)/78125)**(1/3) - 172564/(140625*(-1/2 +\n441.     sqrt(3)*I/2)*(-12459439/52734375 + 114*sqrt(12657)/78125)**(1/3))\'\'\')\n442.     rb = Rational(4, 5)\n443.     assert all(abs(eq.subs(x, i).n()) < 1e-10 for i in (ra, rb)) and \\\n444.         len(ans) == 2 and \\\n445.         set([i.n(chop=True) for i in ans]) == \\\n446.         set([i.n(chop=True) for i in (ra, rb)])\n447. \n448.     assert solveset_real(sqrt(x) + x**Rational(1, 3) +\n449.                                  x**Rational(1, 4), x) == FiniteSet(0)\n450. \n451.     assert solveset_real(x/sqrt(x**2 + 1), x) == FiniteSet(0)\n452. \n453.     eq = (x - y**3)/((y**2)*sqrt(1 - y**2))\n454.     assert solveset_real(eq, x) == FiniteSet(y**3)\n455. \n456.     # issue 4497\n457.     assert solveset_real(1/(5 + x)**Rational(1, 5) - 9, x) == \\\n458.         FiniteSet(Rational(-295244, 59049))\n459. \n460. \n461. @XFAIL\n462. def test_solve_sqrt_fail():\n463.     # this only works if we check real_root(eq.subs(x, Rational(1, 3)))\n464.     # but checksol doesn\'t work like that\n465.     eq = (x**3 - 3*x**2)**Rational(1, 3) + 1 - x\n466.     assert solveset_real(eq, x) == FiniteSet(Rational(1, 3))\n467. \n468. \n469. @slow\n470. def test_solve_sqrt_3():\n471.     R = Symbol(\'R\')\n472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)\n473.     sol = solveset_complex(eq, R)\n474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,\n475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +\n476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +\n477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +\n478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -\n479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]\n481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +\n483.             Rational(5, 3) +\n484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]\n487. \n488.     assert sol._args[0] == FiniteSet(*fset)\n489.     assert sol._args[1] == ConditionSet(\n490.         R,\n491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),\n492.         FiniteSet(*cset))\n493. \n494.     # the number of real roots will depend on the value of m: for m=1 there are 4\n495.     # and for m=-1 there are none.\n496.     eq = -sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) + sqrt((-m**2/2 - sqrt(\n497.         4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m - sqrt(\n498.             4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2)\n499.     unsolved_object = ConditionSet(q, Eq(sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) -\n500.         sqrt((-m**2/2 - sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m -\n501.         sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2), 0), S.Reals)\n502.     assert solveset_real(eq, q) == unsolved_object\n503. \n504. \n505. def test_solve_polynomial_symbolic_param():\n506.     assert solveset_complex((x**2 - 1)**2 - a, x) == \\\n507.         FiniteSet(sqrt(1 + sqrt(a)), -sqrt(1 + sqrt(a)),\n508.                   sqrt(1 - sqrt(a)), -sqrt(1 - sqrt(a)))\n509. \n510.     # issue 4507\n511.     assert solveset_complex(y - b/(1 + a*x), x) == \\\n512.         FiniteSet((b/y - 1)/a) - FiniteSet(-1/a)\n513. \n514.     # issue 4508\n515.     assert solveset_complex(y - b*x/(a + x), x) == \\\n516.         FiniteSet(-a*y/(y - b)) - FiniteSet(-a)\n517. \n518. \n519. def test_solve_rational():\n520.     assert solveset_real(1/x + 1, x) == FiniteSet(-S.One)\n521.     assert solveset_real(1/exp(x) - 1, x) == FiniteSet(0)\n522.     assert solveset_real(x*(1 - 5/x), x) == FiniteSet(5)\n523.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)\n524.     assert solveset_real((x**2/(7 - x)).diff(x), x) == \\\n525.         FiniteSet(S.Zero, S(14))\n526. \n527. \n528. def test_solveset_real_gen_is_pow():\n529.     assert solveset_real(sqrt(1) + 1, x) == EmptySet()\n530. \n531. \n532. def test_no_sol():\n533.     assert solveset(1 - oo*x) == EmptySet()\n534.     assert solveset(oo*x, x) == EmptySet()\n535.     assert solveset(oo*x - oo, x) == EmptySet()\n536.     assert solveset_real(4, x) == EmptySet()\n537.     assert solveset_real(exp(x), x) == EmptySet()\n538.     assert solveset_real(x**2 + 1, x) == EmptySet()\n539.     assert solveset_real(-3*a/sqrt(x), x) == EmptySet()\n540.     assert solveset_real(1/x, x) == EmptySet()\n541.     assert solveset_real(-(1 + x)/(2 + x)**2 + 1/(2 + x), x) == \\\n542.         EmptySet()\n543. \n544. \n545. def test_sol_zero_real():\n546.     assert solveset_real(0, x) == S.Reals\n547.     assert solveset(0, x, Interval(1, 2)) == Interval(1, 2)\n548.     assert solveset_real(-x**2 - 2*x + (x + 1)**2 - 1, x) == S.Reals\n549. \n550. \n551. def test_no_sol_rational_extragenous():\n552.     assert solveset_real((x/(x + 1) + 3)**(-2), x) == EmptySet()\n553.     assert solveset_real((x - 1)/(1 + 1/(x - 1)), x) == EmptySet()\n554. \n555. \n556. def test_solve_polynomial_cv_1a():\n557.     """\n558.     Test for solving on equations that can be converted to\n559.     a polynomial equation using the change of variable y -> x**Rational(p, q)\n560.     """\n561.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n562.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n563.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n564.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n565.     assert solveset_real(x*(x**(S.One / 3) - 3), x) == \\\n566.         FiniteSet(S.Zero, S(27))\n567. \n568. \n569. def test_solveset_real_rational():\n570.     """Test solveset_real for rational functions"""\n571.     assert solveset_real((x - y**3) / ((y**2)*sqrt(1 - y**2)), x) \\\n572.         == FiniteSet(y**3)\n573.     # issue 4486\n574.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)\n575. \n576. \n577. def test_solveset_real_log():\n578.     assert solveset_real(log((x-1)*(x+1)), x) == \\\n579.         FiniteSet(sqrt(2), -sqrt(2))\n580. \n581. \n582. def test_poly_gens():\n583.     assert solveset_real(4**(2*(x**2) + 2*x) - 8, x) == \\\n584.         FiniteSet(Rational(-3, 2), S.Half)\n585. \n586. \n587. def test_solve_abs():\n588.     x = Symbol(\'x\')\n589.     n = Dummy(\'n\')\n590.     raises(ValueError, lambda: solveset(Abs(x) - 1, x))\n591.     assert solveset(Abs(x) - n, x, S.Reals) == ConditionSet(x, Contains(n, Interval(0, oo)), {-n, n})\n592.     assert solveset_real(Abs(x) - 2, x) == FiniteSet(-2, 2)\n593.     assert solveset_real(Abs(x) + 2, x) is S.EmptySet\n594.     assert solveset_real(Abs(x + 3) - 2*Abs(x - 3), x) == \\\n595.         FiniteSet(1, 9)\n596.     assert solveset_real(2*Abs(x) - Abs(x - 1), x) == \\\n597.         FiniteSet(-1, Rational(1, 3))\n598. \n599.     sol = ConditionSet(\n600.             x,\n601.             And(\n602.                 Contains(b, Interval(0, oo)),\n603.                 Contains(a + b, Interval(0, oo)),\n604.                 Contains(a - b, Interval(0, oo))),\n605.             FiniteSet(-a - b - 3, -a + b - 3, a - b - 3, a + b - 3))\n606.     eq = Abs(Abs(x + 3) - a) - b\n607.     assert invert_real(eq, 0, x)[1] == sol\n608.     reps = {a: 3, b: 1}\n609.     eqab = eq.subs(reps)\n610.     for i in sol.subs(reps):\n611.         assert not eqab.subs(x, i)\n612.     assert solveset(Eq(sin(Abs(x)), 1), x, domain=S.Reals) == Union(\n613.         Intersection(Interval(0, oo),\n614.             ImageSet(Lambda(n, (-1)**n*pi/2 + n*pi), S.Integers)),\n615.         Intersection(Interval(-oo, 0),\n616.             ImageSet(Lambda(n, n*pi - (-1)**(-n)*pi/2), S.Integers)))\n617. \n618. \n619. \n620. def test_issue_9565():\n621.     assert solveset_real(Abs((x - 1)/(x - 5)) <= Rational(1, 3), x) == Interval(-1, 2)\n622. \n623. \n624. def test_issue_10069():\n625.     eq = abs(1/(x - 1)) - 1 > 0\n626.     u = Union(Interval.open(0, 1), Interval.open(1, 2))\n627.     assert solveset_real(eq, x) == u\n628. \n629. \n630. def test_real_imag_splitting():\n631.     a, b = symbols(\'a b\', real=True)\n632.     assert solveset_real(sqrt(a**2 - b**2) - 3, a) == \\\n633.         FiniteSet(-sqrt(b**2 + 9), sqrt(b**2 + 9))\n634.     assert solveset_real(sqrt(a**2 + b**2) - 3, a) != \\\n635.         S.EmptySet\n636. \n637. \n638. def test_units():\n639.     assert solveset_real(1/x - 1/(2*cm), x) == FiniteSet(2*cm)\n640. \n641. \n642. def test_solve_only_exp_1():\n643.     y = Symbol(\'y\', positive=True)\n644.     assert solveset_real(exp(x) - y, x) == FiniteSet(log(y))\n645.     assert solveset_real(exp(x) + exp(-x) - 4, x) == \\\n646.         FiniteSet(log(-sqrt(3) + 2), log(sqrt(3) + 2))\n647.     assert solveset_real(exp(x) + exp(-x) - y, x) != S.EmptySet\n648. \n649. \n650. def test_atan2():\n651.     # The .inverse() method on atan2 works only if x.is_real is True and the\n652.     # second argument is a real constant\n653.     assert solveset_real(atan2(x, 2) - pi/3, x) == FiniteSet(2*sqrt(3))\n654. \n655. \n656. def test_piecewise_solveset():\n657.     eq = Piecewise((x - 2, Gt(x, 2)), (2 - x, True)) - 3\n658.     assert set(solveset_real(eq, x)) == set(FiniteSet(-1, 5))\n659. \n660.     absxm3 = Piecewise(\n661.         (x - 3, 0 <= x - 3),\n662.         (3 - x, 0 > x - 3))\n663.     y = Symbol(\'y\', positive=True)\n664.     assert solveset_real(absxm3 - y, x) == FiniteSet(-y + 3, y + 3)\n665. \n666.     f = Piecewise(((x - 2)**2, x >= 0), (0, True))\n667.     assert solveset(f, x, domain=S.Reals) == Union(FiniteSet(2), Interval(-oo, 0, True, True))\n668. \n669.     assert solveset(\n670.         Piecewise((x + 1, x > 0), (I, True)) - I, x, S.Reals\n671.         ) == Interval(-oo, 0)\n672. \n673.     assert solveset(Piecewise((x - 1, Ne(x, I)), (x, True)), x) == FiniteSet(1)\n674. \n675. \n676. def test_solveset_complex_polynomial():\n677.     from sympy.abc import x, a, b, c\n678.     assert solveset_complex(a*x**2 + b*x + c, x) == \\\n679.         FiniteSet(-b/(2*a) - sqrt(-4*a*c + b**2)/(2*a),\n680.                   -b/(2*a) + sqrt(-4*a*c + b**2)/(2*a))\n681. \n682.     assert solveset_complex(x - y**3, y) == FiniteSet(\n683.         (-x**Rational(1, 3))/2 + I*sqrt(3)*x**Rational(1, 3)/2,\n684.         x**Rational(1, 3),\n685.         (-x**Rational(1, 3))/2 - I*sqrt(3)*x**Rational(1, 3)/2)\n686. \n687.     assert solveset_complex(x + 1/x - 1, x) == \\\n688.         FiniteSet(S.Half + I*sqrt(3)/2, S.Half - I*sqrt(3)/2)\n689. \n690. \n691. def test_sol_zero_complex():\n692.     assert solveset_complex(0, x) == S.Complexes\n693. \n694. \n695. def test_solveset_complex_rational():\n696.     assert solveset_complex((x - 1)*(x - I)/(x - 3), x) == \\\n697.         FiniteSet(1, I)\n698. \n699.     assert solveset_complex((x - y**3)/((y**2)*sqrt(1 - y**2)), x) == \\\n700.         FiniteSet(y**3)\n701.     assert solveset_complex(-x**2 - I, x) == \\\n702.         FiniteSet(-sqrt(2)/2 + sqrt(2)*I/2, sqrt(2)/2 - sqrt(2)*I/2)\n703. \n704. \n705. def test_solve_quintics():\n706.     skip("This test is too slow")\n707.     f = x**5 - 110*x**3 - 55*x**2 + 2310*x + 979\n708.     s = solveset_complex(f, x)\n709.     for root in s:\n710.         res = f.subs(x, root.n()).n()\n711.         assert tn(res, 0)\n712. \n713.     f = x**5 + 15*x + 12\n714.     s = solveset_complex(f, x)\n715.     for root in s:\n716.         res = f.subs(x, root.n()).n()\n717.         assert tn(res, 0)\n718. \n719. \n720. def test_solveset_complex_exp():\n721.     from sympy.abc import x, n\n722.     assert solveset_complex(exp(x) - 1, x) == \\\n723.         imageset(Lambda(n, I*2*n*pi), S.Integers)\n724.     assert solveset_complex(exp(x) - I, x) == \\\n725.         imageset(Lambda(n, I*(2*n*pi + pi/2)), S.Integers)\n726.     assert solveset_complex(1/exp(x), x) == S.EmptySet\n727.     assert solveset_complex(sinh(x).rewrite(exp), x) == \\\n728.         imageset(Lambda(n, n*pi*I), S.Integers)\n729. \n730. \n731. def test_solveset_real_exp():\n732.     from sympy.abc import x, y\n733.     assert solveset(Eq((-2)**x, 4), x, S.Reals) == FiniteSet(2)\n734.     assert solveset(Eq(-2**x, 4), x, S.Reals) == S.EmptySet\n735.     assert solveset(Eq((-3)**x, 27), x, S.Reals) == S.EmptySet\n736.     assert solveset(Eq((-5)**(x+1), 625), x, S.Reals) == FiniteSet(3)\n737.     assert solveset(Eq(2**(x-3), -16), x, S.Reals) == S.EmptySet\n738.     assert solveset(Eq((-3)**(x - 3), -3**39), x, S.Reals) == FiniteSet(42)\n739.     assert solveset(Eq(2**x, y), x, S.Reals) == Intersection(S.Reals, FiniteSet(log(y)/log(2)))\n740. \n741.     assert invert_real((-2)**(2*x) - 16, 0, x) == (x, FiniteSet(2))\n742. \n743. \n744. def test_solve_complex_log():\n745.     assert solveset_complex(log(x), x) == FiniteSet(1)\n746.     assert solveset_complex(1 - log(a + 4*x**2), x) == \\\n747.         FiniteSet(-sqrt(-a + E)/2, sqrt(-a + E)/2)\n748. \n749. \n750. def test_solve_complex_sqrt():\n751.     assert solveset_complex(sqrt(5*x + 6) - 2 - x, x) == \\\n752.         FiniteSet(-S.One, S(2))\n753.     assert solveset_complex(sqrt(5*x + 6) - (2 + 2*I) - x, x) == \\\n754.         FiniteSet(-S(2), 3 - 4*I)\n755.     assert solveset_complex(4*x*(1 - a * sqrt(x)), x) == \\\n756.         FiniteSet(S.Zero, 1 / a ** 2)\n757. \n758. \n759. def test_solveset_complex_tan():\n760.     s = solveset_complex(tan(x).rewrite(exp), x)\n761.     assert s == imageset(Lambda(n, pi*n), S.Integers) - \\\n762.         imageset(Lambda(n, pi*n + pi/2), S.Integers)\n763. \n764. \n765. @nocache_fail\n766. def test_solve_trig():\n767.     from sympy.abc import n\n768.     assert solveset_real(sin(x), x) == \\\n769.         Union(imageset(Lambda(n, 2*pi*n), S.Integers),\n770.               imageset(Lambda(n, 2*pi*n + pi), S.Integers))\n771. \n772.     assert solveset_real(sin(x) - 1, x) == \\\n773.         imageset(Lambda(n, 2*pi*n + pi/2), S.Integers)\n774. \n775.     assert solveset_real(cos(x), x) == \\\n776.         Union(imageset(Lambda(n, 2*pi*n + pi/2), S.Integers),\n777.               imageset(Lambda(n, 2*pi*n + pi*Rational(3, 2)), S.Integers))\n778. \n779.     assert solveset_real(sin(x) + cos(x), x) == \\\n780.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(3, 4)), S.Integers),\n781.               imageset(Lambda(n, 2*n*pi + pi*Rational(7, 4)), S.Integers))\n782. \n783.     assert solveset_real(sin(x)**2 + cos(x)**2, x) == S.EmptySet\n784. \n785.     # This fails when running with the cache off:\n786.     assert solveset_complex(cos(x) - S.Half, x) == \\\n787.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(5, 3)), S.Integers),\n788.               imageset(Lambda(n, 2*n*pi + pi/3), S.Integers))\n789. \n790.     y, a = symbols(\'y,a\')\n791.     assert solveset(sin(y + a) - sin(y), a, domain=S.Reals) == \\\n792.         Union(ImageSet(Lambda(n, 2*n*pi), S.Integers),\n793.         Intersection(ImageSet(Lambda(n, -I*(I*(\n794.         2*n*pi + arg(-exp(-2*I*y))) +\n795.         2*im(y))), S.Integers), S.Reals))\n796. \n797.     assert solveset_real(sin(2*x)*cos(x) + cos(2*x)*sin(x)-1, x) == \\\n798.                             ImageSet(Lambda(n, n*pi*Rational(2, 3) + pi/6), S.Integers)\n799. \n800.     # Tests for _solve_trig2() function\n801.     assert solveset_real(2*cos(x)*cos(2*x) - 1, x) == \\\n802.           Union(ImageSet(Lambda(n, 2*n*pi + 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +\n803.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +\n804.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6)))), S.Integers),\n805.                   ImageSet(Lambda(n, 2*n*pi - 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +\n806.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +\n807.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6))) +\n808.                   2*pi), S.Integers))\n809. \n810.     assert solveset_real(2*tan(x)*sin(x) + 1, x) == Union(\n811.         ImageSet(Lambda(n, 2*n*pi + atan(sqrt(2)*sqrt(-1 +sqrt(17))/\n812.             (1 - sqrt(17))) + pi), S.Integers),\n813.         ImageSet(Lambda(n, 2*n*pi - atan(sqrt(2)*sqrt(-1 + sqrt(17))/\n814.             (1 - sqrt(17))) + pi), S.Integers))\n815. \n816.     assert solveset_real(cos(2*x)*cos(4*x) - 1, x) == \\\n817.                             ImageSet(Lambda(n, n*pi), S.Integers)\n818. \n819. \n820. def test_solve_hyperbolic():\n821.     # actual solver: _solve_trig1\n822.     n = Dummy(\'n\')\n823.     assert solveset(sinh(x) + cosh(x), x) == S.EmptySet\n824.     assert solveset(sinh(x) + cos(x), x) == ConditionSet(x,\n825.         Eq(cos(x) + sinh(x), 0), S.Complexes)\n826.     assert solveset_real(sinh(x) + sech(x), x) == FiniteSet(\n827.         log(sqrt(sqrt(5) - 2)))\n828.     assert solveset_real(3*cosh(2*x) - 5, x) == FiniteSet(\n829.         log(sqrt(3)/3), log(sqrt(3)))\n830.     assert solveset_real(sinh(x - 3) - 2, x) == FiniteSet(\n831.         log((2 + sqrt(5))*exp(3)))\n832.     assert solveset_real(cosh(2*x) + 2*sinh(x) - 5, x) == FiniteSet(\n833.         log(-2 + sqrt(5)), log(1 + sqrt(2)))\n834.     assert solveset_real((coth(x) + sinh(2*x))/cosh(x) - 3, x) == FiniteSet(\n835.         log(S.Half + sqrt(5)/2), log(1 + sqrt(2)))\n836.     assert solveset_real(cosh(x)*sinh(x) - 2, x) == FiniteSet(\n837.         log(sqrt(4 + sqrt(17))))\n838.     assert solveset_real(sinh(x) + tanh(x) - 1, x) == FiniteSet(\n839.         log(sqrt(2)/2 + sqrt(-S(1)/2 + sqrt(2))))\n840.     assert solveset_complex(sinh(x) - I/2, x) == Union(\n841.         ImageSet(Lambda(n, I*(2*n*pi + 5*pi/6)), S.Integers),\n842.         ImageSet(Lambda(n, I*(2*n*pi + pi/6)), S.Integers))\n843.     assert solveset_complex(sinh(x) + sech(x), x) == Union(\n844.         ImageSet(Lambda(n, 2*n*I*pi + log(sqrt(-2 + sqrt(5)))), S.Integers),\n845.         ImageSet(Lambda(n, I*(2*n*pi + pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers),\n846.         ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sqrt(-2 + sqrt(5)))), S.Integers),\n847.         ImageSet(Lambda(n, I*(2*n*pi - pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers))\n848.     # issues #9606 / #9531:\n849.     assert solveset(sinh(x), x, S.Reals) == FiniteSet(0)\n850.     assert solveset(sinh(x), x, S.Complexes) == Union(\n851.         ImageSet(Lambda(n, I*(2*n*pi + pi)), S.Integers),\n852.         ImageSet(Lambda(n, 2*n*I*pi), S.Integers))\n853. \n854. \n855. def test_solve_invalid_sol():\n856.     assert 0 not in solveset_real(sin(x)/x, x)\n857.     assert 0 not in solveset_complex((exp(x) - 1)/x, x)\n858. \n859. \n860. @XFAIL\n861. def test_solve_trig_simplified():\n862.     from sympy.abc import n\n863.     assert solveset_real(sin(x), x) == \\\n864.         imageset(Lambda(n, n*pi), S.Integers)\n865. \n866.     assert solveset_real(cos(x), x) == \\\n867.         imageset(Lambda(n, n*pi + pi/2), S.Integers)\n868. \n869.     assert solveset_real(cos(x) + sin(x), x) == \\\n870.         imageset(Lambda(n, n*pi - pi/4), S.Integers)\n871. \n872. \n873. @XFAIL\n874. def test_solve_lambert():\n875.     assert solveset_real(x*exp(x) - 1, x) == FiniteSet(LambertW(1))\n876.     assert solveset_real(exp(x) + x, x) == FiniteSet(-LambertW(1))\n877.     assert solveset_real(x + 2**x, x) == \\\n878.         FiniteSet(-LambertW(log(2))/log(2))\n879. \n880.     # issue 4739\n881.     ans = solveset_real(3*x + 5 + 2**(-5*x + 3), x)\n882.     assert ans == FiniteSet(Rational(-5, 3) +\n883.                             LambertW(-10240*2**Rational(1, 3)*log(2)/3)/(5*log(2)))\n884. \n885.     eq = 2*(3*x + 4)**5 - 6*7**(3*x + 9)\n886.     result = solveset_real(eq, x)\n887.     ans = FiniteSet((log(2401) +\n888.                      5*LambertW(-log(7**(7*3**Rational(1, 5)/5))))/(3*log(7))/-1)\n889.     assert result == ans\n890.     assert solveset_real(eq.expand(), x) == result\n891. \n892.     assert solveset_real(5*x - 1 + 3*exp(2 - 7*x), x) == \\\n893.         FiniteSet(Rational(1, 5) + LambertW(-21*exp(Rational(3, 5))/5)/7)\n894. \n895.     assert solveset_real(2*x + 5 + log(3*x - 2), x) == \\\n896.         FiniteSet(Rational(2, 3) + LambertW(2*exp(Rational(-19, 3))/3)/2)\n897. \n898.     assert solveset_real(3*x + log(4*x), x) == \\\n899.         FiniteSet(LambertW(Rational(3, 4))/3)\n900. \n901.     assert solveset_real(x**x - 2) == FiniteSet(exp(LambertW(log(2))))\n902. \n903.     a = Symbol(\'a\')\n904.     assert solveset_real(-a*x + 2*x*log(x), x) == FiniteSet(exp(a/2))\n905.     a = Symbol(\'a\', real=True)\n906.     assert solveset_real(a/x + exp(x/2), x) == \\\n907.         FiniteSet(2*LambertW(-a/2))\n908.     assert solveset_real((a/x + exp(x/2)).diff(x), x) == \\\n909.         FiniteSet(4*LambertW(sqrt(2)*sqrt(a)/4))\n910. \n911.     # coverage test\n912.     assert solveset_real(tanh(x + 3)*tanh(x - 3) - 1, x) == EmptySet()\n913. \n914.     assert solveset_real((x**2 - 2*x + 1).subs(x, log(x) + 3*x), x) == \\\n915.         FiniteSet(LambertW(3*S.Exp1)/3)\n916.     assert solveset_real((x**2 - 2*x + 1).subs(x, (log(x) + 3*x)**2 - 1), x) == \\\n917.         FiniteSet(LambertW(3*exp(-sqrt(2)))/3, LambertW(3*exp(sqrt(2)))/3)\n918.     assert solveset_real((x**2 - 2*x - 2).subs(x, log(x) + 3*x), x) == \\\n919.         FiniteSet(LambertW(3*exp(1 + sqrt(3)))/3, LambertW(3*exp(-sqrt(3) + 1))/3)\n920.     assert solveset_real(x*log(x) + 3*x + 1, x) == \\\n921.         FiniteSet(exp(-3 + LambertW(-exp(3))))\n922.     eq = (x*exp(x) - 3).subs(x, x*exp(x))\n923.     assert solveset_real(eq, x) == \\\n924.         FiniteSet(LambertW(3*exp(-LambertW(3))))\n925. \n926.     assert solveset_real(3*log(a**(3*x + 5)) + a**(3*x + 5), x) == \\\n927.         FiniteSet(-((log(a**5) + LambertW(Rational(1, 3)))/(3*log(a))))\n928.     p = symbols(\'p\', positive=True)\n929.     assert solveset_real(3*log(p**(3*x + 5)) + p**(3*x + 5), x) == \\\n930.         FiniteSet(\n931.         log((-3**Rational(1, 3) - 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),\n932.         log((-3**Rational(1, 3) + 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),\n933.         log((3*LambertW(Rational(1, 3))/p**5)**(1/(3*log(p)))),)  # checked numerically\n934.     # check collection\n935.     b = Symbol(\'b\')\n936.     eq = 3*log(a**(3*x + 5)) + b*log(a**(3*x + 5)) + a**(3*x + 5)\n937.     assert solveset_real(eq, x) == FiniteSet(\n938.         -((log(a**5) + LambertW(1/(b + 3)))/(3*log(a))))\n939. \n940.     # issue 4271\n941.     assert solveset_real((a/x + exp(x/2)).diff(x, 2), x) == FiniteSet(\n942.         6*LambertW((-1)**Rational(1, 3)*a**Rational(1, 3)/3))\n943. \n944.     assert solveset_real(x**3 - 3**x, x) == \\\n945.         FiniteSet(-3/log(3)*LambertW(-log(3)/3))\n946.     assert solveset_real(3**cos(x) - cos(x)**3) == FiniteSet(\n947.         acos(-3*LambertW(-log(3)/3)/log(3)))\n948. \n949.     assert solveset_real(x**2 - 2**x, x) == \\\n950.         solveset_real(-x**2 + 2**x, x)\n951. \n952.     assert solveset_real(3*log(x) - x*log(3)) == FiniteSet(\n953.         -3*LambertW(-log(3)/3)/log(3),\n954.         -3*LambertW(-log(3)/3, -1)/log(3))\n955. \n956.     assert solveset_real(LambertW(2*x) - y) == FiniteSet(\n957.         y*exp(y)/2)\n958. \n959. \n960. @XFAIL\n961. def test_other_lambert():\n962.     a = Rational(6, 5)\n963.     assert solveset_real(x**a - a**x, x) == FiniteSet(\n964.         a, -a*LambertW(-log(a)/a)/log(a))\n965. \n966. \n967. def test_solveset():\n968.     x = Symbol(\'x\')\n969.     f = Function(\'f\')\n970.     raises(ValueError, lambda: solveset(x + y))\n971.     assert solveset(x, 1) == S.EmptySet\n972.     assert solveset(f(1)**2 + y + 1, f(1)\n973.         ) == FiniteSet(-sqrt(-y - 1), sqrt(-y - 1))\n974.     assert solveset(f(1)**2 - 1, f(1), S.Reals) == FiniteSet(-1, 1)\n975.     assert solveset(f(1)**2 + 1, f(1)) == FiniteSet(-I, I)\n976.     assert solveset(x - 1, 1) == FiniteSet(x)\n977.     assert solveset(sin(x) - cos(x), sin(x)) == FiniteSet(cos(x))\n978. \n979.     assert solveset(0, domain=S.Reals) == S.Reals\n980.     assert solveset(1) == S.EmptySet\n981.     assert solveset(True, domain=S.Reals) == S.Reals  # issue 10197\n982.     assert solveset(False, domain=S.Reals) == S.EmptySet\n983. \n984.     assert solveset(exp(x) - 1, domain=S.Reals) == FiniteSet(0)\n985.     assert solveset(exp(x) - 1, x, S.Reals) == FiniteSet(0)\n986.     assert solveset(Eq(exp(x), 1), x, S.Reals) == FiniteSet(0)\n987.     assert solveset(exp(x) - 1, exp(x), S.Reals) == FiniteSet(1)\n988.     A = Indexed(\'A\', x)\n989.     assert solveset(A - 1, A, S.Reals) == FiniteSet(1)\n990. \n991.     assert solveset(x - 1 >= 0, x, S.Reals) == Interval(1, oo)\n992.     assert solveset(exp(x) - 1 >= 0, x, S.Reals) == Interval(0, oo)\n993. \n994.     assert solveset(exp(x) - 1, x) == imageset(Lambda(n, 2*I*pi*n), S.Integers)\n995.     assert solveset(Eq(exp(x), 1), x) == imageset(Lambda(n, 2*I*pi*n),\n996.                                                   S.Integers)\n997.     # issue 13825\n998.     assert solveset(x**2 + f(0) + 1, x) == {-sqrt(-f(0) - 1), sqrt(-f(0) - 1)}\n999. \n1000. \n1001. def test__solveset_multi():\n1002.     from sympy.solvers.solveset import _solveset_multi\n1003.     from sympy import Reals\n1004. \n1005.     # Basic univariate case:\n1006.     from sympy.abc import x\n1007.     assert _solveset_multi([x**2-1], [x], [S.Reals]) == FiniteSet((1,), (-1,))\n1008. \n1009.     # Linear systems of two equations\n1010.     from sympy.abc import x, y\n1011.     assert _solveset_multi([x+y, x+1], [x, y], [Reals, Reals]) == FiniteSet((-1, 1))\n1012.     assert _solveset_multi([x+y, x+1], [y, x], [Reals, Reals]) == FiniteSet((1, -1))\n1013.     assert _solveset_multi([x+y, x-y-1], [x, y], [Reals, Reals]) == FiniteSet((S(1)/2, -S(1)/2))\n1014.     assert _solveset_multi([x-1, y-2], [x, y], [Reals, Reals]) == FiniteSet((1, 2))\n1015.     #assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == ImageSet(Lambda(x, (x, -x)), Reals)\n1016.     assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == Union(\n1017.             ImageSet(Lambda(((x,),), (x, -x)), ProductSet(Reals)),\n1018.             ImageSet(Lambda(((y,),), (-y, y)), ProductSet(Reals)))\n1019.     assert _solveset_multi([x+y, x+y+1], [x, y], [Reals, Reals]) == S.EmptySet\n1020.     assert _solveset_multi([x+y, x-y, x-1], [x, y], [Reals, Reals]) == S.EmptySet\n1021.     assert _solveset_multi([x+y, x-y, x-1], [y, x], [Reals, Reals]) == S.EmptySet\n1022. \n1023.     # Systems of three equations:\n1024.     from sympy.abc import x, y, z\n1025.     assert _solveset_multi([x+y+z-1, x+y-z-2, x-y-z-3], [x, y, z], [Reals,\n1026.         Reals, Reals]) == FiniteSet((2, -S.Half, -S.Half))\n1027. \n1028.     # Nonlinear systems:\n1029.     from sympy.abc import r, theta, z, x, y\n1030.     assert _solveset_multi([x**2+y**2-2, x+y], [x, y], [Reals, Reals]) == FiniteSet((-1, 1), (1, -1))\n1031.     assert _solveset_multi([x**2-1, y], [x, y], [Reals, Reals]) == FiniteSet((1, 0), (-1, 0))\n1032.     #assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(\n1033.     #        ImageSet(Lambda(x, (x, -x)), Reals), ImageSet(Lambda(x, (x, x)), Reals))\n1034.     assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(\n1035.             ImageSet(Lambda(((x,),), (x, -Abs(x))), ProductSet(Reals)),\n1036.             ImageSet(Lambda(((x,),), (x, Abs(x))), ProductSet(Reals)),\n1037.             ImageSet(Lambda(((y,),), (-Abs(y), y)), ProductSet(Reals)),\n1038.             ImageSet(Lambda(((y,),), (Abs(y), y)), ProductSet(Reals)))\n1039.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [theta, r],\n1040.             [Interval(0, pi), Interval(-1, 1)]) == FiniteSet((0, 1), (pi, -1))\n1041.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [r, theta],\n1042.             [Interval(0, 1), Interval(0, pi)]) == FiniteSet((1, 0))\n1043.     #assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],\n1044.     #        [Interval(0, 1), Interval(0, pi)]) == ?\n1045.     assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],\n1046.             [Interval(0, 1), Interval(0, pi)]) == Union(\n1047.             ImageSet(Lambda(((r,),), (r, 0)), ImageSet(Lambda(r, (r,)), Interval(0, 1))),\n1048.             ImageSet(Lambda(((theta,),), (0, theta)), ImageSet(Lambda(theta, (theta,)), Interval(0, pi))))\n1049. \n1050. \n1051. def test_conditionset():\n1052.     assert solveset(Eq(sin(x)**2 + cos(x)**2, 1), x, domain=S.Reals) == \\\n1053.         ConditionSet(x, True, S.Reals)\n1054. \n1055.     assert solveset(Eq(x**2 + x*sin(x), 1), x, domain=S.Reals\n1056.         ) == ConditionSet(x, Eq(x**2 + x*sin(x) - 1, 0), S.Reals)\n1057. \n1058.     assert solveset(Eq(-I*(exp(I*x) - exp(-I*x))/2, 1), x\n1059.         ) == imageset(Lambda(n, 2*n*pi + pi/2), S.Integers)\n1060. \n1061.     assert solveset(x + sin(x) > 1, x, domain=S.Reals\n1062.         ) == ConditionSet(x, x + sin(x) > 1, S.Reals)\n1063. \n1064.     assert solveset(Eq(sin(Abs(x)), x), x, domain=S.Reals\n1065.         ) == ConditionSet(x, Eq(-x + sin(Abs(x)), 0), S.Reals)\n1066. \n1067.     assert solveset(y**x-z, x, S.Reals) == \\\n1068.         ConditionSet(x, Eq(y**x - z, 0), S.Reals)\n1069. \n1070. \n1071. @XFAIL\n1072. def test_conditionset_equality():\n1073.     \'\'\' Checking equality of different representations of ConditionSet\'\'\'\n1074.     assert solveset(Eq(tan(x), y), x) == ConditionSet(x, Eq(tan(x), y), S.Complexes)\n1075. \n1076. \n1077. def test_solveset_domain():\n1078.     x = Symbol(\'x\')\n1079. \n1080.     assert solveset(x**2 - x - 6, x, Interval(0, oo)) == FiniteSet(3)\n1081.     assert solveset(x**2 - 1, x, Interval(0, oo)) == FiniteSet(1)\n1082.     assert solveset(x**4 - 16, x, Interval(0, 10)) == FiniteSet(2)\n1083. \n1084. \n1085. def test_improve_coverage():\n1086.     from sympy.solvers.solveset import _has_rational_power\n1087.     x = Symbol(\'x\')\n1088.     solution = solveset(exp(x) + sin(x), x, S.Reals)\n1089.     unsolved_object = ConditionSet(x, Eq(exp(x) + sin(x), 0), S.Reals)\n1090.     assert solution == unsolved_object\n1091. \n1092.     assert _has_rational_power(sin(x)*exp(x) + 1, x) == (False, S.One)\n1093.     assert _has_rational_power((sin(x)**2)*(exp(x) + 1)**3, x) == (False, S.One)\n1094. \n1095. \n1096. def test_issue_9522():\n1097.     x = Symbol(\'x\')\n1098.     expr1 = Eq(1/(x**2 - 4) + x, 1/(x**2 - 4) + 2)\n1099.     expr2 = Eq(1/x + x, 1/x)\n1100. \n1101.     assert solveset(expr1, x, S.Reals) == EmptySet()\n1102.     assert solveset(expr2, x, S.Reals) == EmptySet()\n1103. \n1104. \n1105. def test_solvify():\n1106.     x = Symbol(\'x\')\n1107. \n1108.     assert solvify(x**2 + 10, x, S.Reals) == []\n1109.     assert solvify(x**3 + 1, x, S.Complexes) == [-1, S.Half - sqrt(3)*I/2,\n1110.                                                  S.Half + sqrt(3)*I/2]\n1111.     assert solvify(log(x), x, S.Reals) == [1]\n1112.     assert solvify(cos(x), x, S.Reals) == [pi/2, pi*Rational(3, 2)]\n1113.     assert solvify(sin(x) + 1, x, S.Reals) == [pi*Rational(3, 2)]\n1114.     raises(NotImplementedError, lambda: solvify(sin(exp(x)), x, S.Complexes))\n1115. \n1116. \n1117. def test_abs_invert_solvify():\n1118.     assert solvify(sin(Abs(x)), x, S.Reals) is None\n1119. \n1120. \n1121. def test_linear_eq_to_matrix():\n1122.     x, y, z = symbols(\'x, y, z\')\n1123.     a, b, c, d, e, f, g, h, i, j, k, l = symbols(\'a:l\')\n1124. \n1125.     eqns1 = [2*x + y - 2*z - 3, x - y - z, x + y + 3*z - 12]\n1126.     eqns2 = [Eq(3*x + 2*y - z, 1), Eq(2*x - 2*y + 4*z, -2), -2*x + y - 2*z]\n1127. \n1128.     A, B = linear_eq_to_matrix(eqns1, x, y, z)\n1129.     assert A == Matrix([[2, 1, -2], [1, -1, -1], [1, 1, 3]])\n1130.     assert B == Matrix([[3], [0], [12]])\n1131. \n1132.     A, B = linear_eq_to_matrix(eqns2, x, y, z)\n1133.     assert A == Matrix([[3, 2, -1], [2, -2, 4], [-2, 1, -2]])\n1134.     assert B == Matrix([[1], [-2], [0]])\n1135. \n1136.     # Pure symbolic coefficients\n1137.     eqns3 = [a*b*x + b*y + c*z - d, e*x + d*x + f*y + g*z - h, i*x + j*y + k*z - l]\n1138.     A, B = linear_eq_to_matrix(eqns3, x, y, z)\n1139.     assert A == Matrix([[a*b, b, c], [d + e, f, g], [i, j, k]])\n1140.     assert B == Matrix([[d], [h], [l]])\n1141. \n1142.     # raise ValueError if\n1143.     # 1) no symbols are given\n1144.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3))\n1145.     # 2) there are duplicates\n1146.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, x, y]))\n1147.     # 3) there are non-symbols\n1148.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, 1/a, y]))\n1149.     # 4) a nonlinear term is detected in the original expression\n1150.     raises(ValueError, lambda: linear_eq_to_matrix(Eq(1/x + x, 1/x)))\n1151. \n1152.     assert linear_eq_to_matrix(1, x) == (Matrix([[0]]), Matrix([[-1]]))\n1153.     # issue 15195\n1154.     assert linear_eq_to_matrix(x + y*(z*(3*x + 2) + 3), x) == (\n1155.         Matrix([[3*y*z + 1]]), Matrix([[-y*(2*z + 3)]]))\n1156.     assert linear_eq_to_matrix(Matrix(\n1157.         [[a*x + b*y - 7], [5*x + 6*y - c]]), x, y) == (\n1158.         Matrix([[a, b], [5, 6]]), Matrix([[7], [c]]))\n1159. \n1160.     # issue 15312\n1161.     assert linear_eq_to_matrix(Eq(x + 2, 1), x) == (\n1162.         Matrix([[1]]), Matrix([[-1]]))\n1163. \n1164. \n1165. def test_issue_16577():\n1166.     assert linear_eq_to_matrix(Eq(a*(2*x + 3*y) + 4*y, 5), x, y) == (\n1167.         Matrix([[2*a, 3*a + 4]]), Matrix([[5]]))\n1168. \n1169. \n1170. def test_linsolve():\n1171.     x, y, z, u, v, w = symbols("x, y, z, u, v, w")\n1172.     x1, x2, x3, x4 = symbols(\'x1, x2, x3, x4\')\n1173. \n1174.     # Test for different input forms\n1175. \n1176.     M = Matrix([[1, 2, 1, 1, 7], [1, 2, 2, -1, 12], [2, 4, 0, 6, 4]])\n1177.     system1 = A, b = M[:, :-1], M[:, -1]\n1178.     Eqns = [x1 + 2*x2 + x3 + x4 - 7, x1 + 2*x2 + 2*x3 - x4 - 12,\n1179.             2*x1 + 4*x2 + 6*x4 - 4]\n1180. \n1181.     sol = FiniteSet((-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))\n1182.     assert linsolve(Eqns, (x1, x2, x3, x4)) == sol\n1183.     assert linsolve(Eqns, *(x1, x2, x3, x4)) == sol\n1184.     assert linsolve(system1, (x1, x2, x3, x4)) == sol\n1185.     assert linsolve(system1, *(x1, x2, x3, x4)) == sol\n1186.     # issue 9667 - symbols can be Dummy symbols\n1187.     x1, x2, x3, x4 = symbols(\'x:4\', cls=Dummy)\n1188.     assert linsolve(system1, x1, x2, x3, x4) == FiniteSet(\n1189.         (-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))\n1190. \n1191.     # raise ValueError for garbage value\n1192.     raises(ValueError, lambda: linsolve(Eqns))\n1193.     raises(ValueError, lambda: linsolve(x1))\n1194.     raises(ValueError, lambda: linsolve(x1, x2))\n1195.     raises(ValueError, lambda: linsolve((A,), x1, x2))\n1196.     raises(ValueError, lambda: linsolve(A, b, x1, x2))\n1197. \n1198.     #raise ValueError if equations are non-linear in given variables\n1199.     raises(ValueError, lambda: linsolve([x + y - 1, x ** 2 + y - 3], [x, y]))\n1200.     raises(ValueError, lambda: linsolve([cos(x) + y, x + y], [x, y]))\n1201.     assert linsolve([x + z - 1, x ** 2 + y - 3], [z, y]) == {(-x + 1, -x**2 + 3)}\n1202. \n1203.     # Fully symbolic test\n1204.     a, b, c, d, e, f = symbols(\'a, b, c, d, e, f\')\n1205.     A = Matrix([[a, b], [c, d]])\n1206.     B = Matrix([[e], [f]])\n1207.     system2 = (A, B)\n1208.     sol = FiniteSet(((-b*f + d*e)/(a*d - b*c), (a*f - c*e)/(a*d - b*c)))\n1209.     assert linsolve(system2, [x, y]) == sol\n1210. \n1211.     # No solution\n1212.     A = Matrix([[1, 2, 3], [2, 4, 6], [3, 6, 9]])\n1213.     b = Matrix([0, 0, 1])\n1214.     assert linsolve((A, b), (x, y, z)) == EmptySet()\n1215. \n1216.     # Issue #10056\n1217.     A, B, J1, J2 = symbols(\'A B J1 J2\')\n1218.     Augmatrix = Matrix([\n1219.         [2*I*J1, 2*I*J2, -2/J1],\n1220.         [-2*I*J2, -2*I*J1, 2/J2],\n1221.         [0, 2, 2*I/(J1*J2)],\n1222.         [2, 0,  0],\n1223.         ])\n1224. \n1225.     assert linsolve(Augmatrix, A, B) == FiniteSet((0, I/(J1*J2)))\n1226. \n1227.     # Issue #10121 - Assignment of free variables\n1228.     a, b, c, d, e = symbols(\'a, b, c, d, e\')\n1229.     Augmatrix = Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0]])\n1230.     assert linsolve(Augmatrix, a, b, c, d, e) == FiniteSet((a, 0, c, 0, e))\n1231.     raises(IndexError, lambda: linsolve(Augmatrix, a, b, c))\n1232. \n1233.     x0, x1, x2, _x0 = symbols(\'tau0 tau1 tau2 _tau0\')\n1234.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1235.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1236.     x0, x1, x2, _x0 = symbols(\'_tau0 _tau1 _tau2 tau0\')\n1237.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1238.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1239.     x0, x1, x2, _x0 = symbols(\'_tau0 _tau1 _tau2 tau1\')\n1240.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1241.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1242.     # symbols can be given as generators\n1243.     x0, x2, x4 = symbols(\'x0, x2, x4\')\n1244.     assert linsolve(Augmatrix, numbered_symbols(\'x\')\n1245.         ) == FiniteSet((x0, 0, x2, 0, x4))\n1246.     Augmatrix[-1, -1] = x0\n1247.     # use Dummy to avoid clash; the names may clash but the symbols\n1248.     # will not\n1249.     Augmatrix[-1, -1] = symbols(\'_x0\')\n1250.     assert len(linsolve(\n1251.         Augmatrix, numbered_symbols(\'x\', cls=Dummy)).free_symbols) == 4\n1252. \n1253.     # Issue #12604\n1254.     f = Function(\'f\')\n1255.     assert linsolve([f(x) - 5], f(x)) == FiniteSet((5,))\n1256. \n1257.     # Issue #14860\n1258.     from sympy.physics.units import meter, newton, kilo\n1259.     Eqns = [8*kilo*newton + x + y, 28*kilo*newton*meter + 3*x*meter]\n1260.     assert linsolve(Eqns, x, y) == {(newton*Rational(-28000, 3), newton*Rational(4000, 3))}\n1261. \n1262.     # linsolve fully expands expressions, so removable singularities\n1263.     # and other nonlinearity does not raise an error\n1264.     assert linsolve([Eq(x, x + y)], [x, y]) == {(x, 0)}\n1265.     assert linsolve([Eq(1/x, 1/x + y)], [x, y]) == {(x, 0)}\n1266.     assert linsolve([Eq(y/x, y/x + y)], [x, y]) == {(x, 0)}\n1267.     assert linsolve([Eq(x*(x + 1), x**2 + y)], [x, y]) == {(y, y)}\n1268. \n1269. \n1270. def test_linsolve_immutable():\n1271.     A = ImmutableDenseMatrix([[1, 1, 2], [0, 1, 2], [0, 0, 1]])\n1272.     B = ImmutableDenseMatrix([2, 1, -1])\n1273.     c = symbols(\'c1 c2 c3\')\n1274.     assert linsolve([A, B], c) == FiniteSet((1, 3, -1))\n1275. \n1276.     A = ImmutableDenseMatrix([[1, 1, 7], [1, -1, 3]])\n1277.     assert linsolve(A) == FiniteSet((5, 2))\n1278. \n1279. \n1280. def test_solve_decomposition():\n1281.     x = Symbol(\'x\')\n1282.     n = Dummy(\'n\')\n1283. \n1284.     f1 = exp(3*x) - 6*exp(2*x) + 11*exp(x) - 6\n1285.     f2 = sin(x)**2 - 2*sin(x) + 1\n1286.     f3 = sin(x)**2 - sin(x)\n1287.     f4 = sin(x + 1)\n1288.     f5 = exp(x + 2) - 1\n1289.     f6 = 1/log(x)\n1290.     f7 = 1/x\n1291. \n1292.     s1 = ImageSet(Lambda(n, 2*n*pi), S.Integers)\n1293.     s2 = ImageSet(Lambda(n, 2*n*pi + pi), S.Integers)\n1294.     s3 = ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers)\n1295.     s4 = ImageSet(Lambda(n, 2*n*pi - 1), S.Integers)\n1296.     s5 = ImageSet(Lambda(n, 2*n*pi - 1 + pi), S.Integers)\n1297. \n1298.     assert solve_decomposition(f1, x, S.Reals) == FiniteSet(0, log(2), log(3))\n1299.     assert solve_decomposition(f2, x, S.Reals) == s3\n1300.     assert solve_decomposition(f3, x, S.Reals) == Union(s1, s2, s3)\n1301.     assert solve_decomposition(f4, x, S.Reals) == Union(s4, s5)\n1302.     assert solve_decomposition(f5, x, S.Reals) == FiniteSet(-2)\n1303.     assert solve_decomposition(f6, x, S.Reals) == S.EmptySet\n1304.     assert solve_decomposition(f7, x, S.Reals) == S.EmptySet\n1305.     assert solve_decomposition(x, x, Interval(1, 2)) == S.EmptySet\n1306. \n1307. # nonlinsolve testcases\n1308. def test_nonlinsolve_basic():\n1309.     assert nonlinsolve([],[]) == S.EmptySet\n1310.     assert nonlinsolve([],[x, y]) == S.EmptySet\n1311. \n1312.     system = [x, y - x - 5]\n1313.     assert nonlinsolve([x],[x, y]) == FiniteSet((0, y))\n1314.     assert nonlinsolve(system, [y]) == FiniteSet((x + 5,))\n1315.     soln = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)\n1316.     assert nonlinsolve([sin(x) - 1], [x]) == FiniteSet(tuple(soln))\n1317.     assert nonlinsolve([x**2 - 1], [x]) == FiniteSet((-1,), (1,))\n1318. \n1319.     soln = FiniteSet((y, y))\n1320.     assert nonlinsolve([x - y, 0], x, y) == soln\n1321.     assert nonlinsolve([0, x - y], x, y) == soln\n1322.     assert nonlinsolve([x - y, x - y], x, y) == soln\n1323.     assert nonlinsolve([x, 0], x, y) == FiniteSet((0, y))\n1324.     f = Function(\'f\')\n1325.     assert nonlinsolve([f(x), 0], f(x), y) == FiniteSet((0, y))\n1326.     assert nonlinsolve([f(x), 0], f(x), f(y)) == FiniteSet((0, f(y)))\n1327.     A = Indexed(\'A\', x)\n1328.     assert nonlinsolve([A, 0], A, y) == FiniteSet((0, y))\n1329.     assert nonlinsolve([x**2 -1], [sin(x)]) == FiniteSet((S.EmptySet,))\n1330.     assert nonlinsolve([x**2 -1], sin(x)) == FiniteSet((S.EmptySet,))\n1331.     assert nonlinsolve([x**2 -1], 1) == FiniteSet((x**2,))\n1332.     assert nonlinsolve([x**2 -1], x + y) == FiniteSet((S.EmptySet,))\n1333. \n1334. \n1335. def test_nonlinsolve_abs():\n1336.     soln = FiniteSet((x, Abs(x)))\n1337.     assert nonlinsolve([Abs(x) - y], x, y) == soln\n1338. \n1339. \n1340. def test_raise_exception_nonlinsolve():\n1341.     raises(IndexError, lambda: nonlinsolve([x**2 -1], []))\n1342.     raises(ValueError, lambda: nonlinsolve([x**2 -1]))\n1343.     raises(NotImplementedError, lambda: nonlinsolve([(x+y)**2 - 9, x**2 - y**2 - 0.75], (x, y)))\n1344. \n1345. \n1346. def test_trig_system():\n1347.     # TODO: add more simple testcases when solveset returns\n1348.     # simplified soln for Trig eq\n1349.     assert nonlinsolve([sin(x) - 1, cos(x) -1 ], x) == S.EmptySet\n1350.     soln1 = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)\n1351.     soln = FiniteSet(soln1)\n1352.     assert nonlinsolve([sin(x) - 1, cos(x)], x) == soln\n1353. \n1354. \n1355. @XFAIL\n1356. def test_trig_system_fail():\n1357.     # fails because solveset trig solver is not much smart.\n1358.     sys = [x + y - pi/2, sin(x) + sin(y) - 1]\n1359.     # solveset returns conditionset for sin(x) + sin(y) - 1\n1360.     soln_1 = (ImageSet(Lambda(n, n*pi + pi/2), S.Integers),\n1361.         ImageSet(Lambda(n, n*pi)), S.Integers)\n1362.     soln_1 = FiniteSet(soln_1)\n1363.     soln_2 = (ImageSet(Lambda(n, n*pi), S.Integers),\n1364.         ImageSet(Lambda(n, n*pi+ pi/2), S.Integers))\n1365.     soln_2 = FiniteSet(soln_2)\n1366.     soln = soln_1 + soln_2\n1367.     assert nonlinsolve(sys, [x, y]) == soln\n1368. \n1369.     # Add more cases from here\n1370.     # http://www.vitutor.com/geometry/trigonometry/equations_systems.html#uno\n1371.     sys = [sin(x) + sin(y) - (sqrt(3)+1)/2, sin(x) - sin(y) - (sqrt(3) - 1)/2]\n1372.     soln_x = Union(ImageSet(Lambda(n, 2*n*pi + pi/3), S.Integers),\n1373.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(2, 3)), S.Integers))\n1374.     soln_y = Union(ImageSet(Lambda(n, 2*n*pi + pi/6), S.Integers),\n1375.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(5, 6)), S.Integers))\n1376.     assert nonlinsolve(sys, [x, y]) ==FiniteSet((soln_x, soln_y))\n1377. \n1378. \n1379. def test_nonlinsolve_positive_dimensional():\n1380.     x, y, z, a, b, c, d = symbols(\'x, y, z, a, b, c, d\', extended_real = True)\n1381.     assert nonlinsolve([x*y, x*y - x], [x, y]) == FiniteSet((0, y))\n1382. \n1383.     system = [a**2 + a*c, a - b]\n1384.     assert nonlinsolve(system, [a, b]) == FiniteSet((0, 0), (-c, -c))\n1385.     # here (a= 0, b = 0) is independent soln so both is printed.\n1386.     # if symbols = [a, b, c] then only {a : -c ,b : -c}\n1387. \n1388.     eq1 =  a + b + c + d\n1389.     eq2 = a*b + b*c + c*d + d*a\n1390.     eq3 = a*b*c + b*c*d + c*d*a + d*a*b\n1391.     eq4 = a*b*c*d - 1\n1392.     system = [eq1, eq2, eq3, eq4]\n1393.     sol1 = (-1/d, -d, 1/d, FiniteSet(d) - FiniteSet(0))\n1394.     sol2 = (1/d, -d, -1/d, FiniteSet(d) - FiniteSet(0))\n1395.     soln = FiniteSet(sol1, sol2)\n1396.     assert nonlinsolve(system, [a, b, c, d]) == soln\n1397. \n1398. \n1399. def test_nonlinsolve_polysys():\n1400.     x, y, z = symbols(\'x, y, z\', real = True)\n1401.     assert nonlinsolve([x**2 + y - 2, x**2 + y], [x, y]) == S.EmptySet\n1402. \n1403.     s = (-y + 2, y)\n1404.     assert nonlinsolve([(x + y)**2 - 4, x + y - 2], [x, y]) == FiniteSet(s)\n1405. \n1406.     system = [x**2 - y**2]\n1407.     soln_real = FiniteSet((-y, y), (y, y))\n1408.     soln_complex = FiniteSet((-Abs(y), y), (Abs(y), y))\n1409.     soln =soln_real + soln_complex\n1410.     assert nonlinsolve(system, [x, y]) == soln\n1411. \n1412.     system = [x**2 - y**2]\n1413.     soln_real= FiniteSet((y, -y), (y, y))\n1414.     soln_complex = FiniteSet((y, -Abs(y)), (y, Abs(y)))\n1415.     soln = soln_real + soln_complex\n1416.     assert nonlinsolve(system, [y, x]) == soln\n1417. \n1418.     system = [x**2 + y - 3, x - y - 4]\n1419.     assert nonlinsolve(system, (x, y)) != nonlinsolve(system, (y, x))\n1420. \n1421. \n1422. def test_nonlinsolve_using_substitution():\n1423.     x, y, z, n = symbols(\'x, y, z, n\', real = True)\n1424.     system = [(x + y)*n - y**2 + 2]\n1425.     s_x = (n*y - y**2 + 2)/n\n1426.     soln = (-s_x, y)\n1427.     assert nonlinsolve(system, [x, y]) == FiniteSet(soln)\n1428. \n1429.     system = [z**2*x**2 - z**2*y**2/exp(x)]\n1430.     soln_real_1 = (y, x, 0)\n1431.     soln_real_2 = (-exp(x/2)*Abs(x), x, z)\n1432.     soln_real_3 = (exp(x/2)*Abs(x), x, z)\n1433.     soln_complex_1 = (-x*exp(x/2), x, z)\n1434.     soln_complex_2 = (x*exp(x/2), x, z)\n1435.     syms = [y, x, z]\n1436.     soln = FiniteSet(soln_real_1, soln_complex_1, soln_complex_2,\\\n1437.         soln_real_2, soln_real_3)\n1438.     assert nonlinsolve(system,syms) == soln\n1439. \n1440. \n1441. def test_nonlinsolve_complex():\n1442.     x, y, z = symbols(\'x, y, z\')\n1443.     n = Dummy(\'n\')\n1444.     assert nonlinsolve([exp(x) - sin(y), 1/y - 3], [x, y]) == {\n1445.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(Rational(1, 3)))), S.Integers), Rational(1, 3))}\n1446. \n1447.     system = [exp(x) - sin(y), 1/exp(y) - 3]\n1448.     assert nonlinsolve(system, [x, y]) == {\n1449.         (ImageSet(Lambda(n, I*(2*n*pi + pi)\n1450.                          + log(sin(log(3)))), S.Integers), -log(3)),\n1451.         (ImageSet(Lambda(n, I*(2*n*pi + arg(sin(2*n*I*pi - log(3))))\n1452.                          + log(Abs(sin(2*n*I*pi - log(3))))), S.Integers),\n1453.         ImageSet(Lambda(n, 2*n*I*pi - log(3)), S.Integers))}\n1454. \n1455.     system = [exp(x) - sin(y), y**2 - 4]\n1456.     assert nonlinsolve(system, [x, y]) == {\n1457.         (ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sin(2))), S.Integers), -2),\n1458.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(2))), S.Integers), 2)}\n1459. \n1460. \n1461. @XFAIL\n1462. def test_solve_nonlinear_trans():\n1463.     # After the transcendental equation solver these will work\n1464.     x, y, z = symbols(\'x, y, z\', real=True)\n1465.     soln1 = FiniteSet((2*LambertW(y/2), y))\n1466.     soln2 = FiniteSet((-x*sqrt(exp(x)), y), (x*sqrt(exp(x)), y))\n1467.     soln3 = FiniteSet((x*exp(x/2), x))\n1468.     soln4 = FiniteSet(2*LambertW(y/2), y)\n1469.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln1\n1470.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln2\n1471.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln3\n1472.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln4\n1473. \n1474. \n1475. def test_issue_5132_1():\n1476.     system = [sqrt(x**2 + y**2) - sqrt(10), x + y - 4]\n1477.     assert nonlinsolve(system, [x, y]) == FiniteSet((1, 3), (3, 1))\n1478. \n1479.     n = Dummy(\'n\')\n1480.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1481.     s_real_y = -log(3)\n1482.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))\n1483.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))\n1484.     lam = Lambda(n, 2*n*I*pi + -log(3))\n1485.     s_complex_y = ImageSet(lam, S.Integers)\n1486.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1487.     s_complex_z_1 = ImageSet(lam, S.Integers)\n1488.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1489.     s_complex_z_2 = ImageSet(lam, S.Integers)\n1490.     soln_complex = FiniteSet(\n1491.                                             (s_complex_y, s_complex_z_1),\n1492.                                             (s_complex_y, s_complex_z_2)\n1493.                                         )\n1494.     soln = soln_real + soln_complex\n1495.     assert nonlinsolve(eqs, [y, z]) == soln\n1496. \n1497. \n1498. def test_issue_5132_2():\n1499.     x, y = symbols(\'x, y\', real=True)\n1500.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1501.     n = Dummy(\'n\')\n1502.     soln_real = (log(-z**2 + sin(y))/2, z)\n1503.     lam = Lambda( n, I*(2*n*pi + arg(-z**2 + sin(y)))/2 + log(Abs(z**2 - sin(y)))/2)\n1504.     img = ImageSet(lam, S.Integers)\n1505.     # not sure about the complex soln. But it looks correct.\n1506.     soln_complex = (img, z)\n1507.     soln = FiniteSet(soln_real, soln_complex)\n1508.     assert nonlinsolve(eqs, [x, z]) == soln\n1509. \n1510.     r, t = symbols(\'r, t\')\n1511.     system = [r - x**2 - y**2, tan(t) - y/x]\n1512.     s_x = sqrt(r/(tan(t)**2 + 1))\n1513.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)\n1514.     soln = FiniteSet((s_x, s_y), (-s_x, -s_y))\n1515.     assert nonlinsolve(system, [x, y]) == soln\n1516. \n1517. \n1518. def test_issue_6752():\n1519.     a,b,c,d = symbols(\'a, b, c, d\', real=True)\n1520.     assert nonlinsolve([a**2 + a, a - b], [a, b]) == {(-1, -1), (0, 0)}\n1521. \n1522. \n1523. @SKIP("slow")\n1524. def test_issue_5114_solveset():\n1525.     # slow testcase\n1526.     a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r = symbols(\'a:r\')\n1527. \n1528.     # there is no \'a\' in the equation set but this is how the\n1529.     # problem was originally posed\n1530.     syms = [a, b, c, f, h, k, n]\n1531.     eqs = [b + r/d - c/d,\n1532.     c*(1/d + 1/e + 1/g) - f/g - r/d,\n1533.         f*(1/g + 1/i + 1/j) - c/g - h/i,\n1534.         h*(1/i + 1/l + 1/m) - f/i - k/m,\n1535.         k*(1/m + 1/o + 1/p) - h/m - n/p,\n1536.         n*(1/p + 1/q) - k/p]\n1537.     assert len(nonlinsolve(eqs, syms)) == 1\n1538. \n1539. \n1540. @SKIP("Hangs")\n1541. def _test_issue_5335():\n1542.     # Not able to check zero dimensional system.\n1543.     # is_zero_dimensional Hangs\n1544.     lam, a0, conc = symbols(\'lam a0 conc\')\n1545.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,\n1546.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,\n1547.            x + y - conc]\n1548.     sym = [x, y, a0]\n1549.     # there are 4 solutions but only two are valid\n1550.     assert len(nonlinsolve(eqs, sym)) == 2\n1551.     # float\n1552.     lam, a0, conc = symbols(\'lam a0 conc\')\n1553.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,\n1554.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,\n1555.            x + y - conc]\n1556.     sym = [x, y, a0]\n1557.     assert len(nonlinsolve(eqs, sym)) == 2\n1558. \n1559. \n1560. def test_issue_2777():\n1561.     # the equations represent two circles\n1562.     x, y = symbols(\'x y\', real=True)\n1563.     e1, e2 = sqrt(x**2 + y**2) - 10, sqrt(y**2 + (-x + 10)**2) - 3\n1564.     a, b = Rational(191, 20), 3*sqrt(391)/20\n1565.     ans = {(a, -b), (a, b)}\n1566.     assert nonlinsolve((e1, e2), (x, y)) == ans\n1567.     assert nonlinsolve((e1, e2/(x - a)), (x, y)) == S.EmptySet\n1568.     # make the 2nd circle\'s radius be -3\n1569.     e2 += 6\n1570.     assert nonlinsolve((e1, e2), (x, y)) == S.EmptySet\n1571. \n1572. \n1573. def test_issue_8828():\n1574.     x1 = 0\n1575.     y1 = -620\n1576.     r1 = 920\n1577.     x2 = 126\n1578.     y2 = 276\n1579.     x3 = 51\n1580.     y3 = 205\n1581.     r3 = 104\n1582.     v = [x, y, z]\n1583. \n1584.     f1 = (x - x1)**2 + (y - y1)**2 - (r1 - z)**2\n1585.     f2 = (x2 - x)**2 + (y2 - y)**2 - z**2\n1586.     f3 = (x - x3)**2 + (y - y3)**2 - (r3 - z)**2\n1587.     F = [f1, f2, f3]\n1588. \n1589.     g1 = sqrt((x - x1)**2 + (y - y1)**2) + z - r1\n1590.     g2 = f2\n1591.     g3 = sqrt((x - x3)**2 + (y - y3)**2) + z - r3\n1592.     G = [g1, g2, g3]\n1593. \n1594.     # both soln same\n1595.     A = nonlinsolve(F, v)\n1596.     B = nonlinsolve(G, v)\n1597.     assert A == B\n1598. \n1599. \n1600. def test_nonlinsolve_conditionset():\n1601.     # when solveset failed to solve all the eq\n1602.     # return conditionset\n1603.     f = Function(\'f\')\n1604.     f1 = f(x) - pi/2\n1605.     f2 = f(y) - pi*Rational(3, 2)\n1606.     intermediate_system = Eq(2*f(x) - pi, 0) & Eq(2*f(y) - 3*pi, 0)\n1607.     symbols = Tuple(x, y)\n1608.     soln = ConditionSet(\n1609.         symbols,\n1610.         intermediate_system,\n1611.         S.Complexes**2)\n1612.     assert nonlinsolve([f1, f2], [x, y]) == soln\n1613. \n1614. \n1615. def test_substitution_basic():\n1616.     assert substitution([], [x, y]) == S.EmptySet\n1617.     assert substitution([], []) == S.EmptySet\n1618.     system = [2*x**2 + 3*y**2 - 30, 3*x**2 - 2*y**2 - 19]\n1619.     soln = FiniteSet((-3, -2), (-3, 2), (3, -2), (3, 2))\n1620.     assert substitution(system, [x, y]) == soln\n1621. \n1622.     soln = FiniteSet((-1, 1))\n1623.     assert substitution([x + y], [x], [{y: 1}], [y], set([]), [x, y]) == soln\n1624.     assert substitution(\n1625.         [x + y], [x], [{y: 1}], [y],\n1626.         set([x + 1]), [y, x]) == S.EmptySet\n1627. \n1628. \n1629. def test_issue_5132_substitution():\n1630.     x, y, z, r, t = symbols(\'x, y, z, r, t\', real=True)\n1631.     system = [r - x**2 - y**2, tan(t) - y/x]\n1632.     s_x_1 = Complement(FiniteSet(-sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))\n1633.     s_x_2 = Complement(FiniteSet(sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))\n1634.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)\n1635.     soln = FiniteSet((s_x_2, s_y)) + FiniteSet((s_x_1, -s_y))\n1636.     assert substitution(system, [x, y]) == soln\n1637. \n1638.     n = Dummy(\'n\')\n1639.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1640.     s_real_y = -log(3)\n1641.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))\n1642.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))\n1643.     lam = Lambda(n, 2*n*I*pi + -log(3))\n1644.     s_complex_y = ImageSet(lam, S.Integers)\n1645.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1646.     s_complex_z_1 = ImageSet(lam, S.Integers)\n1647.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1648.     s_complex_z_2 = ImageSet(lam, S.Integers)\n1649.     soln_complex = FiniteSet(\n1650.         (s_complex_y, s_complex_z_1),\n1651.         (s_complex_y, s_complex_z_2))\n1652.     soln = soln_real + soln_complex\n1653.     assert substitution(eqs, [y, z]) == soln\n1654. \n1655. \n1656. def test_raises_substitution():\n1657.     raises(ValueError, lambda: substitution([x**2 -1], []))\n1658.     raises(TypeError, lambda: substitution([x**2 -1]))\n1659.     raises(ValueError, lambda: substitution([x**2 -1], [sin(x)]))\n1660.     raises(TypeError, lambda: substitution([x**2 -1], x))\n1661.     raises(TypeError, lambda: substitution([x**2 -1], 1))\n1662. \n1663. # end of tests for nonlinsolve\n1664. \n1665. \n1666. def test_issue_9556():\n1667.     x = Symbol(\'x\')\n1668.     b = Symbol(\'b\', positive=True)\n1669. \n1670.     assert solveset(Abs(x) + 1, x, S.Reals) == EmptySet()\n1671.     assert solveset(Abs(x) + b, x, S.Reals) == EmptySet()\n1672.     assert solveset(Eq(b, -1), b, S.Reals) == EmptySet()\n1673. \n1674. \n1675. def test_issue_9611():\n1676.     x = Symbol(\'x\')\n1677.     a = Symbol(\'a\')\n1678.     y = Symbol(\'y\')\n1679. \n1680.     assert solveset(Eq(x - x + a, a), x, S.Reals) == S.Reals\n1681.     assert solveset(Eq(y - y + a, a), y) == S.Complexes\n1682. \n1683. \n1684. def test_issue_9557():\n1685.     x = Symbol(\'x\')\n1686.     a = Symbol(\'a\')\n1687. \n1688.     assert solveset(x**2 + a, x, S.Reals) == Intersection(S.Reals,\n1689.         FiniteSet(-sqrt(-a), sqrt(-a)))\n1690. \n1691. \n1692. def test_issue_9778():\n1693.     assert solveset(x**3 + 1, x, S.Reals) == FiniteSet(-1)\n1694.     assert solveset(x**Rational(3, 5) + 1, x, S.Reals) == S.EmptySet\n1695.     assert solveset(x**3 + y, x, S.Reals) == \\\n1696.         FiniteSet(-Abs(y)**Rational(1, 3)*sign(y))\n1697. \n1698. \n1699. def test_issue_10214():\n1700.     assert solveset(x**Rational(3, 2) + 4, x, S.Reals) == S.EmptySet\n1701.     assert solveset(x**(Rational(-3, 2)) + 4, x, S.Reals) == S.EmptySet\n1702. \n1703.     ans = FiniteSet(-2**Rational(2, 3))\n1704.     assert solveset(x**(S(3)) + 4, x, S.Reals) == ans\n1705.     assert (x**(S(3)) + 4).subs(x,list(ans)[0]) == 0 # substituting ans and verifying the result.\n1706.     assert (x**(S(3)) + 4).subs(x,-(-2)**Rational(2, 3)) == 0\n1707. \n1708. \n1709. def test_issue_9849():\n1710.     assert solveset(Abs(sin(x)) + 1, x, S.Reals) == S.EmptySet\n1711. \n1712. \n1713. def test_issue_9953():\n1714.     assert linsolve([ ], x) == S.EmptySet\n1715. \n1716. \n1717. def test_issue_9913():\n1718.     assert solveset(2*x + 1/(x - 10)**2, x, S.Reals) == \\\n1719.         FiniteSet(-(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)/3 - 100/\n1720.                 (3*(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)) + Rational(20, 3))\n1721. \n1722. \n1723. def test_issue_10397():\n1724.     assert solveset(sqrt(x), x, S.Complexes) == FiniteSet(0)\n1725. \n1726. \n1727. def test_issue_14987():\n1728.     raises(ValueError, lambda: linear_eq_to_matrix(\n1729.         [x**2], x))\n1730.     raises(ValueError, lambda: linear_eq_to_matrix(\n1731.         [x*(-3/x + 1) + 2*y - a], [x, y]))\n1732.     raises(ValueError, lambda: linear_eq_to_matrix(\n1733.         [(x**2 - 3*x)/(x - 3) - 3], x))\n1734.     raises(ValueError, lambda: linear_eq_to_matrix(\n1735.         [(x + 1)**3 - x**3 - 3*x**2 + 7], x))\n1736.     raises(ValueError, lambda: linear_eq_to_matrix(\n1737.         [x*(1/x + 1) + y], [x, y]))\n1738.     raises(ValueError, lambda: linear_eq_to_matrix(\n1739.         [(x + 1)*y], [x, y]))\n1740.     raises(ValueError, lambda: linear_eq_to_matrix(\n1741.         [Eq(1/x, 1/x + y)], [x, y]))\n1742.     raises(ValueError, lambda: linear_eq_to_matrix(\n1743.         [Eq(y/x, y/x + y)], [x, y]))\n1744.     raises(ValueError, lambda: linear_eq_to_matrix(\n1745.         [Eq(x*(x + 1), x**2 + y)], [x, y]))\n1746. \n1747. \n1748. def test_simplification():\n1749.     eq = x + (a - b)/(-2*a + 2*b)\n1750.     assert solveset(eq, x) == FiniteSet(S.Half)\n1751.     assert solveset(eq, x, S.Reals) == Intersection({-((a - b)/(-2*a + 2*b))}, S.Reals)\n1752.     # So that ap - bn is not zero:\n1753.     ap = Symbol(\'ap\', positive=True)\n1754.     bn = Symbol(\'bn\', negative=True)\n1755.     eq = x + (ap - bn)/(-2*ap + 2*bn)\n1756.     assert solveset(eq, x) == FiniteSet(S.Half)\n1757.     assert solveset(eq, x, S.Reals) == FiniteSet(S.Half)\n1758. \n1759. \n1760. def test_issue_10555():\n1761.     f = Function(\'f\')\n1762.     g = Function(\'g\')\n1763.     assert solveset(f(x) - pi/2, x, S.Reals) == \\\n1764.         ConditionSet(x, Eq(f(x) - pi/2, 0), S.Reals)\n1765.     assert solveset(f(g(x)) - pi/2, g(x), S.Reals) == \\\n1766.         ConditionSet(g(x), Eq(f(g(x)) - pi/2, 0), S.Reals)\n1767. \n1768. \n1769. def test_issue_8715():\n1770.     eq = x + 1/x > -2 + 1/x\n1771.     assert solveset(eq, x, S.Reals) == \\\n1772.         (Interval.open(-2, oo) - FiniteSet(0))\n1773.     assert solveset(eq.subs(x,log(x)), x, S.Reals) == \\\n1774.         Interval.open(exp(-2), oo) - FiniteSet(1)\n1775. \n1776. \n1777. def test_issue_11174():\n1778.     r, t = symbols(\'r t\')\n1779.     eq = z**2 + exp(2*x) - sin(y)\n1780.     soln = Intersection(S.Reals, FiniteSet(log(-z**2 + sin(y))/2))\n1781.     assert solveset(eq, x, S.Reals) == soln\n1782. \n1783.     eq = sqrt(r)*Abs(tan(t))/sqrt(tan(t)**2 + 1) + x*tan(t)\n1784.     s = -sqrt(r)*Abs(tan(t))/(sqrt(tan(t)**2 + 1)*tan(t))\n1785.     soln = Intersection(S.Reals, FiniteSet(s))\n1786.     assert solveset(eq, x, S.Reals) == soln\n1787. \n1788. \n1789. def test_issue_11534():\n1790.     # eq and eq2 should give the same solution as a Complement\n1791.     eq = -y + x/sqrt(-x**2 + 1)\n1792.     eq2 = -y**2 + x**2/(-x**2 + 1)\n1793.     soln = Complement(FiniteSet(-y/sqrt(y**2 + 1), y/sqrt(y**2 + 1)), FiniteSet(-1, 1))\n1794.     assert solveset(eq, x, S.Reals) == soln\n1795.     assert solveset(eq2, x, S.Reals) == soln\n1796. \n1797. \n1798. def test_issue_10477():\n1799.     assert solveset((x**2 + 4*x - 3)/x < 2, x, S.Reals) == \\\n1800.         Union(Interval.open(-oo, -3), Interval.open(0, 1))\n1801. \n1802. \n1803. def test_issue_10671():\n1804.     assert solveset(sin(y), y, Interval(0, pi)) == FiniteSet(0, pi)\n1805.     i = Interval(1, 10)\n1806.     assert solveset((1/x).diff(x) < 0, x, i) == i\n1807. \n1808. \n1809. def test_issue_11064():\n1810.     eq = x + sqrt(x**2 - 5)\n1811.     assert solveset(eq > 0, x, S.Reals) == \\\n1812.         Interval(sqrt(5), oo)\n1813.     assert solveset(eq < 0, x, S.Reals) == \\\n1814.         Interval(-oo, -sqrt(5))\n1815.     assert solveset(eq > sqrt(5), x, S.Reals) == \\\n1816.         Interval.Lopen(sqrt(5), oo)\n1817. \n1818. \n1819. def test_issue_12478():\n1820.     eq = sqrt(x - 2) + 2\n1821.     soln = solveset_real(eq, x)\n1822.     assert soln is S.EmptySet\n1823.     assert solveset(eq < 0, x, S.Reals) is S.EmptySet\n1824.     assert solveset(eq > 0, x, S.Reals) == Interval(2, oo)\n1825. \n1826. \n1827. def test_issue_12429():\n1828.     eq = solveset(log(x)/x <= 0, x, S.Reals)\n1829.     sol = Interval.Lopen(0, 1)\n1830.     assert eq == sol\n1831. \n1832. \n1833. def test_solveset_arg():\n1834.     assert solveset(arg(x), x, S.Reals)  == Interval.open(0, oo)\n1835.     assert solveset(arg(4*x -3), x) == Interval.open(Rational(3, 4), oo)\n1836. \n1837. \n1838. def test__is_finite_with_finite_vars():\n1839.     f = _is_finite_with_finite_vars\n1840.     # issue 12482\n1841.     assert all(f(1/x) is None for x in (\n1842.         Dummy(), Dummy(real=True), Dummy(complex=True)))\n1843.     assert f(1/Dummy(real=False)) is True  # b/c it\'s finite but not 0\n1844. \n1845. \n1846. def test_issue_13550():\n1847.     assert solveset(x**2 - 2*x - 15, symbol = x, domain = Interval(-oo, 0)) == FiniteSet(-3)\n1848. \n1849. \n1850. def test_issue_13849():\n1851.     t = symbols(\'t\')\n1852.     assert nonlinsolve((t*(sqrt(5) + sqrt(2)) - sqrt(2), t), t) == EmptySet()\n1853. \n1854. \n1855. def test_issue_14223():\n1856.     x = Symbol(\'x\')\n1857.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,\n1858.         S.Reals) == FiniteSet(-1, 1)\n1859.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,\n1860.         Interval(0, 2)) == FiniteSet(1)\n1861. \n1862. \n1863. def test_issue_10158():\n1864.     x = Symbol(\'x\')\n1865.     dom = S.Reals\n1866.     assert solveset(x*Max(x, 15) - 10, x, dom) == FiniteSet(Rational(2, 3))\n1867.     assert solveset(x*Min(x, 15) - 10, x, dom) == FiniteSet(-sqrt(10), sqrt(10))\n1868.     assert solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom) == FiniteSet(-1, 1)\n1869.     assert solveset(Abs(x - 1) - Abs(y), x, dom) == FiniteSet(-Abs(y) + 1, Abs(y) + 1)\n1870.     assert solveset(Abs(x + 4*Abs(x + 1)), x, dom) == FiniteSet(Rational(-4, 3), Rational(-4, 5))\n1871.     assert solveset(2*Abs(x + Abs(x + Max(3, x))) - 2, x, S.Reals) == FiniteSet(-1, -2)\n1872.     dom = S.Complexes\n1873.     raises(ValueError, lambda: solveset(x*Max(x, 15) - 10, x, dom))\n1874.     raises(ValueError, lambda: solveset(x*Min(x, 15) - 10, x, dom))\n1875.     raises(ValueError, lambda: solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom))\n1876.     raises(ValueError, lambda: solveset(Abs(x - 1) - Abs(y), x, dom))\n1877.     raises(ValueError, lambda: solveset(Abs(x + 4*Abs(x + 1)), x, dom))\n1878. \n1879. \n1880. def test_issue_14300():\n1881.     x, y, n = symbols(\'x y n\')\n1882. \n1883.     f = 1 - exp(-18000000*x) - y\n1884.     a1 = FiniteSet(-log(-y + 1)/18000000)\n1885. \n1886.     assert solveset(f, x, S.Reals) == \\\n1887.         Intersection(S.Reals, a1)\n1888.     assert solveset(f, x) == \\\n1889.         ImageSet(Lambda(n, -I*(2*n*pi + arg(-y + 1))/18000000 -\n1890.             log(Abs(y - 1))/18000000), S.Integers)\n1891. \n1892. \n1893. def test_issue_14454():\n1894.     x = Symbol(\'x\')\n1895.     number = CRootOf(x**4 + x - 1, 2)\n1896.     raises(ValueError, lambda: invert_real(number, 0, x, S.Reals))\n1897.     assert invert_real(x**2, number, x, S.Reals)  # no error\n1898. \n1899. \n1900. def test_term_factors():\n1901.     assert list(_term_factors(3**x - 2)) == [-2, 3**x]\n1902.     expr = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1903.     assert set(_term_factors(expr)) == set([\n1904.         3**(x + 2), 4**(x + 2), 3**(x + 3), 4**(x - 1), -1, 4**(x + 1)])\n1905. \n1906. \n1907. #################### tests for transolve and its helpers ###############\n1908. \n1909. def test_transolve():\n1910. \n1911.     assert _transolve(3**x, x, S.Reals) == S.EmptySet\n1912.     assert _transolve(3**x - 9**(x + 5), x, S.Reals) == FiniteSet(-10)\n1913. \n1914. \n1915. # exponential tests\n1916. def test_exponential_real():\n1917.     from sympy.abc import x, y, z\n1918. \n1919.     e1 = 3**(2*x) - 2**(x + 3)\n1920.     e2 = 4**(5 - 9*x) - 8**(2 - x)\n1921.     e3 = 2**x + 4**x\n1922.     e4 = exp(log(5)*x) - 2**x\n1923.     e5 = exp(x/y)*exp(-z/y) - 2\n1924.     e6 = 5**(x/2) - 2**(x/3)\n1925.     e7 = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1926.     e8 = -9*exp(-2*x + 5) + 4*exp(3*x + 1)\n1927.     e9 = 2**x + 4**x + 8**x - 84\n1928. \n1929.     assert solveset(e1, x, S.Reals) == FiniteSet(\n1930.         -3*log(2)/(-2*log(3) + log(2)))\n1931.     assert solveset(e2, x, S.Reals) == FiniteSet(Rational(4, 15))\n1932.     assert solveset(e3, x, S.Reals) == S.EmptySet\n1933.     assert solveset(e4, x, S.Reals) == FiniteSet(0)\n1934.     assert solveset(e5, x, S.Reals) == Intersection(\n1935.         S.Reals, FiniteSet(y*log(2*exp(z/y))))\n1936.     assert solveset(e6, x, S.Reals) == FiniteSet(0)\n1937.     assert solveset(e7, x, S.Reals) == FiniteSet(2)\n1938.     assert solveset(e8, x, S.Reals) == FiniteSet(-2*log(2)/5 + 2*log(3)/5 + Rational(4, 5))\n1939.     assert solveset(e9, x, S.Reals) == FiniteSet(2)\n1940. \n1941.     assert solveset_real(-9*exp(-2*x + 5) + 2**(x + 1), x) == FiniteSet(\n1942.         -((-5 - 2*log(3) + log(2))/(log(2) + 2)))\n1943.     assert solveset_real(4**(x/2) - 2**(x/3), x) == FiniteSet(0)\n1944.     b = sqrt(6)*sqrt(log(2))/sqrt(log(5))\n1945.     assert solveset_real(5**(x/2) - 2**(3/x), x) == FiniteSet(-b, b)\n1946. \n1947.     # coverage test\n1948.     C1, C2 = symbols(\'C1 C2\')\n1949.     f = Function(\'f\')\n1950.     assert solveset_real(C1 + C2/x**2 - exp(-f(x)), f(x)) == Intersection(\n1951.         S.Reals, FiniteSet(-log(C1 + C2/x**2)))\n1952.     y = symbols(\'y\', positive=True)\n1953.     assert solveset_real(x**2 - y**2/exp(x), y) == Intersection(\n1954.         S.Reals, FiniteSet(-sqrt(x**2*exp(x)), sqrt(x**2*exp(x))))\n1955.     p = Symbol(\'p\', positive=True)\n1956.     assert solveset_real((1/p + 1)**(p + 1), p) == EmptySet()\n1957. \n1958. \n1959. @XFAIL\n1960. def test_exponential_complex():\n1961.     from sympy.abc import x\n1962.     from sympy import Dummy\n1963.     n = Dummy(\'n\')\n1964. \n1965.     assert solveset_complex(2**x + 4**x, x) == imageset(\n1966.         Lambda(n, I*(2*n*pi + pi)/log(2)), S.Integers)\n1967.     assert solveset_complex(x**z*y**z - 2, z) == FiniteSet(\n1968.         log(2)/(log(x) + log(y)))\n1969.     assert solveset_complex(4**(x/2) - 2**(x/3), x) == imageset(\n1970.         Lambda(n, 3*n*I*pi/log(2)), S.Integers)\n1971.     assert solveset(2**x + 32, x) == imageset(\n1972.         Lambda(n, (I*(2*n*pi + pi) + 5*log(2))/log(2)), S.Integers)\n1973. \n1974.     eq = (2**exp(y**2/x) + 2)/(x**2 + 15)\n1975.     a = sqrt(x)*sqrt(-log(log(2)) + log(log(2) + 2*n*I*pi))\n1976.     assert solveset_complex(eq, y) == FiniteSet(-a, a)\n1977. \n1978.     union1 = imageset(Lambda(n, I*(2*n*pi - pi*Rational(2, 3))/log(2)), S.Integers)\n1979.     union2 = imageset(Lambda(n, I*(2*n*pi + pi*Rational(2, 3))/log(2)), S.Integers)\n1980.     assert solveset(2**x + 4**x + 8**x, x) == Union(union1, union2)\n1981. \n1982.     eq = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1983.     res = solveset(eq, x)\n1984.     num = 2*n*I*pi - 4*log(2) + 2*log(3)\n1985.     den = -2*log(2) + log(3)\n1986.     ans = imageset(Lambda(n, num/den), S.Integers)\n1987.     assert res == ans\n1988. \n1989. \n1990. def test_expo_conditionset():\n1991.     from sympy.abc import x, y\n1992. \n1993.     f1 = (exp(x) + 1)**x - 2\n1994.     f2 = (x + 2)**y*x - 3\n1995.     f3 = 2**x - exp(x) - 3\n1996.     f4 = log(x) - exp(x)\n1997.     f5 = 2**x + 3**x - 5**x\n1998. \n1999.     assert solveset(f1, x, S.Reals) == ConditionSet(\n2000.         x, Eq((exp(x) + 1)**x - 2, 0), S.Reals)\n2001.     assert solveset(f2, x, S.Reals) == ConditionSet(\n2002.         x, Eq(x*(x + 2)**y - 3, 0), S.Reals)\n2003.     assert solveset(f3, x, S.Reals) == ConditionSet(\n2004.         x, Eq(2**x - exp(x) - 3, 0), S.Reals)\n2005.     assert solveset(f4, x, S.Reals) == ConditionSet(\n2006.         x, Eq(-exp(x) + log(x), 0), S.Reals)\n2007.     assert solveset(f5, x, S.Reals) == ConditionSet(\n2008.         x, Eq(2**x + 3**x - 5**x, 0), S.Reals)\n2009. \n2010. \n2011. def test_exponential_symbols():\n2012.     x, y, z = symbols(\'x y z\', positive=True)\n2013. \n2014.     assert solveset(z**x - y, x, S.Reals) == Intersection(\n2015.         S.Reals, FiniteSet(log(y)/log(z)))\n2016. \n2017.     w = symbols(\'w\')\n2018.     f1 = 2*x**w - 4*y**w\n2019.     f2 = (x/y)**w - 2\n2020.     sol1 = Intersection({log(2)/(log(x) - log(y))}, S.Reals)\n2021.     sol2 = Intersection({log(2)/log(x/y)}, S.Reals)\n2022.     assert solveset(f1, w, S.Reals) == sol1\n2023.     assert solveset(f2, w, S.Reals) == sol2\n2024. \n2025.     assert solveset(x**x, x, S.Reals) == S.EmptySet\n2026.     assert solveset(x**y - 1, y, S.Reals) == FiniteSet(0)\n2027.     assert solveset(exp(x/y)*exp(-z/y) - 2, y, S.Reals) == FiniteSet(\n2028.         (x - z)/log(2)) - FiniteSet(0)\n2029. \n2030.     a, b, x, y = symbols(\'a b x y\')\n2031.     assert solveset_real(a**x - b**x, x) == ConditionSet(\n2032.         x, (a > 0) & (b > 0), FiniteSet(0))\n2033.     assert solveset(a**x - b**x, x) == ConditionSet(\n2034.         x, Ne(a, 0) & Ne(b, 0), FiniteSet(0))\n2035. \n2036. \n2037. @XFAIL\n2038. def test_issue_10864():\n2039.     assert solveset(x**(y*z) - x, x, S.Reals) == FiniteSet(1)\n2040. \n2041. \n2042. @XFAIL\n2043. def test_solve_only_exp_2():\n2044.     assert solveset_real(sqrt(exp(x)) + sqrt(exp(-x)) - 4, x) == \\\n2045.         FiniteSet(2*log(-sqrt(3) + 2), 2*log(sqrt(3) + 2))\n2046. \n2047. \n2048. def test_is_exponential():\n2049.     x, y, z = symbols(\'x y z\')\n2050. \n2051.     assert _is_exponential(y, x) is False\n2052.     assert _is_exponential(3**x - 2, x) is True\n2053.     assert _is_exponential(5**x - 7**(2 - x), x) is True\n2054.     assert _is_exponential(sin(2**x) - 4*x, x) is False\n2055.     assert _is_exponential(x**y - z, y) is True\n2056.     assert _is_exponential(x**y - z, x) is False\n2057.     assert _is_exponential(2**x + 4**x - 1, x) is True\n2058.     assert _is_exponential(x**(y*z) - x, x) is False\n2059.     assert _is_exponential(x**(2*x) - 3**x, x) is False\n2060.     assert _is_exponential(x**y - y*z, y) is False\n2061.     assert _is_exponential(x**y - x*z, y) is True\n2062. \n2063. \n2064. def test_solve_exponential():\n2065.     assert _solve_exponential(3**(2*x) - 2**(x + 3), 0, x, S.Reals) == \\\n2066.         FiniteSet(-3*log(2)/(-2*log(3) + log(2)))\n2067.     assert _solve_exponential(2**y + 4**y, 1, y, S.Reals) == \\\n2068.         FiniteSet(log(Rational(-1, 2) + sqrt(5)/2)/log(2))\n2069.     assert _solve_exponential(2**y + 4**y, 0, y, S.Reals) == \\\n2070.         S.EmptySet\n2071.     assert _solve_exponential(2**x + 3**x - 5**x, 0, x, S.Reals) == \\\n2072.         ConditionSet(x, Eq(2**x + 3**x - 5**x, 0), S.Reals)\n2073. \n2074. # end of exponential tests\n2075. \n2076. \n2077. # logarithmic tests\n2078. def test_logarithmic():\n2079.     assert solveset_real(log(x - 3) + log(x + 3), x) == FiniteSet(\n2080.         -sqrt(10), sqrt(10))\n2081.     assert solveset_real(log(x + 1) - log(2*x - 1), x) == FiniteSet(2)\n2082.     assert solveset_real(log(x + 3) + log(1 + 3/x) - 3, x) == FiniteSet(\n2083.         -3 + sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 + exp(3)/2,\n2084.         -sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 - 3 + exp(3)/2)\n2085. \n2086.     eq = z - log(x) + log(y/(x*(-1 + y**2/x**2)))\n2087.     assert solveset_real(eq, x) == \\\n2088.         Intersection(S.Reals, FiniteSet(-sqrt(y**2 - y*exp(z)),\n2089.             sqrt(y**2 - y*exp(z)))) - \\\n2090.         Intersection(S.Reals, FiniteSet(-sqrt(y**2), sqrt(y**2)))\n2091.     assert solveset_real(\n2092.         log(3*x) - log(-x + 1) - log(4*x + 1), x) == FiniteSet(Rational(-1, 2), S.Half)\n2093.     assert solveset(log(x**y) - y*log(x), x, S.Reals) == S.Reals\n2094. \n2095. @XFAIL\n2096. def test_uselogcombine_2():\n2097.     eq = log(exp(2*x) + 1) + log(-tanh(x) + 1) - log(2)\n2098.     assert solveset_real(eq, x) == EmptySet()\n2099.     eq = log(8*x) - log(sqrt(x) + 1) - 2\n2100.     assert solveset_real(eq, x) == EmptySet()\n2101. \n2102. \n2103. def test_is_logarithmic():\n2104.     assert _is_logarithmic(y, x) is False\n2105.     assert _is_logarithmic(log(x), x) is True\n2106.     assert _is_logarithmic(log(x) - 3, x) is True\n2107.     assert _is_logarithmic(log(x)*log(y), x) is True\n2108.     assert _is_logarithmic(log(x)**2, x) is False\n2109.     assert _is_logarithmic(log(x - 3) + log(x + 3), x) is True\n2110.     assert _is_logarithmic(log(x**y) - y*log(x), x) is True\n2111.     assert _is_logarithmic(sin(log(x)), x) is False\n2112.     assert _is_logarithmic(x + y, x) is False\n2113.     assert _is_logarithmic(log(3*x) - log(1 - x) + 4, x) is True\n2114.     assert _is_logarithmic(log(x) + log(y) + x, x) is False\n2115.     assert _is_logarithmic(log(log(x - 3)) + log(x - 3), x) is True\n2116.     assert _is_logarithmic(log(log(3) + x) + log(x), x) is True\n2117.     assert _is_logarithmic(log(x)*(y + 3) + log(x), y) is False\n2118. \n2119. \n2120. def test_solve_logarithm():\n2121.     y = Symbol(\'y\')\n2122.     assert _solve_logarithm(log(x**y) - y*log(x), 0, x, S.Reals) == S.Reals\n2123.     y = Symbol(\'y\', positive=True)\n2124.     assert _solve_logarithm(log(x)*log(y), 0, x, S.Reals) == FiniteSet(1)\n2125. \n2126. # end of logarithmic tests\n2127. \n2128. \n2129. def test_linear_coeffs():\n2130.     from sympy.solvers.solveset import linear_coeffs\n2131.     assert linear_coeffs(0, x) == [0, 0]\n2132.     assert all(i is S.Zero for i in linear_coeffs(0, x))\n2133.     assert linear_coeffs(x + 2*y + 3, x, y) == [1, 2, 3]\n2134.     assert linear_coeffs(x + 2*y + 3, y, x) == [2, 1, 3]\n2135.     assert linear_coeffs(x + 2*x**2 + 3, x, x**2) == [1, 2, 3]\n2136.     raises(ValueError, lambda:\n2137.         linear_coeffs(x + 2*x**2 + x**3, x, x**2))\n2138.     raises(ValueError, lambda:\n2139.         linear_coeffs(1/x*(x - 1) + 1/x, x))\n2140.     assert linear_coeffs(a*(x + y), x, y) == [a, a, 0]\n2141.     assert linear_coeffs(1.0, x, y) == [0, 0, 1.0]\n2142. \n2143. # modular tests\n2144. def test_is_modular():\n2145.     x, y = symbols(\'x y\')\n2146. \n2147.     assert _is_modular(y, x) is False\n2148.     assert _is_modular(Mod(x, 3) - 1, x) is True\n2149.     assert _is_modular(Mod(x**3 - 3*x**2 - x + 1, 3) - 1, x) is True\n2150.     assert _is_modular(Mod(exp(x + y), 3) - 2, x) is True\n2151.     assert _is_modular(Mod(exp(x + y), 3) - log(x), x) is True\n2152.     assert _is_modular(Mod(x, 3) - 1, y) is False\n2153.     assert _is_modular(Mod(x, 3)**2 - 5, x) is False\n2154.     assert _is_modular(Mod(x, 3)**2 - y, x) is False\n2155.     assert _is_modular(exp(Mod(x, 3)) - 1, x) is False\n2156.     assert _is_modular(Mod(3, y) - 1, y) is False\n2157. \n2158. \n2159. def test_invert_modular():\n2160.     x, y = symbols(\'x y\')\n2161.     n = Dummy(\'n\', integer=True)\n2162.     from sympy.solvers.solveset import _invert_modular as invert_modular\n2163. \n2164.     # non invertible cases\n2165.     assert invert_modular(Mod(sin(x), 7), S(5), n, x) == (Mod(sin(x), 7), 5)\n2166.     assert invert_modular(Mod(exp(x), 7), S(5), n, x) == (Mod(exp(x), 7), 5)\n2167.     assert invert_modular(Mod(log(x), 7), S(5), n, x) == (Mod(log(x), 7), 5)\n2168.     # a is symbol\n2169.     assert invert_modular(Mod(x, 7), S(5), n, x) == \\\n2170.             (x, ImageSet(Lambda(n, 7*n + 5), S.Integers))\n2171.     # a.is_Add\n2172.     assert invert_modular(Mod(x + 8, 7), S(5), n, x) == \\\n2173.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))\n2174.     assert invert_modular(Mod(x**2 + x, 7), S(5), n, x) == \\\n2175.             (Mod(x**2 + x, 7), 5)\n2176.     # a.is_Mul\n2177.     assert invert_modular(Mod(3*x, 7), S(5), n, x) == \\\n2178.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))\n2179.     assert invert_modular(Mod((x + 1)*(x + 2), 7), S(5), n, x) == \\\n2180.             (Mod((x + 1)*(x + 2), 7), 5)\n2181.     # a.is_Pow\n2182.     assert invert_modular(Mod(x**4, 7), S(5), n, x) == \\\n2183.             (x, EmptySet())\n2184.     assert invert_modular(Mod(3**x, 4), S(3), n, x) == \\\n2185.             (x, ImageSet(Lambda(n, 2*n + 1), S.Naturals0))\n2186.     assert invert_modular(Mod(2**(x**2 + x + 1), 7), S(2), n, x) == \\\n2187.             (x**2 + x + 1, ImageSet(Lambda(n, 3*n + 1), S.Naturals0))\n2188. \n2189. \n2190. def test_solve_modular():\n2191.     x = Symbol(\'x\')\n2192.     n = Dummy(\'n\', integer=True)\n2193.     # if rhs has symbol (need to be implemented in future).\n2194.     assert solveset(Mod(x, 4) - x, x, S.Integers) == \\\n2195.             ConditionSet(x, Eq(-x + Mod(x, 4), 0), \\\n2196.             S.Integers)\n2197.     # when _invert_modular fails to invert\n2198.     assert solveset(3 - Mod(sin(x), 7), x, S.Integers) == \\\n2199.             ConditionSet(x, Eq(Mod(sin(x), 7) - 3, 0), S.Integers)\n2200.     assert solveset(3 - Mod(log(x), 7), x, S.Integers) == \\\n2201.             ConditionSet(x, Eq(Mod(log(x), 7) - 3, 0), S.Integers)\n2202.     assert solveset(3 - Mod(exp(x), 7), x, S.Integers) == \\\n2203.             ConditionSet(x, Eq(Mod(exp(x), 7) - 3, 0), S.Integers)\n2204.     # EmptySet solution definitely\n2205.     assert solveset(7 - Mod(x, 5), x, S.Integers) == EmptySet()\n2206.     assert solveset(5 - Mod(x, 5), x, S.Integers) == EmptySet()\n2207.     # Negative m\n2208.     assert solveset(2 + Mod(x, -3), x, S.Integers) == \\\n2209.             ImageSet(Lambda(n, -3*n - 2), S.Integers)\n2210.     assert solveset(4 + Mod(x, -3), x, S.Integers) == EmptySet()\n2211.     # linear expression in Mod\n2212.     assert solveset(3 - Mod(x, 5), x, S.Integers) == ImageSet(Lambda(n, 5*n + 3), S.Integers)\n2213.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Integers) == \\\n2214.                 ImageSet(Lambda(n, 7*n + 5), S.Integers)\n2215.     assert solveset(3 - Mod(5*x, 7), x, S.Integers) == \\\n2216.                 ImageSet(Lambda(n, 7*n + 2), S.Integers)\n2217.     # higher degree expression in Mod\n2218.     assert solveset(Mod(x**2, 160) - 9, x, S.Integers) == \\\n2219.             Union(ImageSet(Lambda(n, 160*n + 3), S.Integers),\n2220.             ImageSet(Lambda(n, 160*n + 13), S.Integers),\n2221.             ImageSet(Lambda(n, 160*n + 67), S.Integers),\n2222.             ImageSet(Lambda(n, 160*n + 77), S.Integers),\n2223.             ImageSet(Lambda(n, 160*n + 83), S.Integers),\n2224.             ImageSet(Lambda(n, 160*n + 93), S.Integers),\n2225.             ImageSet(Lambda(n, 160*n + 147), S.Integers),\n2226.             ImageSet(Lambda(n, 160*n + 157), S.Integers))\n2227.     assert solveset(3 - Mod(x**4, 7), x, S.Integers) == EmptySet()\n2228.     assert solveset(Mod(x**4, 17) - 13, x, S.Integers) == \\\n2229.             Union(ImageSet(Lambda(n, 17*n + 3), S.Integers),\n2230.             ImageSet(Lambda(n, 17*n + 5), S.Integers),\n2231.             ImageSet(Lambda(n, 17*n + 12), S.Integers),\n2232.             ImageSet(Lambda(n, 17*n + 14), S.Integers))\n2233.     # a.is_Pow tests\n2234.     assert solveset(Mod(7**x, 41) - 15, x, S.Integers) == \\\n2235.             ImageSet(Lambda(n, 40*n + 3), S.Naturals0)\n2236.     assert solveset(Mod(12**x, 21) - 18, x, S.Integers) == \\\n2237.             ImageSet(Lambda(n, 6*n + 2), S.Naturals0)\n2238.     assert solveset(Mod(3**x, 4) - 3, x, S.Integers) == \\\n2239.             ImageSet(Lambda(n, 2*n + 1), S.Naturals0)\n2240.     assert solveset(Mod(2**x, 7) - 2 , x, S.Integers) == \\\n2241.             ImageSet(Lambda(n, 3*n + 1), S.Naturals0)\n2242.     assert solveset(Mod(3**(3**x), 4) - 3, x, S.Integers) == \\\n2243.             Intersection(ImageSet(Lambda(n, Intersection({log(2*n + 1)/log(3)},\n2244.             S.Integers)), S.Naturals0), S.Integers)\n2245.     # Not Implemented for m without primitive root\n2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \\\n2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)\n2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \\\n2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)\n2250.     # domain intersection\n2251.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Naturals0) == \\\n2252.             Intersection(ImageSet(Lambda(n, 7*n + 5), S.Integers), S.Naturals0)\n2253.     # Complex args\n2254.     assert solveset(Mod(x, 3) - I, x, S.Integers) == \\\n2255.             EmptySet()\n2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \\\n2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)\n2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \\\n2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)\n2260.     # issue 13178\n2261.     n = symbols(\'n\', integer=True)\n2262.     a = 742938285\n2263.     z = 1898888478\n2264.     m = 2**31 - 1\n2265.     x = 20170816\n2266.     assert solveset(x - Mod(a**n*z, m), n, S.Integers) == \\\n2267.             ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0)\n2268.     assert solveset(x - Mod(a**n*z, m), n, S.Naturals0) == \\\n2269.             Intersection(ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0),\n2270.             S.Naturals0)\n2271.     assert solveset(x - Mod(a**(2*n)*z, m), n, S.Integers) == \\\n2272.             Intersection(ImageSet(Lambda(n, 1073741823*n + 50), S.Naturals0),\n2273.             S.Integers)\n2274.     assert solveset(x - Mod(a**(2*n + 7)*z, m), n, S.Integers) == EmptySet()\n2275.     assert solveset(x - Mod(a**(n - 4)*z, m), n, S.Integers) == \\\n2276.             Intersection(ImageSet(Lambda(n, 2147483646*n + 104), S.Naturals0),\n2277.             S.Integers)\n2278. \n2279. @XFAIL\n2280. def test_solve_modular_fail():\n2281.     # issue 17373 (https://github.com/sympy/sympy/issues/17373)\n2282.     assert solveset(Mod(x**4, 14) - 11, x, S.Integers) == \\\n2283.             Union(ImageSet(Lambda(n, 14*n + 3), S.Integers),\n2284.             ImageSet(Lambda(n, 14*n + 11), S.Integers))\n2285.     assert solveset(Mod(x**31, 74) - 43, x, S.Integers) == \\\n2286.             ImageSet(Lambda(n, 74*n + 31), S.Integers)\n2287. \n2288. # end of modular tests', start_line_number=1, end_line_number=2288)]
2025-10-06 07:18:10,665 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 07:18:10,666 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
‚îú‚îÄ‚îÄ .ci
|   ‚îú‚îÄ‚îÄ README.rst
|   ‚îú‚îÄ‚îÄ generate_durations_log.sh
|   ‚îî‚îÄ‚îÄ parse_durations_log.py
‚îú‚îÄ‚îÄ .travis.yml
‚îú‚îÄ‚îÄ CODE_OF_CONDUCT.md
‚îú‚îÄ‚îÄ CONTRIBUTING.md
‚îú‚îÄ‚îÄ PULL_REQUEST_TEMPLATE.md
‚îú‚îÄ‚îÄ README.rst
‚îú‚îÄ‚îÄ bin
|   ‚îú‚îÄ‚îÄ ask_update.py
|   ‚îú‚îÄ‚îÄ authors_update.py
|   ‚îú‚îÄ‚îÄ coverage_doctest.py
|   ‚îú‚îÄ‚îÄ coverage_report.py
|   ‚îú‚îÄ‚îÄ generate_module_list.py
|   ‚îú‚îÄ‚îÄ generate_test_list.py
|   ‚îú‚îÄ‚îÄ get_sympy.py
|   ‚îú‚îÄ‚îÄ mailmap_update.py
|   ‚îú‚îÄ‚îÄ sympy_time.py
|   ‚îú‚îÄ‚îÄ sympy_time_cache.py
|   ‚îú‚îÄ‚îÄ test_executable.py
|   ‚îú‚îÄ‚îÄ test_external_imports.py
|   ‚îú‚îÄ‚îÄ test_import.py
|   ‚îú‚îÄ‚îÄ test_setup.py
|   ‚îî‚îÄ‚îÄ test_travis.sh
‚îú‚îÄ‚îÄ codecov.yml
‚îú‚îÄ‚îÄ conftest.py
‚îú‚îÄ‚îÄ data
|   ‚îî‚îÄ‚îÄ TeXmacs
|       ‚îú‚îÄ‚îÄ bin
|       ‚îî‚îÄ‚îÄ progs
‚îú‚îÄ‚îÄ doc
|   ‚îú‚îÄ‚îÄ README.rst
|   ‚îú‚îÄ‚îÄ api
|   |   ‚îú‚îÄ‚îÄ conf.py
|   |   ‚îî‚îÄ‚îÄ index.rst
|   ‚îú‚îÄ‚îÄ cheatsheet
|   ‚îú‚îÄ‚îÄ ext
|   |   ‚îú‚îÄ‚îÄ docscrape.py
|   |   ‚îú‚îÄ‚îÄ docscrape_sphinx.py
|   |   ‚îú‚îÄ‚îÄ numpydoc.py
|   |   ‚îî‚îÄ‚îÄ sympylive.py
|   ‚îú‚îÄ‚îÄ generate_logos.py
|   ‚îú‚îÄ‚îÄ man
|   ‚îî‚îÄ‚îÄ src
|       ‚îú‚îÄ‚îÄ _static
|       ‚îú‚îÄ‚îÄ _templates
|       ‚îú‚îÄ‚îÄ aboutus.rst
|       ‚îú‚îÄ‚îÄ citing.rst
|       ‚îú‚îÄ‚îÄ conf.py
|       ‚îú‚îÄ‚îÄ documentation-style-guide.rst
|       ‚îú‚îÄ‚îÄ gotchas.rst
|       ‚îú‚îÄ‚îÄ guide.rst
|       ‚îú‚îÄ‚îÄ index.rst
|       ‚îú‚îÄ‚îÄ install.rst
|       ‚îú‚îÄ‚îÄ logo
|       |   ‚îî‚îÄ‚îÄ info.txt
|       ‚îú‚îÄ‚îÄ modules
|       |   ‚îú‚îÄ‚îÄ abc.rst
|       |   ‚îú‚îÄ‚îÄ algebras.rst
|       |   ‚îú‚îÄ‚îÄ assumptions
|       |   |   ‚îú‚îÄ‚îÄ ask.rst
|       |   |   ‚îú‚îÄ‚îÄ assume.rst
|       |   |   ‚îú‚îÄ‚îÄ handlers
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îî‚îÄ‚îÄ refine.rst
|       |   ‚îú‚îÄ‚îÄ calculus
|       |   |   ‚îî‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ categories.rst
|       |   ‚îú‚îÄ‚îÄ codegen.rst
|       |   ‚îú‚îÄ‚îÄ combinatorics
|       |   |   ‚îú‚îÄ‚îÄ fp_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ graycode.rst
|       |   |   ‚îú‚îÄ‚îÄ group_constructs.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ named_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ partitions.rst
|       |   |   ‚îú‚îÄ‚îÄ pc_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ perm_groups.rst
|       |   |   ‚îú‚îÄ‚îÄ permutations.rst
|       |   |   ‚îú‚îÄ‚îÄ polyhedron.rst
|       |   |   ‚îú‚îÄ‚îÄ prufer.rst
|       |   |   ‚îú‚îÄ‚îÄ subsets.rst
|       |   |   ‚îú‚îÄ‚îÄ tensor_can.rst
|       |   |   ‚îú‚îÄ‚îÄ testutil.rst
|       |   |   ‚îî‚îÄ‚îÄ util.rst
|       |   ‚îú‚îÄ‚îÄ concrete.rst
|       |   ‚îú‚îÄ‚îÄ core.rst
|       |   ‚îú‚îÄ‚îÄ crypto.rst
|       |   ‚îú‚îÄ‚îÄ diffgeom.rst
|       |   ‚îú‚îÄ‚îÄ discrete.rst
|       |   ‚îú‚îÄ‚îÄ evalf.rst
|       |   ‚îú‚îÄ‚îÄ functions
|       |   |   ‚îú‚îÄ‚îÄ combinatorial.rst
|       |   |   ‚îú‚îÄ‚îÄ elementary.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îî‚îÄ‚îÄ special.rst
|       |   ‚îú‚îÄ‚îÄ geometry
|       |   |   ‚îú‚îÄ‚îÄ curves.rst
|       |   |   ‚îú‚îÄ‚îÄ ellipses.rst
|       |   |   ‚îú‚îÄ‚îÄ entities.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ lines.rst
|       |   |   ‚îú‚îÄ‚îÄ plane.rst
|       |   |   ‚îú‚îÄ‚îÄ points.rst
|       |   |   ‚îú‚îÄ‚îÄ polygons.rst
|       |   |   ‚îî‚îÄ‚îÄ utils.rst
|       |   ‚îú‚îÄ‚îÄ holonomic
|       |   |   ‚îú‚îÄ‚îÄ about.rst
|       |   |   ‚îú‚îÄ‚îÄ convert.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ internal.rst
|       |   |   ‚îú‚îÄ‚îÄ operations.rst
|       |   |   ‚îú‚îÄ‚îÄ represent.rst
|       |   |   ‚îî‚îÄ‚îÄ uses.rst
|       |   ‚îú‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ integrals
|       |   |   ‚îú‚îÄ‚îÄ g-functions.rst
|       |   |   ‚îî‚îÄ‚îÄ integrals.rst
|       |   ‚îú‚îÄ‚îÄ interactive.rst
|       |   ‚îú‚îÄ‚îÄ liealgebras
|       |   |   ‚îî‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ logic.rst
|       |   ‚îú‚îÄ‚îÄ matrices
|       |   |   ‚îú‚îÄ‚îÄ common.rst
|       |   |   ‚îú‚îÄ‚îÄ dense.rst
|       |   |   ‚îú‚îÄ‚îÄ expressions.rst
|       |   |   ‚îú‚îÄ‚îÄ immutablematrices.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ matrices.rst
|       |   |   ‚îî‚îÄ‚îÄ sparse.rst
|       |   ‚îú‚îÄ‚îÄ ntheory.rst
|       |   ‚îú‚îÄ‚îÄ numeric-computation.rst
|       |   ‚îú‚îÄ‚îÄ parsing.rst
|       |   ‚îú‚îÄ‚îÄ physics
|       |   |   ‚îú‚îÄ‚îÄ continuum_mechanics
|       |   |   ‚îú‚îÄ‚îÄ hep
|       |   |   ‚îú‚îÄ‚îÄ hydrogen.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ matrices.rst
|       |   |   ‚îú‚îÄ‚îÄ mechanics
|       |   |   ‚îú‚îÄ‚îÄ optics
|       |   |   ‚îú‚îÄ‚îÄ paulialgebra.rst
|       |   |   ‚îú‚îÄ‚îÄ qho_1d.rst
|       |   |   ‚îú‚îÄ‚îÄ quantum
|       |   |   ‚îú‚îÄ‚îÄ secondquant.rst
|       |   |   ‚îú‚îÄ‚îÄ sho.rst
|       |   |   ‚îú‚îÄ‚îÄ units
|       |   |   ‚îú‚îÄ‚îÄ vector
|       |   |   ‚îî‚îÄ‚îÄ wigner.rst
|       |   ‚îú‚îÄ‚îÄ plotting.rst
|       |   ‚îú‚îÄ‚îÄ polys
|       |   |   ‚îú‚îÄ‚îÄ agca.rst
|       |   |   ‚îú‚îÄ‚îÄ basics.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ internals.rst
|       |   |   ‚îú‚îÄ‚îÄ literature.rst
|       |   |   ‚îú‚îÄ‚îÄ reference.rst
|       |   |   ‚îú‚îÄ‚îÄ ringseries.rst
|       |   |   ‚îî‚îÄ‚îÄ wester.rst
|       |   ‚îú‚îÄ‚îÄ printing.rst
|       |   ‚îú‚îÄ‚îÄ rewriting.rst
|       |   ‚îú‚îÄ‚îÄ series
|       |   |   ‚îú‚îÄ‚îÄ formal.rst
|       |   |   ‚îú‚îÄ‚îÄ fourier.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ limitseq.rst
|       |   |   ‚îú‚îÄ‚îÄ sequences.rst
|       |   |   ‚îî‚îÄ‚îÄ series.rst
|       |   ‚îú‚îÄ‚îÄ sets.rst
|       |   ‚îú‚îÄ‚îÄ simplify
|       |   |   ‚îú‚îÄ‚îÄ hyperexpand.rst
|       |   |   ‚îî‚îÄ‚îÄ simplify.rst
|       |   ‚îú‚îÄ‚îÄ solvers
|       |   |   ‚îú‚îÄ‚îÄ diophantine.rst
|       |   |   ‚îú‚îÄ‚îÄ inequalities.rst
|       |   |   ‚îú‚îÄ‚îÄ ode.rst
|       |   |   ‚îú‚îÄ‚îÄ pde.rst
|       |   |   ‚îú‚îÄ‚îÄ solvers.rst
|       |   |   ‚îî‚îÄ‚îÄ solveset.rst
|       |   ‚îú‚îÄ‚îÄ stats.rst
|       |   ‚îú‚îÄ‚îÄ tensor
|       |   |   ‚îú‚îÄ‚îÄ array.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ index_methods.rst
|       |   |   ‚îú‚îÄ‚îÄ indexed.rst
|       |   |   ‚îú‚îÄ‚îÄ tensor.rst
|       |   |   ‚îî‚îÄ‚îÄ toperators.rst
|       |   ‚îú‚îÄ‚îÄ utilities
|       |   |   ‚îú‚îÄ‚îÄ autowrap.rst
|       |   |   ‚îú‚îÄ‚îÄ codegen.rst
|       |   |   ‚îú‚îÄ‚îÄ decorator.rst
|       |   |   ‚îú‚îÄ‚îÄ enumerative.rst
|       |   |   ‚îú‚îÄ‚îÄ index.rst
|       |   |   ‚îú‚îÄ‚îÄ iterables.rst
|       |   |   ‚îú‚îÄ‚îÄ lambdify.rst
|       |   |   ‚îú‚îÄ‚îÄ memoization.rst
|       |   |   ‚îú‚îÄ‚îÄ misc.rst
|       |   |   ‚îú‚îÄ‚îÄ pkgdata.rst
|       |   |   ‚îú‚îÄ‚îÄ pytest.rst
|       |   |   ‚îú‚îÄ‚îÄ randtest.rst
|       |   |   ‚îú‚îÄ‚îÄ runtests.rst
|       |   |   ‚îú‚îÄ‚îÄ source.rst
|       |   |   ‚îî‚îÄ‚îÄ timeutils.rst
|       |   ‚îî‚îÄ‚îÄ vector
|       |       ‚îú‚îÄ‚îÄ api
|       |       ‚îú‚îÄ‚îÄ basics.rst
|       |       ‚îú‚îÄ‚îÄ coordsys.rst
|       |       ‚îú‚îÄ‚îÄ examples.rst
|       |       ‚îú‚îÄ‚îÄ fields.rst
|       |       ‚îú‚îÄ‚îÄ index.rst
|       |       ‚îî‚îÄ‚îÄ intro.rst
|       ‚îú‚îÄ‚îÄ outreach.rst
|       ‚îú‚îÄ‚îÄ pics
|       ‚îú‚îÄ‚îÄ special_topics
|       |   ‚îú‚îÄ‚îÄ finite_diff_derivatives.rst
|       |   ‚îú‚îÄ‚îÄ index.rst
|       |   ‚îî‚îÄ‚îÄ intro.rst
|       ‚îú‚îÄ‚îÄ tutorial
|       |   ‚îú‚îÄ‚îÄ basic_operations.rst
|       |   ‚îú‚îÄ‚îÄ calculus.rst
|       |   ‚îú‚îÄ‚îÄ gotchas.rst
|       |   ‚îú‚îÄ‚îÄ index.rst
|       |   ‚îú‚îÄ‚îÄ intro.rst
|       |   ‚îú‚îÄ‚îÄ manipulation.rst
|       |   ‚îú‚îÄ‚îÄ matrices.rst
|       |   ‚îú‚îÄ‚îÄ preliminaries.rst
|       |   ‚îú‚îÄ‚îÄ printing.rst
|       |   ‚îú‚îÄ‚îÄ simplification.rst
|       |   ‚îî‚îÄ‚îÄ solvers.rst
|       ‚îî‚îÄ‚îÄ wiki.rst
‚îú‚îÄ‚îÄ examples
|   ‚îú‚îÄ‚îÄ advanced
|   |   ‚îú‚îÄ‚îÄ autowrap_integrators.py
|   |   ‚îú‚îÄ‚îÄ autowrap_ufuncify.py
|   |   ‚îú‚îÄ‚îÄ curvilinear_coordinates.py
|   |   ‚îú‚îÄ‚îÄ dense_coding_example.py
|   |   ‚îú‚îÄ‚îÄ fem.py
|   |   ‚îú‚îÄ‚îÄ gibbs_phenomenon.py
|   |   ‚îú‚îÄ‚îÄ grover_example.py
|   |   ‚îú‚îÄ‚îÄ hydrogen.py
|   |   ‚îú‚îÄ‚îÄ pidigits.py
|   |   ‚îú‚îÄ‚îÄ pyglet_plotting.py
|   |   ‚îú‚îÄ‚îÄ qft.py
|   |   ‚îî‚îÄ‚îÄ relativity.py
|   ‚îú‚îÄ‚îÄ all.py
|   ‚îú‚îÄ‚îÄ beginner
|   |   ‚îú‚îÄ‚îÄ basic.py
|   |   ‚îú‚îÄ‚îÄ differentiation.py
|   |   ‚îú‚îÄ‚îÄ expansion.py
|   |   ‚îú‚îÄ‚îÄ functions.py
|   |   ‚îú‚îÄ‚îÄ limits_examples.py
|   |   ‚îú‚îÄ‚îÄ plot_examples.py
|   |   ‚îú‚îÄ‚îÄ plotting_nice_plot.py
|   |   ‚îú‚îÄ‚îÄ precision.py
|   |   ‚îú‚îÄ‚îÄ print_pretty.py
|   |   ‚îú‚îÄ‚îÄ series.py
|   |   ‚îî‚îÄ‚îÄ substitution.py
|   ‚îú‚îÄ‚îÄ intermediate
|   |   ‚îú‚îÄ‚îÄ coupled_cluster.py
|   |   ‚îú‚îÄ‚îÄ differential_equations.py
|   |   ‚îú‚îÄ‚îÄ infinite_1d_box.py
|   |   ‚îú‚îÄ‚îÄ mplot2d.py
|   |   ‚îú‚îÄ‚îÄ mplot3d.py
|   |   ‚îú‚îÄ‚îÄ partial_differential_eqs.py
|   |   ‚îú‚îÄ‚îÄ print_gtk.py
|   |   ‚îú‚îÄ‚îÄ sample.py
|   |   ‚îú‚îÄ‚îÄ trees.py
|   |   ‚îî‚îÄ‚îÄ vandermonde.py
|   ‚îî‚îÄ‚îÄ notebooks
|       ‚îî‚îÄ‚îÄ README.txt
‚îú‚îÄ‚îÄ isympy.py
‚îú‚îÄ‚îÄ release
|   ‚îú‚îÄ‚îÄ README.md
|   ‚îú‚îÄ‚îÄ fabfile.py
|   ‚îú‚îÄ‚îÄ pull_and_run_rever.sh
|   ‚îî‚îÄ‚îÄ release.sh
‚îú‚îÄ‚îÄ setup.py
‚îú‚îÄ‚îÄ setupegg.py
‚îî‚îÄ‚îÄ sympy
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ abc.py
    ‚îú‚îÄ‚îÄ algebras
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ quaternion.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_quaternion.py
    ‚îú‚îÄ‚îÄ assumptions
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ask.py
    |   ‚îú‚îÄ‚îÄ ask_generated.py
    |   ‚îú‚îÄ‚îÄ assume.py
    |   ‚îú‚îÄ‚îÄ cnf.py
    |   ‚îú‚îÄ‚îÄ handlers
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ calculus.py
    |   |   ‚îú‚îÄ‚îÄ common.py
    |   |   ‚îú‚îÄ‚îÄ matrices.py
    |   |   ‚îú‚îÄ‚îÄ ntheory.py
    |   |   ‚îú‚îÄ‚îÄ order.py
    |   |   ‚îî‚îÄ‚îÄ sets.py
    |   ‚îú‚îÄ‚îÄ refine.py
    |   ‚îú‚îÄ‚îÄ satask.py
    |   ‚îú‚îÄ‚îÄ sathandlers.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_assumptions_2.py
    |       ‚îú‚îÄ‚îÄ test_context.py
    |       ‚îú‚îÄ‚îÄ test_matrices.py
    |       ‚îú‚îÄ‚îÄ test_query.py
    |       ‚îú‚îÄ‚îÄ test_refine.py
    |       ‚îú‚îÄ‚îÄ test_satask.py
    |       ‚îî‚îÄ‚îÄ test_sathandlers.py
    ‚îú‚îÄ‚îÄ benchmarks
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ bench_discrete_log.py
    |   ‚îú‚îÄ‚îÄ bench_meijerint.py
    |   ‚îî‚îÄ‚îÄ bench_symbench.py
    ‚îú‚îÄ‚îÄ calculus
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ euler.py
    |   ‚îú‚îÄ‚îÄ finite_diff.py
    |   ‚îú‚îÄ‚îÄ singularities.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_euler.py
    |   |   ‚îú‚îÄ‚îÄ test_finite_diff.py
    |   |   ‚îú‚îÄ‚îÄ test_singularities.py
    |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ categories
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ baseclasses.py
    |   ‚îú‚îÄ‚îÄ diagram_drawing.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_baseclasses.py
    |       ‚îî‚îÄ‚îÄ test_drawing.py
    ‚îú‚îÄ‚îÄ codegen
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ algorithms.py
    |   ‚îú‚îÄ‚îÄ approximations.py
    |   ‚îú‚îÄ‚îÄ array_utils.py
    |   ‚îú‚îÄ‚îÄ ast.py
    |   ‚îú‚îÄ‚îÄ cfunctions.py
    |   ‚îú‚îÄ‚îÄ cnodes.py
    |   ‚îú‚îÄ‚îÄ cutils.py
    |   ‚îú‚îÄ‚îÄ cxxnodes.py
    |   ‚îú‚îÄ‚îÄ fnodes.py
    |   ‚îú‚îÄ‚îÄ futils.py
    |   ‚îú‚îÄ‚îÄ matrix_nodes.py
    |   ‚îú‚îÄ‚îÄ pyutils.py
    |   ‚îú‚îÄ‚îÄ rewriting.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_algorithms.py
    |       ‚îú‚îÄ‚îÄ test_applications.py
    |       ‚îú‚îÄ‚îÄ test_approximations.py
    |       ‚îú‚îÄ‚îÄ test_array_utils.py
    |       ‚îú‚îÄ‚îÄ test_ast.py
    |       ‚îú‚îÄ‚îÄ test_cfunctions.py
    |       ‚îú‚îÄ‚îÄ test_cnodes.py
    |       ‚îú‚îÄ‚îÄ test_cxxnodes.py
    |       ‚îú‚îÄ‚îÄ test_fnodes.py
    |       ‚îú‚îÄ‚îÄ test_pyutils.py
    |       ‚îî‚îÄ‚îÄ test_rewriting.py
    ‚îú‚îÄ‚îÄ combinatorics
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ coset_table.py
    |   ‚îú‚îÄ‚îÄ fp_groups.py
    |   ‚îú‚îÄ‚îÄ free_groups.py
    |   ‚îú‚îÄ‚îÄ generators.py
    |   ‚îú‚îÄ‚îÄ graycode.py
    |   ‚îú‚îÄ‚îÄ group_constructs.py
    |   ‚îú‚îÄ‚îÄ homomorphisms.py
    |   ‚îú‚îÄ‚îÄ named_groups.py
    |   ‚îú‚îÄ‚îÄ partitions.py
    |   ‚îú‚îÄ‚îÄ pc_groups.py
    |   ‚îú‚îÄ‚îÄ perm_groups.py
    |   ‚îú‚îÄ‚îÄ permutations.py
    |   ‚îú‚îÄ‚îÄ polyhedron.py
    |   ‚îú‚îÄ‚îÄ prufer.py
    |   ‚îú‚îÄ‚îÄ rewritingsystem.py
    |   ‚îú‚îÄ‚îÄ rewritingsystem_fsm.py
    |   ‚îú‚îÄ‚îÄ subsets.py
    |   ‚îú‚îÄ‚îÄ tensor_can.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_coset_table.py
    |   |   ‚îú‚îÄ‚îÄ test_fp_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_free_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_generators.py
    |   |   ‚îú‚îÄ‚îÄ test_graycode.py
    |   |   ‚îú‚îÄ‚îÄ test_group_constructs.py
    |   |   ‚îú‚îÄ‚îÄ test_homomorphisms.py
    |   |   ‚îú‚îÄ‚îÄ test_named_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_partitions.py
    |   |   ‚îú‚îÄ‚îÄ test_pc_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_perm_groups.py
    |   |   ‚îú‚îÄ‚îÄ test_permutations.py
    |   |   ‚îú‚îÄ‚îÄ test_polyhedron.py
    |   |   ‚îú‚îÄ‚îÄ test_prufer.py
    |   |   ‚îú‚îÄ‚îÄ test_rewriting.py
    |   |   ‚îú‚îÄ‚îÄ test_subsets.py
    |   |   ‚îú‚îÄ‚îÄ test_tensor_can.py
    |   |   ‚îú‚îÄ‚îÄ test_testutil.py
    |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   ‚îú‚îÄ‚îÄ testutil.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ concrete
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ delta.py
    |   ‚îú‚îÄ‚îÄ expr_with_intlimits.py
    |   ‚îú‚îÄ‚îÄ expr_with_limits.py
    |   ‚îú‚îÄ‚îÄ gosper.py
    |   ‚îú‚îÄ‚îÄ guess.py
    |   ‚îú‚îÄ‚îÄ products.py
    |   ‚îú‚îÄ‚îÄ summations.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_delta.py
    |       ‚îú‚îÄ‚îÄ test_gosper.py
    |       ‚îú‚îÄ‚îÄ test_guess.py
    |       ‚îú‚îÄ‚îÄ test_products.py
    |       ‚îî‚îÄ‚îÄ test_sums_products.py
    ‚îú‚îÄ‚îÄ conftest.py
    ‚îú‚îÄ‚îÄ core
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ add.py
    |   ‚îú‚îÄ‚îÄ alphabets.py
    |   ‚îú‚îÄ‚îÄ assumptions.py
    |   ‚îú‚îÄ‚îÄ backend.py
    |   ‚îú‚îÄ‚îÄ basic.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_arit.py
    |   |   ‚îú‚îÄ‚îÄ bench_assumptions.py
    |   |   ‚îú‚îÄ‚îÄ bench_basic.py
    |   |   ‚îú‚îÄ‚îÄ bench_expand.py
    |   |   ‚îú‚îÄ‚îÄ bench_numbers.py
    |   |   ‚îî‚îÄ‚îÄ bench_sympify.py
    |   ‚îú‚îÄ‚îÄ cache.py
    |   ‚îú‚îÄ‚îÄ compatibility.py
    |   ‚îú‚îÄ‚îÄ containers.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ coreerrors.py
    |   ‚îú‚îÄ‚îÄ decorators.py
    |   ‚îú‚îÄ‚îÄ evalf.py
    |   ‚îú‚îÄ‚îÄ expr.py
    |   ‚îú‚îÄ‚îÄ exprtools.py
    |   ‚îú‚îÄ‚îÄ facts.py
    |   ‚îú‚îÄ‚îÄ function.py
    |   ‚îú‚îÄ‚îÄ logic.py
    |   ‚îú‚îÄ‚îÄ mod.py
    |   ‚îú‚îÄ‚îÄ mul.py
    |   ‚îú‚îÄ‚îÄ multidimensional.py
    |   ‚îú‚îÄ‚îÄ numbers.py
    |   ‚îú‚îÄ‚îÄ operations.py
    |   ‚îú‚îÄ‚îÄ parameters.py
    |   ‚îú‚îÄ‚îÄ power.py
    |   ‚îú‚îÄ‚îÄ relational.py
    |   ‚îú‚îÄ‚îÄ rules.py
    |   ‚îú‚îÄ‚îÄ singleton.py
    |   ‚îú‚îÄ‚îÄ symbol.py
    |   ‚îú‚îÄ‚îÄ sympify.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_args.py
    |   |   ‚îú‚îÄ‚îÄ test_arit.py
    |   |   ‚îú‚îÄ‚îÄ test_assumptions.py
    |   |   ‚îú‚îÄ‚îÄ test_basic.py
    |   |   ‚îú‚îÄ‚îÄ test_cache.py
    |   |   ‚îú‚îÄ‚îÄ test_compatibility.py
    |   |   ‚îú‚îÄ‚îÄ test_complex.py
    |   |   ‚îú‚îÄ‚îÄ test_constructor_postprocessor.py
    |   |   ‚îú‚îÄ‚îÄ test_containers.py
    |   |   ‚îú‚îÄ‚îÄ test_count_ops.py
    |   |   ‚îú‚îÄ‚îÄ test_diff.py
    |   |   ‚îú‚îÄ‚îÄ test_equal.py
    |   |   ‚îú‚îÄ‚îÄ test_eval.py
    |   |   ‚îú‚îÄ‚îÄ test_evalf.py
    |   |   ‚îú‚îÄ‚îÄ test_expand.py
    |   |   ‚îú‚îÄ‚îÄ test_expr.py
    |   |   ‚îú‚îÄ‚îÄ test_exprtools.py
    |   |   ‚îú‚îÄ‚îÄ test_facts.py
    |   |   ‚îú‚îÄ‚îÄ test_function.py
    |   |   ‚îú‚îÄ‚îÄ test_logic.py
    |   |   ‚îú‚îÄ‚îÄ test_match.py
    |   |   ‚îú‚îÄ‚îÄ test_multidimensional.py
    |   |   ‚îú‚îÄ‚îÄ test_noncommutative.py
    |   |   ‚îú‚îÄ‚îÄ test_numbers.py
    |   |   ‚îú‚îÄ‚îÄ test_operations.py
    |   |   ‚îú‚îÄ‚îÄ test_parameters.py
    |   |   ‚îú‚îÄ‚îÄ test_power.py
    |   |   ‚îú‚îÄ‚îÄ test_priority.py
    |   |   ‚îú‚îÄ‚îÄ test_relational.py
    |   |   ‚îú‚îÄ‚îÄ test_rules.py
    |   |   ‚îú‚îÄ‚îÄ test_singleton.py
    |   |   ‚îú‚îÄ‚îÄ test_subs.py
    |   |   ‚îú‚îÄ‚îÄ test_symbol.py
    |   |   ‚îú‚îÄ‚îÄ test_sympify.py
    |   |   ‚îú‚îÄ‚îÄ test_trace.py
    |   |   ‚îú‚îÄ‚îÄ test_truediv.py
    |   |   ‚îî‚îÄ‚îÄ test_var.py
    |   ‚îî‚îÄ‚îÄ trace.py
    ‚îú‚îÄ‚îÄ crypto
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ crypto.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_crypto.py
    ‚îú‚îÄ‚îÄ deprecated
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ class_registry.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_class_registry.py
    ‚îú‚îÄ‚îÄ diffgeom
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ diffgeom.py
    |   ‚îú‚îÄ‚îÄ rn.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_class_structure.py
    |       ‚îú‚îÄ‚îÄ test_diffgeom.py
    |       ‚îú‚îÄ‚îÄ test_function_diffgeom_book.py
    |       ‚îî‚îÄ‚îÄ test_hyperbolic_space.py
    ‚îú‚îÄ‚îÄ discrete
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ convolutions.py
    |   ‚îú‚îÄ‚îÄ recurrences.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_convolutions.py
    |   |   ‚îú‚îÄ‚îÄ test_recurrences.py
    |   |   ‚îî‚îÄ‚îÄ test_transforms.py
    |   ‚îî‚îÄ‚îÄ transforms.py
    ‚îú‚îÄ‚îÄ external
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ importtools.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_autowrap.py
    |       ‚îú‚îÄ‚îÄ test_codegen.py
    |       ‚îú‚îÄ‚îÄ test_importtools.py
    |       ‚îú‚îÄ‚îÄ test_numpy.py
    |       ‚îú‚îÄ‚îÄ test_sage.py
    |       ‚îî‚îÄ‚îÄ test_scipy.py
    ‚îú‚îÄ‚îÄ functions
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ combinatorial
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ factorials.py
    |   |   ‚îú‚îÄ‚îÄ numbers.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_comb_factorials.py
    |   |       ‚îî‚îÄ‚îÄ test_comb_numbers.py
    |   ‚îú‚îÄ‚îÄ elementary
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ bench_exp.py
    |   |   ‚îú‚îÄ‚îÄ complexes.py
    |   |   ‚îú‚îÄ‚îÄ exponential.py
    |   |   ‚îú‚îÄ‚îÄ hyperbolic.py
    |   |   ‚îú‚îÄ‚îÄ integers.py
    |   |   ‚îú‚îÄ‚îÄ miscellaneous.py
    |   |   ‚îú‚îÄ‚îÄ piecewise.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_complexes.py
    |   |   |   ‚îú‚îÄ‚îÄ test_exponential.py
    |   |   |   ‚îú‚îÄ‚îÄ test_hyperbolic.py
    |   |   |   ‚îú‚îÄ‚îÄ test_integers.py
    |   |   |   ‚îú‚îÄ‚îÄ test_interface.py
    |   |   |   ‚îú‚îÄ‚îÄ test_miscellaneous.py
    |   |   |   ‚îú‚îÄ‚îÄ test_piecewise.py
    |   |   |   ‚îî‚îÄ‚îÄ test_trigonometric.py
    |   |   ‚îî‚îÄ‚îÄ trigonometric.py
    |   ‚îî‚îÄ‚îÄ special
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ benchmarks
    |       |   ‚îú‚îÄ‚îÄ __init__.py
    |       |   ‚îî‚îÄ‚îÄ bench_special.py
    |       ‚îú‚îÄ‚îÄ bessel.py
    |       ‚îú‚îÄ‚îÄ beta_functions.py
    |       ‚îú‚îÄ‚îÄ bsplines.py
    |       ‚îú‚îÄ‚îÄ delta_functions.py
    |       ‚îú‚îÄ‚îÄ elliptic_integrals.py
    |       ‚îú‚îÄ‚îÄ error_functions.py
    |       ‚îú‚îÄ‚îÄ gamma_functions.py
    |       ‚îú‚îÄ‚îÄ hyper.py
    |       ‚îú‚îÄ‚îÄ mathieu_functions.py
    |       ‚îú‚îÄ‚îÄ polynomials.py
    |       ‚îú‚îÄ‚îÄ singularity_functions.py
    |       ‚îú‚îÄ‚îÄ spherical_harmonics.py
    |       ‚îú‚îÄ‚îÄ tensor_functions.py
    |       ‚îú‚îÄ‚îÄ tests
    |       |   ‚îú‚îÄ‚îÄ __init__.py
    |       |   ‚îú‚îÄ‚îÄ test_bessel.py
    |       |   ‚îú‚îÄ‚îÄ test_beta_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_bsplines.py
    |       |   ‚îú‚îÄ‚îÄ test_delta_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_elliptic_integrals.py
    |       |   ‚îú‚îÄ‚îÄ test_error_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_gamma_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_hyper.py
    |       |   ‚îú‚îÄ‚îÄ test_mathieu.py
    |       |   ‚îú‚îÄ‚îÄ test_singularity_functions.py
    |       |   ‚îú‚îÄ‚îÄ test_spec_polynomials.py
    |       |   ‚îú‚îÄ‚îÄ test_spherical_harmonics.py
    |       |   ‚îú‚îÄ‚îÄ test_tensor_functions.py
    |       |   ‚îî‚îÄ‚îÄ test_zeta_functions.py
    |       ‚îî‚îÄ‚îÄ zeta_functions.py
    ‚îú‚îÄ‚îÄ galgebra.py
    ‚îú‚îÄ‚îÄ geometry
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ curve.py
    |   ‚îú‚îÄ‚îÄ ellipse.py
    |   ‚îú‚îÄ‚îÄ entity.py
    |   ‚îú‚îÄ‚îÄ exceptions.py
    |   ‚îú‚îÄ‚îÄ line.py
    |   ‚îú‚îÄ‚îÄ parabola.py
    |   ‚îú‚îÄ‚îÄ plane.py
    |   ‚îú‚îÄ‚îÄ point.py
    |   ‚îú‚îÄ‚îÄ polygon.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_curve.py
    |   |   ‚îú‚îÄ‚îÄ test_ellipse.py
    |   |   ‚îú‚îÄ‚îÄ test_entity.py
    |   |   ‚îú‚îÄ‚îÄ test_geometrysets.py
    |   |   ‚îú‚îÄ‚îÄ test_line.py
    |   |   ‚îú‚îÄ‚îÄ test_parabola.py
    |   |   ‚îú‚îÄ‚îÄ test_plane.py
    |   |   ‚îú‚îÄ‚îÄ test_point.py
    |   |   ‚îú‚îÄ‚îÄ test_polygon.py
    |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ holonomic
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ holonomic.py
    |   ‚îú‚îÄ‚îÄ holonomicerrors.py
    |   ‚îú‚îÄ‚îÄ linearsolver.py
    |   ‚îú‚îÄ‚îÄ numerical.py
    |   ‚îú‚îÄ‚îÄ recurrence.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_holonomic.py
    |       ‚îî‚îÄ‚îÄ test_recurrence.py
    ‚îú‚îÄ‚îÄ integrals
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_integrate.py
    |   |   ‚îî‚îÄ‚îÄ bench_trigintegrate.py
    |   ‚îú‚îÄ‚îÄ deltafunctions.py
    |   ‚îú‚îÄ‚îÄ heurisch.py
    |   ‚îú‚îÄ‚îÄ integrals.py
    |   ‚îú‚îÄ‚îÄ intpoly.py
    |   ‚îú‚îÄ‚îÄ manualintegrate.py
    |   ‚îú‚îÄ‚îÄ meijerint.py
    |   ‚îú‚îÄ‚îÄ meijerint_doc.py
    |   ‚îú‚îÄ‚îÄ prde.py
    |   ‚îú‚îÄ‚îÄ quadrature.py
    |   ‚îú‚îÄ‚îÄ rationaltools.py
    |   ‚îú‚îÄ‚îÄ rde.py
    |   ‚îú‚îÄ‚îÄ risch.py
    |   ‚îú‚îÄ‚îÄ rubi
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ constraints.py
    |   |   ‚îú‚îÄ‚îÄ parsetools
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ generate_rules.py
    |   |   |   ‚îú‚îÄ‚îÄ generate_tests.py
    |   |   |   ‚îú‚îÄ‚îÄ header.py.txt
    |   |   |   ‚îú‚îÄ‚îÄ parse.py
    |   |   |   ‚îî‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ rubi_tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ rubimain.py
    |   |   ‚îú‚îÄ‚îÄ rules
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ binomial_products.py
    |   |   |   ‚îú‚îÄ‚îÄ exponential.py
    |   |   |   ‚îú‚îÄ‚îÄ hyperbolic.py
    |   |   |   ‚îú‚îÄ‚îÄ integrand_simplification.py
    |   |   |   ‚îú‚îÄ‚îÄ inverse_hyperbolic.py
    |   |   |   ‚îú‚îÄ‚îÄ inverse_trig.py
    |   |   |   ‚îú‚îÄ‚îÄ linear_products.py
    |   |   |   ‚îú‚îÄ‚îÄ logarithms.py
    |   |   |   ‚îú‚îÄ‚îÄ miscellaneous_algebraic.py
    |   |   |   ‚îú‚îÄ‚îÄ miscellaneous_integration.py
    |   |   |   ‚îú‚îÄ‚îÄ miscellaneous_trig.py
    |   |   |   ‚îú‚îÄ‚îÄ piecewise_linear.py
    |   |   |   ‚îú‚îÄ‚îÄ quadratic_products.py
    |   |   |   ‚îú‚îÄ‚îÄ secant.py
    |   |   |   ‚îú‚îÄ‚îÄ sine.py
    |   |   |   ‚îú‚îÄ‚îÄ special_functions.py
    |   |   |   ‚îú‚îÄ‚îÄ tangent.py
    |   |   |   ‚îî‚îÄ‚îÄ trinomial_products.py
    |   |   ‚îú‚îÄ‚îÄ symbol.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_rubi_integrate.py
    |   |   |   ‚îî‚îÄ‚îÄ test_utility_function.py
    |   |   ‚îî‚îÄ‚îÄ utility_function.py
    |   ‚îú‚îÄ‚îÄ singularityfunctions.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_deltafunctions.py
    |   |   ‚îú‚îÄ‚îÄ test_failing_integrals.py
    |   |   ‚îú‚îÄ‚îÄ test_heurisch.py
    |   |   ‚îú‚îÄ‚îÄ test_integrals.py
    |   |   ‚îú‚îÄ‚îÄ test_intpoly.py
    |   |   ‚îú‚îÄ‚îÄ test_lineintegrals.py
    |   |   ‚îú‚îÄ‚îÄ test_manual.py
    |   |   ‚îú‚îÄ‚îÄ test_meijerint.py
    |   |   ‚îú‚îÄ‚îÄ test_prde.py
    |   |   ‚îú‚îÄ‚îÄ test_quadrature.py
    |   |   ‚îú‚îÄ‚îÄ test_rationaltools.py
    |   |   ‚îú‚îÄ‚îÄ test_rde.py
    |   |   ‚îú‚îÄ‚îÄ test_risch.py
    |   |   ‚îú‚îÄ‚îÄ test_singularityfunctions.py
    |   |   ‚îú‚îÄ‚îÄ test_transforms.py
    |   |   ‚îî‚îÄ‚îÄ test_trigonometry.py
    |   ‚îú‚îÄ‚îÄ transforms.py
    |   ‚îî‚îÄ‚îÄ trigonometry.py
    ‚îú‚îÄ‚îÄ interactive
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ipythonprinting.py
    |   ‚îú‚îÄ‚îÄ printing.py
    |   ‚îú‚îÄ‚îÄ session.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_interactive.py
    |       ‚îú‚îÄ‚îÄ test_ipython.py
    |       ‚îî‚îÄ‚îÄ test_ipythonprinting.py
    ‚îú‚îÄ‚îÄ liealgebras
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ cartan_matrix.py
    |   ‚îú‚îÄ‚îÄ cartan_type.py
    |   ‚îú‚îÄ‚îÄ dynkin_diagram.py
    |   ‚îú‚îÄ‚îÄ root_system.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_cartan_matrix.py
    |   |   ‚îú‚îÄ‚îÄ test_cartan_type.py
    |   |   ‚îú‚îÄ‚îÄ test_dynkin_diagram.py
    |   |   ‚îú‚îÄ‚îÄ test_root_system.py
    |   |   ‚îú‚îÄ‚îÄ test_type_A.py
    |   |   ‚îú‚îÄ‚îÄ test_type_B.py
    |   |   ‚îú‚îÄ‚îÄ test_type_C.py
    |   |   ‚îú‚îÄ‚îÄ test_type_D.py
    |   |   ‚îú‚îÄ‚îÄ test_type_E.py
    |   |   ‚îú‚îÄ‚îÄ test_type_F.py
    |   |   ‚îú‚îÄ‚îÄ test_type_G.py
    |   |   ‚îî‚îÄ‚îÄ test_weyl_group.py
    |   ‚îú‚îÄ‚îÄ type_a.py
    |   ‚îú‚îÄ‚îÄ type_b.py
    |   ‚îú‚îÄ‚îÄ type_c.py
    |   ‚îú‚îÄ‚îÄ type_d.py
    |   ‚îú‚îÄ‚îÄ type_e.py
    |   ‚îú‚îÄ‚îÄ type_f.py
    |   ‚îú‚îÄ‚îÄ type_g.py
    |   ‚îî‚îÄ‚îÄ weyl_group.py
    ‚îú‚îÄ‚îÄ logic
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ algorithms
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ dpll.py
    |   |   ‚îú‚îÄ‚îÄ dpll2.py
    |   |   ‚îî‚îÄ‚îÄ pycosat_wrapper.py
    |   ‚îú‚îÄ‚îÄ boolalg.py
    |   ‚îú‚îÄ‚îÄ inference.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_boolalg.py
    |   |   ‚îú‚îÄ‚îÄ test_dimacs.py
    |   |   ‚îî‚îÄ‚îÄ test_inference.py
    |   ‚îî‚îÄ‚îÄ utilities
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ dimacs.py
    ‚îú‚îÄ‚îÄ matrices
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ bench_matrix.py
    |   ‚îú‚îÄ‚îÄ common.py
    |   ‚îú‚îÄ‚îÄ dense.py
    |   ‚îú‚îÄ‚îÄ densearith.py
    |   ‚îú‚îÄ‚îÄ densesolve.py
    |   ‚îú‚îÄ‚îÄ densetools.py
    |   ‚îú‚îÄ‚îÄ expressions
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ adjoint.py
    |   |   ‚îú‚îÄ‚îÄ applyfunc.py
    |   |   ‚îú‚îÄ‚îÄ blockmatrix.py
    |   |   ‚îú‚îÄ‚îÄ determinant.py
    |   |   ‚îú‚îÄ‚îÄ diagonal.py
    |   |   ‚îú‚îÄ‚îÄ dotproduct.py
    |   |   ‚îú‚îÄ‚îÄ factorizations.py
    |   |   ‚îú‚îÄ‚îÄ fourier.py
    |   |   ‚îú‚îÄ‚îÄ funcmatrix.py
    |   |   ‚îú‚îÄ‚îÄ hadamard.py
    |   |   ‚îú‚îÄ‚îÄ inverse.py
    |   |   ‚îú‚îÄ‚îÄ kronecker.py
    |   |   ‚îú‚îÄ‚îÄ matadd.py
    |   |   ‚îú‚îÄ‚îÄ matexpr.py
    |   |   ‚îú‚îÄ‚îÄ matmul.py
    |   |   ‚îú‚îÄ‚îÄ matpow.py
    |   |   ‚îú‚îÄ‚îÄ permutation.py
    |   |   ‚îú‚îÄ‚îÄ slice.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_adjoint.py
    |   |   |   ‚îú‚îÄ‚îÄ test_applyfunc.py
    |   |   |   ‚îú‚îÄ‚îÄ test_blockmatrix.py
    |   |   |   ‚îú‚îÄ‚îÄ test_derivatives.py
    |   |   |   ‚îú‚îÄ‚îÄ test_determinant.py
    |   |   |   ‚îú‚îÄ‚îÄ test_diagonal.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dotproduct.py
    |   |   |   ‚îú‚îÄ‚îÄ test_factorizations.py
    |   |   |   ‚îú‚îÄ‚îÄ test_fourier.py
    |   |   |   ‚îú‚îÄ‚îÄ test_funcmatrix.py
    |   |   |   ‚îú‚îÄ‚îÄ test_hadamard.py
    |   |   |   ‚îú‚îÄ‚îÄ test_indexing.py
    |   |   |   ‚îú‚îÄ‚îÄ test_inverse.py
    |   |   |   ‚îú‚îÄ‚îÄ test_kronecker.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matadd.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matexpr.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matmul.py
    |   |   |   ‚îú‚îÄ‚îÄ test_matpow.py
    |   |   |   ‚îú‚îÄ‚îÄ test_permutation.py
    |   |   |   ‚îú‚îÄ‚îÄ test_slice.py
    |   |   |   ‚îú‚îÄ‚îÄ test_trace.py
    |   |   |   ‚îî‚îÄ‚îÄ test_transpose.py
    |   |   ‚îú‚îÄ‚îÄ trace.py
    |   |   ‚îî‚îÄ‚îÄ transpose.py
    |   ‚îú‚îÄ‚îÄ immutable.py
    |   ‚îú‚îÄ‚îÄ matrices.py
    |   ‚îú‚îÄ‚îÄ normalforms.py
    |   ‚îú‚îÄ‚îÄ sparse.py
    |   ‚îú‚îÄ‚îÄ sparsetools.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_commonmatrix.py
    |       ‚îú‚îÄ‚îÄ test_densearith.py
    |       ‚îú‚îÄ‚îÄ test_densesolve.py
    |       ‚îú‚îÄ‚îÄ test_densetools.py
    |       ‚îú‚îÄ‚îÄ test_immutable.py
    |       ‚îú‚îÄ‚îÄ test_interactions.py
    |       ‚îú‚îÄ‚îÄ test_matrices.py
    |       ‚îú‚îÄ‚îÄ test_normalforms.py
    |       ‚îú‚îÄ‚îÄ test_sparse.py
    |       ‚îî‚îÄ‚îÄ test_sparsetools.py
    ‚îú‚îÄ‚îÄ multipledispatch
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ conflict.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ dispatcher.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_conflict.py
    |   |   ‚îú‚îÄ‚îÄ test_core.py
    |   |   ‚îî‚îÄ‚îÄ test_dispatcher.py
    |   ‚îî‚îÄ‚îÄ utils.py
    ‚îú‚îÄ‚îÄ ntheory
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ bbp_pi.py
    |   ‚îú‚îÄ‚îÄ continued_fraction.py
    |   ‚îú‚îÄ‚îÄ egyptian_fraction.py
    |   ‚îú‚îÄ‚îÄ factor_.py
    |   ‚îú‚îÄ‚îÄ generate.py
    |   ‚îú‚îÄ‚îÄ modular.py
    |   ‚îú‚îÄ‚îÄ multinomial.py
    |   ‚îú‚îÄ‚îÄ partitions_.py
    |   ‚îú‚îÄ‚îÄ primetest.py
    |   ‚îú‚îÄ‚îÄ residue_ntheory.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_bbp_pi.py
    |       ‚îú‚îÄ‚îÄ test_continued_fraction.py
    |       ‚îú‚îÄ‚îÄ test_egyptian_fraction.py
    |       ‚îú‚îÄ‚îÄ test_factor_.py
    |       ‚îú‚îÄ‚îÄ test_generate.py
    |       ‚îú‚îÄ‚îÄ test_modular.py
    |       ‚îú‚îÄ‚îÄ test_multinomial.py
    |       ‚îú‚îÄ‚îÄ test_partitions.py
    |       ‚îú‚îÄ‚îÄ test_primetest.py
    |       ‚îî‚îÄ‚îÄ test_residue.py
    ‚îú‚îÄ‚îÄ parsing
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ast_parser.py
    |   ‚îú‚îÄ‚îÄ autolev
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ _antlr
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ autolevlexer.py
    |   |   |   ‚îú‚îÄ‚îÄ autolevlistener.py
    |   |   |   ‚îî‚îÄ‚îÄ autolevparser.py
    |   |   ‚îú‚îÄ‚îÄ _listener_autolev_antlr.py
    |   |   ‚îú‚îÄ‚îÄ _parse_autolev_antlr.py
    |   |   ‚îî‚îÄ‚îÄ test-examples
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ pydy-example-repo
    |   |       ‚îú‚îÄ‚îÄ ruletest1.py
    |   |       ‚îú‚îÄ‚îÄ ruletest10.py
    |   |       ‚îú‚îÄ‚îÄ ruletest11.py
    |   |       ‚îú‚îÄ‚îÄ ruletest12.py
    |   |       ‚îú‚îÄ‚îÄ ruletest2.py
    |   |       ‚îú‚îÄ‚îÄ ruletest3.py
    |   |       ‚îú‚îÄ‚îÄ ruletest4.py
    |   |       ‚îú‚îÄ‚îÄ ruletest5.py
    |   |       ‚îú‚îÄ‚îÄ ruletest6.py
    |   |       ‚îú‚îÄ‚îÄ ruletest7.py
    |   |       ‚îú‚îÄ‚îÄ ruletest8.py
    |   |       ‚îî‚îÄ‚îÄ ruletest9.py
    |   ‚îú‚îÄ‚îÄ c
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ c_parser.py
    |   ‚îú‚îÄ‚îÄ fortran
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ fortran_parser.py
    |   ‚îú‚îÄ‚îÄ latex
    |   |   ‚îú‚îÄ‚îÄ LICENSE.txt
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ _antlr
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ latexlexer.py
    |   |   |   ‚îî‚îÄ‚îÄ latexparser.py
    |   |   ‚îú‚îÄ‚îÄ _build_latex_antlr.py
    |   |   ‚îú‚îÄ‚îÄ _parse_latex_antlr.py
    |   |   ‚îî‚îÄ‚îÄ errors.py
    |   ‚îú‚îÄ‚îÄ mathematica.py
    |   ‚îú‚îÄ‚îÄ maxima.py
    |   ‚îú‚îÄ‚îÄ sym_expr.py
    |   ‚îú‚îÄ‚îÄ sympy_parser.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_ast_parser.py
    |       ‚îú‚îÄ‚îÄ test_autolev.py
    |       ‚îú‚îÄ‚îÄ test_c_parser.py
    |       ‚îú‚îÄ‚îÄ test_fortran_parser.py
    |       ‚îú‚îÄ‚îÄ test_implicit_multiplication_application.py
    |       ‚îú‚îÄ‚îÄ test_latex.py
    |       ‚îú‚îÄ‚îÄ test_latex_deps.py
    |       ‚îú‚îÄ‚îÄ test_mathematica.py
    |       ‚îú‚îÄ‚îÄ test_maxima.py
    |       ‚îú‚îÄ‚îÄ test_sym_expr.py
    |       ‚îî‚îÄ‚îÄ test_sympy_parser.py
    ‚îú‚îÄ‚îÄ physics
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ continuum_mechanics
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ beam.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îî‚îÄ‚îÄ test_beam.py
    |   ‚îú‚îÄ‚îÄ gaussopt.py
    |   ‚îú‚îÄ‚îÄ hep
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ gamma_matrices.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îî‚îÄ‚îÄ test_gamma_matrices.py
    |   ‚îú‚îÄ‚îÄ hydrogen.py
    |   ‚îú‚îÄ‚îÄ matrices.py
    |   ‚îú‚îÄ‚îÄ mechanics
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ body.py
    |   |   ‚îú‚îÄ‚îÄ functions.py
    |   |   ‚îú‚îÄ‚îÄ kane.py
    |   |   ‚îú‚îÄ‚îÄ lagrange.py
    |   |   ‚îú‚îÄ‚îÄ linearize.py
    |   |   ‚îú‚îÄ‚îÄ models.py
    |   |   ‚îú‚îÄ‚îÄ particle.py
    |   |   ‚îú‚îÄ‚îÄ rigidbody.py
    |   |   ‚îú‚îÄ‚îÄ system.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_body.py
    |   |       ‚îú‚îÄ‚îÄ test_functions.py
    |   |       ‚îú‚îÄ‚îÄ test_kane.py
    |   |       ‚îú‚îÄ‚îÄ test_kane2.py
    |   |       ‚îú‚îÄ‚îÄ test_kane3.py
    |   |       ‚îú‚îÄ‚îÄ test_kane4.py
    |   |       ‚îú‚îÄ‚îÄ test_lagrange.py
    |   |       ‚îú‚îÄ‚îÄ test_lagrange2.py
    |   |       ‚îú‚îÄ‚îÄ test_linearize.py
    |   |       ‚îú‚îÄ‚îÄ test_models.py
    |   |       ‚îú‚îÄ‚îÄ test_particle.py
    |   |       ‚îú‚îÄ‚îÄ test_rigidbody.py
    |   |       ‚îî‚îÄ‚îÄ test_system.py
    |   ‚îú‚îÄ‚îÄ optics
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ gaussopt.py
    |   |   ‚îú‚îÄ‚îÄ medium.py
    |   |   ‚îú‚îÄ‚îÄ polarization.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_gaussopt.py
    |   |   |   ‚îú‚îÄ‚îÄ test_medium.py
    |   |   |   ‚îú‚îÄ‚îÄ test_polarization.py
    |   |   |   ‚îú‚îÄ‚îÄ test_utils.py
    |   |   |   ‚îî‚îÄ‚îÄ test_waves.py
    |   |   ‚îú‚îÄ‚îÄ utils.py
    |   |   ‚îî‚îÄ‚îÄ waves.py
    |   ‚îú‚îÄ‚îÄ paulialgebra.py
    |   ‚îú‚îÄ‚îÄ pring.py
    |   ‚îú‚îÄ‚îÄ qho_1d.py
    |   ‚îú‚îÄ‚îÄ quantum
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ anticommutator.py
    |   |   ‚îú‚îÄ‚îÄ boson.py
    |   |   ‚îú‚îÄ‚îÄ cartesian.py
    |   |   ‚îú‚îÄ‚îÄ cg.py
    |   |   ‚îú‚îÄ‚îÄ circuitplot.py
    |   |   ‚îú‚îÄ‚îÄ circuitutils.py
    |   |   ‚îú‚îÄ‚îÄ commutator.py
    |   |   ‚îú‚îÄ‚îÄ constants.py
    |   |   ‚îú‚îÄ‚îÄ dagger.py
    |   |   ‚îú‚îÄ‚îÄ density.py
    |   |   ‚îú‚îÄ‚îÄ fermion.py
    |   |   ‚îú‚îÄ‚îÄ gate.py
    |   |   ‚îú‚îÄ‚îÄ grover.py
    |   |   ‚îú‚îÄ‚îÄ hilbert.py
    |   |   ‚îú‚îÄ‚îÄ identitysearch.py
    |   |   ‚îú‚îÄ‚îÄ innerproduct.py
    |   |   ‚îú‚îÄ‚îÄ matrixcache.py
    |   |   ‚îú‚îÄ‚îÄ matrixutils.py
    |   |   ‚îú‚îÄ‚îÄ operator.py
    |   |   ‚îú‚îÄ‚îÄ operatorordering.py
    |   |   ‚îú‚îÄ‚îÄ operatorset.py
    |   |   ‚îú‚îÄ‚îÄ pauli.py
    |   |   ‚îú‚îÄ‚îÄ piab.py
    |   |   ‚îú‚îÄ‚îÄ qapply.py
    |   |   ‚îú‚îÄ‚îÄ qasm.py
    |   |   ‚îú‚îÄ‚îÄ qexpr.py
    |   |   ‚îú‚îÄ‚îÄ qft.py
    |   |   ‚îú‚îÄ‚îÄ qubit.py
    |   |   ‚îú‚îÄ‚îÄ represent.py
    |   |   ‚îú‚îÄ‚îÄ sho1d.py
    |   |   ‚îú‚îÄ‚îÄ shor.py
    |   |   ‚îú‚îÄ‚îÄ spin.py
    |   |   ‚îú‚îÄ‚îÄ state.py
    |   |   ‚îú‚îÄ‚îÄ tensorproduct.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_anticommutator.py
    |   |       ‚îú‚îÄ‚îÄ test_boson.py
    |   |       ‚îú‚îÄ‚îÄ test_cartesian.py
    |   |       ‚îú‚îÄ‚îÄ test_cg.py
    |   |       ‚îú‚îÄ‚îÄ test_circuitplot.py
    |   |       ‚îú‚îÄ‚îÄ test_circuitutils.py
    |   |       ‚îú‚îÄ‚îÄ test_commutator.py
    |   |       ‚îú‚îÄ‚îÄ test_constants.py
    |   |       ‚îú‚îÄ‚îÄ test_dagger.py
    |   |       ‚îú‚îÄ‚îÄ test_density.py
    |   |       ‚îú‚îÄ‚îÄ test_fermion.py
    |   |       ‚îú‚îÄ‚îÄ test_gate.py
    |   |       ‚îú‚îÄ‚îÄ test_grover.py
    |   |       ‚îú‚îÄ‚îÄ test_hilbert.py
    |   |       ‚îú‚îÄ‚îÄ test_identitysearch.py
    |   |       ‚îú‚îÄ‚îÄ test_innerproduct.py
    |   |       ‚îú‚îÄ‚îÄ test_matrixutils.py
    |   |       ‚îú‚îÄ‚îÄ test_operator.py
    |   |       ‚îú‚îÄ‚îÄ test_operatorordering.py
    |   |       ‚îú‚îÄ‚îÄ test_operatorset.py
    |   |       ‚îú‚îÄ‚îÄ test_pauli.py
    |   |       ‚îú‚îÄ‚îÄ test_piab.py
    |   |       ‚îú‚îÄ‚îÄ test_printing.py
    |   |       ‚îú‚îÄ‚îÄ test_qapply.py
    |   |       ‚îú‚îÄ‚îÄ test_qasm.py
    |   |       ‚îú‚îÄ‚îÄ test_qexpr.py
    |   |       ‚îú‚îÄ‚îÄ test_qft.py
    |   |       ‚îú‚îÄ‚îÄ test_qubit.py
    |   |       ‚îú‚îÄ‚îÄ test_represent.py
    |   |       ‚îú‚îÄ‚îÄ test_sho1d.py
    |   |       ‚îú‚îÄ‚îÄ test_shor.py
    |   |       ‚îú‚îÄ‚îÄ test_spin.py
    |   |       ‚îú‚îÄ‚îÄ test_state.py
    |   |       ‚îî‚îÄ‚îÄ test_tensorproduct.py
    |   ‚îú‚îÄ‚îÄ secondquant.py
    |   ‚îú‚îÄ‚îÄ sho.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_clebsch_gordan.py
    |   |   ‚îú‚îÄ‚îÄ test_hydrogen.py
    |   |   ‚îú‚îÄ‚îÄ test_paulialgebra.py
    |   |   ‚îú‚îÄ‚îÄ test_physics_matrices.py
    |   |   ‚îú‚îÄ‚îÄ test_pring.py
    |   |   ‚îú‚îÄ‚îÄ test_qho_1d.py
    |   |   ‚îú‚îÄ‚îÄ test_secondquant.py
    |   |   ‚îî‚îÄ‚îÄ test_sho.py
    |   ‚îú‚îÄ‚îÄ units
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ definitions
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ dimension_definitions.py
    |   |   |   ‚îî‚îÄ‚îÄ unit_definitions.py
    |   |   ‚îú‚îÄ‚îÄ dimensions.py
    |   |   ‚îú‚îÄ‚îÄ prefixes.py
    |   |   ‚îú‚îÄ‚îÄ quantities.py
    |   |   ‚îú‚îÄ‚îÄ systems
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ cgs.py
    |   |   |   ‚îú‚îÄ‚îÄ length_weight_time.py
    |   |   |   ‚îú‚îÄ‚îÄ mks.py
    |   |   |   ‚îú‚îÄ‚îÄ mksa.py
    |   |   |   ‚îú‚îÄ‚îÄ natural.py
    |   |   |   ‚îî‚îÄ‚îÄ si.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dimensions.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dimensionsystem.py
    |   |   |   ‚îú‚îÄ‚îÄ test_prefixes.py
    |   |   |   ‚îú‚îÄ‚îÄ test_quantities.py
    |   |   |   ‚îú‚îÄ‚îÄ test_unit_system_cgs_gauss.py
    |   |   |   ‚îú‚îÄ‚îÄ test_unitsystem.py
    |   |   |   ‚îî‚îÄ‚îÄ test_util.py
    |   |   ‚îú‚îÄ‚îÄ unitsystem.py
    |   |   ‚îî‚îÄ‚îÄ util.py
    |   ‚îú‚îÄ‚îÄ vector
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ dyadic.py
    |   |   ‚îú‚îÄ‚îÄ fieldfunctions.py
    |   |   ‚îú‚îÄ‚îÄ frame.py
    |   |   ‚îú‚îÄ‚îÄ functions.py
    |   |   ‚îú‚îÄ‚îÄ point.py
    |   |   ‚îú‚îÄ‚îÄ printing.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_dyadic.py
    |   |   |   ‚îú‚îÄ‚îÄ test_fieldfunctions.py
    |   |   |   ‚îú‚îÄ‚îÄ test_frame.py
    |   |   |   ‚îú‚îÄ‚îÄ test_functions.py
    |   |   |   ‚îú‚îÄ‚îÄ test_output.py
    |   |   |   ‚îú‚îÄ‚îÄ test_point.py
    |   |   |   ‚îú‚îÄ‚îÄ test_printing.py
    |   |   |   ‚îî‚îÄ‚îÄ test_vector.py
    |   |   ‚îî‚îÄ‚îÄ vector.py
    |   ‚îî‚îÄ‚îÄ wigner.py
    ‚îú‚îÄ‚îÄ plotting
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ experimental_lambdify.py
    |   ‚îú‚îÄ‚îÄ intervalmath
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ interval_arithmetic.py
    |   |   ‚îú‚îÄ‚îÄ interval_membership.py
    |   |   ‚îú‚îÄ‚îÄ lib_interval.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_interval_functions.py
    |   |       ‚îú‚îÄ‚îÄ test_interval_membership.py
    |   |       ‚îî‚îÄ‚îÄ test_intervalmath.py
    |   ‚îú‚îÄ‚îÄ plot.py
    |   ‚îú‚îÄ‚îÄ plot_implicit.py
    |   ‚îú‚îÄ‚îÄ pygletplot
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ color_scheme.py
    |   |   ‚îú‚îÄ‚îÄ managed_window.py
    |   |   ‚îú‚îÄ‚îÄ plot.py
    |   |   ‚îú‚îÄ‚îÄ plot_axes.py
    |   |   ‚îú‚îÄ‚îÄ plot_camera.py
    |   |   ‚îú‚îÄ‚îÄ plot_controller.py
    |   |   ‚îú‚îÄ‚îÄ plot_curve.py
    |   |   ‚îú‚îÄ‚îÄ plot_interval.py
    |   |   ‚îú‚îÄ‚îÄ plot_mode.py
    |   |   ‚îú‚îÄ‚îÄ plot_mode_base.py
    |   |   ‚îú‚îÄ‚îÄ plot_modes.py
    |   |   ‚îú‚îÄ‚îÄ plot_object.py
    |   |   ‚îú‚îÄ‚îÄ plot_rotation.py
    |   |   ‚îú‚îÄ‚îÄ plot_surface.py
    |   |   ‚îú‚îÄ‚îÄ plot_window.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ test_plotting.py
    |   |   ‚îî‚îÄ‚îÄ util.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_experimental_lambdify.py
    |   |   ‚îú‚îÄ‚îÄ test_plot.py
    |   |   ‚îú‚îÄ‚îÄ test_plot_implicit.py
    |   |   ‚îî‚îÄ‚îÄ test_textplot.py
    |   ‚îî‚îÄ‚îÄ textplot.py
    ‚îú‚îÄ‚îÄ polys
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ agca
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ extensions.py
    |   |   ‚îú‚îÄ‚îÄ homomorphisms.py
    |   |   ‚îú‚îÄ‚îÄ ideals.py
    |   |   ‚îú‚îÄ‚îÄ modules.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_extensions.py
    |   |       ‚îú‚îÄ‚îÄ test_homomorphisms.py
    |   |       ‚îú‚îÄ‚îÄ test_ideals.py
    |   |       ‚îî‚îÄ‚îÄ test_modules.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_galoispolys.py
    |   |   ‚îú‚îÄ‚îÄ bench_groebnertools.py
    |   |   ‚îî‚îÄ‚îÄ bench_solvers.py
    |   ‚îú‚îÄ‚îÄ compatibility.py
    |   ‚îú‚îÄ‚îÄ constructor.py
    |   ‚îú‚îÄ‚îÄ densearith.py
    |   ‚îú‚îÄ‚îÄ densebasic.py
    |   ‚îú‚îÄ‚îÄ densetools.py
    |   ‚îú‚îÄ‚îÄ dispersion.py
    |   ‚îú‚îÄ‚îÄ distributedmodules.py
    |   ‚îú‚îÄ‚îÄ domains
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ algebraicfield.py
    |   |   ‚îú‚îÄ‚îÄ characteristiczero.py
    |   |   ‚îú‚îÄ‚îÄ complexfield.py
    |   |   ‚îú‚îÄ‚îÄ compositedomain.py
    |   |   ‚îú‚îÄ‚îÄ domain.py
    |   |   ‚îú‚îÄ‚îÄ domainelement.py
    |   |   ‚îú‚îÄ‚îÄ expressiondomain.py
    |   |   ‚îú‚îÄ‚îÄ field.py
    |   |   ‚îú‚îÄ‚îÄ finitefield.py
    |   |   ‚îú‚îÄ‚îÄ fractionfield.py
    |   |   ‚îú‚îÄ‚îÄ gmpyfinitefield.py
    |   |   ‚îú‚îÄ‚îÄ gmpyintegerring.py
    |   |   ‚îú‚îÄ‚îÄ gmpyrationalfield.py
    |   |   ‚îú‚îÄ‚îÄ groundtypes.py
    |   |   ‚îú‚îÄ‚îÄ integerring.py
    |   |   ‚îú‚îÄ‚îÄ modularinteger.py
    |   |   ‚îú‚îÄ‚îÄ mpelements.py
    |   |   ‚îú‚îÄ‚îÄ old_fractionfield.py
    |   |   ‚îú‚îÄ‚îÄ old_polynomialring.py
    |   |   ‚îú‚îÄ‚îÄ polynomialring.py
    |   |   ‚îú‚îÄ‚îÄ pythonfinitefield.py
    |   |   ‚îú‚îÄ‚îÄ pythonintegerring.py
    |   |   ‚îú‚îÄ‚îÄ pythonrational.py
    |   |   ‚îú‚îÄ‚îÄ pythonrationalfield.py
    |   |   ‚îú‚îÄ‚îÄ quotientring.py
    |   |   ‚îú‚îÄ‚îÄ rationalfield.py
    |   |   ‚îú‚îÄ‚îÄ realfield.py
    |   |   ‚îú‚îÄ‚îÄ ring.py
    |   |   ‚îú‚îÄ‚îÄ simpledomain.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_domains.py
    |   |       ‚îú‚îÄ‚îÄ test_polynomialring.py
    |   |       ‚îî‚îÄ‚îÄ test_quotientring.py
    |   ‚îú‚îÄ‚îÄ euclidtools.py
    |   ‚îú‚îÄ‚îÄ factortools.py
    |   ‚îú‚îÄ‚îÄ fglmtools.py
    |   ‚îú‚îÄ‚îÄ fields.py
    |   ‚îú‚îÄ‚îÄ galoistools.py
    |   ‚îú‚îÄ‚îÄ groebnertools.py
    |   ‚îú‚îÄ‚îÄ heuristicgcd.py
    |   ‚îú‚îÄ‚îÄ modulargcd.py
    |   ‚îú‚îÄ‚îÄ monomials.py
    |   ‚îú‚îÄ‚îÄ multivariate_resultants.py
    |   ‚îú‚îÄ‚îÄ numberfields.py
    |   ‚îú‚îÄ‚îÄ orderings.py
    |   ‚îú‚îÄ‚îÄ orthopolys.py
    |   ‚îú‚îÄ‚îÄ partfrac.py
    |   ‚îú‚îÄ‚îÄ polyclasses.py
    |   ‚îú‚îÄ‚îÄ polyconfig.py
    |   ‚îú‚îÄ‚îÄ polyerrors.py
    |   ‚îú‚îÄ‚îÄ polyfuncs.py
    |   ‚îú‚îÄ‚îÄ polymatrix.py
    |   ‚îú‚îÄ‚îÄ polyoptions.py
    |   ‚îú‚îÄ‚îÄ polyquinticconst.py
    |   ‚îú‚îÄ‚îÄ polyroots.py
    |   ‚îú‚îÄ‚îÄ polytools.py
    |   ‚îú‚îÄ‚îÄ polyutils.py
    |   ‚îú‚îÄ‚îÄ rationaltools.py
    |   ‚îú‚îÄ‚îÄ ring_series.py
    |   ‚îú‚îÄ‚îÄ rings.py
    |   ‚îú‚îÄ‚îÄ rootisolation.py
    |   ‚îú‚îÄ‚îÄ rootoftools.py
    |   ‚îú‚îÄ‚îÄ solvers.py
    |   ‚îú‚îÄ‚îÄ specialpolys.py
    |   ‚îú‚îÄ‚îÄ sqfreetools.py
    |   ‚îú‚îÄ‚îÄ subresultants_qq_zz.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_constructor.py
    |       ‚îú‚îÄ‚îÄ test_densearith.py
    |       ‚îú‚îÄ‚îÄ test_densebasic.py
    |       ‚îú‚îÄ‚îÄ test_densetools.py
    |       ‚îú‚îÄ‚îÄ test_dispersion.py
    |       ‚îú‚îÄ‚îÄ test_distributedmodules.py
    |       ‚îú‚îÄ‚îÄ test_euclidtools.py
    |       ‚îú‚îÄ‚îÄ test_factortools.py
    |       ‚îú‚îÄ‚îÄ test_fields.py
    |       ‚îú‚îÄ‚îÄ test_galoistools.py
    |       ‚îú‚îÄ‚îÄ test_groebnertools.py
    |       ‚îú‚îÄ‚îÄ test_heuristicgcd.py
    |       ‚îú‚îÄ‚îÄ test_injections.py
    |       ‚îú‚îÄ‚îÄ test_modulargcd.py
    |       ‚îú‚îÄ‚îÄ test_monomials.py
    |       ‚îú‚îÄ‚îÄ test_multivariate_resultants.py
    |       ‚îú‚îÄ‚îÄ test_numberfields.py
    |       ‚îú‚îÄ‚îÄ test_orderings.py
    |       ‚îú‚îÄ‚îÄ test_orthopolys.py
    |       ‚îú‚îÄ‚îÄ test_partfrac.py
    |       ‚îú‚îÄ‚îÄ test_polyclasses.py
    |       ‚îú‚îÄ‚îÄ test_polyfuncs.py
    |       ‚îú‚îÄ‚îÄ test_polymatrix.py
    |       ‚îú‚îÄ‚îÄ test_polyoptions.py
    |       ‚îú‚îÄ‚îÄ test_polyroots.py
    |       ‚îú‚îÄ‚îÄ test_polytools.py
    |       ‚îú‚îÄ‚îÄ test_polyutils.py
    |       ‚îú‚îÄ‚îÄ test_pythonrational.py
    |       ‚îú‚îÄ‚îÄ test_rationaltools.py
    |       ‚îú‚îÄ‚îÄ test_ring_series.py
    |       ‚îú‚îÄ‚îÄ test_rings.py
    |       ‚îú‚îÄ‚îÄ test_rootisolation.py
    |       ‚îú‚îÄ‚îÄ test_rootoftools.py
    |       ‚îú‚îÄ‚îÄ test_solvers.py
    |       ‚îú‚îÄ‚îÄ test_specialpolys.py
    |       ‚îú‚îÄ‚îÄ test_sqfreetools.py
    |       ‚îî‚îÄ‚îÄ test_subresultants_qq_zz.py
    ‚îú‚îÄ‚îÄ printing
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ ccode.py
    |   ‚îú‚îÄ‚îÄ codeprinter.py
    |   ‚îú‚îÄ‚îÄ conventions.py
    |   ‚îú‚îÄ‚îÄ cxxcode.py
    |   ‚îú‚îÄ‚îÄ defaults.py
    |   ‚îú‚îÄ‚îÄ dot.py
    |   ‚îú‚îÄ‚îÄ fcode.py
    |   ‚îú‚îÄ‚îÄ glsl.py
    |   ‚îú‚îÄ‚îÄ gtk.py
    |   ‚îú‚îÄ‚îÄ jscode.py
    |   ‚îú‚îÄ‚îÄ julia.py
    |   ‚îú‚îÄ‚îÄ lambdarepr.py
    |   ‚îú‚îÄ‚îÄ latex.py
    |   ‚îú‚îÄ‚îÄ llvmjitcode.py
    |   ‚îú‚îÄ‚îÄ maple.py
    |   ‚îú‚îÄ‚îÄ mathematica.py
    |   ‚îú‚îÄ‚îÄ mathml.py
    |   ‚îú‚îÄ‚îÄ octave.py
    |   ‚îú‚îÄ‚îÄ precedence.py
    |   ‚îú‚îÄ‚îÄ pretty
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ pretty.py
    |   |   ‚îú‚îÄ‚îÄ pretty_symbology.py
    |   |   ‚îú‚îÄ‚îÄ stringpict.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îî‚îÄ‚îÄ test_pretty.py
    |   ‚îú‚îÄ‚îÄ preview.py
    |   ‚îú‚îÄ‚îÄ printer.py
    |   ‚îú‚îÄ‚îÄ pycode.py
    |   ‚îú‚îÄ‚îÄ python.py
    |   ‚îú‚îÄ‚îÄ rcode.py
    |   ‚îú‚îÄ‚îÄ repr.py
    |   ‚îú‚îÄ‚îÄ rust.py
    |   ‚îú‚îÄ‚îÄ str.py
    |   ‚îú‚îÄ‚îÄ tableform.py
    |   ‚îú‚îÄ‚îÄ tensorflow.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_ccode.py
    |   |   ‚îú‚îÄ‚îÄ test_codeprinter.py
    |   |   ‚îú‚îÄ‚îÄ test_conventions.py
    |   |   ‚îú‚îÄ‚îÄ test_cxxcode.py
    |   |   ‚îú‚îÄ‚îÄ test_dot.py
    |   |   ‚îú‚îÄ‚îÄ test_fcode.py
    |   |   ‚îú‚îÄ‚îÄ test_glsl.py
    |   |   ‚îú‚îÄ‚îÄ test_gtk.py
    |   |   ‚îú‚îÄ‚îÄ test_jscode.py
    |   |   ‚îú‚îÄ‚îÄ test_julia.py
    |   |   ‚îú‚îÄ‚îÄ test_lambdarepr.py
    |   |   ‚îú‚îÄ‚îÄ test_latex.py
    |   |   ‚îú‚îÄ‚îÄ test_llvmjit.py
    |   |   ‚îú‚îÄ‚îÄ test_maple.py
    |   |   ‚îú‚îÄ‚îÄ test_mathematica.py
    |   |   ‚îú‚îÄ‚îÄ test_mathml.py
    |   |   ‚îú‚îÄ‚îÄ test_numpy.py
    |   |   ‚îú‚îÄ‚îÄ test_octave.py
    |   |   ‚îú‚îÄ‚îÄ test_precedence.py
    |   |   ‚îú‚îÄ‚îÄ test_preview.py
    |   |   ‚îú‚îÄ‚îÄ test_pycode.py
    |   |   ‚îú‚îÄ‚îÄ test_python.py
    |   |   ‚îú‚îÄ‚îÄ test_rcode.py
    |   |   ‚îú‚îÄ‚îÄ test_repr.py
    |   |   ‚îú‚îÄ‚îÄ test_rust.py
    |   |   ‚îú‚îÄ‚îÄ test_str.py
    |   |   ‚îú‚îÄ‚îÄ test_tableform.py
    |   |   ‚îú‚îÄ‚îÄ test_tensorflow.py
    |   |   ‚îú‚îÄ‚îÄ test_theanocode.py
    |   |   ‚îî‚îÄ‚îÄ test_tree.py
    |   ‚îú‚îÄ‚îÄ theanocode.py
    |   ‚îî‚îÄ‚îÄ tree.py
    ‚îú‚îÄ‚îÄ release.py
    ‚îú‚îÄ‚îÄ sandbox
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ indexed_integrals.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îî‚îÄ‚îÄ test_indexed_integrals.py
    ‚îú‚îÄ‚îÄ series
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ acceleration.py
    |   ‚îú‚îÄ‚îÄ approximants.py
    |   ‚îú‚îÄ‚îÄ aseries.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ bench_limit.py
    |   |   ‚îî‚îÄ‚îÄ bench_order.py
    |   ‚îú‚îÄ‚îÄ formal.py
    |   ‚îú‚îÄ‚îÄ fourier.py
    |   ‚îú‚îÄ‚îÄ gruntz.py
    |   ‚îú‚îÄ‚îÄ kauers.py
    |   ‚îú‚îÄ‚îÄ limits.py
    |   ‚îú‚îÄ‚îÄ limitseq.py
    |   ‚îú‚îÄ‚îÄ order.py
    |   ‚îú‚îÄ‚îÄ residues.py
    |   ‚îú‚îÄ‚îÄ sequences.py
    |   ‚îú‚îÄ‚îÄ series.py
    |   ‚îú‚îÄ‚îÄ series_class.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_approximants.py
    |       ‚îú‚îÄ‚îÄ test_aseries.py
    |       ‚îú‚îÄ‚îÄ test_demidovich.py
    |       ‚îú‚îÄ‚îÄ test_formal.py
    |       ‚îú‚îÄ‚îÄ test_fourier.py
    |       ‚îú‚îÄ‚îÄ test_gruntz.py
    |       ‚îú‚îÄ‚îÄ test_kauers.py
    |       ‚îú‚îÄ‚îÄ test_limits.py
    |       ‚îú‚îÄ‚îÄ test_limitseq.py
    |       ‚îú‚îÄ‚îÄ test_lseries.py
    |       ‚îú‚îÄ‚îÄ test_nseries.py
    |       ‚îú‚îÄ‚îÄ test_order.py
    |       ‚îú‚îÄ‚îÄ test_residues.py
    |       ‚îú‚îÄ‚îÄ test_sequences.py
    |       ‚îî‚îÄ‚îÄ test_series.py
    ‚îú‚îÄ‚îÄ sets
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ conditionset.py
    |   ‚îú‚îÄ‚îÄ contains.py
    |   ‚îú‚îÄ‚îÄ fancysets.py
    |   ‚îú‚îÄ‚îÄ handlers
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ add.py
    |   |   ‚îú‚îÄ‚îÄ functions.py
    |   |   ‚îú‚îÄ‚îÄ intersection.py
    |   |   ‚îú‚îÄ‚îÄ issubset.py
    |   |   ‚îú‚îÄ‚îÄ mul.py
    |   |   ‚îú‚îÄ‚îÄ power.py
    |   |   ‚îî‚îÄ‚îÄ union.py
    |   ‚îú‚îÄ‚îÄ ordinals.py
    |   ‚îú‚îÄ‚îÄ powerset.py
    |   ‚îú‚îÄ‚îÄ setexpr.py
    |   ‚îú‚îÄ‚îÄ sets.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_conditionset.py
    |       ‚îú‚îÄ‚îÄ test_contains.py
    |       ‚îú‚îÄ‚îÄ test_fancysets.py
    |       ‚îú‚îÄ‚îÄ test_ordinals.py
    |       ‚îú‚îÄ‚îÄ test_powerset.py
    |       ‚îú‚îÄ‚îÄ test_setexpr.py
    |       ‚îî‚îÄ‚îÄ test_sets.py
    ‚îú‚îÄ‚îÄ simplify
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ combsimp.py
    |   ‚îú‚îÄ‚îÄ cse_main.py
    |   ‚îú‚îÄ‚îÄ cse_opts.py
    |   ‚îú‚îÄ‚îÄ epathtools.py
    |   ‚îú‚îÄ‚îÄ fu.py
    |   ‚îú‚îÄ‚îÄ gammasimp.py
    |   ‚îú‚îÄ‚îÄ hyperexpand.py
    |   ‚îú‚îÄ‚îÄ hyperexpand_doc.py
    |   ‚îú‚îÄ‚îÄ powsimp.py
    |   ‚îú‚îÄ‚îÄ radsimp.py
    |   ‚îú‚îÄ‚îÄ ratsimp.py
    |   ‚îú‚îÄ‚îÄ simplify.py
    |   ‚îú‚îÄ‚îÄ sqrtdenest.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_combsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_cse.py
    |   |   ‚îú‚îÄ‚îÄ test_epathtools.py
    |   |   ‚îú‚îÄ‚îÄ test_fu.py
    |   |   ‚îú‚îÄ‚îÄ test_function.py
    |   |   ‚îú‚îÄ‚îÄ test_gammasimp.py
    |   |   ‚îú‚îÄ‚îÄ test_hyperexpand.py
    |   |   ‚îú‚îÄ‚îÄ test_powsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_radsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_ratsimp.py
    |   |   ‚îú‚îÄ‚îÄ test_rewrite.py
    |   |   ‚îú‚îÄ‚îÄ test_simplify.py
    |   |   ‚îú‚îÄ‚îÄ test_sqrtdenest.py
    |   |   ‚îú‚îÄ‚îÄ test_traversaltools.py
    |   |   ‚îî‚îÄ‚îÄ test_trigsimp.py
    |   ‚îú‚îÄ‚îÄ traversaltools.py
    |   ‚îî‚îÄ‚îÄ trigsimp.py
    ‚îú‚îÄ‚îÄ solvers
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ benchmarks
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ bench_solvers.py
    |   ‚îú‚îÄ‚îÄ bivariate.py
    |   ‚îú‚îÄ‚îÄ decompogen.py
    |   ‚îú‚îÄ‚îÄ deutils.py
    |   ‚îú‚îÄ‚îÄ diophantine.py
    |   ‚îú‚îÄ‚îÄ inequalities.py
    |   ‚îú‚îÄ‚îÄ ode.py
    |   ‚îú‚îÄ‚îÄ pde.py
    |   ‚îú‚îÄ‚îÄ polysys.py
    |   ‚îú‚îÄ‚îÄ recurr.py
    |   ‚îú‚îÄ‚îÄ solvers.py
    |   ‚îú‚îÄ‚îÄ solveset.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_constantsimp.py
    |       ‚îú‚îÄ‚îÄ test_decompogen.py
    |       ‚îú‚îÄ‚îÄ test_diophantine.py
    |       ‚îú‚îÄ‚îÄ test_inequalities.py
    |       ‚îú‚îÄ‚îÄ test_numeric.py
    |       ‚îú‚îÄ‚îÄ test_ode.py
    |       ‚îú‚îÄ‚îÄ test_pde.py
    |       ‚îú‚îÄ‚îÄ test_polysys.py
    |       ‚îú‚îÄ‚îÄ test_recurr.py
    |       ‚îú‚îÄ‚îÄ test_solvers.py
    |       ‚îî‚îÄ‚îÄ test_solveset.py
    ‚îú‚îÄ‚îÄ stats
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ crv.py
    |   ‚îú‚îÄ‚îÄ crv_types.py
    |   ‚îú‚îÄ‚îÄ drv.py
    |   ‚îú‚îÄ‚îÄ drv_types.py
    |   ‚îú‚îÄ‚îÄ error_prop.py
    |   ‚îú‚îÄ‚îÄ frv.py
    |   ‚îú‚îÄ‚îÄ frv_types.py
    |   ‚îú‚îÄ‚îÄ joint_rv.py
    |   ‚îú‚îÄ‚îÄ joint_rv_types.py
    |   ‚îú‚îÄ‚îÄ random_matrix.py
    |   ‚îú‚îÄ‚îÄ random_matrix_models.py
    |   ‚îú‚îÄ‚îÄ rv.py
    |   ‚îú‚îÄ‚îÄ rv_interface.py
    |   ‚îú‚îÄ‚îÄ stochastic_process.py
    |   ‚îú‚îÄ‚îÄ stochastic_process_types.py
    |   ‚îú‚îÄ‚îÄ symbolic_probability.py
    |   ‚îî‚îÄ‚îÄ tests
    |       ‚îú‚îÄ‚îÄ __init__.py
    |       ‚îú‚îÄ‚îÄ test_continuous_rv.py
    |       ‚îú‚îÄ‚îÄ test_discrete_rv.py
    |       ‚îú‚îÄ‚îÄ test_error_prop.py
    |       ‚îú‚îÄ‚îÄ test_finite_rv.py
    |       ‚îú‚îÄ‚îÄ test_joint_rv.py
    |       ‚îú‚îÄ‚îÄ test_mix.py
    |       ‚îú‚îÄ‚îÄ test_random_matrix.py
    |       ‚îú‚îÄ‚îÄ test_rv.py
    |       ‚îú‚îÄ‚îÄ test_stochastic_process.py
    |       ‚îî‚îÄ‚îÄ test_symbolic_probability.py
    ‚îú‚îÄ‚îÄ strategies
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ branch
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ core.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îú‚îÄ‚îÄ test_core.py
    |   |   |   ‚îú‚îÄ‚îÄ test_tools.py
    |   |   |   ‚îî‚îÄ‚îÄ test_traverse.py
    |   |   ‚îú‚îÄ‚îÄ tools.py
    |   |   ‚îî‚îÄ‚îÄ traverse.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ rl.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_core.py
    |   |   ‚îú‚îÄ‚îÄ test_rl.py
    |   |   ‚îú‚îÄ‚îÄ test_strat.py
    |   |   ‚îú‚îÄ‚îÄ test_tools.py
    |   |   ‚îú‚îÄ‚îÄ test_traverse.py
    |   |   ‚îî‚îÄ‚îÄ test_tree.py
    |   ‚îú‚îÄ‚îÄ tools.py
    |   ‚îú‚îÄ‚îÄ traverse.py
    |   ‚îú‚îÄ‚îÄ tree.py
    |   ‚îî‚îÄ‚îÄ util.py
    ‚îú‚îÄ‚îÄ tensor
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ array
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ array_comprehension.py
    |   |   ‚îú‚îÄ‚îÄ arrayop.py
    |   |   ‚îú‚îÄ‚îÄ dense_ndim_array.py
    |   |   ‚îú‚îÄ‚îÄ mutable_ndim_array.py
    |   |   ‚îú‚îÄ‚îÄ ndim_array.py
    |   |   ‚îú‚îÄ‚îÄ sparse_ndim_array.py
    |   |   ‚îî‚îÄ‚îÄ tests
    |   |       ‚îú‚îÄ‚îÄ __init__.py
    |   |       ‚îú‚îÄ‚îÄ test_array_comprehension.py
    |   |       ‚îú‚îÄ‚îÄ test_arrayop.py
    |   |       ‚îú‚îÄ‚îÄ test_immutable_ndim_array.py
    |   |       ‚îú‚îÄ‚îÄ test_mutable_ndim_array.py
    |   |       ‚îú‚îÄ‚îÄ test_ndim_array.py
    |   |       ‚îî‚îÄ‚îÄ test_ndim_array_conversions.py
    |   ‚îú‚îÄ‚îÄ functions.py
    |   ‚îú‚îÄ‚îÄ index_methods.py
    |   ‚îú‚îÄ‚îÄ indexed.py
    |   ‚îú‚îÄ‚îÄ tensor.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_functions.py
    |   |   ‚îú‚îÄ‚îÄ test_index_methods.py
    |   |   ‚îú‚îÄ‚îÄ test_indexed.py
    |   |   ‚îú‚îÄ‚îÄ test_tensor.py
    |   |   ‚îú‚îÄ‚îÄ test_tensor_element.py
    |   |   ‚îî‚îÄ‚îÄ test_tensor_operators.py
    |   ‚îî‚îÄ‚îÄ toperators.py
    ‚îú‚îÄ‚îÄ this.py
    ‚îú‚îÄ‚îÄ unify
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ core.py
    |   ‚îú‚îÄ‚îÄ rewrite.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ test_rewrite.py
    |   |   ‚îú‚îÄ‚îÄ test_sympy.py
    |   |   ‚îî‚îÄ‚îÄ test_unify.py
    |   ‚îî‚îÄ‚îÄ usympy.py
    ‚îú‚îÄ‚îÄ utilities
    |   ‚îú‚îÄ‚îÄ __init__.py
    |   ‚îú‚îÄ‚îÄ _compilation
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ availability.py
    |   |   ‚îú‚îÄ‚îÄ compilation.py
    |   |   ‚îú‚îÄ‚îÄ runners.py
    |   |   ‚îú‚îÄ‚îÄ tests
    |   |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   |   ‚îî‚îÄ‚îÄ test_compilation.py
    |   |   ‚îî‚îÄ‚îÄ util.py
    |   ‚îú‚îÄ‚îÄ autowrap.py
    |   ‚îú‚îÄ‚îÄ benchmarking.py
    |   ‚îú‚îÄ‚îÄ codegen.py
    |   ‚îú‚îÄ‚îÄ decorator.py
    |   ‚îú‚îÄ‚îÄ enumerative.py
    |   ‚îú‚îÄ‚îÄ exceptions.py
    |   ‚îú‚îÄ‚îÄ iterables.py
    |   ‚îú‚îÄ‚îÄ lambdify.py
    |   ‚îú‚îÄ‚îÄ magic.py
    |   ‚îú‚îÄ‚îÄ matchpy_connector.py
    |   ‚îú‚îÄ‚îÄ mathml
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îî‚îÄ‚îÄ data
    |   ‚îú‚îÄ‚îÄ memoization.py
    |   ‚îú‚îÄ‚îÄ misc.py
    |   ‚îú‚îÄ‚îÄ pkgdata.py
    |   ‚îú‚îÄ‚îÄ pytest.py
    |   ‚îú‚îÄ‚îÄ quality_unicode.py
    |   ‚îú‚îÄ‚îÄ randtest.py
    |   ‚îú‚îÄ‚îÄ runtests.py
    |   ‚îú‚îÄ‚îÄ source.py
    |   ‚îú‚îÄ‚îÄ tests
    |   |   ‚îú‚îÄ‚îÄ __init__.py
    |   |   ‚îú‚îÄ‚îÄ diagnose_imports.py
    |   |   ‚îú‚îÄ‚îÄ test_autowrap.py
    |   |   ‚îú‚îÄ‚îÄ test_code_quality.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen_julia.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen_octave.py
    |   |   ‚îú‚îÄ‚îÄ test_codegen_rust.py
    |   |   ‚îú‚îÄ‚îÄ test_decorator.py
    |   |   ‚îú‚îÄ‚îÄ test_enumerative.py
    |   |   ‚îú‚îÄ‚îÄ test_iterables.py
    |   |   ‚îú‚îÄ‚îÄ test_lambdify.py
    |   |   ‚îú‚îÄ‚îÄ test_misc.py
    |   |   ‚îú‚îÄ‚îÄ test_module_imports.py
    |   |   ‚îú‚îÄ‚îÄ test_pickling.py
    |   |   ‚îú‚îÄ‚îÄ test_pytest.py
    |   |   ‚îú‚îÄ‚îÄ test_source.py
    |   |   ‚îú‚îÄ‚îÄ test_timeutils.py
    |   |   ‚îî‚îÄ‚îÄ test_wester.py
    |   ‚îú‚îÄ‚îÄ timeutils.py
    |   ‚îî‚îÄ‚îÄ tmpfiles.py
    ‚îî‚îÄ‚îÄ vector
        ‚îú‚îÄ‚îÄ __init__.py
        ‚îú‚îÄ‚îÄ basisdependent.py
        ‚îú‚îÄ‚îÄ coordsysrect.py
        ‚îú‚îÄ‚îÄ deloperator.py
        ‚îú‚îÄ‚îÄ dyadic.py
        ‚îú‚îÄ‚îÄ functions.py
        ‚îú‚îÄ‚îÄ operators.py
        ‚îú‚îÄ‚îÄ orienters.py
        ‚îú‚îÄ‚îÄ point.py
        ‚îú‚îÄ‚îÄ scalar.py
        ‚îú‚îÄ‚îÄ tests
        |   ‚îú‚îÄ‚îÄ __init__.py
        |   ‚îú‚îÄ‚îÄ test_coordsysrect.py
        |   ‚îú‚îÄ‚îÄ test_dyadic.py
        |   ‚îú‚îÄ‚îÄ test_field_functions.py
        |   ‚îú‚îÄ‚îÄ test_functions.py
        |   ‚îú‚îÄ‚îÄ test_operators.py
        |   ‚îú‚îÄ‚îÄ test_printing.py
        |   ‚îî‚îÄ‚îÄ test_vector.py
        ‚îî‚îÄ‚îÄ vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
`solveset` raises `NotImplementedError` instead of returning `ConditionSet`

Issue description: 
The problem is
```julia
In [10]: Eq(n*cos(n) - 3*sin(n), 0).as_set()                                                                                                                  
---------------------------------------------------------------------------
NotImplementedError
```
Here `solveset` raises `NotImplementedError` but probably a `ConditionSet` should be returned by `solveset` instead. The obvious result of `as_set()` here is
```julia
In [11]: ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)                                                                                                   
Out[11]: {n | n ‚àä ‚Ñù ‚àß n‚ãÖcos(n) - 3‚ãÖsin(n) = 0}
```

_Originally posted by @oscarbenjamin in https://github.com/sympy/sympy/pull/17771_

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/solvers/tests/test_solveset.py
Line number range: 1 - 2288
Content:
1. from sympy.core.containers import Tuple
2. from sympy.core.function import (Function, Lambda, nfloat)
3. from sympy.core.mod import Mod
4. from sympy.core.numbers import (E, I, Rational, oo, pi)
5. from sympy.core.relational import (Eq, Gt,
6.     Ne)
7. from sympy.core.singleton import S
8. from sympy.core.symbol import (Dummy, Symbol, symbols)
9. from sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)
10. from sympy.functions.elementary.exponential import (LambertW, exp, log)
11. from sympy.functions.elementary.hyperbolic import (HyperbolicFunction,
12.     atanh, sinh, tanh, cosh, sech, coth)
13. from sympy.functions.elementary.miscellaneous import sqrt, Min, Max
14. from sympy.functions.elementary.piecewise import Piecewise
15. from sympy.functions.elementary.trigonometric import (
16.     TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,
17.     cos, cot, csc, sec, sin, tan)
18. from sympy.functions.special.error_functions import (erf, erfc,
19.     erfcinv, erfinv)
20. from sympy.logic.boolalg import And
21. from sympy.matrices.dense import MutableDenseMatrix as Matrix
22. from sympy.matrices.immutable import ImmutableDenseMatrix
23. from sympy.polys.polytools import Poly
24. from sympy.polys.rootoftools import CRootOf
25. from sympy.sets.contains import Contains
26. from sympy.sets.conditionset import ConditionSet
27. from sympy.sets.fancysets import ImageSet
28. from sympy.sets.sets import (Complement, EmptySet, FiniteSet,
29.     Intersection, Interval, Union, imageset, ProductSet)
30. from sympy.tensor.indexed import Indexed
31. from sympy.utilities.iterables import numbered_symbols
32. 
33. from sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,
34.     nocache_fail)
35. from sympy.utilities.randtest import verify_numerically as tn
36. from sympy.physics.units import cm
37. 
38. from sympy.solvers.solveset import (
39.     solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,
40.     linsolve, _is_function_class_equation, invert_real, invert_complex,
41.     solveset, solve_decomposition, substitution, nonlinsolve, solvify,
42.     _is_finite_with_finite_vars, _transolve, _is_exponential,
43.     _solve_exponential, _is_logarithmic,
44.     _solve_logarithm, _term_factors, _is_modular)
45. 
46. 
47. a = Symbol('a', real=True)
48. b = Symbol('b', real=True)
49. c = Symbol('c', real=True)
50. x = Symbol('x', real=True)
51. y = Symbol('y', real=True)
52. z = Symbol('z', real=True)
53. q = Symbol('q', real=True)
54. m = Symbol('m', real=True)
55. n = Symbol('n', real=True)
56. 
57. 
58. def test_invert_real():
59.     x = Symbol('x', real=True)
60.     y = Symbol('y')
61.     n = Symbol('n')
62. 
63.     def ireal(x, s=S.Reals):
64.         return Intersection(s, x)
65. 
66.     # issue 14223
67.     assert invert_real(x, 0, x, Interval(1, 2)) == (x, S.EmptySet)
68. 
69.     assert invert_real(exp(x), y, x) == (x, ireal(FiniteSet(log(y))))
70. 
71.     y = Symbol('y', positive=True)
72.     n = Symbol('n', real=True)
73.     assert invert_real(x + 3, y, x) == (x, FiniteSet(y - 3))
74.     assert invert_real(x*3, y, x) == (x, FiniteSet(y / 3))
75. 
76.     assert invert_real(exp(x), y, x) == (x, FiniteSet(log(y)))
77.     assert invert_real(exp(3*x), y, x) == (x, FiniteSet(log(y) / 3))
78.     assert invert_real(exp(x + 3), y, x) == (x, FiniteSet(log(y) - 3))
79. 
80.     assert invert_real(exp(x) + 3, y, x) == (x, ireal(FiniteSet(log(y - 3))))
81.     assert invert_real(exp(x)*3, y, x) == (x, FiniteSet(log(y / 3)))
82. 
83.     assert invert_real(log(x), y, x) == (x, FiniteSet(exp(y)))
84.     assert invert_real(log(3*x), y, x) == (x, FiniteSet(exp(y) / 3))
85.     assert invert_real(log(x + 3), y, x) == (x, FiniteSet(exp(y) - 3))
86. 
87.     assert invert_real(Abs(x), y, x) == (x, FiniteSet(y, -y))
88. 
89.     assert invert_real(2**x, y, x) == (x, FiniteSet(log(y)/log(2)))
90.     assert invert_real(2**exp(x), y, x) == (x, ireal(FiniteSet(log(log(y)/log(2)))))
91. 
92.     assert invert_real(x**2, y, x) == (x, FiniteSet(sqrt(y), -sqrt(y)))
93.     assert invert_real(x**S.Half, y, x) == (x, FiniteSet(y**2))
94. 
95.     raises(ValueError, lambda: invert_real(x, x, x))
96.     raises(ValueError, lambda: invert_real(x**pi, y, x))
97.     raises(ValueError, lambda: invert_real(S.One, y, x))
98. 
99.     assert invert_real(x**31 + x, y, x) == (x**31 + x, FiniteSet(y))
100. 
101.     lhs = x**31 + x
102.     base_values =  FiniteSet(y - 1, -y - 1)
103.     assert invert_real(Abs(x**31 + x + 1), y, x) == (lhs, base_values)
104. 
105.     assert invert_real(sin(x), y, x) == \
106.         (x, imageset(Lambda(n, n*pi + (-1)**n*asin(y)), S.Integers))
107. 
108.     assert invert_real(sin(exp(x)), y, x) == \
109.         (x, imageset(Lambda(n, log((-1)**n*asin(y) + n*pi)), S.Integers))
110. 
111.     assert invert_real(csc(x), y, x) == \
112.         (x, imageset(Lambda(n, n*pi + (-1)**n*acsc(y)), S.Integers))
113. 
114.     assert invert_real(csc(exp(x)), y, x) == \
115.         (x, imageset(Lambda(n, log((-1)**n*acsc(y) + n*pi)), S.Integers))
116. 
117.     assert invert_real(cos(x), y, x) == \
118.         (x, Union(imageset(Lambda(n, 2*n*pi + acos(y)), S.Integers), \
119.                 imageset(Lambda(n, 2*n*pi - acos(y)), S.Integers)))
120. 
121.     assert invert_real(cos(exp(x)), y, x) == \
122.         (x, Union(imageset(Lambda(n, log(2*n*pi + acos(y))), S.Integers), \
123.                 imageset(Lambda(n, log(2*n*pi - acos(y))), S.Integers)))
124. 
125.     assert invert_real(sec(x), y, x) == \
126.         (x, Union(imageset(Lambda(n, 2*n*pi + asec(y)), S.Integers), \
127.                 imageset(Lambda(n, 2*n*pi - asec(y)), S.Integers)))
128. 
129.     assert invert_real(sec(exp(x)), y, x) == \
130.         (x, Union(imageset(Lambda(n, log(2*n*pi + asec(y))), S.Integers), \
131.                 imageset(Lambda(n, log(2*n*pi - asec(y))), S.Integers)))
132. 
133.     assert invert_real(tan(x), y, x) == \
134.         (x, imageset(Lambda(n, n*pi + atan(y)), S.Integers))
135. 
136.     assert invert_real(tan(exp(x)), y, x) == \
137.         (x, imageset(Lambda(n, log(n*pi + atan(y))), S.Integers))
138. 
139.     assert invert_real(cot(x), y, x) == \
140.         (x, imageset(Lambda(n, n*pi + acot(y)), S.Integers))
141. 
142.     assert invert_real(cot(exp(x)), y, x) == \
143.         (x, imageset(Lambda(n, log(n*pi + acot(y))), S.Integers))
144. 
145.     assert invert_real(tan(tan(x)), y, x) == \
146.         (tan(x), imageset(Lambda(n, n*pi + atan(y)), S.Integers))
147. 
148.     x = Symbol('x', positive=True)
149.     assert invert_real(x**pi, y, x) == (x, FiniteSet(y**(1/pi)))
150. 
151. 
152. def test_invert_complex():
153.     assert invert_complex(x + 3, y, x) == (x, FiniteSet(y - 3))
154.     assert invert_complex(x*3, y, x) == (x, FiniteSet(y / 3))
155. 
156.     assert invert_complex(exp(x), y, x) == \
157.         (x, imageset(Lambda(n, I*(2*pi*n + arg(y)) + log(Abs(y))), S.Integers))
158. 
159.     assert invert_complex(log(x), y, x) == (x, FiniteSet(exp(y)))
160. 
161.     raises(ValueError, lambda: invert_real(1, y, x))
162.     raises(ValueError, lambda: invert_complex(x, x, x))
163.     raises(ValueError, lambda: invert_complex(x, x, 1))
164. 
165.     # https://github.com/skirpichev/omg/issues/16
166.     assert invert_complex(sinh(x), 0, x) != (x, FiniteSet(0))
167. 
168. 
169. def test_domain_check():
170.     assert domain_check(1/(1 + (1/(x+1))**2), x, -1) is False
171.     assert domain_check(x**2, x, 0) is True
172.     assert domain_check(x, x, oo) is False
173.     assert domain_check(0, x, oo) is False
174. 
175. 
176. def test_issue_11536():
177.     assert solveset(0**x - 100, x, S.Reals) == S.EmptySet
178.     assert solveset(0**x - 1, x, S.Reals) == FiniteSet(0)
179. 
180. 
181. def test_issue_17479():
182.     import sympy as sb
183.     from sympy.solvers.solveset import nonlinsolve
184.     x, y, z = sb.symbols("x, y, z")
185.     f = (x**2 + y**2)**2 + (x**2 + z**2)**2 - 2*(2*x**2 + y**2 + z**2)
186.     fx = sb.diff(f, x)
187.     fy = sb.diff(f, y)
188.     fz = sb.diff(f, z)
189.     sol = nonlinsolve([fx, fy, fz], [x, y, z])
190.     # FIXME: This previously gave 18 solutions and now gives 20 due to fixes
191.     # in the handling of intersection of FiniteSets or possibly a small change
192.     # to ImageSet._contains. However Using expand I can turn this into 16
193.     # solutions either way:
194.     #
195.     #    >>> len(FiniteSet(*(Tuple(*(expand(w) for w in s)) for s in sol)))
196.     #    16
197.     #
198.     assert len(sol) == 20
199. 
200. 
201. def test_is_function_class_equation():
202.     from sympy.abc import x, a
203.     assert _is_function_class_equation(TrigonometricFunction,
204.                                        tan(x), x) is True
205.     assert _is_function_class_equation(TrigonometricFunction,
206.                                        tan(x) - 1, x) is True
207.     assert _is_function_class_equation(TrigonometricFunction,
208.                                        tan(x) + sin(x), x) is True
209.     assert _is_function_class_equation(TrigonometricFunction,
210.                                        tan(x) + sin(x) - a, x) is True
211.     assert _is_function_class_equation(TrigonometricFunction,
212.                                        sin(x)*tan(x) + sin(x), x) is True
213.     assert _is_function_class_equation(TrigonometricFunction,
214.                                        sin(x)*tan(x + a) + sin(x), x) is True
215.     assert _is_function_class_equation(TrigonometricFunction,
216.                                        sin(x)*tan(x*a) + sin(x), x) is True
217.     assert _is_function_class_equation(TrigonometricFunction,
218.                                        a*tan(x) - 1, x) is True
219.     assert _is_function_class_equation(TrigonometricFunction,
220.                                        tan(x)**2 + sin(x) - 1, x) is True
221.     assert _is_function_class_equation(TrigonometricFunction,
222.                                        tan(x) + x, x) is False
223.     assert _is_function_class_equation(TrigonometricFunction,
224.                                        tan(x**2), x) is False
225.     assert _is_function_class_equation(TrigonometricFunction,
226.                                        tan(x**2) + sin(x), x) is False
227.     assert _is_function_class_equation(TrigonometricFunction,
228.                                        tan(x)**sin(x), x) is False
229.     assert _is_function_class_equation(TrigonometricFunction,
230.                                        tan(sin(x)) + sin(x), x) is False
231.     assert _is_function_class_equation(HyperbolicFunction,
232.                                        tanh(x), x) is True
233.     assert _is_function_class_equation(HyperbolicFunction,
234.                                        tanh(x) - 1, x) is True
235.     assert _is_function_class_equation(HyperbolicFunction,
236.                                        tanh(x) + sinh(x), x) is True
237.     assert _is_function_class_equation(HyperbolicFunction,
238.                                        tanh(x) + sinh(x) - a, x) is True
239.     assert _is_function_class_equation(HyperbolicFunction,
240.                                        sinh(x)*tanh(x) + sinh(x), x) is True
241.     assert _is_function_class_equation(HyperbolicFunction,
242.                                        sinh(x)*tanh(x + a) + sinh(x), x) is True
243.     assert _is_function_class_equation(HyperbolicFunction,
244.                                        sinh(x)*tanh(x*a) + sinh(x), x) is True
245.     assert _is_function_class_equation(HyperbolicFunction,
246.                                        a*tanh(x) - 1, x) is True
247.     assert _is_function_class_equation(HyperbolicFunction,
248.                                        tanh(x)**2 + sinh(x) - 1, x) is True
249.     assert _is_function_class_equation(HyperbolicFunction,
250.                                        tanh(x) + x, x) is False
251.     assert _is_function_class_equation(HyperbolicFunction,
252.                                        tanh(x**2), x) is False
253.     assert _is_function_class_equation(HyperbolicFunction,
254.                                        tanh(x**2) + sinh(x), x) is False
255.     assert _is_function_class_equation(HyperbolicFunction,
256.                                        tanh(x)**sinh(x), x) is False
257.     assert _is_function_class_equation(HyperbolicFunction,
258.                                        tanh(sinh(x)) + sinh(x), x) is False
259. 
260. 
261. def test_garbage_input():
262.     raises(ValueError, lambda: solveset_real([x], x))
263.     assert solveset_real(x, 1) == S.EmptySet
264.     assert solveset_real(x - 1, 1) == FiniteSet(x)
265.     assert solveset_real(x, pi) == S.EmptySet
266.     assert solveset_real(x, x**2) == S.EmptySet
267. 
268.     raises(ValueError, lambda: solveset_complex([x], x))
269.     assert solveset_complex(x, pi) == S.EmptySet
270. 
271.     raises(ValueError, lambda: solveset((x, y), x))
272.     raises(ValueError, lambda: solveset(x + 1, S.Reals))
273.     raises(ValueError, lambda: solveset(x + 1, x, 2))
274. 
275. 
276. def test_solve_mul():
277.     assert solveset_real((a*x + b)*(exp(x) - 3), x) == \
278.         Union({log(3)}, Intersection({-b/a}, S.Reals))
279.     anz = Symbol('anz', nonzero=True)
280.     assert solveset_real((anz*x + b)*(exp(x) - 3), x) == \
281.         FiniteSet(-b/anz, log(3))
282.     assert solveset_real((2*x + 8)*(8 + exp(x)), x) == FiniteSet(S(-4))
283.     assert solveset_real(x/log(x), x) == EmptySet()
284. 
285. 
286. def test_solve_invert():
287.     assert solveset_real(exp(x) - 3, x) == FiniteSet(log(3))
288.     assert solveset_real(log(x) - 3, x) == FiniteSet(exp(3))
289. 
290.     assert solveset_real(3**(x + 2), x) == FiniteSet()
291.     assert solveset_real(3**(2 - x), x) == FiniteSet()
292. 
293.     assert solveset_real(y - b*exp(a/x), x) == Intersection(
294.         S.Reals, FiniteSet(a/log(y/b)))
295. 
296.     # issue 4504
297.     assert solveset_real(2**x - 10, x) == FiniteSet(1 + log(5)/log(2))
298. 
299. 
300. def test_errorinverses():
301.     assert solveset_real(erf(x) - S.Half, x) == \
302.         FiniteSet(erfinv(S.Half))
303.     assert solveset_real(erfinv(x) - 2, x) == \
304.         FiniteSet(erf(2))
305.     assert solveset_real(erfc(x) - S.One, x) == \
306.         FiniteSet(erfcinv(S.One))
307.     assert solveset_real(erfcinv(x) - 2, x) == FiniteSet(erfc(2))
308. 
309. 
310. def test_solve_polynomial():
311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))
312. 
313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)
314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)
315. 
316.     a11, a12, a21, a22, b1, b2 = symbols('a11, a12, a21, a22, b1, b2')
317. 
318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(
319.         -2 + 3 ** S.Half,
320.         S(4),
321.         -2 - 3 ** S.Half)
322. 
323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)
324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)
325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)
326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)
327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1
328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0
329. 
330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,
331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)
332. 
333. 
334. def test_return_root_of():
335.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20
336.     s = list(solveset_complex(f, x))
337.     for root in s:
338.         assert root.func == CRootOf
339. 
340.     # if one uses solve to get the roots of a polynomial that has a CRootOf
341.     # solution, make sure that the use of nfloat during the solve process
342.     # doesn't fail. Note: if you want numerical solutions to a polynomial
343.     # it is *much* faster to use nroots to get them than to solve the
344.     # equation only to get CRootOf solutions which are then numerically
345.     # evaluated. So for eq = x**5 + 3*x + 7 do Poly(eq).nroots() rather
346.     # than [i.n() for i in solve(eq)] to get the numerical roots of eq.
347.     assert nfloat(list(solveset_complex(x**5 + 3*x**3 + 7, x))[0],
348.                   exponent=False) == CRootOf(x**5 + 3*x**3 + 7, 0).n()
349. 
350.     sol = list(solveset_complex(x**6 - 2*x + 2, x))
351.     assert all(isinstance(i, CRootOf) for i in sol) and len(sol) == 6
352. 
353.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20
354.     s = list(solveset_complex(f, x))
355.     for root in s:
356.         assert root.func == CRootOf
357. 
358.     s = x**5 + 4*x**3 + 3*x**2 + Rational(7, 4)
359.     assert solveset_complex(s, x) == \
360.         FiniteSet(*Poly(s*4, domain='ZZ').all_roots())
361. 
362.     # Refer issue #7876
363.     eq = x*(x - 1)**2*(x + 1)*(x**6 - x + 1)
364.     assert solveset_complex(eq, x) == \
365.         FiniteSet(-1, 0, 1, CRootOf(x**6 - x + 1, 0),
366.                        CRootOf(x**6 - x + 1, 1),
367.                        CRootOf(x**6 - x + 1, 2),
368.                        CRootOf(x**6 - x + 1, 3),
369.                        CRootOf(x**6 - x + 1, 4),
370.                        CRootOf(x**6 - x + 1, 5))
371. 
372. 
373. def test__has_rational_power():
374.     from sympy.solvers.solveset import _has_rational_power
375.     assert _has_rational_power(sqrt(2), x)[0] is False
376.     assert _has_rational_power(x*sqrt(2), x)[0] is False
377. 
378.     assert _has_rational_power(x**2*sqrt(x), x) == (True, 2)
379.     assert _has_rational_power(sqrt(2)*x**Rational(1, 3), x) == (True, 3)
380.     assert _has_rational_power(sqrt(x)*x**Rational(1, 3), x) == (True, 6)
381. 
382. 
383. def test_solveset_sqrt_1():
384.     assert solveset_real(sqrt(5*x + 6) - 2 - x, x) == \
385.         FiniteSet(-S.One, S(2))
386.     assert solveset_real(sqrt(x - 1) - x + 7, x) == FiniteSet(10)
387.     assert solveset_real(sqrt(x - 2) - 5, x) == FiniteSet(27)
388.     assert solveset_real(sqrt(x) - 2 - 5, x) == FiniteSet(49)
389.     assert solveset_real(sqrt(x**3), x) == FiniteSet(0)
390.     assert solveset_real(sqrt(x - 1), x) == FiniteSet(1)
391. 
392. 
393. def test_solveset_sqrt_2():
394.     # http://tutorial.math.lamar.edu/Classes/Alg/SolveRadicalEqns.aspx#Solve_Rad_Ex2_a
395.     assert solveset_real(sqrt(2*x - 1) - sqrt(x - 4) - 2, x) == \
396.         FiniteSet(S(5), S(13))
397.     assert solveset_real(sqrt(x + 7) + 2 - sqrt(3 - x), x) == \
398.         FiniteSet(-6)
399. 
400.     # http://www.purplemath.com/modules/solverad.htm
401.     assert solveset_real(sqrt(17*x - sqrt(x**2 - 5)) - 7, x) == \
402.         FiniteSet(3)
403. 
404.     eq = x + 1 - (x**4 + 4*x**3 - x)**Rational(1, 4)
405.     assert solveset_real(eq, x) == FiniteSet(Rational(-1, 2), Rational(-1, 3))
406. 
407.     eq = sqrt(2*x + 9) - sqrt(x + 1) - sqrt(x + 4)
408.     assert solveset_real(eq, x) == FiniteSet(0)
409. 
410.     eq = sqrt(x + 4) + sqrt(2*x - 1) - 3*sqrt(x - 1)
411.     assert solveset_real(eq, x) == FiniteSet(5)
412. 
413.     eq = sqrt(x)*sqrt(x - 7) - 12
414.     assert solveset_real(eq, x) == FiniteSet(16)
415. 
416.     eq = sqrt(x - 3) + sqrt(x) - 3
417.     assert solveset_real(eq, x) == FiniteSet(4)
418. 
419.     eq = sqrt(2*x**2 - 7) - (3 - x)
420.     assert solveset_real(eq, x) == FiniteSet(-S(8), S(2))
421. 
422.     # others
423.     eq = sqrt(9*x**2 + 4) - (3*x + 2)
424.     assert solveset_real(eq, x) == FiniteSet(0)
425. 
426.     assert solveset_real(sqrt(x - 3) - sqrt(x) - 3, x) == FiniteSet()
427. 
428.     eq = (2*x - 5)**Rational(1, 3) - 3
429.     assert solveset_real(eq, x) == FiniteSet(16)
430. 
431.     assert solveset_real(sqrt(x) + sqrt(sqrt(x)) - 4, x) == \
432.         FiniteSet((Rational(-1, 2) + sqrt(17)/2)**4)
433. 
434.     eq = sqrt(x) - sqrt(x - 1) + sqrt(sqrt(x))
435.     assert solveset_real(eq, x) == FiniteSet()
436. 
437.     eq = (sqrt(x) + sqrt(x + 1) + sqrt(1 - x) - 6*sqrt(5)/5)
438.     ans = solveset_real(eq, x)
439.     ra = S('''-1484/375 - 4*(-1/2 + sqrt(3)*I/2)*(-12459439/52734375 +
440.     114*sqrt(12657)/78125)**(1/3) - 172564/(140625*(-1/2 +
441.     sqrt(3)*I/2)*(-12459439/52734375 + 114*sqrt(12657)/78125)**(1/3))''')
442.     rb = Rational(4, 5)
443.     assert all(abs(eq.subs(x, i).n()) < 1e-10 for i in (ra, rb)) and \
444.         len(ans) == 2 and \
445.         set([i.n(chop=True) for i in ans]) == \
446.         set([i.n(chop=True) for i in (ra, rb)])
447. 
448.     assert solveset_real(sqrt(x) + x**Rational(1, 3) +
449.                                  x**Rational(1, 4), x) == FiniteSet(0)
450. 
451.     assert solveset_real(x/sqrt(x**2 + 1), x) == FiniteSet(0)
452. 
453.     eq = (x - y**3)/((y**2)*sqrt(1 - y**2))
454.     assert solveset_real(eq, x) == FiniteSet(y**3)
455. 
456.     # issue 4497
457.     assert solveset_real(1/(5 + x)**Rational(1, 5) - 9, x) == \
458.         FiniteSet(Rational(-295244, 59049))
459. 
460. 
461. @XFAIL
462. def test_solve_sqrt_fail():
463.     # this only works if we check real_root(eq.subs(x, Rational(1, 3)))
464.     # but checksol doesn't work like that
465.     eq = (x**3 - 3*x**2)**Rational(1, 3) + 1 - x
466.     assert solveset_real(eq, x) == FiniteSet(Rational(1, 3))
467. 
468. 
469. @slow
470. def test_solve_sqrt_3():
471.     R = Symbol('R')
472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)
473.     sol = solveset_complex(eq, R)
474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,
475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +
476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +
477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +
478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -
479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]
481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +
483.             Rational(5, 3) +
484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -
485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +
486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]
487. 
488.     assert sol._args[0] == FiniteSet(*fset)
489.     assert sol._args[1] == ConditionSet(
490.         R,
491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),
492.         FiniteSet(*cset))
493. 
494.     # the number of real roots will depend on the value of m: for m=1 there are 4
495.     # and for m=-1 there are none.
496.     eq = -sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) + sqrt((-m**2/2 - sqrt(
497.         4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m - sqrt(
498.             4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2)
499.     unsolved_object = ConditionSet(q, Eq(sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) -
500.         sqrt((-m**2/2 - sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m -
501.         sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2), 0), S.Reals)
502.     assert solveset_real(eq, q) == unsolved_object
503. 
504. 
505. def test_solve_polynomial_symbolic_param():
506.     assert solveset_complex((x**2 - 1)**2 - a, x) == \
507.         FiniteSet(sqrt(1 + sqrt(a)), -sqrt(1 + sqrt(a)),
508.                   sqrt(1 - sqrt(a)), -sqrt(1 - sqrt(a)))
509. 
510.     # issue 4507
511.     assert solveset_complex(y - b/(1 + a*x), x) == \
512.         FiniteSet((b/y - 1)/a) - FiniteSet(-1/a)
513. 
514.     # issue 4508
515.     assert solveset_complex(y - b*x/(a + x), x) == \
516.         FiniteSet(-a*y/(y - b)) - FiniteSet(-a)
517. 
518. 
519. def test_solve_rational():
520.     assert solveset_real(1/x + 1, x) == FiniteSet(-S.One)
521.     assert solveset_real(1/exp(x) - 1, x) == FiniteSet(0)
522.     assert solveset_real(x*(1 - 5/x), x) == FiniteSet(5)
523.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)
524.     assert solveset_real((x**2/(7 - x)).diff(x), x) == \
525.         FiniteSet(S.Zero, S(14))
526. 
527. 
528. def test_solveset_real_gen_is_pow():
529.     assert solveset_real(sqrt(1) + 1, x) == EmptySet()
530. 
531. 
532. def test_no_sol():
533.     assert solveset(1 - oo*x) == EmptySet()
534.     assert solveset(oo*x, x) == EmptySet()
535.     assert solveset(oo*x - oo, x) == EmptySet()
536.     assert solveset_real(4, x) == EmptySet()
537.     assert solveset_real(exp(x), x) == EmptySet()
538.     assert solveset_real(x**2 + 1, x) == EmptySet()
539.     assert solveset_real(-3*a/sqrt(x), x) == EmptySet()
540.     assert solveset_real(1/x, x) == EmptySet()
541.     assert solveset_real(-(1 + x)/(2 + x)**2 + 1/(2 + x), x) == \
542.         EmptySet()
543. 
544. 
545. def test_sol_zero_real():
546.     assert solveset_real(0, x) == S.Reals
547.     assert solveset(0, x, Interval(1, 2)) == Interval(1, 2)
548.     assert solveset_real(-x**2 - 2*x + (x + 1)**2 - 1, x) == S.Reals
549. 
550. 
551. def test_no_sol_rational_extragenous():
552.     assert solveset_real((x/(x + 1) + 3)**(-2), x) == EmptySet()
553.     assert solveset_real((x - 1)/(1 + 1/(x - 1)), x) == EmptySet()
554. 
555. 
556. def test_solve_polynomial_cv_1a():
557.     """
558.     Test for solving on equations that can be converted to
559.     a polynomial equation using the change of variable y -> x**Rational(p, q)
560.     """
561.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)
562.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)
563.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)
564.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)
565.     assert solveset_real(x*(x**(S.One / 3) - 3), x) == \
566.         FiniteSet(S.Zero, S(27))
567. 
568. 
569. def test_solveset_real_rational():
570.     """Test solveset_real for rational functions"""
571.     assert solveset_real((x - y**3) / ((y**2)*sqrt(1 - y**2)), x) \
572.         == FiniteSet(y**3)
573.     # issue 4486
574.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)
575. 
576. 
577. def test_solveset_real_log():
578.     assert solveset_real(log((x-1)*(x+1)), x) == \
579.         FiniteSet(sqrt(2), -sqrt(2))
580. 
581. 
582. def test_poly_gens():
583.     assert solveset_real(4**(2*(x**2) + 2*x) - 8, x) == \
584.         FiniteSet(Rational(-3, 2), S.Half)
585. 
586. 
587. def test_solve_abs():
588.     x = Symbol('x')
589.     n = Dummy('n')
590.     raises(ValueError, lambda: solveset(Abs(x) - 1, x))
591.     assert solveset(Abs(x) - n, x, S.Reals) == ConditionSet(x, Contains(n, Interval(0, oo)), {-n, n})
592.     assert solveset_real(Abs(x) - 2, x) == FiniteSet(-2, 2)
593.     assert solveset_real(Abs(x) + 2, x) is S.EmptySet
594.     assert solveset_real(Abs(x + 3) - 2*Abs(x - 3), x) == \
595.         FiniteSet(1, 9)
596.     assert solveset_real(2*Abs(x) - Abs(x - 1), x) == \
597.         FiniteSet(-1, Rational(1, 3))
598. 
599.     sol = ConditionSet(
600.             x,
601.             And(
602.                 Contains(b, Interval(0, oo)),
603.                 Contains(a + b, Interval(0, oo)),
604.                 Contains(a - b, Interval(0, oo))),
605.             FiniteSet(-a - b - 3, -a + b - 3, a - b - 3, a + b - 3))
606.     eq = Abs(Abs(x + 3) - a) - b
607.     assert invert_real(eq, 0, x)[1] == sol
608.     reps = {a: 3, b: 1}
609.     eqab = eq.subs(reps)
610.     for i in sol.subs(reps):
611.         assert not eqab.subs(x, i)
612.     assert solveset(Eq(sin(Abs(x)), 1), x, domain=S.Reals) == Union(
613.         Intersection(Interval(0, oo),
614.             ImageSet(Lambda(n, (-1)**n*pi/2 + n*pi), S.Integers)),
615.         Intersection(Interval(-oo, 0),
616.             ImageSet(Lambda(n, n*pi - (-1)**(-n)*pi/2), S.Integers)))
617. 
618. 
619. 
620. def test_issue_9565():
621.     assert solveset_real(Abs((x - 1)/(x - 5)) <= Rational(1, 3), x) == Interval(-1, 2)
622. 
623. 
624. def test_issue_10069():
625.     eq = abs(1/(x - 1)) - 1 > 0
626.     u = Union(Interval.open(0, 1), Interval.open(1, 2))
627.     assert solveset_real(eq, x) == u
628. 
629. 
630. def test_real_imag_splitting():
631.     a, b = symbols('a b', real=True)
632.     assert solveset_real(sqrt(a**2 - b**2) - 3, a) == \
633.         FiniteSet(-sqrt(b**2 + 9), sqrt(b**2 + 9))
634.     assert solveset_real(sqrt(a**2 + b**2) - 3, a) != \
635.         S.EmptySet
636. 
637. 
638. def test_units():
639.     assert solveset_real(1/x - 1/(2*cm), x) == FiniteSet(2*cm)
640. 
641. 
642. def test_solve_only_exp_1():
643.     y = Symbol('y', positive=True)
644.     assert solveset_real(exp(x) - y, x) == FiniteSet(log(y))
645.     assert solveset_real(exp(x) + exp(-x) - 4, x) == \
646.         FiniteSet(log(-sqrt(3) + 2), log(sqrt(3) + 2))
647.     assert solveset_real(exp(x) + exp(-x) - y, x) != S.EmptySet
648. 
649. 
650. def test_atan2():
651.     # The .inverse() method on atan2 works only if x.is_real is True and the
652.     # second argument is a real constant
653.     assert solveset_real(atan2(x, 2) - pi/3, x) == FiniteSet(2*sqrt(3))
654. 
655. 
656. def test_piecewise_solveset():
657.     eq = Piecewise((x - 2, Gt(x, 2)), (2 - x, True)) - 3
658.     assert set(solveset_real(eq, x)) == set(FiniteSet(-1, 5))
659. 
660.     absxm3 = Piecewise(
661.         (x - 3, 0 <= x - 3),
662.         (3 - x, 0 > x - 3))
663.     y = Symbol('y', positive=True)
664.     assert solveset_real(absxm3 - y, x) == FiniteSet(-y + 3, y + 3)
665. 
666.     f = Piecewise(((x - 2)**2, x >= 0), (0, True))
667.     assert solveset(f, x, domain=S.Reals) == Union(FiniteSet(2), Interval(-oo, 0, True, True))
668. 
669.     assert solveset(
670.         Piecewise((x + 1, x > 0), (I, True)) - I, x, S.Reals
671.         ) == Interval(-oo, 0)
672. 
673.     assert solveset(Piecewise((x - 1, Ne(x, I)), (x, True)), x) == FiniteSet(1)
674. 
675. 
676. def test_solveset_complex_polynomial():
677.     from sympy.abc import x, a, b, c
678.     assert solveset_complex(a*x**2 + b*x + c, x) == \
679.         FiniteSet(-b/(2*a) - sqrt(-4*a*c + b**2)/(2*a),
680.                   -b/(2*a) + sqrt(-4*a*c + b**2)/(2*a))
681. 
682.     assert solveset_complex(x - y**3, y) == FiniteSet(
683.         (-x**Rational(1, 3))/2 + I*sqrt(3)*x**Rational(1, 3)/2,
684.         x**Rational(1, 3),
685.         (-x**Rational(1, 3))/2 - I*sqrt(3)*x**Rational(1, 3)/2)
686. 
687.     assert solveset_complex(x + 1/x - 1, x) == \
688.         FiniteSet(S.Half + I*sqrt(3)/2, S.Half - I*sqrt(3)/2)
689. 
690. 
691. def test_sol_zero_complex():
692.     assert solveset_complex(0, x) == S.Complexes
693. 
694. 
695. def test_solveset_complex_rational():
696.     assert solveset_complex((x - 1)*(x - I)/(x - 3), x) == \
697.         FiniteSet(1, I)
698. 
699.     assert solveset_complex((x - y**3)/((y**2)*sqrt(1 - y**2)), x) == \
700.         FiniteSet(y**3)
701.     assert solveset_complex(-x**2 - I, x) == \
702.         FiniteSet(-sqrt(2)/2 + sqrt(2)*I/2, sqrt(2)/2 - sqrt(2)*I/2)
703. 
704. 
705. def test_solve_quintics():
706.     skip("This test is too slow")
707.     f = x**5 - 110*x**3 - 55*x**2 + 2310*x + 979
708.     s = solveset_complex(f, x)
709.     for root in s:
710.         res = f.subs(x, root.n()).n()
711.         assert tn(res, 0)
712. 
713.     f = x**5 + 15*x + 12
714.     s = solveset_complex(f, x)
715.     for root in s:
716.         res = f.subs(x, root.n()).n()
717.         assert tn(res, 0)
718. 
719. 
720. def test_solveset_complex_exp():
721.     from sympy.abc import x, n
722.     assert solveset_complex(exp(x) - 1, x) == \
723.         imageset(Lambda(n, I*2*n*pi), S.Integers)
724.     assert solveset_complex(exp(x) - I, x) == \
725.         imageset(Lambda(n, I*(2*n*pi + pi/2)), S.Integers)
726.     assert solveset_complex(1/exp(x), x) == S.EmptySet
727.     assert solveset_complex(sinh(x).rewrite(exp), x) == \
728.         imageset(Lambda(n, n*pi*I), S.Integers)
729. 
730. 
731. def test_solveset_real_exp():
732.     from sympy.abc import x, y
733.     assert solveset(Eq((-2)**x, 4), x, S.Reals) == FiniteSet(2)
734.     assert solveset(Eq(-2**x, 4), x, S.Reals) == S.EmptySet
735.     assert solveset(Eq((-3)**x, 27), x, S.Reals) == S.EmptySet
736.     assert solveset(Eq((-5)**(x+1), 625), x, S.Reals) == FiniteSet(3)
737.     assert solveset(Eq(2**(x-3), -16), x, S.Reals) == S.EmptySet
738.     assert solveset(Eq((-3)**(x - 3), -3**39), x, S.Reals) == FiniteSet(42)
739.     assert solveset(Eq(2**x, y), x, S.Reals) == Intersection(S.Reals, FiniteSet(log(y)/log(2)))
740. 
741.     assert invert_real((-2)**(2*x) - 16, 0, x) == (x, FiniteSet(2))
742. 
743. 
744. def test_solve_complex_log():
745.     assert solveset_complex(log(x), x) == FiniteSet(1)
746.     assert solveset_complex(1 - log(a + 4*x**2), x) == \
747.         FiniteSet(-sqrt(-a + E)/2, sqrt(-a + E)/2)
748. 
749. 
750. def test_solve_complex_sqrt():
751.     assert solveset_complex(sqrt(5*x + 6) - 2 - x, x) == \
752.         FiniteSet(-S.One, S(2))
753.     assert solveset_complex(sqrt(5*x + 6) - (2 + 2*I) - x, x) == \
754.         FiniteSet(-S(2), 3 - 4*I)
755.     assert solveset_complex(4*x*(1 - a * sqrt(x)), x) == \
756.         FiniteSet(S.Zero, 1 / a ** 2)
757. 
758. 
759. def test_solveset_complex_tan():
760.     s = solveset_complex(tan(x).rewrite(exp), x)
761.     assert s == imageset(Lambda(n, pi*n), S.Integers) - \
762.         imageset(Lambda(n, pi*n + pi/2), S.Integers)
763. 
764. 
765. @nocache_fail
766. def test_solve_trig():
767.     from sympy.abc import n
768.     assert solveset_real(sin(x), x) == \
769.         Union(imageset(Lambda(n, 2*pi*n), S.Integers),
770.               imageset(Lambda(n, 2*pi*n + pi), S.Integers))
771. 
772.     assert solveset_real(sin(x) - 1, x) == \
773.         imageset(Lambda(n, 2*pi*n + pi/2), S.Integers)
774. 
775.     assert solveset_real(cos(x), x) == \
776.         Union(imageset(Lambda(n, 2*pi*n + pi/2), S.Integers),
777.               imageset(Lambda(n, 2*pi*n + pi*Rational(3, 2)), S.Integers))
778. 
779.     assert solveset_real(sin(x) + cos(x), x) == \
780.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(3, 4)), S.Integers),
781.               imageset(Lambda(n, 2*n*pi + pi*Rational(7, 4)), S.Integers))
782. 
783.     assert solveset_real(sin(x)**2 + cos(x)**2, x) == S.EmptySet
784. 
785.     # This fails when running with the cache off:
786.     assert solveset_complex(cos(x) - S.Half, x) == \
787.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(5, 3)), S.Integers),
788.               imageset(Lambda(n, 2*n*pi + pi/3), S.Integers))
789. 
790.     y, a = symbols('y,a')
791.     assert solveset(sin(y + a) - sin(y), a, domain=S.Reals) == \
792.         Union(ImageSet(Lambda(n, 2*n*pi), S.Integers),
793.         Intersection(ImageSet(Lambda(n, -I*(I*(
794.         2*n*pi + arg(-exp(-2*I*y))) +
795.         2*im(y))), S.Integers), S.Reals))
796. 
797.     assert solveset_real(sin(2*x)*cos(x) + cos(2*x)*sin(x)-1, x) == \
798.                             ImageSet(Lambda(n, n*pi*Rational(2, 3) + pi/6), S.Integers)
799. 
800.     # Tests for _solve_trig2() function
801.     assert solveset_real(2*cos(x)*cos(2*x) - 1, x) == \
802.           Union(ImageSet(Lambda(n, 2*n*pi + 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +
803.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +
804.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6)))), S.Integers),
805.                   ImageSet(Lambda(n, 2*n*pi - 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +
806.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +
807.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6))) +
808.                   2*pi), S.Integers))
809. 
810.     assert solveset_real(2*tan(x)*sin(x) + 1, x) == Union(
811.         ImageSet(Lambda(n, 2*n*pi + atan(sqrt(2)*sqrt(-1 +sqrt(17))/
812.             (1 - sqrt(17))) + pi), S.Integers),
813.         ImageSet(Lambda(n, 2*n*pi - atan(sqrt(2)*sqrt(-1 + sqrt(17))/
814.             (1 - sqrt(17))) + pi), S.Integers))
815. 
816.     assert solveset_real(cos(2*x)*cos(4*x) - 1, x) == \
817.                             ImageSet(Lambda(n, n*pi), S.Integers)
818. 
819. 
820. def test_solve_hyperbolic():
821.     # actual solver: _solve_trig1
822.     n = Dummy('n')
823.     assert solveset(sinh(x) + cosh(x), x) == S.EmptySet
824.     assert solveset(sinh(x) + cos(x), x) == ConditionSet(x,
825.         Eq(cos(x) + sinh(x), 0), S.Complexes)
826.     assert solveset_real(sinh(x) + sech(x), x) == FiniteSet(
827.         log(sqrt(sqrt(5) - 2)))
828.     assert solveset_real(3*cosh(2*x) - 5, x) == FiniteSet(
829.         log(sqrt(3)/3), log(sqrt(3)))
830.     assert solveset_real(sinh(x - 3) - 2, x) == FiniteSet(
831.         log((2 + sqrt(5))*exp(3)))
832.     assert solveset_real(cosh(2*x) + 2*sinh(x) - 5, x) == FiniteSet(
833.         log(-2 + sqrt(5)), log(1 + sqrt(2)))
834.     assert solveset_real((coth(x) + sinh(2*x))/cosh(x) - 3, x) == FiniteSet(
835.         log(S.Half + sqrt(5)/2), log(1 + sqrt(2)))
836.     assert solveset_real(cosh(x)*sinh(x) - 2, x) == FiniteSet(
837.         log(sqrt(4 + sqrt(17))))
838.     assert solveset_real(sinh(x) + tanh(x) - 1, x) == FiniteSet(
839.         log(sqrt(2)/2 + sqrt(-S(1)/2 + sqrt(2))))
840.     assert solveset_complex(sinh(x) - I/2, x) == Union(
841.         ImageSet(Lambda(n, I*(2*n*pi + 5*pi/6)), S.Integers),
842.         ImageSet(Lambda(n, I*(2*n*pi + pi/6)), S.Integers))
843.     assert solveset_complex(sinh(x) + sech(x), x) == Union(
844.         ImageSet(Lambda(n, 2*n*I*pi + log(sqrt(-2 + sqrt(5)))), S.Integers),
845.         ImageSet(Lambda(n, I*(2*n*pi + pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers),
846.         ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sqrt(-2 + sqrt(5)))), S.Integers),
847.         ImageSet(Lambda(n, I*(2*n*pi - pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers))
848.     # issues #9606 / #9531:
849.     assert solveset(sinh(x), x, S.Reals) == FiniteSet(0)
850.     assert solveset(sinh(x), x, S.Complexes) == Union(
851.         ImageSet(Lambda(n, I*(2*n*pi + pi)), S.Integers),
852.         ImageSet(Lambda(n, 2*n*I*pi), S.Integers))
853. 
854. 
855. def test_solve_invalid_sol():
856.     assert 0 not in solveset_real(sin(x)/x, x)
857.     assert 0 not in solveset_complex((exp(x) - 1)/x, x)
858. 
859. 
860. @XFAIL
861. def test_solve_trig_simplified():
862.     from sympy.abc import n
863.     assert solveset_real(sin(x), x) == \
864.         imageset(Lambda(n, n*pi), S.Integers)
865. 
866.     assert solveset_real(cos(x), x) == \
867.         imageset(Lambda(n, n*pi + pi/2), S.Integers)
868. 
869.     assert solveset_real(cos(x) + sin(x), x) == \
870.         imageset(Lambda(n, n*pi - pi/4), S.Integers)
871. 
872. 
873. @XFAIL
874. def test_solve_lambert():
875.     assert solveset_real(x*exp(x) - 1, x) == FiniteSet(LambertW(1))
876.     assert solveset_real(exp(x) + x, x) == FiniteSet(-LambertW(1))
877.     assert solveset_real(x + 2**x, x) == \
878.         FiniteSet(-LambertW(log(2))/log(2))
879. 
880.     # issue 4739
881.     ans = solveset_real(3*x + 5 + 2**(-5*x + 3), x)
882.     assert ans == FiniteSet(Rational(-5, 3) +
883.                             LambertW(-10240*2**Rational(1, 3)*log(2)/3)/(5*log(2)))
884. 
885.     eq = 2*(3*x + 4)**5 - 6*7**(3*x + 9)
886.     result = solveset_real(eq, x)
887.     ans = FiniteSet((log(2401) +
888.                      5*LambertW(-log(7**(7*3**Rational(1, 5)/5))))/(3*log(7))/-1)
889.     assert result == ans
890.     assert solveset_real(eq.expand(), x) == result
891. 
892.     assert solveset_real(5*x - 1 + 3*exp(2 - 7*x), x) == \
893.         FiniteSet(Rational(1, 5) + LambertW(-21*exp(Rational(3, 5))/5)/7)
894. 
895.     assert solveset_real(2*x + 5 + log(3*x - 2), x) == \
896.         FiniteSet(Rational(2, 3) + LambertW(2*exp(Rational(-19, 3))/3)/2)
897. 
898.     assert solveset_real(3*x + log(4*x), x) == \
899.         FiniteSet(LambertW(Rational(3, 4))/3)
900. 
901.     assert solveset_real(x**x - 2) == FiniteSet(exp(LambertW(log(2))))
902. 
903.     a = Symbol('a')
904.     assert solveset_real(-a*x + 2*x*log(x), x) == FiniteSet(exp(a/2))
905.     a = Symbol('a', real=True)
906.     assert solveset_real(a/x + exp(x/2), x) == \
907.         FiniteSet(2*LambertW(-a/2))
908.     assert solveset_real((a/x + exp(x/2)).diff(x), x) == \
909.         FiniteSet(4*LambertW(sqrt(2)*sqrt(a)/4))
910. 
911.     # coverage test
912.     assert solveset_real(tanh(x + 3)*tanh(x - 3) - 1, x) == EmptySet()
913. 
914.     assert solveset_real((x**2 - 2*x + 1).subs(x, log(x) + 3*x), x) == \
915.         FiniteSet(LambertW(3*S.Exp1)/3)
916.     assert solveset_real((x**2 - 2*x + 1).subs(x, (log(x) + 3*x)**2 - 1), x) == \
917.         FiniteSet(LambertW(3*exp(-sqrt(2)))/3, LambertW(3*exp(sqrt(2)))/3)
918.     assert solveset_real((x**2 - 2*x - 2).subs(x, log(x) + 3*x), x) == \
919.         FiniteSet(LambertW(3*exp(1 + sqrt(3)))/3, LambertW(3*exp(-sqrt(3) + 1))/3)
920.     assert solveset_real(x*log(x) + 3*x + 1, x) == \
921.         FiniteSet(exp(-3 + LambertW(-exp(3))))
922.     eq = (x*exp(x) - 3).subs(x, x*exp(x))
923.     assert solveset_real(eq, x) == \
924.         FiniteSet(LambertW(3*exp(-LambertW(3))))
925. 
926.     assert solveset_real(3*log(a**(3*x + 5)) + a**(3*x + 5), x) == \
927.         FiniteSet(-((log(a**5) + LambertW(Rational(1, 3)))/(3*log(a))))
928.     p = symbols('p', positive=True)
929.     assert solveset_real(3*log(p**(3*x + 5)) + p**(3*x + 5), x) == \
930.         FiniteSet(
931.         log((-3**Rational(1, 3) - 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),
932.         log((-3**Rational(1, 3) + 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),
933.         log((3*LambertW(Rational(1, 3))/p**5)**(1/(3*log(p)))),)  # checked numerically
934.     # check collection
935.     b = Symbol('b')
936.     eq = 3*log(a**(3*x + 5)) + b*log(a**(3*x + 5)) + a**(3*x + 5)
937.     assert solveset_real(eq, x) == FiniteSet(
938.         -((log(a**5) + LambertW(1/(b + 3)))/(3*log(a))))
939. 
940.     # issue 4271
941.     assert solveset_real((a/x + exp(x/2)).diff(x, 2), x) == FiniteSet(
942.         6*LambertW((-1)**Rational(1, 3)*a**Rational(1, 3)/3))
943. 
944.     assert solveset_real(x**3 - 3**x, x) == \
945.         FiniteSet(-3/log(3)*LambertW(-log(3)/3))
946.     assert solveset_real(3**cos(x) - cos(x)**3) == FiniteSet(
947.         acos(-3*LambertW(-log(3)/3)/log(3)))
948. 
949.     assert solveset_real(x**2 - 2**x, x) == \
950.         solveset_real(-x**2 + 2**x, x)
951. 
952.     assert solveset_real(3*log(x) - x*log(3)) == FiniteSet(
953.         -3*LambertW(-log(3)/3)/log(3),
954.         -3*LambertW(-log(3)/3, -1)/log(3))
955. 
956.     assert solveset_real(LambertW(2*x) - y) == FiniteSet(
957.         y*exp(y)/2)
958. 
959. 
960. @XFAIL
961. def test_other_lambert():
962.     a = Rational(6, 5)
963.     assert solveset_real(x**a - a**x, x) == FiniteSet(
964.         a, -a*LambertW(-log(a)/a)/log(a))
965. 
966. 
967. def test_solveset():
968.     x = Symbol('x')
969.     f = Function('f')
970.     raises(ValueError, lambda: solveset(x + y))
971.     assert solveset(x, 1) == S.EmptySet
972.     assert solveset(f(1)**2 + y + 1, f(1)
973.         ) == FiniteSet(-sqrt(-y - 1), sqrt(-y - 1))
974.     assert solveset(f(1)**2 - 1, f(1), S.Reals) == FiniteSet(-1, 1)
975.     assert solveset(f(1)**2 + 1, f(1)) == FiniteSet(-I, I)
976.     assert solveset(x - 1, 1) == FiniteSet(x)
977.     assert solveset(sin(x) - cos(x), sin(x)) == FiniteSet(cos(x))
978. 
979.     assert solveset(0, domain=S.Reals) == S.Reals
980.     assert solveset(1) == S.EmptySet
981.     assert solveset(True, domain=S.Reals) == S.Reals  # issue 10197
982.     assert solveset(False, domain=S.Reals) == S.EmptySet
983. 
984.     assert solveset(exp(x) - 1, domain=S.Reals) == FiniteSet(0)
985.     assert solveset(exp(x) - 1, x, S.Reals) == FiniteSet(0)
986.     assert solveset(Eq(exp(x), 1), x, S.Reals) == FiniteSet(0)
987.     assert solveset(exp(x) - 1, exp(x), S.Reals) == FiniteSet(1)
988.     A = Indexed('A', x)
989.     assert solveset(A - 1, A, S.Reals) == FiniteSet(1)
990. 
991.     assert solveset(x - 1 >= 0, x, S.Reals) == Interval(1, oo)
992.     assert solveset(exp(x) - 1 >= 0, x, S.Reals) == Interval(0, oo)
993. 
994.     assert solveset(exp(x) - 1, x) == imageset(Lambda(n, 2*I*pi*n), S.Integers)
995.     assert solveset(Eq(exp(x), 1), x) == imageset(Lambda(n, 2*I*pi*n),
996.                                                   S.Integers)
997.     # issue 13825
998.     assert solveset(x**2 + f(0) + 1, x) == {-sqrt(-f(0) - 1), sqrt(-f(0) - 1)}
999. 
1000. 
1001. def test__solveset_multi():
1002.     from sympy.solvers.solveset import _solveset_multi
1003.     from sympy import Reals
1004. 
1005.     # Basic univariate case:
1006.     from sympy.abc import x
1007.     assert _solveset_multi([x**2-1], [x], [S.Reals]) == FiniteSet((1,), (-1,))
1008. 
1009.     # Linear systems of two equations
1010.     from sympy.abc import x, y
1011.     assert _solveset_multi([x+y, x+1], [x, y], [Reals, Reals]) == FiniteSet((-1, 1))
1012.     assert _solveset_multi([x+y, x+1], [y, x], [Reals, Reals]) == FiniteSet((1, -1))
1013.     assert _solveset_multi([x+y, x-y-1], [x, y], [Reals, Reals]) == FiniteSet((S(1)/2, -S(1)/2))
1014.     assert _solveset_multi([x-1, y-2], [x, y], [Reals, Reals]) == FiniteSet((1, 2))
1015.     #assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == ImageSet(Lambda(x, (x, -x)), Reals)
1016.     assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == Union(
1017.             ImageSet(Lambda(((x,),), (x, -x)), ProductSet(Reals)),
1018.             ImageSet(Lambda(((y,),), (-y, y)), ProductSet(Reals)))
1019.     assert _solveset_multi([x+y, x+y+1], [x, y], [Reals, Reals]) == S.EmptySet
1020.     assert _solveset_multi([x+y, x-y, x-1], [x, y], [Reals, Reals]) == S.EmptySet
1021.     assert _solveset_multi([x+y, x-y, x-1], [y, x], [Reals, Reals]) == S.EmptySet
1022. 
1023.     # Systems of three equations:
1024.     from sympy.abc import x, y, z
1025.     assert _solveset_multi([x+y+z-1, x+y-z-2, x-y-z-3], [x, y, z], [Reals,
1026.         Reals, Reals]) == FiniteSet((2, -S.Half, -S.Half))
1027. 
1028.     # Nonlinear systems:
1029.     from sympy.abc import r, theta, z, x, y
1030.     assert _solveset_multi([x**2+y**2-2, x+y], [x, y], [Reals, Reals]) == FiniteSet((-1, 1), (1, -1))
1031.     assert _solveset_multi([x**2-1, y], [x, y], [Reals, Reals]) == FiniteSet((1, 0), (-1, 0))
1032.     #assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(
1033.     #        ImageSet(Lambda(x, (x, -x)), Reals), ImageSet(Lambda(x, (x, x)), Reals))
1034.     assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(
1035.             ImageSet(Lambda(((x,),), (x, -Abs(x))), ProductSet(Reals)),
1036.             ImageSet(Lambda(((x,),), (x, Abs(x))), ProductSet(Reals)),
1037.             ImageSet(Lambda(((y,),), (-Abs(y), y)), ProductSet(Reals)),
1038.             ImageSet(Lambda(((y,),), (Abs(y), y)), ProductSet(Reals)))
1039.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [theta, r],
1040.             [Interval(0, pi), Interval(-1, 1)]) == FiniteSet((0, 1), (pi, -1))
1041.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [r, theta],
1042.             [Interval(0, 1), Interval(0, pi)]) == FiniteSet((1, 0))
1043.     #assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],
1044.     #        [Interval(0, 1), Interval(0, pi)]) == ?
1045.     assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],
1046.             [Interval(0, 1), Interval(0, pi)]) == Union(
1047.             ImageSet(Lambda(((r,),), (r, 0)), ImageSet(Lambda(r, (r,)), Interval(0, 1))),
1048.             ImageSet(Lambda(((theta,),), (0, theta)), ImageSet(Lambda(theta, (theta,)), Interval(0, pi))))
1049. 
1050. 
1051. def test_conditionset():
1052.     assert solveset(Eq(sin(x)**2 + cos(x)**2, 1), x, domain=S.Reals) == \
1053.         ConditionSet(x, True, S.Reals)
1054. 
1055.     assert solveset(Eq(x**2 + x*sin(x), 1), x, domain=S.Reals
1056.         ) == ConditionSet(x, Eq(x**2 + x*sin(x) - 1, 0), S.Reals)
1057. 
1058.     assert solveset(Eq(-I*(exp(I*x) - exp(-I*x))/2, 1), x
1059.         ) == imageset(Lambda(n, 2*n*pi + pi/2), S.Integers)
1060. 
1061.     assert solveset(x + sin(x) > 1, x, domain=S.Reals
1062.         ) == ConditionSet(x, x + sin(x) > 1, S.Reals)
1063. 
1064.     assert solveset(Eq(sin(Abs(x)), x), x, domain=S.Reals
1065.         ) == ConditionSet(x, Eq(-x + sin(Abs(x)), 0), S.Reals)
1066. 
1067.     assert solveset(y**x-z, x, S.Reals) == \
1068.         ConditionSet(x, Eq(y**x - z, 0), S.Reals)
1069. 
1070. 
1071. @XFAIL
1072. def test_conditionset_equality():
1073.     ''' Checking equality of different representations of ConditionSet'''
1074.     assert solveset(Eq(tan(x), y), x) == ConditionSet(x, Eq(tan(x), y), S.Complexes)
1075. 
1076. 
1077. def test_solveset_domain():
1078.     x = Symbol('x')
1079. 
1080.     assert solveset(x**2 - x - 6, x, Interval(0, oo)) == FiniteSet(3)
1081.     assert solveset(x**2 - 1, x, Interval(0, oo)) == FiniteSet(1)
1082.     assert solveset(x**4 - 16, x, Interval(0, 10)) == FiniteSet(2)
1083. 
1084. 
1085. def test_improve_coverage():
1086.     from sympy.solvers.solveset import _has_rational_power
1087.     x = Symbol('x')
1088.     solution = solveset(exp(x) + sin(x), x, S.Reals)
1089.     unsolved_object = ConditionSet(x, Eq(exp(x) + sin(x), 0), S.Reals)
1090.     assert solution == unsolved_object
1091. 
1092.     assert _has_rational_power(sin(x)*exp(x) + 1, x) == (False, S.One)
1093.     assert _has_rational_power((sin(x)**2)*(exp(x) + 1)**3, x) == (False, S.One)
1094. 
1095. 
1096. def test_issue_9522():
1097.     x = Symbol('x')
1098.     expr1 = Eq(1/(x**2 - 4) + x, 1/(x**2 - 4) + 2)
1099.     expr2 = Eq(1/x + x, 1/x)
1100. 
1101.     assert solveset(expr1, x, S.Reals) == EmptySet()
1102.     assert solveset(expr2, x, S.Reals) == EmptySet()
1103. 
1104. 
1105. def test_solvify():
1106.     x = Symbol('x')
1107. 
1108.     assert solvify(x**2 + 10, x, S.Reals) == []
1109.     assert solvify(x**3 + 1, x, S.Complexes) == [-1, S.Half - sqrt(3)*I/2,
1110.                                                  S.Half + sqrt(3)*I/2]
1111.     assert solvify(log(x), x, S.Reals) == [1]
1112.     assert solvify(cos(x), x, S.Reals) == [pi/2, pi*Rational(3, 2)]
1113.     assert solvify(sin(x) + 1, x, S.Reals) == [pi*Rational(3, 2)]
1114.     raises(NotImplementedError, lambda: solvify(sin(exp(x)), x, S.Complexes))
1115. 
1116. 
1117. def test_abs_invert_solvify():
1118.     assert solvify(sin(Abs(x)), x, S.Reals) is None
1119. 
1120. 
1121. def test_linear_eq_to_matrix():
1122.     x, y, z = symbols('x, y, z')
1123.     a, b, c, d, e, f, g, h, i, j, k, l = symbols('a:l')
1124. 
1125.     eqns1 = [2*x + y - 2*z - 3, x - y - z, x + y + 3*z - 12]
1126.     eqns2 = [Eq(3*x + 2*y - z, 1), Eq(2*x - 2*y + 4*z, -2), -2*x + y - 2*z]
1127. 
1128.     A, B = linear_eq_to_matrix(eqns1, x, y, z)
1129.     assert A == Matrix([[2, 1, -2], [1, -1, -1], [1, 1, 3]])
1130.     assert B == Matrix([[3], [0], [12]])
1131. 
1132.     A, B = linear_eq_to_matrix(eqns2, x, y, z)
1133.     assert A == Matrix([[3, 2, -1], [2, -2, 4], [-2, 1, -2]])
1134.     assert B == Matrix([[1], [-2], [0]])
1135. 
1136.     # Pure symbolic coefficients
1137.     eqns3 = [a*b*x + b*y + c*z - d, e*x + d*x + f*y + g*z - h, i*x + j*y + k*z - l]
1138.     A, B = linear_eq_to_matrix(eqns3, x, y, z)
1139.     assert A == Matrix([[a*b, b, c], [d + e, f, g], [i, j, k]])
1140.     assert B == Matrix([[d], [h], [l]])
1141. 
1142.     # raise ValueError if
1143.     # 1) no symbols are given
1144.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3))
1145.     # 2) there are duplicates
1146.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, x, y]))
1147.     # 3) there are non-symbols
1148.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, 1/a, y]))
1149.     # 4) a nonlinear term is detected in the original expression
1150.     raises(ValueError, lambda: linear_eq_to_matrix(Eq(1/x + x, 1/x)))
1151. 
1152.     assert linear_eq_to_matrix(1, x) == (Matrix([[0]]), Matrix([[-1]]))
1153.     # issue 15195
1154.     assert linear_eq_to_matrix(x + y*(z*(3*x + 2) + 3), x) == (
1155.         Matrix([[3*y*z + 1]]), Matrix([[-y*(2*z + 3)]]))
1156.     assert linear_eq_to_matrix(Matrix(
1157.         [[a*x + b*y - 7], [5*x + 6*y - c]]), x, y) == (
1158.         Matrix([[a, b], [5, 6]]), Matrix([[7], [c]]))
1159. 
1160.     # issue 15312
1161.     assert linear_eq_to_matrix(Eq(x + 2, 1), x) == (
1162.         Matrix([[1]]), Matrix([[-1]]))
1163. 
1164. 
1165. def test_issue_16577():
1166.     assert linear_eq_to_matrix(Eq(a*(2*x + 3*y) + 4*y, 5), x, y) == (
1167.         Matrix([[2*a, 3*a + 4]]), Matrix([[5]]))
1168. 
1169. 
1170. def test_linsolve():
1171.     x, y, z, u, v, w = symbols("x, y, z, u, v, w")
1172.     x1, x2, x3, x4 = symbols('x1, x2, x3, x4')
1173. 
1174.     # Test for different input forms
1175. 
1176.     M = Matrix([[1, 2, 1, 1, 7], [1, 2, 2, -1, 12], [2, 4, 0, 6, 4]])
1177.     system1 = A, b = M[:, :-1], M[:, -1]
1178.     Eqns = [x1 + 2*x2 + x3 + x4 - 7, x1 + 2*x2 + 2*x3 - x4 - 12,
1179.             2*x1 + 4*x2 + 6*x4 - 4]
1180. 
1181.     sol = FiniteSet((-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))
1182.     assert linsolve(Eqns, (x1, x2, x3, x4)) == sol
1183.     assert linsolve(Eqns, *(x1, x2, x3, x4)) == sol
1184.     assert linsolve(system1, (x1, x2, x3, x4)) == sol
1185.     assert linsolve(system1, *(x1, x2, x3, x4)) == sol
1186.     # issue 9667 - symbols can be Dummy symbols
1187.     x1, x2, x3, x4 = symbols('x:4', cls=Dummy)
1188.     assert linsolve(system1, x1, x2, x3, x4) == FiniteSet(
1189.         (-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))
1190. 
1191.     # raise ValueError for garbage value
1192.     raises(ValueError, lambda: linsolve(Eqns))
1193.     raises(ValueError, lambda: linsolve(x1))
1194.     raises(ValueError, lambda: linsolve(x1, x2))
1195.     raises(ValueError, lambda: linsolve((A,), x1, x2))
1196.     raises(ValueError, lambda: linsolve(A, b, x1, x2))
1197. 
1198.     #raise ValueError if equations are non-linear in given variables
1199.     raises(ValueError, lambda: linsolve([x + y - 1, x ** 2 + y - 3], [x, y]))
1200.     raises(ValueError, lambda: linsolve([cos(x) + y, x + y], [x, y]))
1201.     assert linsolve([x + z - 1, x ** 2 + y - 3], [z, y]) == {(-x + 1, -x**2 + 3)}
1202. 
1203.     # Fully symbolic test
1204.     a, b, c, d, e, f = symbols('a, b, c, d, e, f')
1205.     A = Matrix([[a, b], [c, d]])
1206.     B = Matrix([[e], [f]])
1207.     system2 = (A, B)
1208.     sol = FiniteSet(((-b*f + d*e)/(a*d - b*c), (a*f - c*e)/(a*d - b*c)))
1209.     assert linsolve(system2, [x, y]) == sol
1210. 
1211.     # No solution
1212.     A = Matrix([[1, 2, 3], [2, 4, 6], [3, 6, 9]])
1213.     b = Matrix([0, 0, 1])
1214.     assert linsolve((A, b), (x, y, z)) == EmptySet()
1215. 
1216.     # Issue #10056
1217.     A, B, J1, J2 = symbols('A B J1 J2')
1218.     Augmatrix = Matrix([
1219.         [2*I*J1, 2*I*J2, -2/J1],
1220.         [-2*I*J2, -2*I*J1, 2/J2],
1221.         [0, 2, 2*I/(J1*J2)],
1222.         [2, 0,  0],
1223.         ])
1224. 
1225.     assert linsolve(Augmatrix, A, B) == FiniteSet((0, I/(J1*J2)))
1226. 
1227.     # Issue #10121 - Assignment of free variables
1228.     a, b, c, d, e = symbols('a, b, c, d, e')
1229.     Augmatrix = Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0]])
1230.     assert linsolve(Augmatrix, a, b, c, d, e) == FiniteSet((a, 0, c, 0, e))
1231.     raises(IndexError, lambda: linsolve(Augmatrix, a, b, c))
1232. 
1233.     x0, x1, x2, _x0 = symbols('tau0 tau1 tau2 _tau0')
1234.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])
1235.         ) == FiniteSet((x0, 0, x1, _x0, x2))
1236.     x0, x1, x2, _x0 = symbols('_tau0 _tau1 _tau2 tau0')
1237.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])
1238.         ) == FiniteSet((x0, 0, x1, _x0, x2))
1239.     x0, x1, x2, _x0 = symbols('_tau0 _tau1 _tau2 tau1')
1240.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])
1241.         ) == FiniteSet((x0, 0, x1, _x0, x2))
1242.     # symbols can be given as generators
1243.     x0, x2, x4 = symbols('x0, x2, x4')
1244.     assert linsolve(Augmatrix, numbered_symbols('x')
1245.         ) == FiniteSet((x0, 0, x2, 0, x4))
1246.     Augmatrix[-1, -1] = x0
1247.     # use Dummy to avoid clash; the names may clash but the symbols
1248.     # will not
1249.     Augmatrix[-1, -1] = symbols('_x0')
1250.     assert len(linsolve(
1251.         Augmatrix, numbered_symbols('x', cls=Dummy)).free_symbols) == 4
1252. 
1253.     # Issue #12604
1254.     f = Function('f')
1255.     assert linsolve([f(x) - 5], f(x)) == FiniteSet((5,))
1256. 
1257.     # Issue #14860
1258.     from sympy.physics.units import meter, newton, kilo
1259.     Eqns = [8*kilo*newton + x + y, 28*kilo*newton*meter + 3*x*meter]
1260.     assert linsolve(Eqns, x, y) == {(newton*Rational(-28000, 3), newton*Rational(4000, 3))}
1261. 
1262.     # linsolve fully expands expressions, so removable singularities
1263.     # and other nonlinearity does not raise an error
1264.     assert linsolve([Eq(x, x + y)], [x, y]) == {(x, 0)}
1265.     assert linsolve([Eq(1/x, 1/x + y)], [x, y]) == {(x, 0)}
1266.     assert linsolve([Eq(y/x, y/x + y)], [x, y]) == {(x, 0)}
1267.     assert linsolve([Eq(x*(x + 1), x**2 + y)], [x, y]) == {(y, y)}
1268. 
1269. 
1270. def test_linsolve_immutable():
1271.     A = ImmutableDenseMatrix([[1, 1, 2], [0, 1, 2], [0, 0, 1]])
1272.     B = ImmutableDenseMatrix([2, 1, -1])
1273.     c = symbols('c1 c2 c3')
1274.     assert linsolve([A, B], c) == FiniteSet((1, 3, -1))
1275. 
1276.     A = ImmutableDenseMatrix([[1, 1, 7], [1, -1, 3]])
1277.     assert linsolve(A) == FiniteSet((5, 2))
1278. 
1279. 
1280. def test_solve_decomposition():
1281.     x = Symbol('x')
1282.     n = Dummy('n')
1283. 
1284.     f1 = exp(3*x) - 6*exp(2*x) + 11*exp(x) - 6
1285.     f2 = sin(x)**2 - 2*sin(x) + 1
1286.     f3 = sin(x)**2 - sin(x)
1287.     f4 = sin(x + 1)
1288.     f5 = exp(x + 2) - 1
1289.     f6 = 1/log(x)
1290.     f7 = 1/x
1291. 
1292.     s1 = ImageSet(Lambda(n, 2*n*pi), S.Integers)
1293.     s2 = ImageSet(Lambda(n, 2*n*pi + pi), S.Integers)
1294.     s3 = ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers)
1295.     s4 = ImageSet(Lambda(n, 2*n*pi - 1), S.Integers)
1296.     s5 = ImageSet(Lambda(n, 2*n*pi - 1 + pi), S.Integers)
1297. 
1298.     assert solve_decomposition(f1, x, S.Reals) == FiniteSet(0, log(2), log(3))
1299.     assert solve_decomposition(f2, x, S.Reals) == s3
1300.     assert solve_decomposition(f3, x, S.Reals) == Union(s1, s2, s3)
1301.     assert solve_decomposition(f4, x, S.Reals) == Union(s4, s5)
1302.     assert solve_decomposition(f5, x, S.Reals) == FiniteSet(-2)
1303.     assert solve_decomposition(f6, x, S.Reals) == S.EmptySet
1304.     assert solve_decomposition(f7, x, S.Reals) == S.EmptySet
1305.     assert solve_decomposition(x, x, Interval(1, 2)) == S.EmptySet
1306. 
1307. # nonlinsolve testcases
1308. def test_nonlinsolve_basic():
1309.     assert nonlinsolve([],[]) == S.EmptySet
1310.     assert nonlinsolve([],[x, y]) == S.EmptySet
1311. 
1312.     system = [x, y - x - 5]
1313.     assert nonlinsolve([x],[x, y]) == FiniteSet((0, y))
1314.     assert nonlinsolve(system, [y]) == FiniteSet((x + 5,))
1315.     soln = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)
1316.     assert nonlinsolve([sin(x) - 1], [x]) == FiniteSet(tuple(soln))
1317.     assert nonlinsolve([x**2 - 1], [x]) == FiniteSet((-1,), (1,))
1318. 
1319.     soln = FiniteSet((y, y))
1320.     assert nonlinsolve([x - y, 0], x, y) == soln
1321.     assert nonlinsolve([0, x - y], x, y) == soln
1322.     assert nonlinsolve([x - y, x - y], x, y) == soln
1323.     assert nonlinsolve([x, 0], x, y) == FiniteSet((0, y))
1324.     f = Function('f')
1325.     assert nonlinsolve([f(x), 0], f(x), y) == FiniteSet((0, y))
1326.     assert nonlinsolve([f(x), 0], f(x), f(y)) == FiniteSet((0, f(y)))
1327.     A = Indexed('A', x)
1328.     assert nonlinsolve([A, 0], A, y) == FiniteSet((0, y))
1329.     assert nonlinsolve([x**2 -1], [sin(x)]) == FiniteSet((S.EmptySet,))
1330.     assert nonlinsolve([x**2 -1], sin(x)) == FiniteSet((S.EmptySet,))
1331.     assert nonlinsolve([x**2 -1], 1) == FiniteSet((x**2,))
1332.     assert nonlinsolve([x**2 -1], x + y) == FiniteSet((S.EmptySet,))
1333. 
1334. 
1335. def test_nonlinsolve_abs():
1336.     soln = FiniteSet((x, Abs(x)))
1337.     assert nonlinsolve([Abs(x) - y], x, y) == soln
1338. 
1339. 
1340. def test_raise_exception_nonlinsolve():
1341.     raises(IndexError, lambda: nonlinsolve([x**2 -1], []))
1342.     raises(ValueError, lambda: nonlinsolve([x**2 -1]))
1343.     raises(NotImplementedError, lambda: nonlinsolve([(x+y)**2 - 9, x**2 - y**2 - 0.75], (x, y)))
1344. 
1345. 
1346. def test_trig_system():
1347.     # TODO: add more simple testcases when solveset returns
1348.     # simplified soln for Trig eq
1349.     assert nonlinsolve([sin(x) - 1, cos(x) -1 ], x) == S.EmptySet
1350.     soln1 = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)
1351.     soln = FiniteSet(soln1)
1352.     assert nonlinsolve([sin(x) - 1, cos(x)], x) == soln
1353. 
1354. 
1355. @XFAIL
1356. def test_trig_system_fail():
1357.     # fails because solveset trig solver is not much smart.
1358.     sys = [x + y - pi/2, sin(x) + sin(y) - 1]
1359.     # solveset returns conditionset for sin(x) + sin(y) - 1
1360.     soln_1 = (ImageSet(Lambda(n, n*pi + pi/2), S.Integers),
1361.         ImageSet(Lambda(n, n*pi)), S.Integers)
1362.     soln_1 = FiniteSet(soln_1)
1363.     soln_2 = (ImageSet(Lambda(n, n*pi), S.Integers),
1364.         ImageSet(Lambda(n, n*pi+ pi/2), S.Integers))
1365.     soln_2 = FiniteSet(soln_2)
1366.     soln = soln_1 + soln_2
1367.     assert nonlinsolve(sys, [x, y]) == soln
1368. 
1369.     # Add more cases from here
1370.     # http://www.vitutor.com/geometry/trigonometry/equations_systems.html#uno
1371.     sys = [sin(x) + sin(y) - (sqrt(3)+1)/2, sin(x) - sin(y) - (sqrt(3) - 1)/2]
1372.     soln_x = Union(ImageSet(Lambda(n, 2*n*pi + pi/3), S.Integers),
1373.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(2, 3)), S.Integers))
1374.     soln_y = Union(ImageSet(Lambda(n, 2*n*pi + pi/6), S.Integers),
1375.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(5, 6)), S.Integers))
1376.     assert nonlinsolve(sys, [x, y]) ==FiniteSet((soln_x, soln_y))
1377. 
1378. 
1379. def test_nonlinsolve_positive_dimensional():
1380.     x, y, z, a, b, c, d = symbols('x, y, z, a, b, c, d', extended_real = True)
1381.     assert nonlinsolve([x*y, x*y - x], [x, y]) == FiniteSet((0, y))
1382. 
1383.     system = [a**2 + a*c, a - b]
1384.     assert nonlinsolve(system, [a, b]) == FiniteSet((0, 0), (-c, -c))
1385.     # here (a= 0, b = 0) is independent soln so both is printed.
1386.     # if symbols = [a, b, c] then only {a : -c ,b : -c}
1387. 
1388.     eq1 =  a + b + c + d
1389.     eq2 = a*b + b*c + c*d + d*a
1390.     eq3 = a*b*c + b*c*d + c*d*a + d*a*b
1391.     eq4 = a*b*c*d - 1
1392.     system = [eq1, eq2, eq3, eq4]
1393.     sol1 = (-1/d, -d, 1/d, FiniteSet(d) - FiniteSet(0))
1394.     sol2 = (1/d, -d, -1/d, FiniteSet(d) - FiniteSet(0))
1395.     soln = FiniteSet(sol1, sol2)
1396.     assert nonlinsolve(system, [a, b, c, d]) == soln
1397. 
1398. 
1399. def test_nonlinsolve_polysys():
1400.     x, y, z = symbols('x, y, z', real = True)
1401.     assert nonlinsolve([x**2 + y - 2, x**2 + y], [x, y]) == S.EmptySet
1402. 
1403.     s = (-y + 2, y)
1404.     assert nonlinsolve([(x + y)**2 - 4, x + y - 2], [x, y]) == FiniteSet(s)
1405. 
1406.     system = [x**2 - y**2]
1407.     soln_real = FiniteSet((-y, y), (y, y))
1408.     soln_complex = FiniteSet((-Abs(y), y), (Abs(y), y))
1409.     soln =soln_real + soln_complex
1410.     assert nonlinsolve(system, [x, y]) == soln
1411. 
1412.     system = [x**2 - y**2]
1413.     soln_real= FiniteSet((y, -y), (y, y))
1414.     soln_complex = FiniteSet((y, -Abs(y)), (y, Abs(y)))
1415.     soln = soln_real + soln_complex
1416.     assert nonlinsolve(system, [y, x]) == soln
1417. 
1418.     system = [x**2 + y - 3, x - y - 4]
1419.     assert nonlinsolve(system, (x, y)) != nonlinsolve(system, (y, x))
1420. 
1421. 
1422. def test_nonlinsolve_using_substitution():
1423.     x, y, z, n = symbols('x, y, z, n', real = True)
1424.     system = [(x + y)*n - y**2 + 2]
1425.     s_x = (n*y - y**2 + 2)/n
1426.     soln = (-s_x, y)
1427.     assert nonlinsolve(system, [x, y]) == FiniteSet(soln)
1428. 
1429.     system = [z**2*x**2 - z**2*y**2/exp(x)]
1430.     soln_real_1 = (y, x, 0)
1431.     soln_real_2 = (-exp(x/2)*Abs(x), x, z)
1432.     soln_real_3 = (exp(x/2)*Abs(x), x, z)
1433.     soln_complex_1 = (-x*exp(x/2), x, z)
1434.     soln_complex_2 = (x*exp(x/2), x, z)
1435.     syms = [y, x, z]
1436.     soln = FiniteSet(soln_real_1, soln_complex_1, soln_complex_2,\
1437.         soln_real_2, soln_real_3)
1438.     assert nonlinsolve(system,syms) == soln
1439. 
1440. 
1441. def test_nonlinsolve_complex():
1442.     x, y, z = symbols('x, y, z')
1443.     n = Dummy('n')
1444.     assert nonlinsolve([exp(x) - sin(y), 1/y - 3], [x, y]) == {
1445.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(Rational(1, 3)))), S.Integers), Rational(1, 3))}
1446. 
1447.     system = [exp(x) - sin(y), 1/exp(y) - 3]
1448.     assert nonlinsolve(system, [x, y]) == {
1449.         (ImageSet(Lambda(n, I*(2*n*pi + pi)
1450.                          + log(sin(log(3)))), S.Integers), -log(3)),
1451.         (ImageSet(Lambda(n, I*(2*n*pi + arg(sin(2*n*I*pi - log(3))))
1452.                          + log(Abs(sin(2*n*I*pi - log(3))))), S.Integers),
1453.         ImageSet(Lambda(n, 2*n*I*pi - log(3)), S.Integers))}
1454. 
1455.     system = [exp(x) - sin(y), y**2 - 4]
1456.     assert nonlinsolve(system, [x, y]) == {
1457.         (ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sin(2))), S.Integers), -2),
1458.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(2))), S.Integers), 2)}
1459. 
1460. 
1461. @XFAIL
1462. def test_solve_nonlinear_trans():
1463.     # After the transcendental equation solver these will work
1464.     x, y, z = symbols('x, y, z', real=True)
1465.     soln1 = FiniteSet((2*LambertW(y/2), y))
1466.     soln2 = FiniteSet((-x*sqrt(exp(x)), y), (x*sqrt(exp(x)), y))
1467.     soln3 = FiniteSet((x*exp(x/2), x))
1468.     soln4 = FiniteSet(2*LambertW(y/2), y)
1469.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln1
1470.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln2
1471.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln3
1472.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln4
1473. 
1474. 
1475. def test_issue_5132_1():
1476.     system = [sqrt(x**2 + y**2) - sqrt(10), x + y - 4]
1477.     assert nonlinsolve(system, [x, y]) == FiniteSet((1, 3), (3, 1))
1478. 
1479.     n = Dummy('n')
1480.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]
1481.     s_real_y = -log(3)
1482.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))
1483.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))
1484.     lam = Lambda(n, 2*n*I*pi + -log(3))
1485.     s_complex_y = ImageSet(lam, S.Integers)
1486.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1487.     s_complex_z_1 = ImageSet(lam, S.Integers)
1488.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1489.     s_complex_z_2 = ImageSet(lam, S.Integers)
1490.     soln_complex = FiniteSet(
1491.                                             (s_complex_y, s_complex_z_1),
1492.                                             (s_complex_y, s_complex_z_2)
1493.                                         )
1494.     soln = soln_real + soln_complex
1495.     assert nonlinsolve(eqs, [y, z]) == soln
1496. 
1497. 
1498. def test_issue_5132_2():
1499.     x, y = symbols('x, y', real=True)
1500.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]
1501.     n = Dummy('n')
1502.     soln_real = (log(-z**2 + sin(y))/2, z)
1503.     lam = Lambda( n, I*(2*n*pi + arg(-z**2 + sin(y)))/2 + log(Abs(z**2 - sin(y)))/2)
1504.     img = ImageSet(lam, S.Integers)
1505.     # not sure about the complex soln. But it looks correct.
1506.     soln_complex = (img, z)
1507.     soln = FiniteSet(soln_real, soln_complex)
1508.     assert nonlinsolve(eqs, [x, z]) == soln
1509. 
1510.     r, t = symbols('r, t')
1511.     system = [r - x**2 - y**2, tan(t) - y/x]
1512.     s_x = sqrt(r/(tan(t)**2 + 1))
1513.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)
1514.     soln = FiniteSet((s_x, s_y), (-s_x, -s_y))
1515.     assert nonlinsolve(system, [x, y]) == soln
1516. 
1517. 
1518. def test_issue_6752():
1519.     a,b,c,d = symbols('a, b, c, d', real=True)
1520.     assert nonlinsolve([a**2 + a, a - b], [a, b]) == {(-1, -1), (0, 0)}
1521. 
1522. 
1523. @SKIP("slow")
1524. def test_issue_5114_solveset():
1525.     # slow testcase
1526.     a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r = symbols('a:r')
1527. 
1528.     # there is no 'a' in the equation set but this is how the
1529.     # problem was originally posed
1530.     syms = [a, b, c, f, h, k, n]
1531.     eqs = [b + r/d - c/d,
1532.     c*(1/d + 1/e + 1/g) - f/g - r/d,
1533.         f*(1/g + 1/i + 1/j) - c/g - h/i,
1534.         h*(1/i + 1/l + 1/m) - f/i - k/m,
1535.         k*(1/m + 1/o + 1/p) - h/m - n/p,
1536.         n*(1/p + 1/q) - k/p]
1537.     assert len(nonlinsolve(eqs, syms)) == 1
1538. 
1539. 
1540. @SKIP("Hangs")
1541. def _test_issue_5335():
1542.     # Not able to check zero dimensional system.
1543.     # is_zero_dimensional Hangs
1544.     lam, a0, conc = symbols('lam a0 conc')
1545.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,
1546.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,
1547.            x + y - conc]
1548.     sym = [x, y, a0]
1549.     # there are 4 solutions but only two are valid
1550.     assert len(nonlinsolve(eqs, sym)) == 2
1551.     # float
1552.     lam, a0, conc = symbols('lam a0 conc')
1553.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,
1554.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,
1555.            x + y - conc]
1556.     sym = [x, y, a0]
1557.     assert len(nonlinsolve(eqs, sym)) == 2
1558. 
1559. 
1560. def test_issue_2777():
1561.     # the equations represent two circles
1562.     x, y = symbols('x y', real=True)
1563.     e1, e2 = sqrt(x**2 + y**2) - 10, sqrt(y**2 + (-x + 10)**2) - 3
1564.     a, b = Rational(191, 20), 3*sqrt(391)/20
1565.     ans = {(a, -b), (a, b)}
1566.     assert nonlinsolve((e1, e2), (x, y)) == ans
1567.     assert nonlinsolve((e1, e2/(x - a)), (x, y)) == S.EmptySet
1568.     # make the 2nd circle's radius be -3
1569.     e2 += 6
1570.     assert nonlinsolve((e1, e2), (x, y)) == S.EmptySet
1571. 
1572. 
1573. def test_issue_8828():
1574.     x1 = 0
1575.     y1 = -620
1576.     r1 = 920
1577.     x2 = 126
1578.     y2 = 276
1579.     x3 = 51
1580.     y3 = 205
1581.     r3 = 104
1582.     v = [x, y, z]
1583. 
1584.     f1 = (x - x1)**2 + (y - y1)**2 - (r1 - z)**2
1585.     f2 = (x2 - x)**2 + (y2 - y)**2 - z**2
1586.     f3 = (x - x3)**2 + (y - y3)**2 - (r3 - z)**2
1587.     F = [f1, f2, f3]
1588. 
1589.     g1 = sqrt((x - x1)**2 + (y - y1)**2) + z - r1
1590.     g2 = f2
1591.     g3 = sqrt((x - x3)**2 + (y - y3)**2) + z - r3
1592.     G = [g1, g2, g3]
1593. 
1594.     # both soln same
1595.     A = nonlinsolve(F, v)
1596.     B = nonlinsolve(G, v)
1597.     assert A == B
1598. 
1599. 
1600. def test_nonlinsolve_conditionset():
1601.     # when solveset failed to solve all the eq
1602.     # return conditionset
1603.     f = Function('f')
1604.     f1 = f(x) - pi/2
1605.     f2 = f(y) - pi*Rational(3, 2)
1606.     intermediate_system = Eq(2*f(x) - pi, 0) & Eq(2*f(y) - 3*pi, 0)
1607.     symbols = Tuple(x, y)
1608.     soln = ConditionSet(
1609.         symbols,
1610.         intermediate_system,
1611.         S.Complexes**2)
1612.     assert nonlinsolve([f1, f2], [x, y]) == soln
1613. 
1614. 
1615. def test_substitution_basic():
1616.     assert substitution([], [x, y]) == S.EmptySet
1617.     assert substitution([], []) == S.EmptySet
1618.     system = [2*x**2 + 3*y**2 - 30, 3*x**2 - 2*y**2 - 19]
1619.     soln = FiniteSet((-3, -2), (-3, 2), (3, -2), (3, 2))
1620.     assert substitution(system, [x, y]) == soln
1621. 
1622.     soln = FiniteSet((-1, 1))
1623.     assert substitution([x + y], [x], [{y: 1}], [y], set([]), [x, y]) == soln
1624.     assert substitution(
1625.         [x + y], [x], [{y: 1}], [y],
1626.         set([x + 1]), [y, x]) == S.EmptySet
1627. 
1628. 
1629. def test_issue_5132_substitution():
1630.     x, y, z, r, t = symbols('x, y, z, r, t', real=True)
1631.     system = [r - x**2 - y**2, tan(t) - y/x]
1632.     s_x_1 = Complement(FiniteSet(-sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))
1633.     s_x_2 = Complement(FiniteSet(sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))
1634.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)
1635.     soln = FiniteSet((s_x_2, s_y)) + FiniteSet((s_x_1, -s_y))
1636.     assert substitution(system, [x, y]) == soln
1637. 
1638.     n = Dummy('n')
1639.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]
1640.     s_real_y = -log(3)
1641.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))
1642.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))
1643.     lam = Lambda(n, 2*n*I*pi + -log(3))
1644.     s_complex_y = ImageSet(lam, S.Integers)
1645.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1646.     s_complex_z_1 = ImageSet(lam, S.Integers)
1647.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))
1648.     s_complex_z_2 = ImageSet(lam, S.Integers)
1649.     soln_complex = FiniteSet(
1650.         (s_complex_y, s_complex_z_1),
1651.         (s_complex_y, s_complex_z_2))
1652.     soln = soln_real + soln_complex
1653.     assert substitution(eqs, [y, z]) == soln
1654. 
1655. 
1656. def test_raises_substitution():
1657.     raises(ValueError, lambda: substitution([x**2 -1], []))
1658.     raises(TypeError, lambda: substitution([x**2 -1]))
1659.     raises(ValueError, lambda: substitution([x**2 -1], [sin(x)]))
1660.     raises(TypeError, lambda: substitution([x**2 -1], x))
1661.     raises(TypeError, lambda: substitution([x**2 -1], 1))
1662. 
1663. # end of tests for nonlinsolve
1664. 
1665. 
1666. def test_issue_9556():
1667.     x = Symbol('x')
1668.     b = Symbol('b', positive=True)
1669. 
1670.     assert solveset(Abs(x) + 1, x, S.Reals) == EmptySet()
1671.     assert solveset(Abs(x) + b, x, S.Reals) == EmptySet()
1672.     assert solveset(Eq(b, -1), b, S.Reals) == EmptySet()
1673. 
1674. 
1675. def test_issue_9611():
1676.     x = Symbol('x')
1677.     a = Symbol('a')
1678.     y = Symbol('y')
1679. 
1680.     assert solveset(Eq(x - x + a, a), x, S.Reals) == S.Reals
1681.     assert solveset(Eq(y - y + a, a), y) == S.Complexes
1682. 
1683. 
1684. def test_issue_9557():
1685.     x = Symbol('x')
1686.     a = Symbol('a')
1687. 
1688.     assert solveset(x**2 + a, x, S.Reals) == Intersection(S.Reals,
1689.         FiniteSet(-sqrt(-a), sqrt(-a)))
1690. 
1691. 
1692. def test_issue_9778():
1693.     assert solveset(x**3 + 1, x, S.Reals) == FiniteSet(-1)
1694.     assert solveset(x**Rational(3, 5) + 1, x, S.Reals) == S.EmptySet
1695.     assert solveset(x**3 + y, x, S.Reals) == \
1696.         FiniteSet(-Abs(y)**Rational(1, 3)*sign(y))
1697. 
1698. 
1699. def test_issue_10214():
1700.     assert solveset(x**Rational(3, 2) + 4, x, S.Reals) == S.EmptySet
1701.     assert solveset(x**(Rational(-3, 2)) + 4, x, S.Reals) == S.EmptySet
1702. 
1703.     ans = FiniteSet(-2**Rational(2, 3))
1704.     assert solveset(x**(S(3)) + 4, x, S.Reals) == ans
1705.     assert (x**(S(3)) + 4).subs(x,list(ans)[0]) == 0 # substituting ans and verifying the result.
1706.     assert (x**(S(3)) + 4).subs(x,-(-2)**Rational(2, 3)) == 0
1707. 
1708. 
1709. def test_issue_9849():
1710.     assert solveset(Abs(sin(x)) + 1, x, S.Reals) == S.EmptySet
1711. 
1712. 
1713. def test_issue_9953():
1714.     assert linsolve([ ], x) == S.EmptySet
1715. 
1716. 
1717. def test_issue_9913():
1718.     assert solveset(2*x + 1/(x - 10)**2, x, S.Reals) == \
1719.         FiniteSet(-(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)/3 - 100/
1720.                 (3*(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)) + Rational(20, 3))
1721. 
1722. 
1723. def test_issue_10397():
1724.     assert solveset(sqrt(x), x, S.Complexes) == FiniteSet(0)
1725. 
1726. 
1727. def test_issue_14987():
1728.     raises(ValueError, lambda: linear_eq_to_matrix(
1729.         [x**2], x))
1730.     raises(ValueError, lambda: linear_eq_to_matrix(
1731.         [x*(-3/x + 1) + 2*y - a], [x, y]))
1732.     raises(ValueError, lambda: linear_eq_to_matrix(
1733.         [(x**2 - 3*x)/(x - 3) - 3], x))
1734.     raises(ValueError, lambda: linear_eq_to_matrix(
1735.         [(x + 1)**3 - x**3 - 3*x**2 + 7], x))
1736.     raises(ValueError, lambda: linear_eq_to_matrix(
1737.         [x*(1/x + 1) + y], [x, y]))
1738.     raises(ValueError, lambda: linear_eq_to_matrix(
1739.         [(x + 1)*y], [x, y]))
1740.     raises(ValueError, lambda: linear_eq_to_matrix(
1741.         [Eq(1/x, 1/x + y)], [x, y]))
1742.     raises(ValueError, lambda: linear_eq_to_matrix(
1743.         [Eq(y/x, y/x + y)], [x, y]))
1744.     raises(ValueError, lambda: linear_eq_to_matrix(
1745.         [Eq(x*(x + 1), x**2 + y)], [x, y]))
1746. 
1747. 
1748. def test_simplification():
1749.     eq = x + (a - b)/(-2*a + 2*b)
1750.     assert solveset(eq, x) == FiniteSet(S.Half)
1751.     assert solveset(eq, x, S.Reals) == Intersection({-((a - b)/(-2*a + 2*b))}, S.Reals)
1752.     # So that ap - bn is not zero:
1753.     ap = Symbol('ap', positive=True)
1754.     bn = Symbol('bn', negative=True)
1755.     eq = x + (ap - bn)/(-2*ap + 2*bn)
1756.     assert solveset(eq, x) == FiniteSet(S.Half)
1757.     assert solveset(eq, x, S.Reals) == FiniteSet(S.Half)
1758. 
1759. 
1760. def test_issue_10555():
1761.     f = Function('f')
1762.     g = Function('g')
1763.     assert solveset(f(x) - pi/2, x, S.Reals) == \
1764.         ConditionSet(x, Eq(f(x) - pi/2, 0), S.Reals)
1765.     assert solveset(f(g(x)) - pi/2, g(x), S.Reals) == \
1766.         ConditionSet(g(x), Eq(f(g(x)) - pi/2, 0), S.Reals)
1767. 
1768. 
1769. def test_issue_8715():
1770.     eq = x + 1/x > -2 + 1/x
1771.     assert solveset(eq, x, S.Reals) == \
1772.         (Interval.open(-2, oo) - FiniteSet(0))
1773.     assert solveset(eq.subs(x,log(x)), x, S.Reals) == \
1774.         Interval.open(exp(-2), oo) - FiniteSet(1)
1775. 
1776. 
1777. def test_issue_11174():
1778.     r, t = symbols('r t')
1779.     eq = z**2 + exp(2*x) - sin(y)
1780.     soln = Intersection(S.Reals, FiniteSet(log(-z**2 + sin(y))/2))
1781.     assert solveset(eq, x, S.Reals) == soln
1782. 
1783.     eq = sqrt(r)*Abs(tan(t))/sqrt(tan(t)**2 + 1) + x*tan(t)
1784.     s = -sqrt(r)*Abs(tan(t))/(sqrt(tan(t)**2 + 1)*tan(t))
1785.     soln = Intersection(S.Reals, FiniteSet(s))
1786.     assert solveset(eq, x, S.Reals) == soln
1787. 
1788. 
1789. def test_issue_11534():
1790.     # eq and eq2 should give the same solution as a Complement
1791.     eq = -y + x/sqrt(-x**2 + 1)
1792.     eq2 = -y**2 + x**2/(-x**2 + 1)
1793.     soln = Complement(FiniteSet(-y/sqrt(y**2 + 1), y/sqrt(y**2 + 1)), FiniteSet(-1, 1))
1794.     assert solveset(eq, x, S.Reals) == soln
1795.     assert solveset(eq2, x, S.Reals) == soln
1796. 
1797. 
1798. def test_issue_10477():
1799.     assert solveset((x**2 + 4*x - 3)/x < 2, x, S.Reals) == \
1800.         Union(Interval.open(-oo, -3), Interval.open(0, 1))
1801. 
1802. 
1803. def test_issue_10671():
1804.     assert solveset(sin(y), y, Interval(0, pi)) == FiniteSet(0, pi)
1805.     i = Interval(1, 10)
1806.     assert solveset((1/x).diff(x) < 0, x, i) == i
1807. 
1808. 
1809. def test_issue_11064():
1810.     eq = x + sqrt(x**2 - 5)
1811.     assert solveset(eq > 0, x, S.Reals) == \
1812.         Interval(sqrt(5), oo)
1813.     assert solveset(eq < 0, x, S.Reals) == \
1814.         Interval(-oo, -sqrt(5))
1815.     assert solveset(eq > sqrt(5), x, S.Reals) == \
1816.         Interval.Lopen(sqrt(5), oo)
1817. 
1818. 
1819. def test_issue_12478():
1820.     eq = sqrt(x - 2) + 2
1821.     soln = solveset_real(eq, x)
1822.     assert soln is S.EmptySet
1823.     assert solveset(eq < 0, x, S.Reals) is S.EmptySet
1824.     assert solveset(eq > 0, x, S.Reals) == Interval(2, oo)
1825. 
1826. 
1827. def test_issue_12429():
1828.     eq = solveset(log(x)/x <= 0, x, S.Reals)
1829.     sol = Interval.Lopen(0, 1)
1830.     assert eq == sol
1831. 
1832. 
1833. def test_solveset_arg():
1834.     assert solveset(arg(x), x, S.Reals)  == Interval.open(0, oo)
1835.     assert solveset(arg(4*x -3), x) == Interval.open(Rational(3, 4), oo)
1836. 
1837. 
1838. def test__is_finite_with_finite_vars():
1839.     f = _is_finite_with_finite_vars
1840.     # issue 12482
1841.     assert all(f(1/x) is None for x in (
1842.         Dummy(), Dummy(real=True), Dummy(complex=True)))
1843.     assert f(1/Dummy(real=False)) is True  # b/c it's finite but not 0
1844. 
1845. 
1846. def test_issue_13550():
1847.     assert solveset(x**2 - 2*x - 15, symbol = x, domain = Interval(-oo, 0)) == FiniteSet(-3)
1848. 
1849. 
1850. def test_issue_13849():
1851.     t = symbols('t')
1852.     assert nonlinsolve((t*(sqrt(5) + sqrt(2)) - sqrt(2), t), t) == EmptySet()
1853. 
1854. 
1855. def test_issue_14223():
1856.     x = Symbol('x')
1857.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,
1858.         S.Reals) == FiniteSet(-1, 1)
1859.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,
1860.         Interval(0, 2)) == FiniteSet(1)
1861. 
1862. 
1863. def test_issue_10158():
1864.     x = Symbol('x')
1865.     dom = S.Reals
1866.     assert solveset(x*Max(x, 15) - 10, x, dom) == FiniteSet(Rational(2, 3))
1867.     assert solveset(x*Min(x, 15) - 10, x, dom) == FiniteSet(-sqrt(10), sqrt(10))
1868.     assert solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom) == FiniteSet(-1, 1)
1869.     assert solveset(Abs(x - 1) - Abs(y), x, dom) == FiniteSet(-Abs(y) + 1, Abs(y) + 1)
1870.     assert solveset(Abs(x + 4*Abs(x + 1)), x, dom) == FiniteSet(Rational(-4, 3), Rational(-4, 5))
1871.     assert solveset(2*Abs(x + Abs(x + Max(3, x))) - 2, x, S.Reals) == FiniteSet(-1, -2)
1872.     dom = S.Complexes
1873.     raises(ValueError, lambda: solveset(x*Max(x, 15) - 10, x, dom))
1874.     raises(ValueError, lambda: solveset(x*Min(x, 15) - 10, x, dom))
1875.     raises(ValueError, lambda: solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom))
1876.     raises(ValueError, lambda: solveset(Abs(x - 1) - Abs(y), x, dom))
1877.     raises(ValueError, lambda: solveset(Abs(x + 4*Abs(x + 1)), x, dom))
1878. 
1879. 
1880. def test_issue_14300():
1881.     x, y, n = symbols('x y n')
1882. 
1883.     f = 1 - exp(-18000000*x) - y
1884.     a1 = FiniteSet(-log(-y + 1)/18000000)
1885. 
1886.     assert solveset(f, x, S.Reals) == \
1887.         Intersection(S.Reals, a1)
1888.     assert solveset(f, x) == \
1889.         ImageSet(Lambda(n, -I*(2*n*pi + arg(-y + 1))/18000000 -
1890.             log(Abs(y - 1))/18000000), S.Integers)
1891. 
1892. 
1893. def test_issue_14454():
1894.     x = Symbol('x')
1895.     number = CRootOf(x**4 + x - 1, 2)
1896.     raises(ValueError, lambda: invert_real(number, 0, x, S.Reals))
1897.     assert invert_real(x**2, number, x, S.Reals)  # no error
1898. 
1899. 
1900. def test_term_factors():
1901.     assert list(_term_factors(3**x - 2)) == [-2, 3**x]
1902.     expr = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)
1903.     assert set(_term_factors(expr)) == set([
1904.         3**(x + 2), 4**(x + 2), 3**(x + 3), 4**(x - 1), -1, 4**(x + 1)])
1905. 
1906. 
1907. #################### tests for transolve and its helpers ###############
1908. 
1909. def test_transolve():
1910. 
1911.     assert _transolve(3**x, x, S.Reals) == S.EmptySet
1912.     assert _transolve(3**x - 9**(x + 5), x, S.Reals) == FiniteSet(-10)
1913. 
1914. 
1915. # exponential tests
1916. def test_exponential_real():
1917.     from sympy.abc import x, y, z
1918. 
1919.     e1 = 3**(2*x) - 2**(x + 3)
1920.     e2 = 4**(5 - 9*x) - 8**(2 - x)
1921.     e3 = 2**x + 4**x
1922.     e4 = exp(log(5)*x) - 2**x
1923.     e5 = exp(x/y)*exp(-z/y) - 2
1924.     e6 = 5**(x/2) - 2**(x/3)
1925.     e7 = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)
1926.     e8 = -9*exp(-2*x + 5) + 4*exp(3*x + 1)
1927.     e9 = 2**x + 4**x + 8**x - 84
1928. 
1929.     assert solveset(e1, x, S.Reals) == FiniteSet(
1930.         -3*log(2)/(-2*log(3) + log(2)))
1931.     assert solveset(e2, x, S.Reals) == FiniteSet(Rational(4, 15))
1932.     assert solveset(e3, x, S.Reals) == S.EmptySet
1933.     assert solveset(e4, x, S.Reals) == FiniteSet(0)
1934.     assert solveset(e5, x, S.Reals) == Intersection(
1935.         S.Reals, FiniteSet(y*log(2*exp(z/y))))
1936.     assert solveset(e6, x, S.Reals) == FiniteSet(0)
1937.     assert solveset(e7, x, S.Reals) == FiniteSet(2)
1938.     assert solveset(e8, x, S.Reals) == FiniteSet(-2*log(2)/5 + 2*log(3)/5 + Rational(4, 5))
1939.     assert solveset(e9, x, S.Reals) == FiniteSet(2)
1940. 
1941.     assert solveset_real(-9*exp(-2*x + 5) + 2**(x + 1), x) == FiniteSet(
1942.         -((-5 - 2*log(3) + log(2))/(log(2) + 2)))
1943.     assert solveset_real(4**(x/2) - 2**(x/3), x) == FiniteSet(0)
1944.     b = sqrt(6)*sqrt(log(2))/sqrt(log(5))
1945.     assert solveset_real(5**(x/2) - 2**(3/x), x) == FiniteSet(-b, b)
1946. 
1947.     # coverage test
1948.     C1, C2 = symbols('C1 C2')
1949.     f = Function('f')
1950.     assert solveset_real(C1 + C2/x**2 - exp(-f(x)), f(x)) == Intersection(
1951.         S.Reals, FiniteSet(-log(C1 + C2/x**2)))
1952.     y = symbols('y', positive=True)
1953.     assert solveset_real(x**2 - y**2/exp(x), y) == Intersection(
1954.         S.Reals, FiniteSet(-sqrt(x**2*exp(x)), sqrt(x**2*exp(x))))
1955.     p = Symbol('p', positive=True)
1956.     assert solveset_real((1/p + 1)**(p + 1), p) == EmptySet()
1957. 
1958. 
1959. @XFAIL
1960. def test_exponential_complex():
1961.     from sympy.abc import x
1962.     from sympy import Dummy
1963.     n = Dummy('n')
1964. 
1965.     assert solveset_complex(2**x + 4**x, x) == imageset(
1966.         Lambda(n, I*(2*n*pi + pi)/log(2)), S.Integers)
1967.     assert solveset_complex(x**z*y**z - 2, z) == FiniteSet(
1968.         log(2)/(log(x) + log(y)))
1969.     assert solveset_complex(4**(x/2) - 2**(x/3), x) == imageset(
1970.         Lambda(n, 3*n*I*pi/log(2)), S.Integers)
1971.     assert solveset(2**x + 32, x) == imageset(
1972.         Lambda(n, (I*(2*n*pi + pi) + 5*log(2))/log(2)), S.Integers)
1973. 
1974.     eq = (2**exp(y**2/x) + 2)/(x**2 + 15)
1975.     a = sqrt(x)*sqrt(-log(log(2)) + log(log(2) + 2*n*I*pi))
1976.     assert solveset_complex(eq, y) == FiniteSet(-a, a)
1977. 
1978.     union1 = imageset(Lambda(n, I*(2*n*pi - pi*Rational(2, 3))/log(2)), S.Integers)
1979.     union2 = imageset(Lambda(n, I*(2*n*pi + pi*Rational(2, 3))/log(2)), S.Integers)
1980.     assert solveset(2**x + 4**x + 8**x, x) == Union(union1, union2)
1981. 
1982.     eq = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)
1983.     res = solveset(eq, x)
1984.     num = 2*n*I*pi - 4*log(2) + 2*log(3)
1985.     den = -2*log(2) + log(3)
1986.     ans = imageset(Lambda(n, num/den), S.Integers)
1987.     assert res == ans
1988. 
1989. 
1990. def test_expo_conditionset():
1991.     from sympy.abc import x, y
1992. 
1993.     f1 = (exp(x) + 1)**x - 2
1994.     f2 = (x + 2)**y*x - 3
1995.     f3 = 2**x - exp(x) - 3
1996.     f4 = log(x) - exp(x)
1997.     f5 = 2**x + 3**x - 5**x
1998. 
1999.     assert solveset(f1, x, S.Reals) == ConditionSet(
2000.         x, Eq((exp(x) + 1)**x - 2, 0), S.Reals)
2001.     assert solveset(f2, x, S.Reals) == ConditionSet(
2002.         x, Eq(x*(x + 2)**y - 3, 0), S.Reals)
2003.     assert solveset(f3, x, S.Reals) == ConditionSet(
2004.         x, Eq(2**x - exp(x) - 3, 0), S.Reals)
2005.     assert solveset(f4, x, S.Reals) == ConditionSet(
2006.         x, Eq(-exp(x) + log(x), 0), S.Reals)
2007.     assert solveset(f5, x, S.Reals) == ConditionSet(
2008.         x, Eq(2**x + 3**x - 5**x, 0), S.Reals)
2009. 
2010. 
2011. def test_exponential_symbols():
2012.     x, y, z = symbols('x y z', positive=True)
2013. 
2014.     assert solveset(z**x - y, x, S.Reals) == Intersection(
2015.         S.Reals, FiniteSet(log(y)/log(z)))
2016. 
2017.     w = symbols('w')
2018.     f1 = 2*x**w - 4*y**w
2019.     f2 = (x/y)**w - 2
2020.     sol1 = Intersection({log(2)/(log(x) - log(y))}, S.Reals)
2021.     sol2 = Intersection({log(2)/log(x/y)}, S.Reals)
2022.     assert solveset(f1, w, S.Reals) == sol1
2023.     assert solveset(f2, w, S.Reals) == sol2
2024. 
2025.     assert solveset(x**x, x, S.Reals) == S.EmptySet
2026.     assert solveset(x**y - 1, y, S.Reals) == FiniteSet(0)
2027.     assert solveset(exp(x/y)*exp(-z/y) - 2, y, S.Reals) == FiniteSet(
2028.         (x - z)/log(2)) - FiniteSet(0)
2029. 
2030.     a, b, x, y = symbols('a b x y')
2031.     assert solveset_real(a**x - b**x, x) == ConditionSet(
2032.         x, (a > 0) & (b > 0), FiniteSet(0))
2033.     assert solveset(a**x - b**x, x) == ConditionSet(
2034.         x, Ne(a, 0) & Ne(b, 0), FiniteSet(0))
2035. 
2036. 
2037. @XFAIL
2038. def test_issue_10864():
2039.     assert solveset(x**(y*z) - x, x, S.Reals) == FiniteSet(1)
2040. 
2041. 
2042. @XFAIL
2043. def test_solve_only_exp_2():
2044.     assert solveset_real(sqrt(exp(x)) + sqrt(exp(-x)) - 4, x) == \
2045.         FiniteSet(2*log(-sqrt(3) + 2), 2*log(sqrt(3) + 2))
2046. 
2047. 
2048. def test_is_exponential():
2049.     x, y, z = symbols('x y z')
2050. 
2051.     assert _is_exponential(y, x) is False
2052.     assert _is_exponential(3**x - 2, x) is True
2053.     assert _is_exponential(5**x - 7**(2 - x), x) is True
2054.     assert _is_exponential(sin(2**x) - 4*x, x) is False
2055.     assert _is_exponential(x**y - z, y) is True
2056.     assert _is_exponential(x**y - z, x) is False
2057.     assert _is_exponential(2**x + 4**x - 1, x) is True
2058.     assert _is_exponential(x**(y*z) - x, x) is False
2059.     assert _is_exponential(x**(2*x) - 3**x, x) is False
2060.     assert _is_exponential(x**y - y*z, y) is False
2061.     assert _is_exponential(x**y - x*z, y) is True
2062. 
2063. 
2064. def test_solve_exponential():
2065.     assert _solve_exponential(3**(2*x) - 2**(x + 3), 0, x, S.Reals) == \
2066.         FiniteSet(-3*log(2)/(-2*log(3) + log(2)))
2067.     assert _solve_exponential(2**y + 4**y, 1, y, S.Reals) == \
2068.         FiniteSet(log(Rational(-1, 2) + sqrt(5)/2)/log(2))
2069.     assert _solve_exponential(2**y + 4**y, 0, y, S.Reals) == \
2070.         S.EmptySet
2071.     assert _solve_exponential(2**x + 3**x - 5**x, 0, x, S.Reals) == \
2072.         ConditionSet(x, Eq(2**x + 3**x - 5**x, 0), S.Reals)
2073. 
2074. # end of exponential tests
2075. 
2076. 
2077. # logarithmic tests
2078. def test_logarithmic():
2079.     assert solveset_real(log(x - 3) + log(x + 3), x) == FiniteSet(
2080.         -sqrt(10), sqrt(10))
2081.     assert solveset_real(log(x + 1) - log(2*x - 1), x) == FiniteSet(2)
2082.     assert solveset_real(log(x + 3) + log(1 + 3/x) - 3, x) == FiniteSet(
2083.         -3 + sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 + exp(3)/2,
2084.         -sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 - 3 + exp(3)/2)
2085. 
2086.     eq = z - log(x) + log(y/(x*(-1 + y**2/x**2)))
2087.     assert solveset_real(eq, x) == \
2088.         Intersection(S.Reals, FiniteSet(-sqrt(y**2 - y*exp(z)),
2089.             sqrt(y**2 - y*exp(z)))) - \
2090.         Intersection(S.Reals, FiniteSet(-sqrt(y**2), sqrt(y**2)))
2091.     assert solveset_real(
2092.         log(3*x) - log(-x + 1) - log(4*x + 1), x) == FiniteSet(Rational(-1, 2), S.Half)
2093.     assert solveset(log(x**y) - y*log(x), x, S.Reals) == S.Reals
2094. 
2095. @XFAIL
2096. def test_uselogcombine_2():
2097.     eq = log(exp(2*x) + 1) + log(-tanh(x) + 1) - log(2)
2098.     assert solveset_real(eq, x) == EmptySet()
2099.     eq = log(8*x) - log(sqrt(x) + 1) - 2
2100.     assert solveset_real(eq, x) == EmptySet()
2101. 
2102. 
2103. def test_is_logarithmic():
2104.     assert _is_logarithmic(y, x) is False
2105.     assert _is_logarithmic(log(x), x) is True
2106.     assert _is_logarithmic(log(x) - 3, x) is True
2107.     assert _is_logarithmic(log(x)*log(y), x) is True
2108.     assert _is_logarithmic(log(x)**2, x) is False
2109.     assert _is_logarithmic(log(x - 3) + log(x + 3), x) is True
2110.     assert _is_logarithmic(log(x**y) - y*log(x), x) is True
2111.     assert _is_logarithmic(sin(log(x)), x) is False
2112.     assert _is_logarithmic(x + y, x) is False
2113.     assert _is_logarithmic(log(3*x) - log(1 - x) + 4, x) is True
2114.     assert _is_logarithmic(log(x) + log(y) + x, x) is False
2115.     assert _is_logarithmic(log(log(x - 3)) + log(x - 3), x) is True
2116.     assert _is_logarithmic(log(log(3) + x) + log(x), x) is True
2117.     assert _is_logarithmic(log(x)*(y + 3) + log(x), y) is False
2118. 
2119. 
2120. def test_solve_logarithm():
2121.     y = Symbol('y')
2122.     assert _solve_logarithm(log(x**y) - y*log(x), 0, x, S.Reals) == S.Reals
2123.     y = Symbol('y', positive=True)
2124.     assert _solve_logarithm(log(x)*log(y), 0, x, S.Reals) == FiniteSet(1)
2125. 
2126. # end of logarithmic tests
2127. 
2128. 
2129. def test_linear_coeffs():
2130.     from sympy.solvers.solveset import linear_coeffs
2131.     assert linear_coeffs(0, x) == [0, 0]
2132.     assert all(i is S.Zero for i in linear_coeffs(0, x))
2133.     assert linear_coeffs(x + 2*y + 3, x, y) == [1, 2, 3]
2134.     assert linear_coeffs(x + 2*y + 3, y, x) == [2, 1, 3]
2135.     assert linear_coeffs(x + 2*x**2 + 3, x, x**2) == [1, 2, 3]
2136.     raises(ValueError, lambda:
2137.         linear_coeffs(x + 2*x**2 + x**3, x, x**2))
2138.     raises(ValueError, lambda:
2139.         linear_coeffs(1/x*(x - 1) + 1/x, x))
2140.     assert linear_coeffs(a*(x + y), x, y) == [a, a, 0]
2141.     assert linear_coeffs(1.0, x, y) == [0, 0, 1.0]
2142. 
2143. # modular tests
2144. def test_is_modular():
2145.     x, y = symbols('x y')
2146. 
2147.     assert _is_modular(y, x) is False
2148.     assert _is_modular(Mod(x, 3) - 1, x) is True
2149.     assert _is_modular(Mod(x**3 - 3*x**2 - x + 1, 3) - 1, x) is True
2150.     assert _is_modular(Mod(exp(x + y), 3) - 2, x) is True
2151.     assert _is_modular(Mod(exp(x + y), 3) - log(x), x) is True
2152.     assert _is_modular(Mod(x, 3) - 1, y) is False
2153.     assert _is_modular(Mod(x, 3)**2 - 5, x) is False
2154.     assert _is_modular(Mod(x, 3)**2 - y, x) is False
2155.     assert _is_modular(exp(Mod(x, 3)) - 1, x) is False
2156.     assert _is_modular(Mod(3, y) - 1, y) is False
2157. 
2158. 
2159. def test_invert_modular():
2160.     x, y = symbols('x y')
2161.     n = Dummy('n', integer=True)
2162.     from sympy.solvers.solveset import _invert_modular as invert_modular
2163. 
2164.     # non invertible cases
2165.     assert invert_modular(Mod(sin(x), 7), S(5), n, x) == (Mod(sin(x), 7), 5)
2166.     assert invert_modular(Mod(exp(x), 7), S(5), n, x) == (Mod(exp(x), 7), 5)
2167.     assert invert_modular(Mod(log(x), 7), S(5), n, x) == (Mod(log(x), 7), 5)
2168.     # a is symbol
2169.     assert invert_modular(Mod(x, 7), S(5), n, x) == \
2170.             (x, ImageSet(Lambda(n, 7*n + 5), S.Integers))
2171.     # a.is_Add
2172.     assert invert_modular(Mod(x + 8, 7), S(5), n, x) == \
2173.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))
2174.     assert invert_modular(Mod(x**2 + x, 7), S(5), n, x) == \
2175.             (Mod(x**2 + x, 7), 5)
2176.     # a.is_Mul
2177.     assert invert_modular(Mod(3*x, 7), S(5), n, x) == \
2178.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))
2179.     assert invert_modular(Mod((x + 1)*(x + 2), 7), S(5), n, x) == \
2180.             (Mod((x + 1)*(x + 2), 7), 5)
2181.     # a.is_Pow
2182.     assert invert_modular(Mod(x**4, 7), S(5), n, x) == \
2183.             (x, EmptySet())
2184.     assert invert_modular(Mod(3**x, 4), S(3), n, x) == \
2185.             (x, ImageSet(Lambda(n, 2*n + 1), S.Naturals0))
2186.     assert invert_modular(Mod(2**(x**2 + x + 1), 7), S(2), n, x) == \
2187.             (x**2 + x + 1, ImageSet(Lambda(n, 3*n + 1), S.Naturals0))
2188. 
2189. 
2190. def test_solve_modular():
2191.     x = Symbol('x')
2192.     n = Dummy('n', integer=True)
2193.     # if rhs has symbol (need to be implemented in future).
2194.     assert solveset(Mod(x, 4) - x, x, S.Integers) == \
2195.             ConditionSet(x, Eq(-x + Mod(x, 4), 0), \
2196.             S.Integers)
2197.     # when _invert_modular fails to invert
2198.     assert solveset(3 - Mod(sin(x), 7), x, S.Integers) == \
2199.             ConditionSet(x, Eq(Mod(sin(x), 7) - 3, 0), S.Integers)
2200.     assert solveset(3 - Mod(log(x), 7), x, S.Integers) == \
2201.             ConditionSet(x, Eq(Mod(log(x), 7) - 3, 0), S.Integers)
2202.     assert solveset(3 - Mod(exp(x), 7), x, S.Integers) == \
2203.             ConditionSet(x, Eq(Mod(exp(x), 7) - 3, 0), S.Integers)
2204.     # EmptySet solution definitely
2205.     assert solveset(7 - Mod(x, 5), x, S.Integers) == EmptySet()
2206.     assert solveset(5 - Mod(x, 5), x, S.Integers) == EmptySet()
2207.     # Negative m
2208.     assert solveset(2 + Mod(x, -3), x, S.Integers) == \
2209.             ImageSet(Lambda(n, -3*n - 2), S.Integers)
2210.     assert solveset(4 + Mod(x, -3), x, S.Integers) == EmptySet()
2211.     # linear expression in Mod
2212.     assert solveset(3 - Mod(x, 5), x, S.Integers) == ImageSet(Lambda(n, 5*n + 3), S.Integers)
2213.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Integers) == \
2214.                 ImageSet(Lambda(n, 7*n + 5), S.Integers)
2215.     assert solveset(3 - Mod(5*x, 7), x, S.Integers) == \
2216.                 ImageSet(Lambda(n, 7*n + 2), S.Integers)
2217.     # higher degree expression in Mod
2218.     assert solveset(Mod(x**2, 160) - 9, x, S.Integers) == \
2219.             Union(ImageSet(Lambda(n, 160*n + 3), S.Integers),
2220.             ImageSet(Lambda(n, 160*n + 13), S.Integers),
2221.             ImageSet(Lambda(n, 160*n + 67), S.Integers),
2222.             ImageSet(Lambda(n, 160*n + 77), S.Integers),
2223.             ImageSet(Lambda(n, 160*n + 83), S.Integers),
2224.             ImageSet(Lambda(n, 160*n + 93), S.Integers),
2225.             ImageSet(Lambda(n, 160*n + 147), S.Integers),
2226.             ImageSet(Lambda(n, 160*n + 157), S.Integers))
2227.     assert solveset(3 - Mod(x**4, 7), x, S.Integers) == EmptySet()
2228.     assert solveset(Mod(x**4, 17) - 13, x, S.Integers) == \
2229.             Union(ImageSet(Lambda(n, 17*n + 3), S.Integers),
2230.             ImageSet(Lambda(n, 17*n + 5), S.Integers),
2231.             ImageSet(Lambda(n, 17*n + 12), S.Integers),
2232.             ImageSet(Lambda(n, 17*n + 14), S.Integers))
2233.     # a.is_Pow tests
2234.     assert solveset(Mod(7**x, 41) - 15, x, S.Integers) == \
2235.             ImageSet(Lambda(n, 40*n + 3), S.Naturals0)
2236.     assert solveset(Mod(12**x, 21) - 18, x, S.Integers) == \
2237.             ImageSet(Lambda(n, 6*n + 2), S.Naturals0)
2238.     assert solveset(Mod(3**x, 4) - 3, x, S.Integers) == \
2239.             ImageSet(Lambda(n, 2*n + 1), S.Naturals0)
2240.     assert solveset(Mod(2**x, 7) - 2 , x, S.Integers) == \
2241.             ImageSet(Lambda(n, 3*n + 1), S.Naturals0)
2242.     assert solveset(Mod(3**(3**x), 4) - 3, x, S.Integers) == \
2243.             Intersection(ImageSet(Lambda(n, Intersection({log(2*n + 1)/log(3)},
2244.             S.Integers)), S.Naturals0), S.Integers)
2245.     # Not Implemented for m without primitive root
2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \
2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)
2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \
2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)
2250.     # domain intersection
2251.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Naturals0) == \
2252.             Intersection(ImageSet(Lambda(n, 7*n + 5), S.Integers), S.Naturals0)
2253.     # Complex args
2254.     assert solveset(Mod(x, 3) - I, x, S.Integers) == \
2255.             EmptySet()
2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \
2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)
2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \
2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)
2260.     # issue 13178
2261.     n = symbols('n', integer=True)
2262.     a = 742938285
2263.     z = 1898888478
2264.     m = 2**31 - 1
2265.     x = 20170816
2266.     assert solveset(x - Mod(a**n*z, m), n, S.Integers) == \
2267.             ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0)
2268.     assert solveset(x - Mod(a**n*z, m), n, S.Naturals0) == \
2269.             Intersection(ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0),
2270.             S.Naturals0)
2271.     assert solveset(x - Mod(a**(2*n)*z, m), n, S.Integers) == \
2272.             Intersection(ImageSet(Lambda(n, 1073741823*n + 50), S.Naturals0),
2273.             S.Integers)
2274.     assert solveset(x - Mod(a**(2*n + 7)*z, m), n, S.Integers) == EmptySet()
2275.     assert solveset(x - Mod(a**(n - 4)*z, m), n, S.Integers) == \
2276.             Intersection(ImageSet(Lambda(n, 2147483646*n + 104), S.Naturals0),
2277.             S.Integers)
2278. 
2279. @XFAIL
2280. def test_solve_modular_fail():
2281.     # issue 17373 (https://github.com/sympy/sympy/issues/17373)
2282.     assert solveset(Mod(x**4, 14) - 11, x, S.Integers) == \
2283.             Union(ImageSet(Lambda(n, 14*n + 3), S.Integers),
2284.             ImageSet(Lambda(n, 14*n + 11), S.Integers))
2285.     assert solveset(Mod(x**31, 74) - 43, x, S.Integers) == \
2286.             ImageSet(Lambda(n, 74*n + 31), S.Integers)
2287. 
2288. # end of modular tests

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 07:18:57,068 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user is reporting a bug where `solveset` raises a `NotImplementedError` instead of returning a `ConditionSet` for an unsolvable transcendental equation. The provided context is the entire test file for `solveset`, `sympy/solvers/tests/test_solveset.py`. This file contains numerous test cases that verify the expected behavior of `solveset` returning a `ConditionSet` when it cannot find an explicit solution for an equation. Therefore, the provided context is sufficient to find relevant test cases that demonstrate the desired functionality.' refined_query=''
2025-10-06 07:18:57,069 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='sympy/solvers/tests/test_solveset.py', content='1. from sympy.core.containers import Tuple\n2. from sympy.core.function import (Function, Lambda, nfloat)\n3. from sympy.core.mod import Mod\n4. from sympy.core.numbers import (E, I, Rational, oo, pi)\n5. from sympy.core.relational import (Eq, Gt,\n6.     Ne)\n7. from sympy.core.singleton import S\n8. from sympy.core.symbol import (Dummy, Symbol, symbols)\n9. from sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\n10. from sympy.functions.elementary.exponential import (LambertW, exp, log)\n11. from sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n12.     atanh, sinh, tanh, cosh, sech, coth)\n13. from sympy.functions.elementary.miscellaneous import sqrt, Min, Max\n14. from sympy.functions.elementary.piecewise import Piecewise\n15. from sympy.functions.elementary.trigonometric import (\n16.     TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n17.     cos, cot, csc, sec, sin, tan)\n18. from sympy.functions.special.error_functions import (erf, erfc,\n19.     erfcinv, erfinv)\n20. from sympy.logic.boolalg import And\n21. from sympy.matrices.dense import MutableDenseMatrix as Matrix\n22. from sympy.matrices.immutable import ImmutableDenseMatrix\n23. from sympy.polys.polytools import Poly\n24. from sympy.polys.rootoftools import CRootOf\n25. from sympy.sets.contains import Contains\n26. from sympy.sets.conditionset import ConditionSet\n27. from sympy.sets.fancysets import ImageSet\n28. from sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n29.     Intersection, Interval, Union, imageset, ProductSet)\n30. from sympy.tensor.indexed import Indexed\n31. from sympy.utilities.iterables import numbered_symbols\n32. \n33. from sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n34.     nocache_fail)\n35. from sympy.utilities.randtest import verify_numerically as tn\n36. from sympy.physics.units import cm\n37. \n38. from sympy.solvers.solveset import (\n39.     solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n40.     linsolve, _is_function_class_equation, invert_real, invert_complex,\n41.     solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n42.     _is_finite_with_finite_vars, _transolve, _is_exponential,\n43.     _solve_exponential, _is_logarithmic,\n44.     _solve_logarithm, _term_factors, _is_modular)\n45. \n46. \n47. a = Symbol(\'a\', real=True)\n48. b = Symbol(\'b\', real=True)\n49. c = Symbol(\'c\', real=True)\n50. x = Symbol(\'x\', real=True)\n51. y = Symbol(\'y\', real=True)\n52. z = Symbol(\'z\', real=True)\n53. q = Symbol(\'q\', real=True)\n54. m = Symbol(\'m\', real=True)\n55. n = Symbol(\'n\', real=True)\n56. \n57. \n58. def test_invert_real():\n59.     x = Symbol(\'x\', real=True)\n60.     y = Symbol(\'y\')\n61.     n = Symbol(\'n\')\n62. \n63.     def ireal(x, s=S.Reals):\n64.         return Intersection(s, x)\n65. \n66.     # issue 14223\n67.     assert invert_real(x, 0, x, Interval(1, 2)) == (x, S.EmptySet)\n68. \n69.     assert invert_real(exp(x), y, x) == (x, ireal(FiniteSet(log(y))))\n70. \n71.     y = Symbol(\'y\', positive=True)\n72.     n = Symbol(\'n\', real=True)\n73.     assert invert_real(x + 3, y, x) == (x, FiniteSet(y - 3))\n74.     assert invert_real(x*3, y, x) == (x, FiniteSet(y / 3))\n75. \n76.     assert invert_real(exp(x), y, x) == (x, FiniteSet(log(y)))\n77.     assert invert_real(exp(3*x), y, x) == (x, FiniteSet(log(y) / 3))\n78.     assert invert_real(exp(x + 3), y, x) == (x, FiniteSet(log(y) - 3))\n79. \n80.     assert invert_real(exp(x) + 3, y, x) == (x, ireal(FiniteSet(log(y - 3))))\n81.     assert invert_real(exp(x)*3, y, x) == (x, FiniteSet(log(y / 3)))\n82. \n83.     assert invert_real(log(x), y, x) == (x, FiniteSet(exp(y)))\n84.     assert invert_real(log(3*x), y, x) == (x, FiniteSet(exp(y) / 3))\n85.     assert invert_real(log(x + 3), y, x) == (x, FiniteSet(exp(y) - 3))\n86. \n87.     assert invert_real(Abs(x), y, x) == (x, FiniteSet(y, -y))\n88. \n89.     assert invert_real(2**x, y, x) == (x, FiniteSet(log(y)/log(2)))\n90.     assert invert_real(2**exp(x), y, x) == (x, ireal(FiniteSet(log(log(y)/log(2)))))\n91. \n92.     assert invert_real(x**2, y, x) == (x, FiniteSet(sqrt(y), -sqrt(y)))\n93.     assert invert_real(x**S.Half, y, x) == (x, FiniteSet(y**2))\n94. \n95.     raises(ValueError, lambda: invert_real(x, x, x))\n96.     raises(ValueError, lambda: invert_real(x**pi, y, x))\n97.     raises(ValueError, lambda: invert_real(S.One, y, x))\n98. \n99.     assert invert_real(x**31 + x, y, x) == (x**31 + x, FiniteSet(y))\n100. \n101.     lhs = x**31 + x\n102.     base_values =  FiniteSet(y - 1, -y - 1)\n103.     assert invert_real(Abs(x**31 + x + 1), y, x) == (lhs, base_values)\n104. \n105.     assert invert_real(sin(x), y, x) == \\\n106.         (x, imageset(Lambda(n, n*pi + (-1)**n*asin(y)), S.Integers))\n107. \n108.     assert invert_real(sin(exp(x)), y, x) == \\\n109.         (x, imageset(Lambda(n, log((-1)**n*asin(y) + n*pi)), S.Integers))\n110. \n111.     assert invert_real(csc(x), y, x) == \\\n112.         (x, imageset(Lambda(n, n*pi + (-1)**n*acsc(y)), S.Integers))\n113. \n114.     assert invert_real(csc(exp(x)), y, x) == \\\n115.         (x, imageset(Lambda(n, log((-1)**n*acsc(y) + n*pi)), S.Integers))\n116. \n117.     assert invert_real(cos(x), y, x) == \\\n118.         (x, Union(imageset(Lambda(n, 2*n*pi + acos(y)), S.Integers), \\\n119.                 imageset(Lambda(n, 2*n*pi - acos(y)), S.Integers)))\n120. \n121.     assert invert_real(cos(exp(x)), y, x) == \\\n122.         (x, Union(imageset(Lambda(n, log(2*n*pi + acos(y))), S.Integers), \\\n123.                 imageset(Lambda(n, log(2*n*pi - acos(y))), S.Integers)))\n124. \n125.     assert invert_real(sec(x), y, x) == \\\n126.         (x, Union(imageset(Lambda(n, 2*n*pi + asec(y)), S.Integers), \\\n127.                 imageset(Lambda(n, 2*n*pi - asec(y)), S.Integers)))\n128. \n129.     assert invert_real(sec(exp(x)), y, x) == \\\n130.         (x, Union(imageset(Lambda(n, log(2*n*pi + asec(y))), S.Integers), \\\n131.                 imageset(Lambda(n, log(2*n*pi - asec(y))), S.Integers)))\n132. \n133.     assert invert_real(tan(x), y, x) == \\\n134.         (x, imageset(Lambda(n, n*pi + atan(y)), S.Integers))\n135. \n136.     assert invert_real(tan(exp(x)), y, x) == \\\n137.         (x, imageset(Lambda(n, log(n*pi + atan(y))), S.Integers))\n138. \n139.     assert invert_real(cot(x), y, x) == \\\n140.         (x, imageset(Lambda(n, n*pi + acot(y)), S.Integers))\n141. \n142.     assert invert_real(cot(exp(x)), y, x) == \\\n143.         (x, imageset(Lambda(n, log(n*pi + acot(y))), S.Integers))\n144. \n145.     assert invert_real(tan(tan(x)), y, x) == \\\n146.         (tan(x), imageset(Lambda(n, n*pi + atan(y)), S.Integers))\n147. \n148.     x = Symbol(\'x\', positive=True)\n149.     assert invert_real(x**pi, y, x) == (x, FiniteSet(y**(1/pi)))\n150. \n151. \n152. def test_invert_complex():\n153.     assert invert_complex(x + 3, y, x) == (x, FiniteSet(y - 3))\n154.     assert invert_complex(x*3, y, x) == (x, FiniteSet(y / 3))\n155. \n156.     assert invert_complex(exp(x), y, x) == \\\n157.         (x, imageset(Lambda(n, I*(2*pi*n + arg(y)) + log(Abs(y))), S.Integers))\n158. \n159.     assert invert_complex(log(x), y, x) == (x, FiniteSet(exp(y)))\n160. \n161.     raises(ValueError, lambda: invert_real(1, y, x))\n162.     raises(ValueError, lambda: invert_complex(x, x, x))\n163.     raises(ValueError, lambda: invert_complex(x, x, 1))\n164. \n165.     # https://github.com/skirpichev/omg/issues/16\n166.     assert invert_complex(sinh(x), 0, x) != (x, FiniteSet(0))\n167. \n168. \n169. def test_domain_check():\n170.     assert domain_check(1/(1 + (1/(x+1))**2), x, -1) is False\n171.     assert domain_check(x**2, x, 0) is True\n172.     assert domain_check(x, x, oo) is False\n173.     assert domain_check(0, x, oo) is False\n174. \n175. \n176. def test_issue_11536():\n177.     assert solveset(0**x - 100, x, S.Reals) == S.EmptySet\n178.     assert solveset(0**x - 1, x, S.Reals) == FiniteSet(0)\n179. \n180. \n181. def test_issue_17479():\n182.     import sympy as sb\n183.     from sympy.solvers.solveset import nonlinsolve\n184.     x, y, z = sb.symbols("x, y, z")\n185.     f = (x**2 + y**2)**2 + (x**2 + z**2)**2 - 2*(2*x**2 + y**2 + z**2)\n186.     fx = sb.diff(f, x)\n187.     fy = sb.diff(f, y)\n188.     fz = sb.diff(f, z)\n189.     sol = nonlinsolve([fx, fy, fz], [x, y, z])\n190.     # FIXME: This previously gave 18 solutions and now gives 20 due to fixes\n191.     # in the handling of intersection of FiniteSets or possibly a small change\n192.     # to ImageSet._contains. However Using expand I can turn this into 16\n193.     # solutions either way:\n194.     #\n195.     #    >>> len(FiniteSet(*(Tuple(*(expand(w) for w in s)) for s in sol)))\n196.     #    16\n197.     #\n198.     assert len(sol) == 20\n199. \n200. \n201. def test_is_function_class_equation():\n202.     from sympy.abc import x, a\n203.     assert _is_function_class_equation(TrigonometricFunction,\n204.                                        tan(x), x) is True\n205.     assert _is_function_class_equation(TrigonometricFunction,\n206.                                        tan(x) - 1, x) is True\n207.     assert _is_function_class_equation(TrigonometricFunction,\n208.                                        tan(x) + sin(x), x) is True\n209.     assert _is_function_class_equation(TrigonometricFunction,\n210.                                        tan(x) + sin(x) - a, x) is True\n211.     assert _is_function_class_equation(TrigonometricFunction,\n212.                                        sin(x)*tan(x) + sin(x), x) is True\n213.     assert _is_function_class_equation(TrigonometricFunction,\n214.                                        sin(x)*tan(x + a) + sin(x), x) is True\n215.     assert _is_function_class_equation(TrigonometricFunction,\n216.                                        sin(x)*tan(x*a) + sin(x), x) is True\n217.     assert _is_function_class_equation(TrigonometricFunction,\n218.                                        a*tan(x) - 1, x) is True\n219.     assert _is_function_class_equation(TrigonometricFunction,\n220.                                        tan(x)**2 + sin(x) - 1, x) is True\n221.     assert _is_function_class_equation(TrigonometricFunction,\n222.                                        tan(x) + x, x) is False\n223.     assert _is_function_class_equation(TrigonometricFunction,\n224.                                        tan(x**2), x) is False\n225.     assert _is_function_class_equation(TrigonometricFunction,\n226.                                        tan(x**2) + sin(x), x) is False\n227.     assert _is_function_class_equation(TrigonometricFunction,\n228.                                        tan(x)**sin(x), x) is False\n229.     assert _is_function_class_equation(TrigonometricFunction,\n230.                                        tan(sin(x)) + sin(x), x) is False\n231.     assert _is_function_class_equation(HyperbolicFunction,\n232.                                        tanh(x), x) is True\n233.     assert _is_function_class_equation(HyperbolicFunction,\n234.                                        tanh(x) - 1, x) is True\n235.     assert _is_function_class_equation(HyperbolicFunction,\n236.                                        tanh(x) + sinh(x), x) is True\n237.     assert _is_function_class_equation(HyperbolicFunction,\n238.                                        tanh(x) + sinh(x) - a, x) is True\n239.     assert _is_function_class_equation(HyperbolicFunction,\n240.                                        sinh(x)*tanh(x) + sinh(x), x) is True\n241.     assert _is_function_class_equation(HyperbolicFunction,\n242.                                        sinh(x)*tanh(x + a) + sinh(x), x) is True\n243.     assert _is_function_class_equation(HyperbolicFunction,\n244.                                        sinh(x)*tanh(x*a) + sinh(x), x) is True\n245.     assert _is_function_class_equation(HyperbolicFunction,\n246.                                        a*tanh(x) - 1, x) is True\n247.     assert _is_function_class_equation(HyperbolicFunction,\n248.                                        tanh(x)**2 + sinh(x) - 1, x) is True\n249.     assert _is_function_class_equation(HyperbolicFunction,\n250.                                        tanh(x) + x, x) is False\n251.     assert _is_function_class_equation(HyperbolicFunction,\n252.                                        tanh(x**2), x) is False\n253.     assert _is_function_class_equation(HyperbolicFunction,\n254.                                        tanh(x**2) + sinh(x), x) is False\n255.     assert _is_function_class_equation(HyperbolicFunction,\n256.                                        tanh(x)**sinh(x), x) is False\n257.     assert _is_function_class_equation(HyperbolicFunction,\n258.                                        tanh(sinh(x)) + sinh(x), x) is False\n259. \n260. \n261. def test_garbage_input():\n262.     raises(ValueError, lambda: solveset_real([x], x))\n263.     assert solveset_real(x, 1) == S.EmptySet\n264.     assert solveset_real(x - 1, 1) == FiniteSet(x)\n265.     assert solveset_real(x, pi) == S.EmptySet\n266.     assert solveset_real(x, x**2) == S.EmptySet\n267. \n268.     raises(ValueError, lambda: solveset_complex([x], x))\n269.     assert solveset_complex(x, pi) == S.EmptySet\n270. \n271.     raises(ValueError, lambda: solveset((x, y), x))\n272.     raises(ValueError, lambda: solveset(x + 1, S.Reals))\n273.     raises(ValueError, lambda: solveset(x + 1, x, 2))\n274. \n275. \n276. def test_solve_mul():\n277.     assert solveset_real((a*x + b)*(exp(x) - 3), x) == \\\n278.         Union({log(3)}, Intersection({-b/a}, S.Reals))\n279.     anz = Symbol(\'anz\', nonzero=True)\n280.     assert solveset_real((anz*x + b)*(exp(x) - 3), x) == \\\n281.         FiniteSet(-b/anz, log(3))\n282.     assert solveset_real((2*x + 8)*(8 + exp(x)), x) == FiniteSet(S(-4))\n283.     assert solveset_real(x/log(x), x) == EmptySet()\n284. \n285. \n286. def test_solve_invert():\n287.     assert solveset_real(exp(x) - 3, x) == FiniteSet(log(3))\n288.     assert solveset_real(log(x) - 3, x) == FiniteSet(exp(3))\n289. \n290.     assert solveset_real(3**(x + 2), x) == FiniteSet()\n291.     assert solveset_real(3**(2 - x), x) == FiniteSet()\n292. \n293.     assert solveset_real(y - b*exp(a/x), x) == Intersection(\n294.         S.Reals, FiniteSet(a/log(y/b)))\n295. \n296.     # issue 4504\n297.     assert solveset_real(2**x - 10, x) == FiniteSet(1 + log(5)/log(2))\n298. \n299. \n300. def test_errorinverses():\n301.     assert solveset_real(erf(x) - S.Half, x) == \\\n302.         FiniteSet(erfinv(S.Half))\n303.     assert solveset_real(erfinv(x) - 2, x) == \\\n304.         FiniteSet(erf(2))\n305.     assert solveset_real(erfc(x) - S.One, x) == \\\n306.         FiniteSet(erfcinv(S.One))\n307.     assert solveset_real(erfcinv(x) - 2, x) == FiniteSet(erfc(2))\n308. \n309. \n310. def test_solve_polynomial():\n311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))\n312. \n313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)\n314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)\n315. \n316.     a11, a12, a21, a22, b1, b2 = symbols(\'a11, a12, a21, a22, b1, b2\')\n317. \n318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(\n319.         -2 + 3 ** S.Half,\n320.         S(4),\n321.         -2 - 3 ** S.Half)\n322. \n323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1\n328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0\n329. \n330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,\n331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)\n332. \n333. \n334. def test_return_root_of():\n335.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20\n336.     s = list(solveset_complex(f, x))\n337.     for root in s:\n338.         assert root.func == CRootOf\n339. \n340.     # if one uses solve to get the roots of a polynomial that has a CRootOf\n341.     # solution, make sure that the use of nfloat during the solve process\n342.     # doesn\'t fail. Note: if you want numerical solutions to a polynomial\n343.     # it is *much* faster to use nroots to get them than to solve the\n344.     # equation only to get CRootOf solutions which are then numerically\n345.     # evaluated. So for eq = x**5 + 3*x + 7 do Poly(eq).nroots() rather\n346.     # than [i.n() for i in solve(eq)] to get the numerical roots of eq.\n347.     assert nfloat(list(solveset_complex(x**5 + 3*x**3 + 7, x))[0],\n348.                   exponent=False) == CRootOf(x**5 + 3*x**3 + 7, 0).n()\n349. \n350.     sol = list(solveset_complex(x**6 - 2*x + 2, x))\n351.     assert all(isinstance(i, CRootOf) for i in sol) and len(sol) == 6\n352. \n353.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20\n354.     s = list(solveset_complex(f, x))\n355.     for root in s:\n356.         assert root.func == CRootOf\n357. \n358.     s = x**5 + 4*x**3 + 3*x**2 + Rational(7, 4)\n359.     assert solveset_complex(s, x) == \\\n360.         FiniteSet(*Poly(s*4, domain=\'ZZ\').all_roots())\n361. \n362.     # Refer issue #7876\n363.     eq = x*(x - 1)**2*(x + 1)*(x**6 - x + 1)\n364.     assert solveset_complex(eq, x) == \\\n365.         FiniteSet(-1, 0, 1, CRootOf(x**6 - x + 1, 0),\n366.                        CRootOf(x**6 - x + 1, 1),\n367.                        CRootOf(x**6 - x + 1, 2),\n368.                        CRootOf(x**6 - x + 1, 3),\n369.                        CRootOf(x**6 - x + 1, 4),\n370.                        CRootOf(x**6 - x + 1, 5))\n371. \n372. \n373. def test__has_rational_power():\n374.     from sympy.solvers.solveset import _has_rational_power\n375.     assert _has_rational_power(sqrt(2), x)[0] is False\n376.     assert _has_rational_power(x*sqrt(2), x)[0] is False\n377. \n378.     assert _has_rational_power(x**2*sqrt(x), x) == (True, 2)\n379.     assert _has_rational_power(sqrt(2)*x**Rational(1, 3), x) == (True, 3)\n380.     assert _has_rational_power(sqrt(x)*x**Rational(1, 3), x) == (True, 6)\n381. \n382. \n383. def test_solveset_sqrt_1():\n384.     assert solveset_real(sqrt(5*x + 6) - 2 - x, x) == \\\n385.         FiniteSet(-S.One, S(2))\n386.     assert solveset_real(sqrt(x - 1) - x + 7, x) == FiniteSet(10)\n387.     assert solveset_real(sqrt(x - 2) - 5, x) == FiniteSet(27)\n388.     assert solveset_real(sqrt(x) - 2 - 5, x) == FiniteSet(49)\n389.     assert solveset_real(sqrt(x**3), x) == FiniteSet(0)\n390.     assert solveset_real(sqrt(x - 1), x) == FiniteSet(1)\n391. \n392. \n393. def test_solveset_sqrt_2():\n394.     # http://tutorial.math.lamar.edu/Classes/Alg/SolveRadicalEqns.aspx#Solve_Rad_Ex2_a\n395.     assert solveset_real(sqrt(2*x - 1) - sqrt(x - 4) - 2, x) == \\\n396.         FiniteSet(S(5), S(13))\n397.     assert solveset_real(sqrt(x + 7) + 2 - sqrt(3 - x), x) == \\\n398.         FiniteSet(-6)\n399. \n400.     # http://www.purplemath.com/modules/solverad.htm\n401.     assert solveset_real(sqrt(17*x - sqrt(x**2 - 5)) - 7, x) == \\\n402.         FiniteSet(3)\n403. \n404.     eq = x + 1 - (x**4 + 4*x**3 - x)**Rational(1, 4)\n405.     assert solveset_real(eq, x) == FiniteSet(Rational(-1, 2), Rational(-1, 3))\n406. \n407.     eq = sqrt(2*x + 9) - sqrt(x + 1) - sqrt(x + 4)\n408.     assert solveset_real(eq, x) == FiniteSet(0)\n409. \n410.     eq = sqrt(x + 4) + sqrt(2*x - 1) - 3*sqrt(x - 1)\n411.     assert solveset_real(eq, x) == FiniteSet(5)\n412. \n413.     eq = sqrt(x)*sqrt(x - 7) - 12\n414.     assert solveset_real(eq, x) == FiniteSet(16)\n415. \n416.     eq = sqrt(x - 3) + sqrt(x) - 3\n417.     assert solveset_real(eq, x) == FiniteSet(4)\n418. \n419.     eq = sqrt(2*x**2 - 7) - (3 - x)\n420.     assert solveset_real(eq, x) == FiniteSet(-S(8), S(2))\n421. \n422.     # others\n423.     eq = sqrt(9*x**2 + 4) - (3*x + 2)\n424.     assert solveset_real(eq, x) == FiniteSet(0)\n425. \n426.     assert solveset_real(sqrt(x - 3) - sqrt(x) - 3, x) == FiniteSet()\n427. \n428.     eq = (2*x - 5)**Rational(1, 3) - 3\n429.     assert solveset_real(eq, x) == FiniteSet(16)\n430. \n431.     assert solveset_real(sqrt(x) + sqrt(sqrt(x)) - 4, x) == \\\n432.         FiniteSet((Rational(-1, 2) + sqrt(17)/2)**4)\n433. \n434.     eq = sqrt(x) - sqrt(x - 1) + sqrt(sqrt(x))\n435.     assert solveset_real(eq, x) == FiniteSet()\n436. \n437.     eq = (sqrt(x) + sqrt(x + 1) + sqrt(1 - x) - 6*sqrt(5)/5)\n438.     ans = solveset_real(eq, x)\n439.     ra = S(\'\'\'-1484/375 - 4*(-1/2 + sqrt(3)*I/2)*(-12459439/52734375 +\n440.     114*sqrt(12657)/78125)**(1/3) - 172564/(140625*(-1/2 +\n441.     sqrt(3)*I/2)*(-12459439/52734375 + 114*sqrt(12657)/78125)**(1/3))\'\'\')\n442.     rb = Rational(4, 5)\n443.     assert all(abs(eq.subs(x, i).n()) < 1e-10 for i in (ra, rb)) and \\\n444.         len(ans) == 2 and \\\n445.         set([i.n(chop=True) for i in ans]) == \\\n446.         set([i.n(chop=True) for i in (ra, rb)])\n447. \n448.     assert solveset_real(sqrt(x) + x**Rational(1, 3) +\n449.                                  x**Rational(1, 4), x) == FiniteSet(0)\n450. \n451.     assert solveset_real(x/sqrt(x**2 + 1), x) == FiniteSet(0)\n452. \n453.     eq = (x - y**3)/((y**2)*sqrt(1 - y**2))\n454.     assert solveset_real(eq, x) == FiniteSet(y**3)\n455. \n456.     # issue 4497\n457.     assert solveset_real(1/(5 + x)**Rational(1, 5) - 9, x) == \\\n458.         FiniteSet(Rational(-295244, 59049))\n459. \n460. \n461. @XFAIL\n462. def test_solve_sqrt_fail():\n463.     # this only works if we check real_root(eq.subs(x, Rational(1, 3)))\n464.     # but checksol doesn\'t work like that\n465.     eq = (x**3 - 3*x**2)**Rational(1, 3) + 1 - x\n466.     assert solveset_real(eq, x) == FiniteSet(Rational(1, 3))\n467. \n468. \n469. @slow\n470. def test_solve_sqrt_3():\n471.     R = Symbol(\'R\')\n472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)\n473.     sol = solveset_complex(eq, R)\n474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,\n475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +\n476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +\n477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +\n478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -\n479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]\n481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +\n483.             Rational(5, 3) +\n484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]\n487. \n488.     assert sol._args[0] == FiniteSet(*fset)\n489.     assert sol._args[1] == ConditionSet(\n490.         R,\n491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),\n492.         FiniteSet(*cset))\n493. \n494.     # the number of real roots will depend on the value of m: for m=1 there are 4\n495.     # and for m=-1 there are none.\n496.     eq = -sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) + sqrt((-m**2/2 - sqrt(\n497.         4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m - sqrt(\n498.             4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2)\n499.     unsolved_object = ConditionSet(q, Eq(sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) -\n500.         sqrt((-m**2/2 - sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m -\n501.         sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2), 0), S.Reals)\n502.     assert solveset_real(eq, q) == unsolved_object\n503. \n504. \n505. def test_solve_polynomial_symbolic_param():\n506.     assert solveset_complex((x**2 - 1)**2 - a, x) == \\\n507.         FiniteSet(sqrt(1 + sqrt(a)), -sqrt(1 + sqrt(a)),\n508.                   sqrt(1 - sqrt(a)), -sqrt(1 - sqrt(a)))\n509. \n510.     # issue 4507\n511.     assert solveset_complex(y - b/(1 + a*x), x) == \\\n512.         FiniteSet((b/y - 1)/a) - FiniteSet(-1/a)\n513. \n514.     # issue 4508\n515.     assert solveset_complex(y - b*x/(a + x), x) == \\\n516.         FiniteSet(-a*y/(y - b)) - FiniteSet(-a)\n517. \n518. \n519. def test_solve_rational():\n520.     assert solveset_real(1/x + 1, x) == FiniteSet(-S.One)\n521.     assert solveset_real(1/exp(x) - 1, x) == FiniteSet(0)\n522.     assert solveset_real(x*(1 - 5/x), x) == FiniteSet(5)\n523.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)\n524.     assert solveset_real((x**2/(7 - x)).diff(x), x) == \\\n525.         FiniteSet(S.Zero, S(14))\n526. \n527. \n528. def test_solveset_real_gen_is_pow():\n529.     assert solveset_real(sqrt(1) + 1, x) == EmptySet()\n530. \n531. \n532. def test_no_sol():\n533.     assert solveset(1 - oo*x) == EmptySet()\n534.     assert solveset(oo*x, x) == EmptySet()\n535.     assert solveset(oo*x - oo, x) == EmptySet()\n536.     assert solveset_real(4, x) == EmptySet()\n537.     assert solveset_real(exp(x), x) == EmptySet()\n538.     assert solveset_real(x**2 + 1, x) == EmptySet()\n539.     assert solveset_real(-3*a/sqrt(x), x) == EmptySet()\n540.     assert solveset_real(1/x, x) == EmptySet()\n541.     assert solveset_real(-(1 + x)/(2 + x)**2 + 1/(2 + x), x) == \\\n542.         EmptySet()\n543. \n544. \n545. def test_sol_zero_real():\n546.     assert solveset_real(0, x) == S.Reals\n547.     assert solveset(0, x, Interval(1, 2)) == Interval(1, 2)\n548.     assert solveset_real(-x**2 - 2*x + (x + 1)**2 - 1, x) == S.Reals\n549. \n550. \n551. def test_no_sol_rational_extragenous():\n552.     assert solveset_real((x/(x + 1) + 3)**(-2), x) == EmptySet()\n553.     assert solveset_real((x - 1)/(1 + 1/(x - 1)), x) == EmptySet()\n554. \n555. \n556. def test_solve_polynomial_cv_1a():\n557.     """\n558.     Test for solving on equations that can be converted to\n559.     a polynomial equation using the change of variable y -> x**Rational(p, q)\n560.     """\n561.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n562.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n563.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n564.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n565.     assert solveset_real(x*(x**(S.One / 3) - 3), x) == \\\n566.         FiniteSet(S.Zero, S(27))\n567. \n568. \n569. def test_solveset_real_rational():\n570.     """Test solveset_real for rational functions"""\n571.     assert solveset_real((x - y**3) / ((y**2)*sqrt(1 - y**2)), x) \\\n572.         == FiniteSet(y**3)\n573.     # issue 4486\n574.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)\n575. \n576. \n577. def test_solveset_real_log():\n578.     assert solveset_real(log((x-1)*(x+1)), x) == \\\n579.         FiniteSet(sqrt(2), -sqrt(2))\n580. \n581. \n582. def test_poly_gens():\n583.     assert solveset_real(4**(2*(x**2) + 2*x) - 8, x) == \\\n584.         FiniteSet(Rational(-3, 2), S.Half)\n585. \n586. \n587. def test_solve_abs():\n588.     x = Symbol(\'x\')\n589.     n = Dummy(\'n\')\n590.     raises(ValueError, lambda: solveset(Abs(x) - 1, x))\n591.     assert solveset(Abs(x) - n, x, S.Reals) == ConditionSet(x, Contains(n, Interval(0, oo)), {-n, n})\n592.     assert solveset_real(Abs(x) - 2, x) == FiniteSet(-2, 2)\n593.     assert solveset_real(Abs(x) + 2, x) is S.EmptySet\n594.     assert solveset_real(Abs(x + 3) - 2*Abs(x - 3), x) == \\\n595.         FiniteSet(1, 9)\n596.     assert solveset_real(2*Abs(x) - Abs(x - 1), x) == \\\n597.         FiniteSet(-1, Rational(1, 3))\n598. \n599.     sol = ConditionSet(\n600.             x,\n601.             And(\n602.                 Contains(b, Interval(0, oo)),\n603.                 Contains(a + b, Interval(0, oo)),\n604.                 Contains(a - b, Interval(0, oo))),\n605.             FiniteSet(-a - b - 3, -a + b - 3, a - b - 3, a + b - 3))\n606.     eq = Abs(Abs(x + 3) - a) - b\n607.     assert invert_real(eq, 0, x)[1] == sol\n608.     reps = {a: 3, b: 1}\n609.     eqab = eq.subs(reps)\n610.     for i in sol.subs(reps):\n611.         assert not eqab.subs(x, i)\n612.     assert solveset(Eq(sin(Abs(x)), 1), x, domain=S.Reals) == Union(\n613.         Intersection(Interval(0, oo),\n614.             ImageSet(Lambda(n, (-1)**n*pi/2 + n*pi), S.Integers)),\n615.         Intersection(Interval(-oo, 0),\n616.             ImageSet(Lambda(n, n*pi - (-1)**(-n)*pi/2), S.Integers)))\n617. \n618. \n619. \n620. def test_issue_9565():\n621.     assert solveset_real(Abs((x - 1)/(x - 5)) <= Rational(1, 3), x) == Interval(-1, 2)\n622. \n623. \n624. def test_issue_10069():\n625.     eq = abs(1/(x - 1)) - 1 > 0\n626.     u = Union(Interval.open(0, 1), Interval.open(1, 2))\n627.     assert solveset_real(eq, x) == u\n628. \n629. \n630. def test_real_imag_splitting():\n631.     a, b = symbols(\'a b\', real=True)\n632.     assert solveset_real(sqrt(a**2 - b**2) - 3, a) == \\\n633.         FiniteSet(-sqrt(b**2 + 9), sqrt(b**2 + 9))\n634.     assert solveset_real(sqrt(a**2 + b**2) - 3, a) != \\\n635.         S.EmptySet\n636. \n637. \n638. def test_units():\n639.     assert solveset_real(1/x - 1/(2*cm), x) == FiniteSet(2*cm)\n640. \n641. \n642. def test_solve_only_exp_1():\n643.     y = Symbol(\'y\', positive=True)\n644.     assert solveset_real(exp(x) - y, x) == FiniteSet(log(y))\n645.     assert solveset_real(exp(x) + exp(-x) - 4, x) == \\\n646.         FiniteSet(log(-sqrt(3) + 2), log(sqrt(3) + 2))\n647.     assert solveset_real(exp(x) + exp(-x) - y, x) != S.EmptySet\n648. \n649. \n650. def test_atan2():\n651.     # The .inverse() method on atan2 works only if x.is_real is True and the\n652.     # second argument is a real constant\n653.     assert solveset_real(atan2(x, 2) - pi/3, x) == FiniteSet(2*sqrt(3))\n654. \n655. \n656. def test_piecewise_solveset():\n657.     eq = Piecewise((x - 2, Gt(x, 2)), (2 - x, True)) - 3\n658.     assert set(solveset_real(eq, x)) == set(FiniteSet(-1, 5))\n659. \n660.     absxm3 = Piecewise(\n661.         (x - 3, 0 <= x - 3),\n662.         (3 - x, 0 > x - 3))\n663.     y = Symbol(\'y\', positive=True)\n664.     assert solveset_real(absxm3 - y, x) == FiniteSet(-y + 3, y + 3)\n665. \n666.     f = Piecewise(((x - 2)**2, x >= 0), (0, True))\n667.     assert solveset(f, x, domain=S.Reals) == Union(FiniteSet(2), Interval(-oo, 0, True, True))\n668. \n669.     assert solveset(\n670.         Piecewise((x + 1, x > 0), (I, True)) - I, x, S.Reals\n671.         ) == Interval(-oo, 0)\n672. \n673.     assert solveset(Piecewise((x - 1, Ne(x, I)), (x, True)), x) == FiniteSet(1)\n674. \n675. \n676. def test_solveset_complex_polynomial():\n677.     from sympy.abc import x, a, b, c\n678.     assert solveset_complex(a*x**2 + b*x + c, x) == \\\n679.         FiniteSet(-b/(2*a) - sqrt(-4*a*c + b**2)/(2*a),\n680.                   -b/(2*a) + sqrt(-4*a*c + b**2)/(2*a))\n681. \n682.     assert solveset_complex(x - y**3, y) == FiniteSet(\n683.         (-x**Rational(1, 3))/2 + I*sqrt(3)*x**Rational(1, 3)/2,\n684.         x**Rational(1, 3),\n685.         (-x**Rational(1, 3))/2 - I*sqrt(3)*x**Rational(1, 3)/2)\n686. \n687.     assert solveset_complex(x + 1/x - 1, x) == \\\n688.         FiniteSet(S.Half + I*sqrt(3)/2, S.Half - I*sqrt(3)/2)\n689. \n690. \n691. def test_sol_zero_complex():\n692.     assert solveset_complex(0, x) == S.Complexes\n693. \n694. \n695. def test_solveset_complex_rational():\n696.     assert solveset_complex((x - 1)*(x - I)/(x - 3), x) == \\\n697.         FiniteSet(1, I)\n698. \n699.     assert solveset_complex((x - y**3)/((y**2)*sqrt(1 - y**2)), x) == \\\n700.         FiniteSet(y**3)\n701.     assert solveset_complex(-x**2 - I, x) == \\\n702.         FiniteSet(-sqrt(2)/2 + sqrt(2)*I/2, sqrt(2)/2 - sqrt(2)*I/2)\n703. \n704. \n705. def test_solve_quintics():\n706.     skip("This test is too slow")\n707.     f = x**5 - 110*x**3 - 55*x**2 + 2310*x + 979\n708.     s = solveset_complex(f, x)\n709.     for root in s:\n710.         res = f.subs(x, root.n()).n()\n711.         assert tn(res, 0)\n712. \n713.     f = x**5 + 15*x + 12\n714.     s = solveset_complex(f, x)\n715.     for root in s:\n716.         res = f.subs(x, root.n()).n()\n717.         assert tn(res, 0)\n718. \n719. \n720. def test_solveset_complex_exp():\n721.     from sympy.abc import x, n\n722.     assert solveset_complex(exp(x) - 1, x) == \\\n723.         imageset(Lambda(n, I*2*n*pi), S.Integers)\n724.     assert solveset_complex(exp(x) - I, x) == \\\n725.         imageset(Lambda(n, I*(2*n*pi + pi/2)), S.Integers)\n726.     assert solveset_complex(1/exp(x), x) == S.EmptySet\n727.     assert solveset_complex(sinh(x).rewrite(exp), x) == \\\n728.         imageset(Lambda(n, n*pi*I), S.Integers)\n729. \n730. \n731. def test_solveset_real_exp():\n732.     from sympy.abc import x, y\n733.     assert solveset(Eq((-2)**x, 4), x, S.Reals) == FiniteSet(2)\n734.     assert solveset(Eq(-2**x, 4), x, S.Reals) == S.EmptySet\n735.     assert solveset(Eq((-3)**x, 27), x, S.Reals) == S.EmptySet\n736.     assert solveset(Eq((-5)**(x+1), 625), x, S.Reals) == FiniteSet(3)\n737.     assert solveset(Eq(2**(x-3), -16), x, S.Reals) == S.EmptySet\n738.     assert solveset(Eq((-3)**(x - 3), -3**39), x, S.Reals) == FiniteSet(42)\n739.     assert solveset(Eq(2**x, y), x, S.Reals) == Intersection(S.Reals, FiniteSet(log(y)/log(2)))\n740. \n741.     assert invert_real((-2)**(2*x) - 16, 0, x) == (x, FiniteSet(2))\n742. \n743. \n744. def test_solve_complex_log():\n745.     assert solveset_complex(log(x), x) == FiniteSet(1)\n746.     assert solveset_complex(1 - log(a + 4*x**2), x) == \\\n747.         FiniteSet(-sqrt(-a + E)/2, sqrt(-a + E)/2)\n748. \n749. \n750. def test_solve_complex_sqrt():\n751.     assert solveset_complex(sqrt(5*x + 6) - 2 - x, x) == \\\n752.         FiniteSet(-S.One, S(2))\n753.     assert solveset_complex(sqrt(5*x + 6) - (2 + 2*I) - x, x) == \\\n754.         FiniteSet(-S(2), 3 - 4*I)\n755.     assert solveset_complex(4*x*(1 - a * sqrt(x)), x) == \\\n756.         FiniteSet(S.Zero, 1 / a ** 2)\n757. \n758. \n759. def test_solveset_complex_tan():\n760.     s = solveset_complex(tan(x).rewrite(exp), x)\n761.     assert s == imageset(Lambda(n, pi*n), S.Integers) - \\\n762.         imageset(Lambda(n, pi*n + pi/2), S.Integers)\n763. \n764. \n765. @nocache_fail\n766. def test_solve_trig():\n767.     from sympy.abc import n\n768.     assert solveset_real(sin(x), x) == \\\n769.         Union(imageset(Lambda(n, 2*pi*n), S.Integers),\n770.               imageset(Lambda(n, 2*pi*n + pi), S.Integers))\n771. \n772.     assert solveset_real(sin(x) - 1, x) == \\\n773.         imageset(Lambda(n, 2*pi*n + pi/2), S.Integers)\n774. \n775.     assert solveset_real(cos(x), x) == \\\n776.         Union(imageset(Lambda(n, 2*pi*n + pi/2), S.Integers),\n777.               imageset(Lambda(n, 2*pi*n + pi*Rational(3, 2)), S.Integers))\n778. \n779.     assert solveset_real(sin(x) + cos(x), x) == \\\n780.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(3, 4)), S.Integers),\n781.               imageset(Lambda(n, 2*n*pi + pi*Rational(7, 4)), S.Integers))\n782. \n783.     assert solveset_real(sin(x)**2 + cos(x)**2, x) == S.EmptySet\n784. \n785.     # This fails when running with the cache off:\n786.     assert solveset_complex(cos(x) - S.Half, x) == \\\n787.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(5, 3)), S.Integers),\n788.               imageset(Lambda(n, 2*n*pi + pi/3), S.Integers))\n789. \n790.     y, a = symbols(\'y,a\')\n791.     assert solveset(sin(y + a) - sin(y), a, domain=S.Reals) == \\\n792.         Union(ImageSet(Lambda(n, 2*n*pi), S.Integers),\n793.         Intersection(ImageSet(Lambda(n, -I*(I*(\n794.         2*n*pi + arg(-exp(-2*I*y))) +\n795.         2*im(y))), S.Integers), S.Reals))\n796. \n797.     assert solveset_real(sin(2*x)*cos(x) + cos(2*x)*sin(x)-1, x) == \\\n798.                             ImageSet(Lambda(n, n*pi*Rational(2, 3) + pi/6), S.Integers)\n799. \n800.     # Tests for _solve_trig2() function\n801.     assert solveset_real(2*cos(x)*cos(2*x) - 1, x) == \\\n802.           Union(ImageSet(Lambda(n, 2*n*pi + 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +\n803.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +\n804.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6)))), S.Integers),\n805.                   ImageSet(Lambda(n, 2*n*pi - 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +\n806.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +\n807.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6))) +\n808.                   2*pi), S.Integers))\n809. \n810.     assert solveset_real(2*tan(x)*sin(x) + 1, x) == Union(\n811.         ImageSet(Lambda(n, 2*n*pi + atan(sqrt(2)*sqrt(-1 +sqrt(17))/\n812.             (1 - sqrt(17))) + pi), S.Integers),\n813.         ImageSet(Lambda(n, 2*n*pi - atan(sqrt(2)*sqrt(-1 + sqrt(17))/\n814.             (1 - sqrt(17))) + pi), S.Integers))\n815. \n816.     assert solveset_real(cos(2*x)*cos(4*x) - 1, x) == \\\n817.                             ImageSet(Lambda(n, n*pi), S.Integers)\n818. \n819. \n820. def test_solve_hyperbolic():\n821.     # actual solver: _solve_trig1\n822.     n = Dummy(\'n\')\n823.     assert solveset(sinh(x) + cosh(x), x) == S.EmptySet\n824.     assert solveset(sinh(x) + cos(x), x) == ConditionSet(x,\n825.         Eq(cos(x) + sinh(x), 0), S.Complexes)\n826.     assert solveset_real(sinh(x) + sech(x), x) == FiniteSet(\n827.         log(sqrt(sqrt(5) - 2)))\n828.     assert solveset_real(3*cosh(2*x) - 5, x) == FiniteSet(\n829.         log(sqrt(3)/3), log(sqrt(3)))\n830.     assert solveset_real(sinh(x - 3) - 2, x) == FiniteSet(\n831.         log((2 + sqrt(5))*exp(3)))\n832.     assert solveset_real(cosh(2*x) + 2*sinh(x) - 5, x) == FiniteSet(\n833.         log(-2 + sqrt(5)), log(1 + sqrt(2)))\n834.     assert solveset_real((coth(x) + sinh(2*x))/cosh(x) - 3, x) == FiniteSet(\n835.         log(S.Half + sqrt(5)/2), log(1 + sqrt(2)))\n836.     assert solveset_real(cosh(x)*sinh(x) - 2, x) == FiniteSet(\n837.         log(sqrt(4 + sqrt(17))))\n838.     assert solveset_real(sinh(x) + tanh(x) - 1, x) == FiniteSet(\n839.         log(sqrt(2)/2 + sqrt(-S(1)/2 + sqrt(2))))\n840.     assert solveset_complex(sinh(x) - I/2, x) == Union(\n841.         ImageSet(Lambda(n, I*(2*n*pi + 5*pi/6)), S.Integers),\n842.         ImageSet(Lambda(n, I*(2*n*pi + pi/6)), S.Integers))\n843.     assert solveset_complex(sinh(x) + sech(x), x) == Union(\n844.         ImageSet(Lambda(n, 2*n*I*pi + log(sqrt(-2 + sqrt(5)))), S.Integers),\n845.         ImageSet(Lambda(n, I*(2*n*pi + pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers),\n846.         ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sqrt(-2 + sqrt(5)))), S.Integers),\n847.         ImageSet(Lambda(n, I*(2*n*pi - pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers))\n848.     # issues #9606 / #9531:\n849.     assert solveset(sinh(x), x, S.Reals) == FiniteSet(0)\n850.     assert solveset(sinh(x), x, S.Complexes) == Union(\n851.         ImageSet(Lambda(n, I*(2*n*pi + pi)), S.Integers),\n852.         ImageSet(Lambda(n, 2*n*I*pi), S.Integers))\n853. \n854. \n855. def test_solve_invalid_sol():\n856.     assert 0 not in solveset_real(sin(x)/x, x)\n857.     assert 0 not in solveset_complex((exp(x) - 1)/x, x)\n858. \n859. \n860. @XFAIL\n861. def test_solve_trig_simplified():\n862.     from sympy.abc import n\n863.     assert solveset_real(sin(x), x) == \\\n864.         imageset(Lambda(n, n*pi), S.Integers)\n865. \n866.     assert solveset_real(cos(x), x) == \\\n867.         imageset(Lambda(n, n*pi + pi/2), S.Integers)\n868. \n869.     assert solveset_real(cos(x) + sin(x), x) == \\\n870.         imageset(Lambda(n, n*pi - pi/4), S.Integers)\n871. \n872. \n873. @XFAIL\n874. def test_solve_lambert():\n875.     assert solveset_real(x*exp(x) - 1, x) == FiniteSet(LambertW(1))\n876.     assert solveset_real(exp(x) + x, x) == FiniteSet(-LambertW(1))\n877.     assert solveset_real(x + 2**x, x) == \\\n878.         FiniteSet(-LambertW(log(2))/log(2))\n879. \n880.     # issue 4739\n881.     ans = solveset_real(3*x + 5 + 2**(-5*x + 3), x)\n882.     assert ans == FiniteSet(Rational(-5, 3) +\n883.                             LambertW(-10240*2**Rational(1, 3)*log(2)/3)/(5*log(2)))\n884. \n885.     eq = 2*(3*x + 4)**5 - 6*7**(3*x + 9)\n886.     result = solveset_real(eq, x)\n887.     ans = FiniteSet((log(2401) +\n888.                      5*LambertW(-log(7**(7*3**Rational(1, 5)/5))))/(3*log(7))/-1)\n889.     assert result == ans\n890.     assert solveset_real(eq.expand(), x) == result\n891. \n892.     assert solveset_real(5*x - 1 + 3*exp(2 - 7*x), x) == \\\n893.         FiniteSet(Rational(1, 5) + LambertW(-21*exp(Rational(3, 5))/5)/7)\n894. \n895.     assert solveset_real(2*x + 5 + log(3*x - 2), x) == \\\n896.         FiniteSet(Rational(2, 3) + LambertW(2*exp(Rational(-19, 3))/3)/2)\n897. \n898.     assert solveset_real(3*x + log(4*x), x) == \\\n899.         FiniteSet(LambertW(Rational(3, 4))/3)\n900. \n901.     assert solveset_real(x**x - 2) == FiniteSet(exp(LambertW(log(2))))\n902. \n903.     a = Symbol(\'a\')\n904.     assert solveset_real(-a*x + 2*x*log(x), x) == FiniteSet(exp(a/2))\n905.     a = Symbol(\'a\', real=True)\n906.     assert solveset_real(a/x + exp(x/2), x) == \\\n907.         FiniteSet(2*LambertW(-a/2))\n908.     assert solveset_real((a/x + exp(x/2)).diff(x), x) == \\\n909.         FiniteSet(4*LambertW(sqrt(2)*sqrt(a)/4))\n910. \n911.     # coverage test\n912.     assert solveset_real(tanh(x + 3)*tanh(x - 3) - 1, x) == EmptySet()\n913. \n914.     assert solveset_real((x**2 - 2*x + 1).subs(x, log(x) + 3*x), x) == \\\n915.         FiniteSet(LambertW(3*S.Exp1)/3)\n916.     assert solveset_real((x**2 - 2*x + 1).subs(x, (log(x) + 3*x)**2 - 1), x) == \\\n917.         FiniteSet(LambertW(3*exp(-sqrt(2)))/3, LambertW(3*exp(sqrt(2)))/3)\n918.     assert solveset_real((x**2 - 2*x - 2).subs(x, log(x) + 3*x), x) == \\\n919.         FiniteSet(LambertW(3*exp(1 + sqrt(3)))/3, LambertW(3*exp(-sqrt(3) + 1))/3)\n920.     assert solveset_real(x*log(x) + 3*x + 1, x) == \\\n921.         FiniteSet(exp(-3 + LambertW(-exp(3))))\n922.     eq = (x*exp(x) - 3).subs(x, x*exp(x))\n923.     assert solveset_real(eq, x) == \\\n924.         FiniteSet(LambertW(3*exp(-LambertW(3))))\n925. \n926.     assert solveset_real(3*log(a**(3*x + 5)) + a**(3*x + 5), x) == \\\n927.         FiniteSet(-((log(a**5) + LambertW(Rational(1, 3)))/(3*log(a))))\n928.     p = symbols(\'p\', positive=True)\n929.     assert solveset_real(3*log(p**(3*x + 5)) + p**(3*x + 5), x) == \\\n930.         FiniteSet(\n931.         log((-3**Rational(1, 3) - 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),\n932.         log((-3**Rational(1, 3) + 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),\n933.         log((3*LambertW(Rational(1, 3))/p**5)**(1/(3*log(p)))),)  # checked numerically\n934.     # check collection\n935.     b = Symbol(\'b\')\n936.     eq = 3*log(a**(3*x + 5)) + b*log(a**(3*x + 5)) + a**(3*x + 5)\n937.     assert solveset_real(eq, x) == FiniteSet(\n938.         -((log(a**5) + LambertW(1/(b + 3)))/(3*log(a))))\n939. \n940.     # issue 4271\n941.     assert solveset_real((a/x + exp(x/2)).diff(x, 2), x) == FiniteSet(\n942.         6*LambertW((-1)**Rational(1, 3)*a**Rational(1, 3)/3))\n943. \n944.     assert solveset_real(x**3 - 3**x, x) == \\\n945.         FiniteSet(-3/log(3)*LambertW(-log(3)/3))\n946.     assert solveset_real(3**cos(x) - cos(x)**3) == FiniteSet(\n947.         acos(-3*LambertW(-log(3)/3)/log(3)))\n948. \n949.     assert solveset_real(x**2 - 2**x, x) == \\\n950.         solveset_real(-x**2 + 2**x, x)\n951. \n952.     assert solveset_real(3*log(x) - x*log(3)) == FiniteSet(\n953.         -3*LambertW(-log(3)/3)/log(3),\n954.         -3*LambertW(-log(3)/3, -1)/log(3))\n955. \n956.     assert solveset_real(LambertW(2*x) - y) == FiniteSet(\n957.         y*exp(y)/2)\n958. \n959. \n960. @XFAIL\n961. def test_other_lambert():\n962.     a = Rational(6, 5)\n963.     assert solveset_real(x**a - a**x, x) == FiniteSet(\n964.         a, -a*LambertW(-log(a)/a)/log(a))\n965. \n966. \n967. def test_solveset():\n968.     x = Symbol(\'x\')\n969.     f = Function(\'f\')\n970.     raises(ValueError, lambda: solveset(x + y))\n971.     assert solveset(x, 1) == S.EmptySet\n972.     assert solveset(f(1)**2 + y + 1, f(1)\n973.         ) == FiniteSet(-sqrt(-y - 1), sqrt(-y - 1))\n974.     assert solveset(f(1)**2 - 1, f(1), S.Reals) == FiniteSet(-1, 1)\n975.     assert solveset(f(1)**2 + 1, f(1)) == FiniteSet(-I, I)\n976.     assert solveset(x - 1, 1) == FiniteSet(x)\n977.     assert solveset(sin(x) - cos(x), sin(x)) == FiniteSet(cos(x))\n978. \n979.     assert solveset(0, domain=S.Reals) == S.Reals\n980.     assert solveset(1) == S.EmptySet\n981.     assert solveset(True, domain=S.Reals) == S.Reals  # issue 10197\n982.     assert solveset(False, domain=S.Reals) == S.EmptySet\n983. \n984.     assert solveset(exp(x) - 1, domain=S.Reals) == FiniteSet(0)\n985.     assert solveset(exp(x) - 1, x, S.Reals) == FiniteSet(0)\n986.     assert solveset(Eq(exp(x), 1), x, S.Reals) == FiniteSet(0)\n987.     assert solveset(exp(x) - 1, exp(x), S.Reals) == FiniteSet(1)\n988.     A = Indexed(\'A\', x)\n989.     assert solveset(A - 1, A, S.Reals) == FiniteSet(1)\n990. \n991.     assert solveset(x - 1 >= 0, x, S.Reals) == Interval(1, oo)\n992.     assert solveset(exp(x) - 1 >= 0, x, S.Reals) == Interval(0, oo)\n993. \n994.     assert solveset(exp(x) - 1, x) == imageset(Lambda(n, 2*I*pi*n), S.Integers)\n995.     assert solveset(Eq(exp(x), 1), x) == imageset(Lambda(n, 2*I*pi*n),\n996.                                                   S.Integers)\n997.     # issue 13825\n998.     assert solveset(x**2 + f(0) + 1, x) == {-sqrt(-f(0) - 1), sqrt(-f(0) - 1)}\n999. \n1000. \n1001. def test__solveset_multi():\n1002.     from sympy.solvers.solveset import _solveset_multi\n1003.     from sympy import Reals\n1004. \n1005.     # Basic univariate case:\n1006.     from sympy.abc import x\n1007.     assert _solveset_multi([x**2-1], [x], [S.Reals]) == FiniteSet((1,), (-1,))\n1008. \n1009.     # Linear systems of two equations\n1010.     from sympy.abc import x, y\n1011.     assert _solveset_multi([x+y, x+1], [x, y], [Reals, Reals]) == FiniteSet((-1, 1))\n1012.     assert _solveset_multi([x+y, x+1], [y, x], [Reals, Reals]) == FiniteSet((1, -1))\n1013.     assert _solveset_multi([x+y, x-y-1], [x, y], [Reals, Reals]) == FiniteSet((S(1)/2, -S(1)/2))\n1014.     assert _solveset_multi([x-1, y-2], [x, y], [Reals, Reals]) == FiniteSet((1, 2))\n1015.     #assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == ImageSet(Lambda(x, (x, -x)), Reals)\n1016.     assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == Union(\n1017.             ImageSet(Lambda(((x,),), (x, -x)), ProductSet(Reals)),\n1018.             ImageSet(Lambda(((y,),), (-y, y)), ProductSet(Reals)))\n1019.     assert _solveset_multi([x+y, x+y+1], [x, y], [Reals, Reals]) == S.EmptySet\n1020.     assert _solveset_multi([x+y, x-y, x-1], [x, y], [Reals, Reals]) == S.EmptySet\n1021.     assert _solveset_multi([x+y, x-y, x-1], [y, x], [Reals, Reals]) == S.EmptySet\n1022. \n1023.     # Systems of three equations:\n1024.     from sympy.abc import x, y, z\n1025.     assert _solveset_multi([x+y+z-1, x+y-z-2, x-y-z-3], [x, y, z], [Reals,\n1026.         Reals, Reals]) == FiniteSet((2, -S.Half, -S.Half))\n1027. \n1028.     # Nonlinear systems:\n1029.     from sympy.abc import r, theta, z, x, y\n1030.     assert _solveset_multi([x**2+y**2-2, x+y], [x, y], [Reals, Reals]) == FiniteSet((-1, 1), (1, -1))\n1031.     assert _solveset_multi([x**2-1, y], [x, y], [Reals, Reals]) == FiniteSet((1, 0), (-1, 0))\n1032.     #assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(\n1033.     #        ImageSet(Lambda(x, (x, -x)), Reals), ImageSet(Lambda(x, (x, x)), Reals))\n1034.     assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(\n1035.             ImageSet(Lambda(((x,),), (x, -Abs(x))), ProductSet(Reals)),\n1036.             ImageSet(Lambda(((x,),), (x, Abs(x))), ProductSet(Reals)),\n1037.             ImageSet(Lambda(((y,),), (-Abs(y), y)), ProductSet(Reals)),\n1038.             ImageSet(Lambda(((y,),), (Abs(y), y)), ProductSet(Reals)))\n1039.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [theta, r],\n1040.             [Interval(0, pi), Interval(-1, 1)]) == FiniteSet((0, 1), (pi, -1))\n1041.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [r, theta],\n1042.             [Interval(0, 1), Interval(0, pi)]) == FiniteSet((1, 0))\n1043.     #assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],\n1044.     #        [Interval(0, 1), Interval(0, pi)]) == ?\n1045.     assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],\n1046.             [Interval(0, 1), Interval(0, pi)]) == Union(\n1047.             ImageSet(Lambda(((r,),), (r, 0)), ImageSet(Lambda(r, (r,)), Interval(0, 1))),\n1048.             ImageSet(Lambda(((theta,),), (0, theta)), ImageSet(Lambda(theta, (theta,)), Interval(0, pi))))\n1049. \n1050. \n1051. def test_conditionset():\n1052.     assert solveset(Eq(sin(x)**2 + cos(x)**2, 1), x, domain=S.Reals) == \\\n1053.         ConditionSet(x, True, S.Reals)\n1054. \n1055.     assert solveset(Eq(x**2 + x*sin(x), 1), x, domain=S.Reals\n1056.         ) == ConditionSet(x, Eq(x**2 + x*sin(x) - 1, 0), S.Reals)\n1057. \n1058.     assert solveset(Eq(-I*(exp(I*x) - exp(-I*x))/2, 1), x\n1059.         ) == imageset(Lambda(n, 2*n*pi + pi/2), S.Integers)\n1060. \n1061.     assert solveset(x + sin(x) > 1, x, domain=S.Reals\n1062.         ) == ConditionSet(x, x + sin(x) > 1, S.Reals)\n1063. \n1064.     assert solveset(Eq(sin(Abs(x)), x), x, domain=S.Reals\n1065.         ) == ConditionSet(x, Eq(-x + sin(Abs(x)), 0), S.Reals)\n1066. \n1067.     assert solveset(y**x-z, x, S.Reals) == \\\n1068.         ConditionSet(x, Eq(y**x - z, 0), S.Reals)\n1069. \n1070. \n1071. @XFAIL\n1072. def test_conditionset_equality():\n1073.     \'\'\' Checking equality of different representations of ConditionSet\'\'\'\n1074.     assert solveset(Eq(tan(x), y), x) == ConditionSet(x, Eq(tan(x), y), S.Complexes)\n1075. \n1076. \n1077. def test_solveset_domain():\n1078.     x = Symbol(\'x\')\n1079. \n1080.     assert solveset(x**2 - x - 6, x, Interval(0, oo)) == FiniteSet(3)\n1081.     assert solveset(x**2 - 1, x, Interval(0, oo)) == FiniteSet(1)\n1082.     assert solveset(x**4 - 16, x, Interval(0, 10)) == FiniteSet(2)\n1083. \n1084. \n1085. def test_improve_coverage():\n1086.     from sympy.solvers.solveset import _has_rational_power\n1087.     x = Symbol(\'x\')\n1088.     solution = solveset(exp(x) + sin(x), x, S.Reals)\n1089.     unsolved_object = ConditionSet(x, Eq(exp(x) + sin(x), 0), S.Reals)\n1090.     assert solution == unsolved_object\n1091. \n1092.     assert _has_rational_power(sin(x)*exp(x) + 1, x) == (False, S.One)\n1093.     assert _has_rational_power((sin(x)**2)*(exp(x) + 1)**3, x) == (False, S.One)\n1094. \n1095. \n1096. def test_issue_9522():\n1097.     x = Symbol(\'x\')\n1098.     expr1 = Eq(1/(x**2 - 4) + x, 1/(x**2 - 4) + 2)\n1099.     expr2 = Eq(1/x + x, 1/x)\n1100. \n1101.     assert solveset(expr1, x, S.Reals) == EmptySet()\n1102.     assert solveset(expr2, x, S.Reals) == EmptySet()\n1103. \n1104. \n1105. def test_solvify():\n1106.     x = Symbol(\'x\')\n1107. \n1108.     assert solvify(x**2 + 10, x, S.Reals) == []\n1109.     assert solvify(x**3 + 1, x, S.Complexes) == [-1, S.Half - sqrt(3)*I/2,\n1110.                                                  S.Half + sqrt(3)*I/2]\n1111.     assert solvify(log(x), x, S.Reals) == [1]\n1112.     assert solvify(cos(x), x, S.Reals) == [pi/2, pi*Rational(3, 2)]\n1113.     assert solvify(sin(x) + 1, x, S.Reals) == [pi*Rational(3, 2)]\n1114.     raises(NotImplementedError, lambda: solvify(sin(exp(x)), x, S.Complexes))\n1115. \n1116. \n1117. def test_abs_invert_solvify():\n1118.     assert solvify(sin(Abs(x)), x, S.Reals) is None\n1119. \n1120. \n1121. def test_linear_eq_to_matrix():\n1122.     x, y, z = symbols(\'x, y, z\')\n1123.     a, b, c, d, e, f, g, h, i, j, k, l = symbols(\'a:l\')\n1124. \n1125.     eqns1 = [2*x + y - 2*z - 3, x - y - z, x + y + 3*z - 12]\n1126.     eqns2 = [Eq(3*x + 2*y - z, 1), Eq(2*x - 2*y + 4*z, -2), -2*x + y - 2*z]\n1127. \n1128.     A, B = linear_eq_to_matrix(eqns1, x, y, z)\n1129.     assert A == Matrix([[2, 1, -2], [1, -1, -1], [1, 1, 3]])\n1130.     assert B == Matrix([[3], [0], [12]])\n1131. \n1132.     A, B = linear_eq_to_matrix(eqns2, x, y, z)\n1133.     assert A == Matrix([[3, 2, -1], [2, -2, 4], [-2, 1, -2]])\n1134.     assert B == Matrix([[1], [-2], [0]])\n1135. \n1136.     # Pure symbolic coefficients\n1137.     eqns3 = [a*b*x + b*y + c*z - d, e*x + d*x + f*y + g*z - h, i*x + j*y + k*z - l]\n1138.     A, B = linear_eq_to_matrix(eqns3, x, y, z)\n1139.     assert A == Matrix([[a*b, b, c], [d + e, f, g], [i, j, k]])\n1140.     assert B == Matrix([[d], [h], [l]])\n1141. \n1142.     # raise ValueError if\n1143.     # 1) no symbols are given\n1144.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3))\n1145.     # 2) there are duplicates\n1146.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, x, y]))\n1147.     # 3) there are non-symbols\n1148.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, 1/a, y]))\n1149.     # 4) a nonlinear term is detected in the original expression\n1150.     raises(ValueError, lambda: linear_eq_to_matrix(Eq(1/x + x, 1/x)))\n1151. \n1152.     assert linear_eq_to_matrix(1, x) == (Matrix([[0]]), Matrix([[-1]]))\n1153.     # issue 15195\n1154.     assert linear_eq_to_matrix(x + y*(z*(3*x + 2) + 3), x) == (\n1155.         Matrix([[3*y*z + 1]]), Matrix([[-y*(2*z + 3)]]))\n1156.     assert linear_eq_to_matrix(Matrix(\n1157.         [[a*x + b*y - 7], [5*x + 6*y - c]]), x, y) == (\n1158.         Matrix([[a, b], [5, 6]]), Matrix([[7], [c]]))\n1159. \n1160.     # issue 15312\n1161.     assert linear_eq_to_matrix(Eq(x + 2, 1), x) == (\n1162.         Matrix([[1]]), Matrix([[-1]]))\n1163. \n1164. \n1165. def test_issue_16577():\n1166.     assert linear_eq_to_matrix(Eq(a*(2*x + 3*y) + 4*y, 5), x, y) == (\n1167.         Matrix([[2*a, 3*a + 4]]), Matrix([[5]]))\n1168. \n1169. \n1170. def test_linsolve():\n1171.     x, y, z, u, v, w = symbols("x, y, z, u, v, w")\n1172.     x1, x2, x3, x4 = symbols(\'x1, x2, x3, x4\')\n1173. \n1174.     # Test for different input forms\n1175. \n1176.     M = Matrix([[1, 2, 1, 1, 7], [1, 2, 2, -1, 12], [2, 4, 0, 6, 4]])\n1177.     system1 = A, b = M[:, :-1], M[:, -1]\n1178.     Eqns = [x1 + 2*x2 + x3 + x4 - 7, x1 + 2*x2 + 2*x3 - x4 - 12,\n1179.             2*x1 + 4*x2 + 6*x4 - 4]\n1180. \n1181.     sol = FiniteSet((-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))\n1182.     assert linsolve(Eqns, (x1, x2, x3, x4)) == sol\n1183.     assert linsolve(Eqns, *(x1, x2, x3, x4)) == sol\n1184.     assert linsolve(system1, (x1, x2, x3, x4)) == sol\n1185.     assert linsolve(system1, *(x1, x2, x3, x4)) == sol\n1186.     # issue 9667 - symbols can be Dummy symbols\n1187.     x1, x2, x3, x4 = symbols(\'x:4\', cls=Dummy)\n1188.     assert linsolve(system1, x1, x2, x3, x4) == FiniteSet(\n1189.         (-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))\n1190. \n1191.     # raise ValueError for garbage value\n1192.     raises(ValueError, lambda: linsolve(Eqns))\n1193.     raises(ValueError, lambda: linsolve(x1))\n1194.     raises(ValueError, lambda: linsolve(x1, x2))\n1195.     raises(ValueError, lambda: linsolve((A,), x1, x2))\n1196.     raises(ValueError, lambda: linsolve(A, b, x1, x2))\n1197. \n1198.     #raise ValueError if equations are non-linear in given variables\n1199.     raises(ValueError, lambda: linsolve([x + y - 1, x ** 2 + y - 3], [x, y]))\n1200.     raises(ValueError, lambda: linsolve([cos(x) + y, x + y], [x, y]))\n1201.     assert linsolve([x + z - 1, x ** 2 + y - 3], [z, y]) == {(-x + 1, -x**2 + 3)}\n1202. \n1203.     # Fully symbolic test\n1204.     a, b, c, d, e, f = symbols(\'a, b, c, d, e, f\')\n1205.     A = Matrix([[a, b], [c, d]])\n1206.     B = Matrix([[e], [f]])\n1207.     system2 = (A, B)\n1208.     sol = FiniteSet(((-b*f + d*e)/(a*d - b*c), (a*f - c*e)/(a*d - b*c)))\n1209.     assert linsolve(system2, [x, y]) == sol\n1210. \n1211.     # No solution\n1212.     A = Matrix([[1, 2, 3], [2, 4, 6], [3, 6, 9]])\n1213.     b = Matrix([0, 0, 1])\n1214.     assert linsolve((A, b), (x, y, z)) == EmptySet()\n1215. \n1216.     # Issue #10056\n1217.     A, B, J1, J2 = symbols(\'A B J1 J2\')\n1218.     Augmatrix = Matrix([\n1219.         [2*I*J1, 2*I*J2, -2/J1],\n1220.         [-2*I*J2, -2*I*J1, 2/J2],\n1221.         [0, 2, 2*I/(J1*J2)],\n1222.         [2, 0,  0],\n1223.         ])\n1224. \n1225.     assert linsolve(Augmatrix, A, B) == FiniteSet((0, I/(J1*J2)))\n1226. \n1227.     # Issue #10121 - Assignment of free variables\n1228.     a, b, c, d, e = symbols(\'a, b, c, d, e\')\n1229.     Augmatrix = Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0]])\n1230.     assert linsolve(Augmatrix, a, b, c, d, e) == FiniteSet((a, 0, c, 0, e))\n1231.     raises(IndexError, lambda: linsolve(Augmatrix, a, b, c))\n1232. \n1233.     x0, x1, x2, _x0 = symbols(\'tau0 tau1 tau2 _tau0\')\n1234.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1235.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1236.     x0, x1, x2, _x0 = symbols(\'_tau0 _tau1 _tau2 tau0\')\n1237.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1238.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1239.     x0, x1, x2, _x0 = symbols(\'_tau0 _tau1 _tau2 tau1\')\n1240.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1241.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1242.     # symbols can be given as generators\n1243.     x0, x2, x4 = symbols(\'x0, x2, x4\')\n1244.     assert linsolve(Augmatrix, numbered_symbols(\'x\')\n1245.         ) == FiniteSet((x0, 0, x2, 0, x4))\n1246.     Augmatrix[-1, -1] = x0\n1247.     # use Dummy to avoid clash; the names may clash but the symbols\n1248.     # will not\n1249.     Augmatrix[-1, -1] = symbols(\'_x0\')\n1250.     assert len(linsolve(\n1251.         Augmatrix, numbered_symbols(\'x\', cls=Dummy)).free_symbols) == 4\n1252. \n1253.     # Issue #12604\n1254.     f = Function(\'f\')\n1255.     assert linsolve([f(x) - 5], f(x)) == FiniteSet((5,))\n1256. \n1257.     # Issue #14860\n1258.     from sympy.physics.units import meter, newton, kilo\n1259.     Eqns = [8*kilo*newton + x + y, 28*kilo*newton*meter + 3*x*meter]\n1260.     assert linsolve(Eqns, x, y) == {(newton*Rational(-28000, 3), newton*Rational(4000, 3))}\n1261. \n1262.     # linsolve fully expands expressions, so removable singularities\n1263.     # and other nonlinearity does not raise an error\n1264.     assert linsolve([Eq(x, x + y)], [x, y]) == {(x, 0)}\n1265.     assert linsolve([Eq(1/x, 1/x + y)], [x, y]) == {(x, 0)}\n1266.     assert linsolve([Eq(y/x, y/x + y)], [x, y]) == {(x, 0)}\n1267.     assert linsolve([Eq(x*(x + 1), x**2 + y)], [x, y]) == {(y, y)}\n1268. \n1269. \n1270. def test_linsolve_immutable():\n1271.     A = ImmutableDenseMatrix([[1, 1, 2], [0, 1, 2], [0, 0, 1]])\n1272.     B = ImmutableDenseMatrix([2, 1, -1])\n1273.     c = symbols(\'c1 c2 c3\')\n1274.     assert linsolve([A, B], c) == FiniteSet((1, 3, -1))\n1275. \n1276.     A = ImmutableDenseMatrix([[1, 1, 7], [1, -1, 3]])\n1277.     assert linsolve(A) == FiniteSet((5, 2))\n1278. \n1279. \n1280. def test_solve_decomposition():\n1281.     x = Symbol(\'x\')\n1282.     n = Dummy(\'n\')\n1283. \n1284.     f1 = exp(3*x) - 6*exp(2*x) + 11*exp(x) - 6\n1285.     f2 = sin(x)**2 - 2*sin(x) + 1\n1286.     f3 = sin(x)**2 - sin(x)\n1287.     f4 = sin(x + 1)\n1288.     f5 = exp(x + 2) - 1\n1289.     f6 = 1/log(x)\n1290.     f7 = 1/x\n1291. \n1292.     s1 = ImageSet(Lambda(n, 2*n*pi), S.Integers)\n1293.     s2 = ImageSet(Lambda(n, 2*n*pi + pi), S.Integers)\n1294.     s3 = ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers)\n1295.     s4 = ImageSet(Lambda(n, 2*n*pi - 1), S.Integers)\n1296.     s5 = ImageSet(Lambda(n, 2*n*pi - 1 + pi), S.Integers)\n1297. \n1298.     assert solve_decomposition(f1, x, S.Reals) == FiniteSet(0, log(2), log(3))\n1299.     assert solve_decomposition(f2, x, S.Reals) == s3\n1300.     assert solve_decomposition(f3, x, S.Reals) == Union(s1, s2, s3)\n1301.     assert solve_decomposition(f4, x, S.Reals) == Union(s4, s5)\n1302.     assert solve_decomposition(f5, x, S.Reals) == FiniteSet(-2)\n1303.     assert solve_decomposition(f6, x, S.Reals) == S.EmptySet\n1304.     assert solve_decomposition(f7, x, S.Reals) == S.EmptySet\n1305.     assert solve_decomposition(x, x, Interval(1, 2)) == S.EmptySet\n1306. \n1307. # nonlinsolve testcases\n1308. def test_nonlinsolve_basic():\n1309.     assert nonlinsolve([],[]) == S.EmptySet\n1310.     assert nonlinsolve([],[x, y]) == S.EmptySet\n1311. \n1312.     system = [x, y - x - 5]\n1313.     assert nonlinsolve([x],[x, y]) == FiniteSet((0, y))\n1314.     assert nonlinsolve(system, [y]) == FiniteSet((x + 5,))\n1315.     soln = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)\n1316.     assert nonlinsolve([sin(x) - 1], [x]) == FiniteSet(tuple(soln))\n1317.     assert nonlinsolve([x**2 - 1], [x]) == FiniteSet((-1,), (1,))\n1318. \n1319.     soln = FiniteSet((y, y))\n1320.     assert nonlinsolve([x - y, 0], x, y) == soln\n1321.     assert nonlinsolve([0, x - y], x, y) == soln\n1322.     assert nonlinsolve([x - y, x - y], x, y) == soln\n1323.     assert nonlinsolve([x, 0], x, y) == FiniteSet((0, y))\n1324.     f = Function(\'f\')\n1325.     assert nonlinsolve([f(x), 0], f(x), y) == FiniteSet((0, y))\n1326.     assert nonlinsolve([f(x), 0], f(x), f(y)) == FiniteSet((0, f(y)))\n1327.     A = Indexed(\'A\', x)\n1328.     assert nonlinsolve([A, 0], A, y) == FiniteSet((0, y))\n1329.     assert nonlinsolve([x**2 -1], [sin(x)]) == FiniteSet((S.EmptySet,))\n1330.     assert nonlinsolve([x**2 -1], sin(x)) == FiniteSet((S.EmptySet,))\n1331.     assert nonlinsolve([x**2 -1], 1) == FiniteSet((x**2,))\n1332.     assert nonlinsolve([x**2 -1], x + y) == FiniteSet((S.EmptySet,))\n1333. \n1334. \n1335. def test_nonlinsolve_abs():\n1336.     soln = FiniteSet((x, Abs(x)))\n1337.     assert nonlinsolve([Abs(x) - y], x, y) == soln\n1338. \n1339. \n1340. def test_raise_exception_nonlinsolve():\n1341.     raises(IndexError, lambda: nonlinsolve([x**2 -1], []))\n1342.     raises(ValueError, lambda: nonlinsolve([x**2 -1]))\n1343.     raises(NotImplementedError, lambda: nonlinsolve([(x+y)**2 - 9, x**2 - y**2 - 0.75], (x, y)))\n1344. \n1345. \n1346. def test_trig_system():\n1347.     # TODO: add more simple testcases when solveset returns\n1348.     # simplified soln for Trig eq\n1349.     assert nonlinsolve([sin(x) - 1, cos(x) -1 ], x) == S.EmptySet\n1350.     soln1 = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)\n1351.     soln = FiniteSet(soln1)\n1352.     assert nonlinsolve([sin(x) - 1, cos(x)], x) == soln\n1353. \n1354. \n1355. @XFAIL\n1356. def test_trig_system_fail():\n1357.     # fails because solveset trig solver is not much smart.\n1358.     sys = [x + y - pi/2, sin(x) + sin(y) - 1]\n1359.     # solveset returns conditionset for sin(x) + sin(y) - 1\n1360.     soln_1 = (ImageSet(Lambda(n, n*pi + pi/2), S.Integers),\n1361.         ImageSet(Lambda(n, n*pi)), S.Integers)\n1362.     soln_1 = FiniteSet(soln_1)\n1363.     soln_2 = (ImageSet(Lambda(n, n*pi), S.Integers),\n1364.         ImageSet(Lambda(n, n*pi+ pi/2), S.Integers))\n1365.     soln_2 = FiniteSet(soln_2)\n1366.     soln = soln_1 + soln_2\n1367.     assert nonlinsolve(sys, [x, y]) == soln\n1368. \n1369.     # Add more cases from here\n1370.     # http://www.vitutor.com/geometry/trigonometry/equations_systems.html#uno\n1371.     sys = [sin(x) + sin(y) - (sqrt(3)+1)/2, sin(x) - sin(y) - (sqrt(3) - 1)/2]\n1372.     soln_x = Union(ImageSet(Lambda(n, 2*n*pi + pi/3), S.Integers),\n1373.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(2, 3)), S.Integers))\n1374.     soln_y = Union(ImageSet(Lambda(n, 2*n*pi + pi/6), S.Integers),\n1375.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(5, 6)), S.Integers))\n1376.     assert nonlinsolve(sys, [x, y]) ==FiniteSet((soln_x, soln_y))\n1377. \n1378. \n1379. def test_nonlinsolve_positive_dimensional():\n1380.     x, y, z, a, b, c, d = symbols(\'x, y, z, a, b, c, d\', extended_real = True)\n1381.     assert nonlinsolve([x*y, x*y - x], [x, y]) == FiniteSet((0, y))\n1382. \n1383.     system = [a**2 + a*c, a - b]\n1384.     assert nonlinsolve(system, [a, b]) == FiniteSet((0, 0), (-c, -c))\n1385.     # here (a= 0, b = 0) is independent soln so both is printed.\n1386.     # if symbols = [a, b, c] then only {a : -c ,b : -c}\n1387. \n1388.     eq1 =  a + b + c + d\n1389.     eq2 = a*b + b*c + c*d + d*a\n1390.     eq3 = a*b*c + b*c*d + c*d*a + d*a*b\n1391.     eq4 = a*b*c*d - 1\n1392.     system = [eq1, eq2, eq3, eq4]\n1393.     sol1 = (-1/d, -d, 1/d, FiniteSet(d) - FiniteSet(0))\n1394.     sol2 = (1/d, -d, -1/d, FiniteSet(d) - FiniteSet(0))\n1395.     soln = FiniteSet(sol1, sol2)\n1396.     assert nonlinsolve(system, [a, b, c, d]) == soln\n1397. \n1398. \n1399. def test_nonlinsolve_polysys():\n1400.     x, y, z = symbols(\'x, y, z\', real = True)\n1401.     assert nonlinsolve([x**2 + y - 2, x**2 + y], [x, y]) == S.EmptySet\n1402. \n1403.     s = (-y + 2, y)\n1404.     assert nonlinsolve([(x + y)**2 - 4, x + y - 2], [x, y]) == FiniteSet(s)\n1405. \n1406.     system = [x**2 - y**2]\n1407.     soln_real = FiniteSet((-y, y), (y, y))\n1408.     soln_complex = FiniteSet((-Abs(y), y), (Abs(y), y))\n1409.     soln =soln_real + soln_complex\n1410.     assert nonlinsolve(system, [x, y]) == soln\n1411. \n1412.     system = [x**2 - y**2]\n1413.     soln_real= FiniteSet((y, -y), (y, y))\n1414.     soln_complex = FiniteSet((y, -Abs(y)), (y, Abs(y)))\n1415.     soln = soln_real + soln_complex\n1416.     assert nonlinsolve(system, [y, x]) == soln\n1417. \n1418.     system = [x**2 + y - 3, x - y - 4]\n1419.     assert nonlinsolve(system, (x, y)) != nonlinsolve(system, (y, x))\n1420. \n1421. \n1422. def test_nonlinsolve_using_substitution():\n1423.     x, y, z, n = symbols(\'x, y, z, n\', real = True)\n1424.     system = [(x + y)*n - y**2 + 2]\n1425.     s_x = (n*y - y**2 + 2)/n\n1426.     soln = (-s_x, y)\n1427.     assert nonlinsolve(system, [x, y]) == FiniteSet(soln)\n1428. \n1429.     system = [z**2*x**2 - z**2*y**2/exp(x)]\n1430.     soln_real_1 = (y, x, 0)\n1431.     soln_real_2 = (-exp(x/2)*Abs(x), x, z)\n1432.     soln_real_3 = (exp(x/2)*Abs(x), x, z)\n1433.     soln_complex_1 = (-x*exp(x/2), x, z)\n1434.     soln_complex_2 = (x*exp(x/2), x, z)\n1435.     syms = [y, x, z]\n1436.     soln = FiniteSet(soln_real_1, soln_complex_1, soln_complex_2,\\\n1437.         soln_real_2, soln_real_3)\n1438.     assert nonlinsolve(system,syms) == soln\n1439. \n1440. \n1441. def test_nonlinsolve_complex():\n1442.     x, y, z = symbols(\'x, y, z\')\n1443.     n = Dummy(\'n\')\n1444.     assert nonlinsolve([exp(x) - sin(y), 1/y - 3], [x, y]) == {\n1445.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(Rational(1, 3)))), S.Integers), Rational(1, 3))}\n1446. \n1447.     system = [exp(x) - sin(y), 1/exp(y) - 3]\n1448.     assert nonlinsolve(system, [x, y]) == {\n1449.         (ImageSet(Lambda(n, I*(2*n*pi + pi)\n1450.                          + log(sin(log(3)))), S.Integers), -log(3)),\n1451.         (ImageSet(Lambda(n, I*(2*n*pi + arg(sin(2*n*I*pi - log(3))))\n1452.                          + log(Abs(sin(2*n*I*pi - log(3))))), S.Integers),\n1453.         ImageSet(Lambda(n, 2*n*I*pi - log(3)), S.Integers))}\n1454. \n1455.     system = [exp(x) - sin(y), y**2 - 4]\n1456.     assert nonlinsolve(system, [x, y]) == {\n1457.         (ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sin(2))), S.Integers), -2),\n1458.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(2))), S.Integers), 2)}\n1459. \n1460. \n1461. @XFAIL\n1462. def test_solve_nonlinear_trans():\n1463.     # After the transcendental equation solver these will work\n1464.     x, y, z = symbols(\'x, y, z\', real=True)\n1465.     soln1 = FiniteSet((2*LambertW(y/2), y))\n1466.     soln2 = FiniteSet((-x*sqrt(exp(x)), y), (x*sqrt(exp(x)), y))\n1467.     soln3 = FiniteSet((x*exp(x/2), x))\n1468.     soln4 = FiniteSet(2*LambertW(y/2), y)\n1469.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln1\n1470.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln2\n1471.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln3\n1472.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln4\n1473. \n1474. \n1475. def test_issue_5132_1():\n1476.     system = [sqrt(x**2 + y**2) - sqrt(10), x + y - 4]\n1477.     assert nonlinsolve(system, [x, y]) == FiniteSet((1, 3), (3, 1))\n1478. \n1479.     n = Dummy(\'n\')\n1480.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1481.     s_real_y = -log(3)\n1482.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))\n1483.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))\n1484.     lam = Lambda(n, 2*n*I*pi + -log(3))\n1485.     s_complex_y = ImageSet(lam, S.Integers)\n1486.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1487.     s_complex_z_1 = ImageSet(lam, S.Integers)\n1488.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1489.     s_complex_z_2 = ImageSet(lam, S.Integers)\n1490.     soln_complex = FiniteSet(\n1491.                                             (s_complex_y, s_complex_z_1),\n1492.                                             (s_complex_y, s_complex_z_2)\n1493.                                         )\n1494.     soln = soln_real + soln_complex\n1495.     assert nonlinsolve(eqs, [y, z]) == soln\n1496. \n1497. \n1498. def test_issue_5132_2():\n1499.     x, y = symbols(\'x, y\', real=True)\n1500.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1501.     n = Dummy(\'n\')\n1502.     soln_real = (log(-z**2 + sin(y))/2, z)\n1503.     lam = Lambda( n, I*(2*n*pi + arg(-z**2 + sin(y)))/2 + log(Abs(z**2 - sin(y)))/2)\n1504.     img = ImageSet(lam, S.Integers)\n1505.     # not sure about the complex soln. But it looks correct.\n1506.     soln_complex = (img, z)\n1507.     soln = FiniteSet(soln_real, soln_complex)\n1508.     assert nonlinsolve(eqs, [x, z]) == soln\n1509. \n1510.     r, t = symbols(\'r, t\')\n1511.     system = [r - x**2 - y**2, tan(t) - y/x]\n1512.     s_x = sqrt(r/(tan(t)**2 + 1))\n1513.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)\n1514.     soln = FiniteSet((s_x, s_y), (-s_x, -s_y))\n1515.     assert nonlinsolve(system, [x, y]) == soln\n1516. \n1517. \n1518. def test_issue_6752():\n1519.     a,b,c,d = symbols(\'a, b, c, d\', real=True)\n1520.     assert nonlinsolve([a**2 + a, a - b], [a, b]) == {(-1, -1), (0, 0)}\n1521. \n1522. \n1523. @SKIP("slow")\n1524. def test_issue_5114_solveset():\n1525.     # slow testcase\n1526.     a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r = symbols(\'a:r\')\n1527. \n1528.     # there is no \'a\' in the equation set but this is how the\n1529.     # problem was originally posed\n1530.     syms = [a, b, c, f, h, k, n]\n1531.     eqs = [b + r/d - c/d,\n1532.     c*(1/d + 1/e + 1/g) - f/g - r/d,\n1533.         f*(1/g + 1/i + 1/j) - c/g - h/i,\n1534.         h*(1/i + 1/l + 1/m) - f/i - k/m,\n1535.         k*(1/m + 1/o + 1/p) - h/m - n/p,\n1536.         n*(1/p + 1/q) - k/p]\n1537.     assert len(nonlinsolve(eqs, syms)) == 1\n1538. \n1539. \n1540. @SKIP("Hangs")\n1541. def _test_issue_5335():\n1542.     # Not able to check zero dimensional system.\n1543.     # is_zero_dimensional Hangs\n1544.     lam, a0, conc = symbols(\'lam a0 conc\')\n1545.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,\n1546.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,\n1547.            x + y - conc]\n1548.     sym = [x, y, a0]\n1549.     # there are 4 solutions but only two are valid\n1550.     assert len(nonlinsolve(eqs, sym)) == 2\n1551.     # float\n1552.     lam, a0, conc = symbols(\'lam a0 conc\')\n1553.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,\n1554.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,\n1555.            x + y - conc]\n1556.     sym = [x, y, a0]\n1557.     assert len(nonlinsolve(eqs, sym)) == 2\n1558. \n1559. \n1560. def test_issue_2777():\n1561.     # the equations represent two circles\n1562.     x, y = symbols(\'x y\', real=True)\n1563.     e1, e2 = sqrt(x**2 + y**2) - 10, sqrt(y**2 + (-x + 10)**2) - 3\n1564.     a, b = Rational(191, 20), 3*sqrt(391)/20\n1565.     ans = {(a, -b), (a, b)}\n1566.     assert nonlinsolve((e1, e2), (x, y)) == ans\n1567.     assert nonlinsolve((e1, e2/(x - a)), (x, y)) == S.EmptySet\n1568.     # make the 2nd circle\'s radius be -3\n1569.     e2 += 6\n1570.     assert nonlinsolve((e1, e2), (x, y)) == S.EmptySet\n1571. \n1572. \n1573. def test_issue_8828():\n1574.     x1 = 0\n1575.     y1 = -620\n1576.     r1 = 920\n1577.     x2 = 126\n1578.     y2 = 276\n1579.     x3 = 51\n1580.     y3 = 205\n1581.     r3 = 104\n1582.     v = [x, y, z]\n1583. \n1584.     f1 = (x - x1)**2 + (y - y1)**2 - (r1 - z)**2\n1585.     f2 = (x2 - x)**2 + (y2 - y)**2 - z**2\n1586.     f3 = (x - x3)**2 + (y - y3)**2 - (r3 - z)**2\n1587.     F = [f1, f2, f3]\n1588. \n1589.     g1 = sqrt((x - x1)**2 + (y - y1)**2) + z - r1\n1590.     g2 = f2\n1591.     g3 = sqrt((x - x3)**2 + (y - y3)**2) + z - r3\n1592.     G = [g1, g2, g3]\n1593. \n1594.     # both soln same\n1595.     A = nonlinsolve(F, v)\n1596.     B = nonlinsolve(G, v)\n1597.     assert A == B\n1598. \n1599. \n1600. def test_nonlinsolve_conditionset():\n1601.     # when solveset failed to solve all the eq\n1602.     # return conditionset\n1603.     f = Function(\'f\')\n1604.     f1 = f(x) - pi/2\n1605.     f2 = f(y) - pi*Rational(3, 2)\n1606.     intermediate_system = Eq(2*f(x) - pi, 0) & Eq(2*f(y) - 3*pi, 0)\n1607.     symbols = Tuple(x, y)\n1608.     soln = ConditionSet(\n1609.         symbols,\n1610.         intermediate_system,\n1611.         S.Complexes**2)\n1612.     assert nonlinsolve([f1, f2], [x, y]) == soln\n1613. \n1614. \n1615. def test_substitution_basic():\n1616.     assert substitution([], [x, y]) == S.EmptySet\n1617.     assert substitution([], []) == S.EmptySet\n1618.     system = [2*x**2 + 3*y**2 - 30, 3*x**2 - 2*y**2 - 19]\n1619.     soln = FiniteSet((-3, -2), (-3, 2), (3, -2), (3, 2))\n1620.     assert substitution(system, [x, y]) == soln\n1621. \n1622.     soln = FiniteSet((-1, 1))\n1623.     assert substitution([x + y], [x], [{y: 1}], [y], set([]), [x, y]) == soln\n1624.     assert substitution(\n1625.         [x + y], [x], [{y: 1}], [y],\n1626.         set([x + 1]), [y, x]) == S.EmptySet\n1627. \n1628. \n1629. def test_issue_5132_substitution():\n1630.     x, y, z, r, t = symbols(\'x, y, z, r, t\', real=True)\n1631.     system = [r - x**2 - y**2, tan(t) - y/x]\n1632.     s_x_1 = Complement(FiniteSet(-sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))\n1633.     s_x_2 = Complement(FiniteSet(sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))\n1634.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)\n1635.     soln = FiniteSet((s_x_2, s_y)) + FiniteSet((s_x_1, -s_y))\n1636.     assert substitution(system, [x, y]) == soln\n1637. \n1638.     n = Dummy(\'n\')\n1639.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1640.     s_real_y = -log(3)\n1641.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))\n1642.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))\n1643.     lam = Lambda(n, 2*n*I*pi + -log(3))\n1644.     s_complex_y = ImageSet(lam, S.Integers)\n1645.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1646.     s_complex_z_1 = ImageSet(lam, S.Integers)\n1647.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1648.     s_complex_z_2 = ImageSet(lam, S.Integers)\n1649.     soln_complex = FiniteSet(\n1650.         (s_complex_y, s_complex_z_1),\n1651.         (s_complex_y, s_complex_z_2))\n1652.     soln = soln_real + soln_complex\n1653.     assert substitution(eqs, [y, z]) == soln\n1654. \n1655. \n1656. def test_raises_substitution():\n1657.     raises(ValueError, lambda: substitution([x**2 -1], []))\n1658.     raises(TypeError, lambda: substitution([x**2 -1]))\n1659.     raises(ValueError, lambda: substitution([x**2 -1], [sin(x)]))\n1660.     raises(TypeError, lambda: substitution([x**2 -1], x))\n1661.     raises(TypeError, lambda: substitution([x**2 -1], 1))\n1662. \n1663. # end of tests for nonlinsolve\n1664. \n1665. \n1666. def test_issue_9556():\n1667.     x = Symbol(\'x\')\n1668.     b = Symbol(\'b\', positive=True)\n1669. \n1670.     assert solveset(Abs(x) + 1, x, S.Reals) == EmptySet()\n1671.     assert solveset(Abs(x) + b, x, S.Reals) == EmptySet()\n1672.     assert solveset(Eq(b, -1), b, S.Reals) == EmptySet()\n1673. \n1674. \n1675. def test_issue_9611():\n1676.     x = Symbol(\'x\')\n1677.     a = Symbol(\'a\')\n1678.     y = Symbol(\'y\')\n1679. \n1680.     assert solveset(Eq(x - x + a, a), x, S.Reals) == S.Reals\n1681.     assert solveset(Eq(y - y + a, a), y) == S.Complexes\n1682. \n1683. \n1684. def test_issue_9557():\n1685.     x = Symbol(\'x\')\n1686.     a = Symbol(\'a\')\n1687. \n1688.     assert solveset(x**2 + a, x, S.Reals) == Intersection(S.Reals,\n1689.         FiniteSet(-sqrt(-a), sqrt(-a)))\n1690. \n1691. \n1692. def test_issue_9778():\n1693.     assert solveset(x**3 + 1, x, S.Reals) == FiniteSet(-1)\n1694.     assert solveset(x**Rational(3, 5) + 1, x, S.Reals) == S.EmptySet\n1695.     assert solveset(x**3 + y, x, S.Reals) == \\\n1696.         FiniteSet(-Abs(y)**Rational(1, 3)*sign(y))\n1697. \n1698. \n1699. def test_issue_10214():\n1700.     assert solveset(x**Rational(3, 2) + 4, x, S.Reals) == S.EmptySet\n1701.     assert solveset(x**(Rational(-3, 2)) + 4, x, S.Reals) == S.EmptySet\n1702. \n1703.     ans = FiniteSet(-2**Rational(2, 3))\n1704.     assert solveset(x**(S(3)) + 4, x, S.Reals) == ans\n1705.     assert (x**(S(3)) + 4).subs(x,list(ans)[0]) == 0 # substituting ans and verifying the result.\n1706.     assert (x**(S(3)) + 4).subs(x,-(-2)**Rational(2, 3)) == 0\n1707. \n1708. \n1709. def test_issue_9849():\n1710.     assert solveset(Abs(sin(x)) + 1, x, S.Reals) == S.EmptySet\n1711. \n1712. \n1713. def test_issue_9953():\n1714.     assert linsolve([ ], x) == S.EmptySet\n1715. \n1716. \n1717. def test_issue_9913():\n1718.     assert solveset(2*x + 1/(x - 10)**2, x, S.Reals) == \\\n1719.         FiniteSet(-(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)/3 - 100/\n1720.                 (3*(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)) + Rational(20, 3))\n1721. \n1722. \n1723. def test_issue_10397():\n1724.     assert solveset(sqrt(x), x, S.Complexes) == FiniteSet(0)\n1725. \n1726. \n1727. def test_issue_14987():\n1728.     raises(ValueError, lambda: linear_eq_to_matrix(\n1729.         [x**2], x))\n1730.     raises(ValueError, lambda: linear_eq_to_matrix(\n1731.         [x*(-3/x + 1) + 2*y - a], [x, y]))\n1732.     raises(ValueError, lambda: linear_eq_to_matrix(\n1733.         [(x**2 - 3*x)/(x - 3) - 3], x))\n1734.     raises(ValueError, lambda: linear_eq_to_matrix(\n1735.         [(x + 1)**3 - x**3 - 3*x**2 + 7], x))\n1736.     raises(ValueError, lambda: linear_eq_to_matrix(\n1737.         [x*(1/x + 1) + y], [x, y]))\n1738.     raises(ValueError, lambda: linear_eq_to_matrix(\n1739.         [(x + 1)*y], [x, y]))\n1740.     raises(ValueError, lambda: linear_eq_to_matrix(\n1741.         [Eq(1/x, 1/x + y)], [x, y]))\n1742.     raises(ValueError, lambda: linear_eq_to_matrix(\n1743.         [Eq(y/x, y/x + y)], [x, y]))\n1744.     raises(ValueError, lambda: linear_eq_to_matrix(\n1745.         [Eq(x*(x + 1), x**2 + y)], [x, y]))\n1746. \n1747. \n1748. def test_simplification():\n1749.     eq = x + (a - b)/(-2*a + 2*b)\n1750.     assert solveset(eq, x) == FiniteSet(S.Half)\n1751.     assert solveset(eq, x, S.Reals) == Intersection({-((a - b)/(-2*a + 2*b))}, S.Reals)\n1752.     # So that ap - bn is not zero:\n1753.     ap = Symbol(\'ap\', positive=True)\n1754.     bn = Symbol(\'bn\', negative=True)\n1755.     eq = x + (ap - bn)/(-2*ap + 2*bn)\n1756.     assert solveset(eq, x) == FiniteSet(S.Half)\n1757.     assert solveset(eq, x, S.Reals) == FiniteSet(S.Half)\n1758. \n1759. \n1760. def test_issue_10555():\n1761.     f = Function(\'f\')\n1762.     g = Function(\'g\')\n1763.     assert solveset(f(x) - pi/2, x, S.Reals) == \\\n1764.         ConditionSet(x, Eq(f(x) - pi/2, 0), S.Reals)\n1765.     assert solveset(f(g(x)) - pi/2, g(x), S.Reals) == \\\n1766.         ConditionSet(g(x), Eq(f(g(x)) - pi/2, 0), S.Reals)\n1767. \n1768. \n1769. def test_issue_8715():\n1770.     eq = x + 1/x > -2 + 1/x\n1771.     assert solveset(eq, x, S.Reals) == \\\n1772.         (Interval.open(-2, oo) - FiniteSet(0))\n1773.     assert solveset(eq.subs(x,log(x)), x, S.Reals) == \\\n1774.         Interval.open(exp(-2), oo) - FiniteSet(1)\n1775. \n1776. \n1777. def test_issue_11174():\n1778.     r, t = symbols(\'r t\')\n1779.     eq = z**2 + exp(2*x) - sin(y)\n1780.     soln = Intersection(S.Reals, FiniteSet(log(-z**2 + sin(y))/2))\n1781.     assert solveset(eq, x, S.Reals) == soln\n1782. \n1783.     eq = sqrt(r)*Abs(tan(t))/sqrt(tan(t)**2 + 1) + x*tan(t)\n1784.     s = -sqrt(r)*Abs(tan(t))/(sqrt(tan(t)**2 + 1)*tan(t))\n1785.     soln = Intersection(S.Reals, FiniteSet(s))\n1786.     assert solveset(eq, x, S.Reals) == soln\n1787. \n1788. \n1789. def test_issue_11534():\n1790.     # eq and eq2 should give the same solution as a Complement\n1791.     eq = -y + x/sqrt(-x**2 + 1)\n1792.     eq2 = -y**2 + x**2/(-x**2 + 1)\n1793.     soln = Complement(FiniteSet(-y/sqrt(y**2 + 1), y/sqrt(y**2 + 1)), FiniteSet(-1, 1))\n1794.     assert solveset(eq, x, S.Reals) == soln\n1795.     assert solveset(eq2, x, S.Reals) == soln\n1796. \n1797. \n1798. def test_issue_10477():\n1799.     assert solveset((x**2 + 4*x - 3)/x < 2, x, S.Reals) == \\\n1800.         Union(Interval.open(-oo, -3), Interval.open(0, 1))\n1801. \n1802. \n1803. def test_issue_10671():\n1804.     assert solveset(sin(y), y, Interval(0, pi)) == FiniteSet(0, pi)\n1805.     i = Interval(1, 10)\n1806.     assert solveset((1/x).diff(x) < 0, x, i) == i\n1807. \n1808. \n1809. def test_issue_11064():\n1810.     eq = x + sqrt(x**2 - 5)\n1811.     assert solveset(eq > 0, x, S.Reals) == \\\n1812.         Interval(sqrt(5), oo)\n1813.     assert solveset(eq < 0, x, S.Reals) == \\\n1814.         Interval(-oo, -sqrt(5))\n1815.     assert solveset(eq > sqrt(5), x, S.Reals) == \\\n1816.         Interval.Lopen(sqrt(5), oo)\n1817. \n1818. \n1819. def test_issue_12478():\n1820.     eq = sqrt(x - 2) + 2\n1821.     soln = solveset_real(eq, x)\n1822.     assert soln is S.EmptySet\n1823.     assert solveset(eq < 0, x, S.Reals) is S.EmptySet\n1824.     assert solveset(eq > 0, x, S.Reals) == Interval(2, oo)\n1825. \n1826. \n1827. def test_issue_12429():\n1828.     eq = solveset(log(x)/x <= 0, x, S.Reals)\n1829.     sol = Interval.Lopen(0, 1)\n1830.     assert eq == sol\n1831. \n1832. \n1833. def test_solveset_arg():\n1834.     assert solveset(arg(x), x, S.Reals)  == Interval.open(0, oo)\n1835.     assert solveset(arg(4*x -3), x) == Interval.open(Rational(3, 4), oo)\n1836. \n1837. \n1838. def test__is_finite_with_finite_vars():\n1839.     f = _is_finite_with_finite_vars\n1840.     # issue 12482\n1841.     assert all(f(1/x) is None for x in (\n1842.         Dummy(), Dummy(real=True), Dummy(complex=True)))\n1843.     assert f(1/Dummy(real=False)) is True  # b/c it\'s finite but not 0\n1844. \n1845. \n1846. def test_issue_13550():\n1847.     assert solveset(x**2 - 2*x - 15, symbol = x, domain = Interval(-oo, 0)) == FiniteSet(-3)\n1848. \n1849. \n1850. def test_issue_13849():\n1851.     t = symbols(\'t\')\n1852.     assert nonlinsolve((t*(sqrt(5) + sqrt(2)) - sqrt(2), t), t) == EmptySet()\n1853. \n1854. \n1855. def test_issue_14223():\n1856.     x = Symbol(\'x\')\n1857.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,\n1858.         S.Reals) == FiniteSet(-1, 1)\n1859.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,\n1860.         Interval(0, 2)) == FiniteSet(1)\n1861. \n1862. \n1863. def test_issue_10158():\n1864.     x = Symbol(\'x\')\n1865.     dom = S.Reals\n1866.     assert solveset(x*Max(x, 15) - 10, x, dom) == FiniteSet(Rational(2, 3))\n1867.     assert solveset(x*Min(x, 15) - 10, x, dom) == FiniteSet(-sqrt(10), sqrt(10))\n1868.     assert solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom) == FiniteSet(-1, 1)\n1869.     assert solveset(Abs(x - 1) - Abs(y), x, dom) == FiniteSet(-Abs(y) + 1, Abs(y) + 1)\n1870.     assert solveset(Abs(x + 4*Abs(x + 1)), x, dom) == FiniteSet(Rational(-4, 3), Rational(-4, 5))\n1871.     assert solveset(2*Abs(x + Abs(x + Max(3, x))) - 2, x, S.Reals) == FiniteSet(-1, -2)\n1872.     dom = S.Complexes\n1873.     raises(ValueError, lambda: solveset(x*Max(x, 15) - 10, x, dom))\n1874.     raises(ValueError, lambda: solveset(x*Min(x, 15) - 10, x, dom))\n1875.     raises(ValueError, lambda: solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom))\n1876.     raises(ValueError, lambda: solveset(Abs(x - 1) - Abs(y), x, dom))\n1877.     raises(ValueError, lambda: solveset(Abs(x + 4*Abs(x + 1)), x, dom))\n1878. \n1879. \n1880. def test_issue_14300():\n1881.     x, y, n = symbols(\'x y n\')\n1882. \n1883.     f = 1 - exp(-18000000*x) - y\n1884.     a1 = FiniteSet(-log(-y + 1)/18000000)\n1885. \n1886.     assert solveset(f, x, S.Reals) == \\\n1887.         Intersection(S.Reals, a1)\n1888.     assert solveset(f, x) == \\\n1889.         ImageSet(Lambda(n, -I*(2*n*pi + arg(-y + 1))/18000000 -\n1890.             log(Abs(y - 1))/18000000), S.Integers)\n1891. \n1892. \n1893. def test_issue_14454():\n1894.     x = Symbol(\'x\')\n1895.     number = CRootOf(x**4 + x - 1, 2)\n1896.     raises(ValueError, lambda: invert_real(number, 0, x, S.Reals))\n1897.     assert invert_real(x**2, number, x, S.Reals)  # no error\n1898. \n1899. \n1900. def test_term_factors():\n1901.     assert list(_term_factors(3**x - 2)) == [-2, 3**x]\n1902.     expr = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1903.     assert set(_term_factors(expr)) == set([\n1904.         3**(x + 2), 4**(x + 2), 3**(x + 3), 4**(x - 1), -1, 4**(x + 1)])\n1905. \n1906. \n1907. #################### tests for transolve and its helpers ###############\n1908. \n1909. def test_transolve():\n1910. \n1911.     assert _transolve(3**x, x, S.Reals) == S.EmptySet\n1912.     assert _transolve(3**x - 9**(x + 5), x, S.Reals) == FiniteSet(-10)\n1913. \n1914. \n1915. # exponential tests\n1916. def test_exponential_real():\n1917.     from sympy.abc import x, y, z\n1918. \n1919.     e1 = 3**(2*x) - 2**(x + 3)\n1920.     e2 = 4**(5 - 9*x) - 8**(2 - x)\n1921.     e3 = 2**x + 4**x\n1922.     e4 = exp(log(5)*x) - 2**x\n1923.     e5 = exp(x/y)*exp(-z/y) - 2\n1924.     e6 = 5**(x/2) - 2**(x/3)\n1925.     e7 = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1926.     e8 = -9*exp(-2*x + 5) + 4*exp(3*x + 1)\n1927.     e9 = 2**x + 4**x + 8**x - 84\n1928. \n1929.     assert solveset(e1, x, S.Reals) == FiniteSet(\n1930.         -3*log(2)/(-2*log(3) + log(2)))\n1931.     assert solveset(e2, x, S.Reals) == FiniteSet(Rational(4, 15))\n1932.     assert solveset(e3, x, S.Reals) == S.EmptySet\n1933.     assert solveset(e4, x, S.Reals) == FiniteSet(0)\n1934.     assert solveset(e5, x, S.Reals) == Intersection(\n1935.         S.Reals, FiniteSet(y*log(2*exp(z/y))))\n1936.     assert solveset(e6, x, S.Reals) == FiniteSet(0)\n1937.     assert solveset(e7, x, S.Reals) == FiniteSet(2)\n1938.     assert solveset(e8, x, S.Reals) == FiniteSet(-2*log(2)/5 + 2*log(3)/5 + Rational(4, 5))\n1939.     assert solveset(e9, x, S.Reals) == FiniteSet(2)\n1940. \n1941.     assert solveset_real(-9*exp(-2*x + 5) + 2**(x + 1), x) == FiniteSet(\n1942.         -((-5 - 2*log(3) + log(2))/(log(2) + 2)))\n1943.     assert solveset_real(4**(x/2) - 2**(x/3), x) == FiniteSet(0)\n1944.     b = sqrt(6)*sqrt(log(2))/sqrt(log(5))\n1945.     assert solveset_real(5**(x/2) - 2**(3/x), x) == FiniteSet(-b, b)\n1946. \n1947.     # coverage test\n1948.     C1, C2 = symbols(\'C1 C2\')\n1949.     f = Function(\'f\')\n1950.     assert solveset_real(C1 + C2/x**2 - exp(-f(x)), f(x)) == Intersection(\n1951.         S.Reals, FiniteSet(-log(C1 + C2/x**2)))\n1952.     y = symbols(\'y\', positive=True)\n1953.     assert solveset_real(x**2 - y**2/exp(x), y) == Intersection(\n1954.         S.Reals, FiniteSet(-sqrt(x**2*exp(x)), sqrt(x**2*exp(x))))\n1955.     p = Symbol(\'p\', positive=True)\n1956.     assert solveset_real((1/p + 1)**(p + 1), p) == EmptySet()\n1957. \n1958. \n1959. @XFAIL\n1960. def test_exponential_complex():\n1961.     from sympy.abc import x\n1962.     from sympy import Dummy\n1963.     n = Dummy(\'n\')\n1964. \n1965.     assert solveset_complex(2**x + 4**x, x) == imageset(\n1966.         Lambda(n, I*(2*n*pi + pi)/log(2)), S.Integers)\n1967.     assert solveset_complex(x**z*y**z - 2, z) == FiniteSet(\n1968.         log(2)/(log(x) + log(y)))\n1969.     assert solveset_complex(4**(x/2) - 2**(x/3), x) == imageset(\n1970.         Lambda(n, 3*n*I*pi/log(2)), S.Integers)\n1971.     assert solveset(2**x + 32, x) == imageset(\n1972.         Lambda(n, (I*(2*n*pi + pi) + 5*log(2))/log(2)), S.Integers)\n1973. \n1974.     eq = (2**exp(y**2/x) + 2)/(x**2 + 15)\n1975.     a = sqrt(x)*sqrt(-log(log(2)) + log(log(2) + 2*n*I*pi))\n1976.     assert solveset_complex(eq, y) == FiniteSet(-a, a)\n1977. \n1978.     union1 = imageset(Lambda(n, I*(2*n*pi - pi*Rational(2, 3))/log(2)), S.Integers)\n1979.     union2 = imageset(Lambda(n, I*(2*n*pi + pi*Rational(2, 3))/log(2)), S.Integers)\n1980.     assert solveset(2**x + 4**x + 8**x, x) == Union(union1, union2)\n1981. \n1982.     eq = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1983.     res = solveset(eq, x)\n1984.     num = 2*n*I*pi - 4*log(2) + 2*log(3)\n1985.     den = -2*log(2) + log(3)\n1986.     ans = imageset(Lambda(n, num/den), S.Integers)\n1987.     assert res == ans\n1988. \n1989. \n1990. def test_expo_conditionset():\n1991.     from sympy.abc import x, y\n1992. \n1993.     f1 = (exp(x) + 1)**x - 2\n1994.     f2 = (x + 2)**y*x - 3\n1995.     f3 = 2**x - exp(x) - 3\n1996.     f4 = log(x) - exp(x)\n1997.     f5 = 2**x + 3**x - 5**x\n1998. \n1999.     assert solveset(f1, x, S.Reals) == ConditionSet(\n2000.         x, Eq((exp(x) + 1)**x - 2, 0), S.Reals)\n2001.     assert solveset(f2, x, S.Reals) == ConditionSet(\n2002.         x, Eq(x*(x + 2)**y - 3, 0), S.Reals)\n2003.     assert solveset(f3, x, S.Reals) == ConditionSet(\n2004.         x, Eq(2**x - exp(x) - 3, 0), S.Reals)\n2005.     assert solveset(f4, x, S.Reals) == ConditionSet(\n2006.         x, Eq(-exp(x) + log(x), 0), S.Reals)\n2007.     assert solveset(f5, x, S.Reals) == ConditionSet(\n2008.         x, Eq(2**x + 3**x - 5**x, 0), S.Reals)\n2009. \n2010. \n2011. def test_exponential_symbols():\n2012.     x, y, z = symbols(\'x y z\', positive=True)\n2013. \n2014.     assert solveset(z**x - y, x, S.Reals) == Intersection(\n2015.         S.Reals, FiniteSet(log(y)/log(z)))\n2016. \n2017.     w = symbols(\'w\')\n2018.     f1 = 2*x**w - 4*y**w\n2019.     f2 = (x/y)**w - 2\n2020.     sol1 = Intersection({log(2)/(log(x) - log(y))}, S.Reals)\n2021.     sol2 = Intersection({log(2)/log(x/y)}, S.Reals)\n2022.     assert solveset(f1, w, S.Reals) == sol1\n2023.     assert solveset(f2, w, S.Reals) == sol2\n2024. \n2025.     assert solveset(x**x, x, S.Reals) == S.EmptySet\n2026.     assert solveset(x**y - 1, y, S.Reals) == FiniteSet(0)\n2027.     assert solveset(exp(x/y)*exp(-z/y) - 2, y, S.Reals) == FiniteSet(\n2028.         (x - z)/log(2)) - FiniteSet(0)\n2029. \n2030.     a, b, x, y = symbols(\'a b x y\')\n2031.     assert solveset_real(a**x - b**x, x) == ConditionSet(\n2032.         x, (a > 0) & (b > 0), FiniteSet(0))\n2033.     assert solveset(a**x - b**x, x) == ConditionSet(\n2034.         x, Ne(a, 0) & Ne(b, 0), FiniteSet(0))\n2035. \n2036. \n2037. @XFAIL\n2038. def test_issue_10864():\n2039.     assert solveset(x**(y*z) - x, x, S.Reals) == FiniteSet(1)\n2040. \n2041. \n2042. @XFAIL\n2043. def test_solve_only_exp_2():\n2044.     assert solveset_real(sqrt(exp(x)) + sqrt(exp(-x)) - 4, x) == \\\n2045.         FiniteSet(2*log(-sqrt(3) + 2), 2*log(sqrt(3) + 2))\n2046. \n2047. \n2048. def test_is_exponential():\n2049.     x, y, z = symbols(\'x y z\')\n2050. \n2051.     assert _is_exponential(y, x) is False\n2052.     assert _is_exponential(3**x - 2, x) is True\n2053.     assert _is_exponential(5**x - 7**(2 - x), x) is True\n2054.     assert _is_exponential(sin(2**x) - 4*x, x) is False\n2055.     assert _is_exponential(x**y - z, y) is True\n2056.     assert _is_exponential(x**y - z, x) is False\n2057.     assert _is_exponential(2**x + 4**x - 1, x) is True\n2058.     assert _is_exponential(x**(y*z) - x, x) is False\n2059.     assert _is_exponential(x**(2*x) - 3**x, x) is False\n2060.     assert _is_exponential(x**y - y*z, y) is False\n2061.     assert _is_exponential(x**y - x*z, y) is True\n2062. \n2063. \n2064. def test_solve_exponential():\n2065.     assert _solve_exponential(3**(2*x) - 2**(x + 3), 0, x, S.Reals) == \\\n2066.         FiniteSet(-3*log(2)/(-2*log(3) + log(2)))\n2067.     assert _solve_exponential(2**y + 4**y, 1, y, S.Reals) == \\\n2068.         FiniteSet(log(Rational(-1, 2) + sqrt(5)/2)/log(2))\n2069.     assert _solve_exponential(2**y + 4**y, 0, y, S.Reals) == \\\n2070.         S.EmptySet\n2071.     assert _solve_exponential(2**x + 3**x - 5**x, 0, x, S.Reals) == \\\n2072.         ConditionSet(x, Eq(2**x + 3**x - 5**x, 0), S.Reals)\n2073. \n2074. # end of exponential tests\n2075. \n2076. \n2077. # logarithmic tests\n2078. def test_logarithmic():\n2079.     assert solveset_real(log(x - 3) + log(x + 3), x) == FiniteSet(\n2080.         -sqrt(10), sqrt(10))\n2081.     assert solveset_real(log(x + 1) - log(2*x - 1), x) == FiniteSet(2)\n2082.     assert solveset_real(log(x + 3) + log(1 + 3/x) - 3, x) == FiniteSet(\n2083.         -3 + sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 + exp(3)/2,\n2084.         -sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 - 3 + exp(3)/2)\n2085. \n2086.     eq = z - log(x) + log(y/(x*(-1 + y**2/x**2)))\n2087.     assert solveset_real(eq, x) == \\\n2088.         Intersection(S.Reals, FiniteSet(-sqrt(y**2 - y*exp(z)),\n2089.             sqrt(y**2 - y*exp(z)))) - \\\n2090.         Intersection(S.Reals, FiniteSet(-sqrt(y**2), sqrt(y**2)))\n2091.     assert solveset_real(\n2092.         log(3*x) - log(-x + 1) - log(4*x + 1), x) == FiniteSet(Rational(-1, 2), S.Half)\n2093.     assert solveset(log(x**y) - y*log(x), x, S.Reals) == S.Reals\n2094. \n2095. @XFAIL\n2096. def test_uselogcombine_2():\n2097.     eq = log(exp(2*x) + 1) + log(-tanh(x) + 1) - log(2)\n2098.     assert solveset_real(eq, x) == EmptySet()\n2099.     eq = log(8*x) - log(sqrt(x) + 1) - 2\n2100.     assert solveset_real(eq, x) == EmptySet()\n2101. \n2102. \n2103. def test_is_logarithmic():\n2104.     assert _is_logarithmic(y, x) is False\n2105.     assert _is_logarithmic(log(x), x) is True\n2106.     assert _is_logarithmic(log(x) - 3, x) is True\n2107.     assert _is_logarithmic(log(x)*log(y), x) is True\n2108.     assert _is_logarithmic(log(x)**2, x) is False\n2109.     assert _is_logarithmic(log(x - 3) + log(x + 3), x) is True\n2110.     assert _is_logarithmic(log(x**y) - y*log(x), x) is True\n2111.     assert _is_logarithmic(sin(log(x)), x) is False\n2112.     assert _is_logarithmic(x + y, x) is False\n2113.     assert _is_logarithmic(log(3*x) - log(1 - x) + 4, x) is True\n2114.     assert _is_logarithmic(log(x) + log(y) + x, x) is False\n2115.     assert _is_logarithmic(log(log(x - 3)) + log(x - 3), x) is True\n2116.     assert _is_logarithmic(log(log(3) + x) + log(x), x) is True\n2117.     assert _is_logarithmic(log(x)*(y + 3) + log(x), y) is False\n2118. \n2119. \n2120. def test_solve_logarithm():\n2121.     y = Symbol(\'y\')\n2122.     assert _solve_logarithm(log(x**y) - y*log(x), 0, x, S.Reals) == S.Reals\n2123.     y = Symbol(\'y\', positive=True)\n2124.     assert _solve_logarithm(log(x)*log(y), 0, x, S.Reals) == FiniteSet(1)\n2125. \n2126. # end of logarithmic tests\n2127. \n2128. \n2129. def test_linear_coeffs():\n2130.     from sympy.solvers.solveset import linear_coeffs\n2131.     assert linear_coeffs(0, x) == [0, 0]\n2132.     assert all(i is S.Zero for i in linear_coeffs(0, x))\n2133.     assert linear_coeffs(x + 2*y + 3, x, y) == [1, 2, 3]\n2134.     assert linear_coeffs(x + 2*y + 3, y, x) == [2, 1, 3]\n2135.     assert linear_coeffs(x + 2*x**2 + 3, x, x**2) == [1, 2, 3]\n2136.     raises(ValueError, lambda:\n2137.         linear_coeffs(x + 2*x**2 + x**3, x, x**2))\n2138.     raises(ValueError, lambda:\n2139.         linear_coeffs(1/x*(x - 1) + 1/x, x))\n2140.     assert linear_coeffs(a*(x + y), x, y) == [a, a, 0]\n2141.     assert linear_coeffs(1.0, x, y) == [0, 0, 1.0]\n2142. \n2143. # modular tests\n2144. def test_is_modular():\n2145.     x, y = symbols(\'x y\')\n2146. \n2147.     assert _is_modular(y, x) is False\n2148.     assert _is_modular(Mod(x, 3) - 1, x) is True\n2149.     assert _is_modular(Mod(x**3 - 3*x**2 - x + 1, 3) - 1, x) is True\n2150.     assert _is_modular(Mod(exp(x + y), 3) - 2, x) is True\n2151.     assert _is_modular(Mod(exp(x + y), 3) - log(x), x) is True\n2152.     assert _is_modular(Mod(x, 3) - 1, y) is False\n2153.     assert _is_modular(Mod(x, 3)**2 - 5, x) is False\n2154.     assert _is_modular(Mod(x, 3)**2 - y, x) is False\n2155.     assert _is_modular(exp(Mod(x, 3)) - 1, x) is False\n2156.     assert _is_modular(Mod(3, y) - 1, y) is False\n2157. \n2158. \n2159. def test_invert_modular():\n2160.     x, y = symbols(\'x y\')\n2161.     n = Dummy(\'n\', integer=True)\n2162.     from sympy.solvers.solveset import _invert_modular as invert_modular\n2163. \n2164.     # non invertible cases\n2165.     assert invert_modular(Mod(sin(x), 7), S(5), n, x) == (Mod(sin(x), 7), 5)\n2166.     assert invert_modular(Mod(exp(x), 7), S(5), n, x) == (Mod(exp(x), 7), 5)\n2167.     assert invert_modular(Mod(log(x), 7), S(5), n, x) == (Mod(log(x), 7), 5)\n2168.     # a is symbol\n2169.     assert invert_modular(Mod(x, 7), S(5), n, x) == \\\n2170.             (x, ImageSet(Lambda(n, 7*n + 5), S.Integers))\n2171.     # a.is_Add\n2172.     assert invert_modular(Mod(x + 8, 7), S(5), n, x) == \\\n2173.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))\n2174.     assert invert_modular(Mod(x**2 + x, 7), S(5), n, x) == \\\n2175.             (Mod(x**2 + x, 7), 5)\n2176.     # a.is_Mul\n2177.     assert invert_modular(Mod(3*x, 7), S(5), n, x) == \\\n2178.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))\n2179.     assert invert_modular(Mod((x + 1)*(x + 2), 7), S(5), n, x) == \\\n2180.             (Mod((x + 1)*(x + 2), 7), 5)\n2181.     # a.is_Pow\n2182.     assert invert_modular(Mod(x**4, 7), S(5), n, x) == \\\n2183.             (x, EmptySet())\n2184.     assert invert_modular(Mod(3**x, 4), S(3), n, x) == \\\n2185.             (x, ImageSet(Lambda(n, 2*n + 1), S.Naturals0))\n2186.     assert invert_modular(Mod(2**(x**2 + x + 1), 7), S(2), n, x) == \\\n2187.             (x**2 + x + 1, ImageSet(Lambda(n, 3*n + 1), S.Naturals0))\n2188. \n2189. \n2190. def test_solve_modular():\n2191.     x = Symbol(\'x\')\n2192.     n = Dummy(\'n\', integer=True)\n2193.     # if rhs has symbol (need to be implemented in future).\n2194.     assert solveset(Mod(x, 4) - x, x, S.Integers) == \\\n2195.             ConditionSet(x, Eq(-x + Mod(x, 4), 0), \\\n2196.             S.Integers)\n2197.     # when _invert_modular fails to invert\n2198.     assert solveset(3 - Mod(sin(x), 7), x, S.Integers) == \\\n2199.             ConditionSet(x, Eq(Mod(sin(x), 7) - 3, 0), S.Integers)\n2200.     assert solveset(3 - Mod(log(x), 7), x, S.Integers) == \\\n2201.             ConditionSet(x, Eq(Mod(log(x), 7) - 3, 0), S.Integers)\n2202.     assert solveset(3 - Mod(exp(x), 7), x, S.Integers) == \\\n2203.             ConditionSet(x, Eq(Mod(exp(x), 7) - 3, 0), S.Integers)\n2204.     # EmptySet solution definitely\n2205.     assert solveset(7 - Mod(x, 5), x, S.Integers) == EmptySet()\n2206.     assert solveset(5 - Mod(x, 5), x, S.Integers) == EmptySet()\n2207.     # Negative m\n2208.     assert solveset(2 + Mod(x, -3), x, S.Integers) == \\\n2209.             ImageSet(Lambda(n, -3*n - 2), S.Integers)\n2210.     assert solveset(4 + Mod(x, -3), x, S.Integers) == EmptySet()\n2211.     # linear expression in Mod\n2212.     assert solveset(3 - Mod(x, 5), x, S.Integers) == ImageSet(Lambda(n, 5*n + 3), S.Integers)\n2213.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Integers) == \\\n2214.                 ImageSet(Lambda(n, 7*n + 5), S.Integers)\n2215.     assert solveset(3 - Mod(5*x, 7), x, S.Integers) == \\\n2216.                 ImageSet(Lambda(n, 7*n + 2), S.Integers)\n2217.     # higher degree expression in Mod\n2218.     assert solveset(Mod(x**2, 160) - 9, x, S.Integers) == \\\n2219.             Union(ImageSet(Lambda(n, 160*n + 3), S.Integers),\n2220.             ImageSet(Lambda(n, 160*n + 13), S.Integers),\n2221.             ImageSet(Lambda(n, 160*n + 67), S.Integers),\n2222.             ImageSet(Lambda(n, 160*n + 77), S.Integers),\n2223.             ImageSet(Lambda(n, 160*n + 83), S.Integers),\n2224.             ImageSet(Lambda(n, 160*n + 93), S.Integers),\n2225.             ImageSet(Lambda(n, 160*n + 147), S.Integers),\n2226.             ImageSet(Lambda(n, 160*n + 157), S.Integers))\n2227.     assert solveset(3 - Mod(x**4, 7), x, S.Integers) == EmptySet()\n2228.     assert solveset(Mod(x**4, 17) - 13, x, S.Integers) == \\\n2229.             Union(ImageSet(Lambda(n, 17*n + 3), S.Integers),\n2230.             ImageSet(Lambda(n, 17*n + 5), S.Integers),\n2231.             ImageSet(Lambda(n, 17*n + 12), S.Integers),\n2232.             ImageSet(Lambda(n, 17*n + 14), S.Integers))\n2233.     # a.is_Pow tests\n2234.     assert solveset(Mod(7**x, 41) - 15, x, S.Integers) == \\\n2235.             ImageSet(Lambda(n, 40*n + 3), S.Naturals0)\n2236.     assert solveset(Mod(12**x, 21) - 18, x, S.Integers) == \\\n2237.             ImageSet(Lambda(n, 6*n + 2), S.Naturals0)\n2238.     assert solveset(Mod(3**x, 4) - 3, x, S.Integers) == \\\n2239.             ImageSet(Lambda(n, 2*n + 1), S.Naturals0)\n2240.     assert solveset(Mod(2**x, 7) - 2 , x, S.Integers) == \\\n2241.             ImageSet(Lambda(n, 3*n + 1), S.Naturals0)\n2242.     assert solveset(Mod(3**(3**x), 4) - 3, x, S.Integers) == \\\n2243.             Intersection(ImageSet(Lambda(n, Intersection({log(2*n + 1)/log(3)},\n2244.             S.Integers)), S.Naturals0), S.Integers)\n2245.     # Not Implemented for m without primitive root\n2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \\\n2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)\n2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \\\n2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)\n2250.     # domain intersection\n2251.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Naturals0) == \\\n2252.             Intersection(ImageSet(Lambda(n, 7*n + 5), S.Integers), S.Naturals0)\n2253.     # Complex args\n2254.     assert solveset(Mod(x, 3) - I, x, S.Integers) == \\\n2255.             EmptySet()\n2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \\\n2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)\n2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \\\n2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)\n2260.     # issue 13178\n2261.     n = symbols(\'n\', integer=True)\n2262.     a = 742938285\n2263.     z = 1898888478\n2264.     m = 2**31 - 1\n2265.     x = 20170816\n2266.     assert solveset(x - Mod(a**n*z, m), n, S.Integers) == \\\n2267.             ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0)\n2268.     assert solveset(x - Mod(a**n*z, m), n, S.Naturals0) == \\\n2269.             Intersection(ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0),\n2270.             S.Naturals0)\n2271.     assert solveset(x - Mod(a**(2*n)*z, m), n, S.Integers) == \\\n2272.             Intersection(ImageSet(Lambda(n, 1073741823*n + 50), S.Naturals0),\n2273.             S.Integers)\n2274.     assert solveset(x - Mod(a**(2*n + 7)*z, m), n, S.Integers) == EmptySet()\n2275.     assert solveset(x - Mod(a**(n - 4)*z, m), n, S.Integers) == \\\n2276.             Intersection(ImageSet(Lambda(n, 2147483646*n + 104), S.Naturals0),\n2277.             S.Integers)\n2278. \n2279. @XFAIL\n2280. def test_solve_modular_fail():\n2281.     # issue 17373 (https://github.com/sympy/sympy/issues/17373)\n2282.     assert solveset(Mod(x**4, 14) - 11, x, S.Integers) == \\\n2283.             Union(ImageSet(Lambda(n, 14*n + 3), S.Integers),\n2284.             ImageSet(Lambda(n, 14*n + 11), S.Integers))\n2285.     assert solveset(Mod(x**31, 74) - 43, x, S.Integers) == \\\n2286.             ImageSet(Lambda(n, 74*n + 31), S.Integers)\n2287. \n2288. # end of modular tests', start_line_number=1, end_line_number=2288)]
2025-10-06 07:18:57,070 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Issue title:\n`solveset` raises `NotImplementedError` instead of returning `ConditionSet`\n\nIssue description: \nThe problem is\n```julia\nIn [10]: Eq(n*cos(n) - 3*sin(n), 0).as_set()                                                                                                                  \n---------------------------------------------------------------------------\nNotImplementedError\n```\nHere `solveset` raises `NotImplementedError` but probably a `ConditionSet` should be returned by `solveset` instead. The obvious result of `as_set()` here is\n```julia\nIn [11]: ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)                                                                                                   \nOut[11]: {n | n ‚àä ‚Ñù ‚àß n‚ãÖcos(n) - 3‚ãÖsin(n) = 0}\n```\n\n_Originally posted by @oscarbenjamin in https://github.com/sympy/sympy/pull/17771_\n\nIssue comments:\n\n\nBug reproducing context:\nFile: sympy/solvers/tests/test_solveset.py\nLine number range: 1 - 2288\nContent:\n1. from sympy.core.containers import Tuple\n2. from sympy.core.function import (Function, Lambda, nfloat)\n3. from sympy.core.mod import Mod\n4. from sympy.core.numbers import (E, I, Rational, oo, pi)\n5. from sympy.core.relational import (Eq, Gt,\n6.     Ne)\n7. from sympy.core.singleton import S\n8. from sympy.core.symbol import (Dummy, Symbol, symbols)\n9. from sympy.functions.elementary.complexes import (Abs, arg, im, re, sign)\n10. from sympy.functions.elementary.exponential import (LambertW, exp, log)\n11. from sympy.functions.elementary.hyperbolic import (HyperbolicFunction,\n12.     atanh, sinh, tanh, cosh, sech, coth)\n13. from sympy.functions.elementary.miscellaneous import sqrt, Min, Max\n14. from sympy.functions.elementary.piecewise import Piecewise\n15. from sympy.functions.elementary.trigonometric import (\n16.     TrigonometricFunction, acos, acot, acsc, asec, asin, atan, atan2,\n17.     cos, cot, csc, sec, sin, tan)\n18. from sympy.functions.special.error_functions import (erf, erfc,\n19.     erfcinv, erfinv)\n20. from sympy.logic.boolalg import And\n21. from sympy.matrices.dense import MutableDenseMatrix as Matrix\n22. from sympy.matrices.immutable import ImmutableDenseMatrix\n23. from sympy.polys.polytools import Poly\n24. from sympy.polys.rootoftools import CRootOf\n25. from sympy.sets.contains import Contains\n26. from sympy.sets.conditionset import ConditionSet\n27. from sympy.sets.fancysets import ImageSet\n28. from sympy.sets.sets import (Complement, EmptySet, FiniteSet,\n29.     Intersection, Interval, Union, imageset, ProductSet)\n30. from sympy.tensor.indexed import Indexed\n31. from sympy.utilities.iterables import numbered_symbols\n32. \n33. from sympy.utilities.pytest import (XFAIL, raises, skip, slow, SKIP,\n34.     nocache_fail)\n35. from sympy.utilities.randtest import verify_numerically as tn\n36. from sympy.physics.units import cm\n37. \n38. from sympy.solvers.solveset import (\n39.     solveset_real, domain_check, solveset_complex, linear_eq_to_matrix,\n40.     linsolve, _is_function_class_equation, invert_real, invert_complex,\n41.     solveset, solve_decomposition, substitution, nonlinsolve, solvify,\n42.     _is_finite_with_finite_vars, _transolve, _is_exponential,\n43.     _solve_exponential, _is_logarithmic,\n44.     _solve_logarithm, _term_factors, _is_modular)\n45. \n46. \n47. a = Symbol(\'a\', real=True)\n48. b = Symbol(\'b\', real=True)\n49. c = Symbol(\'c\', real=True)\n50. x = Symbol(\'x\', real=True)\n51. y = Symbol(\'y\', real=True)\n52. z = Symbol(\'z\', real=True)\n53. q = Symbol(\'q\', real=True)\n54. m = Symbol(\'m\', real=True)\n55. n = Symbol(\'n\', real=True)\n56. \n57. \n58. def test_invert_real():\n59.     x = Symbol(\'x\', real=True)\n60.     y = Symbol(\'y\')\n61.     n = Symbol(\'n\')\n62. \n63.     def ireal(x, s=S.Reals):\n64.         return Intersection(s, x)\n65. \n66.     # issue 14223\n67.     assert invert_real(x, 0, x, Interval(1, 2)) == (x, S.EmptySet)\n68. \n69.     assert invert_real(exp(x), y, x) == (x, ireal(FiniteSet(log(y))))\n70. \n71.     y = Symbol(\'y\', positive=True)\n72.     n = Symbol(\'n\', real=True)\n73.     assert invert_real(x + 3, y, x) == (x, FiniteSet(y - 3))\n74.     assert invert_real(x*3, y, x) == (x, FiniteSet(y / 3))\n75. \n76.     assert invert_real(exp(x), y, x) == (x, FiniteSet(log(y)))\n77.     assert invert_real(exp(3*x), y, x) == (x, FiniteSet(log(y) / 3))\n78.     assert invert_real(exp(x + 3), y, x) == (x, FiniteSet(log(y) - 3))\n79. \n80.     assert invert_real(exp(x) + 3, y, x) == (x, ireal(FiniteSet(log(y - 3))))\n81.     assert invert_real(exp(x)*3, y, x) == (x, FiniteSet(log(y / 3)))\n82. \n83.     assert invert_real(log(x), y, x) == (x, FiniteSet(exp(y)))\n84.     assert invert_real(log(3*x), y, x) == (x, FiniteSet(exp(y) / 3))\n85.     assert invert_real(log(x + 3), y, x) == (x, FiniteSet(exp(y) - 3))\n86. \n87.     assert invert_real(Abs(x), y, x) == (x, FiniteSet(y, -y))\n88. \n89.     assert invert_real(2**x, y, x) == (x, FiniteSet(log(y)/log(2)))\n90.     assert invert_real(2**exp(x), y, x) == (x, ireal(FiniteSet(log(log(y)/log(2)))))\n91. \n92.     assert invert_real(x**2, y, x) == (x, FiniteSet(sqrt(y), -sqrt(y)))\n93.     assert invert_real(x**S.Half, y, x) == (x, FiniteSet(y**2))\n94. \n95.     raises(ValueError, lambda: invert_real(x, x, x))\n96.     raises(ValueError, lambda: invert_real(x**pi, y, x))\n97.     raises(ValueError, lambda: invert_real(S.One, y, x))\n98. \n99.     assert invert_real(x**31 + x, y, x) == (x**31 + x, FiniteSet(y))\n100. \n101.     lhs = x**31 + x\n102.     base_values =  FiniteSet(y - 1, -y - 1)\n103.     assert invert_real(Abs(x**31 + x + 1), y, x) == (lhs, base_values)\n104. \n105.     assert invert_real(sin(x), y, x) == \\\n106.         (x, imageset(Lambda(n, n*pi + (-1)**n*asin(y)), S.Integers))\n107. \n108.     assert invert_real(sin(exp(x)), y, x) == \\\n109.         (x, imageset(Lambda(n, log((-1)**n*asin(y) + n*pi)), S.Integers))\n110. \n111.     assert invert_real(csc(x), y, x) == \\\n112.         (x, imageset(Lambda(n, n*pi + (-1)**n*acsc(y)), S.Integers))\n113. \n114.     assert invert_real(csc(exp(x)), y, x) == \\\n115.         (x, imageset(Lambda(n, log((-1)**n*acsc(y) + n*pi)), S.Integers))\n116. \n117.     assert invert_real(cos(x), y, x) == \\\n118.         (x, Union(imageset(Lambda(n, 2*n*pi + acos(y)), S.Integers), \\\n119.                 imageset(Lambda(n, 2*n*pi - acos(y)), S.Integers)))\n120. \n121.     assert invert_real(cos(exp(x)), y, x) == \\\n122.         (x, Union(imageset(Lambda(n, log(2*n*pi + acos(y))), S.Integers), \\\n123.                 imageset(Lambda(n, log(2*n*pi - acos(y))), S.Integers)))\n124. \n125.     assert invert_real(sec(x), y, x) == \\\n126.         (x, Union(imageset(Lambda(n, 2*n*pi + asec(y)), S.Integers), \\\n127.                 imageset(Lambda(n, 2*n*pi - asec(y)), S.Integers)))\n128. \n129.     assert invert_real(sec(exp(x)), y, x) == \\\n130.         (x, Union(imageset(Lambda(n, log(2*n*pi + asec(y))), S.Integers), \\\n131.                 imageset(Lambda(n, log(2*n*pi - asec(y))), S.Integers)))\n132. \n133.     assert invert_real(tan(x), y, x) == \\\n134.         (x, imageset(Lambda(n, n*pi + atan(y)), S.Integers))\n135. \n136.     assert invert_real(tan(exp(x)), y, x) == \\\n137.         (x, imageset(Lambda(n, log(n*pi + atan(y))), S.Integers))\n138. \n139.     assert invert_real(cot(x), y, x) == \\\n140.         (x, imageset(Lambda(n, n*pi + acot(y)), S.Integers))\n141. \n142.     assert invert_real(cot(exp(x)), y, x) == \\\n143.         (x, imageset(Lambda(n, log(n*pi + acot(y))), S.Integers))\n144. \n145.     assert invert_real(tan(tan(x)), y, x) == \\\n146.         (tan(x), imageset(Lambda(n, n*pi + atan(y)), S.Integers))\n147. \n148.     x = Symbol(\'x\', positive=True)\n149.     assert invert_real(x**pi, y, x) == (x, FiniteSet(y**(1/pi)))\n150. \n151. \n152. def test_invert_complex():\n153.     assert invert_complex(x + 3, y, x) == (x, FiniteSet(y - 3))\n154.     assert invert_complex(x*3, y, x) == (x, FiniteSet(y / 3))\n155. \n156.     assert invert_complex(exp(x), y, x) == \\\n157.         (x, imageset(Lambda(n, I*(2*pi*n + arg(y)) + log(Abs(y))), S.Integers))\n158. \n159.     assert invert_complex(log(x), y, x) == (x, FiniteSet(exp(y)))\n160. \n161.     raises(ValueError, lambda: invert_real(1, y, x))\n162.     raises(ValueError, lambda: invert_complex(x, x, x))\n163.     raises(ValueError, lambda: invert_complex(x, x, 1))\n164. \n165.     # https://github.com/skirpichev/omg/issues/16\n166.     assert invert_complex(sinh(x), 0, x) != (x, FiniteSet(0))\n167. \n168. \n169. def test_domain_check():\n170.     assert domain_check(1/(1 + (1/(x+1))**2), x, -1) is False\n171.     assert domain_check(x**2, x, 0) is True\n172.     assert domain_check(x, x, oo) is False\n173.     assert domain_check(0, x, oo) is False\n174. \n175. \n176. def test_issue_11536():\n177.     assert solveset(0**x - 100, x, S.Reals) == S.EmptySet\n178.     assert solveset(0**x - 1, x, S.Reals) == FiniteSet(0)\n179. \n180. \n181. def test_issue_17479():\n182.     import sympy as sb\n183.     from sympy.solvers.solveset import nonlinsolve\n184.     x, y, z = sb.symbols("x, y, z")\n185.     f = (x**2 + y**2)**2 + (x**2 + z**2)**2 - 2*(2*x**2 + y**2 + z**2)\n186.     fx = sb.diff(f, x)\n187.     fy = sb.diff(f, y)\n188.     fz = sb.diff(f, z)\n189.     sol = nonlinsolve([fx, fy, fz], [x, y, z])\n190.     # FIXME: This previously gave 18 solutions and now gives 20 due to fixes\n191.     # in the handling of intersection of FiniteSets or possibly a small change\n192.     # to ImageSet._contains. However Using expand I can turn this into 16\n193.     # solutions either way:\n194.     #\n195.     #    >>> len(FiniteSet(*(Tuple(*(expand(w) for w in s)) for s in sol)))\n196.     #    16\n197.     #\n198.     assert len(sol) == 20\n199. \n200. \n201. def test_is_function_class_equation():\n202.     from sympy.abc import x, a\n203.     assert _is_function_class_equation(TrigonometricFunction,\n204.                                        tan(x), x) is True\n205.     assert _is_function_class_equation(TrigonometricFunction,\n206.                                        tan(x) - 1, x) is True\n207.     assert _is_function_class_equation(TrigonometricFunction,\n208.                                        tan(x) + sin(x), x) is True\n209.     assert _is_function_class_equation(TrigonometricFunction,\n210.                                        tan(x) + sin(x) - a, x) is True\n211.     assert _is_function_class_equation(TrigonometricFunction,\n212.                                        sin(x)*tan(x) + sin(x), x) is True\n213.     assert _is_function_class_equation(TrigonometricFunction,\n214.                                        sin(x)*tan(x + a) + sin(x), x) is True\n215.     assert _is_function_class_equation(TrigonometricFunction,\n216.                                        sin(x)*tan(x*a) + sin(x), x) is True\n217.     assert _is_function_class_equation(TrigonometricFunction,\n218.                                        a*tan(x) - 1, x) is True\n219.     assert _is_function_class_equation(TrigonometricFunction,\n220.                                        tan(x)**2 + sin(x) - 1, x) is True\n221.     assert _is_function_class_equation(TrigonometricFunction,\n222.                                        tan(x) + x, x) is False\n223.     assert _is_function_class_equation(TrigonometricFunction,\n224.                                        tan(x**2), x) is False\n225.     assert _is_function_class_equation(TrigonometricFunction,\n226.                                        tan(x**2) + sin(x), x) is False\n227.     assert _is_function_class_equation(TrigonometricFunction,\n228.                                        tan(x)**sin(x), x) is False\n229.     assert _is_function_class_equation(TrigonometricFunction,\n230.                                        tan(sin(x)) + sin(x), x) is False\n231.     assert _is_function_class_equation(HyperbolicFunction,\n232.                                        tanh(x), x) is True\n233.     assert _is_function_class_equation(HyperbolicFunction,\n234.                                        tanh(x) - 1, x) is True\n235.     assert _is_function_class_equation(HyperbolicFunction,\n236.                                        tanh(x) + sinh(x), x) is True\n237.     assert _is_function_class_equation(HyperbolicFunction,\n238.                                        tanh(x) + sinh(x) - a, x) is True\n239.     assert _is_function_class_equation(HyperbolicFunction,\n240.                                        sinh(x)*tanh(x) + sinh(x), x) is True\n241.     assert _is_function_class_equation(HyperbolicFunction,\n242.                                        sinh(x)*tanh(x + a) + sinh(x), x) is True\n243.     assert _is_function_class_equation(HyperbolicFunction,\n244.                                        sinh(x)*tanh(x*a) + sinh(x), x) is True\n245.     assert _is_function_class_equation(HyperbolicFunction,\n246.                                        a*tanh(x) - 1, x) is True\n247.     assert _is_function_class_equation(HyperbolicFunction,\n248.                                        tanh(x)**2 + sinh(x) - 1, x) is True\n249.     assert _is_function_class_equation(HyperbolicFunction,\n250.                                        tanh(x) + x, x) is False\n251.     assert _is_function_class_equation(HyperbolicFunction,\n252.                                        tanh(x**2), x) is False\n253.     assert _is_function_class_equation(HyperbolicFunction,\n254.                                        tanh(x**2) + sinh(x), x) is False\n255.     assert _is_function_class_equation(HyperbolicFunction,\n256.                                        tanh(x)**sinh(x), x) is False\n257.     assert _is_function_class_equation(HyperbolicFunction,\n258.                                        tanh(sinh(x)) + sinh(x), x) is False\n259. \n260. \n261. def test_garbage_input():\n262.     raises(ValueError, lambda: solveset_real([x], x))\n263.     assert solveset_real(x, 1) == S.EmptySet\n264.     assert solveset_real(x - 1, 1) == FiniteSet(x)\n265.     assert solveset_real(x, pi) == S.EmptySet\n266.     assert solveset_real(x, x**2) == S.EmptySet\n267. \n268.     raises(ValueError, lambda: solveset_complex([x], x))\n269.     assert solveset_complex(x, pi) == S.EmptySet\n270. \n271.     raises(ValueError, lambda: solveset((x, y), x))\n272.     raises(ValueError, lambda: solveset(x + 1, S.Reals))\n273.     raises(ValueError, lambda: solveset(x + 1, x, 2))\n274. \n275. \n276. def test_solve_mul():\n277.     assert solveset_real((a*x + b)*(exp(x) - 3), x) == \\\n278.         Union({log(3)}, Intersection({-b/a}, S.Reals))\n279.     anz = Symbol(\'anz\', nonzero=True)\n280.     assert solveset_real((anz*x + b)*(exp(x) - 3), x) == \\\n281.         FiniteSet(-b/anz, log(3))\n282.     assert solveset_real((2*x + 8)*(8 + exp(x)), x) == FiniteSet(S(-4))\n283.     assert solveset_real(x/log(x), x) == EmptySet()\n284. \n285. \n286. def test_solve_invert():\n287.     assert solveset_real(exp(x) - 3, x) == FiniteSet(log(3))\n288.     assert solveset_real(log(x) - 3, x) == FiniteSet(exp(3))\n289. \n290.     assert solveset_real(3**(x + 2), x) == FiniteSet()\n291.     assert solveset_real(3**(2 - x), x) == FiniteSet()\n292. \n293.     assert solveset_real(y - b*exp(a/x), x) == Intersection(\n294.         S.Reals, FiniteSet(a/log(y/b)))\n295. \n296.     # issue 4504\n297.     assert solveset_real(2**x - 10, x) == FiniteSet(1 + log(5)/log(2))\n298. \n299. \n300. def test_errorinverses():\n301.     assert solveset_real(erf(x) - S.Half, x) == \\\n302.         FiniteSet(erfinv(S.Half))\n303.     assert solveset_real(erfinv(x) - 2, x) == \\\n304.         FiniteSet(erf(2))\n305.     assert solveset_real(erfc(x) - S.One, x) == \\\n306.         FiniteSet(erfcinv(S.One))\n307.     assert solveset_real(erfcinv(x) - 2, x) == FiniteSet(erfc(2))\n308. \n309. \n310. def test_solve_polynomial():\n311.     assert solveset_real(3*x - 2, x) == FiniteSet(Rational(2, 3))\n312. \n313.     assert solveset_real(x**2 - 1, x) == FiniteSet(-S.One, S.One)\n314.     assert solveset_real(x - y**3, x) == FiniteSet(y ** 3)\n315. \n316.     a11, a12, a21, a22, b1, b2 = symbols(\'a11, a12, a21, a22, b1, b2\')\n317. \n318.     assert solveset_real(x**3 - 15*x - 4, x) == FiniteSet(\n319.         -2 + 3 ** S.Half,\n320.         S(4),\n321.         -2 - 3 ** S.Half)\n322. \n323.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n324.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n325.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n326.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n327.     assert len(solveset_real(x**5 + x**3 + 1, x)) == 1\n328.     assert len(solveset_real(-2*x**3 + 4*x**2 - 2*x + 6, x)) > 0\n329. \n330.     assert solveset_real(x**6 + x**4  + I, x) == ConditionSet(x,\n331.                                         Eq(x**6 + x**4 + I, 0), S.Reals)\n332. \n333. \n334. def test_return_root_of():\n335.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20\n336.     s = list(solveset_complex(f, x))\n337.     for root in s:\n338.         assert root.func == CRootOf\n339. \n340.     # if one uses solve to get the roots of a polynomial that has a CRootOf\n341.     # solution, make sure that the use of nfloat during the solve process\n342.     # doesn\'t fail. Note: if you want numerical solutions to a polynomial\n343.     # it is *much* faster to use nroots to get them than to solve the\n344.     # equation only to get CRootOf solutions which are then numerically\n345.     # evaluated. So for eq = x**5 + 3*x + 7 do Poly(eq).nroots() rather\n346.     # than [i.n() for i in solve(eq)] to get the numerical roots of eq.\n347.     assert nfloat(list(solveset_complex(x**5 + 3*x**3 + 7, x))[0],\n348.                   exponent=False) == CRootOf(x**5 + 3*x**3 + 7, 0).n()\n349. \n350.     sol = list(solveset_complex(x**6 - 2*x + 2, x))\n351.     assert all(isinstance(i, CRootOf) for i in sol) and len(sol) == 6\n352. \n353.     f = x**5 - 15*x**3 - 5*x**2 + 10*x + 20\n354.     s = list(solveset_complex(f, x))\n355.     for root in s:\n356.         assert root.func == CRootOf\n357. \n358.     s = x**5 + 4*x**3 + 3*x**2 + Rational(7, 4)\n359.     assert solveset_complex(s, x) == \\\n360.         FiniteSet(*Poly(s*4, domain=\'ZZ\').all_roots())\n361. \n362.     # Refer issue #7876\n363.     eq = x*(x - 1)**2*(x + 1)*(x**6 - x + 1)\n364.     assert solveset_complex(eq, x) == \\\n365.         FiniteSet(-1, 0, 1, CRootOf(x**6 - x + 1, 0),\n366.                        CRootOf(x**6 - x + 1, 1),\n367.                        CRootOf(x**6 - x + 1, 2),\n368.                        CRootOf(x**6 - x + 1, 3),\n369.                        CRootOf(x**6 - x + 1, 4),\n370.                        CRootOf(x**6 - x + 1, 5))\n371. \n372. \n373. def test__has_rational_power():\n374.     from sympy.solvers.solveset import _has_rational_power\n375.     assert _has_rational_power(sqrt(2), x)[0] is False\n376.     assert _has_rational_power(x*sqrt(2), x)[0] is False\n377. \n378.     assert _has_rational_power(x**2*sqrt(x), x) == (True, 2)\n379.     assert _has_rational_power(sqrt(2)*x**Rational(1, 3), x) == (True, 3)\n380.     assert _has_rational_power(sqrt(x)*x**Rational(1, 3), x) == (True, 6)\n381. \n382. \n383. def test_solveset_sqrt_1():\n384.     assert solveset_real(sqrt(5*x + 6) - 2 - x, x) == \\\n385.         FiniteSet(-S.One, S(2))\n386.     assert solveset_real(sqrt(x - 1) - x + 7, x) == FiniteSet(10)\n387.     assert solveset_real(sqrt(x - 2) - 5, x) == FiniteSet(27)\n388.     assert solveset_real(sqrt(x) - 2 - 5, x) == FiniteSet(49)\n389.     assert solveset_real(sqrt(x**3), x) == FiniteSet(0)\n390.     assert solveset_real(sqrt(x - 1), x) == FiniteSet(1)\n391. \n392. \n393. def test_solveset_sqrt_2():\n394.     # http://tutorial.math.lamar.edu/Classes/Alg/SolveRadicalEqns.aspx#Solve_Rad_Ex2_a\n395.     assert solveset_real(sqrt(2*x - 1) - sqrt(x - 4) - 2, x) == \\\n396.         FiniteSet(S(5), S(13))\n397.     assert solveset_real(sqrt(x + 7) + 2 - sqrt(3 - x), x) == \\\n398.         FiniteSet(-6)\n399. \n400.     # http://www.purplemath.com/modules/solverad.htm\n401.     assert solveset_real(sqrt(17*x - sqrt(x**2 - 5)) - 7, x) == \\\n402.         FiniteSet(3)\n403. \n404.     eq = x + 1 - (x**4 + 4*x**3 - x)**Rational(1, 4)\n405.     assert solveset_real(eq, x) == FiniteSet(Rational(-1, 2), Rational(-1, 3))\n406. \n407.     eq = sqrt(2*x + 9) - sqrt(x + 1) - sqrt(x + 4)\n408.     assert solveset_real(eq, x) == FiniteSet(0)\n409. \n410.     eq = sqrt(x + 4) + sqrt(2*x - 1) - 3*sqrt(x - 1)\n411.     assert solveset_real(eq, x) == FiniteSet(5)\n412. \n413.     eq = sqrt(x)*sqrt(x - 7) - 12\n414.     assert solveset_real(eq, x) == FiniteSet(16)\n415. \n416.     eq = sqrt(x - 3) + sqrt(x) - 3\n417.     assert solveset_real(eq, x) == FiniteSet(4)\n418. \n419.     eq = sqrt(2*x**2 - 7) - (3 - x)\n420.     assert solveset_real(eq, x) == FiniteSet(-S(8), S(2))\n421. \n422.     # others\n423.     eq = sqrt(9*x**2 + 4) - (3*x + 2)\n424.     assert solveset_real(eq, x) == FiniteSet(0)\n425. \n426.     assert solveset_real(sqrt(x - 3) - sqrt(x) - 3, x) == FiniteSet()\n427. \n428.     eq = (2*x - 5)**Rational(1, 3) - 3\n429.     assert solveset_real(eq, x) == FiniteSet(16)\n430. \n431.     assert solveset_real(sqrt(x) + sqrt(sqrt(x)) - 4, x) == \\\n432.         FiniteSet((Rational(-1, 2) + sqrt(17)/2)**4)\n433. \n434.     eq = sqrt(x) - sqrt(x - 1) + sqrt(sqrt(x))\n435.     assert solveset_real(eq, x) == FiniteSet()\n436. \n437.     eq = (sqrt(x) + sqrt(x + 1) + sqrt(1 - x) - 6*sqrt(5)/5)\n438.     ans = solveset_real(eq, x)\n439.     ra = S(\'\'\'-1484/375 - 4*(-1/2 + sqrt(3)*I/2)*(-12459439/52734375 +\n440.     114*sqrt(12657)/78125)**(1/3) - 172564/(140625*(-1/2 +\n441.     sqrt(3)*I/2)*(-12459439/52734375 + 114*sqrt(12657)/78125)**(1/3))\'\'\')\n442.     rb = Rational(4, 5)\n443.     assert all(abs(eq.subs(x, i).n()) < 1e-10 for i in (ra, rb)) and \\\n444.         len(ans) == 2 and \\\n445.         set([i.n(chop=True) for i in ans]) == \\\n446.         set([i.n(chop=True) for i in (ra, rb)])\n447. \n448.     assert solveset_real(sqrt(x) + x**Rational(1, 3) +\n449.                                  x**Rational(1, 4), x) == FiniteSet(0)\n450. \n451.     assert solveset_real(x/sqrt(x**2 + 1), x) == FiniteSet(0)\n452. \n453.     eq = (x - y**3)/((y**2)*sqrt(1 - y**2))\n454.     assert solveset_real(eq, x) == FiniteSet(y**3)\n455. \n456.     # issue 4497\n457.     assert solveset_real(1/(5 + x)**Rational(1, 5) - 9, x) == \\\n458.         FiniteSet(Rational(-295244, 59049))\n459. \n460. \n461. @XFAIL\n462. def test_solve_sqrt_fail():\n463.     # this only works if we check real_root(eq.subs(x, Rational(1, 3)))\n464.     # but checksol doesn\'t work like that\n465.     eq = (x**3 - 3*x**2)**Rational(1, 3) + 1 - x\n466.     assert solveset_real(eq, x) == FiniteSet(Rational(1, 3))\n467. \n468. \n469. @slow\n470. def test_solve_sqrt_3():\n471.     R = Symbol(\'R\')\n472.     eq = sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1)\n473.     sol = solveset_complex(eq, R)\n474.     fset = [Rational(5, 3) + 4*sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3,\n475.             -sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 +\n476.             40*re(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 +\n477.             sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 + Rational(5, 3) +\n478.             I*(-sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3 -\n479.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n480.                40*im(1/((Rational(-1, 2) - sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9)]\n481.     cset = [40*re(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n482.             sqrt(10)*cos(atan(3*sqrt(111)/251)/3)/3 - sqrt(30)*sin(atan(3*sqrt(111)/251)/3)/3 +\n483.             Rational(5, 3) +\n484.             I*(40*im(1/((Rational(-1, 2) + sqrt(3)*I/2)*(Rational(251, 27) + sqrt(111)*I/9)**Rational(1, 3)))/9 -\n485.                sqrt(10)*sin(atan(3*sqrt(111)/251)/3)/3 +\n486.                sqrt(30)*cos(atan(3*sqrt(111)/251)/3)/3)]\n487. \n488.     assert sol._args[0] == FiniteSet(*fset)\n489.     assert sol._args[1] == ConditionSet(\n490.         R,\n491.         Eq(sqrt(2)*R*sqrt(1/(R + 1)) + (R + 1)*(sqrt(2)*sqrt(1/(R + 1)) - 1), 0),\n492.         FiniteSet(*cset))\n493. \n494.     # the number of real roots will depend on the value of m: for m=1 there are 4\n495.     # and for m=-1 there are none.\n496.     eq = -sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) + sqrt((-m**2/2 - sqrt(\n497.         4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m - sqrt(\n498.             4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2)\n499.     unsolved_object = ConditionSet(q, Eq(sqrt((m - q)**2 + (-m/(2*q) + S.Half)**2) -\n500.         sqrt((-m**2/2 - sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2 + (m**2/2 - m -\n501.         sqrt(4*m**4 - 4*m**2 + 8*m + 1)/4 - Rational(1, 4))**2), 0), S.Reals)\n502.     assert solveset_real(eq, q) == unsolved_object\n503. \n504. \n505. def test_solve_polynomial_symbolic_param():\n506.     assert solveset_complex((x**2 - 1)**2 - a, x) == \\\n507.         FiniteSet(sqrt(1 + sqrt(a)), -sqrt(1 + sqrt(a)),\n508.                   sqrt(1 - sqrt(a)), -sqrt(1 - sqrt(a)))\n509. \n510.     # issue 4507\n511.     assert solveset_complex(y - b/(1 + a*x), x) == \\\n512.         FiniteSet((b/y - 1)/a) - FiniteSet(-1/a)\n513. \n514.     # issue 4508\n515.     assert solveset_complex(y - b*x/(a + x), x) == \\\n516.         FiniteSet(-a*y/(y - b)) - FiniteSet(-a)\n517. \n518. \n519. def test_solve_rational():\n520.     assert solveset_real(1/x + 1, x) == FiniteSet(-S.One)\n521.     assert solveset_real(1/exp(x) - 1, x) == FiniteSet(0)\n522.     assert solveset_real(x*(1 - 5/x), x) == FiniteSet(5)\n523.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)\n524.     assert solveset_real((x**2/(7 - x)).diff(x), x) == \\\n525.         FiniteSet(S.Zero, S(14))\n526. \n527. \n528. def test_solveset_real_gen_is_pow():\n529.     assert solveset_real(sqrt(1) + 1, x) == EmptySet()\n530. \n531. \n532. def test_no_sol():\n533.     assert solveset(1 - oo*x) == EmptySet()\n534.     assert solveset(oo*x, x) == EmptySet()\n535.     assert solveset(oo*x - oo, x) == EmptySet()\n536.     assert solveset_real(4, x) == EmptySet()\n537.     assert solveset_real(exp(x), x) == EmptySet()\n538.     assert solveset_real(x**2 + 1, x) == EmptySet()\n539.     assert solveset_real(-3*a/sqrt(x), x) == EmptySet()\n540.     assert solveset_real(1/x, x) == EmptySet()\n541.     assert solveset_real(-(1 + x)/(2 + x)**2 + 1/(2 + x), x) == \\\n542.         EmptySet()\n543. \n544. \n545. def test_sol_zero_real():\n546.     assert solveset_real(0, x) == S.Reals\n547.     assert solveset(0, x, Interval(1, 2)) == Interval(1, 2)\n548.     assert solveset_real(-x**2 - 2*x + (x + 1)**2 - 1, x) == S.Reals\n549. \n550. \n551. def test_no_sol_rational_extragenous():\n552.     assert solveset_real((x/(x + 1) + 3)**(-2), x) == EmptySet()\n553.     assert solveset_real((x - 1)/(1 + 1/(x - 1)), x) == EmptySet()\n554. \n555. \n556. def test_solve_polynomial_cv_1a():\n557.     """\n558.     Test for solving on equations that can be converted to\n559.     a polynomial equation using the change of variable y -> x**Rational(p, q)\n560.     """\n561.     assert solveset_real(sqrt(x) - 1, x) == FiniteSet(1)\n562.     assert solveset_real(sqrt(x) - 2, x) == FiniteSet(4)\n563.     assert solveset_real(x**Rational(1, 4) - 2, x) == FiniteSet(16)\n564.     assert solveset_real(x**Rational(1, 3) - 3, x) == FiniteSet(27)\n565.     assert solveset_real(x*(x**(S.One / 3) - 3), x) == \\\n566.         FiniteSet(S.Zero, S(27))\n567. \n568. \n569. def test_solveset_real_rational():\n570.     """Test solveset_real for rational functions"""\n571.     assert solveset_real((x - y**3) / ((y**2)*sqrt(1 - y**2)), x) \\\n572.         == FiniteSet(y**3)\n573.     # issue 4486\n574.     assert solveset_real(2*x/(x + 2) - 1, x) == FiniteSet(2)\n575. \n576. \n577. def test_solveset_real_log():\n578.     assert solveset_real(log((x-1)*(x+1)), x) == \\\n579.         FiniteSet(sqrt(2), -sqrt(2))\n580. \n581. \n582. def test_poly_gens():\n583.     assert solveset_real(4**(2*(x**2) + 2*x) - 8, x) == \\\n584.         FiniteSet(Rational(-3, 2), S.Half)\n585. \n586. \n587. def test_solve_abs():\n588.     x = Symbol(\'x\')\n589.     n = Dummy(\'n\')\n590.     raises(ValueError, lambda: solveset(Abs(x) - 1, x))\n591.     assert solveset(Abs(x) - n, x, S.Reals) == ConditionSet(x, Contains(n, Interval(0, oo)), {-n, n})\n592.     assert solveset_real(Abs(x) - 2, x) == FiniteSet(-2, 2)\n593.     assert solveset_real(Abs(x) + 2, x) is S.EmptySet\n594.     assert solveset_real(Abs(x + 3) - 2*Abs(x - 3), x) == \\\n595.         FiniteSet(1, 9)\n596.     assert solveset_real(2*Abs(x) - Abs(x - 1), x) == \\\n597.         FiniteSet(-1, Rational(1, 3))\n598. \n599.     sol = ConditionSet(\n600.             x,\n601.             And(\n602.                 Contains(b, Interval(0, oo)),\n603.                 Contains(a + b, Interval(0, oo)),\n604.                 Contains(a - b, Interval(0, oo))),\n605.             FiniteSet(-a - b - 3, -a + b - 3, a - b - 3, a + b - 3))\n606.     eq = Abs(Abs(x + 3) - a) - b\n607.     assert invert_real(eq, 0, x)[1] == sol\n608.     reps = {a: 3, b: 1}\n609.     eqab = eq.subs(reps)\n610.     for i in sol.subs(reps):\n611.         assert not eqab.subs(x, i)\n612.     assert solveset(Eq(sin(Abs(x)), 1), x, domain=S.Reals) == Union(\n613.         Intersection(Interval(0, oo),\n614.             ImageSet(Lambda(n, (-1)**n*pi/2 + n*pi), S.Integers)),\n615.         Intersection(Interval(-oo, 0),\n616.             ImageSet(Lambda(n, n*pi - (-1)**(-n)*pi/2), S.Integers)))\n617. \n618. \n619. \n620. def test_issue_9565():\n621.     assert solveset_real(Abs((x - 1)/(x - 5)) <= Rational(1, 3), x) == Interval(-1, 2)\n622. \n623. \n624. def test_issue_10069():\n625.     eq = abs(1/(x - 1)) - 1 > 0\n626.     u = Union(Interval.open(0, 1), Interval.open(1, 2))\n627.     assert solveset_real(eq, x) == u\n628. \n629. \n630. def test_real_imag_splitting():\n631.     a, b = symbols(\'a b\', real=True)\n632.     assert solveset_real(sqrt(a**2 - b**2) - 3, a) == \\\n633.         FiniteSet(-sqrt(b**2 + 9), sqrt(b**2 + 9))\n634.     assert solveset_real(sqrt(a**2 + b**2) - 3, a) != \\\n635.         S.EmptySet\n636. \n637. \n638. def test_units():\n639.     assert solveset_real(1/x - 1/(2*cm), x) == FiniteSet(2*cm)\n640. \n641. \n642. def test_solve_only_exp_1():\n643.     y = Symbol(\'y\', positive=True)\n644.     assert solveset_real(exp(x) - y, x) == FiniteSet(log(y))\n645.     assert solveset_real(exp(x) + exp(-x) - 4, x) == \\\n646.         FiniteSet(log(-sqrt(3) + 2), log(sqrt(3) + 2))\n647.     assert solveset_real(exp(x) + exp(-x) - y, x) != S.EmptySet\n648. \n649. \n650. def test_atan2():\n651.     # The .inverse() method on atan2 works only if x.is_real is True and the\n652.     # second argument is a real constant\n653.     assert solveset_real(atan2(x, 2) - pi/3, x) == FiniteSet(2*sqrt(3))\n654. \n655. \n656. def test_piecewise_solveset():\n657.     eq = Piecewise((x - 2, Gt(x, 2)), (2 - x, True)) - 3\n658.     assert set(solveset_real(eq, x)) == set(FiniteSet(-1, 5))\n659. \n660.     absxm3 = Piecewise(\n661.         (x - 3, 0 <= x - 3),\n662.         (3 - x, 0 > x - 3))\n663.     y = Symbol(\'y\', positive=True)\n664.     assert solveset_real(absxm3 - y, x) == FiniteSet(-y + 3, y + 3)\n665. \n666.     f = Piecewise(((x - 2)**2, x >= 0), (0, True))\n667.     assert solveset(f, x, domain=S.Reals) == Union(FiniteSet(2), Interval(-oo, 0, True, True))\n668. \n669.     assert solveset(\n670.         Piecewise((x + 1, x > 0), (I, True)) - I, x, S.Reals\n671.         ) == Interval(-oo, 0)\n672. \n673.     assert solveset(Piecewise((x - 1, Ne(x, I)), (x, True)), x) == FiniteSet(1)\n674. \n675. \n676. def test_solveset_complex_polynomial():\n677.     from sympy.abc import x, a, b, c\n678.     assert solveset_complex(a*x**2 + b*x + c, x) == \\\n679.         FiniteSet(-b/(2*a) - sqrt(-4*a*c + b**2)/(2*a),\n680.                   -b/(2*a) + sqrt(-4*a*c + b**2)/(2*a))\n681. \n682.     assert solveset_complex(x - y**3, y) == FiniteSet(\n683.         (-x**Rational(1, 3))/2 + I*sqrt(3)*x**Rational(1, 3)/2,\n684.         x**Rational(1, 3),\n685.         (-x**Rational(1, 3))/2 - I*sqrt(3)*x**Rational(1, 3)/2)\n686. \n687.     assert solveset_complex(x + 1/x - 1, x) == \\\n688.         FiniteSet(S.Half + I*sqrt(3)/2, S.Half - I*sqrt(3)/2)\n689. \n690. \n691. def test_sol_zero_complex():\n692.     assert solveset_complex(0, x) == S.Complexes\n693. \n694. \n695. def test_solveset_complex_rational():\n696.     assert solveset_complex((x - 1)*(x - I)/(x - 3), x) == \\\n697.         FiniteSet(1, I)\n698. \n699.     assert solveset_complex((x - y**3)/((y**2)*sqrt(1 - y**2)), x) == \\\n700.         FiniteSet(y**3)\n701.     assert solveset_complex(-x**2 - I, x) == \\\n702.         FiniteSet(-sqrt(2)/2 + sqrt(2)*I/2, sqrt(2)/2 - sqrt(2)*I/2)\n703. \n704. \n705. def test_solve_quintics():\n706.     skip("This test is too slow")\n707.     f = x**5 - 110*x**3 - 55*x**2 + 2310*x + 979\n708.     s = solveset_complex(f, x)\n709.     for root in s:\n710.         res = f.subs(x, root.n()).n()\n711.         assert tn(res, 0)\n712. \n713.     f = x**5 + 15*x + 12\n714.     s = solveset_complex(f, x)\n715.     for root in s:\n716.         res = f.subs(x, root.n()).n()\n717.         assert tn(res, 0)\n718. \n719. \n720. def test_solveset_complex_exp():\n721.     from sympy.abc import x, n\n722.     assert solveset_complex(exp(x) - 1, x) == \\\n723.         imageset(Lambda(n, I*2*n*pi), S.Integers)\n724.     assert solveset_complex(exp(x) - I, x) == \\\n725.         imageset(Lambda(n, I*(2*n*pi + pi/2)), S.Integers)\n726.     assert solveset_complex(1/exp(x), x) == S.EmptySet\n727.     assert solveset_complex(sinh(x).rewrite(exp), x) == \\\n728.         imageset(Lambda(n, n*pi*I), S.Integers)\n729. \n730. \n731. def test_solveset_real_exp():\n732.     from sympy.abc import x, y\n733.     assert solveset(Eq((-2)**x, 4), x, S.Reals) == FiniteSet(2)\n734.     assert solveset(Eq(-2**x, 4), x, S.Reals) == S.EmptySet\n735.     assert solveset(Eq((-3)**x, 27), x, S.Reals) == S.EmptySet\n736.     assert solveset(Eq((-5)**(x+1), 625), x, S.Reals) == FiniteSet(3)\n737.     assert solveset(Eq(2**(x-3), -16), x, S.Reals) == S.EmptySet\n738.     assert solveset(Eq((-3)**(x - 3), -3**39), x, S.Reals) == FiniteSet(42)\n739.     assert solveset(Eq(2**x, y), x, S.Reals) == Intersection(S.Reals, FiniteSet(log(y)/log(2)))\n740. \n741.     assert invert_real((-2)**(2*x) - 16, 0, x) == (x, FiniteSet(2))\n742. \n743. \n744. def test_solve_complex_log():\n745.     assert solveset_complex(log(x), x) == FiniteSet(1)\n746.     assert solveset_complex(1 - log(a + 4*x**2), x) == \\\n747.         FiniteSet(-sqrt(-a + E)/2, sqrt(-a + E)/2)\n748. \n749. \n750. def test_solve_complex_sqrt():\n751.     assert solveset_complex(sqrt(5*x + 6) - 2 - x, x) == \\\n752.         FiniteSet(-S.One, S(2))\n753.     assert solveset_complex(sqrt(5*x + 6) - (2 + 2*I) - x, x) == \\\n754.         FiniteSet(-S(2), 3 - 4*I)\n755.     assert solveset_complex(4*x*(1 - a * sqrt(x)), x) == \\\n756.         FiniteSet(S.Zero, 1 / a ** 2)\n757. \n758. \n759. def test_solveset_complex_tan():\n760.     s = solveset_complex(tan(x).rewrite(exp), x)\n761.     assert s == imageset(Lambda(n, pi*n), S.Integers) - \\\n762.         imageset(Lambda(n, pi*n + pi/2), S.Integers)\n763. \n764. \n765. @nocache_fail\n766. def test_solve_trig():\n767.     from sympy.abc import n\n768.     assert solveset_real(sin(x), x) == \\\n769.         Union(imageset(Lambda(n, 2*pi*n), S.Integers),\n770.               imageset(Lambda(n, 2*pi*n + pi), S.Integers))\n771. \n772.     assert solveset_real(sin(x) - 1, x) == \\\n773.         imageset(Lambda(n, 2*pi*n + pi/2), S.Integers)\n774. \n775.     assert solveset_real(cos(x), x) == \\\n776.         Union(imageset(Lambda(n, 2*pi*n + pi/2), S.Integers),\n777.               imageset(Lambda(n, 2*pi*n + pi*Rational(3, 2)), S.Integers))\n778. \n779.     assert solveset_real(sin(x) + cos(x), x) == \\\n780.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(3, 4)), S.Integers),\n781.               imageset(Lambda(n, 2*n*pi + pi*Rational(7, 4)), S.Integers))\n782. \n783.     assert solveset_real(sin(x)**2 + cos(x)**2, x) == S.EmptySet\n784. \n785.     # This fails when running with the cache off:\n786.     assert solveset_complex(cos(x) - S.Half, x) == \\\n787.         Union(imageset(Lambda(n, 2*n*pi + pi*Rational(5, 3)), S.Integers),\n788.               imageset(Lambda(n, 2*n*pi + pi/3), S.Integers))\n789. \n790.     y, a = symbols(\'y,a\')\n791.     assert solveset(sin(y + a) - sin(y), a, domain=S.Reals) == \\\n792.         Union(ImageSet(Lambda(n, 2*n*pi), S.Integers),\n793.         Intersection(ImageSet(Lambda(n, -I*(I*(\n794.         2*n*pi + arg(-exp(-2*I*y))) +\n795.         2*im(y))), S.Integers), S.Reals))\n796. \n797.     assert solveset_real(sin(2*x)*cos(x) + cos(2*x)*sin(x)-1, x) == \\\n798.                             ImageSet(Lambda(n, n*pi*Rational(2, 3) + pi/6), S.Integers)\n799. \n800.     # Tests for _solve_trig2() function\n801.     assert solveset_real(2*cos(x)*cos(2*x) - 1, x) == \\\n802.           Union(ImageSet(Lambda(n, 2*n*pi + 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +\n803.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +\n804.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6)))), S.Integers),\n805.                   ImageSet(Lambda(n, 2*n*pi - 2*atan(sqrt(-2*2**Rational(1, 3)*(67 +\n806.                   9*sqrt(57))**Rational(2, 3) + 8*2**Rational(2, 3) + 11*(67 +\n807.                   9*sqrt(57))**Rational(1, 3))/(3*(67 + 9*sqrt(57))**Rational(1, 6))) +\n808.                   2*pi), S.Integers))\n809. \n810.     assert solveset_real(2*tan(x)*sin(x) + 1, x) == Union(\n811.         ImageSet(Lambda(n, 2*n*pi + atan(sqrt(2)*sqrt(-1 +sqrt(17))/\n812.             (1 - sqrt(17))) + pi), S.Integers),\n813.         ImageSet(Lambda(n, 2*n*pi - atan(sqrt(2)*sqrt(-1 + sqrt(17))/\n814.             (1 - sqrt(17))) + pi), S.Integers))\n815. \n816.     assert solveset_real(cos(2*x)*cos(4*x) - 1, x) == \\\n817.                             ImageSet(Lambda(n, n*pi), S.Integers)\n818. \n819. \n820. def test_solve_hyperbolic():\n821.     # actual solver: _solve_trig1\n822.     n = Dummy(\'n\')\n823.     assert solveset(sinh(x) + cosh(x), x) == S.EmptySet\n824.     assert solveset(sinh(x) + cos(x), x) == ConditionSet(x,\n825.         Eq(cos(x) + sinh(x), 0), S.Complexes)\n826.     assert solveset_real(sinh(x) + sech(x), x) == FiniteSet(\n827.         log(sqrt(sqrt(5) - 2)))\n828.     assert solveset_real(3*cosh(2*x) - 5, x) == FiniteSet(\n829.         log(sqrt(3)/3), log(sqrt(3)))\n830.     assert solveset_real(sinh(x - 3) - 2, x) == FiniteSet(\n831.         log((2 + sqrt(5))*exp(3)))\n832.     assert solveset_real(cosh(2*x) + 2*sinh(x) - 5, x) == FiniteSet(\n833.         log(-2 + sqrt(5)), log(1 + sqrt(2)))\n834.     assert solveset_real((coth(x) + sinh(2*x))/cosh(x) - 3, x) == FiniteSet(\n835.         log(S.Half + sqrt(5)/2), log(1 + sqrt(2)))\n836.     assert solveset_real(cosh(x)*sinh(x) - 2, x) == FiniteSet(\n837.         log(sqrt(4 + sqrt(17))))\n838.     assert solveset_real(sinh(x) + tanh(x) - 1, x) == FiniteSet(\n839.         log(sqrt(2)/2 + sqrt(-S(1)/2 + sqrt(2))))\n840.     assert solveset_complex(sinh(x) - I/2, x) == Union(\n841.         ImageSet(Lambda(n, I*(2*n*pi + 5*pi/6)), S.Integers),\n842.         ImageSet(Lambda(n, I*(2*n*pi + pi/6)), S.Integers))\n843.     assert solveset_complex(sinh(x) + sech(x), x) == Union(\n844.         ImageSet(Lambda(n, 2*n*I*pi + log(sqrt(-2 + sqrt(5)))), S.Integers),\n845.         ImageSet(Lambda(n, I*(2*n*pi + pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers),\n846.         ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sqrt(-2 + sqrt(5)))), S.Integers),\n847.         ImageSet(Lambda(n, I*(2*n*pi - pi/2) + log(sqrt(2 + sqrt(5)))), S.Integers))\n848.     # issues #9606 / #9531:\n849.     assert solveset(sinh(x), x, S.Reals) == FiniteSet(0)\n850.     assert solveset(sinh(x), x, S.Complexes) == Union(\n851.         ImageSet(Lambda(n, I*(2*n*pi + pi)), S.Integers),\n852.         ImageSet(Lambda(n, 2*n*I*pi), S.Integers))\n853. \n854. \n855. def test_solve_invalid_sol():\n856.     assert 0 not in solveset_real(sin(x)/x, x)\n857.     assert 0 not in solveset_complex((exp(x) - 1)/x, x)\n858. \n859. \n860. @XFAIL\n861. def test_solve_trig_simplified():\n862.     from sympy.abc import n\n863.     assert solveset_real(sin(x), x) == \\\n864.         imageset(Lambda(n, n*pi), S.Integers)\n865. \n866.     assert solveset_real(cos(x), x) == \\\n867.         imageset(Lambda(n, n*pi + pi/2), S.Integers)\n868. \n869.     assert solveset_real(cos(x) + sin(x), x) == \\\n870.         imageset(Lambda(n, n*pi - pi/4), S.Integers)\n871. \n872. \n873. @XFAIL\n874. def test_solve_lambert():\n875.     assert solveset_real(x*exp(x) - 1, x) == FiniteSet(LambertW(1))\n876.     assert solveset_real(exp(x) + x, x) == FiniteSet(-LambertW(1))\n877.     assert solveset_real(x + 2**x, x) == \\\n878.         FiniteSet(-LambertW(log(2))/log(2))\n879. \n880.     # issue 4739\n881.     ans = solveset_real(3*x + 5 + 2**(-5*x + 3), x)\n882.     assert ans == FiniteSet(Rational(-5, 3) +\n883.                             LambertW(-10240*2**Rational(1, 3)*log(2)/3)/(5*log(2)))\n884. \n885.     eq = 2*(3*x + 4)**5 - 6*7**(3*x + 9)\n886.     result = solveset_real(eq, x)\n887.     ans = FiniteSet((log(2401) +\n888.                      5*LambertW(-log(7**(7*3**Rational(1, 5)/5))))/(3*log(7))/-1)\n889.     assert result == ans\n890.     assert solveset_real(eq.expand(), x) == result\n891. \n892.     assert solveset_real(5*x - 1 + 3*exp(2 - 7*x), x) == \\\n893.         FiniteSet(Rational(1, 5) + LambertW(-21*exp(Rational(3, 5))/5)/7)\n894. \n895.     assert solveset_real(2*x + 5 + log(3*x - 2), x) == \\\n896.         FiniteSet(Rational(2, 3) + LambertW(2*exp(Rational(-19, 3))/3)/2)\n897. \n898.     assert solveset_real(3*x + log(4*x), x) == \\\n899.         FiniteSet(LambertW(Rational(3, 4))/3)\n900. \n901.     assert solveset_real(x**x - 2) == FiniteSet(exp(LambertW(log(2))))\n902. \n903.     a = Symbol(\'a\')\n904.     assert solveset_real(-a*x + 2*x*log(x), x) == FiniteSet(exp(a/2))\n905.     a = Symbol(\'a\', real=True)\n906.     assert solveset_real(a/x + exp(x/2), x) == \\\n907.         FiniteSet(2*LambertW(-a/2))\n908.     assert solveset_real((a/x + exp(x/2)).diff(x), x) == \\\n909.         FiniteSet(4*LambertW(sqrt(2)*sqrt(a)/4))\n910. \n911.     # coverage test\n912.     assert solveset_real(tanh(x + 3)*tanh(x - 3) - 1, x) == EmptySet()\n913. \n914.     assert solveset_real((x**2 - 2*x + 1).subs(x, log(x) + 3*x), x) == \\\n915.         FiniteSet(LambertW(3*S.Exp1)/3)\n916.     assert solveset_real((x**2 - 2*x + 1).subs(x, (log(x) + 3*x)**2 - 1), x) == \\\n917.         FiniteSet(LambertW(3*exp(-sqrt(2)))/3, LambertW(3*exp(sqrt(2)))/3)\n918.     assert solveset_real((x**2 - 2*x - 2).subs(x, log(x) + 3*x), x) == \\\n919.         FiniteSet(LambertW(3*exp(1 + sqrt(3)))/3, LambertW(3*exp(-sqrt(3) + 1))/3)\n920.     assert solveset_real(x*log(x) + 3*x + 1, x) == \\\n921.         FiniteSet(exp(-3 + LambertW(-exp(3))))\n922.     eq = (x*exp(x) - 3).subs(x, x*exp(x))\n923.     assert solveset_real(eq, x) == \\\n924.         FiniteSet(LambertW(3*exp(-LambertW(3))))\n925. \n926.     assert solveset_real(3*log(a**(3*x + 5)) + a**(3*x + 5), x) == \\\n927.         FiniteSet(-((log(a**5) + LambertW(Rational(1, 3)))/(3*log(a))))\n928.     p = symbols(\'p\', positive=True)\n929.     assert solveset_real(3*log(p**(3*x + 5)) + p**(3*x + 5), x) == \\\n930.         FiniteSet(\n931.         log((-3**Rational(1, 3) - 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),\n932.         log((-3**Rational(1, 3) + 3**Rational(5, 6)*I)*LambertW(Rational(1, 3))**Rational(1, 3)/(2*p**Rational(5, 3)))/log(p),\n933.         log((3*LambertW(Rational(1, 3))/p**5)**(1/(3*log(p)))),)  # checked numerically\n934.     # check collection\n935.     b = Symbol(\'b\')\n936.     eq = 3*log(a**(3*x + 5)) + b*log(a**(3*x + 5)) + a**(3*x + 5)\n937.     assert solveset_real(eq, x) == FiniteSet(\n938.         -((log(a**5) + LambertW(1/(b + 3)))/(3*log(a))))\n939. \n940.     # issue 4271\n941.     assert solveset_real((a/x + exp(x/2)).diff(x, 2), x) == FiniteSet(\n942.         6*LambertW((-1)**Rational(1, 3)*a**Rational(1, 3)/3))\n943. \n944.     assert solveset_real(x**3 - 3**x, x) == \\\n945.         FiniteSet(-3/log(3)*LambertW(-log(3)/3))\n946.     assert solveset_real(3**cos(x) - cos(x)**3) == FiniteSet(\n947.         acos(-3*LambertW(-log(3)/3)/log(3)))\n948. \n949.     assert solveset_real(x**2 - 2**x, x) == \\\n950.         solveset_real(-x**2 + 2**x, x)\n951. \n952.     assert solveset_real(3*log(x) - x*log(3)) == FiniteSet(\n953.         -3*LambertW(-log(3)/3)/log(3),\n954.         -3*LambertW(-log(3)/3, -1)/log(3))\n955. \n956.     assert solveset_real(LambertW(2*x) - y) == FiniteSet(\n957.         y*exp(y)/2)\n958. \n959. \n960. @XFAIL\n961. def test_other_lambert():\n962.     a = Rational(6, 5)\n963.     assert solveset_real(x**a - a**x, x) == FiniteSet(\n964.         a, -a*LambertW(-log(a)/a)/log(a))\n965. \n966. \n967. def test_solveset():\n968.     x = Symbol(\'x\')\n969.     f = Function(\'f\')\n970.     raises(ValueError, lambda: solveset(x + y))\n971.     assert solveset(x, 1) == S.EmptySet\n972.     assert solveset(f(1)**2 + y + 1, f(1)\n973.         ) == FiniteSet(-sqrt(-y - 1), sqrt(-y - 1))\n974.     assert solveset(f(1)**2 - 1, f(1), S.Reals) == FiniteSet(-1, 1)\n975.     assert solveset(f(1)**2 + 1, f(1)) == FiniteSet(-I, I)\n976.     assert solveset(x - 1, 1) == FiniteSet(x)\n977.     assert solveset(sin(x) - cos(x), sin(x)) == FiniteSet(cos(x))\n978. \n979.     assert solveset(0, domain=S.Reals) == S.Reals\n980.     assert solveset(1) == S.EmptySet\n981.     assert solveset(True, domain=S.Reals) == S.Reals  # issue 10197\n982.     assert solveset(False, domain=S.Reals) == S.EmptySet\n983. \n984.     assert solveset(exp(x) - 1, domain=S.Reals) == FiniteSet(0)\n985.     assert solveset(exp(x) - 1, x, S.Reals) == FiniteSet(0)\n986.     assert solveset(Eq(exp(x), 1), x, S.Reals) == FiniteSet(0)\n987.     assert solveset(exp(x) - 1, exp(x), S.Reals) == FiniteSet(1)\n988.     A = Indexed(\'A\', x)\n989.     assert solveset(A - 1, A, S.Reals) == FiniteSet(1)\n990. \n991.     assert solveset(x - 1 >= 0, x, S.Reals) == Interval(1, oo)\n992.     assert solveset(exp(x) - 1 >= 0, x, S.Reals) == Interval(0, oo)\n993. \n994.     assert solveset(exp(x) - 1, x) == imageset(Lambda(n, 2*I*pi*n), S.Integers)\n995.     assert solveset(Eq(exp(x), 1), x) == imageset(Lambda(n, 2*I*pi*n),\n996.                                                   S.Integers)\n997.     # issue 13825\n998.     assert solveset(x**2 + f(0) + 1, x) == {-sqrt(-f(0) - 1), sqrt(-f(0) - 1)}\n999. \n1000. \n1001. def test__solveset_multi():\n1002.     from sympy.solvers.solveset import _solveset_multi\n1003.     from sympy import Reals\n1004. \n1005.     # Basic univariate case:\n1006.     from sympy.abc import x\n1007.     assert _solveset_multi([x**2-1], [x], [S.Reals]) == FiniteSet((1,), (-1,))\n1008. \n1009.     # Linear systems of two equations\n1010.     from sympy.abc import x, y\n1011.     assert _solveset_multi([x+y, x+1], [x, y], [Reals, Reals]) == FiniteSet((-1, 1))\n1012.     assert _solveset_multi([x+y, x+1], [y, x], [Reals, Reals]) == FiniteSet((1, -1))\n1013.     assert _solveset_multi([x+y, x-y-1], [x, y], [Reals, Reals]) == FiniteSet((S(1)/2, -S(1)/2))\n1014.     assert _solveset_multi([x-1, y-2], [x, y], [Reals, Reals]) == FiniteSet((1, 2))\n1015.     #assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == ImageSet(Lambda(x, (x, -x)), Reals)\n1016.     assert _solveset_multi([x+y], [x, y], [Reals, Reals]) == Union(\n1017.             ImageSet(Lambda(((x,),), (x, -x)), ProductSet(Reals)),\n1018.             ImageSet(Lambda(((y,),), (-y, y)), ProductSet(Reals)))\n1019.     assert _solveset_multi([x+y, x+y+1], [x, y], [Reals, Reals]) == S.EmptySet\n1020.     assert _solveset_multi([x+y, x-y, x-1], [x, y], [Reals, Reals]) == S.EmptySet\n1021.     assert _solveset_multi([x+y, x-y, x-1], [y, x], [Reals, Reals]) == S.EmptySet\n1022. \n1023.     # Systems of three equations:\n1024.     from sympy.abc import x, y, z\n1025.     assert _solveset_multi([x+y+z-1, x+y-z-2, x-y-z-3], [x, y, z], [Reals,\n1026.         Reals, Reals]) == FiniteSet((2, -S.Half, -S.Half))\n1027. \n1028.     # Nonlinear systems:\n1029.     from sympy.abc import r, theta, z, x, y\n1030.     assert _solveset_multi([x**2+y**2-2, x+y], [x, y], [Reals, Reals]) == FiniteSet((-1, 1), (1, -1))\n1031.     assert _solveset_multi([x**2-1, y], [x, y], [Reals, Reals]) == FiniteSet((1, 0), (-1, 0))\n1032.     #assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(\n1033.     #        ImageSet(Lambda(x, (x, -x)), Reals), ImageSet(Lambda(x, (x, x)), Reals))\n1034.     assert _solveset_multi([x**2-y**2], [x, y], [Reals, Reals]) == Union(\n1035.             ImageSet(Lambda(((x,),), (x, -Abs(x))), ProductSet(Reals)),\n1036.             ImageSet(Lambda(((x,),), (x, Abs(x))), ProductSet(Reals)),\n1037.             ImageSet(Lambda(((y,),), (-Abs(y), y)), ProductSet(Reals)),\n1038.             ImageSet(Lambda(((y,),), (Abs(y), y)), ProductSet(Reals)))\n1039.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [theta, r],\n1040.             [Interval(0, pi), Interval(-1, 1)]) == FiniteSet((0, 1), (pi, -1))\n1041.     assert _solveset_multi([r*cos(theta)-1, r*sin(theta)], [r, theta],\n1042.             [Interval(0, 1), Interval(0, pi)]) == FiniteSet((1, 0))\n1043.     #assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],\n1044.     #        [Interval(0, 1), Interval(0, pi)]) == ?\n1045.     assert _solveset_multi([r*cos(theta)-r, r*sin(theta)], [r, theta],\n1046.             [Interval(0, 1), Interval(0, pi)]) == Union(\n1047.             ImageSet(Lambda(((r,),), (r, 0)), ImageSet(Lambda(r, (r,)), Interval(0, 1))),\n1048.             ImageSet(Lambda(((theta,),), (0, theta)), ImageSet(Lambda(theta, (theta,)), Interval(0, pi))))\n1049. \n1050. \n1051. def test_conditionset():\n1052.     assert solveset(Eq(sin(x)**2 + cos(x)**2, 1), x, domain=S.Reals) == \\\n1053.         ConditionSet(x, True, S.Reals)\n1054. \n1055.     assert solveset(Eq(x**2 + x*sin(x), 1), x, domain=S.Reals\n1056.         ) == ConditionSet(x, Eq(x**2 + x*sin(x) - 1, 0), S.Reals)\n1057. \n1058.     assert solveset(Eq(-I*(exp(I*x) - exp(-I*x))/2, 1), x\n1059.         ) == imageset(Lambda(n, 2*n*pi + pi/2), S.Integers)\n1060. \n1061.     assert solveset(x + sin(x) > 1, x, domain=S.Reals\n1062.         ) == ConditionSet(x, x + sin(x) > 1, S.Reals)\n1063. \n1064.     assert solveset(Eq(sin(Abs(x)), x), x, domain=S.Reals\n1065.         ) == ConditionSet(x, Eq(-x + sin(Abs(x)), 0), S.Reals)\n1066. \n1067.     assert solveset(y**x-z, x, S.Reals) == \\\n1068.         ConditionSet(x, Eq(y**x - z, 0), S.Reals)\n1069. \n1070. \n1071. @XFAIL\n1072. def test_conditionset_equality():\n1073.     \'\'\' Checking equality of different representations of ConditionSet\'\'\'\n1074.     assert solveset(Eq(tan(x), y), x) == ConditionSet(x, Eq(tan(x), y), S.Complexes)\n1075. \n1076. \n1077. def test_solveset_domain():\n1078.     x = Symbol(\'x\')\n1079. \n1080.     assert solveset(x**2 - x - 6, x, Interval(0, oo)) == FiniteSet(3)\n1081.     assert solveset(x**2 - 1, x, Interval(0, oo)) == FiniteSet(1)\n1082.     assert solveset(x**4 - 16, x, Interval(0, 10)) == FiniteSet(2)\n1083. \n1084. \n1085. def test_improve_coverage():\n1086.     from sympy.solvers.solveset import _has_rational_power\n1087.     x = Symbol(\'x\')\n1088.     solution = solveset(exp(x) + sin(x), x, S.Reals)\n1089.     unsolved_object = ConditionSet(x, Eq(exp(x) + sin(x), 0), S.Reals)\n1090.     assert solution == unsolved_object\n1091. \n1092.     assert _has_rational_power(sin(x)*exp(x) + 1, x) == (False, S.One)\n1093.     assert _has_rational_power((sin(x)**2)*(exp(x) + 1)**3, x) == (False, S.One)\n1094. \n1095. \n1096. def test_issue_9522():\n1097.     x = Symbol(\'x\')\n1098.     expr1 = Eq(1/(x**2 - 4) + x, 1/(x**2 - 4) + 2)\n1099.     expr2 = Eq(1/x + x, 1/x)\n1100. \n1101.     assert solveset(expr1, x, S.Reals) == EmptySet()\n1102.     assert solveset(expr2, x, S.Reals) == EmptySet()\n1103. \n1104. \n1105. def test_solvify():\n1106.     x = Symbol(\'x\')\n1107. \n1108.     assert solvify(x**2 + 10, x, S.Reals) == []\n1109.     assert solvify(x**3 + 1, x, S.Complexes) == [-1, S.Half - sqrt(3)*I/2,\n1110.                                                  S.Half + sqrt(3)*I/2]\n1111.     assert solvify(log(x), x, S.Reals) == [1]\n1112.     assert solvify(cos(x), x, S.Reals) == [pi/2, pi*Rational(3, 2)]\n1113.     assert solvify(sin(x) + 1, x, S.Reals) == [pi*Rational(3, 2)]\n1114.     raises(NotImplementedError, lambda: solvify(sin(exp(x)), x, S.Complexes))\n1115. \n1116. \n1117. def test_abs_invert_solvify():\n1118.     assert solvify(sin(Abs(x)), x, S.Reals) is None\n1119. \n1120. \n1121. def test_linear_eq_to_matrix():\n1122.     x, y, z = symbols(\'x, y, z\')\n1123.     a, b, c, d, e, f, g, h, i, j, k, l = symbols(\'a:l\')\n1124. \n1125.     eqns1 = [2*x + y - 2*z - 3, x - y - z, x + y + 3*z - 12]\n1126.     eqns2 = [Eq(3*x + 2*y - z, 1), Eq(2*x - 2*y + 4*z, -2), -2*x + y - 2*z]\n1127. \n1128.     A, B = linear_eq_to_matrix(eqns1, x, y, z)\n1129.     assert A == Matrix([[2, 1, -2], [1, -1, -1], [1, 1, 3]])\n1130.     assert B == Matrix([[3], [0], [12]])\n1131. \n1132.     A, B = linear_eq_to_matrix(eqns2, x, y, z)\n1133.     assert A == Matrix([[3, 2, -1], [2, -2, 4], [-2, 1, -2]])\n1134.     assert B == Matrix([[1], [-2], [0]])\n1135. \n1136.     # Pure symbolic coefficients\n1137.     eqns3 = [a*b*x + b*y + c*z - d, e*x + d*x + f*y + g*z - h, i*x + j*y + k*z - l]\n1138.     A, B = linear_eq_to_matrix(eqns3, x, y, z)\n1139.     assert A == Matrix([[a*b, b, c], [d + e, f, g], [i, j, k]])\n1140.     assert B == Matrix([[d], [h], [l]])\n1141. \n1142.     # raise ValueError if\n1143.     # 1) no symbols are given\n1144.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3))\n1145.     # 2) there are duplicates\n1146.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, x, y]))\n1147.     # 3) there are non-symbols\n1148.     raises(ValueError, lambda: linear_eq_to_matrix(eqns3, [x, 1/a, y]))\n1149.     # 4) a nonlinear term is detected in the original expression\n1150.     raises(ValueError, lambda: linear_eq_to_matrix(Eq(1/x + x, 1/x)))\n1151. \n1152.     assert linear_eq_to_matrix(1, x) == (Matrix([[0]]), Matrix([[-1]]))\n1153.     # issue 15195\n1154.     assert linear_eq_to_matrix(x + y*(z*(3*x + 2) + 3), x) == (\n1155.         Matrix([[3*y*z + 1]]), Matrix([[-y*(2*z + 3)]]))\n1156.     assert linear_eq_to_matrix(Matrix(\n1157.         [[a*x + b*y - 7], [5*x + 6*y - c]]), x, y) == (\n1158.         Matrix([[a, b], [5, 6]]), Matrix([[7], [c]]))\n1159. \n1160.     # issue 15312\n1161.     assert linear_eq_to_matrix(Eq(x + 2, 1), x) == (\n1162.         Matrix([[1]]), Matrix([[-1]]))\n1163. \n1164. \n1165. def test_issue_16577():\n1166.     assert linear_eq_to_matrix(Eq(a*(2*x + 3*y) + 4*y, 5), x, y) == (\n1167.         Matrix([[2*a, 3*a + 4]]), Matrix([[5]]))\n1168. \n1169. \n1170. def test_linsolve():\n1171.     x, y, z, u, v, w = symbols("x, y, z, u, v, w")\n1172.     x1, x2, x3, x4 = symbols(\'x1, x2, x3, x4\')\n1173. \n1174.     # Test for different input forms\n1175. \n1176.     M = Matrix([[1, 2, 1, 1, 7], [1, 2, 2, -1, 12], [2, 4, 0, 6, 4]])\n1177.     system1 = A, b = M[:, :-1], M[:, -1]\n1178.     Eqns = [x1 + 2*x2 + x3 + x4 - 7, x1 + 2*x2 + 2*x3 - x4 - 12,\n1179.             2*x1 + 4*x2 + 6*x4 - 4]\n1180. \n1181.     sol = FiniteSet((-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))\n1182.     assert linsolve(Eqns, (x1, x2, x3, x4)) == sol\n1183.     assert linsolve(Eqns, *(x1, x2, x3, x4)) == sol\n1184.     assert linsolve(system1, (x1, x2, x3, x4)) == sol\n1185.     assert linsolve(system1, *(x1, x2, x3, x4)) == sol\n1186.     # issue 9667 - symbols can be Dummy symbols\n1187.     x1, x2, x3, x4 = symbols(\'x:4\', cls=Dummy)\n1188.     assert linsolve(system1, x1, x2, x3, x4) == FiniteSet(\n1189.         (-2*x2 - 3*x4 + 2, x2, 2*x4 + 5, x4))\n1190. \n1191.     # raise ValueError for garbage value\n1192.     raises(ValueError, lambda: linsolve(Eqns))\n1193.     raises(ValueError, lambda: linsolve(x1))\n1194.     raises(ValueError, lambda: linsolve(x1, x2))\n1195.     raises(ValueError, lambda: linsolve((A,), x1, x2))\n1196.     raises(ValueError, lambda: linsolve(A, b, x1, x2))\n1197. \n1198.     #raise ValueError if equations are non-linear in given variables\n1199.     raises(ValueError, lambda: linsolve([x + y - 1, x ** 2 + y - 3], [x, y]))\n1200.     raises(ValueError, lambda: linsolve([cos(x) + y, x + y], [x, y]))\n1201.     assert linsolve([x + z - 1, x ** 2 + y - 3], [z, y]) == {(-x + 1, -x**2 + 3)}\n1202. \n1203.     # Fully symbolic test\n1204.     a, b, c, d, e, f = symbols(\'a, b, c, d, e, f\')\n1205.     A = Matrix([[a, b], [c, d]])\n1206.     B = Matrix([[e], [f]])\n1207.     system2 = (A, B)\n1208.     sol = FiniteSet(((-b*f + d*e)/(a*d - b*c), (a*f - c*e)/(a*d - b*c)))\n1209.     assert linsolve(system2, [x, y]) == sol\n1210. \n1211.     # No solution\n1212.     A = Matrix([[1, 2, 3], [2, 4, 6], [3, 6, 9]])\n1213.     b = Matrix([0, 0, 1])\n1214.     assert linsolve((A, b), (x, y, z)) == EmptySet()\n1215. \n1216.     # Issue #10056\n1217.     A, B, J1, J2 = symbols(\'A B J1 J2\')\n1218.     Augmatrix = Matrix([\n1219.         [2*I*J1, 2*I*J2, -2/J1],\n1220.         [-2*I*J2, -2*I*J1, 2/J2],\n1221.         [0, 2, 2*I/(J1*J2)],\n1222.         [2, 0,  0],\n1223.         ])\n1224. \n1225.     assert linsolve(Augmatrix, A, B) == FiniteSet((0, I/(J1*J2)))\n1226. \n1227.     # Issue #10121 - Assignment of free variables\n1228.     a, b, c, d, e = symbols(\'a, b, c, d, e\')\n1229.     Augmatrix = Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0]])\n1230.     assert linsolve(Augmatrix, a, b, c, d, e) == FiniteSet((a, 0, c, 0, e))\n1231.     raises(IndexError, lambda: linsolve(Augmatrix, a, b, c))\n1232. \n1233.     x0, x1, x2, _x0 = symbols(\'tau0 tau1 tau2 _tau0\')\n1234.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1235.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1236.     x0, x1, x2, _x0 = symbols(\'_tau0 _tau1 _tau2 tau0\')\n1237.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1238.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1239.     x0, x1, x2, _x0 = symbols(\'_tau0 _tau1 _tau2 tau1\')\n1240.     assert linsolve(Matrix([[0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, _x0]])\n1241.         ) == FiniteSet((x0, 0, x1, _x0, x2))\n1242.     # symbols can be given as generators\n1243.     x0, x2, x4 = symbols(\'x0, x2, x4\')\n1244.     assert linsolve(Augmatrix, numbered_symbols(\'x\')\n1245.         ) == FiniteSet((x0, 0, x2, 0, x4))\n1246.     Augmatrix[-1, -1] = x0\n1247.     # use Dummy to avoid clash; the names may clash but the symbols\n1248.     # will not\n1249.     Augmatrix[-1, -1] = symbols(\'_x0\')\n1250.     assert len(linsolve(\n1251.         Augmatrix, numbered_symbols(\'x\', cls=Dummy)).free_symbols) == 4\n1252. \n1253.     # Issue #12604\n1254.     f = Function(\'f\')\n1255.     assert linsolve([f(x) - 5], f(x)) == FiniteSet((5,))\n1256. \n1257.     # Issue #14860\n1258.     from sympy.physics.units import meter, newton, kilo\n1259.     Eqns = [8*kilo*newton + x + y, 28*kilo*newton*meter + 3*x*meter]\n1260.     assert linsolve(Eqns, x, y) == {(newton*Rational(-28000, 3), newton*Rational(4000, 3))}\n1261. \n1262.     # linsolve fully expands expressions, so removable singularities\n1263.     # and other nonlinearity does not raise an error\n1264.     assert linsolve([Eq(x, x + y)], [x, y]) == {(x, 0)}\n1265.     assert linsolve([Eq(1/x, 1/x + y)], [x, y]) == {(x, 0)}\n1266.     assert linsolve([Eq(y/x, y/x + y)], [x, y]) == {(x, 0)}\n1267.     assert linsolve([Eq(x*(x + 1), x**2 + y)], [x, y]) == {(y, y)}\n1268. \n1269. \n1270. def test_linsolve_immutable():\n1271.     A = ImmutableDenseMatrix([[1, 1, 2], [0, 1, 2], [0, 0, 1]])\n1272.     B = ImmutableDenseMatrix([2, 1, -1])\n1273.     c = symbols(\'c1 c2 c3\')\n1274.     assert linsolve([A, B], c) == FiniteSet((1, 3, -1))\n1275. \n1276.     A = ImmutableDenseMatrix([[1, 1, 7], [1, -1, 3]])\n1277.     assert linsolve(A) == FiniteSet((5, 2))\n1278. \n1279. \n1280. def test_solve_decomposition():\n1281.     x = Symbol(\'x\')\n1282.     n = Dummy(\'n\')\n1283. \n1284.     f1 = exp(3*x) - 6*exp(2*x) + 11*exp(x) - 6\n1285.     f2 = sin(x)**2 - 2*sin(x) + 1\n1286.     f3 = sin(x)**2 - sin(x)\n1287.     f4 = sin(x + 1)\n1288.     f5 = exp(x + 2) - 1\n1289.     f6 = 1/log(x)\n1290.     f7 = 1/x\n1291. \n1292.     s1 = ImageSet(Lambda(n, 2*n*pi), S.Integers)\n1293.     s2 = ImageSet(Lambda(n, 2*n*pi + pi), S.Integers)\n1294.     s3 = ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers)\n1295.     s4 = ImageSet(Lambda(n, 2*n*pi - 1), S.Integers)\n1296.     s5 = ImageSet(Lambda(n, 2*n*pi - 1 + pi), S.Integers)\n1297. \n1298.     assert solve_decomposition(f1, x, S.Reals) == FiniteSet(0, log(2), log(3))\n1299.     assert solve_decomposition(f2, x, S.Reals) == s3\n1300.     assert solve_decomposition(f3, x, S.Reals) == Union(s1, s2, s3)\n1301.     assert solve_decomposition(f4, x, S.Reals) == Union(s4, s5)\n1302.     assert solve_decomposition(f5, x, S.Reals) == FiniteSet(-2)\n1303.     assert solve_decomposition(f6, x, S.Reals) == S.EmptySet\n1304.     assert solve_decomposition(f7, x, S.Reals) == S.EmptySet\n1305.     assert solve_decomposition(x, x, Interval(1, 2)) == S.EmptySet\n1306. \n1307. # nonlinsolve testcases\n1308. def test_nonlinsolve_basic():\n1309.     assert nonlinsolve([],[]) == S.EmptySet\n1310.     assert nonlinsolve([],[x, y]) == S.EmptySet\n1311. \n1312.     system = [x, y - x - 5]\n1313.     assert nonlinsolve([x],[x, y]) == FiniteSet((0, y))\n1314.     assert nonlinsolve(system, [y]) == FiniteSet((x + 5,))\n1315.     soln = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)\n1316.     assert nonlinsolve([sin(x) - 1], [x]) == FiniteSet(tuple(soln))\n1317.     assert nonlinsolve([x**2 - 1], [x]) == FiniteSet((-1,), (1,))\n1318. \n1319.     soln = FiniteSet((y, y))\n1320.     assert nonlinsolve([x - y, 0], x, y) == soln\n1321.     assert nonlinsolve([0, x - y], x, y) == soln\n1322.     assert nonlinsolve([x - y, x - y], x, y) == soln\n1323.     assert nonlinsolve([x, 0], x, y) == FiniteSet((0, y))\n1324.     f = Function(\'f\')\n1325.     assert nonlinsolve([f(x), 0], f(x), y) == FiniteSet((0, y))\n1326.     assert nonlinsolve([f(x), 0], f(x), f(y)) == FiniteSet((0, f(y)))\n1327.     A = Indexed(\'A\', x)\n1328.     assert nonlinsolve([A, 0], A, y) == FiniteSet((0, y))\n1329.     assert nonlinsolve([x**2 -1], [sin(x)]) == FiniteSet((S.EmptySet,))\n1330.     assert nonlinsolve([x**2 -1], sin(x)) == FiniteSet((S.EmptySet,))\n1331.     assert nonlinsolve([x**2 -1], 1) == FiniteSet((x**2,))\n1332.     assert nonlinsolve([x**2 -1], x + y) == FiniteSet((S.EmptySet,))\n1333. \n1334. \n1335. def test_nonlinsolve_abs():\n1336.     soln = FiniteSet((x, Abs(x)))\n1337.     assert nonlinsolve([Abs(x) - y], x, y) == soln\n1338. \n1339. \n1340. def test_raise_exception_nonlinsolve():\n1341.     raises(IndexError, lambda: nonlinsolve([x**2 -1], []))\n1342.     raises(ValueError, lambda: nonlinsolve([x**2 -1]))\n1343.     raises(NotImplementedError, lambda: nonlinsolve([(x+y)**2 - 9, x**2 - y**2 - 0.75], (x, y)))\n1344. \n1345. \n1346. def test_trig_system():\n1347.     # TODO: add more simple testcases when solveset returns\n1348.     # simplified soln for Trig eq\n1349.     assert nonlinsolve([sin(x) - 1, cos(x) -1 ], x) == S.EmptySet\n1350.     soln1 = (ImageSet(Lambda(n, 2*n*pi + pi/2), S.Integers),)\n1351.     soln = FiniteSet(soln1)\n1352.     assert nonlinsolve([sin(x) - 1, cos(x)], x) == soln\n1353. \n1354. \n1355. @XFAIL\n1356. def test_trig_system_fail():\n1357.     # fails because solveset trig solver is not much smart.\n1358.     sys = [x + y - pi/2, sin(x) + sin(y) - 1]\n1359.     # solveset returns conditionset for sin(x) + sin(y) - 1\n1360.     soln_1 = (ImageSet(Lambda(n, n*pi + pi/2), S.Integers),\n1361.         ImageSet(Lambda(n, n*pi)), S.Integers)\n1362.     soln_1 = FiniteSet(soln_1)\n1363.     soln_2 = (ImageSet(Lambda(n, n*pi), S.Integers),\n1364.         ImageSet(Lambda(n, n*pi+ pi/2), S.Integers))\n1365.     soln_2 = FiniteSet(soln_2)\n1366.     soln = soln_1 + soln_2\n1367.     assert nonlinsolve(sys, [x, y]) == soln\n1368. \n1369.     # Add more cases from here\n1370.     # http://www.vitutor.com/geometry/trigonometry/equations_systems.html#uno\n1371.     sys = [sin(x) + sin(y) - (sqrt(3)+1)/2, sin(x) - sin(y) - (sqrt(3) - 1)/2]\n1372.     soln_x = Union(ImageSet(Lambda(n, 2*n*pi + pi/3), S.Integers),\n1373.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(2, 3)), S.Integers))\n1374.     soln_y = Union(ImageSet(Lambda(n, 2*n*pi + pi/6), S.Integers),\n1375.         ImageSet(Lambda(n, 2*n*pi + pi*Rational(5, 6)), S.Integers))\n1376.     assert nonlinsolve(sys, [x, y]) ==FiniteSet((soln_x, soln_y))\n1377. \n1378. \n1379. def test_nonlinsolve_positive_dimensional():\n1380.     x, y, z, a, b, c, d = symbols(\'x, y, z, a, b, c, d\', extended_real = True)\n1381.     assert nonlinsolve([x*y, x*y - x], [x, y]) == FiniteSet((0, y))\n1382. \n1383.     system = [a**2 + a*c, a - b]\n1384.     assert nonlinsolve(system, [a, b]) == FiniteSet((0, 0), (-c, -c))\n1385.     # here (a= 0, b = 0) is independent soln so both is printed.\n1386.     # if symbols = [a, b, c] then only {a : -c ,b : -c}\n1387. \n1388.     eq1 =  a + b + c + d\n1389.     eq2 = a*b + b*c + c*d + d*a\n1390.     eq3 = a*b*c + b*c*d + c*d*a + d*a*b\n1391.     eq4 = a*b*c*d - 1\n1392.     system = [eq1, eq2, eq3, eq4]\n1393.     sol1 = (-1/d, -d, 1/d, FiniteSet(d) - FiniteSet(0))\n1394.     sol2 = (1/d, -d, -1/d, FiniteSet(d) - FiniteSet(0))\n1395.     soln = FiniteSet(sol1, sol2)\n1396.     assert nonlinsolve(system, [a, b, c, d]) == soln\n1397. \n1398. \n1399. def test_nonlinsolve_polysys():\n1400.     x, y, z = symbols(\'x, y, z\', real = True)\n1401.     assert nonlinsolve([x**2 + y - 2, x**2 + y], [x, y]) == S.EmptySet\n1402. \n1403.     s = (-y + 2, y)\n1404.     assert nonlinsolve([(x + y)**2 - 4, x + y - 2], [x, y]) == FiniteSet(s)\n1405. \n1406.     system = [x**2 - y**2]\n1407.     soln_real = FiniteSet((-y, y), (y, y))\n1408.     soln_complex = FiniteSet((-Abs(y), y), (Abs(y), y))\n1409.     soln =soln_real + soln_complex\n1410.     assert nonlinsolve(system, [x, y]) == soln\n1411. \n1412.     system = [x**2 - y**2]\n1413.     soln_real= FiniteSet((y, -y), (y, y))\n1414.     soln_complex = FiniteSet((y, -Abs(y)), (y, Abs(y)))\n1415.     soln = soln_real + soln_complex\n1416.     assert nonlinsolve(system, [y, x]) == soln\n1417. \n1418.     system = [x**2 + y - 3, x - y - 4]\n1419.     assert nonlinsolve(system, (x, y)) != nonlinsolve(system, (y, x))\n1420. \n1421. \n1422. def test_nonlinsolve_using_substitution():\n1423.     x, y, z, n = symbols(\'x, y, z, n\', real = True)\n1424.     system = [(x + y)*n - y**2 + 2]\n1425.     s_x = (n*y - y**2 + 2)/n\n1426.     soln = (-s_x, y)\n1427.     assert nonlinsolve(system, [x, y]) == FiniteSet(soln)\n1428. \n1429.     system = [z**2*x**2 - z**2*y**2/exp(x)]\n1430.     soln_real_1 = (y, x, 0)\n1431.     soln_real_2 = (-exp(x/2)*Abs(x), x, z)\n1432.     soln_real_3 = (exp(x/2)*Abs(x), x, z)\n1433.     soln_complex_1 = (-x*exp(x/2), x, z)\n1434.     soln_complex_2 = (x*exp(x/2), x, z)\n1435.     syms = [y, x, z]\n1436.     soln = FiniteSet(soln_real_1, soln_complex_1, soln_complex_2,\\\n1437.         soln_real_2, soln_real_3)\n1438.     assert nonlinsolve(system,syms) == soln\n1439. \n1440. \n1441. def test_nonlinsolve_complex():\n1442.     x, y, z = symbols(\'x, y, z\')\n1443.     n = Dummy(\'n\')\n1444.     assert nonlinsolve([exp(x) - sin(y), 1/y - 3], [x, y]) == {\n1445.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(Rational(1, 3)))), S.Integers), Rational(1, 3))}\n1446. \n1447.     system = [exp(x) - sin(y), 1/exp(y) - 3]\n1448.     assert nonlinsolve(system, [x, y]) == {\n1449.         (ImageSet(Lambda(n, I*(2*n*pi + pi)\n1450.                          + log(sin(log(3)))), S.Integers), -log(3)),\n1451.         (ImageSet(Lambda(n, I*(2*n*pi + arg(sin(2*n*I*pi - log(3))))\n1452.                          + log(Abs(sin(2*n*I*pi - log(3))))), S.Integers),\n1453.         ImageSet(Lambda(n, 2*n*I*pi - log(3)), S.Integers))}\n1454. \n1455.     system = [exp(x) - sin(y), y**2 - 4]\n1456.     assert nonlinsolve(system, [x, y]) == {\n1457.         (ImageSet(Lambda(n, I*(2*n*pi + pi) + log(sin(2))), S.Integers), -2),\n1458.         (ImageSet(Lambda(n, 2*n*I*pi + log(sin(2))), S.Integers), 2)}\n1459. \n1460. \n1461. @XFAIL\n1462. def test_solve_nonlinear_trans():\n1463.     # After the transcendental equation solver these will work\n1464.     x, y, z = symbols(\'x, y, z\', real=True)\n1465.     soln1 = FiniteSet((2*LambertW(y/2), y))\n1466.     soln2 = FiniteSet((-x*sqrt(exp(x)), y), (x*sqrt(exp(x)), y))\n1467.     soln3 = FiniteSet((x*exp(x/2), x))\n1468.     soln4 = FiniteSet(2*LambertW(y/2), y)\n1469.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln1\n1470.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln2\n1471.     assert nonlinsolve([x**2 - y**2/exp(x)], [y, x]) == soln3\n1472.     assert nonlinsolve([x**2 - y**2/exp(x)], [x, y]) == soln4\n1473. \n1474. \n1475. def test_issue_5132_1():\n1476.     system = [sqrt(x**2 + y**2) - sqrt(10), x + y - 4]\n1477.     assert nonlinsolve(system, [x, y]) == FiniteSet((1, 3), (3, 1))\n1478. \n1479.     n = Dummy(\'n\')\n1480.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1481.     s_real_y = -log(3)\n1482.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))\n1483.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))\n1484.     lam = Lambda(n, 2*n*I*pi + -log(3))\n1485.     s_complex_y = ImageSet(lam, S.Integers)\n1486.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1487.     s_complex_z_1 = ImageSet(lam, S.Integers)\n1488.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1489.     s_complex_z_2 = ImageSet(lam, S.Integers)\n1490.     soln_complex = FiniteSet(\n1491.                                             (s_complex_y, s_complex_z_1),\n1492.                                             (s_complex_y, s_complex_z_2)\n1493.                                         )\n1494.     soln = soln_real + soln_complex\n1495.     assert nonlinsolve(eqs, [y, z]) == soln\n1496. \n1497. \n1498. def test_issue_5132_2():\n1499.     x, y = symbols(\'x, y\', real=True)\n1500.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1501.     n = Dummy(\'n\')\n1502.     soln_real = (log(-z**2 + sin(y))/2, z)\n1503.     lam = Lambda( n, I*(2*n*pi + arg(-z**2 + sin(y)))/2 + log(Abs(z**2 - sin(y)))/2)\n1504.     img = ImageSet(lam, S.Integers)\n1505.     # not sure about the complex soln. But it looks correct.\n1506.     soln_complex = (img, z)\n1507.     soln = FiniteSet(soln_real, soln_complex)\n1508.     assert nonlinsolve(eqs, [x, z]) == soln\n1509. \n1510.     r, t = symbols(\'r, t\')\n1511.     system = [r - x**2 - y**2, tan(t) - y/x]\n1512.     s_x = sqrt(r/(tan(t)**2 + 1))\n1513.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)\n1514.     soln = FiniteSet((s_x, s_y), (-s_x, -s_y))\n1515.     assert nonlinsolve(system, [x, y]) == soln\n1516. \n1517. \n1518. def test_issue_6752():\n1519.     a,b,c,d = symbols(\'a, b, c, d\', real=True)\n1520.     assert nonlinsolve([a**2 + a, a - b], [a, b]) == {(-1, -1), (0, 0)}\n1521. \n1522. \n1523. @SKIP("slow")\n1524. def test_issue_5114_solveset():\n1525.     # slow testcase\n1526.     a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r = symbols(\'a:r\')\n1527. \n1528.     # there is no \'a\' in the equation set but this is how the\n1529.     # problem was originally posed\n1530.     syms = [a, b, c, f, h, k, n]\n1531.     eqs = [b + r/d - c/d,\n1532.     c*(1/d + 1/e + 1/g) - f/g - r/d,\n1533.         f*(1/g + 1/i + 1/j) - c/g - h/i,\n1534.         h*(1/i + 1/l + 1/m) - f/i - k/m,\n1535.         k*(1/m + 1/o + 1/p) - h/m - n/p,\n1536.         n*(1/p + 1/q) - k/p]\n1537.     assert len(nonlinsolve(eqs, syms)) == 1\n1538. \n1539. \n1540. @SKIP("Hangs")\n1541. def _test_issue_5335():\n1542.     # Not able to check zero dimensional system.\n1543.     # is_zero_dimensional Hangs\n1544.     lam, a0, conc = symbols(\'lam a0 conc\')\n1545.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,\n1546.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,\n1547.            x + y - conc]\n1548.     sym = [x, y, a0]\n1549.     # there are 4 solutions but only two are valid\n1550.     assert len(nonlinsolve(eqs, sym)) == 2\n1551.     # float\n1552.     lam, a0, conc = symbols(\'lam a0 conc\')\n1553.     eqs = [lam + 2*y - a0*(1 - x/2)*x - 0.005*x/2*x,\n1554.            a0*(1 - x/2)*x - 1*y - 0.743436700916726*y,\n1555.            x + y - conc]\n1556.     sym = [x, y, a0]\n1557.     assert len(nonlinsolve(eqs, sym)) == 2\n1558. \n1559. \n1560. def test_issue_2777():\n1561.     # the equations represent two circles\n1562.     x, y = symbols(\'x y\', real=True)\n1563.     e1, e2 = sqrt(x**2 + y**2) - 10, sqrt(y**2 + (-x + 10)**2) - 3\n1564.     a, b = Rational(191, 20), 3*sqrt(391)/20\n1565.     ans = {(a, -b), (a, b)}\n1566.     assert nonlinsolve((e1, e2), (x, y)) == ans\n1567.     assert nonlinsolve((e1, e2/(x - a)), (x, y)) == S.EmptySet\n1568.     # make the 2nd circle\'s radius be -3\n1569.     e2 += 6\n1570.     assert nonlinsolve((e1, e2), (x, y)) == S.EmptySet\n1571. \n1572. \n1573. def test_issue_8828():\n1574.     x1 = 0\n1575.     y1 = -620\n1576.     r1 = 920\n1577.     x2 = 126\n1578.     y2 = 276\n1579.     x3 = 51\n1580.     y3 = 205\n1581.     r3 = 104\n1582.     v = [x, y, z]\n1583. \n1584.     f1 = (x - x1)**2 + (y - y1)**2 - (r1 - z)**2\n1585.     f2 = (x2 - x)**2 + (y2 - y)**2 - z**2\n1586.     f3 = (x - x3)**2 + (y - y3)**2 - (r3 - z)**2\n1587.     F = [f1, f2, f3]\n1588. \n1589.     g1 = sqrt((x - x1)**2 + (y - y1)**2) + z - r1\n1590.     g2 = f2\n1591.     g3 = sqrt((x - x3)**2 + (y - y3)**2) + z - r3\n1592.     G = [g1, g2, g3]\n1593. \n1594.     # both soln same\n1595.     A = nonlinsolve(F, v)\n1596.     B = nonlinsolve(G, v)\n1597.     assert A == B\n1598. \n1599. \n1600. def test_nonlinsolve_conditionset():\n1601.     # when solveset failed to solve all the eq\n1602.     # return conditionset\n1603.     f = Function(\'f\')\n1604.     f1 = f(x) - pi/2\n1605.     f2 = f(y) - pi*Rational(3, 2)\n1606.     intermediate_system = Eq(2*f(x) - pi, 0) & Eq(2*f(y) - 3*pi, 0)\n1607.     symbols = Tuple(x, y)\n1608.     soln = ConditionSet(\n1609.         symbols,\n1610.         intermediate_system,\n1611.         S.Complexes**2)\n1612.     assert nonlinsolve([f1, f2], [x, y]) == soln\n1613. \n1614. \n1615. def test_substitution_basic():\n1616.     assert substitution([], [x, y]) == S.EmptySet\n1617.     assert substitution([], []) == S.EmptySet\n1618.     system = [2*x**2 + 3*y**2 - 30, 3*x**2 - 2*y**2 - 19]\n1619.     soln = FiniteSet((-3, -2), (-3, 2), (3, -2), (3, 2))\n1620.     assert substitution(system, [x, y]) == soln\n1621. \n1622.     soln = FiniteSet((-1, 1))\n1623.     assert substitution([x + y], [x], [{y: 1}], [y], set([]), [x, y]) == soln\n1624.     assert substitution(\n1625.         [x + y], [x], [{y: 1}], [y],\n1626.         set([x + 1]), [y, x]) == S.EmptySet\n1627. \n1628. \n1629. def test_issue_5132_substitution():\n1630.     x, y, z, r, t = symbols(\'x, y, z, r, t\', real=True)\n1631.     system = [r - x**2 - y**2, tan(t) - y/x]\n1632.     s_x_1 = Complement(FiniteSet(-sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))\n1633.     s_x_2 = Complement(FiniteSet(sqrt(r/(tan(t)**2 + 1))), FiniteSet(0))\n1634.     s_y = sqrt(r/(tan(t)**2 + 1))*tan(t)\n1635.     soln = FiniteSet((s_x_2, s_y)) + FiniteSet((s_x_1, -s_y))\n1636.     assert substitution(system, [x, y]) == soln\n1637. \n1638.     n = Dummy(\'n\')\n1639.     eqs = [exp(x)**2 - sin(y) + z**2, 1/exp(y) - 3]\n1640.     s_real_y = -log(3)\n1641.     s_real_z = sqrt(-exp(2*x) - sin(log(3)))\n1642.     soln_real = FiniteSet((s_real_y, s_real_z), (s_real_y, -s_real_z))\n1643.     lam = Lambda(n, 2*n*I*pi + -log(3))\n1644.     s_complex_y = ImageSet(lam, S.Integers)\n1645.     lam = Lambda(n, sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1646.     s_complex_z_1 = ImageSet(lam, S.Integers)\n1647.     lam = Lambda(n, -sqrt(-exp(2*x) + sin(2*n*I*pi + -log(3))))\n1648.     s_complex_z_2 = ImageSet(lam, S.Integers)\n1649.     soln_complex = FiniteSet(\n1650.         (s_complex_y, s_complex_z_1),\n1651.         (s_complex_y, s_complex_z_2))\n1652.     soln = soln_real + soln_complex\n1653.     assert substitution(eqs, [y, z]) == soln\n1654. \n1655. \n1656. def test_raises_substitution():\n1657.     raises(ValueError, lambda: substitution([x**2 -1], []))\n1658.     raises(TypeError, lambda: substitution([x**2 -1]))\n1659.     raises(ValueError, lambda: substitution([x**2 -1], [sin(x)]))\n1660.     raises(TypeError, lambda: substitution([x**2 -1], x))\n1661.     raises(TypeError, lambda: substitution([x**2 -1], 1))\n1662. \n1663. # end of tests for nonlinsolve\n1664. \n1665. \n1666. def test_issue_9556():\n1667.     x = Symbol(\'x\')\n1668.     b = Symbol(\'b\', positive=True)\n1669. \n1670.     assert solveset(Abs(x) + 1, x, S.Reals) == EmptySet()\n1671.     assert solveset(Abs(x) + b, x, S.Reals) == EmptySet()\n1672.     assert solveset(Eq(b, -1), b, S.Reals) == EmptySet()\n1673. \n1674. \n1675. def test_issue_9611():\n1676.     x = Symbol(\'x\')\n1677.     a = Symbol(\'a\')\n1678.     y = Symbol(\'y\')\n1679. \n1680.     assert solveset(Eq(x - x + a, a), x, S.Reals) == S.Reals\n1681.     assert solveset(Eq(y - y + a, a), y) == S.Complexes\n1682. \n1683. \n1684. def test_issue_9557():\n1685.     x = Symbol(\'x\')\n1686.     a = Symbol(\'a\')\n1687. \n1688.     assert solveset(x**2 + a, x, S.Reals) == Intersection(S.Reals,\n1689.         FiniteSet(-sqrt(-a), sqrt(-a)))\n1690. \n1691. \n1692. def test_issue_9778():\n1693.     assert solveset(x**3 + 1, x, S.Reals) == FiniteSet(-1)\n1694.     assert solveset(x**Rational(3, 5) + 1, x, S.Reals) == S.EmptySet\n1695.     assert solveset(x**3 + y, x, S.Reals) == \\\n1696.         FiniteSet(-Abs(y)**Rational(1, 3)*sign(y))\n1697. \n1698. \n1699. def test_issue_10214():\n1700.     assert solveset(x**Rational(3, 2) + 4, x, S.Reals) == S.EmptySet\n1701.     assert solveset(x**(Rational(-3, 2)) + 4, x, S.Reals) == S.EmptySet\n1702. \n1703.     ans = FiniteSet(-2**Rational(2, 3))\n1704.     assert solveset(x**(S(3)) + 4, x, S.Reals) == ans\n1705.     assert (x**(S(3)) + 4).subs(x,list(ans)[0]) == 0 # substituting ans and verifying the result.\n1706.     assert (x**(S(3)) + 4).subs(x,-(-2)**Rational(2, 3)) == 0\n1707. \n1708. \n1709. def test_issue_9849():\n1710.     assert solveset(Abs(sin(x)) + 1, x, S.Reals) == S.EmptySet\n1711. \n1712. \n1713. def test_issue_9953():\n1714.     assert linsolve([ ], x) == S.EmptySet\n1715. \n1716. \n1717. def test_issue_9913():\n1718.     assert solveset(2*x + 1/(x - 10)**2, x, S.Reals) == \\\n1719.         FiniteSet(-(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)/3 - 100/\n1720.                 (3*(3*sqrt(24081)/4 + Rational(4027, 4))**Rational(1, 3)) + Rational(20, 3))\n1721. \n1722. \n1723. def test_issue_10397():\n1724.     assert solveset(sqrt(x), x, S.Complexes) == FiniteSet(0)\n1725. \n1726. \n1727. def test_issue_14987():\n1728.     raises(ValueError, lambda: linear_eq_to_matrix(\n1729.         [x**2], x))\n1730.     raises(ValueError, lambda: linear_eq_to_matrix(\n1731.         [x*(-3/x + 1) + 2*y - a], [x, y]))\n1732.     raises(ValueError, lambda: linear_eq_to_matrix(\n1733.         [(x**2 - 3*x)/(x - 3) - 3], x))\n1734.     raises(ValueError, lambda: linear_eq_to_matrix(\n1735.         [(x + 1)**3 - x**3 - 3*x**2 + 7], x))\n1736.     raises(ValueError, lambda: linear_eq_to_matrix(\n1737.         [x*(1/x + 1) + y], [x, y]))\n1738.     raises(ValueError, lambda: linear_eq_to_matrix(\n1739.         [(x + 1)*y], [x, y]))\n1740.     raises(ValueError, lambda: linear_eq_to_matrix(\n1741.         [Eq(1/x, 1/x + y)], [x, y]))\n1742.     raises(ValueError, lambda: linear_eq_to_matrix(\n1743.         [Eq(y/x, y/x + y)], [x, y]))\n1744.     raises(ValueError, lambda: linear_eq_to_matrix(\n1745.         [Eq(x*(x + 1), x**2 + y)], [x, y]))\n1746. \n1747. \n1748. def test_simplification():\n1749.     eq = x + (a - b)/(-2*a + 2*b)\n1750.     assert solveset(eq, x) == FiniteSet(S.Half)\n1751.     assert solveset(eq, x, S.Reals) == Intersection({-((a - b)/(-2*a + 2*b))}, S.Reals)\n1752.     # So that ap - bn is not zero:\n1753.     ap = Symbol(\'ap\', positive=True)\n1754.     bn = Symbol(\'bn\', negative=True)\n1755.     eq = x + (ap - bn)/(-2*ap + 2*bn)\n1756.     assert solveset(eq, x) == FiniteSet(S.Half)\n1757.     assert solveset(eq, x, S.Reals) == FiniteSet(S.Half)\n1758. \n1759. \n1760. def test_issue_10555():\n1761.     f = Function(\'f\')\n1762.     g = Function(\'g\')\n1763.     assert solveset(f(x) - pi/2, x, S.Reals) == \\\n1764.         ConditionSet(x, Eq(f(x) - pi/2, 0), S.Reals)\n1765.     assert solveset(f(g(x)) - pi/2, g(x), S.Reals) == \\\n1766.         ConditionSet(g(x), Eq(f(g(x)) - pi/2, 0), S.Reals)\n1767. \n1768. \n1769. def test_issue_8715():\n1770.     eq = x + 1/x > -2 + 1/x\n1771.     assert solveset(eq, x, S.Reals) == \\\n1772.         (Interval.open(-2, oo) - FiniteSet(0))\n1773.     assert solveset(eq.subs(x,log(x)), x, S.Reals) == \\\n1774.         Interval.open(exp(-2), oo) - FiniteSet(1)\n1775. \n1776. \n1777. def test_issue_11174():\n1778.     r, t = symbols(\'r t\')\n1779.     eq = z**2 + exp(2*x) - sin(y)\n1780.     soln = Intersection(S.Reals, FiniteSet(log(-z**2 + sin(y))/2))\n1781.     assert solveset(eq, x, S.Reals) == soln\n1782. \n1783.     eq = sqrt(r)*Abs(tan(t))/sqrt(tan(t)**2 + 1) + x*tan(t)\n1784.     s = -sqrt(r)*Abs(tan(t))/(sqrt(tan(t)**2 + 1)*tan(t))\n1785.     soln = Intersection(S.Reals, FiniteSet(s))\n1786.     assert solveset(eq, x, S.Reals) == soln\n1787. \n1788. \n1789. def test_issue_11534():\n1790.     # eq and eq2 should give the same solution as a Complement\n1791.     eq = -y + x/sqrt(-x**2 + 1)\n1792.     eq2 = -y**2 + x**2/(-x**2 + 1)\n1793.     soln = Complement(FiniteSet(-y/sqrt(y**2 + 1), y/sqrt(y**2 + 1)), FiniteSet(-1, 1))\n1794.     assert solveset(eq, x, S.Reals) == soln\n1795.     assert solveset(eq2, x, S.Reals) == soln\n1796. \n1797. \n1798. def test_issue_10477():\n1799.     assert solveset((x**2 + 4*x - 3)/x < 2, x, S.Reals) == \\\n1800.         Union(Interval.open(-oo, -3), Interval.open(0, 1))\n1801. \n1802. \n1803. def test_issue_10671():\n1804.     assert solveset(sin(y), y, Interval(0, pi)) == FiniteSet(0, pi)\n1805.     i = Interval(1, 10)\n1806.     assert solveset((1/x).diff(x) < 0, x, i) == i\n1807. \n1808. \n1809. def test_issue_11064():\n1810.     eq = x + sqrt(x**2 - 5)\n1811.     assert solveset(eq > 0, x, S.Reals) == \\\n1812.         Interval(sqrt(5), oo)\n1813.     assert solveset(eq < 0, x, S.Reals) == \\\n1814.         Interval(-oo, -sqrt(5))\n1815.     assert solveset(eq > sqrt(5), x, S.Reals) == \\\n1816.         Interval.Lopen(sqrt(5), oo)\n1817. \n1818. \n1819. def test_issue_12478():\n1820.     eq = sqrt(x - 2) + 2\n1821.     soln = solveset_real(eq, x)\n1822.     assert soln is S.EmptySet\n1823.     assert solveset(eq < 0, x, S.Reals) is S.EmptySet\n1824.     assert solveset(eq > 0, x, S.Reals) == Interval(2, oo)\n1825. \n1826. \n1827. def test_issue_12429():\n1828.     eq = solveset(log(x)/x <= 0, x, S.Reals)\n1829.     sol = Interval.Lopen(0, 1)\n1830.     assert eq == sol\n1831. \n1832. \n1833. def test_solveset_arg():\n1834.     assert solveset(arg(x), x, S.Reals)  == Interval.open(0, oo)\n1835.     assert solveset(arg(4*x -3), x) == Interval.open(Rational(3, 4), oo)\n1836. \n1837. \n1838. def test__is_finite_with_finite_vars():\n1839.     f = _is_finite_with_finite_vars\n1840.     # issue 12482\n1841.     assert all(f(1/x) is None for x in (\n1842.         Dummy(), Dummy(real=True), Dummy(complex=True)))\n1843.     assert f(1/Dummy(real=False)) is True  # b/c it\'s finite but not 0\n1844. \n1845. \n1846. def test_issue_13550():\n1847.     assert solveset(x**2 - 2*x - 15, symbol = x, domain = Interval(-oo, 0)) == FiniteSet(-3)\n1848. \n1849. \n1850. def test_issue_13849():\n1851.     t = symbols(\'t\')\n1852.     assert nonlinsolve((t*(sqrt(5) + sqrt(2)) - sqrt(2), t), t) == EmptySet()\n1853. \n1854. \n1855. def test_issue_14223():\n1856.     x = Symbol(\'x\')\n1857.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,\n1858.         S.Reals) == FiniteSet(-1, 1)\n1859.     assert solveset((Abs(x + Min(x, 2)) - 2).rewrite(Piecewise), x,\n1860.         Interval(0, 2)) == FiniteSet(1)\n1861. \n1862. \n1863. def test_issue_10158():\n1864.     x = Symbol(\'x\')\n1865.     dom = S.Reals\n1866.     assert solveset(x*Max(x, 15) - 10, x, dom) == FiniteSet(Rational(2, 3))\n1867.     assert solveset(x*Min(x, 15) - 10, x, dom) == FiniteSet(-sqrt(10), sqrt(10))\n1868.     assert solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom) == FiniteSet(-1, 1)\n1869.     assert solveset(Abs(x - 1) - Abs(y), x, dom) == FiniteSet(-Abs(y) + 1, Abs(y) + 1)\n1870.     assert solveset(Abs(x + 4*Abs(x + 1)), x, dom) == FiniteSet(Rational(-4, 3), Rational(-4, 5))\n1871.     assert solveset(2*Abs(x + Abs(x + Max(3, x))) - 2, x, S.Reals) == FiniteSet(-1, -2)\n1872.     dom = S.Complexes\n1873.     raises(ValueError, lambda: solveset(x*Max(x, 15) - 10, x, dom))\n1874.     raises(ValueError, lambda: solveset(x*Min(x, 15) - 10, x, dom))\n1875.     raises(ValueError, lambda: solveset(Max(Abs(x - 3) - 1, x + 2) - 3, x, dom))\n1876.     raises(ValueError, lambda: solveset(Abs(x - 1) - Abs(y), x, dom))\n1877.     raises(ValueError, lambda: solveset(Abs(x + 4*Abs(x + 1)), x, dom))\n1878. \n1879. \n1880. def test_issue_14300():\n1881.     x, y, n = symbols(\'x y n\')\n1882. \n1883.     f = 1 - exp(-18000000*x) - y\n1884.     a1 = FiniteSet(-log(-y + 1)/18000000)\n1885. \n1886.     assert solveset(f, x, S.Reals) == \\\n1887.         Intersection(S.Reals, a1)\n1888.     assert solveset(f, x) == \\\n1889.         ImageSet(Lambda(n, -I*(2*n*pi + arg(-y + 1))/18000000 -\n1890.             log(Abs(y - 1))/18000000), S.Integers)\n1891. \n1892. \n1893. def test_issue_14454():\n1894.     x = Symbol(\'x\')\n1895.     number = CRootOf(x**4 + x - 1, 2)\n1896.     raises(ValueError, lambda: invert_real(number, 0, x, S.Reals))\n1897.     assert invert_real(x**2, number, x, S.Reals)  # no error\n1898. \n1899. \n1900. def test_term_factors():\n1901.     assert list(_term_factors(3**x - 2)) == [-2, 3**x]\n1902.     expr = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1903.     assert set(_term_factors(expr)) == set([\n1904.         3**(x + 2), 4**(x + 2), 3**(x + 3), 4**(x - 1), -1, 4**(x + 1)])\n1905. \n1906. \n1907. #################### tests for transolve and its helpers ###############\n1908. \n1909. def test_transolve():\n1910. \n1911.     assert _transolve(3**x, x, S.Reals) == S.EmptySet\n1912.     assert _transolve(3**x - 9**(x + 5), x, S.Reals) == FiniteSet(-10)\n1913. \n1914. \n1915. # exponential tests\n1916. def test_exponential_real():\n1917.     from sympy.abc import x, y, z\n1918. \n1919.     e1 = 3**(2*x) - 2**(x + 3)\n1920.     e2 = 4**(5 - 9*x) - 8**(2 - x)\n1921.     e3 = 2**x + 4**x\n1922.     e4 = exp(log(5)*x) - 2**x\n1923.     e5 = exp(x/y)*exp(-z/y) - 2\n1924.     e6 = 5**(x/2) - 2**(x/3)\n1925.     e7 = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1926.     e8 = -9*exp(-2*x + 5) + 4*exp(3*x + 1)\n1927.     e9 = 2**x + 4**x + 8**x - 84\n1928. \n1929.     assert solveset(e1, x, S.Reals) == FiniteSet(\n1930.         -3*log(2)/(-2*log(3) + log(2)))\n1931.     assert solveset(e2, x, S.Reals) == FiniteSet(Rational(4, 15))\n1932.     assert solveset(e3, x, S.Reals) == S.EmptySet\n1933.     assert solveset(e4, x, S.Reals) == FiniteSet(0)\n1934.     assert solveset(e5, x, S.Reals) == Intersection(\n1935.         S.Reals, FiniteSet(y*log(2*exp(z/y))))\n1936.     assert solveset(e6, x, S.Reals) == FiniteSet(0)\n1937.     assert solveset(e7, x, S.Reals) == FiniteSet(2)\n1938.     assert solveset(e8, x, S.Reals) == FiniteSet(-2*log(2)/5 + 2*log(3)/5 + Rational(4, 5))\n1939.     assert solveset(e9, x, S.Reals) == FiniteSet(2)\n1940. \n1941.     assert solveset_real(-9*exp(-2*x + 5) + 2**(x + 1), x) == FiniteSet(\n1942.         -((-5 - 2*log(3) + log(2))/(log(2) + 2)))\n1943.     assert solveset_real(4**(x/2) - 2**(x/3), x) == FiniteSet(0)\n1944.     b = sqrt(6)*sqrt(log(2))/sqrt(log(5))\n1945.     assert solveset_real(5**(x/2) - 2**(3/x), x) == FiniteSet(-b, b)\n1946. \n1947.     # coverage test\n1948.     C1, C2 = symbols(\'C1 C2\')\n1949.     f = Function(\'f\')\n1950.     assert solveset_real(C1 + C2/x**2 - exp(-f(x)), f(x)) == Intersection(\n1951.         S.Reals, FiniteSet(-log(C1 + C2/x**2)))\n1952.     y = symbols(\'y\', positive=True)\n1953.     assert solveset_real(x**2 - y**2/exp(x), y) == Intersection(\n1954.         S.Reals, FiniteSet(-sqrt(x**2*exp(x)), sqrt(x**2*exp(x))))\n1955.     p = Symbol(\'p\', positive=True)\n1956.     assert solveset_real((1/p + 1)**(p + 1), p) == EmptySet()\n1957. \n1958. \n1959. @XFAIL\n1960. def test_exponential_complex():\n1961.     from sympy.abc import x\n1962.     from sympy import Dummy\n1963.     n = Dummy(\'n\')\n1964. \n1965.     assert solveset_complex(2**x + 4**x, x) == imageset(\n1966.         Lambda(n, I*(2*n*pi + pi)/log(2)), S.Integers)\n1967.     assert solveset_complex(x**z*y**z - 2, z) == FiniteSet(\n1968.         log(2)/(log(x) + log(y)))\n1969.     assert solveset_complex(4**(x/2) - 2**(x/3), x) == imageset(\n1970.         Lambda(n, 3*n*I*pi/log(2)), S.Integers)\n1971.     assert solveset(2**x + 32, x) == imageset(\n1972.         Lambda(n, (I*(2*n*pi + pi) + 5*log(2))/log(2)), S.Integers)\n1973. \n1974.     eq = (2**exp(y**2/x) + 2)/(x**2 + 15)\n1975.     a = sqrt(x)*sqrt(-log(log(2)) + log(log(2) + 2*n*I*pi))\n1976.     assert solveset_complex(eq, y) == FiniteSet(-a, a)\n1977. \n1978.     union1 = imageset(Lambda(n, I*(2*n*pi - pi*Rational(2, 3))/log(2)), S.Integers)\n1979.     union2 = imageset(Lambda(n, I*(2*n*pi + pi*Rational(2, 3))/log(2)), S.Integers)\n1980.     assert solveset(2**x + 4**x + 8**x, x) == Union(union1, union2)\n1981. \n1982.     eq = 4**(x + 1) + 4**(x + 2) + 4**(x - 1) - 3**(x + 2) - 3**(x + 3)\n1983.     res = solveset(eq, x)\n1984.     num = 2*n*I*pi - 4*log(2) + 2*log(3)\n1985.     den = -2*log(2) + log(3)\n1986.     ans = imageset(Lambda(n, num/den), S.Integers)\n1987.     assert res == ans\n1988. \n1989. \n1990. def test_expo_conditionset():\n1991.     from sympy.abc import x, y\n1992. \n1993.     f1 = (exp(x) + 1)**x - 2\n1994.     f2 = (x + 2)**y*x - 3\n1995.     f3 = 2**x - exp(x) - 3\n1996.     f4 = log(x) - exp(x)\n1997.     f5 = 2**x + 3**x - 5**x\n1998. \n1999.     assert solveset(f1, x, S.Reals) == ConditionSet(\n2000.         x, Eq((exp(x) + 1)**x - 2, 0), S.Reals)\n2001.     assert solveset(f2, x, S.Reals) == ConditionSet(\n2002.         x, Eq(x*(x + 2)**y - 3, 0), S.Reals)\n2003.     assert solveset(f3, x, S.Reals) == ConditionSet(\n2004.         x, Eq(2**x - exp(x) - 3, 0), S.Reals)\n2005.     assert solveset(f4, x, S.Reals) == ConditionSet(\n2006.         x, Eq(-exp(x) + log(x), 0), S.Reals)\n2007.     assert solveset(f5, x, S.Reals) == ConditionSet(\n2008.         x, Eq(2**x + 3**x - 5**x, 0), S.Reals)\n2009. \n2010. \n2011. def test_exponential_symbols():\n2012.     x, y, z = symbols(\'x y z\', positive=True)\n2013. \n2014.     assert solveset(z**x - y, x, S.Reals) == Intersection(\n2015.         S.Reals, FiniteSet(log(y)/log(z)))\n2016. \n2017.     w = symbols(\'w\')\n2018.     f1 = 2*x**w - 4*y**w\n2019.     f2 = (x/y)**w - 2\n2020.     sol1 = Intersection({log(2)/(log(x) - log(y))}, S.Reals)\n2021.     sol2 = Intersection({log(2)/log(x/y)}, S.Reals)\n2022.     assert solveset(f1, w, S.Reals) == sol1\n2023.     assert solveset(f2, w, S.Reals) == sol2\n2024. \n2025.     assert solveset(x**x, x, S.Reals) == S.EmptySet\n2026.     assert solveset(x**y - 1, y, S.Reals) == FiniteSet(0)\n2027.     assert solveset(exp(x/y)*exp(-z/y) - 2, y, S.Reals) == FiniteSet(\n2028.         (x - z)/log(2)) - FiniteSet(0)\n2029. \n2030.     a, b, x, y = symbols(\'a b x y\')\n2031.     assert solveset_real(a**x - b**x, x) == ConditionSet(\n2032.         x, (a > 0) & (b > 0), FiniteSet(0))\n2033.     assert solveset(a**x - b**x, x) == ConditionSet(\n2034.         x, Ne(a, 0) & Ne(b, 0), FiniteSet(0))\n2035. \n2036. \n2037. @XFAIL\n2038. def test_issue_10864():\n2039.     assert solveset(x**(y*z) - x, x, S.Reals) == FiniteSet(1)\n2040. \n2041. \n2042. @XFAIL\n2043. def test_solve_only_exp_2():\n2044.     assert solveset_real(sqrt(exp(x)) + sqrt(exp(-x)) - 4, x) == \\\n2045.         FiniteSet(2*log(-sqrt(3) + 2), 2*log(sqrt(3) + 2))\n2046. \n2047. \n2048. def test_is_exponential():\n2049.     x, y, z = symbols(\'x y z\')\n2050. \n2051.     assert _is_exponential(y, x) is False\n2052.     assert _is_exponential(3**x - 2, x) is True\n2053.     assert _is_exponential(5**x - 7**(2 - x), x) is True\n2054.     assert _is_exponential(sin(2**x) - 4*x, x) is False\n2055.     assert _is_exponential(x**y - z, y) is True\n2056.     assert _is_exponential(x**y - z, x) is False\n2057.     assert _is_exponential(2**x + 4**x - 1, x) is True\n2058.     assert _is_exponential(x**(y*z) - x, x) is False\n2059.     assert _is_exponential(x**(2*x) - 3**x, x) is False\n2060.     assert _is_exponential(x**y - y*z, y) is False\n2061.     assert _is_exponential(x**y - x*z, y) is True\n2062. \n2063. \n2064. def test_solve_exponential():\n2065.     assert _solve_exponential(3**(2*x) - 2**(x + 3), 0, x, S.Reals) == \\\n2066.         FiniteSet(-3*log(2)/(-2*log(3) + log(2)))\n2067.     assert _solve_exponential(2**y + 4**y, 1, y, S.Reals) == \\\n2068.         FiniteSet(log(Rational(-1, 2) + sqrt(5)/2)/log(2))\n2069.     assert _solve_exponential(2**y + 4**y, 0, y, S.Reals) == \\\n2070.         S.EmptySet\n2071.     assert _solve_exponential(2**x + 3**x - 5**x, 0, x, S.Reals) == \\\n2072.         ConditionSet(x, Eq(2**x + 3**x - 5**x, 0), S.Reals)\n2073. \n2074. # end of exponential tests\n2075. \n2076. \n2077. # logarithmic tests\n2078. def test_logarithmic():\n2079.     assert solveset_real(log(x - 3) + log(x + 3), x) == FiniteSet(\n2080.         -sqrt(10), sqrt(10))\n2081.     assert solveset_real(log(x + 1) - log(2*x - 1), x) == FiniteSet(2)\n2082.     assert solveset_real(log(x + 3) + log(1 + 3/x) - 3, x) == FiniteSet(\n2083.         -3 + sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 + exp(3)/2,\n2084.         -sqrt(-12 + exp(3))*exp(Rational(3, 2))/2 - 3 + exp(3)/2)\n2085. \n2086.     eq = z - log(x) + log(y/(x*(-1 + y**2/x**2)))\n2087.     assert solveset_real(eq, x) == \\\n2088.         Intersection(S.Reals, FiniteSet(-sqrt(y**2 - y*exp(z)),\n2089.             sqrt(y**2 - y*exp(z)))) - \\\n2090.         Intersection(S.Reals, FiniteSet(-sqrt(y**2), sqrt(y**2)))\n2091.     assert solveset_real(\n2092.         log(3*x) - log(-x + 1) - log(4*x + 1), x) == FiniteSet(Rational(-1, 2), S.Half)\n2093.     assert solveset(log(x**y) - y*log(x), x, S.Reals) == S.Reals\n2094. \n2095. @XFAIL\n2096. def test_uselogcombine_2():\n2097.     eq = log(exp(2*x) + 1) + log(-tanh(x) + 1) - log(2)\n2098.     assert solveset_real(eq, x) == EmptySet()\n2099.     eq = log(8*x) - log(sqrt(x) + 1) - 2\n2100.     assert solveset_real(eq, x) == EmptySet()\n2101. \n2102. \n2103. def test_is_logarithmic():\n2104.     assert _is_logarithmic(y, x) is False\n2105.     assert _is_logarithmic(log(x), x) is True\n2106.     assert _is_logarithmic(log(x) - 3, x) is True\n2107.     assert _is_logarithmic(log(x)*log(y), x) is True\n2108.     assert _is_logarithmic(log(x)**2, x) is False\n2109.     assert _is_logarithmic(log(x - 3) + log(x + 3), x) is True\n2110.     assert _is_logarithmic(log(x**y) - y*log(x), x) is True\n2111.     assert _is_logarithmic(sin(log(x)), x) is False\n2112.     assert _is_logarithmic(x + y, x) is False\n2113.     assert _is_logarithmic(log(3*x) - log(1 - x) + 4, x) is True\n2114.     assert _is_logarithmic(log(x) + log(y) + x, x) is False\n2115.     assert _is_logarithmic(log(log(x - 3)) + log(x - 3), x) is True\n2116.     assert _is_logarithmic(log(log(3) + x) + log(x), x) is True\n2117.     assert _is_logarithmic(log(x)*(y + 3) + log(x), y) is False\n2118. \n2119. \n2120. def test_solve_logarithm():\n2121.     y = Symbol(\'y\')\n2122.     assert _solve_logarithm(log(x**y) - y*log(x), 0, x, S.Reals) == S.Reals\n2123.     y = Symbol(\'y\', positive=True)\n2124.     assert _solve_logarithm(log(x)*log(y), 0, x, S.Reals) == FiniteSet(1)\n2125. \n2126. # end of logarithmic tests\n2127. \n2128. \n2129. def test_linear_coeffs():\n2130.     from sympy.solvers.solveset import linear_coeffs\n2131.     assert linear_coeffs(0, x) == [0, 0]\n2132.     assert all(i is S.Zero for i in linear_coeffs(0, x))\n2133.     assert linear_coeffs(x + 2*y + 3, x, y) == [1, 2, 3]\n2134.     assert linear_coeffs(x + 2*y + 3, y, x) == [2, 1, 3]\n2135.     assert linear_coeffs(x + 2*x**2 + 3, x, x**2) == [1, 2, 3]\n2136.     raises(ValueError, lambda:\n2137.         linear_coeffs(x + 2*x**2 + x**3, x, x**2))\n2138.     raises(ValueError, lambda:\n2139.         linear_coeffs(1/x*(x - 1) + 1/x, x))\n2140.     assert linear_coeffs(a*(x + y), x, y) == [a, a, 0]\n2141.     assert linear_coeffs(1.0, x, y) == [0, 0, 1.0]\n2142. \n2143. # modular tests\n2144. def test_is_modular():\n2145.     x, y = symbols(\'x y\')\n2146. \n2147.     assert _is_modular(y, x) is False\n2148.     assert _is_modular(Mod(x, 3) - 1, x) is True\n2149.     assert _is_modular(Mod(x**3 - 3*x**2 - x + 1, 3) - 1, x) is True\n2150.     assert _is_modular(Mod(exp(x + y), 3) - 2, x) is True\n2151.     assert _is_modular(Mod(exp(x + y), 3) - log(x), x) is True\n2152.     assert _is_modular(Mod(x, 3) - 1, y) is False\n2153.     assert _is_modular(Mod(x, 3)**2 - 5, x) is False\n2154.     assert _is_modular(Mod(x, 3)**2 - y, x) is False\n2155.     assert _is_modular(exp(Mod(x, 3)) - 1, x) is False\n2156.     assert _is_modular(Mod(3, y) - 1, y) is False\n2157. \n2158. \n2159. def test_invert_modular():\n2160.     x, y = symbols(\'x y\')\n2161.     n = Dummy(\'n\', integer=True)\n2162.     from sympy.solvers.solveset import _invert_modular as invert_modular\n2163. \n2164.     # non invertible cases\n2165.     assert invert_modular(Mod(sin(x), 7), S(5), n, x) == (Mod(sin(x), 7), 5)\n2166.     assert invert_modular(Mod(exp(x), 7), S(5), n, x) == (Mod(exp(x), 7), 5)\n2167.     assert invert_modular(Mod(log(x), 7), S(5), n, x) == (Mod(log(x), 7), 5)\n2168.     # a is symbol\n2169.     assert invert_modular(Mod(x, 7), S(5), n, x) == \\\n2170.             (x, ImageSet(Lambda(n, 7*n + 5), S.Integers))\n2171.     # a.is_Add\n2172.     assert invert_modular(Mod(x + 8, 7), S(5), n, x) == \\\n2173.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))\n2174.     assert invert_modular(Mod(x**2 + x, 7), S(5), n, x) == \\\n2175.             (Mod(x**2 + x, 7), 5)\n2176.     # a.is_Mul\n2177.     assert invert_modular(Mod(3*x, 7), S(5), n, x) == \\\n2178.             (x, ImageSet(Lambda(n, 7*n + 4), S.Integers))\n2179.     assert invert_modular(Mod((x + 1)*(x + 2), 7), S(5), n, x) == \\\n2180.             (Mod((x + 1)*(x + 2), 7), 5)\n2181.     # a.is_Pow\n2182.     assert invert_modular(Mod(x**4, 7), S(5), n, x) == \\\n2183.             (x, EmptySet())\n2184.     assert invert_modular(Mod(3**x, 4), S(3), n, x) == \\\n2185.             (x, ImageSet(Lambda(n, 2*n + 1), S.Naturals0))\n2186.     assert invert_modular(Mod(2**(x**2 + x + 1), 7), S(2), n, x) == \\\n2187.             (x**2 + x + 1, ImageSet(Lambda(n, 3*n + 1), S.Naturals0))\n2188. \n2189. \n2190. def test_solve_modular():\n2191.     x = Symbol(\'x\')\n2192.     n = Dummy(\'n\', integer=True)\n2193.     # if rhs has symbol (need to be implemented in future).\n2194.     assert solveset(Mod(x, 4) - x, x, S.Integers) == \\\n2195.             ConditionSet(x, Eq(-x + Mod(x, 4), 0), \\\n2196.             S.Integers)\n2197.     # when _invert_modular fails to invert\n2198.     assert solveset(3 - Mod(sin(x), 7), x, S.Integers) == \\\n2199.             ConditionSet(x, Eq(Mod(sin(x), 7) - 3, 0), S.Integers)\n2200.     assert solveset(3 - Mod(log(x), 7), x, S.Integers) == \\\n2201.             ConditionSet(x, Eq(Mod(log(x), 7) - 3, 0), S.Integers)\n2202.     assert solveset(3 - Mod(exp(x), 7), x, S.Integers) == \\\n2203.             ConditionSet(x, Eq(Mod(exp(x), 7) - 3, 0), S.Integers)\n2204.     # EmptySet solution definitely\n2205.     assert solveset(7 - Mod(x, 5), x, S.Integers) == EmptySet()\n2206.     assert solveset(5 - Mod(x, 5), x, S.Integers) == EmptySet()\n2207.     # Negative m\n2208.     assert solveset(2 + Mod(x, -3), x, S.Integers) == \\\n2209.             ImageSet(Lambda(n, -3*n - 2), S.Integers)\n2210.     assert solveset(4 + Mod(x, -3), x, S.Integers) == EmptySet()\n2211.     # linear expression in Mod\n2212.     assert solveset(3 - Mod(x, 5), x, S.Integers) == ImageSet(Lambda(n, 5*n + 3), S.Integers)\n2213.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Integers) == \\\n2214.                 ImageSet(Lambda(n, 7*n + 5), S.Integers)\n2215.     assert solveset(3 - Mod(5*x, 7), x, S.Integers) == \\\n2216.                 ImageSet(Lambda(n, 7*n + 2), S.Integers)\n2217.     # higher degree expression in Mod\n2218.     assert solveset(Mod(x**2, 160) - 9, x, S.Integers) == \\\n2219.             Union(ImageSet(Lambda(n, 160*n + 3), S.Integers),\n2220.             ImageSet(Lambda(n, 160*n + 13), S.Integers),\n2221.             ImageSet(Lambda(n, 160*n + 67), S.Integers),\n2222.             ImageSet(Lambda(n, 160*n + 77), S.Integers),\n2223.             ImageSet(Lambda(n, 160*n + 83), S.Integers),\n2224.             ImageSet(Lambda(n, 160*n + 93), S.Integers),\n2225.             ImageSet(Lambda(n, 160*n + 147), S.Integers),\n2226.             ImageSet(Lambda(n, 160*n + 157), S.Integers))\n2227.     assert solveset(3 - Mod(x**4, 7), x, S.Integers) == EmptySet()\n2228.     assert solveset(Mod(x**4, 17) - 13, x, S.Integers) == \\\n2229.             Union(ImageSet(Lambda(n, 17*n + 3), S.Integers),\n2230.             ImageSet(Lambda(n, 17*n + 5), S.Integers),\n2231.             ImageSet(Lambda(n, 17*n + 12), S.Integers),\n2232.             ImageSet(Lambda(n, 17*n + 14), S.Integers))\n2233.     # a.is_Pow tests\n2234.     assert solveset(Mod(7**x, 41) - 15, x, S.Integers) == \\\n2235.             ImageSet(Lambda(n, 40*n + 3), S.Naturals0)\n2236.     assert solveset(Mod(12**x, 21) - 18, x, S.Integers) == \\\n2237.             ImageSet(Lambda(n, 6*n + 2), S.Naturals0)\n2238.     assert solveset(Mod(3**x, 4) - 3, x, S.Integers) == \\\n2239.             ImageSet(Lambda(n, 2*n + 1), S.Naturals0)\n2240.     assert solveset(Mod(2**x, 7) - 2 , x, S.Integers) == \\\n2241.             ImageSet(Lambda(n, 3*n + 1), S.Naturals0)\n2242.     assert solveset(Mod(3**(3**x), 4) - 3, x, S.Integers) == \\\n2243.             Intersection(ImageSet(Lambda(n, Intersection({log(2*n + 1)/log(3)},\n2244.             S.Integers)), S.Naturals0), S.Integers)\n2245.     # Not Implemented for m without primitive root\n2246.     assert solveset(Mod(x**3, 8) - 1, x, S.Integers) == \\\n2247.             ConditionSet(x, Eq(Mod(x**3, 8) - 1, 0), S.Integers)\n2248.     assert solveset(Mod(x**4, 9) - 4, x, S.Integers) == \\\n2249.             ConditionSet(x, Eq(Mod(x**4, 9) - 4, 0), S.Integers)\n2250.     # domain intersection\n2251.     assert solveset(3 - Mod(5*x - 8, 7), x, S.Naturals0) == \\\n2252.             Intersection(ImageSet(Lambda(n, 7*n + 5), S.Integers), S.Naturals0)\n2253.     # Complex args\n2254.     assert solveset(Mod(x, 3) - I, x, S.Integers) == \\\n2255.             EmptySet()\n2256.     assert solveset(Mod(I*x, 3) - 2, x, S.Integers) == \\\n2257.             ConditionSet(x, Eq(Mod(I*x, 3) - 2, 0), S.Integers)\n2258.     assert solveset(Mod(I + x, 3) - 2, x, S.Integers) == \\\n2259.             ConditionSet(x, Eq(Mod(x + I, 3) - 2, 0), S.Integers)\n2260.     # issue 13178\n2261.     n = symbols(\'n\', integer=True)\n2262.     a = 742938285\n2263.     z = 1898888478\n2264.     m = 2**31 - 1\n2265.     x = 20170816\n2266.     assert solveset(x - Mod(a**n*z, m), n, S.Integers) == \\\n2267.             ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0)\n2268.     assert solveset(x - Mod(a**n*z, m), n, S.Naturals0) == \\\n2269.             Intersection(ImageSet(Lambda(n, 2147483646*n + 100), S.Naturals0),\n2270.             S.Naturals0)\n2271.     assert solveset(x - Mod(a**(2*n)*z, m), n, S.Integers) == \\\n2272.             Intersection(ImageSet(Lambda(n, 1073741823*n + 50), S.Naturals0),\n2273.             S.Integers)\n2274.     assert solveset(x - Mod(a**(2*n + 7)*z, m), n, S.Integers) == EmptySet()\n2275.     assert solveset(x - Mod(a**(n - 4)*z, m), n, S.Integers) == \\\n2276.             Intersection(ImageSet(Lambda(n, 2147483646*n + 104), S.Naturals0),\n2277.             S.Integers)\n2278. \n2279. @XFAIL\n2280. def test_solve_modular_fail():\n2281.     # issue 17373 (https://github.com/sympy/sympy/issues/17373)\n2282.     assert solveset(Mod(x**4, 14) - 11, x, S.Integers) == \\\n2283.             Union(ImageSet(Lambda(n, 14*n + 3), S.Integers),\n2284.             ImageSet(Lambda(n, 14*n + 11), S.Integers))\n2285.     assert solveset(Mod(x**31, 74) - 43, x, S.Integers) == \\\n2286.             ImageSet(Lambda(n, 74*n + 31), S.Integers)\n2287. \n2288. # end of modular tests\n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n' additional_kwargs={} response_metadata={}
2025-10-06 07:19:33,444 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='```python\nfrom sympy.core.relational import Eq\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import Symbol\nfrom sympy.functions.elementary.trigonometric import cos, sin\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.solvers.solveset import solveset\n\n# From the context, `n` is a module-level variable\nn = Symbol(\'n\', real=True)\n\n\ndef test_solveset_transcendental_returns_conditionset():\n    """\n    Tests that solveset returns a ConditionSet for a transcendental equation\n    it cannot solve, rather than raising NotImplementedError.\n    """\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\n    # When the symbol is real, solveset defaults to the Reals domain.\n    # The original bug report uses eq.as_set(), which is equivalent to this.\n    assert solveset(eq, n) == ConditionSet(n, eq, S.Reals)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 50271, 'candidates_token_count': 229, 'total_token_count': 54503, 'prompt_tokens_details': [{'modality': 1, 'token_count': 50271}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 229}], 'thoughts_token_count': 4003, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -2.994474052862309, 'model_name': 'gemini-2.5-pro'} id='run--cde3bc90-7fd7-4d5d-b21d-e7ae3b8cf2c5-0' usage_metadata={'input_tokens': 50271, 'output_tokens': 229, 'total_tokens': 54503, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 4003}}
2025-10-06 07:19:44,289 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "from sympy.core.relational import Eq\\nfrom sympy.core.singleton import S\\nfrom sympy.core.symbol import Symbol\\nfrom sympy.functions.elementary.trigonometric import cos, sin\\nfrom sympy.sets.conditionset import ConditionSet\\nfrom sympy.solvers.solveset import solveset\\n\\n# From the context, `n` is a module-level variable\\nn = Symbol(\'n\', real=True)\\n\\n\\ndef test_solveset_transcendental_returns_conditionset():\\n    \\"\\"\\"\\n    Tests that solveset returns a ConditionSet for a transcendental equation\\n    it cannot solve, rather than raising NotImplementedError.\\n    \\"\\"\\"\\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\\n    # When the symbol is real, solveset defaults to the Reals domain.\\n    # The original bug report uses eq.as_set(), which is equivalent to this.\\n    assert solveset(eq, n) == ConditionSet(n, eq, S.Reals)\\n", "relative_path": "sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'f27639d7-8052-432d-95a3-ac44bacc0769': 'Ct4aAR/MhbZ2w9jbrqvgPGfrq/7HinLoRuRrXOPilYdphgM+9Wf1JirxEDb0AnmVqbGcV6sHJdqyYonxDxywiLETCpimfxfaByZoinxCSuqvg3tTzVZ1VNmNi0aL9IcQ+Pxq28jH5/tZK6YkPhNbkbE7LsKtXZzDfFQhvhmcuXLk4qWG3lGFNVU5QrRtjElaBRanK+Tq0cvfj/FM9wEPLD4TjQtgTOiEhsD9IXdbW069SeI4TkxbTrU9bp7uXaMA+DNcOHrP3gNKr22BFFVjaM80igzh6XS8nThjS+Q6BqSDg/j5HpLsKFz3VrgOu8IOinA7DbFOSe464ER6JJdbJN5heVvfGd7GNNVet7we6KnvoZr9ZFq8S/8X2jJZou9JlLtCBm6OWUki0fMktzO5KxmLbPhIpe59u7AZysXLGct9Hu/7b4HFl6kAQmeFDwSC2/A+yMkNWGJ5OgQaBbBTYGO4qn6utlL+Ac0NDQo5UC+ZLOofBXiXNoueQvkmo88JQf7QgMuWiKNqTX1Wn/LY/2/dz1AyVY90lVgxbTu4sPjdzlkUIUwMFhGNb7FS+K/X8B5pqKku0A46JoxjZW9hbKJssTUV7xFU+bv5ttQpxt7KxOYkul2YuaTBEZP9YikLQD4v/vjoL1Qp3pes/9LM1cIO3yiaFqWtpHPjLrOje0/37//BXOlvvdVFuQhEGBWO+dHP3EHpOqWAYA02vWJMeIQecz/lZpqhR7/lR/71c0aw9ifQyIY/1oaAAqYoq/5hME5jin5lCQ0itfccUyk8tWBTEwZIBm/wM9wDRl7rrPqmE9xY9dN8E2UQWJadHPxOf0yjW9IBRIIyuOzRJJqvPPG+yjDlgL1r2erY2uwtob/HR5/NyL2AXXF/NpZkZxiwLHwKbOv5JDVzT4ddDUBGRsOCUxd+KmXfFIERgEe0TABSPFNw04ug22CDOq/z4T5ITv5qvbam55XdY0WC0B95ogKNQA9U1LF6bIOLGh6p3V+2CCq0QZNBNKnGqsl7NrFqIh6nYcS66ITDG8qAfAhLJVZiYI6lBPiNvJWrieuAJkJM8olPZpniyP7STtoymDuA2F3bqikDocdkhmAmsu3To+tlHeNTRWcd1osqhoE/ySpbE9/ln+jZWRkNFupA4PEO33A6u4EKb0YuJFto9ZNq169aF6veFCkr2jlLJx4w46XrcHOQaef2Z0+92FsbgruU+82B4KffV3CzsfAtvS3M/9c3r2VxEl/cU9MkKkXvfY3ble2CDId88HR1pdysV9QqaVKy3fX4tuAkkIeXum6W0JZbNCp4NnNFOggmTYCPmi8+dt+gIO5ASoCApWsrIjvvWHgIcEAswpNrIcB22UZB2WZVoBOEsyzI7t6F852GtQsBj2/rd2aqzibz7cdUEiuO3JBqR/dATbLOlKX1VDzMG5VZsE//Y0KiLvqrvDXRWI6eCbY5s0F4tLqaUHEtcPyme9aZOfi3tOxLk/md+c1NLUUWQtFVmY8sWrfxPOfNxdGgvhDqvbGAWv6EeB8PDlhlbM2prJDXHteavke/ZaqPXYt4DqPLBben116gOy1KD7jxydwBI+J5ar5JIc7Oe8OzUJC91up10wDN65Gsn1ZDnevamn06WxsS/nO/FCMxjUsJdtEdvfR4LjW5neg/gCy77VQBliWxWDlqOCEjW+YhAb8MwsL1/scHNYGZeavKikH/SdYNGtckzn0JD9Bc6l8yQ47vAuEC/Nvbmkp9rT+Qaw1wSokJUhDCiLa9VgNEvZCMSQleGsmXPUWnubt2T//y5FUCAy7bGwJxsB8zkjtdCUf5F4ytoYPdC4DbVJ0rm3AIbxKUaB/cv29HnyxWG9+IvVa8mjV0k/NTGTLwCqxJ6Gh1/+sZnaKPWuskPasu206WchTBPHU9M7x0H4maCX0L/u7hRFtw+P/j3R9LSqufQgSx32yS4hC2HF5C8wzHrMcVftUHzyvx21XGpfQNkNGq3+rMvub6J986QBPQFpmXassr+K0pbE2+dwXK6ahtZKX0OYEhMOW0oC9ZfxgGEtN1K8VhdlDn297FFDbyTZlxqZXV+GyY1iltvtf+TO+ljR257I36/QSPTExPFO/9HqXFfRhVGYf9jNCXSW6IfYFyNNy15LbInEDCfmK2jIUHmT+bF3YpSCVddjpVXvuo0OGG7/XaAgFqwmjdg9JXPQVXc7nA1b7ZTFeGkQxifQIYoRkZKi+itLEzueVzMnCtPA4SbOkV01RWzfvtnmnqBH5yM/DclgS3g/YKPGpplAGN5FdpyEduJM2VZSYxZI5TBQ5Cp+IM0SxFsW1Chr6NK/WvKB9y50HFskxcrELUvfyIxdVXnxDqgg6diM1G1W701r/ugylUI4A9VZWxp8iYD+5nxQAqPNc0dsMJdR1UoE2ITry7wFMjDweVLDB3ktesL9AR07Yun7J9Kd4SD9SYkY18Sfg1Qs/XPhtysFg7AZSDQn915jp21TSP1H4AsTs95h/faH6of/oX/qfkiE0EjmJve1/aX3rNp/5UylpRC6EJRUiEpmJbcxgfabZ3j55ItSYSkwqB0yubQNOkzeU7WqS7fO5EtaMIRv3rdS0j0miy5eze4417FUGVIdJYAJY5BuACh/kfeCJFITph3Ugr1TH9n/0+ZouOVFF5OM+Nhsbno+2/kfvofCHv8cSyIf7MLRQtgbJ6pdc3tZgM/JHltD2DYePZuTJdtMZPZNoHFj/5QSYOS0br6JrT0CdwwPE6GGaSbDE9+sRyY3pCNRbC/ChARE83ZGpUyRmWrI74uZA8vWvJe7skEg8+66Gz8vVYbOuu/Fl8Jppg3Gz6kvgUb5DGIo78vtHRe6WwizBFNti5rkEykzCQTSKSt1Anj9PN3gyljuB3y7BF0DNkIwmS//cO+S3A9lLMrukbvOMooMIaefzZFRHjk7KMZTkSFMHbiSHuwYTLLLomNajsGEb8JZ8qfe3AbsYbA645QaRxhecjGm+gtysyk3C8GoOUew+4imF9JI23EiTkKofm13EzZj2GJ4UrqN3oMbp6xTRkCKF4ILUOKydW+/V0ucrCbf9nb0+DMjnF1mi4EUeXNxoaICBNILi+dQPHEpdreoV713fhS57jQivQWwmgGo8shHDq/Q9kk023Vo8DyqAqJYz+3/p1cSLFuNXyKty+v+WShIk4q8PxcU/qA3kZ3dv5z4xMZ4pYdazqYMnhUU+1LqHuEbrGD02encAJrvgtTinx3GUOflU7N6hlO32ikvPRP3oZtxncMresZ6rEVZlMe8GalolbCUvLN18tQQ0eqkVNoxPhuTzJS33DocDJhmlIRclB8iJMqssGDrViecXr+YgUrwoB5QJxfdKgPj8DDfhsifHI0DvmeEhIINMlP0aXl/TOb4Z2m/np69n0JBZFSlurc9eI2FNqUwk7CrEroEDNGAJUfcGlliZP8HgV6zu8YFkoIlqYp49Bcf1LzFbgWuZaMZaIdLlf6IVB8oVFbbEhsLvUbz0P5lLpc591H5dYlBslszzpVfY8bZyWEizDO845QHDio2F7pI0QfWXa1bPdKTOWag5K8Cc7DozWhRPMJESiqs20OqqbkFAy4vo8WiTTSoRKUaBy9A3kBcmdbqHsR6f/oXvMKRbfHcYs5Blo7H1hlw9oRNQue7fluPNtAyTUjt/XlV3GQBMrGsQkouRZFAzsD1WUbWys95XwwW8/sZD8qNURx0ssNnS596KKZC/0xM5yMPqhonkAeerE4nDgrvC6ys1SKlX4q/FXB/Z2pau3osMei6csVXXTIbfwuosj1vAcczpuC6Kr9nDxv/Xn0Jt1dBjdDo1xjSHa6drj5Q4IUeeEiHnCR2m5iWdED/p4KdGq2/tTYGkGLI5ctZal1rPVGsP+xKaY0xxkIiCVD4tEEPlh0itfvBEqUz3DqWvAem8+/CdZ4rgdFuS7s7UedRWrlGtk6Hcq24JzindCnWnqAf4170bAp1uJ7Jf9Q7TcEkDULw4d+ZGibyAGO+im5t6Sj2smv1ubfDWfr3W5+fH4ckAj2W1hbtZ93uvHfnnf/LZ/jo0YVzpm1LyBJvyQUCuNmbmagSfLYvonM0PvIuwoUg8ZUBEI3QAdbepKrYt3msWwcgQyrwJRRBaUjaRbu/esErFco+oSWkMCKjhaDuiMIX/WeW89Atqk+wtmTeJSyz4Qra4+GQ/cCfkb2Qf8MoFqiiWrpZVwgZtwobuGsmg2Y3fuK0Y5z03eUnws75HLd5lS6rYRSqbzJFnd5VTfbpxFWFyYFXBPSj6HmgJGPKQwbA1fx+97V0hmohcY+ERlca8RIeMfNvrJbUNddsN2mHF0qdtkW09HQil5SJorx2YyA7dDPTV/UAqYvzGodmr4J4G1aqz6S9LddpHCF3BFMiOKegCI2acl2phhZ1NSMWtqQvPrg0/Ck3adn1EG2ZMKe48zkI4ypIidykoPBivG/FVP+vlGC3aKxCiGxXHW0fn2qFN57F5HZe9fMGXiNx1MI93rGtHs+CCAgAEGGIrrA4l+prAmSHgAzrm/4iDpVkxYXS8sOaOAhRWuqLx7F9sdhKhufj4='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18254, 'candidates_token_count': 250, 'total_token_count': 19459, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18254}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 250}], 'thoughts_token_count': 955, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4742896118164063, 'model_name': 'gemini-2.5-pro'} id='run--4c306fb9-4528-4140-ad75-e25e6cfb0c2c-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'from sympy.core.relational import Eq\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import Symbol\nfrom sympy.functions.elementary.trigonometric import cos, sin\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.solvers.solveset import solveset\n\n# From the context, `n` is a module-level variable\nn = Symbol(\'n\', real=True)\n\n\ndef test_solveset_transcendental_returns_conditionset():\n    """\n    Tests that solveset returns a ConditionSet for a transcendental equation\n    it cannot solve, rather than raising NotImplementedError.\n    """\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\n    # When the symbol is real, solveset defaults to the Reals domain.\n    # The original bug report uses eq.as_set(), which is equivalent to this.\n    assert solveset(eq, n) == ConditionSet(n, eq, S.Reals)\n', 'relative_path': 'sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': 'f27639d7-8052-432d-95a3-ac44bacc0769', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18254, 'output_tokens': 250, 'total_tokens': 19459, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 955}}
2025-10-06 07:19:45,289 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='sympy/solvers/tests/test_solveset_transcendental.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18531, 'candidates_token_count': 18, 'total_token_count': 18549, 'cached_content_token_count': 17888, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19484}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17888}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 18}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.000677474153538545, 'model_name': 'gemini-2.5-pro'} id='run--39aed8af-6b09-4492-9922-da650bf907fe-0' usage_metadata={'input_tokens': 18531, 'output_tokens': 18, 'total_tokens': 18549, 'input_token_details': {'cache_read': 17888}}
2025-10-06 07:19:45,382 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/sympy/solvers/tests/test_solveset_transcendental.py b/sympy/solvers/tests/test_solveset_transcendental.py
new file mode 100644
index 0000000000..81e2f434eb
--- /dev/null
+++ b/sympy/solvers/tests/test_solveset_transcendental.py
@@ -0,0 +1,20 @@
+from sympy.core.relational import Eq
+from sympy.core.singleton import S
+from sympy.core.symbol import Symbol
+from sympy.functions.elementary.trigonometric import cos, sin
+from sympy.sets.conditionset import ConditionSet
+from sympy.solvers.solveset import solveset
+
+# From the context, `n` is a module-level variable
+n = Symbol('n', real=True)
+
+
+def test_solveset_transcendental_returns_conditionset():
+    """
+    Tests that solveset returns a ConditionSet for a transcendental equation
+    it cannot solve, rather than raising NotImplementedError.
+    """
+    eq = Eq(n*cos(n) - 3*sin(n), 0)
+    # When the symbol is real, solveset defaults to the Reals domain.
+    # The original bug report uses eq.as_set(), which is equivalent to this.
+    assert solveset(eq, n) == ConditionSet(n, eq, S.Reals)

2025-10-06 07:19:45,382 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 07:19:45,395 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 07:19:45,395 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 07:19:45,657 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:19:45,657 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at b4f1aa3540 Merge pull request #18204 from mcpl-sympy/18106_ask

2025-10-06 07:19:45,657 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 07:19:45,758 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:19:45,759 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:19:45,759 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 07:19:45,759 - thread-139660780025408.app.docker.base_container - INFO - Creating directory sympy/solvers/tests in the container
2025-10-06 07:19:45,759 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p sympy/solvers/tests
2025-10-06 07:19:45,860 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:19:45,860 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:19:45,860 - thread-139660780025408.app.docker.base_container - INFO - Updating sympy/solvers/tests/test_solveset_transcendental.py in the container
2025-10-06 07:19:45,863 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 07:19:53,756 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "pytest sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'4f04280e-5b5d-4122-bd32-838b276452be': 'CrUVAR/MhbaXzJWw7gg3UKg+YESPVoSx+zlcR9DjDyMPhIBW18EzbbZVnnRwImsceM3MmwCMJkuBK2GZ9KjEKg/xfFPrV0SYMiPyez6NGS1PjGk8ShAClrz6ucjd37HGDLembskgYs+HnKIFFYlXV49fGbCtszROVn7JdjKxE01M9orVi+BM31TVV2Ku76d9d6eLBlqfO+zTi/WdblLNRiNJpZCQIJdOcazmPJp1JV5bQXixLhR20Eychwkh5uMMR8HQ14TXlyn1nF+hZMj5+2oCoQ4qto/HI6aNZ4jSEUcqZqqdH33a3MbfEL1OTE06cPLWUAgJl2D4RjNQi3C/KmEg0bGXPrZ8dGkHsVerDgrcgs6Q8kfsFP4U5gITSxZjpz4cJC96rTaiv8QmGwnb1FdyXx1jBiJkU+YdaD7BDW6NVu/rHwRB1iIkN2+pHN1u3iOLDkNQEJt1/Mk7Hrrt9H+uvq93zTKQacLaP3KU4Xdzt7mkM6bsN9br6+Is42dYVZyQTM9wPHpp3aEBJ6MPJ8Wjy++cyHKfoF0KPTrqF5lNA2bzoDwBVTY2qKBrbbQufWloKisqUQMprRJhgslI5V1sXHWvAQh6XV5+tz3zZZt4jvHQr6HksNFhoFCHeVgj0vbSx2QZKjlo2pQ4TdPbCyvQ3BWoRlwyIXMjFnTJxxGk054UgmH0FnC7qfL/bRRQCUzAlbOrbn+14i/JDblL5cNWQKFN3Eo7jWuVRSm6nKXHHmtAzpHBih2egG1tckIVxCwsfXku65OF9GMXdRR667FH2j6WIJgt9QNbc4snOBF5g3QQBl1/GH7tyks4UExZ+aHHSXBg9IYRy4CDYIfH5YXpcgtwHRtHRyU+ogDpOk2PZfX6PXib801LB/H5HN/7m8Hum4MitGhBXXrHd7HA5hGkHa2YDW3078b6kFw5B2PmkWD1PQ3d6Pr5s8eKUVspn1BPc5P3KPfjPez8kpLqykFdxDh7LW4HoUbJVudGhUZXR9SPuKSZfBjGA5qXErMrPHSmYjG4dB4S6qUIlvP3LNvr4ckgDXMmpAd7yl+wQShNKcV6fqoZc1sCe8arPQeUI5e/XtCcjj5bGBoAdu6dMFwThfPNkn0k9sfZt+9E9Lno2TF7LZZTwFiZvUondc7WuQSZbUUAjOOWcPlRQgWl31BW80NOfy6wgBG89pmh+80bcUGmWsWnczYoQ209bDuGj5zD01rSrM1M5KSmZsTLnPbLBRNhpJO5U/q53PJhgUGFPEGVccgcDTBnevZGddB1C+tldFheyCYNVjmHTDDiPNSpqWDbqrt/4O7M2zB9yLVtZ9Cubxp/LzDo8ZZsk2trVePYysDmjxglgi4vu4jsuxTLWZVEvmGZ3gtWFIFr4oh62BJqXZU441+OdGe6eBOgGxSLRxZbnc8dTXRO1yxo2bNpIT8VI1b/is9IrYPbxyExXDgQT+qm9ZYUnNELUkeiaGZC0xr7gk029wphrL+oHlljumnsLBbCImyVc5b43rGiMzilHNirjiKZvJvG8Vo1S6YGufThtWq3kRaCFzDS0a7CCF3UFJ/XRDWhesZQNVtFYEf/FKDXgFirTWXD6BRNIzsJ5euBy6wmcjQuFdAM+qhfCdarYARU1IhpZOdmQl2Pt+Lha7TVoNkJ4AIKz7zAWcpNszOrfYObNHz/T2fObKGMYVUWhBiNAc9wCAoHWL3Uf/QRy5vLffC81GM8M0Vr5pW8WNGptiYC4n7r+wYNL+asVDgmdepAQ1SDTW6n7aeIaXf1rsjwr5NLQcI0kJljLe5VCvZ2j0mLKaZmyo5zAKLU7jLjiT2mNUndFa6kdDm4NOoGbb61cV6vd48RUY8P86c+ZTe/QEb3b5hKUhHYWYiWBre1XnQkdzcRATH7vrFGr7yhWSPcjwvU5fUC7T0cJnw0jNaLxjR1anRtx4I7da8tIdi98A5R3d3ufmdO1gApyVJltpB6nTbM0Q0NyzDkv5ftIt2xc/Qvrjoi4pjCdnMazG0K20EVmG04L/PhSQl2C/Rx53l3fO2frE9cMXZLUxa+TS5tfeIOaBHwvL3s+YEYSNp2FTUyiXcV6N/V37afYLfupANA0octGWrY6E7u8q9jO5L4VKd6Y4psFrkkdIuOvbCgtYMbckl1sQQI4vFscKXwhrvrzS3O70KAgB6se+JHn7KZ0VuAIRNBfre1KtbZIpdbs0+NOuXh9w/426/uf45O/ccLvFacR/HN30A9aF10FRFGE5ms3O0wbA+evWyfu8ADi+JcFgtQP5x6A0+F1BsDJMRfDIsOzTeQSZPc7zF+Y6rH5DT+XK8w9f8A0oCWCjRsi+7e9BG8/1bTwlf7RpSfq1QRoYOcv54YapdyoL8iG1efSaIQyTtediAgZcT3ZFjd7blgqdeysyN3bYs+B2J7vDs7sFwchfFMzkwBRUPb9b35rU/tX0Y//V3omjtY7ahH8IT4KL3sF7Baih7ncGhbONGPBiPH0/y0fIWQVTPr4iPLhBvRcCx4lCKEvJUmyakwyZN/ODkoxOHDgYGLxWXlcuJgDQWWai6JI7kq2q5tEy2LTuHst7yjbo3BhdwVN0MdznuYQOd5HJDFhUVJ9jkqthIZlCMwqBBB4fC7XZPO80RbdyXrRNlJVzro6z0L6kPKMl6TbnyIiK/CQv1pnRay7MpYWA1bVfOh6EOnK6RZwAc+v6z2z+KixPJgjxt5SyfAXNZm7sFo1r6rKZFVNYy/kbapRs9bY+mFUcC4ufNFghlIRSqkNGeFzdu5tfh50AMv4dCWMbsiMNoce3bEX4bim2raLjUn5YDC6KMu5aLQmnZA4RUphdVa+B6UHvanWNJCz5RY9oLH37vxXl83quTDdwkQz/dEvbfWJ6+YbUTTG0aec90xYefWW1/LfDus5zLiOjnhEGJNEanTISElce8Jy7HEhor+eGvgATS8IlIIYP5tkeIwvZ59Ut8tgv7CShdt/8KGDx2V9tngeQaBinhQZ5MXSh93GAbzBSJD4MNcdLnXENIohTJR1KCTdDpdOqiA6ClhVQdmCOsXq9mQSdV7IaFt0mhJmy9Tr15eggK+rySRGpv166vRnQxO1PUy5LCAAUlnPQsja2qtEU9L3rkJlGJoGeLZM8UsPpGImCF+BsKVrcZHnl2zYJ/SGbrFy7iIAQI7l8W+xe2lNDSTzMUFLA/1Bti5V9E1VcpB1Nzp2dQYbNXeR4G+pBLrIZW6OGfGlCdjR651Bwn5hmKfeF4LaQtLPU9w4QNYb7STe5qTZ5Cq4QxuM4hI7DTrqUuURkM3o6QM1f1ChWwZPUGHdykU5JPdQVReBLBkU5CGhUG0t7/VPm6qgy/gjAjf6uuHIb87V3hDxLdpti1st2/ayloA05BK9+F+vW0mUiwOI0/qNYIxoDNsa5kkg1T8jv0N99NRbcwGxZ7rOpYIsxSBgQKe29CxFT6cKzN/7rfdRb/8xXhqqL2R63cd/Ov7BL03FSjOSdxqLbhvbY9SI19x+x6Fr/ix/oae3MabE0paFad6p/17ylB/JZM3ixrEgKbZ98o2l/Uu4BWxmKlqziJuM3VN01v3oYOxq6otC9vlS4JkiVr+WQ/CszxPPITOvXq03+oMbH2NS3e/qUh7qilI/SGDJXqCtcSYEVowtVJdm7h55lJYecM='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 444, 'candidates_token_count': 22, 'total_token_count': 1170, 'prompt_tokens_details': [{'modality': 1, 'token_count': 444}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 22}], 'thoughts_token_count': 704, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -4.9973134127530185, 'model_name': 'gemini-2.5-pro'} id='run--8ec86fd1-68ff-4ef1-918e-f50ab9277b97-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'pytest sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': '4f04280e-5b5d-4122-bd32-838b276452be', 'type': 'tool_call'}] usage_metadata={'input_tokens': 444, 'output_tokens': 22, 'total_tokens': 1170, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 704}}
2025-10-06 07:19:53,757 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: pytest sympy/solvers/tests/test_solveset_transcendental.py
2025-10-06 07:19:53,858 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 127
2025-10-06 07:19:53,858 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
pytest sympy/solvers/tests/test_
_solveset_transcendental.py

bash: pytest: command not found

2025-10-06 07:19:55,710 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python -m pytest sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'ee2f860d-2683-403e-81e0-0d7fda981b74': 'Cr4DAR/MhbbiFDOKF4E8GvguJAG8FC7R06O9yZtsitjkqWwMo76bmReTKQxBkISbpjN2DuF8B94EYFEX99rNwwyyZH8hE5U0HLynQ2D8c9KX7C0yjEkMyxX3BmslydoedR5ezDbw85mylep4a/EwkvrRADydmLXVJ/Y33taeP43o7Qo01OIA3xoCh01Ea4Mxl6sjHBeCv3/BqPXXTduUnnOEyQkPFJBHA/BK4AK9HDazOsEfcgfFbjSNHF9WNsIX8ETVgJp3fGucOqZneRh99cAy41Wcg+/wCyMKY/ar5pljo7j2E/c/KOfZDijFOvLvOV9nSNP20VKoyueXYIXOof0fX2ZweJoWeuEplUcj37H5e3p9UCQ06seuwSfGp6zahMbL9sGkU6QIlzODOX+zZf88mdOYihv7yq1l5aBNqnLGUCwanJKculKYFcJV7QkTjN0cwb3tZZmWdP8X17/zRKvC/lDYcBnKh6GmCHblvPmyI+/lGU/AVBN/qgB/hG/6kp2aO4ypuaFYPyAw61TaX6QqGaz14RIURclOKgqWybeo8i9hn7PmJAYbAVCtu7bMrAcW6VuzAgHNnsXhKoMa4yM='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 499, 'candidates_token_count': 25, 'total_token_count': 640, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1201}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 25}], 'thoughts_token_count': 116, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.29911815643310546, 'model_name': 'gemini-2.5-pro'} id='run--72dacdf0-4abb-4c1f-82c4-917f3ff833e0-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python -m pytest sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': 'ee2f860d-2683-403e-81e0-0d7fda981b74', 'type': 'tool_call'}] usage_metadata={'input_tokens': 499, 'output_tokens': 25, 'total_tokens': 640, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 116}}
2025-10-06 07:19:55,712 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pytest sympy/solvers/tests/test_solveset_transcendental.py
2025-10-06 07:19:55,813 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 07:19:55,813 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
python -m pytest sympy/solvers/t
tests/test_solveset_transcendental.py

/opt/miniconda3/envs/testbed/bin/python: No module named pytest

2025-10-06 07:19:57,772 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "pip install pytest"}'}, '__gemini_function_call_thought_signatures__': {'68aefbaa-d2cf-4e2b-80f3-b3b683c0646a': 'CqMFAR/MhbZ3sB4allaP9ByS5pklxvSzgQ2mdsrklQ1QVP1ADNU1hsCoTUHa29NuKtlvSORKD+RaqfSnAMz8ba/sBmhIkvX5+Sd9ZhKuRasWYDPAStE9JTHcdEaDSfxOLRubcy7ID9LO2oy+n9TFtTXOk7Pg3tXfvViIMWdQyT+IRN669u9+y/qw+C2nRsJobYnYRCmL4Vdmcwm5wUjJnubD87kxg5WBZMkNGBXA/FddfKkQ/qU3HiiHEwA/EdViEt8ZY2nEc8FM2JVDNgzwsRKwd6QAFzp/rI1C+0Dsm+estzKUzuQc/5oDVbhpVz15f4+R0LGYGRUTJI6tFiLHbG9iX06XdNOmJgsi13YCFd6ytuHJXuZZ5ZMeccXuGOZhLhZNlgswqg7LkLNXeGSMecdwwxK3B42FPWMNvsxGP4sa3GktbEKzipt50E/BWxxrNYVSw4mz6WlAuELj+WkhUymGvradTiGbJ+jdke2fP/jfGdNvendwukkuZ1o4iodbxe/l4kmchu8IypFPjFQrEwgTEgBKm8DPv5wtBiQTNzBKAyM3gU+FGwi3zjIVQfVwwgwZALdKMqHQ6Z9DEfglIfXtHdDiucwNLZmyPlSMzlz6ZGGq5SCbhoVh30blY42Ci7xSrQScQ+kEJEJfEy8n73re7xrY8l7pQFxdXl2xdLQbg/Jsb7SFnz0kVs3/fao+LfQp9isc1lrjaDO2KbQHO6D131oy2wYHdUluE71ye4Uhd5ceTRRYcVKAOKHi8eRqAooQ+Onv8N0M60RUuSpTz4C7TmZPMN92S4gzAYjQ2vXAgYi0Mu89h6E7R0bzDnl4XW7vKAywKyAslRxkqJUobJMrcvdQjY8K/So+Cz3trlNyrT+3pHWkguOUwjIMmn0UbS0tjQcE'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 574, 'candidates_token_count': 7, 'total_token_count': 760, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1390}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 7}], 'thoughts_token_count': 179, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.1800681522914342, 'model_name': 'gemini-2.5-pro'} id='run--4fab1565-b5c8-46b1-9812-b76483ea61f6-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'pip install pytest'}, 'id': '68aefbaa-d2cf-4e2b-80f3-b3b683c0646a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 574, 'output_tokens': 7, 'total_tokens': 760, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 179}}
2025-10-06 07:19:57,773 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: pip install pytest
2025-10-06 07:19:59,067 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:19:59,067 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Collecting pytest
  Downloading pytest-8.4.2-py3-none-any.whl.metadata (7.7 kB)
Collecting exceptiongroup>=1 (from pytest)
  Downloading exceptiongroup-1.3.0-py3-none-any.whl.metadata (6.7 kB)
Collecting iniconfig>=1 (from pytest)
  Downloading iniconfig-2.1.0-py3-none-any.whl.metadata (2.7 kB)
Collecting packaging>=20 (from pytest)
  Downloading packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
Collecting pluggy<2,>=1.5 (from pytest)
  Downloading pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
Collecting pygments>=2.7.2 (from pytest)
  Downloading pygments-2.19.2-py3-none-any.whl.metadata (2.5 kB)
Collecting tomli>=1 (from pytest)
  Downloading tomli-2.2.1-py3-none-any.whl.metadata (10 kB)
Collecting typing-extensions>=4.6.0 (from exceptiongroup>=1->pytest)
  Downloading typing_extensions-4.15.0-py3-none-any.whl.metadata (3.3 kB)
Downloading pytest-8.4.2-py3-none-any.whl (365 kB)
Downloading exceptiongroup-1.3.0-py3-none-any.whl (16 kB)
Downloading iniconfig-2.1.0-py3-none-any.whl (6.0 kB)
Downloading packaging-25.0-py3-none-any.whl (66 kB)
Downloading pluggy-1.6.0-py3-none-any.whl (20 kB)
Downloading pygments-2.19.2-py3-none-any.whl (1.2 MB)
[?25l   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[0m [32m0.0/1.2 MB[0m [31m?[0m eta [36m-:--:--[0m
[2K   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[0m [32m1.2/1.2 MB[0m [31m81.2 MB/s[0m eta [36m0:00:00[0m
[?25hDownloading tomli-2.2.1-py3-none-any.whl (14 kB)
Downloading typing_extensions-4.15.0-py3-none-any.whl (44 kB)
Installing collected packages: typing-extensions, tomli, pygments, pluggy, packaging, iniconfig, exceptiongroup, pytest
Successfully installed exceptiongroup-1.3.0 iniconfig-2.1.0 packaging-25.0 pluggy-1.6.0 pygments-2.19.2 pytest-8.4.2 tomli-2.2.1 typing-extensions-4.15.0
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.[0m[33m

2025-10-06 07:20:00,312 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python -m pytest sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'903daea3-0976-4cb1-84e7-e688a0fd2a02': 'CuIBAR/MhbaRVElQlBuqCr+NHEV9UEj49a+iuHE1nypnOmXSokxKQntH+qoIK/ZmreJGrKMFuTgoHeOYpxAw3PUcoZ+Ixkf9P9TOD4rANGE/Qc5mrjwAlq9DB3BdSp+hcaFOnLaPHZkb/QEFvCmSkiP6qPV3w08V7qSxrypaq2iJN2OApg4q/CU8oKy9AwG8CT9yuvC/vDAUnaVe+D6ztJQidQR5Yn5z7ijCoCeL7aXHb1q0yMtWIoAVYgUvl0RrxyzijxCF4VQRHoqGF3dIFQQe9X7ivx/QD9DDziNVxlFmAchPuQ=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1447, 'candidates_token_count': 25, 'total_token_count': 1527, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2440}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 25}], 'thoughts_token_count': 55, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.13096311569213867, 'model_name': 'gemini-2.5-pro'} id='run--03ba3acb-1cd0-4dd0-ab62-354e77ac2e57-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python -m pytest sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': '903daea3-0976-4cb1-84e7-e688a0fd2a02', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1447, 'output_tokens': 25, 'total_tokens': 1527, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 55}}
2025-10-06 07:20:00,314 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pytest sympy/solvers/tests/test_solveset_transcendental.py
2025-10-06 07:20:01,530 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 07:20:01,530 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
python -m pytest sympy/solvers/t
tests/test_solveset_transcendental.py

[1m============================= test session starts ==============================[0m
platform linux -- Python 3.9.20, pytest-8.4.2, pluggy-1.6.0
architecture: 64-bit
cache:        yes
ground types: python 

rootdir: /testbed
configfile: pytest.ini
[1mcollecting ... [0m[1m
collected 1 item                                                               [0m

sympy/solvers/tests/test_solveset_transcendental.py [31mF[0m[31m                    [100%][0m

=================================== FAILURES ===================================
[31m[1m______________ test_solveset_transcendental_returns_conditionset _______________[0m

    [0m[94mdef[39;49;00m[90m [39;49;00m[92mtest_solveset_transcendental_returns_conditionset[39;49;00m():[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    Tests that solveset returns a ConditionSet for a transcendental equation[39;49;00m
    [33m    it cannot solve, rather than raising NotImplementedError.[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        eq = Eq(n*cos(n) - [94m3[39;49;00m*sin(n), [94m0[39;49;00m)[90m[39;49;00m
        [90m# When the symbol is real, solveset defaults to the Reals domain.[39;49;00m[90m[39;49;00m
        [90m# The original bug report uses eq.as_set(), which is equivalent to this.[39;49;00m[90m[39;49;00m
>       [94massert[39;49;00m solveset(eq, n) == ConditionSet(n, eq, S.Reals)[90m[39;49;00m
[1m[31mE       assert ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) == ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)[0m
[1m[31mE        +  where ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) = solveset(Eq(n*cos(n) - 3*sin(n), 0), n)[0m
[1m[31mE        +  and   ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals) = ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)[0m
[1m[31mE        +    where Reals = S.Reals[0m

[1m[31msympy/solvers/tests/test_solveset_transcendental.py[0m:20: AssertionError
[33m=============================== warnings summary ===============================[0m
../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474
  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: doctestplus
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[31m[1m                                DO *NOT* COMMIT!                                [0m
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m sympy/solvers/tests/test_solveset_transcendental.py::[1mtest_solveset_transcendental_returns_conditionset[0m - assert ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) == ConditionS...
[31m========================= [31m[1m1 failed[0m, [33m1 warning[0m[31m in 0.16s[0m[31m =========================[0m

2025-10-06 07:20:08,352 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='`pytest` is not installed. Let\'s install it.\nNow that `pytest` is installed, let\'s run the test.\nThe test failed as expected. Here is the output:\npython -m pytest sympy/solvers/tests/test_solveset_transcendental.py\n============================= test session starts ==============================\nplatform linux -- Python 3.9.20, pytest-8.4.2, pluggy-1.6.0\nrootdir: /testbed\ncollected 1 item\n\nsympy/solvers/tests/test_solveset_transcendental.py F                    [100%]\n\n=================================== FAILURES ===================================\n_______ test_solveset_transcendental_returns_conditionset ________\ndef test_solveset_transcendental_returns_conditionset():\n    """\n    Tests that solveset returns a ConditionSet for a transcendental equation\n    it cannot solve, rather than raising NotImplementedError.\n    """\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\n    # When the symbol is real, solveset defaults to the Reals domain.\n    # The original bug report uses eq.as_set(), which is equivalent to this.\n>   assert solveset(eq, n) == ConditionSet(n, eq, S.Reals)\nE   assert ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) == ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)\nE    +  where ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) = solveset(Eq(n*cos(n) - 3*sin(n), 0), n)\nE    +  and   ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals) = ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Reals)\nE    +    where Reals = S.Reals\n\nsympy/solvers/tests/test_solveset_transcendental.py:20: AssertionError\n=========================== short test summary info ============================\nFAILED sympy/solvers/tests/test_solveset_transcendental.py::test_solveset_transcendental_returns_conditionset - assert ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) == ConditionS...\n============================== 1 failed in 0.16s ===============================' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2768, 'candidates_token_count': 603, 'total_token_count': 3662, 'cached_content_token_count': 1626, 'prompt_tokens_details': [{'modality': 1, 'token_count': 3814}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1626}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 603}], 'thoughts_token_count': 291}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07695409037778231, 'model_name': 'gemini-2.5-pro'} id='run--b51f2272-fe01-4d66-a79d-f4aeb4768f76-0' usage_metadata={'input_tokens': 2768, 'output_tokens': 603, 'total_tokens': 3662, 'input_token_details': {'cache_read': 1626}, 'output_token_details': {'reasoning': 291}}
2025-10-06 07:20:17,160 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=False reproduced_bug_failure_log='FAILED sympy/solvers/tests/test_solveset_transcendental.py::test_solveset_transcendental_returns_conditionset - assert ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) == ConditionS...\n\nTest fails with an AssertionError because solveset returns a ConditionSet with the domain `Complexes` instead of the expected `Reals`. However, the issue describes that solveset should raise a `NotImplementedError`. The test does not reproduce the specific bug described in the issue, as it does not fail with a `NotImplementedError`.' reproduced_bug_commands=['python -m pytest sympy/solvers/tests/test_solveset_transcendental.py']
2025-10-06 07:20:17,161 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_file_messages in state.
2025-10-06 07:20:17,161 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_execute_messages in state.
2025-10-06 07:20:17,161 - thread-139660780025408.app.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-10-06 07:20:17,174 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Your previous test case failed to reproduce the bug. Here is the failure log:\nFAILED sympy/solvers/tests/test_solveset_transcendental.py::test_solveset_transcendental_returns_conditionset - assert ConditionSet(n, Eq(n*cos(n) - 3*sin(n), 0), Complexes) == ConditionS...\n\nTest fails with an AssertionError because solveset returns a ConditionSet with the domain `Complexes` instead of the expected `Reals`. However, the issue describes that solveset should raise a `NotImplementedError`. The test does not reproduce the specific bug described in the issue, as it does not fail with a `NotImplementedError`.\n\nNow think about what went wrong and generate the complete self-contained test case that reproduces the bug with the same error/exception again.\n' additional_kwargs={} response_metadata={}
2025-10-06 07:22:16,971 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='I apologize for the previous incorrect test case. The failure log indicated that the `NotImplementedError` was not being raised, which contradicted the bug report. This likely means the bug\'s behavior has changed due to subsequent patches, like the one that introduced a `try...except` block to catch this error.\n\nHowever, to strictly adhere to your feedback and reproduce the *original* bug as described, the test must be constructed in a way that would fail with a `NotImplementedError` on a version of the code where the bug exists. The most likely scenario is that the error is raised when attempting to solve over the real domain, and the public `solveset` function fails to catch it.\n\nThis test will fail with an unhandled `NotImplementedError` on a buggy version of the code, and it will pass once `solveset` is fixed to correctly return a `ConditionSet`.\n\n```python\nfrom sympy.core.relational import Eq\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import Symbol\nfrom sympy.functions.elementary.trigonometric import cos, sin\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.solvers.solveset import solveset\n\n\ndef test_solveset_transcendental_real_domain():\n    """\n    This test case is for a bug where solveset raises NotImplementedError\n    for a transcendental equation instead of returning a ConditionSet.\n    """\n    n = Symbol(\'n\')\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\n\n    # The bug report indicates a NotImplementedError is raised. This typically\n    # happens when no specific solver can handle the equation. The desired\n    # behavior is to fall back to a ConditionSet.\n    # The report also suggests the desired output is over Reals.\n    # This test asserts the correct, fixed behavior. On a buggy version,\n    # this will fail with an unhandled NotImplementedError.\n    assert solveset(eq, n, S.Reals) == ConditionSet(n, eq, S.Reals)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 50677, 'candidates_token_count': 451, 'total_token_count': 64256, 'cached_content_token_count': 48701, 'prompt_tokens_details': [{'modality': 1, 'token_count': 50677}], 'cache_tokens_details': [{'modality': 1, 'token_count': 48701}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 451}], 'thoughts_token_count': 13128}, 'finish_reason': 'STOP', 'avg_logprobs': -5.265578986800167, 'model_name': 'gemini-2.5-pro'} id='run--5957b044-a7bf-44bf-9dd8-1c245c6908ff-0' usage_metadata={'input_tokens': 50677, 'output_tokens': 451, 'total_tokens': 64256, 'input_token_details': {'cache_read': 48701}, 'output_token_details': {'reasoning': 13128}}
2025-10-06 07:22:32,292 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "from sympy.core.relational import Eq\\nfrom sympy.core.singleton import S\\nfrom sympy.core.symbol import Symbol\\nfrom sympy.functions.elementary.trigonometric import cos, sin\\nfrom sympy.sets.conditionset import ConditionSet\\nfrom sympy.solvers.solveset import solveset\\n\\n\\ndef test_solveset_transcendental_real_domain():\\n    \\"\\"\\"\\n    This test case is for a bug where solveset raises NotImplementedError\\n    for a transcendental equation instead of returning a ConditionSet.\\n    \\"\\"\\"\\n    n = Symbol(\'n\')\\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\\n\\n    # The bug report indicates a NotImplementedError is raised. This typically\\n    # happens when no specific solver can handle the equation. The desired\\n    # behavior is to fall back to a ConditionSet.\\n    # The report also suggests the desired output is over Reals.\\n    # This test asserts the correct, fixed behavior. On a buggy version,\\n    # this will fail with an unhandled NotImplementedError.\\n    assert solveset(eq, n, S.Reals) == ConditionSet(n, eq, S.Reals)\\n", "relative_path": "sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'f8ab2fbf-cb3f-4485-8dfe-afd4a956af9a': 'CuInAR/Mhbb33fvAe9QWPWrvY3nSpFbb+dvVFZLVLi/vRNZQ2FBkTJdt6CZWWzpNWMTMIAKh3ezV1LJbBmRvcTjOd3Rk/aDuiibjpaVEQOx/JOrUbyEL5LYdVd3TTt5ML+g6S+xRifS095O8BUwKaAj0is8/PkXcZ15abBYVTTvwWqMWYXtG5uUXj1BZWB4Qqfv+ADu7IPpVWmbSkDWM0He9IsBrtoFJt8TcP5FKdwz/d72jUSFuYMepWvUdZQduwpHg9ty9IQPm8GICwM/0mskFE2p09TFz0M9d2uKI7iTZ5Lc3OwDRvlge+0hVFeWroNvGXZ6eIESvP5riTVBJlxi4viZ2wWVWtMYYEzlBlCQwT17P7VAw7XrpO/b2zbk2eoqgFnpoyRyBOAfErCFAVFVLjHpwmJN5/hv6vw11YfopL+wL4BUUBHjYg/hSQ4TNTieoyVMyz5E/ZktKQg8EZTY2LhFNZ/57rkhKPg5x0FMePKSNshObsVg3QBOnMEkjKgBDvMl/kudxfx23sl3Ms/e2SEPWkJceoZ/O7tMlkRGNiIAVAwAjN580LXj3HuWIGu3JlZ17M7Vlf8uIbjWI5dq+yybRURbXmwZHQG4VocznpRQSBdYBTkjLifOA53nw+NTslvaXaPGuXJTs/d/3v5Fa1cn8bDogAm1qSnlj46NgkApUxsIfkr4oJ/Lp90AKpRzg7+Mm7UYY6a/jil/Mq8NQrXtjAWURy1AL/czUoyR3JyMsRqzPnefI38iRqHcRDShUv/UgOcFLTgHnM66tzL0evyX5pWuciFcAm7lEpE2GrGj9nI2d+RqK2i+iAvhnbyVWtioV5rOHSOhn9GFqQ2gpDMoLG5CGEzPBtOoA55ap3+m9EDnff+yHA/w9i/BP2sQyQRoyt+ZyD1x9JVG0Lp/J3GHJAyAsDbDbEF4QMFqDDmL7wK6D6T2VY70uYbtqv9UiDQu7nATnCPWExSqqAsJruTd5d4rpGMIxTCcvdBi20LSpqXcXeNcCsjG44ivPUlgLSzHkYuTZkpLw9cbXp0vBnNT6Kg19ZTSXNPQcdymlyVGVRt6fzxHSX7+aMevj567A2MEfN20cmUgS9FiSDN5v0jz94WTc9x95kjbXFl5wF90rmuu0K5+QThEiZneg7BLvF5A0iy0KP43QTBBQV0cxVj1G20bZP1YC343zqUUzVheUVHWd+lmfu5CAGTa9gzpYeBuUXT84R1JvWcKWlQ6sxF3/5jIjeriac5OjWaCa3q7EM3jKL5R3nT4OMHxi+xD0+okASMmw1UWa2i3RPWfnAL2/NsSy/eC0aMdMlg46QW6kNK6DyeCeXsYf91cjuCVJjm1pP+G3mjbZAoNMgTbBsFkJRjBOSVYHs3Tn/6d7bmYI1fuEambfsJKdYkvF33iVcWts6ee10EwxHJiutg3TplpB+EDg9AEghgS/FPS9UKkgQnRPzMie7+iCi5D8/DWgYlsjaV4VGbZncrjk3DFAL1rOe1IvL/Vg9YkVyygZ/lHb765o3/KsOjuBa33AoY9QIr8Raf/uKFGRoq+YA095mypEu/qLFSUlLsuQj0rJE1QRAMib3L2FskgC0CzmFZwqjOGPK+4SvjMH6q0R3KRwCpAMyz6iQ4P0vaIe2JMSvyC6qg8uvcZO4Y1Z4aPEgUKUgxVJHO42oXxKIk86PZhSa0vkIzr9zxEo9jESHws/eGzbslPXLmwmu6ZZrPz3aSXvhaL+JP35EhwsWYk+fcn+rQ9UjBSAqFmGSA+4cuNyxKFypJ//Go0StOGdbsDnMV6cJbezDOeZdZPam7ekfwqubLP9E3gkvgbU37KYQvCOGNeQJmsSXQvNy179SQgLizs6XF1s4gpi3QuEPi7L6w7/xyat+MURByvpxO8v4rn5LQSIL5mnupBIXPYnEyV2GqHz4sJyojK5LUNO1i/WQPy3JOIgfJ+EPMlN5UkafBLUoqcqM3QWFUEXXxVcbPvXS1c+HZWjJ+TIPQ/9D3EJ3VPAlU576x2NqWBx0nNYoA6ojws0SV2Io/zfzptZFQWupiM/3Qt0qscMBA1WAions8bCXq7IIn1jXaoiNN/Pz3LkfEgiqWvPoP3SKevY5j9hzESFNbuz9AbrNX72M6bVuiXlu1/6E1Ad2NazEJUOLLae92G/KeBo0HYMm0ofc5G/u/Mh4LOmTcq6xFVYfGnLYIOrYvuwmFioLUowhiLqlXObGAXbr5SpCJWha3+S7UNI29TSERS6i7QiG02Q8zDLV2LIkHuh1Q2EpG4KJIbT3xXg63sMbHXXtg74/JYYSm1mDbr0wHTZPGQH5o19YzczwTSRrPlr7w+68DvlgIyQ102fvRLwBB1RDCfm6yQi0dOzPgvQUXZUNP3tvcz1iIc3ejciiAKwPSEPNebQfzTrxYjp4mgGn6qrTRbUwPj+BU5B+B0YhjWb064StppyqDYM2qIFcFmQXsCqfvpYPy5QyPhNTibSbxoX6e2xhred8C+USTrVaYEi5hrg4dJgYvXF8pUuR9FXRRCsrFMf8YsRdlG58mDVmipiPUCDuhuDmO8cJ7AIrTDbiR5cM61Bg0nG6Hu5nAB62bMqFqd4JsjlhbTJG1CKLGum1dp1CCfBuxu9jQe9Nr1HUhjg2XSog29sRN8fUwu8hZhYFx73Qfw0l0OqGJGatSEQ+pnYbS+0jEiJDIpSkdobb/RzdMgxWO77IrMnQ1yvJ5BoJEGYbjcJWxPo8DgSvedh7zafO74zK+xtwHAJEX19nnIuYhzX9/6XwQ1yxR1rTnn+2L2wgnfGS5iXdmlx8FEFYuXAyIvsQMx0sKyqZJt2jWZmILHd1W6+rJyvtu4Sdb4ed3Xv0cT7+6LvQftz/wk7+gspe0EBThAF3Mt2PX9pZSJ1mXKKaIxcNM+ni27x1dgg4hFW/1Tp8HIxCe49SQxGGwPZeMPVBtyzB5Lyy+WX0eZQ3ffu0W+3mUMUBQF3pxPbUFa8hKIub5SIW8bcI72rMmDNUl7DUrDaC6HGKz+/wMsJY348FQDHIQUeMMrzm0rKvV/sqLOwVr/AAV5ieVW2NfMpwYZHOOjYAA8GmSrWBMZP6d/olQ2jMU+VnEf9lKYKF9BikHnij79LYGlWKFciGNrd9bJX3LNGfi2Y3xJSL0UqVysR5KEg2C/EN+R9Lnsy1bAMEGU4W1BCvXh+Gu0qZ3YCYPorrDZwfZlutZvDSaZEb2U9Y64VvJogAaaybpOCWVovQANBa/xviHO8d/Azh5F7BmxDABauV+VJvLASBi4e+D1G10GlrcPxSLWPAygavzhGXeVbTcrAKv9h2RNhXTQe3qtk9X6wk2Nhjjwxi3vBrVbtGoQMrp59pnIHu4tBxvhxNeMiaNSApMfdSTyuFiA5fci2J9TGxKkddQJtF8+Q3bNd5iprnANPSSxD4i5sIvpqn4Q4lTa6UyPSqZArnokZti7D9ZasclL2xhQzhINGr8sD0evTTJl3zD2pJ2EBXEkBwiDcm1fpCf2ueK3ENpSXrQ1z4J8JLFAzmD9KsOdRXbFF2C8GLy3CWgcYfaXDYWC/KBu0NG1K4EXVzoREfFw4tdXbLNRcAaCV15NTZcgh66NCVKiznXz8FwUBn7gi2POCQ9EnP46qAaR8Ba32LSq8kYPHTFo6gPjDLSSMOL9+m2GaQKmSEoY/H2JNQe+08Wrtmtks/MAzAcN04cO8P0Bdu7eWHNlJwckXqODZ0Va7zzph6epT46cyFjZF2vjGBFDHCJTZDva8qjEz9+n+hrSPIn6+SWmHWcTRJjDxbXzm9Qm/uqGQRDi+ISUjukfqX7glhogRadzEy/9SWToR0+XSfDzyx6eDxBFXw77pDAHVlLxZMPjWl9qW/wUzkKE7TchJ62uRJaBYDzY3g95MeE+bSwoT/PEZw0ZhqpnNt7KFcWjrcnK+tOmnR249JSaILPaYcwX/ar80M1ZdPmDptTz70pOYLLJLGIrP8cT69rB7yRRxxBjZjbj216LPb+4Qli+54MthIcPRCLTHNkD7H6PEfvrANNHV8ekaTfITCAAz2SZDThRY281xOuFrclxeGWBZ+2w29WHc9xkGngD4a6IiwG62dPVTMghXgJg8QncM5MqShiopv0GLjPjKQ7IigH3Dfg7aSr9pgX7iD0OGZgsB4tZeutj7UUMR1Hd8RkpGbMc5XeOQMU0OOrgB7rhS1FJ1wupKptNC72H7fCQT/q2mDw1rbVy46UdQuZ8PG5amXWW7ZTZ4Wi8h11IEt7vvnkfSLnTqa7ux5T6wS7CwjTsRvs9ooOy2fkYQUHgF3++Ax+rpAqjdMJ5wjRMEgcp00UGIrqDKWXFO3TJOCqz22iDpZckdPn1/7E6AXVQSPOhjf/THbJdiOdfb95FE/iCP0jd2e52gvephtH3q/v08PDbQXmKe5awkJbtdiVlAxx1mSDh+klM8oiX3Rr4aMzZPlGgONA8j7l4J2UWP+BpdFt8wNIGlLSrpnCEiCQqLykEtteNtFrAbsX/3uBKwsGJa6T9rKkNi2Zx7FZFUvN3AZvEMa8ZSoSQR1vMsGUGaYwgPBLjhhQO/OYPF1STiDMDaUYsydWtHJkjWN+lTUjnOst0n0SI3dnKy6bWlnBOth7fqZVA3+VM/uxWSxy+kEd1J/BNvBfcB/+ncQIcZvjeaTXU9btg2mLMnXPVQT/uUqr/Ov3TR0YMiu4YPDBr1m3dFgJyxGiyXxTZcNYD/KXJFzEdWfLa5OFDEB66inGvJLSreRNbpqrgfBq6si6XUiRHJMLHzfXSfa1AOoKyHTFVV7ogVjZfbRS0dVPIjvD51diurp+1oiPuq3V2gCIDEIOSY3AsLaq6jTriWm67pYJMxpdcQAMvXBCRaP9nATtgSbI3Ry4acPMKQ/3pLDIZtBKh9ASjgMBQ+skFNjx1MGdU9XnO6E9QhSQaq1PSvqtWEqR35/qdhxy8XM6z3HRmmV/xUaqHPFHBn4+Gpatrm17wano0ognViVvDi7U63GTPzTRQ027tzgMkS9famDJ6MYLeEzhLhbJtnUkdzHqYEMzHC10h7iVS2HS/EuFmuaPMezaisqaRwlWaKYT4wwqFZPT+mg2sdud9ifu9dB3LG0vUdej6YqQFSNpvzUDsWAM/MLRI6AQlebhDCRr7RV4ic08/dyd7YAt+bw9Cf1z+kXWWxWtrEMiFIVRyc7Apwy4cvU0dTEWlSKIJqse3nRhABnK/de48OzZ6zZ8y28qZt/mDo/g5brHTE/EbkQskCcf4+uo6tea1XnIC9/J1a8w7GL+jeTw7BGJt+ir8Ckmj8PaNyfppHm4n4nDwhXKuyi6Budzb2dQgyAOUKjzjTL4QKSaLRT6TyzPcpG4oQ4In2cctBedOElepepQ1cR1NuiutLNtQTCYjAaQ44ursULh5SONeqL8/2QEJoMKAhCqW6fbVXCRrer93S8ui4/ApqDTN5yyLsYRfZBR7rQRxsTHBuvKYWCSVFq1pmtNA7Rgk4vi6Kp6IuWWTDKKAAcYuRQYOjw3oF7Vb73Oc+YD6Jz1tBY6351CllgSdq2Y08I6WOvo1rmNdmB8k7EIWp7EkOyZRxAF9F0gkRY9REB7lXEjhGx4oU71Kik0rboNtzoOZcEqlvLFAJ9ey4TJmCUNgeVWjbMKXNJZBHq8SWlBt43cSB/PINVZSX4nETgT0xkF1hQ4bM3jHE1K8Qrs/lBpMqKHLk4z0u65Y2YWewUViE/N+POa7CqyUT4rTQjuq7NTrOF/uOWSO3N9CP5MiMJIrpMf1e1cUv69cj48UjyrnaP5k6k+2dcYrQNN26OlNX3oScEfZUFs+dEffxQGVpNZzmlkuYTfI90s2zM+TFYBc8Xt8NtwNcwwaVP/dmIp7XIw+4Kzn7iaodN09/ZfU64m6zEcVN4GNZsJjEclFJnxWV9mZJYYMyaR8wadgiEzJ05VgE31Ax/fNBFjFdSY9RT8OY4G14Ql0kWbKxhoxVtJ8P5aWLtsoB2W1+pwphu40aID9acYaGUy1oo71ZfvdOmJ1fa1DdM+2+WfjNEVLORGSQ5I9QNLcysFP1aPOW/cjkKIruQm/L4aXrlDq0V9yTGrKzfD6AzXwfKBWj4crJUWekinfxaJOR4fYJ6BdA+FSCMBw+9+VnEDI8L5RDgGWeQBu7JpzafSlracDMA9MmfazFE0j8rjd/1dwiGuiki7ctCqi3OmunlzbvozlK1GTtyIg7ZadUecK/936KXkZmlPc1tYfa38Rt5wW6CzecpBMvupHcQLBPhRXZY9yEkR7giRRZfe34eNFaYnU1iFDPHJcgRNqCf2N8afu9BLyWr8mC4a/FlM1vOe2sN+2PmtTtNG8m3jtNOR4aYv/gs5gs/4JN2hcoCIiv5wA8gMmzNxX0GC+TmM1p3F3XzjEgLLCoKeSKrLsTu4DLyrhLrNWEBOU9tgF2zdj3DKMcysBg/1HrVha25mnnRjJUqGvQMoPdagJnwsnAYMc5pT4Ax+enrN8sr7tEn9Eaiha+wC+TY/v38fYeSuls/3Wkit1mUduZBWNx5PnLiKJZfLuFtbw+gsT87itFJoNWl07EuLFnffEtmMAhGcIOa0VGKmEyywees9vKj7JGMx25lay1/rOpnHomtqmacObCNbhUhl9VkMiZCw0AyxdKjFd0805VSe2BCzBnn703e++jEtTNyMt7iZZLWVi09NmVL4eAHVINlBTysM8vVHv7TbONUbV7cPEn9fZVCFzRL5LTMy0FEwJeNZNMe5XtdoD93N0qM1+fSxg/00Q9QyUBW39EsARJg+A0ahQ/stk='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18476, 'candidates_token_count': 288, 'total_token_count': 20158, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18476}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 288}], 'thoughts_token_count': 1394, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3189837667677138, 'model_name': 'gemini-2.5-pro'} id='run--23858628-cf8a-449a-9216-59b2801f38a5-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'from sympy.core.relational import Eq\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import Symbol\nfrom sympy.functions.elementary.trigonometric import cos, sin\nfrom sympy.sets.conditionset import ConditionSet\nfrom sympy.solvers.solveset import solveset\n\n\ndef test_solveset_transcendental_real_domain():\n    """\n    This test case is for a bug where solveset raises NotImplementedError\n    for a transcendental equation instead of returning a ConditionSet.\n    """\n    n = Symbol(\'n\')\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\n\n    # The bug report indicates a NotImplementedError is raised. This typically\n    # happens when no specific solver can handle the equation. The desired\n    # behavior is to fall back to a ConditionSet.\n    # The report also suggests the desired output is over Reals.\n    # This test asserts the correct, fixed behavior. On a buggy version,\n    # this will fail with an unhandled NotImplementedError.\n    assert solveset(eq, n, S.Reals) == ConditionSet(n, eq, S.Reals)\n', 'relative_path': 'sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': 'f8ab2fbf-cb3f-4485-8dfe-afd4a956af9a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18476, 'output_tokens': 288, 'total_tokens': 20158, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1394}}
2025-10-06 07:22:33,577 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='sympy/solvers/tests/test_solveset_transcendental.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18791, 'candidates_token_count': 18, 'total_token_count': 18809, 'cached_content_token_count': 17901, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20183}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17901}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 18}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0008358461264934805, 'model_name': 'gemini-2.5-pro'} id='run--b740736b-c9e2-43ed-943a-4ba373207a82-0' usage_metadata={'input_tokens': 18791, 'output_tokens': 18, 'total_tokens': 18809, 'input_token_details': {'cache_read': 17901}}
2025-10-06 07:22:33,588 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/sympy/solvers/tests/test_solveset_transcendental.py b/sympy/solvers/tests/test_solveset_transcendental.py
new file mode 100644
index 0000000000..a2c5380bfd
--- /dev/null
+++ b/sympy/solvers/tests/test_solveset_transcendental.py
@@ -0,0 +1,23 @@
+from sympy.core.relational import Eq
+from sympy.core.singleton import S
+from sympy.core.symbol import Symbol
+from sympy.functions.elementary.trigonometric import cos, sin
+from sympy.sets.conditionset import ConditionSet
+from sympy.solvers.solveset import solveset
+
+
+def test_solveset_transcendental_real_domain():
+    """
+    This test case is for a bug where solveset raises NotImplementedError
+    for a transcendental equation instead of returning a ConditionSet.
+    """
+    n = Symbol('n')
+    eq = Eq(n*cos(n) - 3*sin(n), 0)
+
+    # The bug report indicates a NotImplementedError is raised. This typically
+    # happens when no specific solver can handle the equation. The desired
+    # behavior is to fall back to a ConditionSet.
+    # The report also suggests the desired output is over Reals.
+    # This test asserts the correct, fixed behavior. On a buggy version,
+    # this will fail with an unhandled NotImplementedError.
+    assert solveset(eq, n, S.Reals) == ConditionSet(n, eq, S.Reals)

2025-10-06 07:22:33,589 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 07:22:33,598 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 07:22:33,598 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 07:22:33,835 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:22:33,835 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at b4f1aa3540 Merge pull request #18204 from mcpl-sympy/18106_ask

2025-10-06 07:22:33,835 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 07:22:33,935 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:22:33,936 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Removing sympy/solvers/tests/test_solveset_transcendental.py

2025-10-06 07:22:33,936 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 07:22:33,936 - thread-139660780025408.app.docker.base_container - INFO - Creating directory sympy/solvers/tests in the container
2025-10-06 07:22:33,936 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p sympy/solvers/tests
2025-10-06 07:22:34,036 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:22:34,036 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:22:34,037 - thread-139660780025408.app.docker.base_container - INFO - Updating sympy/solvers/tests/test_solveset_transcendental.py in the container
2025-10-06 07:22:34,039 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 07:22:37,209 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "pip install -e ."}'}, '__gemini_function_call_thought_signatures__': {'940b4794-ddd3-4ea5-a3ee-f7ff35f2f740': 'CsYGAR/MhbZIkuTIOf/j1M8vQPCHOAQ+kjIIKSTwT//lgnbEmASImvd/boWXXF9bhKFK3xXaqqZXAEQwRZwFY+yWFKVh0BAHV9cWR09aavFaepVpr0yoCLU32Zev1EjGSyF7WyVJQrCM3G6vPCCVRWfDagGvrtGaz5CpPGCFAmWDVfj9vZG1b+MxPDvmnGxRnFPkGe1+QoL0x6biyw11bI1YBQIHUDXbBiK7NcpGLNwU87+0e9Mz/4/LG7kfInAl4q7L2gEHHe71jmiqf9h6jxzVRZVUQtZRCkLJA5Qp8+QyVUudATbsNLdeE+eXS4TTtrFqrUecIhJ/RheU+L53vb1DwFnjv4y+Y0N7Rd3Ev2HyX8ilSb7XOKt9bjK56NKumOUlmA06LcXxunnrW4RcoAkf0/Pf0t95Kg4LaF+A8k9KKJWNHmKk9IuPmkRoTBLi6t8S2JS9RsrImleZ0oJSMa9y4hdieVoNsBl2cQKn8OYNgwtOeXCGWNpRyln5kyeLOxU1sjFiI5ok5WbmeOH08iUeDXsdC1OeNFUuDLT+dXZempkmB3gWwGSgsNHYuRC/8xSmvfWHdbGObIJIVNJy+Gt1ytZMP+avjdn9a9FgwvKkt0LVyxKfdmC0rKmiacNFTygMKCxg55Gxpv03u7m3tFeK2vviTsRFUbgIqBDrZGr0s898TLuI3q5ddYQ5yOdQ2cm8IsEHoLqE9V3OXA9leOQ3B46KHh+niAiyLTJ69urNA/0y9J1DOax4xc40Muh190hFZWlsuQsySiW7DrVvRzpWM/CAU7CPUwwV2ttyUOc8F7eEiNYlk8bzFAtCE7Cl2cyXr/8osMnHt2ODTZovUxPKEIulBEYpxUDpA4SWWdFKpAcM+ND8k03dPaQEkOCumcrgHeb+3rdsigPG+DTDWrl5WxR01bIaWRi8d5cKfHWfmmbdR3JXuVnlouE7Pxct+zItSxvsaXQyMX6vFxR9gSUjMaCGj0wz0boOywg96qS0V/lTl/Gqvt2MgvLzmBIvNhgMjxcgPQZGJkj1BaxjWX6ixVzu9bzo2miry1qju0AneWo2wQED36hN7x5UNmHhyyBJlQ87PTtvtRaCLnBIYvhlf98mJRHsbA=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 444, 'candidates_token_count': 9, 'total_token_count': 669, 'prompt_tokens_details': [{'modality': 1, 'token_count': 444}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 9}], 'thoughts_token_count': 216, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -3.1641972859700522, 'model_name': 'gemini-2.5-pro'} id='run--7fa6b89e-d6a4-4438-b4f5-599f2075cb08-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'pip install -e .'}, 'id': '940b4794-ddd3-4ea5-a3ee-f7ff35f2f740', 'type': 'tool_call'}] usage_metadata={'input_tokens': 444, 'output_tokens': 9, 'total_tokens': 669, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 216}}
2025-10-06 07:22:37,210 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: pip install -e .
2025-10-06 07:22:37,892 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:22:37,892 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
  Preparing metadata (setup.py) ... [?25l- done
[?25hRequirement already satisfied: mpmath>=0.19 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from sympy==1.6.dev0) (1.3.0)
Installing collected packages: sympy
  Attempting uninstall: sympy
    Found existing installation: sympy 1.6.dev0
    Uninstalling sympy-1.6.dev0:
      Successfully uninstalled sympy-1.6.dev0
[33m  DEPRECATION: Legacy editable install of sympy==1.6.dev0 from file:///testbed (setup.py develop) is deprecated. pip 25.0 will enforce this behaviour change. A possible replacement is to add a pyproject.toml or enable --use-pep517, and use setuptools >= 64. If the resulting installation is not behaving as expected, try using --config-settings editable_mode=compat. Please consult the setuptools documentation for more information. Discussion can be found at https://github.com/pypa/pip/issues/11457[0m[33m
[0m  Running setup.py develop for sympy
Successfully installed sympy
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.[0m[33m

2025-10-06 07:22:38,944 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "pytest sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'1f3e72db-9156-41a7-88ae-e7fd2e3a9155': 'CpQBAR/MhbYFcmpI4Ym6B0pn55qoN/vkW15zG0cncX7C99fp6VnsGJa+zXui7fuDL7Y36LqeqDug1RYcXwFHvKeh/fdWaOdDq81+ws/SpsmcIfoR9k1PueEucypOcOIcpR3cj0Xp5b91D7CACmjOiNjgdqdo6OB/stBIfD9QgeoNOJMT7opvadbESShr1SmhWVM9gyyaog=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 848, 'candidates_token_count': 22, 'total_token_count': 900, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1062}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 22}], 'thoughts_token_count': 30, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10963899439031427, 'model_name': 'gemini-2.5-pro'} id='run--30a73b52-1924-46bd-9a10-40d23903f598-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'pytest sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': '1f3e72db-9156-41a7-88ae-e7fd2e3a9155', 'type': 'tool_call'}] usage_metadata={'input_tokens': 848, 'output_tokens': 22, 'total_tokens': 900, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 30}}
2025-10-06 07:22:38,946 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: pytest sympy/solvers/tests/test_solveset_transcendental.py
2025-10-06 07:22:39,470 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:22:39,470 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
pytest sympy/solvers/tests/test_
_solveset_transcendental.py

[1m============================= test session starts ==============================[0m
platform linux -- Python 3.9.20, pytest-8.4.2, pluggy-1.6.0
architecture: 64-bit
cache:        yes
ground types: python 

rootdir: /testbed
configfile: pytest.ini
[1mcollecting ... [0m[1m
collected 1 item                                                               [0m

sympy/solvers/tests/test_solveset_transcendental.py [32m.[0m[33m                    [100%][0m

[33m=============================== warnings summary ===============================[0m
../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474
  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: doctestplus
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[33m========================= [32m1 passed[0m, [33m[1m1 warning[0m[33m in 0.08s[0m[33m =========================[0m

2025-10-06 07:22:44,992 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='pytest sympy/solvers/tests/test_solveset_transcendental.py\n============================= test session starts ==============================\nplatform linux -- Python 3.9.20, pytest-8.4.2, pluggy-1.6.0\nrootdir: /testbed\nconfigfile: pytest.ini\ncollected 1 item\n\nsympy/solvers/tests/test_solveset_transcendental.py .                      [100%]\n\n=============================== warnings summary ===============================\n../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: doctestplus\n\n    self._warn_or_fail_if_strict(f"Unknown config option: {key}\\n")\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n========================= 1 passed, 1 warning in 0.08s =========================' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1269, 'candidates_token_count': 267, 'total_token_count': 1850, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1511}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 267}], 'thoughts_token_count': 314, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.18860699085707075, 'model_name': 'gemini-2.5-pro'} id='run--723a49b3-0db4-40bc-960b-3b22733bb062-0' usage_metadata={'input_tokens': 1269, 'output_tokens': 267, 'total_tokens': 1850, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 314}}
2025-10-06 07:22:53,239 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=False reproduced_bug_failure_log='PASSED sympy/solvers/tests/test_solveset_transcendental.py::test_solveset_transcendental_real_domain\n\nTest passes but should fail since the bug is not fixed. The test asserts for the fixed behavior (returning a ConditionSet). To reproduce the bug, the test should fail with a `NotImplementedError` as described in the issue.' reproduced_bug_commands=['pytest sympy/solvers/tests/test_solveset_transcendental.py']
2025-10-06 07:22:53,240 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_file_messages in state.
2025-10-06 07:22:53,240 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_execute_messages in state.
2025-10-06 07:22:53,240 - thread-139660780025408.app.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-10-06 07:22:53,251 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Your previous test case failed to reproduce the bug. Here is the failure log:\nPASSED sympy/solvers/tests/test_solveset_transcendental.py::test_solveset_transcendental_real_domain\n\nTest passes but should fail since the bug is not fixed. The test asserts for the fixed behavior (returning a ConditionSet). To reproduce the bug, the test should fail with a `NotImplementedError` as described in the issue.\n\nNow think about what went wrong and generate the complete self-contained test case that reproduces the bug with the same error/exception again.\n' additional_kwargs={} response_metadata={}
2025-10-06 07:24:11,554 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='I understand. My previous attempts failed to reproduce the `NotImplementedError` because the execution environment seems to have a patch that catches this error and returns a `ConditionSet`. However, you\'ve stated the bug is not fixed, and the test should fail with a `NotImplementedError`.\n\nThis means I must create a test that calls the buggy code path directly and would crash with an unhandled `NotImplementedError` in an environment where the bug is present. The standard way to write such a regression test is to assert the *correct* (fixed) behavior. On a buggy version, the test execution will halt with the error before the assertion is ever checked, thus failing as intended. On a fixed version, the error will not be raised, and the assertion will pass.\n\nThe bug report states `Eq(n*cos(n) - 3*sin(n), 0).as_set()` raises the error. The provided file context defines `n` as a real symbol. Therefore, `as_set()` should call `solveset` with the domain `S.Reals`.\n\nThis test is the most direct translation of the bug report and should fail as you described.\n\n```python\nfrom sympy.core.relational import Eq\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import Symbol\nfrom sympy.functions.elementary.trigonometric import cos, sin\nfrom sympy.sets.conditionset import ConditionSet\n\n\ndef test_as_set_on_transcendental_eq_raises_notimplementederror():\n    """\n    This test reproduces a bug where as_set() on a transcendental equation\n    raises NotImplementedError instead of returning a ConditionSet.\n\n    The test asserts the fixed behavior. On a version with the bug, the\n    test will fail with an unhandled NotImplementedError before the\n    assertion is reached.\n    """\n    # From the provided context file, `n` is defined as a real symbol.\n    n = Symbol(\'n\', real=True)\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\n\n    # The original bug report states that eq.as_set() raises NotImplementedError.\n    # eq.as_set() on a single-variable equation calls solveset.\n    # Since n is a real symbol, the domain for solveset should be S.Reals.\n    # The desired behavior is for this call to return a ConditionSet.\n    assert eq.as_set() == ConditionSet(n, eq, S.Reals)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 51252, 'candidates_token_count': 547, 'total_token_count': 59796, 'cached_content_token_count': 48689, 'prompt_tokens_details': [{'modality': 1, 'token_count': 51252}], 'cache_tokens_details': [{'modality': 1, 'token_count': 48689}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 547}], 'thoughts_token_count': 7997}, 'finish_reason': 'STOP', 'avg_logprobs': -2.515234241102034, 'model_name': 'gemini-2.5-pro'} id='run--74fb0444-e3ef-40b8-9575-74efa649c332-0' usage_metadata={'input_tokens': 51252, 'output_tokens': 547, 'total_tokens': 59796, 'input_token_details': {'cache_read': 48689}, 'output_token_details': {'reasoning': 7997}}
2025-10-06 07:24:46,699 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "from sympy.core.relational import Eq\\nfrom sympy.core.singleton import S\\nfrom sympy.core.symbol import Symbol\\nfrom sympy.functions.elementary.trigonometric import cos, sin\\nfrom sympy.sets.conditionset import ConditionSet\\n\\n\\ndef test_as_set_on_transcendental_eq_raises_notimplementederror():\\n    \\"\\"\\"\\n    This test reproduces a bug where as_set() on a transcendental equation\\n    raises NotImplementedError instead of returning a ConditionSet.\\n\\n    The test asserts the fixed behavior. On a version with the bug, the\\n    test will fail with an unhandled NotImplementedError before the\\n    assertion is reached.\\n    \\"\\"\\"\\n    # From the provided context file, `n` is defined as a real symbol.\\n    n = Symbol(\'n\', real=True)\\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\\n\\n    # The original bug report states that eq.as_set() raises NotImplementedError.\\n    # eq.as_set() on a single-variable equation calls solveset.\\n    # Since n is a real symbol, the domain for solveset should be S.Reals.\\n    # The desired behavior is for this call to return a ConditionSet.\\n    assert eq.as_set() == ConditionSet(n, eq, S.Reals)\\n", "relative_path": "sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'7db4f09c-b84e-43d3-8cba-393271ca5f02': 'CrBgAR/MhbblBPUuBvzgPEZIgpbAlqKjE4Cbrtk75gHXkMarkITh4XhEgU3wODP1qG3H8+dGOS26D3xLOcJCcxvtlCJo/epS+LHsc2I/GUjd9vZgexAE+XumNQfg5oOo/tU0e8kmAniVCoIZEzMOasl92I+LO7bBeaw4EUvDlyL4ul3MTZmARHffWPVvX3VKI2UaygHuTBFFc7cuFYRMf4/BmUbzssaio0xighcvkSVImGYFNXnugtBg6TwRbNgGlK0YUc1KaYRbMSJOJaYvQ+CNC5xSf/t+wUJ12pCNNX2TPWd3vA1AzVn8SUSiWx+EZbpzDS+nK6YaTRHrhIS8TH49NNaO6yWpCDuPtkr/E+dbEWDkr30kAogAhNhQWEPxMaL9/wDixUAmTrbY8Ns2XctFg0kP9qIpZ0632RzVl3LCGvPUNPxX8+6+scdpfZRpO0TtXNXN3XlbSvb7ta7xgitdYxzdPdKHjtseJr7GbxP1dUHV4+lpQ/6yYArdpVMFzxB15ldglK3OhYjTZvEpBeVC/DglG12Omr9C27YHzXeSvZF42PR8tSMQUvOHZ2KBwoEmvid3PbJnGHqr+c7yHKJxT1zxwyHtteGzGRLJ+/LkUSNhWiApPzh2DlT+vZBjjGgLsow7Hq1s1iPTU1jOoxBI8+Z5EnSfO66rKm3tYIfbAzP3J7kvD5S4jBdRmmoslPTKtwVwm7xHa1D9IIJ4aYeD+RR+XEvztUYREkeP5uW0hmSrmHNzrSixeluR8jA7e1BKdbyWIME63PY6SGDhSp2v0dG0XKsCqhc9Qu7rNqIj38TIpoXYUW47mc1okHQ9PmAXRc0DOsvfZgQCeiWQ/Cgsz+4kEciUmR3z3kQ41c2GcKIGFn218sMto/xAVK9d/xEvee9RSxnN8K68m2n4ZRZMKw0gXtYOPabu+ka/kPquFI42EM3AjyBIExAVmk6p/zKbu1yEZ7Zzwj1NN5GCLdYHMKUJ/U7fI7nmaYbWSyAwXUbfBufOPNRbsENgg2hf/x8K7tIw6qWY2lDjabaE0HeN/dPGg58z6fuf3iezGc+sfx7Pn3vBu9ps67N8SzDFJZujztzH/zDKz5fAw7YP7hZlWQSdK749vSFTHc7FO0S94jKccM7+2vCCmXvCaqHLZCns+Gd1uUy/9qNmdMqYXsBocE8Q1i8ynx6gthICHpv0QveJfIJryVLGuI+HV23Y82/ZLBAMwLbb4t0gI3x14PnuTpNJbxzms7AO+aG1DmZxMB9H8wDnE/NaGIb5pcafZAXi8qqEtUa1QaNb3HpP+lyWlKg1wGiahT4tfIsUyrG0ScyzPzfOkIVi3aPXXmxbJ+dum4kCLswTDeGEBOUcGgW6M8kxEzUasEC3XXOiRViHWyg0NYv2SM/AtaGtTbGLNGz10te5Fqw8YLRt/cxiBlIJoePClAej6pacsDdOsOsrbOiDMwsRXJSd5Y9Hm0dwDUZ0+IPKpO6y8ad3bFsbk0sVUVrSRUcXs1bqcSFrXcsWGYiXxyNk+Tp8/Z/v1sI2N73EpSGXDhCunvaVUcJGZ9LRsBXSQb5jmzypk3uHVlNxr8PP/xskWXnggYQcQX189Acm0JADOdW0DyfjefQR7jui9HTUlr8DHrIapVrWZB8mWCntiwJ3va3Ghn4pIvWaKJms5FlhOgsgiwX82qdem2VVq8El+aSuqqRCoSCqDm1mSiA0FH2u5kkFQSaEbbQYn6YpKAlnlUe2AeVyLm+YXiLljprfGO4wQz5tIRdufeqmkOmNt6aGqQ834Fel/uYalUIu2OBWdr9JHLEqUjOMmmip00L9OeYGaiz0avqqmzziRaF90ZSgGkqH+hNIdhnutCK01ovLemy2GnLu4uZzgib+6SK6G3Rzx7PS2PDecEV4TtPlRP5z7fkwohERrNmRdxNrgsc74LUMGwNQAWHybVcCMwbes7E1J4NMpVj60QOaYWwi3IBYNnT51adJkm7+dem2OXSG2vii8xHkKU+SP1mFYfrMhDR5U7nPWFt+c6S0Wf394ssZNXaTYs+uETAmZSJ86buA2x0puXlEyl2xXKm887AZcjstWnGL+NmFA7O1B2O5ehR8xQSAlQa7u7gASsWJSNfxNgolBdcvr0WGDd/xbTRxRWF/WNHYUaOI/3c+q/b7Dr8/dBoT9/Vdoy4kWPuDilIjP88aYOhFAUe8FXCD4iEE+2k7H7az1LMKq8/BWu6wsjnZoyI+I1k8y2x/Ji6T2RvGDmp2LrXW6Pv3OpJW6wjc3o1L+mXD4jOKHfXACI/B0IdhXiy/L3rBmz6FxE32AD3PyVVNz1BBGZIH9mv0Hsd0Qs7432r8n4qv52xwjwfY0UukPsIN7VTtArVkRHeJ/oFUtPPIH3aja9WaHhXw4T0Cu+mHiwib3hbL47f4xWIGcEmsGLRVaIbT2HG/od8dj7uQADblz2vviQotclaxizWfCsUu4gcc3QzaV7nmPqJnfQla0oNjPWEnZksGeD/V93m5QKFK9DJXfsZkVXGaAP1YwyGRzwUPyqIV0QjD+mXIsqY/mITmTEVAXHFDoRPbnXCKzsuO+AR12zyvfoMjODVzfby3wNEeKcVX1CSxXSezgxxQtLhpVuchPSwW5V/C4DF/Sp0jrSt7ecxcKViGUNmq0btigDpu1M/ogcIoAYKIBUzy2PlhnXLyvXpHjwxtuMeZvdZkTZqb3pzdIKPaw8A6t0wwmU1drCLVt4+nOs68zleNhQOgN9jxSojJ7DJjd8O9OZcm0Q2Ujuv6eMyeTD+bgyzs3TjUTBFAXSERuDINZhg02D3kWg6LDurFlVlV73nlEZtLc1d2+oYEJLKU0kDC8dazY3YwS/Dm07JG40tVj27Qw+DOpXONrmNs+0JRoDWPVUbY+QaLzO5soQr4h07VQObQjO9CvSFWOXKU//NvltQjhdJps2YXLgBV4m+jzPHv8PObsBqHKWY9UG7VlDa8QeYBH2V1kzic0JNYuSrWaIGDsCaRaqZjsT69QNxzTITfWPjoo8ArJWpJ+Iq8uxanjGc7iNI4wc/qnM6DkIIJOPOgHeLnNif0dAtpnAz+oY9NODzfevaABl2rG1RTR+DbXbhiLmAvxi8UvShwFmRUU2R5gyZbBi4B2rFs8mEdqf4cQuM4+m6oAUaGEwW7IAtuQioRDKKBA+4tQMCka8eyWTQtqgZNzWK3MdnOfAVATIM1mAKxdhCUAw02BcbMka0rFm5e/1uS6wm40xqYgewwG/ai8OYh88f+1Lk66pIE99pIpfKDFKMid54JfuELzHwk/sGIsJkO9CUa1WeLOygGxVWgJqKXxL2Ld2ysVvu6eP5sLGhxlLHnwy4wl7wl+yEGS+Nxj9mWZ9cA3CgDrTiqmU4k2PKCmFT3NBH35q/eULarfqCZGTwzZZi2ABfyCmv2zuiQYvQtabQEMx+G2K3Jmd1FSMRvlmVcFqDpcqL4QujxD6Lgp4fM3tqVTt8tqgNr7rAWzxBCrxzOLf29ugd7DRMFdW6zfalr4jn11X9NtvxCcrYiXZiv4YxNg8TcQDfasMBp8lfOcUn/SZnaCfFF6qDjPqVg3bWltyhkXI1Ne3P4hB8Nh3jAZfHZ/My1iTT5yG7cDRyXhPmCLFJBPQSfKkRpXlctEQTzL3tB8WkqEIDSiJ1Qk1T5cHAonrqIbBxME0laQfpOnSzUYd1nQZirirBYEta4o0jEuKP8uO9QIINjMh2pg9m0vIRi1CZxR71jnHPzsgGCIrq24S9QHvG2/NbvRPc7BJeNe5rBoO2rfIS0PCQHdSlNlycuu/HBo+XsZZ81xIYTaAdSXqGiA/AF37ffDPOKTPgld5MIByvHufchkwIALFq+TUDUABJWalzjQJzKmS95qH5Uvky58kzhXpyqOlVhe2RIW9YvxHFbkGDJ7bbuC4gYnMsJ+dYjmsm3JOBVLGOvG9QxslIKGRqbuEoaw/fOMV2xwzMdkgf1DoExIrGjkQ3JSY1oPU663x9YQzvSu3/cPfnt9JeWl67ObYCTc697aqWkma8WcVZ/BFX0C6xURgul5i7mW0K3Y+0kUVz583QIIIfTOCHuVYUDem3fFFtyaHqqhoFdZQNDzneMXDDCb+23iR826CGpE0+xyU4Ih7wBz9t2zzW/1vx/3rVNbJLRL0XppymYY+ND8qEKuXJd8pHUUUA0RrWovTBsQpBzk7GLG6fbi6d1rk4r7DsrfTHfSAUVAKoDolYqjOaTFmIc7SEwZuw7KUYkZBZZeTsi8bMCIQZdn5tANe6SkPs15VGWvMmIycDV17I7idw5ChlRGbypU9rWhQX2iVXDrFxNmdjhBcgEdtp202HvAHkhY7h+mZj1AZRUMl5oPjpybQ656L5VxaZUN97bSVDmcGVXBsLWH+rJ9FNs2N3Y2oB7UqRCJ6Pc+YZF57xl+kTiSa3glOnMylYqQiFk6IpkOFBY257TP7r4b1T5+l+4CStSSarYVDddLjZhcmE+CGThPixC35bsW2MpT/A4P6t04GzEi85YaPA2ivNIFWaMo5BJHceXsMPnWoknm2PPKiQ8XrKeDcQf22wa6mOTVsnoJsV/LyKA7YxwP6ahTAHYrN0V3BJzbMMIWs7mGiFJXnENbnU7IPgPfQ+2l+TicUC26IdoGrKUhxwpyPdv1kaqkqnyuF0Q48YuJy1YinQlSpwm0Gu5tLP/ixs+mHQbkUfm/HXD3lGJ3l8sMfYViqPgLS0ILA7g0Ks3fr4pVPI5hSVmnWesHOyfnI7FyWTkonRXF0DiQimoLsDDjE5F4nhLyz6nUfO0WndJ6tY5qRsbNR4poYvGzbcPcEUwJEg/kAXNBtLQ4syCOw721eipnBX+k05yowaBuI5I88MRHqaYFpYE5+D2RvFsiI5Kmkud3oblnHXacebOZ0ZVwcJoy/0W7GobvQF0m4bpyIenX+WpTTgKO1LHWR14E0b6JYZuFQD5sc8kG/MAIKB4nsiImTyPdOzp7PC1HbrlkSfXIF0NuwHaFT4L3HRkXbGNCI2AJMkp5Gl8gWLWnrgLgWPcLmjpX5WMfLwT2iShV4gQxhnoE2wtakbZHLjpIeIaZEMLu67EOHFiaStf/Qe+sPZf+XkKD5nPH20lUmzsW6Umzv1422WckCtxR153Bq03x7jmHu5OHkt1b+c+syH5JLzLz9rYx8uQQ5nHt5GZq3mCIX0pm6vapvmo8y7mwvaLnBvybk+sy2fAgIZMs13AXk4tGBnop4UvT3uHqfAmqZow31+kggPnBO9750qbmenHxTKJok/qnVNmRIJM8x0fXVphnjDSHdUPOYKrOjIdXTUse57gQAaMp6CtW7K+Qepx5sq/Zvad6NjB+t65D59gMPGle3rdCE1QhvGS/Le6xewLv70AgQ+nLQIonSKHCQpfTMrhQup8qJrTnks/4euxKP/ZyeoBm/k294HYH4S/V6WfZYaBwSKKStZgS/td20ct/mME7WBMENcUQE8kT3BqdcvfEGfHAKWka1vPVbRK47gzr6HicmN+p/7GqN+groavFz1Iql4cg/DFna41O01JGl9rW3xgYTGguHVcFjRgwk4kXkQ3X0prD5nz5+WUqzlBL+HhaEOBYEfADO6FQrKfTiagi2zVAH0OBU/ggCxLYnkW1VHJDjocQm1+a0gNpidGOlPqFB5vp8EJZL2+4DuaBXBWKd/8PnZ7Zzpws1baV1spuNpAy667CghNRfjsrwJJSvdSk9C+HPPx5qs61bwh4mwZkTRtLxNKlUBo2nTrF5KLEUW987CdxMehTjoSmIFwzX88adpHpqpUUYpTS8dlIK46cPJ7SCBwWBfDo/xKDx5Wim6HTx1WnuRECqlcN71p8t6lXfvYHhScRlwuAzOT2SXA5L/f/pdyoiewdrAqYa3yI2LdV9z9c0sDJ9UsvLMirmEu+uUPCEEYtZ3UVJjMvWcqnTlzQJxrjw4K6J7F6ZD3I8nK3VH8pSU6joFcujZN8Bgik3rslkk089lLfV5ioa2nf3orLQraeR+AkvxGO3r2Atg0nSQeWMvTKY9HqiqwcdI0yHRSpBScT2LRTrU0WN0tQ9loEyjmkOupBz46cX1Nbd2RbrIx/C09UQanQa/ktt6pzsS5ki97aE7q0OigLjHvf8rmolW5OhKWpaft3KJcv+mZHgwJE5Jml7tpgfrJSppJubITPNgo6F0y/i9WzYLzZZWGxhP351/uJZvk+gMneEJHfbGvAdoRfMuySYAyFvbpIP6gJrWZoka9imQOnrQhEVSm1A1P/KBKQQ7v2l6goVISsW0VceW6I2teqSbEuno/iZN4KW5otHcXq7TEiKZyduf6Nqu4Wo6x3qBt7Hro++q0WDb3Vl6YsgJe2x1nLtS5CU+NtI1qMsZafHkGKuG9EJHXnVW4oEuJYafHGexCTKg0iFUV6R4Owts6jvIaFKy2aOe645YkFa/MzXJwx8ZBRGnuq6Ph8i9WLYsOUfDT21Z0Qln8nU7YmNyYbVoP4ricBWUW1zkojniAgjM1MJ7MMxrzNw4JSGRlQqQnsN8hzxUqKxpdDmYRXxfSF//66VmFP19ZOz5NrfWwIJpxHaap8ufKquHB0LHvD8vncPQYxBh9j/Kx/QKCpFsV/bTxtZtoPKurSgv2fY0o/BzZONXdByoe9MUt4OvEKut0IWYRUBnhnqv+6+rIHyUIZU2xB2FEI5h+Rm1Db9fWhEvIZfDB/Ln4d5acdPnyA0ywEhDsuHcLjVDXgwlPd3bGOXlHN1ElrJ7b/T7UccAK+rh6MiltflSrRwvNvHHL86XrcaLBd5nmB1Cgv39g8eUjXKpYLlY3Luxwx0F1V1+frzpwytDSATzLeWBxJ/4BsaFfTgUX/Fcnp3VCiwnyUE384REyLPx50G+YBUIqZfPHRMZioLIaD8VTA72iGsXbDNPK9c9JWAy9jj01HrTh69BbSU0dpVlJU6CUrIvMq/GrNE/OxQZgeWLOHasslTpreLSqTbe3so2Um+Yy2QxcaZ4c4ZkzBY3YDnkx4EgIEsun0wQWzfdItSyHc85jgnfFqrmu53QTY928kO082mgrXI+nM+DYwVMYA1kTyIeljXHUF2yepuK3F1LZsaUcBNDyPJfKX7SZu/oBQKGI/v5gRzOErc/GsZI5Rhv33syjvzL3UbEB748fLRYSXgMGBvEwg52CWN+FNz6GEy1XCrzmAYaJ/ShUIhitOXTXKIbCmhofA2HWlxRA38SU/WuSmbnaTHKf2fsbrtCDaWKkl0PKIIod/+JAFlcrMeCPhX2WPuMmNxmF0VyqFS8T2Oo6PB9ocm1FGWPJ00ZXPStoU/96n6jc7HBHKqVunIM8EegpEKB+Fc7IkUhYozwNK/DWok0BU7tkeSkNBk6s7+5rPCvbVtZ6Rcm1Eg3AgJqibTC7XaBivlNnW5V/HluFFiwTXsWsVXk/xHQJbnjDXHaf/hX1jiBOUCDu/Y+hdkvrzHbYbUiptL2F8L3Rq5w9OlvP0wkecuQLatjfvyn77cToPD5agEsVu3hDqiSWFtezXwQxm0TX7MPbx3lCrUSvL9Na0w12QLMknWla3H7bl7+GzxBgRdVO6meBSHJlI2IfHwmQWitebt3/QpgC3Dd/urNMAJqgAuQ9mVCAy2z9ZhWqv8AXljLNKeNy4qUlbyWpm0Uq/vv1Gz4EkR0ph9eZJsDfQBEiMF3GHI4ETk4YHe3HxMOwnPSrzAQeJx0mit5ZxdoO6N077JZ1HbSxTQf9i1jS750+jhVrIjBGtjgKyXckDcsL8OW2tvBNQEo/FtpA2MZ9r3NltCeaZABvb3b48qTbSo+FbCrkYoGoMVRpHaJjILtnUYQaUlPlrBagfh/Yxqt/c/blwEB4X4nxttsCNxmcF1pWUDYurAuIUdNR93L2g93aCbHZmEBzP2gb5KBdvF9NozppZQmAPnNMK33oSWf5XVELfELA5QUGtIKeDEn34wjgCrfOqT6PNUDRehOfcbjuR4dArUhp3kqS1omdY4FWagsTU3vqjUJ0p4Z8ooqvoYVENO9PceqyNrEb82krbjD0zlRuBIMM/RD/NKSZImrdeb+OLju9CfByzG2ntwDDmnmioKCO4wu0+zylGExYRWS/jsakX4YAcN14hP9eYHnjMBaNRImSLjzzbiyTLd+CacsBh7EvOlmPRqV2veveY7u+bZZgNhNGphQAGcrDnVr6DFUp2nTC0pV/b/ykiamZzZI8OIn4/8yysfJSDct4UPIG0xoXB5gbxRJJAgH5enmynjDVPKTxymX8FQd4pbEY+oH6ao81lKmlKGbk3XhEdXe/3yOHkJPoyMfKfeTADeqpQ4f/yovJSaIWaZtWypmS6WaObZvjOgNP+hsIa/WfL1RFh/MgLrjmqJ0KkAl7BXwiuRkwxobtoutOkw1OKS47YzNuP39ReZBtAYCJZJQ6ZK0jsb3QMbvPAvNQfTXw1H3+VKP4h7AB8ackVrCyF60zyjS4ngmzkozKh9y4NRnUgpKe9zmPwda4ODuMEOB0XWcXBC2K1h1++pwdvfF1jX1y6fa4nV8tw9AkFF97n70FunhI28CpYdMpuIeTZJpLkOf2U3tU5h/8X2wmqOtU/hmfPEg2/vneEBZGCyGcDYBqQ0FEowKghm4sz3qLLfVJv2PRvkgPvJeCes0obobp+uZcfnIppo721Z9oLXU/ayCl70uqpZEVEgh/Z6R+zmEc4T2Awbhqeh6snluMD2nHKomk2CuFb4fm+pUcP4aPQkz1pBzwz8xN9DqBDR4vb7bykNwMIZxUtgXtAt15O9lnY4k3KkiXcomIYXFHWTIySaC/tHi3F6BKZDAuaTL25Wioxn4S56HPR1SDwWbRbiawj6ex0mqC/80DfMKYaAh84rz3r5lv8ldr9fOZyhou+JjzSugO0y7f6Q7EcPGUk8hKWGo6yvdlHH58ETT0OUeurpI9a5BZ6IyVoYA4Glxkg/Cbw4i2Ma4QGSDkWJNVkSduMi+HfOw4w6vG90dzl3e+QzVC0Z1vdWezcTLTtAwtJgCZ5JFsTLQL4XG0G0WtLtNbd8Ll7VBeem2vbuGMNopnAAGVSkxFlbbIB2tSLgXv/Q8RznZ5+65Cg6M2+Uyke6I6rFzDWr2a8leE4ITZyrSRNNnWkQx7LDMXtcv29woMND0uiIl3mk7iKXxQgBOmx7lWcMBa9zwPkj4lnl7Q/c5BOqF4zAg12lRuL0bWvWcZfY80O7txg8SyZDqvSdjNVB1uJh+x+2Ba08aX25FzjfpVuiK3fkQkfR9hhBSnMu7ow3yAUX4w2Ti1L/MsfHk+cnQxXcaQqwH4HCJfv8y8X5T9Xr/UzW708xQIpTJ7z0xIulpxnf0QUcwOmP2Yo7bO03eRziuBnBT/ny2oRjbYOCwRYNQJJeIl8vGjn507rtISBoUNY+GMla6E3MiqEILY877xYIXAgXXB8y8ZjtYU4e27+uU7EsmjCMU+D8/JVorGfX8Dlu62xDdjEaEo5SYLqOE+6u4P6YPLbJ41hWM7MZETyAGdwSnE3vCeZlWinrX5X4lU5GAzrjKVTS9oVsdW5+p+S0Vg20cHEALzjriexo6YbWhNiRQRJk6bqKvsh1VBppDRGTNXHt1H0zOsRhfnOBGoF/dIu4qrSkaekcmZ3Joze2ya+6w6Td5Ix5DLt+F1i0Q3kPyUVZyVwZTWgi+adPlYNuKguGexpWsB//Jd2lmo7Cjv1DhJymgT7AEZITIxSiXP2DdaTMWZ+1CWsv8YXZQnpmxj5C8tCWQWOBSsNPzjGXD/zRDaS81xwyog0f52ZY4Ep92mfy5NUo4DIzlYK9bHn3TngO53rgOga6GrI+R+QKz5DJdouwyOJsWcXWRbFKl1uw+pMjmkiGPLeFIkgeB0ncbkE44xO/+FIc16vVI6KsZ0LT0pNXYY7IQ9tnYLNdRy5Qn8wWU20CaOxLdLXTXxgXrwoq8BZRSsLN84YIKoVlKsTw05U4x2PwOmkyWGlByQN9EfnPv+kgByJ4fW8537Cj18yGd4wqfXirNIAFcY/btVNyg49D7FcziJuoPYj1isbFMF4zW9TYq+IU9GDaHkEd1z9MZB2CwPLUk3oEMYvhps419U/sScGR3PcU8hK4WaZlPB/yPv6A0dxGgfcaBD/k+1yo+6pfeJNu5XbhS01LV0I8yvhwn6fdPdwRX5giM0UUoeOMoAOzwY5CTGLVlzybO/6J+xwMQNSTmtfkQt6U/cYWK2O5aKBpVoxnuftWjycnKG3GbRPDr5qXMD4h9ET68eSmHNZFv9vP4rdl2VNFreQZNO6nOgLms0OA0yTW366G931jBS8PbOQojxCuEW+Yu5xBQX9WXvJOZ3E1ToqGpDZNBMnNwq279ucG4Ao+7A4jKmKSmq833o2g2wje+m+VPYfuea8jvLtDP9W6k56iQVPjqLIzbQXYTnIGWXbQZ3gDkHBX0auVZNzlBvEjQ59Yq6B3vUIdMjBo+wWgXvPMaVcz5FJ9ebiiSbpANj6mdb0YHkpiAd+8SdEEapTcNDOkpJI9E6lUKrL7SjMVDaukyMxhdbsDvq0Nul6TF863F/OOB3ttE6ZwnAQ1jfSrVkw4riKPRqNDiWWI8W1QYWKmMzgVfXP1anSC5o0orcxEqkRTulAiISJTee8AUE6M6+9K5EQid2jbANLHYglnhPDbyQmHqTaf01Nz+//cRKSSNDqYXWe8p5sMz+1CM6+PiWj9esGsEMNJwTEifYS49U9Vp+VuGpZ0SoBkyh8LrqCIB+f/bYgKR0LVx8ZLobwcifpfBnrbiXLnmWghMWuHv9iHEJggqnIjt8dbXohqp0aDYB4Ojgq7xpIhS8PYtXE3l2GttF8G1K8nxTRIVSvL5G7XVJs35fZohc2dZgb0G8flSz9KdP5CMqnt2SkboPnNFhkPhwNrLY0QG8LhCVuy8WQnxbMg0lwu6WKJmYtSF9ea4clri84//IVB2yKME5kXoTpBVruVZ5Bh5nXi7ltcnFcyKpNPZpAvAIDiuxXvE9Y9sdIZbBhgttIUynp1ldSh5/FHaS1HFxWvovpmqXvy7QaKzlxjaRSF6TKZYxiigZanWsSb8vaPLoz8WpA/RQsM1rYxne40P5AcMe4v8Qa0frywoFxQXJ6ii08JMapZel5b6GaWr7nXKzyIVTfPAuSq0xlWh7LqwIH1v3KVv3CXEpOaSeGpUlyzmcPq7zt0q9M5bq4ZDizdRJRVs8HMYLBaOa6zWMrAqxqsVod4T0rOS7xSNmSwLhshI0ZYYO3AdpHqPKHV4VnuojYfXiXkYVeWJz2gfS6P/BfoilAGm1NTroLENM4HfA+wexc2rc0CGutTqjpRVrMRwKtJdHERVw0wp6U7nIH+qVoyWw1yyEriEC53lzBangavM/c3FM7TzZYvgTfZNuAYTieU+KToyTfAL8PaQDRUsntb6Q9Ke0fc4O72yN0DT7kmeGjhL600hKLL5JilAnuOzHG/RBn7gu6X8nzmr8U7FNOspED+x3taNa5Zzjj/QNCD9wTrbp9L32Icq0r55++AP1bfOImORxsT+8tqvT5DkDpQWeg8Gw8u865o3zgftDPkfFPifNHNSpvN/b8MtNKgRI1zh4pA36925H2Aq4OaEPoUBpYVsgirXCDU8AQJlzg5dWwTJNbPF/l8zLI6MGYCYbS0yAxaa5hyBQtPAi1zkNFLtvPX4I2jtFrl1fA/Mgus1pRW9b85S2/mT7x8WoJBL+li+suijf/l8a0+aP6wsG7ms9LkO076rFqCZVg0zHvBLrrtXO+xDURa7a7/myHP6nSAiuj9BhEW2qiKguHlbMS09IPfWzx2wldulX9NjqCC/XrAL2r6E9/jXLjxqjeHOhr54xfk3RQ+X+VT31Ow48qCO/dhMm5NJI4BOkbHLqc12DFJDIUgtNQ97be1a8QzRCIsSqxS+UokkVORGqqoWpvL6by2gTFAo6QhuPPmuD36dKdP5pL4cCMKfU1TuKNjqJg4IJ8QEG6RDPfHMTOH+6miz4v0WglOGFRJpBilQMFKgHJPGpz+rP1G4JL4BlbIn+Rx0ADsjUVAkocBMJ1h9/VKQI7b7u+Mbp8Ss2/4/bWVR86jr8O3wjMcYMAn6mliMJDA8iEY3LT062tCgqVzWEuOQbf1jyhjR6fDJ+6ar1JgK9awH/KdDsCRY8VjNwS/cdNxMxFFHchO3lc7z6rifhDs2y6Vqbf6BpqZPI6cyhUkQknVKgz67JhsvBiLplZ3cq6ufzzPxYIpmkSO8XN0QUoZ+sJMerKD2QuZ/aTKV7SsF12PSD78KVCoe75c6Vv+Xkpub6wUA/JaWdVTvi6LlWzYXykMv7H4PjmEh5POC5Id/NRLDaEHRnFi2G6nrTOpqz1ktCWTOLa1nGpCcj1DFugHqDwIGCZpa+LhtnYjyGc6HcgU+qK6XhAqlWIXm6BrLnlewDnz2vnqejz3+hAfF7Bui+Y9oFThlXRTxid5t9n1qZyRc/7+u22r6AQIiuGU3TZ6xmJfFwYx0NV97qV9ReXpw0puM0ho+ZybbGkHnetHP0opB+EdsxDZaEuU1V0gpCz8x3KsqZkM4frucg8wJQXxocGwKBEYZQzIXyoFvJ9L0Tp0lVVWq/2p4XtwdN0WGWQy/A3DNG2YZ/DW3GEAT0uy6Vk9TZPDz2uqi68DQ9iiR7roarg9bsVVMBqiUF04sNNhExJHsXYJja5LlGflUoMvvama2HqXZV3ScCY7Q7H185nqnfz9BVNDWOn+28Y2SXI7PcccIjS+J7Sg3egN56OP3okyIFbrCDo4iApnsuPn/lr1tLHkYqhvJtY3tX11ILu2stLJTXmLAmUsJerabGHiN5a4s7y6UVt7bQGe3Mj3mNatxGBWkBGklruof5uzk6MIg6bvfC0D1nauX5BTrp13zT3QG6X2/RV5baLupMG+w7z3QaoRD5t4E1BkfeuWCQZzsEhYkubvX2FkuSIlKGBzq4z0/e4e1ULFAP2jSbBi+sEc8Wa2n4mI0PVDfB+9BB9v/utneTsQorHWQHgGTIBHTvAkg4TFMIc3vZfhAUjM6r0xRJD57NUy415mmfpc2vrvts2nhvAAynUrk7xuOZgj16rET9eYmYTiKGlpB8hg/0BsTHv+CtnM9J4e6OknIYJWEHCxXnXrval1wI0u/Wa8YsJ5FvtHyM246k5MsAgX6CXrXHgy6K6v9h3HVB+S1Ujkng1fQsiTOkr2T13E7YfdVtScM0m/D7b8kRlm6pYmtM7ZiN2Eje3wPAZx44MsuJHTRywwZMcMWgdUblahBR/3Ehvo2MOMxO7lKA+EzdhUlghvGLaI0ANQQ9/7013eyphbZ9ugKgfg2XTenQYn2cpiCu3EzOsT5uhoXxX1wVuAOWZNvKUeRZf/wASRT2OaWZhB/TvaNAWF7hWN5CW1g7pNusUNZndri/Y5TPT9Dpd1DMuvoFJNertCbkrsWtppg+eXaOfRaNvTmMVHWG/9+r9oELQA/FXMcqhYIh5Q1NbqRnm75yV5eHrxvtl1Iu6/eSMIXb0alFxVdQT/FSj+yImc5NfR9kWlLjZIkYafCi7bsjO6C7V5gPDmNlcfmRYHGA3uHGEQcmXj2N9q9j2SAiBKoBZrVUfZ07gS6zgpm7w599s2XGPyOjz2C1ew0H0fYX0b84xsrReeM34G23snyHop7bzc/rG/rq4Gpvikg8ZQbXc53mgjKDnJvblE3t6PO+DZlvzW9XgzAewY+yFkQKUFSNVd3t7hqJpb0Ro/s0reIk0EhU1tECQhAMwKNwqpfjkn0C7coH+PsPTuKXp05yBK0XmQglvJ2e4cVd8LSOgtHWVThvf9sMKJmZh3aIqhP9EVLtpxiI3BAkU66q427A7TaOH6irjkk3IYySr8X1nEg7JUQc5SGm8eN6QG/bxPM7yOYV4fqJbiO4X56R6IAsb+KvTyFp24P8owEc8llEZUuT2PgBgTmMo6YfTqnTSxug2smvqCIQwZUQBMQssewgDD/r2NNJkdpFzZRUHjuC6gHfjFAhdM/EeB6xpwDevkrj8ZcbOMVNVEQWprGjv2n9LmBaWyb/M+Nm1h1fILcQjgKGJXxuIeLuDaTyYAXKA7PsX4mnyPwDpY8c4cF/ddZb0us6MnGl6sQ9SabDR+qRXjGMB0j2W8hiFDt1BMt+EpS0P1NBu7cpXdVeHohEDJic/RVbeaMNhPrToeJVxasH2qblFSefy12emFCo7H2D+wLhs1bZYvo3ip88zPOn6SB7DyDKNCsn0tsuqDyxzM0UXCoRog9TdvBYHkFlEapDklcVpklRmgGMQhdClXa5m+FsBouM7FDkGMwvkXv/8/qJhrHfey0k2TMyRvlkCxqvzfgnY30qTHzSaXMYXBzcoCUUXD86wFVt25qJiFtmP7Z4hsvmTJBhyWKG+hnD7Hl7nvuXig+JdJkftKVDbepCaRHQP9ZwY9FX2L8OfKHQRQ21rnqgYzmgmF4Uk3AGZawmkzt1nWSsCpKxjW0MYXNRbwTkr9tqA3GR1QEDqJVtXppjoT2abjp2n+XyxN6tVflzWAsjAnXXC+LOcHQrmO+jncdCwleXuzgFRWguhAJdC5Cwrwr8IlDol2Qn2dIq3xhlEx0UBma0uXEdR7I3Jdc8SuO14CV6n5Wok0lTqzcr4OELqtkD8VQgkN47h8b18qMXFSDiVpWhRYeg1pVOX6A/goFEoEiYMvPj9VXNrxb2yTHqGhyEb38wPrkcugipcWM1ufkrsOgoy1OG0lXKxFk+Rj0cbFpVBxrQRWxHRpEogJWMGvy14droNoLB+uOtOoZTiKk1wNnE2qQyixDqzyyDJSPola5QbOy1jkB87ZZr4hRxahtAvLSPeFjEm9zgZuhVwjGIvOtzmr22DtYq+aM9AKNFKdRFpdLDlxdOJy9D0FCtUFfKWMWKfnOsUprR6QMumAgXx0yNi0x7bzG9ojcA0rgx05aeoMIg5UuOqUwhWNMZqqCwZRyYXPG/CjiC5jWHy1jHNkpGT08tpiBuNEW2UmjD7YMMZ7VTJlyCswuo6DxNzfSSPzW4BJyrMiROG8iH+28+BdwY9Vt28jkbjanYBOg5TPiVOXJAZ0zF2NvtLf1QayLw+PX2MzccBw+72Mv3MFxOIh1EUz0Nt1K3aApyTuydGyLK41xl5oB9yMCKYZZvSrz60QlM2XkKhOvnCIAW0qqPKBSC3nYLBICLwNmTdVvCGVrilVGa8XNUkT/KExRmUDSn6zpG5UNz082cVueUZ3x8IfK3O5cuZvHDLpDqmSgl4FVoGZHJITrEJSm8gYheaemGat7V1Zz8TS8Cz5Lt45FpIycTTtvfa+t+l14bObPcCRND/OF/9d9HoiRtZyMwQeZCRuwOY9XuV0fu6y5rjL1Ntk1aq7TaJeEoLEOOVY0NqxH9TPCMhcPbrn3eDUP/LCQTvRYZg3gh7fcENr0SGhawzyGOPMYoiB2WXhnAfj29ub8foN1m9hazDi15fq8AU91m2yptSW4CENHLY6d0gfDjK9aCgWtYT6901/r05ZzGoOC44T9uHsiYJrp5laJndY+rkdTQJ5B/G9bsdVStAM4UjD1d/PEzaWEn70s1kJsQW6HEl7F3DvHOP8rD+2dHddb9rtLtZ8ovkt+wYldGcV8EZ1D0izRPl+RPy3o8SPnNt+S0GuYXRVwytZYcMIcIqv9aAxTKLsech+Ivx+/2U0hdrbvfaEmNw/Wi/pC41+zYlQ+eHDJMowSOl/UKJMV0J2oq72aWgBhqIxk+VbkUagnyJM8CS8oY/y0aAPXI9y/Myn+NxvnNtbyyB2mdPwgEZGL0mUlcw//oeISZpPxSU9ewbuYL5bulqti9bLYwLf6Q+2aFIZoZmFGA6wAYGp8vmK3yB8nIcHzt5AcOg2rwF9qmem5IK+4UEow8iZdEcCilvsOfetKM/wqKbw8mNrZRsNcSjqoCOmEfpEHjSOImq1RVADRJdwzC7F0WYUid9rIGabDl3zidJaKDCP91W5Om9bO7ppl84noJxlPfgZpC3dXKbZr/SypeWbarM+nUl+Fi1AtzUrxwY1uq8ENqmRZMPhkAOCg7WTFT+43iDDgtr3P4wlm7RwEkAniMM3zCjgf0cFHlBoxYDYjVn2VIxLoZjXNZyUg5GdDB6hWPWgSFgVIjg05VHcrU2om6K0EcFMAKcE2W9INeCGZbC70jxG/AkXOtC0rth/3xv9H37K4z8D89TieZnH8jhaWTfRaamLxZpXBMX/kHGiHpJ9c6vKJ8jnez+HGz6BlyQbSOycIvXBjpyiDOc/InBWyjO8h11PN8JpFHuKm9r4v5k1ldFBE25sOVEu+xM4FaRf6OKrFka2Mo0P9kcbszSetdNonr4g6buWdYtkUYUgc9yvdc15yCIK7DuEko8wPjVHs07WWdumaIKV86HSiuxbHNWDYjlU6V+nTbxP91CPX4KnIG6yiHmYnNUN7f9QgpE5+9nSLmtoIOQBuopq1g0Th0'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 4964, 'end_index': 5243, 'uri': 'https://github.com/3leeilwhan/SWP1_002', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 18572, 'candidates_token_count': 323, 'total_token_count': 22533, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18572}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 323}], 'thoughts_token_count': 3638, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.4304045213634384, 'model_name': 'gemini-2.5-pro'} id='run--b064fc97-216d-4a5b-a926-e22d0af2edb8-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'from sympy.core.relational import Eq\nfrom sympy.core.singleton import S\nfrom sympy.core.symbol import Symbol\nfrom sympy.functions.elementary.trigonometric import cos, sin\nfrom sympy.sets.conditionset import ConditionSet\n\n\ndef test_as_set_on_transcendental_eq_raises_notimplementederror():\n    """\n    This test reproduces a bug where as_set() on a transcendental equation\n    raises NotImplementedError instead of returning a ConditionSet.\n\n    The test asserts the fixed behavior. On a version with the bug, the\n    test will fail with an unhandled NotImplementedError before the\n    assertion is reached.\n    """\n    # From the provided context file, `n` is defined as a real symbol.\n    n = Symbol(\'n\', real=True)\n    eq = Eq(n*cos(n) - 3*sin(n), 0)\n\n    # The original bug report states that eq.as_set() raises NotImplementedError.\n    # eq.as_set() on a single-variable equation calls solveset.\n    # Since n is a real symbol, the domain for solveset should be S.Reals.\n    # The desired behavior is for this call to return a ConditionSet.\n    assert eq.as_set() == ConditionSet(n, eq, S.Reals)\n', 'relative_path': 'sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': '7db4f09c-b84e-43d3-8cba-393271ca5f02', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18572, 'output_tokens': 323, 'total_tokens': 22533, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 3638}}
2025-10-06 07:24:48,262 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='sympy/solvers/tests/test_solveset_transcendental.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18922, 'candidates_token_count': 18, 'total_token_count': 18940, 'cached_content_token_count': 17957, 'prompt_tokens_details': [{'modality': 1, 'token_count': 22558}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17957}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 18}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.00589010078046057, 'model_name': 'gemini-2.5-pro'} id='run--1981cd63-e543-4a92-90c6-d1833d90f577-0' usage_metadata={'input_tokens': 18922, 'output_tokens': 18, 'total_tokens': 18940, 'input_token_details': {'cache_read': 17957}}
2025-10-06 07:24:48,273 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/sympy/solvers/tests/test_solveset_transcendental.py b/sympy/solvers/tests/test_solveset_transcendental.py
new file mode 100644
index 0000000000..4ee63d57d7
--- /dev/null
+++ b/sympy/solvers/tests/test_solveset_transcendental.py
@@ -0,0 +1,25 @@
+from sympy.core.relational import Eq
+from sympy.core.singleton import S
+from sympy.core.symbol import Symbol
+from sympy.functions.elementary.trigonometric import cos, sin
+from sympy.sets.conditionset import ConditionSet
+
+
+def test_as_set_on_transcendental_eq_raises_notimplementederror():
+    """
+    This test reproduces a bug where as_set() on a transcendental equation
+    raises NotImplementedError instead of returning a ConditionSet.
+
+    The test asserts the fixed behavior. On a version with the bug, the
+    test will fail with an unhandled NotImplementedError before the
+    assertion is reached.
+    """
+    # From the provided context file, `n` is defined as a real symbol.
+    n = Symbol('n', real=True)
+    eq = Eq(n*cos(n) - 3*sin(n), 0)
+
+    # The original bug report states that eq.as_set() raises NotImplementedError.
+    # eq.as_set() on a single-variable equation calls solveset.
+    # Since n is a real symbol, the domain for solveset should be S.Reals.
+    # The desired behavior is for this call to return a ConditionSet.
+    assert eq.as_set() == ConditionSet(n, eq, S.Reals)

2025-10-06 07:24:48,274 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 07:24:48,283 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 07:24:48,283 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 07:24:48,384 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:24:48,384 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at b4f1aa3540 Merge pull request #18204 from mcpl-sympy/18106_ask

2025-10-06 07:24:48,384 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 07:24:48,485 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:24:48,485 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Removing sympy/solvers/tests/test_solveset_transcendental.py

2025-10-06 07:24:48,485 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 07:24:48,485 - thread-139660780025408.app.docker.base_container - INFO - Creating directory sympy/solvers/tests in the container
2025-10-06 07:24:48,485 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p sympy/solvers/tests
2025-10-06 07:24:48,586 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:24:48,586 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:24:48,586 - thread-139660780025408.app.docker.base_container - INFO - Updating sympy/solvers/tests/test_solveset_transcendental.py in the container
2025-10-06 07:24:48,588 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 07:24:51,782 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls -F"}'}, '__gemini_function_call_thought_signatures__': {'adebac4c-0c4c-491f-bd56-4f525011e3c9': 'CqkJAR/MhbYuamNoYu998PupAnaOxYqYzN0ied/iGte064102ghnzgorumTiRzMJz6+bOfY285AS7W4k5cLB77a4VOqBiG6rM4m76lEcq/rMguC9aLlz0EoJ19zLlMcUE4wPPt2JqTyBcEUcMeFpv0N/VpUR3poAprBUddij2hXGSVKqIr+QVV6gXHMoSFq2HjCS5bvmFRpXrymknMkAsfq8P7Wn/C3xvD0b1RxcrtmD9v0JJCqZ3eAP9Uyi6AdkYp2rAZU9aEC79JsmSe8UAC5ohjb/YAY2kf2XJDZ9aY2+M8jh6VzKkrFKmlDAtW96tAGQW9/ZTyAKAgUnbDK6XcyrwEtAd18gHNobc2B/SJ5INbTo/AW5Ohx4q8Ity34W47SJQ4JLPUcGcBTYpW2dPRRop1McA++UUGB73MSl6MfK5WGcxyguCnlnIgsnr3jkCKYZpB4b+tABRD8jVHTox7w1HL5w8ZSapUT8GeD9who85LcwttkbbNZPBoj0fboYXz+i/mmwVlABpG+4wpPgQG57E/A6RZyL/XwwhL8uqQ+rbHfvbhGH5k2MZJO9fqXachK2N2cRLjc9EhBqfJPHKPKEDQRkYNprqvO+Ks9PDo/1JkA9/CkPjWQYKf4Yl6QI1OoziDLgCfIU0+R4V9CnY4tRk0SazmTArXd0Zev45lA/Fg0+GQAxFIAB1njGpAKLNx6fK6u4ljwa3KaX5PEylQUW9G07P6m83oypRFLRnAWsu/x5NusM7saoLeNXvgWRR7jUksdwW04kNPaxNrRIqm/7xKmgpEe1jEOosPkBKNYFwjGFCJx69nMS4cmLGoR9zfUHSlxerbmBs4jHxGEvZwpGkK3C0AQECO7M5j/we2WrlXnIdK/x96vPNuF2DlZ+UBn9G3S0g0fOLH4Ao8xOkGoKpzDrs9Qy8zywB98hA5i775uuwuNbXo6TRxR+jFqCAYl2IxHDglLaP4VLOxbocz08oRH+5rI/GFD1uvVSZlACQsCZNrn/D2yycFRC/NNvIl/kY7GxvS932LSD1OVxgc3a3ZhYphGpdKi6gPPkm2pMulqSNv0uxH+ys8AyRPtUB7ilNB2TkKf0ItXcdjN1D3xYOim0ZUauE9ad5MRxckbAMQAvZbiuJFXgrBBFLkYjkCa00fdHGFyazwo0W29wHNbsVm5b/pG8It/xFuaI4lnBWQFK6ekwrVrbP6F7UCggIxAMOnLWxp3OGrZDnC0u7u6xj+1neGvheAnSQRBWONOien1+QqdvzdGLOn6Euz726WiR/j8YM+3sK/CRxzeXhOxrkAYJp3SNle05mDY8dHE4RIMoxpTHx5xSzkfSoDIQTO7FQwsJPInfvceOnNl0vaHtXlVJqlVJiwAwE/IcIxnVWrpKtt57F/n5EAs9T2AwNl5c0LtE9hnPXRUe02xsJCUq4a04U68a8euxK4uC0oENKjEbt0vc7n5CrcfkIZFd+ZwM7t01X2zHcXyTWeTC1qlUiI4riJTLvmET75PsYi+ivhOc4mudmbd3IWz7IVhZ39b1EVDjvVaptUCgo9qJL2Nx4af5bAuYdOmLQgxVxEwgBRAfMxY4v/9P9Ow='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 444, 'candidates_token_count': 7, 'total_token_count': 732, 'prompt_tokens_details': [{'modality': 1, 'token_count': 444}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 7}], 'thoughts_token_count': 281, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -4.924197060721261, 'model_name': 'gemini-2.5-pro'} id='run--6980d16e-a75e-4b90-8eff-bb15fb1942ff-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -F'}, 'id': 'adebac4c-0c4c-491f-bd56-4f525011e3c9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 444, 'output_tokens': 7, 'total_tokens': 732, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 281}}
2025-10-06 07:24:51,783 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls -F
2025-10-06 07:24:51,884 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:24:51,884 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

AUTHORS			  bin/			 pytest.ini
CODE_OF_CONDUCT.md	  codecov.yml		 release/
CONTRIBUTING.md		  conftest.py		 setup.cfg
LICENSE			  coveragerc_travis	 setup.py*
MANIFEST.in		  data/			 setupegg.py
PULL_REQUEST_TEMPLATE.md  doc/			 sympy/
README.rst		  examples/		 sympy.egg-info/
__pycache__/		  github_deploy_key.enc
asv.conf.travis.json	  isympy.py

2025-10-06 07:24:53,658 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "pytest sympy/solvers/tests/test_solveset_transcendental.py"}'}, '__gemini_function_call_thought_signatures__': {'41cd47aa-e550-4e98-9c86-9b443d27d2fc': 'CqYDAR/MhbaEOHRVMFhiUcUzgP3/wYx9h6X6PFHtZQ6moizLkaonzYny9HfSAky6THxzo4tKe89oi+yFG96DUf8ZlcNdb38OANMMFtWcWZZiSjR4Dshq9BgM1yGwn9pAn5QzvIrmV207wdj7q+gQzzzVunJUJ371Hv7JCtrCSA82M2vDA1HW+tGBJoiD3fz/35u7JnbHQvmELkv6+lFsU4YOM3CvjBxq+WIPowh09Ki7iSJ1spIwhNSqGYD8iQ/88TgVR82lVORBpj97V1GKlphdx8ptdDz5F09JtmGZUQ192glOC1ZMjfkGCE/PJtfiECCBJ0eHkq33fYpmRsUVxx/i5SQZo6rMBWXoVklK4uFrsa4WyyGiOlhuJyhWl2s3aGfqry6MAFBuu1eBt49q8cYcMfem/tXMmrvSsCaAEcNv+ZyPYNsVcH8u0RWQxkoRx6pMj+bwLFCVg8frIKAnrm0jyK5YbbHClExq4XsB6ies9KoEuQnlV3ZL2GhhecdYtfqhhJy88gr5JUMxtDCIqIfKkYhawxZ3mq7c9bxPwWlIKJmtV7zksiQ='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 586, 'candidates_token_count': 22, 'total_token_count': 716, 'prompt_tokens_details': [{'modality': 1, 'token_count': 865}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 22}], 'thoughts_token_count': 108, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5870648730884899, 'model_name': 'gemini-2.5-pro'} id='run--fa0d2579-2a3d-4f2f-a6db-320fff25b079-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'pytest sympy/solvers/tests/test_solveset_transcendental.py'}, 'id': '41cd47aa-e550-4e98-9c86-9b443d27d2fc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 586, 'output_tokens': 22, 'total_tokens': 716, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 108}}
2025-10-06 07:24:53,660 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: pytest sympy/solvers/tests/test_solveset_transcendental.py
2025-10-06 07:24:54,515 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 07:24:54,515 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
pytest sympy/solvers/tests/test_
_solveset_transcendental.py

[1m============================= test session starts ==============================[0m
platform linux -- Python 3.9.20, pytest-8.4.2, pluggy-1.6.0
architecture: 64-bit
cache:        yes
ground types: python 

rootdir: /testbed
configfile: pytest.ini
[1mcollecting ... [0m[1m
collected 1 item                                                               [0m

sympy/solvers/tests/test_solveset_transcendental.py [31mF[0m[31m                    [100%][0m

=================================== FAILURES ===================================
[31m[1m_________ test_as_set_on_transcendental_eq_raises_notimplementederror __________[0m

expr = Eq(n*cos(n) - 3*sin(n), 0), gen = n, relational = False, domain = Reals
continuous = False

    [0m[94mdef[39;49;00m[90m [39;49;00m[92msolve_univariate_inequality[39;49;00m(expr, gen, relational=[94mTrue[39;49;00m, domain=S.Reals, continuous=[94mFalse[39;49;00m):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Solves a real univariate inequality.[39;49;00m
    [33m[39;49;00m
    [33m    Parameters[39;49;00m
    [33m    ==========[39;49;00m
    [33m[39;49;00m
    [33m    expr : Relational[39;49;00m
    [33m        The target inequality[39;49;00m
    [33m    gen : Symbol[39;49;00m
    [33m        The variable for which the inequality is solved[39;49;00m
    [33m    relational : bool[39;49;00m
    [33m        A Relational type output is expected or not[39;49;00m
    [33m    domain : Set[39;49;00m
    [33m        The domain over which the equation is solved[39;49;00m
    [33m    continuous: bool[39;49;00m
    [33m        True if expr is known to be continuous over the given domain[39;49;00m
    [33m        (and so continuous_domain() doesn't need to be called on it)[39;49;00m
    [33m[39;49;00m
    [33m    Raises[39;49;00m
    [33m    ======[39;49;00m
    [33m[39;49;00m
    [33m    NotImplementedError[39;49;00m
    [33m        The solution of the inequality cannot be determined due to limitation[39;49;00m
    [33m        in :func:`sympy.solvers.solveset.solvify`.[39;49;00m
    [33m[39;49;00m
    [33m    Notes[39;49;00m
    [33m    =====[39;49;00m
    [33m[39;49;00m
    [33m    Currently, we cannot solve all the inequalities due to limitations in[39;49;00m
    [33m    :func:`sympy.solvers.solveset.solvify`. Also, the solution returned for trigonometric inequalities[39;49;00m
    [33m    are restricted in its periodic interval.[39;49;00m
    [33m[39;49;00m
    [33m    See Also[39;49;00m
    [33m    ========[39;49;00m
    [33m[39;49;00m
    [33m    sympy.solvers.solveset.solvify: solver returning solveset solutions with solve's output API[39;49;00m
    [33m[39;49;00m
    [33m    Examples[39;49;00m
    [33m    ========[39;49;00m
    [33m[39;49;00m
    [33m    >>> from sympy.solvers.inequalities import solve_univariate_inequality[39;49;00m
    [33m    >>> from sympy import Symbol, sin, Interval, S[39;49;00m
    [33m    >>> x = Symbol('x')[39;49;00m
    [33m[39;49;00m
    [33m    >>> solve_univariate_inequality(x**2 >= 4, x)[39;49;00m
    [33m    ((2 <= x) & (x < oo)) | ((x <= -2) & (-oo < x))[39;49;00m
    [33m[39;49;00m
    [33m    >>> solve_univariate_inequality(x**2 >= 4, x, relational=False)[39;49;00m
    [33m    Union(Interval(-oo, -2), Interval(2, oo))[39;49;00m
    [33m[39;49;00m
    [33m    >>> domain = Interval(0, S.Infinity)[39;49;00m
    [33m    >>> solve_univariate_inequality(x**2 >= 4, x, False, domain)[39;49;00m
    [33m    Interval(2, oo)[39;49;00m
    [33m[39;49;00m
    [33m    >>> solve_univariate_inequality(sin(x) > 0, x, relational=False)[39;49;00m
    [33m    Interval.open(0, pi)[39;49;00m
    [33m[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[90m [39;49;00m[94mimport[39;49;00m im[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[04m[96m.[39;49;00m[04m[96mcalculus[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (continuous_domain, periodicity,[90m[39;49;00m
            function_range)[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[04m[96m.[39;49;00m[04m[96msolvers[39;49;00m[04m[96m.[39;49;00m[04m[96msolvers[39;49;00m[90m [39;49;00m[94mimport[39;49;00m denoms[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[04m[96m.[39;49;00m[04m[96msolvers[39;49;00m[04m[96m.[39;49;00m[04m[96msolveset[39;49;00m[90m [39;49;00m[94mimport[39;49;00m solvify, solveset[90m[39;49;00m
    [90m[39;49;00m
        [90m# This keeps the function independent of the assumptions about `gen`.[39;49;00m[90m[39;49;00m
        [90m# `solveset` makes sure this function is called only when the domain is[39;49;00m[90m[39;49;00m
        [90m# real.[39;49;00m[90m[39;49;00m
        _gen = gen[90m[39;49;00m
        _domain = domain[90m[39;49;00m
        [94mif[39;49;00m gen.is_extended_real [95mis[39;49;00m [94mFalse[39;49;00m:[90m[39;49;00m
            rv = S.EmptySet[90m[39;49;00m
            [94mreturn[39;49;00m rv [94mif[39;49;00m [95mnot[39;49;00m relational [94melse[39;49;00m rv.as_relational(_gen)[90m[39;49;00m
        [94melif[39;49;00m gen.is_extended_real [95mis[39;49;00m [94mNone[39;49;00m:[90m[39;49;00m
            gen = Dummy([33m'[39;49;00m[33mgen[39;49;00m[33m'[39;49;00m, extended_real=[94mTrue[39;49;00m)[90m[39;49;00m
            [94mtry[39;49;00m:[90m[39;49;00m
                expr = expr.xreplace({_gen: gen})[90m[39;49;00m
            [94mexcept[39;49;00m [96mTypeError[39;49;00m:[90m[39;49;00m
                [94mraise[39;49;00m [96mTypeError[39;49;00m(filldedent([33m'''[39;49;00m[33m[39;49;00m
    [33m                When gen is real, the relational has a complex part[39;49;00m[33m[39;49;00m
    [33m                which leads to an invalid comparison like I < 0.[39;49;00m[33m[39;49;00m
    [33m                [39;49;00m[33m'''[39;49;00m))[90m[39;49;00m
    [90m[39;49;00m
        rv = [94mNone[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mif[39;49;00m expr [95mis[39;49;00m S.true:[90m[39;49;00m
            rv = domain[90m[39;49;00m
    [90m[39;49;00m
        [94melif[39;49;00m expr [95mis[39;49;00m S.false:[90m[39;49;00m
            rv = S.EmptySet[90m[39;49;00m
    [90m[39;49;00m
        [94melse[39;49;00m:[90m[39;49;00m
            e = expr.lhs - expr.rhs[90m[39;49;00m
            period = periodicity(e, gen)[90m[39;49;00m
            [94mif[39;49;00m period == S.Zero:[90m[39;49;00m
                e = expand_mul(e)[90m[39;49;00m
                const = expr.func(e, [94m0[39;49;00m)[90m[39;49;00m
                [94mif[39;49;00m const [95mis[39;49;00m S.true:[90m[39;49;00m
                    rv = domain[90m[39;49;00m
                [94melif[39;49;00m const [95mis[39;49;00m S.false:[90m[39;49;00m
                    rv = S.EmptySet[90m[39;49;00m
            [94melif[39;49;00m period [95mis[39;49;00m [95mnot[39;49;00m [94mNone[39;49;00m:[90m[39;49;00m
                frange = function_range(e, gen, domain)[90m[39;49;00m
    [90m[39;49;00m
                rel = expr.rel_op[90m[39;49;00m
                [94mif[39;49;00m rel == [33m'[39;49;00m[33m<[39;49;00m[33m'[39;49;00m [95mor[39;49;00m rel == [33m'[39;49;00m[33m<=[39;49;00m[33m'[39;49;00m:[90m[39;49;00m
                    [94mif[39;49;00m expr.func(frange.sup, [94m0[39;49;00m):[90m[39;49;00m
                        rv = domain[90m[39;49;00m
                    [94melif[39;49;00m [95mnot[39;49;00m expr.func(frange.inf, [94m0[39;49;00m):[90m[39;49;00m
                        rv = S.EmptySet[90m[39;49;00m
    [90m[39;49;00m
                [94melif[39;49;00m rel == [33m'[39;49;00m[33m>[39;49;00m[33m'[39;49;00m [95mor[39;49;00m rel == [33m'[39;49;00m[33m>=[39;49;00m[33m'[39;49;00m:[90m[39;49;00m
                    [94mif[39;49;00m expr.func(frange.inf, [94m0[39;49;00m):[90m[39;49;00m
                        rv = domain[90m[39;49;00m
                    [94melif[39;49;00m [95mnot[39;49;00m expr.func(frange.sup, [94m0[39;49;00m):[90m[39;49;00m
                        rv = S.EmptySet[90m[39;49;00m
    [90m[39;49;00m
                inf, sup = domain.inf, domain.sup[90m[39;49;00m
                [94mif[39;49;00m sup - inf [95mis[39;49;00m S.Infinity:[90m[39;49;00m
                    domain = Interval([94m0[39;49;00m, period, [94mFalse[39;49;00m, [94mTrue[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
            [94mif[39;49;00m rv [95mis[39;49;00m [94mNone[39;49;00m:[90m[39;49;00m
                n, d = e.as_numer_denom()[90m[39;49;00m
                [94mtry[39;49;00m:[90m[39;49;00m
                    [94mif[39;49;00m gen [95mnot[39;49;00m [95min[39;49;00m n.free_symbols [95mand[39;49;00m [96mlen[39;49;00m(e.free_symbols) > [94m1[39;49;00m:[90m[39;49;00m
                        [94mraise[39;49;00m [96mValueError[39;49;00m[90m[39;49;00m
                    [90m# this might raise ValueError on its own[39;49;00m[90m[39;49;00m
                    [90m# or it might give None...[39;49;00m[90m[39;49;00m
>                   solns = solvify(e, gen, domain)[90m[39;49;00m

[1m[31msympy/solvers/inequalities.py[0m:524: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

f = n*cos(n) - 3*sin(n), symbol = n, domain = Reals

    [0m[94mdef[39;49;00m[90m [39;49;00m[92msolvify[39;49;00m(f, symbol, domain):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Solves an equation using solveset and returns the solution in accordance[39;49;00m
    [33m    with the `solve` output API.[39;49;00m
    [33m[39;49;00m
    [33m    Returns[39;49;00m
    [33m    =======[39;49;00m
    [33m[39;49;00m
    [33m    We classify the output based on the type of solution returned by `solveset`.[39;49;00m
    [33m[39;49;00m
    [33m    Solution    |    Output[39;49;00m
    [33m    ----------------------------------------[39;49;00m
    [33m    FiniteSet   | list[39;49;00m
    [33m[39;49;00m
    [33m    ImageSet,   | list (if `f` is periodic)[39;49;00m
    [33m    Union       |[39;49;00m
    [33m[39;49;00m
    [33m    EmptySet    | empty list[39;49;00m
    [33m[39;49;00m
    [33m    Others      | None[39;49;00m
    [33m[39;49;00m
    [33m[39;49;00m
    [33m    Raises[39;49;00m
    [33m    ======[39;49;00m
    [33m[39;49;00m
    [33m    NotImplementedError[39;49;00m
    [33m        A ConditionSet is the input.[39;49;00m
    [33m[39;49;00m
    [33m    Examples[39;49;00m
    [33m    ========[39;49;00m
    [33m[39;49;00m
    [33m    >>> from sympy.solvers.solveset import solvify, solveset[39;49;00m
    [33m    >>> from sympy.abc import x[39;49;00m
    [33m    >>> from sympy import S, tan, sin, exp[39;49;00m
    [33m    >>> solvify(x**2 - 9, x, S.Reals)[39;49;00m
    [33m    [-3, 3][39;49;00m
    [33m    >>> solvify(sin(x) - 1, x, S.Reals)[39;49;00m
    [33m    [pi/2][39;49;00m
    [33m    >>> solvify(tan(x), x, S.Reals)[39;49;00m
    [33m    [0][39;49;00m
    [33m    >>> solvify(exp(x) - 1, x, S.Complexes)[39;49;00m
    [33m[39;49;00m
    [33m    >>> solvify(exp(x) - 1, x, S.Reals)[39;49;00m
    [33m    [0][39;49;00m
    [33m[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        solution_set = solveset(f, symbol, domain)[90m[39;49;00m
        result = [94mNone[39;49;00m[90m[39;49;00m
        [94mif[39;49;00m solution_set [95mis[39;49;00m S.EmptySet:[90m[39;49;00m
            result = [][90m[39;49;00m
    [90m[39;49;00m
        [94melif[39;49;00m [96misinstance[39;49;00m(solution_set, ConditionSet):[90m[39;49;00m
>           [94mraise[39;49;00m [96mNotImplementedError[39;49;00m([33m'[39;49;00m[33msolveset is unable to solve this equation.[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
[1m[31mE           NotImplementedError: solveset is unable to solve this equation.[0m

[1m[31msympy/solvers/solveset.py[0m:2138: NotImplementedError

[33mDuring handling of the above exception, another exception occurred:[0m

    [0m[94mdef[39;49;00m[90m [39;49;00m[92mtest_as_set_on_transcendental_eq_raises_notimplementederror[39;49;00m():[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    This test reproduces a bug where as_set() on a transcendental equation[39;49;00m
    [33m    raises NotImplementedError instead of returning a ConditionSet.[39;49;00m
    [33m[39;49;00m
    [33m    The test asserts the fixed behavior. On a version with the bug, the[39;49;00m
    [33m    test will fail with an unhandled NotImplementedError before the[39;49;00m
    [33m    assertion is reached.[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        [90m# From the provided context file, `n` is defined as a real symbol.[39;49;00m[90m[39;49;00m
        n = Symbol([33m'[39;49;00m[33mn[39;49;00m[33m'[39;49;00m, real=[94mTrue[39;49;00m)[90m[39;49;00m
        eq = Eq(n*cos(n) - [94m3[39;49;00m*sin(n), [94m0[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
        [90m# The original bug report states that eq.as_set() raises NotImplementedError.[39;49;00m[90m[39;49;00m
        [90m# eq.as_set() on a single-variable equation calls solveset.[39;49;00m[90m[39;49;00m
        [90m# Since n is a real symbol, the domain for solveset should be S.Reals.[39;49;00m[90m[39;49;00m
        [90m# The desired behavior is for this call to return a ConditionSet.[39;49;00m[90m[39;49;00m
>       [94massert[39;49;00m eq.as_set() == ConditionSet(n, eq, S.Reals)[90m[39;49;00m

[1m[31msympy/solvers/tests/test_solveset_transcendental.py[0m:25: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31msympy/logic/boolalg.py[0m:159: in as_set
    [0m[94mreturn[39;49;00m [96mself[39;49;00m.subs(reps)._eval_as_set()[90m[39;49;00m
[1m[31msympy/core/relational.py[0m:395: in _eval_as_set
    [0m[94mreturn[39;49;00m solve_univariate_inequality([96mself[39;49;00m, x, relational=[94mFalse[39;49;00m)[90m[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

expr = Eq(n*cos(n) - 3*sin(n), 0), gen = n, relational = False, domain = Reals
continuous = False

    [0m[94mdef[39;49;00m[90m [39;49;00m[92msolve_univariate_inequality[39;49;00m(expr, gen, relational=[94mTrue[39;49;00m, domain=S.Reals, continuous=[94mFalse[39;49;00m):[90m[39;49;00m
    [90m    [39;49;00m[33m"""Solves a real univariate inequality.[39;49;00m
    [33m[39;49;00m
    [33m    Parameters[39;49;00m
    [33m    ==========[39;49;00m
    [33m[39;49;00m
    [33m    expr : Relational[39;49;00m
    [33m        The target inequality[39;49;00m
    [33m    gen : Symbol[39;49;00m
    [33m        The variable for which the inequality is solved[39;49;00m
    [33m    relational : bool[39;49;00m
    [33m        A Relational type output is expected or not[39;49;00m
    [33m    domain : Set[39;49;00m
    [33m        The domain over which the equation is solved[39;49;00m
    [33m    continuous: bool[39;49;00m
    [33m        True if expr is known to be continuous over the given domain[39;49;00m
    [33m        (and so continuous_domain() doesn't need to be called on it)[39;49;00m
    [33m[39;49;00m
    [33m    Raises[39;49;00m
    [33m    ======[39;49;00m
    [33m[39;49;00m
    [33m    NotImplementedError[39;49;00m
    [33m        The solution of the inequality cannot be determined due to limitation[39;49;00m
    [33m        in :func:`sympy.solvers.solveset.solvify`.[39;49;00m
    [33m[39;49;00m
    [33m    Notes[39;49;00m
    [33m    =====[39;49;00m
    [33m[39;49;00m
    [33m    Currently, we cannot solve all the inequalities due to limitations in[39;49;00m
    [33m    :func:`sympy.solvers.solveset.solvify`. Also, the solution returned for trigonometric inequalities[39;49;00m
    [33m    are restricted in its periodic interval.[39;49;00m
    [33m[39;49;00m
    [33m    See Also[39;49;00m
    [33m    ========[39;49;00m
    [33m[39;49;00m
    [33m    sympy.solvers.solveset.solvify: solver returning solveset solutions with solve's output API[39;49;00m
    [33m[39;49;00m
    [33m    Examples[39;49;00m
    [33m    ========[39;49;00m
    [33m[39;49;00m
    [33m    >>> from sympy.solvers.inequalities import solve_univariate_inequality[39;49;00m
    [33m    >>> from sympy import Symbol, sin, Interval, S[39;49;00m
    [33m    >>> x = Symbol('x')[39;49;00m
    [33m[39;49;00m
    [33m    >>> solve_univariate_inequality(x**2 >= 4, x)[39;49;00m
    [33m    ((2 <= x) & (x < oo)) | ((x <= -2) & (-oo < x))[39;49;00m
    [33m[39;49;00m
    [33m    >>> solve_univariate_inequality(x**2 >= 4, x, relational=False)[39;49;00m
    [33m    Union(Interval(-oo, -2), Interval(2, oo))[39;49;00m
    [33m[39;49;00m
    [33m    >>> domain = Interval(0, S.Infinity)[39;49;00m
    [33m    >>> solve_univariate_inequality(x**2 >= 4, x, False, domain)[39;49;00m
    [33m    Interval(2, oo)[39;49;00m
    [33m[39;49;00m
    [33m    >>> solve_univariate_inequality(sin(x) > 0, x, relational=False)[39;49;00m
    [33m    Interval.open(0, pi)[39;49;00m
    [33m[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[90m [39;49;00m[94mimport[39;49;00m im[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[04m[96m.[39;49;00m[04m[96mcalculus[39;49;00m[04m[96m.[39;49;00m[04m[96mutil[39;49;00m[90m [39;49;00m[94mimport[39;49;00m (continuous_domain, periodicity,[90m[39;49;00m
            function_range)[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[04m[96m.[39;49;00m[04m[96msolvers[39;49;00m[04m[96m.[39;49;00m[04m[96msolvers[39;49;00m[90m [39;49;00m[94mimport[39;49;00m denoms[90m[39;49;00m
        [94mfrom[39;49;00m[90m [39;49;00m[04m[96msympy[39;49;00m[04m[96m.[39;49;00m[04m[96msolvers[39;49;00m[04m[96m.[39;49;00m[04m[96msolveset[39;49;00m[90m [39;49;00m[94mimport[39;49;00m solvify, solveset[90m[39;49;00m
    [90m[39;49;00m
        [90m# This keeps the function independent of the assumptions about `gen`.[39;49;00m[90m[39;49;00m
        [90m# `solveset` makes sure this function is called only when the domain is[39;49;00m[90m[39;49;00m
        [90m# real.[39;49;00m[90m[39;49;00m
        _gen = gen[90m[39;49;00m
        _domain = domain[90m[39;49;00m
        [94mif[39;49;00m gen.is_extended_real [95mis[39;49;00m [94mFalse[39;49;00m:[90m[39;49;00m
            rv = S.EmptySet[90m[39;49;00m
            [94mreturn[39;49;00m rv [94mif[39;49;00m [95mnot[39;49;00m relational [94melse[39;49;00m rv.as_relational(_gen)[90m[39;49;00m
        [94melif[39;49;00m gen.is_extended_real [95mis[39;49;00m [94mNone[39;49;00m:[90m[39;49;00m
            gen = Dummy([33m'[39;49;00m[33mgen[39;49;00m[33m'[39;49;00m, extended_real=[94mTrue[39;49;00m)[90m[39;49;00m
            [94mtry[39;49;00m:[90m[39;49;00m
                expr = expr.xreplace({_gen: gen})[90m[39;49;00m
            [94mexcept[39;49;00m [96mTypeError[39;49;00m:[90m[39;49;00m
                [94mraise[39;49;00m [96mTypeError[39;49;00m(filldedent([33m'''[39;49;00m[33m[39;49;00m
    [33m                When gen is real, the relational has a complex part[39;49;00m[33m[39;49;00m
    [33m                which leads to an invalid comparison like I < 0.[39;49;00m[33m[39;49;00m
    [33m                [39;49;00m[33m'''[39;49;00m))[90m[39;49;00m
    [90m[39;49;00m
        rv = [94mNone[39;49;00m[90m[39;49;00m
    [90m[39;49;00m
        [94mif[39;49;00m expr [95mis[39;49;00m S.true:[90m[39;49;00m
            rv = domain[90m[39;49;00m
    [90m[39;49;00m
        [94melif[39;49;00m expr [95mis[39;49;00m S.false:[90m[39;49;00m
            rv = S.EmptySet[90m[39;49;00m
    [90m[39;49;00m
        [94melse[39;49;00m:[90m[39;49;00m
            e = expr.lhs - expr.rhs[90m[39;49;00m
            period = periodicity(e, gen)[90m[39;49;00m
            [94mif[39;49;00m period == S.Zero:[90m[39;49;00m
                e = expand_mul(e)[90m[39;49;00m
                const = expr.func(e, [94m0[39;49;00m)[90m[39;49;00m
                [94mif[39;49;00m const [95mis[39;49;00m S.true:[90m[39;49;00m
                    rv = domain[90m[39;49;00m
                [94melif[39;49;00m const [95mis[39;49;00m S.false:[90m[39;49;00m
                    rv = S.EmptySet[90m[39;49;00m
            [94melif[39;49;00m period [95mis[39;49;00m [95mnot[39;49;00m [94mNone[39;49;00m:[90m[39;49;00m
                frange = function_range(e, gen, domain)[90m[39;49;00m
    [90m[39;49;00m
                rel = expr.rel_op[90m[39;49;00m
                [94mif[39;49;00m rel == [33m'[39;49;00m[33m<[39;49;00m[33m'[39;49;00m [95mor[39;49;00m rel == [33m'[39;49;00m[33m<=[39;49;00m[33m'[39;49;00m:[90m[39;49;00m
                    [94mif[39;49;00m expr.func(frange.sup, [94m0[39;49;00m):[90m[39;49;00m
                        rv = domain[90m[39;49;00m
                    [94melif[39;49;00m [95mnot[39;49;00m expr.func(frange.inf, [94m0[39;49;00m):[90m[39;49;00m
                        rv = S.EmptySet[90m[39;49;00m
    [90m[39;49;00m
                [94melif[39;49;00m rel == [33m'[39;49;00m[33m>[39;49;00m[33m'[39;49;00m [95mor[39;49;00m rel == [33m'[39;49;00m[33m>=[39;49;00m[33m'[39;49;00m:[90m[39;49;00m
                    [94mif[39;49;00m expr.func(frange.inf, [94m0[39;49;00m):[90m[39;49;00m
                        rv = domain[90m[39;49;00m
                    [94melif[39;49;00m [95mnot[39;49;00m expr.func(frange.sup, [94m0[39;49;00m):[90m[39;49;00m
                        rv = S.EmptySet[90m[39;49;00m
    [90m[39;49;00m
                inf, sup = domain.inf, domain.sup[90m[39;49;00m
                [94mif[39;49;00m sup - inf [95mis[39;49;00m S.Infinity:[90m[39;49;00m
                    domain = Interval([94m0[39;49;00m, period, [94mFalse[39;49;00m, [94mTrue[39;49;00m)[90m[39;49;00m
    [90m[39;49;00m
            [94mif[39;49;00m rv [95mis[39;49;00m [94mNone[39;49;00m:[90m[39;49;00m
                n, d = e.as_numer_denom()[90m[39;49;00m
                [94mtry[39;49;00m:[90m[39;49;00m
                    [94mif[39;49;00m gen [95mnot[39;49;00m [95min[39;49;00m n.free_symbols [95mand[39;49;00m [96mlen[39;49;00m(e.free_symbols) > [94m1[39;49;00m:[90m[39;49;00m
                        [94mraise[39;49;00m [96mValueError[39;49;00m[90m[39;49;00m
                    [90m# this might raise ValueError on its own[39;49;00m[90m[39;49;00m
                    [90m# or it might give None...[39;49;00m[90m[39;49;00m
                    solns = solvify(e, gen, domain)[90m[39;49;00m
                    [94mif[39;49;00m solns [95mis[39;49;00m [94mNone[39;49;00m:[90m[39;49;00m
                        [90m# in which case we raise ValueError[39;49;00m[90m[39;49;00m
                        [94mraise[39;49;00m [96mValueError[39;49;00m[90m[39;49;00m
                [94mexcept[39;49;00m ([96mValueError[39;49;00m, [96mNotImplementedError[39;49;00m):[90m[39;49;00m
                    [90m# replace gen with generic x since it's[39;49;00m[90m[39;49;00m
                    [90m# univariate anyway[39;49;00m[90m[39;49;00m
>                   [94mraise[39;49;00m [96mNotImplementedError[39;49;00m(filldedent([33m'''[39;49;00m[33m[39;49;00m
    [33m                    The inequality, [39;49;00m[33m%s[39;49;00m[33m, cannot be solved using[39;49;00m[33m[39;49;00m
    [33m                    solve_univariate_inequality.[39;49;00m[33m[39;49;00m
    [33m                    [39;49;00m[33m'''[39;49;00m % expr.subs(gen, Symbol([33m'[39;49;00m[33mx[39;49;00m[33m'[39;49;00m))))[90m[39;49;00m
[1m[31mE                   NotImplementedError: [0m
[1m[31mE                   The inequality, Eq(x*cos(x) - 3*sin(x), 0), cannot be solved using[0m
[1m[31mE                   solve_univariate_inequality.[0m

[1m[31msympy/solvers/inequalities.py[0m:531: NotImplementedError
[33m=============================== warnings summary ===============================[0m
../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474
  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: doctestplus
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[31m[1m                                DO *NOT* COMMIT!                                [0m
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m sympy/solvers/tests/test_solveset_transcendental.py::[1mtest_as_set_on_transcendental_eq_raises_notimplementederror[0m - NotImplementedError: 
[31m========================= [31m[1m1 failed[0m, [33m1 warning[0m[31m in 0.38s[0m[31m =========================[0m

2025-10-06 07:25:16,180 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='The test command `pytest sympy/solvers/tests/test_solveset_transcendental.py` failed with the following output:\n```\npytest sympy/solvers/tests/test_\n_solveset_transcendental.py\n\n============================= test session starts ==============================\nplatform linux -- Python 3.9.20, pytest-8.4.2, pluggy-1.6.0\narchitecture: 64-bit\ncache:        yes\nground types: python \n\nrootdir: /testbed\nconfigfile: pytest.ini\ncollecting ... \ncollected 1 item                                                               \n\nsympy/solvers/tests/test_solveset_transcendental.py F                    [100%]\n\n=================================== FAILURES ===================================\n_________ test_as_set_on_transcendental_eq_raises_notimplementederror __________\n\nexpr = Eq(n*cos(n) - 3*sin(n), 0), gen = n, relational = False, domain = Reals\ncontinuous = False\n\n    def solve_univariate_inequality(expr, gen, relational=True, domain=S.Reals, continuous=False):\n        """Solves a real univariate inequality.\n\n        Parameters\n        ==========\n\n        expr : Relational\n            The target inequality\n        gen : Symbol\n            The variable for which the inequality is solved\n        relational : bool\n            A Relational type output is expected or not\n        domain : Set\n            The domain over which the equation is solved\n        continuous: bool\n            True if expr is known to be continuous over the given domain\n            (and so continuous_domain() doesn\'t need to be called on it)\n\n        Raises\n        ======\n\n        NotImplementedError\n            The solution of the inequality cannot be determined due to limitation\n            in :func:`sympy.solvers.solveset.solvify`.\n\n        Notes\n        =====\n\n        Currently, we cannot solve all the inequalities due to limitations in\n        :func:`sympy.solvers.solveset.solvify`. Also, the solution returned for trigonometric inequalities\n        are restricted in its periodic interval.\n\n        See Also\n        ========\n\n        sympy.solvers.solveset.solvify: solver returning solveset solutions with solve\'s output API\n\n        Examples\n        ========\n\n        >>> from sympy.solvers.inequalities import solve_univariate_inequality\n        >>> from sympy import Symbol, sin, Interval, S\n        >>> x = Symbol(\'x\')\n\n        >>> solve_univariate_inequality(x**2 >= 4, x)\n        ((2 <= x) & (x < oo)) | ((x <= -2) & (-oo < x))\n\n        >>> solve_univariate_inequality(x**2 >= 4, x, relational=False)\n        Union(Interval(-oo, -2), Interval(2, oo))\n\n        >>> domain = Interval(0, S.Infinity)\n        >>> solve_univariate_inequality(x**2 >= 4, x, False, domain)\n        Interval(2, oo)\n\n        >>> solve_univariate_inequality(sin(x) > 0, x, relational=False)\n        Interval.open(0, pi)\n\n        """\n        from sympy import im\n        from sympy.calculus.util import (continuous_domain, periodicity,\n            function_range)\n        from sympy.solvers.solvers import denoms\n        from sympy.solvers.solveset import solvify, solveset\n\n        # This keeps the function independent of the assumptions about `gen`.\n        # `solveset` makes sure this function is called only when the domain is\n        # real.\n        _gen = gen\n        _domain = domain\n        if gen.is_extended_real is False:\n            rv = S.EmptySet\n            return rv if not relational else rv.as_relational(_gen)\n        elif gen.is_extended_real is None:\n            gen = Dummy(\'gen\', extended_real=True)\n            try:\n                expr = expr.xreplace({_gen: gen})\n            except TypeError:\n                raise TypeError(filldedent(\'\'\'\n                When gen is real, the relational has a complex part\n                which leads to an invalid comparison like I < 0.\n                \'\'\'))\n\n        rv = None\n\n        if expr is S.true:\n            rv = domain\n\n        elif expr is S.false:\n            rv = S.EmptySet\n\n        else:\n            e = expr.lhs - expr.rhs\n            period = periodicity(e, gen)\n            if period == S.Zero:\n                e = expand_mul(e)\n                const = expr.func(e, 0)\n                if const is S.true:\n                    rv = domain\n                elif const is S.false:\n                    rv = S.EmptySet\n            elif period is not None:\n                frange = function_range(e, gen, domain)\n\n                rel = expr.rel_op\n                if rel == \'<\' or rel == \'<=\':\n                    if expr.func(frange.sup, 0):\n                        rv = domain\n                    elif not expr.func(frange.inf, 0):\n                        rv = S.EmptySet\n\n                elif rel == \'>\' or rel == \'>=\':\n                    if expr.func(frange.inf, 0):\n                        rv = domain\n                    elif not expr.func(frange.sup, 0):\n                        rv = S.EmptySet\n\n                inf, sup = domain.inf, domain.sup\n                if sup - inf is S.Infinity:\n                    domain = Interval(0, period, False, True)\n\n            if rv is None:\n                n, d = e.as_numer_denom()\n                try:\n                    if gen not in n.free_symbols and len(e.free_symbols) > 1:\n                        raise ValueError\n                    # this might raise ValueError on its own\n                    # or it might give None...\n>                   solns = solvify(e, gen, domain)\n\nsympy/solvers/inequalities.py:524: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nf = n*cos(n) - 3*sin(n), symbol = n, domain = Reals\n\n    def solvify(f, symbol, domain):\n        """Solves an equation using solveset and returns the solution in accordance\n        with the `solve` output API.\n\n        Returns\n        =======\n\n        We classify the output based on the type of solution returned by `solveset`.\n\n        Solution    |    Output\n        ----------------------------------------\n        FiniteSet   | list\n\n        ImageSet,   | list (if `f` is periodic)\n        Union       |\n\n        EmptySet    | empty list\n\n        Others      | None\n\n\n        Raises\n        ======\n\n        NotImplementedError\n            A ConditionSet is the input.\n\n        Examples\n        ========\n\n        >>> from sympy.solvers.solveset import solvify, solveset\n        >>> from sympy.abc import x\n        >>> from sympy import S, tan, sin, exp\n        >>> solvify(x**2 - 9, x, S.Reals)\n        [-3, 3]\n        >>> solvify(sin(x) - 1, x, S.Reals)\n        [pi/2]\n        >>> solvify(tan(x), x, S.Reals)\n        [0]\n        >>> solvify(exp(x) - 1, x, S.Complexes)\n\n        >>> solvify(exp(x) - 1, x, S.Reals)\n        [0]\n\n        """\n        solution_set = solveset(f, symbol, domain)\n        result = None\n        if solution_set is S.EmptySet:\n            result = []\n\n        elif isinstance(solution_set, ConditionSet):\n>           raise NotImplementedError(\'solveset is unable to solve this equation.\')\nE           NotImplementedError: solveset is unable to solve this equation.\n\nsympy/solvers/solveset.py:2138: NotImplementedError\n\nDuring handling of the above exception, another exception occurred:\n\n    def test_as_set_on_transcendental_eq_raises_notimplementederror():\n        """\n        This test reproduces a bug where as_set() on a transcendental equation\n        raises NotImplementedError instead of returning a ConditionSet.\n\n        The test asserts the fixed behavior. On a version with the bug, the\n        test will fail with an unhandled NotImplementedError before the\n        assertion is reached.\n        """\n        # From the provided context file, `n` is defined as a real symbol.\n        n = Symbol(\'n\', real=True)\n        eq = Eq(n*cos(n) - 3*sin(n), 0)\n\n        # The original bug report states that eq.as_set() raises NotImplementedError.\n        # eq.as_set() on a single-variable equation calls solveset.\n        # Since n is a real symbol, the domain for solveset should be S.Reals.\n        # The desired behavior is for this call to return a ConditionSet.\n>       assert eq.as_set() == ConditionSet(n, eq, S.Reals)\n\nsympy/solvers/tests/test_solveset_transcendental.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsympy/logic/boolalg.py:159: in as_set\n    return self.subs(reps)._eval_as_set()\nsympy/core/relational.py:395: in _eval_as_set\n    return solve_univariate_inequality(self, x, relational=False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nexpr = Eq(n*cos(n) - 3*sin(n), 0), gen = n, relational = False, domain = Reals\ncontinuous = False\n\n    def solve_univariate_inequality(expr, gen, relational=True, domain=S.Reals, continuous=False):\n        """Solves a real univariate inequality.\n\n        Parameters\n        ==========\n\n        expr : Relational\n            The target inequality\n        gen : Symbol\n            The variable for which the inequality is solved\n        relational : bool\n            A Relational type output is expected or not\n        domain : Set\n            The domain over which the equation is solved\n        continuous: bool\n            True if expr is known to be continuous over the given domain\n            (and so continuous_domain() doesn\'t need to be called on it)\n\n        Raises\n        ======\n\n        NotImplementedError\n            The solution of the inequality cannot be determined due to limitation\n            in :func:`sympy.solvers.solveset.solvify`.\n\n        Notes\n        =====\n\n        Currently, we cannot solve all the inequalities due to limitations in\n        :func:`sympy.solvers.solveset.solvify`. Also, the solution returned for trigonometric inequalities\n        are restricted in its periodic interval.\n\n        See Also\n        ========\n\n        sympy.solvers.solveset.solvify: solver returning solveset solutions with solve\'s output API\n\n        Examples\n        ========\n\n        >>> from sympy.solvers.inequalities import solve_univariate_inequality\n        >>> from sympy import Symbol, sin, Interval, S\n        >>> x = Symbol(\'x\')\n\n        >>> solve_univariate_inequality(x**2 >= 4, x)\n        ((2 <= x) & (x < oo)) | ((x <= -2) & (-oo < x))\n\n        >>> solve_univariate_inequality(x**2 >= 4, x, relational=False)\n        Union(Interval(-oo, -2), Interval(2, oo))\n\n        >>> domain = Interval(0, S.Infinity)\n        >>> solve_univariate_inequality(x**2 >= 4, x, False, domain)\n        Interval(2, oo)\n\n        >>> solve_univariate_inequality(sin(x) > 0, x, relational=False)\n        Interval.open(0, pi)\n\n        """\n        from sympy import im\n        from sympy.calculus.util import (continuous_domain, periodicity,\n            function_range)\n        from sympy.solvers.solvers import denoms\n        from sympy.solvers.solveset import solvify, solveset\n\n        # This keeps the function independent of the assumptions about `gen`.\n        # `solveset` makes sure this function is called only when the domain is\n        # real.\n        _gen = gen\n        _domain = domain\n        if gen.is_extended_real is False:\n            rv = S.EmptySet\n            return rv if not relational else rv.as_relational(_gen)\n        elif gen.is_extended_real is None:\n            gen = Dummy(\'gen\', extended_real=True)\n            try:\n                expr = expr.xreplace({_gen: gen})\n            except TypeError:\n                raise TypeError(filldedent(\'\'\'\n                When gen is real, the relational has a complex part\n                which leads to an invalid comparison like I < 0.\n                \'\'\'))\n\n        rv = None\n\n        if expr is S.true:\n            rv = domain\n\n        elif expr is S.false:\n            rv = S.EmptySet\n\n        else:\n            e = expr.lhs - expr.rhs\n            period = periodicity(e, gen)\n            if period == S.Zero:\n                e = expand_mul(e)\n                const = expr.func(e, 0)\n                if const is S.true:\n                    rv = domain\n                elif const is S.false:\n                    rv = S.EmptySet\n            elif period is not None:\n                frange = function_range(e, gen, domain)\n\n                rel = expr.rel_op\n                if rel == \'<\' or rel == \'<=\':\n                    if expr.func(frange.sup, 0):\n                        rv = domain\n                    elif not expr.func(frange.inf, 0):\n                        rv = S.EmptySet\n\n                elif rel == \'>\' or rel == \'>=\':\n                    if expr.func(frange.inf, 0):\n                        rv = domain\n                    elif not expr.func(frange.sup, 0):\n                        rv = S.EmptySet\n\n                inf, sup = domain.inf, domain.sup\n                if sup - inf is S.Infinity:\n                    domain = Interval(0, period, False, True)\n\n            if rv is None:\n                n, d = e.as_numer_denom()\n                try:\n                    if gen not in n.free_symbols and len(e.free_symbols) > 1:\n                        raise ValueError\n                    # this might raise ValueError on its own\n                    # or it might give None...\n                    solns = solvify(e, gen, domain)\n                    if solns is None:\n                        # in which case we raise ValueError\n                        raise ValueError\n                except (ValueError, NotImplementedError):\n                    # replace gen with generic x since it\'s\n                    # univariate anyway\n>                   raise NotImplementedError(filldedent(\'\'\'\n                    The inequality, %s, cannot be solved using\n                    solve_univariate_inequality.\n                    \'\'\' % expr.subs(gen, Symbol(\'x\'))))\nE                   NotImplementedError: \nE                   The inequality, Eq(x*cos(x) - 3*sin(x), 0), cannot be solved using\nE                   solve_univariate_inequality.\n\nsympy/solvers/inequalities.py:531: NotImplementedError\n=============================== warnings summary ===============================\n../opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474\n  /opt/miniconda3/envs/testbed/lib/python3.9/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: doctestplus\n  \n    self._warn_or_fail_if_strict(f"Unknown config option: {key}\\\\n")\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n                                DO *NOT* COMMIT!                                \n=========================== short test summary info ============================\nFAILED sympy/solvers/tests/test_solveset_transcendental.py::test_as_set_on_transcendental_eq_raises_notimplementederror - NotImplementedError: \n========================= 1 failed, 1 warning in 0.38s =========================\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 1099, 'end_index': 1393, 'uri': 'http://docs.sympy.org/latest/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 1205, 'end_index': 1580, 'uri': 'http://docs.sympy.org/dev/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 1431, 'end_index': 1895, 'uri': 'http://docs.sympy.org/latest/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 1734, 'end_index': 2433, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 2438, 'end_index': 3057, 'uri': 'http://docs.sympy.org/latest/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 3119, 'end_index': 3415, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 3313, 'end_index': 4246, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 4064, 'end_index': 4754, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 4517, 'end_index': 5266, 'uri': 'http://docs.sympy.org/dev/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 5067, 'end_index': 5611, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 5786, 'end_index': 6698, 'uri': 'http://docs.sympy.org/dev/_modules/sympy/solvers/solveset.html', 'title': '', 'license_': ''}, {'start_index': 6582, 'end_index': 7138, 'uri': 'http://docs.sympy.org/dev/_modules/sympy/solvers/solveset.html', 'title': '', 'license_': ''}, {'start_index': 8804, 'end_index': 9098, 'uri': 'http://docs.sympy.org/latest/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 8910, 'end_index': 9285, 'uri': 'http://docs.sympy.org/dev/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 9136, 'end_index': 9600, 'uri': 'http://docs.sympy.org/latest/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 9439, 'end_index': 10138, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 10143, 'end_index': 10762, 'uri': 'http://docs.sympy.org/latest/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 10824, 'end_index': 11120, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 11018, 'end_index': 11951, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 11769, 'end_index': 12459, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}, {'start_index': 12222, 'end_index': 12971, 'uri': 'http://docs.sympy.org/dev/_modules/sympy/solvers/inequalities.html', 'title': '', 'license_': ''}, {'start_index': 12772, 'end_index': 13834, 'uri': 'https://github.com/MaeZhao/GBS-Subgraph-Simulation', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 15663, 'candidates_token_count': 3849, 'total_token_count': 19560, 'prompt_tokens_details': [{'modality': 1, 'token_count': 16048}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 3849}], 'thoughts_token_count': 48, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0025539437836874738, 'model_name': 'gemini-2.5-pro'} id='run--0235cdc2-7a6d-4746-bb1c-fb325acbabca-0' usage_metadata={'input_tokens': 15663, 'output_tokens': 3849, 'total_tokens': 19560, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 48}}
2025-10-06 07:25:25,316 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=True reproduced_bug_failure_log='FAILED sympy/solvers/tests/test_solveset_transcendental.py::test_as_set_on_transcendental_eq_raises_notimplementederror - NotImplementedError: \nThe inequality, Eq(x*cos(x) - 3*sin(x), 0), cannot be solved using\nsolve_univariate_inequality.' reproduced_bug_commands=['pytest sympy/solvers/tests/test_solveset_transcendental.py']
2025-10-06 07:25:25,317 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
2025-10-06 07:25:25,317 - thread-139660780025408.app.docker.base_container - INFO - Closing persistent shell...
2025-10-06 07:25:25,417 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
