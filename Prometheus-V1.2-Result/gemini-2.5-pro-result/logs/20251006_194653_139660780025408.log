2025-10-06 19:46:53,389 - thread-139660780025408.app.docker.base_container - INFO - Created temporary project directory: /tmp/tmpfgfu6qgc/django
2025-10-06 19:46:53,389 - thread-139660780025408.app.docker.base_container - DEBUG - Using workdir: /testbed
2025-10-06 19:46:53,389 - thread-139660780025408.app.docker.base_container - INFO - Pulling docker image: swebench/sweb.eval.x86_64.django_1776_django-13158:v1
2025-10-06 19:47:19,211 - thread-139660780025408.app.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_419517ac3c
2025-10-06 19:47:19,215 - thread-139660780025408.app.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_419517ac3c
2025-10-06 19:47:20,248 - thread-139660780025408.app.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-10-06 19:47:20,396 - thread-139660780025408.app.docker.base_container - INFO - Persistent shell is ready
2025-10-06 19:47:20,396 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: . /opt/miniconda3/bin/activate
2025-10-06 19:47:20,520 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:47:20,521 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 19:47:20,521 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: conda activate testbed
2025-10-06 19:47:20,643 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:47:20,643 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 19:47:20,643 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen && locale-gen
2025-10-06 19:47:21,985 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:47:21,985 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
sed -i '/en_US.UTF-8/s/^# //g' /
/etc/locale.gen && locale-gen

Generating locales (this might take a while)...
  en_US.UTF-8... done
Generation complete.

2025-10-06 19:47:21,985 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LANG=en_US.UTF-8
2025-10-06 19:47:22,086 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:47:22,086 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 19:47:22,086 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LANGUAGE=en_US:en
2025-10-06 19:47:22,186 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:47:22,186 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 19:47:22,186 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LC_ALL=en_US.UTF-8
2025-10-06 19:47:22,287 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:47:22,287 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 19:47:22,287 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pip install -e .
2025-10-06 19:47:23,497 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:47:23,497 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
Requirement already satisfied: asgiref>=3.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (3.4.1)
Requirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (2024.2)
Requirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (0.4.4)
Requirement already satisfied: typing-extensions in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from asgiref>=3.2->Django==3.2) (4.1.1)
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 3.2
    Uninstalling Django-3.2:
      Successfully uninstalled Django-3.2
  Running setup.py develop for Django
Successfully installed Django-3.2
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m

2025-10-06 19:47:23,556 - thread-139660780025408.app.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
QuerySet.none() on combined queries returns all results.

Issue description: 
Description
	
I came across this issue on Stack Overflow. I'm not 100% sure it's a bug, but it does seem strange. With this code (excuse the bizarre example filtering):
class Publication(models.Model):
	pass
class Article(models.Model):
	publications = models.ManyToManyField(to=Publication, blank=True, null=True)
class ArticleForm(forms.ModelForm):
	publications = forms.ModelMultipleChoiceField(
		Publication.objects.filter(id__lt=2) | Publication.objects.filter(id__gt=5),
		required=False,
	)
	class Meta:
		model = Article
		fields = ["publications"]
class ArticleAdmin(admin.ModelAdmin):
	form = ArticleForm
This works well. However, changing the ModelMultipleChoiceField queryset to use union() breaks things.
publications = forms.ModelMultipleChoiceField(
	Publication.objects.filter(id__lt=2).union(
		Publication.objects.filter(id__gt=5)
	),
	required=False,
)
The form correctly shows only the matching objects. However, if you submit this form while empty (i.e. you didn't select any publications), ALL objects matching the queryset will be added. Using the OR query, NO objects are added, as I'd expect.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-10-06 19:47:23,556 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-10-06 19:47:23,557 - thread-139660780025408.app.lang_graph.nodes.context_query_message_node - DEBUG - Sending query to ContextProviderNode:
content='Issue title:\nQuerySet.none() on combined queries returns all results.\n\nIssue description: \nDescription\n\t\nI came across this issue on Stack Overflow. I\'m not 100% sure it\'s a bug, but it does seem strange. With this code (excuse the bizarre example filtering):\nclass Publication(models.Model):\n\tpass\nclass Article(models.Model):\n\tpublications = models.ManyToManyField(to=Publication, blank=True, null=True)\nclass ArticleForm(forms.ModelForm):\n\tpublications = forms.ModelMultipleChoiceField(\n\t\tPublication.objects.filter(id__lt=2) | Publication.objects.filter(id__gt=5),\n\t\trequired=False,\n\t)\n\tclass Meta:\n\t\tmodel = Article\n\t\tfields = ["publications"]\nclass ArticleAdmin(admin.ModelAdmin):\n\tform = ArticleForm\nThis works well. However, changing the ModelMultipleChoiceField queryset to use union() breaks things.\npublications = forms.ModelMultipleChoiceField(\n\tPublication.objects.filter(id__lt=2).union(\n\t\tPublication.objects.filter(id__gt=5)\n\t),\n\trequired=False,\n)\nThe form correctly shows only the matching objects. However, if you submit this form while empty (i.e. you didn\'t select any publications), ALL objects matching the queryset will be added. Using the OR query, NO objects are added, as I\'d expect.\n\nIssue comments:\n\n\nOBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,\nincluding ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.\n\n<reasoning>\n1. Analyze bug characteristics:\n   - Core functionality being tested\n   - Input parameters and configurations\n   - Expected error conditions\n   - Environmental dependencies\n\n2. Search requirements:\n   - Required imports and dependencies\n   - Test files exercising similar functionality\n   - Mock/fixture setup patterns\n   - Assertion styles\n   - Error handling tests\n\n3. Focus areas:\n   - All necessary imports (standard library, testing frameworks, mocking utilities)\n   - Dependencies and third-party packages\n   - Test setup and teardown\n   - Mock object configuration\n   - Network/external service simulation\n   - Error condition verification\n</reasoning>\n\nREQUIREMENTS:\n- Return 5 complete, self-contained test cases most similar to bug scenario\n- Must include ALL necessary imports at the start of each test file\n- Must include full test method implementation\n- Must include ALL mock/fixture setup\n- Must include helper functions used by test\n- Must preserve exact file paths and line numbers\n\n<examples>\n<example id="database-timeout">\n<bug>\ndb.execute("SELECT * FROM users").fetchall() \nraises ConnectionTimeout when load is high\n</bug>\n\n<ideal_test_match>\n# File: tests/test_database.py\nimport pytest\nfrom unittest.mock import Mock, patch\nfrom database.exceptions import ConnectionTimeout\nfrom database.models import QueryResult\nfrom database.client import DatabaseClient\n\nclass TestDatabaseTimeout:\n    @pytest.fixture\n    def mock_db_connection(self):\n        conn = Mock()\n        conn.execute.side_effect = [\n            ConnectionTimeout("Connection timed out"),\n            QueryResult(["user1", "user2"])  # Second try succeeds\n        ]\n        return conn\n        \n    def test_handle_timeout_during_query(self, mock_db_connection):\n        # Complete test showing timeout scenario\n        # Including retry logic verification\n        # With all necessary assertions\n</ideal_test_match>\n</example>\n\n<example id="file-permission">\n<bug>\nFileProcessor(\'/root/data.txt\').process() \nfails with PermissionError\n</bug>\n\n<ideal_test_match>\n# File: tests/test_file_processor.py\nimport os\nimport pytest\nfrom unittest.mock import patch, mock_open\nfrom file_processor import FileProcessor\nfrom file_processor.exceptions import ProcessingError\n\nclass TestFilePermissions:\n    @patch(\'os.access\')\n    @patch(\'builtins.open\')\n    def test_file_permission_denied(self, mock_open, mock_access):\n        # Full test setup with mocked file system\n        # Permission denial simulation\n        # Error handling verification\n</ideal_test_match>\n</example>\n\nSearch priority:\n1. Tests of exact same functionality (including import patterns)\n2. Tests with similar error conditions\n3. Tests with comparable mocking patterns\n4. Tests demonstrating similar assertions\n\nFind the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.\n' additional_kwargs={} response_metadata={}
2025-10-06 19:48:25,069 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified and retrieved five relevant test cases that demonstrate functionality related to the reported bug. I focused on tests covering `QuerySet.union()`, `ModelMultipleChoiceField`, and `QuerySet.none()` to provide comprehensive examples of how these features are expected to behave. The selected tests showcase various scenarios, from basic `union` operations to more complex combinations involving annotations and form fields.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2307.0, "relative_path": "tests/queries/tests.py", "end_line": 2322.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 56697, 'candidates_token_count': 277, 'total_token_count': 63102, 'prompt_tokens_details': [{'modality': 1, 'token_count': 56697}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 277}], 'thoughts_token_count': 6128, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -2.6554693228931634, 'model_name': 'gemini-2.5-pro'} id='run--cf79daa0-ac54-4eb9-af5d-720e8544f0a7-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1.0, 'relative_path': 'tests/queries/test_qs_combinators.py', 'end_line': 21.0}, 'id': '9ce685d1-448c-40e3-a4d2-24e8cf8e2631', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1.0, 'relative_path': 'tests/model_forms/tests.py', 'end_line': 20.0}, 'id': 'eb6f124b-9c77-413b-ae70-5844edeef50f', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/model_forms/tests.py', 'start_line': 560.0, 'end_line': 656.0}, 'id': 'da1b7bea-d6a7-4391-b3cd-4008df0e159c', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 1.0, 'relative_path': 'tests/queries/tests.py', 'end_line': 25.0}, 'id': 'ac82e2bf-2e68-4ac9-abb0-8e686efc9f47', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 2221.0, 'relative_path': 'tests/queries/tests.py', 'end_line': 2235.0}, 'id': '9345e422-d878-4815-87cc-65efbf5cb5a0', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 219.0, 'relative_path': 'tests/queries/tests.py', 'end_line': 240.0}, 'id': '6ec5fff2-fbaf-4993-abf0-ca2c893a4bae', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 2307.0, 'relative_path': 'tests/queries/tests.py', 'end_line': 2322.0}, 'id': '044f7ff4-9036-4f56-afa9-b7c181bf2c8d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 56697, 'output_tokens': 277, 'total_tokens': 63102, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 6128}}
2025-10-06 19:49:12,081 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/queries/test_qs_combinators.py", "start_line": 63.0, "end_line": 71.0}'}, '__gemini_function_call_thought_signatures__': {'85a2e849-5ee4-4aaa-aa32-f123c1ef9179': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 60797, 'candidates_token_count': 191, 'total_token_count': 65488, 'cached_content_token_count': 55967, 'prompt_tokens_details': [{'modality': 1, 'token_count': 60797}], 'cache_tokens_details': [{'modality': 1, 'token_count': 55967}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 191}], 'thoughts_token_count': 4500}, 'finish_reason': 'STOP', 'avg_logprobs': -3.2198134816753927, 'model_name': 'gemini-2.5-pro'} id='run--6d60b8c6-0f68-4188-afe1-937c4cc1f2c7-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 10.0, 'relative_path': 'tests/queries/test_qs_combinators.py', 'end_line': 27.0}, 'id': '85a2e849-5ee4-4aaa-aa32-f123c1ef9179', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 112.0, 'relative_path': 'tests/queries/test_qs_combinators.py', 'end_line': 124.0}, 'id': '5896e237-3ae6-4e11-936d-f4b792c417f3', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/forms_tests/tests/test_forms.py', 'start_line': 1.0, 'end_line': 38.0}, 'id': 'f8b5bcf5-bfe1-47c6-aeb0-ad3bd3667d53', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/model_forms/tests.py', 'start_line': 1753.0, 'end_line': 1760.0}, 'id': '322bcf88-ce92-4ac1-8c5f-ab6eb0fc612b', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'start_line': 608.0, 'relative_path': 'tests/forms_tests/tests/test_forms.py', 'end_line': 628.0}, 'id': '65583db9-1df6-4f40-be46-cd430cc78b0e', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/queries/test_qs_combinators.py', 'start_line': 63.0, 'end_line': 71.0}, 'id': '12ed0dd2-fd1b-448a-b577-615699e0b16d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 60797, 'output_tokens': 191, 'total_tokens': 65488, 'input_token_details': {'cache_read': 55967}, 'output_token_details': {'reasoning': 4500}}
2025-10-06 19:49:38,855 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have found 5 relevant test cases for you.\n\n### Test Case 1\nThis test case demonstrates a basic `union` operation, which is the core of the issue. It shows how to combine two simple querysets and verify the results, providing a foundational example of the expected behavior of `union`.\n\n```python\n# File: tests/queries/test_qs_combinators.py\n\nimport operator\n\nfrom django.db import DatabaseError, NotSupportedError, connection\nfrom django.db.models import Exists, F, IntegerField, OuterRef, Value\nfrom django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature\n\nfrom .models import Number, ReservedName\n\n\n@skipUnlessDBFeature(\'supports_select_union\')\nclass QuerySetSetOperationTests(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))\n\n    def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):\n        self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter(\'num\'), ordered)\n\n    def test_simple_union(self):\n        qs1 = Number.objects.filter(num__lte=1)\n        qs2 = Number.objects.filter(num__gte=8)\n        qs3 = Number.objects.filter(num=5)\n        self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)\n\n```\n\n### Test Case 2\nThis test shows how `union` interacts with ordering. The bug report doesn\'t explicitly mention ordering, but it\'s a common source of complexity in querysets. This example demonstrates how to apply ordering to a `union` of querysets, which could be relevant for more complex scenarios.\n\n```python\n# File: tests/queries/test_qs_combinators.py\n\nimport operator\n\nfrom django.db import DatabaseError, NotSupportedError, connection\nfrom django.db.models import Exists, F, IntegerField, OuterRef, Value\nfrom django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature\n\nfrom .models import Number, ReservedName\n\n\n@skipUnlessDBFeature(\'supports_select_union\')\nclass QuerySetSetOperationTests(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))\n\n    def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):\n        self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter(\'num\'), ordered)\n\n    def test_ordering_by_f_expression(self):\n        qs1 = Number.objects.filter(num__lte=1)\n        qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n        self.assertNumbersEqual(qs1.union(qs2).order_by(F(\'num\').desc()), [3, 2, 1, 0])\n```\n\n### Test Case 3\nThis test case is highly relevant as it directly addresses the behavior of a `ModelMultipleChoiceField` when it\'s not required. It confirms that cleaning an empty value (like an empty list) for a non-required `ModelMultipleChoiceField` should result in an `EmptyQuerySet`. This is the expected behavior that the bug report claims is not happening when `union` is used.\n\n```python\n# File: tests/model_forms/tests.py\n\nimport datetime\nimport os\nfrom decimal import Decimal\nfrom unittest import mock, skipUnless\n\nfrom django import forms\nfrom django.core.exceptions import (\n    NON_FIELD_ERRORS, FieldError, ImproperlyConfigured, ValidationError,\n)\nfrom django.core.files.uploadedfile import SimpleUploadedFile\nfrom django.db import connection, models\nfrom django.db.models.query import EmptyQuerySet\nfrom django.forms.models import (\n    ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,\n    modelform_factory,\n)\nfrom django.template import Context, Template\nfrom django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n\nfrom .models import (\n    Article, ArticleStatus, Author, AuthorName, Book, BookWithCustomPK,\n    Category, CategoryManager, Chapter, Character, CommaSeparatedInteger,\n    CustomField, CustomFF, CustomFileField, CustomManager, CustomManagerArticle,\n    DerivedBook, ExplicitPK, File, FilePath, FlexibleDate, Homepage,\n    ImprovedArticle, Inventory, NoFields, Person, Photo, Price,\n    PrimaryCategory, Product, Publication, PublicationDefaults, Reader,\n    ReservedName, SimpleCategory, StumpJoke, SubCategory, Writer,\n)\n\n\nclass ModelMultipleChoiceFieldTests(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        cls.c1 = Category.objects.create(name=\'category 1\', url=\'cat1\')\n        cls.c2 = Category.objects.create(name=\'category 2\', url=\'cat2\')\n        cls.c3 = Category.objects.create(name=\'category 3\', url=\'cat3\')\n        cls.c4 = Category.objects.create(name=\'category 4\', url=\'cat4\')\n        cls.c5 = Category.objects.create(name=\'category 5\', url=\'cat5\')\n        cls.c6 = Category.objects.create(name=\'category 6\', url=\'cat6\')\n\n    def test_model_multiple_choice_required_false(self):\n        f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)\n        self.assertIsInstance(f.clean([]), EmptyQuerySet)\n        self.assertIsInstance(f.clean(()), EmptyQuerySet)\n        with self.assertRaises(ValidationError):\n            f.clean([\'0\'])\n```\n\n### Test Case 4\nThis test case explores how `RadioSelect` widgets are rendered in a form. While not directly about `ModelMultipleChoiceField`, it provides insight into how form widgets are generated and handled, which is relevant to understanding the complete form rendering and submission process.\n\n```python\n# File: tests/forms_tests/tests/test_forms.py\n\nimport copy\nimport datetime\nimport json\nimport uuid\n\nfrom django.core.exceptions import NON_FIELD_ERRORS\nfrom django.core.files.uploadedfile import SimpleUploadedFile\nfrom django.core.validators import MaxValueValidator, RegexValidator\nfrom django.forms import (\n    BooleanField, CharField, CheckboxSelectMultiple, ChoiceField, DateField,\n    DateTimeField, EmailField, FileField, FileInput, FloatField, Form,\n    HiddenInput, ImageField, IntegerField, MultipleChoiceField,\n    MultipleHiddenInput, MultiValueField, NullBooleanField, PasswordInput,\n    RadioSelect, Select, SplitDateTimeField, SplitHiddenDateTimeWidget,\n    Textarea, TextInput, TimeField, ValidationError, forms,\n)\nfrom django.forms.renderers import DjangoTemplates, get_default_renderer\nfrom django.forms.utils import ErrorList\nfrom django.http import QueryDict\nfrom django.template import Context, Template\nfrom django.test import SimpleTestCase\nfrom django.utils.datastructures import MultiValueDict\nfrom django.utils.safestring import mark_safe\n\n\nclass TestForm(SimpleTestCase):\n    def test_queryset_none_and_full(self):\n        class Form(forms.Form):\n            name = forms.CharField()\n            language = forms.ChoiceField(\n                choices=[(\'P\', \'Python\'), (\'J\', \'Java\')],\n                widget=forms.RadioSelect,\n            )\n\n        f = Form()\n        self.assertHTMLEqual(\n            f.as_ul(),\n            """<li><label for="id_name">Name:</label> <input type="text" name="name" id="id_name" required></li>\n<li><label for="id_language_0">Language:</label> <ul id="id_language">\n<li><label for="id_language_0"><input type="radio" name="language" value="P" id="id_language_0" required> Python</label></li>\n<li><label for="id_language_1"><input type="radio" name="language" value="J" id="id_language_1" required> Java</label></li>\n</ul></li>"""\n        )\n        # When RadioSelect is used with auto_id, and the whole form is printed using\n        # either as_table() or as_ul(), the label for the RadioSelect will point to the\n        # ID of the *first* radio button.\n        self.assertHTMLEqual(\n            f.as_table(),\n            \'<tr><th><label for="id_name">Name:</label></th><td><input type="text" name="name" id="id_name" required></td></tr>\\n\'\n            \'<tr><th><label for="id_language_0">Language:</label></th><td><ul id="id_language">\\n\'\n            \'<li><label for="id_language_0"><input type="radio" id="id_language_0" value="P" name="language" required> Python</label></li>\\n\'\n            \'<li><label for="id_language_1"><input type="radio" id="id_language_1" value="J" name="language" required> Java</label></li>\\n\'\n            \'</ul></td></tr>\'\n        )\n\n```\n\n### Test Case 5\nThis test case demonstrates the `difference` set operation with an empty queryset (`QuerySet.none()`). While the bug is about `union`, this test is valuable because it shows how queryset operations are expected to behave with empty sets. This can help in understanding the principles behind how these combinations should work.\n\n```python\n# File: tests/queries/test_qs_combinators.py\n\nimport operator\n\nfrom django.db import DatabaseError, NotSupportedError, connection\nfrom django.db.models import Exists, F, IntegerField, OuterRef, Value\nfrom django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature\n\nfrom .models import Number, ReservedName\n\n\n@skipUnlessDBFeature(\'supports_select_union\')\nclass QuerySetSetOperationTests(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))\n\n    def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):\n        self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter(\'num\'), ordered)\n\n    @skipUnlessDBFeature(\'supports_select_difference\')\n    def test_difference_with_empty_qs(self):\n        qs1 = Number.objects.all()\n        qs2 = Number.objects.none()\n        qs3 = Number.objects.filter(pk__in=[])\n        self.assertEqual(len(qs1.difference(qs2)), 10)\n\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 450, 'end_index': 1263, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 1737, 'end_index': 2308, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 2975, 'end_index': 3672, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 4663, 'end_index': 4960, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 5697, 'end_index': 6136, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 8539, 'end_index': 9095, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 9104, 'end_index': 9369, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 63289, 'candidates_token_count': 2513, 'total_token_count': 65802, 'prompt_tokens_details': [{'modality': 1, 'token_count': 67787}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 2513}], 'thoughts_token_count': 0, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.038779747898816774, 'model_name': 'gemini-2.5-pro'} id='run--bdd4ceb3-44ce-494e-85a5-13e709a6996d-0' usage_metadata={'input_tokens': 63289, 'output_tokens': 2513, 'total_tokens': 65802, 'input_token_details': {'cache_read': 0}}
2025-10-06 19:49:38,856 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 19:49:38,856 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
QuerySet.none() on combined queries returns all results.

Issue description: 
Description
	
I came across this issue on Stack Overflow. I'm not 100% sure it's a bug, but it does seem strange. With this code (excuse the bizarre example filtering):
class Publication(models.Model):
	pass
class Article(models.Model):
	publications = models.ManyToManyField(to=Publication, blank=True, null=True)
class ArticleForm(forms.ModelForm):
	publications = forms.ModelMultipleChoiceField(
		Publication.objects.filter(id__lt=2) | Publication.objects.filter(id__gt=5),
		required=False,
	)
	class Meta:
		model = Article
		fields = ["publications"]
class ArticleAdmin(admin.ModelAdmin):
	form = ArticleForm
This works well. However, changing the ModelMultipleChoiceField queryset to use union() breaks things.
publications = forms.ModelMultipleChoiceField(
	Publication.objects.filter(id__lt=2).union(
		Publication.objects.filter(id__gt=5)
	),
	required=False,
)
The form correctly shows only the matching objects. However, if you submit this form while empty (i.e. you didn't select any publications), ALL objects matching the queryset will be added. Using the OR query, NO objects are added, as I'd expect.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/queries/test_qs_combinators.py
Line number range: 1 - 21
Content:
1. import operator
2. 
3. from django.db import DatabaseError, NotSupportedError, connection
4. from django.db.models import Exists, F, IntegerField, OuterRef, Value
5. from django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature
6. 
7. from .models import Number, ReservedName
8. 
9. 
10. @skipUnlessDBFeature('supports_select_union')
11. class QuerySetSetOperationTests(TestCase):
12.     @classmethod
13.     def setUpTestData(cls):
14.         Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))
15. 
16.     def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):
17.         self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter('num'), ordered)
18. 
19.     def test_simple_union(self):
20.         qs1 = Number.objects.filter(num__lte=1)
21.         qs2 = Number.objects.filter(num__gte=8)

File: tests/model_forms/tests.py
Line number range: 1 - 20
Content:
1. import datetime
2. import os
3. from decimal import Decimal
4. from unittest import mock, skipUnless
5. 
6. from django import forms
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured, ValidationError,
9. )
10. from django.core.files.uploadedfile import SimpleUploadedFile
11. from django.db import connection, models
12. from django.db.models.query import EmptyQuerySet
13. from django.forms.models import (
14.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,
15.     modelform_factory,
16. )
17. from django.template import Context, Template
18. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
19. 
20. from .models import (

File: tests/model_forms/tests.py
Line number range: 560 - 656
Content:
560.                 exclude = ['url']
561. 
562.         self.assertHTMLEqual(
563.             str(SubclassMeta()),
564.             """<tr><th><label for="id_name">Name:</label></th>
565. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>
566. <tr><th><label for="id_slug">Slug:</label></th>
567. <td><input id="id_slug" type="text" name="slug" maxlength="20" required></td></tr>
568. <tr><th><label for="id_checkbox">Checkbox:</label></th>
569. <td><input type="checkbox" name="checkbox" id="id_checkbox" required></td></tr>"""
570.         )
571. 
572.     def test_orderfields_form(self):
573.         class OrderFields(forms.ModelForm):
574.             class Meta:
575.                 model = Category
576.                 fields = ['url', 'name']
577. 
578.         self.assertEqual(list(OrderFields.base_fields),
579.                          ['url', 'name'])
580.         self.assertHTMLEqual(
581.             str(OrderFields()),
582.             """<tr><th><label for="id_url">The URL:</label></th>
583. <td><input id="id_url" type="text" name="url" maxlength="40" required></td></tr>
584. <tr><th><label for="id_name">Name:</label></th>
585. <td><input id="id_name" type="text" name="name" maxlength="20" required></td></tr>"""
586.         )
587. 
588.     def test_orderfields2_form(self):
589.         class OrderFields2(forms.ModelForm):
590.             class Meta:
591.                 model = Category
592.                 fields = ['slug', 'url', 'name']
593.                 exclude = ['url']
594. 
595.         self.assertEqual(list(OrderFields2.base_fields), ['slug', 'name'])
596. 
597.     def test_default_populated_on_optional_field(self):
598.         class PubForm(forms.ModelForm):
599.             mode = forms.CharField(max_length=255, required=False)
600. 
601.             class Meta:
602.                 model = PublicationDefaults
603.                 fields = ('mode',)
604. 
605.         # Empty data uses the model field default.
606.         mf1 = PubForm({})
607.         self.assertEqual(mf1.errors, {})
608.         m1 = mf1.save(commit=False)
609.         self.assertEqual(m1.mode, 'di')
610.         self.assertEqual(m1._meta.get_field('mode').get_default(), 'di')
611. 
612.         # Blank data doesn't use the model field default.
613.         mf2 = PubForm({'mode': ''})
614.         self.assertEqual(mf2.errors, {})
615.         m2 = mf2.save(commit=False)
616.         self.assertEqual(m2.mode, '')
617. 
618.     def test_default_not_populated_on_non_empty_value_in_cleaned_data(self):
619.         class PubForm(forms.ModelForm):
620.             mode = forms.CharField(max_length=255, required=False)
621.             mocked_mode = None
622. 
623.             def clean(self):
624.                 self.cleaned_data['mode'] = self.mocked_mode
625.                 return self.cleaned_data
626. 
627.             class Meta:
628.                 model = PublicationDefaults
629.                 fields = ('mode',)
630. 
631.         pub_form = PubForm({})
632.         pub_form.mocked_mode = 'de'
633.         pub = pub_form.save(commit=False)
634.         self.assertEqual(pub.mode, 'de')
635.         # Default should be populated on an empty value in cleaned_data.
636.         default_mode = 'di'
637.         for empty_value in pub_form.fields['mode'].empty_values:
638.             with self.subTest(empty_value=empty_value):
639.                 pub_form = PubForm({})
640.                 pub_form.mocked_mode = empty_value
641.                 pub = pub_form.save(commit=False)
642.                 self.assertEqual(pub.mode, default_mode)
643. 
644.     def test_default_not_populated_on_optional_checkbox_input(self):
645.         class PubForm(forms.ModelForm):
646.             class Meta:
647.                 model = PublicationDefaults
648.                 fields = ('active',)
649. 
650.         # Empty data doesn't use the model default because CheckboxInput
651.         # doesn't have a value in HTML form submission.
652.         mf1 = PubForm({})
653.         self.assertEqual(mf1.errors, {})
654.         m1 = mf1.save(commit=False)
655.         self.assertIs(m1.active, False)
656.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)

File: tests/queries/tests.py
Line number range: 1 - 25
Content:
1. import datetime
2. import pickle
3. import sys
4. import unittest
5. from operator import attrgetter
6. from threading import Lock
7. 
8. from django.core.exceptions import EmptyResultSet, FieldError
9. from django.db import DEFAULT_DB_ALIAS, connection
10. from django.db.models import Count, Exists, F, OuterRef, Q
11. from django.db.models.expressions import RawSQL
12. from django.db.models.sql.constants import LOUTER
13. from django.db.models.sql.where import NothingNode, WhereNode
14. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
15. from django.test.utils import CaptureQueriesContext, ignore_warnings
16. from django.utils.deprecation import RemovedInDjango40Warning
17. 
18. from .models import (
19.     FK1, Annotation, Article, Author, BaseA, Book, CategoryItem,
20.     CategoryRelationship, Celebrity, Channel, Chapter, Child, ChildObjectA,
21.     Classroom, CommonMixedCaseForeignKeys, Company, Cover, CustomPk,
22.     CustomPkTag, DateTimePK, Detail, DumbCategory, Eaten, Employment,
23.     ExtraInfo, Fan, Food, Identifier, Individual, Item, Job,
24.     JobResponsibilities, Join, LeafA, LeafB, LoopX, LoopZ, ManagedModel,
25.     Member, MixedCaseDbColumnCategoryItem, MixedCaseFieldCategoryItem, ModelA,

File: tests/queries/tests.py
Line number range: 2221 - 2235
Content:
2221.         testing is impossible, this is a sanity check against invalid use of
2222.         deepcopy. refs #16759.
2223.         """
2224.         opts_class = type(Note._meta)
2225.         note_deepcopy = getattr(opts_class, "__deepcopy__", None)
2226.         opts_class.__deepcopy__ = lambda obj, memo: self.fail("Model options shouldn't be cloned.")
2227.         try:
2228.             Note.objects.filter(pk__lte=F('pk') + 1).all()
2229.         finally:
2230.             if note_deepcopy is None:
2231.                 delattr(opts_class, "__deepcopy__")
2232.             else:
2233.                 opts_class.__deepcopy__ = note_deepcopy
2234. 
2235.     def test_no_fields_cloning(self):

File: tests/queries/tests.py
Line number range: 219 - 240
Content:
219.         xx = Item(name='four', created=self.time1, creator=self.a2, note=self.n1)
220.         xx.save()
221.         self.assertEqual(
222.             Item.objects.exclude(name='two').values('creator', 'name').distinct().count(),
223.             4
224.         )
225.         self.assertEqual(
226.             (
227.                 Item.objects
228.                 .exclude(name='two')
229.                 .extra(select={'foo': '%s'}, select_params=(1,))
230.                 .values('creator', 'name', 'foo')
231.                 .distinct()
232.                 .count()
233.             ),
234.             4
235.         )
236.         self.assertEqual(
237.             (
238.                 Item.objects
239.                 .exclude(name='two')
240.                 .extra(select={'foo': '%s'}, select_params=(1,))

File: tests/queries/tests.py
Line number range: 2307 - 2322
Content:
2307.         # testing for ticket 14930 issues
2308.         qs = Number.objects.extra(
2309.             select={'value_plus_one': 'num+1', 'value_minus_one': 'num-1'},
2310.             order_by=['value_minus_one'],
2311.         )
2312.         qs = qs.values('num')
2313. 
2314.     def test_extra_select_params_values_order_in_extra(self):
2315.         # testing for 23259 issue
2316.         qs = Number.objects.extra(
2317.             select={'value_plus_x': 'num+%s'},
2318.             select_params=[1],
2319.             order_by=['value_plus_x'],
2320.         )
2321.         qs = qs.filter(num=72)
2322.         qs = qs.values('num')

File: tests/queries/test_qs_combinators.py
Line number range: 10 - 27
Content:
10. @skipUnlessDBFeature('supports_select_union')
11. class QuerySetSetOperationTests(TestCase):
12.     @classmethod
13.     def setUpTestData(cls):
14.         Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))
15. 
16.     def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):
17.         self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter('num'), ordered)
18. 
19.     def test_simple_union(self):
20.         qs1 = Number.objects.filter(num__lte=1)
21.         qs2 = Number.objects.filter(num__gte=8)
22.         qs3 = Number.objects.filter(num=5)
23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)
24. 
25.     @skipUnlessDBFeature('supports_select_intersection')
26.     def test_simple_intersection(self):
27.         qs1 = Number.objects.filter(num__lte=5)

File: tests/queries/test_qs_combinators.py
Line number range: 112 - 124
Content:
112.     def test_ordering_by_alias(self):
113.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('num'))
114.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('num'))
115.         self.assertQuerysetEqual(
116.             qs1.union(qs2).order_by('-alias'),
117.             [3, 2, 1, 0],
118.             operator.itemgetter('alias'),
119.         )
120. 
121.     def test_ordering_by_f_expression(self):
122.         qs1 = Number.objects.filter(num__lte=1)
123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)
124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F('num').desc()), [3, 2, 1, 0])

File: tests/forms_tests/tests/test_forms.py
Line number range: 1 - 38
Content:
1. import copy
2. import datetime
3. import json
4. import uuid
5. 
6. from django.core.exceptions import NON_FIELD_ERRORS
7. from django.core.files.uploadedfile import SimpleUploadedFile
8. from django.core.validators import MaxValueValidator, RegexValidator
9. from django.forms import (
10.     BooleanField, CharField, CheckboxSelectMultiple, ChoiceField, DateField,
11.     DateTimeField, EmailField, FileField, FileInput, FloatField, Form,
12.     HiddenInput, ImageField, IntegerField, MultipleChoiceField,
13.     MultipleHiddenInput, MultiValueField, NullBooleanField, PasswordInput,
14.     RadioSelect, Select, SplitDateTimeField, SplitHiddenDateTimeWidget,
15.     Textarea, TextInput, TimeField, ValidationError, forms,
16. )
17. from django.forms.renderers import DjangoTemplates, get_default_renderer
18. from django.forms.utils import ErrorList
19. from django.http import QueryDict
20. from django.template import Context, Template
21. from django.test import SimpleTestCase
22. from django.utils.datastructures import MultiValueDict
23. from django.utils.safestring import mark_safe
24. 
25. 
26. class Person(Form):
27.     first_name = CharField()
28.     last_name = CharField()
29.     birthday = DateField()
30. 
31. 
32. class PersonNew(Form):
33.     first_name = CharField(widget=TextInput(attrs={'id': 'first_name_id'}))
34.     last_name = CharField()
35.     birthday = DateField()
36. 
37. 
38. class MultiValueDictLike(dict):

File: tests/model_forms/tests.py
Line number range: 1753 - 1760
Content:
1753.             f.clean([c6.id])
1754. 
1755.     def test_model_multiple_choice_required_false(self):
1756.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
1757.         self.assertIsInstance(f.clean([]), EmptyQuerySet)
1758.         self.assertIsInstance(f.clean(()), EmptyQuerySet)
1759.         with self.assertRaises(ValidationError):
1760.             f.clean(['0'])

File: tests/forms_tests/tests/test_forms.py
Line number range: 608 - 628
Content:
608.             """<ul id="id_language">
609. <li><label for="id_language_0"><input type="radio" id="id_language_0" value="P" name="language" required>
610. Python</label></li>
611. <li><label for="id_language_1"><input type="radio" id="id_language_1" value="J" name="language" required>
612. Java</label></li>
613. </ul>"""
614.         )
615. 
616.         # When RadioSelect is used with auto_id, and the whole form is printed using
617.         # either as_table() or as_ul(), the label for the RadioSelect will point to the
618.         # ID of the *first* radio button.
619.         self.assertHTMLEqual(
620.             f.as_table(),
621.             """<tr><th><label for="id_name">Name:</label></th><td><input type="text" name="name" id="id_name" required></td></tr>
622. <tr><th><label for="id_language_0">Language:</label></th><td><ul id="id_language">
623. <li><label for="id_language_0"><input type="radio" id="id_language_0" value="P" name="language" required>
624. Python</label></li>
625. <li><label for="id_language_1"><input type="radio" id="id_language_1" value="J" name="language" required>
626. Java</label></li>
627. </ul></td></tr>"""
628.         )

File: tests/queries/test_qs_combinators.py
Line number range: 63 - 71
Content:
63.         self.assertEqual(len(qs2.intersection(qs2)), 0)
64.         self.assertEqual(len(qs3.intersection(qs3)), 0)
65. 
66.     @skipUnlessDBFeature('supports_select_difference')
67.     def test_difference_with_empty_qs(self):
68.         qs1 = Number.objects.all()
69.         qs2 = Number.objects.none()
70.         qs3 = Number.objects.filter(pk__in=[])
71.         self.assertEqual(len(qs1.difference(qs2)), 10)


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and return it in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 19:51:06,459 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The query describes a bug where submitting an empty `ModelMultipleChoiceField` with a `union` queryset fails.\n   - This test method, `test_model_multiple_choice_required_false`, directly addresses the expected behavior for this scenario.\n2. Extended relevance:\n   - It asserts that cleaning an empty list for a `required=False` `ModelMultipleChoiceField` should result in an `EmptyQuerySet`. This is the core expectation that is violated in the bug.\n   - The necessary imports (like `forms`, `models`, `EmptyQuerySet`) are at the top of `tests/model_forms/tests.py`.', relative_path='tests/model_forms/tests.py', start_line=1755, end_line=1760), ContextOutput(reasoning='1. Query requirement analysis:\n   - The bug is caused by a `QuerySet.union()`.\n   - This test demonstrates the basic, correct functionality of `union()`.\n2. Extended relevance:\n   - This provides a baseline for what `union()` is supposed to do, which is essential context for understanding why it behaves differently inside a `ModelForm`.\n   - The test setup (`setUpTestData`) and imports are defined at the beginning of the same file, `tests/queries/test_qs_combinators.py` (lines 1-18).', relative_path='tests/queries/test_qs_combinators.py', start_line=19, end_line=23), ContextOutput(reasoning='1. Query requirement analysis:\n   - The bug report implies that `QuerySet.none()` might be failing on a combined query.\n   - This test shows how a combinator (`difference`) interacts with an empty queryset (`.none()`).\n2. Extended relevance:\n   - This is conceptually parallel to the bug, which involves the form framework likely trying to apply a `none()` filter to the `union` queryset.\n   - It demonstrates the expected behavior of combining querysets with empty sets. The necessary setup is at the top of the file.', relative_path='tests/queries/test_qs_combinators.py', start_line=66, end_line=71), ContextOutput(reasoning="1. Query requirement analysis:\n   - The query involves a `union` queryset within a `ModelForm`.\n   - This test shows a more complex `union` query that is chained with another operation (`order_by`).\n2. Extended relevance:\n   - This demonstrates that `union()` is designed to be composable, which helps isolate the problem to the `ModelForm`'s specific handling of the `union` queryset, rather than a general issue with chaining methods after `union()`.\n   - The necessary setup is at the top of the file.", relative_path='tests/queries/test_qs_combinators.py', start_line=121, end_line=124), ContextOutput(reasoning="1. Query requirement analysis:\n   - The query describes a bug with an optional (`required=False`) form field.\n   - This test investigates the behavior of optional fields in a `ModelForm`.\n2. Extended relevance:\n   - It shows how an empty submission for an optional `CheckboxInput` is handled, which is conceptually similar to the bug's scenario of an empty submission for an optional `ModelMultipleChoiceField`.\n   - It provides insight into the form's logic for handling empty values. Imports are at the top of the file.", relative_path='tests/model_forms/tests.py', start_line=644, end_line=656)]
2025-10-06 19:51:06,460 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/model_forms/tests.py', content="1755.     def test_model_multiple_choice_required_false(self):\n1756.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)\n1757.         self.assertIsInstance(f.clean([]), EmptyQuerySet)\n1758.         self.assertIsInstance(f.clean(()), EmptyQuerySet)\n1759.         with self.assertRaises(ValidationError):\n1760.             f.clean(['0'])", start_line_number=1755, end_line_number=1760), Context(relative_path='tests/queries/test_qs_combinators.py', content='19.     def test_simple_union(self):\n20.         qs1 = Number.objects.filter(num__lte=1)\n21.         qs2 = Number.objects.filter(num__gte=8)\n22.         qs3 = Number.objects.filter(num=5)\n23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)', start_line_number=19, end_line_number=23), Context(relative_path='tests/queries/test_qs_combinators.py', content="66.     @skipUnlessDBFeature('supports_select_difference')\n67.     def test_difference_with_empty_qs(self):\n68.         qs1 = Number.objects.all()\n69.         qs2 = Number.objects.none()\n70.         qs3 = Number.objects.filter(pk__in=[])\n71.         self.assertEqual(len(qs1.difference(qs2)), 10)", start_line_number=66, end_line_number=71), Context(relative_path='tests/queries/test_qs_combinators.py', content="121.     def test_ordering_by_f_expression(self):\n122.         qs1 = Number.objects.filter(num__lte=1)\n123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F('num').desc()), [3, 2, 1, 0])", start_line_number=121, end_line_number=124), Context(relative_path='tests/model_forms/tests.py', content="644.     def test_default_not_populated_on_optional_checkbox_input(self):\n645.         class PubForm(forms.ModelForm):\n646.             class Meta:\n647.                 model = PublicationDefaults\n648.                 fields = ('active',)\n649. \n650.         # Empty data doesn't use the model default because CheckboxInput\n651.         # doesn't have a value in HTML form submission.\n652.         mf1 = PubForm({})\n653.         self.assertEqual(mf1.errors, {})\n654.         m1 = mf1.save(commit=False)\n655.         self.assertIs(m1.active, False)\n656.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)", start_line_number=644, end_line_number=656)]
2025-10-06 19:51:06,461 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 19:51:06,461 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   └── static
|   |   |       └── fontawesome
|   |   └── djangodocs-epub
|   |       └── static
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   └── gis
|       └── mapwidget.test.js
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   └── admin
    |   |       └── admin_views
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   └── registration
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   └── registration
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   └── robots.txt
    |   |   └── registration
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   └── javascript_ignored.js
    |   |   └── templates
    |   |       └── subdir
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   ├── templates
    |   |   └── shortcuts
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── cached
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   ├── loop
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   ├── jinja2
    |   |   └── template_backends
    |   ├── template_strings
    |   |   └── template_backends
    |   ├── templates
    |   |   └── template_backends
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   ├── templates
    |   |   └── template_loader
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   ├── other_templates
    |   |   └── priority
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   ├── fs2
    |   |   └── fs3
    |   ├── relative_templates
    |   |   └── dir1
    |   |       └── dir2
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── first
    |   |   ├── priority
    |   |   ├── second
    |   |   └── template_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   └── views
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_system_checks.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── specific_system_checks.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
    |   └── utils.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
    |   ├── __init__.py
    |   ├── invalid_urls.txt
    |   ├── tests.py
    |   └── valid_urls.txt
    ├── version
    |   ├── __init__.py
    |   └── tests.py
    ├── view_tests
    |   ├── __init__.py
    |   ├── app0
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── en
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app3
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app4
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app5
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── default_urls.py
    |   ├── generic_urls.py
    |   ├── locale
    |   |   ├── de
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_GB
    |   |   |   └── LC_MESSAGES
    |   |   ├── es
    |   |   |   └── LC_MESSAGES
    |   |   ├── fr
    |   |   |   └── LC_MESSAGES
    |   |   ├── nl
    |   |   |   └── LC_MESSAGES
    |   |   ├── pt
    |   |   |   └── LC_MESSAGES
    |   |   └── ru
    |   |       └── LC_MESSAGES
    |   ├── media
    |   |   ├── %2F.txt
    |   |   ├── file.txt
    |   |   ├── long-line.txt
    |   |   └── subdir
    |   ├── models.py
    |   ├── regression_21530_urls.py
    |   ├── templates
    |   |   └── debug
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── debugtags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_csrf.py
    |   |   ├── test_debug.py
    |   |   ├── test_defaults.py
    |   |   ├── test_i18n.py
    |   |   ├── test_json.py
    |   |   ├── test_specials.py
    |   |   └── test_static.py
    |   ├── urls.py
    |   └── views.py
    └── wsgi
        ├── __init__.py
        ├── tests.py
        ├── urls.py
        └── wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
QuerySet.none() on combined queries returns all results.

Issue description: 
Description
	
I came across this issue on Stack Overflow. I'm not 100% sure it's a bug, but it does seem strange. With this code (excuse the bizarre example filtering):
class Publication(models.Model):
	pass
class Article(models.Model):
	publications = models.ManyToManyField(to=Publication, blank=True, null=True)
class ArticleForm(forms.ModelForm):
	publications = forms.ModelMultipleChoiceField(
		Publication.objects.filter(id__lt=2) | Publication.objects.filter(id__gt=5),
		required=False,
	)
	class Meta:
		model = Article
		fields = ["publications"]
class ArticleAdmin(admin.ModelAdmin):
	form = ArticleForm
This works well. However, changing the ModelMultipleChoiceField queryset to use union() breaks things.
publications = forms.ModelMultipleChoiceField(
	Publication.objects.filter(id__lt=2).union(
		Publication.objects.filter(id__gt=5)
	),
	required=False,
)
The form correctly shows only the matching objects. However, if you submit this form while empty (i.e. you didn't select any publications), ALL objects matching the queryset will be added. Using the OR query, NO objects are added, as I'd expect.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/model_forms/tests.py
Line number range: 1755 - 1760
Content:
1755.     def test_model_multiple_choice_required_false(self):
1756.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
1757.         self.assertIsInstance(f.clean([]), EmptyQuerySet)
1758.         self.assertIsInstance(f.clean(()), EmptyQuerySet)
1759.         with self.assertRaises(ValidationError):
1760.             f.clean(['0'])


File: tests/queries/test_qs_combinators.py
Line number range: 19 - 23
Content:
19.     def test_simple_union(self):
20.         qs1 = Number.objects.filter(num__lte=1)
21.         qs2 = Number.objects.filter(num__gte=8)
22.         qs3 = Number.objects.filter(num=5)
23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)


File: tests/queries/test_qs_combinators.py
Line number range: 66 - 71
Content:
66.     @skipUnlessDBFeature('supports_select_difference')
67.     def test_difference_with_empty_qs(self):
68.         qs1 = Number.objects.all()
69.         qs2 = Number.objects.none()
70.         qs3 = Number.objects.filter(pk__in=[])
71.         self.assertEqual(len(qs1.difference(qs2)), 10)


File: tests/queries/test_qs_combinators.py
Line number range: 121 - 124
Content:
121.     def test_ordering_by_f_expression(self):
122.         qs1 = Number.objects.filter(num__lte=1)
123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)
124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F('num').desc()), [3, 2, 1, 0])


File: tests/model_forms/tests.py
Line number range: 644 - 656
Content:
644.     def test_default_not_populated_on_optional_checkbox_input(self):
645.         class PubForm(forms.ModelForm):
646.             class Meta:
647.                 model = PublicationDefaults
648.                 fields = ('active',)
649. 
650.         # Empty data doesn't use the model default because CheckboxInput
651.         # doesn't have a value in HTML form submission.
652.         mf1 = PubForm({})
653.         self.assertEqual(mf1.errors, {})
654.         m1 = mf1.save(commit=False)
655.         self.assertIs(m1.active, False)
656.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 19:51:35,081 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='1. The user wants 5 complete, self-contained test cases. The current context only provides snippets of test methods, which are insufficient because they lack the necessary imports, test class definitions, `setUp` methods, and helper functions.\n2. The bug report involves the interaction between `ModelForm`, `ModelMultipleChoiceField`, and `QuerySet.union()`. The provided snippets from `tests/model_forms/tests.py` and `tests/queries/test_qs_combinators.py` are highly relevant to these components.\n3. To construct the complete test cases as requested, I need the full source code of these test files and the definitions of the models they rely on. The full files will contain the necessary context, including imports, base classes, and helper methods.\n4. Therefore, I need to request the full content of the relevant test and model files to deliver a complete and accurate answer.' refined_query='Please provide the full source code for the following files: `tests/model_forms/tests.py`, `tests/model_forms/models.py`, `tests/queries/test_qs_combinators.py`, and `tests/queries/models.py`.'
2025-10-06 19:51:40,324 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full source code for the four requested files: `tests/model_forms/tests.py`, `tests/model_forms/models.py`, `tests/queries/test_qs_combinators.py`, and `tests/queries/models.py`. You can view the contents of each file in the tool output.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/queries/models.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 55708, 'candidates_token_count': 165, 'total_token_count': 55989, 'prompt_tokens_details': [{'modality': 1, 'token_count': 55708}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 165}], 'thoughts_token_count': 116, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.04237736210678563, 'model_name': 'gemini-2.5-pro'} id='run--c0e9a20f-07f6-438a-adc9-6db72e45f8b9-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/model_forms/tests.py'}, 'id': '4650f948-355c-4b23-bb18-a553aea477d4', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/model_forms/models.py'}, 'id': '0b18085d-6a42-4c74-ad99-5fe13ffe202f', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/queries/test_qs_combinators.py'}, 'id': '98767af4-bfa3-4984-a6e1-20883fb8ddc0', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/queries/models.py'}, 'id': 'a21b742b-feb4-48ef-b0cb-9eecab584b16', 'type': 'tool_call'}] usage_metadata={'input_tokens': 55708, 'output_tokens': 165, 'total_tokens': 55989, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 116}}
2025-10-06 19:51:42,334 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={} response_metadata={'usage_metadata': {'prompt_token_count': 80889, 'total_token_count': 80889, 'prompt_tokens_details': [{'modality': 1, 'token_count': 80889}], 'candidates_token_count': 0, 'thoughts_token_count': 0, 'cached_content_token_count': 0, 'cache_tokens_details': [], 'candidates_tokens_details': []}, 'model_name': 'gemini-2.5-pro'} id='run--d1305f77-64cf-4796-b8ed-9c3a641e3d01-0' usage_metadata={'input_tokens': 80889, 'output_tokens': 0, 'total_tokens': 80889, 'input_token_details': {'cache_read': 0}}
2025-10-06 19:51:42,335 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 19:51:42,335 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
QuerySet.none() on combined queries returns all results.

Issue description: 
Description
	
I came across this issue on Stack Overflow. I'm not 100% sure it's a bug, but it does seem strange. With this code (excuse the bizarre example filtering):
class Publication(models.Model):
	pass
class Article(models.Model):
	publications = models.ManyToManyField(to=Publication, blank=True, null=True)
class ArticleForm(forms.ModelForm):
	publications = forms.ModelMultipleChoiceField(
		Publication.objects.filter(id__lt=2) | Publication.objects.filter(id__gt=5),
		required=False,
	)
	class Meta:
		model = Article
		fields = ["publications"]
class ArticleAdmin(admin.ModelAdmin):
	form = ArticleForm
This works well. However, changing the ModelMultipleChoiceField queryset to use union() breaks things.
publications = forms.ModelMultipleChoiceField(
	Publication.objects.filter(id__lt=2).union(
		Publication.objects.filter(id__gt=5)
	),
	required=False,
)
The form correctly shows only the matching objects. However, if you submit this form while empty (i.e. you didn't select any publications), ALL objects matching the queryset will be added. Using the OR query, NO objects are added, as I'd expect.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the full source code for the following files: `tests/model_forms/tests.py`, `tests/model_forms/models.py`, `tests/queries/test_qs_combinators.py`, and `tests/queries/models.py`.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/model_forms/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import os
3. from decimal import Decimal
4. from unittest import mock, skipUnless
5. 
6. from django import forms
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured, ValidationError,
9. )
10. from django.core.files.uploadedfile import SimpleUploadedFile
11. from django.db import connection, models
12. from django.db.models.query import EmptyQuerySet
13. from django.forms.models import (
14.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,
15.     modelform_factory,
16. )
17. from django.template import Context, Template
18. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
19. 
20. from .models import (
21.     Article, ArticleStatus, Author, Author1, Award, BetterWriter, BigInt, Book,
22.     Category, Character, Colour, ColourfulItem, CustomErrorMessage, CustomFF,
23.     CustomFieldForExclusionModel, DateTimePost, DerivedBook, DerivedPost,
24.     Document, ExplicitPK, FilePathModel, FlexibleDatePost, Homepage,
25.     ImprovedArticle, ImprovedArticleWithParentLink, Inventory,
26.     NullableUniqueCharFieldModel, Person, Photo, Post, Price, Product,
27.     Publication, PublicationDefaults, StrictAssignmentAll,
28.     StrictAssignmentFieldSpecific, Student, StumpJoke, TextFile, Triple,
29.     Writer, WriterProfile, test_images,
30. )
31. 
32. if test_images:
33.     from .models import ImageFile, OptionalImageFile, NoExtensionImageFile
34. 
35.     class ImageFileForm(forms.ModelForm):
36.         class Meta:
37.             model = ImageFile
38.             fields = '__all__'
39. 
40.     class OptionalImageFileForm(forms.ModelForm):
41.         class Meta:
42.             model = OptionalImageFile
43.             fields = '__all__'
44. 
45.     class NoExtensionImageFileForm(forms.ModelForm):
46.         class Meta:
47.             model = NoExtensionImageFile
48.             fields = '__all__'
49. 
50. 
51. class ProductForm(forms.ModelForm):
52.     class Meta:
53.         model = Product
54.         fields = '__all__'
55. 
56. 
57. class PriceForm(forms.ModelForm):
58.     class Meta:
59.         model = Price
60.         fields = '__all__'
61. 
62. 
63. class BookForm(forms.ModelForm):
64.     class Meta:
65.         model = Book
66.         fields = '__all__'
67. 
68. 
69. class DerivedBookForm(forms.ModelForm):
70.     class Meta:
71.         model = DerivedBook
72.         fields = '__all__'
73. 
74. 
75. class ExplicitPKForm(forms.ModelForm):
76.     class Meta:
77.         model = ExplicitPK
78.         fields = ('key', 'desc',)
79. 
80. 
81. class PostForm(forms.ModelForm):
82.     class Meta:
83.         model = Post
84.         fields = '__all__'
85. 
86. 
87. class DerivedPostForm(forms.ModelForm):
88.     class Meta:
89.         model = DerivedPost
90.         fields = '__all__'
91. 
92. 
93. class CustomWriterForm(forms.ModelForm):
94.     name = forms.CharField(required=False)
95. 
96.     class Meta:
97.         model = Writer
98.         fields = '__all__'
99. 
100. 
101. class BaseCategoryForm(forms.ModelForm):
102.     class Meta:
103.         model = Category
104.         fields = '__all__'
105. 
106. 
107. class ArticleForm(forms.ModelForm):
108.     class Meta:
109.         model = Article
110.         fields = '__all__'
111. 
112. 
113. class RoykoForm(forms.ModelForm):
114.     class Meta:
115.         model = Writer
116.         fields = '__all__'
117. 
118. 
119. class ArticleStatusForm(forms.ModelForm):
120.     class Meta:
121.         model = ArticleStatus
122.         fields = '__all__'
123. 
124. 
125. class InventoryForm(forms.ModelForm):
126.     class Meta:
127.         model = Inventory
128.         fields = '__all__'
129. 
130. 
131. class SelectInventoryForm(forms.Form):
132.     items = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name='barcode')
133. 
134. 
135. class CustomFieldForExclusionForm(forms.ModelForm):
136.     class Meta:
137.         model = CustomFieldForExclusionModel
138.         fields = ['name', 'markup']
139. 
140. 
141. class TextFileForm(forms.ModelForm):
142.     class Meta:
143.         model = TextFile
144.         fields = '__all__'
145. 
146. 
147. class BigIntForm(forms.ModelForm):
148.     class Meta:
149.         model = BigInt
150.         fields = '__all__'
151. 
152. 
153. class ModelFormWithMedia(forms.ModelForm):
154.     class Media:
155.         js = ('/some/form/javascript',)
156.         css = {
157.             'all': ('/some/form/css',)
158.         }
159. 
160.     class Meta:
161.         model = TextFile
162.         fields = '__all__'
163. 
164. 
165. class CustomErrorMessageForm(forms.ModelForm):
166.     name1 = forms.CharField(error_messages={'invalid': 'Form custom error message.'})
167. 
168.     class Meta:
169.         fields = '__all__'
170.         model = CustomErrorMessage
171. 
172. 
173. class ModelFormBaseTest(TestCase):
174.     def test_base_form(self):
175.         self.assertEqual(list(BaseCategoryForm.base_fields), ['name', 'slug', 'url'])
176. 
177.     def test_no_model_class(self):
178.         class NoModelModelForm(forms.ModelForm):
179.             pass
180.         with self.assertRaisesMessage(ValueError, 'ModelForm has no model class specified.'):
181.             NoModelModelForm()
182. 
183.     def test_empty_fields_to_fields_for_model(self):
184.         """
185.         An argument of fields=() to fields_for_model should return an empty dictionary
186.         """
187.         field_dict = fields_for_model(Person, fields=())
188.         self.assertEqual(len(field_dict), 0)
189. 
190.     def test_empty_fields_on_modelform(self):
191.         """
192.         No fields on a ModelForm should actually result in no fields.
193.         """
194.         class EmptyPersonForm(forms.ModelForm):
195.             class Meta:
196.                 model = Person
197.                 fields = ()
198. 
199.         form = EmptyPersonForm()
200.         self.assertEqual(len(form.fields), 0)
201. 
202.     def test_empty_fields_to_construct_instance(self):
203.         """
204.         No fields should be set on a model instance if construct_instance receives fields=().
205.         """
206.         form = modelform_factory(Person, fields="__all__")({'name': 'John Doe'})
207.         self.assertTrue(form.is_valid())
208.         instance = construct_instance(form, Person(), fields=())
209.         self.assertEqual(instance.name, '')
210. 
211.     def test_blank_with_null_foreign_key_field(self):
212.         """
213.         #13776 -- ModelForm's with models having a FK set to null=False and
214.         required=False should be valid.
215.         """
216.         class FormForTestingIsValid(forms.ModelForm):
217.             class Meta:
218.                 model = Student
219.                 fields = '__all__'
220. 
221.             def __init__(self, *args, **kwargs):
222.                 super().__init__(*args, **kwargs)
223.                 self.fields['character'].required = False
224. 
225.         char = Character.objects.create(username='user', last_action=datetime.datetime.today())
226.         data = {'study': 'Engineering'}
227.         data2 = {'study': 'Engineering', 'character': char.pk}
228. 
229.         # form is valid because required=False for field 'character'
230.         f1 = FormForTestingIsValid(data)
231.         self.assertTrue(f1.is_valid())
232. 
233.         f2 = FormForTestingIsValid(data2)
234.         self.assertTrue(f2.is_valid())
235.         obj = f2.save()
236.         self.assertEqual(obj.character, char)
237. 
238.     def test_blank_false_with_null_true_foreign_key_field(self):
239.         """
240.         A ModelForm with a model having ForeignKey(blank=False, null=True)
241.         and the form field set to required=False should allow the field to be
242.         unset.
243.         """
244.         class AwardForm(forms.ModelForm):
245.             class Meta:
246.                 model = Award
247.                 fields = '__all__'
248. 
249.             def __init__(self, *args, **kwargs):
250.                 super().__init__(*args, **kwargs)
251.                 self.fields['character'].required = False
252. 
253.         character = Character.objects.create(username='user', last_action=datetime.datetime.today())
254.         award = Award.objects.create(name='Best sprinter', character=character)
255.         data = {'name': 'Best tester', 'character': ''}  # remove character
256.         form = AwardForm(data=data, instance=award)
257.         self.assertTrue(form.is_valid())
258.         award = form.save()
259.         self.assertIsNone(award.character)
260. 
261.     def test_blank_foreign_key_with_radio(self):
262.         class BookForm(forms.ModelForm):
263.             class Meta:
264.                 model = Book
265.                 fields = ['author']
266.                 widgets = {'author': forms.RadioSelect()}
267. 
268.         writer = Writer.objects.create(name='Joe Doe')
269.         form = BookForm()
270.         self.assertEqual(list(form.fields['author'].choices), [
271.             ('', '---------'),
272.             (writer.pk, 'Joe Doe'),
273.         ])
274. 
275.     def test_non_blank_foreign_key_with_radio(self):
276.         class AwardForm(forms.ModelForm):
277.             class Meta:
278.                 model = Award
279.                 fields = ['character']
280.                 widgets = {'character': forms.RadioSelect()}
281. 
282.         character = Character.objects.create(
283.             username='user',
284.             last_action=datetime.datetime.today(),
285.         )
286.         form = AwardForm()
287.         self.assertEqual(
288.             list(form.fields['character'].choices),
289.             [(character.pk, 'user')],
290.         )
291. 
292.     def test_save_blank_false_with_required_false(self):
293.         """
294.         A ModelForm with a model with a field set to blank=False and the form
295.         field set to required=False should allow the field to be unset.
296.         """
297.         obj = Writer.objects.create(name='test')
298.         form = CustomWriterForm(data={'name': ''}, instance=obj)
299.         self.assertTrue(form.is_valid())
300.         obj = form.save()
301.         self.assertEqual(obj.name, '')
302. 
303.     def test_save_blank_null_unique_charfield_saves_null(self):
304.         form_class = modelform_factory(model=NullableUniqueCharFieldModel, fields=['codename'])
305.         empty_value = '' if connection.features.interprets_empty_strings_as_nulls else None
306. 
307.         form = form_class(data={'codename': ''})
308.         self.assertTrue(form.is_valid())
309.         form.save()
310.         self.assertEqual(form.instance.codename, empty_value)
311. 
312.         # Save a second form to verify there isn't a unique constraint violation.
313.         form = form_class(data={'codename': ''})
314.         self.assertTrue(form.is_valid())
315.         form.save()
316.         self.assertEqual(form.instance.codename, empty_value)
317. 
318.     def test_missing_fields_attribute(self):
319.         message = (
320.             "Creating a ModelForm without either the 'fields' attribute "
321.             "or the 'exclude' attribute is prohibited; form "
322.             "MissingFieldsForm needs updating."
323.         )
324.         with self.assertRaisesMessage(ImproperlyConfigured, message):
325.             class MissingFieldsForm(forms.ModelForm):
326.                 class Meta:
327.                     model = Category
328. 
329.     def test_extra_fields(self):
330.         class ExtraFields(BaseCategoryForm):
331.             some_extra_field = forms.BooleanField()
332. 
333.         self.assertEqual(list(ExtraFields.base_fields),
334.                          ['name', 'slug', 'url', 'some_extra_field'])
335. 
336.     def test_extra_field_model_form(self):
337.         with self.assertRaisesMessage(FieldError, 'no-field'):
338.             class ExtraPersonForm(forms.ModelForm):
339.                 """ ModelForm with an extra field """
340.                 age = forms.IntegerField()
341. 
342.                 class Meta:
343.                     model = Person
344.                     fields = ('name', 'no-field')
345. 
346.     def test_extra_declared_field_model_form(self):
347.         class ExtraPersonForm(forms.ModelForm):
348.             """ ModelForm with an extra field """
349.             age = forms.IntegerField()
350. 
351.             class Meta:
352.                 model = Person
353.                 fields = ('name', 'age')
354. 
355.     def test_extra_field_modelform_factory(self):
356.         with self.assertRaisesMessage(FieldError, 'Unknown field(s) (no-field) specified for Person'):
357.             modelform_factory(Person, fields=['no-field', 'name'])
358. 
359.     def test_replace_field(self):
360.         class ReplaceField(forms.ModelForm):
361.             url = forms.BooleanField()
362. 
363.             class Meta:
364.                 model = Category
365.                 fields = '__all__'
366. 
367.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
368. 
369.     def test_replace_field_variant_2(self):
370.         # Should have the same result as before,
371.         # but 'fields' attribute specified differently
372.         class ReplaceField(forms.ModelForm):
373.             url = forms.BooleanField()
374. 
375.             class Meta:
376.                 model = Category
377.                 fields = ['url']
378. 
379.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
380. 
381.     def test_replace_field_variant_3(self):
382.         # Should have the same result as before,
383.         # but 'fields' attribute specified differently
384.         class ReplaceField(forms.ModelForm):
385.             url = forms.BooleanField()
386. 
387.             class Meta:
388.                 model = Category
389.                 fields = []  # url will still appear, since it is explicit above
390. 
391.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
392. 
393.     def test_override_field(self):
394.         class WriterForm(forms.ModelForm):
395.             book = forms.CharField(required=False)
396. 
397.             class Meta:
398.                 model = Writer
399.                 fields = '__all__'
400. 
401.         wf = WriterForm({'name': 'Richard Lockridge'})
402.         self.assertTrue(wf.is_valid())
403. 
404.     def test_limit_nonexistent_field(self):
405.         expected_msg = 'Unknown field(s) (nonexistent) specified for Category'
406.         with self.assertRaisesMessage(FieldError, expected_msg):
407.             class InvalidCategoryForm(forms.ModelForm):
408.                 class Meta:
409.                     model = Category
410.                     fields = ['nonexistent']
411. 
412.     def test_limit_fields_with_string(self):
413.         expected_msg = "CategoryForm.Meta.fields cannot be a string. Did you mean to type: ('url',)?"
414.         with self.assertRaisesMessage(TypeError, expected_msg):
415.             class CategoryForm(forms.ModelForm):
416.                 class Meta:
417.                     model = Category
418.                     fields = ('url')  # note the missing comma
419. 
420.     def test_exclude_fields(self):
421.         class ExcludeFields(forms.ModelForm):
422.             class Meta:
423.                 model = Category
424.                 exclude = ['url']
425. 
426.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug'])
427. 
428.     def test_exclude_nonexistent_field(self):
429.         class ExcludeFields(forms.ModelForm):
430.             class Meta:
431.                 model = Category
432.                 exclude = ['nonexistent']
433. 
434.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug', 'url'])
435. 
436.     def test_exclude_fields_with_string(self):
437.         expected_msg = "CategoryForm.Meta.exclude cannot be a string. Did you mean to type: ('url',)?"
438.         with self.assertRaisesMessage(TypeError, expected_msg):
439.             class CategoryForm(forms.ModelForm):
440.                 class Meta:
441.                     model = Category
442.                     exclude = ('url')  # note the missing comma
443. 
444.     def test_exclude_and_validation(self):
445.         # This Price instance generated by this form is not valid because the quantity
446.         # field is required, but the form is valid because the field is excluded from
447.         # the form. This is for backwards compatibility.
448.         class PriceFormWithoutQuantity(forms.ModelForm):
449.             class Meta:
450.                 model = Price
451.                 exclude = ('quantity',)
452. 
453.         form = PriceFormWithoutQuantity({'price': '6.00'})
454.         self.assertTrue(form.is_valid())
455.         price = form.save(commit=False)
456.         msg = "{'quantity': ['This field cannot be null.']}"
457.         with self.assertRaisesMessage(ValidationError, msg):
458.             price.full_clean()
459. 
460.         # The form should not validate fields that it doesn't contain even if they are
461.         # specified using 'fields', not 'exclude'.
462.         class PriceFormWithoutQuantity(forms.ModelForm):
463.             class Meta:
464.                 model = Price
465.                 fields = ('price',)
466.         form = PriceFormWithoutQuantity({'price': '6.00'})
467.         self.assertTrue(form.is_valid())
468. 
469.         # The form should still have an instance of a model that is not complete and
470.         # not saved into a DB yet.
471.         self.assertEqual(form.instance.price, Decimal('6.00'))
472.         self.assertIsNone(form.instance.quantity)
473.         self.assertIsNone(form.instance.pk)
474. 
475.     def test_confused_form(self):
476.         class ConfusedForm(forms.ModelForm):
477.             """ Using 'fields' *and* 'exclude'. Not sure why you'd want to do
478.             this, but uh, "be liberal in what you accept" and all.
479.             """
480.             class Meta:
481.                 model = Category
482.                 fields = ['name', 'url']
483.                 exclude = ['url']
484. 
485.         self.assertEqual(list(ConfusedForm.base_fields),
486.                          ['name'])
487. 
488.     def test_mixmodel_form(self):
489.         class MixModelForm(BaseCategoryForm):
490.             """ Don't allow more than one 'model' definition in the
491.             inheritance hierarchy.  Technically, it would generate a valid
492.             form, but the fact that the resulting save method won't deal with
493.             multiple objects is likely to trip up people not familiar with the
494.             mechanics.
495.             """
496.             class Meta:
497.                 model = Article
498.                 fields = '__all__'
499.             # MixModelForm is now an Article-related thing, because MixModelForm.Meta
500.             # overrides BaseCategoryForm.Meta.

File: tests/model_forms/models.py
Line number range: 1 - 474
Content:
1. import datetime
2. import os
3. import tempfile
4. import uuid
5. 
6. from django.core import validators
7. from django.core.exceptions import ValidationError
8. from django.core.files.storage import FileSystemStorage
9. from django.db import models
10. 
11. temp_storage_dir = tempfile.mkdtemp()
12. temp_storage = FileSystemStorage(temp_storage_dir)
13. 
14. 
15. class Person(models.Model):
16.     name = models.CharField(max_length=100)
17. 
18. 
19. class Category(models.Model):
20.     name = models.CharField(max_length=20)
21.     slug = models.SlugField(max_length=20)
22.     url = models.CharField('The URL', max_length=40)
23. 
24.     def __str__(self):
25.         return self.name
26. 
27.     def __repr__(self):
28.         return self.__str__()
29. 
30. 
31. class WriterManager(models.Manager):
32.     def get_queryset(self):
33.         qs = super().get_queryset()
34.         return qs.filter(archived=False)
35. 
36. 
37. class Writer(models.Model):
38.     name = models.CharField(max_length=50, help_text='Use both first and last names.')
39.     archived = models.BooleanField(default=False, editable=False)
40. 
41.     objects = WriterManager()
42. 
43.     class Meta:
44.         ordering = ('name',)
45. 
46.     def __str__(self):
47.         return self.name
48. 
49. 
50. class Article(models.Model):
51.     ARTICLE_STATUS = (
52.         (1, 'Draft'),
53.         (2, 'Pending'),
54.         (3, 'Live'),
55.     )
56.     headline = models.CharField(max_length=50)
57.     slug = models.SlugField()
58.     pub_date = models.DateField()
59.     created = models.DateField(editable=False)
60.     writer = models.ForeignKey(Writer, models.CASCADE)
61.     article = models.TextField()
62.     categories = models.ManyToManyField(Category, blank=True)
63.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)
64. 
65.     def save(self, *args, **kwargs):
66.         if not self.id:
67.             self.created = datetime.date.today()
68.         return super().save(*args, **kwargs)
69. 
70.     def __str__(self):
71.         return self.headline
72. 
73. 
74. class ImprovedArticle(models.Model):
75.     article = models.OneToOneField(Article, models.CASCADE)
76. 
77. 
78. class ImprovedArticleWithParentLink(models.Model):
79.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)
80. 
81. 
82. class BetterWriter(Writer):
83.     score = models.IntegerField()
84. 
85. 
86. class Publication(models.Model):
87.     title = models.CharField(max_length=30)
88.     date_published = models.DateField()
89. 
90.     def __str__(self):
91.         return self.title
92. 
93. 
94. def default_mode():
95.     return 'di'
96. 
97. 
98. def default_category():
99.     return 3
100. 
101. 
102. class PublicationDefaults(models.Model):
103.     MODE_CHOICES = (('di', 'direct'), ('de', 'delayed'))
104.     CATEGORY_CHOICES = ((1, 'Games'), (2, 'Comics'), (3, 'Novel'))
105.     title = models.CharField(max_length=30)
106.     date_published = models.DateField(default=datetime.date.today)
107.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))
108.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)
109.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)
110.     active = models.BooleanField(default=True)
111.     file = models.FileField(default='default.txt')
112. 
113. 
114. class Author(models.Model):
115.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)
116.     full_name = models.CharField(max_length=255)
117. 
118. 
119. class Author1(models.Model):
120.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)
121.     full_name = models.CharField(max_length=255)
122. 
123. 
124. class WriterProfile(models.Model):
125.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)
126.     age = models.PositiveIntegerField()
127. 
128.     def __str__(self):
129.         return "%s is %s" % (self.writer, self.age)
130. 
131. 
132. class Document(models.Model):
133.     myfile = models.FileField(upload_to='unused', blank=True)
134. 
135. 
136. class TextFile(models.Model):
137.     description = models.CharField(max_length=20)
138.     file = models.FileField(storage=temp_storage, upload_to='tests', max_length=15)
139. 
140.     def __str__(self):
141.         return self.description
142. 
143. 
144. class CustomFileField(models.FileField):
145.     def save_form_data(self, instance, data):
146.         been_here = getattr(self, 'been_saved', False)
147.         assert not been_here, "save_form_data called more than once"
148.         setattr(self, 'been_saved', True)
149. 
150. 
151. class CustomFF(models.Model):
152.     f = CustomFileField(upload_to='unused', blank=True)
153. 
154. 
155. class FilePathModel(models.Model):
156.     path = models.FilePathField(path=os.path.dirname(__file__), match='models.py', blank=True)
157. 
158. 
159. try:
160.     from PIL import Image  # NOQA: detect if Pillow is installed
161. 
162.     test_images = True
163. 
164.     class ImageFile(models.Model):
165.         def custom_upload_path(self, filename):
166.             path = self.path or 'tests'
167.             return '%s/%s' % (path, filename)
168. 
169.         description = models.CharField(max_length=20)
170. 
171.         # Deliberately put the image field *after* the width/height fields to
172.         # trigger the bug in #10404 with width/height not getting assigned.
173.         width = models.IntegerField(editable=False)
174.         height = models.IntegerField(editable=False)
175.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
176.                                   width_field='width', height_field='height')
177.         path = models.CharField(max_length=16, blank=True, default='')
178. 
179.         def __str__(self):
180.             return self.description
181. 
182.     class OptionalImageFile(models.Model):
183.         def custom_upload_path(self, filename):
184.             path = self.path or 'tests'
185.             return '%s/%s' % (path, filename)
186. 
187.         description = models.CharField(max_length=20)
188.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
189.                                   width_field='width', height_field='height',
190.                                   blank=True, null=True)
191.         width = models.IntegerField(editable=False, null=True)
192.         height = models.IntegerField(editable=False, null=True)
193.         path = models.CharField(max_length=16, blank=True, default='')
194. 
195.         def __str__(self):
196.             return self.description
197. 
198.     class NoExtensionImageFile(models.Model):
199.         def upload_to(self, filename):
200.             return 'tests/no_extension'
201. 
202.         description = models.CharField(max_length=20)
203.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)
204. 
205.         def __str__(self):
206.             return self.description
207. 
208. except ImportError:
209.     test_images = False
210. 
211. 
212. class Homepage(models.Model):
213.     url = models.URLField()
214. 
215. 
216. class Product(models.Model):
217.     slug = models.SlugField(unique=True)
218. 
219.     def __str__(self):
220.         return self.slug
221. 
222. 
223. class Price(models.Model):
224.     price = models.DecimalField(max_digits=10, decimal_places=2)
225.     quantity = models.PositiveIntegerField()
226. 
227.     class Meta:
228.         unique_together = (('price', 'quantity'),)
229. 
230.     def __str__(self):
231.         return "%s for %s" % (self.quantity, self.price)
232. 
233. 
234. class Triple(models.Model):
235.     left = models.IntegerField()
236.     middle = models.IntegerField()
237.     right = models.IntegerField()
238. 
239.     class Meta:
240.         unique_together = (('left', 'middle'), ('middle', 'right'))
241. 
242. 
243. class ArticleStatus(models.Model):
244.     ARTICLE_STATUS_CHAR = (
245.         ('d', 'Draft'),
246.         ('p', 'Pending'),
247.         ('l', 'Live'),
248.     )
249.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)
250. 
251. 
252. class Inventory(models.Model):
253.     barcode = models.PositiveIntegerField(unique=True)
254.     parent = models.ForeignKey('self', models.SET_NULL, to_field='barcode', blank=True, null=True)
255.     name = models.CharField(blank=False, max_length=20)
256. 
257.     class Meta:
258.         ordering = ('name',)
259. 
260.     def __str__(self):
261.         return self.name
262. 
263.     def __repr__(self):
264.         return self.__str__()
265. 
266. 
267. class Book(models.Model):
268.     title = models.CharField(max_length=40)
269.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)
270.     special_id = models.IntegerField(blank=True, null=True, unique=True)
271. 
272.     class Meta:
273.         unique_together = ('title', 'author')
274. 
275. 
276. class BookXtra(models.Model):
277.     isbn = models.CharField(max_length=16, unique=True)
278.     suffix1 = models.IntegerField(blank=True, default=0)
279.     suffix2 = models.IntegerField(blank=True, default=0)
280. 
281.     class Meta:
282.         unique_together = (('suffix1', 'suffix2'))
283.         abstract = True
284. 
285. 
286. class DerivedBook(Book, BookXtra):
287.     pass
288. 
289. 
290. class ExplicitPK(models.Model):
291.     key = models.CharField(max_length=20, primary_key=True)
292.     desc = models.CharField(max_length=20, blank=True, unique=True)
293. 
294.     class Meta:
295.         unique_together = ('key', 'desc')
296. 
297.     def __str__(self):
298.         return self.key
299. 
300. 
301. class Post(models.Model):
302.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
303.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
304.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
305.     posted = models.DateField()
306. 
307.     def __str__(self):
308.         return self.title
309. 
310. 
311. class DateTimePost(models.Model):
312.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
313.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
314.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
315.     posted = models.DateTimeField(editable=False)
316. 
317.     def __str__(self):
318.         return self.title
319. 
320. 
321. class DerivedPost(Post):
322.     pass
323. 
324. 
325. class BigInt(models.Model):
326.     biggie = models.BigIntegerField()
327. 
328.     def __str__(self):
329.         return str(self.biggie)
330. 
331. 
332. class MarkupField(models.CharField):
333.     def __init__(self, *args, **kwargs):
334.         kwargs["max_length"] = 20
335.         super().__init__(*args, **kwargs)
336. 
337.     def formfield(self, **kwargs):
338.         # don't allow this field to be used in form (real use-case might be
339.         # that you know the markup will always be X, but it is among an app
340.         # that allows the user to say it could be something else)
341.         # regressed at r10062
342.         return None
343. 
344. 
345. class CustomFieldForExclusionModel(models.Model):
346.     name = models.CharField(max_length=10)
347.     markup = MarkupField()
348. 
349. 
350. class FlexibleDatePost(models.Model):
351.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
352.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
353.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
354.     posted = models.DateField(blank=True, null=True)
355. 
356. 
357. class Colour(models.Model):
358.     name = models.CharField(max_length=50)
359. 
360.     def __iter__(self):
361.         yield from range(5)
362. 
363.     def __str__(self):
364.         return self.name
365. 
366. 
367. class ColourfulItem(models.Model):
368.     name = models.CharField(max_length=50)
369.     colours = models.ManyToManyField(Colour)
370. 
371. 
372. class CustomErrorMessage(models.Model):
373.     name1 = models.CharField(
374.         max_length=50,
375.         validators=[validators.validate_slug],
376.         error_messages={'invalid': 'Model custom error message.'},
377.     )
378.     name2 = models.CharField(
379.         max_length=50,
380.         validators=[validators.validate_slug],
381.         error_messages={'invalid': 'Model custom error message.'},
382.     )
383. 
384.     def clean(self):
385.         if self.name1 == 'FORBIDDEN_VALUE':
386.             raise ValidationError({'name1': [ValidationError('Model.clean() error messages.')]})
387.         elif self.name1 == 'FORBIDDEN_VALUE2':
388.             raise ValidationError({'name1': 'Model.clean() error messages (simpler syntax).'})
389.         elif self.name1 == 'GLOBAL_ERROR':
390.             raise ValidationError("Global error message.")
391. 
392. 
393. def today_callable_dict():
394.     return {"last_action__gte": datetime.datetime.today()}
395. 
396. 
397. def today_callable_q():
398.     return models.Q(last_action__gte=datetime.datetime.today())
399. 
400. 
401. class Character(models.Model):
402.     username = models.CharField(max_length=100)
403.     last_action = models.DateTimeField()
404. 
405.     def __str__(self):
406.         return self.username
407. 
408. 
409. class StumpJoke(models.Model):
410.     most_recently_fooled = models.ForeignKey(
411.         Character,
412.         models.CASCADE,
413.         limit_choices_to=today_callable_dict,
414.         related_name="+",
415.     )
416.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")
417. 
418. 
419. # Model for #13776
420. class Student(models.Model):
421.     character = models.ForeignKey(Character, models.CASCADE)
422.     study = models.CharField(max_length=30)
423. 
424. 
425. # Model for #639
426. class Photo(models.Model):
427.     title = models.CharField(max_length=30)
428.     image = models.FileField(storage=temp_storage, upload_to='tests')
429. 
430.     # Support code for the tests; this keeps track of how many times save()
431.     # gets called on each instance.
432.     def __init__(self, *args, **kwargs):
433.         super().__init__(*args, **kwargs)
434.         self._savecount = 0
435. 
436.     def save(self, force_insert=False, force_update=False):
437.         super().save(force_insert, force_update)
438.         self._savecount += 1
439. 
440. 
441. class UUIDPK(models.Model):
442.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
443.     name = models.CharField(max_length=30)
444. 
445. 
446. # Models for #24706
447. class StrictAssignmentFieldSpecific(models.Model):
448.     title = models.CharField(max_length=30)
449.     _should_error = False
450. 
451.     def __setattr__(self, key, value):
452.         if self._should_error is True:
453.             raise ValidationError(message={key: "Cannot set attribute"}, code='invalid')
454.         super().__setattr__(key, value)
455. 
456. 
457. class StrictAssignmentAll(models.Model):
458.     title = models.CharField(max_length=30)
459.     _should_error = False
460. 
461.     def __setattr__(self, key, value):
462.         if self._should_error is True:
463.             raise ValidationError(message="Cannot set attribute", code='invalid')
464.         super().__setattr__(key, value)
465. 
466. 
467. # A model with ForeignKey(blank=False, null=True)
468. class Award(models.Model):
469.     name = models.CharField(max_length=30)
470.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)
471. 
472. 
473. class NullableUniqueCharFieldModel(models.Model):
474.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)

File: tests/queries/test_qs_combinators.py
Line number range: 1 - 316
Content:
1. import operator
2. 
3. from django.db import DatabaseError, NotSupportedError, connection
4. from django.db.models import Exists, F, IntegerField, OuterRef, Value
5. from django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature
6. 
7. from .models import Number, ReservedName
8. 
9. 
10. @skipUnlessDBFeature('supports_select_union')
11. class QuerySetSetOperationTests(TestCase):
12.     @classmethod
13.     def setUpTestData(cls):
14.         Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))
15. 
16.     def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):
17.         self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter('num'), ordered)
18. 
19.     def test_simple_union(self):
20.         qs1 = Number.objects.filter(num__lte=1)
21.         qs2 = Number.objects.filter(num__gte=8)
22.         qs3 = Number.objects.filter(num=5)
23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)
24. 
25.     @skipUnlessDBFeature('supports_select_intersection')
26.     def test_simple_intersection(self):
27.         qs1 = Number.objects.filter(num__lte=5)
28.         qs2 = Number.objects.filter(num__gte=5)
29.         qs3 = Number.objects.filter(num__gte=4, num__lte=6)
30.         self.assertNumbersEqual(qs1.intersection(qs2, qs3), [5], ordered=False)
31. 
32.     @skipUnlessDBFeature('supports_select_intersection')
33.     def test_intersection_with_values(self):
34.         ReservedName.objects.create(name='a', order=2)
35.         qs1 = ReservedName.objects.all()
36.         reserved_name = qs1.intersection(qs1).values('name', 'order', 'id').get()
37.         self.assertEqual(reserved_name['name'], 'a')
38.         self.assertEqual(reserved_name['order'], 2)
39.         reserved_name = qs1.intersection(qs1).values_list('name', 'order', 'id').get()
40.         self.assertEqual(reserved_name[:2], ('a', 2))
41. 
42.     @skipUnlessDBFeature('supports_select_difference')
43.     def test_simple_difference(self):
44.         qs1 = Number.objects.filter(num__lte=5)
45.         qs2 = Number.objects.filter(num__lte=4)
46.         self.assertNumbersEqual(qs1.difference(qs2), [5], ordered=False)
47. 
48.     def test_union_distinct(self):
49.         qs1 = Number.objects.all()
50.         qs2 = Number.objects.all()
51.         self.assertEqual(len(list(qs1.union(qs2, all=True))), 20)
52.         self.assertEqual(len(list(qs1.union(qs2))), 10)
53. 
54.     @skipUnlessDBFeature('supports_select_intersection')
55.     def test_intersection_with_empty_qs(self):
56.         qs1 = Number.objects.all()
57.         qs2 = Number.objects.none()
58.         qs3 = Number.objects.filter(pk__in=[])
59.         self.assertEqual(len(qs1.intersection(qs2)), 0)
60.         self.assertEqual(len(qs1.intersection(qs3)), 0)
61.         self.assertEqual(len(qs2.intersection(qs1)), 0)
62.         self.assertEqual(len(qs3.intersection(qs1)), 0)
63.         self.assertEqual(len(qs2.intersection(qs2)), 0)
64.         self.assertEqual(len(qs3.intersection(qs3)), 0)
65. 
66.     @skipUnlessDBFeature('supports_select_difference')
67.     def test_difference_with_empty_qs(self):
68.         qs1 = Number.objects.all()
69.         qs2 = Number.objects.none()
70.         qs3 = Number.objects.filter(pk__in=[])
71.         self.assertEqual(len(qs1.difference(qs2)), 10)
72.         self.assertEqual(len(qs1.difference(qs3)), 10)
73.         self.assertEqual(len(qs2.difference(qs1)), 0)
74.         self.assertEqual(len(qs3.difference(qs1)), 0)
75.         self.assertEqual(len(qs2.difference(qs2)), 0)
76.         self.assertEqual(len(qs3.difference(qs3)), 0)
77. 
78.     @skipUnlessDBFeature('supports_select_difference')
79.     def test_difference_with_values(self):
80.         ReservedName.objects.create(name='a', order=2)
81.         qs1 = ReservedName.objects.all()
82.         qs2 = ReservedName.objects.none()
83.         reserved_name = qs1.difference(qs2).values('name', 'order', 'id').get()
84.         self.assertEqual(reserved_name['name'], 'a')
85.         self.assertEqual(reserved_name['order'], 2)
86.         reserved_name = qs1.difference(qs2).values_list('name', 'order', 'id').get()
87.         self.assertEqual(reserved_name[:2], ('a', 2))
88. 
89.     def test_union_with_empty_qs(self):
90.         qs1 = Number.objects.all()
91.         qs2 = Number.objects.none()
92.         qs3 = Number.objects.filter(pk__in=[])
93.         self.assertEqual(len(qs1.union(qs2)), 10)
94.         self.assertEqual(len(qs2.union(qs1)), 10)
95.         self.assertEqual(len(qs1.union(qs3)), 10)
96.         self.assertEqual(len(qs3.union(qs1)), 10)
97.         self.assertEqual(len(qs2.union(qs1, qs1, qs1)), 10)
98.         self.assertEqual(len(qs2.union(qs1, qs1, all=True)), 20)
99.         self.assertEqual(len(qs2.union(qs2)), 0)
100.         self.assertEqual(len(qs3.union(qs3)), 0)
101. 
102.     def test_limits(self):
103.         qs1 = Number.objects.all()
104.         qs2 = Number.objects.all()
105.         self.assertEqual(len(list(qs1.union(qs2)[:2])), 2)
106. 
107.     def test_ordering(self):
108.         qs1 = Number.objects.filter(num__lte=1)
109.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)
110.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num'), [3, 2, 1, 0])
111. 
112.     def test_ordering_by_alias(self):
113.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('num'))
114.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('num'))
115.         self.assertQuerysetEqual(
116.             qs1.union(qs2).order_by('-alias'),
117.             [3, 2, 1, 0],
118.             operator.itemgetter('alias'),
119.         )
120. 
121.     def test_ordering_by_f_expression(self):
122.         qs1 = Number.objects.filter(num__lte=1)
123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)
124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F('num').desc()), [3, 2, 1, 0])
125. 
126.     def test_ordering_by_f_expression_and_alias(self):
127.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('other_num'))
128.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('other_num'))
129.         self.assertQuerysetEqual(
130.             qs1.union(qs2).order_by(F('alias').desc()),
131.             [10, 9, 8, 7],
132.             operator.itemgetter('alias'),
133.         )
134.         Number.objects.create(num=-1)
135.         self.assertQuerysetEqual(
136.             qs1.union(qs2).order_by(F('alias').desc(nulls_last=True)),
137.             [10, 9, 8, 7, None],
138.             operator.itemgetter('alias'),
139.         )
140. 
141.     def test_union_with_values(self):
142.         ReservedName.objects.create(name='a', order=2)
143.         qs1 = ReservedName.objects.all()
144.         reserved_name = qs1.union(qs1).values('name', 'order', 'id').get()
145.         self.assertEqual(reserved_name['name'], 'a')
146.         self.assertEqual(reserved_name['order'], 2)
147.         reserved_name = qs1.union(qs1).values_list('name', 'order', 'id').get()
148.         self.assertEqual(reserved_name[:2], ('a', 2))
149.         # List of columns can be changed.
150.         reserved_name = qs1.union(qs1).values_list('order').get()
151.         self.assertEqual(reserved_name, (2,))
152. 
153.     def test_union_with_two_annotated_values_list(self):
154.         qs1 = Number.objects.filter(num=1).annotate(
155.             count=Value(0, IntegerField()),
156.         ).values_list('num', 'count')
157.         qs2 = Number.objects.filter(num=2).values('pk').annotate(
158.             count=F('num'),
159.         ).annotate(
160.             num=Value(1, IntegerField()),
161.         ).values_list('num', 'count')
162.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])
163. 
164.     def test_union_with_extra_and_values_list(self):
165.         qs1 = Number.objects.filter(num=1).extra(
166.             select={'count': 0},
167.         ).values_list('num', 'count')
168.         qs2 = Number.objects.filter(num=2).extra(select={'count': 1})
169.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])
170. 
171.     def test_union_with_values_list_on_annotated_and_unannotated(self):
172.         ReservedName.objects.create(name='rn1', order=1)
173.         qs1 = Number.objects.annotate(
174.             has_reserved_name=Exists(ReservedName.objects.filter(order=OuterRef('num')))
175.         ).filter(has_reserved_name=True)
176.         qs2 = Number.objects.filter(num=9)
177.         self.assertCountEqual(qs1.union(qs2).values_list('num', flat=True), [1, 9])
178. 
179.     def test_union_with_values_list_and_order(self):
180.         ReservedName.objects.bulk_create([
181.             ReservedName(name='rn1', order=7),
182.             ReservedName(name='rn2', order=5),
183.             ReservedName(name='rn0', order=6),
184.             ReservedName(name='rn9', order=-1),
185.         ])
186.         qs1 = ReservedName.objects.filter(order__gte=6)
187.         qs2 = ReservedName.objects.filter(order__lte=5)
188.         union_qs = qs1.union(qs2)
189.         for qs, expected_result in (
190.             # Order by a single column.
191.             (union_qs.order_by('-pk').values_list('order', flat=True), [-1, 6, 5, 7]),
192.             (union_qs.order_by('pk').values_list('order', flat=True), [7, 5, 6, -1]),
193.             (union_qs.values_list('order', flat=True).order_by('-pk'), [-1, 6, 5, 7]),
194.             (union_qs.values_list('order', flat=True).order_by('pk'), [7, 5, 6, -1]),
195.             # Order by multiple columns.
196.             (union_qs.order_by('-name', 'pk').values_list('order', flat=True), [-1, 5, 7, 6]),
197.             (union_qs.values_list('order', flat=True).order_by('-name', 'pk'), [-1, 5, 7, 6]),
198.         ):
199.             with self.subTest(qs=qs):
200.                 self.assertEqual(list(qs), expected_result)
201. 
202.     def test_count_union(self):
203.         qs1 = Number.objects.filter(num__lte=1).values('num')
204.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values('num')
205.         self.assertEqual(qs1.union(qs2).count(), 4)
206. 
207.     def test_count_union_empty_result(self):
208.         qs = Number.objects.filter(pk__in=[])
209.         self.assertEqual(qs.union(qs).count(), 0)
210. 
211.     @skipUnlessDBFeature('supports_select_difference')
212.     def test_count_difference(self):
213.         qs1 = Number.objects.filter(num__lt=10)
214.         qs2 = Number.objects.filter(num__lt=9)
215.         self.assertEqual(qs1.difference(qs2).count(), 1)
216. 
217.     @skipUnlessDBFeature('supports_select_intersection')
218.     def test_count_intersection(self):
219.         qs1 = Number.objects.filter(num__gte=5)
220.         qs2 = Number.objects.filter(num__lte=5)
221.         self.assertEqual(qs1.intersection(qs2).count(), 1)
222. 
223.     @skipUnlessDBFeature('supports_slicing_ordering_in_compound')
224.     def test_ordering_subqueries(self):
225.         qs1 = Number.objects.order_by('num')[:2]
226.         qs2 = Number.objects.order_by('-num')[:2]
227.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num')[:4], [9, 8, 1, 0])
228. 
229.     @skipIfDBFeature('supports_slicing_ordering_in_compound')
230.     def test_unsupported_ordering_slicing_raises_db_error(self):
231.         qs1 = Number.objects.all()
232.         qs2 = Number.objects.all()
233.         msg = 'LIMIT/OFFSET not allowed in subqueries of compound statements'
234.         with self.assertRaisesMessage(DatabaseError, msg):
235.             list(qs1.union(qs2[:10]))
236.         msg = 'ORDER BY not allowed in subqueries of compound statements'
237.         with self.assertRaisesMessage(DatabaseError, msg):
238.             list(qs1.order_by('id').union(qs2))
239. 
240.     @skipIfDBFeature('supports_select_intersection')
241.     def test_unsupported_intersection_raises_db_error(self):
242.         qs1 = Number.objects.all()
243.         qs2 = Number.objects.all()
244.         msg = 'intersection is not supported on this database backend'
245.         with self.assertRaisesMessage(NotSupportedError, msg):
246.             list(qs1.intersection(qs2))
247. 
248.     def test_combining_multiple_models(self):
249.         ReservedName.objects.create(name='99 little bugs', order=99)
250.         qs1 = Number.objects.filter(num=1).values_list('num', flat=True)
251.         qs2 = ReservedName.objects.values_list('order')
252.         self.assertEqual(list(qs1.union(qs2).order_by('num')), [1, 99])
253. 
254.     def test_order_raises_on_non_selected_column(self):
255.         qs1 = Number.objects.filter().annotate(
256.             annotation=Value(1, IntegerField()),
257.         ).values('annotation', num2=F('num'))
258.         qs2 = Number.objects.filter().values('id', 'num')
259.         # Should not raise
260.         list(qs1.union(qs2).order_by('annotation'))
261.         list(qs1.union(qs2).order_by('num2'))
262.         msg = 'ORDER BY term does not match any column in the result set'
263.         # 'id' is not part of the select
264.         with self.assertRaisesMessage(DatabaseError, msg):
265.             list(qs1.union(qs2).order_by('id'))
266.         # 'num' got realiased to num2
267.         with self.assertRaisesMessage(DatabaseError, msg):
268.             list(qs1.union(qs2).order_by('num'))
269.         with self.assertRaisesMessage(DatabaseError, msg):
270.             list(qs1.union(qs2).order_by(F('num')))
271.         with self.assertRaisesMessage(DatabaseError, msg):
272.             list(qs1.union(qs2).order_by(F('num').desc()))
273.         # switched order, now 'exists' again:
274.         list(qs2.union(qs1).order_by('num'))
275. 
276.     @skipUnlessDBFeature('supports_select_difference', 'supports_select_intersection')
277.     def test_qs_with_subcompound_qs(self):
278.         qs1 = Number.objects.all()
279.         qs2 = Number.objects.intersection(Number.objects.filter(num__gt=1))
280.         self.assertEqual(qs1.difference(qs2).count(), 2)
281. 
282.     def test_order_by_same_type(self):
283.         qs = Number.objects.all()
284.         union = qs.union(qs)
285.         numbers = list(range(10))
286.         self.assertNumbersEqual(union.order_by('num'), numbers)
287.         self.assertNumbersEqual(union.order_by('other_num'), reversed(numbers))
288. 
289.     def test_unsupported_operations_on_combined_qs(self):
290.         qs = Number.objects.all()
291.         msg = 'Calling QuerySet.%s() after %s() is not supported.'
292.         combinators = ['union']
293.         if connection.features.supports_select_difference:
294.             combinators.append('difference')
295.         if connection.features.supports_select_intersection:
296.             combinators.append('intersection')
297.         for combinator in combinators:
298.             for operation in (
299.                 'annotate',
300.                 'defer',
301.                 'delete',
302.                 'distinct',
303.                 'exclude',
304.                 'extra',
305.                 'filter',
306.                 'only',
307.                 'prefetch_related',
308.                 'select_related',
309.                 'update',
310.             ):
311.                 with self.subTest(combinator=combinator, operation=operation):
312.                     with self.assertRaisesMessage(
313.                         NotSupportedError,
314.                         msg % (operation, combinator),
315.                     ):
316.                         getattr(getattr(qs, combinator)(qs), operation)()

File: tests/queries/models.py
Line number range: 1 - 500
Content:
1. """
2. Various complex queries that have been problematic in the past.
3. """
4. from django.db import models
5. from django.db.models.functions import Now
6. 
7. 
8. class DumbCategory(models.Model):
9.     pass
10. 
11. 
12. class ProxyCategory(DumbCategory):
13.     class Meta:
14.         proxy = True
15. 
16. 
17. class NamedCategory(DumbCategory):
18.     name = models.CharField(max_length=10)
19. 
20.     def __str__(self):
21.         return self.name
22. 
23. 
24. class Tag(models.Model):
25.     name = models.CharField(max_length=10)
26.     parent = models.ForeignKey(
27.         'self',
28.         models.SET_NULL,
29.         blank=True, null=True,
30.         related_name='children',
31.     )
32.     category = models.ForeignKey(NamedCategory, models.SET_NULL, null=True, default=None)
33. 
34.     class Meta:
35.         ordering = ['name']
36. 
37.     def __str__(self):
38.         return self.name
39. 
40. 
41. class Note(models.Model):
42.     note = models.CharField(max_length=100)
43.     misc = models.CharField(max_length=10)
44.     tag = models.ForeignKey(Tag, models.SET_NULL, blank=True, null=True)
45. 
46.     class Meta:
47.         ordering = ['note']
48. 
49.     def __str__(self):
50.         return self.note
51. 
52. 
53. class Annotation(models.Model):
54.     name = models.CharField(max_length=10)
55.     tag = models.ForeignKey(Tag, models.CASCADE)
56.     notes = models.ManyToManyField(Note)
57. 
58.     def __str__(self):
59.         return self.name
60. 
61. 
62. class DateTimePK(models.Model):
63.     date = models.DateTimeField(primary_key=True, auto_now_add=True)
64. 
65. 
66. class ExtraInfo(models.Model):
67.     info = models.CharField(max_length=100)
68.     note = models.ForeignKey(Note, models.CASCADE, null=True)
69.     value = models.IntegerField(null=True)
70.     date = models.ForeignKey(DateTimePK, models.SET_NULL, null=True)
71.     filterable = models.BooleanField(default=True)
72. 
73.     class Meta:
74.         ordering = ['info']
75. 
76.     def __str__(self):
77.         return self.info
78. 
79. 
80. class Author(models.Model):
81.     name = models.CharField(max_length=10)
82.     num = models.IntegerField(unique=True)
83.     extra = models.ForeignKey(ExtraInfo, models.CASCADE)
84. 
85.     class Meta:
86.         ordering = ['name']
87. 
88.     def __str__(self):
89.         return self.name
90. 
91. 
92. class Item(models.Model):
93.     name = models.CharField(max_length=10)
94.     created = models.DateTimeField()
95.     modified = models.DateTimeField(blank=True, null=True)
96.     tags = models.ManyToManyField(Tag, blank=True)
97.     creator = models.ForeignKey(Author, models.CASCADE)
98.     note = models.ForeignKey(Note, models.CASCADE)
99. 
100.     class Meta:
101.         ordering = ['-note', 'name']
102. 
103.     def __str__(self):
104.         return self.name
105. 
106. 
107. class Report(models.Model):
108.     name = models.CharField(max_length=10)
109.     creator = models.ForeignKey(Author, models.SET_NULL, to_field='num', null=True)
110. 
111.     def __str__(self):
112.         return self.name
113. 
114. 
115. class ReportComment(models.Model):
116.     report = models.ForeignKey(Report, models.CASCADE)
117. 
118. 
119. class Ranking(models.Model):
120.     rank = models.IntegerField()
121.     author = models.ForeignKey(Author, models.CASCADE)
122. 
123.     class Meta:
124.         # A complex ordering specification. Should stress the system a bit.
125.         ordering = ('author__extra__note', 'author__name', 'rank')
126. 
127.     def __str__(self):
128.         return '%d: %s' % (self.rank, self.author.name)
129. 
130. 
131. class Cover(models.Model):
132.     title = models.CharField(max_length=50)
133.     item = models.ForeignKey(Item, models.CASCADE)
134. 
135.     class Meta:
136.         ordering = ['item']
137. 
138.     def __str__(self):
139.         return self.title
140. 
141. 
142. class Number(models.Model):
143.     num = models.IntegerField()
144.     other_num = models.IntegerField(null=True)
145.     another_num = models.IntegerField(null=True)
146. 
147.     def __str__(self):
148.         return str(self.num)
149. 
150. # Symmetrical m2m field with a normal field using the reverse accessor name
151. # ("valid").
152. 
153. 
154. class Valid(models.Model):
155.     valid = models.CharField(max_length=10)
156.     parent = models.ManyToManyField('self')
157. 
158.     class Meta:
159.         ordering = ['valid']
160. 
161. # Some funky cross-linked models for testing a couple of infinite recursion
162. # cases.
163. 
164. 
165. class X(models.Model):
166.     y = models.ForeignKey('Y', models.CASCADE)
167. 
168. 
169. class Y(models.Model):
170.     x1 = models.ForeignKey(X, models.CASCADE, related_name='y1')
171. 
172. # Some models with a cycle in the default ordering. This would be bad if we
173. # didn't catch the infinite loop.
174. 
175. 
176. class LoopX(models.Model):
177.     y = models.ForeignKey('LoopY', models.CASCADE)
178. 
179.     class Meta:
180.         ordering = ['y']
181. 
182. 
183. class LoopY(models.Model):
184.     x = models.ForeignKey(LoopX, models.CASCADE)
185. 
186.     class Meta:
187.         ordering = ['x']
188. 
189. 
190. class LoopZ(models.Model):
191.     z = models.ForeignKey('self', models.CASCADE)
192. 
193.     class Meta:
194.         ordering = ['z']
195. 
196. 
197. # A model and custom default manager combination.
198. 
199. 
200. class CustomManager(models.Manager):
201.     def get_queryset(self):
202.         qs = super().get_queryset()
203.         return qs.filter(public=True, tag__name='t1')
204. 
205. 
206. class ManagedModel(models.Model):
207.     data = models.CharField(max_length=10)
208.     tag = models.ForeignKey(Tag, models.CASCADE)
209.     public = models.BooleanField(default=True)
210. 
211.     objects = CustomManager()
212.     normal_manager = models.Manager()
213. 
214.     def __str__(self):
215.         return self.data
216. 
217. # An inter-related setup with multiple paths from Child to Detail.
218. 
219. 
220. class Detail(models.Model):
221.     data = models.CharField(max_length=10)
222. 
223. 
224. class MemberManager(models.Manager):
225.     def get_queryset(self):
226.         return super().get_queryset().select_related("details")
227. 
228. 
229. class Member(models.Model):
230.     name = models.CharField(max_length=10)
231.     details = models.OneToOneField(Detail, models.CASCADE, primary_key=True)
232. 
233.     objects = MemberManager()
234. 
235. 
236. class Child(models.Model):
237.     person = models.OneToOneField(Member, models.CASCADE, primary_key=True)
238.     parent = models.ForeignKey(Member, models.CASCADE, related_name="children")
239. 
240. # Custom primary keys interfered with ordering in the past.
241. 
242. 
243. class CustomPk(models.Model):
244.     name = models.CharField(max_length=10, primary_key=True)
245.     extra = models.CharField(max_length=10)
246. 
247.     class Meta:
248.         ordering = ['name', 'extra']
249. 
250. 
251. class Related(models.Model):
252.     custom = models.ForeignKey(CustomPk, models.CASCADE, null=True)
253. 
254. 
255. class CustomPkTag(models.Model):
256.     id = models.CharField(max_length=20, primary_key=True)
257.     custom_pk = models.ManyToManyField(CustomPk)
258.     tag = models.CharField(max_length=20)
259. 
260. # An inter-related setup with a model subclass that has a nullable
261. # path to another model, and a return path from that model.
262. 
263. 
264. class Celebrity(models.Model):
265.     name = models.CharField("Name", max_length=20)
266.     greatest_fan = models.ForeignKey("Fan", models.SET_NULL, null=True, unique=True)
267. 
268.     def __str__(self):
269.         return self.name
270. 
271. 
272. class TvChef(Celebrity):
273.     pass
274. 
275. 
276. class Fan(models.Model):
277.     fan_of = models.ForeignKey(Celebrity, models.CASCADE)
278. 
279. # Multiple foreign keys
280. 
281. 
282. class LeafA(models.Model):
283.     data = models.CharField(max_length=10)
284. 
285.     def __str__(self):
286.         return self.data
287. 
288. 
289. class LeafB(models.Model):
290.     data = models.CharField(max_length=10)
291. 
292. 
293. class Join(models.Model):
294.     a = models.ForeignKey(LeafA, models.CASCADE)
295.     b = models.ForeignKey(LeafB, models.CASCADE)
296. 
297. 
298. class ReservedName(models.Model):
299.     name = models.CharField(max_length=20)
300.     order = models.IntegerField()
301. 
302.     def __str__(self):
303.         return self.name
304. 
305. # A simpler shared-foreign-key setup that can expose some problems.
306. 
307. 
308. class SharedConnection(models.Model):
309.     data = models.CharField(max_length=10)
310. 
311.     def __str__(self):
312.         return self.data
313. 
314. 
315. class PointerA(models.Model):
316.     connection = models.ForeignKey(SharedConnection, models.CASCADE)
317. 
318. 
319. class PointerB(models.Model):
320.     connection = models.ForeignKey(SharedConnection, models.CASCADE)
321. 
322. # Multi-layer ordering
323. 
324. 
325. class SingleObject(models.Model):
326.     name = models.CharField(max_length=10)
327. 
328.     class Meta:
329.         ordering = ['name']
330. 
331.     def __str__(self):
332.         return self.name
333. 
334. 
335. class RelatedObject(models.Model):
336.     single = models.ForeignKey(SingleObject, models.SET_NULL, null=True)
337.     f = models.IntegerField(null=True)
338. 
339.     class Meta:
340.         ordering = ['single']
341. 
342. 
343. class Plaything(models.Model):
344.     name = models.CharField(max_length=10)
345.     others = models.ForeignKey(RelatedObject, models.SET_NULL, null=True)
346. 
347.     class Meta:
348.         ordering = ['others']
349. 
350.     def __str__(self):
351.         return self.name
352. 
353. 
354. class Article(models.Model):
355.     name = models.CharField(max_length=20)
356.     created = models.DateTimeField()
357. 
358.     def __str__(self):
359.         return self.name
360. 
361. 
362. class Food(models.Model):
363.     name = models.CharField(max_length=20, unique=True)
364. 
365.     def __str__(self):
366.         return self.name
367. 
368. 
369. class Eaten(models.Model):
370.     food = models.ForeignKey(Food, models.SET_NULL, to_field="name", null=True)
371.     meal = models.CharField(max_length=20)
372. 
373.     def __str__(self):
374.         return "%s at %s" % (self.food, self.meal)
375. 
376. 
377. class Node(models.Model):
378.     num = models.IntegerField(unique=True)
379.     parent = models.ForeignKey("self", models.SET_NULL, to_field="num", null=True)
380. 
381.     def __str__(self):
382.         return str(self.num)
383. 
384. # Bug #12252
385. 
386. 
387. class ObjectA(models.Model):
388.     name = models.CharField(max_length=50)
389. 
390.     def __str__(self):
391.         return self.name
392. 
393.     def __iter__(self):
394.         # Ticket #23721
395.         assert False, 'type checking should happen without calling model __iter__'
396. 
397. 
398. class ProxyObjectA(ObjectA):
399.     class Meta:
400.         proxy = True
401. 
402. 
403. class ChildObjectA(ObjectA):
404.     pass
405. 
406. 
407. class ObjectB(models.Model):
408.     name = models.CharField(max_length=50)
409.     objecta = models.ForeignKey(ObjectA, models.CASCADE)
410.     num = models.PositiveSmallIntegerField()
411. 
412.     def __str__(self):
413.         return self.name
414. 
415. 
416. class ProxyObjectB(ObjectB):
417.     class Meta:
418.         proxy = True
419. 
420. 
421. class ObjectC(models.Model):
422.     name = models.CharField(max_length=50)
423.     objecta = models.ForeignKey(ObjectA, models.SET_NULL, null=True)
424.     objectb = models.ForeignKey(ObjectB, models.SET_NULL, null=True)
425.     childobjecta = models.ForeignKey(ChildObjectA, models.SET_NULL, null=True, related_name='ca_pk')
426. 
427.     def __str__(self):
428.         return self.name
429. 
430. 
431. class SimpleCategory(models.Model):
432.     name = models.CharField(max_length=15)
433. 
434.     def __str__(self):
435.         return self.name
436. 
437. 
438. class SpecialCategory(SimpleCategory):
439.     special_name = models.CharField(max_length=15)
440. 
441.     def __str__(self):
442.         return self.name + " " + self.special_name
443. 
444. 
445. class CategoryItem(models.Model):
446.     category = models.ForeignKey(SimpleCategory, models.CASCADE)
447. 
448.     def __str__(self):
449.         return "category item: " + str(self.category)
450. 
451. 
452. class MixedCaseFieldCategoryItem(models.Model):
453.     CaTeGoRy = models.ForeignKey(SimpleCategory, models.CASCADE)
454. 
455. 
456. class MixedCaseDbColumnCategoryItem(models.Model):
457.     category = models.ForeignKey(SimpleCategory, models.CASCADE, db_column='CaTeGoRy_Id')
458. 
459. 
460. class OneToOneCategory(models.Model):
461.     new_name = models.CharField(max_length=15)
462.     category = models.OneToOneField(SimpleCategory, models.CASCADE)
463. 
464.     def __str__(self):
465.         return "one2one " + self.new_name
466. 
467. 
468. class CategoryRelationship(models.Model):
469.     first = models.ForeignKey(SimpleCategory, models.CASCADE, related_name='first_rel')
470.     second = models.ForeignKey(SimpleCategory, models.CASCADE, related_name='second_rel')
471. 
472. 
473. class CommonMixedCaseForeignKeys(models.Model):
474.     category = models.ForeignKey(CategoryItem, models.CASCADE)
475.     mixed_case_field_category = models.ForeignKey(MixedCaseFieldCategoryItem, models.CASCADE)
476.     mixed_case_db_column_category = models.ForeignKey(MixedCaseDbColumnCategoryItem, models.CASCADE)
477. 
478. 
479. class NullableName(models.Model):
480.     name = models.CharField(max_length=20, null=True)
481. 
482.     class Meta:
483.         ordering = ['id']
484. 
485. 
486. class ModelD(models.Model):
487.     name = models.TextField()
488. 
489. 
490. class ModelC(models.Model):
491.     name = models.TextField()
492. 
493. 
494. class ModelB(models.Model):
495.     name = models.TextField()
496.     c = models.ForeignKey(ModelC, models.CASCADE)
497. 
498. 
499. class ModelA(models.Model):
500.     name = models.TextField()


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 19:51:56,890 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user explicitly requested the full source code for 'tests/model_forms/tests.py'. This file is relevant to the original query as it contains the test suite for Django's ModelForms, which the user is having an issue with. It will contain examples of how to test `ModelMultipleChoiceField` and its interaction with various queryset types.", relative_path='tests/model_forms/tests.py', start_line=1, end_line=500), ContextOutput(reasoning="The user explicitly requested the full source code for 'tests/model_forms/models.py'. This file is essential context for 'tests/model_forms/tests.py' as it defines all the Django models used in the tests. The user's bug report involves model relationships, so seeing how test models are structured is highly relevant.", relative_path='tests/model_forms/models.py', start_line=1, end_line=474), ContextOutput(reasoning="The user explicitly requested the full source code for 'tests/queries/test_qs_combinators.py'. This file is directly relevant to the user's bug, which is about the incorrect behavior of `QuerySet.union()`. This test file contains the official tests for `union()`, `intersection()`, and `difference()`, which is central to the issue described.", relative_path='tests/queries/test_qs_combinators.py', start_line=1, end_line=316), ContextOutput(reasoning="The user explicitly requested the full source code for 'tests/queries/models.py'. This file provides the necessary model definitions for the tests in 'tests/queries/test_qs_combinators.py'. To understand the queryset combination tests, the model schemas are required.", relative_path='tests/queries/models.py', start_line=1, end_line=500)]
2025-10-06 19:51:56,892 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/model_forms/tests.py', content="1755.     def test_model_multiple_choice_required_false(self):\n1756.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)\n1757.         self.assertIsInstance(f.clean([]), EmptyQuerySet)\n1758.         self.assertIsInstance(f.clean(()), EmptyQuerySet)\n1759.         with self.assertRaises(ValidationError):\n1760.             f.clean(['0'])", start_line_number=1755, end_line_number=1760), Context(relative_path='tests/model_forms/tests.py', content="644.     def test_default_not_populated_on_optional_checkbox_input(self):\n645.         class PubForm(forms.ModelForm):\n646.             class Meta:\n647.                 model = PublicationDefaults\n648.                 fields = ('active',)\n649. \n650.         # Empty data doesn't use the model default because CheckboxInput\n651.         # doesn't have a value in HTML form submission.\n652.         mf1 = PubForm({})\n653.         self.assertEqual(mf1.errors, {})\n654.         m1 = mf1.save(commit=False)\n655.         self.assertIs(m1.active, False)\n656.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)", start_line_number=644, end_line_number=656), Context(relative_path='tests/model_forms/tests.py', content='1. import datetime\n2. import os\n3. from decimal import Decimal\n4. from unittest import mock, skipUnless\n5. \n6. from django import forms\n7. from django.core.exceptions import (\n8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured, ValidationError,\n9. )\n10. from django.core.files.uploadedfile import SimpleUploadedFile\n11. from django.db import connection, models\n12. from django.db.models.query import EmptyQuerySet\n13. from django.forms.models import (\n14.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,\n15.     modelform_factory,\n16. )\n17. from django.template import Context, Template\n18. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n19. \n20. from .models import (\n21.     Article, ArticleStatus, Author, Author1, Award, BetterWriter, BigInt, Book,\n22.     Category, Character, Colour, ColourfulItem, CustomErrorMessage, CustomFF,\n23.     CustomFieldForExclusionModel, DateTimePost, DerivedBook, DerivedPost,\n24.     Document, ExplicitPK, FilePathModel, FlexibleDatePost, Homepage,\n25.     ImprovedArticle, ImprovedArticleWithParentLink, Inventory,\n26.     NullableUniqueCharFieldModel, Person, Photo, Post, Price, Product,\n27.     Publication, PublicationDefaults, StrictAssignmentAll,\n28.     StrictAssignmentFieldSpecific, Student, StumpJoke, TextFile, Triple,\n29.     Writer, WriterProfile, test_images,\n30. )\n31. \n32. if test_images:\n33.     from .models import ImageFile, OptionalImageFile, NoExtensionImageFile\n34. \n35.     class ImageFileForm(forms.ModelForm):\n36.         class Meta:\n37.             model = ImageFile\n38.             fields = \'__all__\'\n39. \n40.     class OptionalImageFileForm(forms.ModelForm):\n41.         class Meta:\n42.             model = OptionalImageFile\n43.             fields = \'__all__\'\n44. \n45.     class NoExtensionImageFileForm(forms.ModelForm):\n46.         class Meta:\n47.             model = NoExtensionImageFile\n48.             fields = \'__all__\'\n49. \n50. \n51. class ProductForm(forms.ModelForm):\n52.     class Meta:\n53.         model = Product\n54.         fields = \'__all__\'\n55. \n56. \n57. class PriceForm(forms.ModelForm):\n58.     class Meta:\n59.         model = Price\n60.         fields = \'__all__\'\n61. \n62. \n63. class BookForm(forms.ModelForm):\n64.     class Meta:\n65.         model = Book\n66.         fields = \'__all__\'\n67. \n68. \n69. class DerivedBookForm(forms.ModelForm):\n70.     class Meta:\n71.         model = DerivedBook\n72.         fields = \'__all__\'\n73. \n74. \n75. class ExplicitPKForm(forms.ModelForm):\n76.     class Meta:\n77.         model = ExplicitPK\n78.         fields = (\'key\', \'desc\',)\n79. \n80. \n81. class PostForm(forms.ModelForm):\n82.     class Meta:\n83.         model = Post\n84.         fields = \'__all__\'\n85. \n86. \n87. class DerivedPostForm(forms.ModelForm):\n88.     class Meta:\n89.         model = DerivedPost\n90.         fields = \'__all__\'\n91. \n92. \n93. class CustomWriterForm(forms.ModelForm):\n94.     name = forms.CharField(required=False)\n95. \n96.     class Meta:\n97.         model = Writer\n98.         fields = \'__all__\'\n99. \n100. \n101. class BaseCategoryForm(forms.ModelForm):\n102.     class Meta:\n103.         model = Category\n104.         fields = \'__all__\'\n105. \n106. \n107. class ArticleForm(forms.ModelForm):\n108.     class Meta:\n109.         model = Article\n110.         fields = \'__all__\'\n111. \n112. \n113. class RoykoForm(forms.ModelForm):\n114.     class Meta:\n115.         model = Writer\n116.         fields = \'__all__\'\n117. \n118. \n119. class ArticleStatusForm(forms.ModelForm):\n120.     class Meta:\n121.         model = ArticleStatus\n122.         fields = \'__all__\'\n123. \n124. \n125. class InventoryForm(forms.ModelForm):\n126.     class Meta:\n127.         model = Inventory\n128.         fields = \'__all__\'\n129. \n130. \n131. class SelectInventoryForm(forms.Form):\n132.     items = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name=\'barcode\')\n133. \n134. \n135. class CustomFieldForExclusionForm(forms.ModelForm):\n136.     class Meta:\n137.         model = CustomFieldForExclusionModel\n138.         fields = [\'name\', \'markup\']\n139. \n140. \n141. class TextFileForm(forms.ModelForm):\n142.     class Meta:\n143.         model = TextFile\n144.         fields = \'__all__\'\n145. \n146. \n147. class BigIntForm(forms.ModelForm):\n148.     class Meta:\n149.         model = BigInt\n150.         fields = \'__all__\'\n151. \n152. \n153. class ModelFormWithMedia(forms.ModelForm):\n154.     class Media:\n155.         js = (\'/some/form/javascript\',)\n156.         css = {\n157.             \'all\': (\'/some/form/css\',)\n158.         }\n159. \n160.     class Meta:\n161.         model = TextFile\n162.         fields = \'__all__\'\n163. \n164. \n165. class CustomErrorMessageForm(forms.ModelForm):\n166.     name1 = forms.CharField(error_messages={\'invalid\': \'Form custom error message.\'})\n167. \n168.     class Meta:\n169.         fields = \'__all__\'\n170.         model = CustomErrorMessage\n171. \n172. \n173. class ModelFormBaseTest(TestCase):\n174.     def test_base_form(self):\n175.         self.assertEqual(list(BaseCategoryForm.base_fields), [\'name\', \'slug\', \'url\'])\n176. \n177.     def test_no_model_class(self):\n178.         class NoModelModelForm(forms.ModelForm):\n179.             pass\n180.         with self.assertRaisesMessage(ValueError, \'ModelForm has no model class specified.\'):\n181.             NoModelModelForm()\n182. \n183.     def test_empty_fields_to_fields_for_model(self):\n184.         """\n185.         An argument of fields=() to fields_for_model should return an empty dictionary\n186.         """\n187.         field_dict = fields_for_model(Person, fields=())\n188.         self.assertEqual(len(field_dict), 0)\n189. \n190.     def test_empty_fields_on_modelform(self):\n191.         """\n192.         No fields on a ModelForm should actually result in no fields.\n193.         """\n194.         class EmptyPersonForm(forms.ModelForm):\n195.             class Meta:\n196.                 model = Person\n197.                 fields = ()\n198. \n199.         form = EmptyPersonForm()\n200.         self.assertEqual(len(form.fields), 0)\n201. \n202.     def test_empty_fields_to_construct_instance(self):\n203.         """\n204.         No fields should be set on a model instance if construct_instance receives fields=().\n205.         """\n206.         form = modelform_factory(Person, fields="__all__")({\'name\': \'John Doe\'})\n207.         self.assertTrue(form.is_valid())\n208.         instance = construct_instance(form, Person(), fields=())\n209.         self.assertEqual(instance.name, \'\')\n210. \n211.     def test_blank_with_null_foreign_key_field(self):\n212.         """\n213.         #13776 -- ModelForm\'s with models having a FK set to null=False and\n214.         required=False should be valid.\n215.         """\n216.         class FormForTestingIsValid(forms.ModelForm):\n217.             class Meta:\n218.                 model = Student\n219.                 fields = \'__all__\'\n220. \n221.             def __init__(self, *args, **kwargs):\n222.                 super().__init__(*args, **kwargs)\n223.                 self.fields[\'character\'].required = False\n224. \n225.         char = Character.objects.create(username=\'user\', last_action=datetime.datetime.today())\n226.         data = {\'study\': \'Engineering\'}\n227.         data2 = {\'study\': \'Engineering\', \'character\': char.pk}\n228. \n229.         # form is valid because required=False for field \'character\'\n230.         f1 = FormForTestingIsValid(data)\n231.         self.assertTrue(f1.is_valid())\n232. \n233.         f2 = FormForTestingIsValid(data2)\n234.         self.assertTrue(f2.is_valid())\n235.         obj = f2.save()\n236.         self.assertEqual(obj.character, char)\n237. \n238.     def test_blank_false_with_null_true_foreign_key_field(self):\n239.         """\n240.         A ModelForm with a model having ForeignKey(blank=False, null=True)\n241.         and the form field set to required=False should allow the field to be\n242.         unset.\n243.         """\n244.         class AwardForm(forms.ModelForm):\n245.             class Meta:\n246.                 model = Award\n247.                 fields = \'__all__\'\n248. \n249.             def __init__(self, *args, **kwargs):\n250.                 super().__init__(*args, **kwargs)\n251.                 self.fields[\'character\'].required = False\n252. \n253.         character = Character.objects.create(username=\'user\', last_action=datetime.datetime.today())\n254.         award = Award.objects.create(name=\'Best sprinter\', character=character)\n255.         data = {\'name\': \'Best tester\', \'character\': \'\'}  # remove character\n256.         form = AwardForm(data=data, instance=award)\n257.         self.assertTrue(form.is_valid())\n258.         award = form.save()\n259.         self.assertIsNone(award.character)\n260. \n261.     def test_blank_foreign_key_with_radio(self):\n262.         class BookForm(forms.ModelForm):\n263.             class Meta:\n264.                 model = Book\n265.                 fields = [\'author\']\n266.                 widgets = {\'author\': forms.RadioSelect()}\n267. \n268.         writer = Writer.objects.create(name=\'Joe Doe\')\n269.         form = BookForm()\n270.         self.assertEqual(list(form.fields[\'author\'].choices), [\n271.             (\'\', \'---------\'),\n272.             (writer.pk, \'Joe Doe\'),\n273.         ])\n274. \n275.     def test_non_blank_foreign_key_with_radio(self):\n276.         class AwardForm(forms.ModelForm):\n277.             class Meta:\n278.                 model = Award\n279.                 fields = [\'character\']\n280.                 widgets = {\'character\': forms.RadioSelect()}\n281. \n282.         character = Character.objects.create(\n283.             username=\'user\',\n284.             last_action=datetime.datetime.today(),\n285.         )\n286.         form = AwardForm()\n287.         self.assertEqual(\n288.             list(form.fields[\'character\'].choices),\n289.             [(character.pk, \'user\')],\n290.         )\n291. \n292.     def test_save_blank_false_with_required_false(self):\n293.         """\n294.         A ModelForm with a model with a field set to blank=False and the form\n295.         field set to required=False should allow the field to be unset.\n296.         """\n297.         obj = Writer.objects.create(name=\'test\')\n298.         form = CustomWriterForm(data={\'name\': \'\'}, instance=obj)\n299.         self.assertTrue(form.is_valid())\n300.         obj = form.save()\n301.         self.assertEqual(obj.name, \'\')\n302. \n303.     def test_save_blank_null_unique_charfield_saves_null(self):\n304.         form_class = modelform_factory(model=NullableUniqueCharFieldModel, fields=[\'codename\'])\n305.         empty_value = \'\' if connection.features.interprets_empty_strings_as_nulls else None\n306. \n307.         form = form_class(data={\'codename\': \'\'})\n308.         self.assertTrue(form.is_valid())\n309.         form.save()\n310.         self.assertEqual(form.instance.codename, empty_value)\n311. \n312.         # Save a second form to verify there isn\'t a unique constraint violation.\n313.         form = form_class(data={\'codename\': \'\'})\n314.         self.assertTrue(form.is_valid())\n315.         form.save()\n316.         self.assertEqual(form.instance.codename, empty_value)\n317. \n318.     def test_missing_fields_attribute(self):\n319.         message = (\n320.             "Creating a ModelForm without either the \'fields\' attribute "\n321.             "or the \'exclude\' attribute is prohibited; form "\n322.             "MissingFieldsForm needs updating."\n323.         )\n324.         with self.assertRaisesMessage(ImproperlyConfigured, message):\n325.             class MissingFieldsForm(forms.ModelForm):\n326.                 class Meta:\n327.                     model = Category\n328. \n329.     def test_extra_fields(self):\n330.         class ExtraFields(BaseCategoryForm):\n331.             some_extra_field = forms.BooleanField()\n332. \n333.         self.assertEqual(list(ExtraFields.base_fields),\n334.                          [\'name\', \'slug\', \'url\', \'some_extra_field\'])\n335. \n336.     def test_extra_field_model_form(self):\n337.         with self.assertRaisesMessage(FieldError, \'no-field\'):\n338.             class ExtraPersonForm(forms.ModelForm):\n339.                 """ ModelForm with an extra field """\n340.                 age = forms.IntegerField()\n341. \n342.                 class Meta:\n343.                     model = Person\n344.                     fields = (\'name\', \'no-field\')\n345. \n346.     def test_extra_declared_field_model_form(self):\n347.         class ExtraPersonForm(forms.ModelForm):\n348.             """ ModelForm with an extra field """\n349.             age = forms.IntegerField()\n350. \n351.             class Meta:\n352.                 model = Person\n353.                 fields = (\'name\', \'age\')\n354. \n355.     def test_extra_field_modelform_factory(self):\n356.         with self.assertRaisesMessage(FieldError, \'Unknown field(s) (no-field) specified for Person\'):\n357.             modelform_factory(Person, fields=[\'no-field\', \'name\'])\n358. \n359.     def test_replace_field(self):\n360.         class ReplaceField(forms.ModelForm):\n361.             url = forms.BooleanField()\n362. \n363.             class Meta:\n364.                 model = Category\n365.                 fields = \'__all__\'\n366. \n367.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n368. \n369.     def test_replace_field_variant_2(self):\n370.         # Should have the same result as before,\n371.         # but \'fields\' attribute specified differently\n372.         class ReplaceField(forms.ModelForm):\n373.             url = forms.BooleanField()\n374. \n375.             class Meta:\n376.                 model = Category\n377.                 fields = [\'url\']\n378. \n379.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n380. \n381.     def test_replace_field_variant_3(self):\n382.         # Should have the same result as before,\n383.         # but \'fields\' attribute specified differently\n384.         class ReplaceField(forms.ModelForm):\n385.             url = forms.BooleanField()\n386. \n387.             class Meta:\n388.                 model = Category\n389.                 fields = []  # url will still appear, since it is explicit above\n390. \n391.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n392. \n393.     def test_override_field(self):\n394.         class WriterForm(forms.ModelForm):\n395.             book = forms.CharField(required=False)\n396. \n397.             class Meta:\n398.                 model = Writer\n399.                 fields = \'__all__\'\n400. \n401.         wf = WriterForm({\'name\': \'Richard Lockridge\'})\n402.         self.assertTrue(wf.is_valid())\n403. \n404.     def test_limit_nonexistent_field(self):\n405.         expected_msg = \'Unknown field(s) (nonexistent) specified for Category\'\n406.         with self.assertRaisesMessage(FieldError, expected_msg):\n407.             class InvalidCategoryForm(forms.ModelForm):\n408.                 class Meta:\n409.                     model = Category\n410.                     fields = [\'nonexistent\']\n411. \n412.     def test_limit_fields_with_string(self):\n413.         expected_msg = "CategoryForm.Meta.fields cannot be a string. Did you mean to type: (\'url\',)?"\n414.         with self.assertRaisesMessage(TypeError, expected_msg):\n415.             class CategoryForm(forms.ModelForm):\n416.                 class Meta:\n417.                     model = Category\n418.                     fields = (\'url\')  # note the missing comma\n419. \n420.     def test_exclude_fields(self):\n421.         class ExcludeFields(forms.ModelForm):\n422.             class Meta:\n423.                 model = Category\n424.                 exclude = [\'url\']\n425. \n426.         self.assertEqual(list(ExcludeFields.base_fields), [\'name\', \'slug\'])\n427. \n428.     def test_exclude_nonexistent_field(self):\n429.         class ExcludeFields(forms.ModelForm):\n430.             class Meta:\n431.                 model = Category\n432.                 exclude = [\'nonexistent\']\n433. \n434.         self.assertEqual(list(ExcludeFields.base_fields), [\'name\', \'slug\', \'url\'])\n435. \n436.     def test_exclude_fields_with_string(self):\n437.         expected_msg = "CategoryForm.Meta.exclude cannot be a string. Did you mean to type: (\'url\',)?"\n438.         with self.assertRaisesMessage(TypeError, expected_msg):\n439.             class CategoryForm(forms.ModelForm):\n440.                 class Meta:\n441.                     model = Category\n442.                     exclude = (\'url\')  # note the missing comma\n443. \n444.     def test_exclude_and_validation(self):\n445.         # This Price instance generated by this form is not valid because the quantity\n446.         # field is required, but the form is valid because the field is excluded from\n447.         # the form. This is for backwards compatibility.\n448.         class PriceFormWithoutQuantity(forms.ModelForm):\n449.             class Meta:\n450.                 model = Price\n451.                 exclude = (\'quantity\',)\n452. \n453.         form = PriceFormWithoutQuantity({\'price\': \'6.00\'})\n454.         self.assertTrue(form.is_valid())\n455.         price = form.save(commit=False)\n456.         msg = "{\'quantity\': [\'This field cannot be null.\']}"\n457.         with self.assertRaisesMessage(ValidationError, msg):\n458.             price.full_clean()\n459. \n460.         # The form should not validate fields that it doesn\'t contain even if they are\n461.         # specified using \'fields\', not \'exclude\'.\n462.         class PriceFormWithoutQuantity(forms.ModelForm):\n463.             class Meta:\n464.                 model = Price\n465.                 fields = (\'price\',)\n466.         form = PriceFormWithoutQuantity({\'price\': \'6.00\'})\n467.         self.assertTrue(form.is_valid())\n468. \n469.         # The form should still have an instance of a model that is not complete and\n470.         # not saved into a DB yet.\n471.         self.assertEqual(form.instance.price, Decimal(\'6.00\'))\n472.         self.assertIsNone(form.instance.quantity)\n473.         self.assertIsNone(form.instance.pk)\n474. \n475.     def test_confused_form(self):\n476.         class ConfusedForm(forms.ModelForm):\n477.             """ Using \'fields\' *and* \'exclude\'. Not sure why you\'d want to do\n478.             this, but uh, "be liberal in what you accept" and all.\n479.             """\n480.             class Meta:\n481.                 model = Category\n482.                 fields = [\'name\', \'url\']\n483.                 exclude = [\'url\']\n484. \n485.         self.assertEqual(list(ConfusedForm.base_fields),\n486.                          [\'name\'])\n487. \n488.     def test_mixmodel_form(self):\n489.         class MixModelForm(BaseCategoryForm):\n490.             """ Don\'t allow more than one \'model\' definition in the\n491.             inheritance hierarchy.  Technically, it would generate a valid\n492.             form, but the fact that the resulting save method won\'t deal with\n493.             multiple objects is likely to trip up people not familiar with the\n494.             mechanics.\n495.             """\n496.             class Meta:\n497.                 model = Article\n498.                 fields = \'__all__\'\n499.             # MixModelForm is now an Article-related thing, because MixModelForm.Meta\n500.             # overrides BaseCategoryForm.Meta.', start_line_number=1, end_line_number=500), Context(relative_path='tests/model_forms/models.py', content='1. import datetime\n2. import os\n3. import tempfile\n4. import uuid\n5. \n6. from django.core import validators\n7. from django.core.exceptions import ValidationError\n8. from django.core.files.storage import FileSystemStorage\n9. from django.db import models\n10. \n11. temp_storage_dir = tempfile.mkdtemp()\n12. temp_storage = FileSystemStorage(temp_storage_dir)\n13. \n14. \n15. class Person(models.Model):\n16.     name = models.CharField(max_length=100)\n17. \n18. \n19. class Category(models.Model):\n20.     name = models.CharField(max_length=20)\n21.     slug = models.SlugField(max_length=20)\n22.     url = models.CharField(\'The URL\', max_length=40)\n23. \n24.     def __str__(self):\n25.         return self.name\n26. \n27.     def __repr__(self):\n28.         return self.__str__()\n29. \n30. \n31. class WriterManager(models.Manager):\n32.     def get_queryset(self):\n33.         qs = super().get_queryset()\n34.         return qs.filter(archived=False)\n35. \n36. \n37. class Writer(models.Model):\n38.     name = models.CharField(max_length=50, help_text=\'Use both first and last names.\')\n39.     archived = models.BooleanField(default=False, editable=False)\n40. \n41.     objects = WriterManager()\n42. \n43.     class Meta:\n44.         ordering = (\'name\',)\n45. \n46.     def __str__(self):\n47.         return self.name\n48. \n49. \n50. class Article(models.Model):\n51.     ARTICLE_STATUS = (\n52.         (1, \'Draft\'),\n53.         (2, \'Pending\'),\n54.         (3, \'Live\'),\n55.     )\n56.     headline = models.CharField(max_length=50)\n57.     slug = models.SlugField()\n58.     pub_date = models.DateField()\n59.     created = models.DateField(editable=False)\n60.     writer = models.ForeignKey(Writer, models.CASCADE)\n61.     article = models.TextField()\n62.     categories = models.ManyToManyField(Category, blank=True)\n63.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)\n64. \n65.     def save(self, *args, **kwargs):\n66.         if not self.id:\n67.             self.created = datetime.date.today()\n68.         return super().save(*args, **kwargs)\n69. \n70.     def __str__(self):\n71.         return self.headline\n72. \n73. \n74. class ImprovedArticle(models.Model):\n75.     article = models.OneToOneField(Article, models.CASCADE)\n76. \n77. \n78. class ImprovedArticleWithParentLink(models.Model):\n79.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)\n80. \n81. \n82. class BetterWriter(Writer):\n83.     score = models.IntegerField()\n84. \n85. \n86. class Publication(models.Model):\n87.     title = models.CharField(max_length=30)\n88.     date_published = models.DateField()\n89. \n90.     def __str__(self):\n91.         return self.title\n92. \n93. \n94. def default_mode():\n95.     return \'di\'\n96. \n97. \n98. def default_category():\n99.     return 3\n100. \n101. \n102. class PublicationDefaults(models.Model):\n103.     MODE_CHOICES = ((\'di\', \'direct\'), (\'de\', \'delayed\'))\n104.     CATEGORY_CHOICES = ((1, \'Games\'), (2, \'Comics\'), (3, \'Novel\'))\n105.     title = models.CharField(max_length=30)\n106.     date_published = models.DateField(default=datetime.date.today)\n107.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))\n108.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)\n109.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)\n110.     active = models.BooleanField(default=True)\n111.     file = models.FileField(default=\'default.txt\')\n112. \n113. \n114. class Author(models.Model):\n115.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)\n116.     full_name = models.CharField(max_length=255)\n117. \n118. \n119. class Author1(models.Model):\n120.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)\n121.     full_name = models.CharField(max_length=255)\n122. \n123. \n124. class WriterProfile(models.Model):\n125.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)\n126.     age = models.PositiveIntegerField()\n127. \n128.     def __str__(self):\n129.         return "%s is %s" % (self.writer, self.age)\n130. \n131. \n132. class Document(models.Model):\n133.     myfile = models.FileField(upload_to=\'unused\', blank=True)\n134. \n135. \n136. class TextFile(models.Model):\n137.     description = models.CharField(max_length=20)\n138.     file = models.FileField(storage=temp_storage, upload_to=\'tests\', max_length=15)\n139. \n140.     def __str__(self):\n141.         return self.description\n142. \n143. \n144. class CustomFileField(models.FileField):\n145.     def save_form_data(self, instance, data):\n146.         been_here = getattr(self, \'been_saved\', False)\n147.         assert not been_here, "save_form_data called more than once"\n148.         setattr(self, \'been_saved\', True)\n149. \n150. \n151. class CustomFF(models.Model):\n152.     f = CustomFileField(upload_to=\'unused\', blank=True)\n153. \n154. \n155. class FilePathModel(models.Model):\n156.     path = models.FilePathField(path=os.path.dirname(__file__), match=\'models.py\', blank=True)\n157. \n158. \n159. try:\n160.     from PIL import Image  # NOQA: detect if Pillow is installed\n161. \n162.     test_images = True\n163. \n164.     class ImageFile(models.Model):\n165.         def custom_upload_path(self, filename):\n166.             path = self.path or \'tests\'\n167.             return \'%s/%s\' % (path, filename)\n168. \n169.         description = models.CharField(max_length=20)\n170. \n171.         # Deliberately put the image field *after* the width/height fields to\n172.         # trigger the bug in #10404 with width/height not getting assigned.\n173.         width = models.IntegerField(editable=False)\n174.         height = models.IntegerField(editable=False)\n175.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,\n176.                                   width_field=\'width\', height_field=\'height\')\n177.         path = models.CharField(max_length=16, blank=True, default=\'\')\n178. \n179.         def __str__(self):\n180.             return self.description\n181. \n182.     class OptionalImageFile(models.Model):\n183.         def custom_upload_path(self, filename):\n184.             path = self.path or \'tests\'\n185.             return \'%s/%s\' % (path, filename)\n186. \n187.         description = models.CharField(max_length=20)\n188.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,\n189.                                   width_field=\'width\', height_field=\'height\',\n190.                                   blank=True, null=True)\n191.         width = models.IntegerField(editable=False, null=True)\n192.         height = models.IntegerField(editable=False, null=True)\n193.         path = models.CharField(max_length=16, blank=True, default=\'\')\n194. \n195.         def __str__(self):\n196.             return self.description\n197. \n198.     class NoExtensionImageFile(models.Model):\n199.         def upload_to(self, filename):\n200.             return \'tests/no_extension\'\n201. \n202.         description = models.CharField(max_length=20)\n203.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)\n204. \n205.         def __str__(self):\n206.             return self.description\n207. \n208. except ImportError:\n209.     test_images = False\n210. \n211. \n212. class Homepage(models.Model):\n213.     url = models.URLField()\n214. \n215. \n216. class Product(models.Model):\n217.     slug = models.SlugField(unique=True)\n218. \n219.     def __str__(self):\n220.         return self.slug\n221. \n222. \n223. class Price(models.Model):\n224.     price = models.DecimalField(max_digits=10, decimal_places=2)\n225.     quantity = models.PositiveIntegerField()\n226. \n227.     class Meta:\n228.         unique_together = ((\'price\', \'quantity\'),)\n229. \n230.     def __str__(self):\n231.         return "%s for %s" % (self.quantity, self.price)\n232. \n233. \n234. class Triple(models.Model):\n235.     left = models.IntegerField()\n236.     middle = models.IntegerField()\n237.     right = models.IntegerField()\n238. \n239.     class Meta:\n240.         unique_together = ((\'left\', \'middle\'), (\'middle\', \'right\'))\n241. \n242. \n243. class ArticleStatus(models.Model):\n244.     ARTICLE_STATUS_CHAR = (\n245.         (\'d\', \'Draft\'),\n246.         (\'p\', \'Pending\'),\n247.         (\'l\', \'Live\'),\n248.     )\n249.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)\n250. \n251. \n252. class Inventory(models.Model):\n253.     barcode = models.PositiveIntegerField(unique=True)\n254.     parent = models.ForeignKey(\'self\', models.SET_NULL, to_field=\'barcode\', blank=True, null=True)\n255.     name = models.CharField(blank=False, max_length=20)\n256. \n257.     class Meta:\n258.         ordering = (\'name\',)\n259. \n260.     def __str__(self):\n261.         return self.name\n262. \n263.     def __repr__(self):\n264.         return self.__str__()\n265. \n266. \n267. class Book(models.Model):\n268.     title = models.CharField(max_length=40)\n269.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)\n270.     special_id = models.IntegerField(blank=True, null=True, unique=True)\n271. \n272.     class Meta:\n273.         unique_together = (\'title\', \'author\')\n274. \n275. \n276. class BookXtra(models.Model):\n277.     isbn = models.CharField(max_length=16, unique=True)\n278.     suffix1 = models.IntegerField(blank=True, default=0)\n279.     suffix2 = models.IntegerField(blank=True, default=0)\n280. \n281.     class Meta:\n282.         unique_together = ((\'suffix1\', \'suffix2\'))\n283.         abstract = True\n284. \n285. \n286. class DerivedBook(Book, BookXtra):\n287.     pass\n288. \n289. \n290. class ExplicitPK(models.Model):\n291.     key = models.CharField(max_length=20, primary_key=True)\n292.     desc = models.CharField(max_length=20, blank=True, unique=True)\n293. \n294.     class Meta:\n295.         unique_together = (\'key\', \'desc\')\n296. \n297.     def __str__(self):\n298.         return self.key\n299. \n300. \n301. class Post(models.Model):\n302.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n303.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n304.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n305.     posted = models.DateField()\n306. \n307.     def __str__(self):\n308.         return self.title\n309. \n310. \n311. class DateTimePost(models.Model):\n312.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n313.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n314.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n315.     posted = models.DateTimeField(editable=False)\n316. \n317.     def __str__(self):\n318.         return self.title\n319. \n320. \n321. class DerivedPost(Post):\n322.     pass\n323. \n324. \n325. class BigInt(models.Model):\n326.     biggie = models.BigIntegerField()\n327. \n328.     def __str__(self):\n329.         return str(self.biggie)\n330. \n331. \n332. class MarkupField(models.CharField):\n333.     def __init__(self, *args, **kwargs):\n334.         kwargs["max_length"] = 20\n335.         super().__init__(*args, **kwargs)\n336. \n337.     def formfield(self, **kwargs):\n338.         # don\'t allow this field to be used in form (real use-case might be\n339.         # that you know the markup will always be X, but it is among an app\n340.         # that allows the user to say it could be something else)\n341.         # regressed at r10062\n342.         return None\n343. \n344. \n345. class CustomFieldForExclusionModel(models.Model):\n346.     name = models.CharField(max_length=10)\n347.     markup = MarkupField()\n348. \n349. \n350. class FlexibleDatePost(models.Model):\n351.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n352.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n353.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n354.     posted = models.DateField(blank=True, null=True)\n355. \n356. \n357. class Colour(models.Model):\n358.     name = models.CharField(max_length=50)\n359. \n360.     def __iter__(self):\n361.         yield from range(5)\n362. \n363.     def __str__(self):\n364.         return self.name\n365. \n366. \n367. class ColourfulItem(models.Model):\n368.     name = models.CharField(max_length=50)\n369.     colours = models.ManyToManyField(Colour)\n370. \n371. \n372. class CustomErrorMessage(models.Model):\n373.     name1 = models.CharField(\n374.         max_length=50,\n375.         validators=[validators.validate_slug],\n376.         error_messages={\'invalid\': \'Model custom error message.\'},\n377.     )\n378.     name2 = models.CharField(\n379.         max_length=50,\n380.         validators=[validators.validate_slug],\n381.         error_messages={\'invalid\': \'Model custom error message.\'},\n382.     )\n383. \n384.     def clean(self):\n385.         if self.name1 == \'FORBIDDEN_VALUE\':\n386.             raise ValidationError({\'name1\': [ValidationError(\'Model.clean() error messages.\')]})\n387.         elif self.name1 == \'FORBIDDEN_VALUE2\':\n388.             raise ValidationError({\'name1\': \'Model.clean() error messages (simpler syntax).\'})\n389.         elif self.name1 == \'GLOBAL_ERROR\':\n390.             raise ValidationError("Global error message.")\n391. \n392. \n393. def today_callable_dict():\n394.     return {"last_action__gte": datetime.datetime.today()}\n395. \n396. \n397. def today_callable_q():\n398.     return models.Q(last_action__gte=datetime.datetime.today())\n399. \n400. \n401. class Character(models.Model):\n402.     username = models.CharField(max_length=100)\n403.     last_action = models.DateTimeField()\n404. \n405.     def __str__(self):\n406.         return self.username\n407. \n408. \n409. class StumpJoke(models.Model):\n410.     most_recently_fooled = models.ForeignKey(\n411.         Character,\n412.         models.CASCADE,\n413.         limit_choices_to=today_callable_dict,\n414.         related_name="+",\n415.     )\n416.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")\n417. \n418. \n419. # Model for #13776\n420. class Student(models.Model):\n421.     character = models.ForeignKey(Character, models.CASCADE)\n422.     study = models.CharField(max_length=30)\n423. \n424. \n425. # Model for #639\n426. class Photo(models.Model):\n427.     title = models.CharField(max_length=30)\n428.     image = models.FileField(storage=temp_storage, upload_to=\'tests\')\n429. \n430.     # Support code for the tests; this keeps track of how many times save()\n431.     # gets called on each instance.\n432.     def __init__(self, *args, **kwargs):\n433.         super().__init__(*args, **kwargs)\n434.         self._savecount = 0\n435. \n436.     def save(self, force_insert=False, force_update=False):\n437.         super().save(force_insert, force_update)\n438.         self._savecount += 1\n439. \n440. \n441. class UUIDPK(models.Model):\n442.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n443.     name = models.CharField(max_length=30)\n444. \n445. \n446. # Models for #24706\n447. class StrictAssignmentFieldSpecific(models.Model):\n448.     title = models.CharField(max_length=30)\n449.     _should_error = False\n450. \n451.     def __setattr__(self, key, value):\n452.         if self._should_error is True:\n453.             raise ValidationError(message={key: "Cannot set attribute"}, code=\'invalid\')\n454.         super().__setattr__(key, value)\n455. \n456. \n457. class StrictAssignmentAll(models.Model):\n458.     title = models.CharField(max_length=30)\n459.     _should_error = False\n460. \n461.     def __setattr__(self, key, value):\n462.         if self._should_error is True:\n463.             raise ValidationError(message="Cannot set attribute", code=\'invalid\')\n464.         super().__setattr__(key, value)\n465. \n466. \n467. # A model with ForeignKey(blank=False, null=True)\n468. class Award(models.Model):\n469.     name = models.CharField(max_length=30)\n470.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)\n471. \n472. \n473. class NullableUniqueCharFieldModel(models.Model):\n474.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)', start_line_number=1, end_line_number=474), Context(relative_path='tests/queries/test_qs_combinators.py', content="1. import operator\n2. \n3. from django.db import DatabaseError, NotSupportedError, connection\n4. from django.db.models import Exists, F, IntegerField, OuterRef, Value\n5. from django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature\n6. \n7. from .models import Number, ReservedName\n8. \n9. \n10. @skipUnlessDBFeature('supports_select_union')\n11. class QuerySetSetOperationTests(TestCase):\n12.     @classmethod\n13.     def setUpTestData(cls):\n14.         Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))\n15. \n16.     def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):\n17.         self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter('num'), ordered)\n18. \n19.     def test_simple_union(self):\n20.         qs1 = Number.objects.filter(num__lte=1)\n21.         qs2 = Number.objects.filter(num__gte=8)\n22.         qs3 = Number.objects.filter(num=5)\n23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)\n24. \n25.     @skipUnlessDBFeature('supports_select_intersection')\n26.     def test_simple_intersection(self):\n27.         qs1 = Number.objects.filter(num__lte=5)\n28.         qs2 = Number.objects.filter(num__gte=5)\n29.         qs3 = Number.objects.filter(num__gte=4, num__lte=6)\n30.         self.assertNumbersEqual(qs1.intersection(qs2, qs3), [5], ordered=False)\n31. \n32.     @skipUnlessDBFeature('supports_select_intersection')\n33.     def test_intersection_with_values(self):\n34.         ReservedName.objects.create(name='a', order=2)\n35.         qs1 = ReservedName.objects.all()\n36.         reserved_name = qs1.intersection(qs1).values('name', 'order', 'id').get()\n37.         self.assertEqual(reserved_name['name'], 'a')\n38.         self.assertEqual(reserved_name['order'], 2)\n39.         reserved_name = qs1.intersection(qs1).values_list('name', 'order', 'id').get()\n40.         self.assertEqual(reserved_name[:2], ('a', 2))\n41. \n42.     @skipUnlessDBFeature('supports_select_difference')\n43.     def test_simple_difference(self):\n44.         qs1 = Number.objects.filter(num__lte=5)\n45.         qs2 = Number.objects.filter(num__lte=4)\n46.         self.assertNumbersEqual(qs1.difference(qs2), [5], ordered=False)\n47. \n48.     def test_union_distinct(self):\n49.         qs1 = Number.objects.all()\n50.         qs2 = Number.objects.all()\n51.         self.assertEqual(len(list(qs1.union(qs2, all=True))), 20)\n52.         self.assertEqual(len(list(qs1.union(qs2))), 10)\n53. \n54.     @skipUnlessDBFeature('supports_select_intersection')\n55.     def test_intersection_with_empty_qs(self):\n56.         qs1 = Number.objects.all()\n57.         qs2 = Number.objects.none()\n58.         qs3 = Number.objects.filter(pk__in=[])\n59.         self.assertEqual(len(qs1.intersection(qs2)), 0)\n60.         self.assertEqual(len(qs1.intersection(qs3)), 0)\n61.         self.assertEqual(len(qs2.intersection(qs1)), 0)\n62.         self.assertEqual(len(qs3.intersection(qs1)), 0)\n63.         self.assertEqual(len(qs2.intersection(qs2)), 0)\n64.         self.assertEqual(len(qs3.intersection(qs3)), 0)\n65. \n66.     @skipUnlessDBFeature('supports_select_difference')\n67.     def test_difference_with_empty_qs(self):\n68.         qs1 = Number.objects.all()\n69.         qs2 = Number.objects.none()\n70.         qs3 = Number.objects.filter(pk__in=[])\n71.         self.assertEqual(len(qs1.difference(qs2)), 10)\n72.         self.assertEqual(len(qs1.difference(qs3)), 10)\n73.         self.assertEqual(len(qs2.difference(qs1)), 0)\n74.         self.assertEqual(len(qs3.difference(qs1)), 0)\n75.         self.assertEqual(len(qs2.difference(qs2)), 0)\n76.         self.assertEqual(len(qs3.difference(qs3)), 0)\n77. \n78.     @skipUnlessDBFeature('supports_select_difference')\n79.     def test_difference_with_values(self):\n80.         ReservedName.objects.create(name='a', order=2)\n81.         qs1 = ReservedName.objects.all()\n82.         qs2 = ReservedName.objects.none()\n83.         reserved_name = qs1.difference(qs2).values('name', 'order', 'id').get()\n84.         self.assertEqual(reserved_name['name'], 'a')\n85.         self.assertEqual(reserved_name['order'], 2)\n86.         reserved_name = qs1.difference(qs2).values_list('name', 'order', 'id').get()\n87.         self.assertEqual(reserved_name[:2], ('a', 2))\n88. \n89.     def test_union_with_empty_qs(self):\n90.         qs1 = Number.objects.all()\n91.         qs2 = Number.objects.none()\n92.         qs3 = Number.objects.filter(pk__in=[])\n93.         self.assertEqual(len(qs1.union(qs2)), 10)\n94.         self.assertEqual(len(qs2.union(qs1)), 10)\n95.         self.assertEqual(len(qs1.union(qs3)), 10)\n96.         self.assertEqual(len(qs3.union(qs1)), 10)\n97.         self.assertEqual(len(qs2.union(qs1, qs1, qs1)), 10)\n98.         self.assertEqual(len(qs2.union(qs1, qs1, all=True)), 20)\n99.         self.assertEqual(len(qs2.union(qs2)), 0)\n100.         self.assertEqual(len(qs3.union(qs3)), 0)\n101. \n102.     def test_limits(self):\n103.         qs1 = Number.objects.all()\n104.         qs2 = Number.objects.all()\n105.         self.assertEqual(len(list(qs1.union(qs2)[:2])), 2)\n106. \n107.     def test_ordering(self):\n108.         qs1 = Number.objects.filter(num__lte=1)\n109.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n110.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num'), [3, 2, 1, 0])\n111. \n112.     def test_ordering_by_alias(self):\n113.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('num'))\n114.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('num'))\n115.         self.assertQuerysetEqual(\n116.             qs1.union(qs2).order_by('-alias'),\n117.             [3, 2, 1, 0],\n118.             operator.itemgetter('alias'),\n119.         )\n120. \n121.     def test_ordering_by_f_expression(self):\n122.         qs1 = Number.objects.filter(num__lte=1)\n123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F('num').desc()), [3, 2, 1, 0])\n125. \n126.     def test_ordering_by_f_expression_and_alias(self):\n127.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('other_num'))\n128.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('other_num'))\n129.         self.assertQuerysetEqual(\n130.             qs1.union(qs2).order_by(F('alias').desc()),\n131.             [10, 9, 8, 7],\n132.             operator.itemgetter('alias'),\n133.         )\n134.         Number.objects.create(num=-1)\n135.         self.assertQuerysetEqual(\n136.             qs1.union(qs2).order_by(F('alias').desc(nulls_last=True)),\n137.             [10, 9, 8, 7, None],\n138.             operator.itemgetter('alias'),\n139.         )\n140. \n141.     def test_union_with_values(self):\n142.         ReservedName.objects.create(name='a', order=2)\n143.         qs1 = ReservedName.objects.all()\n144.         reserved_name = qs1.union(qs1).values('name', 'order', 'id').get()\n145.         self.assertEqual(reserved_name['name'], 'a')\n146.         self.assertEqual(reserved_name['order'], 2)\n147.         reserved_name = qs1.union(qs1).values_list('name', 'order', 'id').get()\n148.         self.assertEqual(reserved_name[:2], ('a', 2))\n149.         # List of columns can be changed.\n150.         reserved_name = qs1.union(qs1).values_list('order').get()\n151.         self.assertEqual(reserved_name, (2,))\n152. \n153.     def test_union_with_two_annotated_values_list(self):\n154.         qs1 = Number.objects.filter(num=1).annotate(\n155.             count=Value(0, IntegerField()),\n156.         ).values_list('num', 'count')\n157.         qs2 = Number.objects.filter(num=2).values('pk').annotate(\n158.             count=F('num'),\n159.         ).annotate(\n160.             num=Value(1, IntegerField()),\n161.         ).values_list('num', 'count')\n162.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])\n163. \n164.     def test_union_with_extra_and_values_list(self):\n165.         qs1 = Number.objects.filter(num=1).extra(\n166.             select={'count': 0},\n167.         ).values_list('num', 'count')\n168.         qs2 = Number.objects.filter(num=2).extra(select={'count': 1})\n169.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])\n170. \n171.     def test_union_with_values_list_on_annotated_and_unannotated(self):\n172.         ReservedName.objects.create(name='rn1', order=1)\n173.         qs1 = Number.objects.annotate(\n174.             has_reserved_name=Exists(ReservedName.objects.filter(order=OuterRef('num')))\n175.         ).filter(has_reserved_name=True)\n176.         qs2 = Number.objects.filter(num=9)\n177.         self.assertCountEqual(qs1.union(qs2).values_list('num', flat=True), [1, 9])\n178. \n179.     def test_union_with_values_list_and_order(self):\n180.         ReservedName.objects.bulk_create([\n181.             ReservedName(name='rn1', order=7),\n182.             ReservedName(name='rn2', order=5),\n183.             ReservedName(name='rn0', order=6),\n184.             ReservedName(name='rn9', order=-1),\n185.         ])\n186.         qs1 = ReservedName.objects.filter(order__gte=6)\n187.         qs2 = ReservedName.objects.filter(order__lte=5)\n188.         union_qs = qs1.union(qs2)\n189.         for qs, expected_result in (\n190.             # Order by a single column.\n191.             (union_qs.order_by('-pk').values_list('order', flat=True), [-1, 6, 5, 7]),\n192.             (union_qs.order_by('pk').values_list('order', flat=True), [7, 5, 6, -1]),\n193.             (union_qs.values_list('order', flat=True).order_by('-pk'), [-1, 6, 5, 7]),\n194.             (union_qs.values_list('order', flat=True).order_by('pk'), [7, 5, 6, -1]),\n195.             # Order by multiple columns.\n196.             (union_qs.order_by('-name', 'pk').values_list('order', flat=True), [-1, 5, 7, 6]),\n197.             (union_qs.values_list('order', flat=True).order_by('-name', 'pk'), [-1, 5, 7, 6]),\n198.         ):\n199.             with self.subTest(qs=qs):\n200.                 self.assertEqual(list(qs), expected_result)\n201. \n202.     def test_count_union(self):\n203.         qs1 = Number.objects.filter(num__lte=1).values('num')\n204.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values('num')\n205.         self.assertEqual(qs1.union(qs2).count(), 4)\n206. \n207.     def test_count_union_empty_result(self):\n208.         qs = Number.objects.filter(pk__in=[])\n209.         self.assertEqual(qs.union(qs).count(), 0)\n210. \n211.     @skipUnlessDBFeature('supports_select_difference')\n212.     def test_count_difference(self):\n213.         qs1 = Number.objects.filter(num__lt=10)\n214.         qs2 = Number.objects.filter(num__lt=9)\n215.         self.assertEqual(qs1.difference(qs2).count(), 1)\n216. \n217.     @skipUnlessDBFeature('supports_select_intersection')\n218.     def test_count_intersection(self):\n219.         qs1 = Number.objects.filter(num__gte=5)\n220.         qs2 = Number.objects.filter(num__lte=5)\n221.         self.assertEqual(qs1.intersection(qs2).count(), 1)\n222. \n223.     @skipUnlessDBFeature('supports_slicing_ordering_in_compound')\n224.     def test_ordering_subqueries(self):\n225.         qs1 = Number.objects.order_by('num')[:2]\n226.         qs2 = Number.objects.order_by('-num')[:2]\n227.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num')[:4], [9, 8, 1, 0])\n228. \n229.     @skipIfDBFeature('supports_slicing_ordering_in_compound')\n230.     def test_unsupported_ordering_slicing_raises_db_error(self):\n231.         qs1 = Number.objects.all()\n232.         qs2 = Number.objects.all()\n233.         msg = 'LIMIT/OFFSET not allowed in subqueries of compound statements'\n234.         with self.assertRaisesMessage(DatabaseError, msg):\n235.             list(qs1.union(qs2[:10]))\n236.         msg = 'ORDER BY not allowed in subqueries of compound statements'\n237.         with self.assertRaisesMessage(DatabaseError, msg):\n238.             list(qs1.order_by('id').union(qs2))\n239. \n240.     @skipIfDBFeature('supports_select_intersection')\n241.     def test_unsupported_intersection_raises_db_error(self):\n242.         qs1 = Number.objects.all()\n243.         qs2 = Number.objects.all()\n244.         msg = 'intersection is not supported on this database backend'\n245.         with self.assertRaisesMessage(NotSupportedError, msg):\n246.             list(qs1.intersection(qs2))\n247. \n248.     def test_combining_multiple_models(self):\n249.         ReservedName.objects.create(name='99 little bugs', order=99)\n250.         qs1 = Number.objects.filter(num=1).values_list('num', flat=True)\n251.         qs2 = ReservedName.objects.values_list('order')\n252.         self.assertEqual(list(qs1.union(qs2).order_by('num')), [1, 99])\n253. \n254.     def test_order_raises_on_non_selected_column(self):\n255.         qs1 = Number.objects.filter().annotate(\n256.             annotation=Value(1, IntegerField()),\n257.         ).values('annotation', num2=F('num'))\n258.         qs2 = Number.objects.filter().values('id', 'num')\n259.         # Should not raise\n260.         list(qs1.union(qs2).order_by('annotation'))\n261.         list(qs1.union(qs2).order_by('num2'))\n262.         msg = 'ORDER BY term does not match any column in the result set'\n263.         # 'id' is not part of the select\n264.         with self.assertRaisesMessage(DatabaseError, msg):\n265.             list(qs1.union(qs2).order_by('id'))\n266.         # 'num' got realiased to num2\n267.         with self.assertRaisesMessage(DatabaseError, msg):\n268.             list(qs1.union(qs2).order_by('num'))\n269.         with self.assertRaisesMessage(DatabaseError, msg):\n270.             list(qs1.union(qs2).order_by(F('num')))\n271.         with self.assertRaisesMessage(DatabaseError, msg):\n272.             list(qs1.union(qs2).order_by(F('num').desc()))\n273.         # switched order, now 'exists' again:\n274.         list(qs2.union(qs1).order_by('num'))\n275. \n276.     @skipUnlessDBFeature('supports_select_difference', 'supports_select_intersection')\n277.     def test_qs_with_subcompound_qs(self):\n278.         qs1 = Number.objects.all()\n279.         qs2 = Number.objects.intersection(Number.objects.filter(num__gt=1))\n280.         self.assertEqual(qs1.difference(qs2).count(), 2)\n281. \n282.     def test_order_by_same_type(self):\n283.         qs = Number.objects.all()\n284.         union = qs.union(qs)\n285.         numbers = list(range(10))\n286.         self.assertNumbersEqual(union.order_by('num'), numbers)\n287.         self.assertNumbersEqual(union.order_by('other_num'), reversed(numbers))\n288. \n289.     def test_unsupported_operations_on_combined_qs(self):\n290.         qs = Number.objects.all()\n291.         msg = 'Calling QuerySet.%s() after %s() is not supported.'\n292.         combinators = ['union']\n293.         if connection.features.supports_select_difference:\n294.             combinators.append('difference')\n295.         if connection.features.supports_select_intersection:\n296.             combinators.append('intersection')\n297.         for combinator in combinators:\n298.             for operation in (\n299.                 'annotate',\n300.                 'defer',\n301.                 'delete',\n302.                 'distinct',\n303.                 'exclude',\n304.                 'extra',\n305.                 'filter',\n306.                 'only',\n307.                 'prefetch_related',\n308.                 'select_related',\n309.                 'update',\n310.             ):\n311.                 with self.subTest(combinator=combinator, operation=operation):\n312.                     with self.assertRaisesMessage(\n313.                         NotSupportedError,\n314.                         msg % (operation, combinator),\n315.                     ):\n316.                         getattr(getattr(qs, combinator)(qs), operation)()", start_line_number=1, end_line_number=316), Context(relative_path='tests/queries/models.py', content='1. """\n2. Various complex queries that have been problematic in the past.\n3. """\n4. from django.db import models\n5. from django.db.models.functions import Now\n6. \n7. \n8. class DumbCategory(models.Model):\n9.     pass\n10. \n11. \n12. class ProxyCategory(DumbCategory):\n13.     class Meta:\n14.         proxy = True\n15. \n16. \n17. class NamedCategory(DumbCategory):\n18.     name = models.CharField(max_length=10)\n19. \n20.     def __str__(self):\n21.         return self.name\n22. \n23. \n24. class Tag(models.Model):\n25.     name = models.CharField(max_length=10)\n26.     parent = models.ForeignKey(\n27.         \'self\',\n28.         models.SET_NULL,\n29.         blank=True, null=True,\n30.         related_name=\'children\',\n31.     )\n32.     category = models.ForeignKey(NamedCategory, models.SET_NULL, null=True, default=None)\n33. \n34.     class Meta:\n35.         ordering = [\'name\']\n36. \n37.     def __str__(self):\n38.         return self.name\n39. \n40. \n41. class Note(models.Model):\n42.     note = models.CharField(max_length=100)\n43.     misc = models.CharField(max_length=10)\n44.     tag = models.ForeignKey(Tag, models.SET_NULL, blank=True, null=True)\n45. \n46.     class Meta:\n47.         ordering = [\'note\']\n48. \n49.     def __str__(self):\n50.         return self.note\n51. \n52. \n53. class Annotation(models.Model):\n54.     name = models.CharField(max_length=10)\n55.     tag = models.ForeignKey(Tag, models.CASCADE)\n56.     notes = models.ManyToManyField(Note)\n57. \n58.     def __str__(self):\n59.         return self.name\n60. \n61. \n62. class DateTimePK(models.Model):\n63.     date = models.DateTimeField(primary_key=True, auto_now_add=True)\n64. \n65. \n66. class ExtraInfo(models.Model):\n67.     info = models.CharField(max_length=100)\n68.     note = models.ForeignKey(Note, models.CASCADE, null=True)\n69.     value = models.IntegerField(null=True)\n70.     date = models.ForeignKey(DateTimePK, models.SET_NULL, null=True)\n71.     filterable = models.BooleanField(default=True)\n72. \n73.     class Meta:\n74.         ordering = [\'info\']\n75. \n76.     def __str__(self):\n77.         return self.info\n78. \n79. \n80. class Author(models.Model):\n81.     name = models.CharField(max_length=10)\n82.     num = models.IntegerField(unique=True)\n83.     extra = models.ForeignKey(ExtraInfo, models.CASCADE)\n84. \n85.     class Meta:\n86.         ordering = [\'name\']\n87. \n88.     def __str__(self):\n89.         return self.name\n90. \n91. \n92. class Item(models.Model):\n93.     name = models.CharField(max_length=10)\n94.     created = models.DateTimeField()\n95.     modified = models.DateTimeField(blank=True, null=True)\n96.     tags = models.ManyToManyField(Tag, blank=True)\n97.     creator = models.ForeignKey(Author, models.CASCADE)\n98.     note = models.ForeignKey(Note, models.CASCADE)\n99. \n100.     class Meta:\n101.         ordering = [\'-note\', \'name\']\n102. \n103.     def __str__(self):\n104.         return self.name\n105. \n106. \n107. class Report(models.Model):\n108.     name = models.CharField(max_length=10)\n109.     creator = models.ForeignKey(Author, models.SET_NULL, to_field=\'num\', null=True)\n110. \n111.     def __str__(self):\n112.         return self.name\n113. \n114. \n115. class ReportComment(models.Model):\n116.     report = models.ForeignKey(Report, models.CASCADE)\n117. \n118. \n119. class Ranking(models.Model):\n120.     rank = models.IntegerField()\n121.     author = models.ForeignKey(Author, models.CASCADE)\n122. \n123.     class Meta:\n124.         # A complex ordering specification. Should stress the system a bit.\n125.         ordering = (\'author__extra__note\', \'author__name\', \'rank\')\n126. \n127.     def __str__(self):\n128.         return \'%d: %s\' % (self.rank, self.author.name)\n129. \n130. \n131. class Cover(models.Model):\n132.     title = models.CharField(max_length=50)\n133.     item = models.ForeignKey(Item, models.CASCADE)\n134. \n135.     class Meta:\n136.         ordering = [\'item\']\n137. \n138.     def __str__(self):\n139.         return self.title\n140. \n141. \n142. class Number(models.Model):\n143.     num = models.IntegerField()\n144.     other_num = models.IntegerField(null=True)\n145.     another_num = models.IntegerField(null=True)\n146. \n147.     def __str__(self):\n148.         return str(self.num)\n149. \n150. # Symmetrical m2m field with a normal field using the reverse accessor name\n151. # ("valid").\n152. \n153. \n154. class Valid(models.Model):\n155.     valid = models.CharField(max_length=10)\n156.     parent = models.ManyToManyField(\'self\')\n157. \n158.     class Meta:\n159.         ordering = [\'valid\']\n160. \n161. # Some funky cross-linked models for testing a couple of infinite recursion\n162. # cases.\n163. \n164. \n165. class X(models.Model):\n166.     y = models.ForeignKey(\'Y\', models.CASCADE)\n167. \n168. \n169. class Y(models.Model):\n170.     x1 = models.ForeignKey(X, models.CASCADE, related_name=\'y1\')\n171. \n172. # Some models with a cycle in the default ordering. This would be bad if we\n173. # didn\'t catch the infinite loop.\n174. \n175. \n176. class LoopX(models.Model):\n177.     y = models.ForeignKey(\'LoopY\', models.CASCADE)\n178. \n179.     class Meta:\n180.         ordering = [\'y\']\n181. \n182. \n183. class LoopY(models.Model):\n184.     x = models.ForeignKey(LoopX, models.CASCADE)\n185. \n186.     class Meta:\n187.         ordering = [\'x\']\n188. \n189. \n190. class LoopZ(models.Model):\n191.     z = models.ForeignKey(\'self\', models.CASCADE)\n192. \n193.     class Meta:\n194.         ordering = [\'z\']\n195. \n196. \n197. # A model and custom default manager combination.\n198. \n199. \n200. class CustomManager(models.Manager):\n201.     def get_queryset(self):\n202.         qs = super().get_queryset()\n203.         return qs.filter(public=True, tag__name=\'t1\')\n204. \n205. \n206. class ManagedModel(models.Model):\n207.     data = models.CharField(max_length=10)\n208.     tag = models.ForeignKey(Tag, models.CASCADE)\n209.     public = models.BooleanField(default=True)\n210. \n211.     objects = CustomManager()\n212.     normal_manager = models.Manager()\n213. \n214.     def __str__(self):\n215.         return self.data\n216. \n217. # An inter-related setup with multiple paths from Child to Detail.\n218. \n219. \n220. class Detail(models.Model):\n221.     data = models.CharField(max_length=10)\n222. \n223. \n224. class MemberManager(models.Manager):\n225.     def get_queryset(self):\n226.         return super().get_queryset().select_related("details")\n227. \n228. \n229. class Member(models.Model):\n230.     name = models.CharField(max_length=10)\n231.     details = models.OneToOneField(Detail, models.CASCADE, primary_key=True)\n232. \n233.     objects = MemberManager()\n234. \n235. \n236. class Child(models.Model):\n237.     person = models.OneToOneField(Member, models.CASCADE, primary_key=True)\n238.     parent = models.ForeignKey(Member, models.CASCADE, related_name="children")\n239. \n240. # Custom primary keys interfered with ordering in the past.\n241. \n242. \n243. class CustomPk(models.Model):\n244.     name = models.CharField(max_length=10, primary_key=True)\n245.     extra = models.CharField(max_length=10)\n246. \n247.     class Meta:\n248.         ordering = [\'name\', \'extra\']\n249. \n250. \n251. class Related(models.Model):\n252.     custom = models.ForeignKey(CustomPk, models.CASCADE, null=True)\n253. \n254. \n255. class CustomPkTag(models.Model):\n256.     id = models.CharField(max_length=20, primary_key=True)\n257.     custom_pk = models.ManyToManyField(CustomPk)\n258.     tag = models.CharField(max_length=20)\n259. \n260. # An inter-related setup with a model subclass that has a nullable\n261. # path to another model, and a return path from that model.\n262. \n263. \n264. class Celebrity(models.Model):\n265.     name = models.CharField("Name", max_length=20)\n266.     greatest_fan = models.ForeignKey("Fan", models.SET_NULL, null=True, unique=True)\n267. \n268.     def __str__(self):\n269.         return self.name\n270. \n271. \n272. class TvChef(Celebrity):\n273.     pass\n274. \n275. \n276. class Fan(models.Model):\n277.     fan_of = models.ForeignKey(Celebrity, models.CASCADE)\n278. \n279. # Multiple foreign keys\n280. \n281. \n282. class LeafA(models.Model):\n283.     data = models.CharField(max_length=10)\n284. \n285.     def __str__(self):\n286.         return self.data\n287. \n288. \n289. class LeafB(models.Model):\n290.     data = models.CharField(max_length=10)\n291. \n292. \n293. class Join(models.Model):\n294.     a = models.ForeignKey(LeafA, models.CASCADE)\n295.     b = models.ForeignKey(LeafB, models.CASCADE)\n296. \n297. \n298. class ReservedName(models.Model):\n299.     name = models.CharField(max_length=20)\n300.     order = models.IntegerField()\n301. \n302.     def __str__(self):\n303.         return self.name\n304. \n305. # A simpler shared-foreign-key setup that can expose some problems.\n306. \n307. \n308. class SharedConnection(models.Model):\n309.     data = models.CharField(max_length=10)\n310. \n311.     def __str__(self):\n312.         return self.data\n313. \n314. \n315. class PointerA(models.Model):\n316.     connection = models.ForeignKey(SharedConnection, models.CASCADE)\n317. \n318. \n319. class PointerB(models.Model):\n320.     connection = models.ForeignKey(SharedConnection, models.CASCADE)\n321. \n322. # Multi-layer ordering\n323. \n324. \n325. class SingleObject(models.Model):\n326.     name = models.CharField(max_length=10)\n327. \n328.     class Meta:\n329.         ordering = [\'name\']\n330. \n331.     def __str__(self):\n332.         return self.name\n333. \n334. \n335. class RelatedObject(models.Model):\n336.     single = models.ForeignKey(SingleObject, models.SET_NULL, null=True)\n337.     f = models.IntegerField(null=True)\n338. \n339.     class Meta:\n340.         ordering = [\'single\']\n341. \n342. \n343. class Plaything(models.Model):\n344.     name = models.CharField(max_length=10)\n345.     others = models.ForeignKey(RelatedObject, models.SET_NULL, null=True)\n346. \n347.     class Meta:\n348.         ordering = [\'others\']\n349. \n350.     def __str__(self):\n351.         return self.name\n352. \n353. \n354. class Article(models.Model):\n355.     name = models.CharField(max_length=20)\n356.     created = models.DateTimeField()\n357. \n358.     def __str__(self):\n359.         return self.name\n360. \n361. \n362. class Food(models.Model):\n363.     name = models.CharField(max_length=20, unique=True)\n364. \n365.     def __str__(self):\n366.         return self.name\n367. \n368. \n369. class Eaten(models.Model):\n370.     food = models.ForeignKey(Food, models.SET_NULL, to_field="name", null=True)\n371.     meal = models.CharField(max_length=20)\n372. \n373.     def __str__(self):\n374.         return "%s at %s" % (self.food, self.meal)\n375. \n376. \n377. class Node(models.Model):\n378.     num = models.IntegerField(unique=True)\n379.     parent = models.ForeignKey("self", models.SET_NULL, to_field="num", null=True)\n380. \n381.     def __str__(self):\n382.         return str(self.num)\n383. \n384. # Bug #12252\n385. \n386. \n387. class ObjectA(models.Model):\n388.     name = models.CharField(max_length=50)\n389. \n390.     def __str__(self):\n391.         return self.name\n392. \n393.     def __iter__(self):\n394.         # Ticket #23721\n395.         assert False, \'type checking should happen without calling model __iter__\'\n396. \n397. \n398. class ProxyObjectA(ObjectA):\n399.     class Meta:\n400.         proxy = True\n401. \n402. \n403. class ChildObjectA(ObjectA):\n404.     pass\n405. \n406. \n407. class ObjectB(models.Model):\n408.     name = models.CharField(max_length=50)\n409.     objecta = models.ForeignKey(ObjectA, models.CASCADE)\n410.     num = models.PositiveSmallIntegerField()\n411. \n412.     def __str__(self):\n413.         return self.name\n414. \n415. \n416. class ProxyObjectB(ObjectB):\n417.     class Meta:\n418.         proxy = True\n419. \n420. \n421. class ObjectC(models.Model):\n422.     name = models.CharField(max_length=50)\n423.     objecta = models.ForeignKey(ObjectA, models.SET_NULL, null=True)\n424.     objectb = models.ForeignKey(ObjectB, models.SET_NULL, null=True)\n425.     childobjecta = models.ForeignKey(ChildObjectA, models.SET_NULL, null=True, related_name=\'ca_pk\')\n426. \n427.     def __str__(self):\n428.         return self.name\n429. \n430. \n431. class SimpleCategory(models.Model):\n432.     name = models.CharField(max_length=15)\n433. \n434.     def __str__(self):\n435.         return self.name\n436. \n437. \n438. class SpecialCategory(SimpleCategory):\n439.     special_name = models.CharField(max_length=15)\n440. \n441.     def __str__(self):\n442.         return self.name + " " + self.special_name\n443. \n444. \n445. class CategoryItem(models.Model):\n446.     category = models.ForeignKey(SimpleCategory, models.CASCADE)\n447. \n448.     def __str__(self):\n449.         return "category item: " + str(self.category)\n450. \n451. \n452. class MixedCaseFieldCategoryItem(models.Model):\n453.     CaTeGoRy = models.ForeignKey(SimpleCategory, models.CASCADE)\n454. \n455. \n456. class MixedCaseDbColumnCategoryItem(models.Model):\n457.     category = models.ForeignKey(SimpleCategory, models.CASCADE, db_column=\'CaTeGoRy_Id\')\n458. \n459. \n460. class OneToOneCategory(models.Model):\n461.     new_name = models.CharField(max_length=15)\n462.     category = models.OneToOneField(SimpleCategory, models.CASCADE)\n463. \n464.     def __str__(self):\n465.         return "one2one " + self.new_name\n466. \n467. \n468. class CategoryRelationship(models.Model):\n469.     first = models.ForeignKey(SimpleCategory, models.CASCADE, related_name=\'first_rel\')\n470.     second = models.ForeignKey(SimpleCategory, models.CASCADE, related_name=\'second_rel\')\n471. \n472. \n473. class CommonMixedCaseForeignKeys(models.Model):\n474.     category = models.ForeignKey(CategoryItem, models.CASCADE)\n475.     mixed_case_field_category = models.ForeignKey(MixedCaseFieldCategoryItem, models.CASCADE)\n476.     mixed_case_db_column_category = models.ForeignKey(MixedCaseDbColumnCategoryItem, models.CASCADE)\n477. \n478. \n479. class NullableName(models.Model):\n480.     name = models.CharField(max_length=20, null=True)\n481. \n482.     class Meta:\n483.         ordering = [\'id\']\n484. \n485. \n486. class ModelD(models.Model):\n487.     name = models.TextField()\n488. \n489. \n490. class ModelC(models.Model):\n491.     name = models.TextField()\n492. \n493. \n494. class ModelB(models.Model):\n495.     name = models.TextField()\n496.     c = models.ForeignKey(ModelC, models.CASCADE)\n497. \n498. \n499. class ModelA(models.Model):\n500.     name = models.TextField()', start_line_number=1, end_line_number=500)]
2025-10-06 19:51:56,892 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 19:51:56,893 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   └── static
|   |   |       └── fontawesome
|   |   └── djangodocs-epub
|   |       └── static
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   └── gis
|       └── mapwidget.test.js
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   └── admin
    |   |       └── admin_views
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   └── registration
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   └── registration
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   └── robots.txt
    |   |   └── registration
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   └── javascript_ignored.js
    |   |   └── templates
    |   |       └── subdir
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   ├── templates
    |   |   └── shortcuts
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── cached
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   ├── loop
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   ├── jinja2
    |   |   └── template_backends
    |   ├── template_strings
    |   |   └── template_backends
    |   ├── templates
    |   |   └── template_backends
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   ├── templates
    |   |   └── template_loader
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   ├── other_templates
    |   |   └── priority
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   ├── fs2
    |   |   └── fs3
    |   ├── relative_templates
    |   |   └── dir1
    |   |       └── dir2
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── first
    |   |   ├── priority
    |   |   ├── second
    |   |   └── template_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   └── views
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_system_checks.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── specific_system_checks.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
    |   └── utils.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
    |   ├── __init__.py
    |   ├── invalid_urls.txt
    |   ├── tests.py
    |   └── valid_urls.txt
    ├── version
    |   ├── __init__.py
    |   └── tests.py
    ├── view_tests
    |   ├── __init__.py
    |   ├── app0
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── en
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app3
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app4
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app5
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── default_urls.py
    |   ├── generic_urls.py
    |   ├── locale
    |   |   ├── de
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_GB
    |   |   |   └── LC_MESSAGES
    |   |   ├── es
    |   |   |   └── LC_MESSAGES
    |   |   ├── fr
    |   |   |   └── LC_MESSAGES
    |   |   ├── nl
    |   |   |   └── LC_MESSAGES
    |   |   ├── pt
    |   |   |   └── LC_MESSAGES
    |   |   └── ru
    |   |       └── LC_MESSAGES
    |   ├── media
    |   |   ├── %2F.txt
    |   |   ├── file.txt
    |   |   ├── long-line.txt
    |   |   └── subdir
    |   ├── models.py
    |   ├── regression_21530_urls.py
    |   ├── templates
    |   |   └── debug
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── debugtags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_csrf.py
    |   |   ├── test_debug.py
    |   |   ├── test_defaults.py
    |   |   ├── test_i18n.py
    |   |   ├── test_json.py
    |   |   ├── test_specials.py
    |   |   └── test_static.py
    |   ├── urls.py
    |   └── views.py
    └── wsgi
        ├── __init__.py
        ├── tests.py
        ├── urls.py
        └── wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
QuerySet.none() on combined queries returns all results.

Issue description: 
Description
	
I came across this issue on Stack Overflow. I'm not 100% sure it's a bug, but it does seem strange. With this code (excuse the bizarre example filtering):
class Publication(models.Model):
	pass
class Article(models.Model):
	publications = models.ManyToManyField(to=Publication, blank=True, null=True)
class ArticleForm(forms.ModelForm):
	publications = forms.ModelMultipleChoiceField(
		Publication.objects.filter(id__lt=2) | Publication.objects.filter(id__gt=5),
		required=False,
	)
	class Meta:
		model = Article
		fields = ["publications"]
class ArticleAdmin(admin.ModelAdmin):
	form = ArticleForm
This works well. However, changing the ModelMultipleChoiceField queryset to use union() breaks things.
publications = forms.ModelMultipleChoiceField(
	Publication.objects.filter(id__lt=2).union(
		Publication.objects.filter(id__gt=5)
	),
	required=False,
)
The form correctly shows only the matching objects. However, if you submit this form while empty (i.e. you didn't select any publications), ALL objects matching the queryset will be added. Using the OR query, NO objects are added, as I'd expect.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/model_forms/tests.py
Line number range: 1755 - 1760
Content:
1755.     def test_model_multiple_choice_required_false(self):
1756.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)
1757.         self.assertIsInstance(f.clean([]), EmptyQuerySet)
1758.         self.assertIsInstance(f.clean(()), EmptyQuerySet)
1759.         with self.assertRaises(ValidationError):
1760.             f.clean(['0'])


File: tests/model_forms/tests.py
Line number range: 644 - 656
Content:
644.     def test_default_not_populated_on_optional_checkbox_input(self):
645.         class PubForm(forms.ModelForm):
646.             class Meta:
647.                 model = PublicationDefaults
648.                 fields = ('active',)
649. 
650.         # Empty data doesn't use the model default because CheckboxInput
651.         # doesn't have a value in HTML form submission.
652.         mf1 = PubForm({})
653.         self.assertEqual(mf1.errors, {})
654.         m1 = mf1.save(commit=False)
655.         self.assertIs(m1.active, False)
656.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)


File: tests/model_forms/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import os
3. from decimal import Decimal
4. from unittest import mock, skipUnless
5. 
6. from django import forms
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured, ValidationError,
9. )
10. from django.core.files.uploadedfile import SimpleUploadedFile
11. from django.db import connection, models
12. from django.db.models.query import EmptyQuerySet
13. from django.forms.models import (
14.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,
15.     modelform_factory,
16. )
17. from django.template import Context, Template
18. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
19. 
20. from .models import (
21.     Article, ArticleStatus, Author, Author1, Award, BetterWriter, BigInt, Book,
22.     Category, Character, Colour, ColourfulItem, CustomErrorMessage, CustomFF,
23.     CustomFieldForExclusionModel, DateTimePost, DerivedBook, DerivedPost,
24.     Document, ExplicitPK, FilePathModel, FlexibleDatePost, Homepage,
25.     ImprovedArticle, ImprovedArticleWithParentLink, Inventory,
26.     NullableUniqueCharFieldModel, Person, Photo, Post, Price, Product,
27.     Publication, PublicationDefaults, StrictAssignmentAll,
28.     StrictAssignmentFieldSpecific, Student, StumpJoke, TextFile, Triple,
29.     Writer, WriterProfile, test_images,
30. )
31. 
32. if test_images:
33.     from .models import ImageFile, OptionalImageFile, NoExtensionImageFile
34. 
35.     class ImageFileForm(forms.ModelForm):
36.         class Meta:
37.             model = ImageFile
38.             fields = '__all__'
39. 
40.     class OptionalImageFileForm(forms.ModelForm):
41.         class Meta:
42.             model = OptionalImageFile
43.             fields = '__all__'
44. 
45.     class NoExtensionImageFileForm(forms.ModelForm):
46.         class Meta:
47.             model = NoExtensionImageFile
48.             fields = '__all__'
49. 
50. 
51. class ProductForm(forms.ModelForm):
52.     class Meta:
53.         model = Product
54.         fields = '__all__'
55. 
56. 
57. class PriceForm(forms.ModelForm):
58.     class Meta:
59.         model = Price
60.         fields = '__all__'
61. 
62. 
63. class BookForm(forms.ModelForm):
64.     class Meta:
65.         model = Book
66.         fields = '__all__'
67. 
68. 
69. class DerivedBookForm(forms.ModelForm):
70.     class Meta:
71.         model = DerivedBook
72.         fields = '__all__'
73. 
74. 
75. class ExplicitPKForm(forms.ModelForm):
76.     class Meta:
77.         model = ExplicitPK
78.         fields = ('key', 'desc',)
79. 
80. 
81. class PostForm(forms.ModelForm):
82.     class Meta:
83.         model = Post
84.         fields = '__all__'
85. 
86. 
87. class DerivedPostForm(forms.ModelForm):
88.     class Meta:
89.         model = DerivedPost
90.         fields = '__all__'
91. 
92. 
93. class CustomWriterForm(forms.ModelForm):
94.     name = forms.CharField(required=False)
95. 
96.     class Meta:
97.         model = Writer
98.         fields = '__all__'
99. 
100. 
101. class BaseCategoryForm(forms.ModelForm):
102.     class Meta:
103.         model = Category
104.         fields = '__all__'
105. 
106. 
107. class ArticleForm(forms.ModelForm):
108.     class Meta:
109.         model = Article
110.         fields = '__all__'
111. 
112. 
113. class RoykoForm(forms.ModelForm):
114.     class Meta:
115.         model = Writer
116.         fields = '__all__'
117. 
118. 
119. class ArticleStatusForm(forms.ModelForm):
120.     class Meta:
121.         model = ArticleStatus
122.         fields = '__all__'
123. 
124. 
125. class InventoryForm(forms.ModelForm):
126.     class Meta:
127.         model = Inventory
128.         fields = '__all__'
129. 
130. 
131. class SelectInventoryForm(forms.Form):
132.     items = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name='barcode')
133. 
134. 
135. class CustomFieldForExclusionForm(forms.ModelForm):
136.     class Meta:
137.         model = CustomFieldForExclusionModel
138.         fields = ['name', 'markup']
139. 
140. 
141. class TextFileForm(forms.ModelForm):
142.     class Meta:
143.         model = TextFile
144.         fields = '__all__'
145. 
146. 
147. class BigIntForm(forms.ModelForm):
148.     class Meta:
149.         model = BigInt
150.         fields = '__all__'
151. 
152. 
153. class ModelFormWithMedia(forms.ModelForm):
154.     class Media:
155.         js = ('/some/form/javascript',)
156.         css = {
157.             'all': ('/some/form/css',)
158.         }
159. 
160.     class Meta:
161.         model = TextFile
162.         fields = '__all__'
163. 
164. 
165. class CustomErrorMessageForm(forms.ModelForm):
166.     name1 = forms.CharField(error_messages={'invalid': 'Form custom error message.'})
167. 
168.     class Meta:
169.         fields = '__all__'
170.         model = CustomErrorMessage
171. 
172. 
173. class ModelFormBaseTest(TestCase):
174.     def test_base_form(self):
175.         self.assertEqual(list(BaseCategoryForm.base_fields), ['name', 'slug', 'url'])
176. 
177.     def test_no_model_class(self):
178.         class NoModelModelForm(forms.ModelForm):
179.             pass
180.         with self.assertRaisesMessage(ValueError, 'ModelForm has no model class specified.'):
181.             NoModelModelForm()
182. 
183.     def test_empty_fields_to_fields_for_model(self):
184.         """
185.         An argument of fields=() to fields_for_model should return an empty dictionary
186.         """
187.         field_dict = fields_for_model(Person, fields=())
188.         self.assertEqual(len(field_dict), 0)
189. 
190.     def test_empty_fields_on_modelform(self):
191.         """
192.         No fields on a ModelForm should actually result in no fields.
193.         """
194.         class EmptyPersonForm(forms.ModelForm):
195.             class Meta:
196.                 model = Person
197.                 fields = ()
198. 
199.         form = EmptyPersonForm()
200.         self.assertEqual(len(form.fields), 0)
201. 
202.     def test_empty_fields_to_construct_instance(self):
203.         """
204.         No fields should be set on a model instance if construct_instance receives fields=().
205.         """
206.         form = modelform_factory(Person, fields="__all__")({'name': 'John Doe'})
207.         self.assertTrue(form.is_valid())
208.         instance = construct_instance(form, Person(), fields=())
209.         self.assertEqual(instance.name, '')
210. 
211.     def test_blank_with_null_foreign_key_field(self):
212.         """
213.         #13776 -- ModelForm's with models having a FK set to null=False and
214.         required=False should be valid.
215.         """
216.         class FormForTestingIsValid(forms.ModelForm):
217.             class Meta:
218.                 model = Student
219.                 fields = '__all__'
220. 
221.             def __init__(self, *args, **kwargs):
222.                 super().__init__(*args, **kwargs)
223.                 self.fields['character'].required = False
224. 
225.         char = Character.objects.create(username='user', last_action=datetime.datetime.today())
226.         data = {'study': 'Engineering'}
227.         data2 = {'study': 'Engineering', 'character': char.pk}
228. 
229.         # form is valid because required=False for field 'character'
230.         f1 = FormForTestingIsValid(data)
231.         self.assertTrue(f1.is_valid())
232. 
233.         f2 = FormForTestingIsValid(data2)
234.         self.assertTrue(f2.is_valid())
235.         obj = f2.save()
236.         self.assertEqual(obj.character, char)
237. 
238.     def test_blank_false_with_null_true_foreign_key_field(self):
239.         """
240.         A ModelForm with a model having ForeignKey(blank=False, null=True)
241.         and the form field set to required=False should allow the field to be
242.         unset.
243.         """
244.         class AwardForm(forms.ModelForm):
245.             class Meta:
246.                 model = Award
247.                 fields = '__all__'
248. 
249.             def __init__(self, *args, **kwargs):
250.                 super().__init__(*args, **kwargs)
251.                 self.fields['character'].required = False
252. 
253.         character = Character.objects.create(username='user', last_action=datetime.datetime.today())
254.         award = Award.objects.create(name='Best sprinter', character=character)
255.         data = {'name': 'Best tester', 'character': ''}  # remove character
256.         form = AwardForm(data=data, instance=award)
257.         self.assertTrue(form.is_valid())
258.         award = form.save()
259.         self.assertIsNone(award.character)
260. 
261.     def test_blank_foreign_key_with_radio(self):
262.         class BookForm(forms.ModelForm):
263.             class Meta:
264.                 model = Book
265.                 fields = ['author']
266.                 widgets = {'author': forms.RadioSelect()}
267. 
268.         writer = Writer.objects.create(name='Joe Doe')
269.         form = BookForm()
270.         self.assertEqual(list(form.fields['author'].choices), [
271.             ('', '---------'),
272.             (writer.pk, 'Joe Doe'),
273.         ])
274. 
275.     def test_non_blank_foreign_key_with_radio(self):
276.         class AwardForm(forms.ModelForm):
277.             class Meta:
278.                 model = Award
279.                 fields = ['character']
280.                 widgets = {'character': forms.RadioSelect()}
281. 
282.         character = Character.objects.create(
283.             username='user',
284.             last_action=datetime.datetime.today(),
285.         )
286.         form = AwardForm()
287.         self.assertEqual(
288.             list(form.fields['character'].choices),
289.             [(character.pk, 'user')],
290.         )
291. 
292.     def test_save_blank_false_with_required_false(self):
293.         """
294.         A ModelForm with a model with a field set to blank=False and the form
295.         field set to required=False should allow the field to be unset.
296.         """
297.         obj = Writer.objects.create(name='test')
298.         form = CustomWriterForm(data={'name': ''}, instance=obj)
299.         self.assertTrue(form.is_valid())
300.         obj = form.save()
301.         self.assertEqual(obj.name, '')
302. 
303.     def test_save_blank_null_unique_charfield_saves_null(self):
304.         form_class = modelform_factory(model=NullableUniqueCharFieldModel, fields=['codename'])
305.         empty_value = '' if connection.features.interprets_empty_strings_as_nulls else None
306. 
307.         form = form_class(data={'codename': ''})
308.         self.assertTrue(form.is_valid())
309.         form.save()
310.         self.assertEqual(form.instance.codename, empty_value)
311. 
312.         # Save a second form to verify there isn't a unique constraint violation.
313.         form = form_class(data={'codename': ''})
314.         self.assertTrue(form.is_valid())
315.         form.save()
316.         self.assertEqual(form.instance.codename, empty_value)
317. 
318.     def test_missing_fields_attribute(self):
319.         message = (
320.             "Creating a ModelForm without either the 'fields' attribute "
321.             "or the 'exclude' attribute is prohibited; form "
322.             "MissingFieldsForm needs updating."
323.         )
324.         with self.assertRaisesMessage(ImproperlyConfigured, message):
325.             class MissingFieldsForm(forms.ModelForm):
326.                 class Meta:
327.                     model = Category
328. 
329.     def test_extra_fields(self):
330.         class ExtraFields(BaseCategoryForm):
331.             some_extra_field = forms.BooleanField()
332. 
333.         self.assertEqual(list(ExtraFields.base_fields),
334.                          ['name', 'slug', 'url', 'some_extra_field'])
335. 
336.     def test_extra_field_model_form(self):
337.         with self.assertRaisesMessage(FieldError, 'no-field'):
338.             class ExtraPersonForm(forms.ModelForm):
339.                 """ ModelForm with an extra field """
340.                 age = forms.IntegerField()
341. 
342.                 class Meta:
343.                     model = Person
344.                     fields = ('name', 'no-field')
345. 
346.     def test_extra_declared_field_model_form(self):
347.         class ExtraPersonForm(forms.ModelForm):
348.             """ ModelForm with an extra field """
349.             age = forms.IntegerField()
350. 
351.             class Meta:
352.                 model = Person
353.                 fields = ('name', 'age')
354. 
355.     def test_extra_field_modelform_factory(self):
356.         with self.assertRaisesMessage(FieldError, 'Unknown field(s) (no-field) specified for Person'):
357.             modelform_factory(Person, fields=['no-field', 'name'])
358. 
359.     def test_replace_field(self):
360.         class ReplaceField(forms.ModelForm):
361.             url = forms.BooleanField()
362. 
363.             class Meta:
364.                 model = Category
365.                 fields = '__all__'
366. 
367.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
368. 
369.     def test_replace_field_variant_2(self):
370.         # Should have the same result as before,
371.         # but 'fields' attribute specified differently
372.         class ReplaceField(forms.ModelForm):
373.             url = forms.BooleanField()
374. 
375.             class Meta:
376.                 model = Category
377.                 fields = ['url']
378. 
379.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
380. 
381.     def test_replace_field_variant_3(self):
382.         # Should have the same result as before,
383.         # but 'fields' attribute specified differently
384.         class ReplaceField(forms.ModelForm):
385.             url = forms.BooleanField()
386. 
387.             class Meta:
388.                 model = Category
389.                 fields = []  # url will still appear, since it is explicit above
390. 
391.         self.assertIsInstance(ReplaceField.base_fields['url'], forms.fields.BooleanField)
392. 
393.     def test_override_field(self):
394.         class WriterForm(forms.ModelForm):
395.             book = forms.CharField(required=False)
396. 
397.             class Meta:
398.                 model = Writer
399.                 fields = '__all__'
400. 
401.         wf = WriterForm({'name': 'Richard Lockridge'})
402.         self.assertTrue(wf.is_valid())
403. 
404.     def test_limit_nonexistent_field(self):
405.         expected_msg = 'Unknown field(s) (nonexistent) specified for Category'
406.         with self.assertRaisesMessage(FieldError, expected_msg):
407.             class InvalidCategoryForm(forms.ModelForm):
408.                 class Meta:
409.                     model = Category
410.                     fields = ['nonexistent']
411. 
412.     def test_limit_fields_with_string(self):
413.         expected_msg = "CategoryForm.Meta.fields cannot be a string. Did you mean to type: ('url',)?"
414.         with self.assertRaisesMessage(TypeError, expected_msg):
415.             class CategoryForm(forms.ModelForm):
416.                 class Meta:
417.                     model = Category
418.                     fields = ('url')  # note the missing comma
419. 
420.     def test_exclude_fields(self):
421.         class ExcludeFields(forms.ModelForm):
422.             class Meta:
423.                 model = Category
424.                 exclude = ['url']
425. 
426.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug'])
427. 
428.     def test_exclude_nonexistent_field(self):
429.         class ExcludeFields(forms.ModelForm):
430.             class Meta:
431.                 model = Category
432.                 exclude = ['nonexistent']
433. 
434.         self.assertEqual(list(ExcludeFields.base_fields), ['name', 'slug', 'url'])
435. 
436.     def test_exclude_fields_with_string(self):
437.         expected_msg = "CategoryForm.Meta.exclude cannot be a string. Did you mean to type: ('url',)?"
438.         with self.assertRaisesMessage(TypeError, expected_msg):
439.             class CategoryForm(forms.ModelForm):
440.                 class Meta:
441.                     model = Category
442.                     exclude = ('url')  # note the missing comma
443. 
444.     def test_exclude_and_validation(self):
445.         # This Price instance generated by this form is not valid because the quantity
446.         # field is required, but the form is valid because the field is excluded from
447.         # the form. This is for backwards compatibility.
448.         class PriceFormWithoutQuantity(forms.ModelForm):
449.             class Meta:
450.                 model = Price
451.                 exclude = ('quantity',)
452. 
453.         form = PriceFormWithoutQuantity({'price': '6.00'})
454.         self.assertTrue(form.is_valid())
455.         price = form.save(commit=False)
456.         msg = "{'quantity': ['This field cannot be null.']}"
457.         with self.assertRaisesMessage(ValidationError, msg):
458.             price.full_clean()
459. 
460.         # The form should not validate fields that it doesn't contain even if they are
461.         # specified using 'fields', not 'exclude'.
462.         class PriceFormWithoutQuantity(forms.ModelForm):
463.             class Meta:
464.                 model = Price
465.                 fields = ('price',)
466.         form = PriceFormWithoutQuantity({'price': '6.00'})
467.         self.assertTrue(form.is_valid())
468. 
469.         # The form should still have an instance of a model that is not complete and
470.         # not saved into a DB yet.
471.         self.assertEqual(form.instance.price, Decimal('6.00'))
472.         self.assertIsNone(form.instance.quantity)
473.         self.assertIsNone(form.instance.pk)
474. 
475.     def test_confused_form(self):
476.         class ConfusedForm(forms.ModelForm):
477.             """ Using 'fields' *and* 'exclude'. Not sure why you'd want to do
478.             this, but uh, "be liberal in what you accept" and all.
479.             """
480.             class Meta:
481.                 model = Category
482.                 fields = ['name', 'url']
483.                 exclude = ['url']
484. 
485.         self.assertEqual(list(ConfusedForm.base_fields),
486.                          ['name'])
487. 
488.     def test_mixmodel_form(self):
489.         class MixModelForm(BaseCategoryForm):
490.             """ Don't allow more than one 'model' definition in the
491.             inheritance hierarchy.  Technically, it would generate a valid
492.             form, but the fact that the resulting save method won't deal with
493.             multiple objects is likely to trip up people not familiar with the
494.             mechanics.
495.             """
496.             class Meta:
497.                 model = Article
498.                 fields = '__all__'
499.             # MixModelForm is now an Article-related thing, because MixModelForm.Meta
500.             # overrides BaseCategoryForm.Meta.


File: tests/model_forms/models.py
Line number range: 1 - 474
Content:
1. import datetime
2. import os
3. import tempfile
4. import uuid
5. 
6. from django.core import validators
7. from django.core.exceptions import ValidationError
8. from django.core.files.storage import FileSystemStorage
9. from django.db import models
10. 
11. temp_storage_dir = tempfile.mkdtemp()
12. temp_storage = FileSystemStorage(temp_storage_dir)
13. 
14. 
15. class Person(models.Model):
16.     name = models.CharField(max_length=100)
17. 
18. 
19. class Category(models.Model):
20.     name = models.CharField(max_length=20)
21.     slug = models.SlugField(max_length=20)
22.     url = models.CharField('The URL', max_length=40)
23. 
24.     def __str__(self):
25.         return self.name
26. 
27.     def __repr__(self):
28.         return self.__str__()
29. 
30. 
31. class WriterManager(models.Manager):
32.     def get_queryset(self):
33.         qs = super().get_queryset()
34.         return qs.filter(archived=False)
35. 
36. 
37. class Writer(models.Model):
38.     name = models.CharField(max_length=50, help_text='Use both first and last names.')
39.     archived = models.BooleanField(default=False, editable=False)
40. 
41.     objects = WriterManager()
42. 
43.     class Meta:
44.         ordering = ('name',)
45. 
46.     def __str__(self):
47.         return self.name
48. 
49. 
50. class Article(models.Model):
51.     ARTICLE_STATUS = (
52.         (1, 'Draft'),
53.         (2, 'Pending'),
54.         (3, 'Live'),
55.     )
56.     headline = models.CharField(max_length=50)
57.     slug = models.SlugField()
58.     pub_date = models.DateField()
59.     created = models.DateField(editable=False)
60.     writer = models.ForeignKey(Writer, models.CASCADE)
61.     article = models.TextField()
62.     categories = models.ManyToManyField(Category, blank=True)
63.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)
64. 
65.     def save(self, *args, **kwargs):
66.         if not self.id:
67.             self.created = datetime.date.today()
68.         return super().save(*args, **kwargs)
69. 
70.     def __str__(self):
71.         return self.headline
72. 
73. 
74. class ImprovedArticle(models.Model):
75.     article = models.OneToOneField(Article, models.CASCADE)
76. 
77. 
78. class ImprovedArticleWithParentLink(models.Model):
79.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)
80. 
81. 
82. class BetterWriter(Writer):
83.     score = models.IntegerField()
84. 
85. 
86. class Publication(models.Model):
87.     title = models.CharField(max_length=30)
88.     date_published = models.DateField()
89. 
90.     def __str__(self):
91.         return self.title
92. 
93. 
94. def default_mode():
95.     return 'di'
96. 
97. 
98. def default_category():
99.     return 3
100. 
101. 
102. class PublicationDefaults(models.Model):
103.     MODE_CHOICES = (('di', 'direct'), ('de', 'delayed'))
104.     CATEGORY_CHOICES = ((1, 'Games'), (2, 'Comics'), (3, 'Novel'))
105.     title = models.CharField(max_length=30)
106.     date_published = models.DateField(default=datetime.date.today)
107.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))
108.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)
109.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)
110.     active = models.BooleanField(default=True)
111.     file = models.FileField(default='default.txt')
112. 
113. 
114. class Author(models.Model):
115.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)
116.     full_name = models.CharField(max_length=255)
117. 
118. 
119. class Author1(models.Model):
120.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)
121.     full_name = models.CharField(max_length=255)
122. 
123. 
124. class WriterProfile(models.Model):
125.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)
126.     age = models.PositiveIntegerField()
127. 
128.     def __str__(self):
129.         return "%s is %s" % (self.writer, self.age)
130. 
131. 
132. class Document(models.Model):
133.     myfile = models.FileField(upload_to='unused', blank=True)
134. 
135. 
136. class TextFile(models.Model):
137.     description = models.CharField(max_length=20)
138.     file = models.FileField(storage=temp_storage, upload_to='tests', max_length=15)
139. 
140.     def __str__(self):
141.         return self.description
142. 
143. 
144. class CustomFileField(models.FileField):
145.     def save_form_data(self, instance, data):
146.         been_here = getattr(self, 'been_saved', False)
147.         assert not been_here, "save_form_data called more than once"
148.         setattr(self, 'been_saved', True)
149. 
150. 
151. class CustomFF(models.Model):
152.     f = CustomFileField(upload_to='unused', blank=True)
153. 
154. 
155. class FilePathModel(models.Model):
156.     path = models.FilePathField(path=os.path.dirname(__file__), match='models.py', blank=True)
157. 
158. 
159. try:
160.     from PIL import Image  # NOQA: detect if Pillow is installed
161. 
162.     test_images = True
163. 
164.     class ImageFile(models.Model):
165.         def custom_upload_path(self, filename):
166.             path = self.path or 'tests'
167.             return '%s/%s' % (path, filename)
168. 
169.         description = models.CharField(max_length=20)
170. 
171.         # Deliberately put the image field *after* the width/height fields to
172.         # trigger the bug in #10404 with width/height not getting assigned.
173.         width = models.IntegerField(editable=False)
174.         height = models.IntegerField(editable=False)
175.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
176.                                   width_field='width', height_field='height')
177.         path = models.CharField(max_length=16, blank=True, default='')
178. 
179.         def __str__(self):
180.             return self.description
181. 
182.     class OptionalImageFile(models.Model):
183.         def custom_upload_path(self, filename):
184.             path = self.path or 'tests'
185.             return '%s/%s' % (path, filename)
186. 
187.         description = models.CharField(max_length=20)
188.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,
189.                                   width_field='width', height_field='height',
190.                                   blank=True, null=True)
191.         width = models.IntegerField(editable=False, null=True)
192.         height = models.IntegerField(editable=False, null=True)
193.         path = models.CharField(max_length=16, blank=True, default='')
194. 
195.         def __str__(self):
196.             return self.description
197. 
198.     class NoExtensionImageFile(models.Model):
199.         def upload_to(self, filename):
200.             return 'tests/no_extension'
201. 
202.         description = models.CharField(max_length=20)
203.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)
204. 
205.         def __str__(self):
206.             return self.description
207. 
208. except ImportError:
209.     test_images = False
210. 
211. 
212. class Homepage(models.Model):
213.     url = models.URLField()
214. 
215. 
216. class Product(models.Model):
217.     slug = models.SlugField(unique=True)
218. 
219.     def __str__(self):
220.         return self.slug
221. 
222. 
223. class Price(models.Model):
224.     price = models.DecimalField(max_digits=10, decimal_places=2)
225.     quantity = models.PositiveIntegerField()
226. 
227.     class Meta:
228.         unique_together = (('price', 'quantity'),)
229. 
230.     def __str__(self):
231.         return "%s for %s" % (self.quantity, self.price)
232. 
233. 
234. class Triple(models.Model):
235.     left = models.IntegerField()
236.     middle = models.IntegerField()
237.     right = models.IntegerField()
238. 
239.     class Meta:
240.         unique_together = (('left', 'middle'), ('middle', 'right'))
241. 
242. 
243. class ArticleStatus(models.Model):
244.     ARTICLE_STATUS_CHAR = (
245.         ('d', 'Draft'),
246.         ('p', 'Pending'),
247.         ('l', 'Live'),
248.     )
249.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)
250. 
251. 
252. class Inventory(models.Model):
253.     barcode = models.PositiveIntegerField(unique=True)
254.     parent = models.ForeignKey('self', models.SET_NULL, to_field='barcode', blank=True, null=True)
255.     name = models.CharField(blank=False, max_length=20)
256. 
257.     class Meta:
258.         ordering = ('name',)
259. 
260.     def __str__(self):
261.         return self.name
262. 
263.     def __repr__(self):
264.         return self.__str__()
265. 
266. 
267. class Book(models.Model):
268.     title = models.CharField(max_length=40)
269.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)
270.     special_id = models.IntegerField(blank=True, null=True, unique=True)
271. 
272.     class Meta:
273.         unique_together = ('title', 'author')
274. 
275. 
276. class BookXtra(models.Model):
277.     isbn = models.CharField(max_length=16, unique=True)
278.     suffix1 = models.IntegerField(blank=True, default=0)
279.     suffix2 = models.IntegerField(blank=True, default=0)
280. 
281.     class Meta:
282.         unique_together = (('suffix1', 'suffix2'))
283.         abstract = True
284. 
285. 
286. class DerivedBook(Book, BookXtra):
287.     pass
288. 
289. 
290. class ExplicitPK(models.Model):
291.     key = models.CharField(max_length=20, primary_key=True)
292.     desc = models.CharField(max_length=20, blank=True, unique=True)
293. 
294.     class Meta:
295.         unique_together = ('key', 'desc')
296. 
297.     def __str__(self):
298.         return self.key
299. 
300. 
301. class Post(models.Model):
302.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
303.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
304.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
305.     posted = models.DateField()
306. 
307.     def __str__(self):
308.         return self.title
309. 
310. 
311. class DateTimePost(models.Model):
312.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
313.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
314.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
315.     posted = models.DateTimeField(editable=False)
316. 
317.     def __str__(self):
318.         return self.title
319. 
320. 
321. class DerivedPost(Post):
322.     pass
323. 
324. 
325. class BigInt(models.Model):
326.     biggie = models.BigIntegerField()
327. 
328.     def __str__(self):
329.         return str(self.biggie)
330. 
331. 
332. class MarkupField(models.CharField):
333.     def __init__(self, *args, **kwargs):
334.         kwargs["max_length"] = 20
335.         super().__init__(*args, **kwargs)
336. 
337.     def formfield(self, **kwargs):
338.         # don't allow this field to be used in form (real use-case might be
339.         # that you know the markup will always be X, but it is among an app
340.         # that allows the user to say it could be something else)
341.         # regressed at r10062
342.         return None
343. 
344. 
345. class CustomFieldForExclusionModel(models.Model):
346.     name = models.CharField(max_length=10)
347.     markup = MarkupField()
348. 
349. 
350. class FlexibleDatePost(models.Model):
351.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
352.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
353.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
354.     posted = models.DateField(blank=True, null=True)
355. 
356. 
357. class Colour(models.Model):
358.     name = models.CharField(max_length=50)
359. 
360.     def __iter__(self):
361.         yield from range(5)
362. 
363.     def __str__(self):
364.         return self.name
365. 
366. 
367. class ColourfulItem(models.Model):
368.     name = models.CharField(max_length=50)
369.     colours = models.ManyToManyField(Colour)
370. 
371. 
372. class CustomErrorMessage(models.Model):
373.     name1 = models.CharField(
374.         max_length=50,
375.         validators=[validators.validate_slug],
376.         error_messages={'invalid': 'Model custom error message.'},
377.     )
378.     name2 = models.CharField(
379.         max_length=50,
380.         validators=[validators.validate_slug],
381.         error_messages={'invalid': 'Model custom error message.'},
382.     )
383. 
384.     def clean(self):
385.         if self.name1 == 'FORBIDDEN_VALUE':
386.             raise ValidationError({'name1': [ValidationError('Model.clean() error messages.')]})
387.         elif self.name1 == 'FORBIDDEN_VALUE2':
388.             raise ValidationError({'name1': 'Model.clean() error messages (simpler syntax).'})
389.         elif self.name1 == 'GLOBAL_ERROR':
390.             raise ValidationError("Global error message.")
391. 
392. 
393. def today_callable_dict():
394.     return {"last_action__gte": datetime.datetime.today()}
395. 
396. 
397. def today_callable_q():
398.     return models.Q(last_action__gte=datetime.datetime.today())
399. 
400. 
401. class Character(models.Model):
402.     username = models.CharField(max_length=100)
403.     last_action = models.DateTimeField()
404. 
405.     def __str__(self):
406.         return self.username
407. 
408. 
409. class StumpJoke(models.Model):
410.     most_recently_fooled = models.ForeignKey(
411.         Character,
412.         models.CASCADE,
413.         limit_choices_to=today_callable_dict,
414.         related_name="+",
415.     )
416.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")
417. 
418. 
419. # Model for #13776
420. class Student(models.Model):
421.     character = models.ForeignKey(Character, models.CASCADE)
422.     study = models.CharField(max_length=30)
423. 
424. 
425. # Model for #639
426. class Photo(models.Model):
427.     title = models.CharField(max_length=30)
428.     image = models.FileField(storage=temp_storage, upload_to='tests')
429. 
430.     # Support code for the tests; this keeps track of how many times save()
431.     # gets called on each instance.
432.     def __init__(self, *args, **kwargs):
433.         super().__init__(*args, **kwargs)
434.         self._savecount = 0
435. 
436.     def save(self, force_insert=False, force_update=False):
437.         super().save(force_insert, force_update)
438.         self._savecount += 1
439. 
440. 
441. class UUIDPK(models.Model):
442.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
443.     name = models.CharField(max_length=30)
444. 
445. 
446. # Models for #24706
447. class StrictAssignmentFieldSpecific(models.Model):
448.     title = models.CharField(max_length=30)
449.     _should_error = False
450. 
451.     def __setattr__(self, key, value):
452.         if self._should_error is True:
453.             raise ValidationError(message={key: "Cannot set attribute"}, code='invalid')
454.         super().__setattr__(key, value)
455. 
456. 
457. class StrictAssignmentAll(models.Model):
458.     title = models.CharField(max_length=30)
459.     _should_error = False
460. 
461.     def __setattr__(self, key, value):
462.         if self._should_error is True:
463.             raise ValidationError(message="Cannot set attribute", code='invalid')
464.         super().__setattr__(key, value)
465. 
466. 
467. # A model with ForeignKey(blank=False, null=True)
468. class Award(models.Model):
469.     name = models.CharField(max_length=30)
470.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)
471. 
472. 
473. class NullableUniqueCharFieldModel(models.Model):
474.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)


File: tests/queries/test_qs_combinators.py
Line number range: 1 - 316
Content:
1. import operator
2. 
3. from django.db import DatabaseError, NotSupportedError, connection
4. from django.db.models import Exists, F, IntegerField, OuterRef, Value
5. from django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature
6. 
7. from .models import Number, ReservedName
8. 
9. 
10. @skipUnlessDBFeature('supports_select_union')
11. class QuerySetSetOperationTests(TestCase):
12.     @classmethod
13.     def setUpTestData(cls):
14.         Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))
15. 
16.     def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):
17.         self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter('num'), ordered)
18. 
19.     def test_simple_union(self):
20.         qs1 = Number.objects.filter(num__lte=1)
21.         qs2 = Number.objects.filter(num__gte=8)
22.         qs3 = Number.objects.filter(num=5)
23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)
24. 
25.     @skipUnlessDBFeature('supports_select_intersection')
26.     def test_simple_intersection(self):
27.         qs1 = Number.objects.filter(num__lte=5)
28.         qs2 = Number.objects.filter(num__gte=5)
29.         qs3 = Number.objects.filter(num__gte=4, num__lte=6)
30.         self.assertNumbersEqual(qs1.intersection(qs2, qs3), [5], ordered=False)
31. 
32.     @skipUnlessDBFeature('supports_select_intersection')
33.     def test_intersection_with_values(self):
34.         ReservedName.objects.create(name='a', order=2)
35.         qs1 = ReservedName.objects.all()
36.         reserved_name = qs1.intersection(qs1).values('name', 'order', 'id').get()
37.         self.assertEqual(reserved_name['name'], 'a')
38.         self.assertEqual(reserved_name['order'], 2)
39.         reserved_name = qs1.intersection(qs1).values_list('name', 'order', 'id').get()
40.         self.assertEqual(reserved_name[:2], ('a', 2))
41. 
42.     @skipUnlessDBFeature('supports_select_difference')
43.     def test_simple_difference(self):
44.         qs1 = Number.objects.filter(num__lte=5)
45.         qs2 = Number.objects.filter(num__lte=4)
46.         self.assertNumbersEqual(qs1.difference(qs2), [5], ordered=False)
47. 
48.     def test_union_distinct(self):
49.         qs1 = Number.objects.all()
50.         qs2 = Number.objects.all()
51.         self.assertEqual(len(list(qs1.union(qs2, all=True))), 20)
52.         self.assertEqual(len(list(qs1.union(qs2))), 10)
53. 
54.     @skipUnlessDBFeature('supports_select_intersection')
55.     def test_intersection_with_empty_qs(self):
56.         qs1 = Number.objects.all()
57.         qs2 = Number.objects.none()
58.         qs3 = Number.objects.filter(pk__in=[])
59.         self.assertEqual(len(qs1.intersection(qs2)), 0)
60.         self.assertEqual(len(qs1.intersection(qs3)), 0)
61.         self.assertEqual(len(qs2.intersection(qs1)), 0)
62.         self.assertEqual(len(qs3.intersection(qs1)), 0)
63.         self.assertEqual(len(qs2.intersection(qs2)), 0)
64.         self.assertEqual(len(qs3.intersection(qs3)), 0)
65. 
66.     @skipUnlessDBFeature('supports_select_difference')
67.     def test_difference_with_empty_qs(self):
68.         qs1 = Number.objects.all()
69.         qs2 = Number.objects.none()
70.         qs3 = Number.objects.filter(pk__in=[])
71.         self.assertEqual(len(qs1.difference(qs2)), 10)
72.         self.assertEqual(len(qs1.difference(qs3)), 10)
73.         self.assertEqual(len(qs2.difference(qs1)), 0)
74.         self.assertEqual(len(qs3.difference(qs1)), 0)
75.         self.assertEqual(len(qs2.difference(qs2)), 0)
76.         self.assertEqual(len(qs3.difference(qs3)), 0)
77. 
78.     @skipUnlessDBFeature('supports_select_difference')
79.     def test_difference_with_values(self):
80.         ReservedName.objects.create(name='a', order=2)
81.         qs1 = ReservedName.objects.all()
82.         qs2 = ReservedName.objects.none()
83.         reserved_name = qs1.difference(qs2).values('name', 'order', 'id').get()
84.         self.assertEqual(reserved_name['name'], 'a')
85.         self.assertEqual(reserved_name['order'], 2)
86.         reserved_name = qs1.difference(qs2).values_list('name', 'order', 'id').get()
87.         self.assertEqual(reserved_name[:2], ('a', 2))
88. 
89.     def test_union_with_empty_qs(self):
90.         qs1 = Number.objects.all()
91.         qs2 = Number.objects.none()
92.         qs3 = Number.objects.filter(pk__in=[])
93.         self.assertEqual(len(qs1.union(qs2)), 10)
94.         self.assertEqual(len(qs2.union(qs1)), 10)
95.         self.assertEqual(len(qs1.union(qs3)), 10)
96.         self.assertEqual(len(qs3.union(qs1)), 10)
97.         self.assertEqual(len(qs2.union(qs1, qs1, qs1)), 10)
98.         self.assertEqual(len(qs2.union(qs1, qs1, all=True)), 20)
99.         self.assertEqual(len(qs2.union(qs2)), 0)
100.         self.assertEqual(len(qs3.union(qs3)), 0)
101. 
102.     def test_limits(self):
103.         qs1 = Number.objects.all()
104.         qs2 = Number.objects.all()
105.         self.assertEqual(len(list(qs1.union(qs2)[:2])), 2)
106. 
107.     def test_ordering(self):
108.         qs1 = Number.objects.filter(num__lte=1)
109.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)
110.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num'), [3, 2, 1, 0])
111. 
112.     def test_ordering_by_alias(self):
113.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('num'))
114.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('num'))
115.         self.assertQuerysetEqual(
116.             qs1.union(qs2).order_by('-alias'),
117.             [3, 2, 1, 0],
118.             operator.itemgetter('alias'),
119.         )
120. 
121.     def test_ordering_by_f_expression(self):
122.         qs1 = Number.objects.filter(num__lte=1)
123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)
124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F('num').desc()), [3, 2, 1, 0])
125. 
126.     def test_ordering_by_f_expression_and_alias(self):
127.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('other_num'))
128.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('other_num'))
129.         self.assertQuerysetEqual(
130.             qs1.union(qs2).order_by(F('alias').desc()),
131.             [10, 9, 8, 7],
132.             operator.itemgetter('alias'),
133.         )
134.         Number.objects.create(num=-1)
135.         self.assertQuerysetEqual(
136.             qs1.union(qs2).order_by(F('alias').desc(nulls_last=True)),
137.             [10, 9, 8, 7, None],
138.             operator.itemgetter('alias'),
139.         )
140. 
141.     def test_union_with_values(self):
142.         ReservedName.objects.create(name='a', order=2)
143.         qs1 = ReservedName.objects.all()
144.         reserved_name = qs1.union(qs1).values('name', 'order', 'id').get()
145.         self.assertEqual(reserved_name['name'], 'a')
146.         self.assertEqual(reserved_name['order'], 2)
147.         reserved_name = qs1.union(qs1).values_list('name', 'order', 'id').get()
148.         self.assertEqual(reserved_name[:2], ('a', 2))
149.         # List of columns can be changed.
150.         reserved_name = qs1.union(qs1).values_list('order').get()
151.         self.assertEqual(reserved_name, (2,))
152. 
153.     def test_union_with_two_annotated_values_list(self):
154.         qs1 = Number.objects.filter(num=1).annotate(
155.             count=Value(0, IntegerField()),
156.         ).values_list('num', 'count')
157.         qs2 = Number.objects.filter(num=2).values('pk').annotate(
158.             count=F('num'),
159.         ).annotate(
160.             num=Value(1, IntegerField()),
161.         ).values_list('num', 'count')
162.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])
163. 
164.     def test_union_with_extra_and_values_list(self):
165.         qs1 = Number.objects.filter(num=1).extra(
166.             select={'count': 0},
167.         ).values_list('num', 'count')
168.         qs2 = Number.objects.filter(num=2).extra(select={'count': 1})
169.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])
170. 
171.     def test_union_with_values_list_on_annotated_and_unannotated(self):
172.         ReservedName.objects.create(name='rn1', order=1)
173.         qs1 = Number.objects.annotate(
174.             has_reserved_name=Exists(ReservedName.objects.filter(order=OuterRef('num')))
175.         ).filter(has_reserved_name=True)
176.         qs2 = Number.objects.filter(num=9)
177.         self.assertCountEqual(qs1.union(qs2).values_list('num', flat=True), [1, 9])
178. 
179.     def test_union_with_values_list_and_order(self):
180.         ReservedName.objects.bulk_create([
181.             ReservedName(name='rn1', order=7),
182.             ReservedName(name='rn2', order=5),
183.             ReservedName(name='rn0', order=6),
184.             ReservedName(name='rn9', order=-1),
185.         ])
186.         qs1 = ReservedName.objects.filter(order__gte=6)
187.         qs2 = ReservedName.objects.filter(order__lte=5)
188.         union_qs = qs1.union(qs2)
189.         for qs, expected_result in (
190.             # Order by a single column.
191.             (union_qs.order_by('-pk').values_list('order', flat=True), [-1, 6, 5, 7]),
192.             (union_qs.order_by('pk').values_list('order', flat=True), [7, 5, 6, -1]),
193.             (union_qs.values_list('order', flat=True).order_by('-pk'), [-1, 6, 5, 7]),
194.             (union_qs.values_list('order', flat=True).order_by('pk'), [7, 5, 6, -1]),
195.             # Order by multiple columns.
196.             (union_qs.order_by('-name', 'pk').values_list('order', flat=True), [-1, 5, 7, 6]),
197.             (union_qs.values_list('order', flat=True).order_by('-name', 'pk'), [-1, 5, 7, 6]),
198.         ):
199.             with self.subTest(qs=qs):
200.                 self.assertEqual(list(qs), expected_result)
201. 
202.     def test_count_union(self):
203.         qs1 = Number.objects.filter(num__lte=1).values('num')
204.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values('num')
205.         self.assertEqual(qs1.union(qs2).count(), 4)
206. 
207.     def test_count_union_empty_result(self):
208.         qs = Number.objects.filter(pk__in=[])
209.         self.assertEqual(qs.union(qs).count(), 0)
210. 
211.     @skipUnlessDBFeature('supports_select_difference')
212.     def test_count_difference(self):
213.         qs1 = Number.objects.filter(num__lt=10)
214.         qs2 = Number.objects.filter(num__lt=9)
215.         self.assertEqual(qs1.difference(qs2).count(), 1)
216. 
217.     @skipUnlessDBFeature('supports_select_intersection')
218.     def test_count_intersection(self):
219.         qs1 = Number.objects.filter(num__gte=5)
220.         qs2 = Number.objects.filter(num__lte=5)
221.         self.assertEqual(qs1.intersection(qs2).count(), 1)
222. 
223.     @skipUnlessDBFeature('supports_slicing_ordering_in_compound')
224.     def test_ordering_subqueries(self):
225.         qs1 = Number.objects.order_by('num')[:2]
226.         qs2 = Number.objects.order_by('-num')[:2]
227.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num')[:4], [9, 8, 1, 0])
228. 
229.     @skipIfDBFeature('supports_slicing_ordering_in_compound')
230.     def test_unsupported_ordering_slicing_raises_db_error(self):
231.         qs1 = Number.objects.all()
232.         qs2 = Number.objects.all()
233.         msg = 'LIMIT/OFFSET not allowed in subqueries of compound statements'
234.         with self.assertRaisesMessage(DatabaseError, msg):
235.             list(qs1.union(qs2[:10]))
236.         msg = 'ORDER BY not allowed in subqueries of compound statements'
237.         with self.assertRaisesMessage(DatabaseError, msg):
238.             list(qs1.order_by('id').union(qs2))
239. 
240.     @skipIfDBFeature('supports_select_intersection')
241.     def test_unsupported_intersection_raises_db_error(self):
242.         qs1 = Number.objects.all()
243.         qs2 = Number.objects.all()
244.         msg = 'intersection is not supported on this database backend'
245.         with self.assertRaisesMessage(NotSupportedError, msg):
246.             list(qs1.intersection(qs2))
247. 
248.     def test_combining_multiple_models(self):
249.         ReservedName.objects.create(name='99 little bugs', order=99)
250.         qs1 = Number.objects.filter(num=1).values_list('num', flat=True)
251.         qs2 = ReservedName.objects.values_list('order')
252.         self.assertEqual(list(qs1.union(qs2).order_by('num')), [1, 99])
253. 
254.     def test_order_raises_on_non_selected_column(self):
255.         qs1 = Number.objects.filter().annotate(
256.             annotation=Value(1, IntegerField()),
257.         ).values('annotation', num2=F('num'))
258.         qs2 = Number.objects.filter().values('id', 'num')
259.         # Should not raise
260.         list(qs1.union(qs2).order_by('annotation'))
261.         list(qs1.union(qs2).order_by('num2'))
262.         msg = 'ORDER BY term does not match any column in the result set'
263.         # 'id' is not part of the select
264.         with self.assertRaisesMessage(DatabaseError, msg):
265.             list(qs1.union(qs2).order_by('id'))
266.         # 'num' got realiased to num2
267.         with self.assertRaisesMessage(DatabaseError, msg):
268.             list(qs1.union(qs2).order_by('num'))
269.         with self.assertRaisesMessage(DatabaseError, msg):
270.             list(qs1.union(qs2).order_by(F('num')))
271.         with self.assertRaisesMessage(DatabaseError, msg):
272.             list(qs1.union(qs2).order_by(F('num').desc()))
273.         # switched order, now 'exists' again:
274.         list(qs2.union(qs1).order_by('num'))
275. 
276.     @skipUnlessDBFeature('supports_select_difference', 'supports_select_intersection')
277.     def test_qs_with_subcompound_qs(self):
278.         qs1 = Number.objects.all()
279.         qs2 = Number.objects.intersection(Number.objects.filter(num__gt=1))
280.         self.assertEqual(qs1.difference(qs2).count(), 2)
281. 
282.     def test_order_by_same_type(self):
283.         qs = Number.objects.all()
284.         union = qs.union(qs)
285.         numbers = list(range(10))
286.         self.assertNumbersEqual(union.order_by('num'), numbers)
287.         self.assertNumbersEqual(union.order_by('other_num'), reversed(numbers))
288. 
289.     def test_unsupported_operations_on_combined_qs(self):
290.         qs = Number.objects.all()
291.         msg = 'Calling QuerySet.%s() after %s() is not supported.'
292.         combinators = ['union']
293.         if connection.features.supports_select_difference:
294.             combinators.append('difference')
295.         if connection.features.supports_select_intersection:
296.             combinators.append('intersection')
297.         for combinator in combinators:
298.             for operation in (
299.                 'annotate',
300.                 'defer',
301.                 'delete',
302.                 'distinct',
303.                 'exclude',
304.                 'extra',
305.                 'filter',
306.                 'only',
307.                 'prefetch_related',
308.                 'select_related',
309.                 'update',
310.             ):
311.                 with self.subTest(combinator=combinator, operation=operation):
312.                     with self.assertRaisesMessage(
313.                         NotSupportedError,
314.                         msg % (operation, combinator),
315.                     ):
316.                         getattr(getattr(qs, combinator)(qs), operation)()


File: tests/queries/models.py
Line number range: 1 - 500
Content:
1. """
2. Various complex queries that have been problematic in the past.
3. """
4. from django.db import models
5. from django.db.models.functions import Now
6. 
7. 
8. class DumbCategory(models.Model):
9.     pass
10. 
11. 
12. class ProxyCategory(DumbCategory):
13.     class Meta:
14.         proxy = True
15. 
16. 
17. class NamedCategory(DumbCategory):
18.     name = models.CharField(max_length=10)
19. 
20.     def __str__(self):
21.         return self.name
22. 
23. 
24. class Tag(models.Model):
25.     name = models.CharField(max_length=10)
26.     parent = models.ForeignKey(
27.         'self',
28.         models.SET_NULL,
29.         blank=True, null=True,
30.         related_name='children',
31.     )
32.     category = models.ForeignKey(NamedCategory, models.SET_NULL, null=True, default=None)
33. 
34.     class Meta:
35.         ordering = ['name']
36. 
37.     def __str__(self):
38.         return self.name
39. 
40. 
41. class Note(models.Model):
42.     note = models.CharField(max_length=100)
43.     misc = models.CharField(max_length=10)
44.     tag = models.ForeignKey(Tag, models.SET_NULL, blank=True, null=True)
45. 
46.     class Meta:
47.         ordering = ['note']
48. 
49.     def __str__(self):
50.         return self.note
51. 
52. 
53. class Annotation(models.Model):
54.     name = models.CharField(max_length=10)
55.     tag = models.ForeignKey(Tag, models.CASCADE)
56.     notes = models.ManyToManyField(Note)
57. 
58.     def __str__(self):
59.         return self.name
60. 
61. 
62. class DateTimePK(models.Model):
63.     date = models.DateTimeField(primary_key=True, auto_now_add=True)
64. 
65. 
66. class ExtraInfo(models.Model):
67.     info = models.CharField(max_length=100)
68.     note = models.ForeignKey(Note, models.CASCADE, null=True)
69.     value = models.IntegerField(null=True)
70.     date = models.ForeignKey(DateTimePK, models.SET_NULL, null=True)
71.     filterable = models.BooleanField(default=True)
72. 
73.     class Meta:
74.         ordering = ['info']
75. 
76.     def __str__(self):
77.         return self.info
78. 
79. 
80. class Author(models.Model):
81.     name = models.CharField(max_length=10)
82.     num = models.IntegerField(unique=True)
83.     extra = models.ForeignKey(ExtraInfo, models.CASCADE)
84. 
85.     class Meta:
86.         ordering = ['name']
87. 
88.     def __str__(self):
89.         return self.name
90. 
91. 
92. class Item(models.Model):
93.     name = models.CharField(max_length=10)
94.     created = models.DateTimeField()
95.     modified = models.DateTimeField(blank=True, null=True)
96.     tags = models.ManyToManyField(Tag, blank=True)
97.     creator = models.ForeignKey(Author, models.CASCADE)
98.     note = models.ForeignKey(Note, models.CASCADE)
99. 
100.     class Meta:
101.         ordering = ['-note', 'name']
102. 
103.     def __str__(self):
104.         return self.name
105. 
106. 
107. class Report(models.Model):
108.     name = models.CharField(max_length=10)
109.     creator = models.ForeignKey(Author, models.SET_NULL, to_field='num', null=True)
110. 
111.     def __str__(self):
112.         return self.name
113. 
114. 
115. class ReportComment(models.Model):
116.     report = models.ForeignKey(Report, models.CASCADE)
117. 
118. 
119. class Ranking(models.Model):
120.     rank = models.IntegerField()
121.     author = models.ForeignKey(Author, models.CASCADE)
122. 
123.     class Meta:
124.         # A complex ordering specification. Should stress the system a bit.
125.         ordering = ('author__extra__note', 'author__name', 'rank')
126. 
127.     def __str__(self):
128.         return '%d: %s' % (self.rank, self.author.name)
129. 
130. 
131. class Cover(models.Model):
132.     title = models.CharField(max_length=50)
133.     item = models.ForeignKey(Item, models.CASCADE)
134. 
135.     class Meta:
136.         ordering = ['item']
137. 
138.     def __str__(self):
139.         return self.title
140. 
141. 
142. class Number(models.Model):
143.     num = models.IntegerField()
144.     other_num = models.IntegerField(null=True)
145.     another_num = models.IntegerField(null=True)
146. 
147.     def __str__(self):
148.         return str(self.num)
149. 
150. # Symmetrical m2m field with a normal field using the reverse accessor name
151. # ("valid").
152. 
153. 
154. class Valid(models.Model):
155.     valid = models.CharField(max_length=10)
156.     parent = models.ManyToManyField('self')
157. 
158.     class Meta:
159.         ordering = ['valid']
160. 
161. # Some funky cross-linked models for testing a couple of infinite recursion
162. # cases.
163. 
164. 
165. class X(models.Model):
166.     y = models.ForeignKey('Y', models.CASCADE)
167. 
168. 
169. class Y(models.Model):
170.     x1 = models.ForeignKey(X, models.CASCADE, related_name='y1')
171. 
172. # Some models with a cycle in the default ordering. This would be bad if we
173. # didn't catch the infinite loop.
174. 
175. 
176. class LoopX(models.Model):
177.     y = models.ForeignKey('LoopY', models.CASCADE)
178. 
179.     class Meta:
180.         ordering = ['y']
181. 
182. 
183. class LoopY(models.Model):
184.     x = models.ForeignKey(LoopX, models.CASCADE)
185. 
186.     class Meta:
187.         ordering = ['x']
188. 
189. 
190. class LoopZ(models.Model):
191.     z = models.ForeignKey('self', models.CASCADE)
192. 
193.     class Meta:
194.         ordering = ['z']
195. 
196. 
197. # A model and custom default manager combination.
198. 
199. 
200. class CustomManager(models.Manager):
201.     def get_queryset(self):
202.         qs = super().get_queryset()
203.         return qs.filter(public=True, tag__name='t1')
204. 
205. 
206. class ManagedModel(models.Model):
207.     data = models.CharField(max_length=10)
208.     tag = models.ForeignKey(Tag, models.CASCADE)
209.     public = models.BooleanField(default=True)
210. 
211.     objects = CustomManager()
212.     normal_manager = models.Manager()
213. 
214.     def __str__(self):
215.         return self.data
216. 
217. # An inter-related setup with multiple paths from Child to Detail.
218. 
219. 
220. class Detail(models.Model):
221.     data = models.CharField(max_length=10)
222. 
223. 
224. class MemberManager(models.Manager):
225.     def get_queryset(self):
226.         return super().get_queryset().select_related("details")
227. 
228. 
229. class Member(models.Model):
230.     name = models.CharField(max_length=10)
231.     details = models.OneToOneField(Detail, models.CASCADE, primary_key=True)
232. 
233.     objects = MemberManager()
234. 
235. 
236. class Child(models.Model):
237.     person = models.OneToOneField(Member, models.CASCADE, primary_key=True)
238.     parent = models.ForeignKey(Member, models.CASCADE, related_name="children")
239. 
240. # Custom primary keys interfered with ordering in the past.
241. 
242. 
243. class CustomPk(models.Model):
244.     name = models.CharField(max_length=10, primary_key=True)
245.     extra = models.CharField(max_length=10)
246. 
247.     class Meta:
248.         ordering = ['name', 'extra']
249. 
250. 
251. class Related(models.Model):
252.     custom = models.ForeignKey(CustomPk, models.CASCADE, null=True)
253. 
254. 
255. class CustomPkTag(models.Model):
256.     id = models.CharField(max_length=20, primary_key=True)
257.     custom_pk = models.ManyToManyField(CustomPk)
258.     tag = models.CharField(max_length=20)
259. 
260. # An inter-related setup with a model subclass that has a nullable
261. # path to another model, and a return path from that model.
262. 
263. 
264. class Celebrity(models.Model):
265.     name = models.CharField("Name", max_length=20)
266.     greatest_fan = models.ForeignKey("Fan", models.SET_NULL, null=True, unique=True)
267. 
268.     def __str__(self):
269.         return self.name
270. 
271. 
272. class TvChef(Celebrity):
273.     pass
274. 
275. 
276. class Fan(models.Model):
277.     fan_of = models.ForeignKey(Celebrity, models.CASCADE)
278. 
279. # Multiple foreign keys
280. 
281. 
282. class LeafA(models.Model):
283.     data = models.CharField(max_length=10)
284. 
285.     def __str__(self):
286.         return self.data
287. 
288. 
289. class LeafB(models.Model):
290.     data = models.CharField(max_length=10)
291. 
292. 
293. class Join(models.Model):
294.     a = models.ForeignKey(LeafA, models.CASCADE)
295.     b = models.ForeignKey(LeafB, models.CASCADE)
296. 
297. 
298. class ReservedName(models.Model):
299.     name = models.CharField(max_length=20)
300.     order = models.IntegerField()
301. 
302.     def __str__(self):
303.         return self.name
304. 
305. # A simpler shared-foreign-key setup that can expose some problems.
306. 
307. 
308. class SharedConnection(models.Model):
309.     data = models.CharField(max_length=10)
310. 
311.     def __str__(self):
312.         return self.data
313. 
314. 
315. class PointerA(models.Model):
316.     connection = models.ForeignKey(SharedConnection, models.CASCADE)
317. 
318. 
319. class PointerB(models.Model):
320.     connection = models.ForeignKey(SharedConnection, models.CASCADE)
321. 
322. # Multi-layer ordering
323. 
324. 
325. class SingleObject(models.Model):
326.     name = models.CharField(max_length=10)
327. 
328.     class Meta:
329.         ordering = ['name']
330. 
331.     def __str__(self):
332.         return self.name
333. 
334. 
335. class RelatedObject(models.Model):
336.     single = models.ForeignKey(SingleObject, models.SET_NULL, null=True)
337.     f = models.IntegerField(null=True)
338. 
339.     class Meta:
340.         ordering = ['single']
341. 
342. 
343. class Plaything(models.Model):
344.     name = models.CharField(max_length=10)
345.     others = models.ForeignKey(RelatedObject, models.SET_NULL, null=True)
346. 
347.     class Meta:
348.         ordering = ['others']
349. 
350.     def __str__(self):
351.         return self.name
352. 
353. 
354. class Article(models.Model):
355.     name = models.CharField(max_length=20)
356.     created = models.DateTimeField()
357. 
358.     def __str__(self):
359.         return self.name
360. 
361. 
362. class Food(models.Model):
363.     name = models.CharField(max_length=20, unique=True)
364. 
365.     def __str__(self):
366.         return self.name
367. 
368. 
369. class Eaten(models.Model):
370.     food = models.ForeignKey(Food, models.SET_NULL, to_field="name", null=True)
371.     meal = models.CharField(max_length=20)
372. 
373.     def __str__(self):
374.         return "%s at %s" % (self.food, self.meal)
375. 
376. 
377. class Node(models.Model):
378.     num = models.IntegerField(unique=True)
379.     parent = models.ForeignKey("self", models.SET_NULL, to_field="num", null=True)
380. 
381.     def __str__(self):
382.         return str(self.num)
383. 
384. # Bug #12252
385. 
386. 
387. class ObjectA(models.Model):
388.     name = models.CharField(max_length=50)
389. 
390.     def __str__(self):
391.         return self.name
392. 
393.     def __iter__(self):
394.         # Ticket #23721
395.         assert False, 'type checking should happen without calling model __iter__'
396. 
397. 
398. class ProxyObjectA(ObjectA):
399.     class Meta:
400.         proxy = True
401. 
402. 
403. class ChildObjectA(ObjectA):
404.     pass
405. 
406. 
407. class ObjectB(models.Model):
408.     name = models.CharField(max_length=50)
409.     objecta = models.ForeignKey(ObjectA, models.CASCADE)
410.     num = models.PositiveSmallIntegerField()
411. 
412.     def __str__(self):
413.         return self.name
414. 
415. 
416. class ProxyObjectB(ObjectB):
417.     class Meta:
418.         proxy = True
419. 
420. 
421. class ObjectC(models.Model):
422.     name = models.CharField(max_length=50)
423.     objecta = models.ForeignKey(ObjectA, models.SET_NULL, null=True)
424.     objectb = models.ForeignKey(ObjectB, models.SET_NULL, null=True)
425.     childobjecta = models.ForeignKey(ChildObjectA, models.SET_NULL, null=True, related_name='ca_pk')
426. 
427.     def __str__(self):
428.         return self.name
429. 
430. 
431. class SimpleCategory(models.Model):
432.     name = models.CharField(max_length=15)
433. 
434.     def __str__(self):
435.         return self.name
436. 
437. 
438. class SpecialCategory(SimpleCategory):
439.     special_name = models.CharField(max_length=15)
440. 
441.     def __str__(self):
442.         return self.name + " " + self.special_name
443. 
444. 
445. class CategoryItem(models.Model):
446.     category = models.ForeignKey(SimpleCategory, models.CASCADE)
447. 
448.     def __str__(self):
449.         return "category item: " + str(self.category)
450. 
451. 
452. class MixedCaseFieldCategoryItem(models.Model):
453.     CaTeGoRy = models.ForeignKey(SimpleCategory, models.CASCADE)
454. 
455. 
456. class MixedCaseDbColumnCategoryItem(models.Model):
457.     category = models.ForeignKey(SimpleCategory, models.CASCADE, db_column='CaTeGoRy_Id')
458. 
459. 
460. class OneToOneCategory(models.Model):
461.     new_name = models.CharField(max_length=15)
462.     category = models.OneToOneField(SimpleCategory, models.CASCADE)
463. 
464.     def __str__(self):
465.         return "one2one " + self.new_name
466. 
467. 
468. class CategoryRelationship(models.Model):
469.     first = models.ForeignKey(SimpleCategory, models.CASCADE, related_name='first_rel')
470.     second = models.ForeignKey(SimpleCategory, models.CASCADE, related_name='second_rel')
471. 
472. 
473. class CommonMixedCaseForeignKeys(models.Model):
474.     category = models.ForeignKey(CategoryItem, models.CASCADE)
475.     mixed_case_field_category = models.ForeignKey(MixedCaseFieldCategoryItem, models.CASCADE)
476.     mixed_case_db_column_category = models.ForeignKey(MixedCaseDbColumnCategoryItem, models.CASCADE)
477. 
478. 
479. class NullableName(models.Model):
480.     name = models.CharField(max_length=20, null=True)
481. 
482.     class Meta:
483.         ordering = ['id']
484. 
485. 
486. class ModelD(models.Model):
487.     name = models.TextField()
488. 
489. 
490. class ModelC(models.Model):
491.     name = models.TextField()
492. 
493. 
494. class ModelB(models.Model):
495.     name = models.TextField()
496.     c = models.ForeignKey(ModelC, models.CASCADE)
497. 
498. 
499. class ModelA(models.Model):
500.     name = models.TextField()

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 19:53:07,024 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user is reporting a bug concerning the behavior of `QuerySet.union()` within a `ModelMultipleChoiceField`. The core of the issue lies at the intersection of Django's form handling for optional multiple choice fields and the behavior of combined querysets from the ORM.\n\nThe provided context is sufficient to address the query. It includes:\n1.  `tests/model_forms/tests.py`, which contains tests for `ModelMultipleChoiceField`, including how it handles non-required fields and empty values.\n2.  `tests/queries/test_qs_combinators.py`, which has detailed tests for `QuerySet.union()` and other combinators, including their limitations and interactions with empty querysets.\n3.  The model definitions (`tests/model_forms/models.py` and `tests/queries/models.py`) used by these test files.\n\nThis context allows for the selection of highly relevant test cases that demonstrate the expected behavior of `ModelMultipleChoiceField`, the specific behaviors and limitations of `union()` querysets, and how optional fields are handled in `ModelForm`s. Therefore, no additional context is required to find relevant test cases." refined_query=''
2025-10-06 19:53:07,025 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='tests/model_forms/tests.py', content="1755.     def test_model_multiple_choice_required_false(self):\n1756.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)\n1757.         self.assertIsInstance(f.clean([]), EmptyQuerySet)\n1758.         self.assertIsInstance(f.clean(()), EmptyQuerySet)\n1759.         with self.assertRaises(ValidationError):\n1760.             f.clean(['0'])", start_line_number=1755, end_line_number=1760), Context(relative_path='tests/model_forms/tests.py', content="644.     def test_default_not_populated_on_optional_checkbox_input(self):\n645.         class PubForm(forms.ModelForm):\n646.             class Meta:\n647.                 model = PublicationDefaults\n648.                 fields = ('active',)\n649. \n650.         # Empty data doesn't use the model default because CheckboxInput\n651.         # doesn't have a value in HTML form submission.\n652.         mf1 = PubForm({})\n653.         self.assertEqual(mf1.errors, {})\n654.         m1 = mf1.save(commit=False)\n655.         self.assertIs(m1.active, False)\n656.         self.assertIsInstance(mf1.fields['active'].widget, forms.CheckboxInput)", start_line_number=644, end_line_number=656), Context(relative_path='tests/model_forms/tests.py', content='1. import datetime\n2. import os\n3. from decimal import Decimal\n4. from unittest import mock, skipUnless\n5. \n6. from django import forms\n7. from django.core.exceptions import (\n8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured, ValidationError,\n9. )\n10. from django.core.files.uploadedfile import SimpleUploadedFile\n11. from django.db import connection, models\n12. from django.db.models.query import EmptyQuerySet\n13. from django.forms.models import (\n14.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,\n15.     modelform_factory,\n16. )\n17. from django.template import Context, Template\n18. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n19. \n20. from .models import (\n21.     Article, ArticleStatus, Author, Author1, Award, BetterWriter, BigInt, Book,\n22.     Category, Character, Colour, ColourfulItem, CustomErrorMessage, CustomFF,\n23.     CustomFieldForExclusionModel, DateTimePost, DerivedBook, DerivedPost,\n24.     Document, ExplicitPK, FilePathModel, FlexibleDatePost, Homepage,\n25.     ImprovedArticle, ImprovedArticleWithParentLink, Inventory,\n26.     NullableUniqueCharFieldModel, Person, Photo, Post, Price, Product,\n27.     Publication, PublicationDefaults, StrictAssignmentAll,\n28.     StrictAssignmentFieldSpecific, Student, StumpJoke, TextFile, Triple,\n29.     Writer, WriterProfile, test_images,\n30. )\n31. \n32. if test_images:\n33.     from .models import ImageFile, OptionalImageFile, NoExtensionImageFile\n34. \n35.     class ImageFileForm(forms.ModelForm):\n36.         class Meta:\n37.             model = ImageFile\n38.             fields = \'__all__\'\n39. \n40.     class OptionalImageFileForm(forms.ModelForm):\n41.         class Meta:\n42.             model = OptionalImageFile\n43.             fields = \'__all__\'\n44. \n45.     class NoExtensionImageFileForm(forms.ModelForm):\n46.         class Meta:\n47.             model = NoExtensionImageFile\n48.             fields = \'__all__\'\n49. \n50. \n51. class ProductForm(forms.ModelForm):\n52.     class Meta:\n53.         model = Product\n54.         fields = \'__all__\'\n55. \n56. \n57. class PriceForm(forms.ModelForm):\n58.     class Meta:\n59.         model = Price\n60.         fields = \'__all__\'\n61. \n62. \n63. class BookForm(forms.ModelForm):\n64.     class Meta:\n65.         model = Book\n66.         fields = \'__all__\'\n67. \n68. \n69. class DerivedBookForm(forms.ModelForm):\n70.     class Meta:\n71.         model = DerivedBook\n72.         fields = \'__all__\'\n73. \n74. \n75. class ExplicitPKForm(forms.ModelForm):\n76.     class Meta:\n77.         model = ExplicitPK\n78.         fields = (\'key\', \'desc\',)\n79. \n80. \n81. class PostForm(forms.ModelForm):\n82.     class Meta:\n83.         model = Post\n84.         fields = \'__all__\'\n85. \n86. \n87. class DerivedPostForm(forms.ModelForm):\n88.     class Meta:\n89.         model = DerivedPost\n90.         fields = \'__all__\'\n91. \n92. \n93. class CustomWriterForm(forms.ModelForm):\n94.     name = forms.CharField(required=False)\n95. \n96.     class Meta:\n97.         model = Writer\n98.         fields = \'__all__\'\n99. \n100. \n101. class BaseCategoryForm(forms.ModelForm):\n102.     class Meta:\n103.         model = Category\n104.         fields = \'__all__\'\n105. \n106. \n107. class ArticleForm(forms.ModelForm):\n108.     class Meta:\n109.         model = Article\n110.         fields = \'__all__\'\n111. \n112. \n113. class RoykoForm(forms.ModelForm):\n114.     class Meta:\n115.         model = Writer\n116.         fields = \'__all__\'\n117. \n118. \n119. class ArticleStatusForm(forms.ModelForm):\n120.     class Meta:\n121.         model = ArticleStatus\n122.         fields = \'__all__\'\n123. \n124. \n125. class InventoryForm(forms.ModelForm):\n126.     class Meta:\n127.         model = Inventory\n128.         fields = \'__all__\'\n129. \n130. \n131. class SelectInventoryForm(forms.Form):\n132.     items = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name=\'barcode\')\n133. \n134. \n135. class CustomFieldForExclusionForm(forms.ModelForm):\n136.     class Meta:\n137.         model = CustomFieldForExclusionModel\n138.         fields = [\'name\', \'markup\']\n139. \n140. \n141. class TextFileForm(forms.ModelForm):\n142.     class Meta:\n143.         model = TextFile\n144.         fields = \'__all__\'\n145. \n146. \n147. class BigIntForm(forms.ModelForm):\n148.     class Meta:\n149.         model = BigInt\n150.         fields = \'__all__\'\n151. \n152. \n153. class ModelFormWithMedia(forms.ModelForm):\n154.     class Media:\n155.         js = (\'/some/form/javascript\',)\n156.         css = {\n157.             \'all\': (\'/some/form/css\',)\n158.         }\n159. \n160.     class Meta:\n161.         model = TextFile\n162.         fields = \'__all__\'\n163. \n164. \n165. class CustomErrorMessageForm(forms.ModelForm):\n166.     name1 = forms.CharField(error_messages={\'invalid\': \'Form custom error message.\'})\n167. \n168.     class Meta:\n169.         fields = \'__all__\'\n170.         model = CustomErrorMessage\n171. \n172. \n173. class ModelFormBaseTest(TestCase):\n174.     def test_base_form(self):\n175.         self.assertEqual(list(BaseCategoryForm.base_fields), [\'name\', \'slug\', \'url\'])\n176. \n177.     def test_no_model_class(self):\n178.         class NoModelModelForm(forms.ModelForm):\n179.             pass\n180.         with self.assertRaisesMessage(ValueError, \'ModelForm has no model class specified.\'):\n181.             NoModelModelForm()\n182. \n183.     def test_empty_fields_to_fields_for_model(self):\n184.         """\n185.         An argument of fields=() to fields_for_model should return an empty dictionary\n186.         """\n187.         field_dict = fields_for_model(Person, fields=())\n188.         self.assertEqual(len(field_dict), 0)\n189. \n190.     def test_empty_fields_on_modelform(self):\n191.         """\n192.         No fields on a ModelForm should actually result in no fields.\n193.         """\n194.         class EmptyPersonForm(forms.ModelForm):\n195.             class Meta:\n196.                 model = Person\n197.                 fields = ()\n198. \n199.         form = EmptyPersonForm()\n200.         self.assertEqual(len(form.fields), 0)\n201. \n202.     def test_empty_fields_to_construct_instance(self):\n203.         """\n204.         No fields should be set on a model instance if construct_instance receives fields=().\n205.         """\n206.         form = modelform_factory(Person, fields="__all__")({\'name\': \'John Doe\'})\n207.         self.assertTrue(form.is_valid())\n208.         instance = construct_instance(form, Person(), fields=())\n209.         self.assertEqual(instance.name, \'\')\n210. \n211.     def test_blank_with_null_foreign_key_field(self):\n212.         """\n213.         #13776 -- ModelForm\'s with models having a FK set to null=False and\n214.         required=False should be valid.\n215.         """\n216.         class FormForTestingIsValid(forms.ModelForm):\n217.             class Meta:\n218.                 model = Student\n219.                 fields = \'__all__\'\n220. \n221.             def __init__(self, *args, **kwargs):\n222.                 super().__init__(*args, **kwargs)\n223.                 self.fields[\'character\'].required = False\n224. \n225.         char = Character.objects.create(username=\'user\', last_action=datetime.datetime.today())\n226.         data = {\'study\': \'Engineering\'}\n227.         data2 = {\'study\': \'Engineering\', \'character\': char.pk}\n228. \n229.         # form is valid because required=False for field \'character\'\n230.         f1 = FormForTestingIsValid(data)\n231.         self.assertTrue(f1.is_valid())\n232. \n233.         f2 = FormForTestingIsValid(data2)\n234.         self.assertTrue(f2.is_valid())\n235.         obj = f2.save()\n236.         self.assertEqual(obj.character, char)\n237. \n238.     def test_blank_false_with_null_true_foreign_key_field(self):\n239.         """\n240.         A ModelForm with a model having ForeignKey(blank=False, null=True)\n241.         and the form field set to required=False should allow the field to be\n242.         unset.\n243.         """\n244.         class AwardForm(forms.ModelForm):\n245.             class Meta:\n246.                 model = Award\n247.                 fields = \'__all__\'\n248. \n249.             def __init__(self, *args, **kwargs):\n250.                 super().__init__(*args, **kwargs)\n251.                 self.fields[\'character\'].required = False\n252. \n253.         character = Character.objects.create(username=\'user\', last_action=datetime.datetime.today())\n254.         award = Award.objects.create(name=\'Best sprinter\', character=character)\n255.         data = {\'name\': \'Best tester\', \'character\': \'\'}  # remove character\n256.         form = AwardForm(data=data, instance=award)\n257.         self.assertTrue(form.is_valid())\n258.         award = form.save()\n259.         self.assertIsNone(award.character)\n260. \n261.     def test_blank_foreign_key_with_radio(self):\n262.         class BookForm(forms.ModelForm):\n263.             class Meta:\n264.                 model = Book\n265.                 fields = [\'author\']\n266.                 widgets = {\'author\': forms.RadioSelect()}\n267. \n268.         writer = Writer.objects.create(name=\'Joe Doe\')\n269.         form = BookForm()\n270.         self.assertEqual(list(form.fields[\'author\'].choices), [\n271.             (\'\', \'---------\'),\n272.             (writer.pk, \'Joe Doe\'),\n273.         ])\n274. \n275.     def test_non_blank_foreign_key_with_radio(self):\n276.         class AwardForm(forms.ModelForm):\n277.             class Meta:\n278.                 model = Award\n279.                 fields = [\'character\']\n280.                 widgets = {\'character\': forms.RadioSelect()}\n281. \n282.         character = Character.objects.create(\n283.             username=\'user\',\n284.             last_action=datetime.datetime.today(),\n285.         )\n286.         form = AwardForm()\n287.         self.assertEqual(\n288.             list(form.fields[\'character\'].choices),\n289.             [(character.pk, \'user\')],\n290.         )\n291. \n292.     def test_save_blank_false_with_required_false(self):\n293.         """\n294.         A ModelForm with a model with a field set to blank=False and the form\n295.         field set to required=False should allow the field to be unset.\n296.         """\n297.         obj = Writer.objects.create(name=\'test\')\n298.         form = CustomWriterForm(data={\'name\': \'\'}, instance=obj)\n299.         self.assertTrue(form.is_valid())\n300.         obj = form.save()\n301.         self.assertEqual(obj.name, \'\')\n302. \n303.     def test_save_blank_null_unique_charfield_saves_null(self):\n304.         form_class = modelform_factory(model=NullableUniqueCharFieldModel, fields=[\'codename\'])\n305.         empty_value = \'\' if connection.features.interprets_empty_strings_as_nulls else None\n306. \n307.         form = form_class(data={\'codename\': \'\'})\n308.         self.assertTrue(form.is_valid())\n309.         form.save()\n310.         self.assertEqual(form.instance.codename, empty_value)\n311. \n312.         # Save a second form to verify there isn\'t a unique constraint violation.\n313.         form = form_class(data={\'codename\': \'\'})\n314.         self.assertTrue(form.is_valid())\n315.         form.save()\n316.         self.assertEqual(form.instance.codename, empty_value)\n317. \n318.     def test_missing_fields_attribute(self):\n319.         message = (\n320.             "Creating a ModelForm without either the \'fields\' attribute "\n321.             "or the \'exclude\' attribute is prohibited; form "\n322.             "MissingFieldsForm needs updating."\n323.         )\n324.         with self.assertRaisesMessage(ImproperlyConfigured, message):\n325.             class MissingFieldsForm(forms.ModelForm):\n326.                 class Meta:\n327.                     model = Category\n328. \n329.     def test_extra_fields(self):\n330.         class ExtraFields(BaseCategoryForm):\n331.             some_extra_field = forms.BooleanField()\n332. \n333.         self.assertEqual(list(ExtraFields.base_fields),\n334.                          [\'name\', \'slug\', \'url\', \'some_extra_field\'])\n335. \n336.     def test_extra_field_model_form(self):\n337.         with self.assertRaisesMessage(FieldError, \'no-field\'):\n338.             class ExtraPersonForm(forms.ModelForm):\n339.                 """ ModelForm with an extra field """\n340.                 age = forms.IntegerField()\n341. \n342.                 class Meta:\n343.                     model = Person\n344.                     fields = (\'name\', \'no-field\')\n345. \n346.     def test_extra_declared_field_model_form(self):\n347.         class ExtraPersonForm(forms.ModelForm):\n348.             """ ModelForm with an extra field """\n349.             age = forms.IntegerField()\n350. \n351.             class Meta:\n352.                 model = Person\n353.                 fields = (\'name\', \'age\')\n354. \n355.     def test_extra_field_modelform_factory(self):\n356.         with self.assertRaisesMessage(FieldError, \'Unknown field(s) (no-field) specified for Person\'):\n357.             modelform_factory(Person, fields=[\'no-field\', \'name\'])\n358. \n359.     def test_replace_field(self):\n360.         class ReplaceField(forms.ModelForm):\n361.             url = forms.BooleanField()\n362. \n363.             class Meta:\n364.                 model = Category\n365.                 fields = \'__all__\'\n366. \n367.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n368. \n369.     def test_replace_field_variant_2(self):\n370.         # Should have the same result as before,\n371.         # but \'fields\' attribute specified differently\n372.         class ReplaceField(forms.ModelForm):\n373.             url = forms.BooleanField()\n374. \n375.             class Meta:\n376.                 model = Category\n377.                 fields = [\'url\']\n378. \n379.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n380. \n381.     def test_replace_field_variant_3(self):\n382.         # Should have the same result as before,\n383.         # but \'fields\' attribute specified differently\n384.         class ReplaceField(forms.ModelForm):\n385.             url = forms.BooleanField()\n386. \n387.             class Meta:\n388.                 model = Category\n389.                 fields = []  # url will still appear, since it is explicit above\n390. \n391.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n392. \n393.     def test_override_field(self):\n394.         class WriterForm(forms.ModelForm):\n395.             book = forms.CharField(required=False)\n396. \n397.             class Meta:\n398.                 model = Writer\n399.                 fields = \'__all__\'\n400. \n401.         wf = WriterForm({\'name\': \'Richard Lockridge\'})\n402.         self.assertTrue(wf.is_valid())\n403. \n404.     def test_limit_nonexistent_field(self):\n405.         expected_msg = \'Unknown field(s) (nonexistent) specified for Category\'\n406.         with self.assertRaisesMessage(FieldError, expected_msg):\n407.             class InvalidCategoryForm(forms.ModelForm):\n408.                 class Meta:\n409.                     model = Category\n410.                     fields = [\'nonexistent\']\n411. \n412.     def test_limit_fields_with_string(self):\n413.         expected_msg = "CategoryForm.Meta.fields cannot be a string. Did you mean to type: (\'url\',)?"\n414.         with self.assertRaisesMessage(TypeError, expected_msg):\n415.             class CategoryForm(forms.ModelForm):\n416.                 class Meta:\n417.                     model = Category\n418.                     fields = (\'url\')  # note the missing comma\n419. \n420.     def test_exclude_fields(self):\n421.         class ExcludeFields(forms.ModelForm):\n422.             class Meta:\n423.                 model = Category\n424.                 exclude = [\'url\']\n425. \n426.         self.assertEqual(list(ExcludeFields.base_fields), [\'name\', \'slug\'])\n427. \n428.     def test_exclude_nonexistent_field(self):\n429.         class ExcludeFields(forms.ModelForm):\n430.             class Meta:\n431.                 model = Category\n432.                 exclude = [\'nonexistent\']\n433. \n434.         self.assertEqual(list(ExcludeFields.base_fields), [\'name\', \'slug\', \'url\'])\n435. \n436.     def test_exclude_fields_with_string(self):\n437.         expected_msg = "CategoryForm.Meta.exclude cannot be a string. Did you mean to type: (\'url\',)?"\n438.         with self.assertRaisesMessage(TypeError, expected_msg):\n439.             class CategoryForm(forms.ModelForm):\n440.                 class Meta:\n441.                     model = Category\n442.                     exclude = (\'url\')  # note the missing comma\n443. \n444.     def test_exclude_and_validation(self):\n445.         # This Price instance generated by this form is not valid because the quantity\n446.         # field is required, but the form is valid because the field is excluded from\n447.         # the form. This is for backwards compatibility.\n448.         class PriceFormWithoutQuantity(forms.ModelForm):\n449.             class Meta:\n450.                 model = Price\n451.                 exclude = (\'quantity\',)\n452. \n453.         form = PriceFormWithoutQuantity({\'price\': \'6.00\'})\n454.         self.assertTrue(form.is_valid())\n455.         price = form.save(commit=False)\n456.         msg = "{\'quantity\': [\'This field cannot be null.\']}"\n457.         with self.assertRaisesMessage(ValidationError, msg):\n458.             price.full_clean()\n459. \n460.         # The form should not validate fields that it doesn\'t contain even if they are\n461.         # specified using \'fields\', not \'exclude\'.\n462.         class PriceFormWithoutQuantity(forms.ModelForm):\n463.             class Meta:\n464.                 model = Price\n465.                 fields = (\'price\',)\n466.         form = PriceFormWithoutQuantity({\'price\': \'6.00\'})\n467.         self.assertTrue(form.is_valid())\n468. \n469.         # The form should still have an instance of a model that is not complete and\n470.         # not saved into a DB yet.\n471.         self.assertEqual(form.instance.price, Decimal(\'6.00\'))\n472.         self.assertIsNone(form.instance.quantity)\n473.         self.assertIsNone(form.instance.pk)\n474. \n475.     def test_confused_form(self):\n476.         class ConfusedForm(forms.ModelForm):\n477.             """ Using \'fields\' *and* \'exclude\'. Not sure why you\'d want to do\n478.             this, but uh, "be liberal in what you accept" and all.\n479.             """\n480.             class Meta:\n481.                 model = Category\n482.                 fields = [\'name\', \'url\']\n483.                 exclude = [\'url\']\n484. \n485.         self.assertEqual(list(ConfusedForm.base_fields),\n486.                          [\'name\'])\n487. \n488.     def test_mixmodel_form(self):\n489.         class MixModelForm(BaseCategoryForm):\n490.             """ Don\'t allow more than one \'model\' definition in the\n491.             inheritance hierarchy.  Technically, it would generate a valid\n492.             form, but the fact that the resulting save method won\'t deal with\n493.             multiple objects is likely to trip up people not familiar with the\n494.             mechanics.\n495.             """\n496.             class Meta:\n497.                 model = Article\n498.                 fields = \'__all__\'\n499.             # MixModelForm is now an Article-related thing, because MixModelForm.Meta\n500.             # overrides BaseCategoryForm.Meta.', start_line_number=1, end_line_number=500), Context(relative_path='tests/model_forms/models.py', content='1. import datetime\n2. import os\n3. import tempfile\n4. import uuid\n5. \n6. from django.core import validators\n7. from django.core.exceptions import ValidationError\n8. from django.core.files.storage import FileSystemStorage\n9. from django.db import models\n10. \n11. temp_storage_dir = tempfile.mkdtemp()\n12. temp_storage = FileSystemStorage(temp_storage_dir)\n13. \n14. \n15. class Person(models.Model):\n16.     name = models.CharField(max_length=100)\n17. \n18. \n19. class Category(models.Model):\n20.     name = models.CharField(max_length=20)\n21.     slug = models.SlugField(max_length=20)\n22.     url = models.CharField(\'The URL\', max_length=40)\n23. \n24.     def __str__(self):\n25.         return self.name\n26. \n27.     def __repr__(self):\n28.         return self.__str__()\n29. \n30. \n31. class WriterManager(models.Manager):\n32.     def get_queryset(self):\n33.         qs = super().get_queryset()\n34.         return qs.filter(archived=False)\n35. \n36. \n37. class Writer(models.Model):\n38.     name = models.CharField(max_length=50, help_text=\'Use both first and last names.\')\n39.     archived = models.BooleanField(default=False, editable=False)\n40. \n41.     objects = WriterManager()\n42. \n43.     class Meta:\n44.         ordering = (\'name\',)\n45. \n46.     def __str__(self):\n47.         return self.name\n48. \n49. \n50. class Article(models.Model):\n51.     ARTICLE_STATUS = (\n52.         (1, \'Draft\'),\n53.         (2, \'Pending\'),\n54.         (3, \'Live\'),\n55.     )\n56.     headline = models.CharField(max_length=50)\n57.     slug = models.SlugField()\n58.     pub_date = models.DateField()\n59.     created = models.DateField(editable=False)\n60.     writer = models.ForeignKey(Writer, models.CASCADE)\n61.     article = models.TextField()\n62.     categories = models.ManyToManyField(Category, blank=True)\n63.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)\n64. \n65.     def save(self, *args, **kwargs):\n66.         if not self.id:\n67.             self.created = datetime.date.today()\n68.         return super().save(*args, **kwargs)\n69. \n70.     def __str__(self):\n71.         return self.headline\n72. \n73. \n74. class ImprovedArticle(models.Model):\n75.     article = models.OneToOneField(Article, models.CASCADE)\n76. \n77. \n78. class ImprovedArticleWithParentLink(models.Model):\n79.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)\n80. \n81. \n82. class BetterWriter(Writer):\n83.     score = models.IntegerField()\n84. \n85. \n86. class Publication(models.Model):\n87.     title = models.CharField(max_length=30)\n88.     date_published = models.DateField()\n89. \n90.     def __str__(self):\n91.         return self.title\n92. \n93. \n94. def default_mode():\n95.     return \'di\'\n96. \n97. \n98. def default_category():\n99.     return 3\n100. \n101. \n102. class PublicationDefaults(models.Model):\n103.     MODE_CHOICES = ((\'di\', \'direct\'), (\'de\', \'delayed\'))\n104.     CATEGORY_CHOICES = ((1, \'Games\'), (2, \'Comics\'), (3, \'Novel\'))\n105.     title = models.CharField(max_length=30)\n106.     date_published = models.DateField(default=datetime.date.today)\n107.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))\n108.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)\n109.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)\n110.     active = models.BooleanField(default=True)\n111.     file = models.FileField(default=\'default.txt\')\n112. \n113. \n114. class Author(models.Model):\n115.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)\n116.     full_name = models.CharField(max_length=255)\n117. \n118. \n119. class Author1(models.Model):\n120.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)\n121.     full_name = models.CharField(max_length=255)\n122. \n123. \n124. class WriterProfile(models.Model):\n125.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)\n126.     age = models.PositiveIntegerField()\n127. \n128.     def __str__(self):\n129.         return "%s is %s" % (self.writer, self.age)\n130. \n131. \n132. class Document(models.Model):\n133.     myfile = models.FileField(upload_to=\'unused\', blank=True)\n134. \n135. \n136. class TextFile(models.Model):\n137.     description = models.CharField(max_length=20)\n138.     file = models.FileField(storage=temp_storage, upload_to=\'tests\', max_length=15)\n139. \n140.     def __str__(self):\n141.         return self.description\n142. \n143. \n144. class CustomFileField(models.FileField):\n145.     def save_form_data(self, instance, data):\n146.         been_here = getattr(self, \'been_saved\', False)\n147.         assert not been_here, "save_form_data called more than once"\n148.         setattr(self, \'been_saved\', True)\n149. \n150. \n151. class CustomFF(models.Model):\n152.     f = CustomFileField(upload_to=\'unused\', blank=True)\n153. \n154. \n155. class FilePathModel(models.Model):\n156.     path = models.FilePathField(path=os.path.dirname(__file__), match=\'models.py\', blank=True)\n157. \n158. \n159. try:\n160.     from PIL import Image  # NOQA: detect if Pillow is installed\n161. \n162.     test_images = True\n163. \n164.     class ImageFile(models.Model):\n165.         def custom_upload_path(self, filename):\n166.             path = self.path or \'tests\'\n167.             return \'%s/%s\' % (path, filename)\n168. \n169.         description = models.CharField(max_length=20)\n170. \n171.         # Deliberately put the image field *after* the width/height fields to\n172.         # trigger the bug in #10404 with width/height not getting assigned.\n173.         width = models.IntegerField(editable=False)\n174.         height = models.IntegerField(editable=False)\n175.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,\n176.                                   width_field=\'width\', height_field=\'height\')\n177.         path = models.CharField(max_length=16, blank=True, default=\'\')\n178. \n179.         def __str__(self):\n180.             return self.description\n181. \n182.     class OptionalImageFile(models.Model):\n183.         def custom_upload_path(self, filename):\n184.             path = self.path or \'tests\'\n185.             return \'%s/%s\' % (path, filename)\n186. \n187.         description = models.CharField(max_length=20)\n188.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,\n189.                                   width_field=\'width\', height_field=\'height\',\n190.                                   blank=True, null=True)\n191.         width = models.IntegerField(editable=False, null=True)\n192.         height = models.IntegerField(editable=False, null=True)\n193.         path = models.CharField(max_length=16, blank=True, default=\'\')\n194. \n195.         def __str__(self):\n196.             return self.description\n197. \n198.     class NoExtensionImageFile(models.Model):\n199.         def upload_to(self, filename):\n200.             return \'tests/no_extension\'\n201. \n202.         description = models.CharField(max_length=20)\n203.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)\n204. \n205.         def __str__(self):\n206.             return self.description\n207. \n208. except ImportError:\n209.     test_images = False\n210. \n211. \n212. class Homepage(models.Model):\n213.     url = models.URLField()\n214. \n215. \n216. class Product(models.Model):\n217.     slug = models.SlugField(unique=True)\n218. \n219.     def __str__(self):\n220.         return self.slug\n221. \n222. \n223. class Price(models.Model):\n224.     price = models.DecimalField(max_digits=10, decimal_places=2)\n225.     quantity = models.PositiveIntegerField()\n226. \n227.     class Meta:\n228.         unique_together = ((\'price\', \'quantity\'),)\n229. \n230.     def __str__(self):\n231.         return "%s for %s" % (self.quantity, self.price)\n232. \n233. \n234. class Triple(models.Model):\n235.     left = models.IntegerField()\n236.     middle = models.IntegerField()\n237.     right = models.IntegerField()\n238. \n239.     class Meta:\n240.         unique_together = ((\'left\', \'middle\'), (\'middle\', \'right\'))\n241. \n242. \n243. class ArticleStatus(models.Model):\n244.     ARTICLE_STATUS_CHAR = (\n245.         (\'d\', \'Draft\'),\n246.         (\'p\', \'Pending\'),\n247.         (\'l\', \'Live\'),\n248.     )\n249.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)\n250. \n251. \n252. class Inventory(models.Model):\n253.     barcode = models.PositiveIntegerField(unique=True)\n254.     parent = models.ForeignKey(\'self\', models.SET_NULL, to_field=\'barcode\', blank=True, null=True)\n255.     name = models.CharField(blank=False, max_length=20)\n256. \n257.     class Meta:\n258.         ordering = (\'name\',)\n259. \n260.     def __str__(self):\n261.         return self.name\n262. \n263.     def __repr__(self):\n264.         return self.__str__()\n265. \n266. \n267. class Book(models.Model):\n268.     title = models.CharField(max_length=40)\n269.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)\n270.     special_id = models.IntegerField(blank=True, null=True, unique=True)\n271. \n272.     class Meta:\n273.         unique_together = (\'title\', \'author\')\n274. \n275. \n276. class BookXtra(models.Model):\n277.     isbn = models.CharField(max_length=16, unique=True)\n278.     suffix1 = models.IntegerField(blank=True, default=0)\n279.     suffix2 = models.IntegerField(blank=True, default=0)\n280. \n281.     class Meta:\n282.         unique_together = ((\'suffix1\', \'suffix2\'))\n283.         abstract = True\n284. \n285. \n286. class DerivedBook(Book, BookXtra):\n287.     pass\n288. \n289. \n290. class ExplicitPK(models.Model):\n291.     key = models.CharField(max_length=20, primary_key=True)\n292.     desc = models.CharField(max_length=20, blank=True, unique=True)\n293. \n294.     class Meta:\n295.         unique_together = (\'key\', \'desc\')\n296. \n297.     def __str__(self):\n298.         return self.key\n299. \n300. \n301. class Post(models.Model):\n302.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n303.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n304.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n305.     posted = models.DateField()\n306. \n307.     def __str__(self):\n308.         return self.title\n309. \n310. \n311. class DateTimePost(models.Model):\n312.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n313.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n314.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n315.     posted = models.DateTimeField(editable=False)\n316. \n317.     def __str__(self):\n318.         return self.title\n319. \n320. \n321. class DerivedPost(Post):\n322.     pass\n323. \n324. \n325. class BigInt(models.Model):\n326.     biggie = models.BigIntegerField()\n327. \n328.     def __str__(self):\n329.         return str(self.biggie)\n330. \n331. \n332. class MarkupField(models.CharField):\n333.     def __init__(self, *args, **kwargs):\n334.         kwargs["max_length"] = 20\n335.         super().__init__(*args, **kwargs)\n336. \n337.     def formfield(self, **kwargs):\n338.         # don\'t allow this field to be used in form (real use-case might be\n339.         # that you know the markup will always be X, but it is among an app\n340.         # that allows the user to say it could be something else)\n341.         # regressed at r10062\n342.         return None\n343. \n344. \n345. class CustomFieldForExclusionModel(models.Model):\n346.     name = models.CharField(max_length=10)\n347.     markup = MarkupField()\n348. \n349. \n350. class FlexibleDatePost(models.Model):\n351.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n352.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n353.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n354.     posted = models.DateField(blank=True, null=True)\n355. \n356. \n357. class Colour(models.Model):\n358.     name = models.CharField(max_length=50)\n359. \n360.     def __iter__(self):\n361.         yield from range(5)\n362. \n363.     def __str__(self):\n364.         return self.name\n365. \n366. \n367. class ColourfulItem(models.Model):\n368.     name = models.CharField(max_length=50)\n369.     colours = models.ManyToManyField(Colour)\n370. \n371. \n372. class CustomErrorMessage(models.Model):\n373.     name1 = models.CharField(\n374.         max_length=50,\n375.         validators=[validators.validate_slug],\n376.         error_messages={\'invalid\': \'Model custom error message.\'},\n377.     )\n378.     name2 = models.CharField(\n379.         max_length=50,\n380.         validators=[validators.validate_slug],\n381.         error_messages={\'invalid\': \'Model custom error message.\'},\n382.     )\n383. \n384.     def clean(self):\n385.         if self.name1 == \'FORBIDDEN_VALUE\':\n386.             raise ValidationError({\'name1\': [ValidationError(\'Model.clean() error messages.\')]})\n387.         elif self.name1 == \'FORBIDDEN_VALUE2\':\n388.             raise ValidationError({\'name1\': \'Model.clean() error messages (simpler syntax).\'})\n389.         elif self.name1 == \'GLOBAL_ERROR\':\n390.             raise ValidationError("Global error message.")\n391. \n392. \n393. def today_callable_dict():\n394.     return {"last_action__gte": datetime.datetime.today()}\n395. \n396. \n397. def today_callable_q():\n398.     return models.Q(last_action__gte=datetime.datetime.today())\n399. \n400. \n401. class Character(models.Model):\n402.     username = models.CharField(max_length=100)\n403.     last_action = models.DateTimeField()\n404. \n405.     def __str__(self):\n406.         return self.username\n407. \n408. \n409. class StumpJoke(models.Model):\n410.     most_recently_fooled = models.ForeignKey(\n411.         Character,\n412.         models.CASCADE,\n413.         limit_choices_to=today_callable_dict,\n414.         related_name="+",\n415.     )\n416.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")\n417. \n418. \n419. # Model for #13776\n420. class Student(models.Model):\n421.     character = models.ForeignKey(Character, models.CASCADE)\n422.     study = models.CharField(max_length=30)\n423. \n424. \n425. # Model for #639\n426. class Photo(models.Model):\n427.     title = models.CharField(max_length=30)\n428.     image = models.FileField(storage=temp_storage, upload_to=\'tests\')\n429. \n430.     # Support code for the tests; this keeps track of how many times save()\n431.     # gets called on each instance.\n432.     def __init__(self, *args, **kwargs):\n433.         super().__init__(*args, **kwargs)\n434.         self._savecount = 0\n435. \n436.     def save(self, force_insert=False, force_update=False):\n437.         super().save(force_insert, force_update)\n438.         self._savecount += 1\n439. \n440. \n441. class UUIDPK(models.Model):\n442.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n443.     name = models.CharField(max_length=30)\n444. \n445. \n446. # Models for #24706\n447. class StrictAssignmentFieldSpecific(models.Model):\n448.     title = models.CharField(max_length=30)\n449.     _should_error = False\n450. \n451.     def __setattr__(self, key, value):\n452.         if self._should_error is True:\n453.             raise ValidationError(message={key: "Cannot set attribute"}, code=\'invalid\')\n454.         super().__setattr__(key, value)\n455. \n456. \n457. class StrictAssignmentAll(models.Model):\n458.     title = models.CharField(max_length=30)\n459.     _should_error = False\n460. \n461.     def __setattr__(self, key, value):\n462.         if self._should_error is True:\n463.             raise ValidationError(message="Cannot set attribute", code=\'invalid\')\n464.         super().__setattr__(key, value)\n465. \n466. \n467. # A model with ForeignKey(blank=False, null=True)\n468. class Award(models.Model):\n469.     name = models.CharField(max_length=30)\n470.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)\n471. \n472. \n473. class NullableUniqueCharFieldModel(models.Model):\n474.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)', start_line_number=1, end_line_number=474), Context(relative_path='tests/queries/test_qs_combinators.py', content="1. import operator\n2. \n3. from django.db import DatabaseError, NotSupportedError, connection\n4. from django.db.models import Exists, F, IntegerField, OuterRef, Value\n5. from django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature\n6. \n7. from .models import Number, ReservedName\n8. \n9. \n10. @skipUnlessDBFeature('supports_select_union')\n11. class QuerySetSetOperationTests(TestCase):\n12.     @classmethod\n13.     def setUpTestData(cls):\n14.         Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))\n15. \n16.     def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):\n17.         self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter('num'), ordered)\n18. \n19.     def test_simple_union(self):\n20.         qs1 = Number.objects.filter(num__lte=1)\n21.         qs2 = Number.objects.filter(num__gte=8)\n22.         qs3 = Number.objects.filter(num=5)\n23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)\n24. \n25.     @skipUnlessDBFeature('supports_select_intersection')\n26.     def test_simple_intersection(self):\n27.         qs1 = Number.objects.filter(num__lte=5)\n28.         qs2 = Number.objects.filter(num__gte=5)\n29.         qs3 = Number.objects.filter(num__gte=4, num__lte=6)\n30.         self.assertNumbersEqual(qs1.intersection(qs2, qs3), [5], ordered=False)\n31. \n32.     @skipUnlessDBFeature('supports_select_intersection')\n33.     def test_intersection_with_values(self):\n34.         ReservedName.objects.create(name='a', order=2)\n35.         qs1 = ReservedName.objects.all()\n36.         reserved_name = qs1.intersection(qs1).values('name', 'order', 'id').get()\n37.         self.assertEqual(reserved_name['name'], 'a')\n38.         self.assertEqual(reserved_name['order'], 2)\n39.         reserved_name = qs1.intersection(qs1).values_list('name', 'order', 'id').get()\n40.         self.assertEqual(reserved_name[:2], ('a', 2))\n41. \n42.     @skipUnlessDBFeature('supports_select_difference')\n43.     def test_simple_difference(self):\n44.         qs1 = Number.objects.filter(num__lte=5)\n45.         qs2 = Number.objects.filter(num__lte=4)\n46.         self.assertNumbersEqual(qs1.difference(qs2), [5], ordered=False)\n47. \n48.     def test_union_distinct(self):\n49.         qs1 = Number.objects.all()\n50.         qs2 = Number.objects.all()\n51.         self.assertEqual(len(list(qs1.union(qs2, all=True))), 20)\n52.         self.assertEqual(len(list(qs1.union(qs2))), 10)\n53. \n54.     @skipUnlessDBFeature('supports_select_intersection')\n55.     def test_intersection_with_empty_qs(self):\n56.         qs1 = Number.objects.all()\n57.         qs2 = Number.objects.none()\n58.         qs3 = Number.objects.filter(pk__in=[])\n59.         self.assertEqual(len(qs1.intersection(qs2)), 0)\n60.         self.assertEqual(len(qs1.intersection(qs3)), 0)\n61.         self.assertEqual(len(qs2.intersection(qs1)), 0)\n62.         self.assertEqual(len(qs3.intersection(qs1)), 0)\n63.         self.assertEqual(len(qs2.intersection(qs2)), 0)\n64.         self.assertEqual(len(qs3.intersection(qs3)), 0)\n65. \n66.     @skipUnlessDBFeature('supports_select_difference')\n67.     def test_difference_with_empty_qs(self):\n68.         qs1 = Number.objects.all()\n69.         qs2 = Number.objects.none()\n70.         qs3 = Number.objects.filter(pk__in=[])\n71.         self.assertEqual(len(qs1.difference(qs2)), 10)\n72.         self.assertEqual(len(qs1.difference(qs3)), 10)\n73.         self.assertEqual(len(qs2.difference(qs1)), 0)\n74.         self.assertEqual(len(qs3.difference(qs1)), 0)\n75.         self.assertEqual(len(qs2.difference(qs2)), 0)\n76.         self.assertEqual(len(qs3.difference(qs3)), 0)\n77. \n78.     @skipUnlessDBFeature('supports_select_difference')\n79.     def test_difference_with_values(self):\n80.         ReservedName.objects.create(name='a', order=2)\n81.         qs1 = ReservedName.objects.all()\n82.         qs2 = ReservedName.objects.none()\n83.         reserved_name = qs1.difference(qs2).values('name', 'order', 'id').get()\n84.         self.assertEqual(reserved_name['name'], 'a')\n85.         self.assertEqual(reserved_name['order'], 2)\n86.         reserved_name = qs1.difference(qs2).values_list('name', 'order', 'id').get()\n87.         self.assertEqual(reserved_name[:2], ('a', 2))\n88. \n89.     def test_union_with_empty_qs(self):\n90.         qs1 = Number.objects.all()\n91.         qs2 = Number.objects.none()\n92.         qs3 = Number.objects.filter(pk__in=[])\n93.         self.assertEqual(len(qs1.union(qs2)), 10)\n94.         self.assertEqual(len(qs2.union(qs1)), 10)\n95.         self.assertEqual(len(qs1.union(qs3)), 10)\n96.         self.assertEqual(len(qs3.union(qs1)), 10)\n97.         self.assertEqual(len(qs2.union(qs1, qs1, qs1)), 10)\n98.         self.assertEqual(len(qs2.union(qs1, qs1, all=True)), 20)\n99.         self.assertEqual(len(qs2.union(qs2)), 0)\n100.         self.assertEqual(len(qs3.union(qs3)), 0)\n101. \n102.     def test_limits(self):\n103.         qs1 = Number.objects.all()\n104.         qs2 = Number.objects.all()\n105.         self.assertEqual(len(list(qs1.union(qs2)[:2])), 2)\n106. \n107.     def test_ordering(self):\n108.         qs1 = Number.objects.filter(num__lte=1)\n109.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n110.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num'), [3, 2, 1, 0])\n111. \n112.     def test_ordering_by_alias(self):\n113.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('num'))\n114.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('num'))\n115.         self.assertQuerysetEqual(\n116.             qs1.union(qs2).order_by('-alias'),\n117.             [3, 2, 1, 0],\n118.             operator.itemgetter('alias'),\n119.         )\n120. \n121.     def test_ordering_by_f_expression(self):\n122.         qs1 = Number.objects.filter(num__lte=1)\n123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F('num').desc()), [3, 2, 1, 0])\n125. \n126.     def test_ordering_by_f_expression_and_alias(self):\n127.         qs1 = Number.objects.filter(num__lte=1).values(alias=F('other_num'))\n128.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F('other_num'))\n129.         self.assertQuerysetEqual(\n130.             qs1.union(qs2).order_by(F('alias').desc()),\n131.             [10, 9, 8, 7],\n132.             operator.itemgetter('alias'),\n133.         )\n134.         Number.objects.create(num=-1)\n135.         self.assertQuerysetEqual(\n136.             qs1.union(qs2).order_by(F('alias').desc(nulls_last=True)),\n137.             [10, 9, 8, 7, None],\n138.             operator.itemgetter('alias'),\n139.         )\n140. \n141.     def test_union_with_values(self):\n142.         ReservedName.objects.create(name='a', order=2)\n143.         qs1 = ReservedName.objects.all()\n144.         reserved_name = qs1.union(qs1).values('name', 'order', 'id').get()\n145.         self.assertEqual(reserved_name['name'], 'a')\n146.         self.assertEqual(reserved_name['order'], 2)\n147.         reserved_name = qs1.union(qs1).values_list('name', 'order', 'id').get()\n148.         self.assertEqual(reserved_name[:2], ('a', 2))\n149.         # List of columns can be changed.\n150.         reserved_name = qs1.union(qs1).values_list('order').get()\n151.         self.assertEqual(reserved_name, (2,))\n152. \n153.     def test_union_with_two_annotated_values_list(self):\n154.         qs1 = Number.objects.filter(num=1).annotate(\n155.             count=Value(0, IntegerField()),\n156.         ).values_list('num', 'count')\n157.         qs2 = Number.objects.filter(num=2).values('pk').annotate(\n158.             count=F('num'),\n159.         ).annotate(\n160.             num=Value(1, IntegerField()),\n161.         ).values_list('num', 'count')\n162.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])\n163. \n164.     def test_union_with_extra_and_values_list(self):\n165.         qs1 = Number.objects.filter(num=1).extra(\n166.             select={'count': 0},\n167.         ).values_list('num', 'count')\n168.         qs2 = Number.objects.filter(num=2).extra(select={'count': 1})\n169.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])\n170. \n171.     def test_union_with_values_list_on_annotated_and_unannotated(self):\n172.         ReservedName.objects.create(name='rn1', order=1)\n173.         qs1 = Number.objects.annotate(\n174.             has_reserved_name=Exists(ReservedName.objects.filter(order=OuterRef('num')))\n175.         ).filter(has_reserved_name=True)\n176.         qs2 = Number.objects.filter(num=9)\n177.         self.assertCountEqual(qs1.union(qs2).values_list('num', flat=True), [1, 9])\n178. \n179.     def test_union_with_values_list_and_order(self):\n180.         ReservedName.objects.bulk_create([\n181.             ReservedName(name='rn1', order=7),\n182.             ReservedName(name='rn2', order=5),\n183.             ReservedName(name='rn0', order=6),\n184.             ReservedName(name='rn9', order=-1),\n185.         ])\n186.         qs1 = ReservedName.objects.filter(order__gte=6)\n187.         qs2 = ReservedName.objects.filter(order__lte=5)\n188.         union_qs = qs1.union(qs2)\n189.         for qs, expected_result in (\n190.             # Order by a single column.\n191.             (union_qs.order_by('-pk').values_list('order', flat=True), [-1, 6, 5, 7]),\n192.             (union_qs.order_by('pk').values_list('order', flat=True), [7, 5, 6, -1]),\n193.             (union_qs.values_list('order', flat=True).order_by('-pk'), [-1, 6, 5, 7]),\n194.             (union_qs.values_list('order', flat=True).order_by('pk'), [7, 5, 6, -1]),\n195.             # Order by multiple columns.\n196.             (union_qs.order_by('-name', 'pk').values_list('order', flat=True), [-1, 5, 7, 6]),\n197.             (union_qs.values_list('order', flat=True).order_by('-name', 'pk'), [-1, 5, 7, 6]),\n198.         ):\n199.             with self.subTest(qs=qs):\n200.                 self.assertEqual(list(qs), expected_result)\n201. \n202.     def test_count_union(self):\n203.         qs1 = Number.objects.filter(num__lte=1).values('num')\n204.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values('num')\n205.         self.assertEqual(qs1.union(qs2).count(), 4)\n206. \n207.     def test_count_union_empty_result(self):\n208.         qs = Number.objects.filter(pk__in=[])\n209.         self.assertEqual(qs.union(qs).count(), 0)\n210. \n211.     @skipUnlessDBFeature('supports_select_difference')\n212.     def test_count_difference(self):\n213.         qs1 = Number.objects.filter(num__lt=10)\n214.         qs2 = Number.objects.filter(num__lt=9)\n215.         self.assertEqual(qs1.difference(qs2).count(), 1)\n216. \n217.     @skipUnlessDBFeature('supports_select_intersection')\n218.     def test_count_intersection(self):\n219.         qs1 = Number.objects.filter(num__gte=5)\n220.         qs2 = Number.objects.filter(num__lte=5)\n221.         self.assertEqual(qs1.intersection(qs2).count(), 1)\n222. \n223.     @skipUnlessDBFeature('supports_slicing_ordering_in_compound')\n224.     def test_ordering_subqueries(self):\n225.         qs1 = Number.objects.order_by('num')[:2]\n226.         qs2 = Number.objects.order_by('-num')[:2]\n227.         self.assertNumbersEqual(qs1.union(qs2).order_by('-num')[:4], [9, 8, 1, 0])\n228. \n229.     @skipIfDBFeature('supports_slicing_ordering_in_compound')\n230.     def test_unsupported_ordering_slicing_raises_db_error(self):\n231.         qs1 = Number.objects.all()\n232.         qs2 = Number.objects.all()\n233.         msg = 'LIMIT/OFFSET not allowed in subqueries of compound statements'\n234.         with self.assertRaisesMessage(DatabaseError, msg):\n235.             list(qs1.union(qs2[:10]))\n236.         msg = 'ORDER BY not allowed in subqueries of compound statements'\n237.         with self.assertRaisesMessage(DatabaseError, msg):\n238.             list(qs1.order_by('id').union(qs2))\n239. \n240.     @skipIfDBFeature('supports_select_intersection')\n241.     def test_unsupported_intersection_raises_db_error(self):\n242.         qs1 = Number.objects.all()\n243.         qs2 = Number.objects.all()\n244.         msg = 'intersection is not supported on this database backend'\n245.         with self.assertRaisesMessage(NotSupportedError, msg):\n246.             list(qs1.intersection(qs2))\n247. \n248.     def test_combining_multiple_models(self):\n249.         ReservedName.objects.create(name='99 little bugs', order=99)\n250.         qs1 = Number.objects.filter(num=1).values_list('num', flat=True)\n251.         qs2 = ReservedName.objects.values_list('order')\n252.         self.assertEqual(list(qs1.union(qs2).order_by('num')), [1, 99])\n253. \n254.     def test_order_raises_on_non_selected_column(self):\n255.         qs1 = Number.objects.filter().annotate(\n256.             annotation=Value(1, IntegerField()),\n257.         ).values('annotation', num2=F('num'))\n258.         qs2 = Number.objects.filter().values('id', 'num')\n259.         # Should not raise\n260.         list(qs1.union(qs2).order_by('annotation'))\n261.         list(qs1.union(qs2).order_by('num2'))\n262.         msg = 'ORDER BY term does not match any column in the result set'\n263.         # 'id' is not part of the select\n264.         with self.assertRaisesMessage(DatabaseError, msg):\n265.             list(qs1.union(qs2).order_by('id'))\n266.         # 'num' got realiased to num2\n267.         with self.assertRaisesMessage(DatabaseError, msg):\n268.             list(qs1.union(qs2).order_by('num'))\n269.         with self.assertRaisesMessage(DatabaseError, msg):\n270.             list(qs1.union(qs2).order_by(F('num')))\n271.         with self.assertRaisesMessage(DatabaseError, msg):\n272.             list(qs1.union(qs2).order_by(F('num').desc()))\n273.         # switched order, now 'exists' again:\n274.         list(qs2.union(qs1).order_by('num'))\n275. \n276.     @skipUnlessDBFeature('supports_select_difference', 'supports_select_intersection')\n277.     def test_qs_with_subcompound_qs(self):\n278.         qs1 = Number.objects.all()\n279.         qs2 = Number.objects.intersection(Number.objects.filter(num__gt=1))\n280.         self.assertEqual(qs1.difference(qs2).count(), 2)\n281. \n282.     def test_order_by_same_type(self):\n283.         qs = Number.objects.all()\n284.         union = qs.union(qs)\n285.         numbers = list(range(10))\n286.         self.assertNumbersEqual(union.order_by('num'), numbers)\n287.         self.assertNumbersEqual(union.order_by('other_num'), reversed(numbers))\n288. \n289.     def test_unsupported_operations_on_combined_qs(self):\n290.         qs = Number.objects.all()\n291.         msg = 'Calling QuerySet.%s() after %s() is not supported.'\n292.         combinators = ['union']\n293.         if connection.features.supports_select_difference:\n294.             combinators.append('difference')\n295.         if connection.features.supports_select_intersection:\n296.             combinators.append('intersection')\n297.         for combinator in combinators:\n298.             for operation in (\n299.                 'annotate',\n300.                 'defer',\n301.                 'delete',\n302.                 'distinct',\n303.                 'exclude',\n304.                 'extra',\n305.                 'filter',\n306.                 'only',\n307.                 'prefetch_related',\n308.                 'select_related',\n309.                 'update',\n310.             ):\n311.                 with self.subTest(combinator=combinator, operation=operation):\n312.                     with self.assertRaisesMessage(\n313.                         NotSupportedError,\n314.                         msg % (operation, combinator),\n315.                     ):\n316.                         getattr(getattr(qs, combinator)(qs), operation)()", start_line_number=1, end_line_number=316), Context(relative_path='tests/queries/models.py', content='1. """\n2. Various complex queries that have been problematic in the past.\n3. """\n4. from django.db import models\n5. from django.db.models.functions import Now\n6. \n7. \n8. class DumbCategory(models.Model):\n9.     pass\n10. \n11. \n12. class ProxyCategory(DumbCategory):\n13.     class Meta:\n14.         proxy = True\n15. \n16. \n17. class NamedCategory(DumbCategory):\n18.     name = models.CharField(max_length=10)\n19. \n20.     def __str__(self):\n21.         return self.name\n22. \n23. \n24. class Tag(models.Model):\n25.     name = models.CharField(max_length=10)\n26.     parent = models.ForeignKey(\n27.         \'self\',\n28.         models.SET_NULL,\n29.         blank=True, null=True,\n30.         related_name=\'children\',\n31.     )\n32.     category = models.ForeignKey(NamedCategory, models.SET_NULL, null=True, default=None)\n33. \n34.     class Meta:\n35.         ordering = [\'name\']\n36. \n37.     def __str__(self):\n38.         return self.name\n39. \n40. \n41. class Note(models.Model):\n42.     note = models.CharField(max_length=100)\n43.     misc = models.CharField(max_length=10)\n44.     tag = models.ForeignKey(Tag, models.SET_NULL, blank=True, null=True)\n45. \n46.     class Meta:\n47.         ordering = [\'note\']\n48. \n49.     def __str__(self):\n50.         return self.note\n51. \n52. \n53. class Annotation(models.Model):\n54.     name = models.CharField(max_length=10)\n55.     tag = models.ForeignKey(Tag, models.CASCADE)\n56.     notes = models.ManyToManyField(Note)\n57. \n58.     def __str__(self):\n59.         return self.name\n60. \n61. \n62. class DateTimePK(models.Model):\n63.     date = models.DateTimeField(primary_key=True, auto_now_add=True)\n64. \n65. \n66. class ExtraInfo(models.Model):\n67.     info = models.CharField(max_length=100)\n68.     note = models.ForeignKey(Note, models.CASCADE, null=True)\n69.     value = models.IntegerField(null=True)\n70.     date = models.ForeignKey(DateTimePK, models.SET_NULL, null=True)\n71.     filterable = models.BooleanField(default=True)\n72. \n73.     class Meta:\n74.         ordering = [\'info\']\n75. \n76.     def __str__(self):\n77.         return self.info\n78. \n79. \n80. class Author(models.Model):\n81.     name = models.CharField(max_length=10)\n82.     num = models.IntegerField(unique=True)\n83.     extra = models.ForeignKey(ExtraInfo, models.CASCADE)\n84. \n85.     class Meta:\n86.         ordering = [\'name\']\n87. \n88.     def __str__(self):\n89.         return self.name\n90. \n91. \n92. class Item(models.Model):\n93.     name = models.CharField(max_length=10)\n94.     created = models.DateTimeField()\n95.     modified = models.DateTimeField(blank=True, null=True)\n96.     tags = models.ManyToManyField(Tag, blank=True)\n97.     creator = models.ForeignKey(Author, models.CASCADE)\n98.     note = models.ForeignKey(Note, models.CASCADE)\n99. \n100.     class Meta:\n101.         ordering = [\'-note\', \'name\']\n102. \n103.     def __str__(self):\n104.         return self.name\n105. \n106. \n107. class Report(models.Model):\n108.     name = models.CharField(max_length=10)\n109.     creator = models.ForeignKey(Author, models.SET_NULL, to_field=\'num\', null=True)\n110. \n111.     def __str__(self):\n112.         return self.name\n113. \n114. \n115. class ReportComment(models.Model):\n116.     report = models.ForeignKey(Report, models.CASCADE)\n117. \n118. \n119. class Ranking(models.Model):\n120.     rank = models.IntegerField()\n121.     author = models.ForeignKey(Author, models.CASCADE)\n122. \n123.     class Meta:\n124.         # A complex ordering specification. Should stress the system a bit.\n125.         ordering = (\'author__extra__note\', \'author__name\', \'rank\')\n126. \n127.     def __str__(self):\n128.         return \'%d: %s\' % (self.rank, self.author.name)\n129. \n130. \n131. class Cover(models.Model):\n132.     title = models.CharField(max_length=50)\n133.     item = models.ForeignKey(Item, models.CASCADE)\n134. \n135.     class Meta:\n136.         ordering = [\'item\']\n137. \n138.     def __str__(self):\n139.         return self.title\n140. \n141. \n142. class Number(models.Model):\n143.     num = models.IntegerField()\n144.     other_num = models.IntegerField(null=True)\n145.     another_num = models.IntegerField(null=True)\n146. \n147.     def __str__(self):\n148.         return str(self.num)\n149. \n150. # Symmetrical m2m field with a normal field using the reverse accessor name\n151. # ("valid").\n152. \n153. \n154. class Valid(models.Model):\n155.     valid = models.CharField(max_length=10)\n156.     parent = models.ManyToManyField(\'self\')\n157. \n158.     class Meta:\n159.         ordering = [\'valid\']\n160. \n161. # Some funky cross-linked models for testing a couple of infinite recursion\n162. # cases.\n163. \n164. \n165. class X(models.Model):\n166.     y = models.ForeignKey(\'Y\', models.CASCADE)\n167. \n168. \n169. class Y(models.Model):\n170.     x1 = models.ForeignKey(X, models.CASCADE, related_name=\'y1\')\n171. \n172. # Some models with a cycle in the default ordering. This would be bad if we\n173. # didn\'t catch the infinite loop.\n174. \n175. \n176. class LoopX(models.Model):\n177.     y = models.ForeignKey(\'LoopY\', models.CASCADE)\n178. \n179.     class Meta:\n180.         ordering = [\'y\']\n181. \n182. \n183. class LoopY(models.Model):\n184.     x = models.ForeignKey(LoopX, models.CASCADE)\n185. \n186.     class Meta:\n187.         ordering = [\'x\']\n188. \n189. \n190. class LoopZ(models.Model):\n191.     z = models.ForeignKey(\'self\', models.CASCADE)\n192. \n193.     class Meta:\n194.         ordering = [\'z\']\n195. \n196. \n197. # A model and custom default manager combination.\n198. \n199. \n200. class CustomManager(models.Manager):\n201.     def get_queryset(self):\n202.         qs = super().get_queryset()\n203.         return qs.filter(public=True, tag__name=\'t1\')\n204. \n205. \n206. class ManagedModel(models.Model):\n207.     data = models.CharField(max_length=10)\n208.     tag = models.ForeignKey(Tag, models.CASCADE)\n209.     public = models.BooleanField(default=True)\n210. \n211.     objects = CustomManager()\n212.     normal_manager = models.Manager()\n213. \n214.     def __str__(self):\n215.         return self.data\n216. \n217. # An inter-related setup with multiple paths from Child to Detail.\n218. \n219. \n220. class Detail(models.Model):\n221.     data = models.CharField(max_length=10)\n222. \n223. \n224. class MemberManager(models.Manager):\n225.     def get_queryset(self):\n226.         return super().get_queryset().select_related("details")\n227. \n228. \n229. class Member(models.Model):\n230.     name = models.CharField(max_length=10)\n231.     details = models.OneToOneField(Detail, models.CASCADE, primary_key=True)\n232. \n233.     objects = MemberManager()\n234. \n235. \n236. class Child(models.Model):\n237.     person = models.OneToOneField(Member, models.CASCADE, primary_key=True)\n238.     parent = models.ForeignKey(Member, models.CASCADE, related_name="children")\n239. \n240. # Custom primary keys interfered with ordering in the past.\n241. \n242. \n243. class CustomPk(models.Model):\n244.     name = models.CharField(max_length=10, primary_key=True)\n245.     extra = models.CharField(max_length=10)\n246. \n247.     class Meta:\n248.         ordering = [\'name\', \'extra\']\n249. \n250. \n251. class Related(models.Model):\n252.     custom = models.ForeignKey(CustomPk, models.CASCADE, null=True)\n253. \n254. \n255. class CustomPkTag(models.Model):\n256.     id = models.CharField(max_length=20, primary_key=True)\n257.     custom_pk = models.ManyToManyField(CustomPk)\n258.     tag = models.CharField(max_length=20)\n259. \n260. # An inter-related setup with a model subclass that has a nullable\n261. # path to another model, and a return path from that model.\n262. \n263. \n264. class Celebrity(models.Model):\n265.     name = models.CharField("Name", max_length=20)\n266.     greatest_fan = models.ForeignKey("Fan", models.SET_NULL, null=True, unique=True)\n267. \n268.     def __str__(self):\n269.         return self.name\n270. \n271. \n272. class TvChef(Celebrity):\n273.     pass\n274. \n275. \n276. class Fan(models.Model):\n277.     fan_of = models.ForeignKey(Celebrity, models.CASCADE)\n278. \n279. # Multiple foreign keys\n280. \n281. \n282. class LeafA(models.Model):\n283.     data = models.CharField(max_length=10)\n284. \n285.     def __str__(self):\n286.         return self.data\n287. \n288. \n289. class LeafB(models.Model):\n290.     data = models.CharField(max_length=10)\n291. \n292. \n293. class Join(models.Model):\n294.     a = models.ForeignKey(LeafA, models.CASCADE)\n295.     b = models.ForeignKey(LeafB, models.CASCADE)\n296. \n297. \n298. class ReservedName(models.Model):\n299.     name = models.CharField(max_length=20)\n300.     order = models.IntegerField()\n301. \n302.     def __str__(self):\n303.         return self.name\n304. \n305. # A simpler shared-foreign-key setup that can expose some problems.\n306. \n307. \n308. class SharedConnection(models.Model):\n309.     data = models.CharField(max_length=10)\n310. \n311.     def __str__(self):\n312.         return self.data\n313. \n314. \n315. class PointerA(models.Model):\n316.     connection = models.ForeignKey(SharedConnection, models.CASCADE)\n317. \n318. \n319. class PointerB(models.Model):\n320.     connection = models.ForeignKey(SharedConnection, models.CASCADE)\n321. \n322. # Multi-layer ordering\n323. \n324. \n325. class SingleObject(models.Model):\n326.     name = models.CharField(max_length=10)\n327. \n328.     class Meta:\n329.         ordering = [\'name\']\n330. \n331.     def __str__(self):\n332.         return self.name\n333. \n334. \n335. class RelatedObject(models.Model):\n336.     single = models.ForeignKey(SingleObject, models.SET_NULL, null=True)\n337.     f = models.IntegerField(null=True)\n338. \n339.     class Meta:\n340.         ordering = [\'single\']\n341. \n342. \n343. class Plaything(models.Model):\n344.     name = models.CharField(max_length=10)\n345.     others = models.ForeignKey(RelatedObject, models.SET_NULL, null=True)\n346. \n347.     class Meta:\n348.         ordering = [\'others\']\n349. \n350.     def __str__(self):\n351.         return self.name\n352. \n353. \n354. class Article(models.Model):\n355.     name = models.CharField(max_length=20)\n356.     created = models.DateTimeField()\n357. \n358.     def __str__(self):\n359.         return self.name\n360. \n361. \n362. class Food(models.Model):\n363.     name = models.CharField(max_length=20, unique=True)\n364. \n365.     def __str__(self):\n366.         return self.name\n367. \n368. \n369. class Eaten(models.Model):\n370.     food = models.ForeignKey(Food, models.SET_NULL, to_field="name", null=True)\n371.     meal = models.CharField(max_length=20)\n372. \n373.     def __str__(self):\n374.         return "%s at %s" % (self.food, self.meal)\n375. \n376. \n377. class Node(models.Model):\n378.     num = models.IntegerField(unique=True)\n379.     parent = models.ForeignKey("self", models.SET_NULL, to_field="num", null=True)\n380. \n381.     def __str__(self):\n382.         return str(self.num)\n383. \n384. # Bug #12252\n385. \n386. \n387. class ObjectA(models.Model):\n388.     name = models.CharField(max_length=50)\n389. \n390.     def __str__(self):\n391.         return self.name\n392. \n393.     def __iter__(self):\n394.         # Ticket #23721\n395.         assert False, \'type checking should happen without calling model __iter__\'\n396. \n397. \n398. class ProxyObjectA(ObjectA):\n399.     class Meta:\n400.         proxy = True\n401. \n402. \n403. class ChildObjectA(ObjectA):\n404.     pass\n405. \n406. \n407. class ObjectB(models.Model):\n408.     name = models.CharField(max_length=50)\n409.     objecta = models.ForeignKey(ObjectA, models.CASCADE)\n410.     num = models.PositiveSmallIntegerField()\n411. \n412.     def __str__(self):\n413.         return self.name\n414. \n415. \n416. class ProxyObjectB(ObjectB):\n417.     class Meta:\n418.         proxy = True\n419. \n420. \n421. class ObjectC(models.Model):\n422.     name = models.CharField(max_length=50)\n423.     objecta = models.ForeignKey(ObjectA, models.SET_NULL, null=True)\n424.     objectb = models.ForeignKey(ObjectB, models.SET_NULL, null=True)\n425.     childobjecta = models.ForeignKey(ChildObjectA, models.SET_NULL, null=True, related_name=\'ca_pk\')\n426. \n427.     def __str__(self):\n428.         return self.name\n429. \n430. \n431. class SimpleCategory(models.Model):\n432.     name = models.CharField(max_length=15)\n433. \n434.     def __str__(self):\n435.         return self.name\n436. \n437. \n438. class SpecialCategory(SimpleCategory):\n439.     special_name = models.CharField(max_length=15)\n440. \n441.     def __str__(self):\n442.         return self.name + " " + self.special_name\n443. \n444. \n445. class CategoryItem(models.Model):\n446.     category = models.ForeignKey(SimpleCategory, models.CASCADE)\n447. \n448.     def __str__(self):\n449.         return "category item: " + str(self.category)\n450. \n451. \n452. class MixedCaseFieldCategoryItem(models.Model):\n453.     CaTeGoRy = models.ForeignKey(SimpleCategory, models.CASCADE)\n454. \n455. \n456. class MixedCaseDbColumnCategoryItem(models.Model):\n457.     category = models.ForeignKey(SimpleCategory, models.CASCADE, db_column=\'CaTeGoRy_Id\')\n458. \n459. \n460. class OneToOneCategory(models.Model):\n461.     new_name = models.CharField(max_length=15)\n462.     category = models.OneToOneField(SimpleCategory, models.CASCADE)\n463. \n464.     def __str__(self):\n465.         return "one2one " + self.new_name\n466. \n467. \n468. class CategoryRelationship(models.Model):\n469.     first = models.ForeignKey(SimpleCategory, models.CASCADE, related_name=\'first_rel\')\n470.     second = models.ForeignKey(SimpleCategory, models.CASCADE, related_name=\'second_rel\')\n471. \n472. \n473. class CommonMixedCaseForeignKeys(models.Model):\n474.     category = models.ForeignKey(CategoryItem, models.CASCADE)\n475.     mixed_case_field_category = models.ForeignKey(MixedCaseFieldCategoryItem, models.CASCADE)\n476.     mixed_case_db_column_category = models.ForeignKey(MixedCaseDbColumnCategoryItem, models.CASCADE)\n477. \n478. \n479. class NullableName(models.Model):\n480.     name = models.CharField(max_length=20, null=True)\n481. \n482.     class Meta:\n483.         ordering = [\'id\']\n484. \n485. \n486. class ModelD(models.Model):\n487.     name = models.TextField()\n488. \n489. \n490. class ModelC(models.Model):\n491.     name = models.TextField()\n492. \n493. \n494. class ModelB(models.Model):\n495.     name = models.TextField()\n496.     c = models.ForeignKey(ModelC, models.CASCADE)\n497. \n498. \n499. class ModelA(models.Model):\n500.     name = models.TextField()', start_line_number=1, end_line_number=500)]
2025-10-06 19:53:07,026 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Issue title:\nQuerySet.none() on combined queries returns all results.\n\nIssue description: \nDescription\n\t\nI came across this issue on Stack Overflow. I\'m not 100% sure it\'s a bug, but it does seem strange. With this code (excuse the bizarre example filtering):\nclass Publication(models.Model):\n\tpass\nclass Article(models.Model):\n\tpublications = models.ManyToManyField(to=Publication, blank=True, null=True)\nclass ArticleForm(forms.ModelForm):\n\tpublications = forms.ModelMultipleChoiceField(\n\t\tPublication.objects.filter(id__lt=2) | Publication.objects.filter(id__gt=5),\n\t\trequired=False,\n\t)\n\tclass Meta:\n\t\tmodel = Article\n\t\tfields = ["publications"]\nclass ArticleAdmin(admin.ModelAdmin):\n\tform = ArticleForm\nThis works well. However, changing the ModelMultipleChoiceField queryset to use union() breaks things.\npublications = forms.ModelMultipleChoiceField(\n\tPublication.objects.filter(id__lt=2).union(\n\t\tPublication.objects.filter(id__gt=5)\n\t),\n\trequired=False,\n)\nThe form correctly shows only the matching objects. However, if you submit this form while empty (i.e. you didn\'t select any publications), ALL objects matching the queryset will be added. Using the OR query, NO objects are added, as I\'d expect.\n\nIssue comments:\n\n\nBug reproducing context:\nFile: tests/model_forms/tests.py\nLine number range: 1755 - 1760\nContent:\n1755.     def test_model_multiple_choice_required_false(self):\n1756.         f = forms.ModelMultipleChoiceField(Category.objects.all(), required=False)\n1757.         self.assertIsInstance(f.clean([]), EmptyQuerySet)\n1758.         self.assertIsInstance(f.clean(()), EmptyQuerySet)\n1759.         with self.assertRaises(ValidationError):\n1760.             f.clean([\'0\'])\n\n\nFile: tests/model_forms/tests.py\nLine number range: 644 - 656\nContent:\n644.     def test_default_not_populated_on_optional_checkbox_input(self):\n645.         class PubForm(forms.ModelForm):\n646.             class Meta:\n647.                 model = PublicationDefaults\n648.                 fields = (\'active\',)\n649. \n650.         # Empty data doesn\'t use the model default because CheckboxInput\n651.         # doesn\'t have a value in HTML form submission.\n652.         mf1 = PubForm({})\n653.         self.assertEqual(mf1.errors, {})\n654.         m1 = mf1.save(commit=False)\n655.         self.assertIs(m1.active, False)\n656.         self.assertIsInstance(mf1.fields[\'active\'].widget, forms.CheckboxInput)\n\n\nFile: tests/model_forms/tests.py\nLine number range: 1 - 500\nContent:\n1. import datetime\n2. import os\n3. from decimal import Decimal\n4. from unittest import mock, skipUnless\n5. \n6. from django import forms\n7. from django.core.exceptions import (\n8.     NON_FIELD_ERRORS, FieldError, ImproperlyConfigured, ValidationError,\n9. )\n10. from django.core.files.uploadedfile import SimpleUploadedFile\n11. from django.db import connection, models\n12. from django.db.models.query import EmptyQuerySet\n13. from django.forms.models import (\n14.     ModelFormMetaclass, construct_instance, fields_for_model, model_to_dict,\n15.     modelform_factory,\n16. )\n17. from django.template import Context, Template\n18. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n19. \n20. from .models import (\n21.     Article, ArticleStatus, Author, Author1, Award, BetterWriter, BigInt, Book,\n22.     Category, Character, Colour, ColourfulItem, CustomErrorMessage, CustomFF,\n23.     CustomFieldForExclusionModel, DateTimePost, DerivedBook, DerivedPost,\n24.     Document, ExplicitPK, FilePathModel, FlexibleDatePost, Homepage,\n25.     ImprovedArticle, ImprovedArticleWithParentLink, Inventory,\n26.     NullableUniqueCharFieldModel, Person, Photo, Post, Price, Product,\n27.     Publication, PublicationDefaults, StrictAssignmentAll,\n28.     StrictAssignmentFieldSpecific, Student, StumpJoke, TextFile, Triple,\n29.     Writer, WriterProfile, test_images,\n30. )\n31. \n32. if test_images:\n33.     from .models import ImageFile, OptionalImageFile, NoExtensionImageFile\n34. \n35.     class ImageFileForm(forms.ModelForm):\n36.         class Meta:\n37.             model = ImageFile\n38.             fields = \'__all__\'\n39. \n40.     class OptionalImageFileForm(forms.ModelForm):\n41.         class Meta:\n42.             model = OptionalImageFile\n43.             fields = \'__all__\'\n44. \n45.     class NoExtensionImageFileForm(forms.ModelForm):\n46.         class Meta:\n47.             model = NoExtensionImageFile\n48.             fields = \'__all__\'\n49. \n50. \n51. class ProductForm(forms.ModelForm):\n52.     class Meta:\n53.         model = Product\n54.         fields = \'__all__\'\n55. \n56. \n57. class PriceForm(forms.ModelForm):\n58.     class Meta:\n59.         model = Price\n60.         fields = \'__all__\'\n61. \n62. \n63. class BookForm(forms.ModelForm):\n64.     class Meta:\n65.         model = Book\n66.         fields = \'__all__\'\n67. \n68. \n69. class DerivedBookForm(forms.ModelForm):\n70.     class Meta:\n71.         model = DerivedBook\n72.         fields = \'__all__\'\n73. \n74. \n75. class ExplicitPKForm(forms.ModelForm):\n76.     class Meta:\n77.         model = ExplicitPK\n78.         fields = (\'key\', \'desc\',)\n79. \n80. \n81. class PostForm(forms.ModelForm):\n82.     class Meta:\n83.         model = Post\n84.         fields = \'__all__\'\n85. \n86. \n87. class DerivedPostForm(forms.ModelForm):\n88.     class Meta:\n89.         model = DerivedPost\n90.         fields = \'__all__\'\n91. \n92. \n93. class CustomWriterForm(forms.ModelForm):\n94.     name = forms.CharField(required=False)\n95. \n96.     class Meta:\n97.         model = Writer\n98.         fields = \'__all__\'\n99. \n100. \n101. class BaseCategoryForm(forms.ModelForm):\n102.     class Meta:\n103.         model = Category\n104.         fields = \'__all__\'\n105. \n106. \n107. class ArticleForm(forms.ModelForm):\n108.     class Meta:\n109.         model = Article\n110.         fields = \'__all__\'\n111. \n112. \n113. class RoykoForm(forms.ModelForm):\n114.     class Meta:\n115.         model = Writer\n116.         fields = \'__all__\'\n117. \n118. \n119. class ArticleStatusForm(forms.ModelForm):\n120.     class Meta:\n121.         model = ArticleStatus\n122.         fields = \'__all__\'\n123. \n124. \n125. class InventoryForm(forms.ModelForm):\n126.     class Meta:\n127.         model = Inventory\n128.         fields = \'__all__\'\n129. \n130. \n131. class SelectInventoryForm(forms.Form):\n132.     items = forms.ModelMultipleChoiceField(Inventory.objects.all(), to_field_name=\'barcode\')\n133. \n134. \n135. class CustomFieldForExclusionForm(forms.ModelForm):\n136.     class Meta:\n137.         model = CustomFieldForExclusionModel\n138.         fields = [\'name\', \'markup\']\n139. \n140. \n141. class TextFileForm(forms.ModelForm):\n142.     class Meta:\n143.         model = TextFile\n144.         fields = \'__all__\'\n145. \n146. \n147. class BigIntForm(forms.ModelForm):\n148.     class Meta:\n149.         model = BigInt\n150.         fields = \'__all__\'\n151. \n152. \n153. class ModelFormWithMedia(forms.ModelForm):\n154.     class Media:\n155.         js = (\'/some/form/javascript\',)\n156.         css = {\n157.             \'all\': (\'/some/form/css\',)\n158.         }\n159. \n160.     class Meta:\n161.         model = TextFile\n162.         fields = \'__all__\'\n163. \n164. \n165. class CustomErrorMessageForm(forms.ModelForm):\n166.     name1 = forms.CharField(error_messages={\'invalid\': \'Form custom error message.\'})\n167. \n168.     class Meta:\n169.         fields = \'__all__\'\n170.         model = CustomErrorMessage\n171. \n172. \n173. class ModelFormBaseTest(TestCase):\n174.     def test_base_form(self):\n175.         self.assertEqual(list(BaseCategoryForm.base_fields), [\'name\', \'slug\', \'url\'])\n176. \n177.     def test_no_model_class(self):\n178.         class NoModelModelForm(forms.ModelForm):\n179.             pass\n180.         with self.assertRaisesMessage(ValueError, \'ModelForm has no model class specified.\'):\n181.             NoModelModelForm()\n182. \n183.     def test_empty_fields_to_fields_for_model(self):\n184.         """\n185.         An argument of fields=() to fields_for_model should return an empty dictionary\n186.         """\n187.         field_dict = fields_for_model(Person, fields=())\n188.         self.assertEqual(len(field_dict), 0)\n189. \n190.     def test_empty_fields_on_modelform(self):\n191.         """\n192.         No fields on a ModelForm should actually result in no fields.\n193.         """\n194.         class EmptyPersonForm(forms.ModelForm):\n195.             class Meta:\n196.                 model = Person\n197.                 fields = ()\n198. \n199.         form = EmptyPersonForm()\n200.         self.assertEqual(len(form.fields), 0)\n201. \n202.     def test_empty_fields_to_construct_instance(self):\n203.         """\n204.         No fields should be set on a model instance if construct_instance receives fields=().\n205.         """\n206.         form = modelform_factory(Person, fields="__all__")({\'name\': \'John Doe\'})\n207.         self.assertTrue(form.is_valid())\n208.         instance = construct_instance(form, Person(), fields=())\n209.         self.assertEqual(instance.name, \'\')\n210. \n211.     def test_blank_with_null_foreign_key_field(self):\n212.         """\n213.         #13776 -- ModelForm\'s with models having a FK set to null=False and\n214.         required=False should be valid.\n215.         """\n216.         class FormForTestingIsValid(forms.ModelForm):\n217.             class Meta:\n218.                 model = Student\n219.                 fields = \'__all__\'\n220. \n221.             def __init__(self, *args, **kwargs):\n222.                 super().__init__(*args, **kwargs)\n223.                 self.fields[\'character\'].required = False\n224. \n225.         char = Character.objects.create(username=\'user\', last_action=datetime.datetime.today())\n226.         data = {\'study\': \'Engineering\'}\n227.         data2 = {\'study\': \'Engineering\', \'character\': char.pk}\n228. \n229.         # form is valid because required=False for field \'character\'\n230.         f1 = FormForTestingIsValid(data)\n231.         self.assertTrue(f1.is_valid())\n232. \n233.         f2 = FormForTestingIsValid(data2)\n234.         self.assertTrue(f2.is_valid())\n235.         obj = f2.save()\n236.         self.assertEqual(obj.character, char)\n237. \n238.     def test_blank_false_with_null_true_foreign_key_field(self):\n239.         """\n240.         A ModelForm with a model having ForeignKey(blank=False, null=True)\n241.         and the form field set to required=False should allow the field to be\n242.         unset.\n243.         """\n244.         class AwardForm(forms.ModelForm):\n245.             class Meta:\n246.                 model = Award\n247.                 fields = \'__all__\'\n248. \n249.             def __init__(self, *args, **kwargs):\n250.                 super().__init__(*args, **kwargs)\n251.                 self.fields[\'character\'].required = False\n252. \n253.         character = Character.objects.create(username=\'user\', last_action=datetime.datetime.today())\n254.         award = Award.objects.create(name=\'Best sprinter\', character=character)\n255.         data = {\'name\': \'Best tester\', \'character\': \'\'}  # remove character\n256.         form = AwardForm(data=data, instance=award)\n257.         self.assertTrue(form.is_valid())\n258.         award = form.save()\n259.         self.assertIsNone(award.character)\n260. \n261.     def test_blank_foreign_key_with_radio(self):\n262.         class BookForm(forms.ModelForm):\n263.             class Meta:\n264.                 model = Book\n265.                 fields = [\'author\']\n266.                 widgets = {\'author\': forms.RadioSelect()}\n267. \n268.         writer = Writer.objects.create(name=\'Joe Doe\')\n269.         form = BookForm()\n270.         self.assertEqual(list(form.fields[\'author\'].choices), [\n271.             (\'\', \'---------\'),\n272.             (writer.pk, \'Joe Doe\'),\n273.         ])\n274. \n275.     def test_non_blank_foreign_key_with_radio(self):\n276.         class AwardForm(forms.ModelForm):\n277.             class Meta:\n278.                 model = Award\n279.                 fields = [\'character\']\n280.                 widgets = {\'character\': forms.RadioSelect()}\n281. \n282.         character = Character.objects.create(\n283.             username=\'user\',\n284.             last_action=datetime.datetime.today(),\n285.         )\n286.         form = AwardForm()\n287.         self.assertEqual(\n288.             list(form.fields[\'character\'].choices),\n289.             [(character.pk, \'user\')],\n290.         )\n291. \n292.     def test_save_blank_false_with_required_false(self):\n293.         """\n294.         A ModelForm with a model with a field set to blank=False and the form\n295.         field set to required=False should allow the field to be unset.\n296.         """\n297.         obj = Writer.objects.create(name=\'test\')\n298.         form = CustomWriterForm(data={\'name\': \'\'}, instance=obj)\n299.         self.assertTrue(form.is_valid())\n300.         obj = form.save()\n301.         self.assertEqual(obj.name, \'\')\n302. \n303.     def test_save_blank_null_unique_charfield_saves_null(self):\n304.         form_class = modelform_factory(model=NullableUniqueCharFieldModel, fields=[\'codename\'])\n305.         empty_value = \'\' if connection.features.interprets_empty_strings_as_nulls else None\n306. \n307.         form = form_class(data={\'codename\': \'\'})\n308.         self.assertTrue(form.is_valid())\n309.         form.save()\n310.         self.assertEqual(form.instance.codename, empty_value)\n311. \n312.         # Save a second form to verify there isn\'t a unique constraint violation.\n313.         form = form_class(data={\'codename\': \'\'})\n314.         self.assertTrue(form.is_valid())\n315.         form.save()\n316.         self.assertEqual(form.instance.codename, empty_value)\n317. \n318.     def test_missing_fields_attribute(self):\n319.         message = (\n320.             "Creating a ModelForm without either the \'fields\' attribute "\n321.             "or the \'exclude\' attribute is prohibited; form "\n322.             "MissingFieldsForm needs updating."\n323.         )\n324.         with self.assertRaisesMessage(ImproperlyConfigured, message):\n325.             class MissingFieldsForm(forms.ModelForm):\n326.                 class Meta:\n327.                     model = Category\n328. \n329.     def test_extra_fields(self):\n330.         class ExtraFields(BaseCategoryForm):\n331.             some_extra_field = forms.BooleanField()\n332. \n333.         self.assertEqual(list(ExtraFields.base_fields),\n334.                          [\'name\', \'slug\', \'url\', \'some_extra_field\'])\n335. \n336.     def test_extra_field_model_form(self):\n337.         with self.assertRaisesMessage(FieldError, \'no-field\'):\n338.             class ExtraPersonForm(forms.ModelForm):\n339.                 """ ModelForm with an extra field """\n340.                 age = forms.IntegerField()\n341. \n342.                 class Meta:\n343.                     model = Person\n344.                     fields = (\'name\', \'no-field\')\n345. \n346.     def test_extra_declared_field_model_form(self):\n347.         class ExtraPersonForm(forms.ModelForm):\n348.             """ ModelForm with an extra field """\n349.             age = forms.IntegerField()\n350. \n351.             class Meta:\n352.                 model = Person\n353.                 fields = (\'name\', \'age\')\n354. \n355.     def test_extra_field_modelform_factory(self):\n356.         with self.assertRaisesMessage(FieldError, \'Unknown field(s) (no-field) specified for Person\'):\n357.             modelform_factory(Person, fields=[\'no-field\', \'name\'])\n358. \n359.     def test_replace_field(self):\n360.         class ReplaceField(forms.ModelForm):\n361.             url = forms.BooleanField()\n362. \n363.             class Meta:\n364.                 model = Category\n365.                 fields = \'__all__\'\n366. \n367.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n368. \n369.     def test_replace_field_variant_2(self):\n370.         # Should have the same result as before,\n371.         # but \'fields\' attribute specified differently\n372.         class ReplaceField(forms.ModelForm):\n373.             url = forms.BooleanField()\n374. \n375.             class Meta:\n376.                 model = Category\n377.                 fields = [\'url\']\n378. \n379.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n380. \n381.     def test_replace_field_variant_3(self):\n382.         # Should have the same result as before,\n383.         # but \'fields\' attribute specified differently\n384.         class ReplaceField(forms.ModelForm):\n385.             url = forms.BooleanField()\n386. \n387.             class Meta:\n388.                 model = Category\n389.                 fields = []  # url will still appear, since it is explicit above\n390. \n391.         self.assertIsInstance(ReplaceField.base_fields[\'url\'], forms.fields.BooleanField)\n392. \n393.     def test_override_field(self):\n394.         class WriterForm(forms.ModelForm):\n395.             book = forms.CharField(required=False)\n396. \n397.             class Meta:\n398.                 model = Writer\n399.                 fields = \'__all__\'\n400. \n401.         wf = WriterForm({\'name\': \'Richard Lockridge\'})\n402.         self.assertTrue(wf.is_valid())\n403. \n404.     def test_limit_nonexistent_field(self):\n405.         expected_msg = \'Unknown field(s) (nonexistent) specified for Category\'\n406.         with self.assertRaisesMessage(FieldError, expected_msg):\n407.             class InvalidCategoryForm(forms.ModelForm):\n408.                 class Meta:\n409.                     model = Category\n410.                     fields = [\'nonexistent\']\n411. \n412.     def test_limit_fields_with_string(self):\n413.         expected_msg = "CategoryForm.Meta.fields cannot be a string. Did you mean to type: (\'url\',)?"\n414.         with self.assertRaisesMessage(TypeError, expected_msg):\n415.             class CategoryForm(forms.ModelForm):\n416.                 class Meta:\n417.                     model = Category\n418.                     fields = (\'url\')  # note the missing comma\n419. \n420.     def test_exclude_fields(self):\n421.         class ExcludeFields(forms.ModelForm):\n422.             class Meta:\n423.                 model = Category\n424.                 exclude = [\'url\']\n425. \n426.         self.assertEqual(list(ExcludeFields.base_fields), [\'name\', \'slug\'])\n427. \n428.     def test_exclude_nonexistent_field(self):\n429.         class ExcludeFields(forms.ModelForm):\n430.             class Meta:\n431.                 model = Category\n432.                 exclude = [\'nonexistent\']\n433. \n434.         self.assertEqual(list(ExcludeFields.base_fields), [\'name\', \'slug\', \'url\'])\n435. \n436.     def test_exclude_fields_with_string(self):\n437.         expected_msg = "CategoryForm.Meta.exclude cannot be a string. Did you mean to type: (\'url\',)?"\n438.         with self.assertRaisesMessage(TypeError, expected_msg):\n439.             class CategoryForm(forms.ModelForm):\n440.                 class Meta:\n441.                     model = Category\n442.                     exclude = (\'url\')  # note the missing comma\n443. \n444.     def test_exclude_and_validation(self):\n445.         # This Price instance generated by this form is not valid because the quantity\n446.         # field is required, but the form is valid because the field is excluded from\n447.         # the form. This is for backwards compatibility.\n448.         class PriceFormWithoutQuantity(forms.ModelForm):\n449.             class Meta:\n450.                 model = Price\n451.                 exclude = (\'quantity\',)\n452. \n453.         form = PriceFormWithoutQuantity({\'price\': \'6.00\'})\n454.         self.assertTrue(form.is_valid())\n455.         price = form.save(commit=False)\n456.         msg = "{\'quantity\': [\'This field cannot be null.\']}"\n457.         with self.assertRaisesMessage(ValidationError, msg):\n458.             price.full_clean()\n459. \n460.         # The form should not validate fields that it doesn\'t contain even if they are\n461.         # specified using \'fields\', not \'exclude\'.\n462.         class PriceFormWithoutQuantity(forms.ModelForm):\n463.             class Meta:\n464.                 model = Price\n465.                 fields = (\'price\',)\n466.         form = PriceFormWithoutQuantity({\'price\': \'6.00\'})\n467.         self.assertTrue(form.is_valid())\n468. \n469.         # The form should still have an instance of a model that is not complete and\n470.         # not saved into a DB yet.\n471.         self.assertEqual(form.instance.price, Decimal(\'6.00\'))\n472.         self.assertIsNone(form.instance.quantity)\n473.         self.assertIsNone(form.instance.pk)\n474. \n475.     def test_confused_form(self):\n476.         class ConfusedForm(forms.ModelForm):\n477.             """ Using \'fields\' *and* \'exclude\'. Not sure why you\'d want to do\n478.             this, but uh, "be liberal in what you accept" and all.\n479.             """\n480.             class Meta:\n481.                 model = Category\n482.                 fields = [\'name\', \'url\']\n483.                 exclude = [\'url\']\n484. \n485.         self.assertEqual(list(ConfusedForm.base_fields),\n486.                          [\'name\'])\n487. \n488.     def test_mixmodel_form(self):\n489.         class MixModelForm(BaseCategoryForm):\n490.             """ Don\'t allow more than one \'model\' definition in the\n491.             inheritance hierarchy.  Technically, it would generate a valid\n492.             form, but the fact that the resulting save method won\'t deal with\n493.             multiple objects is likely to trip up people not familiar with the\n494.             mechanics.\n495.             """\n496.             class Meta:\n497.                 model = Article\n498.                 fields = \'__all__\'\n499.             # MixModelForm is now an Article-related thing, because MixModelForm.Meta\n500.             # overrides BaseCategoryForm.Meta.\n\n\nFile: tests/model_forms/models.py\nLine number range: 1 - 474\nContent:\n1. import datetime\n2. import os\n3. import tempfile\n4. import uuid\n5. \n6. from django.core import validators\n7. from django.core.exceptions import ValidationError\n8. from django.core.files.storage import FileSystemStorage\n9. from django.db import models\n10. \n11. temp_storage_dir = tempfile.mkdtemp()\n12. temp_storage = FileSystemStorage(temp_storage_dir)\n13. \n14. \n15. class Person(models.Model):\n16.     name = models.CharField(max_length=100)\n17. \n18. \n19. class Category(models.Model):\n20.     name = models.CharField(max_length=20)\n21.     slug = models.SlugField(max_length=20)\n22.     url = models.CharField(\'The URL\', max_length=40)\n23. \n24.     def __str__(self):\n25.         return self.name\n26. \n27.     def __repr__(self):\n28.         return self.__str__()\n29. \n30. \n31. class WriterManager(models.Manager):\n32.     def get_queryset(self):\n33.         qs = super().get_queryset()\n34.         return qs.filter(archived=False)\n35. \n36. \n37. class Writer(models.Model):\n38.     name = models.CharField(max_length=50, help_text=\'Use both first and last names.\')\n39.     archived = models.BooleanField(default=False, editable=False)\n40. \n41.     objects = WriterManager()\n42. \n43.     class Meta:\n44.         ordering = (\'name\',)\n45. \n46.     def __str__(self):\n47.         return self.name\n48. \n49. \n50. class Article(models.Model):\n51.     ARTICLE_STATUS = (\n52.         (1, \'Draft\'),\n53.         (2, \'Pending\'),\n54.         (3, \'Live\'),\n55.     )\n56.     headline = models.CharField(max_length=50)\n57.     slug = models.SlugField()\n58.     pub_date = models.DateField()\n59.     created = models.DateField(editable=False)\n60.     writer = models.ForeignKey(Writer, models.CASCADE)\n61.     article = models.TextField()\n62.     categories = models.ManyToManyField(Category, blank=True)\n63.     status = models.PositiveIntegerField(choices=ARTICLE_STATUS, blank=True, null=True)\n64. \n65.     def save(self, *args, **kwargs):\n66.         if not self.id:\n67.             self.created = datetime.date.today()\n68.         return super().save(*args, **kwargs)\n69. \n70.     def __str__(self):\n71.         return self.headline\n72. \n73. \n74. class ImprovedArticle(models.Model):\n75.     article = models.OneToOneField(Article, models.CASCADE)\n76. \n77. \n78. class ImprovedArticleWithParentLink(models.Model):\n79.     article = models.OneToOneField(Article, models.CASCADE, parent_link=True)\n80. \n81. \n82. class BetterWriter(Writer):\n83.     score = models.IntegerField()\n84. \n85. \n86. class Publication(models.Model):\n87.     title = models.CharField(max_length=30)\n88.     date_published = models.DateField()\n89. \n90.     def __str__(self):\n91.         return self.title\n92. \n93. \n94. def default_mode():\n95.     return \'di\'\n96. \n97. \n98. def default_category():\n99.     return 3\n100. \n101. \n102. class PublicationDefaults(models.Model):\n103.     MODE_CHOICES = ((\'di\', \'direct\'), (\'de\', \'delayed\'))\n104.     CATEGORY_CHOICES = ((1, \'Games\'), (2, \'Comics\'), (3, \'Novel\'))\n105.     title = models.CharField(max_length=30)\n106.     date_published = models.DateField(default=datetime.date.today)\n107.     datetime_published = models.DateTimeField(default=datetime.datetime(2000, 1, 1))\n108.     mode = models.CharField(max_length=2, choices=MODE_CHOICES, default=default_mode)\n109.     category = models.IntegerField(choices=CATEGORY_CHOICES, default=default_category)\n110.     active = models.BooleanField(default=True)\n111.     file = models.FileField(default=\'default.txt\')\n112. \n113. \n114. class Author(models.Model):\n115.     publication = models.OneToOneField(Publication, models.SET_NULL, null=True, blank=True)\n116.     full_name = models.CharField(max_length=255)\n117. \n118. \n119. class Author1(models.Model):\n120.     publication = models.OneToOneField(Publication, models.CASCADE, null=False)\n121.     full_name = models.CharField(max_length=255)\n122. \n123. \n124. class WriterProfile(models.Model):\n125.     writer = models.OneToOneField(Writer, models.CASCADE, primary_key=True)\n126.     age = models.PositiveIntegerField()\n127. \n128.     def __str__(self):\n129.         return "%s is %s" % (self.writer, self.age)\n130. \n131. \n132. class Document(models.Model):\n133.     myfile = models.FileField(upload_to=\'unused\', blank=True)\n134. \n135. \n136. class TextFile(models.Model):\n137.     description = models.CharField(max_length=20)\n138.     file = models.FileField(storage=temp_storage, upload_to=\'tests\', max_length=15)\n139. \n140.     def __str__(self):\n141.         return self.description\n142. \n143. \n144. class CustomFileField(models.FileField):\n145.     def save_form_data(self, instance, data):\n146.         been_here = getattr(self, \'been_saved\', False)\n147.         assert not been_here, "save_form_data called more than once"\n148.         setattr(self, \'been_saved\', True)\n149. \n150. \n151. class CustomFF(models.Model):\n152.     f = CustomFileField(upload_to=\'unused\', blank=True)\n153. \n154. \n155. class FilePathModel(models.Model):\n156.     path = models.FilePathField(path=os.path.dirname(__file__), match=\'models.py\', blank=True)\n157. \n158. \n159. try:\n160.     from PIL import Image  # NOQA: detect if Pillow is installed\n161. \n162.     test_images = True\n163. \n164.     class ImageFile(models.Model):\n165.         def custom_upload_path(self, filename):\n166.             path = self.path or \'tests\'\n167.             return \'%s/%s\' % (path, filename)\n168. \n169.         description = models.CharField(max_length=20)\n170. \n171.         # Deliberately put the image field *after* the width/height fields to\n172.         # trigger the bug in #10404 with width/height not getting assigned.\n173.         width = models.IntegerField(editable=False)\n174.         height = models.IntegerField(editable=False)\n175.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,\n176.                                   width_field=\'width\', height_field=\'height\')\n177.         path = models.CharField(max_length=16, blank=True, default=\'\')\n178. \n179.         def __str__(self):\n180.             return self.description\n181. \n182.     class OptionalImageFile(models.Model):\n183.         def custom_upload_path(self, filename):\n184.             path = self.path or \'tests\'\n185.             return \'%s/%s\' % (path, filename)\n186. \n187.         description = models.CharField(max_length=20)\n188.         image = models.ImageField(storage=temp_storage, upload_to=custom_upload_path,\n189.                                   width_field=\'width\', height_field=\'height\',\n190.                                   blank=True, null=True)\n191.         width = models.IntegerField(editable=False, null=True)\n192.         height = models.IntegerField(editable=False, null=True)\n193.         path = models.CharField(max_length=16, blank=True, default=\'\')\n194. \n195.         def __str__(self):\n196.             return self.description\n197. \n198.     class NoExtensionImageFile(models.Model):\n199.         def upload_to(self, filename):\n200.             return \'tests/no_extension\'\n201. \n202.         description = models.CharField(max_length=20)\n203.         image = models.ImageField(storage=temp_storage, upload_to=upload_to)\n204. \n205.         def __str__(self):\n206.             return self.description\n207. \n208. except ImportError:\n209.     test_images = False\n210. \n211. \n212. class Homepage(models.Model):\n213.     url = models.URLField()\n214. \n215. \n216. class Product(models.Model):\n217.     slug = models.SlugField(unique=True)\n218. \n219.     def __str__(self):\n220.         return self.slug\n221. \n222. \n223. class Price(models.Model):\n224.     price = models.DecimalField(max_digits=10, decimal_places=2)\n225.     quantity = models.PositiveIntegerField()\n226. \n227.     class Meta:\n228.         unique_together = ((\'price\', \'quantity\'),)\n229. \n230.     def __str__(self):\n231.         return "%s for %s" % (self.quantity, self.price)\n232. \n233. \n234. class Triple(models.Model):\n235.     left = models.IntegerField()\n236.     middle = models.IntegerField()\n237.     right = models.IntegerField()\n238. \n239.     class Meta:\n240.         unique_together = ((\'left\', \'middle\'), (\'middle\', \'right\'))\n241. \n242. \n243. class ArticleStatus(models.Model):\n244.     ARTICLE_STATUS_CHAR = (\n245.         (\'d\', \'Draft\'),\n246.         (\'p\', \'Pending\'),\n247.         (\'l\', \'Live\'),\n248.     )\n249.     status = models.CharField(max_length=2, choices=ARTICLE_STATUS_CHAR, blank=True, null=True)\n250. \n251. \n252. class Inventory(models.Model):\n253.     barcode = models.PositiveIntegerField(unique=True)\n254.     parent = models.ForeignKey(\'self\', models.SET_NULL, to_field=\'barcode\', blank=True, null=True)\n255.     name = models.CharField(blank=False, max_length=20)\n256. \n257.     class Meta:\n258.         ordering = (\'name\',)\n259. \n260.     def __str__(self):\n261.         return self.name\n262. \n263.     def __repr__(self):\n264.         return self.__str__()\n265. \n266. \n267. class Book(models.Model):\n268.     title = models.CharField(max_length=40)\n269.     author = models.ForeignKey(Writer, models.SET_NULL, blank=True, null=True)\n270.     special_id = models.IntegerField(blank=True, null=True, unique=True)\n271. \n272.     class Meta:\n273.         unique_together = (\'title\', \'author\')\n274. \n275. \n276. class BookXtra(models.Model):\n277.     isbn = models.CharField(max_length=16, unique=True)\n278.     suffix1 = models.IntegerField(blank=True, default=0)\n279.     suffix2 = models.IntegerField(blank=True, default=0)\n280. \n281.     class Meta:\n282.         unique_together = ((\'suffix1\', \'suffix2\'))\n283.         abstract = True\n284. \n285. \n286. class DerivedBook(Book, BookXtra):\n287.     pass\n288. \n289. \n290. class ExplicitPK(models.Model):\n291.     key = models.CharField(max_length=20, primary_key=True)\n292.     desc = models.CharField(max_length=20, blank=True, unique=True)\n293. \n294.     class Meta:\n295.         unique_together = (\'key\', \'desc\')\n296. \n297.     def __str__(self):\n298.         return self.key\n299. \n300. \n301. class Post(models.Model):\n302.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n303.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n304.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n305.     posted = models.DateField()\n306. \n307.     def __str__(self):\n308.         return self.title\n309. \n310. \n311. class DateTimePost(models.Model):\n312.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n313.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n314.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n315.     posted = models.DateTimeField(editable=False)\n316. \n317.     def __str__(self):\n318.         return self.title\n319. \n320. \n321. class DerivedPost(Post):\n322.     pass\n323. \n324. \n325. class BigInt(models.Model):\n326.     biggie = models.BigIntegerField()\n327. \n328.     def __str__(self):\n329.         return str(self.biggie)\n330. \n331. \n332. class MarkupField(models.CharField):\n333.     def __init__(self, *args, **kwargs):\n334.         kwargs["max_length"] = 20\n335.         super().__init__(*args, **kwargs)\n336. \n337.     def formfield(self, **kwargs):\n338.         # don\'t allow this field to be used in form (real use-case might be\n339.         # that you know the markup will always be X, but it is among an app\n340.         # that allows the user to say it could be something else)\n341.         # regressed at r10062\n342.         return None\n343. \n344. \n345. class CustomFieldForExclusionModel(models.Model):\n346.     name = models.CharField(max_length=10)\n347.     markup = MarkupField()\n348. \n349. \n350. class FlexibleDatePost(models.Model):\n351.     title = models.CharField(max_length=50, unique_for_date=\'posted\', blank=True)\n352.     slug = models.CharField(max_length=50, unique_for_year=\'posted\', blank=True)\n353.     subtitle = models.CharField(max_length=50, unique_for_month=\'posted\', blank=True)\n354.     posted = models.DateField(blank=True, null=True)\n355. \n356. \n357. class Colour(models.Model):\n358.     name = models.CharField(max_length=50)\n359. \n360.     def __iter__(self):\n361.         yield from range(5)\n362. \n363.     def __str__(self):\n364.         return self.name\n365. \n366. \n367. class ColourfulItem(models.Model):\n368.     name = models.CharField(max_length=50)\n369.     colours = models.ManyToManyField(Colour)\n370. \n371. \n372. class CustomErrorMessage(models.Model):\n373.     name1 = models.CharField(\n374.         max_length=50,\n375.         validators=[validators.validate_slug],\n376.         error_messages={\'invalid\': \'Model custom error message.\'},\n377.     )\n378.     name2 = models.CharField(\n379.         max_length=50,\n380.         validators=[validators.validate_slug],\n381.         error_messages={\'invalid\': \'Model custom error message.\'},\n382.     )\n383. \n384.     def clean(self):\n385.         if self.name1 == \'FORBIDDEN_VALUE\':\n386.             raise ValidationError({\'name1\': [ValidationError(\'Model.clean() error messages.\')]})\n387.         elif self.name1 == \'FORBIDDEN_VALUE2\':\n388.             raise ValidationError({\'name1\': \'Model.clean() error messages (simpler syntax).\'})\n389.         elif self.name1 == \'GLOBAL_ERROR\':\n390.             raise ValidationError("Global error message.")\n391. \n392. \n393. def today_callable_dict():\n394.     return {"last_action__gte": datetime.datetime.today()}\n395. \n396. \n397. def today_callable_q():\n398.     return models.Q(last_action__gte=datetime.datetime.today())\n399. \n400. \n401. class Character(models.Model):\n402.     username = models.CharField(max_length=100)\n403.     last_action = models.DateTimeField()\n404. \n405.     def __str__(self):\n406.         return self.username\n407. \n408. \n409. class StumpJoke(models.Model):\n410.     most_recently_fooled = models.ForeignKey(\n411.         Character,\n412.         models.CASCADE,\n413.         limit_choices_to=today_callable_dict,\n414.         related_name="+",\n415.     )\n416.     has_fooled_today = models.ManyToManyField(Character, limit_choices_to=today_callable_q, related_name="+")\n417. \n418. \n419. # Model for #13776\n420. class Student(models.Model):\n421.     character = models.ForeignKey(Character, models.CASCADE)\n422.     study = models.CharField(max_length=30)\n423. \n424. \n425. # Model for #639\n426. class Photo(models.Model):\n427.     title = models.CharField(max_length=30)\n428.     image = models.FileField(storage=temp_storage, upload_to=\'tests\')\n429. \n430.     # Support code for the tests; this keeps track of how many times save()\n431.     # gets called on each instance.\n432.     def __init__(self, *args, **kwargs):\n433.         super().__init__(*args, **kwargs)\n434.         self._savecount = 0\n435. \n436.     def save(self, force_insert=False, force_update=False):\n437.         super().save(force_insert, force_update)\n438.         self._savecount += 1\n439. \n440. \n441. class UUIDPK(models.Model):\n442.     uuid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n443.     name = models.CharField(max_length=30)\n444. \n445. \n446. # Models for #24706\n447. class StrictAssignmentFieldSpecific(models.Model):\n448.     title = models.CharField(max_length=30)\n449.     _should_error = False\n450. \n451.     def __setattr__(self, key, value):\n452.         if self._should_error is True:\n453.             raise ValidationError(message={key: "Cannot set attribute"}, code=\'invalid\')\n454.         super().__setattr__(key, value)\n455. \n456. \n457. class StrictAssignmentAll(models.Model):\n458.     title = models.CharField(max_length=30)\n459.     _should_error = False\n460. \n461.     def __setattr__(self, key, value):\n462.         if self._should_error is True:\n463.             raise ValidationError(message="Cannot set attribute", code=\'invalid\')\n464.         super().__setattr__(key, value)\n465. \n466. \n467. # A model with ForeignKey(blank=False, null=True)\n468. class Award(models.Model):\n469.     name = models.CharField(max_length=30)\n470.     character = models.ForeignKey(Character, models.SET_NULL, blank=False, null=True)\n471. \n472. \n473. class NullableUniqueCharFieldModel(models.Model):\n474.     codename = models.CharField(max_length=50, blank=True, null=True, unique=True)\n\n\nFile: tests/queries/test_qs_combinators.py\nLine number range: 1 - 316\nContent:\n1. import operator\n2. \n3. from django.db import DatabaseError, NotSupportedError, connection\n4. from django.db.models import Exists, F, IntegerField, OuterRef, Value\n5. from django.test import TestCase, skipIfDBFeature, skipUnlessDBFeature\n6. \n7. from .models import Number, ReservedName\n8. \n9. \n10. @skipUnlessDBFeature(\'supports_select_union\')\n11. class QuerySetSetOperationTests(TestCase):\n12.     @classmethod\n13.     def setUpTestData(cls):\n14.         Number.objects.bulk_create(Number(num=i, other_num=10 - i) for i in range(10))\n15. \n16.     def assertNumbersEqual(self, queryset, expected_numbers, ordered=True):\n17.         self.assertQuerysetEqual(queryset, expected_numbers, operator.attrgetter(\'num\'), ordered)\n18. \n19.     def test_simple_union(self):\n20.         qs1 = Number.objects.filter(num__lte=1)\n21.         qs2 = Number.objects.filter(num__gte=8)\n22.         qs3 = Number.objects.filter(num=5)\n23.         self.assertNumbersEqual(qs1.union(qs2, qs3), [0, 1, 5, 8, 9], ordered=False)\n24. \n25.     @skipUnlessDBFeature(\'supports_select_intersection\')\n26.     def test_simple_intersection(self):\n27.         qs1 = Number.objects.filter(num__lte=5)\n28.         qs2 = Number.objects.filter(num__gte=5)\n29.         qs3 = Number.objects.filter(num__gte=4, num__lte=6)\n30.         self.assertNumbersEqual(qs1.intersection(qs2, qs3), [5], ordered=False)\n31. \n32.     @skipUnlessDBFeature(\'supports_select_intersection\')\n33.     def test_intersection_with_values(self):\n34.         ReservedName.objects.create(name=\'a\', order=2)\n35.         qs1 = ReservedName.objects.all()\n36.         reserved_name = qs1.intersection(qs1).values(\'name\', \'order\', \'id\').get()\n37.         self.assertEqual(reserved_name[\'name\'], \'a\')\n38.         self.assertEqual(reserved_name[\'order\'], 2)\n39.         reserved_name = qs1.intersection(qs1).values_list(\'name\', \'order\', \'id\').get()\n40.         self.assertEqual(reserved_name[:2], (\'a\', 2))\n41. \n42.     @skipUnlessDBFeature(\'supports_select_difference\')\n43.     def test_simple_difference(self):\n44.         qs1 = Number.objects.filter(num__lte=5)\n45.         qs2 = Number.objects.filter(num__lte=4)\n46.         self.assertNumbersEqual(qs1.difference(qs2), [5], ordered=False)\n47. \n48.     def test_union_distinct(self):\n49.         qs1 = Number.objects.all()\n50.         qs2 = Number.objects.all()\n51.         self.assertEqual(len(list(qs1.union(qs2, all=True))), 20)\n52.         self.assertEqual(len(list(qs1.union(qs2))), 10)\n53. \n54.     @skipUnlessDBFeature(\'supports_select_intersection\')\n55.     def test_intersection_with_empty_qs(self):\n56.         qs1 = Number.objects.all()\n57.         qs2 = Number.objects.none()\n58.         qs3 = Number.objects.filter(pk__in=[])\n59.         self.assertEqual(len(qs1.intersection(qs2)), 0)\n60.         self.assertEqual(len(qs1.intersection(qs3)), 0)\n61.         self.assertEqual(len(qs2.intersection(qs1)), 0)\n62.         self.assertEqual(len(qs3.intersection(qs1)), 0)\n63.         self.assertEqual(len(qs2.intersection(qs2)), 0)\n64.         self.assertEqual(len(qs3.intersection(qs3)), 0)\n65. \n66.     @skipUnlessDBFeature(\'supports_select_difference\')\n67.     def test_difference_with_empty_qs(self):\n68.         qs1 = Number.objects.all()\n69.         qs2 = Number.objects.none()\n70.         qs3 = Number.objects.filter(pk__in=[])\n71.         self.assertEqual(len(qs1.difference(qs2)), 10)\n72.         self.assertEqual(len(qs1.difference(qs3)), 10)\n73.         self.assertEqual(len(qs2.difference(qs1)), 0)\n74.         self.assertEqual(len(qs3.difference(qs1)), 0)\n75.         self.assertEqual(len(qs2.difference(qs2)), 0)\n76.         self.assertEqual(len(qs3.difference(qs3)), 0)\n77. \n78.     @skipUnlessDBFeature(\'supports_select_difference\')\n79.     def test_difference_with_values(self):\n80.         ReservedName.objects.create(name=\'a\', order=2)\n81.         qs1 = ReservedName.objects.all()\n82.         qs2 = ReservedName.objects.none()\n83.         reserved_name = qs1.difference(qs2).values(\'name\', \'order\', \'id\').get()\n84.         self.assertEqual(reserved_name[\'name\'], \'a\')\n85.         self.assertEqual(reserved_name[\'order\'], 2)\n86.         reserved_name = qs1.difference(qs2).values_list(\'name\', \'order\', \'id\').get()\n87.         self.assertEqual(reserved_name[:2], (\'a\', 2))\n88. \n89.     def test_union_with_empty_qs(self):\n90.         qs1 = Number.objects.all()\n91.         qs2 = Number.objects.none()\n92.         qs3 = Number.objects.filter(pk__in=[])\n93.         self.assertEqual(len(qs1.union(qs2)), 10)\n94.         self.assertEqual(len(qs2.union(qs1)), 10)\n95.         self.assertEqual(len(qs1.union(qs3)), 10)\n96.         self.assertEqual(len(qs3.union(qs1)), 10)\n97.         self.assertEqual(len(qs2.union(qs1, qs1, qs1)), 10)\n98.         self.assertEqual(len(qs2.union(qs1, qs1, all=True)), 20)\n99.         self.assertEqual(len(qs2.union(qs2)), 0)\n100.         self.assertEqual(len(qs3.union(qs3)), 0)\n101. \n102.     def test_limits(self):\n103.         qs1 = Number.objects.all()\n104.         qs2 = Number.objects.all()\n105.         self.assertEqual(len(list(qs1.union(qs2)[:2])), 2)\n106. \n107.     def test_ordering(self):\n108.         qs1 = Number.objects.filter(num__lte=1)\n109.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n110.         self.assertNumbersEqual(qs1.union(qs2).order_by(\'-num\'), [3, 2, 1, 0])\n111. \n112.     def test_ordering_by_alias(self):\n113.         qs1 = Number.objects.filter(num__lte=1).values(alias=F(\'num\'))\n114.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F(\'num\'))\n115.         self.assertQuerysetEqual(\n116.             qs1.union(qs2).order_by(\'-alias\'),\n117.             [3, 2, 1, 0],\n118.             operator.itemgetter(\'alias\'),\n119.         )\n120. \n121.     def test_ordering_by_f_expression(self):\n122.         qs1 = Number.objects.filter(num__lte=1)\n123.         qs2 = Number.objects.filter(num__gte=2, num__lte=3)\n124.         self.assertNumbersEqual(qs1.union(qs2).order_by(F(\'num\').desc()), [3, 2, 1, 0])\n125. \n126.     def test_ordering_by_f_expression_and_alias(self):\n127.         qs1 = Number.objects.filter(num__lte=1).values(alias=F(\'other_num\'))\n128.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(alias=F(\'other_num\'))\n129.         self.assertQuerysetEqual(\n130.             qs1.union(qs2).order_by(F(\'alias\').desc()),\n131.             [10, 9, 8, 7],\n132.             operator.itemgetter(\'alias\'),\n133.         )\n134.         Number.objects.create(num=-1)\n135.         self.assertQuerysetEqual(\n136.             qs1.union(qs2).order_by(F(\'alias\').desc(nulls_last=True)),\n137.             [10, 9, 8, 7, None],\n138.             operator.itemgetter(\'alias\'),\n139.         )\n140. \n141.     def test_union_with_values(self):\n142.         ReservedName.objects.create(name=\'a\', order=2)\n143.         qs1 = ReservedName.objects.all()\n144.         reserved_name = qs1.union(qs1).values(\'name\', \'order\', \'id\').get()\n145.         self.assertEqual(reserved_name[\'name\'], \'a\')\n146.         self.assertEqual(reserved_name[\'order\'], 2)\n147.         reserved_name = qs1.union(qs1).values_list(\'name\', \'order\', \'id\').get()\n148.         self.assertEqual(reserved_name[:2], (\'a\', 2))\n149.         # List of columns can be changed.\n150.         reserved_name = qs1.union(qs1).values_list(\'order\').get()\n151.         self.assertEqual(reserved_name, (2,))\n152. \n153.     def test_union_with_two_annotated_values_list(self):\n154.         qs1 = Number.objects.filter(num=1).annotate(\n155.             count=Value(0, IntegerField()),\n156.         ).values_list(\'num\', \'count\')\n157.         qs2 = Number.objects.filter(num=2).values(\'pk\').annotate(\n158.             count=F(\'num\'),\n159.         ).annotate(\n160.             num=Value(1, IntegerField()),\n161.         ).values_list(\'num\', \'count\')\n162.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])\n163. \n164.     def test_union_with_extra_and_values_list(self):\n165.         qs1 = Number.objects.filter(num=1).extra(\n166.             select={\'count\': 0},\n167.         ).values_list(\'num\', \'count\')\n168.         qs2 = Number.objects.filter(num=2).extra(select={\'count\': 1})\n169.         self.assertCountEqual(qs1.union(qs2), [(1, 0), (2, 1)])\n170. \n171.     def test_union_with_values_list_on_annotated_and_unannotated(self):\n172.         ReservedName.objects.create(name=\'rn1\', order=1)\n173.         qs1 = Number.objects.annotate(\n174.             has_reserved_name=Exists(ReservedName.objects.filter(order=OuterRef(\'num\')))\n175.         ).filter(has_reserved_name=True)\n176.         qs2 = Number.objects.filter(num=9)\n177.         self.assertCountEqual(qs1.union(qs2).values_list(\'num\', flat=True), [1, 9])\n178. \n179.     def test_union_with_values_list_and_order(self):\n180.         ReservedName.objects.bulk_create([\n181.             ReservedName(name=\'rn1\', order=7),\n182.             ReservedName(name=\'rn2\', order=5),\n183.             ReservedName(name=\'rn0\', order=6),\n184.             ReservedName(name=\'rn9\', order=-1),\n185.         ])\n186.         qs1 = ReservedName.objects.filter(order__gte=6)\n187.         qs2 = ReservedName.objects.filter(order__lte=5)\n188.         union_qs = qs1.union(qs2)\n189.         for qs, expected_result in (\n190.             # Order by a single column.\n191.             (union_qs.order_by(\'-pk\').values_list(\'order\', flat=True), [-1, 6, 5, 7]),\n192.             (union_qs.order_by(\'pk\').values_list(\'order\', flat=True), [7, 5, 6, -1]),\n193.             (union_qs.values_list(\'order\', flat=True).order_by(\'-pk\'), [-1, 6, 5, 7]),\n194.             (union_qs.values_list(\'order\', flat=True).order_by(\'pk\'), [7, 5, 6, -1]),\n195.             # Order by multiple columns.\n196.             (union_qs.order_by(\'-name\', \'pk\').values_list(\'order\', flat=True), [-1, 5, 7, 6]),\n197.             (union_qs.values_list(\'order\', flat=True).order_by(\'-name\', \'pk\'), [-1, 5, 7, 6]),\n198.         ):\n199.             with self.subTest(qs=qs):\n200.                 self.assertEqual(list(qs), expected_result)\n201. \n202.     def test_count_union(self):\n203.         qs1 = Number.objects.filter(num__lte=1).values(\'num\')\n204.         qs2 = Number.objects.filter(num__gte=2, num__lte=3).values(\'num\')\n205.         self.assertEqual(qs1.union(qs2).count(), 4)\n206. \n207.     def test_count_union_empty_result(self):\n208.         qs = Number.objects.filter(pk__in=[])\n209.         self.assertEqual(qs.union(qs).count(), 0)\n210. \n211.     @skipUnlessDBFeature(\'supports_select_difference\')\n212.     def test_count_difference(self):\n213.         qs1 = Number.objects.filter(num__lt=10)\n214.         qs2 = Number.objects.filter(num__lt=9)\n215.         self.assertEqual(qs1.difference(qs2).count(), 1)\n216. \n217.     @skipUnlessDBFeature(\'supports_select_intersection\')\n218.     def test_count_intersection(self):\n219.         qs1 = Number.objects.filter(num__gte=5)\n220.         qs2 = Number.objects.filter(num__lte=5)\n221.         self.assertEqual(qs1.intersection(qs2).count(), 1)\n222. \n223.     @skipUnlessDBFeature(\'supports_slicing_ordering_in_compound\')\n224.     def test_ordering_subqueries(self):\n225.         qs1 = Number.objects.order_by(\'num\')[:2]\n226.         qs2 = Number.objects.order_by(\'-num\')[:2]\n227.         self.assertNumbersEqual(qs1.union(qs2).order_by(\'-num\')[:4], [9, 8, 1, 0])\n228. \n229.     @skipIfDBFeature(\'supports_slicing_ordering_in_compound\')\n230.     def test_unsupported_ordering_slicing_raises_db_error(self):\n231.         qs1 = Number.objects.all()\n232.         qs2 = Number.objects.all()\n233.         msg = \'LIMIT/OFFSET not allowed in subqueries of compound statements\'\n234.         with self.assertRaisesMessage(DatabaseError, msg):\n235.             list(qs1.union(qs2[:10]))\n236.         msg = \'ORDER BY not allowed in subqueries of compound statements\'\n237.         with self.assertRaisesMessage(DatabaseError, msg):\n238.             list(qs1.order_by(\'id\').union(qs2))\n239. \n240.     @skipIfDBFeature(\'supports_select_intersection\')\n241.     def test_unsupported_intersection_raises_db_error(self):\n242.         qs1 = Number.objects.all()\n243.         qs2 = Number.objects.all()\n244.         msg = \'intersection is not supported on this database backend\'\n245.         with self.assertRaisesMessage(NotSupportedError, msg):\n246.             list(qs1.intersection(qs2))\n247. \n248.     def test_combining_multiple_models(self):\n249.         ReservedName.objects.create(name=\'99 little bugs\', order=99)\n250.         qs1 = Number.objects.filter(num=1).values_list(\'num\', flat=True)\n251.         qs2 = ReservedName.objects.values_list(\'order\')\n252.         self.assertEqual(list(qs1.union(qs2).order_by(\'num\')), [1, 99])\n253. \n254.     def test_order_raises_on_non_selected_column(self):\n255.         qs1 = Number.objects.filter().annotate(\n256.             annotation=Value(1, IntegerField()),\n257.         ).values(\'annotation\', num2=F(\'num\'))\n258.         qs2 = Number.objects.filter().values(\'id\', \'num\')\n259.         # Should not raise\n260.         list(qs1.union(qs2).order_by(\'annotation\'))\n261.         list(qs1.union(qs2).order_by(\'num2\'))\n262.         msg = \'ORDER BY term does not match any column in the result set\'\n263.         # \'id\' is not part of the select\n264.         with self.assertRaisesMessage(DatabaseError, msg):\n265.             list(qs1.union(qs2).order_by(\'id\'))\n266.         # \'num\' got realiased to num2\n267.         with self.assertRaisesMessage(DatabaseError, msg):\n268.             list(qs1.union(qs2).order_by(\'num\'))\n269.         with self.assertRaisesMessage(DatabaseError, msg):\n270.             list(qs1.union(qs2).order_by(F(\'num\')))\n271.         with self.assertRaisesMessage(DatabaseError, msg):\n272.             list(qs1.union(qs2).order_by(F(\'num\').desc()))\n273.         # switched order, now \'exists\' again:\n274.         list(qs2.union(qs1).order_by(\'num\'))\n275. \n276.     @skipUnlessDBFeature(\'supports_select_difference\', \'supports_select_intersection\')\n277.     def test_qs_with_subcompound_qs(self):\n278.         qs1 = Number.objects.all()\n279.         qs2 = Number.objects.intersection(Number.objects.filter(num__gt=1))\n280.         self.assertEqual(qs1.difference(qs2).count(), 2)\n281. \n282.     def test_order_by_same_type(self):\n283.         qs = Number.objects.all()\n284.         union = qs.union(qs)\n285.         numbers = list(range(10))\n286.         self.assertNumbersEqual(union.order_by(\'num\'), numbers)\n287.         self.assertNumbersEqual(union.order_by(\'other_num\'), reversed(numbers))\n288. \n289.     def test_unsupported_operations_on_combined_qs(self):\n290.         qs = Number.objects.all()\n291.         msg = \'Calling QuerySet.%s() after %s() is not supported.\'\n292.         combinators = [\'union\']\n293.         if connection.features.supports_select_difference:\n294.             combinators.append(\'difference\')\n295.         if connection.features.supports_select_intersection:\n296.             combinators.append(\'intersection\')\n297.         for combinator in combinators:\n298.             for operation in (\n299.                 \'annotate\',\n300.                 \'defer\',\n301.                 \'delete\',\n302.                 \'distinct\',\n303.                 \'exclude\',\n304.                 \'extra\',\n305.                 \'filter\',\n306.                 \'only\',\n307.                 \'prefetch_related\',\n308.                 \'select_related\',\n309.                 \'update\',\n310.             ):\n311.                 with self.subTest(combinator=combinator, operation=operation):\n312.                     with self.assertRaisesMessage(\n313.                         NotSupportedError,\n314.                         msg % (operation, combinator),\n315.                     ):\n316.                         getattr(getattr(qs, combinator)(qs), operation)()\n\n\nFile: tests/queries/models.py\nLine number range: 1 - 500\nContent:\n1. """\n2. Various complex queries that have been problematic in the past.\n3. """\n4. from django.db import models\n5. from django.db.models.functions import Now\n6. \n7. \n8. class DumbCategory(models.Model):\n9.     pass\n10. \n11. \n12. class ProxyCategory(DumbCategory):\n13.     class Meta:\n14.         proxy = True\n15. \n16. \n17. class NamedCategory(DumbCategory):\n18.     name = models.CharField(max_length=10)\n19. \n20.     def __str__(self):\n21.         return self.name\n22. \n23. \n24. class Tag(models.Model):\n25.     name = models.CharField(max_length=10)\n26.     parent = models.ForeignKey(\n27.         \'self\',\n28.         models.SET_NULL,\n29.         blank=True, null=True,\n30.         related_name=\'children\',\n31.     )\n32.     category = models.ForeignKey(NamedCategory, models.SET_NULL, null=True, default=None)\n33. \n34.     class Meta:\n35.         ordering = [\'name\']\n36. \n37.     def __str__(self):\n38.         return self.name\n39. \n40. \n41. class Note(models.Model):\n42.     note = models.CharField(max_length=100)\n43.     misc = models.CharField(max_length=10)\n44.     tag = models.ForeignKey(Tag, models.SET_NULL, blank=True, null=True)\n45. \n46.     class Meta:\n47.         ordering = [\'note\']\n48. \n49.     def __str__(self):\n50.         return self.note\n51. \n52. \n53. class Annotation(models.Model):\n54.     name = models.CharField(max_length=10)\n55.     tag = models.ForeignKey(Tag, models.CASCADE)\n56.     notes = models.ManyToManyField(Note)\n57. \n58.     def __str__(self):\n59.         return self.name\n60. \n61. \n62. class DateTimePK(models.Model):\n63.     date = models.DateTimeField(primary_key=True, auto_now_add=True)\n64. \n65. \n66. class ExtraInfo(models.Model):\n67.     info = models.CharField(max_length=100)\n68.     note = models.ForeignKey(Note, models.CASCADE, null=True)\n69.     value = models.IntegerField(null=True)\n70.     date = models.ForeignKey(DateTimePK, models.SET_NULL, null=True)\n71.     filterable = models.BooleanField(default=True)\n72. \n73.     class Meta:\n74.         ordering = [\'info\']\n75. \n76.     def __str__(self):\n77.         return self.info\n78. \n79. \n80. class Author(models.Model):\n81.     name = models.CharField(max_length=10)\n82.     num = models.IntegerField(unique=True)\n83.     extra = models.ForeignKey(ExtraInfo, models.CASCADE)\n84. \n85.     class Meta:\n86.         ordering = [\'name\']\n87. \n88.     def __str__(self):\n89.         return self.name\n90. \n91. \n92. class Item(models.Model):\n93.     name = models.CharField(max_length=10)\n94.     created = models.DateTimeField()\n95.     modified = models.DateTimeField(blank=True, null=True)\n96.     tags = models.ManyToManyField(Tag, blank=True)\n97.     creator = models.ForeignKey(Author, models.CASCADE)\n98.     note = models.ForeignKey(Note, models.CASCADE)\n99. \n100.     class Meta:\n101.         ordering = [\'-note\', \'name\']\n102. \n103.     def __str__(self):\n104.         return self.name\n105. \n106. \n107. class Report(models.Model):\n108.     name = models.CharField(max_length=10)\n109.     creator = models.ForeignKey(Author, models.SET_NULL, to_field=\'num\', null=True)\n110. \n111.     def __str__(self):\n112.         return self.name\n113. \n114. \n115. class ReportComment(models.Model):\n116.     report = models.ForeignKey(Report, models.CASCADE)\n117. \n118. \n119. class Ranking(models.Model):\n120.     rank = models.IntegerField()\n121.     author = models.ForeignKey(Author, models.CASCADE)\n122. \n123.     class Meta:\n124.         # A complex ordering specification. Should stress the system a bit.\n125.         ordering = (\'author__extra__note\', \'author__name\', \'rank\')\n126. \n127.     def __str__(self):\n128.         return \'%d: %s\' % (self.rank, self.author.name)\n129. \n130. \n131. class Cover(models.Model):\n132.     title = models.CharField(max_length=50)\n133.     item = models.ForeignKey(Item, models.CASCADE)\n134. \n135.     class Meta:\n136.         ordering = [\'item\']\n137. \n138.     def __str__(self):\n139.         return self.title\n140. \n141. \n142. class Number(models.Model):\n143.     num = models.IntegerField()\n144.     other_num = models.IntegerField(null=True)\n145.     another_num = models.IntegerField(null=True)\n146. \n147.     def __str__(self):\n148.         return str(self.num)\n149. \n150. # Symmetrical m2m field with a normal field using the reverse accessor name\n151. # ("valid").\n152. \n153. \n154. class Valid(models.Model):\n155.     valid = models.CharField(max_length=10)\n156.     parent = models.ManyToManyField(\'self\')\n157. \n158.     class Meta:\n159.         ordering = [\'valid\']\n160. \n161. # Some funky cross-linked models for testing a couple of infinite recursion\n162. # cases.\n163. \n164. \n165. class X(models.Model):\n166.     y = models.ForeignKey(\'Y\', models.CASCADE)\n167. \n168. \n169. class Y(models.Model):\n170.     x1 = models.ForeignKey(X, models.CASCADE, related_name=\'y1\')\n171. \n172. # Some models with a cycle in the default ordering. This would be bad if we\n173. # didn\'t catch the infinite loop.\n174. \n175. \n176. class LoopX(models.Model):\n177.     y = models.ForeignKey(\'LoopY\', models.CASCADE)\n178. \n179.     class Meta:\n180.         ordering = [\'y\']\n181. \n182. \n183. class LoopY(models.Model):\n184.     x = models.ForeignKey(LoopX, models.CASCADE)\n185. \n186.     class Meta:\n187.         ordering = [\'x\']\n188. \n189. \n190. class LoopZ(models.Model):\n191.     z = models.ForeignKey(\'self\', models.CASCADE)\n192. \n193.     class Meta:\n194.         ordering = [\'z\']\n195. \n196. \n197. # A model and custom default manager combination.\n198. \n199. \n200. class CustomManager(models.Manager):\n201.     def get_queryset(self):\n202.         qs = super().get_queryset()\n203.         return qs.filter(public=True, tag__name=\'t1\')\n204. \n205. \n206. class ManagedModel(models.Model):\n207.     data = models.CharField(max_length=10)\n208.     tag = models.ForeignKey(Tag, models.CASCADE)\n209.     public = models.BooleanField(default=True)\n210. \n211.     objects = CustomManager()\n212.     normal_manager = models.Manager()\n213. \n214.     def __str__(self):\n215.         return self.data\n216. \n217. # An inter-related setup with multiple paths from Child to Detail.\n218. \n219. \n220. class Detail(models.Model):\n221.     data = models.CharField(max_length=10)\n222. \n223. \n224. class MemberManager(models.Manager):\n225.     def get_queryset(self):\n226.         return super().get_queryset().select_related("details")\n227. \n228. \n229. class Member(models.Model):\n230.     name = models.CharField(max_length=10)\n231.     details = models.OneToOneField(Detail, models.CASCADE, primary_key=True)\n232. \n233.     objects = MemberManager()\n234. \n235. \n236. class Child(models.Model):\n237.     person = models.OneToOneField(Member, models.CASCADE, primary_key=True)\n238.     parent = models.ForeignKey(Member, models.CASCADE, related_name="children")\n239. \n240. # Custom primary keys interfered with ordering in the past.\n241. \n242. \n243. class CustomPk(models.Model):\n244.     name = models.CharField(max_length=10, primary_key=True)\n245.     extra = models.CharField(max_length=10)\n246. \n247.     class Meta:\n248.         ordering = [\'name\', \'extra\']\n249. \n250. \n251. class Related(models.Model):\n252.     custom = models.ForeignKey(CustomPk, models.CASCADE, null=True)\n253. \n254. \n255. class CustomPkTag(models.Model):\n256.     id = models.CharField(max_length=20, primary_key=True)\n257.     custom_pk = models.ManyToManyField(CustomPk)\n258.     tag = models.CharField(max_length=20)\n259. \n260. # An inter-related setup with a model subclass that has a nullable\n261. # path to another model, and a return path from that model.\n262. \n263. \n264. class Celebrity(models.Model):\n265.     name = models.CharField("Name", max_length=20)\n266.     greatest_fan = models.ForeignKey("Fan", models.SET_NULL, null=True, unique=True)\n267. \n268.     def __str__(self):\n269.         return self.name\n270. \n271. \n272. class TvChef(Celebrity):\n273.     pass\n274. \n275. \n276. class Fan(models.Model):\n277.     fan_of = models.ForeignKey(Celebrity, models.CASCADE)\n278. \n279. # Multiple foreign keys\n280. \n281. \n282. class LeafA(models.Model):\n283.     data = models.CharField(max_length=10)\n284. \n285.     def __str__(self):\n286.         return self.data\n287. \n288. \n289. class LeafB(models.Model):\n290.     data = models.CharField(max_length=10)\n291. \n292. \n293. class Join(models.Model):\n294.     a = models.ForeignKey(LeafA, models.CASCADE)\n295.     b = models.ForeignKey(LeafB, models.CASCADE)\n296. \n297. \n298. class ReservedName(models.Model):\n299.     name = models.CharField(max_length=20)\n300.     order = models.IntegerField()\n301. \n302.     def __str__(self):\n303.         return self.name\n304. \n305. # A simpler shared-foreign-key setup that can expose some problems.\n306. \n307. \n308. class SharedConnection(models.Model):\n309.     data = models.CharField(max_length=10)\n310. \n311.     def __str__(self):\n312.         return self.data\n313. \n314. \n315. class PointerA(models.Model):\n316.     connection = models.ForeignKey(SharedConnection, models.CASCADE)\n317. \n318. \n319. class PointerB(models.Model):\n320.     connection = models.ForeignKey(SharedConnection, models.CASCADE)\n321. \n322. # Multi-layer ordering\n323. \n324. \n325. class SingleObject(models.Model):\n326.     name = models.CharField(max_length=10)\n327. \n328.     class Meta:\n329.         ordering = [\'name\']\n330. \n331.     def __str__(self):\n332.         return self.name\n333. \n334. \n335. class RelatedObject(models.Model):\n336.     single = models.ForeignKey(SingleObject, models.SET_NULL, null=True)\n337.     f = models.IntegerField(null=True)\n338. \n339.     class Meta:\n340.         ordering = [\'single\']\n341. \n342. \n343. class Plaything(models.Model):\n344.     name = models.CharField(max_length=10)\n345.     others = models.ForeignKey(RelatedObject, models.SET_NULL, null=True)\n346. \n347.     class Meta:\n348.         ordering = [\'others\']\n349. \n350.     def __str__(self):\n351.         return self.name\n352. \n353. \n354. class Article(models.Model):\n355.     name = models.CharField(max_length=20)\n356.     created = models.DateTimeField()\n357. \n358.     def __str__(self):\n359.         return self.name\n360. \n361. \n362. class Food(models.Model):\n363.     name = models.CharField(max_length=20, unique=True)\n364. \n365.     def __str__(self):\n366.         return self.name\n367. \n368. \n369. class Eaten(models.Model):\n370.     food = models.ForeignKey(Food, models.SET_NULL, to_field="name", null=True)\n371.     meal = models.CharField(max_length=20)\n372. \n373.     def __str__(self):\n374.         return "%s at %s" % (self.food, self.meal)\n375. \n376. \n377. class Node(models.Model):\n378.     num = models.IntegerField(unique=True)\n379.     parent = models.ForeignKey("self", models.SET_NULL, to_field="num", null=True)\n380. \n381.     def __str__(self):\n382.         return str(self.num)\n383. \n384. # Bug #12252\n385. \n386. \n387. class ObjectA(models.Model):\n388.     name = models.CharField(max_length=50)\n389. \n390.     def __str__(self):\n391.         return self.name\n392. \n393.     def __iter__(self):\n394.         # Ticket #23721\n395.         assert False, \'type checking should happen without calling model __iter__\'\n396. \n397. \n398. class ProxyObjectA(ObjectA):\n399.     class Meta:\n400.         proxy = True\n401. \n402. \n403. class ChildObjectA(ObjectA):\n404.     pass\n405. \n406. \n407. class ObjectB(models.Model):\n408.     name = models.CharField(max_length=50)\n409.     objecta = models.ForeignKey(ObjectA, models.CASCADE)\n410.     num = models.PositiveSmallIntegerField()\n411. \n412.     def __str__(self):\n413.         return self.name\n414. \n415. \n416. class ProxyObjectB(ObjectB):\n417.     class Meta:\n418.         proxy = True\n419. \n420. \n421. class ObjectC(models.Model):\n422.     name = models.CharField(max_length=50)\n423.     objecta = models.ForeignKey(ObjectA, models.SET_NULL, null=True)\n424.     objectb = models.ForeignKey(ObjectB, models.SET_NULL, null=True)\n425.     childobjecta = models.ForeignKey(ChildObjectA, models.SET_NULL, null=True, related_name=\'ca_pk\')\n426. \n427.     def __str__(self):\n428.         return self.name\n429. \n430. \n431. class SimpleCategory(models.Model):\n432.     name = models.CharField(max_length=15)\n433. \n434.     def __str__(self):\n435.         return self.name\n436. \n437. \n438. class SpecialCategory(SimpleCategory):\n439.     special_name = models.CharField(max_length=15)\n440. \n441.     def __str__(self):\n442.         return self.name + " " + self.special_name\n443. \n444. \n445. class CategoryItem(models.Model):\n446.     category = models.ForeignKey(SimpleCategory, models.CASCADE)\n447. \n448.     def __str__(self):\n449.         return "category item: " + str(self.category)\n450. \n451. \n452. class MixedCaseFieldCategoryItem(models.Model):\n453.     CaTeGoRy = models.ForeignKey(SimpleCategory, models.CASCADE)\n454. \n455. \n456. class MixedCaseDbColumnCategoryItem(models.Model):\n457.     category = models.ForeignKey(SimpleCategory, models.CASCADE, db_column=\'CaTeGoRy_Id\')\n458. \n459. \n460. class OneToOneCategory(models.Model):\n461.     new_name = models.CharField(max_length=15)\n462.     category = models.OneToOneField(SimpleCategory, models.CASCADE)\n463. \n464.     def __str__(self):\n465.         return "one2one " + self.new_name\n466. \n467. \n468. class CategoryRelationship(models.Model):\n469.     first = models.ForeignKey(SimpleCategory, models.CASCADE, related_name=\'first_rel\')\n470.     second = models.ForeignKey(SimpleCategory, models.CASCADE, related_name=\'second_rel\')\n471. \n472. \n473. class CommonMixedCaseForeignKeys(models.Model):\n474.     category = models.ForeignKey(CategoryItem, models.CASCADE)\n475.     mixed_case_field_category = models.ForeignKey(MixedCaseFieldCategoryItem, models.CASCADE)\n476.     mixed_case_db_column_category = models.ForeignKey(MixedCaseDbColumnCategoryItem, models.CASCADE)\n477. \n478. \n479. class NullableName(models.Model):\n480.     name = models.CharField(max_length=20, null=True)\n481. \n482.     class Meta:\n483.         ordering = [\'id\']\n484. \n485. \n486. class ModelD(models.Model):\n487.     name = models.TextField()\n488. \n489. \n490. class ModelC(models.Model):\n491.     name = models.TextField()\n492. \n493. \n494. class ModelB(models.Model):\n495.     name = models.TextField()\n496.     c = models.ForeignKey(ModelC, models.CASCADE)\n497. \n498. \n499. class ModelA(models.Model):\n500.     name = models.TextField()\n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n' additional_kwargs={} response_metadata={}
2025-10-06 19:53:47,238 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file', 'arguments': '{"relative_path": "tests/model_forms/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'b29e9322-a818-47a2-84e2-6516e95e8d68': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 6129, 'end_index': 6466, 'uri': 'https://github.com/gethue/hue', 'license_': 'BeOpen', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 25274, 'candidates_token_count': 15, 'total_token_count': 29649, 'prompt_tokens_details': [{'modality': 1, 'token_count': 25274}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 15}], 'thoughts_token_count': 4360, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -50.78526611328125, 'model_name': 'gemini-2.5-pro'} id='run--e20d1fc6-2347-48a0-903a-849b95ed61b0-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'tests/model_forms/tests.py'}, 'id': 'b29e9322-a818-47a2-84e2-6516e95e8d68', 'type': 'tool_call'}] usage_metadata={'input_tokens': 25274, 'output_tokens': 15, 'total_tokens': 29649, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 4360}}
2025-10-06 19:53:50,571 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='```python\nimport datetime\nfrom django import forms\nfrom django.test import TestCase, skipUnlessDBFeature\nfrom .models import Article, Category, Writer\n\n\nclass ModelFormValidationTests(TestCase):\n\n    @skipUnlessDBFeature(\'supports_select_union\')\n    def test_model_multiple_choice_field_union_empty_submission(self):\n        """\n        A ModelMultipleChoiceField using a union() queryset should not add all\n        objects when the form is submitted with the field empty.\n        """\n        writer = Writer.objects.create(name=\'Test Writer\')\n        c1 = Category.objects.create(name=\'cat1\', slug=\'c1\', url=\'u1\')\n        Category.objects.create(name=\'cat2\', slug=\'c2\', url=\'u2\')\n        c3 = Category.objects.create(name=\'cat3\', slug=\'c3\', url=\'u3\')\n\n        class ArticleForm(forms.ModelForm):\n            categories = forms.ModelMultipleChoiceField(\n                Category.objects.filter(pk=c1.pk).union(Category.objects.filter(pk=c3.pk)),\n                required=False,\n            )\n\n            class Meta:\n                model = Article\n                fields = [\'headline\', \'slug\', \'pub_date\', \'writer\', \'categories\']\n\n        form_data = {\n            \'headline\': \'Test\',\n            \'slug\': \'test\',\n            \'pub_date\': datetime.date(2023, 1, 1),\n            \'writer\': writer.pk,\n        }\n        form = ArticleForm(form_data)\n        self.assertTrue(form.is_valid())\n        article_instance = form.save()\n        self.assertEqual(article_instance.categories.count(), 0)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31490, 'candidates_token_count': 402, 'total_token_count': 31892, 'cached_content_token_count': 23850, 'prompt_tokens_details': [{'modality': 1, 'token_count': 35848}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23850}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 402}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.014867497913873018, 'model_name': 'gemini-2.5-pro'} id='run--55d7356d-dcd6-4b47-981b-da4cc0c1f542-0' usage_metadata={'input_tokens': 31490, 'output_tokens': 402, 'total_tokens': 31892, 'input_token_details': {'cache_read': 23850}}
2025-10-06 19:54:12,330 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "import datetime\\nfrom django import forms\\nfrom django.test import TestCase, skipUnlessDBFeature\\nfrom .models import Article, Category, Writer\\n\\n\\nclass ModelFormValidationTests(TestCase):\\n\\n    @skipUnlessDBFeature(\'supports_select_union\')\\n    def test_model_multiple_choice_field_union_empty_submission(self):\\n        \\"\\"\\"\\n        A ModelMultipleChoiceField using a union() queryset should not add all\\n        objects when the form is submitted with the field empty.\\n        \\"\\"\\"\\n        writer = Writer.objects.create(name=\'Test Writer\')\\n        c1 = Category.objects.create(name=\'cat1\', slug=\'c1\', url=\'u1\')\\n        Category.objects.create(name=\'cat2\', slug=\'c2\', url=\'u2\')\\n        c3 = Category.objects.create(name=\'cat3\', slug=\'c3\', url=\'u3\')\\n\\n        class ArticleForm(forms.ModelForm):\\n            categories = forms.ModelMultipleChoiceField(\\n                Category.objects.filter(pk=c1.pk).union(Category.objects.filter(pk=c3.pk)),\\n                required=False,\\n            )\\n\\n            class Meta:\\n                model = Article\\n                fields = [\'headline\', \'slug\', \'pub_date\', \'writer\', \'categories\']\\n\\n        form_data = {\\n            \'headline\': \'Test\',\\n            \'slug\': \'test\',\\n            \'pub_date\': datetime.date(2023, 1, 1),\\n            \'writer\': writer.pk,\\n        }\\n        form = ArticleForm(form_data)\\n        self.assertTrue(form.is_valid())\\n        article_instance = form.save()\\n        self.assertEqual(article_instance.categories.count(), 0)\\n", "relative_path": "tests/model_forms/test_modelmultiplechoicefield.py"}'}, '__gemini_function_call_thought_signatures__': {'fca9d2cd-46cb-4aba-ac64-e0950b1971eb': 'Cug4AR/MhbZXDphdBuJdDs/Vo/bJkDOEx+OJzFqxCFRjZx3ptoNG52LdokqgcxyoDkgGmByzSqVhZCzWnEaKIBrlZ/GlrtoCA+KxgVOa9ValG7GEmJCl1zj7g5RHe3ebjknLg8u2fwb5yiUT303vsA/HRMIObpA/bMAD9GnMgfET4I+s6dGjHSxJad+KEI5du/7MpnXL4RIrObfvPc2HXjt98ENzkeTq3+8BctgoVx17T++rQqOLDC5rl/hXnWW+nLdWCQ60j4zPQ3STyS2baV8CGmNeZjbqFUFHYQ5YPnnF4oO0iTR9jUHewn/p3oddN/NpumcMFSblX+kCHi5LA6qMFvFPSBFac+UrC8UADk9S4lkyi4UBFEpZRcSoY9T/NalTi1YmkjmV/T/0enXaV/ZznGUW+yaHWZLNFqZgezi9VdBiAezKl3wkCWBuqFQ5O2jsxSh0J2l0208e6UUPnFS3HYLVkzi7Uav2D60EqWW2qOwFSau2RXPgktVoNEzenlzZZZbXaFajvL4yunWMCKzsnMozRb7CmS8mPGmvH+xO6REbTPJu407DZ9iulF5t6uK1QKUjAhgqbUrRu5QPGnGOwVWF3GRWC+KI1O9+mWsS5fuY0JN7PVtXDjjSqUDdgVCt9HwzowYDQGMji8t2ofmCDeJVzoGptZqY4SCaRYT8yDZ/Ve3DSOU3cLIPRXEzROkoGhQ8HmE5qITbomigPO3d8xygBLy2UYRdlP91odReo24mHiT3HjeUWAsK4zFc5F++XeCBoXTiRAx12RubJoMW4qCK3RjPjIMiHJA3Ec2sYOq+5/Z5ZuKsdG4rA8wHPpBgbunnyRPPgtG9EEH1HlihgY1QV86lBQzdjw5Xqr4JpR+uoor8SYpuN1RY69BOgo9+ek4al6W2rAlymPRQlMNx9Ak8E9/xo9G8LmIUYOrcfWNdtV+Nw8imXpQmdnboYyE3wqPav8C/sSRb/jSdAsfdsEg88+jBlUq4KWci3ehe+6jCoG42GhoQGJngN9PpYL6mQjaDaAiOe/ZvGvB8WkhKXSJXdVcNiuS6VcU6vnpZijyw7MGfCKt+3CHla6vrhBoJvadbF2ItcIPXmiTcamdcSexVPxC8iI7vAv8gchRO7y7iUU9Y/BIFcjenLNubvmaOM1S8TXlCQ4omxYnicY2x0kCYGvE8aRng+8qCWDTxWpRT/YXiNgHKBY7U88V3DaNEL8YlqiiqnmlAOzSpwe9+11o4XwdHCn1N4s2zqN3u+hbW9/hX1GUPszEQ9f53zul0GzzFB5j7M2T3q3K21I3dXYNfzUyIK/IqCQoFmfwj3zNNYQnuNRRyaTyNA5El7O6Kf0e2hEtofXD30zWgEZnmeEeLLuS5rV9tUwG1fWPgzTP87HOJolTjmg1vKaMrMTnVU1FkSsRyDm1jHka8kGe7dqWjCFWd9j4rqEEYH3IV2bxSnaDs4PgIFs3hbWWhXbaLWZoi52wH7m9o5EkPyNSHmW5CmkWTzkbuKvPSmP9k/wh4VQvvbLWoipK0QWvlYyE1aqffXCtMspVX5ndbNGFajjAM4PtLx3QtVzbFQiYxzX2AsH/KpgyarEP3qbV7JEhppzC/kOOe8uLHOPG91qjioPRr18ngPFORUHKfuR8fplET4DfEDzPXsLLN2KiY7x3Fw4uzlj+bGPVdoFOp38sjhkchyGFA39jCQbqdS5pNoNdadL+MStQJsVNy1LXVCSJu9aVAu3g+NZdkoLoXs2vf/jKAgeXv3AbEG0sSIBYpBzJfECRIfpgQkxwGfWAyhGDuD+S7j2akv1M8Gr0zR5Lq26Z0kVDH6PXC223IZr4TaL5nFCreUGwIcfoTcgG/51SxxdJ/pqXrK4QSgEhbyenphKt7JNYYVfuijbHFHHRg6Oa0yFpGUWfdcGPUGJ0P9oAwjpmVZbsOeRSvzOTQaS4yhFPayuKrZGSUAB8nZwvhewHrMhiYBNw1T9ff0+Z0FPhdxxbs1xCd+aBslh/jS1jOiNfHY8YavhGN5KTCooldS0UEch73c1eezBt3PpbIq5jWrbP4IbCa4ZTKv5symKK+oZXeqkX6GFJWAPL4lVvmr5tlTRp3WFY7DqNr2vRZr0OUKiyg4vqFf2D04vV8hJdz1+AXlaXKcKG4fqLleOSTjGpb5wUioWZdR3YTFwlNGHUrW5I6tMnYTXGvK1I1GbP2xuu/l482Bqm8/ItC0dCcAzvHhuJcs3Fb0oyvDqlDvahjcVzMIATPGA4SLxqLL4oV4PGnJ7y6Pnxl6oohCTrqTf7fJV16OzGSnwugmEvk7NttBHKEU18W+XdFyQzYrr4xmgqoEgJw1HdGa1uznhiAoxyHOr/jgvnEHLGBHCRA1W3yNh/rdwgpVjzi+5fq44Y9bc31qAhq67EKAGJXkup9euGsKf7Y3X828ZGqP299sIOXC/TtJTSL8lGdAq+emyqfvLtTHMiMHkcJPPA086HjfooydOWwUM2JzEVmgTouXyikj8GgJ+Czptj50F5gSMDSou17tmuAeT57/XVQcjtx2cySUkK39pe3PWgkmIcabMrh8cS73Xt6BLHGlaIoHuKYvHBo0nBL5dISxbj/c+HTsvYgltCSu5vISEHoM5bBQQtuWMQX2puO5SYUUIUfeK6jZSYSvHP9wUN+ZlOO8x338aLFNZcPD4hSvhPh479IiwS/T3R/pFD4Z2YIxDGBDe/wcL7Jqus3eQPjdrr/TzYpWsFGgAP4auQzjBdZbVhyJoOtojN+xkoKUXGRNMI9lTpiVtV+0zfrrXNX+nqa7goTDzdV8U6Awo7yxx9ifMm+cgAc+RDX01sv03twIF4RyHmjkDf/iGPDtmG9q7f2ucKFUdXIV7HSNrHcVbWjBcvkH3FbfMV1joXieN9g+xIvGwOgNcVLC+9yDMBuqd6kJvhQhZkT+taIaOWYIvKpkR8w6WPNoOEcHE/dnG/rNJushtYcwFLCrNGUpIfuRVb8owVbBGP8czQ/4scTPh+dzXGKmbvkEGhBg56aNafbUryP5nBLEXGwiIvGVRdGoS9Zecnb6ffY2vhzhihQHe0z0vfIMQ4twiH8eg3hTtcyR3o+HKZe1zD8b7quf6IFDi8dLx+WDggZWU0TDfv25Z7R04J30I9/CXsWEW3eJpgv1HKaPj4vbqBEGgOLgjbGV+qWW2yboiacx7erA9ZUhkFtkNifirEC2uglP5fYBMfYsIDkHqF66vWYNOHVxaOqb8lLygz/0CbOch80fOYGFzNwuiieLbQoSDlhgMXuvv+XvyjjlFetwCE8FgKpEf8RUxSCACtk0joKTH7cAe0rxQ0w6X4lpEzI+TnyiyUC7GiJK5utHpLiTtXwyewvyIz/p1os/1VNWxme95Nm9XBOpARpCn6nX32ic+pn1EDEyTzF3Rp1SADhcrV514r0Rofmg4Ct5jwDK803OmkRQ34hF/amWLbQjXBlNgI1GIpoKrkiVlTvi0/pZK06EvEuHQgsn4kJtLULeknHZkw8y163VUfM976gu1IPElACmvc0y/NHClMRGjFB65flueUlP2BoPGp9AhfGvPKjFF6jnZk/QT+HdW7vA5FVfo/vJ0Jl3O9r4xYUIqQFTaD7BjGngjDkcBY8fR+DOfejVWypVcLT88ctaNHKhYUO3htwllQ+XUMItlcaCeRzr2j9OsA1xFa1zJ/gt3pLv0kFs4Z59yKXeIwxiAJjSse/YZPLE+0042FOHNwgggyHNImiuza5zMWhlW9ACREMXlH24lPFMjNPqpOXcBey4hFO/kETNPXbUntnEmCOyUmOO15xeVUiEmKNdI0L4h/YWAjpASOZZ4ZrDAJWp0JiV02sNBNyszTMa87m/nCQ4YuQo6f/unErKQ8QlswQOAFTGZiDeRSNm4nOhCmbZfnLS6D+7kZUZ5O8RWWlmIfA5Oy62EDvJit3UlpOwHrbO9nTuSavG7T77LgUM5oQVrVa4kYzl/WTwcA3C7rv1svEGuSGTjkLqb2Odriq7jj/UwTFArPEZRcEerStnW8PUob9YnkdiRrwH72c71pKhMHNWF/6SYsFM440k3a1iOS/nxGRCNu9NrTQewns1JFIhyaQAH8WyZtFm3CVkytBgePfHh8Bb6YOPcCeW6C4FVmRsMdesvnNBB2MUynpoj7dSC0215DOL1eEW3QxVUzepcJm/NQ4QZn6W+hoSHdygB3U0k29Xx2KwptqcWZyEXYkMq04CD+gn+wKuYu4zRAOZArnEjDw8ln3Qz0xDqYNMxDkmVo5iQSBJNMk/ITkiN7sBebnU1i7qp/PXuiGfHp3Gme+kmYZLWdZSTsDaLudsoiLT9Cas1fMBkzW5QaPVDXyBC2U2lKnjIXxHcywlDbHfvxFFGvdmIWqG8H19mXRvL7MQdqFKhEb98mTYOzwW6qS9MXpqwDKekDQ1ivtmZmgF3uXCyhWlWGza7EebldnZ9ES5OzU0yCqQ3lPLS3Opx0UIfo0t8HJyQpB1OdWT7Wuq+3T/2Dmn6nn9XrDphO3+x8vrVlqwo14ZSziUjYAUpNdY6jKZzu3H4j7L4YT5VgQqTJ3uKiNEgwOJkLxZW9YP/F8R/Vv+eacAWrYPLWNSXDCDzykhLHSE8hts2RyJC2l21FcsZ7in9b324Od3leWDNINSTZGQdicFyPw6xVmkAp8xZQ58FXAhZ4ChSyrOF8Pr358xiTZe54BoqnCQXZau0C23jMU7xpKtYJvzG48vKeN8EHDzHxRC5rrGoYg6LyaVboEKJ7XfVoLwGe7VA/r6k7cmdWfhtKDi6ddm2bsqqiOn5OVeKP0sfx1E63QNDaDMLHTF/FGHc+/jnppSw4bLR5gKM4I2FBeCI252uh58ePpE/megKJ4e0UNQtCnrRa+LOL3ad8uaajz8/6F1FWFTj6xUp2juW6SMlMfzi7HaY8PaI8R+bdmyYc2oZNdHS4gSX2c09/QS/Gw++rVCN7XGo86wqplaaF6yfEOFVTdM20hYFvCx2ixVRyFWrBdkMwDBEtRhY7g8Cj8Ign/3eqjUcVGOIXjFLKh4Y3bSCFdAjGn6wgH2KCvnNuYgitTYyBxlanAErlr9CDw2pViAcjqiuNNLC/sRFs2SOYkfUXyf0eW7dxJzMFjvVtp+KlwFHvkizayfwrmpe5FvVqY3kBhrnCvV0xZqn86wgndgpxW90He/ZvcOlcRnwiHj8nbeznRgpetKZk2Cm0FWQGiUq7tgDL/Ly9nXm2wzexeDRueyw+8ZmAqEOSCeqbxBg//tB3Xzc0KlfD8bYx2zTRbE3ugVIify16WiZ2+Tkl9s0fjYK6TUc6XCQ5IiCwRaWKBDK4oHi48uY3wLJQpELWH333vLlnBiAoheES8Ujv/VXoWLoM/EW75E+ud8wYKTY08wC9+bme2StcyJpV5UlGvPuEBaCan7ckJM4TOv6WBkl2cb//kOzOn9IG12dIwZ9pvUprLagB/N4bnd7qnTc1q50kgzXK+2DmKK7igsj4qwyTlFcvCXEnTrp70DkNweDlBVEK5QJpphtZ+O7WGR1YUWmoQ9/uFqx1ChvdYV84AnSTMHNkOeltpLe25T0JKdonVB4MEqbPOOxvkabSGdlcztoG5b66McntzKB2mBxx1/ItmKuaBg287vC3f3AAL/E7sCoIw7YLysPsz3oorDMGA2n4eoG6DpuhKJvKBdw1dp1hIwWhMrFBPh2k8bpB/5mONCU3SAZPcCvx/jEUM7kfxUT/5hjLSSaSU+L1XryAkVDWaTLKdh3C1XZUIZEaUiLAH3VWczPwV/6P7aHkzQ22yjwuXdCUMeg6XYmxhGwSn3Ieyf1BmuF/lETP7SOR3ahDlagYaZH3PPflGVlGeVlq8wq7STJMMZW2TJhHab2qj+SEjkcnRD3K3A6mCECUNuApMHjh3HAE64+5ejc2x2gJAcHva2vJwpjZrhSAMjBJe0nkr9ei7k20B6aU7eJmBaITXwtk5oEwwqIRECXUbl8kvyBRefhNaontiyGfbBHiuzXs8mu0W8yZd73fFpEZJHKtmQRoARUn0Hw+/6LY+eLTZCzTnw6IkvFOpyjK8SXh8J4PHiVXXPDaNgfL8QZMiY9WFWw7zJ7vB6RRYXYtrBgx3xm9ygMeb1LX1Muy6ozj5fWlZMAjL79oRvuJi/CrziF9QtYsisMYfTyehzhzXpquta4WrC0SdQQlX5EUS5DOin34k4CaDwkkGyR9b0ujG3bjX4I9NQNdjG6FV+mFDFAe7fA3pX25QWbeQQ/tt6qDF3QEjeKWzZUVfiySlZRnO4b3Y0ufBKn8e0Bm/kb44tehfty7rdYeLLcBqTxWzO0IMT01wQVTrxI/8UkYs780FCi4nrhEeDV7db7M9Mau52pExuFKZbqXcTxvM/cCrCZD5oFJ21Ofslc5bo0nV+9abb6eaVc7LS1WD4g56uyNCKJ0wSD10/AxTk5RVQoDqJ9H2p9ZWVi7z+oct/WpawYVyUiJz3qxv+u0sf9Y9KpWEmt6QYnOb/WWQ6t/k+njY78kAobljQ0r7shnrOhyfH3EzujnNOha7eOYyRjIppqiO78BHCFmEIQlVJrEFikiqQSZcg3JPGXo3homrU7y3EoTZd7Iyd0RrPw708Qf2QNT1tplsGi3Zvrv4WaSPvqZ+4UO0TKEUgo5HIqwgEpurpzcmiJLjs5HsFVzVVfnsJDBIAeILJ4t/d0VGsnPiS7ypSZE8V3uRC2gX8b8GLg1EMWOLP2+4ysNP12yPpC/r4Cri9YV/ZgXA/8X2aEhiX0vCELUPrb0/kedvvlBbsDGAxgYeTqzsLfWO0yXJDTIMU5UX5Vq44vxpEUMzLHODupN/KRnhRuxBXfYINMX2E5UYl6FBvAm5JfEhWHsWUdp/yFFdxoOFMWIjXw0OIIJRMIb2iNRpmXlKlOEdpkX925pa5l8FJ03ia1cEdsu5rlqZqp9RV9OghBn6meGNkSLRTaFi74hAoavi8ar+bmk1mEvF+7YB9uXhhC07kTt9F0he2lYbQFZTPip2QAJUgw07xXGG+JKyVGU5qhGADMjPjMq/SxUsAPcLlIDKG9aa3YtNq0wnAFU+t1eEvBvRmj6q6vAaW80qbg9Vm5h4C4d+LsOvbISQxUHTP+zMy7xkcGWckdAZtlQM4iqGphLNT0D/7jzIM7nSnytNpbnvhgsNDdV5Wb3cuv2lCoB3cv/hcnOTIAQWpXUuE91b6mW9E2CdE3A9YBC4ISe5TnpjYThNg95hBiXTosJZ7lLdDvL6A++juhD/qCv1PTF0WMoVD0XW6QtEsRuUFWL9K2+I5qjDOiFYztlEU+jXtHYIdtwKDizwIvfBlD8vdN4Xi9o3j2YvQP1iFds02QXhaSgZVQxzDJPVwnPiqE+7EVh/x0YOaKdaWzbcCKCF0WfnLw7czHotK6zXQ6jUV9eUGcBRpChHzdSvnFL8jtzm6T3dxo478VNYc/qqj5NBz30B1LGzrTcxxBvJjgZz2dAhuFOrNRN6ZiK42QFY0GOAKTw2XLOBTHBhOnTcR1sCbGZxRYOwZ3IygDsdzf2aeb6fX2tIkzT2I2NGs8mGs1eIAhtdq4/Alfh5hYGem8AKOQ77clecxIjLYBi9Q5WXuSpT4FdWlS8IiHrIQrwM9bhJpa+2FbuTFlqNxgCrWWSlq3arIxdU1r+lLJNsXPUO1IYyZ1TonS5ns4oxWASN+xKNeQX/OhTj1H1eewWkHSUVrXp60Cnz2AgJ+e9+AxqHnHUhPb8QtJX/6fTHqeWUbk6ayk/rbdy9Obi+BRIpF0f6EQ+/kEQy1kKKRlTWi67Cit1XnWAXfAJ9VxZJURkUV+TinZ+Vf4vkj5pHSWSnNN//FZ9e9z07tEQADkieS0u/M8iFQylgOpFct6TPm/1W39GS8twhp3g1h0zZOPF5k5MzD7wLs8A8s7LSgmlIa+8zmcUJNaryj5atPeEPO7MTG6cxQOZOowVoJpK7DfGKbP7IDpsKH6szzUjTp4/nOVBDTCWx+ocQM83wqzSPikF6a9Kkd4U01eaEDjpDrU4SDl8qVmKVPEG54shqn9L8fApO/9WdSvWs9apmHLmra0kox3H/xB5RHOyym7D+snWjMCtfF/iFuXKJ1LgmXoQv6Xknqxv+3VX2ewSsOvVZrOIBjW+5LOMDvFPN+OloYmARNMdARrPwYG8a5VPAgNY5vt4t+ryOeNCd2S0pyUiuKiwhtcit6kf8QqSz82aikSPXk7mOkPJZU4C61yPLwCq+4r4tq8vKZKIANmb2kjIwRKO/2N4/pvhCrT5U+yyXQ35LvvKtYtf4L3dyBA7tktB/iVIADeCpVuU/Z5+L4l3S97UpgUj34gY0jCYAGVHBsYcVKuNSjaDh5Tr4FXQl4LcWRg6LrkIyHgh6wyHVg7pG7Zu2k+2PrhC0w04YPUNAyJ1go+Vub8MgSQHDHc64ibAkOn+YRT1m3/xSHBI5qPd25on2kww08qY+R8D/u0wj/mLM8Swe8s+YFlKhpuffRMakYpsDNyx9H9alyJla9NR1kzVwjqAguqxXBF1m5nCwMaLecNZpOjYqQ2tBqtTVoJY51rGKzgMQUFOnSxX2Pcwp71FCrzWPXVY1nTep4kjWuuDMuyg09O5aSxuIByMNp031R5XK6mn4XDfvKh6S+KBRfHSRwf5CIVwKWLF5V9mT1rMb872Z345pU6MAtxqHU0xZcXlOX6U6F9pJPUrvsyYINQHpZcwZh7BNxKb++OcqLZj8VZSUGzAcNaxGU3ZtzFlPBEkeCa+eXwUz3HhbWKw2ZfZ3lypNNj7knfWKkC7c07efqFJ7ZUxo6B7HWzT2ln1lMBA1qmWu5EupsrKsZhCYlnagPbU+PUr5CORwQ7GkeWZQfGuPPalb2+b3Me0DFHbMtiY9X4235ZhK7tIafzhGaMSARJchuJ6iNOk+eU7FtNPXjWJzRA7fH2psgoFNdLu2kFqqsc1XYQ2YQrlECLRhQUmvK7Qnf/pJMxhxYLmUfcRdjWlPelsHyCKQvXFTI1VkBO9Mvl4wx2VX13vB+2SRbO2xnoB5H7Q7HkgDvI1dwloJEZFKiYNpipk0t71j4oLg7qW0fcl2xx8c3kPONbhcG8bZRzGj73pjYiuoywB9PXJW1ILuMWWf1VPj+uvPEQCoFuQla09xRTSPLZPGq6j3dsyvGwQuqxpD/jfZyKYu6QtMKBSh2wiiYmFJjEoiMgrSMmBRvTPOPajsdgcKxXsGjnMDk5YTsQCwTCH6ydlZqX78keM1uXcE/p9VtLe4V+hcwsD3FOKcHH53q751FmPNQ+E74VJOyhGIP76WYxm989OZQAKFeTO5iJ4C+XF9JgOPSBLYPWFpHaqCmCMp8PmuWARpjJ0znimYN+Qy5uU/YLeC9C9+K1O6j9mNMRmxFzKzWeoeSTpF+1wKQkKpaCoYuOc285peQe++zo1HnqKfQzUu7wp60uwoou7hq8zsZ1jDBOrChjTYE8XsmDH3sJQD2vxybC6Y+UudzYxOXtOMAs1Iho2YKqcVRkXfd35f71uDQzWwAjNSBE/6tiHjEySDbnYAPk5MmNxf/hfA/plRuXrDumh+3A5Al+I6BfDH2h3xL/FxSB5vZ/qGOHSoER61Hb0fwkUznyPupMjJ69A8ns1piMjKs1aX7gDHO97KmvmA37yDdgbyyVLR4SfTqIP5RCO9F6COGdKkEHLE314MvOlyAqIk1SMa'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 54360, 'candidates_token_count': 419, 'total_token_count': 56763, 'prompt_tokens_details': [{'modality': 1, 'token_count': 54360}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 419}], 'thoughts_token_count': 1984, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5747971637152259, 'model_name': 'gemini-2.5-pro'} id='run--c376a98b-92a6-4800-b0b3-9b0e141834be-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'import datetime\nfrom django import forms\nfrom django.test import TestCase, skipUnlessDBFeature\nfrom .models import Article, Category, Writer\n\n\nclass ModelFormValidationTests(TestCase):\n\n    @skipUnlessDBFeature(\'supports_select_union\')\n    def test_model_multiple_choice_field_union_empty_submission(self):\n        """\n        A ModelMultipleChoiceField using a union() queryset should not add all\n        objects when the form is submitted with the field empty.\n        """\n        writer = Writer.objects.create(name=\'Test Writer\')\n        c1 = Category.objects.create(name=\'cat1\', slug=\'c1\', url=\'u1\')\n        Category.objects.create(name=\'cat2\', slug=\'c2\', url=\'u2\')\n        c3 = Category.objects.create(name=\'cat3\', slug=\'c3\', url=\'u3\')\n\n        class ArticleForm(forms.ModelForm):\n            categories = forms.ModelMultipleChoiceField(\n                Category.objects.filter(pk=c1.pk).union(Category.objects.filter(pk=c3.pk)),\n                required=False,\n            )\n\n            class Meta:\n                model = Article\n                fields = [\'headline\', \'slug\', \'pub_date\', \'writer\', \'categories\']\n\n        form_data = {\n            \'headline\': \'Test\',\n            \'slug\': \'test\',\n            \'pub_date\': datetime.date(2023, 1, 1),\n            \'writer\': writer.pk,\n        }\n        form = ArticleForm(form_data)\n        self.assertTrue(form.is_valid())\n        article_instance = form.save()\n        self.assertEqual(article_instance.categories.count(), 0)\n', 'relative_path': 'tests/model_forms/test_modelmultiplechoicefield.py'}, 'id': 'fca9d2cd-46cb-4aba-ac64-e0950b1971eb', 'type': 'tool_call'}] usage_metadata={'input_tokens': 54360, 'output_tokens': 419, 'total_tokens': 56763, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1984}}
2025-10-06 19:54:13,504 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='tests/model_forms/test_modelmultiplechoicefield.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 54803, 'candidates_token_count': 14, 'total_token_count': 54817, 'cached_content_token_count': 52474, 'prompt_tokens_details': [{'modality': 1, 'token_count': 56784}], 'cache_tokens_details': [{'modality': 1, 'token_count': 52474}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 14}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -2.8865233616670594e-06, 'model_name': 'gemini-2.5-pro'} id='run--b77851a8-14fd-44ac-8743-900d051f9a25-0' usage_metadata={'input_tokens': 54803, 'output_tokens': 14, 'total_tokens': 54817, 'input_token_details': {'cache_read': 52474}}
2025-10-06 19:54:13,683 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/tests/model_forms/test_modelmultiplechoicefield.py b/tests/model_forms/test_modelmultiplechoicefield.py
new file mode 100644
index 0000000000..35f7c0827b
--- /dev/null
+++ b/tests/model_forms/test_modelmultiplechoicefield.py
@@ -0,0 +1,39 @@
+import datetime
+from django import forms
+from django.test import TestCase, skipUnlessDBFeature
+from .models import Article, Category, Writer
+
+
+class ModelFormValidationTests(TestCase):
+
+    @skipUnlessDBFeature('supports_select_union')
+    def test_model_multiple_choice_field_union_empty_submission(self):
+        """
+        A ModelMultipleChoiceField using a union() queryset should not add all
+        objects when the form is submitted with the field empty.
+        """
+        writer = Writer.objects.create(name='Test Writer')
+        c1 = Category.objects.create(name='cat1', slug='c1', url='u1')
+        Category.objects.create(name='cat2', slug='c2', url='u2')
+        c3 = Category.objects.create(name='cat3', slug='c3', url='u3')
+
+        class ArticleForm(forms.ModelForm):
+            categories = forms.ModelMultipleChoiceField(
+                Category.objects.filter(pk=c1.pk).union(Category.objects.filter(pk=c3.pk)),
+                required=False,
+            )
+
+            class Meta:
+                model = Article
+                fields = ['headline', 'slug', 'pub_date', 'writer', 'categories']
+
+        form_data = {
+            'headline': 'Test',
+            'slug': 'test',
+            'pub_date': datetime.date(2023, 1, 1),
+            'writer': writer.pk,
+        }
+        form = ArticleForm(form_data)
+        self.assertTrue(form.is_valid())
+        article_instance = form.save()
+        self.assertEqual(article_instance.categories.count(), 0)

2025-10-06 19:54:13,683 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 19:54:13,733 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 19:54:13,733 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 19:54:14,253 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:54:14,253 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at 7af8f41273 Refs #26445 -- Allowed using UserManager.create_user()/create_superuser() in migrations.

2025-10-06 19:54:14,253 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 19:54:14,354 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:54:14,355 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 19:54:14,355 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 19:54:14,355 - thread-139660780025408.app.docker.base_container - INFO - Creating directory tests/model_forms in the container
2025-10-06 19:54:14,355 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p tests/model_forms
2025-10-06 19:54:14,456 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:54:14,456 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 19:54:14,456 - thread-139660780025408.app.docker.base_container - INFO - Updating tests/model_forms/test_modelmultiplechoicefield.py in the container
2025-10-06 19:54:14,459 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 19:54:17,810 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "./manage.py test model_forms.test_modelmultiplechoicefield"}'}, '__gemini_function_call_thought_signatures__': {'a2d0259e-461a-472a-9542-95a1564fcf5f': 'CsQHAR/MhbYRwUKBvShY5bqcTiujxsU2fd5ixMlCF/T8FOmwQGUUDzzJH0gFJLG7tB1YbzIIBdvQvht/OTl3c450WlWJ/F+b6T7kqdKe0GlxNjuVg+GTwyrNJXAqd9UaemKZ0O/ggIiu/StqvwV2XUObt2dSmXSgaD/XMnQSGhb6+7LgTKlUVcibqeKqbsy4G4x2BQV/mzMhl9peuGm+rkFdvBploQGG7JCqOy5e093tnGxdZTkN/U8mIRV97PyR2/BwIBwaQreJkD7iKa24XAh/4Tpcg9ydlTryhjD5y4QZsRhwKB+idg6EE06TMDos2dLPgWsG3l3eN6QOJxX6XJ2CwyhcZTK6PlbzROKDW9txJEtX9zgi55LW5RYOZHT+v1wS+rGTSPh7mKit9s28vBPFpIRcR1KTNx82c2CNzrfhd2gYpy7H5yryi7VaohmjgtQN1CER+ZV3VBEF4PfsyxMSNapjYCeJbvkbZVmSY0lB/nQyCxlfBhXqtZQx1i08yCvHDLh/wH1jio+4lupcgL3UDutAQJkRqZjKGHY77nWgg7Jr6vJtceIqr6RkxbU92o+xeVEYui1Lgi5mibgWCf5NgBVS7Ihlv9olqh/h8TI7z+erelfAiocmzNU3Q4SfmMvu306lT+5BfRSptBIwpk2yoYrgn9dTFcFsBcunKV8+Ej6+Dc+N9+tCpjw9EXbnQYGo+WC+L5pYTONZ58qeD9uFy4xSu5BWCsdu9Ul8AojRXYGHsylV0t1R00uFet+CwueFt9EXACxZS7JeIU0q+uyKr7UJEwNW1Ux27Ml1ojaxejoQGOUcsMQnFJ8GOqSJAUMsCvvG2b9lZIgVsL8amSK3Ah/JbF3E9WX+DvDzWShFcGU8nZGUYopq6id6SYDwEmGuit9nFf1NRjQZvFFSb5OIC4ieappCkdKqVRsqRkTtyhX/6sK6Et8PzH4W8+QDMDi6etRpwntGRPdxd2AaibJuDupQbonvDBTnI3ISCABxkDfRx4iYJmMLUOhoSigKYUZu5H+3ECayKrynJ6mpIT7V9iqsEXtpt+X9S23yge9npwiOlisAPrfZ2N7y7K2lJW8WbWqYcLDYk1ul0PQRdyzqEKFFpRICx3pAYc4hwE3dNOFwk5pa55tXlX/7hZKoRxnKaOwUM+pcREVbqEnCm3+17ubTJ+B1ps5BDRT4yrrdhkloWiw57g6+pmHybyrYhyeChD9YZoiw9+q8QG6o3K6vrHxIslAiilvWVEY3YbpTH+qxDqq5FrikquCwTSrFzSzIwQlsKg=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 542, 'candidates_token_count': 19, 'total_token_count': 810, 'prompt_tokens_details': [{'modality': 1, 'token_count': 542}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 19}], 'thoughts_token_count': 249, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.6050870794998973, 'model_name': 'gemini-2.5-pro'} id='run--a72064ce-8bbb-43b4-8bab-26f4d9367f2c-0' tool_calls=[{'name': 'run_command', 'args': {'command': './manage.py test model_forms.test_modelmultiplechoicefield'}, 'id': 'a2d0259e-461a-472a-9542-95a1564fcf5f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 542, 'output_tokens': 19, 'total_tokens': 810, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 249}}
2025-10-06 19:54:17,811 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ./manage.py test model_forms.test_modelmultiplechoicefield
2025-10-06 19:54:17,912 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 127
2025-10-06 19:54:17,912 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

bash: ./manage.py: No such file or directory

2025-10-06 19:54:20,837 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python -m django test model_forms.test_modelmultiplechoicefield --settings=test_settings"}'}, '__gemini_function_call_thought_signatures__': {'fbccd935-4e35-4f35-b8c6-0d503450bb5d': 'CqwGAR/MhbYw9lUP3I8vDgscsyzz/BJcTxJ/3kMzHheZsOXPIuUGYE/tA4uCgv2kW/q0ty2PBMQbaRBSnmIAlSsQSBqcrwWlwdGkQeSZCkwIbKLHtvB9JbrrdFSgeYrbx2wmc8VbQAHWHgCgS6lZm7mnEYvQnU0jbgLAJUzVkWOsN6QSBFUYbCD5yFYzWrfeWKtER5vWs31yyijMsmn+rD1WQdwB4lKIq8QDo/OCs7A8u31xtrWRX7/gMmQXNmOfagXnZpl4eSnDUwx4SESNwG9RB+5GzQlgQxi9NF+QBbSViFTarGAig90Eecof79CS+xocY1YgcK3jh+E5dKwexIotoL7x1uCB4gLxBACoAV+xaF4N/PpR6pfnIgQRhfeVWz337oo36jMWBc38T0x/LtxJ8aoP9ERgZeGCX9BJsFvCsOFzGNNNebiTrLIk71IfdQ1KWYK+CpaAySLSPQrJ2enZqd0TIj6wPqt+PWIzPFgtjVFmjqJPLUzh/ydx8okvMxXQ5p8yC8ZEK9U4rzaWkgoE5olxKN9KHVY5jA+fV9WDIr7CR5VNF0zJ1NLna7zX65cYNmfEAV6mbgeLHeVR2k9YvBzOmsnsJ6I6xb6b/u/5uq4lONCF4HMCxnJo2hpXJUMwsUxXEFhxoVhZSPNXXdm2ydGS1ySdpSu8zTs0JcYhvicpRC9wnZfavkvPWAt+w4njgxMx2vaG5BOWUAHEY+ZMXKxxpwOeTe9LjSaTbgFmqeUPV61SEvzKO6UPk0baWhtvcfflx1KdARyj5BZlCULNWF3Zke1x3MD2wIUdBKQtB6unGB5vVW4tayLKj8ikfyfk+GijAi5sDIDz0VbkQY8/xZnQm4B8hr//P/5GSLgbijhc8ATX5n2QSVxAMkITFlhB432W63dVmPtlSl2bHWUE7dD2aYm/psXS/6gGBxcO8PBzHxcXMs/U3j3KwHycW89q7C9f9tVmU3VJ1GGGDlIlcSm6t/1WNnJe9MIC1qXkRYJ1jqNWTdx+5j4z8tiZiuB9WYCQ9ROp8RJjmQb8/u9IQj+RALXuSdQVlvn0RH46e9vSPATNlrzfxUFIBiU='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 579, 'candidates_token_count': 25, 'total_token_count': 797, 'prompt_tokens_details': [{'modality': 1, 'token_count': 826}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 25}], 'thoughts_token_count': 193, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7292957305908203, 'model_name': 'gemini-2.5-pro'} id='run--fc65f12a-a398-44ee-bd3c-9d9a2c2a351e-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python -m django test model_forms.test_modelmultiplechoicefield --settings=test_settings'}, 'id': 'fbccd935-4e35-4f35-b8c6-0d503450bb5d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 579, 'output_tokens': 25, 'total_tokens': 797, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 193}}
2025-10-06 19:54:20,839 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m django test model_forms.test_modelmultiplechoicefield --settings=test_settings
2025-10-06 19:54:21,253 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 19:54:21,253 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Traceback (most recent call last):
  File "/opt/miniconda3/envs/testbed/lib/python3.6/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/opt/miniconda3/envs/testbed/lib/python3.6/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/testbed/django/__main__.py", line 9, in <module>
    management.execute_from_command_line()
  File "/testbed/django/core/management/__init__.py", line 401, in execute_from_command_line
    utility.execute()
  File "/testbed/django/core/management/__init__.py", line 395, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/testbed/django/core/management/commands/test.py", line 23, in run_from_argv
    super().run_from_argv(argv)
  File "/testbed/django/core/management/base.py", line 342, in run_from_argv
    parser = self.create_parser(argv[0], argv[1])
  File "/testbed/django/core/management/base.py", line 316, in create_parser
    self.add_arguments(parser)
  File "/testbed/django/core/management/commands/test.py", line 44, in add_arguments
    test_runner_class = get_runner(settings, self.test_runner)
  File "/testbed/django/test/utils.py", line 302, in get_runner
    test_runner_class = test_runner_class or settings.TEST_RUNNER
  File "/testbed/django/conf/__init__.py", line 77, in __getattr__
    self._setup(name)
  File "/testbed/django/conf/__init__.py", line 64, in _setup
    self._wrapped = Settings(settings_module)
  File "/testbed/django/conf/__init__.py", line 171, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File "/opt/miniconda3/envs/testbed/lib/python3.6/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 994, in _gcd_import
  File "<frozen importlib._bootstrap>", line 971, in _find_and_load
  File "<frozen importlib._bootstrap>", line 953, in _find_and_load_unlocked
ModuleNotFoundError: No module named 'test_settings'

2025-10-06 19:54:23,016 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls tests"}'}, '__gemini_function_call_thought_signatures__': {'adbe69f5-56da-470b-9cf6-76beccbeb673': 'CoYCAR/Mhba0RPCGQghCDfQAAcE5m5PDDndw9g4LLj5BwA08mL8AfPPC8Tm6rQKod48fgJPIW2ieFK11iCSO2vmyOrflp7EtfxwSbgBx/Ejt2FM9SZdLF+oudpjRXXbz4sNWsxqRTHoiHjAzqkUNuBWeX3z7Iaegcul1OQTnGdQLzqjJWZ/2dNigv9h0IRVa689LkNW2yjwW8WWni7AvYBLgQFZ1iQt7odZeWFBdFkKf6feipSCWjxpAZPbkjFqaXiW9tA1RzK5wb28mYKD6epeZgSeElGKxJFQYotOHSXq2vsX+pDcvS0GoBy/wGwvEKVwOGG5u+s6F0BguYyN1bu3H2Ifh7j6OHQ=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1301, 'candidates_token_count': 6, 'total_token_count': 1363, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1739}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 6}], 'thoughts_token_count': 56, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.2992459932963054, 'model_name': 'gemini-2.5-pro'} id='run--d859edac-8735-487a-892f-cf3662c03281-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls tests'}, 'id': 'adbe69f5-56da-470b-9cf6-76beccbeb673', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1301, 'output_tokens': 6, 'total_tokens': 1363, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 56}}
2025-10-06 19:54:23,017 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls tests
2025-10-06 19:54:23,118 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:54:23,118 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

absolute_url_overrides	     m2o_recursive
admin_autodiscover	     mail
admin_changelist	     managers_regress
admin_checks		     many_to_many
admin_custom_urls	     many_to_one
admin_default_site	     many_to_one_null
admin_docs		     max_lengths
admin_filters		     messages_tests
admin_inlines		     middleware
admin_ordering		     middleware_exceptions
admin_registration	     migrate_signals
admin_scripts		     migrations
admin_utils		     migrations2
admin_views		     migration_test_data_persistence
admin_widgets		     modeladmin
aggregation		     model_enums
aggregation_regress	     model_fields
annotations		     model_forms
app_loading		     model_formsets
apps			     model_formsets_regress
asgi			     model_indexes
async			     model_inheritance
auth_tests		     model_inheritance_regress
backends		     model_meta
base			     model_options
bash_completion		     model_package
basic			     model_regress
builtin_server		     multiple_database
bulk_create		     mutually_referential
cache			     nested_foreign_keys
check_framework		     no_models
conditional_processing	     null_fk
constraints		     null_fk_ordering
contenttypes_tests	     null_queries
context_processors	     one_to_one
csrf_tests		     ordering
custom_columns		     order_with_respect_to
custom_lookups		     or_lookups
custom_managers		     pagination
custom_methods		     postgres_tests
custom_migration_operations  prefetch_related
custom_pk		     project_template
datatypes		     properties
dates			     proxy_model_inheritance
datetimes		     proxy_models
db_functions		     queries
dbshell			     queryset_pickle
db_typecasts		     raw_query
db_utils		     README.rst
decorators		     redirects_tests
defer			     requests
defer_regress		     requirements
delete			     reserved_names
delete_regress		     resolve_url
deprecation		     responses
dispatch		     reverse_lookup
distinct_on_fields	     runtests.py
empty			     save_delete_hooks
empty_models		     schema
expressions		     select_for_update
expressions_case	     select_related
expressions_window	     select_related_onetoone
extra_regress		     select_related_regress
field_deconstruction	     serializers
field_defaults		     servers
field_subclassing	     sessions_tests
files			     settings_tests
file_storage		     shell
file_uploads		     shortcuts
filtered_relation	     signals
fixtures		     signed_cookies_tests
fixtures_model_package	     signing
fixtures_regress	     sitemaps_tests
flatpages_tests		     sites_framework
force_insert_update	     sites_tests
foreign_object		     staticfiles_tests
forms_tests		     str
from_db_value		     string_lookup
generic_inline_admin	     swappable_models
generic_relations	     syndication_tests
generic_relations_regress    template_backends
generic_views		     template_loader
get_earliest_or_latest	     templates
get_object_or_404	     template_tests
get_or_create		     test_client
gis_tests		     test_client_regress
handlers		     test_exceptions
httpwrappers		     test_runner
humanize_tests		     test_runner_apps
i18n			     test_sqlite.py
import_error_package	     test_utils
indexes			     timezones
inline_formsets		     transaction_hooks
inspectdb		     transactions
introspection		     unmanaged_models
invalid_models_tests	     update
known_related_objects	     update_only_fields
logging_tests		     urlpatterns
lookup			     urlpatterns_reverse
m2m_and_m2o		     urls.py
m2m_intermediary	     user_commands
m2m_multiple		     utils_tests
m2m_recursive		     validation
m2m_regress		     validators
m2m_signals		     version
m2m_through		     view_tests
m2m_through_regress	     wsgi

2025-10-06 19:54:29,750 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "cat tests/runtests.py"}'}, '__gemini_function_call_thought_signatures__': {'5117e2e2-f2d3-43f4-9cdb-f7ee16329fc3': 'CqoDAR/Mhbb/KhdOpCFNySX044HtXGglAnDrkW5LZm8Dk8y8MinjQLSvuGIaNa4ZsWgRiBFd66OoCJ/kAjKKP3emtEjXGN3qBc2hLAEeVGt6Y1vrW4EaX0pnBWJ1jk9dSmJ2RciVP614OEwvPvCw8RoOE6HW5ARrPyyfqHkQP2L62ZKAZmnxg6dlnlxwNGzGOb0AxbuzWHRCagCk12J3JasnvPoLfGJRiE9lBU+bkC5nITPDu7Nf8oApdaUcmw+kAv5J2g2jUFdYrx83bexFlm3jtFUQChtl7ojjY8EZec2glxFzGuaSiOXfdVehGoo+p/RaXdRl1dEEzHAftK3tCQyGYYIk1i2EOfwm3X0X2qj0DWK0ymLXPbHi4AP7OOHNCej9S8U+32qkJb51Oxt6R84LtcapbdOlhKuCBllxS661UBZ+UkmLhAmcDPzREyDyVlTQzSGoZzIYIY7wY9uM7pGPc8gLWbgpgfsgO1rzHahqicwERLnwqqRFCjd+INimT6ilKj24aNdItrmYZLuD46aL1cFJEp3DMVMweV4fM6jVAnBKAJE1eXV2Ra6g'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2317, 'candidates_token_count': 11, 'total_token_count': 2647, 'cached_content_token_count': 1511, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2809}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1511}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 11}], 'thoughts_token_count': 319}, 'finish_reason': 'STOP', 'avg_logprobs': -2.738922119140625, 'model_name': 'gemini-2.5-pro'} id='run--1c46cdde-2f80-406b-8028-e8aa15a57d63-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat tests/runtests.py'}, 'id': '5117e2e2-f2d3-43f4-9cdb-f7ee16329fc3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2317, 'output_tokens': 11, 'total_tokens': 2647, 'input_token_details': {'cache_read': 1511}, 'output_token_details': {'reasoning': 319}}
2025-10-06 19:54:29,752 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: cat tests/runtests.py
2025-10-06 19:54:29,854 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 19:54:29,854 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

#!/usr/bin/env python
import argparse
import atexit
import copy
import os
import shutil
import socket
import subprocess
import sys
import tempfile
import warnings

try:
    import django
except ImportError as e:
    raise RuntimeError(
        'Django module not found, reference tests/README.rst for instructions.'
    ) from e
else:
    from django.apps import apps
    from django.conf import settings
    from django.db import connection, connections
    from django.test import TestCase, TransactionTestCase
    from django.test.runner import default_test_processes
    from django.test.selenium import SeleniumTestCaseBase
    from django.test.utils import get_runner
    from django.utils.deprecation import (
        RemovedInDjango40Warning, RemovedInDjango41Warning,
    )
    from django.utils.log import DEFAULT_LOGGING
    from django.utils.version import PY37

try:
    import MySQLdb
except ImportError:
    pass
else:
    # Ignore informational warnings from QuerySet.explain().
    warnings.filterwarnings('ignore', r'\(1003, *', category=MySQLdb.Warning)

# Make deprecation warnings errors to ensure no usage of deprecated features.
warnings.simplefilter("error", RemovedInDjango40Warning)
warnings.simplefilter('error', RemovedInDjango41Warning)
# Make resource and runtime warning errors to ensure no usage of error prone
# patterns.
warnings.simplefilter("error", ResourceWarning)
warnings.simplefilter("error", RuntimeWarning)
# Ignore known warnings in test dependencies.
warnings.filterwarnings("ignore", "'U' mode is deprecated", DeprecationWarning, module='docutils.io')

RUNTESTS_DIR = os.path.abspath(os.path.dirname(__file__))

TEMPLATE_DIR = os.path.join(RUNTESTS_DIR, 'templates')

# Create a specific subdirectory for the duration of the test suite.
TMPDIR = tempfile.mkdtemp(prefix='django_')
# Set the TMPDIR environment variable in addition to tempfile.tempdir
# so that children processes inherit it.
tempfile.tempdir = os.environ['TMPDIR'] = TMPDIR

# Removing the temporary TMPDIR.
atexit.register(shutil.rmtree, TMPDIR)


SUBDIRS_TO_SKIP = [
    'data',
    'import_error_package',
    'test_runner_apps',
]

ALWAYS_INSTALLED_APPS = [
    'django.contrib.contenttypes',
    'django.contrib.auth',
    'django.contrib.sites',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.admin.apps.SimpleAdminConfig',
    'django.contrib.staticfiles',
]

ALWAYS_MIDDLEWARE = [
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
]

# Need to add the associated contrib app to INSTALLED_APPS in some cases to
# avoid "RuntimeError: Model class X doesn't declare an explicit app_label
# and isn't in an application in INSTALLED_APPS."
CONTRIB_TESTS_TO_APPS = {
    'flatpages_tests': 'django.contrib.flatpages',
    'redirects_tests': 'django.contrib.redirects',
}


def get_test_modules():
    modules = []
    discovery_paths = [(None, RUNTESTS_DIR)]
    if connection.features.gis_enabled:
        # GIS tests are in nested apps
        discovery_paths.append(('gis_tests', os.path.join(RUNTESTS_DIR, 'gis_tests')))
    else:
        SUBDIRS_TO_SKIP.append('gis_tests')

    for modpath, dirpath in discovery_paths:
        for f in os.scandir(dirpath):
            if ('.' not in f.name and
                    os.path.basename(f.name) not in SUBDIRS_TO_SKIP and
                    not f.is_file() and
                    os.path.exists(os.path.join(f.path, '__init__.py'))):
                modules.append((modpath, f.name))
    return modules


def get_installed():
    return [app_config.name for app_config in apps.get_app_configs()]


def setup(verbosity, test_labels, parallel, start_at, start_after):
    # Reduce the given test labels to just the app module path.
    test_labels_set = set()
    for label in test_labels:
        bits = label.split('.')[:1]
        test_labels_set.add('.'.join(bits))

    if verbosity >= 1:
        msg = "Testing against Django installed in '%s'" % os.path.dirname(django.__file__)
        max_parallel = default_test_processes() if parallel == 0 else parallel
        if max_parallel > 1:
            msg += " with up to %d processes" % max_parallel
        print(msg)

    # Force declaring available_apps in TransactionTestCase for faster tests.
    def no_available_apps(self):
        raise Exception("Please define available_apps in TransactionTestCase "
                        "and its subclasses.")
    TransactionTestCase.available_apps = property(no_available_apps)
    TestCase.available_apps = None

    state = {
        'INSTALLED_APPS': settings.INSTALLED_APPS,
        'ROOT_URLCONF': getattr(settings, "ROOT_URLCONF", ""),
        'TEMPLATES': settings.TEMPLATES,
        'LANGUAGE_CODE': settings.LANGUAGE_CODE,
        'STATIC_URL': settings.STATIC_URL,
        'STATIC_ROOT': settings.STATIC_ROOT,
        'MIDDLEWARE': settings.MIDDLEWARE,
    }

    # Redirect some settings for the duration of these tests.
    settings.INSTALLED_APPS = ALWAYS_INSTALLED_APPS
    settings.ROOT_URLCONF = 'urls'
    settings.STATIC_URL = '/static/'
    settings.STATIC_ROOT = os.path.join(TMPDIR, 'static')
    settings.TEMPLATES = [{
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [TEMPLATE_DIR],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    }]
    settings.LANGUAGE_CODE = 'en'
    settings.SITE_ID = 1
    settings.MIDDLEWARE = ALWAYS_MIDDLEWARE
    settings.MIGRATION_MODULES = {
        # This lets us skip creating migrations for the test models as many of
        # them depend on one of the following contrib applications.
        'auth': None,
        'contenttypes': None,
        'sessions': None,
    }
    log_config = copy.deepcopy(DEFAULT_LOGGING)
    # Filter out non-error logging so we don't have to capture it in lots of
    # tests.
    log_config['loggers']['django']['level'] = 'ERROR'
    settings.LOGGING = log_config
    settings.SILENCED_SYSTEM_CHECKS = [
        'fields.W342',  # ForeignKey(unique=True) -> OneToOneField
        'fields.W903',  # NullBooleanField deprecated.
    ]

    # Load all the ALWAYS_INSTALLED_APPS.
    django.setup()

    # It would be nice to put this validation earlier but it must come after
    # django.setup() so that connection.features.gis_enabled can be accessed
    # without raising AppRegistryNotReady when running gis_tests in isolation
    # on some backends (e.g. PostGIS).
    if 'gis_tests' in test_labels_set and not connection.features.gis_enabled:
        print('Aborting: A GIS database backend is required to run gis_tests.')
        sys.exit(1)

    def _module_match_label(module_label, label):
        # Exact or ancestor match.
        return module_label == label or module_label.startswith(label + '.')

    # Load all the test model apps.
    test_modules = get_test_modules()

    found_start = not (start_at or start_after)
    installed_app_names = set(get_installed())
    for modpath, module_name in test_modules:
        if modpath:
            module_label = modpath + '.' + module_name
        else:
            module_label = module_name
        if not found_start:
            if start_at and _module_match_label(module_label, start_at):
                found_start = True
            elif start_after and _module_match_label(module_label, start_after):
                found_start = True
                continue
            else:
                continue
        # if the module (or an ancestor) was named on the command line, or
        # no modules were named (i.e., run all), import
        # this module and add it to INSTALLED_APPS.
        module_found_in_labels = not test_labels or any(
            _module_match_label(module_label, label) for label in test_labels_set
        )

        if module_name in CONTRIB_TESTS_TO_APPS and module_found_in_labels:
            settings.INSTALLED_APPS.append(CONTRIB_TESTS_TO_APPS[module_name])

        if module_found_in_labels and module_label not in installed_app_names:
            if verbosity >= 2:
                print("Importing application %s" % module_name)
            settings.INSTALLED_APPS.append(module_label)

    # Add contrib.gis to INSTALLED_APPS if needed (rather than requiring
    # @override_settings(INSTALLED_APPS=...) on all test cases.
    gis = 'django.contrib.gis'
    if connection.features.gis_enabled and gis not in settings.INSTALLED_APPS:
        if verbosity >= 2:
            print("Importing application %s" % gis)
        settings.INSTALLED_APPS.append(gis)

    apps.set_installed_apps(settings.INSTALLED_APPS)

    return state


def teardown(state):
    # Restore the old settings.
    for key, value in state.items():
        setattr(settings, key, value)
    # Discard the multiprocessing.util finalizer that tries to remove a
    # temporary directory that's already removed by this script's
    # atexit.register(shutil.rmtree, TMPDIR) handler. Prevents
    # FileNotFoundError at the end of a test run (#27890).
    from multiprocessing.util import _finalizer_registry
    _finalizer_registry.pop((-100, 0), None)


def actual_test_processes(parallel):
    if parallel == 0:
        # This doesn't work before django.setup() on some databases.
        if all(conn.features.can_clone_databases for conn in connections.all()):
            return default_test_processes()
        else:
            return 1
    else:
        return parallel


class ActionSelenium(argparse.Action):
    """
    Validate the comma-separated list of requested browsers.
    """
    def __call__(self, parser, namespace, values, option_string=None):
        browsers = values.split(',')
        for browser in browsers:
            try:
                SeleniumTestCaseBase.import_webdriver(browser)
            except ImportError:
                raise argparse.ArgumentError(self, "Selenium browser specification '%s' is not valid." % browser)
        setattr(namespace, self.dest, browsers)


def django_tests(verbosity, interactive, failfast, keepdb, reverse,
                 test_labels, debug_sql, parallel, tags, exclude_tags,
                 test_name_patterns, start_at, start_after, pdb, buffer):
    state = setup(verbosity, test_labels, parallel, start_at, start_after)
    extra_tests = []

    # Run the test suite, including the extra validation tests.
    if not hasattr(settings, 'TEST_RUNNER'):
        settings.TEST_RUNNER = 'django.test.runner.DiscoverRunner'
    TestRunner = get_runner(settings)

    test_runner = TestRunner(
        verbosity=verbosity,
        interactive=interactive,
        failfast=failfast,
        keepdb=keepdb,
        reverse=reverse,
        debug_sql=debug_sql,
        parallel=actual_test_processes(parallel),
        tags=tags,
        exclude_tags=exclude_tags,
        test_name_patterns=test_name_patterns,
        pdb=pdb,
        buffer=buffer,
    )
    failures = test_runner.run_tests(
        test_labels or get_installed(),
        extra_tests=extra_tests,
    )
    teardown(state)
    return failures


def get_subprocess_args(options):
    subprocess_args = [
        sys.executable, __file__, '--settings=%s' % options.settings
    ]
    if options.failfast:
        subprocess_args.append('--failfast')
    if options.verbosity:
        subprocess_args.append('--verbosity=%s' % options.verbosity)
    if not options.interactive:
        subprocess_args.append('--noinput')
    if options.tags:
        subprocess_args.append('--tag=%s' % options.tags)
    if options.exclude_tags:
        subprocess_args.append('--exclude_tag=%s' % options.exclude_tags)
    return subprocess_args


def bisect_tests(bisection_label, options, test_labels, parallel, start_at, start_after):
    state = setup(options.verbosity, test_labels, parallel, start_at, start_after)

    test_labels = test_labels or get_installed()

    print('***** Bisecting test suite: %s' % ' '.join(test_labels))

    # Make sure the bisection point isn't in the test list
    # Also remove tests that need to be run in specific combinations
    for label in [bisection_label, 'model_inheritance_same_model_name']:
        try:
            test_labels.remove(label)
        except ValueError:
            pass

    subprocess_args = get_subprocess_args(options)

    iteration = 1
    while len(test_labels) > 1:
        midpoint = len(test_labels) // 2
        test_labels_a = test_labels[:midpoint] + [bisection_label]
        test_labels_b = test_labels[midpoint:] + [bisection_label]
        print('***** Pass %da: Running the first half of the test suite' % iteration)
        print('***** Test labels: %s' % ' '.join(test_labels_a))
        failures_a = subprocess.run(subprocess_args + test_labels_a)

        print('***** Pass %db: Running the second half of the test suite' % iteration)
        print('***** Test labels: %s' % ' '.join(test_labels_b))
        print('')
        failures_b = subprocess.run(subprocess_args + test_labels_b)

        if failures_a.returncode and not failures_b.returncode:
            print("***** Problem found in first half. Bisecting again...")
            iteration += 1
            test_labels = test_labels_a[:-1]
        elif failures_b.returncode and not failures_a.returncode:
            print("***** Problem found in second half. Bisecting again...")
            iteration += 1
            test_labels = test_labels_b[:-1]
        elif failures_a.returncode and failures_b.returncode:
            print("***** Multiple sources of failure found")
            break
        else:
            print("***** No source of failure found... try pair execution (--pair)")
            break

    if len(test_labels) == 1:
        print("***** Source of error: %s" % test_labels[0])
    teardown(state)


def paired_tests(paired_test, options, test_labels, parallel, start_at, start_after):
    state = setup(options.verbosity, test_labels, parallel, start_at, start_after)

    test_labels = test_labels or get_installed()

    print('***** Trying paired execution')

    # Make sure the constant member of the pair isn't in the test list
    # Also remove tests that need to be run in specific combinations
    for label in [paired_test, 'model_inheritance_same_model_name']:
        try:
            test_labels.remove(label)
        except ValueError:
            pass

    subprocess_args = get_subprocess_args(options)

    for i, label in enumerate(test_labels):
        print('***** %d of %d: Check test pairing with %s' % (
              i + 1, len(test_labels), label))
        failures = subprocess.call(subprocess_args + [label, paired_test])
        if failures:
            print('***** Found problem pair with %s' % label)
            return

    print('***** No problem pair found')
    teardown(state)


if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Run the Django test suite.")
    parser.add_argument(
        'modules', nargs='*', metavar='module',
        help='Optional path(s) to test modules; e.g. "i18n" or '
             '"i18n.tests.TranslationTests.test_lazy_objects".',
    )
    parser.add_argument(
        '-v', '--verbosity', default=1, type=int, choices=[0, 1, 2, 3],
        help='Verbosity level; 0=minimal output, 1=normal output, 2=all output',
    )
    parser.add_argument(
        '--noinput', action='store_false', dest='interactive',
        help='Tells Django to NOT prompt the user for input of any kind.',
    )
    parser.add_argument(
        '--failfast', action='store_true',
        help='Tells Django to stop running the test suite after first failed test.',
    )
    parser.add_argument(
        '--keepdb', action='store_true',
        help='Tells Django to preserve the test database between runs.',
    )
    parser.add_argument(
        '--settings',
        help='Python path to settings module, e.g. "myproject.settings". If '
             'this isn\'t provided, either the DJANGO_SETTINGS_MODULE '
             'environment variable or "test_sqlite" will be used.',
    )
    parser.add_argument(
        '--bisect',
        help='Bisect the test suite to discover a test that causes a test '
             'failure when combined with the named test.',
    )
    parser.add_argument(
        '--pair',
        help='Run the test suite in pairs with the named test to find problem pairs.',
    )
    parser.add_argument(
        '--reverse', action='store_true',
        help='Sort test suites and test cases in opposite order to debug '
             'test side effects not apparent with normal execution lineup.',
    )
    parser.add_argument(
        '--selenium', action=ActionSelenium, metavar='BROWSERS',
        help='A comma-separated list of browsers to run the Selenium tests against.',
    )
    parser.add_argument(
        '--headless', action='store_true',
        help='Run selenium tests in headless mode, if the browser supports the option.',
    )
    parser.add_argument(
        '--selenium-hub',
        help='A URL for a selenium hub instance to use in combination with --selenium.',
    )
    parser.add_argument(
        '--external-host', default=socket.gethostname(),
        help='The external host that can be reached by the selenium hub instance when running Selenium '
             'tests via Selenium Hub.',
    )
    parser.add_argument(
        '--debug-sql', action='store_true',
        help='Turn on the SQL query logger within tests.',
    )
    parser.add_argument(
        '--parallel', nargs='?', default=0, type=int,
        const=default_test_processes(), metavar='N',
        help='Run tests using up to N parallel processes.',
    )
    parser.add_argument(
        '--tag', dest='tags', action='append',
        help='Run only tests with the specified tags. Can be used multiple times.',
    )
    parser.add_argument(
        '--exclude-tag', dest='exclude_tags', action='append',
        help='Do not run tests with the specified tag. Can be used multiple times.',
    )
    parser.add_argument(
        '--start-after', dest='start_after',
        help='Run tests starting after the specified top-level module.',
    )
    parser.add_argument(
        '--start-at', dest='start_at',
        help='Run tests starting at the specified top-level module.',
    )
    parser.add_argument(
        '--pdb', action='store_true',
        help='Runs the PDB debugger on error or failure.'
    )
    parser.add_argument(
        '-b', '--buffer', action='store_true',
        help='Discard output of passing tests.',
    )
    if PY37:
        parser.add_argument(
            '-k', dest='test_name_patterns', action='append',
            help=(
                'Only run test methods and classes matching test name pattern. '
                'Same as unittest -k option. Can be used multiple times.'
            ),
        )

    options = parser.parse_args()

    using_selenium_hub = options.selenium and options.selenium_hub
    if options.selenium_hub and not options.selenium:
        parser.error('--selenium-hub and --external-host require --selenium to be used.')
    if using_selenium_hub and not options.external_host:
        parser.error('--selenium-hub and --external-host must be used together.')

    # Allow including a trailing slash on app_labels for tab completion convenience
    options.modules = [os.path.normpath(labels) for labels in options.modules]

    mutually_exclusive_options = [options.start_at, options.start_after, options.modules]
    enabled_module_options = [bool(option) for option in mutually_exclusive_options].count(True)
    if enabled_module_options > 1:
        print('Aborting: --start-at, --start-after, and test labels are mutually exclusive.')
        sys.exit(1)
    for opt_name in ['start_at', 'start_after']:
        opt_val = getattr(options, opt_name)
        if opt_val:
            if '.' in opt_val:
                print('Aborting: --%s must be a top-level module.' % opt_name.replace('_', '-'))
                sys.exit(1)
            setattr(options, opt_name, os.path.normpath(opt_val))
    if options.settings:
        os.environ['DJANGO_SETTINGS_MODULE'] = options.settings
    else:
        os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'test_sqlite')
        options.settings = os.environ['DJANGO_SETTINGS_MODULE']

    if options.selenium:
        if not options.tags:
            options.tags = ['selenium']
        elif 'selenium' not in options.tags:
            options.tags.append('selenium')
        if options.selenium_hub:
            SeleniumTestCaseBase.selenium_hub = options.selenium_hub
            SeleniumTestCaseBase.external_host = options.external_host
        SeleniumTestCaseBase.headless = options.headless
        SeleniumTestCaseBase.browsers = options.selenium

    if options.bisect:
        bisect_tests(
            options.bisect, options, options.modules, options.parallel,
            options.start_at, options.start_after,
        )
    elif options.pair:
        paired_tests(
            options.pair, options, options.modules, options.parallel,
            options.start_at, options.start_after,
        )
    else:
        failures = django_tests(
            options.verbosity, options.interactive, options.failfast,
            options.keepdb, options.reverse, options.modules,
            options.debug_sql, options.parallel, options.tags,
            options.exclude_tags,
            getattr(options, 'test_name_patterns', None),
            options.start_at, options.start_after, options.pdb, options.buffer,
        )
        if failures:
            sys.exit(1)

2025-10-06 19:54:35,997 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python tests/runtests.py model_forms.test_modelmultiplechoicefield"}'}, '__gemini_function_call_thought_signatures__': {'c7cc2bc4-c163-4237-bf75-a818eef2ff66': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8227, 'candidates_token_count': 21, 'total_token_count': 8683, 'cached_content_token_count': 1722, 'prompt_tokens_details': [{'modality': 1, 'token_count': 8822}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1722}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 435}, 'finish_reason': 'STOP', 'avg_logprobs': -2.38836179460798, 'model_name': 'gemini-2.5-pro'} id='run--86cca847-32ed-49a6-8f4b-800216899ac8-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python tests/runtests.py model_forms.test_modelmultiplechoicefield'}, 'id': 'c7cc2bc4-c163-4237-bf75-a818eef2ff66', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8227, 'output_tokens': 21, 'total_tokens': 8683, 'input_token_details': {'cache_read': 1722}, 'output_token_details': {'reasoning': 435}}
2025-10-06 19:54:35,999 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python tests/runtests.py model_forms.test_modelmultiplechoicefield
2025-10-06 19:54:36,595 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 19:54:36,595 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Testing against Django installed in '/testbed/django' with up to 8 processes
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
F
======================================================================
FAIL: test_model_multiple_choice_field_union_empty_submission (model_forms.test_modelmultiplechoicefield.ModelFormValidationTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/django/test/testcases.py", line 1274, in skip_wrapper
    return test_func(*args, **kwargs)
  File "/testbed/tests/model_forms/test_modelmultiplechoicefield.py", line 39, in test_model_multiple_choice_field_union_empty_submission
    self.assertEqual(article_instance.categories.count(), 0)
AssertionError: 2 != 0

----------------------------------------------------------------------
Ran 1 test in 0.005s

FAILED (failures=1)
Destroying test database for alias 'default'...

2025-10-06 19:54:40,741 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='Testing against Django installed in \'/testbed/django\' with up to 8 processes\nCreating test database for alias \'default\'...\nSystem check identified no issues (0 silenced).\nF\n======================================================================\nFAIL: test_model_multiple_choice_field_union_empty_submission (model_forms.test_modelmultiplechoicefield.ModelFormValidationTests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/django/test/testcases.py", line 1274, in skip_wrapper\n    return test_func(*args, **kwargs)\n  File "/testbed/tests/model_forms/test_modelmultiplechoicefield.py", line 39, in test_model_multiple_choice_field_union_empty_submission\n    self.assertEqual(article_instance.categories.count(), 0)\nAssertionError: 2 != 0\n\n----------------------------------------------------------------------\nRan 1 test in 0.005s\n\nFAILED (failures=1)\nDestroying test database for alias \'default\'...' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8490, 'candidates_token_count': 236, 'total_token_count': 8851, 'cached_content_token_count': 8669, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9518}], 'cache_tokens_details': [{'modality': 1, 'token_count': 8669}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 236}], 'thoughts_token_count': 125}, 'finish_reason': 'STOP', 'avg_logprobs': -0.039309331926248844, 'model_name': 'gemini-2.5-pro'} id='run--ae34e394-bf77-4dc2-9caa-faf93eea9765-0' usage_metadata={'input_tokens': 8490, 'output_tokens': 236, 'total_tokens': 8851, 'input_token_details': {'cache_read': 8669}, 'output_token_details': {'reasoning': 125}}
2025-10-06 19:54:56,581 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=True reproduced_bug_failure_log='FAIL: test_model_multiple_choice_field_union_empty_submission (model_forms.test_modelmultiplechoicefield.ModelFormValidationTests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/django/test/testcases.py", line 1274, in skip_wrapper\n    return test_func(*args, **kwargs)\n  File "/testbed/tests/model_forms/test_modelmultiplechoicefield.py", line 39, in test_model_multiple_choice_field_union_empty_submission\n    self.assertEqual(article_instance.categories.count(), 0)\nAssertionError: 2 != 0' reproduced_bug_commands=['python runtests.py model_forms.test_modelmultiplechoicefield']
2025-10-06 19:54:56,582 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
2025-10-06 19:54:56,582 - thread-139660780025408.app.docker.base_container - INFO - Closing persistent shell...
2025-10-06 19:54:56,682 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
