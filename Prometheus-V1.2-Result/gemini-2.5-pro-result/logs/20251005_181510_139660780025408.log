2025-10-05 18:15:10,699 - thread-139660780025408.app.docker.base_container - INFO - Created temporary project directory: /tmp/tmp_cz2qxm2/sympy
2025-10-05 18:15:10,699 - thread-139660780025408.app.docker.base_container - DEBUG - Using workdir: /testbed
2025-10-05 18:15:10,699 - thread-139660780025408.app.docker.base_container - INFO - Pulling docker image: swebench/sweb.eval.x86_64.sympy_1776_sympy-15976:v1
2025-10-05 18:15:28,843 - thread-139660780025408.app.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_88d9c7c61d
2025-10-05 18:15:28,848 - thread-139660780025408.app.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_88d9c7c61d
2025-10-05 18:15:29,427 - thread-139660780025408.app.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-10-05 18:15:32,573 - thread-139660780025408.app.docker.base_container - INFO - Persistent shell is ready
2025-10-05 18:15:32,574 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: . /opt/miniconda3/bin/activate
2025-10-05 18:15:32,697 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:15:32,697 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-05 18:15:32,697 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: conda activate testbed
2025-10-05 18:15:32,819 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:15:32,819 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-05 18:15:32,820 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pip install -e .
2025-10-05 18:15:33,531 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:15:33,531 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
  Preparing metadata (setup.py) ... [?25l- done
[?25hRequirement already satisfied: mpmath>=0.19 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from sympy==1.4.dev0) (1.3.0)
Installing collected packages: sympy
  Attempting uninstall: sympy
    Found existing installation: sympy 1.4.dev0
    Uninstalling sympy-1.4.dev0:
      Successfully uninstalled sympy-1.4.dev0
[33m  DEPRECATION: Legacy editable install of sympy==1.4.dev0 from file:///testbed (setup.py develop) is deprecated. pip 25.0 will enforce this behaviour change. A possible replacement is to add a pyproject.toml or enable --use-pep517, and use setuptools >= 64. If the resulting installation is not behaving as expected, try using --config-settings editable_mode=compat. Please consult the setuptools documentation for more information. Discussion can be found at https://github.com/pypa/pip/issues/11457[0m[33m
[0m  Running setup.py develop for sympy
Successfully installed sympy
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.[0m[33m

2025-10-05 18:15:33,577 - thread-139660780025408.app.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
A symbol ending with a number is made invisible when printing with MathML

Issue description: 
A variable with a number, such as x1, is made invisible when printing in a MathML format.
`import sympy
from sympy.printing.mathml import mathml

x2, y, z = sympy.symbols('x2 y z')
y = x2*z+x2**3
f = open('sympy_test.html', 'w')
f.write('\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.write(sympy.mathml(y, printer='presentation')+'\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.close()`

Viewing the output in Safari 12.0.2:
<img width="93" alt="screen shot 2018-12-31 at 12 21 00 pm" src="https://user-images.githubusercontent.com/46286768/50567565-48d8c080-0cfb-11e9-84d2-5738f1c2e2ba.png">

If 'x' is used instead of 'x2', it works as expected:
x, y, z = sympy.symbols('x y z')
y = x*z+x**3
<img width="78" alt="screen shot 2018-12-31 at 12 26 24 pm" src="https://user-images.githubusercontent.com/46286768/50567570-542bec00-0cfb-11e9-986d-015e0023a2a1.png">

BTW, I'm on a MacBook Pro, OS 10.14.2, Sympy 1.3, in Eclipse 2018-19, and Python 3.7.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-10-05 18:15:33,577 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-10-05 18:15:33,578 - thread-139660780025408.app.lang_graph.nodes.context_query_message_node - DEBUG - Sending query to ContextProviderNode:
content='Issue title:\nA symbol ending with a number is made invisible when printing with MathML\n\nIssue description: \nA variable with a number, such as x1, is made invisible when printing in a MathML format.\n`import sympy\nfrom sympy.printing.mathml import mathml\n\nx2, y, z = sympy.symbols(\'x2 y z\')\ny = x2*z+x2**3\nf = open(\'sympy_test.html\', \'w\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(sympy.mathml(y, printer=\'presentation\')+\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.close()`\n\nViewing the output in Safari 12.0.2:\n<img width="93" alt="screen shot 2018-12-31 at 12 21 00 pm" src="https://user-images.githubusercontent.com/46286768/50567565-48d8c080-0cfb-11e9-84d2-5738f1c2e2ba.png">\n\nIf \'x\' is used instead of \'x2\', it works as expected:\nx, y, z = sympy.symbols(\'x y z\')\ny = x*z+x**3\n<img width="78" alt="screen shot 2018-12-31 at 12 26 24 pm" src="https://user-images.githubusercontent.com/46286768/50567570-542bec00-0cfb-11e9-986d-015e0023a2a1.png">\n\nBTW, I\'m on a MacBook Pro, OS 10.14.2, Sympy 1.3, in Eclipse 2018-19, and Python 3.7.\n\nIssue comments:\n\n\nOBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,\nincluding ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.\n\n<reasoning>\n1. Analyze bug characteristics:\n   - Core functionality being tested\n   - Input parameters and configurations\n   - Expected error conditions\n   - Environmental dependencies\n\n2. Search requirements:\n   - Required imports and dependencies\n   - Test files exercising similar functionality\n   - Mock/fixture setup patterns\n   - Assertion styles\n   - Error handling tests\n\n3. Focus areas:\n   - All necessary imports (standard library, testing frameworks, mocking utilities)\n   - Dependencies and third-party packages\n   - Test setup and teardown\n   - Mock object configuration\n   - Network/external service simulation\n   - Error condition verification\n</reasoning>\n\nREQUIREMENTS:\n- Return 5 complete, self-contained test cases most similar to bug scenario\n- Must include ALL necessary imports at the start of each test file\n- Must include full test method implementation\n- Must include ALL mock/fixture setup\n- Must include helper functions used by test\n- Must preserve exact file paths and line numbers\n\n<examples>\n<example id="database-timeout">\n<bug>\ndb.execute("SELECT * FROM users").fetchall() \nraises ConnectionTimeout when load is high\n</bug>\n\n<ideal_test_match>\n# File: tests/test_database.py\nimport pytest\nfrom unittest.mock import Mock, patch\nfrom database.exceptions import ConnectionTimeout\nfrom database.models import QueryResult\nfrom database.client import DatabaseClient\n\nclass TestDatabaseTimeout:\n    @pytest.fixture\n    def mock_db_connection(self):\n        conn = Mock()\n        conn.execute.side_effect = [\n            ConnectionTimeout("Connection timed out"),\n            QueryResult(["user1", "user2"])  # Second try succeeds\n        ]\n        return conn\n        \n    def test_handle_timeout_during_query(self, mock_db_connection):\n        # Complete test showing timeout scenario\n        # Including retry logic verification\n        # With all necessary assertions\n</ideal_test_match>\n</example>\n\n<example id="file-permission">\n<bug>\nFileProcessor(\'/root/data.txt\').process() \nfails with PermissionError\n</bug>\n\n<ideal_test_match>\n# File: tests/test_file_processor.py\nimport os\nimport pytest\nfrom unittest.mock import patch, mock_open\nfrom file_processor import FileProcessor\nfrom file_processor.exceptions import ProcessingError\n\nclass TestFilePermissions:\n    @patch(\'os.access\')\n    @patch(\'builtins.open\')\n    def test_file_permission_denied(self, mock_open, mock_access):\n        # Full test setup with mocked file system\n        # Permission denial simulation\n        # Error handling verification\n</ideal_test_match>\n</example>\n\nSearch priority:\n1. Tests of exact same functionality (including import patterns)\n2. Tests with similar error conditions\n3. Tests with comparable mocking patterns\n4. Tests demonstrating similar assertions\n\nFind the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.\n' additional_kwargs={} response_metadata={}
2025-10-05 18:15:40,018 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I will begin by searching for tests related to MathML printing to find test cases relevant to the reported bug. My initial step is to locate the test file for the MathML module, which is likely to contain tests for symbol rendering. I will then analyze the contents of this file to identify specific tests that cover the printing of symbols with numbers. I will then read the file to find the relevant test cases.' additional_kwargs={'function_call': {'name': 'find_file_node_with_relative_path', 'arguments': '{"relative_path": "sympy/printing/tests/test_mathml.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20239, 'candidates_token_count': 109, 'total_token_count': 20723, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20239}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 109}], 'thoughts_token_count': 375, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.704466023576369, 'model_name': 'gemini-2.5-pro'} id='run--415a0525-ae3a-42da-8753-c43970352cef-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'sympy/printing/tests/test_mathml.py'}, 'id': 'd4ab8fc7-ff7f-4031-8f96-fee08dee86c2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 20239, 'output_tokens': 109, 'total_tokens': 20723, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 375}}
2025-10-05 18:15:43,583 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have located the test file for MathML printing, `sympy/printing/tests/test_mathml.py`. I will now read the contents of this file to find test cases that are relevant to the reported bug, which involves symbols with numbers not rendering correctly in MathML. I will then select and present the 5 most relevant test cases.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/printing/tests/test_mathml.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20411, 'candidates_token_count': 100, 'total_token_count': 20589, 'cached_content_token_count': 19603, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20411}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19603}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 100}], 'thoughts_token_count': 78}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2719464492797852, 'model_name': 'gemini-2.5-pro'} id='run--bc1c87cf-4880-4815-8ab2-82b45c0a21d9-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/printing/tests/test_mathml.py'}, 'id': '9e501e41-e550-488b-a3c8-6eb4e6102416', 'type': 'tool_call'}] usage_metadata={'input_tokens': 20411, 'output_tokens': 100, 'total_tokens': 20589, 'input_token_details': {'cache_read': 19603}, 'output_token_details': {'reasoning': 78}}
2025-10-05 18:16:04,152 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='After analyzing the bug report, I focused on finding test cases related to MathML presentation printing, especially those handling symbols with numbers. I located the relevant test file `sympy/printing/tests/test_mathml.py` and examined its contents. From this file, I selected five test cases that demonstrate how symbols are processed and rendered, which will be valuable for understanding and addressing the reported issue.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "sympy/printing/tests/test_mathml.py", "start_line": 268.0, "end_line": 372.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 6284, 'end_index': 6539, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 6580, 'end_index': 6815, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 30333, 'candidates_token_count': 115, 'total_token_count': 32379, 'cached_content_token_count': 19279, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30333}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19279}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 115}], 'thoughts_token_count': 1931}, 'finish_reason': 'STOP', 'avg_logprobs': -2.385597029976223, 'model_name': 'gemini-2.5-pro'} id='run--89a7322f-7674-4ae8-86cc-6052c663f7e4-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'sympy/printing/tests/test_mathml.py', 'start_line': 268.0, 'end_line': 372.0}, 'id': 'dd6fd51a-6c65-4818-8aa3-4236801be401', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30333, 'output_tokens': 115, 'total_tokens': 32379, 'input_token_details': {'cache_read': 19279}, 'output_token_details': {'reasoning': 1931}}
2025-10-05 18:20:48,655 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 5869, 'end_index': 6124, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 6165, 'end_index': 6400, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 6565, 'end_index': 6820, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 6861, 'end_index': 7118, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 7172, 'end_index': 7479, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 7494, 'end_index': 7775, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 7790, 'end_index': 8070, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 8085, 'end_index': 8367, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 8491, 'end_index': 8774, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 8898, 'end_index': 9243, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 9489, 'end_index': 9908, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 10154, 'end_index': 10575, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 11058, 'end_index': 11313, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 11354, 'end_index': 11611, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 12376, 'end_index': 12631, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 12672, 'end_index': 12929, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 12977, 'end_index': 17986, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 23405, 'end_index': 23663, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 23704, 'end_index': 23940, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 24169, 'end_index': 24476, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 24491, 'end_index': 24772, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 24787, 'end_index': 25067, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 25082, 'end_index': 25364, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 25488, 'end_index': 25771, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 25895, 'end_index': 26240, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 26486, 'end_index': 26905, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 27151, 'end_index': 27572, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 28154, 'end_index': 33163, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 33317, 'end_index': 34576, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 32703, 'total_token_count': 32703, 'cached_content_token_count': 29192, 'prompt_tokens_details': [{'modality': 1, 'token_count': 32703}], 'cache_tokens_details': [{'modality': 1, 'token_count': 29192}], 'candidates_token_count': 0, 'thoughts_token_count': 0, 'candidates_tokens_details': []}, 'finish_reason': 'RECITATION', 'model_name': 'gemini-2.5-pro'} id='run--ae90b1cc-498d-4442-9678-95f5a30449ee-0' usage_metadata={'input_tokens': 32703, 'output_tokens': 0, 'total_tokens': 32703, 'input_token_details': {'cache_read': 29192}}
2025-10-05 18:20:48,656 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-05 18:20:48,656 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
A symbol ending with a number is made invisible when printing with MathML

Issue description: 
A variable with a number, such as x1, is made invisible when printing in a MathML format.
`import sympy
from sympy.printing.mathml import mathml

x2, y, z = sympy.symbols('x2 y z')
y = x2*z+x2**3
f = open('sympy_test.html', 'w')
f.write('\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.write(sympy.mathml(y, printer='presentation')+'\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.close()`

Viewing the output in Safari 12.0.2:
<img width="93" alt="screen shot 2018-12-31 at 12 21 00 pm" src="https://user-images.githubusercontent.com/46286768/50567565-48d8c080-0cfb-11e9-84d2-5738f1c2e2ba.png">

If 'x' is used instead of 'x2', it works as expected:
x, y, z = sympy.symbols('x y z')
y = x*z+x**3
<img width="78" alt="screen shot 2018-12-31 at 12 26 24 pm" src="https://user-images.githubusercontent.com/46286768/50567570-542bec00-0cfb-11e9-986d-015e0023a2a1.png">

BTW, I'm on a MacBook Pro, OS 10.14.2, Sympy 1.3, in Eclipse 2018-19, and Python 3.7.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/printing/tests/test_mathml.py
Line number range: 1 - 500
Content:
1. from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \
2.     tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \
3.     pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \
4.     MatrixSymbol
5. from sympy.stats.rv import RandomSymbol
6. from sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \
7.     MathMLPrinter
8. 
9. from sympy.utilities.pytest import raises
10. 
11. x = Symbol('x')
12. y = Symbol('y')
13. mp = MathMLContentPrinter()
14. mpp = MathMLPresentationPrinter()
15. 
16. def test_mathml_printer():
17.     m = MathMLPrinter()
18.     assert m.doprint(1+x) == mp.doprint(1+x)
19. 
20. 
21. def test_content_printmethod():
22.     assert mp.doprint(1 + x) == '<apply><plus/><ci>x</ci><cn>1</cn></apply>'
23. 
24. 
25. def test_content_mathml_core():
26.     mml_1 = mp._print(1 + x)
27.     assert mml_1.nodeName == 'apply'
28.     nodes = mml_1.childNodes
29.     assert len(nodes) == 3
30.     assert nodes[0].nodeName == 'plus'
31.     assert nodes[0].hasChildNodes() is False
32.     assert nodes[0].nodeValue is None
33.     assert nodes[1].nodeName in ['cn', 'ci']
34.     if nodes[1].nodeName == 'cn':
35.         assert nodes[1].childNodes[0].nodeValue == '1'
36.         assert nodes[2].childNodes[0].nodeValue == 'x'
37.     else:
38.         assert nodes[1].childNodes[0].nodeValue == 'x'
39.         assert nodes[2].childNodes[0].nodeValue == '1'
40. 
41.     mml_2 = mp._print(x**2)
42.     assert mml_2.nodeName == 'apply'
43.     nodes = mml_2.childNodes
44.     assert nodes[1].childNodes[0].nodeValue == 'x'
45.     assert nodes[2].childNodes[0].nodeValue == '2'
46. 
47.     mml_3 = mp._print(2*x)
48.     assert mml_3.nodeName == 'apply'
49.     nodes = mml_3.childNodes
50.     assert nodes[0].nodeName == 'times'
51.     assert nodes[1].childNodes[0].nodeValue == '2'
52.     assert nodes[2].childNodes[0].nodeValue == 'x'
53. 
54.     mml = mp._print(Float(1.0, 2)*x)
55.     assert mml.nodeName == 'apply'
56.     nodes = mml.childNodes
57.     assert nodes[0].nodeName == 'times'
58.     assert nodes[1].childNodes[0].nodeValue == '1.0'
59.     assert nodes[2].childNodes[0].nodeValue == 'x'
60. 
61. 
62. def test_content_mathml_functions():
63.     mml_1 = mp._print(sin(x))
64.     assert mml_1.nodeName == 'apply'
65.     assert mml_1.childNodes[0].nodeName == 'sin'
66.     assert mml_1.childNodes[1].nodeName == 'ci'
67. 
68.     mml_2 = mp._print(diff(sin(x), x, evaluate=False))
69.     assert mml_2.nodeName == 'apply'
70.     assert mml_2.childNodes[0].nodeName == 'diff'
71.     assert mml_2.childNodes[1].nodeName == 'bvar'
72.     assert mml_2.childNodes[1].childNodes[
73.         0].nodeName == 'ci'  # below bvar there's <ci>x/ci>
74. 
75.     mml_3 = mp._print(diff(cos(x*y), x, evaluate=False))
76.     assert mml_3.nodeName == 'apply'
77.     assert mml_3.childNodes[0].nodeName == 'partialdiff'
78.     assert mml_3.childNodes[1].nodeName == 'bvar'
79.     assert mml_3.childNodes[1].childNodes[
80.         0].nodeName == 'ci'  # below bvar there's <ci>x/ci>
81. 
82. 
83. def test_content_mathml_limits():
84.     # XXX No unevaluated limits
85.     lim_fun = sin(x)/x
86.     mml_1 = mp._print(Limit(lim_fun, x, 0))
87.     assert mml_1.childNodes[0].nodeName == 'limit'
88.     assert mml_1.childNodes[1].nodeName == 'bvar'
89.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
90.     assert mml_1.childNodes[3].toxml() == mp._print(lim_fun).toxml()
91. 
92. 
93. def test_content_mathml_integrals():
94.     integrand = x
95.     mml_1 = mp._print(Integral(integrand, (x, 0, 1)))
96.     assert mml_1.childNodes[0].nodeName == 'int'
97.     assert mml_1.childNodes[1].nodeName == 'bvar'
98.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
99.     assert mml_1.childNodes[3].nodeName == 'uplimit'
100.     assert mml_1.childNodes[4].toxml() == mp._print(integrand).toxml()
101. 
102. def test_content_mathml_matrices():
103.     A = Matrix([1, 2, 3])
104.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])
105.     mll_1 = mp._print(A)
106.     assert mll_1.childNodes[0].nodeName == 'matrixrow'
107.     assert mll_1.childNodes[0].childNodes[0].nodeName == 'cn'
108.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeValue == '1'
109.     assert mll_1.childNodes[1].nodeName == 'matrixrow'
110.     assert mll_1.childNodes[1].childNodes[0].nodeName == 'cn'
111.     assert mll_1.childNodes[1].childNodes[0].childNodes[0].nodeValue == '2'
112.     assert mll_1.childNodes[2].nodeName == 'matrixrow'
113.     assert mll_1.childNodes[2].childNodes[0].nodeName == 'cn'
114.     assert mll_1.childNodes[2].childNodes[0].childNodes[0].nodeValue == '3'
115.     mll_2 = mp._print(B)
116.     assert mll_2.childNodes[0].nodeName == 'matrixrow'
117.     assert mll_2.childNodes[0].childNodes[0].nodeName == 'cn'
118.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeValue == '0'
119.     assert mll_2.childNodes[0].childNodes[1].nodeName == 'cn'
120.     assert mll_2.childNodes[0].childNodes[1].childNodes[0].nodeValue == '5'
121.     assert mll_2.childNodes[0].childNodes[2].nodeName == 'cn'
122.     assert mll_2.childNodes[0].childNodes[2].childNodes[0].nodeValue == '4'
123.     assert mll_2.childNodes[1].nodeName == 'matrixrow'
124.     assert mll_2.childNodes[1].childNodes[0].nodeName == 'cn'
125.     assert mll_2.childNodes[1].childNodes[0].childNodes[0].nodeValue == '2'
126.     assert mll_2.childNodes[1].childNodes[1].nodeName == 'cn'
127.     assert mll_2.childNodes[1].childNodes[1].childNodes[0].nodeValue == '3'
128.     assert mll_2.childNodes[1].childNodes[2].nodeName == 'cn'
129.     assert mll_2.childNodes[1].childNodes[2].childNodes[0].nodeValue == '1'
130.     assert mll_2.childNodes[2].nodeName == 'matrixrow'
131.     assert mll_2.childNodes[2].childNodes[0].nodeName == 'cn'
132.     assert mll_2.childNodes[2].childNodes[0].childNodes[0].nodeValue == '9'
133.     assert mll_2.childNodes[2].childNodes[1].nodeName == 'cn'
134.     assert mll_2.childNodes[2].childNodes[1].childNodes[0].nodeValue == '7'
135.     assert mll_2.childNodes[2].childNodes[2].nodeName == 'cn'
136.     assert mll_2.childNodes[2].childNodes[2].childNodes[0].nodeValue == '9'
137. 
138. def test_content_mathml_sums():
139.     summand = x
140.     mml_1 = mp._print(Sum(summand, (x, 1, 10)))
141.     assert mml_1.childNodes[0].nodeName == 'sum'
142.     assert mml_1.childNodes[1].nodeName == 'bvar'
143.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
144.     assert mml_1.childNodes[3].nodeName == 'uplimit'
145.     assert mml_1.childNodes[4].toxml() == mp._print(summand).toxml()
146. 
147. 
148. def test_content_mathml_tuples():
149.     mml_1 = mp._print([2])
150.     assert mml_1.nodeName == 'list'
151.     assert mml_1.childNodes[0].nodeName == 'cn'
152.     assert len(mml_1.childNodes) == 1
153. 
154.     mml_2 = mp._print([2, Integer(1)])
155.     assert mml_2.nodeName == 'list'
156.     assert mml_2.childNodes[0].nodeName == 'cn'
157.     assert mml_2.childNodes[1].nodeName == 'cn'
158.     assert len(mml_2.childNodes) == 2
159. 
160. 
161. def test_content_mathml_add():
162.     mml = mp._print(x**5 - x**4 + x)
163.     assert mml.childNodes[0].nodeName == 'plus'
164.     assert mml.childNodes[1].childNodes[0].nodeName == 'minus'
165.     assert mml.childNodes[1].childNodes[1].nodeName == 'apply'
166. 
167. 
168. def test_content_mathml_Rational():
169.     mml_1 = mp._print(Rational(1, 1))
170.     """should just return a number"""
171.     assert mml_1.nodeName == 'cn'
172. 
173.     mml_2 = mp._print(Rational(2, 5))
174.     assert mml_2.childNodes[0].nodeName == 'divide'
175. 
176. 
177. def test_content_mathml_constants():
178.     mml = mp._print(I)
179.     assert mml.nodeName == 'imaginaryi'
180. 
181.     mml = mp._print(E)
182.     assert mml.nodeName == 'exponentiale'
183. 
184.     mml = mp._print(oo)
185.     assert mml.nodeName == 'infinity'
186. 
187.     mml = mp._print(pi)
188.     assert mml.nodeName == 'pi'
189. 
190.     assert mathml(GoldenRatio) == '<cn>&#966;</cn>'
191. 
192.     mml = mathml(EulerGamma)
193.     assert mml == '<eulergamma/>'
194. 
195. 
196. def test_content_mathml_trig():
197.     mml = mp._print(sin(x))
198.     assert mml.childNodes[0].nodeName == 'sin'
199. 
200.     mml = mp._print(cos(x))
201.     assert mml.childNodes[0].nodeName == 'cos'
202. 
203.     mml = mp._print(tan(x))
204.     assert mml.childNodes[0].nodeName == 'tan'
205. 
206.     mml = mp._print(asin(x))
207.     assert mml.childNodes[0].nodeName == 'arcsin'
208. 
209.     mml = mp._print(acos(x))
210.     assert mml.childNodes[0].nodeName == 'arccos'
211. 
212.     mml = mp._print(atan(x))
213.     assert mml.childNodes[0].nodeName == 'arctan'
214. 
215.     mml = mp._print(sinh(x))
216.     assert mml.childNodes[0].nodeName == 'sinh'
217. 
218.     mml = mp._print(cosh(x))
219.     assert mml.childNodes[0].nodeName == 'cosh'
220. 
221.     mml = mp._print(tanh(x))
222.     assert mml.childNodes[0].nodeName == 'tanh'
223. 
224.     mml = mp._print(asinh(x))
225.     assert mml.childNodes[0].nodeName == 'arcsinh'
226. 
227.     mml = mp._print(atanh(x))
228.     assert mml.childNodes[0].nodeName == 'arctanh'
229. 
230.     mml = mp._print(acosh(x))
231.     assert mml.childNodes[0].nodeName == 'arccosh'
232. 
233. 
234. def test_content_mathml_relational():
235.     mml_1 = mp._print(Eq(x, 1))
236.     assert mml_1.nodeName == 'apply'
237.     assert mml_1.childNodes[0].nodeName == 'eq'
238.     assert mml_1.childNodes[1].nodeName == 'ci'
239.     assert mml_1.childNodes[1].childNodes[0].nodeValue == 'x'
240.     assert mml_1.childNodes[2].nodeName == 'cn'
241.     assert mml_1.childNodes[2].childNodes[0].nodeValue == '1'
242. 
243.     mml_2 = mp._print(Ne(1, x))
244.     assert mml_2.nodeName == 'apply'
245.     assert mml_2.childNodes[0].nodeName == 'neq'
246.     assert mml_2.childNodes[1].nodeName == 'cn'
247.     assert mml_2.childNodes[1].childNodes[0].nodeValue == '1'
248.     assert mml_2.childNodes[2].nodeName == 'ci'
249.     assert mml_2.childNodes[2].childNodes[0].nodeValue == 'x'
250. 
251.     mml_3 = mp._print(Ge(1, x))
252.     assert mml_3.nodeName == 'apply'
253.     assert mml_3.childNodes[0].nodeName == 'geq'
254.     assert mml_3.childNodes[1].nodeName == 'cn'
255.     assert mml_3.childNodes[1].childNodes[0].nodeValue == '1'
256.     assert mml_3.childNodes[2].nodeName == 'ci'
257.     assert mml_3.childNodes[2].childNodes[0].nodeValue == 'x'
258. 
259.     mml_4 = mp._print(Lt(1, x))
260.     assert mml_4.nodeName == 'apply'
261.     assert mml_4.childNodes[0].nodeName == 'lt'
262.     assert mml_4.childNodes[1].nodeName == 'cn'
263.     assert mml_4.childNodes[1].childNodes[0].nodeValue == '1'
264.     assert mml_4.childNodes[2].nodeName == 'ci'
265.     assert mml_4.childNodes[2].childNodes[0].nodeValue == 'x'
266. 
267. 
268. def test_content_symbol():
269.     mml = mp._print(Symbol("x"))
270.     assert mml.nodeName == 'ci'
271.     assert mml.childNodes[0].nodeValue == 'x'
272.     del mml
273. 
274.     mml = mp._print(Symbol("x^2"))
275.     assert mml.nodeName == 'ci'
276.     assert mml.childNodes[0].nodeName == 'mml:msup'
277.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
279.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
281.     del mml
282. 
283.     mml = mp._print(Symbol("x__2"))
284.     assert mml.nodeName == 'ci'
285.     assert mml.childNodes[0].nodeName == 'mml:msup'
286.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
288.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
290.     del mml
291. 
292.     mml = mp._print(Symbol("x_2"))
293.     assert mml.nodeName == 'ci'
294.     assert mml.childNodes[0].nodeName == 'mml:msub'
295.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
297.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
299.     del mml
300. 
301.     mml = mp._print(Symbol("x^3_2"))
302.     assert mml.nodeName == 'ci'
303.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
304.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
306.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
308.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
310.     del mml
311. 
312.     mml = mp._print(Symbol("x__3_2"))
313.     assert mml.nodeName == 'ci'
314.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
315.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
317.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
319.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
321.     del mml
322. 
323.     mml = mp._print(Symbol("x_2_a"))
324.     assert mml.nodeName == 'ci'
325.     assert mml.childNodes[0].nodeName == 'mml:msub'
326.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
328.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
331.         0].nodeValue == '2'
332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
334.         0].nodeValue == ' '
335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
337.         0].nodeValue == 'a'
338.     del mml
339. 
340.     mml = mp._print(Symbol("x^2^a"))
341.     assert mml.nodeName == 'ci'
342.     assert mml.childNodes[0].nodeName == 'mml:msup'
343.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
345.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
348.         0].nodeValue == '2'
349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
351.         0].nodeValue == ' '
352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
354.         0].nodeValue == 'a'
355.     del mml
356. 
357.     mml = mp._print(Symbol("x__2__a"))
358.     assert mml.nodeName == 'ci'
359.     assert mml.childNodes[0].nodeName == 'mml:msup'
360.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
362.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
365.         0].nodeValue == '2'
366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
368.         0].nodeValue == ' '
369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
371.         0].nodeValue == 'a'
372.     del mml
373. 
374. 
375. def test_content_mathml_greek():
376.     mml = mp._print(Symbol('alpha'))
377.     assert mml.nodeName == 'ci'
378.     assert mml.childNodes[0].nodeValue == u'\N{GREEK SMALL LETTER ALPHA}'
379. 
380.     assert mp.doprint(Symbol('alpha')) == '<ci>&#945;</ci>'
381.     assert mp.doprint(Symbol('beta')) == '<ci>&#946;</ci>'
382.     assert mp.doprint(Symbol('gamma')) == '<ci>&#947;</ci>'
383.     assert mp.doprint(Symbol('delta')) == '<ci>&#948;</ci>'
384.     assert mp.doprint(Symbol('epsilon')) == '<ci>&#949;</ci>'
385.     assert mp.doprint(Symbol('zeta')) == '<ci>&#950;</ci>'
386.     assert mp.doprint(Symbol('eta')) == '<ci>&#951;</ci>'
387.     assert mp.doprint(Symbol('theta')) == '<ci>&#952;</ci>'
388.     assert mp.doprint(Symbol('iota')) == '<ci>&#953;</ci>'
389.     assert mp.doprint(Symbol('kappa')) == '<ci>&#954;</ci>'
390.     assert mp.doprint(Symbol('lambda')) == '<ci>&#955;</ci>'
391.     assert mp.doprint(Symbol('mu')) == '<ci>&#956;</ci>'
392.     assert mp.doprint(Symbol('nu')) == '<ci>&#957;</ci>'
393.     assert mp.doprint(Symbol('xi')) == '<ci>&#958;</ci>'
394.     assert mp.doprint(Symbol('omicron')) == '<ci>&#959;</ci>'
395.     assert mp.doprint(Symbol('pi')) == '<ci>&#960;</ci>'
396.     assert mp.doprint(Symbol('rho')) == '<ci>&#961;</ci>'
397.     assert mp.doprint(Symbol('varsigma')) == '<ci>&#962;</ci>', mp.doprint(Symbol('varsigma'))
398.     assert mp.doprint(Symbol('sigma')) == '<ci>&#963;</ci>'
399.     assert mp.doprint(Symbol('tau')) == '<ci>&#964;</ci>'
400.     assert mp.doprint(Symbol('upsilon')) == '<ci>&#965;</ci>'
401.     assert mp.doprint(Symbol('phi')) == '<ci>&#966;</ci>'
402.     assert mp.doprint(Symbol('chi')) == '<ci>&#967;</ci>'
403.     assert mp.doprint(Symbol('psi')) == '<ci>&#968;</ci>'
404.     assert mp.doprint(Symbol('omega')) == '<ci>&#969;</ci>'
405. 
406.     assert mp.doprint(Symbol('Alpha')) == '<ci>&#913;</ci>'
407.     assert mp.doprint(Symbol('Beta')) == '<ci>&#914;</ci>'
408.     assert mp.doprint(Symbol('Gamma')) == '<ci>&#915;</ci>'
409.     assert mp.doprint(Symbol('Delta')) == '<ci>&#916;</ci>'
410.     assert mp.doprint(Symbol('Epsilon')) == '<ci>&#917;</ci>'
411.     assert mp.doprint(Symbol('Zeta')) == '<ci>&#918;</ci>'
412.     assert mp.doprint(Symbol('Eta')) == '<ci>&#919;</ci>'
413.     assert mp.doprint(Symbol('Theta')) == '<ci>&#920;</ci>'
414.     assert mp.doprint(Symbol('Iota')) == '<ci>&#921;</ci>'
415.     assert mp.doprint(Symbol('Kappa')) == '<ci>&#922;</ci>'
416.     assert mp.doprint(Symbol('Lambda')) == '<ci>&#923;</ci>'
417.     assert mp.doprint(Symbol('Mu')) == '<ci>&#924;</ci>'
418.     assert mp.doprint(Symbol('Nu')) == '<ci>&#925;</ci>'
419.     assert mp.doprint(Symbol('Xi')) == '<ci>&#926;</ci>'
420.     assert mp.doprint(Symbol('Omicron')) == '<ci>&#927;</ci>'
421.     assert mp.doprint(Symbol('Pi')) == '<ci>&#928;</ci>'
422.     assert mp.doprint(Symbol('Rho')) == '<ci>&#929;</ci>'
423.     assert mp.doprint(Symbol('Sigma')) == '<ci>&#931;</ci>'
424.     assert mp.doprint(Symbol('Tau')) == '<ci>&#932;</ci>'
425.     assert mp.doprint(Symbol('Upsilon')) == '<ci>&#933;</ci>'
426.     assert mp.doprint(Symbol('Phi')) == '<ci>&#934;</ci>'
427.     assert mp.doprint(Symbol('Chi')) == '<ci>&#935;</ci>'
428.     assert mp.doprint(Symbol('Psi')) == '<ci>&#936;</ci>'
429.     assert mp.doprint(Symbol('Omega')) == '<ci>&#937;</ci>'
430. 
431. 
432. def test_content_mathml_order():
433.     expr = x**3 + x**2*y + 3*x*y**3 + y**4
434. 
435.     mp = MathMLContentPrinter({'order': 'lex'})
436.     mml = mp._print(expr)
437. 
438.     assert mml.childNodes[1].childNodes[0].nodeName == 'power'
439.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == 'x'
440.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == '3'
441. 
442.     assert mml.childNodes[4].childNodes[0].nodeName == 'power'
443.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == 'y'
444.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == '4'
445. 
446.     mp = MathMLContentPrinter({'order': 'rev-lex'})
447.     mml = mp._print(expr)
448. 
449.     assert mml.childNodes[1].childNodes[0].nodeName == 'power'
450.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == 'y'
451.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == '4'
452. 
453.     assert mml.childNodes[4].childNodes[0].nodeName == 'power'
454.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == 'x'
455.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == '3'
456. 
457. 
458. def test_content_settings():
459.     raises(TypeError, lambda: mathml(Symbol("x"), method="garbage"))
460. 
461. 
462. def test_presentation_printmethod():
463.     assert mpp.doprint(1 + x) == '<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>'
464.     assert mpp.doprint(x**2) == '<msup><mi>x</mi><mn>2</mn></msup>'
465.     assert mpp.doprint(2*x) == '<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>'
466. 
467. 
468. def test_presentation_mathml_core():
469.     mml_1 = mpp._print(1 + x)
470.     assert mml_1.nodeName == 'mrow'
471.     nodes = mml_1.childNodes
472.     assert len(nodes) == 3
473.     assert nodes[0].nodeName in ['mi', 'mn']
474.     assert nodes[1].nodeName == 'mo'
475.     if nodes[0].nodeName == 'mn':
476.         assert nodes[0].childNodes[0].nodeValue == '1'
477.         assert nodes[2].childNodes[0].nodeValue == 'x'
478.     else:
479.         assert nodes[0].childNodes[0].nodeValue == 'x'
480.         assert nodes[2].childNodes[0].nodeValue == '1'
481. 
482.     mml_2 = mpp._print(x**2)
483.     assert mml_2.nodeName == 'msup'
484.     nodes = mml_2.childNodes
485.     assert nodes[0].childNodes[0].nodeValue == 'x'
486.     assert nodes[1].childNodes[0].nodeValue == '2'
487. 
488.     mml_3 = mpp._print(2*x)
489.     assert mml_3.nodeName == 'mrow'
490.     nodes = mml_3.childNodes
491.     assert nodes[0].childNodes[0].nodeValue == '2'
492.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
493.     assert nodes[2].childNodes[0].nodeValue == 'x'
494. 
495.     mml = mpp._print(Float(1.0, 2)*x)
496.     assert mml.nodeName == 'mrow'
497.     nodes = mml.childNodes
498.     assert nodes[0].childNodes[0].nodeValue == '1.0'
499.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
500.     assert nodes[2].childNodes[0].nodeValue == 'x'


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and return it in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-05 18:21:32,600 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="This test is highly relevant because it checks how symbols with subscripts and superscripts in their names are rendered in MathML. The user's issue with 'x2' is that SymPy interprets it as a symbol 'x' with a subscript '2'. This test case directly validates the MathML output for such symbols, making it essential for understanding the expected behavior.", relative_path='sympy/printing/tests/test_mathml.py', start_line=268, end_line=373), ContextOutput(reasoning="This test is relevant as it specifically covers the 'presentation' MathML printer, which is what the user is having issues with. It provides a simple, clear example of the expected output for basic expressions, serving as a good baseline.", relative_path='sympy/printing/tests/test_mathml.py', start_line=462, end_line=466), ContextOutput(reasoning="This test is relevant because it examines the underlying XML node structure of the 'presentation' MathML output. The user's problem is a rendering issue, which is directly tied to the generated XML structure. This test verifies the correctness of that structure for fundamental expressions.", relative_path='sympy/printing/tests/test_mathml.py', start_line=468, end_line=500), ContextOutput(reasoning="This test is relevant because it demonstrates how symbol names are parsed and converted into special MathML entities, in this case for Greek letters. This is analogous to how 'x2' is parsed into a symbol with a subscript, providing context on the symbol name processing logic that is at the heart of the user's issue.", relative_path='sympy/printing/tests/test_mathml.py', start_line=375, end_line=430), ContextOutput(reasoning="This test is relevant because it shows the foundational logic of the MathML content printer for basic operations like addition, powers, and multiplication. While the user's issue is with the presentation printer, understanding the content printer's behavior provides a useful comparison and a more complete picture of the MathML printing functionality.", relative_path='sympy/printing/tests/test_mathml.py', start_line=25, end_line=60)]
2025-10-05 18:21:32,601 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='sympy/printing/tests/test_mathml.py', content='268. def test_content_symbol():\n269.     mml = mp._print(Symbol("x"))\n270.     assert mml.nodeName == \'ci\'\n271.     assert mml.childNodes[0].nodeValue == \'x\'\n272.     del mml\n273. \n274.     mml = mp._print(Symbol("x^2"))\n275.     assert mml.nodeName == \'ci\'\n276.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n277.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n279.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n281.     del mml\n282. \n283.     mml = mp._print(Symbol("x__2"))\n284.     assert mml.nodeName == \'ci\'\n285.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n286.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n288.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n290.     del mml\n291. \n292.     mml = mp._print(Symbol("x_2"))\n293.     assert mml.nodeName == \'ci\'\n294.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n295.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n297.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n299.     del mml\n300. \n301.     mml = mp._print(Symbol("x^3_2"))\n302.     assert mml.nodeName == \'ci\'\n303.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n304.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n306.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n308.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n310.     del mml\n311. \n312.     mml = mp._print(Symbol("x__3_2"))\n313.     assert mml.nodeName == \'ci\'\n314.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n315.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n317.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n319.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n321.     del mml\n322. \n323.     mml = mp._print(Symbol("x_2_a"))\n324.     assert mml.nodeName == \'ci\'\n325.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n326.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n328.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n331.         0].nodeValue == \'2\'\n332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n334.         0].nodeValue == \' \'\n335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n337.         0].nodeValue == \'a\'\n338.     del mml\n339. \n340.     mml = mp._print(Symbol("x^2^a"))\n341.     assert mml.nodeName == \'ci\'\n342.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n343.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n345.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n348.         0].nodeValue == \'2\'\n349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n351.         0].nodeValue == \' \'\n352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n354.         0].nodeValue == \'a\'\n355.     del mml\n356. \n357.     mml = mp._print(Symbol("x__2__a"))\n358.     assert mml.nodeName == \'ci\'\n359.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n360.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n362.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n365.         0].nodeValue == \'2\'\n366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n368.         0].nodeValue == \' \'\n369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n371.         0].nodeValue == \'a\'\n372.     del mml\n373. ', start_line_number=268, end_line_number=373), Context(relative_path='sympy/printing/tests/test_mathml.py', content="462. def test_presentation_printmethod():\n463.     assert mpp.doprint(1 + x) == '<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>'\n464.     assert mpp.doprint(x**2) == '<msup><mi>x</mi><mn>2</mn></msup>'\n465.     assert mpp.doprint(2*x) == '<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>'\n466. ", start_line_number=462, end_line_number=466), Context(relative_path='sympy/printing/tests/test_mathml.py', content="468. def test_presentation_mathml_core():\n469.     mml_1 = mpp._print(1 + x)\n470.     assert mml_1.nodeName == 'mrow'\n471.     nodes = mml_1.childNodes\n472.     assert len(nodes) == 3\n473.     assert nodes[0].nodeName in ['mi', 'mn']\n474.     assert nodes[1].nodeName == 'mo'\n475.     if nodes[0].nodeName == 'mn':\n476.         assert nodes[0].childNodes[0].nodeValue == '1'\n477.         assert nodes[2].childNodes[0].nodeValue == 'x'\n478.     else:\n479.         assert nodes[0].childNodes[0].nodeValue == 'x'\n480.         assert nodes[2].childNodes[0].nodeValue == '1'\n481. \n482.     mml_2 = mpp._print(x**2)\n483.     assert mml_2.nodeName == 'msup'\n484.     nodes = mml_2.childNodes\n485.     assert nodes[0].childNodes[0].nodeValue == 'x'\n486.     assert nodes[1].childNodes[0].nodeValue == '2'\n487. \n488.     mml_3 = mpp._print(2*x)\n489.     assert mml_3.nodeName == 'mrow'\n490.     nodes = mml_3.childNodes\n491.     assert nodes[0].childNodes[0].nodeValue == '2'\n492.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'\n493.     assert nodes[2].childNodes[0].nodeValue == 'x'\n494. \n495.     mml = mpp._print(Float(1.0, 2)*x)\n496.     assert mml.nodeName == 'mrow'\n497.     nodes = mml.childNodes\n498.     assert nodes[0].childNodes[0].nodeValue == '1.0'\n499.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'\n500.     assert nodes[2].childNodes[0].nodeValue == 'x'", start_line_number=468, end_line_number=500), Context(relative_path='sympy/printing/tests/test_mathml.py', content="375. def test_content_mathml_greek():\n376.     mml = mp._print(Symbol('alpha'))\n377.     assert mml.nodeName == 'ci'\n378.     assert mml.childNodes[0].nodeValue == u'\\N{GREEK SMALL LETTER ALPHA}'\n379. \n380.     assert mp.doprint(Symbol('alpha')) == '<ci>&#945;</ci>'\n381.     assert mp.doprint(Symbol('beta')) == '<ci>&#946;</ci>'\n382.     assert mp.doprint(Symbol('gamma')) == '<ci>&#947;</ci>'\n383.     assert mp.doprint(Symbol('delta')) == '<ci>&#948;</ci>'\n384.     assert mp.doprint(Symbol('epsilon')) == '<ci>&#949;</ci>'\n385.     assert mp.doprint(Symbol('zeta')) == '<ci>&#950;</ci>'\n386.     assert mp.doprint(Symbol('eta')) == '<ci>&#951;</ci>'\n387.     assert mp.doprint(Symbol('theta')) == '<ci>&#952;</ci>'\n388.     assert mp.doprint(Symbol('iota')) == '<ci>&#953;</ci>'\n389.     assert mp.doprint(Symbol('kappa')) == '<ci>&#954;</ci>'\n390.     assert mp.doprint(Symbol('lambda')) == '<ci>&#955;</ci>'\n391.     assert mp.doprint(Symbol('mu')) == '<ci>&#956;</ci>'\n392.     assert mp.doprint(Symbol('nu')) == '<ci>&#957;</ci>'\n393.     assert mp.doprint(Symbol('xi')) == '<ci>&#958;</ci>'\n394.     assert mp.doprint(Symbol('omicron')) == '<ci>&#959;</ci>'\n395.     assert mp.doprint(Symbol('pi')) == '<ci>&#960;</ci>'\n396.     assert mp.doprint(Symbol('rho')) == '<ci>&#961;</ci>'\n397.     assert mp.doprint(Symbol('varsigma')) == '<ci>&#962;</ci>', mp.doprint(Symbol('varsigma'))\n398.     assert mp.doprint(Symbol('sigma')) == '<ci>&#963;</ci>'\n399.     assert mp.doprint(Symbol('tau')) == '<ci>&#964;</ci>'\n400.     assert mp.doprint(Symbol('upsilon')) == '<ci>&#965;</ci>'\n401.     assert mp.doprint(Symbol('phi')) == '<ci>&#966;</ci>'\n402.     assert mp.doprint(Symbol('chi')) == '<ci>&#967;</ci>'\n403.     assert mp.doprint(Symbol('psi')) == '<ci>&#968;</ci>'\n404.     assert mp.doprint(Symbol('omega')) == '<ci>&#969;</ci>'\n405. \n406.     assert mp.doprint(Symbol('Alpha')) == '<ci>&#913;</ci>'\n407.     assert mp.doprint(Symbol('Beta')) == '<ci>&#914;</ci>'\n408.     assert mp.doprint(Symbol('Gamma')) == '<ci>&#915;</ci>'\n409.     assert mp.doprint(Symbol('Delta')) == '<ci>&#916;</ci>'\n410.     assert mp.doprint(Symbol('Epsilon')) == '<ci>&#917;</ci>'\n411.     assert mp.doprint(Symbol('Zeta')) == '<ci>&#918;</ci>'\n412.     assert mp.doprint(Symbol('Eta')) == '<ci>&#919;</ci>'\n413.     assert mp.doprint(Symbol('Theta')) == '<ci>&#920;</ci>'\n414.     assert mp.doprint(Symbol('Iota')) == '<ci>&#921;</ci>'\n415.     assert mp.doprint(Symbol('Kappa')) == '<ci>&#922;</ci>'\n416.     assert mp.doprint(Symbol('Lambda')) == '<ci>&#923;</ci>'\n417.     assert mp.doprint(Symbol('Mu')) == '<ci>&#924;</ci>'\n418.     assert mp.doprint(Symbol('Nu')) == '<ci>&#925;</ci>'\n419.     assert mp.doprint(Symbol('Xi')) == '<ci>&#926;</ci>'\n420.     assert mp.doprint(Symbol('Omicron')) == '<ci>&#927;</ci>'\n421.     assert mp.doprint(Symbol('Pi')) == '<ci>&#928;</ci>'\n422.     assert mp.doprint(Symbol('Rho')) == '<ci>&#929;</ci>'\n423.     assert mp.doprint(Symbol('Sigma')) == '<ci>&#931;</ci>'\n424.     assert mp.doprint(Symbol('Tau')) == '<ci>&#932;</ci>'\n425.     assert mp.doprint(Symbol('Upsilon')) == '<ci>&#933;</ci>'\n426.     assert mp.doprint(Symbol('Phi')) == '<ci>&#934;</ci>'\n427.     assert mp.doprint(Symbol('Chi')) == '<ci>&#935;</ci>'\n428.     assert mp.doprint(Symbol('Psi')) == '<ci>&#936;</ci>'\n429.     assert mp.doprint(Symbol('Omega')) == '<ci>&#937;</ci>'\n430. ", start_line_number=375, end_line_number=430), Context(relative_path='sympy/printing/tests/test_mathml.py', content="25. def test_content_mathml_core():\n26.     mml_1 = mp._print(1 + x)\n27.     assert mml_1.nodeName == 'apply'\n28.     nodes = mml_1.childNodes\n29.     assert len(nodes) == 3\n30.     assert nodes[0].nodeName == 'plus'\n31.     assert nodes[0].hasChildNodes() is False\n32.     assert nodes[0].nodeValue is None\n33.     assert nodes[1].nodeName in ['cn', 'ci']\n34.     if nodes[1].nodeName == 'cn':\n35.         assert nodes[1].childNodes[0].nodeValue == '1'\n36.         assert nodes[2].childNodes[0].nodeValue == 'x'\n37.     else:\n38.         assert nodes[1].childNodes[0].nodeValue == 'x'\n39.         assert nodes[2].childNodes[0].nodeValue == '1'\n40. \n41.     mml_2 = mp._print(x**2)\n42.     assert mml_2.nodeName == 'apply'\n43.     nodes = mml_2.childNodes\n44.     assert nodes[1].childNodes[0].nodeValue == 'x'\n45.     assert nodes[2].childNodes[0].nodeValue == '2'\n46. \n47.     mml_3 = mp._print(2*x)\n48.     assert mml_3.nodeName == 'apply'\n49.     nodes = mml_3.childNodes\n50.     assert nodes[0].nodeName == 'times'\n51.     assert nodes[1].childNodes[0].nodeValue == '2'\n52.     assert nodes[2].childNodes[0].nodeValue == 'x'\n53. \n54.     mml = mp._print(Float(1.0, 2)*x)\n55.     assert mml.nodeName == 'apply'\n56.     nodes = mml.childNodes\n57.     assert nodes[0].nodeName == 'times'\n58.     assert nodes[1].childNodes[0].nodeValue == '1.0'\n59.     assert nodes[2].childNodes[0].nodeValue == 'x'\n60. ", start_line_number=25, end_line_number=60)]
2025-10-05 18:21:32,602 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-05 18:21:32,602 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.rst
├── azure-pipelines.yml
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   └── src
|       ├── _static
|       ├── _templates
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── gotchas.rst
|       ├── guide.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   └── sparse.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   └── tensor.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   ├── runtests.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── python-comparisons.rst
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── README.md
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   └── release.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── array_utils.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_array_utils.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── evaluate.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_evaluate.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_class_registry.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi.py
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   └── dpll2.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── immutable.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_commonmatrix.py
    |       ├── test_densearith.py
    |       ├── test_densesolve.py
    |       ├── test_densetools.py
    |       ├── test_immutable.py
    |       ├── test_interactions.py
    |       ├── test_matrices.py
    |       ├── test_normalforms.py
    |       ├── test_sparse.py
    |       └── test_sparsetools.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── egyptian_fraction.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── __init__.py
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autolev.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_plot.py
    |   |   └── test_plot_implicit.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   └── test_theanocode.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine.py
    |   ├── inequalities.py
    |   ├── ode.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_diophantine.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_ode.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_mix.py
    |       ├── test_rv.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_module_imports.py
    |   |   ├── test_pickling.py
    |   |   ├── test_pytest.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
A symbol ending with a number is made invisible when printing with MathML

Issue description: 
A variable with a number, such as x1, is made invisible when printing in a MathML format.
`import sympy
from sympy.printing.mathml import mathml

x2, y, z = sympy.symbols('x2 y z')
y = x2*z+x2**3
f = open('sympy_test.html', 'w')
f.write('\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.write(sympy.mathml(y, printer='presentation')+'\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.close()`

Viewing the output in Safari 12.0.2:
<img width="93" alt="screen shot 2018-12-31 at 12 21 00 pm" src="https://user-images.githubusercontent.com/46286768/50567565-48d8c080-0cfb-11e9-84d2-5738f1c2e2ba.png">

If 'x' is used instead of 'x2', it works as expected:
x, y, z = sympy.symbols('x y z')
y = x*z+x**3
<img width="78" alt="screen shot 2018-12-31 at 12 26 24 pm" src="https://user-images.githubusercontent.com/46286768/50567570-542bec00-0cfb-11e9-986d-015e0023a2a1.png">

BTW, I'm on a MacBook Pro, OS 10.14.2, Sympy 1.3, in Eclipse 2018-19, and Python 3.7.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/printing/tests/test_mathml.py
Line number range: 268 - 373
Content:
268. def test_content_symbol():
269.     mml = mp._print(Symbol("x"))
270.     assert mml.nodeName == 'ci'
271.     assert mml.childNodes[0].nodeValue == 'x'
272.     del mml
273. 
274.     mml = mp._print(Symbol("x^2"))
275.     assert mml.nodeName == 'ci'
276.     assert mml.childNodes[0].nodeName == 'mml:msup'
277.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
279.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
281.     del mml
282. 
283.     mml = mp._print(Symbol("x__2"))
284.     assert mml.nodeName == 'ci'
285.     assert mml.childNodes[0].nodeName == 'mml:msup'
286.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
288.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
290.     del mml
291. 
292.     mml = mp._print(Symbol("x_2"))
293.     assert mml.nodeName == 'ci'
294.     assert mml.childNodes[0].nodeName == 'mml:msub'
295.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
297.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
299.     del mml
300. 
301.     mml = mp._print(Symbol("x^3_2"))
302.     assert mml.nodeName == 'ci'
303.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
304.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
306.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
308.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
310.     del mml
311. 
312.     mml = mp._print(Symbol("x__3_2"))
313.     assert mml.nodeName == 'ci'
314.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
315.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
317.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
319.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
321.     del mml
322. 
323.     mml = mp._print(Symbol("x_2_a"))
324.     assert mml.nodeName == 'ci'
325.     assert mml.childNodes[0].nodeName == 'mml:msub'
326.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
328.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
331.         0].nodeValue == '2'
332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
334.         0].nodeValue == ' '
335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
337.         0].nodeValue == 'a'
338.     del mml
339. 
340.     mml = mp._print(Symbol("x^2^a"))
341.     assert mml.nodeName == 'ci'
342.     assert mml.childNodes[0].nodeName == 'mml:msup'
343.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
345.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
348.         0].nodeValue == '2'
349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
351.         0].nodeValue == ' '
352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
354.         0].nodeValue == 'a'
355.     del mml
356. 
357.     mml = mp._print(Symbol("x__2__a"))
358.     assert mml.nodeName == 'ci'
359.     assert mml.childNodes[0].nodeName == 'mml:msup'
360.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
362.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
365.         0].nodeValue == '2'
366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
368.         0].nodeValue == ' '
369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
371.         0].nodeValue == 'a'
372.     del mml
373. 


File: sympy/printing/tests/test_mathml.py
Line number range: 462 - 466
Content:
462. def test_presentation_printmethod():
463.     assert mpp.doprint(1 + x) == '<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>'
464.     assert mpp.doprint(x**2) == '<msup><mi>x</mi><mn>2</mn></msup>'
465.     assert mpp.doprint(2*x) == '<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>'
466. 


File: sympy/printing/tests/test_mathml.py
Line number range: 468 - 500
Content:
468. def test_presentation_mathml_core():
469.     mml_1 = mpp._print(1 + x)
470.     assert mml_1.nodeName == 'mrow'
471.     nodes = mml_1.childNodes
472.     assert len(nodes) == 3
473.     assert nodes[0].nodeName in ['mi', 'mn']
474.     assert nodes[1].nodeName == 'mo'
475.     if nodes[0].nodeName == 'mn':
476.         assert nodes[0].childNodes[0].nodeValue == '1'
477.         assert nodes[2].childNodes[0].nodeValue == 'x'
478.     else:
479.         assert nodes[0].childNodes[0].nodeValue == 'x'
480.         assert nodes[2].childNodes[0].nodeValue == '1'
481. 
482.     mml_2 = mpp._print(x**2)
483.     assert mml_2.nodeName == 'msup'
484.     nodes = mml_2.childNodes
485.     assert nodes[0].childNodes[0].nodeValue == 'x'
486.     assert nodes[1].childNodes[0].nodeValue == '2'
487. 
488.     mml_3 = mpp._print(2*x)
489.     assert mml_3.nodeName == 'mrow'
490.     nodes = mml_3.childNodes
491.     assert nodes[0].childNodes[0].nodeValue == '2'
492.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
493.     assert nodes[2].childNodes[0].nodeValue == 'x'
494. 
495.     mml = mpp._print(Float(1.0, 2)*x)
496.     assert mml.nodeName == 'mrow'
497.     nodes = mml.childNodes
498.     assert nodes[0].childNodes[0].nodeValue == '1.0'
499.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
500.     assert nodes[2].childNodes[0].nodeValue == 'x'


File: sympy/printing/tests/test_mathml.py
Line number range: 375 - 430
Content:
375. def test_content_mathml_greek():
376.     mml = mp._print(Symbol('alpha'))
377.     assert mml.nodeName == 'ci'
378.     assert mml.childNodes[0].nodeValue == u'\N{GREEK SMALL LETTER ALPHA}'
379. 
380.     assert mp.doprint(Symbol('alpha')) == '<ci>&#945;</ci>'
381.     assert mp.doprint(Symbol('beta')) == '<ci>&#946;</ci>'
382.     assert mp.doprint(Symbol('gamma')) == '<ci>&#947;</ci>'
383.     assert mp.doprint(Symbol('delta')) == '<ci>&#948;</ci>'
384.     assert mp.doprint(Symbol('epsilon')) == '<ci>&#949;</ci>'
385.     assert mp.doprint(Symbol('zeta')) == '<ci>&#950;</ci>'
386.     assert mp.doprint(Symbol('eta')) == '<ci>&#951;</ci>'
387.     assert mp.doprint(Symbol('theta')) == '<ci>&#952;</ci>'
388.     assert mp.doprint(Symbol('iota')) == '<ci>&#953;</ci>'
389.     assert mp.doprint(Symbol('kappa')) == '<ci>&#954;</ci>'
390.     assert mp.doprint(Symbol('lambda')) == '<ci>&#955;</ci>'
391.     assert mp.doprint(Symbol('mu')) == '<ci>&#956;</ci>'
392.     assert mp.doprint(Symbol('nu')) == '<ci>&#957;</ci>'
393.     assert mp.doprint(Symbol('xi')) == '<ci>&#958;</ci>'
394.     assert mp.doprint(Symbol('omicron')) == '<ci>&#959;</ci>'
395.     assert mp.doprint(Symbol('pi')) == '<ci>&#960;</ci>'
396.     assert mp.doprint(Symbol('rho')) == '<ci>&#961;</ci>'
397.     assert mp.doprint(Symbol('varsigma')) == '<ci>&#962;</ci>', mp.doprint(Symbol('varsigma'))
398.     assert mp.doprint(Symbol('sigma')) == '<ci>&#963;</ci>'
399.     assert mp.doprint(Symbol('tau')) == '<ci>&#964;</ci>'
400.     assert mp.doprint(Symbol('upsilon')) == '<ci>&#965;</ci>'
401.     assert mp.doprint(Symbol('phi')) == '<ci>&#966;</ci>'
402.     assert mp.doprint(Symbol('chi')) == '<ci>&#967;</ci>'
403.     assert mp.doprint(Symbol('psi')) == '<ci>&#968;</ci>'
404.     assert mp.doprint(Symbol('omega')) == '<ci>&#969;</ci>'
405. 
406.     assert mp.doprint(Symbol('Alpha')) == '<ci>&#913;</ci>'
407.     assert mp.doprint(Symbol('Beta')) == '<ci>&#914;</ci>'
408.     assert mp.doprint(Symbol('Gamma')) == '<ci>&#915;</ci>'
409.     assert mp.doprint(Symbol('Delta')) == '<ci>&#916;</ci>'
410.     assert mp.doprint(Symbol('Epsilon')) == '<ci>&#917;</ci>'
411.     assert mp.doprint(Symbol('Zeta')) == '<ci>&#918;</ci>'
412.     assert mp.doprint(Symbol('Eta')) == '<ci>&#919;</ci>'
413.     assert mp.doprint(Symbol('Theta')) == '<ci>&#920;</ci>'
414.     assert mp.doprint(Symbol('Iota')) == '<ci>&#921;</ci>'
415.     assert mp.doprint(Symbol('Kappa')) == '<ci>&#922;</ci>'
416.     assert mp.doprint(Symbol('Lambda')) == '<ci>&#923;</ci>'
417.     assert mp.doprint(Symbol('Mu')) == '<ci>&#924;</ci>'
418.     assert mp.doprint(Symbol('Nu')) == '<ci>&#925;</ci>'
419.     assert mp.doprint(Symbol('Xi')) == '<ci>&#926;</ci>'
420.     assert mp.doprint(Symbol('Omicron')) == '<ci>&#927;</ci>'
421.     assert mp.doprint(Symbol('Pi')) == '<ci>&#928;</ci>'
422.     assert mp.doprint(Symbol('Rho')) == '<ci>&#929;</ci>'
423.     assert mp.doprint(Symbol('Sigma')) == '<ci>&#931;</ci>'
424.     assert mp.doprint(Symbol('Tau')) == '<ci>&#932;</ci>'
425.     assert mp.doprint(Symbol('Upsilon')) == '<ci>&#933;</ci>'
426.     assert mp.doprint(Symbol('Phi')) == '<ci>&#934;</ci>'
427.     assert mp.doprint(Symbol('Chi')) == '<ci>&#935;</ci>'
428.     assert mp.doprint(Symbol('Psi')) == '<ci>&#936;</ci>'
429.     assert mp.doprint(Symbol('Omega')) == '<ci>&#937;</ci>'
430. 


File: sympy/printing/tests/test_mathml.py
Line number range: 25 - 60
Content:
25. def test_content_mathml_core():
26.     mml_1 = mp._print(1 + x)
27.     assert mml_1.nodeName == 'apply'
28.     nodes = mml_1.childNodes
29.     assert len(nodes) == 3
30.     assert nodes[0].nodeName == 'plus'
31.     assert nodes[0].hasChildNodes() is False
32.     assert nodes[0].nodeValue is None
33.     assert nodes[1].nodeName in ['cn', 'ci']
34.     if nodes[1].nodeName == 'cn':
35.         assert nodes[1].childNodes[0].nodeValue == '1'
36.         assert nodes[2].childNodes[0].nodeValue == 'x'
37.     else:
38.         assert nodes[1].childNodes[0].nodeValue == 'x'
39.         assert nodes[2].childNodes[0].nodeValue == '1'
40. 
41.     mml_2 = mp._print(x**2)
42.     assert mml_2.nodeName == 'apply'
43.     nodes = mml_2.childNodes
44.     assert nodes[1].childNodes[0].nodeValue == 'x'
45.     assert nodes[2].childNodes[0].nodeValue == '2'
46. 
47.     mml_3 = mp._print(2*x)
48.     assert mml_3.nodeName == 'apply'
49.     nodes = mml_3.childNodes
50.     assert nodes[0].nodeName == 'times'
51.     assert nodes[1].childNodes[0].nodeValue == '2'
52.     assert nodes[2].childNodes[0].nodeValue == 'x'
53. 
54.     mml = mp._print(Float(1.0, 2)*x)
55.     assert mml.nodeName == 'apply'
56.     nodes = mml.childNodes
57.     assert nodes[0].nodeName == 'times'
58.     assert nodes[1].childNodes[0].nodeValue == '1.0'
59.     assert nodes[2].childNodes[0].nodeValue == 'x'
60. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-05 18:21:48,734 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='1. The user wants to find 5 complete and self-contained test cases related to a MathML printing bug.\n2. The provided context contains several relevant test functions from `sympy/printing/tests/test_mathml.py`, which is the correct file to look for these tests.\n3. However, the context only provides snippets of the test functions and does not include the necessary imports and setup code (like the instantiation of printers `mp` and `mpp`, and the definition of symbols like `x`) from the beginning of the file.\n4. To provide complete and runnable test cases as requested, I need the full content of the test file to extract all required imports and setup fixtures.' refined_query='Please provide the full content of the file `sympy/printing/tests/test_mathml.py`.'
2025-10-05 18:21:51,316 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/printing/tests/test_mathml.py"}'}, '__gemini_function_call_thought_signatures__': {'296c466a-e20e-4e8f-b5bc-c6812d7325f9': 'CtcDAR/MhbbZEJwnNOZv67NTGde20A5H6lzn/PBqvNRcf+/tMXyQuR6IQTCbY4qRxzV8oiS2t/UIOohpKyU/fXCXq1PllgFWzfhX4MrZa1gwhmsuUBD1KaFccLluTm3TZlGP2ylVBydNcVpynDqvhmY+3Fv2KKwJy5+CSZdABhrWgrOX94pHiYvWN7uYFlVyMOLseyu3t+TYe1Sg21/nhJMnJl4Zh0XTEhNkJooCjvjfBZq2VD6wo8InbES17toVCNQ1sf0BZji9OL7Vh9JR7kbSwwwyDw+eoVa0czR3cLRI0EG4piF99Druacej0ktnC05LZicMA09/F4TVh+TApBymmW9d0ukJBSVpQv7wvAwCXydowpxZ98dZxxxnqze9jtYZuv1L1YNTm1JkCgCp4KjXDQZmmoOgIzv1BKF7g+lt2oIVn0fXigWwzDJAduB/+Tak3BJlm2tzgwANqA8Dco7Zoc1nPMhTrmdycyWIIFl4aOWuq4BPqsWIAFgXqpcaRPj7OXquGsqHTkQZeCTDANVh1IiF4jhO46Ei6aB/ligwbqJtU3QgUySGgAc6Sv8bcxu8D+pZaXW8mQ6VZwZtHxfp+zJI6QvLYraLgy036Zdt/Cl4ZbanLfje'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19054, 'candidates_token_count': 27, 'total_token_count': 19203, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19054}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 122, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.04706842369503445, 'model_name': 'gemini-2.5-pro'} id='run--9403f0d1-5248-4bf0-8d45-02718e93fc2f-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/printing/tests/test_mathml.py'}, 'id': '296c466a-e20e-4e8f-b5bc-c6812d7325f9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 19054, 'output_tokens': 27, 'total_tokens': 19203, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 122}}
2025-10-05 18:21:54,263 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "sympy/printing/tests/test_mathml.py", "end_line": 1001.0}'}, '__gemini_function_call_thought_signatures__': {'f29cf92f-b79c-4fa5-ad52-59bb22880038': 'CqMEAR/MhbYBwobtDvrVm9ggN3eclf8JEiOp8h9GOIxfKOAdVpc6/AI0uzCV/ff2QxittI3QU2WLV+SnaUvQQT8SWTXBDus7p3h1pAi8NL1KSvhZFRm9o9ANcOYGduHNtP7XKadEFKjggGlfIf9IZjS0fBfBy6h7iwncgIdnQ/UQjFfJe2bmbHkgS2uaFzrWwPaxGo2nVQ/rqUIcnA+WSIdaTEx7Fe2rGBtm9+cpWN+xVxNGqVVcE317j8J92gV/HJn/WjUDJZ7wXGW0RcGuEuWZ2MBSv3DjUrLhBlTlJLsq+A6L6U2wFd1/dZqVrTe6ldDEbrdOOwkVIXTS27rquNOBqSrssekxcH8Xbt6uhaFeLTB8aMi230Epj4We+YlH9GJDddkQbKV/yFrtrX/68YmR3y8kPEXgVQEgRlmhCOn5t88FvvwCtLN87pN7qnLX3PYGfHlvkZv8gi7JpES6yc2Qx526IP1DGxAelbc9bDIKUwq1DpZZAZxHv1qyXZ4setzULa0leui6DLrbEvyg+PlSM4+nDfrZvE5NDAarMHM1kUPTExYEth3OLbW9Bu2yyANjHHqJR7+CAbpP5/Oi4XHUq5W5SX5UwrnPm2SLxL8SfWFtzXT9p+SiLGF3MLMcB2exA39RrC7pJr1LucuNEaCAe+6lnrQFTbpfp0bAzU6e+fHvkLVbWwffl1b8mhNI26Xub42A5w7w5qpRp//7GIPbMY8y9A=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 28903, 'candidates_token_count': 33, 'total_token_count': 29086, 'cached_content_token_count': 17323, 'prompt_tokens_details': [{'modality': 1, 'token_count': 29023}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17323}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 33}], 'thoughts_token_count': 150}, 'finish_reason': 'STOP', 'avg_logprobs': -0.47172130237926135, 'model_name': 'gemini-2.5-pro'} id='run--3f8ea4f9-58f9-44af-b9a0-15bbf76fab4d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'sympy/printing/tests/test_mathml.py', 'end_line': 1001.0}, 'id': 'f29cf92f-b79c-4fa5-ad52-59bb22880038', 'type': 'tool_call'}] usage_metadata={'input_tokens': 28903, 'output_tokens': 33, 'total_tokens': 29086, 'input_token_details': {'cache_read': 17323}, 'output_token_details': {'reasoning': 150}}
2025-10-05 18:21:57,475 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "sympy/printing/tests/test_mathml.py", "start_line": 1002.0, "end_line": 1502.0}'}, '__gemini_function_call_thought_signatures__': {'8504a7e9-f4fb-4355-879e-f5592acfda3b': 'CukDAR/Mhbb8W6pvRDLwXYve4lGB3WjmvdyBO6d4ZQsKmJ6z9YVRwZx4NLsIlUNQ67LjDUL2Z3uPnjo8bojTgFtZjAsz4iOeBq/QQ0Zgk5fFyA9gNvrP0VyTV6HRcTSsAoTFOyNY1WWOzmePk3P3gsqRDlZe4yjO4ya0RxEUvcKvZ9UT+annjj4ZxvEbSS+du1DZo7wKUksiaLB9iD04I8hz6EGaykyT/8tI2WgtwJR9HyX54Tui9NCh+ijLZvdPIQGtqjpUeAbwAJy+V0lSY7hkVgJOgpG6CFO9N4yJbBc9GpylL8A52HfsWRoD5Vu0RkbSeCEAgj04tqsBKJ+PEbsBZMKoOSkByf6COjkEd2C8jpMcaekXUDEOa/pjlt4eUO/NphLH5zxzm+QkRUNtcnTeXBGwehwCKeY9GAxExuPnYtaNRDPf2pW8E6TbtTL4ZTz/cVMaBd3w5Rkq0YZaq6++YWhfELoHuDWhvcWFUPLBbPp7lHrH/1NU5iPSIuadl2Hx/h3Vy+Y7ETkVVVLKY3UEWh7Oevo1GPHH7wh/LMWRH1k2VByv/4omk+yjpKy/mz4unk8OqvKQF2UvW6cUg0MjWTck4sXWH06pxdh/qPV+fZ/M9g5mJzskHm4QygQ6uSbbkQB/0K2nbAN1'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38439, 'candidates_token_count': 33, 'total_token_count': 38610, 'cached_content_token_count': 28679, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38707}], 'cache_tokens_details': [{'modality': 1, 'token_count': 28679}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 33}], 'thoughts_token_count': 138}, 'finish_reason': 'STOP', 'avg_logprobs': -0.12775847406098337, 'model_name': 'gemini-2.5-pro'} id='run--1caa7f3f-1b33-4da0-97c0-5e70aee4afc7-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'sympy/printing/tests/test_mathml.py', 'start_line': 1002.0, 'end_line': 1502.0}, 'id': '8504a7e9-f4fb-4355-879e-f5592acfda3b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38439, 'output_tokens': 33, 'total_tokens': 38610, 'input_token_details': {'cache_read': 28679}, 'output_token_details': {'reasoning': 138}}
2025-10-05 18:29:04,392 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 1082, 'end_index': 1337, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 2672, 'end_index': 2927, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 3168, 'end_index': 10046, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 10059, 'end_index': 10338, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 11040, 'end_index': 12474, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 12488, 'end_index': 18747, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 18583, 'end_index': 18936, 'uri': 'https://github.com/diofant/diofant', 'title': '', 'license_': ''}, {'start_index': 18786, 'end_index': 21724, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 21585, 'end_index': 21909, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 21947, 'end_index': 23592, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 23436, 'end_index': 23933, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 23926, 'end_index': 24200, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 24208, 'end_index': 24824, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 24681, 'end_index': 25435, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 25268, 'end_index': 29301, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 29307, 'end_index': 32210, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 32063, 'end_index': 32460, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 32306, 'end_index': 32691, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 32654, 'end_index': 33089, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 33052, 'end_index': 33486, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 33449, 'end_index': 34022, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 33985, 'end_index': 34559, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 34522, 'end_index': 35103, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 35339, 'end_index': 35943, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 36179, 'end_index': 36785, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 37021, 'end_index': 38365, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 38203, 'end_index': 38559, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 38409, 'end_index': 41314, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 41183, 'end_index': 41518, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 41386, 'end_index': 42001, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 42058, 'end_index': 42737, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 38563, 'total_token_count': 38563, 'cached_content_token_count': 36701, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38967}], 'cache_tokens_details': [{'modality': 1, 'token_count': 36701}], 'candidates_token_count': 0, 'thoughts_token_count': 0, 'candidates_tokens_details': []}, 'finish_reason': 'RECITATION', 'model_name': 'gemini-2.5-pro'} id='run--c4e7db1c-fde1-4dd7-8896-3eb849e2ddc9-0' usage_metadata={'input_tokens': 38563, 'output_tokens': 0, 'total_tokens': 38563, 'input_token_details': {'cache_read': 36701}}
2025-10-05 18:29:04,393 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-05 18:29:04,394 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
A symbol ending with a number is made invisible when printing with MathML

Issue description: 
A variable with a number, such as x1, is made invisible when printing in a MathML format.
`import sympy
from sympy.printing.mathml import mathml

x2, y, z = sympy.symbols('x2 y z')
y = x2*z+x2**3
f = open('sympy_test.html', 'w')
f.write('\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.write(sympy.mathml(y, printer='presentation')+'\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.close()`

Viewing the output in Safari 12.0.2:
<img width="93" alt="screen shot 2018-12-31 at 12 21 00 pm" src="https://user-images.githubusercontent.com/46286768/50567565-48d8c080-0cfb-11e9-84d2-5738f1c2e2ba.png">

If 'x' is used instead of 'x2', it works as expected:
x, y, z = sympy.symbols('x y z')
y = x*z+x**3
<img width="78" alt="screen shot 2018-12-31 at 12 26 24 pm" src="https://user-images.githubusercontent.com/46286768/50567570-542bec00-0cfb-11e9-986d-015e0023a2a1.png">

BTW, I'm on a MacBook Pro, OS 10.14.2, Sympy 1.3, in Eclipse 2018-19, and Python 3.7.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the full content of the file `sympy/printing/tests/test_mathml.py`.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/printing/tests/test_mathml.py
Line number range: 1 - 500
Content:
1. from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \
2.     tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \
3.     pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \
4.     MatrixSymbol
5. from sympy.stats.rv import RandomSymbol
6. from sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \
7.     MathMLPrinter
8. 
9. from sympy.utilities.pytest import raises
10. 
11. x = Symbol('x')
12. y = Symbol('y')
13. mp = MathMLContentPrinter()
14. mpp = MathMLPresentationPrinter()
15. 
16. def test_mathml_printer():
17.     m = MathMLPrinter()
18.     assert m.doprint(1+x) == mp.doprint(1+x)
19. 
20. 
21. def test_content_printmethod():
22.     assert mp.doprint(1 + x) == '<apply><plus/><ci>x</ci><cn>1</cn></apply>'
23. 
24. 
25. def test_content_mathml_core():
26.     mml_1 = mp._print(1 + x)
27.     assert mml_1.nodeName == 'apply'
28.     nodes = mml_1.childNodes
29.     assert len(nodes) == 3
30.     assert nodes[0].nodeName == 'plus'
31.     assert nodes[0].hasChildNodes() is False
32.     assert nodes[0].nodeValue is None
33.     assert nodes[1].nodeName in ['cn', 'ci']
34.     if nodes[1].nodeName == 'cn':
35.         assert nodes[1].childNodes[0].nodeValue == '1'
36.         assert nodes[2].childNodes[0].nodeValue == 'x'
37.     else:
38.         assert nodes[1].childNodes[0].nodeValue == 'x'
39.         assert nodes[2].childNodes[0].nodeValue == '1'
40. 
41.     mml_2 = mp._print(x**2)
42.     assert mml_2.nodeName == 'apply'
43.     nodes = mml_2.childNodes
44.     assert nodes[1].childNodes[0].nodeValue == 'x'
45.     assert nodes[2].childNodes[0].nodeValue == '2'
46. 
47.     mml_3 = mp._print(2*x)
48.     assert mml_3.nodeName == 'apply'
49.     nodes = mml_3.childNodes
50.     assert nodes[0].nodeName == 'times'
51.     assert nodes[1].childNodes[0].nodeValue == '2'
52.     assert nodes[2].childNodes[0].nodeValue == 'x'
53. 
54.     mml = mp._print(Float(1.0, 2)*x)
55.     assert mml.nodeName == 'apply'
56.     nodes = mml.childNodes
57.     assert nodes[0].nodeName == 'times'
58.     assert nodes[1].childNodes[0].nodeValue == '1.0'
59.     assert nodes[2].childNodes[0].nodeValue == 'x'
60. 
61. 
62. def test_content_mathml_functions():
63.     mml_1 = mp._print(sin(x))
64.     assert mml_1.nodeName == 'apply'
65.     assert mml_1.childNodes[0].nodeName == 'sin'
66.     assert mml_1.childNodes[1].nodeName == 'ci'
67. 
68.     mml_2 = mp._print(diff(sin(x), x, evaluate=False))
69.     assert mml_2.nodeName == 'apply'
70.     assert mml_2.childNodes[0].nodeName == 'diff'
71.     assert mml_2.childNodes[1].nodeName == 'bvar'
72.     assert mml_2.childNodes[1].childNodes[
73.         0].nodeName == 'ci'  # below bvar there's <ci>x/ci>
74. 
75.     mml_3 = mp._print(diff(cos(x*y), x, evaluate=False))
76.     assert mml_3.nodeName == 'apply'
77.     assert mml_3.childNodes[0].nodeName == 'partialdiff'
78.     assert mml_3.childNodes[1].nodeName == 'bvar'
79.     assert mml_3.childNodes[1].childNodes[
80.         0].nodeName == 'ci'  # below bvar there's <ci>x/ci>
81. 
82. 
83. def test_content_mathml_limits():
84.     # XXX No unevaluated limits
85.     lim_fun = sin(x)/x
86.     mml_1 = mp._print(Limit(lim_fun, x, 0))
87.     assert mml_1.childNodes[0].nodeName == 'limit'
88.     assert mml_1.childNodes[1].nodeName == 'bvar'
89.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
90.     assert mml_1.childNodes[3].toxml() == mp._print(lim_fun).toxml()
91. 
92. 
93. def test_content_mathml_integrals():
94.     integrand = x
95.     mml_1 = mp._print(Integral(integrand, (x, 0, 1)))
96.     assert mml_1.childNodes[0].nodeName == 'int'
97.     assert mml_1.childNodes[1].nodeName == 'bvar'
98.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
99.     assert mml_1.childNodes[3].nodeName == 'uplimit'
100.     assert mml_1.childNodes[4].toxml() == mp._print(integrand).toxml()
101. 
102. def test_content_mathml_matrices():
103.     A = Matrix([1, 2, 3])
104.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])
105.     mll_1 = mp._print(A)
106.     assert mll_1.childNodes[0].nodeName == 'matrixrow'
107.     assert mll_1.childNodes[0].childNodes[0].nodeName == 'cn'
108.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeValue == '1'
109.     assert mll_1.childNodes[1].nodeName == 'matrixrow'
110.     assert mll_1.childNodes[1].childNodes[0].nodeName == 'cn'
111.     assert mll_1.childNodes[1].childNodes[0].childNodes[0].nodeValue == '2'
112.     assert mll_1.childNodes[2].nodeName == 'matrixrow'
113.     assert mll_1.childNodes[2].childNodes[0].nodeName == 'cn'
114.     assert mll_1.childNodes[2].childNodes[0].childNodes[0].nodeValue == '3'
115.     mll_2 = mp._print(B)
116.     assert mll_2.childNodes[0].nodeName == 'matrixrow'
117.     assert mll_2.childNodes[0].childNodes[0].nodeName == 'cn'
118.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeValue == '0'
119.     assert mll_2.childNodes[0].childNodes[1].nodeName == 'cn'
120.     assert mll_2.childNodes[0].childNodes[1].childNodes[0].nodeValue == '5'
121.     assert mll_2.childNodes[0].childNodes[2].nodeName == 'cn'
122.     assert mll_2.childNodes[0].childNodes[2].childNodes[0].nodeValue == '4'
123.     assert mll_2.childNodes[1].nodeName == 'matrixrow'
124.     assert mll_2.childNodes[1].childNodes[0].nodeName == 'cn'
125.     assert mll_2.childNodes[1].childNodes[0].childNodes[0].nodeValue == '2'
126.     assert mll_2.childNodes[1].childNodes[1].nodeName == 'cn'
127.     assert mll_2.childNodes[1].childNodes[1].childNodes[0].nodeValue == '3'
128.     assert mll_2.childNodes[1].childNodes[2].nodeName == 'cn'
129.     assert mll_2.childNodes[1].childNodes[2].childNodes[0].nodeValue == '1'
130.     assert mll_2.childNodes[2].nodeName == 'matrixrow'
131.     assert mll_2.childNodes[2].childNodes[0].nodeName == 'cn'
132.     assert mll_2.childNodes[2].childNodes[0].childNodes[0].nodeValue == '9'
133.     assert mll_2.childNodes[2].childNodes[1].nodeName == 'cn'
134.     assert mll_2.childNodes[2].childNodes[1].childNodes[0].nodeValue == '7'
135.     assert mll_2.childNodes[2].childNodes[2].nodeName == 'cn'
136.     assert mll_2.childNodes[2].childNodes[2].childNodes[0].nodeValue == '9'
137. 
138. def test_content_mathml_sums():
139.     summand = x
140.     mml_1 = mp._print(Sum(summand, (x, 1, 10)))
141.     assert mml_1.childNodes[0].nodeName == 'sum'
142.     assert mml_1.childNodes[1].nodeName == 'bvar'
143.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
144.     assert mml_1.childNodes[3].nodeName == 'uplimit'
145.     assert mml_1.childNodes[4].toxml() == mp._print(summand).toxml()
146. 
147. 
148. def test_content_mathml_tuples():
149.     mml_1 = mp._print([2])
150.     assert mml_1.nodeName == 'list'
151.     assert mml_1.childNodes[0].nodeName == 'cn'
152.     assert len(mml_1.childNodes) == 1
153. 
154.     mml_2 = mp._print([2, Integer(1)])
155.     assert mml_2.nodeName == 'list'
156.     assert mml_2.childNodes[0].nodeName == 'cn'
157.     assert mml_2.childNodes[1].nodeName == 'cn'
158.     assert len(mml_2.childNodes) == 2
159. 
160. 
161. def test_content_mathml_add():
162.     mml = mp._print(x**5 - x**4 + x)
163.     assert mml.childNodes[0].nodeName == 'plus'
164.     assert mml.childNodes[1].childNodes[0].nodeName == 'minus'
165.     assert mml.childNodes[1].childNodes[1].nodeName == 'apply'
166. 
167. 
168. def test_content_mathml_Rational():
169.     mml_1 = mp._print(Rational(1, 1))
170.     """should just return a number"""
171.     assert mml_1.nodeName == 'cn'
172. 
173.     mml_2 = mp._print(Rational(2, 5))
174.     assert mml_2.childNodes[0].nodeName == 'divide'
175. 
176. 
177. def test_content_mathml_constants():
178.     mml = mp._print(I)
179.     assert mml.nodeName == 'imaginaryi'
180. 
181.     mml = mp._print(E)
182.     assert mml.nodeName == 'exponentiale'
183. 
184.     mml = mp._print(oo)
185.     assert mml.nodeName == 'infinity'
186. 
187.     mml = mp._print(pi)
188.     assert mml.nodeName == 'pi'
189. 
190.     assert mathml(GoldenRatio) == '<cn>&#966;</cn>'
191. 
192.     mml = mathml(EulerGamma)
193.     assert mml == '<eulergamma/>'
194. 
195. 
196. def test_content_mathml_trig():
197.     mml = mp._print(sin(x))
198.     assert mml.childNodes[0].nodeName == 'sin'
199. 
200.     mml = mp._print(cos(x))
201.     assert mml.childNodes[0].nodeName == 'cos'
202. 
203.     mml = mp._print(tan(x))
204.     assert mml.childNodes[0].nodeName == 'tan'
205. 
206.     mml = mp._print(asin(x))
207.     assert mml.childNodes[0].nodeName == 'arcsin'
208. 
209.     mml = mp._print(acos(x))
210.     assert mml.childNodes[0].nodeName == 'arccos'
211. 
212.     mml = mp._print(atan(x))
213.     assert mml.childNodes[0].nodeName == 'arctan'
214. 
215.     mml = mp._print(sinh(x))
216.     assert mml.childNodes[0].nodeName == 'sinh'
217. 
218.     mml = mp._print(cosh(x))
219.     assert mml.childNodes[0].nodeName == 'cosh'
220. 
221.     mml = mp._print(tanh(x))
222.     assert mml.childNodes[0].nodeName == 'tanh'
223. 
224.     mml = mp._print(asinh(x))
225.     assert mml.childNodes[0].nodeName == 'arcsinh'
226. 
227.     mml = mp._print(atanh(x))
228.     assert mml.childNodes[0].nodeName == 'arctanh'
229. 
230.     mml = mp._print(acosh(x))
231.     assert mml.childNodes[0].nodeName == 'arccosh'
232. 
233. 
234. def test_content_mathml_relational():
235.     mml_1 = mp._print(Eq(x, 1))
236.     assert mml_1.nodeName == 'apply'
237.     assert mml_1.childNodes[0].nodeName == 'eq'
238.     assert mml_1.childNodes[1].nodeName == 'ci'
239.     assert mml_1.childNodes[1].childNodes[0].nodeValue == 'x'
240.     assert mml_1.childNodes[2].nodeName == 'cn'
241.     assert mml_1.childNodes[2].childNodes[0].nodeValue == '1'
242. 
243.     mml_2 = mp._print(Ne(1, x))
244.     assert mml_2.nodeName == 'apply'
245.     assert mml_2.childNodes[0].nodeName == 'neq'
246.     assert mml_2.childNodes[1].nodeName == 'cn'
247.     assert mml_2.childNodes[1].childNodes[0].nodeValue == '1'
248.     assert mml_2.childNodes[2].nodeName == 'ci'
249.     assert mml_2.childNodes[2].childNodes[0].nodeValue == 'x'
250. 
251.     mml_3 = mp._print(Ge(1, x))
252.     assert mml_3.nodeName == 'apply'
253.     assert mml_3.childNodes[0].nodeName == 'geq'
254.     assert mml_3.childNodes[1].nodeName == 'cn'
255.     assert mml_3.childNodes[1].childNodes[0].nodeValue == '1'
256.     assert mml_3.childNodes[2].nodeName == 'ci'
257.     assert mml_3.childNodes[2].childNodes[0].nodeValue == 'x'
258. 
259.     mml_4 = mp._print(Lt(1, x))
260.     assert mml_4.nodeName == 'apply'
261.     assert mml_4.childNodes[0].nodeName == 'lt'
262.     assert mml_4.childNodes[1].nodeName == 'cn'
263.     assert mml_4.childNodes[1].childNodes[0].nodeValue == '1'
264.     assert mml_4.childNodes[2].nodeName == 'ci'
265.     assert mml_4.childNodes[2].childNodes[0].nodeValue == 'x'
266. 
267. 
268. def test_content_symbol():
269.     mml = mp._print(Symbol("x"))
270.     assert mml.nodeName == 'ci'
271.     assert mml.childNodes[0].nodeValue == 'x'
272.     del mml
273. 
274.     mml = mp._print(Symbol("x^2"))
275.     assert mml.nodeName == 'ci'
276.     assert mml.childNodes[0].nodeName == 'mml:msup'
277.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
279.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
281.     del mml
282. 
283.     mml = mp._print(Symbol("x__2"))
284.     assert mml.nodeName == 'ci'
285.     assert mml.childNodes[0].nodeName == 'mml:msup'
286.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
288.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
290.     del mml
291. 
292.     mml = mp._print(Symbol("x_2"))
293.     assert mml.nodeName == 'ci'
294.     assert mml.childNodes[0].nodeName == 'mml:msub'
295.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
297.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
299.     del mml
300. 
301.     mml = mp._print(Symbol("x^3_2"))
302.     assert mml.nodeName == 'ci'
303.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
304.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
306.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
308.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
310.     del mml
311. 
312.     mml = mp._print(Symbol("x__3_2"))
313.     assert mml.nodeName == 'ci'
314.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
315.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
317.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
319.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
321.     del mml
322. 
323.     mml = mp._print(Symbol("x_2_a"))
324.     assert mml.nodeName == 'ci'
325.     assert mml.childNodes[0].nodeName == 'mml:msub'
326.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
328.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
331.         0].nodeValue == '2'
332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
334.         0].nodeValue == ' '
335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
337.         0].nodeValue == 'a'
338.     del mml
339. 
340.     mml = mp._print(Symbol("x^2^a"))
341.     assert mml.nodeName == 'ci'
342.     assert mml.childNodes[0].nodeName == 'mml:msup'
343.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
345.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
348.         0].nodeValue == '2'
349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
351.         0].nodeValue == ' '
352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
354.         0].nodeValue == 'a'
355.     del mml
356. 
357.     mml = mp._print(Symbol("x__2__a"))
358.     assert mml.nodeName == 'ci'
359.     assert mml.childNodes[0].nodeName == 'mml:msup'
360.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
362.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
365.         0].nodeValue == '2'
366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
368.         0].nodeValue == ' '
369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
371.         0].nodeValue == 'a'
372.     del mml
373. 
374. 
375. def test_content_mathml_greek():
376.     mml = mp._print(Symbol('alpha'))
377.     assert mml.nodeName == 'ci'
378.     assert mml.childNodes[0].nodeValue == u'\N{GREEK SMALL LETTER ALPHA}'
379. 
380.     assert mp.doprint(Symbol('alpha')) == '<ci>&#945;</ci>'
381.     assert mp.doprint(Symbol('beta')) == '<ci>&#946;</ci>'
382.     assert mp.doprint(Symbol('gamma')) == '<ci>&#947;</ci>'
383.     assert mp.doprint(Symbol('delta')) == '<ci>&#948;</ci>'
384.     assert mp.doprint(Symbol('epsilon')) == '<ci>&#949;</ci>'
385.     assert mp.doprint(Symbol('zeta')) == '<ci>&#950;</ci>'
386.     assert mp.doprint(Symbol('eta')) == '<ci>&#951;</ci>'
387.     assert mp.doprint(Symbol('theta')) == '<ci>&#952;</ci>'
388.     assert mp.doprint(Symbol('iota')) == '<ci>&#953;</ci>'
389.     assert mp.doprint(Symbol('kappa')) == '<ci>&#954;</ci>'
390.     assert mp.doprint(Symbol('lambda')) == '<ci>&#955;</ci>'
391.     assert mp.doprint(Symbol('mu')) == '<ci>&#956;</ci>'
392.     assert mp.doprint(Symbol('nu')) == '<ci>&#957;</ci>'
393.     assert mp.doprint(Symbol('xi')) == '<ci>&#958;</ci>'
394.     assert mp.doprint(Symbol('omicron')) == '<ci>&#959;</ci>'
395.     assert mp.doprint(Symbol('pi')) == '<ci>&#960;</ci>'
396.     assert mp.doprint(Symbol('rho')) == '<ci>&#961;</ci>'
397.     assert mp.doprint(Symbol('varsigma')) == '<ci>&#962;</ci>', mp.doprint(Symbol('varsigma'))
398.     assert mp.doprint(Symbol('sigma')) == '<ci>&#963;</ci>'
399.     assert mp.doprint(Symbol('tau')) == '<ci>&#964;</ci>'
400.     assert mp.doprint(Symbol('upsilon')) == '<ci>&#965;</ci>'
401.     assert mp.doprint(Symbol('phi')) == '<ci>&#966;</ci>'
402.     assert mp.doprint(Symbol('chi')) == '<ci>&#967;</ci>'
403.     assert mp.doprint(Symbol('psi')) == '<ci>&#968;</ci>'
404.     assert mp.doprint(Symbol('omega')) == '<ci>&#969;</ci>'
405. 
406.     assert mp.doprint(Symbol('Alpha')) == '<ci>&#913;</ci>'
407.     assert mp.doprint(Symbol('Beta')) == '<ci>&#914;</ci>'
408.     assert mp.doprint(Symbol('Gamma')) == '<ci>&#915;</ci>'
409.     assert mp.doprint(Symbol('Delta')) == '<ci>&#916;</ci>'
410.     assert mp.doprint(Symbol('Epsilon')) == '<ci>&#917;</ci>'
411.     assert mp.doprint(Symbol('Zeta')) == '<ci>&#918;</ci>'
412.     assert mp.doprint(Symbol('Eta')) == '<ci>&#919;</ci>'
413.     assert mp.doprint(Symbol('Theta')) == '<ci>&#920;</ci>'
414.     assert mp.doprint(Symbol('Iota')) == '<ci>&#921;</ci>'
415.     assert mp.doprint(Symbol('Kappa')) == '<ci>&#922;</ci>'
416.     assert mp.doprint(Symbol('Lambda')) == '<ci>&#923;</ci>'
417.     assert mp.doprint(Symbol('Mu')) == '<ci>&#924;</ci>'
418.     assert mp.doprint(Symbol('Nu')) == '<ci>&#925;</ci>'
419.     assert mp.doprint(Symbol('Xi')) == '<ci>&#926;</ci>'
420.     assert mp.doprint(Symbol('Omicron')) == '<ci>&#927;</ci>'
421.     assert mp.doprint(Symbol('Pi')) == '<ci>&#928;</ci>'
422.     assert mp.doprint(Symbol('Rho')) == '<ci>&#929;</ci>'
423.     assert mp.doprint(Symbol('Sigma')) == '<ci>&#931;</ci>'
424.     assert mp.doprint(Symbol('Tau')) == '<ci>&#932;</ci>'
425.     assert mp.doprint(Symbol('Upsilon')) == '<ci>&#933;</ci>'
426.     assert mp.doprint(Symbol('Phi')) == '<ci>&#934;</ci>'
427.     assert mp.doprint(Symbol('Chi')) == '<ci>&#935;</ci>'
428.     assert mp.doprint(Symbol('Psi')) == '<ci>&#936;</ci>'
429.     assert mp.doprint(Symbol('Omega')) == '<ci>&#937;</ci>'
430. 
431. 
432. def test_content_mathml_order():
433.     expr = x**3 + x**2*y + 3*x*y**3 + y**4
434. 
435.     mp = MathMLContentPrinter({'order': 'lex'})
436.     mml = mp._print(expr)
437. 
438.     assert mml.childNodes[1].childNodes[0].nodeName == 'power'
439.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == 'x'
440.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == '3'
441. 
442.     assert mml.childNodes[4].childNodes[0].nodeName == 'power'
443.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == 'y'
444.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == '4'
445. 
446.     mp = MathMLContentPrinter({'order': 'rev-lex'})
447.     mml = mp._print(expr)
448. 
449.     assert mml.childNodes[1].childNodes[0].nodeName == 'power'
450.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == 'y'
451.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == '4'
452. 
453.     assert mml.childNodes[4].childNodes[0].nodeName == 'power'
454.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == 'x'
455.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == '3'
456. 
457. 
458. def test_content_settings():
459.     raises(TypeError, lambda: mathml(Symbol("x"), method="garbage"))
460. 
461. 
462. def test_presentation_printmethod():
463.     assert mpp.doprint(1 + x) == '<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>'
464.     assert mpp.doprint(x**2) == '<msup><mi>x</mi><mn>2</mn></msup>'
465.     assert mpp.doprint(2*x) == '<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>'
466. 
467. 
468. def test_presentation_mathml_core():
469.     mml_1 = mpp._print(1 + x)
470.     assert mml_1.nodeName == 'mrow'
471.     nodes = mml_1.childNodes
472.     assert len(nodes) == 3
473.     assert nodes[0].nodeName in ['mi', 'mn']
474.     assert nodes[1].nodeName == 'mo'
475.     if nodes[0].nodeName == 'mn':
476.         assert nodes[0].childNodes[0].nodeValue == '1'
477.         assert nodes[2].childNodes[0].nodeValue == 'x'
478.     else:
479.         assert nodes[0].childNodes[0].nodeValue == 'x'
480.         assert nodes[2].childNodes[0].nodeValue == '1'
481. 
482.     mml_2 = mpp._print(x**2)
483.     assert mml_2.nodeName == 'msup'
484.     nodes = mml_2.childNodes
485.     assert nodes[0].childNodes[0].nodeValue == 'x'
486.     assert nodes[1].childNodes[0].nodeValue == '2'
487. 
488.     mml_3 = mpp._print(2*x)
489.     assert mml_3.nodeName == 'mrow'
490.     nodes = mml_3.childNodes
491.     assert nodes[0].childNodes[0].nodeValue == '2'
492.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
493.     assert nodes[2].childNodes[0].nodeValue == 'x'
494. 
495.     mml = mpp._print(Float(1.0, 2)*x)
496.     assert mml.nodeName == 'mrow'
497.     nodes = mml.childNodes
498.     assert nodes[0].childNodes[0].nodeValue == '1.0'
499.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
500.     assert nodes[2].childNodes[0].nodeValue == 'x'

File: sympy/printing/tests/test_mathml.py
Line number range: 501 - 1001
Content:
501. 
502. 
503. def test_presentation_mathml_functions():
504.     mml_1 = mpp._print(sin(x))
505.     assert mml_1.childNodes[0].childNodes[0
506.         ].nodeValue == 'sin'
507.     assert mml_1.childNodes[1].childNodes[0
508.         ].childNodes[0].nodeValue == 'x'
509. 
510.     mml_2 = mpp._print(diff(sin(x), x, evaluate=False))
511.     assert mml_2.nodeName == 'mfrac'
512.     assert mml_2.childNodes[0].childNodes[0
513.         ].childNodes[0].nodeValue == '&dd;'
514.     assert mml_2.childNodes[0].childNodes[1
515.         ].nodeName == 'mfenced'
516.     assert mml_2.childNodes[1].childNodes[
517.         0].childNodes[0].nodeValue == '&dd;'
518. 
519.     mml_3 = mpp._print(diff(cos(x*y), x, evaluate=False))
520.     assert mml_3.nodeName == 'mfrac'
521.     assert mml_3.childNodes[0].childNodes[0
522.         ].childNodes[0].nodeValue == '&#x2202;'
523.     assert mml_2.childNodes[0].childNodes[1
524.         ].nodeName == 'mfenced'
525.     assert mml_3.childNodes[1].childNodes[
526.         0].childNodes[0].nodeValue == '&#x2202;'
527. 
528. 
529. def test_presentation_mathml_limits():
530.     lim_fun = sin(x)/x
531.     mml_1 = mpp._print(Limit(lim_fun, x, 0))
532.     assert mml_1.childNodes[0].nodeName == 'munder'
533.     assert mml_1.childNodes[0].childNodes[0
534.         ].childNodes[0].nodeValue == 'lim'
535.     assert mml_1.childNodes[0].childNodes[1
536.         ].childNodes[0].childNodes[0
537.         ].nodeValue == 'x'
538.     assert mml_1.childNodes[0].childNodes[1
539.         ].childNodes[1].childNodes[0
540.         ].nodeValue == '&#x2192;'
541.     assert mml_1.childNodes[0].childNodes[1
542.         ].childNodes[2].childNodes[0
543.         ].nodeValue == '0'
544. 
545. 
546. def test_presentation_mathml_integrals():
547.     integrand = x
548.     mml_1 = mpp._print(Integral(integrand, (x, 0, 1)))
549.     assert mml_1.childNodes[0].nodeName == 'msubsup'
550.     assert len(mml_1.childNodes[0].childNodes) == 3
551.     assert mml_1.childNodes[0].childNodes[0
552.         ].childNodes[0].nodeValue == '&int;'
553.     assert mml_1.childNodes[0].childNodes[1
554.         ].childNodes[0].nodeValue == '0'
555.     assert mml_1.childNodes[0].childNodes[2
556.         ].childNodes[0].nodeValue == '1'
557. 
558. 
559. def test_presentation_mathml_matrices():
560.     A = Matrix([1, 2, 3])
561.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])
562.     mll_1 = mpp._print(A)
563.     assert mll_1.childNodes[0].nodeName == 'mtable'
564.     assert mll_1.childNodes[0].childNodes[0].nodeName == 'mtr'
565.     assert len(mll_1.childNodes[0].childNodes) == 3
566.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeName == 'mtd'
567.     assert len(mll_1.childNodes[0].childNodes[0].childNodes) == 1
568.     assert mll_1.childNodes[0].childNodes[0].childNodes[0
569.         ].childNodes[0].childNodes[0].nodeValue == '1'
570.     assert mll_1.childNodes[0].childNodes[1].childNodes[0
571.         ].childNodes[0].childNodes[0].nodeValue == '2'
572.     assert mll_1.childNodes[0].childNodes[2].childNodes[0
573.         ].childNodes[0].childNodes[0].nodeValue == '3'
574.     mll_2 = mpp._print(B)
575.     assert mll_2.childNodes[0].nodeName == 'mtable'
576.     assert mll_2.childNodes[0].childNodes[0].nodeName == 'mtr'
577.     assert len(mll_2.childNodes[0].childNodes) == 3
578.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeName == 'mtd'
579.     assert len(mll_2.childNodes[0].childNodes[0].childNodes) == 3
580.     assert mll_2.childNodes[0].childNodes[0].childNodes[0
581.         ].childNodes[0].childNodes[0].nodeValue == '0'
582.     assert mll_2.childNodes[0].childNodes[0].childNodes[1
583.         ].childNodes[0].childNodes[0].nodeValue == '5'
584.     assert mll_2.childNodes[0].childNodes[0].childNodes[2
585.         ].childNodes[0].childNodes[0].nodeValue == '4'
586.     assert mll_2.childNodes[0].childNodes[1].childNodes[0
587.         ].childNodes[0].childNodes[0].nodeValue == '2'
588.     assert mll_2.childNodes[0].childNodes[1].childNodes[1
589.         ].childNodes[0].childNodes[0].nodeValue == '3'
590.     assert mll_2.childNodes[0].childNodes[1].childNodes[2
591.         ].childNodes[0].childNodes[0].nodeValue == '1'
592.     assert mll_2.childNodes[0].childNodes[2].childNodes[0
593.         ].childNodes[0].childNodes[0].nodeValue == '9'
594.     assert mll_2.childNodes[0].childNodes[2].childNodes[1
595.         ].childNodes[0].childNodes[0].nodeValue == '7'
596.     assert mll_2.childNodes[0].childNodes[2].childNodes[2
597.         ].childNodes[0].childNodes[0].nodeValue == '9'
598. 
599. 
600. def test_presentation_mathml_sums():
601.     summand = x
602.     mml_1 = mpp._print(Sum(summand, (x, 1, 10)))
603.     assert mml_1.childNodes[0].nodeName == 'munderover'
604.     assert len(mml_1.childNodes[0].childNodes) == 3
605.     assert mml_1.childNodes[0].childNodes[0].childNodes[0
606.         ].nodeValue == '&#x2211;'
607.     assert len(mml_1.childNodes[0].childNodes[1].childNodes) == 3
608.     assert mml_1.childNodes[0].childNodes[2].childNodes[0
609.         ].nodeValue == '10'
610.     assert mml_1.childNodes[1].childNodes[0].nodeValue == 'x'
611. 
612. 
613. def test_presentation_mathml_add():
614.     mml = mpp._print(x**5 - x**4 + x)
615.     assert len(mml.childNodes) == 5
616.     assert mml.childNodes[0].childNodes[0].childNodes[0
617.         ].nodeValue == 'x'
618.     assert mml.childNodes[0].childNodes[1].childNodes[0
619.         ].nodeValue == '5'
620.     assert mml.childNodes[1].childNodes[0].nodeValue == '-'
621.     assert mml.childNodes[2].childNodes[0].childNodes[0
622.         ].nodeValue == 'x'
623.     assert mml.childNodes[2].childNodes[1].childNodes[0
624.         ].nodeValue == '4'
625.     assert mml.childNodes[3].childNodes[0].nodeValue == '+'
626.     assert mml.childNodes[4].childNodes[0].nodeValue == 'x'
627. 
628. 
629. def test_presentation_mathml_Rational():
630.     mml_1 = mpp._print(Rational(1, 1))
631.     assert mml_1.nodeName == 'mn'
632. 
633.     mml_2 = mpp._print(Rational(2, 5))
634.     assert mml_2.nodeName == 'mfrac'
635.     assert mml_2.childNodes[0].childNodes[0].nodeValue == '2'
636.     assert mml_2.childNodes[1].childNodes[0].nodeValue == '5'
637. 
638. 
639. def test_presentation_mathml_constants():
640.     mml = mpp._print(I)
641.     assert mml.childNodes[0].nodeValue == '&ImaginaryI;'
642. 
643.     mml = mpp._print(E)
644.     assert mml.childNodes[0].nodeValue == '&ExponentialE;'
645. 
646.     mml = mpp._print(oo)
647.     assert mml.childNodes[0].nodeValue == '&#x221E;'
648. 
649.     mml = mpp._print(pi)
650.     assert mml.childNodes[0].nodeValue == '&pi;'
651. 
652.     assert mathml(GoldenRatio, printer='presentation') == '<mi>&#966;</mi>'
653. 
654. 
655. def test_presentation_mathml_trig():
656.     mml = mpp._print(sin(x))
657.     assert mml.childNodes[0].childNodes[0].nodeValue == 'sin'
658. 
659.     mml = mpp._print(cos(x))
660.     assert mml.childNodes[0].childNodes[0].nodeValue == 'cos'
661. 
662.     mml = mpp._print(tan(x))
663.     assert mml.childNodes[0].childNodes[0].nodeValue == 'tan'
664. 
665.     mml = mpp._print(asin(x))
666.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arcsin'
667. 
668.     mml = mpp._print(acos(x))
669.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arccos'
670. 
671.     mml = mpp._print(atan(x))
672.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arctan'
673. 
674.     mml = mpp._print(sinh(x))
675.     assert mml.childNodes[0].childNodes[0].nodeValue == 'sinh'
676. 
677.     mml = mpp._print(cosh(x))
678.     assert mml.childNodes[0].childNodes[0].nodeValue == 'cosh'
679. 
680.     mml = mpp._print(tanh(x))
681.     assert mml.childNodes[0].childNodes[0].nodeValue == 'tanh'
682. 
683.     mml = mpp._print(asinh(x))
684.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arcsinh'
685. 
686.     mml = mpp._print(atanh(x))
687.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arctanh'
688. 
689.     mml = mpp._print(acosh(x))
690.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arccosh'
691. 
692. 
693. def test_presentation_mathml_relational():
694.     mml_1 = mpp._print(Eq(x, 1))
695.     assert len(mml_1.childNodes) == 3
696.     assert mml_1.childNodes[0].nodeName == 'mi'
697.     assert mml_1.childNodes[0].childNodes[0].nodeValue == 'x'
698.     assert mml_1.childNodes[1].nodeName == 'mo'
699.     assert mml_1.childNodes[1].childNodes[0].nodeValue == '='
700.     assert mml_1.childNodes[2].nodeName == 'mn'
701.     assert mml_1.childNodes[2].childNodes[0].nodeValue == '1'
702. 
703.     mml_2 = mpp._print(Ne(1, x))
704.     assert len(mml_2.childNodes) == 3
705.     assert mml_2.childNodes[0].nodeName == 'mn'
706.     assert mml_2.childNodes[0].childNodes[0].nodeValue == '1'
707.     assert mml_2.childNodes[1].nodeName == 'mo'
708.     assert mml_2.childNodes[1].childNodes[0].nodeValue == '&#x2260;'
709.     assert mml_2.childNodes[2].nodeName == 'mi'
710.     assert mml_2.childNodes[2].childNodes[0].nodeValue == 'x'
711. 
712.     mml_3 = mpp._print(Ge(1, x))
713.     assert len(mml_3.childNodes) == 3
714.     assert mml_3.childNodes[0].nodeName == 'mn'
715.     assert mml_3.childNodes[0].childNodes[0].nodeValue == '1'
716.     assert mml_3.childNodes[1].nodeName == 'mo'
717.     assert mml_3.childNodes[1].childNodes[0].nodeValue == '&#x2265;'
718.     assert mml_3.childNodes[2].nodeName == 'mi'
719.     assert mml_3.childNodes[2].childNodes[0].nodeValue == 'x'
720. 
721.     mml_4 = mpp._print(Lt(1, x))
722.     assert len(mml_4.childNodes) == 3
723.     assert mml_4.childNodes[0].nodeName == 'mn'
724.     assert mml_4.childNodes[0].childNodes[0].nodeValue == '1'
725.     assert mml_4.childNodes[1].nodeName == 'mo'
726.     assert mml_4.childNodes[1].childNodes[0].nodeValue == '<'
727.     assert mml_4.childNodes[2].nodeName == 'mi'
728.     assert mml_4.childNodes[2].childNodes[0].nodeValue == 'x'
729. 
730. 
731. def test_presentation_symbol():
732.     mml = mpp._print(Symbol("x"))
733.     assert mml.nodeName == 'mi'
734.     assert mml.childNodes[0].nodeValue == 'x'
735.     del mml
736. 
737.     mml = mpp._print(Symbol("x^2"))
738.     assert mml.nodeName == 'mi'
739.     assert mml.childNodes[0].nodeName == 'msup'
740.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
741.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
742.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
743.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
744.     del mml
745. 
746.     mml = mpp._print(Symbol("x__2"))
747.     assert mml.nodeName == 'mi'
748.     assert mml.childNodes[0].nodeName == 'msup'
749.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
750.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
751.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
752.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
753.     del mml
754. 
755.     mml = mpp._print(Symbol("x_2"))
756.     assert mml.nodeName == 'mi'
757.     assert mml.childNodes[0].nodeName == 'msub'
758.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
759.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
760.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
761.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
762.     del mml
763. 
764.     mml = mpp._print(Symbol("x^3_2"))
765.     assert mml.nodeName == 'mi'
766.     assert mml.childNodes[0].nodeName == 'msubsup'
767.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
768.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
769.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
770.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
771.     assert mml.childNodes[0].childNodes[2].nodeName == 'mi'
772.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
773.     del mml
774. 
775.     mml = mpp._print(Symbol("x__3_2"))
776.     assert mml.nodeName == 'mi'
777.     assert mml.childNodes[0].nodeName == 'msubsup'
778.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
779.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
780.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
781.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
782.     assert mml.childNodes[0].childNodes[2].nodeName == 'mi'
783.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
784.     del mml
785. 
786.     mml = mpp._print(Symbol("x_2_a"))
787.     assert mml.nodeName == 'mi'
788.     assert mml.childNodes[0].nodeName == 'msub'
789.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
790.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
791.     assert mml.childNodes[0].childNodes[1].nodeName == 'mrow'
792.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mi'
793.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
794.         0].nodeValue == '2'
795.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mo'
796.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
797.         0].nodeValue == ' '
798.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mi'
799.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
800.         0].nodeValue == 'a'
801.     del mml
802. 
803.     mml = mpp._print(Symbol("x^2^a"))
804.     assert mml.nodeName == 'mi'
805.     assert mml.childNodes[0].nodeName == 'msup'
806.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
807.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
808.     assert mml.childNodes[0].childNodes[1].nodeName == 'mrow'
809.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mi'
810.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
811.         0].nodeValue == '2'
812.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mo'
813.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
814.         0].nodeValue == ' '
815.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mi'
816.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
817.         0].nodeValue == 'a'
818.     del mml
819. 
820.     mml = mpp._print(Symbol("x__2__a"))
821.     assert mml.nodeName == 'mi'
822.     assert mml.childNodes[0].nodeName == 'msup'
823.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
824.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
825.     assert mml.childNodes[0].childNodes[1].nodeName == 'mrow'
826.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mi'
827.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
828.         0].nodeValue == '2'
829.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mo'
830.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
831.         0].nodeValue == ' '
832.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mi'
833.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
834.         0].nodeValue == 'a'
835.     del mml
836. 
837. 
838. def test_presentation_mathml_greek():
839.     mml = mpp._print(Symbol('alpha'))
840.     assert mml.nodeName == 'mi'
841.     assert mml.childNodes[0].nodeValue == u'\N{GREEK SMALL LETTER ALPHA}'
842. 
843.     assert mpp.doprint(Symbol('alpha')) == '<mi>&#945;</mi>'
844.     assert mpp.doprint(Symbol('beta')) == '<mi>&#946;</mi>'
845.     assert mpp.doprint(Symbol('gamma')) == '<mi>&#947;</mi>'
846.     assert mpp.doprint(Symbol('delta')) == '<mi>&#948;</mi>'
847.     assert mpp.doprint(Symbol('epsilon')) == '<mi>&#949;</mi>'
848.     assert mpp.doprint(Symbol('zeta')) == '<mi>&#950;</mi>'
849.     assert mpp.doprint(Symbol('eta')) == '<mi>&#951;</mi>'
850.     assert mpp.doprint(Symbol('theta')) == '<mi>&#952;</mi>'
851.     assert mpp.doprint(Symbol('iota')) == '<mi>&#953;</mi>'
852.     assert mpp.doprint(Symbol('kappa')) == '<mi>&#954;</mi>'
853.     assert mpp.doprint(Symbol('lambda')) == '<mi>&#955;</mi>'
854.     assert mpp.doprint(Symbol('mu')) == '<mi>&#956;</mi>'
855.     assert mpp.doprint(Symbol('nu')) == '<mi>&#957;</mi>'
856.     assert mpp.doprint(Symbol('xi')) == '<mi>&#958;</mi>'
857.     assert mpp.doprint(Symbol('omicron')) == '<mi>&#959;</mi>'
858.     assert mpp.doprint(Symbol('pi')) == '<mi>&#960;</mi>'
859.     assert mpp.doprint(Symbol('rho')) == '<mi>&#961;</mi>'
860.     assert mpp.doprint(Symbol('varsigma')) == '<mi>&#962;</mi>', mp.doprint(Symbol('varsigma'))
861.     assert mpp.doprint(Symbol('sigma')) == '<mi>&#963;</mi>'
862.     assert mpp.doprint(Symbol('tau')) == '<mi>&#964;</mi>'
863.     assert mpp.doprint(Symbol('upsilon')) == '<mi>&#965;</mi>'
864.     assert mpp.doprint(Symbol('phi')) == '<mi>&#966;</mi>'
865.     assert mpp.doprint(Symbol('chi')) == '<mi>&#967;</mi>'
866.     assert mpp.doprint(Symbol('psi')) == '<mi>&#968;</mi>'
867.     assert mpp.doprint(Symbol('omega')) == '<mi>&#969;</mi>'
868. 
869.     assert mpp.doprint(Symbol('Alpha')) == '<mi>&#913;</mi>'
870.     assert mpp.doprint(Symbol('Beta')) == '<mi>&#914;</mi>'
871.     assert mpp.doprint(Symbol('Gamma')) == '<mi>&#915;</mi>'
872.     assert mpp.doprint(Symbol('Delta')) == '<mi>&#916;</mi>'
873.     assert mpp.doprint(Symbol('Epsilon')) == '<mi>&#917;</mi>'
874.     assert mpp.doprint(Symbol('Zeta')) == '<mi>&#918;</mi>'
875.     assert mpp.doprint(Symbol('Eta')) == '<mi>&#919;</mi>'
876.     assert mpp.doprint(Symbol('Theta')) == '<mi>&#920;</mi>'
877.     assert mpp.doprint(Symbol('Iota')) == '<mi>&#921;</mi>'
878.     assert mpp.doprint(Symbol('Kappa')) == '<mi>&#922;</mi>'
879.     assert mpp.doprint(Symbol('Lambda')) == '<mi>&#923;</mi>'
880.     assert mpp.doprint(Symbol('Mu')) == '<mi>&#924;</mi>'
881.     assert mpp.doprint(Symbol('Nu')) == '<mi>&#925;</mi>'
882.     assert mpp.doprint(Symbol('Xi')) == '<mi>&#926;</mi>'
883.     assert mpp.doprint(Symbol('Omicron')) == '<mi>&#927;</mi>'
884.     assert mpp.doprint(Symbol('Pi')) == '<mi>&#928;</mi>'
885.     assert mpp.doprint(Symbol('Rho')) == '<mi>&#929;</mi>'
886.     assert mpp.doprint(Symbol('Sigma')) == '<mi>&#931;</mi>'
887.     assert mpp.doprint(Symbol('Tau')) == '<mi>&#932;</mi>'
888.     assert mpp.doprint(Symbol('Upsilon')) == '<mi>&#933;</mi>'
889.     assert mpp.doprint(Symbol('Phi')) == '<mi>&#934;</mi>'
890.     assert mpp.doprint(Symbol('Chi')) == '<mi>&#935;</mi>'
891.     assert mpp.doprint(Symbol('Psi')) == '<mi>&#936;</mi>'
892.     assert mpp.doprint(Symbol('Omega')) == '<mi>&#937;</mi>'
893. 
894. 
895. def test_presentation_mathml_order():
896.     expr = x**3 + x**2*y + 3*x*y**3 + y**4
897. 
898.     mp = MathMLPresentationPrinter({'order': 'lex'})
899.     mml = mp._print(expr)
900.     assert mml.childNodes[0].nodeName == 'msup'
901.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
902.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '3'
903. 
904.     assert mml.childNodes[6].nodeName == 'msup'
905.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == 'y'
906.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == '4'
907. 
908.     mp = MathMLPresentationPrinter({'order': 'rev-lex'})
909.     mml = mp._print(expr)
910. 
911.     assert mml.childNodes[0].nodeName == 'msup'
912.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'y'
913.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '4'
914. 
915.     assert mml.childNodes[6].nodeName == 'msup'
916.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == 'x'
917.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == '3'
918. 
919. 
920. def test_presentation_settings():
921.     raises(TypeError, lambda: mathml(Symbol("x"), printer='presentation',method="garbage"))
922. 
923. def test_toprettyxml_hooking():
924.     # test that the patch doesn't influence the behavior of the standard library
925.     import xml.dom.minidom
926.     doc1 = xml.dom.minidom.parseString(
927.         "<apply><plus/><ci>x</ci><cn>1</cn></apply>")
928.     doc2 =  xml.dom.minidom.parseString(
929.         "<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>")
930.     prettyxml_old1 = doc1.toprettyxml()
931.     prettyxml_old2 = doc2.toprettyxml()
932. 
933.     mp.apply_patch()
934.     mp.restore_patch()
935. 
936.     assert prettyxml_old1 == doc1.toprettyxml()
937.     assert prettyxml_old2 == doc2.toprettyxml()
938. 
939. 
940. def test_print_basic():
941.     expr = Basic(1, 2)
942.     assert mpp.doprint(expr) == '<mrow><mi>basic</mi><mfenced><mn>1</mn><mn>2</mn></mfenced></mrow>'
943.     assert mp.doprint(expr) == '<basic><cn>1</cn><cn>2</cn></basic>'
944. 
945. 
946. def test_root_notation_print():
947.     assert mathml(x**(S(1)/3), printer='presentation') == '<mroot><mi>x</mi><mn>3</mn></mroot>'
948.     assert mathml(x**(S(1)/3), printer='presentation', root_notation=False) == '<msup><mi>x</mi><mfrac><mn>1</mn><mn>3</mn></mfrac></msup>'
949.     assert mathml(x**(S(1)/3), printer='content') == '<apply><root/><degree><ci>3</ci></degree><ci>x</ci></apply>'
950.     assert mathml(x**(S(1)/3), printer='content', root_notation=False) == '<apply><power/><ci>x</ci><apply><divide/><cn>1</cn><cn>3</cn></apply></apply>'
951. 
952. 
953. def test_print_matrix_symbol():
954.     A = MatrixSymbol('A', 1, 2)
955.     assert mpp.doprint(A) == '<mi>A</mi>'
956.     assert mp.doprint(A) == '<ci>A</ci>'
957.     assert mathml(A, printer='presentation', mat_symbol_style="bold" )== '<mi mathvariant="bold">A</mi>'
958.     assert mathml(A, mat_symbol_style="bold" )== '<ci>A</ci>' # No effect in content printer
959. 
960. 
961. def test_print_random_symbol():
962.     R = RandomSymbol(Symbol('R'))
963.     assert mpp.doprint(R) == '<mi>R</mi>'
964.     assert mp.doprint(R) == '<ci>R</ci>'


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-05 18:29:19,381 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user's refinement query explicitly asks for the full content of the file `sympy/printing/tests/test_mathml.py`.\n\n2. Extended relevance:\n   - This file is directly relevant to the original query about a bug in MathML printing.\n   - It contains the entire test suite for SymPy's MathML printing functionality.\n   - The functions `test_presentation_symbol` and `test_content_symbol` are particularly relevant as they test the rendering of symbols with complex names (e.g., with subscripts and superscripts), which is at the core of the reported issue.\n   - Providing the full file gives complete context, including all imports, helper variables, and the various test cases related to MathML generation, which satisfies the original request's constraints for complete, self-contained examples.", relative_path='sympy/printing/tests/test_mathml.py', start_line=1, end_line=964)]
2025-10-05 18:29:19,382 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='sympy/printing/tests/test_mathml.py', content='1. from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \\\n2.     tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \\\n3.     pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \\\n4.     MatrixSymbol\n5. from sympy.stats.rv import RandomSymbol\n6. from sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \\\n7.     MathMLPrinter\n8. \n9. from sympy.utilities.pytest import raises\n10. \n11. x = Symbol(\'x\')\n12. y = Symbol(\'y\')\n13. mp = MathMLContentPrinter()\n14. mpp = MathMLPresentationPrinter()\n15. \n16. def test_mathml_printer():\n17.     m = MathMLPrinter()\n18.     assert m.doprint(1+x) == mp.doprint(1+x)\n19. \n20. \n21. def test_content_printmethod():\n22.     assert mp.doprint(1 + x) == \'<apply><plus/><ci>x</ci><cn>1</cn></apply>\'\n23. \n24. \n25. def test_content_mathml_core():\n26.     mml_1 = mp._print(1 + x)\n27.     assert mml_1.nodeName == \'apply\'\n28.     nodes = mml_1.childNodes\n29.     assert len(nodes) == 3\n30.     assert nodes[0].nodeName == \'plus\'\n31.     assert nodes[0].hasChildNodes() is False\n32.     assert nodes[0].nodeValue is None\n33.     assert nodes[1].nodeName in [\'cn\', \'ci\']\n34.     if nodes[1].nodeName == \'cn\':\n35.         assert nodes[1].childNodes[0].nodeValue == \'1\'\n36.         assert nodes[2].childNodes[0].nodeValue == \'x\'\n37.     else:\n38.         assert nodes[1].childNodes[0].nodeValue == \'x\'\n39.         assert nodes[2].childNodes[0].nodeValue == \'1\'\n40. \n41.     mml_2 = mp._print(x**2)\n42.     assert mml_2.nodeName == \'apply\'\n43.     nodes = mml_2.childNodes\n44.     assert nodes[1].childNodes[0].nodeValue == \'x\'\n45.     assert nodes[2].childNodes[0].nodeValue == \'2\'\n46. \n47.     mml_3 = mp._print(2*x)\n48.     assert mml_3.nodeName == \'apply\'\n49.     nodes = mml_3.childNodes\n50.     assert nodes[0].nodeName == \'times\'\n51.     assert nodes[1].childNodes[0].nodeValue == \'2\'\n52.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n53. \n54.     mml = mp._print(Float(1.0, 2)*x)\n55.     assert mml.nodeName == \'apply\'\n56.     nodes = mml.childNodes\n57.     assert nodes[0].nodeName == \'times\'\n58.     assert nodes[1].childNodes[0].nodeValue == \'1.0\'\n59.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n60. \n61. \n62. def test_content_mathml_functions():\n63.     mml_1 = mp._print(sin(x))\n64.     assert mml_1.nodeName == \'apply\'\n65.     assert mml_1.childNodes[0].nodeName == \'sin\'\n66.     assert mml_1.childNodes[1].nodeName == \'ci\'\n67. \n68.     mml_2 = mp._print(diff(sin(x), x, evaluate=False))\n69.     assert mml_2.nodeName == \'apply\'\n70.     assert mml_2.childNodes[0].nodeName == \'diff\'\n71.     assert mml_2.childNodes[1].nodeName == \'bvar\'\n72.     assert mml_2.childNodes[1].childNodes[\n73.         0].nodeName == \'ci\'  # below bvar there\'s <ci>x/ci>\n74. \n75.     mml_3 = mp._print(diff(cos(x*y), x, evaluate=False))\n76.     assert mml_3.nodeName == \'apply\'\n77.     assert mml_3.childNodes[0].nodeName == \'partialdiff\'\n78.     assert mml_3.childNodes[1].nodeName == \'bvar\'\n79.     assert mml_3.childNodes[1].childNodes[\n80.         0].nodeName == \'ci\'  # below bvar there\'s <ci>x/ci>\n81. \n82. \n83. def test_content_mathml_limits():\n84.     # XXX No unevaluated limits\n85.     lim_fun = sin(x)/x\n86.     mml_1 = mp._print(Limit(lim_fun, x, 0))\n87.     assert mml_1.childNodes[0].nodeName == \'limit\'\n88.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n89.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n90.     assert mml_1.childNodes[3].toxml() == mp._print(lim_fun).toxml()\n91. \n92. \n93. def test_content_mathml_integrals():\n94.     integrand = x\n95.     mml_1 = mp._print(Integral(integrand, (x, 0, 1)))\n96.     assert mml_1.childNodes[0].nodeName == \'int\'\n97.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n98.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n99.     assert mml_1.childNodes[3].nodeName == \'uplimit\'\n100.     assert mml_1.childNodes[4].toxml() == mp._print(integrand).toxml()\n101. \n102. def test_content_mathml_matrices():\n103.     A = Matrix([1, 2, 3])\n104.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])\n105.     mll_1 = mp._print(A)\n106.     assert mll_1.childNodes[0].nodeName == \'matrixrow\'\n107.     assert mll_1.childNodes[0].childNodes[0].nodeName == \'cn\'\n108.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'1\'\n109.     assert mll_1.childNodes[1].nodeName == \'matrixrow\'\n110.     assert mll_1.childNodes[1].childNodes[0].nodeName == \'cn\'\n111.     assert mll_1.childNodes[1].childNodes[0].childNodes[0].nodeValue == \'2\'\n112.     assert mll_1.childNodes[2].nodeName == \'matrixrow\'\n113.     assert mll_1.childNodes[2].childNodes[0].nodeName == \'cn\'\n114.     assert mll_1.childNodes[2].childNodes[0].childNodes[0].nodeValue == \'3\'\n115.     mll_2 = mp._print(B)\n116.     assert mll_2.childNodes[0].nodeName == \'matrixrow\'\n117.     assert mll_2.childNodes[0].childNodes[0].nodeName == \'cn\'\n118.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'0\'\n119.     assert mll_2.childNodes[0].childNodes[1].nodeName == \'cn\'\n120.     assert mll_2.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'5\'\n121.     assert mll_2.childNodes[0].childNodes[2].nodeName == \'cn\'\n122.     assert mll_2.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'4\'\n123.     assert mll_2.childNodes[1].nodeName == \'matrixrow\'\n124.     assert mll_2.childNodes[1].childNodes[0].nodeName == \'cn\'\n125.     assert mll_2.childNodes[1].childNodes[0].childNodes[0].nodeValue == \'2\'\n126.     assert mll_2.childNodes[1].childNodes[1].nodeName == \'cn\'\n127.     assert mll_2.childNodes[1].childNodes[1].childNodes[0].nodeValue == \'3\'\n128.     assert mll_2.childNodes[1].childNodes[2].nodeName == \'cn\'\n129.     assert mll_2.childNodes[1].childNodes[2].childNodes[0].nodeValue == \'1\'\n130.     assert mll_2.childNodes[2].nodeName == \'matrixrow\'\n131.     assert mll_2.childNodes[2].childNodes[0].nodeName == \'cn\'\n132.     assert mll_2.childNodes[2].childNodes[0].childNodes[0].nodeValue == \'9\'\n133.     assert mll_2.childNodes[2].childNodes[1].nodeName == \'cn\'\n134.     assert mll_2.childNodes[2].childNodes[1].childNodes[0].nodeValue == \'7\'\n135.     assert mll_2.childNodes[2].childNodes[2].nodeName == \'cn\'\n136.     assert mll_2.childNodes[2].childNodes[2].childNodes[0].nodeValue == \'9\'\n137. \n138. def test_content_mathml_sums():\n139.     summand = x\n140.     mml_1 = mp._print(Sum(summand, (x, 1, 10)))\n141.     assert mml_1.childNodes[0].nodeName == \'sum\'\n142.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n143.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n144.     assert mml_1.childNodes[3].nodeName == \'uplimit\'\n145.     assert mml_1.childNodes[4].toxml() == mp._print(summand).toxml()\n146. \n147. \n148. def test_content_mathml_tuples():\n149.     mml_1 = mp._print([2])\n150.     assert mml_1.nodeName == \'list\'\n151.     assert mml_1.childNodes[0].nodeName == \'cn\'\n152.     assert len(mml_1.childNodes) == 1\n153. \n154.     mml_2 = mp._print([2, Integer(1)])\n155.     assert mml_2.nodeName == \'list\'\n156.     assert mml_2.childNodes[0].nodeName == \'cn\'\n157.     assert mml_2.childNodes[1].nodeName == \'cn\'\n158.     assert len(mml_2.childNodes) == 2\n159. \n160. \n161. def test_content_mathml_add():\n162.     mml = mp._print(x**5 - x**4 + x)\n163.     assert mml.childNodes[0].nodeName == \'plus\'\n164.     assert mml.childNodes[1].childNodes[0].nodeName == \'minus\'\n165.     assert mml.childNodes[1].childNodes[1].nodeName == \'apply\'\n166. \n167. \n168. def test_content_mathml_Rational():\n169.     mml_1 = mp._print(Rational(1, 1))\n170.     """should just return a number"""\n171.     assert mml_1.nodeName == \'cn\'\n172. \n173.     mml_2 = mp._print(Rational(2, 5))\n174.     assert mml_2.childNodes[0].nodeName == \'divide\'\n175. \n176. \n177. def test_content_mathml_constants():\n178.     mml = mp._print(I)\n179.     assert mml.nodeName == \'imaginaryi\'\n180. \n181.     mml = mp._print(E)\n182.     assert mml.nodeName == \'exponentiale\'\n183. \n184.     mml = mp._print(oo)\n185.     assert mml.nodeName == \'infinity\'\n186. \n187.     mml = mp._print(pi)\n188.     assert mml.nodeName == \'pi\'\n189. \n190.     assert mathml(GoldenRatio) == \'<cn>&#966;</cn>\'\n191. \n192.     mml = mathml(EulerGamma)\n193.     assert mml == \'<eulergamma/>\'\n194. \n195. \n196. def test_content_mathml_trig():\n197.     mml = mp._print(sin(x))\n198.     assert mml.childNodes[0].nodeName == \'sin\'\n199. \n200.     mml = mp._print(cos(x))\n201.     assert mml.childNodes[0].nodeName == \'cos\'\n202. \n203.     mml = mp._print(tan(x))\n204.     assert mml.childNodes[0].nodeName == \'tan\'\n205. \n206.     mml = mp._print(asin(x))\n207.     assert mml.childNodes[0].nodeName == \'arcsin\'\n208. \n209.     mml = mp._print(acos(x))\n210.     assert mml.childNodes[0].nodeName == \'arccos\'\n211. \n212.     mml = mp._print(atan(x))\n213.     assert mml.childNodes[0].nodeName == \'arctan\'\n214. \n215.     mml = mp._print(sinh(x))\n216.     assert mml.childNodes[0].nodeName == \'sinh\'\n217. \n218.     mml = mp._print(cosh(x))\n219.     assert mml.childNodes[0].nodeName == \'cosh\'\n220. \n221.     mml = mp._print(tanh(x))\n222.     assert mml.childNodes[0].nodeName == \'tanh\'\n223. \n224.     mml = mp._print(asinh(x))\n225.     assert mml.childNodes[0].nodeName == \'arcsinh\'\n226. \n227.     mml = mp._print(atanh(x))\n228.     assert mml.childNodes[0].nodeName == \'arctanh\'\n229. \n230.     mml = mp._print(acosh(x))\n231.     assert mml.childNodes[0].nodeName == \'arccosh\'\n232. \n233. \n234. def test_content_mathml_relational():\n235.     mml_1 = mp._print(Eq(x, 1))\n236.     assert mml_1.nodeName == \'apply\'\n237.     assert mml_1.childNodes[0].nodeName == \'eq\'\n238.     assert mml_1.childNodes[1].nodeName == \'ci\'\n239.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'x\'\n240.     assert mml_1.childNodes[2].nodeName == \'cn\'\n241.     assert mml_1.childNodes[2].childNodes[0].nodeValue == \'1\'\n242. \n243.     mml_2 = mp._print(Ne(1, x))\n244.     assert mml_2.nodeName == \'apply\'\n245.     assert mml_2.childNodes[0].nodeName == \'neq\'\n246.     assert mml_2.childNodes[1].nodeName == \'cn\'\n247.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'1\'\n248.     assert mml_2.childNodes[2].nodeName == \'ci\'\n249.     assert mml_2.childNodes[2].childNodes[0].nodeValue == \'x\'\n250. \n251.     mml_3 = mp._print(Ge(1, x))\n252.     assert mml_3.nodeName == \'apply\'\n253.     assert mml_3.childNodes[0].nodeName == \'geq\'\n254.     assert mml_3.childNodes[1].nodeName == \'cn\'\n255.     assert mml_3.childNodes[1].childNodes[0].nodeValue == \'1\'\n256.     assert mml_3.childNodes[2].nodeName == \'ci\'\n257.     assert mml_3.childNodes[2].childNodes[0].nodeValue == \'x\'\n258. \n259.     mml_4 = mp._print(Lt(1, x))\n260.     assert mml_4.nodeName == \'apply\'\n261.     assert mml_4.childNodes[0].nodeName == \'lt\'\n262.     assert mml_4.childNodes[1].nodeName == \'cn\'\n263.     assert mml_4.childNodes[1].childNodes[0].nodeValue == \'1\'\n264.     assert mml_4.childNodes[2].nodeName == \'ci\'\n265.     assert mml_4.childNodes[2].childNodes[0].nodeValue == \'x\'\n266. \n267. \n268. def test_content_symbol():\n269.     mml = mp._print(Symbol("x"))\n270.     assert mml.nodeName == \'ci\'\n271.     assert mml.childNodes[0].nodeValue == \'x\'\n272.     del mml\n273. \n274.     mml = mp._print(Symbol("x^2"))\n275.     assert mml.nodeName == \'ci\'\n276.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n277.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n279.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n281.     del mml\n282. \n283.     mml = mp._print(Symbol("x__2"))\n284.     assert mml.nodeName == \'ci\'\n285.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n286.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n288.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n290.     del mml\n291. \n292.     mml = mp._print(Symbol("x_2"))\n293.     assert mml.nodeName == \'ci\'\n294.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n295.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n297.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n299.     del mml\n300. \n301.     mml = mp._print(Symbol("x^3_2"))\n302.     assert mml.nodeName == \'ci\'\n303.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n304.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n306.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n308.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n310.     del mml\n311. \n312.     mml = mp._print(Symbol("x__3_2"))\n313.     assert mml.nodeName == \'ci\'\n314.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n315.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n317.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n319.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n321.     del mml\n322. \n323.     mml = mp._print(Symbol("x_2_a"))\n324.     assert mml.nodeName == \'ci\'\n325.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n326.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n328.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n331.         0].nodeValue == \'2\'\n332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n334.         0].nodeValue == \' \'\n335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n337.         0].nodeValue == \'a\'\n338.     del mml\n339. \n340.     mml = mp._print(Symbol("x^2^a"))\n341.     assert mml.nodeName == \'ci\'\n342.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n343.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n345.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n348.         0].nodeValue == \'2\'\n349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n351.         0].nodeValue == \' \'\n352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n354.         0].nodeValue == \'a\'\n355.     del mml\n356. \n357.     mml = mp._print(Symbol("x__2__a"))\n358.     assert mml.nodeName == \'ci\'\n359.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n360.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n362.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n365.         0].nodeValue == \'2\'\n366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n368.         0].nodeValue == \' \'\n369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n371.         0].nodeValue == \'a\'\n372.     del mml\n373. \n374. \n375. def test_content_mathml_greek():\n376.     mml = mp._print(Symbol(\'alpha\'))\n377.     assert mml.nodeName == \'ci\'\n378.     assert mml.childNodes[0].nodeValue == u\'\\N{GREEK SMALL LETTER ALPHA}\'\n379. \n380.     assert mp.doprint(Symbol(\'alpha\')) == \'<ci>&#945;</ci>\'\n381.     assert mp.doprint(Symbol(\'beta\')) == \'<ci>&#946;</ci>\'\n382.     assert mp.doprint(Symbol(\'gamma\')) == \'<ci>&#947;</ci>\'\n383.     assert mp.doprint(Symbol(\'delta\')) == \'<ci>&#948;</ci>\'\n384.     assert mp.doprint(Symbol(\'epsilon\')) == \'<ci>&#949;</ci>\'\n385.     assert mp.doprint(Symbol(\'zeta\')) == \'<ci>&#950;</ci>\'\n386.     assert mp.doprint(Symbol(\'eta\')) == \'<ci>&#951;</ci>\'\n387.     assert mp.doprint(Symbol(\'theta\')) == \'<ci>&#952;</ci>\'\n388.     assert mp.doprint(Symbol(\'iota\')) == \'<ci>&#953;</ci>\'\n389.     assert mp.doprint(Symbol(\'kappa\')) == \'<ci>&#954;</ci>\'\n390.     assert mp.doprint(Symbol(\'lambda\')) == \'<ci>&#955;</ci>\'\n391.     assert mp.doprint(Symbol(\'mu\')) == \'<ci>&#956;</ci>\'\n392.     assert mp.doprint(Symbol(\'nu\')) == \'<ci>&#957;</ci>\'\n393.     assert mp.doprint(Symbol(\'xi\')) == \'<ci>&#958;</ci>\'\n394.     assert mp.doprint(Symbol(\'omicron\')) == \'<ci>&#959;</ci>\'\n395.     assert mp.doprint(Symbol(\'pi\')) == \'<ci>&#960;</ci>\'\n396.     assert mp.doprint(Symbol(\'rho\')) == \'<ci>&#961;</ci>\'\n397.     assert mp.doprint(Symbol(\'varsigma\')) == \'<ci>&#962;</ci>\', mp.doprint(Symbol(\'varsigma\'))\n398.     assert mp.doprint(Symbol(\'sigma\')) == \'<ci>&#963;</ci>\'\n399.     assert mp.doprint(Symbol(\'tau\')) == \'<ci>&#964;</ci>\'\n400.     assert mp.doprint(Symbol(\'upsilon\')) == \'<ci>&#965;</ci>\'\n401.     assert mp.doprint(Symbol(\'phi\')) == \'<ci>&#966;</ci>\'\n402.     assert mp.doprint(Symbol(\'chi\')) == \'<ci>&#967;</ci>\'\n403.     assert mp.doprint(Symbol(\'psi\')) == \'<ci>&#968;</ci>\'\n404.     assert mp.doprint(Symbol(\'omega\')) == \'<ci>&#969;</ci>\'\n405. \n406.     assert mp.doprint(Symbol(\'Alpha\')) == \'<ci>&#913;</ci>\'\n407.     assert mp.doprint(Symbol(\'Beta\')) == \'<ci>&#914;</ci>\'\n408.     assert mp.doprint(Symbol(\'Gamma\')) == \'<ci>&#915;</ci>\'\n409.     assert mp.doprint(Symbol(\'Delta\')) == \'<ci>&#916;</ci>\'\n410.     assert mp.doprint(Symbol(\'Epsilon\')) == \'<ci>&#917;</ci>\'\n411.     assert mp.doprint(Symbol(\'Zeta\')) == \'<ci>&#918;</ci>\'\n412.     assert mp.doprint(Symbol(\'Eta\')) == \'<ci>&#919;</ci>\'\n413.     assert mp.doprint(Symbol(\'Theta\')) == \'<ci>&#920;</ci>\'\n414.     assert mp.doprint(Symbol(\'Iota\')) == \'<ci>&#921;</ci>\'\n415.     assert mp.doprint(Symbol(\'Kappa\')) == \'<ci>&#922;</ci>\'\n416.     assert mp.doprint(Symbol(\'Lambda\')) == \'<ci>&#923;</ci>\'\n417.     assert mp.doprint(Symbol(\'Mu\')) == \'<ci>&#924;</ci>\'\n418.     assert mp.doprint(Symbol(\'Nu\')) == \'<ci>&#925;</ci>\'\n419.     assert mp.doprint(Symbol(\'Xi\')) == \'<ci>&#926;</ci>\'\n420.     assert mp.doprint(Symbol(\'Omicron\')) == \'<ci>&#927;</ci>\'\n421.     assert mp.doprint(Symbol(\'Pi\')) == \'<ci>&#928;</ci>\'\n422.     assert mp.doprint(Symbol(\'Rho\')) == \'<ci>&#929;</ci>\'\n423.     assert mp.doprint(Symbol(\'Sigma\')) == \'<ci>&#931;</ci>\'\n424.     assert mp.doprint(Symbol(\'Tau\')) == \'<ci>&#932;</ci>\'\n425.     assert mp.doprint(Symbol(\'Upsilon\')) == \'<ci>&#933;</ci>\'\n426.     assert mp.doprint(Symbol(\'Phi\')) == \'<ci>&#934;</ci>\'\n427.     assert mp.doprint(Symbol(\'Chi\')) == \'<ci>&#935;</ci>\'\n428.     assert mp.doprint(Symbol(\'Psi\')) == \'<ci>&#936;</ci>\'\n429.     assert mp.doprint(Symbol(\'Omega\')) == \'<ci>&#937;</ci>\'\n430. \n431. \n432. def test_content_mathml_order():\n433.     expr = x**3 + x**2*y + 3*x*y**3 + y**4\n434. \n435.     mp = MathMLContentPrinter({\'order\': \'lex\'})\n436.     mml = mp._print(expr)\n437. \n438.     assert mml.childNodes[1].childNodes[0].nodeName == \'power\'\n439.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == \'x\'\n440.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == \'3\'\n441. \n442.     assert mml.childNodes[4].childNodes[0].nodeName == \'power\'\n443.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == \'y\'\n444.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == \'4\'\n445. \n446.     mp = MathMLContentPrinter({\'order\': \'rev-lex\'})\n447.     mml = mp._print(expr)\n448. \n449.     assert mml.childNodes[1].childNodes[0].nodeName == \'power\'\n450.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == \'y\'\n451.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == \'4\'\n452. \n453.     assert mml.childNodes[4].childNodes[0].nodeName == \'power\'\n454.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == \'x\'\n455.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == \'3\'\n456. \n457. \n458. def test_content_settings():\n459.     raises(TypeError, lambda: mathml(Symbol("x"), method="garbage"))\n460. \n461. \n462. def test_presentation_printmethod():\n463.     assert mpp.doprint(1 + x) == \'<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>\'\n464.     assert mpp.doprint(x**2) == \'<msup><mi>x</mi><mn>2</mn></msup>\'\n465.     assert mpp.doprint(2*x) == \'<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>\'\n466. \n467. \n468. def test_presentation_mathml_core():\n469.     mml_1 = mpp._print(1 + x)\n470.     assert mml_1.nodeName == \'mrow\'\n471.     nodes = mml_1.childNodes\n472.     assert len(nodes) == 3\n473.     assert nodes[0].nodeName in [\'mi\', \'mn\']\n474.     assert nodes[1].nodeName == \'mo\'\n475.     if nodes[0].nodeName == \'mn\':\n476.         assert nodes[0].childNodes[0].nodeValue == \'1\'\n477.         assert nodes[2].childNodes[0].nodeValue == \'x\'\n478.     else:\n479.         assert nodes[0].childNodes[0].nodeValue == \'x\'\n480.         assert nodes[2].childNodes[0].nodeValue == \'1\'\n481. \n482.     mml_2 = mpp._print(x**2)\n483.     assert mml_2.nodeName == \'msup\'\n484.     nodes = mml_2.childNodes\n485.     assert nodes[0].childNodes[0].nodeValue == \'x\'\n486.     assert nodes[1].childNodes[0].nodeValue == \'2\'\n487. \n488.     mml_3 = mpp._print(2*x)\n489.     assert mml_3.nodeName == \'mrow\'\n490.     nodes = mml_3.childNodes\n491.     assert nodes[0].childNodes[0].nodeValue == \'2\'\n492.     assert nodes[1].childNodes[0].nodeValue == \'&InvisibleTimes;\'\n493.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n494. \n495.     mml = mpp._print(Float(1.0, 2)*x)\n496.     assert mml.nodeName == \'mrow\'\n497.     nodes = mml.childNodes\n498.     assert nodes[0].childNodes[0].nodeValue == \'1.0\'\n499.     assert nodes[1].childNodes[0].nodeValue == \'&InvisibleTimes;\'\n500.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n501. \n502. \n503. def test_presentation_mathml_functions():\n504.     mml_1 = mpp._print(sin(x))\n505.     assert mml_1.childNodes[0].childNodes[0\n506.         ].nodeValue == \'sin\'\n507.     assert mml_1.childNodes[1].childNodes[0\n508.         ].childNodes[0].nodeValue == \'x\'\n509. \n510.     mml_2 = mpp._print(diff(sin(x), x, evaluate=False))\n511.     assert mml_2.nodeName == \'mfrac\'\n512.     assert mml_2.childNodes[0].childNodes[0\n513.         ].childNodes[0].nodeValue == \'&dd;\'\n514.     assert mml_2.childNodes[0].childNodes[1\n515.         ].nodeName == \'mfenced\'\n516.     assert mml_2.childNodes[1].childNodes[\n517.         0].childNodes[0].nodeValue == \'&dd;\'\n518. \n519.     mml_3 = mpp._print(diff(cos(x*y), x, evaluate=False))\n520.     assert mml_3.nodeName == \'mfrac\'\n521.     assert mml_3.childNodes[0].childNodes[0\n522.         ].childNodes[0].nodeValue == \'&#x2202;\'\n523.     assert mml_2.childNodes[0].childNodes[1\n524.         ].nodeName == \'mfenced\'\n525.     assert mml_3.childNodes[1].childNodes[\n526.         0].childNodes[0].nodeValue == \'&#x2202;\'\n527. \n528. \n529. def test_presentation_mathml_limits():\n530.     lim_fun = sin(x)/x\n531.     mml_1 = mpp._print(Limit(lim_fun, x, 0))\n532.     assert mml_1.childNodes[0].nodeName == \'munder\'\n533.     assert mml_1.childNodes[0].childNodes[0\n534.         ].childNodes[0].nodeValue == \'lim\'\n535.     assert mml_1.childNodes[0].childNodes[1\n536.         ].childNodes[0].childNodes[0\n537.         ].nodeValue == \'x\'\n538.     assert mml_1.childNodes[0].childNodes[1\n539.         ].childNodes[1].childNodes[0\n540.         ].nodeValue == \'&#x2192;\'\n541.     assert mml_1.childNodes[0].childNodes[1\n542.         ].childNodes[2].childNodes[0\n543.         ].nodeValue == \'0\'\n544. \n545. \n546. def test_presentation_mathml_integrals():\n547.     integrand = x\n548.     mml_1 = mpp._print(Integral(integrand, (x, 0, 1)))\n549.     assert mml_1.childNodes[0].nodeName == \'msubsup\'\n550.     assert len(mml_1.childNodes[0].childNodes) == 3\n551.     assert mml_1.childNodes[0].childNodes[0\n552.         ].childNodes[0].nodeValue == \'&int;\'\n553.     assert mml_1.childNodes[0].childNodes[1\n554.         ].childNodes[0].nodeValue == \'0\'\n555.     assert mml_1.childNodes[0].childNodes[2\n556.         ].childNodes[0].nodeValue == \'1\'\n557. \n558. \n559. def test_presentation_mathml_matrices():\n560.     A = Matrix([1, 2, 3])\n561.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])\n562.     mll_1 = mpp._print(A)\n563.     assert mll_1.childNodes[0].nodeName == \'mtable\'\n564.     assert mll_1.childNodes[0].childNodes[0].nodeName == \'mtr\'\n565.     assert len(mll_1.childNodes[0].childNodes) == 3\n566.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeName == \'mtd\'\n567.     assert len(mll_1.childNodes[0].childNodes[0].childNodes) == 1\n568.     assert mll_1.childNodes[0].childNodes[0].childNodes[0\n569.         ].childNodes[0].childNodes[0].nodeValue == \'1\'\n570.     assert mll_1.childNodes[0].childNodes[1].childNodes[0\n571.         ].childNodes[0].childNodes[0].nodeValue == \'2\'\n572.     assert mll_1.childNodes[0].childNodes[2].childNodes[0\n573.         ].childNodes[0].childNodes[0].nodeValue == \'3\'\n574.     mll_2 = mpp._print(B)\n575.     assert mll_2.childNodes[0].nodeName == \'mtable\'\n576.     assert mll_2.childNodes[0].childNodes[0].nodeName == \'mtr\'\n577.     assert len(mll_2.childNodes[0].childNodes) == 3\n578.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeName == \'mtd\'\n579.     assert len(mll_2.childNodes[0].childNodes[0].childNodes) == 3\n580.     assert mll_2.childNodes[0].childNodes[0].childNodes[0\n581.         ].childNodes[0].childNodes[0].nodeValue == \'0\'\n582.     assert mll_2.childNodes[0].childNodes[0].childNodes[1\n583.         ].childNodes[0].childNodes[0].nodeValue == \'5\'\n584.     assert mll_2.childNodes[0].childNodes[0].childNodes[2\n585.         ].childNodes[0].childNodes[0].nodeValue == \'4\'\n586.     assert mll_2.childNodes[0].childNodes[1].childNodes[0\n587.         ].childNodes[0].childNodes[0].nodeValue == \'2\'\n588.     assert mll_2.childNodes[0].childNodes[1].childNodes[1\n589.         ].childNodes[0].childNodes[0].nodeValue == \'3\'\n590.     assert mll_2.childNodes[0].childNodes[1].childNodes[2\n591.         ].childNodes[0].childNodes[0].nodeValue == \'1\'\n592.     assert mll_2.childNodes[0].childNodes[2].childNodes[0\n593.         ].childNodes[0].childNodes[0].nodeValue == \'9\'\n594.     assert mll_2.childNodes[0].childNodes[2].childNodes[1\n595.         ].childNodes[0].childNodes[0].nodeValue == \'7\'\n596.     assert mll_2.childNodes[0].childNodes[2].childNodes[2\n597.         ].childNodes[0].childNodes[0].nodeValue == \'9\'\n598. \n599. \n600. def test_presentation_mathml_sums():\n601.     summand = x\n602.     mml_1 = mpp._print(Sum(summand, (x, 1, 10)))\n603.     assert mml_1.childNodes[0].nodeName == \'munderover\'\n604.     assert len(mml_1.childNodes[0].childNodes) == 3\n605.     assert mml_1.childNodes[0].childNodes[0].childNodes[0\n606.         ].nodeValue == \'&#x2211;\'\n607.     assert len(mml_1.childNodes[0].childNodes[1].childNodes) == 3\n608.     assert mml_1.childNodes[0].childNodes[2].childNodes[0\n609.         ].nodeValue == \'10\'\n610.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'x\'\n611. \n612. \n613. def test_presentation_mathml_add():\n614.     mml = mpp._print(x**5 - x**4 + x)\n615.     assert len(mml.childNodes) == 5\n616.     assert mml.childNodes[0].childNodes[0].childNodes[0\n617.         ].nodeValue == \'x\'\n618.     assert mml.childNodes[0].childNodes[1].childNodes[0\n619.         ].nodeValue == \'5\'\n620.     assert mml.childNodes[1].childNodes[0].nodeValue == \'-\'\n621.     assert mml.childNodes[2].childNodes[0].childNodes[0\n622.         ].nodeValue == \'x\'\n623.     assert mml.childNodes[2].childNodes[1].childNodes[0\n624.         ].nodeValue == \'4\'\n625.     assert mml.childNodes[3].childNodes[0].nodeValue == \'+\'\n626.     assert mml.childNodes[4].childNodes[0].nodeValue == \'x\'\n627. \n628. \n629. def test_presentation_mathml_Rational():\n630.     mml_1 = mpp._print(Rational(1, 1))\n631.     assert mml_1.nodeName == \'mn\'\n632. \n633.     mml_2 = mpp._print(Rational(2, 5))\n634.     assert mml_2.nodeName == \'mfrac\'\n635.     assert mml_2.childNodes[0].childNodes[0].nodeValue == \'2\'\n636.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'5\'\n637. \n638. \n639. def test_presentation_mathml_constants():\n640.     mml = mpp._print(I)\n641.     assert mml.childNodes[0].nodeValue == \'&ImaginaryI;\'\n642. \n643.     mml = mpp._print(E)\n644.     assert mml.childNodes[0].nodeValue == \'&ExponentialE;\'\n645. \n646.     mml = mpp._print(oo)\n647.     assert mml.childNodes[0].nodeValue == \'&#x221E;\'\n648. \n649.     mml = mpp._print(pi)\n650.     assert mml.childNodes[0].nodeValue == \'&pi;\'\n651. \n652.     assert mathml(GoldenRatio, printer=\'presentation\') == \'<mi>&#966;</mi>\'\n653. \n654. \n655. def test_presentation_mathml_trig():\n656.     mml = mpp._print(sin(x))\n657.     assert mml.childNodes[0].childNodes[0].nodeValue == \'sin\'\n658. \n659.     mml = mpp._print(cos(x))\n660.     assert mml.childNodes[0].childNodes[0].nodeValue == \'cos\'\n661. \n662.     mml = mpp._print(tan(x))\n663.     assert mml.childNodes[0].childNodes[0].nodeValue == \'tan\'\n664. \n665.     mml = mpp._print(asin(x))\n666.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arcsin\'\n667. \n668.     mml = mpp._print(acos(x))\n669.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arccos\'\n670. \n671.     mml = mpp._print(atan(x))\n672.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arctan\'\n673. \n674.     mml = mpp._print(sinh(x))\n675.     assert mml.childNodes[0].childNodes[0].nodeValue == \'sinh\'\n676. \n677.     mml = mpp._print(cosh(x))\n678.     assert mml.childNodes[0].childNodes[0].nodeValue == \'cosh\'\n679. \n680.     mml = mpp._print(tanh(x))\n681.     assert mml.childNodes[0].childNodes[0].nodeValue == \'tanh\'\n682. \n683.     mml = mpp._print(asinh(x))\n684.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arcsinh\'\n685. \n686.     mml = mpp._print(atanh(x))\n687.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arctanh\'\n688. \n689.     mml = mpp._print(acosh(x))\n690.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arccosh\'\n691. \n692. \n693. def test_presentation_mathml_relational():\n694.     mml_1 = mpp._print(Eq(x, 1))\n695.     assert len(mml_1.childNodes) == 3\n696.     assert mml_1.childNodes[0].nodeName == \'mi\'\n697.     assert mml_1.childNodes[0].childNodes[0].nodeValue == \'x\'\n698.     assert mml_1.childNodes[1].nodeName == \'mo\'\n699.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'=\'\n700.     assert mml_1.childNodes[2].nodeName == \'mn\'\n701.     assert mml_1.childNodes[2].childNodes[0].nodeValue == \'1\'\n702. \n703.     mml_2 = mpp._print(Ne(1, x))\n704.     assert len(mml_2.childNodes) == 3\n705.     assert mml_2.childNodes[0].nodeName == \'mn\'\n706.     assert mml_2.childNodes[0].childNodes[0].nodeValue == \'1\'\n707.     assert mml_2.childNodes[1].nodeName == \'mo\'\n708.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'&#x2260;\'\n709.     assert mml_2.childNodes[2].nodeName == \'mi\'\n710.     assert mml_2.childNodes[2].childNodes[0].nodeValue == \'x\'\n711. \n712.     mml_3 = mpp._print(Ge(1, x))\n713.     assert len(mml_3.childNodes) == 3\n714.     assert mml_3.childNodes[0].nodeName == \'mn\'\n715.     assert mml_3.childNodes[0].childNodes[0].nodeValue == \'1\'\n716.     assert mml_3.childNodes[1].nodeName == \'mo\'\n717.     assert mml_3.childNodes[1].childNodes[0].nodeValue == \'&#x2265;\'\n718.     assert mml_3.childNodes[2].nodeName == \'mi\'\n719.     assert mml_3.childNodes[2].childNodes[0].nodeValue == \'x\'\n720. \n721.     mml_4 = mpp._print(Lt(1, x))\n722.     assert len(mml_4.childNodes) == 3\n723.     assert mml_4.childNodes[0].nodeName == \'mn\'\n724.     assert mml_4.childNodes[0].childNodes[0].nodeValue == \'1\'\n725.     assert mml_4.childNodes[1].nodeName == \'mo\'\n726.     assert mml_4.childNodes[1].childNodes[0].nodeValue == \'<\'\n727.     assert mml_4.childNodes[2].nodeName == \'mi\'\n728.     assert mml_4.childNodes[2].childNodes[0].nodeValue == \'x\'\n729. \n730. \n731. def test_presentation_symbol():\n732.     mml = mpp._print(Symbol("x"))\n733.     assert mml.nodeName == \'mi\'\n734.     assert mml.childNodes[0].nodeValue == \'x\'\n735.     del mml\n736. \n737.     mml = mpp._print(Symbol("x^2"))\n738.     assert mml.nodeName == \'mi\'\n739.     assert mml.childNodes[0].nodeName == \'msup\'\n740.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n741.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n742.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n743.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n744.     del mml\n745. \n746.     mml = mpp._print(Symbol("x__2"))\n747.     assert mml.nodeName == \'mi\'\n748.     assert mml.childNodes[0].nodeName == \'msup\'\n749.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n750.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n751.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n752.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n753.     del mml\n754. \n755.     mml = mpp._print(Symbol("x_2"))\n756.     assert mml.nodeName == \'mi\'\n757.     assert mml.childNodes[0].nodeName == \'msub\'\n758.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n759.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n760.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n761.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n762.     del mml\n763. \n764.     mml = mpp._print(Symbol("x^3_2"))\n765.     assert mml.nodeName == \'mi\'\n766.     assert mml.childNodes[0].nodeName == \'msubsup\'\n767.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n768.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n769.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n770.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n771.     assert mml.childNodes[0].childNodes[2].nodeName == \'mi\'\n772.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n773.     del mml\n774. \n775.     mml = mpp._print(Symbol("x__3_2"))\n776.     assert mml.nodeName == \'mi\'\n777.     assert mml.childNodes[0].nodeName == \'msubsup\'\n778.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n779.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n780.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n781.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n782.     assert mml.childNodes[0].childNodes[2].nodeName == \'mi\'\n783.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n784.     del mml\n785. \n786.     mml = mpp._print(Symbol("x_2_a"))\n787.     assert mml.nodeName == \'mi\'\n788.     assert mml.childNodes[0].nodeName == \'msub\'\n789.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n790.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n791.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n792.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n793.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n794.         0].nodeValue == \'2\'\n795.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n796.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n797.         0].nodeValue == \' \'\n798.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n799.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n800.         0].nodeValue == \'a\'\n801.     del mml\n802. \n803.     mml = mpp._print(Symbol("x^2^a"))\n804.     assert mml.nodeName == \'mi\'\n805.     assert mml.childNodes[0].nodeName == \'msup\'\n806.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n807.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n808.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n809.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n810.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n811.         0].nodeValue == \'2\'\n812.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n813.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n814.         0].nodeValue == \' \'\n815.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n816.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n817.         0].nodeValue == \'a\'\n818.     del mml\n819. \n820.     mml = mpp._print(Symbol("x__2__a"))\n821.     assert mml.nodeName == \'mi\'\n822.     assert mml.childNodes[0].nodeName == \'msup\'\n823.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n824.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n825.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n826.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n827.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n828.         0].nodeValue == \'2\'\n829.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n830.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n831.         0].nodeValue == \' \'\n832.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n833.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n834.         0].nodeValue == \'a\'\n835.     del mml\n836. \n837. \n838. def test_presentation_mathml_greek():\n839.     mml = mpp._print(Symbol(\'alpha\'))\n840.     assert mml.nodeName == \'mi\'\n841.     assert mml.childNodes[0].nodeValue == u\'\\N{GREEK SMALL LETTER ALPHA}\'\n842. \n843.     assert mpp.doprint(Symbol(\'alpha\')) == \'<mi>&#945;</mi>\'\n844.     assert mpp.doprint(Symbol(\'beta\')) == \'<mi>&#946;</mi>\'\n845.     assert mpp.doprint(Symbol(\'gamma\')) == \'<mi>&#947;</mi>\'\n846.     assert mpp.doprint(Symbol(\'delta\')) == \'<mi>&#948;</mi>\'\n847.     assert mpp.doprint(Symbol(\'epsilon\')) == \'<mi>&#949;</mi>\'\n848.     assert mpp.doprint(Symbol(\'zeta\')) == \'<mi>&#950;</mi>\'\n849.     assert mpp.doprint(Symbol(\'eta\')) == \'<mi>&#951;</mi>\'\n850.     assert mpp.doprint(Symbol(\'theta\')) == \'<mi>&#952;</mi>\'\n851.     assert mpp.doprint(Symbol(\'iota\')) == \'<mi>&#953;</mi>\'\n852.     assert mpp.doprint(Symbol(\'kappa\')) == \'<mi>&#954;</mi>\'\n853.     assert mpp.doprint(Symbol(\'lambda\')) == \'<mi>&#955;</mi>\'\n854.     assert mpp.doprint(Symbol(\'mu\')) == \'<mi>&#956;</mi>\'\n855.     assert mpp.doprint(Symbol(\'nu\')) == \'<mi>&#957;</mi>\'\n856.     assert mpp.doprint(Symbol(\'xi\')) == \'<mi>&#958;</mi>\'\n857.     assert mpp.doprint(Symbol(\'omicron\')) == \'<mi>&#959;</mi>\'\n858.     assert mpp.doprint(Symbol(\'pi\')) == \'<mi>&#960;</mi>\'\n859.     assert mpp.doprint(Symbol(\'rho\')) == \'<mi>&#961;</mi>\'\n860.     assert mpp.doprint(Symbol(\'varsigma\')) == \'<mi>&#962;</mi>\', mp.doprint(Symbol(\'varsigma\'))\n861.     assert mpp.doprint(Symbol(\'sigma\')) == \'<mi>&#963;</mi>\'\n862.     assert mpp.doprint(Symbol(\'tau\')) == \'<mi>&#964;</mi>\'\n863.     assert mpp.doprint(Symbol(\'upsilon\')) == \'<mi>&#965;</mi>\'\n864.     assert mpp.doprint(Symbol(\'phi\')) == \'<mi>&#966;</mi>\'\n865.     assert mpp.doprint(Symbol(\'chi\')) == \'<mi>&#967;</mi>\'\n866.     assert mpp.doprint(Symbol(\'psi\')) == \'<mi>&#968;</mi>\'\n867.     assert mpp.doprint(Symbol(\'omega\')) == \'<mi>&#969;</mi>\'\n868. \n869.     assert mpp.doprint(Symbol(\'Alpha\')) == \'<mi>&#913;</mi>\'\n870.     assert mpp.doprint(Symbol(\'Beta\')) == \'<mi>&#914;</mi>\'\n871.     assert mpp.doprint(Symbol(\'Gamma\')) == \'<mi>&#915;</mi>\'\n872.     assert mpp.doprint(Symbol(\'Delta\')) == \'<mi>&#916;</mi>\'\n873.     assert mpp.doprint(Symbol(\'Epsilon\')) == \'<mi>&#917;</mi>\'\n874.     assert mpp.doprint(Symbol(\'Zeta\')) == \'<mi>&#918;</mi>\'\n875.     assert mpp.doprint(Symbol(\'Eta\')) == \'<mi>&#919;</mi>\'\n876.     assert mpp.doprint(Symbol(\'Theta\')) == \'<mi>&#920;</mi>\'\n877.     assert mpp.doprint(Symbol(\'Iota\')) == \'<mi>&#921;</mi>\'\n878.     assert mpp.doprint(Symbol(\'Kappa\')) == \'<mi>&#922;</mi>\'\n879.     assert mpp.doprint(Symbol(\'Lambda\')) == \'<mi>&#923;</mi>\'\n880.     assert mpp.doprint(Symbol(\'Mu\')) == \'<mi>&#924;</mi>\'\n881.     assert mpp.doprint(Symbol(\'Nu\')) == \'<mi>&#925;</mi>\'\n882.     assert mpp.doprint(Symbol(\'Xi\')) == \'<mi>&#926;</mi>\'\n883.     assert mpp.doprint(Symbol(\'Omicron\')) == \'<mi>&#927;</mi>\'\n884.     assert mpp.doprint(Symbol(\'Pi\')) == \'<mi>&#928;</mi>\'\n885.     assert mpp.doprint(Symbol(\'Rho\')) == \'<mi>&#929;</mi>\'\n886.     assert mpp.doprint(Symbol(\'Sigma\')) == \'<mi>&#931;</mi>\'\n887.     assert mpp.doprint(Symbol(\'Tau\')) == \'<mi>&#932;</mi>\'\n888.     assert mpp.doprint(Symbol(\'Upsilon\')) == \'<mi>&#933;</mi>\'\n889.     assert mpp.doprint(Symbol(\'Phi\')) == \'<mi>&#934;</mi>\'\n890.     assert mpp.doprint(Symbol(\'Chi\')) == \'<mi>&#935;</mi>\'\n891.     assert mpp.doprint(Symbol(\'Psi\')) == \'<mi>&#936;</mi>\'\n892.     assert mpp.doprint(Symbol(\'Omega\')) == \'<mi>&#937;</mi>\'\n893. \n894. \n895. def test_presentation_mathml_order():\n896.     expr = x**3 + x**2*y + 3*x*y**3 + y**4\n897. \n898.     mp = MathMLPresentationPrinter({\'order\': \'lex\'})\n899.     mml = mp._print(expr)\n900.     assert mml.childNodes[0].nodeName == \'msup\'\n901.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n902.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'3\'\n903. \n904.     assert mml.childNodes[6].nodeName == \'msup\'\n905.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == \'y\'\n906.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == \'4\'\n907. \n908.     mp = MathMLPresentationPrinter({\'order\': \'rev-lex\'})\n909.     mml = mp._print(expr)\n910. \n911.     assert mml.childNodes[0].nodeName == \'msup\'\n912.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'y\'\n913.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'4\'\n914. \n915.     assert mml.childNodes[6].nodeName == \'msup\'\n916.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == \'x\'\n917.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == \'3\'\n918. \n919. \n920. def test_presentation_settings():\n921.     raises(TypeError, lambda: mathml(Symbol("x"), printer=\'presentation\',method="garbage"))\n922. \n923. def test_toprettyxml_hooking():\n924.     # test that the patch doesn\'t influence the behavior of the standard library\n925.     import xml.dom.minidom\n926.     doc1 = xml.dom.minidom.parseString(\n927.         "<apply><plus/><ci>x</ci><cn>1</cn></apply>")\n928.     doc2 =  xml.dom.minidom.parseString(\n929.         "<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>")\n930.     prettyxml_old1 = doc1.toprettyxml()\n931.     prettyxml_old2 = doc2.toprettyxml()\n932. \n933.     mp.apply_patch()\n934.     mp.restore_patch()\n935. \n936.     assert prettyxml_old1 == doc1.toprettyxml()\n937.     assert prettyxml_old2 == doc2.toprettyxml()\n938. \n939. \n940. def test_print_basic():\n941.     expr = Basic(1, 2)\n942.     assert mpp.doprint(expr) == \'<mrow><mi>basic</mi><mfenced><mn>1</mn><mn>2</mn></mfenced></mrow>\'\n943.     assert mp.doprint(expr) == \'<basic><cn>1</cn><cn>2</cn></basic>\'\n944. \n945. \n946. def test_root_notation_print():\n947.     assert mathml(x**(S(1)/3), printer=\'presentation\') == \'<mroot><mi>x</mi><mn>3</mn></mroot>\'\n948.     assert mathml(x**(S(1)/3), printer=\'presentation\', root_notation=False) == \'<msup><mi>x</mi><mfrac><mn>1</mn><mn>3</mn></mfrac></msup>\'\n949.     assert mathml(x**(S(1)/3), printer=\'content\') == \'<apply><root/><degree><ci>3</ci></degree><ci>x</ci></apply>\'\n950.     assert mathml(x**(S(1)/3), printer=\'content\', root_notation=False) == \'<apply><power/><ci>x</ci><apply><divide/><cn>1</cn><cn>3</cn></apply></apply>\'\n951. \n952. \n953. def test_print_matrix_symbol():\n954.     A = MatrixSymbol(\'A\', 1, 2)\n955.     assert mpp.doprint(A) == \'<mi>A</mi>\'\n956.     assert mp.doprint(A) == \'<ci>A</ci>\'\n957.     assert mathml(A, printer=\'presentation\', mat_symbol_style="bold" )== \'<mi mathvariant="bold">A</mi>\'\n958.     assert mathml(A, mat_symbol_style="bold" )== \'<ci>A</ci>\' # No effect in content printer\n959. \n960. \n961. def test_print_random_symbol():\n962.     R = RandomSymbol(Symbol(\'R\'))\n963.     assert mpp.doprint(R) == \'<mi>R</mi>\'\n964.     assert mp.doprint(R) == \'<ci>R</ci>\'', start_line_number=1, end_line_number=964)]
2025-10-05 18:29:19,382 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-05 18:29:19,383 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.rst
├── azure-pipelines.yml
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   └── src
|       ├── _static
|       ├── _templates
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── gotchas.rst
|       ├── guide.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   └── sparse.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   └── tensor.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   ├── runtests.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── python-comparisons.rst
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── README.md
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   └── release.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── array_utils.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_array_utils.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── evaluate.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_evaluate.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_class_registry.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi.py
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   └── dpll2.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── immutable.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_commonmatrix.py
    |       ├── test_densearith.py
    |       ├── test_densesolve.py
    |       ├── test_densetools.py
    |       ├── test_immutable.py
    |       ├── test_interactions.py
    |       ├── test_matrices.py
    |       ├── test_normalforms.py
    |       ├── test_sparse.py
    |       └── test_sparsetools.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── egyptian_fraction.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── __init__.py
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autolev.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_plot.py
    |   |   └── test_plot_implicit.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   └── test_theanocode.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine.py
    |   ├── inequalities.py
    |   ├── ode.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_diophantine.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_ode.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_mix.py
    |       ├── test_rv.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_module_imports.py
    |   |   ├── test_pickling.py
    |   |   ├── test_pytest.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
A symbol ending with a number is made invisible when printing with MathML

Issue description: 
A variable with a number, such as x1, is made invisible when printing in a MathML format.
`import sympy
from sympy.printing.mathml import mathml

x2, y, z = sympy.symbols('x2 y z')
y = x2*z+x2**3
f = open('sympy_test.html', 'w')
f.write('\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.write(sympy.mathml(y, printer='presentation')+'\n')
f.write('\n')
f.write('\n')
f.write('\n')
f.close()`

Viewing the output in Safari 12.0.2:
<img width="93" alt="screen shot 2018-12-31 at 12 21 00 pm" src="https://user-images.githubusercontent.com/46286768/50567565-48d8c080-0cfb-11e9-84d2-5738f1c2e2ba.png">

If 'x' is used instead of 'x2', it works as expected:
x, y, z = sympy.symbols('x y z')
y = x*z+x**3
<img width="78" alt="screen shot 2018-12-31 at 12 26 24 pm" src="https://user-images.githubusercontent.com/46286768/50567570-542bec00-0cfb-11e9-986d-015e0023a2a1.png">

BTW, I'm on a MacBook Pro, OS 10.14.2, Sympy 1.3, in Eclipse 2018-19, and Python 3.7.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/printing/tests/test_mathml.py
Line number range: 1 - 964
Content:
1. from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \
2.     tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \
3.     pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \
4.     MatrixSymbol
5. from sympy.stats.rv import RandomSymbol
6. from sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \
7.     MathMLPrinter
8. 
9. from sympy.utilities.pytest import raises
10. 
11. x = Symbol('x')
12. y = Symbol('y')
13. mp = MathMLContentPrinter()
14. mpp = MathMLPresentationPrinter()
15. 
16. def test_mathml_printer():
17.     m = MathMLPrinter()
18.     assert m.doprint(1+x) == mp.doprint(1+x)
19. 
20. 
21. def test_content_printmethod():
22.     assert mp.doprint(1 + x) == '<apply><plus/><ci>x</ci><cn>1</cn></apply>'
23. 
24. 
25. def test_content_mathml_core():
26.     mml_1 = mp._print(1 + x)
27.     assert mml_1.nodeName == 'apply'
28.     nodes = mml_1.childNodes
29.     assert len(nodes) == 3
30.     assert nodes[0].nodeName == 'plus'
31.     assert nodes[0].hasChildNodes() is False
32.     assert nodes[0].nodeValue is None
33.     assert nodes[1].nodeName in ['cn', 'ci']
34.     if nodes[1].nodeName == 'cn':
35.         assert nodes[1].childNodes[0].nodeValue == '1'
36.         assert nodes[2].childNodes[0].nodeValue == 'x'
37.     else:
38.         assert nodes[1].childNodes[0].nodeValue == 'x'
39.         assert nodes[2].childNodes[0].nodeValue == '1'
40. 
41.     mml_2 = mp._print(x**2)
42.     assert mml_2.nodeName == 'apply'
43.     nodes = mml_2.childNodes
44.     assert nodes[1].childNodes[0].nodeValue == 'x'
45.     assert nodes[2].childNodes[0].nodeValue == '2'
46. 
47.     mml_3 = mp._print(2*x)
48.     assert mml_3.nodeName == 'apply'
49.     nodes = mml_3.childNodes
50.     assert nodes[0].nodeName == 'times'
51.     assert nodes[1].childNodes[0].nodeValue == '2'
52.     assert nodes[2].childNodes[0].nodeValue == 'x'
53. 
54.     mml = mp._print(Float(1.0, 2)*x)
55.     assert mml.nodeName == 'apply'
56.     nodes = mml.childNodes
57.     assert nodes[0].nodeName == 'times'
58.     assert nodes[1].childNodes[0].nodeValue == '1.0'
59.     assert nodes[2].childNodes[0].nodeValue == 'x'
60. 
61. 
62. def test_content_mathml_functions():
63.     mml_1 = mp._print(sin(x))
64.     assert mml_1.nodeName == 'apply'
65.     assert mml_1.childNodes[0].nodeName == 'sin'
66.     assert mml_1.childNodes[1].nodeName == 'ci'
67. 
68.     mml_2 = mp._print(diff(sin(x), x, evaluate=False))
69.     assert mml_2.nodeName == 'apply'
70.     assert mml_2.childNodes[0].nodeName == 'diff'
71.     assert mml_2.childNodes[1].nodeName == 'bvar'
72.     assert mml_2.childNodes[1].childNodes[
73.         0].nodeName == 'ci'  # below bvar there's <ci>x/ci>
74. 
75.     mml_3 = mp._print(diff(cos(x*y), x, evaluate=False))
76.     assert mml_3.nodeName == 'apply'
77.     assert mml_3.childNodes[0].nodeName == 'partialdiff'
78.     assert mml_3.childNodes[1].nodeName == 'bvar'
79.     assert mml_3.childNodes[1].childNodes[
80.         0].nodeName == 'ci'  # below bvar there's <ci>x/ci>
81. 
82. 
83. def test_content_mathml_limits():
84.     # XXX No unevaluated limits
85.     lim_fun = sin(x)/x
86.     mml_1 = mp._print(Limit(lim_fun, x, 0))
87.     assert mml_1.childNodes[0].nodeName == 'limit'
88.     assert mml_1.childNodes[1].nodeName == 'bvar'
89.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
90.     assert mml_1.childNodes[3].toxml() == mp._print(lim_fun).toxml()
91. 
92. 
93. def test_content_mathml_integrals():
94.     integrand = x
95.     mml_1 = mp._print(Integral(integrand, (x, 0, 1)))
96.     assert mml_1.childNodes[0].nodeName == 'int'
97.     assert mml_1.childNodes[1].nodeName == 'bvar'
98.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
99.     assert mml_1.childNodes[3].nodeName == 'uplimit'
100.     assert mml_1.childNodes[4].toxml() == mp._print(integrand).toxml()
101. 
102. def test_content_mathml_matrices():
103.     A = Matrix([1, 2, 3])
104.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])
105.     mll_1 = mp._print(A)
106.     assert mll_1.childNodes[0].nodeName == 'matrixrow'
107.     assert mll_1.childNodes[0].childNodes[0].nodeName == 'cn'
108.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeValue == '1'
109.     assert mll_1.childNodes[1].nodeName == 'matrixrow'
110.     assert mll_1.childNodes[1].childNodes[0].nodeName == 'cn'
111.     assert mll_1.childNodes[1].childNodes[0].childNodes[0].nodeValue == '2'
112.     assert mll_1.childNodes[2].nodeName == 'matrixrow'
113.     assert mll_1.childNodes[2].childNodes[0].nodeName == 'cn'
114.     assert mll_1.childNodes[2].childNodes[0].childNodes[0].nodeValue == '3'
115.     mll_2 = mp._print(B)
116.     assert mll_2.childNodes[0].nodeName == 'matrixrow'
117.     assert mll_2.childNodes[0].childNodes[0].nodeName == 'cn'
118.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeValue == '0'
119.     assert mll_2.childNodes[0].childNodes[1].nodeName == 'cn'
120.     assert mll_2.childNodes[0].childNodes[1].childNodes[0].nodeValue == '5'
121.     assert mll_2.childNodes[0].childNodes[2].nodeName == 'cn'
122.     assert mll_2.childNodes[0].childNodes[2].childNodes[0].nodeValue == '4'
123.     assert mll_2.childNodes[1].nodeName == 'matrixrow'
124.     assert mll_2.childNodes[1].childNodes[0].nodeName == 'cn'
125.     assert mll_2.childNodes[1].childNodes[0].childNodes[0].nodeValue == '2'
126.     assert mll_2.childNodes[1].childNodes[1].nodeName == 'cn'
127.     assert mll_2.childNodes[1].childNodes[1].childNodes[0].nodeValue == '3'
128.     assert mll_2.childNodes[1].childNodes[2].nodeName == 'cn'
129.     assert mll_2.childNodes[1].childNodes[2].childNodes[0].nodeValue == '1'
130.     assert mll_2.childNodes[2].nodeName == 'matrixrow'
131.     assert mll_2.childNodes[2].childNodes[0].nodeName == 'cn'
132.     assert mll_2.childNodes[2].childNodes[0].childNodes[0].nodeValue == '9'
133.     assert mll_2.childNodes[2].childNodes[1].nodeName == 'cn'
134.     assert mll_2.childNodes[2].childNodes[1].childNodes[0].nodeValue == '7'
135.     assert mll_2.childNodes[2].childNodes[2].nodeName == 'cn'
136.     assert mll_2.childNodes[2].childNodes[2].childNodes[0].nodeValue == '9'
137. 
138. def test_content_mathml_sums():
139.     summand = x
140.     mml_1 = mp._print(Sum(summand, (x, 1, 10)))
141.     assert mml_1.childNodes[0].nodeName == 'sum'
142.     assert mml_1.childNodes[1].nodeName == 'bvar'
143.     assert mml_1.childNodes[2].nodeName == 'lowlimit'
144.     assert mml_1.childNodes[3].nodeName == 'uplimit'
145.     assert mml_1.childNodes[4].toxml() == mp._print(summand).toxml()
146. 
147. 
148. def test_content_mathml_tuples():
149.     mml_1 = mp._print([2])
150.     assert mml_1.nodeName == 'list'
151.     assert mml_1.childNodes[0].nodeName == 'cn'
152.     assert len(mml_1.childNodes) == 1
153. 
154.     mml_2 = mp._print([2, Integer(1)])
155.     assert mml_2.nodeName == 'list'
156.     assert mml_2.childNodes[0].nodeName == 'cn'
157.     assert mml_2.childNodes[1].nodeName == 'cn'
158.     assert len(mml_2.childNodes) == 2
159. 
160. 
161. def test_content_mathml_add():
162.     mml = mp._print(x**5 - x**4 + x)
163.     assert mml.childNodes[0].nodeName == 'plus'
164.     assert mml.childNodes[1].childNodes[0].nodeName == 'minus'
165.     assert mml.childNodes[1].childNodes[1].nodeName == 'apply'
166. 
167. 
168. def test_content_mathml_Rational():
169.     mml_1 = mp._print(Rational(1, 1))
170.     """should just return a number"""
171.     assert mml_1.nodeName == 'cn'
172. 
173.     mml_2 = mp._print(Rational(2, 5))
174.     assert mml_2.childNodes[0].nodeName == 'divide'
175. 
176. 
177. def test_content_mathml_constants():
178.     mml = mp._print(I)
179.     assert mml.nodeName == 'imaginaryi'
180. 
181.     mml = mp._print(E)
182.     assert mml.nodeName == 'exponentiale'
183. 
184.     mml = mp._print(oo)
185.     assert mml.nodeName == 'infinity'
186. 
187.     mml = mp._print(pi)
188.     assert mml.nodeName == 'pi'
189. 
190.     assert mathml(GoldenRatio) == '<cn>&#966;</cn>'
191. 
192.     mml = mathml(EulerGamma)
193.     assert mml == '<eulergamma/>'
194. 
195. 
196. def test_content_mathml_trig():
197.     mml = mp._print(sin(x))
198.     assert mml.childNodes[0].nodeName == 'sin'
199. 
200.     mml = mp._print(cos(x))
201.     assert mml.childNodes[0].nodeName == 'cos'
202. 
203.     mml = mp._print(tan(x))
204.     assert mml.childNodes[0].nodeName == 'tan'
205. 
206.     mml = mp._print(asin(x))
207.     assert mml.childNodes[0].nodeName == 'arcsin'
208. 
209.     mml = mp._print(acos(x))
210.     assert mml.childNodes[0].nodeName == 'arccos'
211. 
212.     mml = mp._print(atan(x))
213.     assert mml.childNodes[0].nodeName == 'arctan'
214. 
215.     mml = mp._print(sinh(x))
216.     assert mml.childNodes[0].nodeName == 'sinh'
217. 
218.     mml = mp._print(cosh(x))
219.     assert mml.childNodes[0].nodeName == 'cosh'
220. 
221.     mml = mp._print(tanh(x))
222.     assert mml.childNodes[0].nodeName == 'tanh'
223. 
224.     mml = mp._print(asinh(x))
225.     assert mml.childNodes[0].nodeName == 'arcsinh'
226. 
227.     mml = mp._print(atanh(x))
228.     assert mml.childNodes[0].nodeName == 'arctanh'
229. 
230.     mml = mp._print(acosh(x))
231.     assert mml.childNodes[0].nodeName == 'arccosh'
232. 
233. 
234. def test_content_mathml_relational():
235.     mml_1 = mp._print(Eq(x, 1))
236.     assert mml_1.nodeName == 'apply'
237.     assert mml_1.childNodes[0].nodeName == 'eq'
238.     assert mml_1.childNodes[1].nodeName == 'ci'
239.     assert mml_1.childNodes[1].childNodes[0].nodeValue == 'x'
240.     assert mml_1.childNodes[2].nodeName == 'cn'
241.     assert mml_1.childNodes[2].childNodes[0].nodeValue == '1'
242. 
243.     mml_2 = mp._print(Ne(1, x))
244.     assert mml_2.nodeName == 'apply'
245.     assert mml_2.childNodes[0].nodeName == 'neq'
246.     assert mml_2.childNodes[1].nodeName == 'cn'
247.     assert mml_2.childNodes[1].childNodes[0].nodeValue == '1'
248.     assert mml_2.childNodes[2].nodeName == 'ci'
249.     assert mml_2.childNodes[2].childNodes[0].nodeValue == 'x'
250. 
251.     mml_3 = mp._print(Ge(1, x))
252.     assert mml_3.nodeName == 'apply'
253.     assert mml_3.childNodes[0].nodeName == 'geq'
254.     assert mml_3.childNodes[1].nodeName == 'cn'
255.     assert mml_3.childNodes[1].childNodes[0].nodeValue == '1'
256.     assert mml_3.childNodes[2].nodeName == 'ci'
257.     assert mml_3.childNodes[2].childNodes[0].nodeValue == 'x'
258. 
259.     mml_4 = mp._print(Lt(1, x))
260.     assert mml_4.nodeName == 'apply'
261.     assert mml_4.childNodes[0].nodeName == 'lt'
262.     assert mml_4.childNodes[1].nodeName == 'cn'
263.     assert mml_4.childNodes[1].childNodes[0].nodeValue == '1'
264.     assert mml_4.childNodes[2].nodeName == 'ci'
265.     assert mml_4.childNodes[2].childNodes[0].nodeValue == 'x'
266. 
267. 
268. def test_content_symbol():
269.     mml = mp._print(Symbol("x"))
270.     assert mml.nodeName == 'ci'
271.     assert mml.childNodes[0].nodeValue == 'x'
272.     del mml
273. 
274.     mml = mp._print(Symbol("x^2"))
275.     assert mml.nodeName == 'ci'
276.     assert mml.childNodes[0].nodeName == 'mml:msup'
277.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
279.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
281.     del mml
282. 
283.     mml = mp._print(Symbol("x__2"))
284.     assert mml.nodeName == 'ci'
285.     assert mml.childNodes[0].nodeName == 'mml:msup'
286.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
288.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
290.     del mml
291. 
292.     mml = mp._print(Symbol("x_2"))
293.     assert mml.nodeName == 'ci'
294.     assert mml.childNodes[0].nodeName == 'mml:msub'
295.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
297.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
299.     del mml
300. 
301.     mml = mp._print(Symbol("x^3_2"))
302.     assert mml.nodeName == 'ci'
303.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
304.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
306.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
308.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
310.     del mml
311. 
312.     mml = mp._print(Symbol("x__3_2"))
313.     assert mml.nodeName == 'ci'
314.     assert mml.childNodes[0].nodeName == 'mml:msubsup'
315.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
317.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mi'
318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
319.     assert mml.childNodes[0].childNodes[2].nodeName == 'mml:mi'
320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
321.     del mml
322. 
323.     mml = mp._print(Symbol("x_2_a"))
324.     assert mml.nodeName == 'ci'
325.     assert mml.childNodes[0].nodeName == 'mml:msub'
326.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
328.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
331.         0].nodeValue == '2'
332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
334.         0].nodeValue == ' '
335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
337.         0].nodeValue == 'a'
338.     del mml
339. 
340.     mml = mp._print(Symbol("x^2^a"))
341.     assert mml.nodeName == 'ci'
342.     assert mml.childNodes[0].nodeName == 'mml:msup'
343.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
345.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
348.         0].nodeValue == '2'
349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
351.         0].nodeValue == ' '
352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
354.         0].nodeValue == 'a'
355.     del mml
356. 
357.     mml = mp._print(Symbol("x__2__a"))
358.     assert mml.nodeName == 'ci'
359.     assert mml.childNodes[0].nodeName == 'mml:msup'
360.     assert mml.childNodes[0].childNodes[0].nodeName == 'mml:mi'
361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
362.     assert mml.childNodes[0].childNodes[1].nodeName == 'mml:mrow'
363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mml:mi'
364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
365.         0].nodeValue == '2'
366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mml:mo'
367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
368.         0].nodeValue == ' '
369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mml:mi'
370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
371.         0].nodeValue == 'a'
372.     del mml
373. 
374. 
375. def test_content_mathml_greek():
376.     mml = mp._print(Symbol('alpha'))
377.     assert mml.nodeName == 'ci'
378.     assert mml.childNodes[0].nodeValue == u'\N{GREEK SMALL LETTER ALPHA}'
379. 
380.     assert mp.doprint(Symbol('alpha')) == '<ci>&#945;</ci>'
381.     assert mp.doprint(Symbol('beta')) == '<ci>&#946;</ci>'
382.     assert mp.doprint(Symbol('gamma')) == '<ci>&#947;</ci>'
383.     assert mp.doprint(Symbol('delta')) == '<ci>&#948;</ci>'
384.     assert mp.doprint(Symbol('epsilon')) == '<ci>&#949;</ci>'
385.     assert mp.doprint(Symbol('zeta')) == '<ci>&#950;</ci>'
386.     assert mp.doprint(Symbol('eta')) == '<ci>&#951;</ci>'
387.     assert mp.doprint(Symbol('theta')) == '<ci>&#952;</ci>'
388.     assert mp.doprint(Symbol('iota')) == '<ci>&#953;</ci>'
389.     assert mp.doprint(Symbol('kappa')) == '<ci>&#954;</ci>'
390.     assert mp.doprint(Symbol('lambda')) == '<ci>&#955;</ci>'
391.     assert mp.doprint(Symbol('mu')) == '<ci>&#956;</ci>'
392.     assert mp.doprint(Symbol('nu')) == '<ci>&#957;</ci>'
393.     assert mp.doprint(Symbol('xi')) == '<ci>&#958;</ci>'
394.     assert mp.doprint(Symbol('omicron')) == '<ci>&#959;</ci>'
395.     assert mp.doprint(Symbol('pi')) == '<ci>&#960;</ci>'
396.     assert mp.doprint(Symbol('rho')) == '<ci>&#961;</ci>'
397.     assert mp.doprint(Symbol('varsigma')) == '<ci>&#962;</ci>', mp.doprint(Symbol('varsigma'))
398.     assert mp.doprint(Symbol('sigma')) == '<ci>&#963;</ci>'
399.     assert mp.doprint(Symbol('tau')) == '<ci>&#964;</ci>'
400.     assert mp.doprint(Symbol('upsilon')) == '<ci>&#965;</ci>'
401.     assert mp.doprint(Symbol('phi')) == '<ci>&#966;</ci>'
402.     assert mp.doprint(Symbol('chi')) == '<ci>&#967;</ci>'
403.     assert mp.doprint(Symbol('psi')) == '<ci>&#968;</ci>'
404.     assert mp.doprint(Symbol('omega')) == '<ci>&#969;</ci>'
405. 
406.     assert mp.doprint(Symbol('Alpha')) == '<ci>&#913;</ci>'
407.     assert mp.doprint(Symbol('Beta')) == '<ci>&#914;</ci>'
408.     assert mp.doprint(Symbol('Gamma')) == '<ci>&#915;</ci>'
409.     assert mp.doprint(Symbol('Delta')) == '<ci>&#916;</ci>'
410.     assert mp.doprint(Symbol('Epsilon')) == '<ci>&#917;</ci>'
411.     assert mp.doprint(Symbol('Zeta')) == '<ci>&#918;</ci>'
412.     assert mp.doprint(Symbol('Eta')) == '<ci>&#919;</ci>'
413.     assert mp.doprint(Symbol('Theta')) == '<ci>&#920;</ci>'
414.     assert mp.doprint(Symbol('Iota')) == '<ci>&#921;</ci>'
415.     assert mp.doprint(Symbol('Kappa')) == '<ci>&#922;</ci>'
416.     assert mp.doprint(Symbol('Lambda')) == '<ci>&#923;</ci>'
417.     assert mp.doprint(Symbol('Mu')) == '<ci>&#924;</ci>'
418.     assert mp.doprint(Symbol('Nu')) == '<ci>&#925;</ci>'
419.     assert mp.doprint(Symbol('Xi')) == '<ci>&#926;</ci>'
420.     assert mp.doprint(Symbol('Omicron')) == '<ci>&#927;</ci>'
421.     assert mp.doprint(Symbol('Pi')) == '<ci>&#928;</ci>'
422.     assert mp.doprint(Symbol('Rho')) == '<ci>&#929;</ci>'
423.     assert mp.doprint(Symbol('Sigma')) == '<ci>&#931;</ci>'
424.     assert mp.doprint(Symbol('Tau')) == '<ci>&#932;</ci>'
425.     assert mp.doprint(Symbol('Upsilon')) == '<ci>&#933;</ci>'
426.     assert mp.doprint(Symbol('Phi')) == '<ci>&#934;</ci>'
427.     assert mp.doprint(Symbol('Chi')) == '<ci>&#935;</ci>'
428.     assert mp.doprint(Symbol('Psi')) == '<ci>&#936;</ci>'
429.     assert mp.doprint(Symbol('Omega')) == '<ci>&#937;</ci>'
430. 
431. 
432. def test_content_mathml_order():
433.     expr = x**3 + x**2*y + 3*x*y**3 + y**4
434. 
435.     mp = MathMLContentPrinter({'order': 'lex'})
436.     mml = mp._print(expr)
437. 
438.     assert mml.childNodes[1].childNodes[0].nodeName == 'power'
439.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == 'x'
440.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == '3'
441. 
442.     assert mml.childNodes[4].childNodes[0].nodeName == 'power'
443.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == 'y'
444.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == '4'
445. 
446.     mp = MathMLContentPrinter({'order': 'rev-lex'})
447.     mml = mp._print(expr)
448. 
449.     assert mml.childNodes[1].childNodes[0].nodeName == 'power'
450.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == 'y'
451.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == '4'
452. 
453.     assert mml.childNodes[4].childNodes[0].nodeName == 'power'
454.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == 'x'
455.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == '3'
456. 
457. 
458. def test_content_settings():
459.     raises(TypeError, lambda: mathml(Symbol("x"), method="garbage"))
460. 
461. 
462. def test_presentation_printmethod():
463.     assert mpp.doprint(1 + x) == '<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>'
464.     assert mpp.doprint(x**2) == '<msup><mi>x</mi><mn>2</mn></msup>'
465.     assert mpp.doprint(2*x) == '<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>'
466. 
467. 
468. def test_presentation_mathml_core():
469.     mml_1 = mpp._print(1 + x)
470.     assert mml_1.nodeName == 'mrow'
471.     nodes = mml_1.childNodes
472.     assert len(nodes) == 3
473.     assert nodes[0].nodeName in ['mi', 'mn']
474.     assert nodes[1].nodeName == 'mo'
475.     if nodes[0].nodeName == 'mn':
476.         assert nodes[0].childNodes[0].nodeValue == '1'
477.         assert nodes[2].childNodes[0].nodeValue == 'x'
478.     else:
479.         assert nodes[0].childNodes[0].nodeValue == 'x'
480.         assert nodes[2].childNodes[0].nodeValue == '1'
481. 
482.     mml_2 = mpp._print(x**2)
483.     assert mml_2.nodeName == 'msup'
484.     nodes = mml_2.childNodes
485.     assert nodes[0].childNodes[0].nodeValue == 'x'
486.     assert nodes[1].childNodes[0].nodeValue == '2'
487. 
488.     mml_3 = mpp._print(2*x)
489.     assert mml_3.nodeName == 'mrow'
490.     nodes = mml_3.childNodes
491.     assert nodes[0].childNodes[0].nodeValue == '2'
492.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
493.     assert nodes[2].childNodes[0].nodeValue == 'x'
494. 
495.     mml = mpp._print(Float(1.0, 2)*x)
496.     assert mml.nodeName == 'mrow'
497.     nodes = mml.childNodes
498.     assert nodes[0].childNodes[0].nodeValue == '1.0'
499.     assert nodes[1].childNodes[0].nodeValue == '&InvisibleTimes;'
500.     assert nodes[2].childNodes[0].nodeValue == 'x'
501. 
502. 
503. def test_presentation_mathml_functions():
504.     mml_1 = mpp._print(sin(x))
505.     assert mml_1.childNodes[0].childNodes[0
506.         ].nodeValue == 'sin'
507.     assert mml_1.childNodes[1].childNodes[0
508.         ].childNodes[0].nodeValue == 'x'
509. 
510.     mml_2 = mpp._print(diff(sin(x), x, evaluate=False))
511.     assert mml_2.nodeName == 'mfrac'
512.     assert mml_2.childNodes[0].childNodes[0
513.         ].childNodes[0].nodeValue == '&dd;'
514.     assert mml_2.childNodes[0].childNodes[1
515.         ].nodeName == 'mfenced'
516.     assert mml_2.childNodes[1].childNodes[
517.         0].childNodes[0].nodeValue == '&dd;'
518. 
519.     mml_3 = mpp._print(diff(cos(x*y), x, evaluate=False))
520.     assert mml_3.nodeName == 'mfrac'
521.     assert mml_3.childNodes[0].childNodes[0
522.         ].childNodes[0].nodeValue == '&#x2202;'
523.     assert mml_2.childNodes[0].childNodes[1
524.         ].nodeName == 'mfenced'
525.     assert mml_3.childNodes[1].childNodes[
526.         0].childNodes[0].nodeValue == '&#x2202;'
527. 
528. 
529. def test_presentation_mathml_limits():
530.     lim_fun = sin(x)/x
531.     mml_1 = mpp._print(Limit(lim_fun, x, 0))
532.     assert mml_1.childNodes[0].nodeName == 'munder'
533.     assert mml_1.childNodes[0].childNodes[0
534.         ].childNodes[0].nodeValue == 'lim'
535.     assert mml_1.childNodes[0].childNodes[1
536.         ].childNodes[0].childNodes[0
537.         ].nodeValue == 'x'
538.     assert mml_1.childNodes[0].childNodes[1
539.         ].childNodes[1].childNodes[0
540.         ].nodeValue == '&#x2192;'
541.     assert mml_1.childNodes[0].childNodes[1
542.         ].childNodes[2].childNodes[0
543.         ].nodeValue == '0'
544. 
545. 
546. def test_presentation_mathml_integrals():
547.     integrand = x
548.     mml_1 = mpp._print(Integral(integrand, (x, 0, 1)))
549.     assert mml_1.childNodes[0].nodeName == 'msubsup'
550.     assert len(mml_1.childNodes[0].childNodes) == 3
551.     assert mml_1.childNodes[0].childNodes[0
552.         ].childNodes[0].nodeValue == '&int;'
553.     assert mml_1.childNodes[0].childNodes[1
554.         ].childNodes[0].nodeValue == '0'
555.     assert mml_1.childNodes[0].childNodes[2
556.         ].childNodes[0].nodeValue == '1'
557. 
558. 
559. def test_presentation_mathml_matrices():
560.     A = Matrix([1, 2, 3])
561.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])
562.     mll_1 = mpp._print(A)
563.     assert mll_1.childNodes[0].nodeName == 'mtable'
564.     assert mll_1.childNodes[0].childNodes[0].nodeName == 'mtr'
565.     assert len(mll_1.childNodes[0].childNodes) == 3
566.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeName == 'mtd'
567.     assert len(mll_1.childNodes[0].childNodes[0].childNodes) == 1
568.     assert mll_1.childNodes[0].childNodes[0].childNodes[0
569.         ].childNodes[0].childNodes[0].nodeValue == '1'
570.     assert mll_1.childNodes[0].childNodes[1].childNodes[0
571.         ].childNodes[0].childNodes[0].nodeValue == '2'
572.     assert mll_1.childNodes[0].childNodes[2].childNodes[0
573.         ].childNodes[0].childNodes[0].nodeValue == '3'
574.     mll_2 = mpp._print(B)
575.     assert mll_2.childNodes[0].nodeName == 'mtable'
576.     assert mll_2.childNodes[0].childNodes[0].nodeName == 'mtr'
577.     assert len(mll_2.childNodes[0].childNodes) == 3
578.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeName == 'mtd'
579.     assert len(mll_2.childNodes[0].childNodes[0].childNodes) == 3
580.     assert mll_2.childNodes[0].childNodes[0].childNodes[0
581.         ].childNodes[0].childNodes[0].nodeValue == '0'
582.     assert mll_2.childNodes[0].childNodes[0].childNodes[1
583.         ].childNodes[0].childNodes[0].nodeValue == '5'
584.     assert mll_2.childNodes[0].childNodes[0].childNodes[2
585.         ].childNodes[0].childNodes[0].nodeValue == '4'
586.     assert mll_2.childNodes[0].childNodes[1].childNodes[0
587.         ].childNodes[0].childNodes[0].nodeValue == '2'
588.     assert mll_2.childNodes[0].childNodes[1].childNodes[1
589.         ].childNodes[0].childNodes[0].nodeValue == '3'
590.     assert mll_2.childNodes[0].childNodes[1].childNodes[2
591.         ].childNodes[0].childNodes[0].nodeValue == '1'
592.     assert mll_2.childNodes[0].childNodes[2].childNodes[0
593.         ].childNodes[0].childNodes[0].nodeValue == '9'
594.     assert mll_2.childNodes[0].childNodes[2].childNodes[1
595.         ].childNodes[0].childNodes[0].nodeValue == '7'
596.     assert mll_2.childNodes[0].childNodes[2].childNodes[2
597.         ].childNodes[0].childNodes[0].nodeValue == '9'
598. 
599. 
600. def test_presentation_mathml_sums():
601.     summand = x
602.     mml_1 = mpp._print(Sum(summand, (x, 1, 10)))
603.     assert mml_1.childNodes[0].nodeName == 'munderover'
604.     assert len(mml_1.childNodes[0].childNodes) == 3
605.     assert mml_1.childNodes[0].childNodes[0].childNodes[0
606.         ].nodeValue == '&#x2211;'
607.     assert len(mml_1.childNodes[0].childNodes[1].childNodes) == 3
608.     assert mml_1.childNodes[0].childNodes[2].childNodes[0
609.         ].nodeValue == '10'
610.     assert mml_1.childNodes[1].childNodes[0].nodeValue == 'x'
611. 
612. 
613. def test_presentation_mathml_add():
614.     mml = mpp._print(x**5 - x**4 + x)
615.     assert len(mml.childNodes) == 5
616.     assert mml.childNodes[0].childNodes[0].childNodes[0
617.         ].nodeValue == 'x'
618.     assert mml.childNodes[0].childNodes[1].childNodes[0
619.         ].nodeValue == '5'
620.     assert mml.childNodes[1].childNodes[0].nodeValue == '-'
621.     assert mml.childNodes[2].childNodes[0].childNodes[0
622.         ].nodeValue == 'x'
623.     assert mml.childNodes[2].childNodes[1].childNodes[0
624.         ].nodeValue == '4'
625.     assert mml.childNodes[3].childNodes[0].nodeValue == '+'
626.     assert mml.childNodes[4].childNodes[0].nodeValue == 'x'
627. 
628. 
629. def test_presentation_mathml_Rational():
630.     mml_1 = mpp._print(Rational(1, 1))
631.     assert mml_1.nodeName == 'mn'
632. 
633.     mml_2 = mpp._print(Rational(2, 5))
634.     assert mml_2.nodeName == 'mfrac'
635.     assert mml_2.childNodes[0].childNodes[0].nodeValue == '2'
636.     assert mml_2.childNodes[1].childNodes[0].nodeValue == '5'
637. 
638. 
639. def test_presentation_mathml_constants():
640.     mml = mpp._print(I)
641.     assert mml.childNodes[0].nodeValue == '&ImaginaryI;'
642. 
643.     mml = mpp._print(E)
644.     assert mml.childNodes[0].nodeValue == '&ExponentialE;'
645. 
646.     mml = mpp._print(oo)
647.     assert mml.childNodes[0].nodeValue == '&#x221E;'
648. 
649.     mml = mpp._print(pi)
650.     assert mml.childNodes[0].nodeValue == '&pi;'
651. 
652.     assert mathml(GoldenRatio, printer='presentation') == '<mi>&#966;</mi>'
653. 
654. 
655. def test_presentation_mathml_trig():
656.     mml = mpp._print(sin(x))
657.     assert mml.childNodes[0].childNodes[0].nodeValue == 'sin'
658. 
659.     mml = mpp._print(cos(x))
660.     assert mml.childNodes[0].childNodes[0].nodeValue == 'cos'
661. 
662.     mml = mpp._print(tan(x))
663.     assert mml.childNodes[0].childNodes[0].nodeValue == 'tan'
664. 
665.     mml = mpp._print(asin(x))
666.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arcsin'
667. 
668.     mml = mpp._print(acos(x))
669.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arccos'
670. 
671.     mml = mpp._print(atan(x))
672.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arctan'
673. 
674.     mml = mpp._print(sinh(x))
675.     assert mml.childNodes[0].childNodes[0].nodeValue == 'sinh'
676. 
677.     mml = mpp._print(cosh(x))
678.     assert mml.childNodes[0].childNodes[0].nodeValue == 'cosh'
679. 
680.     mml = mpp._print(tanh(x))
681.     assert mml.childNodes[0].childNodes[0].nodeValue == 'tanh'
682. 
683.     mml = mpp._print(asinh(x))
684.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arcsinh'
685. 
686.     mml = mpp._print(atanh(x))
687.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arctanh'
688. 
689.     mml = mpp._print(acosh(x))
690.     assert mml.childNodes[0].childNodes[0].nodeValue == 'arccosh'
691. 
692. 
693. def test_presentation_mathml_relational():
694.     mml_1 = mpp._print(Eq(x, 1))
695.     assert len(mml_1.childNodes) == 3
696.     assert mml_1.childNodes[0].nodeName == 'mi'
697.     assert mml_1.childNodes[0].childNodes[0].nodeValue == 'x'
698.     assert mml_1.childNodes[1].nodeName == 'mo'
699.     assert mml_1.childNodes[1].childNodes[0].nodeValue == '='
700.     assert mml_1.childNodes[2].nodeName == 'mn'
701.     assert mml_1.childNodes[2].childNodes[0].nodeValue == '1'
702. 
703.     mml_2 = mpp._print(Ne(1, x))
704.     assert len(mml_2.childNodes) == 3
705.     assert mml_2.childNodes[0].nodeName == 'mn'
706.     assert mml_2.childNodes[0].childNodes[0].nodeValue == '1'
707.     assert mml_2.childNodes[1].nodeName == 'mo'
708.     assert mml_2.childNodes[1].childNodes[0].nodeValue == '&#x2260;'
709.     assert mml_2.childNodes[2].nodeName == 'mi'
710.     assert mml_2.childNodes[2].childNodes[0].nodeValue == 'x'
711. 
712.     mml_3 = mpp._print(Ge(1, x))
713.     assert len(mml_3.childNodes) == 3
714.     assert mml_3.childNodes[0].nodeName == 'mn'
715.     assert mml_3.childNodes[0].childNodes[0].nodeValue == '1'
716.     assert mml_3.childNodes[1].nodeName == 'mo'
717.     assert mml_3.childNodes[1].childNodes[0].nodeValue == '&#x2265;'
718.     assert mml_3.childNodes[2].nodeName == 'mi'
719.     assert mml_3.childNodes[2].childNodes[0].nodeValue == 'x'
720. 
721.     mml_4 = mpp._print(Lt(1, x))
722.     assert len(mml_4.childNodes) == 3
723.     assert mml_4.childNodes[0].nodeName == 'mn'
724.     assert mml_4.childNodes[0].childNodes[0].nodeValue == '1'
725.     assert mml_4.childNodes[1].nodeName == 'mo'
726.     assert mml_4.childNodes[1].childNodes[0].nodeValue == '<'
727.     assert mml_4.childNodes[2].nodeName == 'mi'
728.     assert mml_4.childNodes[2].childNodes[0].nodeValue == 'x'
729. 
730. 
731. def test_presentation_symbol():
732.     mml = mpp._print(Symbol("x"))
733.     assert mml.nodeName == 'mi'
734.     assert mml.childNodes[0].nodeValue == 'x'
735.     del mml
736. 
737.     mml = mpp._print(Symbol("x^2"))
738.     assert mml.nodeName == 'mi'
739.     assert mml.childNodes[0].nodeName == 'msup'
740.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
741.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
742.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
743.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
744.     del mml
745. 
746.     mml = mpp._print(Symbol("x__2"))
747.     assert mml.nodeName == 'mi'
748.     assert mml.childNodes[0].nodeName == 'msup'
749.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
750.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
751.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
752.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
753.     del mml
754. 
755.     mml = mpp._print(Symbol("x_2"))
756.     assert mml.nodeName == 'mi'
757.     assert mml.childNodes[0].nodeName == 'msub'
758.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
759.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
760.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
761.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
762.     del mml
763. 
764.     mml = mpp._print(Symbol("x^3_2"))
765.     assert mml.nodeName == 'mi'
766.     assert mml.childNodes[0].nodeName == 'msubsup'
767.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
768.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
769.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
770.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
771.     assert mml.childNodes[0].childNodes[2].nodeName == 'mi'
772.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
773.     del mml
774. 
775.     mml = mpp._print(Symbol("x__3_2"))
776.     assert mml.nodeName == 'mi'
777.     assert mml.childNodes[0].nodeName == 'msubsup'
778.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
779.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
780.     assert mml.childNodes[0].childNodes[1].nodeName == 'mi'
781.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '2'
782.     assert mml.childNodes[0].childNodes[2].nodeName == 'mi'
783.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == '3'
784.     del mml
785. 
786.     mml = mpp._print(Symbol("x_2_a"))
787.     assert mml.nodeName == 'mi'
788.     assert mml.childNodes[0].nodeName == 'msub'
789.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
790.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
791.     assert mml.childNodes[0].childNodes[1].nodeName == 'mrow'
792.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mi'
793.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
794.         0].nodeValue == '2'
795.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mo'
796.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
797.         0].nodeValue == ' '
798.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mi'
799.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
800.         0].nodeValue == 'a'
801.     del mml
802. 
803.     mml = mpp._print(Symbol("x^2^a"))
804.     assert mml.nodeName == 'mi'
805.     assert mml.childNodes[0].nodeName == 'msup'
806.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
807.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
808.     assert mml.childNodes[0].childNodes[1].nodeName == 'mrow'
809.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mi'
810.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
811.         0].nodeValue == '2'
812.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mo'
813.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
814.         0].nodeValue == ' '
815.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mi'
816.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
817.         0].nodeValue == 'a'
818.     del mml
819. 
820.     mml = mpp._print(Symbol("x__2__a"))
821.     assert mml.nodeName == 'mi'
822.     assert mml.childNodes[0].nodeName == 'msup'
823.     assert mml.childNodes[0].childNodes[0].nodeName == 'mi'
824.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
825.     assert mml.childNodes[0].childNodes[1].nodeName == 'mrow'
826.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == 'mi'
827.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[
828.         0].nodeValue == '2'
829.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == 'mo'
830.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[
831.         0].nodeValue == ' '
832.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == 'mi'
833.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[
834.         0].nodeValue == 'a'
835.     del mml
836. 
837. 
838. def test_presentation_mathml_greek():
839.     mml = mpp._print(Symbol('alpha'))
840.     assert mml.nodeName == 'mi'
841.     assert mml.childNodes[0].nodeValue == u'\N{GREEK SMALL LETTER ALPHA}'
842. 
843.     assert mpp.doprint(Symbol('alpha')) == '<mi>&#945;</mi>'
844.     assert mpp.doprint(Symbol('beta')) == '<mi>&#946;</mi>'
845.     assert mpp.doprint(Symbol('gamma')) == '<mi>&#947;</mi>'
846.     assert mpp.doprint(Symbol('delta')) == '<mi>&#948;</mi>'
847.     assert mpp.doprint(Symbol('epsilon')) == '<mi>&#949;</mi>'
848.     assert mpp.doprint(Symbol('zeta')) == '<mi>&#950;</mi>'
849.     assert mpp.doprint(Symbol('eta')) == '<mi>&#951;</mi>'
850.     assert mpp.doprint(Symbol('theta')) == '<mi>&#952;</mi>'
851.     assert mpp.doprint(Symbol('iota')) == '<mi>&#953;</mi>'
852.     assert mpp.doprint(Symbol('kappa')) == '<mi>&#954;</mi>'
853.     assert mpp.doprint(Symbol('lambda')) == '<mi>&#955;</mi>'
854.     assert mpp.doprint(Symbol('mu')) == '<mi>&#956;</mi>'
855.     assert mpp.doprint(Symbol('nu')) == '<mi>&#957;</mi>'
856.     assert mpp.doprint(Symbol('xi')) == '<mi>&#958;</mi>'
857.     assert mpp.doprint(Symbol('omicron')) == '<mi>&#959;</mi>'
858.     assert mpp.doprint(Symbol('pi')) == '<mi>&#960;</mi>'
859.     assert mpp.doprint(Symbol('rho')) == '<mi>&#961;</mi>'
860.     assert mpp.doprint(Symbol('varsigma')) == '<mi>&#962;</mi>', mp.doprint(Symbol('varsigma'))
861.     assert mpp.doprint(Symbol('sigma')) == '<mi>&#963;</mi>'
862.     assert mpp.doprint(Symbol('tau')) == '<mi>&#964;</mi>'
863.     assert mpp.doprint(Symbol('upsilon')) == '<mi>&#965;</mi>'
864.     assert mpp.doprint(Symbol('phi')) == '<mi>&#966;</mi>'
865.     assert mpp.doprint(Symbol('chi')) == '<mi>&#967;</mi>'
866.     assert mpp.doprint(Symbol('psi')) == '<mi>&#968;</mi>'
867.     assert mpp.doprint(Symbol('omega')) == '<mi>&#969;</mi>'
868. 
869.     assert mpp.doprint(Symbol('Alpha')) == '<mi>&#913;</mi>'
870.     assert mpp.doprint(Symbol('Beta')) == '<mi>&#914;</mi>'
871.     assert mpp.doprint(Symbol('Gamma')) == '<mi>&#915;</mi>'
872.     assert mpp.doprint(Symbol('Delta')) == '<mi>&#916;</mi>'
873.     assert mpp.doprint(Symbol('Epsilon')) == '<mi>&#917;</mi>'
874.     assert mpp.doprint(Symbol('Zeta')) == '<mi>&#918;</mi>'
875.     assert mpp.doprint(Symbol('Eta')) == '<mi>&#919;</mi>'
876.     assert mpp.doprint(Symbol('Theta')) == '<mi>&#920;</mi>'
877.     assert mpp.doprint(Symbol('Iota')) == '<mi>&#921;</mi>'
878.     assert mpp.doprint(Symbol('Kappa')) == '<mi>&#922;</mi>'
879.     assert mpp.doprint(Symbol('Lambda')) == '<mi>&#923;</mi>'
880.     assert mpp.doprint(Symbol('Mu')) == '<mi>&#924;</mi>'
881.     assert mpp.doprint(Symbol('Nu')) == '<mi>&#925;</mi>'
882.     assert mpp.doprint(Symbol('Xi')) == '<mi>&#926;</mi>'
883.     assert mpp.doprint(Symbol('Omicron')) == '<mi>&#927;</mi>'
884.     assert mpp.doprint(Symbol('Pi')) == '<mi>&#928;</mi>'
885.     assert mpp.doprint(Symbol('Rho')) == '<mi>&#929;</mi>'
886.     assert mpp.doprint(Symbol('Sigma')) == '<mi>&#931;</mi>'
887.     assert mpp.doprint(Symbol('Tau')) == '<mi>&#932;</mi>'
888.     assert mpp.doprint(Symbol('Upsilon')) == '<mi>&#933;</mi>'
889.     assert mpp.doprint(Symbol('Phi')) == '<mi>&#934;</mi>'
890.     assert mpp.doprint(Symbol('Chi')) == '<mi>&#935;</mi>'
891.     assert mpp.doprint(Symbol('Psi')) == '<mi>&#936;</mi>'
892.     assert mpp.doprint(Symbol('Omega')) == '<mi>&#937;</mi>'
893. 
894. 
895. def test_presentation_mathml_order():
896.     expr = x**3 + x**2*y + 3*x*y**3 + y**4
897. 
898.     mp = MathMLPresentationPrinter({'order': 'lex'})
899.     mml = mp._print(expr)
900.     assert mml.childNodes[0].nodeName == 'msup'
901.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'x'
902.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '3'
903. 
904.     assert mml.childNodes[6].nodeName == 'msup'
905.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == 'y'
906.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == '4'
907. 
908.     mp = MathMLPresentationPrinter({'order': 'rev-lex'})
909.     mml = mp._print(expr)
910. 
911.     assert mml.childNodes[0].nodeName == 'msup'
912.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == 'y'
913.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == '4'
914. 
915.     assert mml.childNodes[6].nodeName == 'msup'
916.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == 'x'
917.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == '3'
918. 
919. 
920. def test_presentation_settings():
921.     raises(TypeError, lambda: mathml(Symbol("x"), printer='presentation',method="garbage"))
922. 
923. def test_toprettyxml_hooking():
924.     # test that the patch doesn't influence the behavior of the standard library
925.     import xml.dom.minidom
926.     doc1 = xml.dom.minidom.parseString(
927.         "<apply><plus/><ci>x</ci><cn>1</cn></apply>")
928.     doc2 =  xml.dom.minidom.parseString(
929.         "<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>")
930.     prettyxml_old1 = doc1.toprettyxml()
931.     prettyxml_old2 = doc2.toprettyxml()
932. 
933.     mp.apply_patch()
934.     mp.restore_patch()
935. 
936.     assert prettyxml_old1 == doc1.toprettyxml()
937.     assert prettyxml_old2 == doc2.toprettyxml()
938. 
939. 
940. def test_print_basic():
941.     expr = Basic(1, 2)
942.     assert mpp.doprint(expr) == '<mrow><mi>basic</mi><mfenced><mn>1</mn><mn>2</mn></mfenced></mrow>'
943.     assert mp.doprint(expr) == '<basic><cn>1</cn><cn>2</cn></basic>'
944. 
945. 
946. def test_root_notation_print():
947.     assert mathml(x**(S(1)/3), printer='presentation') == '<mroot><mi>x</mi><mn>3</mn></mroot>'
948.     assert mathml(x**(S(1)/3), printer='presentation', root_notation=False) == '<msup><mi>x</mi><mfrac><mn>1</mn><mn>3</mn></mfrac></msup>'
949.     assert mathml(x**(S(1)/3), printer='content') == '<apply><root/><degree><ci>3</ci></degree><ci>x</ci></apply>'
950.     assert mathml(x**(S(1)/3), printer='content', root_notation=False) == '<apply><power/><ci>x</ci><apply><divide/><cn>1</cn><cn>3</cn></apply></apply>'
951. 
952. 
953. def test_print_matrix_symbol():
954.     A = MatrixSymbol('A', 1, 2)
955.     assert mpp.doprint(A) == '<mi>A</mi>'
956.     assert mp.doprint(A) == '<ci>A</ci>'
957.     assert mathml(A, printer='presentation', mat_symbol_style="bold" )== '<mi mathvariant="bold">A</mi>'
958.     assert mathml(A, mat_symbol_style="bold" )== '<ci>A</ci>' # No effect in content printer
959. 
960. 
961. def test_print_random_symbol():
962.     R = RandomSymbol(Symbol('R'))
963.     assert mpp.doprint(R) == '<mi>R</mi>'
964.     assert mp.doprint(R) == '<ci>R</ci>'

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-05 18:30:04,002 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning="1. The user is looking for 5 existing test cases related to a bug in MathML symbol printing.\n2. The bug involves incorrect rendering of symbols with names ending in a number (e.g., 'x2') when using the presentation MathML printer.\n3. The provided context is the complete test file `sympy/printing/tests/test_mathml.py`.\n4. This file contains a comprehensive suite of tests for MathML printing, including the specific functionality at issue: symbol name parsing and rendering.\n5. Functions like `test_presentation_symbol`, `test_content_symbol`, and `test_presentation_mathml_greek` directly test how symbols with various name formats (including subscripts and superscripts which are denoted by numbers in names) are handled by the MathML printers.\n6. Therefore, the context is sufficient to identify and extract the 5 most relevant test cases to the user's query. No further information is needed." refined_query=''
2025-10-05 18:30:04,003 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='sympy/printing/tests/test_mathml.py', content='1. from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \\\n2.     tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \\\n3.     pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \\\n4.     MatrixSymbol\n5. from sympy.stats.rv import RandomSymbol\n6. from sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \\\n7.     MathMLPrinter\n8. \n9. from sympy.utilities.pytest import raises\n10. \n11. x = Symbol(\'x\')\n12. y = Symbol(\'y\')\n13. mp = MathMLContentPrinter()\n14. mpp = MathMLPresentationPrinter()\n15. \n16. def test_mathml_printer():\n17.     m = MathMLPrinter()\n18.     assert m.doprint(1+x) == mp.doprint(1+x)\n19. \n20. \n21. def test_content_printmethod():\n22.     assert mp.doprint(1 + x) == \'<apply><plus/><ci>x</ci><cn>1</cn></apply>\'\n23. \n24. \n25. def test_content_mathml_core():\n26.     mml_1 = mp._print(1 + x)\n27.     assert mml_1.nodeName == \'apply\'\n28.     nodes = mml_1.childNodes\n29.     assert len(nodes) == 3\n30.     assert nodes[0].nodeName == \'plus\'\n31.     assert nodes[0].hasChildNodes() is False\n32.     assert nodes[0].nodeValue is None\n33.     assert nodes[1].nodeName in [\'cn\', \'ci\']\n34.     if nodes[1].nodeName == \'cn\':\n35.         assert nodes[1].childNodes[0].nodeValue == \'1\'\n36.         assert nodes[2].childNodes[0].nodeValue == \'x\'\n37.     else:\n38.         assert nodes[1].childNodes[0].nodeValue == \'x\'\n39.         assert nodes[2].childNodes[0].nodeValue == \'1\'\n40. \n41.     mml_2 = mp._print(x**2)\n42.     assert mml_2.nodeName == \'apply\'\n43.     nodes = mml_2.childNodes\n44.     assert nodes[1].childNodes[0].nodeValue == \'x\'\n45.     assert nodes[2].childNodes[0].nodeValue == \'2\'\n46. \n47.     mml_3 = mp._print(2*x)\n48.     assert mml_3.nodeName == \'apply\'\n49.     nodes = mml_3.childNodes\n50.     assert nodes[0].nodeName == \'times\'\n51.     assert nodes[1].childNodes[0].nodeValue == \'2\'\n52.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n53. \n54.     mml = mp._print(Float(1.0, 2)*x)\n55.     assert mml.nodeName == \'apply\'\n56.     nodes = mml.childNodes\n57.     assert nodes[0].nodeName == \'times\'\n58.     assert nodes[1].childNodes[0].nodeValue == \'1.0\'\n59.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n60. \n61. \n62. def test_content_mathml_functions():\n63.     mml_1 = mp._print(sin(x))\n64.     assert mml_1.nodeName == \'apply\'\n65.     assert mml_1.childNodes[0].nodeName == \'sin\'\n66.     assert mml_1.childNodes[1].nodeName == \'ci\'\n67. \n68.     mml_2 = mp._print(diff(sin(x), x, evaluate=False))\n69.     assert mml_2.nodeName == \'apply\'\n70.     assert mml_2.childNodes[0].nodeName == \'diff\'\n71.     assert mml_2.childNodes[1].nodeName == \'bvar\'\n72.     assert mml_2.childNodes[1].childNodes[\n73.         0].nodeName == \'ci\'  # below bvar there\'s <ci>x/ci>\n74. \n75.     mml_3 = mp._print(diff(cos(x*y), x, evaluate=False))\n76.     assert mml_3.nodeName == \'apply\'\n77.     assert mml_3.childNodes[0].nodeName == \'partialdiff\'\n78.     assert mml_3.childNodes[1].nodeName == \'bvar\'\n79.     assert mml_3.childNodes[1].childNodes[\n80.         0].nodeName == \'ci\'  # below bvar there\'s <ci>x/ci>\n81. \n82. \n83. def test_content_mathml_limits():\n84.     # XXX No unevaluated limits\n85.     lim_fun = sin(x)/x\n86.     mml_1 = mp._print(Limit(lim_fun, x, 0))\n87.     assert mml_1.childNodes[0].nodeName == \'limit\'\n88.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n89.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n90.     assert mml_1.childNodes[3].toxml() == mp._print(lim_fun).toxml()\n91. \n92. \n93. def test_content_mathml_integrals():\n94.     integrand = x\n95.     mml_1 = mp._print(Integral(integrand, (x, 0, 1)))\n96.     assert mml_1.childNodes[0].nodeName == \'int\'\n97.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n98.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n99.     assert mml_1.childNodes[3].nodeName == \'uplimit\'\n100.     assert mml_1.childNodes[4].toxml() == mp._print(integrand).toxml()\n101. \n102. def test_content_mathml_matrices():\n103.     A = Matrix([1, 2, 3])\n104.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])\n105.     mll_1 = mp._print(A)\n106.     assert mll_1.childNodes[0].nodeName == \'matrixrow\'\n107.     assert mll_1.childNodes[0].childNodes[0].nodeName == \'cn\'\n108.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'1\'\n109.     assert mll_1.childNodes[1].nodeName == \'matrixrow\'\n110.     assert mll_1.childNodes[1].childNodes[0].nodeName == \'cn\'\n111.     assert mll_1.childNodes[1].childNodes[0].childNodes[0].nodeValue == \'2\'\n112.     assert mll_1.childNodes[2].nodeName == \'matrixrow\'\n113.     assert mll_1.childNodes[2].childNodes[0].nodeName == \'cn\'\n114.     assert mll_1.childNodes[2].childNodes[0].childNodes[0].nodeValue == \'3\'\n115.     mll_2 = mp._print(B)\n116.     assert mll_2.childNodes[0].nodeName == \'matrixrow\'\n117.     assert mll_2.childNodes[0].childNodes[0].nodeName == \'cn\'\n118.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'0\'\n119.     assert mll_2.childNodes[0].childNodes[1].nodeName == \'cn\'\n120.     assert mll_2.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'5\'\n121.     assert mll_2.childNodes[0].childNodes[2].nodeName == \'cn\'\n122.     assert mll_2.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'4\'\n123.     assert mll_2.childNodes[1].nodeName == \'matrixrow\'\n124.     assert mll_2.childNodes[1].childNodes[0].nodeName == \'cn\'\n125.     assert mll_2.childNodes[1].childNodes[0].childNodes[0].nodeValue == \'2\'\n126.     assert mll_2.childNodes[1].childNodes[1].nodeName == \'cn\'\n127.     assert mll_2.childNodes[1].childNodes[1].childNodes[0].nodeValue == \'3\'\n128.     assert mll_2.childNodes[1].childNodes[2].nodeName == \'cn\'\n129.     assert mll_2.childNodes[1].childNodes[2].childNodes[0].nodeValue == \'1\'\n130.     assert mll_2.childNodes[2].nodeName == \'matrixrow\'\n131.     assert mll_2.childNodes[2].childNodes[0].nodeName == \'cn\'\n132.     assert mll_2.childNodes[2].childNodes[0].childNodes[0].nodeValue == \'9\'\n133.     assert mll_2.childNodes[2].childNodes[1].nodeName == \'cn\'\n134.     assert mll_2.childNodes[2].childNodes[1].childNodes[0].nodeValue == \'7\'\n135.     assert mll_2.childNodes[2].childNodes[2].nodeName == \'cn\'\n136.     assert mll_2.childNodes[2].childNodes[2].childNodes[0].nodeValue == \'9\'\n137. \n138. def test_content_mathml_sums():\n139.     summand = x\n140.     mml_1 = mp._print(Sum(summand, (x, 1, 10)))\n141.     assert mml_1.childNodes[0].nodeName == \'sum\'\n142.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n143.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n144.     assert mml_1.childNodes[3].nodeName == \'uplimit\'\n145.     assert mml_1.childNodes[4].toxml() == mp._print(summand).toxml()\n146. \n147. \n148. def test_content_mathml_tuples():\n149.     mml_1 = mp._print([2])\n150.     assert mml_1.nodeName == \'list\'\n151.     assert mml_1.childNodes[0].nodeName == \'cn\'\n152.     assert len(mml_1.childNodes) == 1\n153. \n154.     mml_2 = mp._print([2, Integer(1)])\n155.     assert mml_2.nodeName == \'list\'\n156.     assert mml_2.childNodes[0].nodeName == \'cn\'\n157.     assert mml_2.childNodes[1].nodeName == \'cn\'\n158.     assert len(mml_2.childNodes) == 2\n159. \n160. \n161. def test_content_mathml_add():\n162.     mml = mp._print(x**5 - x**4 + x)\n163.     assert mml.childNodes[0].nodeName == \'plus\'\n164.     assert mml.childNodes[1].childNodes[0].nodeName == \'minus\'\n165.     assert mml.childNodes[1].childNodes[1].nodeName == \'apply\'\n166. \n167. \n168. def test_content_mathml_Rational():\n169.     mml_1 = mp._print(Rational(1, 1))\n170.     """should just return a number"""\n171.     assert mml_1.nodeName == \'cn\'\n172. \n173.     mml_2 = mp._print(Rational(2, 5))\n174.     assert mml_2.childNodes[0].nodeName == \'divide\'\n175. \n176. \n177. def test_content_mathml_constants():\n178.     mml = mp._print(I)\n179.     assert mml.nodeName == \'imaginaryi\'\n180. \n181.     mml = mp._print(E)\n182.     assert mml.nodeName == \'exponentiale\'\n183. \n184.     mml = mp._print(oo)\n185.     assert mml.nodeName == \'infinity\'\n186. \n187.     mml = mp._print(pi)\n188.     assert mml.nodeName == \'pi\'\n189. \n190.     assert mathml(GoldenRatio) == \'<cn>&#966;</cn>\'\n191. \n192.     mml = mathml(EulerGamma)\n193.     assert mml == \'<eulergamma/>\'\n194. \n195. \n196. def test_content_mathml_trig():\n197.     mml = mp._print(sin(x))\n198.     assert mml.childNodes[0].nodeName == \'sin\'\n199. \n200.     mml = mp._print(cos(x))\n201.     assert mml.childNodes[0].nodeName == \'cos\'\n202. \n203.     mml = mp._print(tan(x))\n204.     assert mml.childNodes[0].nodeName == \'tan\'\n205. \n206.     mml = mp._print(asin(x))\n207.     assert mml.childNodes[0].nodeName == \'arcsin\'\n208. \n209.     mml = mp._print(acos(x))\n210.     assert mml.childNodes[0].nodeName == \'arccos\'\n211. \n212.     mml = mp._print(atan(x))\n213.     assert mml.childNodes[0].nodeName == \'arctan\'\n214. \n215.     mml = mp._print(sinh(x))\n216.     assert mml.childNodes[0].nodeName == \'sinh\'\n217. \n218.     mml = mp._print(cosh(x))\n219.     assert mml.childNodes[0].nodeName == \'cosh\'\n220. \n221.     mml = mp._print(tanh(x))\n222.     assert mml.childNodes[0].nodeName == \'tanh\'\n223. \n224.     mml = mp._print(asinh(x))\n225.     assert mml.childNodes[0].nodeName == \'arcsinh\'\n226. \n227.     mml = mp._print(atanh(x))\n228.     assert mml.childNodes[0].nodeName == \'arctanh\'\n229. \n230.     mml = mp._print(acosh(x))\n231.     assert mml.childNodes[0].nodeName == \'arccosh\'\n232. \n233. \n234. def test_content_mathml_relational():\n235.     mml_1 = mp._print(Eq(x, 1))\n236.     assert mml_1.nodeName == \'apply\'\n237.     assert mml_1.childNodes[0].nodeName == \'eq\'\n238.     assert mml_1.childNodes[1].nodeName == \'ci\'\n239.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'x\'\n240.     assert mml_1.childNodes[2].nodeName == \'cn\'\n241.     assert mml_1.childNodes[2].childNodes[0].nodeValue == \'1\'\n242. \n243.     mml_2 = mp._print(Ne(1, x))\n244.     assert mml_2.nodeName == \'apply\'\n245.     assert mml_2.childNodes[0].nodeName == \'neq\'\n246.     assert mml_2.childNodes[1].nodeName == \'cn\'\n247.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'1\'\n248.     assert mml_2.childNodes[2].nodeName == \'ci\'\n249.     assert mml_2.childNodes[2].childNodes[0].nodeValue == \'x\'\n250. \n251.     mml_3 = mp._print(Ge(1, x))\n252.     assert mml_3.nodeName == \'apply\'\n253.     assert mml_3.childNodes[0].nodeName == \'geq\'\n254.     assert mml_3.childNodes[1].nodeName == \'cn\'\n255.     assert mml_3.childNodes[1].childNodes[0].nodeValue == \'1\'\n256.     assert mml_3.childNodes[2].nodeName == \'ci\'\n257.     assert mml_3.childNodes[2].childNodes[0].nodeValue == \'x\'\n258. \n259.     mml_4 = mp._print(Lt(1, x))\n260.     assert mml_4.nodeName == \'apply\'\n261.     assert mml_4.childNodes[0].nodeName == \'lt\'\n262.     assert mml_4.childNodes[1].nodeName == \'cn\'\n263.     assert mml_4.childNodes[1].childNodes[0].nodeValue == \'1\'\n264.     assert mml_4.childNodes[2].nodeName == \'ci\'\n265.     assert mml_4.childNodes[2].childNodes[0].nodeValue == \'x\'\n266. \n267. \n268. def test_content_symbol():\n269.     mml = mp._print(Symbol("x"))\n270.     assert mml.nodeName == \'ci\'\n271.     assert mml.childNodes[0].nodeValue == \'x\'\n272.     del mml\n273. \n274.     mml = mp._print(Symbol("x^2"))\n275.     assert mml.nodeName == \'ci\'\n276.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n277.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n279.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n281.     del mml\n282. \n283.     mml = mp._print(Symbol("x__2"))\n284.     assert mml.nodeName == \'ci\'\n285.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n286.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n288.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n290.     del mml\n291. \n292.     mml = mp._print(Symbol("x_2"))\n293.     assert mml.nodeName == \'ci\'\n294.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n295.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n297.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n299.     del mml\n300. \n301.     mml = mp._print(Symbol("x^3_2"))\n302.     assert mml.nodeName == \'ci\'\n303.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n304.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n306.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n308.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n310.     del mml\n311. \n312.     mml = mp._print(Symbol("x__3_2"))\n313.     assert mml.nodeName == \'ci\'\n314.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n315.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n317.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n319.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n321.     del mml\n322. \n323.     mml = mp._print(Symbol("x_2_a"))\n324.     assert mml.nodeName == \'ci\'\n325.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n326.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n328.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n331.         0].nodeValue == \'2\'\n332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n334.         0].nodeValue == \' \'\n335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n337.         0].nodeValue == \'a\'\n338.     del mml\n339. \n340.     mml = mp._print(Symbol("x^2^a"))\n341.     assert mml.nodeName == \'ci\'\n342.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n343.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n345.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n348.         0].nodeValue == \'2\'\n349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n351.         0].nodeValue == \' \'\n352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n354.         0].nodeValue == \'a\'\n355.     del mml\n356. \n357.     mml = mp._print(Symbol("x__2__a"))\n358.     assert mml.nodeName == \'ci\'\n359.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n360.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n362.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n365.         0].nodeValue == \'2\'\n366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n368.         0].nodeValue == \' \'\n369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n371.         0].nodeValue == \'a\'\n372.     del mml\n373. \n374. \n375. def test_content_mathml_greek():\n376.     mml = mp._print(Symbol(\'alpha\'))\n377.     assert mml.nodeName == \'ci\'\n378.     assert mml.childNodes[0].nodeValue == u\'\\N{GREEK SMALL LETTER ALPHA}\'\n379. \n380.     assert mp.doprint(Symbol(\'alpha\')) == \'<ci>&#945;</ci>\'\n381.     assert mp.doprint(Symbol(\'beta\')) == \'<ci>&#946;</ci>\'\n382.     assert mp.doprint(Symbol(\'gamma\')) == \'<ci>&#947;</ci>\'\n383.     assert mp.doprint(Symbol(\'delta\')) == \'<ci>&#948;</ci>\'\n384.     assert mp.doprint(Symbol(\'epsilon\')) == \'<ci>&#949;</ci>\'\n385.     assert mp.doprint(Symbol(\'zeta\')) == \'<ci>&#950;</ci>\'\n386.     assert mp.doprint(Symbol(\'eta\')) == \'<ci>&#951;</ci>\'\n387.     assert mp.doprint(Symbol(\'theta\')) == \'<ci>&#952;</ci>\'\n388.     assert mp.doprint(Symbol(\'iota\')) == \'<ci>&#953;</ci>\'\n389.     assert mp.doprint(Symbol(\'kappa\')) == \'<ci>&#954;</ci>\'\n390.     assert mp.doprint(Symbol(\'lambda\')) == \'<ci>&#955;</ci>\'\n391.     assert mp.doprint(Symbol(\'mu\')) == \'<ci>&#956;</ci>\'\n392.     assert mp.doprint(Symbol(\'nu\')) == \'<ci>&#957;</ci>\'\n393.     assert mp.doprint(Symbol(\'xi\')) == \'<ci>&#958;</ci>\'\n394.     assert mp.doprint(Symbol(\'omicron\')) == \'<ci>&#959;</ci>\'\n395.     assert mp.doprint(Symbol(\'pi\')) == \'<ci>&#960;</ci>\'\n396.     assert mp.doprint(Symbol(\'rho\')) == \'<ci>&#961;</ci>\'\n397.     assert mp.doprint(Symbol(\'varsigma\')) == \'<ci>&#962;</ci>\', mp.doprint(Symbol(\'varsigma\'))\n398.     assert mp.doprint(Symbol(\'sigma\')) == \'<ci>&#963;</ci>\'\n399.     assert mp.doprint(Symbol(\'tau\')) == \'<ci>&#964;</ci>\'\n400.     assert mp.doprint(Symbol(\'upsilon\')) == \'<ci>&#965;</ci>\'\n401.     assert mp.doprint(Symbol(\'phi\')) == \'<ci>&#966;</ci>\'\n402.     assert mp.doprint(Symbol(\'chi\')) == \'<ci>&#967;</ci>\'\n403.     assert mp.doprint(Symbol(\'psi\')) == \'<ci>&#968;</ci>\'\n404.     assert mp.doprint(Symbol(\'omega\')) == \'<ci>&#969;</ci>\'\n405. \n406.     assert mp.doprint(Symbol(\'Alpha\')) == \'<ci>&#913;</ci>\'\n407.     assert mp.doprint(Symbol(\'Beta\')) == \'<ci>&#914;</ci>\'\n408.     assert mp.doprint(Symbol(\'Gamma\')) == \'<ci>&#915;</ci>\'\n409.     assert mp.doprint(Symbol(\'Delta\')) == \'<ci>&#916;</ci>\'\n410.     assert mp.doprint(Symbol(\'Epsilon\')) == \'<ci>&#917;</ci>\'\n411.     assert mp.doprint(Symbol(\'Zeta\')) == \'<ci>&#918;</ci>\'\n412.     assert mp.doprint(Symbol(\'Eta\')) == \'<ci>&#919;</ci>\'\n413.     assert mp.doprint(Symbol(\'Theta\')) == \'<ci>&#920;</ci>\'\n414.     assert mp.doprint(Symbol(\'Iota\')) == \'<ci>&#921;</ci>\'\n415.     assert mp.doprint(Symbol(\'Kappa\')) == \'<ci>&#922;</ci>\'\n416.     assert mp.doprint(Symbol(\'Lambda\')) == \'<ci>&#923;</ci>\'\n417.     assert mp.doprint(Symbol(\'Mu\')) == \'<ci>&#924;</ci>\'\n418.     assert mp.doprint(Symbol(\'Nu\')) == \'<ci>&#925;</ci>\'\n419.     assert mp.doprint(Symbol(\'Xi\')) == \'<ci>&#926;</ci>\'\n420.     assert mp.doprint(Symbol(\'Omicron\')) == \'<ci>&#927;</ci>\'\n421.     assert mp.doprint(Symbol(\'Pi\')) == \'<ci>&#928;</ci>\'\n422.     assert mp.doprint(Symbol(\'Rho\')) == \'<ci>&#929;</ci>\'\n423.     assert mp.doprint(Symbol(\'Sigma\')) == \'<ci>&#931;</ci>\'\n424.     assert mp.doprint(Symbol(\'Tau\')) == \'<ci>&#932;</ci>\'\n425.     assert mp.doprint(Symbol(\'Upsilon\')) == \'<ci>&#933;</ci>\'\n426.     assert mp.doprint(Symbol(\'Phi\')) == \'<ci>&#934;</ci>\'\n427.     assert mp.doprint(Symbol(\'Chi\')) == \'<ci>&#935;</ci>\'\n428.     assert mp.doprint(Symbol(\'Psi\')) == \'<ci>&#936;</ci>\'\n429.     assert mp.doprint(Symbol(\'Omega\')) == \'<ci>&#937;</ci>\'\n430. \n431. \n432. def test_content_mathml_order():\n433.     expr = x**3 + x**2*y + 3*x*y**3 + y**4\n434. \n435.     mp = MathMLContentPrinter({\'order\': \'lex\'})\n436.     mml = mp._print(expr)\n437. \n438.     assert mml.childNodes[1].childNodes[0].nodeName == \'power\'\n439.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == \'x\'\n440.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == \'3\'\n441. \n442.     assert mml.childNodes[4].childNodes[0].nodeName == \'power\'\n443.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == \'y\'\n444.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == \'4\'\n445. \n446.     mp = MathMLContentPrinter({\'order\': \'rev-lex\'})\n447.     mml = mp._print(expr)\n448. \n449.     assert mml.childNodes[1].childNodes[0].nodeName == \'power\'\n450.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == \'y\'\n451.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == \'4\'\n452. \n453.     assert mml.childNodes[4].childNodes[0].nodeName == \'power\'\n454.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == \'x\'\n455.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == \'3\'\n456. \n457. \n458. def test_content_settings():\n459.     raises(TypeError, lambda: mathml(Symbol("x"), method="garbage"))\n460. \n461. \n462. def test_presentation_printmethod():\n463.     assert mpp.doprint(1 + x) == \'<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>\'\n464.     assert mpp.doprint(x**2) == \'<msup><mi>x</mi><mn>2</mn></msup>\'\n465.     assert mpp.doprint(2*x) == \'<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>\'\n466. \n467. \n468. def test_presentation_mathml_core():\n469.     mml_1 = mpp._print(1 + x)\n470.     assert mml_1.nodeName == \'mrow\'\n471.     nodes = mml_1.childNodes\n472.     assert len(nodes) == 3\n473.     assert nodes[0].nodeName in [\'mi\', \'mn\']\n474.     assert nodes[1].nodeName == \'mo\'\n475.     if nodes[0].nodeName == \'mn\':\n476.         assert nodes[0].childNodes[0].nodeValue == \'1\'\n477.         assert nodes[2].childNodes[0].nodeValue == \'x\'\n478.     else:\n479.         assert nodes[0].childNodes[0].nodeValue == \'x\'\n480.         assert nodes[2].childNodes[0].nodeValue == \'1\'\n481. \n482.     mml_2 = mpp._print(x**2)\n483.     assert mml_2.nodeName == \'msup\'\n484.     nodes = mml_2.childNodes\n485.     assert nodes[0].childNodes[0].nodeValue == \'x\'\n486.     assert nodes[1].childNodes[0].nodeValue == \'2\'\n487. \n488.     mml_3 = mpp._print(2*x)\n489.     assert mml_3.nodeName == \'mrow\'\n490.     nodes = mml_3.childNodes\n491.     assert nodes[0].childNodes[0].nodeValue == \'2\'\n492.     assert nodes[1].childNodes[0].nodeValue == \'&InvisibleTimes;\'\n493.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n494. \n495.     mml = mpp._print(Float(1.0, 2)*x)\n496.     assert mml.nodeName == \'mrow\'\n497.     nodes = mml.childNodes\n498.     assert nodes[0].childNodes[0].nodeValue == \'1.0\'\n499.     assert nodes[1].childNodes[0].nodeValue == \'&InvisibleTimes;\'\n500.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n501. \n502. \n503. def test_presentation_mathml_functions():\n504.     mml_1 = mpp._print(sin(x))\n505.     assert mml_1.childNodes[0].childNodes[0\n506.         ].nodeValue == \'sin\'\n507.     assert mml_1.childNodes[1].childNodes[0\n508.         ].childNodes[0].nodeValue == \'x\'\n509. \n510.     mml_2 = mpp._print(diff(sin(x), x, evaluate=False))\n511.     assert mml_2.nodeName == \'mfrac\'\n512.     assert mml_2.childNodes[0].childNodes[0\n513.         ].childNodes[0].nodeValue == \'&dd;\'\n514.     assert mml_2.childNodes[0].childNodes[1\n515.         ].nodeName == \'mfenced\'\n516.     assert mml_2.childNodes[1].childNodes[\n517.         0].childNodes[0].nodeValue == \'&dd;\'\n518. \n519.     mml_3 = mpp._print(diff(cos(x*y), x, evaluate=False))\n520.     assert mml_3.nodeName == \'mfrac\'\n521.     assert mml_3.childNodes[0].childNodes[0\n522.         ].childNodes[0].nodeValue == \'&#x2202;\'\n523.     assert mml_2.childNodes[0].childNodes[1\n524.         ].nodeName == \'mfenced\'\n525.     assert mml_3.childNodes[1].childNodes[\n526.         0].childNodes[0].nodeValue == \'&#x2202;\'\n527. \n528. \n529. def test_presentation_mathml_limits():\n530.     lim_fun = sin(x)/x\n531.     mml_1 = mpp._print(Limit(lim_fun, x, 0))\n532.     assert mml_1.childNodes[0].nodeName == \'munder\'\n533.     assert mml_1.childNodes[0].childNodes[0\n534.         ].childNodes[0].nodeValue == \'lim\'\n535.     assert mml_1.childNodes[0].childNodes[1\n536.         ].childNodes[0].childNodes[0\n537.         ].nodeValue == \'x\'\n538.     assert mml_1.childNodes[0].childNodes[1\n539.         ].childNodes[1].childNodes[0\n540.         ].nodeValue == \'&#x2192;\'\n541.     assert mml_1.childNodes[0].childNodes[1\n542.         ].childNodes[2].childNodes[0\n543.         ].nodeValue == \'0\'\n544. \n545. \n546. def test_presentation_mathml_integrals():\n547.     integrand = x\n548.     mml_1 = mpp._print(Integral(integrand, (x, 0, 1)))\n549.     assert mml_1.childNodes[0].nodeName == \'msubsup\'\n550.     assert len(mml_1.childNodes[0].childNodes) == 3\n551.     assert mml_1.childNodes[0].childNodes[0\n552.         ].childNodes[0].nodeValue == \'&int;\'\n553.     assert mml_1.childNodes[0].childNodes[1\n554.         ].childNodes[0].nodeValue == \'0\'\n555.     assert mml_1.childNodes[0].childNodes[2\n556.         ].childNodes[0].nodeValue == \'1\'\n557. \n558. \n559. def test_presentation_mathml_matrices():\n560.     A = Matrix([1, 2, 3])\n561.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])\n562.     mll_1 = mpp._print(A)\n563.     assert mll_1.childNodes[0].nodeName == \'mtable\'\n564.     assert mll_1.childNodes[0].childNodes[0].nodeName == \'mtr\'\n565.     assert len(mll_1.childNodes[0].childNodes) == 3\n566.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeName == \'mtd\'\n567.     assert len(mll_1.childNodes[0].childNodes[0].childNodes) == 1\n568.     assert mll_1.childNodes[0].childNodes[0].childNodes[0\n569.         ].childNodes[0].childNodes[0].nodeValue == \'1\'\n570.     assert mll_1.childNodes[0].childNodes[1].childNodes[0\n571.         ].childNodes[0].childNodes[0].nodeValue == \'2\'\n572.     assert mll_1.childNodes[0].childNodes[2].childNodes[0\n573.         ].childNodes[0].childNodes[0].nodeValue == \'3\'\n574.     mll_2 = mpp._print(B)\n575.     assert mll_2.childNodes[0].nodeName == \'mtable\'\n576.     assert mll_2.childNodes[0].childNodes[0].nodeName == \'mtr\'\n577.     assert len(mll_2.childNodes[0].childNodes) == 3\n578.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeName == \'mtd\'\n579.     assert len(mll_2.childNodes[0].childNodes[0].childNodes) == 3\n580.     assert mll_2.childNodes[0].childNodes[0].childNodes[0\n581.         ].childNodes[0].childNodes[0].nodeValue == \'0\'\n582.     assert mll_2.childNodes[0].childNodes[0].childNodes[1\n583.         ].childNodes[0].childNodes[0].nodeValue == \'5\'\n584.     assert mll_2.childNodes[0].childNodes[0].childNodes[2\n585.         ].childNodes[0].childNodes[0].nodeValue == \'4\'\n586.     assert mll_2.childNodes[0].childNodes[1].childNodes[0\n587.         ].childNodes[0].childNodes[0].nodeValue == \'2\'\n588.     assert mll_2.childNodes[0].childNodes[1].childNodes[1\n589.         ].childNodes[0].childNodes[0].nodeValue == \'3\'\n590.     assert mll_2.childNodes[0].childNodes[1].childNodes[2\n591.         ].childNodes[0].childNodes[0].nodeValue == \'1\'\n592.     assert mll_2.childNodes[0].childNodes[2].childNodes[0\n593.         ].childNodes[0].childNodes[0].nodeValue == \'9\'\n594.     assert mll_2.childNodes[0].childNodes[2].childNodes[1\n595.         ].childNodes[0].childNodes[0].nodeValue == \'7\'\n596.     assert mll_2.childNodes[0].childNodes[2].childNodes[2\n597.         ].childNodes[0].childNodes[0].nodeValue == \'9\'\n598. \n599. \n600. def test_presentation_mathml_sums():\n601.     summand = x\n602.     mml_1 = mpp._print(Sum(summand, (x, 1, 10)))\n603.     assert mml_1.childNodes[0].nodeName == \'munderover\'\n604.     assert len(mml_1.childNodes[0].childNodes) == 3\n605.     assert mml_1.childNodes[0].childNodes[0].childNodes[0\n606.         ].nodeValue == \'&#x2211;\'\n607.     assert len(mml_1.childNodes[0].childNodes[1].childNodes) == 3\n608.     assert mml_1.childNodes[0].childNodes[2].childNodes[0\n609.         ].nodeValue == \'10\'\n610.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'x\'\n611. \n612. \n613. def test_presentation_mathml_add():\n614.     mml = mpp._print(x**5 - x**4 + x)\n615.     assert len(mml.childNodes) == 5\n616.     assert mml.childNodes[0].childNodes[0].childNodes[0\n617.         ].nodeValue == \'x\'\n618.     assert mml.childNodes[0].childNodes[1].childNodes[0\n619.         ].nodeValue == \'5\'\n620.     assert mml.childNodes[1].childNodes[0].nodeValue == \'-\'\n621.     assert mml.childNodes[2].childNodes[0].childNodes[0\n622.         ].nodeValue == \'x\'\n623.     assert mml.childNodes[2].childNodes[1].childNodes[0\n624.         ].nodeValue == \'4\'\n625.     assert mml.childNodes[3].childNodes[0].nodeValue == \'+\'\n626.     assert mml.childNodes[4].childNodes[0].nodeValue == \'x\'\n627. \n628. \n629. def test_presentation_mathml_Rational():\n630.     mml_1 = mpp._print(Rational(1, 1))\n631.     assert mml_1.nodeName == \'mn\'\n632. \n633.     mml_2 = mpp._print(Rational(2, 5))\n634.     assert mml_2.nodeName == \'mfrac\'\n635.     assert mml_2.childNodes[0].childNodes[0].nodeValue == \'2\'\n636.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'5\'\n637. \n638. \n639. def test_presentation_mathml_constants():\n640.     mml = mpp._print(I)\n641.     assert mml.childNodes[0].nodeValue == \'&ImaginaryI;\'\n642. \n643.     mml = mpp._print(E)\n644.     assert mml.childNodes[0].nodeValue == \'&ExponentialE;\'\n645. \n646.     mml = mpp._print(oo)\n647.     assert mml.childNodes[0].nodeValue == \'&#x221E;\'\n648. \n649.     mml = mpp._print(pi)\n650.     assert mml.childNodes[0].nodeValue == \'&pi;\'\n651. \n652.     assert mathml(GoldenRatio, printer=\'presentation\') == \'<mi>&#966;</mi>\'\n653. \n654. \n655. def test_presentation_mathml_trig():\n656.     mml = mpp._print(sin(x))\n657.     assert mml.childNodes[0].childNodes[0].nodeValue == \'sin\'\n658. \n659.     mml = mpp._print(cos(x))\n660.     assert mml.childNodes[0].childNodes[0].nodeValue == \'cos\'\n661. \n662.     mml = mpp._print(tan(x))\n663.     assert mml.childNodes[0].childNodes[0].nodeValue == \'tan\'\n664. \n665.     mml = mpp._print(asin(x))\n666.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arcsin\'\n667. \n668.     mml = mpp._print(acos(x))\n669.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arccos\'\n670. \n671.     mml = mpp._print(atan(x))\n672.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arctan\'\n673. \n674.     mml = mpp._print(sinh(x))\n675.     assert mml.childNodes[0].childNodes[0].nodeValue == \'sinh\'\n676. \n677.     mml = mpp._print(cosh(x))\n678.     assert mml.childNodes[0].childNodes[0].nodeValue == \'cosh\'\n679. \n680.     mml = mpp._print(tanh(x))\n681.     assert mml.childNodes[0].childNodes[0].nodeValue == \'tanh\'\n682. \n683.     mml = mpp._print(asinh(x))\n684.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arcsinh\'\n685. \n686.     mml = mpp._print(atanh(x))\n687.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arctanh\'\n688. \n689.     mml = mpp._print(acosh(x))\n690.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arccosh\'\n691. \n692. \n693. def test_presentation_mathml_relational():\n694.     mml_1 = mpp._print(Eq(x, 1))\n695.     assert len(mml_1.childNodes) == 3\n696.     assert mml_1.childNodes[0].nodeName == \'mi\'\n697.     assert mml_1.childNodes[0].childNodes[0].nodeValue == \'x\'\n698.     assert mml_1.childNodes[1].nodeName == \'mo\'\n699.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'=\'\n700.     assert mml_1.childNodes[2].nodeName == \'mn\'\n701.     assert mml_1.childNodes[2].childNodes[0].nodeValue == \'1\'\n702. \n703.     mml_2 = mpp._print(Ne(1, x))\n704.     assert len(mml_2.childNodes) == 3\n705.     assert mml_2.childNodes[0].nodeName == \'mn\'\n706.     assert mml_2.childNodes[0].childNodes[0].nodeValue == \'1\'\n707.     assert mml_2.childNodes[1].nodeName == \'mo\'\n708.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'&#x2260;\'\n709.     assert mml_2.childNodes[2].nodeName == \'mi\'\n710.     assert mml_2.childNodes[2].childNodes[0].nodeValue == \'x\'\n711. \n712.     mml_3 = mpp._print(Ge(1, x))\n713.     assert len(mml_3.childNodes) == 3\n714.     assert mml_3.childNodes[0].nodeName == \'mn\'\n715.     assert mml_3.childNodes[0].childNodes[0].nodeValue == \'1\'\n716.     assert mml_3.childNodes[1].nodeName == \'mo\'\n717.     assert mml_3.childNodes[1].childNodes[0].nodeValue == \'&#x2265;\'\n718.     assert mml_3.childNodes[2].nodeName == \'mi\'\n719.     assert mml_3.childNodes[2].childNodes[0].nodeValue == \'x\'\n720. \n721.     mml_4 = mpp._print(Lt(1, x))\n722.     assert len(mml_4.childNodes) == 3\n723.     assert mml_4.childNodes[0].nodeName == \'mn\'\n724.     assert mml_4.childNodes[0].childNodes[0].nodeValue == \'1\'\n725.     assert mml_4.childNodes[1].nodeName == \'mo\'\n726.     assert mml_4.childNodes[1].childNodes[0].nodeValue == \'<\'\n727.     assert mml_4.childNodes[2].nodeName == \'mi\'\n728.     assert mml_4.childNodes[2].childNodes[0].nodeValue == \'x\'\n729. \n730. \n731. def test_presentation_symbol():\n732.     mml = mpp._print(Symbol("x"))\n733.     assert mml.nodeName == \'mi\'\n734.     assert mml.childNodes[0].nodeValue == \'x\'\n735.     del mml\n736. \n737.     mml = mpp._print(Symbol("x^2"))\n738.     assert mml.nodeName == \'mi\'\n739.     assert mml.childNodes[0].nodeName == \'msup\'\n740.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n741.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n742.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n743.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n744.     del mml\n745. \n746.     mml = mpp._print(Symbol("x__2"))\n747.     assert mml.nodeName == \'mi\'\n748.     assert mml.childNodes[0].nodeName == \'msup\'\n749.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n750.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n751.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n752.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n753.     del mml\n754. \n755.     mml = mpp._print(Symbol("x_2"))\n756.     assert mml.nodeName == \'mi\'\n757.     assert mml.childNodes[0].nodeName == \'msub\'\n758.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n759.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n760.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n761.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n762.     del mml\n763. \n764.     mml = mpp._print(Symbol("x^3_2"))\n765.     assert mml.nodeName == \'mi\'\n766.     assert mml.childNodes[0].nodeName == \'msubsup\'\n767.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n768.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n769.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n770.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n771.     assert mml.childNodes[0].childNodes[2].nodeName == \'mi\'\n772.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n773.     del mml\n774. \n775.     mml = mpp._print(Symbol("x__3_2"))\n776.     assert mml.nodeName == \'mi\'\n777.     assert mml.childNodes[0].nodeName == \'msubsup\'\n778.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n779.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n780.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n781.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n782.     assert mml.childNodes[0].childNodes[2].nodeName == \'mi\'\n783.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n784.     del mml\n785. \n786.     mml = mpp._print(Symbol("x_2_a"))\n787.     assert mml.nodeName == \'mi\'\n788.     assert mml.childNodes[0].nodeName == \'msub\'\n789.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n790.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n791.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n792.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n793.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n794.         0].nodeValue == \'2\'\n795.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n796.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n797.         0].nodeValue == \' \'\n798.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n799.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n800.         0].nodeValue == \'a\'\n801.     del mml\n802. \n803.     mml = mpp._print(Symbol("x^2^a"))\n804.     assert mml.nodeName == \'mi\'\n805.     assert mml.childNodes[0].nodeName == \'msup\'\n806.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n807.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n808.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n809.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n810.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n811.         0].nodeValue == \'2\'\n812.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n813.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n814.         0].nodeValue == \' \'\n815.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n816.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n817.         0].nodeValue == \'a\'\n818.     del mml\n819. \n820.     mml = mpp._print(Symbol("x__2__a"))\n821.     assert mml.nodeName == \'mi\'\n822.     assert mml.childNodes[0].nodeName == \'msup\'\n823.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n824.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n825.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n826.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n827.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n828.         0].nodeValue == \'2\'\n829.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n830.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n831.         0].nodeValue == \' \'\n832.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n833.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n834.         0].nodeValue == \'a\'\n835.     del mml\n836. \n837. \n838. def test_presentation_mathml_greek():\n839.     mml = mpp._print(Symbol(\'alpha\'))\n840.     assert mml.nodeName == \'mi\'\n841.     assert mml.childNodes[0].nodeValue == u\'\\N{GREEK SMALL LETTER ALPHA}\'\n842. \n843.     assert mpp.doprint(Symbol(\'alpha\')) == \'<mi>&#945;</mi>\'\n844.     assert mpp.doprint(Symbol(\'beta\')) == \'<mi>&#946;</mi>\'\n845.     assert mpp.doprint(Symbol(\'gamma\')) == \'<mi>&#947;</mi>\'\n846.     assert mpp.doprint(Symbol(\'delta\')) == \'<mi>&#948;</mi>\'\n847.     assert mpp.doprint(Symbol(\'epsilon\')) == \'<mi>&#949;</mi>\'\n848.     assert mpp.doprint(Symbol(\'zeta\')) == \'<mi>&#950;</mi>\'\n849.     assert mpp.doprint(Symbol(\'eta\')) == \'<mi>&#951;</mi>\'\n850.     assert mpp.doprint(Symbol(\'theta\')) == \'<mi>&#952;</mi>\'\n851.     assert mpp.doprint(Symbol(\'iota\')) == \'<mi>&#953;</mi>\'\n852.     assert mpp.doprint(Symbol(\'kappa\')) == \'<mi>&#954;</mi>\'\n853.     assert mpp.doprint(Symbol(\'lambda\')) == \'<mi>&#955;</mi>\'\n854.     assert mpp.doprint(Symbol(\'mu\')) == \'<mi>&#956;</mi>\'\n855.     assert mpp.doprint(Symbol(\'nu\')) == \'<mi>&#957;</mi>\'\n856.     assert mpp.doprint(Symbol(\'xi\')) == \'<mi>&#958;</mi>\'\n857.     assert mpp.doprint(Symbol(\'omicron\')) == \'<mi>&#959;</mi>\'\n858.     assert mpp.doprint(Symbol(\'pi\')) == \'<mi>&#960;</mi>\'\n859.     assert mpp.doprint(Symbol(\'rho\')) == \'<mi>&#961;</mi>\'\n860.     assert mpp.doprint(Symbol(\'varsigma\')) == \'<mi>&#962;</mi>\', mp.doprint(Symbol(\'varsigma\'))\n861.     assert mpp.doprint(Symbol(\'sigma\')) == \'<mi>&#963;</mi>\'\n862.     assert mpp.doprint(Symbol(\'tau\')) == \'<mi>&#964;</mi>\'\n863.     assert mpp.doprint(Symbol(\'upsilon\')) == \'<mi>&#965;</mi>\'\n864.     assert mpp.doprint(Symbol(\'phi\')) == \'<mi>&#966;</mi>\'\n865.     assert mpp.doprint(Symbol(\'chi\')) == \'<mi>&#967;</mi>\'\n866.     assert mpp.doprint(Symbol(\'psi\')) == \'<mi>&#968;</mi>\'\n867.     assert mpp.doprint(Symbol(\'omega\')) == \'<mi>&#969;</mi>\'\n868. \n869.     assert mpp.doprint(Symbol(\'Alpha\')) == \'<mi>&#913;</mi>\'\n870.     assert mpp.doprint(Symbol(\'Beta\')) == \'<mi>&#914;</mi>\'\n871.     assert mpp.doprint(Symbol(\'Gamma\')) == \'<mi>&#915;</mi>\'\n872.     assert mpp.doprint(Symbol(\'Delta\')) == \'<mi>&#916;</mi>\'\n873.     assert mpp.doprint(Symbol(\'Epsilon\')) == \'<mi>&#917;</mi>\'\n874.     assert mpp.doprint(Symbol(\'Zeta\')) == \'<mi>&#918;</mi>\'\n875.     assert mpp.doprint(Symbol(\'Eta\')) == \'<mi>&#919;</mi>\'\n876.     assert mpp.doprint(Symbol(\'Theta\')) == \'<mi>&#920;</mi>\'\n877.     assert mpp.doprint(Symbol(\'Iota\')) == \'<mi>&#921;</mi>\'\n878.     assert mpp.doprint(Symbol(\'Kappa\')) == \'<mi>&#922;</mi>\'\n879.     assert mpp.doprint(Symbol(\'Lambda\')) == \'<mi>&#923;</mi>\'\n880.     assert mpp.doprint(Symbol(\'Mu\')) == \'<mi>&#924;</mi>\'\n881.     assert mpp.doprint(Symbol(\'Nu\')) == \'<mi>&#925;</mi>\'\n882.     assert mpp.doprint(Symbol(\'Xi\')) == \'<mi>&#926;</mi>\'\n883.     assert mpp.doprint(Symbol(\'Omicron\')) == \'<mi>&#927;</mi>\'\n884.     assert mpp.doprint(Symbol(\'Pi\')) == \'<mi>&#928;</mi>\'\n885.     assert mpp.doprint(Symbol(\'Rho\')) == \'<mi>&#929;</mi>\'\n886.     assert mpp.doprint(Symbol(\'Sigma\')) == \'<mi>&#931;</mi>\'\n887.     assert mpp.doprint(Symbol(\'Tau\')) == \'<mi>&#932;</mi>\'\n888.     assert mpp.doprint(Symbol(\'Upsilon\')) == \'<mi>&#933;</mi>\'\n889.     assert mpp.doprint(Symbol(\'Phi\')) == \'<mi>&#934;</mi>\'\n890.     assert mpp.doprint(Symbol(\'Chi\')) == \'<mi>&#935;</mi>\'\n891.     assert mpp.doprint(Symbol(\'Psi\')) == \'<mi>&#936;</mi>\'\n892.     assert mpp.doprint(Symbol(\'Omega\')) == \'<mi>&#937;</mi>\'\n893. \n894. \n895. def test_presentation_mathml_order():\n896.     expr = x**3 + x**2*y + 3*x*y**3 + y**4\n897. \n898.     mp = MathMLPresentationPrinter({\'order\': \'lex\'})\n899.     mml = mp._print(expr)\n900.     assert mml.childNodes[0].nodeName == \'msup\'\n901.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n902.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'3\'\n903. \n904.     assert mml.childNodes[6].nodeName == \'msup\'\n905.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == \'y\'\n906.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == \'4\'\n907. \n908.     mp = MathMLPresentationPrinter({\'order\': \'rev-lex\'})\n909.     mml = mp._print(expr)\n910. \n911.     assert mml.childNodes[0].nodeName == \'msup\'\n912.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'y\'\n913.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'4\'\n914. \n915.     assert mml.childNodes[6].nodeName == \'msup\'\n916.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == \'x\'\n917.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == \'3\'\n918. \n919. \n920. def test_presentation_settings():\n921.     raises(TypeError, lambda: mathml(Symbol("x"), printer=\'presentation\',method="garbage"))\n922. \n923. def test_toprettyxml_hooking():\n924.     # test that the patch doesn\'t influence the behavior of the standard library\n925.     import xml.dom.minidom\n926.     doc1 = xml.dom.minidom.parseString(\n927.         "<apply><plus/><ci>x</ci><cn>1</cn></apply>")\n928.     doc2 =  xml.dom.minidom.parseString(\n929.         "<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>")\n930.     prettyxml_old1 = doc1.toprettyxml()\n931.     prettyxml_old2 = doc2.toprettyxml()\n932. \n933.     mp.apply_patch()\n934.     mp.restore_patch()\n935. \n936.     assert prettyxml_old1 == doc1.toprettyxml()\n937.     assert prettyxml_old2 == doc2.toprettyxml()\n938. \n939. \n940. def test_print_basic():\n941.     expr = Basic(1, 2)\n942.     assert mpp.doprint(expr) == \'<mrow><mi>basic</mi><mfenced><mn>1</mn><mn>2</mn></mfenced></mrow>\'\n943.     assert mp.doprint(expr) == \'<basic><cn>1</cn><cn>2</cn></basic>\'\n944. \n945. \n946. def test_root_notation_print():\n947.     assert mathml(x**(S(1)/3), printer=\'presentation\') == \'<mroot><mi>x</mi><mn>3</mn></mroot>\'\n948.     assert mathml(x**(S(1)/3), printer=\'presentation\', root_notation=False) == \'<msup><mi>x</mi><mfrac><mn>1</mn><mn>3</mn></mfrac></msup>\'\n949.     assert mathml(x**(S(1)/3), printer=\'content\') == \'<apply><root/><degree><ci>3</ci></degree><ci>x</ci></apply>\'\n950.     assert mathml(x**(S(1)/3), printer=\'content\', root_notation=False) == \'<apply><power/><ci>x</ci><apply><divide/><cn>1</cn><cn>3</cn></apply></apply>\'\n951. \n952. \n953. def test_print_matrix_symbol():\n954.     A = MatrixSymbol(\'A\', 1, 2)\n955.     assert mpp.doprint(A) == \'<mi>A</mi>\'\n956.     assert mp.doprint(A) == \'<ci>A</ci>\'\n957.     assert mathml(A, printer=\'presentation\', mat_symbol_style="bold" )== \'<mi mathvariant="bold">A</mi>\'\n958.     assert mathml(A, mat_symbol_style="bold" )== \'<ci>A</ci>\' # No effect in content printer\n959. \n960. \n961. def test_print_random_symbol():\n962.     R = RandomSymbol(Symbol(\'R\'))\n963.     assert mpp.doprint(R) == \'<mi>R</mi>\'\n964.     assert mp.doprint(R) == \'<ci>R</ci>\'', start_line_number=1, end_line_number=964)]
2025-10-05 18:30:04,003 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Issue title:\nA symbol ending with a number is made invisible when printing with MathML\n\nIssue description: \nA variable with a number, such as x1, is made invisible when printing in a MathML format.\n`import sympy\nfrom sympy.printing.mathml import mathml\n\nx2, y, z = sympy.symbols(\'x2 y z\')\ny = x2*z+x2**3\nf = open(\'sympy_test.html\', \'w\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(sympy.mathml(y, printer=\'presentation\')+\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.write(\'\\n\')\nf.close()`\n\nViewing the output in Safari 12.0.2:\n<img width="93" alt="screen shot 2018-12-31 at 12 21 00 pm" src="https://user-images.githubusercontent.com/46286768/50567565-48d8c080-0cfb-11e9-84d2-5738f1c2e2ba.png">\n\nIf \'x\' is used instead of \'x2\', it works as expected:\nx, y, z = sympy.symbols(\'x y z\')\ny = x*z+x**3\n<img width="78" alt="screen shot 2018-12-31 at 12 26 24 pm" src="https://user-images.githubusercontent.com/46286768/50567570-542bec00-0cfb-11e9-986d-015e0023a2a1.png">\n\nBTW, I\'m on a MacBook Pro, OS 10.14.2, Sympy 1.3, in Eclipse 2018-19, and Python 3.7.\n\nIssue comments:\n\n\nBug reproducing context:\nFile: sympy/printing/tests/test_mathml.py\nLine number range: 1 - 964\nContent:\n1. from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \\\n2.     tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \\\n3.     pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \\\n4.     MatrixSymbol\n5. from sympy.stats.rv import RandomSymbol\n6. from sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \\\n7.     MathMLPrinter\n8. \n9. from sympy.utilities.pytest import raises\n10. \n11. x = Symbol(\'x\')\n12. y = Symbol(\'y\')\n13. mp = MathMLContentPrinter()\n14. mpp = MathMLPresentationPrinter()\n15. \n16. def test_mathml_printer():\n17.     m = MathMLPrinter()\n18.     assert m.doprint(1+x) == mp.doprint(1+x)\n19. \n20. \n21. def test_content_printmethod():\n22.     assert mp.doprint(1 + x) == \'<apply><plus/><ci>x</ci><cn>1</cn></apply>\'\n23. \n24. \n25. def test_content_mathml_core():\n26.     mml_1 = mp._print(1 + x)\n27.     assert mml_1.nodeName == \'apply\'\n28.     nodes = mml_1.childNodes\n29.     assert len(nodes) == 3\n30.     assert nodes[0].nodeName == \'plus\'\n31.     assert nodes[0].hasChildNodes() is False\n32.     assert nodes[0].nodeValue is None\n33.     assert nodes[1].nodeName in [\'cn\', \'ci\']\n34.     if nodes[1].nodeName == \'cn\':\n35.         assert nodes[1].childNodes[0].nodeValue == \'1\'\n36.         assert nodes[2].childNodes[0].nodeValue == \'x\'\n37.     else:\n38.         assert nodes[1].childNodes[0].nodeValue == \'x\'\n39.         assert nodes[2].childNodes[0].nodeValue == \'1\'\n40. \n41.     mml_2 = mp._print(x**2)\n42.     assert mml_2.nodeName == \'apply\'\n43.     nodes = mml_2.childNodes\n44.     assert nodes[1].childNodes[0].nodeValue == \'x\'\n45.     assert nodes[2].childNodes[0].nodeValue == \'2\'\n46. \n47.     mml_3 = mp._print(2*x)\n48.     assert mml_3.nodeName == \'apply\'\n49.     nodes = mml_3.childNodes\n50.     assert nodes[0].nodeName == \'times\'\n51.     assert nodes[1].childNodes[0].nodeValue == \'2\'\n52.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n53. \n54.     mml = mp._print(Float(1.0, 2)*x)\n55.     assert mml.nodeName == \'apply\'\n56.     nodes = mml.childNodes\n57.     assert nodes[0].nodeName == \'times\'\n58.     assert nodes[1].childNodes[0].nodeValue == \'1.0\'\n59.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n60. \n61. \n62. def test_content_mathml_functions():\n63.     mml_1 = mp._print(sin(x))\n64.     assert mml_1.nodeName == \'apply\'\n65.     assert mml_1.childNodes[0].nodeName == \'sin\'\n66.     assert mml_1.childNodes[1].nodeName == \'ci\'\n67. \n68.     mml_2 = mp._print(diff(sin(x), x, evaluate=False))\n69.     assert mml_2.nodeName == \'apply\'\n70.     assert mml_2.childNodes[0].nodeName == \'diff\'\n71.     assert mml_2.childNodes[1].nodeName == \'bvar\'\n72.     assert mml_2.childNodes[1].childNodes[\n73.         0].nodeName == \'ci\'  # below bvar there\'s <ci>x/ci>\n74. \n75.     mml_3 = mp._print(diff(cos(x*y), x, evaluate=False))\n76.     assert mml_3.nodeName == \'apply\'\n77.     assert mml_3.childNodes[0].nodeName == \'partialdiff\'\n78.     assert mml_3.childNodes[1].nodeName == \'bvar\'\n79.     assert mml_3.childNodes[1].childNodes[\n80.         0].nodeName == \'ci\'  # below bvar there\'s <ci>x/ci>\n81. \n82. \n83. def test_content_mathml_limits():\n84.     # XXX No unevaluated limits\n85.     lim_fun = sin(x)/x\n86.     mml_1 = mp._print(Limit(lim_fun, x, 0))\n87.     assert mml_1.childNodes[0].nodeName == \'limit\'\n88.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n89.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n90.     assert mml_1.childNodes[3].toxml() == mp._print(lim_fun).toxml()\n91. \n92. \n93. def test_content_mathml_integrals():\n94.     integrand = x\n95.     mml_1 = mp._print(Integral(integrand, (x, 0, 1)))\n96.     assert mml_1.childNodes[0].nodeName == \'int\'\n97.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n98.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n99.     assert mml_1.childNodes[3].nodeName == \'uplimit\'\n100.     assert mml_1.childNodes[4].toxml() == mp._print(integrand).toxml()\n101. \n102. def test_content_mathml_matrices():\n103.     A = Matrix([1, 2, 3])\n104.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])\n105.     mll_1 = mp._print(A)\n106.     assert mll_1.childNodes[0].nodeName == \'matrixrow\'\n107.     assert mll_1.childNodes[0].childNodes[0].nodeName == \'cn\'\n108.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'1\'\n109.     assert mll_1.childNodes[1].nodeName == \'matrixrow\'\n110.     assert mll_1.childNodes[1].childNodes[0].nodeName == \'cn\'\n111.     assert mll_1.childNodes[1].childNodes[0].childNodes[0].nodeValue == \'2\'\n112.     assert mll_1.childNodes[2].nodeName == \'matrixrow\'\n113.     assert mll_1.childNodes[2].childNodes[0].nodeName == \'cn\'\n114.     assert mll_1.childNodes[2].childNodes[0].childNodes[0].nodeValue == \'3\'\n115.     mll_2 = mp._print(B)\n116.     assert mll_2.childNodes[0].nodeName == \'matrixrow\'\n117.     assert mll_2.childNodes[0].childNodes[0].nodeName == \'cn\'\n118.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'0\'\n119.     assert mll_2.childNodes[0].childNodes[1].nodeName == \'cn\'\n120.     assert mll_2.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'5\'\n121.     assert mll_2.childNodes[0].childNodes[2].nodeName == \'cn\'\n122.     assert mll_2.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'4\'\n123.     assert mll_2.childNodes[1].nodeName == \'matrixrow\'\n124.     assert mll_2.childNodes[1].childNodes[0].nodeName == \'cn\'\n125.     assert mll_2.childNodes[1].childNodes[0].childNodes[0].nodeValue == \'2\'\n126.     assert mll_2.childNodes[1].childNodes[1].nodeName == \'cn\'\n127.     assert mll_2.childNodes[1].childNodes[1].childNodes[0].nodeValue == \'3\'\n128.     assert mll_2.childNodes[1].childNodes[2].nodeName == \'cn\'\n129.     assert mll_2.childNodes[1].childNodes[2].childNodes[0].nodeValue == \'1\'\n130.     assert mll_2.childNodes[2].nodeName == \'matrixrow\'\n131.     assert mll_2.childNodes[2].childNodes[0].nodeName == \'cn\'\n132.     assert mll_2.childNodes[2].childNodes[0].childNodes[0].nodeValue == \'9\'\n133.     assert mll_2.childNodes[2].childNodes[1].nodeName == \'cn\'\n134.     assert mll_2.childNodes[2].childNodes[1].childNodes[0].nodeValue == \'7\'\n135.     assert mll_2.childNodes[2].childNodes[2].nodeName == \'cn\'\n136.     assert mll_2.childNodes[2].childNodes[2].childNodes[0].nodeValue == \'9\'\n137. \n138. def test_content_mathml_sums():\n139.     summand = x\n140.     mml_1 = mp._print(Sum(summand, (x, 1, 10)))\n141.     assert mml_1.childNodes[0].nodeName == \'sum\'\n142.     assert mml_1.childNodes[1].nodeName == \'bvar\'\n143.     assert mml_1.childNodes[2].nodeName == \'lowlimit\'\n144.     assert mml_1.childNodes[3].nodeName == \'uplimit\'\n145.     assert mml_1.childNodes[4].toxml() == mp._print(summand).toxml()\n146. \n147. \n148. def test_content_mathml_tuples():\n149.     mml_1 = mp._print([2])\n150.     assert mml_1.nodeName == \'list\'\n151.     assert mml_1.childNodes[0].nodeName == \'cn\'\n152.     assert len(mml_1.childNodes) == 1\n153. \n154.     mml_2 = mp._print([2, Integer(1)])\n155.     assert mml_2.nodeName == \'list\'\n156.     assert mml_2.childNodes[0].nodeName == \'cn\'\n157.     assert mml_2.childNodes[1].nodeName == \'cn\'\n158.     assert len(mml_2.childNodes) == 2\n159. \n160. \n161. def test_content_mathml_add():\n162.     mml = mp._print(x**5 - x**4 + x)\n163.     assert mml.childNodes[0].nodeName == \'plus\'\n164.     assert mml.childNodes[1].childNodes[0].nodeName == \'minus\'\n165.     assert mml.childNodes[1].childNodes[1].nodeName == \'apply\'\n166. \n167. \n168. def test_content_mathml_Rational():\n169.     mml_1 = mp._print(Rational(1, 1))\n170.     """should just return a number"""\n171.     assert mml_1.nodeName == \'cn\'\n172. \n173.     mml_2 = mp._print(Rational(2, 5))\n174.     assert mml_2.childNodes[0].nodeName == \'divide\'\n175. \n176. \n177. def test_content_mathml_constants():\n178.     mml = mp._print(I)\n179.     assert mml.nodeName == \'imaginaryi\'\n180. \n181.     mml = mp._print(E)\n182.     assert mml.nodeName == \'exponentiale\'\n183. \n184.     mml = mp._print(oo)\n185.     assert mml.nodeName == \'infinity\'\n186. \n187.     mml = mp._print(pi)\n188.     assert mml.nodeName == \'pi\'\n189. \n190.     assert mathml(GoldenRatio) == \'<cn>&#966;</cn>\'\n191. \n192.     mml = mathml(EulerGamma)\n193.     assert mml == \'<eulergamma/>\'\n194. \n195. \n196. def test_content_mathml_trig():\n197.     mml = mp._print(sin(x))\n198.     assert mml.childNodes[0].nodeName == \'sin\'\n199. \n200.     mml = mp._print(cos(x))\n201.     assert mml.childNodes[0].nodeName == \'cos\'\n202. \n203.     mml = mp._print(tan(x))\n204.     assert mml.childNodes[0].nodeName == \'tan\'\n205. \n206.     mml = mp._print(asin(x))\n207.     assert mml.childNodes[0].nodeName == \'arcsin\'\n208. \n209.     mml = mp._print(acos(x))\n210.     assert mml.childNodes[0].nodeName == \'arccos\'\n211. \n212.     mml = mp._print(atan(x))\n213.     assert mml.childNodes[0].nodeName == \'arctan\'\n214. \n215.     mml = mp._print(sinh(x))\n216.     assert mml.childNodes[0].nodeName == \'sinh\'\n217. \n218.     mml = mp._print(cosh(x))\n219.     assert mml.childNodes[0].nodeName == \'cosh\'\n220. \n221.     mml = mp._print(tanh(x))\n222.     assert mml.childNodes[0].nodeName == \'tanh\'\n223. \n224.     mml = mp._print(asinh(x))\n225.     assert mml.childNodes[0].nodeName == \'arcsinh\'\n226. \n227.     mml = mp._print(atanh(x))\n228.     assert mml.childNodes[0].nodeName == \'arctanh\'\n229. \n230.     mml = mp._print(acosh(x))\n231.     assert mml.childNodes[0].nodeName == \'arccosh\'\n232. \n233. \n234. def test_content_mathml_relational():\n235.     mml_1 = mp._print(Eq(x, 1))\n236.     assert mml_1.nodeName == \'apply\'\n237.     assert mml_1.childNodes[0].nodeName == \'eq\'\n238.     assert mml_1.childNodes[1].nodeName == \'ci\'\n239.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'x\'\n240.     assert mml_1.childNodes[2].nodeName == \'cn\'\n241.     assert mml_1.childNodes[2].childNodes[0].nodeValue == \'1\'\n242. \n243.     mml_2 = mp._print(Ne(1, x))\n244.     assert mml_2.nodeName == \'apply\'\n245.     assert mml_2.childNodes[0].nodeName == \'neq\'\n246.     assert mml_2.childNodes[1].nodeName == \'cn\'\n247.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'1\'\n248.     assert mml_2.childNodes[2].nodeName == \'ci\'\n249.     assert mml_2.childNodes[2].childNodes[0].nodeValue == \'x\'\n250. \n251.     mml_3 = mp._print(Ge(1, x))\n252.     assert mml_3.nodeName == \'apply\'\n253.     assert mml_3.childNodes[0].nodeName == \'geq\'\n254.     assert mml_3.childNodes[1].nodeName == \'cn\'\n255.     assert mml_3.childNodes[1].childNodes[0].nodeValue == \'1\'\n256.     assert mml_3.childNodes[2].nodeName == \'ci\'\n257.     assert mml_3.childNodes[2].childNodes[0].nodeValue == \'x\'\n258. \n259.     mml_4 = mp._print(Lt(1, x))\n260.     assert mml_4.nodeName == \'apply\'\n261.     assert mml_4.childNodes[0].nodeName == \'lt\'\n262.     assert mml_4.childNodes[1].nodeName == \'cn\'\n263.     assert mml_4.childNodes[1].childNodes[0].nodeValue == \'1\'\n264.     assert mml_4.childNodes[2].nodeName == \'ci\'\n265.     assert mml_4.childNodes[2].childNodes[0].nodeValue == \'x\'\n266. \n267. \n268. def test_content_symbol():\n269.     mml = mp._print(Symbol("x"))\n270.     assert mml.nodeName == \'ci\'\n271.     assert mml.childNodes[0].nodeValue == \'x\'\n272.     del mml\n273. \n274.     mml = mp._print(Symbol("x^2"))\n275.     assert mml.nodeName == \'ci\'\n276.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n277.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n278.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n279.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n280.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n281.     del mml\n282. \n283.     mml = mp._print(Symbol("x__2"))\n284.     assert mml.nodeName == \'ci\'\n285.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n286.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n287.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n288.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n289.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n290.     del mml\n291. \n292.     mml = mp._print(Symbol("x_2"))\n293.     assert mml.nodeName == \'ci\'\n294.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n295.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n296.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n297.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n298.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n299.     del mml\n300. \n301.     mml = mp._print(Symbol("x^3_2"))\n302.     assert mml.nodeName == \'ci\'\n303.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n304.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n305.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n306.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n307.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n308.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n309.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n310.     del mml\n311. \n312.     mml = mp._print(Symbol("x__3_2"))\n313.     assert mml.nodeName == \'ci\'\n314.     assert mml.childNodes[0].nodeName == \'mml:msubsup\'\n315.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n316.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n317.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mi\'\n318.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n319.     assert mml.childNodes[0].childNodes[2].nodeName == \'mml:mi\'\n320.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n321.     del mml\n322. \n323.     mml = mp._print(Symbol("x_2_a"))\n324.     assert mml.nodeName == \'ci\'\n325.     assert mml.childNodes[0].nodeName == \'mml:msub\'\n326.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n327.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n328.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n329.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n330.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n331.         0].nodeValue == \'2\'\n332.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n333.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n334.         0].nodeValue == \' \'\n335.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n336.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n337.         0].nodeValue == \'a\'\n338.     del mml\n339. \n340.     mml = mp._print(Symbol("x^2^a"))\n341.     assert mml.nodeName == \'ci\'\n342.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n343.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n344.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n345.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n346.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n347.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n348.         0].nodeValue == \'2\'\n349.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n350.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n351.         0].nodeValue == \' \'\n352.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n353.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n354.         0].nodeValue == \'a\'\n355.     del mml\n356. \n357.     mml = mp._print(Symbol("x__2__a"))\n358.     assert mml.nodeName == \'ci\'\n359.     assert mml.childNodes[0].nodeName == \'mml:msup\'\n360.     assert mml.childNodes[0].childNodes[0].nodeName == \'mml:mi\'\n361.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n362.     assert mml.childNodes[0].childNodes[1].nodeName == \'mml:mrow\'\n363.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mml:mi\'\n364.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n365.         0].nodeValue == \'2\'\n366.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mml:mo\'\n367.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n368.         0].nodeValue == \' \'\n369.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mml:mi\'\n370.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n371.         0].nodeValue == \'a\'\n372.     del mml\n373. \n374. \n375. def test_content_mathml_greek():\n376.     mml = mp._print(Symbol(\'alpha\'))\n377.     assert mml.nodeName == \'ci\'\n378.     assert mml.childNodes[0].nodeValue == u\'\\N{GREEK SMALL LETTER ALPHA}\'\n379. \n380.     assert mp.doprint(Symbol(\'alpha\')) == \'<ci>&#945;</ci>\'\n381.     assert mp.doprint(Symbol(\'beta\')) == \'<ci>&#946;</ci>\'\n382.     assert mp.doprint(Symbol(\'gamma\')) == \'<ci>&#947;</ci>\'\n383.     assert mp.doprint(Symbol(\'delta\')) == \'<ci>&#948;</ci>\'\n384.     assert mp.doprint(Symbol(\'epsilon\')) == \'<ci>&#949;</ci>\'\n385.     assert mp.doprint(Symbol(\'zeta\')) == \'<ci>&#950;</ci>\'\n386.     assert mp.doprint(Symbol(\'eta\')) == \'<ci>&#951;</ci>\'\n387.     assert mp.doprint(Symbol(\'theta\')) == \'<ci>&#952;</ci>\'\n388.     assert mp.doprint(Symbol(\'iota\')) == \'<ci>&#953;</ci>\'\n389.     assert mp.doprint(Symbol(\'kappa\')) == \'<ci>&#954;</ci>\'\n390.     assert mp.doprint(Symbol(\'lambda\')) == \'<ci>&#955;</ci>\'\n391.     assert mp.doprint(Symbol(\'mu\')) == \'<ci>&#956;</ci>\'\n392.     assert mp.doprint(Symbol(\'nu\')) == \'<ci>&#957;</ci>\'\n393.     assert mp.doprint(Symbol(\'xi\')) == \'<ci>&#958;</ci>\'\n394.     assert mp.doprint(Symbol(\'omicron\')) == \'<ci>&#959;</ci>\'\n395.     assert mp.doprint(Symbol(\'pi\')) == \'<ci>&#960;</ci>\'\n396.     assert mp.doprint(Symbol(\'rho\')) == \'<ci>&#961;</ci>\'\n397.     assert mp.doprint(Symbol(\'varsigma\')) == \'<ci>&#962;</ci>\', mp.doprint(Symbol(\'varsigma\'))\n398.     assert mp.doprint(Symbol(\'sigma\')) == \'<ci>&#963;</ci>\'\n399.     assert mp.doprint(Symbol(\'tau\')) == \'<ci>&#964;</ci>\'\n400.     assert mp.doprint(Symbol(\'upsilon\')) == \'<ci>&#965;</ci>\'\n401.     assert mp.doprint(Symbol(\'phi\')) == \'<ci>&#966;</ci>\'\n402.     assert mp.doprint(Symbol(\'chi\')) == \'<ci>&#967;</ci>\'\n403.     assert mp.doprint(Symbol(\'psi\')) == \'<ci>&#968;</ci>\'\n404.     assert mp.doprint(Symbol(\'omega\')) == \'<ci>&#969;</ci>\'\n405. \n406.     assert mp.doprint(Symbol(\'Alpha\')) == \'<ci>&#913;</ci>\'\n407.     assert mp.doprint(Symbol(\'Beta\')) == \'<ci>&#914;</ci>\'\n408.     assert mp.doprint(Symbol(\'Gamma\')) == \'<ci>&#915;</ci>\'\n409.     assert mp.doprint(Symbol(\'Delta\')) == \'<ci>&#916;</ci>\'\n410.     assert mp.doprint(Symbol(\'Epsilon\')) == \'<ci>&#917;</ci>\'\n411.     assert mp.doprint(Symbol(\'Zeta\')) == \'<ci>&#918;</ci>\'\n412.     assert mp.doprint(Symbol(\'Eta\')) == \'<ci>&#919;</ci>\'\n413.     assert mp.doprint(Symbol(\'Theta\')) == \'<ci>&#920;</ci>\'\n414.     assert mp.doprint(Symbol(\'Iota\')) == \'<ci>&#921;</ci>\'\n415.     assert mp.doprint(Symbol(\'Kappa\')) == \'<ci>&#922;</ci>\'\n416.     assert mp.doprint(Symbol(\'Lambda\')) == \'<ci>&#923;</ci>\'\n417.     assert mp.doprint(Symbol(\'Mu\')) == \'<ci>&#924;</ci>\'\n418.     assert mp.doprint(Symbol(\'Nu\')) == \'<ci>&#925;</ci>\'\n419.     assert mp.doprint(Symbol(\'Xi\')) == \'<ci>&#926;</ci>\'\n420.     assert mp.doprint(Symbol(\'Omicron\')) == \'<ci>&#927;</ci>\'\n421.     assert mp.doprint(Symbol(\'Pi\')) == \'<ci>&#928;</ci>\'\n422.     assert mp.doprint(Symbol(\'Rho\')) == \'<ci>&#929;</ci>\'\n423.     assert mp.doprint(Symbol(\'Sigma\')) == \'<ci>&#931;</ci>\'\n424.     assert mp.doprint(Symbol(\'Tau\')) == \'<ci>&#932;</ci>\'\n425.     assert mp.doprint(Symbol(\'Upsilon\')) == \'<ci>&#933;</ci>\'\n426.     assert mp.doprint(Symbol(\'Phi\')) == \'<ci>&#934;</ci>\'\n427.     assert mp.doprint(Symbol(\'Chi\')) == \'<ci>&#935;</ci>\'\n428.     assert mp.doprint(Symbol(\'Psi\')) == \'<ci>&#936;</ci>\'\n429.     assert mp.doprint(Symbol(\'Omega\')) == \'<ci>&#937;</ci>\'\n430. \n431. \n432. def test_content_mathml_order():\n433.     expr = x**3 + x**2*y + 3*x*y**3 + y**4\n434. \n435.     mp = MathMLContentPrinter({\'order\': \'lex\'})\n436.     mml = mp._print(expr)\n437. \n438.     assert mml.childNodes[1].childNodes[0].nodeName == \'power\'\n439.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == \'x\'\n440.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == \'3\'\n441. \n442.     assert mml.childNodes[4].childNodes[0].nodeName == \'power\'\n443.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == \'y\'\n444.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == \'4\'\n445. \n446.     mp = MathMLContentPrinter({\'order\': \'rev-lex\'})\n447.     mml = mp._print(expr)\n448. \n449.     assert mml.childNodes[1].childNodes[0].nodeName == \'power\'\n450.     assert mml.childNodes[1].childNodes[1].childNodes[0].data == \'y\'\n451.     assert mml.childNodes[1].childNodes[2].childNodes[0].data == \'4\'\n452. \n453.     assert mml.childNodes[4].childNodes[0].nodeName == \'power\'\n454.     assert mml.childNodes[4].childNodes[1].childNodes[0].data == \'x\'\n455.     assert mml.childNodes[4].childNodes[2].childNodes[0].data == \'3\'\n456. \n457. \n458. def test_content_settings():\n459.     raises(TypeError, lambda: mathml(Symbol("x"), method="garbage"))\n460. \n461. \n462. def test_presentation_printmethod():\n463.     assert mpp.doprint(1 + x) == \'<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>\'\n464.     assert mpp.doprint(x**2) == \'<msup><mi>x</mi><mn>2</mn></msup>\'\n465.     assert mpp.doprint(2*x) == \'<mrow><mn>2</mn><mo>&InvisibleTimes;</mo><mi>x</mi></mrow>\'\n466. \n467. \n468. def test_presentation_mathml_core():\n469.     mml_1 = mpp._print(1 + x)\n470.     assert mml_1.nodeName == \'mrow\'\n471.     nodes = mml_1.childNodes\n472.     assert len(nodes) == 3\n473.     assert nodes[0].nodeName in [\'mi\', \'mn\']\n474.     assert nodes[1].nodeName == \'mo\'\n475.     if nodes[0].nodeName == \'mn\':\n476.         assert nodes[0].childNodes[0].nodeValue == \'1\'\n477.         assert nodes[2].childNodes[0].nodeValue == \'x\'\n478.     else:\n479.         assert nodes[0].childNodes[0].nodeValue == \'x\'\n480.         assert nodes[2].childNodes[0].nodeValue == \'1\'\n481. \n482.     mml_2 = mpp._print(x**2)\n483.     assert mml_2.nodeName == \'msup\'\n484.     nodes = mml_2.childNodes\n485.     assert nodes[0].childNodes[0].nodeValue == \'x\'\n486.     assert nodes[1].childNodes[0].nodeValue == \'2\'\n487. \n488.     mml_3 = mpp._print(2*x)\n489.     assert mml_3.nodeName == \'mrow\'\n490.     nodes = mml_3.childNodes\n491.     assert nodes[0].childNodes[0].nodeValue == \'2\'\n492.     assert nodes[1].childNodes[0].nodeValue == \'&InvisibleTimes;\'\n493.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n494. \n495.     mml = mpp._print(Float(1.0, 2)*x)\n496.     assert mml.nodeName == \'mrow\'\n497.     nodes = mml.childNodes\n498.     assert nodes[0].childNodes[0].nodeValue == \'1.0\'\n499.     assert nodes[1].childNodes[0].nodeValue == \'&InvisibleTimes;\'\n500.     assert nodes[2].childNodes[0].nodeValue == \'x\'\n501. \n502. \n503. def test_presentation_mathml_functions():\n504.     mml_1 = mpp._print(sin(x))\n505.     assert mml_1.childNodes[0].childNodes[0\n506.         ].nodeValue == \'sin\'\n507.     assert mml_1.childNodes[1].childNodes[0\n508.         ].childNodes[0].nodeValue == \'x\'\n509. \n510.     mml_2 = mpp._print(diff(sin(x), x, evaluate=False))\n511.     assert mml_2.nodeName == \'mfrac\'\n512.     assert mml_2.childNodes[0].childNodes[0\n513.         ].childNodes[0].nodeValue == \'&dd;\'\n514.     assert mml_2.childNodes[0].childNodes[1\n515.         ].nodeName == \'mfenced\'\n516.     assert mml_2.childNodes[1].childNodes[\n517.         0].childNodes[0].nodeValue == \'&dd;\'\n518. \n519.     mml_3 = mpp._print(diff(cos(x*y), x, evaluate=False))\n520.     assert mml_3.nodeName == \'mfrac\'\n521.     assert mml_3.childNodes[0].childNodes[0\n522.         ].childNodes[0].nodeValue == \'&#x2202;\'\n523.     assert mml_2.childNodes[0].childNodes[1\n524.         ].nodeName == \'mfenced\'\n525.     assert mml_3.childNodes[1].childNodes[\n526.         0].childNodes[0].nodeValue == \'&#x2202;\'\n527. \n528. \n529. def test_presentation_mathml_limits():\n530.     lim_fun = sin(x)/x\n531.     mml_1 = mpp._print(Limit(lim_fun, x, 0))\n532.     assert mml_1.childNodes[0].nodeName == \'munder\'\n533.     assert mml_1.childNodes[0].childNodes[0\n534.         ].childNodes[0].nodeValue == \'lim\'\n535.     assert mml_1.childNodes[0].childNodes[1\n536.         ].childNodes[0].childNodes[0\n537.         ].nodeValue == \'x\'\n538.     assert mml_1.childNodes[0].childNodes[1\n539.         ].childNodes[1].childNodes[0\n540.         ].nodeValue == \'&#x2192;\'\n541.     assert mml_1.childNodes[0].childNodes[1\n542.         ].childNodes[2].childNodes[0\n543.         ].nodeValue == \'0\'\n544. \n545. \n546. def test_presentation_mathml_integrals():\n547.     integrand = x\n548.     mml_1 = mpp._print(Integral(integrand, (x, 0, 1)))\n549.     assert mml_1.childNodes[0].nodeName == \'msubsup\'\n550.     assert len(mml_1.childNodes[0].childNodes) == 3\n551.     assert mml_1.childNodes[0].childNodes[0\n552.         ].childNodes[0].nodeValue == \'&int;\'\n553.     assert mml_1.childNodes[0].childNodes[1\n554.         ].childNodes[0].nodeValue == \'0\'\n555.     assert mml_1.childNodes[0].childNodes[2\n556.         ].childNodes[0].nodeValue == \'1\'\n557. \n558. \n559. def test_presentation_mathml_matrices():\n560.     A = Matrix([1, 2, 3])\n561.     B = Matrix([[0, 5, 4], [2, 3, 1], [9, 7, 9]])\n562.     mll_1 = mpp._print(A)\n563.     assert mll_1.childNodes[0].nodeName == \'mtable\'\n564.     assert mll_1.childNodes[0].childNodes[0].nodeName == \'mtr\'\n565.     assert len(mll_1.childNodes[0].childNodes) == 3\n566.     assert mll_1.childNodes[0].childNodes[0].childNodes[0].nodeName == \'mtd\'\n567.     assert len(mll_1.childNodes[0].childNodes[0].childNodes) == 1\n568.     assert mll_1.childNodes[0].childNodes[0].childNodes[0\n569.         ].childNodes[0].childNodes[0].nodeValue == \'1\'\n570.     assert mll_1.childNodes[0].childNodes[1].childNodes[0\n571.         ].childNodes[0].childNodes[0].nodeValue == \'2\'\n572.     assert mll_1.childNodes[0].childNodes[2].childNodes[0\n573.         ].childNodes[0].childNodes[0].nodeValue == \'3\'\n574.     mll_2 = mpp._print(B)\n575.     assert mll_2.childNodes[0].nodeName == \'mtable\'\n576.     assert mll_2.childNodes[0].childNodes[0].nodeName == \'mtr\'\n577.     assert len(mll_2.childNodes[0].childNodes) == 3\n578.     assert mll_2.childNodes[0].childNodes[0].childNodes[0].nodeName == \'mtd\'\n579.     assert len(mll_2.childNodes[0].childNodes[0].childNodes) == 3\n580.     assert mll_2.childNodes[0].childNodes[0].childNodes[0\n581.         ].childNodes[0].childNodes[0].nodeValue == \'0\'\n582.     assert mll_2.childNodes[0].childNodes[0].childNodes[1\n583.         ].childNodes[0].childNodes[0].nodeValue == \'5\'\n584.     assert mll_2.childNodes[0].childNodes[0].childNodes[2\n585.         ].childNodes[0].childNodes[0].nodeValue == \'4\'\n586.     assert mll_2.childNodes[0].childNodes[1].childNodes[0\n587.         ].childNodes[0].childNodes[0].nodeValue == \'2\'\n588.     assert mll_2.childNodes[0].childNodes[1].childNodes[1\n589.         ].childNodes[0].childNodes[0].nodeValue == \'3\'\n590.     assert mll_2.childNodes[0].childNodes[1].childNodes[2\n591.         ].childNodes[0].childNodes[0].nodeValue == \'1\'\n592.     assert mll_2.childNodes[0].childNodes[2].childNodes[0\n593.         ].childNodes[0].childNodes[0].nodeValue == \'9\'\n594.     assert mll_2.childNodes[0].childNodes[2].childNodes[1\n595.         ].childNodes[0].childNodes[0].nodeValue == \'7\'\n596.     assert mll_2.childNodes[0].childNodes[2].childNodes[2\n597.         ].childNodes[0].childNodes[0].nodeValue == \'9\'\n598. \n599. \n600. def test_presentation_mathml_sums():\n601.     summand = x\n602.     mml_1 = mpp._print(Sum(summand, (x, 1, 10)))\n603.     assert mml_1.childNodes[0].nodeName == \'munderover\'\n604.     assert len(mml_1.childNodes[0].childNodes) == 3\n605.     assert mml_1.childNodes[0].childNodes[0].childNodes[0\n606.         ].nodeValue == \'&#x2211;\'\n607.     assert len(mml_1.childNodes[0].childNodes[1].childNodes) == 3\n608.     assert mml_1.childNodes[0].childNodes[2].childNodes[0\n609.         ].nodeValue == \'10\'\n610.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'x\'\n611. \n612. \n613. def test_presentation_mathml_add():\n614.     mml = mpp._print(x**5 - x**4 + x)\n615.     assert len(mml.childNodes) == 5\n616.     assert mml.childNodes[0].childNodes[0].childNodes[0\n617.         ].nodeValue == \'x\'\n618.     assert mml.childNodes[0].childNodes[1].childNodes[0\n619.         ].nodeValue == \'5\'\n620.     assert mml.childNodes[1].childNodes[0].nodeValue == \'-\'\n621.     assert mml.childNodes[2].childNodes[0].childNodes[0\n622.         ].nodeValue == \'x\'\n623.     assert mml.childNodes[2].childNodes[1].childNodes[0\n624.         ].nodeValue == \'4\'\n625.     assert mml.childNodes[3].childNodes[0].nodeValue == \'+\'\n626.     assert mml.childNodes[4].childNodes[0].nodeValue == \'x\'\n627. \n628. \n629. def test_presentation_mathml_Rational():\n630.     mml_1 = mpp._print(Rational(1, 1))\n631.     assert mml_1.nodeName == \'mn\'\n632. \n633.     mml_2 = mpp._print(Rational(2, 5))\n634.     assert mml_2.nodeName == \'mfrac\'\n635.     assert mml_2.childNodes[0].childNodes[0].nodeValue == \'2\'\n636.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'5\'\n637. \n638. \n639. def test_presentation_mathml_constants():\n640.     mml = mpp._print(I)\n641.     assert mml.childNodes[0].nodeValue == \'&ImaginaryI;\'\n642. \n643.     mml = mpp._print(E)\n644.     assert mml.childNodes[0].nodeValue == \'&ExponentialE;\'\n645. \n646.     mml = mpp._print(oo)\n647.     assert mml.childNodes[0].nodeValue == \'&#x221E;\'\n648. \n649.     mml = mpp._print(pi)\n650.     assert mml.childNodes[0].nodeValue == \'&pi;\'\n651. \n652.     assert mathml(GoldenRatio, printer=\'presentation\') == \'<mi>&#966;</mi>\'\n653. \n654. \n655. def test_presentation_mathml_trig():\n656.     mml = mpp._print(sin(x))\n657.     assert mml.childNodes[0].childNodes[0].nodeValue == \'sin\'\n658. \n659.     mml = mpp._print(cos(x))\n660.     assert mml.childNodes[0].childNodes[0].nodeValue == \'cos\'\n661. \n662.     mml = mpp._print(tan(x))\n663.     assert mml.childNodes[0].childNodes[0].nodeValue == \'tan\'\n664. \n665.     mml = mpp._print(asin(x))\n666.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arcsin\'\n667. \n668.     mml = mpp._print(acos(x))\n669.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arccos\'\n670. \n671.     mml = mpp._print(atan(x))\n672.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arctan\'\n673. \n674.     mml = mpp._print(sinh(x))\n675.     assert mml.childNodes[0].childNodes[0].nodeValue == \'sinh\'\n676. \n677.     mml = mpp._print(cosh(x))\n678.     assert mml.childNodes[0].childNodes[0].nodeValue == \'cosh\'\n679. \n680.     mml = mpp._print(tanh(x))\n681.     assert mml.childNodes[0].childNodes[0].nodeValue == \'tanh\'\n682. \n683.     mml = mpp._print(asinh(x))\n684.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arcsinh\'\n685. \n686.     mml = mpp._print(atanh(x))\n687.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arctanh\'\n688. \n689.     mml = mpp._print(acosh(x))\n690.     assert mml.childNodes[0].childNodes[0].nodeValue == \'arccosh\'\n691. \n692. \n693. def test_presentation_mathml_relational():\n694.     mml_1 = mpp._print(Eq(x, 1))\n695.     assert len(mml_1.childNodes) == 3\n696.     assert mml_1.childNodes[0].nodeName == \'mi\'\n697.     assert mml_1.childNodes[0].childNodes[0].nodeValue == \'x\'\n698.     assert mml_1.childNodes[1].nodeName == \'mo\'\n699.     assert mml_1.childNodes[1].childNodes[0].nodeValue == \'=\'\n700.     assert mml_1.childNodes[2].nodeName == \'mn\'\n701.     assert mml_1.childNodes[2].childNodes[0].nodeValue == \'1\'\n702. \n703.     mml_2 = mpp._print(Ne(1, x))\n704.     assert len(mml_2.childNodes) == 3\n705.     assert mml_2.childNodes[0].nodeName == \'mn\'\n706.     assert mml_2.childNodes[0].childNodes[0].nodeValue == \'1\'\n707.     assert mml_2.childNodes[1].nodeName == \'mo\'\n708.     assert mml_2.childNodes[1].childNodes[0].nodeValue == \'&#x2260;\'\n709.     assert mml_2.childNodes[2].nodeName == \'mi\'\n710.     assert mml_2.childNodes[2].childNodes[0].nodeValue == \'x\'\n711. \n712.     mml_3 = mpp._print(Ge(1, x))\n713.     assert len(mml_3.childNodes) == 3\n714.     assert mml_3.childNodes[0].nodeName == \'mn\'\n715.     assert mml_3.childNodes[0].childNodes[0].nodeValue == \'1\'\n716.     assert mml_3.childNodes[1].nodeName == \'mo\'\n717.     assert mml_3.childNodes[1].childNodes[0].nodeValue == \'&#x2265;\'\n718.     assert mml_3.childNodes[2].nodeName == \'mi\'\n719.     assert mml_3.childNodes[2].childNodes[0].nodeValue == \'x\'\n720. \n721.     mml_4 = mpp._print(Lt(1, x))\n722.     assert len(mml_4.childNodes) == 3\n723.     assert mml_4.childNodes[0].nodeName == \'mn\'\n724.     assert mml_4.childNodes[0].childNodes[0].nodeValue == \'1\'\n725.     assert mml_4.childNodes[1].nodeName == \'mo\'\n726.     assert mml_4.childNodes[1].childNodes[0].nodeValue == \'<\'\n727.     assert mml_4.childNodes[2].nodeName == \'mi\'\n728.     assert mml_4.childNodes[2].childNodes[0].nodeValue == \'x\'\n729. \n730. \n731. def test_presentation_symbol():\n732.     mml = mpp._print(Symbol("x"))\n733.     assert mml.nodeName == \'mi\'\n734.     assert mml.childNodes[0].nodeValue == \'x\'\n735.     del mml\n736. \n737.     mml = mpp._print(Symbol("x^2"))\n738.     assert mml.nodeName == \'mi\'\n739.     assert mml.childNodes[0].nodeName == \'msup\'\n740.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n741.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n742.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n743.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n744.     del mml\n745. \n746.     mml = mpp._print(Symbol("x__2"))\n747.     assert mml.nodeName == \'mi\'\n748.     assert mml.childNodes[0].nodeName == \'msup\'\n749.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n750.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n751.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n752.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n753.     del mml\n754. \n755.     mml = mpp._print(Symbol("x_2"))\n756.     assert mml.nodeName == \'mi\'\n757.     assert mml.childNodes[0].nodeName == \'msub\'\n758.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n759.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n760.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n761.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n762.     del mml\n763. \n764.     mml = mpp._print(Symbol("x^3_2"))\n765.     assert mml.nodeName == \'mi\'\n766.     assert mml.childNodes[0].nodeName == \'msubsup\'\n767.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n768.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n769.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n770.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n771.     assert mml.childNodes[0].childNodes[2].nodeName == \'mi\'\n772.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n773.     del mml\n774. \n775.     mml = mpp._print(Symbol("x__3_2"))\n776.     assert mml.nodeName == \'mi\'\n777.     assert mml.childNodes[0].nodeName == \'msubsup\'\n778.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n779.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n780.     assert mml.childNodes[0].childNodes[1].nodeName == \'mi\'\n781.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'2\'\n782.     assert mml.childNodes[0].childNodes[2].nodeName == \'mi\'\n783.     assert mml.childNodes[0].childNodes[2].childNodes[0].nodeValue == \'3\'\n784.     del mml\n785. \n786.     mml = mpp._print(Symbol("x_2_a"))\n787.     assert mml.nodeName == \'mi\'\n788.     assert mml.childNodes[0].nodeName == \'msub\'\n789.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n790.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n791.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n792.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n793.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n794.         0].nodeValue == \'2\'\n795.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n796.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n797.         0].nodeValue == \' \'\n798.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n799.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n800.         0].nodeValue == \'a\'\n801.     del mml\n802. \n803.     mml = mpp._print(Symbol("x^2^a"))\n804.     assert mml.nodeName == \'mi\'\n805.     assert mml.childNodes[0].nodeName == \'msup\'\n806.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n807.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n808.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n809.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n810.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n811.         0].nodeValue == \'2\'\n812.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n813.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n814.         0].nodeValue == \' \'\n815.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n816.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n817.         0].nodeValue == \'a\'\n818.     del mml\n819. \n820.     mml = mpp._print(Symbol("x__2__a"))\n821.     assert mml.nodeName == \'mi\'\n822.     assert mml.childNodes[0].nodeName == \'msup\'\n823.     assert mml.childNodes[0].childNodes[0].nodeName == \'mi\'\n824.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n825.     assert mml.childNodes[0].childNodes[1].nodeName == \'mrow\'\n826.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeName == \'mi\'\n827.     assert mml.childNodes[0].childNodes[1].childNodes[0].childNodes[\n828.         0].nodeValue == \'2\'\n829.     assert mml.childNodes[0].childNodes[1].childNodes[1].nodeName == \'mo\'\n830.     assert mml.childNodes[0].childNodes[1].childNodes[1].childNodes[\n831.         0].nodeValue == \' \'\n832.     assert mml.childNodes[0].childNodes[1].childNodes[2].nodeName == \'mi\'\n833.     assert mml.childNodes[0].childNodes[1].childNodes[2].childNodes[\n834.         0].nodeValue == \'a\'\n835.     del mml\n836. \n837. \n838. def test_presentation_mathml_greek():\n839.     mml = mpp._print(Symbol(\'alpha\'))\n840.     assert mml.nodeName == \'mi\'\n841.     assert mml.childNodes[0].nodeValue == u\'\\N{GREEK SMALL LETTER ALPHA}\'\n842. \n843.     assert mpp.doprint(Symbol(\'alpha\')) == \'<mi>&#945;</mi>\'\n844.     assert mpp.doprint(Symbol(\'beta\')) == \'<mi>&#946;</mi>\'\n845.     assert mpp.doprint(Symbol(\'gamma\')) == \'<mi>&#947;</mi>\'\n846.     assert mpp.doprint(Symbol(\'delta\')) == \'<mi>&#948;</mi>\'\n847.     assert mpp.doprint(Symbol(\'epsilon\')) == \'<mi>&#949;</mi>\'\n848.     assert mpp.doprint(Symbol(\'zeta\')) == \'<mi>&#950;</mi>\'\n849.     assert mpp.doprint(Symbol(\'eta\')) == \'<mi>&#951;</mi>\'\n850.     assert mpp.doprint(Symbol(\'theta\')) == \'<mi>&#952;</mi>\'\n851.     assert mpp.doprint(Symbol(\'iota\')) == \'<mi>&#953;</mi>\'\n852.     assert mpp.doprint(Symbol(\'kappa\')) == \'<mi>&#954;</mi>\'\n853.     assert mpp.doprint(Symbol(\'lambda\')) == \'<mi>&#955;</mi>\'\n854.     assert mpp.doprint(Symbol(\'mu\')) == \'<mi>&#956;</mi>\'\n855.     assert mpp.doprint(Symbol(\'nu\')) == \'<mi>&#957;</mi>\'\n856.     assert mpp.doprint(Symbol(\'xi\')) == \'<mi>&#958;</mi>\'\n857.     assert mpp.doprint(Symbol(\'omicron\')) == \'<mi>&#959;</mi>\'\n858.     assert mpp.doprint(Symbol(\'pi\')) == \'<mi>&#960;</mi>\'\n859.     assert mpp.doprint(Symbol(\'rho\')) == \'<mi>&#961;</mi>\'\n860.     assert mpp.doprint(Symbol(\'varsigma\')) == \'<mi>&#962;</mi>\', mp.doprint(Symbol(\'varsigma\'))\n861.     assert mpp.doprint(Symbol(\'sigma\')) == \'<mi>&#963;</mi>\'\n862.     assert mpp.doprint(Symbol(\'tau\')) == \'<mi>&#964;</mi>\'\n863.     assert mpp.doprint(Symbol(\'upsilon\')) == \'<mi>&#965;</mi>\'\n864.     assert mpp.doprint(Symbol(\'phi\')) == \'<mi>&#966;</mi>\'\n865.     assert mpp.doprint(Symbol(\'chi\')) == \'<mi>&#967;</mi>\'\n866.     assert mpp.doprint(Symbol(\'psi\')) == \'<mi>&#968;</mi>\'\n867.     assert mpp.doprint(Symbol(\'omega\')) == \'<mi>&#969;</mi>\'\n868. \n869.     assert mpp.doprint(Symbol(\'Alpha\')) == \'<mi>&#913;</mi>\'\n870.     assert mpp.doprint(Symbol(\'Beta\')) == \'<mi>&#914;</mi>\'\n871.     assert mpp.doprint(Symbol(\'Gamma\')) == \'<mi>&#915;</mi>\'\n872.     assert mpp.doprint(Symbol(\'Delta\')) == \'<mi>&#916;</mi>\'\n873.     assert mpp.doprint(Symbol(\'Epsilon\')) == \'<mi>&#917;</mi>\'\n874.     assert mpp.doprint(Symbol(\'Zeta\')) == \'<mi>&#918;</mi>\'\n875.     assert mpp.doprint(Symbol(\'Eta\')) == \'<mi>&#919;</mi>\'\n876.     assert mpp.doprint(Symbol(\'Theta\')) == \'<mi>&#920;</mi>\'\n877.     assert mpp.doprint(Symbol(\'Iota\')) == \'<mi>&#921;</mi>\'\n878.     assert mpp.doprint(Symbol(\'Kappa\')) == \'<mi>&#922;</mi>\'\n879.     assert mpp.doprint(Symbol(\'Lambda\')) == \'<mi>&#923;</mi>\'\n880.     assert mpp.doprint(Symbol(\'Mu\')) == \'<mi>&#924;</mi>\'\n881.     assert mpp.doprint(Symbol(\'Nu\')) == \'<mi>&#925;</mi>\'\n882.     assert mpp.doprint(Symbol(\'Xi\')) == \'<mi>&#926;</mi>\'\n883.     assert mpp.doprint(Symbol(\'Omicron\')) == \'<mi>&#927;</mi>\'\n884.     assert mpp.doprint(Symbol(\'Pi\')) == \'<mi>&#928;</mi>\'\n885.     assert mpp.doprint(Symbol(\'Rho\')) == \'<mi>&#929;</mi>\'\n886.     assert mpp.doprint(Symbol(\'Sigma\')) == \'<mi>&#931;</mi>\'\n887.     assert mpp.doprint(Symbol(\'Tau\')) == \'<mi>&#932;</mi>\'\n888.     assert mpp.doprint(Symbol(\'Upsilon\')) == \'<mi>&#933;</mi>\'\n889.     assert mpp.doprint(Symbol(\'Phi\')) == \'<mi>&#934;</mi>\'\n890.     assert mpp.doprint(Symbol(\'Chi\')) == \'<mi>&#935;</mi>\'\n891.     assert mpp.doprint(Symbol(\'Psi\')) == \'<mi>&#936;</mi>\'\n892.     assert mpp.doprint(Symbol(\'Omega\')) == \'<mi>&#937;</mi>\'\n893. \n894. \n895. def test_presentation_mathml_order():\n896.     expr = x**3 + x**2*y + 3*x*y**3 + y**4\n897. \n898.     mp = MathMLPresentationPrinter({\'order\': \'lex\'})\n899.     mml = mp._print(expr)\n900.     assert mml.childNodes[0].nodeName == \'msup\'\n901.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'x\'\n902.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'3\'\n903. \n904.     assert mml.childNodes[6].nodeName == \'msup\'\n905.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == \'y\'\n906.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == \'4\'\n907. \n908.     mp = MathMLPresentationPrinter({\'order\': \'rev-lex\'})\n909.     mml = mp._print(expr)\n910. \n911.     assert mml.childNodes[0].nodeName == \'msup\'\n912.     assert mml.childNodes[0].childNodes[0].childNodes[0].nodeValue == \'y\'\n913.     assert mml.childNodes[0].childNodes[1].childNodes[0].nodeValue == \'4\'\n914. \n915.     assert mml.childNodes[6].nodeName == \'msup\'\n916.     assert mml.childNodes[6].childNodes[0].childNodes[0].nodeValue == \'x\'\n917.     assert mml.childNodes[6].childNodes[1].childNodes[0].nodeValue == \'3\'\n918. \n919. \n920. def test_presentation_settings():\n921.     raises(TypeError, lambda: mathml(Symbol("x"), printer=\'presentation\',method="garbage"))\n922. \n923. def test_toprettyxml_hooking():\n924.     # test that the patch doesn\'t influence the behavior of the standard library\n925.     import xml.dom.minidom\n926.     doc1 = xml.dom.minidom.parseString(\n927.         "<apply><plus/><ci>x</ci><cn>1</cn></apply>")\n928.     doc2 =  xml.dom.minidom.parseString(\n929.         "<mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow>")\n930.     prettyxml_old1 = doc1.toprettyxml()\n931.     prettyxml_old2 = doc2.toprettyxml()\n932. \n933.     mp.apply_patch()\n934.     mp.restore_patch()\n935. \n936.     assert prettyxml_old1 == doc1.toprettyxml()\n937.     assert prettyxml_old2 == doc2.toprettyxml()\n938. \n939. \n940. def test_print_basic():\n941.     expr = Basic(1, 2)\n942.     assert mpp.doprint(expr) == \'<mrow><mi>basic</mi><mfenced><mn>1</mn><mn>2</mn></mfenced></mrow>\'\n943.     assert mp.doprint(expr) == \'<basic><cn>1</cn><cn>2</cn></basic>\'\n944. \n945. \n946. def test_root_notation_print():\n947.     assert mathml(x**(S(1)/3), printer=\'presentation\') == \'<mroot><mi>x</mi><mn>3</mn></mroot>\'\n948.     assert mathml(x**(S(1)/3), printer=\'presentation\', root_notation=False) == \'<msup><mi>x</mi><mfrac><mn>1</mn><mn>3</mn></mfrac></msup>\'\n949.     assert mathml(x**(S(1)/3), printer=\'content\') == \'<apply><root/><degree><ci>3</ci></degree><ci>x</ci></apply>\'\n950.     assert mathml(x**(S(1)/3), printer=\'content\', root_notation=False) == \'<apply><power/><ci>x</ci><apply><divide/><cn>1</cn><cn>3</cn></apply></apply>\'\n951. \n952. \n953. def test_print_matrix_symbol():\n954.     A = MatrixSymbol(\'A\', 1, 2)\n955.     assert mpp.doprint(A) == \'<mi>A</mi>\'\n956.     assert mp.doprint(A) == \'<ci>A</ci>\'\n957.     assert mathml(A, printer=\'presentation\', mat_symbol_style="bold" )== \'<mi mathvariant="bold">A</mi>\'\n958.     assert mathml(A, mat_symbol_style="bold" )== \'<ci>A</ci>\' # No effect in content printer\n959. \n960. \n961. def test_print_random_symbol():\n962.     R = RandomSymbol(Symbol(\'R\'))\n963.     assert mpp.doprint(R) == \'<mi>R</mi>\'\n964.     assert mp.doprint(R) == \'<ci>R</ci>\'\n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n' additional_kwargs={} response_metadata={}
2025-10-05 18:30:37,726 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file', 'arguments': '{"relative_path": "sympy/printing/tests/test_mathml.py"}'}, '__gemini_function_call_thought_signatures__': {'e21b33ed-260e-47e6-8a59-ae727d8232ee': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 6383, 'end_index': 6638, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 19475, 'candidates_token_count': 19, 'total_token_count': 22857, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19475}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 19}], 'thoughts_token_count': 3363, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -26.627690365439967, 'model_name': 'gemini-2.5-pro'} id='run--76f16ff7-3d44-4a19-a95d-e994876b83dd-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'sympy/printing/tests/test_mathml.py'}, 'id': 'e21b33ed-260e-47e6-8a59-ae727d8232ee', 'type': 'tool_call'}] usage_metadata={'input_tokens': 19475, 'output_tokens': 19, 'total_tokens': 22857, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 3363}}
2025-10-05 18:30:40,642 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content="```python\nfrom sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \\\n    tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \\\n    pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \\\n    MatrixSymbol\nfrom sympy.stats.rv import RandomSymbol\nfrom sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \\\n    MathMLPrinter\n\nfrom sympy.utilities.pytest import raises\n\nx = Symbol('x')\ny = Symbol('y')\nmp = MathMLContentPrinter()\nmpp = MathMLPresentationPrinter()\n\n\ndef test_issue_15733():\n    x2 = Symbol('x2')\n    assert mathml(x2, printer='presentation') == '<mi>x2</mi>'\n\n```" additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 10, 'end_index': 265, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 306, 'end_index': 564, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 28705, 'candidates_token_count': 213, 'total_token_count': 28918, 'cached_content_token_count': 17470, 'prompt_tokens_details': [{'modality': 1, 'token_count': 32066}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17470}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 213}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0059203704198201495, 'model_name': 'gemini-2.5-pro'} id='run--32cab615-0fe6-44d1-a3df-25c3ad79c601-0' usage_metadata={'input_tokens': 28705, 'output_tokens': 213, 'total_tokens': 28918, 'input_token_details': {'cache_read': 17470}}
2025-10-05 18:30:57,870 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \\\\\\n    tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \\\\\\n    pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \\\\\\n    MatrixSymbol\\nfrom sympy.stats.rv import RandomSymbol\\nfrom sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \\\\\\n    MathMLPrinter\\n\\nfrom sympy.utilities.pytest import raises\\n\\nx = Symbol(\'x\')\\ny = Symbol(\'y\')\\nmp = MathMLContentPrinter()\\nmpp = MathMLPresentationPrinter()\\n\\n\\ndef test_issue_15733():\\n    x2 = Symbol(\'x2\')\\n    assert mathml(x2, printer=\'presentation\') == \'<mi>x2</mi>\'\\n", "relative_path": "sympy/printing/tests/test_mathml2.py"}'}, '__gemini_function_call_thought_signatures__': {'d9043b62-3abb-4bfe-8655-f4dc4702c761': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 5037, 'end_index': 5292, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 5333, 'end_index': 5591, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 6089, 'end_index': 6344, 'uri': 'https://gitlab2.educ.di.unito.it/testa/tln/-/blob/d6db5248d66a56fd565379a7f4b7fc70615fc9bc/parte2/testproject/venv/Lib/site-packages/sympy/printing/tests/test_mathml.py', 'title': '', 'license_': ''}, {'start_index': 6385, 'end_index': 6643, 'uri': 'https://github.com/Jbowman353/parallel-groebner', 'license_': 'BSD-3-Clause', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 17555, 'candidates_token_count': 230, 'total_token_count': 19434, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17555}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 230}], 'thoughts_token_count': 1649, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.9688428795855978, 'model_name': 'gemini-2.5-pro'} id='run--918d3425-ae58-4851-912e-f35bf93c419c-0' tool_calls=[{'name': 'create_file', 'args': {'content': "from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \\\n    tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \\\n    pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \\\n    MatrixSymbol\nfrom sympy.stats.rv import RandomSymbol\nfrom sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \\\n    MathMLPrinter\n\nfrom sympy.utilities.pytest import raises\n\nx = Symbol('x')\ny = Symbol('y')\nmp = MathMLContentPrinter()\nmpp = MathMLPresentationPrinter()\n\n\ndef test_issue_15733():\n    x2 = Symbol('x2')\n    assert mathml(x2, printer='presentation') == '<mi>x2</mi>'\n", 'relative_path': 'sympy/printing/tests/test_mathml2.py'}, 'id': 'd9043b62-3abb-4bfe-8655-f4dc4702c761', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17555, 'output_tokens': 230, 'total_tokens': 19434, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1649}}
2025-10-05 18:30:58,933 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='sympy/printing/tests/test_mathml2.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17808, 'candidates_token_count': 14, 'total_token_count': 17822, 'cached_content_token_count': 15907, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19455}], 'cache_tokens_details': [{'modality': 1, 'token_count': 15907}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 14}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -5.3088238928467035e-05, 'model_name': 'gemini-2.5-pro'} id='run--ab831429-e82f-45e3-9d26-912df6e48459-0' usage_metadata={'input_tokens': 17808, 'output_tokens': 14, 'total_tokens': 17822, 'input_token_details': {'cache_read': 15907}}
2025-10-05 18:30:59,038 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/sympy/printing/tests/test_mathml2.py b/sympy/printing/tests/test_mathml2.py
new file mode 100644
index 0000000000..94890d1489
--- /dev/null
+++ b/sympy/printing/tests/test_mathml2.py
@@ -0,0 +1,19 @@
+from sympy import diff, Integral, Limit, sin, Symbol, Integer, Rational, cos, \
+    tan, asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh, E, I, oo, \
+    pi, GoldenRatio, EulerGamma, Sum, Eq, Ne, Ge, Lt, Float, Matrix, Basic, S, \
+    MatrixSymbol
+from sympy.stats.rv import RandomSymbol
+from sympy.printing.mathml import mathml, MathMLContentPrinter, MathMLPresentationPrinter, \
+    MathMLPrinter
+
+from sympy.utilities.pytest import raises
+
+x = Symbol('x')
+y = Symbol('y')
+mp = MathMLContentPrinter()
+mpp = MathMLPresentationPrinter()
+
+
+def test_issue_15733():
+    x2 = Symbol('x2')
+    assert mathml(x2, printer='presentation') == '<mi>x2</mi>'

2025-10-05 18:30:59,039 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-05 18:30:59,051 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-05 18:30:59,051 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-05 18:30:59,379 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:30:59,379 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at 7014418535 Merge pull request #15891 from oscargus/boldmatrixsymbol

2025-10-05 18:30:59,379 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-05 18:30:59,480 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:30:59,480 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-05 18:30:59,480 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-05 18:30:59,480 - thread-139660780025408.app.docker.base_container - INFO - Creating directory sympy/printing/tests in the container
2025-10-05 18:30:59,480 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p sympy/printing/tests
2025-10-05 18:30:59,581 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:30:59,581 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-05 18:30:59,581 - thread-139660780025408.app.docker.base_container - INFO - Updating sympy/printing/tests/test_mathml2.py in the container
2025-10-05 18:30:59,584 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-05 18:31:01,460 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls -F"}'}, '__gemini_function_call_thought_signatures__': {'da8f34bc-06be-4037-be1a-ab8ac9509cea': 'CvADAR/MhbaVfKUYLuR1W9uWwC1+9kjOs8Sd8Rdd9KlhGHSqDSJauKvxHjWzXdwp+B0Ibh5EcxncNDDyvg2ULfiBIySHTf78Vts8cyzQTTY3nJab42QP7n6FVWKIt9TnzwpEpn2Gm0HQJfX9P6I12CvEd1+TMEYJKj/JRRWFKQVAisLACkEN+8+OoktS+Ch6nLAe4/aD6V8LO/mmIBExzngd0DsTiijHkR5HATGE00BCXNJl2G8HXXEl6/m7jOVMH53zcmizyiwdRDRyUXX73SywbL7D0U9D4JRvYGa9WHiPYoduJpzbgTYnKx954OyT/HCAKbEeGfjl1vjnh/JzXDXQFFSBJjytTkGxvfYOLYdVTNzLfsMWR40LId21vok8LWyYkdOjGlxZe5Yd4R1G4zN/qINJZXAQ2vjG+7Tz3ISJ77YpE2hCRUBkGzDGkeTb5xwQJ25QKmqEdOXIIMaORhP6M8IRg1KVZ8rmCl+Yk3Kh0oCuSq3rkZzVGsAZsvKfViVheu7dJwoEXzk9z/tojQuscV5bdpVeAXnMJNJKqSofECCJ42n+HwMCegjgRL++pLPZE46oZL2O3OOCUgxzEUMlT7YkYiQVM6K1SiAcKy1o8bxxn/Joe3VJSgEOlvCd0XQGhxHeBAoT11/e9/zoa5H0Fg=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 704, 'candidates_token_count': 7, 'total_token_count': 829, 'prompt_tokens_details': [{'modality': 1, 'token_count': 704}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 7}], 'thoughts_token_count': 118, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.810342516217913, 'model_name': 'gemini-2.5-pro'} id='run--8f565668-5caa-43b6-a484-79316343eb4c-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -F'}, 'id': 'da8f34bc-06be-4037-be1a-ab8ac9509cea', 'type': 'tool_call'}] usage_metadata={'input_tokens': 704, 'output_tokens': 7, 'total_tokens': 829, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 118}}
2025-10-05 18:31:01,461 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls -F
2025-10-05 18:31:01,562 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:31:01,562 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

AUTHORS			  bin/			 release/
CODE_OF_CONDUCT.md	  conftest.py		 setup.py*
CONTRIBUTING.md		  data/			 setupegg.py
LICENSE			  doc/			 sympy/
MANIFEST.in		  examples/		 sympy.egg-info/
PULL_REQUEST_TEMPLATE.md  github_deploy_key.enc  tox.ini.sample
README.rst		  isympy.py
azure-pipelines.yml	  pytest.ini

2025-10-05 18:31:03,007 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls -F bin/"}'}, '__gemini_function_call_thought_signatures__': {'6ec64797-f8ca-4105-a112-bdcbcf7a04ef': 'CpsCAR/MhbanpyszF1N0DX0EZRSrJSpOZRGqchq6XcAcm4AYILH9wq8eCAWYm2SXxsssAxm+kp5AagI5Ot+S20zUMHdi9tcav7n9yvlz2mxy4RH5TUe8F8x3NysiNrB8LVw+ofJyw7gnlQhSQa0X4BKrY8YD/JidSr942qrBkI9f5LbZV5Vo66N0O87dh1YNkgudSFbULvsnRZc74uLuBfRBzgagevkg6TSL1EMQ3q6nObooe+6tjy0zIK59E+xu4BT2AQt4BOA92XoikP8AW2Tx23alWRnMxChtgK3wgY6UjjSm400QOUYFiNCF6anmIE17+o37LtwQuiXpF+koy0vQLfWdaAXrkm4Nps/r5Oy4KTssjdjFQqmTxopH1A=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 829, 'candidates_token_count': 9, 'total_token_count': 912, 'prompt_tokens_details': [{'modality': 1, 'token_count': 945}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 9}], 'thoughts_token_count': 74, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5611696773105197, 'model_name': 'gemini-2.5-pro'} id='run--b7f8ef89-87bf-42cd-91cd-927fb1799b9e-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -F bin/'}, 'id': '6ec64797-f8ca-4105-a112-bdcbcf7a04ef', 'type': 'tool_call'}] usage_metadata={'input_tokens': 829, 'output_tokens': 9, 'total_tokens': 912, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 74}}
2025-10-05 18:31:03,008 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls -F bin/
2025-10-05 18:31:03,109 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-05 18:31:03,110 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

ask_update.py*		 get_sympy.py	      test_executable.py*
authors_update.py*	 isympy*	      test_external_imports.py*
coverage_doctest.py*	 mailmap_update.py*   test_import*
coverage_report.py*	 py.bench*	      test_import.py
diagnose_imports*	 strip_whitespace*    test_isolated*
doctest*		 sympy_time.py	      test_setup.py
generate_module_list.py  sympy_time_cache.py  test_travis.sh*
generate_test_list.py	 test*

2025-10-05 18:31:05,534 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "bin/test sympy/printing/tests/test_mathml2.py"}'}, '__gemini_function_call_thought_signatures__': {'5d2e71d1-04d7-409e-b40b-7a6e4c149e09': 'CtADAR/Mhba5/kqhdUJgrcQO/ae+e63zbgjIYjjaNROfvSAW29oYcxGg72zY0i6ivKvlq68gscPwSJqtjRi7WrmDTjptHF0Zef2V/OojD00nuF6HCXJ6Fhlp0bMRo/tsuKI7lmjp8D2YEdsSvNtnYTrJmpkuxpIzL6efvCSlIXB+0XP1/cP3yJM2jUglj5UuYgqBvoLsBj1LyKFI4L3+IwM/tqyx7OaGqMtlX/JduCz1OHnWrJ7x/OBF5MTRT+10T0p+1EtiW0Q8Ufs+HdHTFtqJiMyzbY+HnlsboZzSte8IVyl28zGsvW6O2skJguNP17jOhdkSVukQcc5qYGsiVHDcmo3H2ywT64B4SM27jnD5sO9HRzAfjXXvjb24AafbmhRuj+dCrgS25kUpTLiW3I5tkWY3RdMC2KwiJaFI6ueQXH5/7hT2+iHjYvLgRN3s5dzCtH6/D8kBG5D3miwtw0uR8rY9YXCgKDnTj3DkxbBAM9Ky5vZ4c0tCAck6IkG1Hg/rQmmXPU7FkiMWDK4iily/QTslIikgE8vtCeGZRqmrOxdpcIA3V+WI18u65djO6yg1n8xMaDgq3bmXZIt8D0Aw6pbI+qzkZjF9cpbGUE8zKi0='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 995, 'candidates_token_count': 20, 'total_token_count': 1156, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1183}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 20}], 'thoughts_token_count': 141, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.41949286460876467, 'model_name': 'gemini-2.5-pro'} id='run--3ef46be8-f779-4671-a706-de9afb55edd5-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'bin/test sympy/printing/tests/test_mathml2.py'}, 'id': '5d2e71d1-04d7-409e-b40b-7a6e4c149e09', 'type': 'tool_call'}] usage_metadata={'input_tokens': 995, 'output_tokens': 20, 'total_tokens': 1156, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 141}}
2025-10-05 18:31:05,536 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: bin/test sympy/printing/tests/test_mathml2.py
2025-10-05 18:31:06,813 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-05 18:31:06,813 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
bin/test sympy/printing/tests/te
est_mathml2.py

/testbed/sympy/solvers/diophantine.py:3188: SyntaxWarning: "is" with a literal. Did you mean "=="?
  if feasible is 1:  # it's prime and k == 2
/testbed/sympy/plotting/plot.py:520: SyntaxWarning: "is" with a literal. Did you mean "=="?
  if self.xscale is 'log':
/testbed/sympy/plotting/plot.py:540: SyntaxWarning: "is" with a literal. Did you mean "=="?
  if self.xscale is 'log':
/testbed/sympy/plotting/plot.py:553: SyntaxWarning: "is" with a literal. Did you mean "=="?
  if self.xscale is 'log':
/testbed/sympy/plotting/plot.py:560: SyntaxWarning: "is" with a literal. Did you mean "=="?
  if self.xscale is 'log':
============================= test process starts ==============================
executable:         /opt/miniconda3/envs/testbed/bin/python  (3.9.20-final-0) [CPython]
architecture:       64-bit
cache:              yes
ground types:       python 
numpy:              None
random seed:        78830698
hash randomization: on (PYTHONHASHSEED=490727731)

sympy/printing/tests/test_mathml2.py[1] [0;31mF[0m                                 [0;31m[FAIL][0m

________________________________________________________________________________
____________ sympy/printing/tests/test_mathml2.py:test_issue_15733 _____________
Traceback (most recent call last):
  File "/testbed/sympy/printing/tests/test_mathml2.py", line 19, in test_issue_15733
    assert mathml(x2, printer='presentation') == '<mi>x2</mi>'
AssertionError

============= tests finished: 0 passed, 1 failed, in 0.04 seconds ==============
DO *NOT* COMMIT!

2025-10-05 18:31:10,954 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='I have executed the test file `sympy/printing/tests/test_mathml2.py` as you requested. Here is the output:\n```\nbin/test sympy/printing/tests/te\nest_mathml2.py\n\n/testbed/sympy/solvers/diophantine.py:3188: SyntaxWarning: "is" with a literal. Did you mean "=="?\n  if feasible is 1:  # it\'s prime and k == 2\n/testbed/sympy/plotting/plot.py:520: SyntaxWarning: "is" with a literal. Did you mean "=="?\n  if self.xscale is \'log\':\n/testbed/sympy/plotting/plot.py:540: SyntaxWarning: "is" with a literal. Did you mean "=="?\n  if self.xscale is \'log\':\n/testbed/sympy/plotting/plot.py:553: SyntaxWarning: "is" with a literal. Did you mean "=="?\n  if self.xscale is \'log\':\n/testbed/sympy/plotting/plot.py:560: SyntaxWarning: "is" with a literal. Did you mean "=="?\n  if self.xscale is \'log\':\n============================= test process starts ==============================\nexecutable:         /opt/miniconda3/envs/testbed/bin/python  (3.9.20-final-0) [CPython]\narchitecture:       64-bit\ncache:              yes\nground types:       python \nnumpy:              None\nrandom seed:        78830698\nhash randomization: on (PYTHONHASHSEED=490727731)\n\nsympy/printing/tests/test_mathml2.py[1] F                                 [FAIL]\n\n________________________________________________________________________________\n____________ sympy/printing/tests/test_mathml2.py:test_issue_15733 _____________\nTraceback (most recent call last):\n  File "/testbed/sympy/printing/tests/test_mathml2.py", line 19, in test_issue_15733\n    assert mathml(x2, printer=\'presentation\') == \'<mi>x2</mi>\'\nAssertionError\n\n============= tests finished: 0 passed, 1 failed, in 0.04 seconds ==============\nDO *NOT* COMMIT!\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1559, 'candidates_token_count': 552, 'total_token_count': 2144, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1886}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 552}], 'thoughts_token_count': 33, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.01230201081953187, 'model_name': 'gemini-2.5-pro'} id='run--f990c59d-4970-4189-bb8a-155fbf82ca5b-0' usage_metadata={'input_tokens': 1559, 'output_tokens': 552, 'total_tokens': 2144, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 33}}
2025-10-05 18:31:21,122 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=True reproduced_bug_failure_log='Traceback (most recent call last):\n  File "/testbed/sympy/printing/tests/test_mathml2.py", line 19, in test_issue_15733\n    assert mathml(x2, printer=\'presentation\') == \'<mi>x2</mi>\'\nAssertionError' reproduced_bug_commands=['bin/test sympy/printing/tests/test_mathml2.py']
2025-10-05 18:31:21,123 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
2025-10-05 18:31:21,123 - thread-139660780025408.app.docker.base_container - INFO - Closing persistent shell...
2025-10-05 18:31:21,223 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
